var v1=Object.defineProperty;var Oa=We=>{throw TypeError(We)};var h1=(We,ze,it)=>ze in We?v1(We,ze,{enumerable:!0,configurable:!0,writable:!0,value:it}):We[ze]=it;var Rr=(We,ze,it)=>h1(We,typeof ze!="symbol"?ze+"":ze,it),cl=(We,ze,it)=>ze.has(We)||Oa("Cannot "+it);var ir=(We,ze,it)=>(cl(We,ze,"read from private field"),it?it.call(We):ze.get(We)),wn=(We,ze,it)=>ze.has(We)?Oa("Cannot add the same private member more than once"):ze instanceof WeakSet?ze.add(We):ze.set(We,it),ul=(We,ze,it,jr)=>(cl(We,ze,"write to private field"),jr?jr.call(We,it):ze.set(We,it),it),Ya=(We,ze,it)=>(cl(We,ze,"access private method"),it);(function(){"use strict";var br,Zr,gn,Jn,Wa,Va;var We=document.createElement("style");We.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-vzu0vi{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-vzu0vi:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-vzu0vi:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-vzu0vi:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-vzu0vi{display:none}.control-element.error.svelte-vzu0vi{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-vzu0vi{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-vzu0vi>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-vzu0vi>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-vzu0vi>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-vzu0vi>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-vzu0vi .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-vzu0vi .range-value_left,.control-element.svelte-vzu0vi .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-vzu0vi .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-vzu0vi .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-vzu0vi .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-vzu0vi .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-vzu0vi .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-vzu0vi .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-vzu0vi .textinput>input:active::placeholder,.control-element.svelte-vzu0vi .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-vzu0vi .textinput>input:focus,.control-element.svelte-vzu0vi .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .textinput.error>input,.control-element.svelte-vzu0vi .textinput.error>input:focus,.control-element.svelte-vzu0vi .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-vzu0vi .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-vzu0vi .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-vzu0vi .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1xneg44{width:100%;border-collapse:collapse}tr.svelte-1xneg44{width:100%}th.svelte-1xneg44{border-bottom:1px solid #a0a0a0}th.svelte-1xneg44,td.svelte-1xneg44{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}.app-container.svelte-1dk0fsp{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1dk0fsp{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1dk0fsp{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1dk0fsp>div:where(.svelte-1dk0fsp){border-radius:.25rem}.app-controls.svelte-1dk0fsp>.result-stats:where(.svelte-1dk0fsp){background:#e8e8e8}.help-text.svelte-1dk0fsp{margin-top:.25rem}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp),.help-text.svelte-1dk0fsp>div:where(.svelte-1dk0fsp){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp){border-collapse:collapse}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) thead:where(.svelte-1dk0fsp) tr:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp){font-weight:700;background:#f8f4e0}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) tbody:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1dk0fsp{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1dk0fsp{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1dk0fsp{grid-template-columns:min(320px,30%) 1fr}}.info-text.svelte-3v2vv7{line-height:1.5em}.info-text.svelte-3v2vv7>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-3v2vv7>.file-name:where(.svelte-3v2vv7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-1mqkfgh{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mqkfgh{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mqkfgh{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mqkfgh>div:where(.svelte-1mqkfgh){border-radius:.25rem}.app-controls.svelte-1mqkfgh>.result-stats:where(.svelte-1mqkfgh){background:#e8e8e8}.help-text.svelte-1mqkfgh{margin-top:.25rem}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mqkfgh{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1mqkfgh{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1mqkfgh{grid-template-columns:min(320px,30%) 1fr}}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(We);var ze=typeof document<"u"?document.currentScript:null;const it=!1;var jr=Array.isArray,Ua=Array.prototype.indexOf,eo=Array.from,Ha=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,fl=Object.getOwnPropertyDescriptors,Ga=Object.prototype,Xa=Array.prototype,to=Object.getPrototypeOf,dl=Object.isExtensible;function Fr(t){return typeof t=="function"}const vt=()=>{};function Ka(t){return typeof(t==null?void 0:t.then)=="function"}function Qa(t){return t()}function _n(t){for(var e=0;e<t.length;e++)t[e]()}const Wt=2,vl=4,yn=8,xn=16,rr=32,qr=64,kn=128,zt=256,En=512,Et=1024,Jt=2048,wr=4096,nr=8192,An=16384,hl=32768,Br=65536,Ja=1<<17,Za=1<<19,ml=1<<20,ro=1<<21,ur=Symbol("$state"),gl=Symbol("legacy props"),$a=Symbol("");function pl(t){return t===this.v}function bl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ei(t,e){return t!==e}function no(t){return!bl(t,this.v)}function ti(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ri(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ni(t){throw new Error("https://svelte.dev/e/effect_orphan")}function oi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function li(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function si(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ai(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ii(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Vr=!1,ci=!1;function ui(){Vr=!0}const oo=1,lo=2,wl=4,fi=8,di=16,vi=1,hi=2,mi=4,gi=8,pi=16,bi=4,_l=1,wi=2,ht=Symbol(),_i="http://www.w3.org/1999/xhtml";function yl(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let je=null;function Cn(t){je=t}function Tt(t){return xl().get(t)}function yi(t,e){return xl().set(t,e),e}function fe(t,e=!1,r){var l=je={p:je,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Vr&&!e&&(je.l={s:null,u:null,r1:[],r2:yr(!1)}),Ll(()=>{l.d=!0})}function de(t){const e=je;if(e!==null){const c=e.e;if(c!==null){var r=Re,l=Ve;e.e=null;try{for(var s=0;s<c.length;s++){var a=c[s];jt(a.effect),At(a.reaction),tn(a.fn)}}finally{jt(r),At(l)}}je=e.p,e.m=!0}return{}}function _r(){return!Vr||je!==null&&je.l===null}function xl(t){return je===null&&yl(),je.c??(je.c=new Map(xi(je)||void 0))}function xi(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}function et(t){if(typeof t!="object"||t===null||ur in t)return t;const e=to(t);if(e!==Ga&&e!==Xa)return t;var r=new Map,l=jr(t),s=ne(0),a=Ve,c=u=>{var f=Ve;At(a);var d=u();return At(f),d};return l&&r.set("length",ne(t.length)),new Proxy(t,{defineProperty(u,f,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&si();var v=r.get(f);return v===void 0?(v=c(()=>ne(d.value)),r.set(f,v)):D(v,c(()=>et(d.value))),!0},deleteProperty(u,f){var d=r.get(f);if(d===void 0)f in u&&(r.set(f,c(()=>ne(ht))),so(s));else{if(l&&typeof f=="string"){var v=r.get("length"),h=Number(f);Number.isInteger(h)&&h<v.v&&D(v,h)}D(d,ht),so(s)}return!0},get(u,f,d){var g;if(f===ur)return t;var v=r.get(f),h=f in u;if(v===void 0&&(!h||(g=cr(u,f))!=null&&g.writable)&&(v=c(()=>ne(et(h?u[f]:ht))),r.set(f,v)),v!==void 0){var m=o(v);return m===ht?void 0:m}return Reflect.get(u,f,d)},getOwnPropertyDescriptor(u,f){var d=Reflect.getOwnPropertyDescriptor(u,f);if(d&&"value"in d){var v=r.get(f);v&&(d.value=o(v))}else if(d===void 0){var h=r.get(f),m=h==null?void 0:h.v;if(h!==void 0&&m!==ht)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return d},has(u,f){var m;if(f===ur)return!0;var d=r.get(f),v=d!==void 0&&d.v!==ht||Reflect.has(u,f);if(d!==void 0||Re!==null&&(!v||(m=cr(u,f))!=null&&m.writable)){d===void 0&&(d=c(()=>ne(v?et(u[f]):ht)),r.set(f,d));var h=o(d);if(h===ht)return!1}return v},set(u,f,d,v){var A;var h=r.get(f),m=f in u;if(l&&f==="length")for(var g=d;g<h.v;g+=1){var b=r.get(g+"");b!==void 0?D(b,ht):g in u&&(b=c(()=>ne(ht)),r.set(g+"",b))}h===void 0?(!m||(A=cr(u,f))!=null&&A.writable)&&(h=c(()=>ne(void 0)),D(h,c(()=>et(d))),r.set(f,h)):(m=h.v!==ht,D(h,c(()=>et(d))));var w=Reflect.getOwnPropertyDescriptor(u,f);if(w!=null&&w.set&&w.set.call(v,d),!m){if(l&&typeof f=="string"){var p=r.get("length"),_=Number(f);Number.isInteger(_)&&_>=p.v&&D(p,_+1)}so(s)}return!0},ownKeys(u){o(s);var f=Reflect.ownKeys(u).filter(h=>{var m=r.get(h);return m===void 0||m.v!==ht});for(var[d,v]of r)v.v!==ht&&!(d in u)&&f.push(d);return f},setPrototypeOf(){ai()}})}function so(t,e=1){D(t,t.v+e)}function Dr(t){var e=Wt|Jt,r=Ve!==null&&(Ve.f&Wt)!==0?Ve:null;return Re===null||r!==null&&(r.f&zt)!==0?e|=zt:Re.f|=ml,{ctx:je,deps:null,effects:null,equals:pl,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??Re}}function E(t){const e=Dr(t);return Dl(e),e}function kl(t){const e=Dr(t);return e.equals=no,e}function El(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)or(e[r])}}function ki(t){for(var e=t.parent;e!==null;){if((e.f&Wt)===0)return e;e=e.parent}return null}function Al(t){var e,r=Re;jt(ki(t));try{El(t),e=Hl(t)}finally{jt(r)}return e}function Cl(t){var e=Al(t),r=(fr||(t.f&zt)!==0)&&t.deps!==null?wr:Et;Ut(t,r),t.equals(e)||(t.v=e,t.wv=Yl())}const en=new Map;function yr(t,e){var r={f:0,v:t,reactions:null,equals:pl,rv:0,wv:0};return r}function ne(t,e){const r=yr(t);return Dl(r),r}function Mn(t,e=!1){var l;const r=yr(t);return e||(r.equals=no),Vr&&je!==null&&je.l!==null&&((l=je.l).s??(l.s=[])).push(r),r}function D(t,e,r=!1){Ve!==null&&!$t&&_r()&&(Ve.f&(Wt|xn))!==0&&!(_t!=null&&_t.includes(t))&&ii();let l=r?et(e):e;return Or(t,l)}function Or(t,e){if(!t.equals(e)){var r=t.v;on?en.set(t,e):en.set(t,r),t.v=e,(t.f&Wt)!==0&&((t.f&Jt)!==0&&Al(t),Ut(t,(t.f&zt)===0?Et:wr)),t.wv=Yl(),Ml(t,Jt),_r()&&Re!==null&&(Re.f&Et)!==0&&(Re.f&(rr|qr))===0&&(Ft===null?Pi([t]):Ft.push(t))}return e}function Ml(t,e){var r=t.reactions;if(r!==null)for(var l=_r(),s=r.length,a=0;a<s;a++){var c=r[a],u=c.f;(u&Jt)===0&&(!l&&c===Re||(Ut(c,e),(u&(Et|zt))!==0&&((u&Wt)!==0?Ml(c,wr):Rn(c))))}}let Ei=!1;var ao,Sl,Nl,zl;function Ai(){if(ao===void 0){ao=window,Sl=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Nl=cr(e,"firstChild").get,zl=cr(e,"nextSibling").get,dl(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),dl(r)&&(r.__t=void 0)}}function io(t=""){return document.createTextNode(t)}function Lt(t){return Nl.call(t)}function Sn(t){return zl.call(t)}function B(t,e){return Lt(t)}function $(t,e){{var r=Lt(t);return r instanceof Comment&&r.data===""?Sn(r):r}}function V(t,e=1,r=!1){let l=t;for(;e--;)l=Sn(l);return l}function Ci(t){t.textContent=""}function Tl(t){Re===null&&Ve===null&&ni(),Ve!==null&&(Ve.f&zt)!==0&&Re===null&&ri(),on&&ti()}function Mi(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Yr(t,e,r,l=!0){var s=Re,a={ctx:je,deps:null,nodes_start:null,nodes_end:null,f:t|Jt,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(r)try{vo(a),a.f|=hl}catch(f){throw or(a),f}else e!==null&&Rn(a);var c=r&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(ml|kn))===0;if(!c&&l&&(s!==null&&Mi(a,s),Ve!==null&&(Ve.f&Wt)!==0)){var u=Ve;(u.effects??(u.effects=[])).push(a)}return a}function Ll(t){const e=Yr(yn,null,!1);return Ut(e,Et),e.teardown=t,e}function Be(t){Tl();var e=Re!==null&&(Re.f&rr)!==0&&je!==null&&!je.m;if(e){var r=je;(r.e??(r.e=[])).push({fn:t,effect:Re,reaction:Ve})}else{var l=tn(t);return l}}function Si(t){return Tl(),co(t)}function Ni(t){const e=Yr(qr,t,!0);return(r={})=>new Promise(l=>{r.outro?lr(e,()=>{or(e),l(void 0)}):(or(e),l(void 0))})}function tn(t){return Yr(vl,t,!1)}function co(t){return Yr(yn,t,!0)}function ee(t,e=[],r=Dr){const l=e.map(r);return xr(()=>t(...l.map(o)))}function xr(t,e=0){return Yr(yn|xn|e,t,!0)}function Zt(t,e=!0){return Yr(yn|rr,t,!0,e)}function Pl(t){var e=t.teardown;if(e!==null){const r=on,l=Ve;Vl(!0),At(null);try{e.call(null)}finally{Vl(r),At(l)}}}function Il(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var l=r.next;(r.f&qr)!==0?r.parent=null:or(r,e),r=l}}function zi(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&rr)===0&&or(e),e=r}}function or(t,e=!0){var r=!1;(e||(t.f&Za)!==0)&&t.nodes_start!==null&&(Rl(t.nodes_start,t.nodes_end),r=!0),Il(t,e&&!r),In(t,0),Ut(t,An);var l=t.transitions;if(l!==null)for(const a of l)a.stop();Pl(t);var s=t.parent;s!==null&&s.first!==null&&jl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Rl(t,e){for(;t!==null;){var r=t===e?null:Sn(t);t.remove(),t=r}}function jl(t){var e=t.parent,r=t.prev,l=t.next;r!==null&&(r.next=l),l!==null&&(l.prev=r),e!==null&&(e.first===t&&(e.first=l),e.last===t&&(e.last=r))}function lr(t,e){var r=[];uo(t,r,!0),Fl(r,()=>{or(t),e&&e()})}function Fl(t,e){var r=t.length;if(r>0){var l=()=>--r||e();for(var s of t)s.out(l)}else e()}function uo(t,e,r){if((t.f&nr)===0){if(t.f^=nr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var l=t.first;l!==null;){var s=l.next,a=(l.f&Br)!==0||(l.f&rr)!==0;uo(l,e,a?r:!1),l=s}}}function Wr(t){ql(t,!0)}function ql(t,e){if((t.f&nr)!==0){t.f^=nr,(t.f&Et)===0&&(t.f^=Et),sn(t)&&(Ut(t,Jt),Rn(t));for(var r=t.first;r!==null;){var l=r.next,s=(r.f&Br)!==0||(r.f&rr)!==0;ql(r,s?e:!1),r=l}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let rn=[],fo=[];function Bl(){var t=rn;rn=[],_n(t)}function Ti(){var t=fo;fo=[],_n(t)}function nn(t){rn.length===0&&queueMicrotask(Bl),rn.push(t)}function Li(){rn.length>0&&Bl(),fo.length>0&&Ti()}let Nn=!1,zn=!1,Tn=null,kr=!1,on=!1;function Vl(t){on=t}let ln=[],m1=[],Ve=null,$t=!1;function At(t){Ve=t}let Re=null;function jt(t){Re=t}let _t=null;function Dl(t){Ve!==null&&Ve.f&ro&&(_t===null?_t=[t]:_t.push(t))}let yt=null,Pt=0,Ft=null;function Pi(t){Ft=t}let Ol=1,Ln=0,fr=!1;function Yl(){return++Ol}function sn(t){var h;var e=t.f;if((e&Jt)!==0)return!0;if((e&wr)!==0){var r=t.deps,l=(e&zt)!==0;if(r!==null){var s,a,c=(e&En)!==0,u=l&&Re!==null&&!fr,f=r.length;if(c||u){var d=t,v=d.parent;for(s=0;s<f;s++)a=r[s],(c||!((h=a==null?void 0:a.reactions)!=null&&h.includes(d)))&&(a.reactions??(a.reactions=[])).push(d);c&&(d.f^=En),u&&v!==null&&(v.f&zt)===0&&(d.f^=zt)}for(s=0;s<f;s++)if(a=r[s],sn(a)&&Cl(a),a.wv>t.wv)return!0}(!l||Re!==null&&!fr)&&Ut(t,Et)}return!1}function Ii(t,e){for(var r=e;r!==null;){if((r.f&kn)!==0)try{r.fn(t);return}catch{r.f^=kn}r=r.parent}throw Nn=!1,t}function Wl(t){return(t.f&An)===0&&(t.parent===null||(t.parent.f&kn)===0)}function Pn(t,e,r,l){if(Nn){if(r===null&&(Nn=!1),Wl(e))throw t;return}if(r!==null&&(Nn=!0),Ii(t,e),Wl(e))throw t}function Ul(t,e,r=!0){var l=t.reactions;if(l!==null)for(var s=0;s<l.length;s++){var a=l[s];_t!=null&&_t.includes(t)||((a.f&Wt)!==0?Ul(a,e,!1):e===a&&(r?Ut(a,Jt):(a.f&Et)!==0&&Ut(a,wr),Rn(a)))}}function Hl(t){var g;var e=yt,r=Pt,l=Ft,s=Ve,a=fr,c=_t,u=je,f=$t,d=t.f;yt=null,Pt=0,Ft=null,fr=(d&zt)!==0&&($t||!kr||Ve===null),Ve=(d&(rr|qr))===0?t:null,_t=null,Cn(t.ctx),$t=!1,Ln++,t.f|=ro;try{var v=(0,t.fn)(),h=t.deps;if(yt!==null){var m;if(In(t,Pt),h!==null&&Pt>0)for(h.length=Pt+yt.length,m=0;m<yt.length;m++)h[Pt+m]=yt[m];else t.deps=h=yt;if(!fr)for(m=Pt;m<h.length;m++)((g=h[m]).reactions??(g.reactions=[])).push(t)}else h!==null&&Pt<h.length&&(In(t,Pt),h.length=Pt);if(_r()&&Ft!==null&&!$t&&h!==null&&(t.f&(Wt|wr|Jt))===0)for(m=0;m<Ft.length;m++)Ul(Ft[m],t);return s!==null&&s!==t&&(Ln++,Ft!==null&&(l===null?l=Ft:l.push(...Ft))),v}finally{yt=e,Pt=r,Ft=l,Ve=s,fr=a,_t=c,Cn(u),$t=f,t.f^=ro}}function Ri(t,e){let r=e.reactions;if(r!==null){var l=Ua.call(r,t);if(l!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[l]=r[s],r.pop())}}r===null&&(e.f&Wt)!==0&&(yt===null||!yt.includes(e))&&(Ut(e,wr),(e.f&(zt|En))===0&&(e.f^=En),El(e),In(e,0))}function In(t,e){var r=t.deps;if(r!==null)for(var l=e;l<r.length;l++)Ri(t,r[l])}function vo(t){var e=t.f;if((e&An)===0){Ut(t,Et);var r=Re,l=je,s=kr;Re=t,kr=!0;try{(e&xn)!==0?zi(t):Il(t),Pl(t);var a=Hl(t);t.teardown=typeof a=="function"?a:null,t.wv=Ol;var c=t.deps,u;it&&ci&&t.f&Jt}catch(f){Pn(f,t,r,l||t.ctx)}finally{kr=s,Re=r}}}function ji(){try{oi()}catch(t){if(Tn!==null)Pn(t,Tn,null);else throw t}}function Gl(){var t=kr;try{var e=0;for(kr=!0;ln.length>0;){e++>1e3&&ji();var r=ln,l=r.length;ln=[];for(var s=0;s<l;s++){var a=qi(r[s]);Fi(a)}en.clear()}}finally{zn=!1,kr=t,Tn=null}}function Fi(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var l=t[r];if((l.f&(An|nr))===0)try{sn(l)&&(vo(l),l.deps===null&&l.first===null&&l.nodes_start===null&&(l.teardown===null?jl(l):l.fn=null))}catch(s){Pn(s,l,null,l.ctx)}}}function Rn(t){zn||(zn=!0,queueMicrotask(Gl));for(var e=Tn=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(qr|rr))!==0){if((r&Et)===0)return;e.f^=Et}}ln.push(e)}function qi(t){for(var e=[],r=t;r!==null;){var l=r.f,s=(l&(rr|qr))!==0,a=s&&(l&Et)!==0;if(!a&&(l&nr)===0){if((l&vl)!==0)e.push(r);else if(s)r.f^=Et;else try{sn(r)&&vo(r)}catch(f){Pn(f,r,null,r.ctx)}var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return e}function Bi(t){for(var e;;){if(Li(),ln.length===0)return e;zn=!0,Gl()}}function o(t){var e=t.f,r=(e&Wt)!==0;if(Ve!==null&&!$t){if(!(_t!=null&&_t.includes(t))){var l=Ve.deps;t.rv<Ln&&(t.rv=Ln,yt===null&&l!==null&&l[Pt]===t?Pt++:yt===null?yt=[t]:(!fr||!yt.includes(t))&&yt.push(t))}}else if(r&&t.deps===null&&t.effects===null){var s=t,a=s.parent;a!==null&&(a.f&zt)===0&&(s.f^=zt)}return r&&(s=t,sn(s)&&Cl(s)),on&&en.has(t)?en.get(t):t.v}function er(t){var e=$t;try{return $t=!0,t()}finally{$t=e}}const Vi=-7169;function Ut(t,e){t.f=t.f&Vi|e}function Di(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ur in t)ho(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&ur in r&&ho(r)}}}function ho(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let l in t)try{ho(t[l],e)}catch{}const r=to(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const l=fl(r);for(let s in l){const a=l[s].get;if(a)try{a.call(t)}catch{}}}}}const Oi=["touchstart","touchmove"];function Yi(t){return Oi.includes(t)}let Xl=!1;function Wi(){Xl||(Xl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function mo(t){var e=Ve,r=Re;At(null),jt(null);try{return t()}finally{At(e),jt(r)}}function Ui(t,e,r,l=r){t.addEventListener(e,()=>mo(r));const s=t.__on_r;s?t.__on_r=()=>{s(),l(!0)}:t.__on_r=()=>l(!0),Wi()}const Kl=new Set,go=new Set;function Hi(t,e,r,l={}){function s(a){if(l.capture||an.call(e,a),!a.cancelBubble)return mo(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?nn(()=>{e.addEventListener(t,s,l)}):e.addEventListener(t,s,l),s}function Er(t,e,r,l,s){var a={capture:l,passive:s},c=Hi(t,e,r,a);(e===document.body||e===window||e===document)&&Ll(()=>{e.removeEventListener(t,c,a)})}function tt(t){for(var e=0;e<t.length;e++)Kl.add(t[e]);for(var r of go)r(t)}function an(t){var A;var e=this,r=e.ownerDocument,l=t.type,s=((A=t.composedPath)==null?void 0:A.call(t))||[],a=s[0]||t.target,c=0,u=t.__root;if(u){var f=s.indexOf(u);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var d=s.indexOf(e);if(d===-1)return;f<=d&&(c=f)}if(a=s[c]||t.target,a!==e){Ha(t,"currentTarget",{configurable:!0,get(){return a||r}});var v=Ve,h=Re;At(null),jt(null);try{for(var m,g=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var w=a["__"+l];if(w!=null&&(!a.disabled||t.target===a))if(jr(w)){var[p,..._]=w;p.apply(a,[t,..._])}else w.call(a,t)}catch(M){m?g.push(M):m=M}if(t.cancelBubble||b===e||b===null)break;a=b}if(m){for(let M of g)queueMicrotask(()=>{throw M});throw m}}finally{t.__root=e,delete t.currentTarget,At(v),jt(h)}}}function po(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Ur(t,e){var r=Re;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function K(t,e){var r=(e&_l)!==0,l=(e&wi)!==0,s,a=!t.startsWith("<!>");return()=>{s===void 0&&(s=po(a?t:"<!>"+t),r||(s=Lt(s)));var c=l||Sl?document.importNode(s,!0):s.cloneNode(!0);if(r){var u=Lt(c),f=c.lastChild;Ur(u,f)}else Ur(c,c);return c}}function ie(t,e,r="svg"){var l=!t.startsWith("<!>"),s=(e&_l)!==0,a=`<${r}>${l?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var u=po(a),f=Lt(u);if(s)for(c=document.createDocumentFragment();Lt(f);)c.appendChild(Lt(f));else c=Lt(f)}var d=c.cloneNode(!0);if(s){var v=Lt(d),h=d.lastChild;Ur(v,h)}else Ur(d,d);return d}}function me(){var t=document.createDocumentFragment(),e=document.createComment(""),r=io();return t.append(e,r),Ur(e,r),t}function T(t,e){t!==null&&t.before(e)}let bo=!0;function ve(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Gi(t,e){return Xi(t,e)}const Hr=new Map;function Xi(t,{target:e,anchor:r,props:l={},events:s,context:a,intro:c=!0}){Ai();var u=new Set,f=h=>{for(var m=0;m<h.length;m++){var g=h[m];if(!u.has(g)){u.add(g);var b=Yi(g);e.addEventListener(g,an,{passive:b});var w=Hr.get(g);w===void 0?(document.addEventListener(g,an,{passive:b}),Hr.set(g,1)):Hr.set(g,w+1)}}};f(eo(Kl)),go.add(f);var d=void 0,v=Ni(()=>{var h=r??e.appendChild(io());return Zt(()=>{if(a){fe({});var m=je;m.c=a}s&&(l.$$events=s),bo=c,d=t(h,l)||{},bo=!0,a&&de()}),()=>{var b;for(var m of u){e.removeEventListener(m,an);var g=Hr.get(m);--g===0?(document.removeEventListener(m,an),Hr.delete(m)):Hr.set(m,g)}go.delete(f),h!==r&&((b=h.parentNode)==null||b.removeChild(h))}});return Ki.set(d,v),d}let Ki=new WeakMap;const wo=0,jn=1,_o=2;function Ql(t,e,r,l,s){var a=t,c=_r(),u=je,f=ht,d,v,h,m=(c?yr:Mn)(void 0),g=(c?yr:Mn)(void 0),b=!1;function w(_,A){b=!0,A&&(jt(p),At(p),Cn(u));try{_===wo&&r&&(d?Wr(d):d=Zt(()=>r(a))),_===_o&&s&&(h?Wr(h):h=Zt(()=>s(a,g))),_!==wo&&d&&lr(d,()=>d=null),_!==jn&&v&&lr(v,()=>v=null),_!==_o&&h&&lr(h,()=>h=null)}finally{A&&(Cn(null),At(null),jt(null),Bi())}}var p=xr(()=>{if(f!==(f=e())){if(Ka(f)){var _=f;b=!1,_.then(A=>{_===f&&(Or(m,A),w(jn,!0))},A=>{if(_===f&&(Or(g,A),w(_o,!0),!s))throw g.v}),nn(()=>{b||w(wo,!0)})}else Or(m,f),w(jn,!1);return()=>f=ht}})}function U(t,e,[r,l]=[0,0]){var s=t,a=null,c=null,u=ht,f=r>0?Br:0,d=!1;const v=(m,g=!0)=>{d=!0,h(g,m)},h=(m,g)=>{u!==(u=m)&&(u?(a?Wr(a):g&&(a=Zt(()=>g(s))),c&&lr(c,()=>{c=null})):(c?Wr(c):g&&(c=Zt(()=>g(s,[r+1,l]))),a&&lr(a,()=>{a=null})))};xr(()=>{d=!1,e(v),d||h(null,null)},f)}function Fn(t,e,r){var l=t,s=ht,a,c=_r()?ei:bl;xr(()=>{c(s,s=e())&&(a&&lr(a),a=Zt(()=>r(l)))})}function Qe(t,e){return e}function Qi(t,e,r,l){for(var s=[],a=e.length,c=0;c<a;c++)uo(e[c].e,s,!0);var u=a>0&&s.length===0&&r!==null;if(u){var f=r.parentNode;Ci(f),f.append(r),l.clear(),dr(t,e[0].prev,e[a-1].next)}Fl(s,()=>{for(var d=0;d<a;d++){var v=e[d];u||(l.delete(v.k),dr(t,v.prev,v.next)),or(v.e,!u)}})}function Ue(t,e,r,l,s,a=null){var c=t,u={flags:e,items:new Map,first:null},f=(e&wl)!==0;if(f){var d=t;c=d.appendChild(io())}var v=null,h=!1,m=kl(()=>{var g=r();return jr(g)?g:g==null?[]:eo(g)});xr(()=>{var g=o(m),b=g.length;h&&b===0||(h=b===0,Ji(g,u,c,s,e,l,r),a!==null&&(b===0?v?Wr(v):v=Zt(()=>a(c)):v!==null&&lr(v,()=>{v=null})),o(m))})}function Ji(t,e,r,l,s,a,c){var Y,j,W,Q;var u=(s&fi)!==0,f=(s&(oo|lo))!==0,d=t.length,v=e.items,h=e.first,m=h,g,b=null,w,p=[],_=[],A,M,y,k;if(u)for(k=0;k<d;k+=1)A=t[k],M=a(A,k),y=v.get(M),y!==void 0&&((Y=y.a)==null||Y.measure(),(w??(w=new Set)).add(y));for(k=0;k<d;k+=1){if(A=t[k],M=a(A,k),y=v.get(M),y===void 0){var S=m?m.e.nodes_start:r;b=$i(S,e,b,b===null?e.first:b.next,A,M,k,l,s,c),v.set(M,b),p=[],_=[],m=b.next;continue}if(f&&Zi(y,A,k,s),(y.e.f&nr)!==0&&(Wr(y.e),u&&((j=y.a)==null||j.unfix(),(w??(w=new Set)).delete(y))),y!==m){if(g!==void 0&&g.has(y)){if(p.length<_.length){var C=_[0],N;b=C.prev;var L=p[0],I=p[p.length-1];for(N=0;N<p.length;N+=1)Jl(p[N],C,r);for(N=0;N<_.length;N+=1)g.delete(_[N]);dr(e,L.prev,I.next),dr(e,b,L),dr(e,I,C),m=C,b=I,k-=1,p=[],_=[]}else g.delete(y),Jl(y,m,r),dr(e,y.prev,y.next),dr(e,y,b===null?e.first:b.next),dr(e,b,y),b=y;continue}for(p=[],_=[];m!==null&&m.k!==M;)(m.e.f&nr)===0&&(g??(g=new Set)).add(m),_.push(m),m=m.next;if(m===null)continue;y=m}p.push(y),b=y,m=y.next}if(m!==null||g!==void 0){for(var R=g===void 0?[]:eo(g);m!==null;)(m.e.f&nr)===0&&R.push(m),m=m.next;var P=R.length;if(P>0){var O=(s&wl)!==0&&d===0?r:null;if(u){for(k=0;k<P;k+=1)(W=R[k].a)==null||W.measure();for(k=0;k<P;k+=1)(Q=R[k].a)==null||Q.fix()}Qi(e,R,O,v)}}u&&nn(()=>{var Z;if(w!==void 0)for(y of w)(Z=y.a)==null||Z.apply()}),Re.first=e.first&&e.first.e,Re.last=b&&b.e}function Zi(t,e,r,l){(l&oo)!==0&&Or(t.v,e),(l&lo)!==0?Or(t.i,r):t.i=r}function $i(t,e,r,l,s,a,c,u,f,d){var v=(f&oo)!==0,h=(f&di)===0,m=v?h?Mn(s):yr(s):s,g=(f&lo)===0?c:yr(c),b={i:g,v:m,k:a,a:null,e:null,prev:r,next:l};try{return b.e=Zt(()=>u(t,m,g,d),Ei),b.e.prev=r&&r.e,b.e.next=l&&l.e,r===null?e.first=b:(r.next=b,r.e.next=b.e),l!==null&&(l.prev=b,l.e.prev=b.e),b}finally{}}function Jl(t,e,r){for(var l=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==l;){var c=Sn(a);s.before(a),a=c}}function dr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function bt(t,e,r=!1,l=!1,s=!1){var a=t,c="";ee(()=>{var u=Re;if(c!==(c=e()??"")&&(u.nodes_start!==null&&(Rl(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),c!=="")){var f=c+"";r?f=`<svg>${f}</svg>`:l&&(f=`<math>${f}</math>`);var d=po(f);if((r||l)&&(d=Lt(d)),Ur(Lt(d),d.lastChild),r||l)for(;Lt(d);)a.before(Lt(d));else a.before(d)}})}function vr(t,e,...r){var l=t,s=vt,a;xr(()=>{s!==(s=e())&&(a&&(or(a),a=null),a=Zt(()=>s(l,...r)))},Br)}function yo(t,e,r){var l=t,s,a;xr(()=>{s!==(s=e())&&(a&&(lr(a),a=null),s&&(a=Zt(()=>r(l,s))))},Br)}function Zl(t){var e,r,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Zl(t[e]))&&(l&&(l+=" "),l+=r)}else for(r in t)t[r]&&(l&&(l+=" "),l+=r);return l}function ec(){for(var t,e,r=0,l="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Zl(t))&&(l&&(l+=" "),l+=e);return l}function tc(t){return typeof t=="object"?ec(t):t??""}const $l=[...`
\r\f \v\uFEFF`];function rc(t,e,r){var l=t==null?"":""+t;if(e&&(l=l?l+" "+e:e),r){for(var s in r)if(r[s])l=l?l+" "+s:s;else if(l.length)for(var a=s.length,c=0;(c=l.indexOf(s,c))>=0;){var u=c+a;(c===0||$l.includes(l[c-1]))&&(u===l.length||$l.includes(l[u]))?l=(c===0?"":l.substring(0,c))+l.substring(u+1):c=u}}return l===""?null:l}function nc(t,e){return t==null?null:String(t)}function ut(t,e,r,l,s,a){var c=t.__className;if(c!==r||c===void 0){var u=rc(r,l,a);u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u),t.__className=r}else if(a&&s!==a)for(var f in a){var d=!!a[f];(s==null||d!==!!s[f])&&t.classList.toggle(f,d)}return a}function nt(t,e,r,l){var s=t.__style;if(s!==e){var a=nc(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return l}const oc=Symbol("is custom element"),lc=Symbol("is html");function z(t,e,r,l){var s=sc(t);s[e]!==(s[e]=r)&&(e==="loading"&&(t[$a]=r),r==null?t.removeAttribute(e):typeof r!="string"&&ac(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function sc(t){return t.__attributes??(t.__attributes={[oc]:t.nodeName.includes("-"),[lc]:t.namespaceURI===_i})}var es=new Map;function ac(t){var e=es.get(t.nodeName);if(e)return e;es.set(t.nodeName,e=[]);for(var r,l=t,s=Element.prototype;s!==l;){r=fl(l);for(var a in r)r[a].set&&e.push(a);l=to(l)}return e}const ic=()=>performance.now(),sr={tick:t=>requestAnimationFrame(t),now:()=>ic(),tasks:new Set};function ts(){const t=sr.now();sr.tasks.forEach(e=>{e.c(t)||(sr.tasks.delete(e),e.f())}),sr.tasks.size!==0&&sr.tick(ts)}function cc(t){let e;return sr.tasks.size===0&&sr.tick(ts),{promise:new Promise(r=>{sr.tasks.add(e={c:t,f:r})}),abort(){sr.tasks.delete(e)}}}function qn(t,e){mo(()=>{t.dispatchEvent(new CustomEvent(e))})}function uc(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function rs(t){const e={},r=t.split(";");for(const l of r){const[s,a]=l.split(":");if(!s||a===void 0)break;const c=uc(s.trim());e[c]=a.trim()}return e}const fc=t=>t;function dc(t,e,r,l){var s=(t&bi)!==0,a="both",c,u=e.inert,f=e.style.overflow,d,v;function h(){var p=Ve,_=Re;At(null),jt(null);try{return c??(c=r()(e,(l==null?void 0:l())??{},{direction:a}))}finally{At(p),jt(_)}}var m={is_global:s,in(){e.inert=u,qn(e,"introstart"),d=xo(e,h(),v,1,()=>{qn(e,"introend"),d==null||d.abort(),d=c=void 0,e.style.overflow=f})},out(p){e.inert=!0,qn(e,"outrostart"),v=xo(e,h(),d,0,()=>{qn(e,"outroend"),p==null||p()})},stop:()=>{d==null||d.abort(),v==null||v.abort()}},g=Re;if((g.transitions??(g.transitions=[])).push(m),bo){var b=s;if(!b){for(var w=g.parent;w&&(w.f&Br)!==0;)for(;(w=w.parent)&&(w.f&xn)===0;);b=!w||(w.f&hl)!==0}b&&tn(()=>{er(()=>m.in())})}}function xo(t,e,r,l,s){var a=l===1;if(Fr(e)){var c,u=!1;return nn(()=>{if(!u){var p=e({direction:a?"in":"out"});c=xo(t,p,r,l,s)}}),{abort:()=>{u=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return s(),{abort:vt,deactivate:vt,reset:vt,t:()=>l};const{delay:f=0,css:d,tick:v,easing:h=fc}=e;var m=[];if(a&&r===void 0&&(v&&v(0,1),d)){var g=rs(d(0,1));m.push(g,g)}var b=()=>1-l,w=t.animate(m,{duration:f});return w.onfinish=()=>{var p=(r==null?void 0:r.t())??1-l;r==null||r.abort();var _=l-p,A=e.duration*Math.abs(_),M=[];if(A>0){var y=!1;if(d)for(var k=Math.ceil(A/16.666666666666668),S=0;S<=k;S+=1){var C=p+_*h(S/k),N=rs(d(C,1-C));M.push(N),y||(y=N.overflow==="hidden")}y&&(t.style.overflow="hidden"),b=()=>{var L=w.currentTime;return p+_*h(L/A)},v&&cc(()=>{if(w.playState!=="running")return!1;var L=b();return v(L,1-L),!0})}w=t.animate(M,{duration:A,fill:"forwards"}),w.onfinish=()=>{b=()=>l,v==null||v(l,1-l),s()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=vt)},deactivate:()=>{s=vt},reset:()=>{l===0&&(v==null||v(1,0))},t:()=>b()}}function ko(t,e,r=e){var l=_r();Ui(t,"input",s=>{var a=s?t.defaultValue:t.value;if(a=Eo(t)?Ao(a):a,r(a),l&&a!==(a=e())){var c=t.selectionStart,u=t.selectionEnd;t.value=a??"",u!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(u,t.value.length))}}),er(e)==null&&t.value&&r(Eo(t)?Ao(t.value):t.value),co(()=>{var s=e();Eo(t)&&s===Ao(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Eo(t){var e=t.type;return e==="number"||e==="range"}function Ao(t){return t===""?null:+t}const Zn=class Zn{constructor(e){wn(this,Jn);wn(this,br,new WeakMap);wn(this,Zr);wn(this,gn);ul(this,gn,e)}observe(e,r){var l=ir(this,br).get(e)||new Set;return l.add(r),ir(this,br).set(e,l),Ya(this,Jn,Wa).call(this).observe(e,ir(this,gn)),()=>{var s=ir(this,br).get(e);s.delete(r),s.size===0&&(ir(this,br).delete(e),ir(this,Zr).unobserve(e))}}};br=new WeakMap,Zr=new WeakMap,gn=new WeakMap,Jn=new WeakSet,Wa=function(){return ir(this,Zr)??ul(this,Zr,new ResizeObserver(e=>{for(var r of e){Zn.entries.set(r.target,r);for(var l of ir(this,br).get(r.target)||[])l(r)}}))},Rr(Zn,"entries",new WeakMap);let Co=Zn;var vc=new Co({box:"border-box"});function ns(t,e,r){var l=vc.observe(t,()=>r(t[e]));tn(()=>(er(()=>r(t[e])),l))}function os(t,e){return t===e||(t==null?void 0:t[ur])===e}function Gr(t={},e,r,l){return tn(()=>{var s,a;return co(()=>{s=a,a=[],er(()=>{t!==r(...a)&&(e(t,...a),s&&os(r(...s),t)&&e(null,...s))})}),()=>{nn(()=>{a&&os(r(...a),t)&&e(null,...a)})}}),t}function hc(t=!1){const e=je,r=e.l.u;if(!r)return;let l=()=>Di(e.s);if(t){let s=0,a={};const c=Dr(()=>{let u=!1;const f=e.s;for(const d in f)f[d]!==a[d]&&(a[d]=f[d],u=!0);return u&&s++,s});l=()=>o(c)}r.b.length&&Si(()=>{ls(e,l),_n(r.b)}),Be(()=>{const s=er(()=>r.m.map(Qa));return()=>{for(const a of s)typeof a=="function"&&a()}}),r.a.length&&Be(()=>{ls(e,l),_n(r.a)})}function ls(t,e){if(t.l.s)for(const r of t.l.s)o(r);e()}let Bn=!1;function mc(t){var e=Bn;try{return Bn=!1,[t(),Bn]}finally{Bn=e}}const gc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function pc(t,e,r){return new Proxy({props:t,exclude:e},gc)}const bc={get(t,e){let r=t.props.length;for(;r--;){let l=t.props[r];if(Fr(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l)return l[e]}},set(t,e,r){let l=t.props.length;for(;l--;){let s=t.props[l];Fr(s)&&(s=s());const a=cr(s,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let l=t.props[r];if(Fr(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l){const s=cr(l,e);return s&&!s.configurable&&(s.configurable=!0),s}}},has(t,e){if(e===ur||e===gl)return!1;for(let r of t.props)if(Fr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Fr(r)&&(r=r()),!!r){for(const l in r)e.includes(l)||e.push(l);for(const l of Object.getOwnPropertySymbols(r))e.includes(l)||e.push(l)}return e}};function Xr(...t){return new Proxy({props:t},bc)}function ss(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function q(t,e,r,l){var S;var s=(r&vi)!==0,a=!Vr||(r&hi)!==0,c=(r&gi)!==0,u=(r&pi)!==0,f=!1,d;c?[d,f]=mc(()=>t[e]):d=t[e];var v=ur in t||gl in t,h=c&&(((S=cr(t,e))==null?void 0:S.set)??(v&&e in t&&(C=>t[e]=C)))||void 0,m=l,g=!0,b=!1,w=()=>(b=!0,g&&(g=!1,u?m=er(l):m=l),m);d===void 0&&l!==void 0&&(h&&a&&li(),d=w(),h&&h(d));var p;if(a)p=()=>{var C=t[e];return C===void 0?w():(g=!0,b=!1,C)};else{var _=(s?Dr:kl)(()=>t[e]);_.f|=Ja,p=()=>{var C=o(_);return C!==void 0&&(m=void 0),C===void 0?m:C}}if((r&mi)===0)return p;if(h){var A=t.$$legacy;return function(C,N){return arguments.length>0?((!a||!N||A||f)&&h(N?p():C),C):p()}}var M=!1,y=Mn(d),k=Dr(()=>{var C=p(),N=o(y);return M?(M=!1,N):y.v=C});return c&&o(k),s||(k.equals=no),function(C,N){if(arguments.length>0){const L=N?o(k):a&&c?et(C):C;if(!k.equals(L)){if(M=!0,D(y,L),b&&m!==void 0&&(m=L),ss(k))return C;er(()=>o(k))}return C}return ss(k)?k.v:o(k)}}function wc(t){je===null&&yl(),Vr&&je.l!==null?_c(je).m.push(t):Be(()=>{const e=er(t);if(typeof e=="function")return e})}function _c(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const yc="5";typeof window<"u"&&((Va=window.__svelte??(window.__svelte={})).v??(Va.v=new Set)).add(yc),ui();function as(t){if(Se(t))return as(t.v);const e=new we.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new we(e)}function Vn(t){if(Se(t))return Vn(t.v);let e=t[0],r=t[0];for(let l=1;l<t.length;l++)t[l]<e&&(e=t[l]),t[l]>r&&(r=t[l]);return[e,r]}function Mo(t,e){return Se(t)?Mo(t.v,e):Math.sqrt(is(t,e))}function is(t,e){if(e===void 0&&(e=!1),Se(t))return is(t.v);const r=Dn(t);let l=0;for(let s=0;s<t.length;s++){const a=t[s]-r;l=l+a*a}return l/(e?t.length:t.length-1)}function Dn(t){return Se(t)?Dn(t.v):cs(t)/t.length}function cs(t){if(Se(t))return cs(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function us(t){if(Se(t))return us(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Ar(t){return Se(t)||Gt(t)?t.v[So(t.v)-1]:t[So(t)-1]}function So(t){if(Se(t)||Gt(t))return So(t.v);let e=1,r=t[0];for(let l=2;l<=t.length;l++)t[l-1]<r&&(e=l,r=t[l-1]);return e}function Cr(t){return Se(t)||Gt(t)?t.v[No(t.v)-1]:t[No(t)-1]}function No(t){if(Se(t)||Gt(t))return No(t.v);let e=1,r=t[0];for(let l=2;l<=t.length;l++)t[l-1]>r&&(e=l,r=t[l-1]);return e}const zo=30,xc=1e-7,kc=1e-7,fs=1e-13,ds=1e3,Ec=100;function vs(t,e,r,l,s){l===void 0&&(l=ds),r===void 0&&(r=fs),s===void 0&&(s=Ec);let a=r,c=l,u=(c-a)/s;for(let f=0;f<s;f++){let d,v;for(let g=0;g<s;g++){d=a+g*u,v=a+(g+1)*u;const b=e(d),w=e(v);if(b<=t&&w>=t)break}const h=(d+v)/2,m=e(h);if(Math.abs(m-t)<xc||(a=d,c=v,u=(c-a)/s,u/c<kc))return h}return(a+c)/2}function hs(t,e=0,r=1){let l=we.zeros(t);for(let s=0;s<t;s++)l.v[s]=e+Math.random()*(r-e);return l}function ms(t,e=0,r=1){let l=we.zeros(t);for(let s=0;s<t;s++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();l.v[s]=a*Math.sin(c)*r+e}return l}function gs(t,e=0,r=1){if(Se(t))return t.apply(s=>gs(s,e,r));const l=1/(Math.sqrt(2)*r);return .5*(1+Cc((t-e)*l))}function To(t,e=0,r=1){if(Se(t))return t.apply(O=>To(O,e,r));if(e!==0||r!==1)return To(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const l=.425,s=5,a=.180625,c=1.6,u=3.3871327179,f=5.0434271938*10,d=1.5929113202*100,v=5.910937472*10,h=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,b=1.4234372777,w=2.75681539,p=1.3067284816,_=1.7023821103*.1,A=7.370016425*.1,M=1.2021132975*.1,y=6.657905115,k=3.081226386,S=4.2868294337*.1,C=1.7337203997*.01,N=2.4197894225*.1,L=1.2258202635*.01,I=t-.5;let R;if(Math.abs(I)<=l)return R=a-I*I,I*(((v*R+d)*R+f)*R+u)/(((g*R+m)*R+h)*R+1);R=I<0?t:1-t,R=Math.sqrt(-Math.log(R));let P;return R<=s?(R=R-c,P=(((_*R+p)*R+w)*R+b)/((M*R+A)*R+1)):(R=R-s,P=((C*R+S)*R+k+y)/((L*R+N)*R+1)),I<0?-P:P}function Lo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return Lo(He(t),e,r);if(Se(t))return t.apply(l=>Lo(l,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return On(t*e,e)}return e==Number.POSITIVE_INFINITY?1-On(r/t,r):e*t>r?1-Wn(r/(r+e*t),r/2,e/2):Wn(e*t/(r+e*t),e/2,r/2)}function ps(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let l=ds,s=fs;if(t>.9997&&r===1?(l=1e7,s=6e5,t=.9997):t>.9992&&r===1?(l=1e7,s=6e5):t>.997&&r===1?(l=1e6,s=45e3):t>.992&&r===1?(l=1e5,s=5e3):t>.97&&r===1&&(l=1e4,s=400),Array.isArray(t))return ps(He(t),e,r);const a=u=>Lo(u,e,r);function c(u,f,d){return u===0?0:u===1?Inf:f===0?NaN:d===0?NaN:vs(u,a,s,l)}return Se(t)?t.apply(c,e,r):c(t,e,r)}function On(t,e){if(Array.isArray(t))return On(He(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),s=Math.sqrt(l);function a(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const d=f/e,v=Math.pow(d,1/6)-.5*Math.pow(d,1/3)+1/3*Math.pow(d,1/2);return gs(v,r,s)}function c(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:Ac(f/2,e/2)/cn(e/2)}const u=e>zo?a:c;return Se(t)?t.apply(u):u(t)}function Yn(t,e){if(Array.isArray(t))return Yn(He(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),s=Math.sqrt(l);function a(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const d=To(f,r,s),v=Math.pow(Math.sqrt(36*d*d-30*d+13)/4+(3*d-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(f){return f===0?0:f===1?Inf:e===0?0:vs(f,v=>On(v,e),0,zo*10)}const u=e>zo?a:c;return Se(t)?t.apply(u):u(t)}function Wn(t,e,r){if(Array.isArray(t))return Wn(He(t),e,r);if(Se(t))return t.apply(s=>Wn(s,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const l=.5-t+.5;return qc(e,r,t,l)}function cn(t){if(Se(t))return t.apply(cn);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+cn(1-t));t=t-1;let r=.9999999999998099;for(let s=0;s<e.length;s++)r=r+e[s]/(t+s+1);const l=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(l,t+.5)*Math.exp(-l)*r}function Ac(t,e){let s=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/cn(e+a+1);if(isNaN(c)||c<1e-18)break;s+=c}return Math.pow(t,e)*cn(e)*Math.exp(-t)*s}function Cc(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,l=-.284496736,s=1.421413741,a=-1.453152027,c=1.061405429,f=1/(1+.3275911*t),d=1-((((c*f+a)*f+s)*f+l)*f+r)*f*Math.exp(-t*t);return e*d}function bs(t,e){const r=.564189583547756,l=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],u=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let d,v,h,m,g=Math.abs(e);if(g<=.5)return v=e*e,m=(((l[0]*v+l[1])*v+l[2])*v+l[3])*v+l[4]+1,h=((s[0]*v+s[1])*v+s[2])*v+1,d=.5-e*(m/h)+.5,d=Math.exp(v)*d,d;if(g<=4)m=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],h=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],d=m/h;else{if(e<=-5.6)return d=2,d=Math.exp(e*e)*2,d;v=1/(e*e),m=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+u[4],h=(((f[0]*v+f[1])*v+f[2])*v+f[3])*v+1,d=(r-v*m/h)/g}return e<0&&(d=Math.exp(e*e)*2-d),d}function ws(t,e){let r=t+e-2;return r<=.25?qt(r+1):r<=1.25?qt(r)+mr(r):qt(r-1)+Math.log(r*(r+1))}function Un(t,e){const r=.0833333333333333,l=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,d,v,h,m,g,b,w,p,_,A,M,y,k,S;return v=Math.min(t,e),h=Math.max(t,e),g=v/h,m=g/(g+1),p=1/(g+1),M=p*p,_=p+M+1,A=p+M*_+1,y=p+M*A+1,k=p+M*y+1,S=p+M*k+1,d=1/h,b=d*d,w=((((u*S*b+c*k)*b+a*y)*b+s*A)*b+l*_)*b+r,w*=m/h,d=1/v,b=d*d,f=(((((u*b+c)*b+a)*b+s)*b+l)*b+r)/v+w,f}function Ze(t){let e,r,l,s,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],u=.273076135303957,f=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],s=(f*r+u)*r+1,l=a/s,e>0?r*l/t:t*(l+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],u=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],s=(((u[4]*r+u[3])*r+u[2])*r+u[1])*r+1,l=a/s,e>0?r/t*(l-.5-.5):t*l}}}function Mc(t,e,r){let l,s,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=s=0,l=0;for(let u=1;u<=r;u++)a=s,s=l,l=c*s-a+e[r-u];return(l-a)*.5}function _s(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,l=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*Mc(t/.375,e,r));if(t<l)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function hr(t,e){const r=.0833333333333333,l=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,d,v,h,m,g,b,w,p,_,A,M,y,k;return t>e?(v=e/t,f=1/(v+1),w=v/(v+1),d=t+(e-.5)):(v=t/e,f=v/(v+1),w=1/(v+1),d=e+(t-.5)),A=w*w,p=w+A+1,_=w+A*p+1,M=w+A*_+1,y=w+A*M+1,k=w+A*y+1,h=1/(e*e),b=((((u*k*h+c*y)*h+a*M)*h+s*_)*h+l*p)*h+r,b*=f/e,m=d*mr(t/e),g=t*(Math.log(e)-1),m>g?b-g-m:b-m-g}function qt(t){if(t<.6){const b=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*b}else{const e=.422784335098467,r=.848044614534529,l=.565221050691933,s=.156513060486551,a=.017050248402265,c=.000497958207639485,u=1.24313399877507,f=.548042109832463,d=.10155218743983,v=.00713309612391,h=.000116165475989616,m=t-.5-.5,g=(((((c*m+a)*m+s)*m+l)*m+r)*m+e)/(((((h*m+v)*m+d)*m+f)*m+u)*m+1);return m*g}}function Ht(t){const e=.418938533204673,r=.0833333333333333,l=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;if(t<=.8)return qt(t)-Math.log(t);if(t<=2.25)return qt(t-.5-.5);if(t<10){let v=Math.round(t-1.25),h=t,m=1;for(let g=1;g<=v;++g)h+=-1,m*=h;return qt(h-1)+Math.log(m)}let f=1/(t*t),d=(((((u*f+c)*f+a)*f+s)*f+l)*f+r)/t;return e+d+(t-.5)*(Math.log(t)-1)}function Po(t,e){const r=.918938533204673;let l=Math.min(t,e),s=Math.max(t,e);function a(c,u,f){let d=Math.round(f-1),v=1;for(let h=1;h<=d;++h)f+=-1,v*=f/(u+f);return c+Math.log(v)+(Ht(u)+(Ht(f)-ws(u,f)))}if(l<8){if(l<1)return s<8?Ht(l)+(Ht(s)-Ht(l+s)):Ht(l)+hr(l,s);let c;if(l<2)return s<=2?Ht(l)+Ht(s)-ws(l,s):s<8?(c=0,a(c,l,s)):Ht(l)+hr(l,s);if(s<=1e3){let u=Math.round(l-1);c=1;for(let f=1;f<=u;++f){l+=-1;let d=l/s;c*=d/(d+1)}return c=Math.log(c),s>=8?c+Ht(l)+hr(l,s):a(c,l,s)}else{let u=Math.round(l-1);c=1;for(let f=1;f<=u;++f)l+=-1,c*=l/(l/s+1);return log(c)-u*log(s)+(Ht(l)+hr(l,s))}}else{let c=Un(l,s),u=l/s,f=-(l-.5)*Math.log(u/(u+1)),d=s*mr(u);return f>d?Math.log(s)*-.5+r+c-d-f:Math.log(s)*-.5+r+c-f-d}}function ys(t){return(t==0?1024:-300)*.69314718055995*.99999}function Kr(t){const e=.0566749439387324,r=.0456512608815524,l=.333333333333333,s=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,u=.354508718369557;let f,d,v,h,m;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(f=t+.3,f/=.7,m=e-f*.3):t>.18?(f=t*.75-.25,m=r+f/3):(f=t,m=0),d=f/(f+2),v=d*d,h=((a*v+s)*v+l)/((u*v+c)*v+1),v*2*(1/(1-d)-d*h)+m)}function mr(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,l=-.0178874546012214,s=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let u=t/(t+2),f=u*u,d=(((l*f+r)*f+e)*f+1)/(((c*f+a)*f+s)*f+1);return u*2*d}function Sc(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],s=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,d,v,h,m;if(v=Math.abs(t),v<=.5)return f=t*t,m=(((r[0]*f+r[1])*f+r[2])*f+r[3])*f+r[4]+1,h=((l[0]*f+l[1])*f+l[2])*f+1,t*(m/h);if(v<=4){m=((((((s[0]*v+s[1])*v+s[2])*v+s[3])*v+s[4])*v+s[5])*v+s[6])*v+s[7],h=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7];let b=.5-Math.exp(-t*t)*m/h+.5;return t<0?-b:b}if(v>=5.8)return t>0?1:-1;d=t*t,f=1/d,m=(((c[0]*f+c[1])*f+c[2])*f+c[3])*f+c[4],h=(((u[0]*f+u[1])*f+u[2])*f+u[3])*f+1,f=(e-m/(d*h))/v;let g=.5-Math.exp(-d)*f+.5;return t<0?-g:g}function Nc(t){const e=914041914819518e-24,r=.0238082361044469,l=-.499999999085958,s=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+s)*t+l)*t+1));{let u=Math.exp(t);return t>0?u*(.5-1/u+.5):u-.5-.5}}function un(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function zc(t){const e=.785398163397448,r=1.4616321449683622,l=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],s=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let u,f,d,v,h,m,g,b,w,p,_,A,M;if(_=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),_>v&&(_=v),M=1e-9,b=0,t<.5){if(fabs(t)<=M){if(t==0)return 0;b=-1/t}else{if(h=-t,w=e,h<=0&&(h=-h,w=-w),h>=_)return 0;if(d=Math.round(h),h-=d,d=Math.round(h*4),h=(h-d*.25)*4,f=d/2,f+f!=d&&(h=1-h),m=e*h,u=f/2,u+u!=f&&(w=-w),f=(d+1)/2,u=f/2,u+=u,u==f){if(m==0)return 0;b=w*(cos(m)/sin(m)*4)}else b=w*(sin(m)/cos(m)*4)}t=1-t}if(t<=3){g=t,A=l[0]*t;for(let y=1;y<=5;++y)g=(g+s[y-1])*t,A=(A+l[y])*t;return g=(A+l[6])/(g+s[5]),p=t-r,g*p+b}if(t<_){h=1/(t*t),g=h,A=a[0]*h;for(let y=1;y<=3;++y)g=(g+c[y-1])*h,A=(A+a[y])*h;b=A/(g+c[3])-.5/t+b}return b+log(t)}function Tc(t,e,r,l){let s,a,c,u,f,d;if(t>l*.001){if(u=t*Math.log(r),u<Math.exparg(1))return 0;s=Math.exp(u)}else s=1;for(s*=e/t,d=l/t,f=t+1,u=r,c=u/f,f+=1,u=r*u,a=u/f,c+=a;Math.abs(r)>d;)f+=1,u=r*u,a=u/f,c+=a;return s*=t*c+1,s}function Lc(t,e,r,l){const s=.577215664901533;let a,c,u,f,d,v,h=e*r;for(d=r-h,c=e*l<=.02?Math.log(r)+zc(e)+s+d:Math.log(h)+s+d,a=l*5*Math.abs(c),u=1,f=0,u+=1,d*=r-h/u,v=d/u,f+=v;Math.abs(v)>a;)u+=1,d*=r-h/u,v=d/u,f+=v;return-t*(c+f)}function Io(t,e,r,l){let s,a,c,u,f,d,v,h,m;if(r==0)return 0;if(v=Math.min(t,e),v>=1)d=t*Math.log(r)-Po(t,e),a=Math.exp(d)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(a=Math.pow(r,t),a==0)return a;m=t+e,m>1?(f=t+e-1,d=(Ze(f)+1)/m):d=Ze(m)+1,c=(Ze(t)+1)*(Ze(e)+1)/d,a*=c*(e/m)}else{if(f=qt(v),s=Math.round(h-1),s>=1){c=1;for(let _=1;_<=s;++_)h+=-1,c*=h/(v+h);f+=Math.log(c)}d=t*Math.log(r)-f,h+=-1,m=v+h,m>1?(f=v+h-1,u=(Ze(f)+1)/m):u=Ze(m)+1,a=Math.exp(d)*(v/t)*(Ze(h)+1)/u}else f=qt(v)+hr(v,h),d=t*Math.log(r)-f,a=v/t*Math.exp(d);if(a==0||t<=l*.1)return a;let g=l/t,b=0,w=0,p;for(c=1,b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),w+=p;b<1e7&&Math.abs(p)>g;)b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),w+=p;return t*w>-1?a*=t*w+1:a=0,a}function Hn(t,e,r,l,s,a){let c,u,f,d,v,h=t+e,m=t+1;if(s>1&&t>=1&&h>=m*1.1?(f=Math.round(Math.abs(ys(1))),u=Math.round(ys(0)),f>u&&(f=u),d=Math.exp(-f)):(f=0,d=1),c=Rc(f,t,e,r,l)/t,s==1||c==0)return c;let g=s-1,b=d;if(u=0,e>1){if(l>1e-4){let w=(e-1)*r/l-t;w>=1&&(u=w<g?Math.round(w):g)}else u=g;for(let w=0;w<u;++w)v=w,d*=(h+v)/(m+v)*r,b+=d}for(let w=u;w<g&&(v=w,d*=(h+v)/(m+v)*r,b+=d,!(d<=a*b));++w);return c*=b,c}function Pc(t,e,r,l,s,a){let c,u,f,d,v,h,m,g,b,w,p,_,A,M,y,k,S,C,N;if(!Number.isFinite(s)||(N=Ic(t,e,r,l),Number.isNaN(N)))return Number.NaN;if(N==0)return 0;for(c=s+1,b=e/t,w=1/t+1,M=l+1,f=0,d=1,h=t+1,_=0,A=1,y=1,k=c/w,v=w/c,f+=1,m=f/t,g=f*(e-f)*r,u=t/h,C=d*(d+b)*u*u*(g*r),u=(m+1)/(w+m+m),S=f+g/h+u*(c+f*M),d=m+1,h+=2,m=C*_+S*y,_=y,y=m,m=C*A+S*k,A=k,k=m,p=v,v=y/k,_/=k,A/=k,y=v,k=1;f<1e4&&(f+=1,m=f/t,g=f*(e-f)*r,u=t/h,C=d*(d+b)*u*u*(g*r),u=(m+1)/(w+m+m),S=f+g/h+u*(c+f*M),d=m+1,h+=2,m=C*_+S*y,_=y,y=m,m=C*A+S*k,A=k,k=m,p=v,v=y/k,!(Math.abs(v-p)<=a*v));)_/=k,A/=k,y=v,k=1;return N*v}function Ic(t,e,r,l){const s=.398942280401433;let a,c,u,f,d,v,h,m,g;if(r==0||l==0)return 0;if(h=Math.min(t,e),h<8){let b,w;if(r<=.375?(b=Math.log(r),w=mr(-r)):l>.375?(b=Math.log(r),w=Math.log(l)):(b=mr(-l),w=Math.log(l)),v=t*b+e*w,h>=1)return v-=Po(t,e),Math.exp(v);if(m=Math.max(t,e),m>=8)return f=qt(h)+hr(h,m),h*Math.exp(v-f);if(m<=1){let _=Math.exp(v);return _==0?0:(g=t+e,g>1?(f=t+e-1,v=(Ze(f)+1)/g):v=Ze(g)+1,c=(Ze(t)+1)*(Ze(e)+1)/v,_*(h*c)/(h/m+1))}if(f=qt(h),a=Math.round(m-1),a>=1){c=1;for(let _=1;_<=a;++_)m+=-1,c*=m/(h+m);f=Math.log(c)+f}v-=f,m+=-1,g=h+m;let p;return g>1?(f=h+m-1,p=(Ze(f)+1)/g):p=Ze(g)+1,h*Math.exp(v)*(Ze(m)+1)/p}else{let b,w,p,_;return t<=e?(b=t/e,w=b/(b+1),p=1/(b+1),_=t-(t+e)*r):(b=e/t,w=1/(b+1),p=b/(b+1),_=(t+e)*l-e),u=-_/t,f=Math.abs(u)>.6?u-Math.log(r/w):Kr(u),u=_/e,d=Math.abs(u)<=.6?Kr(u):u-Math.log(l/p),v=Math.exp(-(t*f+e*d)),s*Math.sqrt(e*w)*v*Math.exp(-Un(t,e))}}function Rc(t,e,r,l,s){const a=.398942280401433;let c,u,f,d,v,h,m,g;if(h=Math.min(e,r),h<8){let b,w;if(l<=.375?(b=Math.log(l),w=mr(-l)):s>.375?(b=Math.log(l),w=Math.log(s)):(b=mr(-s),w=Math.log(s)),v=e*b+r*w,h>=1)return v-=Po(e,r),un(t,v);if(m=Math.max(e,r),m>=8)return f=qt(h)+hr(h,m),h*un(t,v-f);if(m<=1){let _=un(t,v);return _==0?_:(g=e+r,g>1?(f=e+r-1,v=(Ze(f)+1)/g):v=Ze(g)+1,c=(Ze(e)+1)*(Ze(r)+1)/v,_*(h*c)/(h/m+1))}f=qt(h);let p=Math.round(m-1);if(p>=1){c=1;for(let _=1;_<=p;++_)m+=-1,c*=m/(h+m);f+=Math.log(c)}return v-=f,m+=-1,g=h+m,u=g>1?(Ze(g-1)+1)/g:Ze(g)+1,h*un(t,v)*(Ze(m)+1)/u}else{let b,w,p,_;e>r?(b=r/e,w=1/(b+1),p=b/(b+1),_=(e+r)*s-r):(b=e/r,w=b/(b+1),p=1/(b+1),_=e-(e+r)*l),-_s(r/e);let A=-_/e;return f=Math.abs(A)>.6?A-Math.log(l/w):Kr(A),A=_/r,d=Math.abs(A)>.6?A-Math.log(s/p):Kr(A),v=un(t,-(e*f+r*d)),a*Math.sqrt(r*w)*v*Math.exp(-Un(e,r))}}function Ro(t,e,r,l,s,a){let u=Array(30),f=Array(30),d=e-.5-.5,v=t+d*.5,h=l>.375?Math.log(r):mr(-l),m=-v*h;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+_s(Ze(e))+e*Math.log(m)+v*h,b=g-(hr(e,t)+e*Math.log(v)),w=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let p=w==0,_=s==0?0:Math.exp(Math.log(s)-b),A=jc(e,m,g,a),M=.25/(v*v),y=h*.25*h,k=A,S=k,C=1,N=1,L=0;for(let I=1;I<=30;++I){let R=e+L;k=(R*(R+1)*k+(m+R+1)*C)*M,L+=2,C*=y,N/=L*(L+1);let P=I-1;u[P]=N;let O=0;if(I>1){let j=e-I;for(let W=1;W<=P;++W)O+=j*u[W-1]*f[P-W],j+=e}f[P]=d*N+O/I;let Y=f[P]*k;if(S+=Y,S<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(Y)<=a*(S+_))break}return s+=p?Math.exp(b+Math.log(S)):w*S,s}function jc(t,e,r,l){const s=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-Sc(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return bs(1,a)/a*s}}else if(e<1.1){let a=3,c=e,u=e/(t+3),f=l*.1/(t+1),d;for(a+=1,c*=-(e/a),d=c/(t+a),u+=d;Math.abs(d)>f;)a+=1,c*=-(e/a),d=c/(t+a),u+=d;let v=t*e*((u/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),m=Ze(t),g=m+1;if(e>=.25&&t<e/2.59||h>-.13394){let b=Nc(h),w=((b+.5+.5)*v-b)*g-m;return w<=0?0:w*Math.exp(-r)}else return(.5-Math.exp(h)*g*(.5-v+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,u=e,f=e+(1-t),d=1,v,h;a=e*c+d*a,u=e*f+d*u,v=a/u,d+=1;let m=d-t;for(c=a+m*c,f=u+m*f,h=c/f;Math.abs(h-v)>=l*h;)a=e*c+d*a,u=e*f+d*u,v=a/u,d+=1,m=d-t,c=a+m*c,f=u+m*f,h=c/f;return h}}function Fc(t,e,r,l){const a=1.12837916709551,c=.353553390593274,u=Array(21),f=Array(21),d=Array(21),v=Array(21);let h=t*Kr(-r/t)+e*Kr(r/e),m;if(m=Math.exp(-h),m==0)return 0;let g=Math.sqrt(h),b=g/c*.5,w=h+h,p,_,A,M;t<e?(p=t/e,_=1/(p+1),A=(e-t)/e,M=1/Math.sqrt(t*(p+1))):(p=e/t,_=1/(p+1),A=(e-t)/t,M=1/Math.sqrt(e*(p+1))),u[0]=A*.6666666666666666,d[0]=u[0]*-.5,v[0]=-d[0];let y=.5/a*bs(1,g),k=c,S=y+v[0]*M*k,C=1,N=p*p,L=1,I=M,R=b,P=w;for(let Y=2;Y<=20;Y+=2){L*=N,u[Y-1]=_*2*(p*L+1)/(Y+2);let j=Y+1;C+=L,u[j-1]=A*2*C/(Y+3);for(let Z=Y;Z<=j;++Z){let G=(Z+1)*-.5;f[0]=G*u[0];for(let re=2;re<=Z;++re){let te=0;for(let J=1;J<=re-1;++J){let ae=re-J;te+=(J*G-ae)*u[J-1]*f[ae-1]}f[re-1]=G*u[re-1]+te/re}d[Z-1]=f[Z-1]/(Z+1);let X=0;for(let re=1;re<=Z-1;++re)X+=v[Z-re-1]*d[re-1];v[Z-1]=-(X+d[Z-1])}y=c*R+(Y-1)*y,k=c*P+Y*k,R=w*R,P=w*P,I*=M;let W=v[Y-1]*I*y;I*=M;let Q=v[j-1]*I*k;if(S+=W+Q,Math.abs(W)+Math.abs(Q)<=l*S)break}let O=Math.exp(-Un(t,e));return a*m*O*S}function qc(t,e,r,l){let a=0,c=0;function u(p,_,A,M){const y=Io(p,_,A,1e-15);return M?.5-y+.5:y}function f(p,_,A,M){const y=Io(_,p,A,1e-15);return M?y:.5-y+.5}function d(p,_,A,M,y,k){const S=Pc(p,_,A,M,y,15000000000000002e-30);return k?.5-S+.5:S}function v(p,_,A,M,y){let k=Math.round(_);_=_-k,_===0&&(k=k-1,_=1);let S=Hn(_,p,M,A,k,1e-15);return A<=.7?(S=S+Io(p,_,A,1e-15),y?.5-S+.5:S):(p<=15&&(k=20,S=S+Hn(p,_,A,M,k,1e-15),p=p+k),S=Ro(p,_,A,M,S,15*1e-15),y?.5-S+.5:S)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,m,g,b,w;if(t<=1||e<=1){if(r>.5?(w=!0,h=e,g=l,m=t,b=r):(w=!1,h=t,g=r,m=e,b=l),m<Math.min(1e-15,1e-15*h))return a=Tc(h,m,g,1e-15),w?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=Lc(h,m,g,1e-15),w?c:.5-c+.5;if(Math.max(h,m)>1){if(m<=1)return u(h,m,g,w);if(g>=.29)return f(h,m,b,w);if(g<.1&&Math.pow(g*m,h)<=.7)return u(h,m,g,w)}else{if(h>=Math.min(.2,m)||Math.pow(g,h)<=.9)return u(h,m,g,w);if(g>=.3)return f(h,m,b,w)}let p=!1;return Math.max(h,m)>1&&m>15?c=0:(p=!0,c=Hn(m,h,b,g,20,1e-15),m+=20),c=Ro(m,h,b,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(p?c=Hn(m-n,h,b,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Ro(m,h,b,g,c,15*1e-15),a=-expm1(c),w?.5-a+.5:a):(a=.5-c+.5,w?.5-a+.5:a)}else{let p=Number.isFinite(t+e)?t>e?(t+e)*l-e:t-(t+e)*r:t*l-e*r;const _=p<0;let A,M,y,k;if(_?(p=-p,A=e,y=l,M=t,k=r):(A=t,y=r,M=e,k=l),M<40)return M*y<=.7?u(A,M,y,_):v(A,M,y,k,_);if(A>M){if(M<=100||p>M*.03)return d(A,M,y,k,p,_)}else{if(A<=100)return d(A,M,y,k,p,_);if(p>A*.03)return d(A,M,y,k,p,_)}return a=Fc(A,M,p,1e-15*100),_?.5-a+.5:a}}function xs(t){const e=t.nrows,r=t.ncols;if(e<r){const c=xs(t.subset([],Ct.seq(1,e)));return{Q:c.Q,R:Es(c.Q,t)}}let l=Bt.eye(e),s=t.t();for(let c=1;c<=r;c++)for(let u=e;u>=c+1;u--){const f=s.v.subarray((u-2)*r,u*r),d=l.v.subarray((u-2)*e,u*e),v=f.slice(),h=d.slice(),[m,g,b]=Bc(v[c-1],v[c-1+r]);for(let w=0;w<r;w++)f[w]=v[w]*m+v[w+r]*g,f[w+r]=v[w]*-g+v[w+r]*m,d[w]=h[w]*m+h[w+e]*g,d[w+e]=h[w]*-g+h[w+e]*m;for(let w=r;w<e;w++)d[w]=h[w]*m+h[w+e]*g,d[w+e]=h[w]*-g+h[w+e]*m}const a=Ct.seq(1,r);return{Q:e===r?l:l.subset([],a),R:e===r?s.t():s.subset([],a).t()}}function Bc(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),u=1/c;return[u,a*u,t*c]}const r=t/e,l=Math.sqrt(1+r*r),s=1/l;return[r*s,s,e*l]}function ks(t){return typeof t=="number"}function Es(t,e){if(e===void 0&&(e=t),!gr(t)||!gr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,l=t.ncols,s=e.nrows,a=e.ncols,c=l,u=a,f=r,d=new Float64Array(c*u);for(let v=0;v<u;v++){const h=e.v.subarray(v*s,(v+1)*s),m=d.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const b=t.v.subarray(g*r,(g+1)*r);let w=0;for(let p=0;p<f;p++)w+=b[p]*h[p];m[g]=w}}return new Bt(d,c,u)}function As(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new we(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new Bt(t.v,e,r)}function gr(t){return t&&t.constructor===Bt}function Vc(t,e,r){return new Bt(new Float64Array(t),e,r)}const be=class be{constructor(e,r,l){if(!ArrayBuffer.isView(e)||e.constructor!==be.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||l===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*l)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=l}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return be.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const l=be.eye(e),s=be.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],u=e-1;for(let f=0;f<e;f++)s.v[u*e+f]=l.v[u*e+f]/c;for(let f=e-2;f>=0;f--){let d=l.getcolumn(f+1);const v=a.getcolref(f+1);for(let h=f+1;h<e;h++){const m=s.getcolumn(h+1);d=d.subtract(m.mult(v[h]))}s.v.set(d.divide(v[f]).v,f*e)}return s.t()}if(this.islowertriangular()){const l=this.diag();if(us(l)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const s=be.eye(e),a=be.eye(e),c=this.t(),u=0,f=c.v[0];for(let d=0;d<e;d++)a.v[u*e+d]=s.v[u*e+d]/f;for(let d=1;d<e;d++){let v=s.getcolumn(d+1);const h=c.getcolref(d+1);for(let m=0;m<d;m++){const g=a.getcolumn(m+1);v=v.subtract(g.mult(h[m]))}a.v.set(v.divide(h[d]).v,d*e)}return a.t()}const r=xs(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>be.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>be.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let l=0;l<e;l++)r[l]=this.getcolref(l+1)[l];return new we(r)}t(){const e=this.nrows,r=this.ncols,l=new be.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let s=0;s<this.ncols;s++){const a=this.v.subarray(s*this.nrows,(s+1)*this.nrows);for(let c=0;c<this.nrows;c++)l[c*r+s]=a[c]}return new be(l,r,e)}for(let s=0;s<this.nrows;s++){const a=l.subarray(s*r,(s+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+s]}return new be(l,r,e)}dot(e){if(Se(e))return new be(qo(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(gr(e))return new be(qo(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,l){if(gr(e))return new be(jo(this.v,e.v,r),this.nrows,this.ncols);if(ks(e))return new be(Fo(this.v,e,r),this.nrows,this.ncols);if(!Se(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(l===void 0&&(l=e.length===this.ncols?2:1),l===2&&e.length===this.ncols){const s=new be.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)s.set(Fo(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new be(s,this.nrows,this.ncols)}if(l===1&&e.length===this.nrows){const s=new be.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)s.set(jo(this.getcolref(a+1),e.v,r),a*this.nrows);return new be(s,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,l)=>r+l)}subtract(e){return this.op(e,(r,l)=>r-l)}mult(e){return this.op(e,(r,l)=>r*l)}divide(e){return this.op(e,(r,l)=>r/l)}apply(e,r){if(r===void 0&&(r=2),r==2){const l=this.ncols,s=new be.valuesConstructor(l);for(let a=0;a<l;a++)s[a]=e(this.getcolref(a+1));return new we(s)}if(r==1)return this.t().apply(e,2);if(r==0){const l=this.v.length,s=new be.valuesConstructor(l);for(let a=0;a<l;a++)s[a]=e(this.v[a]);return new be(s,this.nrows,this.ncols)}}replace(e,r,l){typeof r=="number"&&(r=[r]),r.length===0&&(r=Ct.seq(1,this.nrows)),Gt(r)||(r=Xt(r)),typeof l=="number"&&(l=[l]),l.length===0&&(l=Ct.seq(1,this.ncols)),Gt(l)||(l=Xt(l));const s=r.length,a=l.length;if(Ar(r)<1||Cr(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Ar(l)<1||Cr(l)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==s||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<l.length;c++){const u=e.getcolref(c+1),f=(l.v[c]-1)*this.nrows;for(let d=0;d<r.length;d++){const v=r.v[d];this.v[f+v-1]=u[d]}}return this}copy(){return new be(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new we.valuesConstructor(this.ncols);for(let l=0;l<this.ncols;l++)r[l]=this.getcolref(l+1)[e-1];return new we(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new we(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Xt([e])),typeof r=="number"&&(r=Xt([r])),Array.isArray(e)&&(e=e.length===0?null:Xt(e)),Array.isArray(r)&&(r=r.length===0?null:Xt(r)),e!==null&&!Gt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Gt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Ar(e)<1||Cr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Ar(r)<1||Cr(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const u=r.length,f=this.nrows,d=new be.valuesConstructor(f*u);for(let v=0;v<r.length;v++)d.set(this.v.slice((r.v[v]-1)*this.nrows,r.v[v]*this.nrows),v*this.nrows);return new be(d,f,u)}if(r==null)return this.t().subset(r,e).t();const l=e.length,s=r.length,a=new be.valuesConstructor(l*s);let c=new be.valuesConstructor(l);for(let u=0;u<s;u++){const f=this.v.subarray((r.v[u]-1)*this.nrows,r.v[u]*this.nrows);for(let d=0;d<l;d++)c[d]=f[e.v[d]-1];a.set(c,u*l)}return new be(a,l,s)}toString(e){function r(c,u){return" ".repeat(u-c.length)+c}e===void 0&&(e=2),this.ncols;const l=Math.round(Math.abs(Math.log10(Cr(this.v))))+e+3;let s="";const a=this.t();for(let c=1;c<=a.ncols;c++)s+=Array.from(a.getcolref(c)).map(u=>r(u.toFixed(e),l)).join(" ")+`
`;return s}toCSV(e,r,l,s){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=s!=null&&s.length>0,c=l!=null&&l.length>0;if(a&&s.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&l.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const u=this.t();let f=c?l.join(e)+`
`:"";for(let d=1;d<=u.ncols;d++)f=f+(a?s[d-1]+e:"")+u.getcolref(d).join(e)+`
`;return f=f.replace(/\./g,r),f}static randn(e,r,l,s){return As(ms(e*r,l,s),e,r)}static rand(e,r,l,s){return As(hs(e*r,l,s),e,r)}static eye(e,r){r===void 0&&(r=e);const l=new Float64Array(e*r);for(let s=0;s<Math.min(e,r);s++)l[s*e+s]=1;return new be(l,e,r)}static diagm(e){if(!Se(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,l=new Float64Array(r*r);for(let s=0;s<r;s++)l[s*r+s]=e.v[s];return new be(l,r,r)}static zeros(e,r){return r===void 0&&(r=e),new be(new Float64Array(e*r),e,r)}static ones(e,r){return be.fill(1,e,r)}static fill(e,r,l){l===void 0&&(l=r);const s=new Float64Array(r*l);for(let a=0;a<s.length;a++)s[a]=e;return new be(s,r,l)}static outer(e,r,l){if(Array.isArray(e)&&(e=He(e)),Array.isArray(r)&&(r=He(r)),!Se(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Se(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const s=be.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],u=s.getcolref(a+1);for(let f=0;f<e.length;f++)u[f]=l(e.v[f],c)}return s}static parseCSV(e,r,l,s){function a(p){return p.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let u=e.split(/\n/),f=[],d=0;const v=u[0].split(r);(l||l===void 0&&a(v))&&(f=v,d=1),u=u.filter(p=>p.trim().length>1);let h=[],m=0;s&&(m=1);const g=u.length-d,b=v.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const w=be.zeros(b,g);for(let p=d;p<g+d;p++){const _=u[p].split(r);let A;if(s?(h[p-d]=_[0],A=_.slice(1).map(M=>Number.parseFloat(M.trim().replace(c,".")))):A=_.map(M=>Number.parseFloat(M.trim().replace(c,"."))),A.some(M=>Number.isNaN(M)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=b)throw Error("Wrong number of values in row #"+p);w.v.set(new Float64Array(A),(p-d)*b)}return{values:w.t(),header:f,labels:h,sep:r,dec:c}}};Rr(be,"valuesConstructor",Float64Array),Rr(be,"TOLERANCE",Math.pow(10,-9));let Bt=be;function Se(t){return t&&t.constructor===we}function He(t){return new we(new Float64Array(t))}const rt=class rt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new Ct.valuesConstructor(this.length);let l=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[l]=s+1,l=l+1);return new Ct(r.subarray(0,l))}filter(e){const r=new rt.valuesConstructor(this.length);let l=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[l]=this.v[s],l=l+1);return new rt(r.subarray(0,l))}shuffle(){return new rt(Ns(this.v))}sort(e){return new rt(zs(this.v,e))}sortind(e){return new Ct(Ts(this.v,e))}rep(e){return Ms(this,e)}repeach(e){return Ss(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=Ct.seq(1,this.length)),Gt(r)||(r=Xt(r));const l=r.length;if(Ar(r)<1||Cr(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==l)throw Error('Vector.replace: length of "x" does not match the indices.');for(let s=0;s<r.length;s++){const a=r.v[s];this.v[a-1]=e.v[s]}return this}subset(e){if(typeof e=="number"&&(e=Xt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Ct.bool2ind(e):Xt(e)),!Gt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,l=rt.zeros(r);for(let s=0;s<r;s++){if(e.v[s]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[s]>this.length)throw Error("subset: index exceeds the length of the vector.");l.v[s]=this.v[e.v[s]-1]}return l}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new rt(this.v.slice(e-1,r))}copy(){return new rt(this.v.slice())}dot(e){return e===void 0&&(e=this),qo(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Se(e))return new rt(jo(this.v,e.v,r));if(ks(e))return new rt(Fo(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,l)=>r+l)}subtract(e){return this.op(e,(r,l)=>r-l)}mult(e){return this.op(e,(r,l)=>r*l)}divide(e){return this.op(e,(r,l)=>r/l)}apply(e){const r=this.v.length,l=rt.zeros(r);for(let s=0;s<r;s++)l.v[s]=e(this.v[s]);return l}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),l=new rt.valuesConstructor(r);let s=0;for(const a of e)typeof a=="number"?(l[s]=a,s+=1):(l.set(Se(a)?a.v:new rt.valuesConstructor(a),s),s+=typeof a=="number"?1:a.length);return new rt(l)}static seq(e,r,l){return Cs(e,r,l,rt)}static randn(e,r,l){return ms(e,r,l)}static rand(e,r,l){return hs(e,r,l)}static zeros(e){return new rt(new rt.valuesConstructor(e))}static ones(e){return rt.fill(1,e)}static fill(e,r){const l=new rt.valuesConstructor(r);for(let s=0;s<l.length;s++)l[s]=e;return new rt(l)}};Rr(rt,"valuesConstructor",Float64Array);let we=rt;function Gt(t){return t.constructor===Ct}function Xt(t){return new Ct(new Int32Array(t))}const ft=class ft{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new ft.valuesConstructor(this.length);let l=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[l]=s+1,l=l+1);return new ft(r.subarray(0,l))}filter(e){const r=new ft.valuesConstructor(this.length);let l=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[l]=this.v[s],l=l+1);return new ft(r.subarray(0,l))}shuffle(){return new ft(Ns(this.v))}sort(e){return new ft(zs(this.v,e))}sortind(e){return new ft(Ts(this.v,e))}rep(e){return Ms(this,e)}repeach(e){return Ss(this,e)}subset(e){if(typeof e=="number"&&(e=Xt([e])),Array.isArray(e)&&(e=Xt(e)),!Gt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,l=new ft.valuesConstructor(r);for(let s=0;s<r;s++){if(e.v[s]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[s]>this.length)throw Error("subset: index exceeds the length of the vector.");l[s]=this.v[e.v[s]-1]}return new ft(l)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new ft(this.v.slice(e-1,r))}static seq(e,r,l){return Cs(e,r,l,ft)}static ones(e){return ft.fill(1,e)}static fill(e,r){const l=new ft.valuesConstructor(r);for(let s=0;s<l.length;s++)l[s]=e;return new ft(l)}static bool2ind(e){let r=0;const l=new ft.valuesConstructor(e.length);for(let s=0;s<e.length;s++)e[s]&&(l[r]=s+1,r=r+1);return new ft(l.subarray(0,r))}};Rr(ft,"valuesConstructor",Int32Array);let Ct=ft;function Cs(t,e,r,l){r===void 0&&(r=t<=e?1:-1);const s=Math.floor((e-t)/r)+1;if(s<1)throw Error("seq: wrong combination of parameters.");const a=new l.valuesConstructor(s);for(let c=0;c<s;c++)a[c]=t+c*r;return new l(a)}function Ms(t,e){const r=t.length*e,l=new t.constructor.valuesConstructor(r);for(let s=1;s<=e;s++)for(let a=0;a<t.length;a++)l[(s-1)*t.length+a]=t.v[a];return new t.constructor(l)}function Ss(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,l=new t.constructor.valuesConstructor(r);for(let s=0;s<t.length;s++)for(let a=0;a<e;a++)l[s*e+a]=t.v[s];return new t.constructor(l)}function jo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const l=new t.constructor(t.length);for(let s=0;s<t.length;s++)l[s]=r(t[s],e[s]);return l}function Fo(t,e,r){const l=new t.constructor(t.length);for(let s=0;s<t.length;s++)l[s]=r(t[s],e);return l}function qo(t,e,r,l,s,a){if(l!==s)throw Error("_dot: matrix dimensions do not much.");const c=r,u=a,f=l,d=new t.constructor(c*u);for(let v=0;v<u;v++){const h=e.subarray(v*s,(v+1)*s),m=d.subarray(v*c,(v+1)*c);for(let g=0;g<f;g++){const b=h[g],w=t.subarray(g*r,(g+1)*r);for(let p=0;p<c;p++)m[p]+=w[p]*b}}return d}function Ns(t){let e=t.slice(),r=e.length,l,s;for(;r;)s=Math.floor(Math.random()*r--),l=e[r],e[r]=e[s],e[s]=l;return e}function zs(t,e=!1){return e?t.slice().sort((r,l)=>l-r):t.slice().sort((r,l)=>r-l)}function Ts(t,e=!1){const r=Ct.seq(1,t.length).v;return e?r.sort((l,s)=>t[s-1]-t[l-1]):r.sort((l,s)=>t[l-1]-t[s-1])}function Dc(t,e,r){return 5*t*e+e+4*r*e}function Oc(t,e){return 2+2*t+t*e+17*e}function Mt(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=t.ncols,s=t.ncomp;let a,c;switch(e){case"mX":a=2,c=l;break;case"sX":a=2+l,c=l;break;case"loadings":case"xloadings":a=2+2*l+(r-1)*l,c=l;break;case"P":a=2+2*l,c=r*l;break;case"eigenvals":case"xeigenvals":a=2+2*l+l*s,c=s;break;case"cq0":a=2+2*l+l*s+s,c=s;break;case"cNq":a=2+2*l+l*s+2*s,c=s;break;case"rq0":a=2+2*l+l*s+3*s,c=s;break;case"rNq":a=2+2*l+l*s+4*s,c=s;break;case"ch0":a=2+2*l+l*s+5*s,c=s;break;case"cNh":a=2+2*l+l*s+6*s,c=s;break;case"rh0":a=2+2*l+l*s+7*s,c=s;break;case"rNh":a=2+2*l+l*s+8*s,c=s;break;case"cr0":a=2+2*l+l*s+9*s,c=s;break;case"cNr":a=2+2*l+l*s+10*s,c=s;break;case"rr0":a=2+2*l+l*s+11*s,c=s;break;case"rNr":a=2+2*l+l*s+12*s,c=s;break;case"cg0":a=2+2*l+l*s+13*s,c=s;break;case"cNg":a=2+2*l+l*s+14*s,c=s;break;case"rg0":a=2+2*l+l*s+15*s,c=s;break;case"rNg":a=2+2*l+l*s+16*s,c=s;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function fn(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const l=t.ncols,s=t.nrows,a=t.ncomp;let c,u;switch(e){case"scores":case"xscores":c=(r-1)*s,u=s;break;case"hdist":c=s*a+(r-1)*s,u=s;break;case"qdist":c=2*s*a+(r-1)*s,u=s;break;case"xcumexpvar":case"cumexpvar":c=3*s*a,u=a;break;case"fdistc":c=3*s*a+a+(r-1)*s,u=s;break;case"fdistr":c=4*s*a+a+(r-1)*s,u=s;break;case"gdist":c=5*s*a+a+(r-1)*l,u=l;break;case"rdist":c=5*s*a+a+l*a+(r-1)*l,u=l;break;case"idistc":c=5*s*a+a+2*l*a+(r-1)*l,u=l;break;case"idistr":c=5*s*a+a+3*l*a+(r-1)*l,u=l;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+u)}function Bo(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let l=0;l<t.length;l++){const s=t[l];if(s<e||s>r)return!1}return!0}function Yc(t,e,r,l,s,a,c){if(!gr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const u=a&&Array.isArray(a)?a.length:0;if(!Bo(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!Bo(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const d=e.nrows-u,v=e.ncols-f;if(d<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(l===void 0&&(l=!0),s===void 0&&(s=!1),r===void 0&&(r=Math.min(d-1,v)),r<1||r>Math.min(d-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(u>0){const M=new Int32Array(a);m=t._malloc(M.length*M.BYTES_PER_ELEMENT),t.HEAP32.set(M,m/M.BYTES_PER_ELEMENT)}let g=null;if(f>0){const M=new Int32Array(c);g=t._malloc(M.length*M.BYTES_PER_ELEMENT),t.HEAP32.set(M,g/M.BYTES_PER_ELEMENT)}const b=Oc(v,r),w=Float64Array,p=t._malloc(b*w.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,r,l,s,p,m,u,g,f])!==1)throw new Error("pca_fit: PCA failed.");const A=t.HEAPF64.slice(p/w.BYTES_PER_ELEMENT,p/w.BYTES_PER_ELEMENT+b);return t._free(h),t._free(p),m&&t._free(m),g&&t._free(g),{class:["pcamodel"],v:A,ncomp:r,nrows:d,ncols:v,exclvars:c,center:l,scale:s}}function Wc(t,e,r,l){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!gr(r))throw new Error("pca_predict: X must be a matrix.");l||(l=[]);const s=l&&Array.isArray(l)?l.length:0;if(!Bo(l,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=r.nrows-s;r.ncols===e.ncols&&(a=0);const u=r.ncols-a;if(c<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const f=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,f/r.v.BYTES_PER_ELEMENT);let d=null;if(s>0){const N=new Int32Array(l);d=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,d/N.BYTES_PER_ELEMENT)}let v=null;if(a>0){const N=new Int32Array(e.exclvars);v=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,v/N.BYTES_PER_ELEMENT)}const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const m=Dc(c,e.ncomp,u),g=Float64Array,b=t._malloc(m*g.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[f,r.nrows,r.ncols,h,b,d,s,v,a])!==1)throw new Error("pca_predict: PCA prediction failed.");const p=t.HEAPF64.slice(b/g.BYTES_PER_ELEMENT,b/g.BYTES_PER_ELEMENT+m);t._free(f),t._free(h),t._free(b),d&&t._free(d),v&&t._free(v);const _={class:["pcares"],v:p,ncomp:e.ncomp,nrows:c,ncols:u,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},A=new Array(e.ncomp),M=new Array(e.ncomp),y=new Array(e.ncomp),k=new Array(e.ncomp),S=new Array(e.ncomp),C=fn(_,"xcumexpvar");S[0]=1,k[0]=C[0],y[0]=1-C[0],A[0]=C[0],M[0]=1-C[0];for(let N=1;N<e.ncomp;N++)S[N]=N+1,k[N]=C[N],y[N]=1-C[N],A[N]=C[N]-C[N-1],M[N]=1-A[N];return _.stat={components:S,resvar:M,expvar:A,cumexpvar:k,cumresvar:y},_}function Uc(t,e){let r,l,s;if(e.length>0){const a=t.values.nrows,c=t.objindices,u=a-e.length;r=Array(u),l=Array(u),s=Array(u);let f=0;for(let d=0;d<a;d++)e.includes(d)||(r[f]=c[d],l[f]=t.classes[d],s[f]=t.objlabels[d],f=f+1)}else r=t.objindices,s=t.objlabels,l=t.classes;return[r,s,l]}function Ls(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Ps(t,e,r,l){const[s,a,c]=Uc(r,l),u=Wc(t,e,r.values,l);u.hash=Ls(),u.objindices=s,u.objlabels=a,u.classes=c,u.classNames=r.classNames,u.varlabels=r.varlabels,u.eigenvals=Mt(e,"eigenvals"),u.cNh=Mt(e,"cNh"),u.cNq=Mt(e,"cNq"),u.ch0=Mt(e,"ch0"),u.cq0=Mt(e,"cq0"),u.rNh=Mt(e,"rNh"),u.rNq=Mt(e,"rNq"),u.rh0=Mt(e,"rh0"),u.rq0=Mt(e,"rq0");const f=e.nrows;return u.T2lim=2*(f-1)/(f-2)*ps(.95,2,f-2),u}function Hc(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function dn(t){return t.some(e=>Number.isNaN(e))}function Mr(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Is(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Gc(t,e,r,l,s,a,c,u=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let d=Is(t);if(d.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");d=d.filter(j=>j.replaceAll(e,"").trim().length>0);const v=d[0].split(e);if(v.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,m;const g=r!=="no";(g||g===void 0&&dn(firstRow))&&(m=v,h=1);const b=d.length-h;if(b<1)throw new Error("Data file should contain at least 1 row with values.");let w,p,_,A=Array(b);l?(w=g?Mr(m[0]):"",_=Array(b),p=1):(w="",_=[],p=0);let M,y=[],k;s?(M=g?Mr(m[p]):"",k=Array(b),p=p+1):(M="",k=[]);const S=v.length-p;if(S<1)throw new Error("Data file should contain at least 1 column with values.");const C=Bt.zeros(S,b);for(let j=h;j<b+h;j++){const W=j-h;A[W]=W;let Q=d[j].split(e);if(l&&(_[W]=Q[0],Q.shift()),s){const G=Q[0];k[W]=G,Q.shift(),(y.length===0||y.indexOf(G)<0)&&y.push(G)}const Z=f==="."?Q.map((G,X)=>Number.parseFloat(G.trim())):Q.map((G,X)=>Number.parseFloat(G.trim().replace(f,".")));if(Z.some(G=>Number.isNaN(G)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(Z.length!=S)throw new Error("Wrong number of values in row #"+j);C.v.set(new Float64Array(Z),(j-h)*S)}if(!l||_.length!==b){_=Array(b);for(let j=0;j<b;j++)_[j]="O"+(j+1)}_=_.map(j=>Mr(j)),k=k.map(j=>Mr(j)),y=y.map(j=>Mr(j));let N,L=Array(S),I=Array(S);if(m&&m.length===S+p){N=m.map(j=>Mr(j)).slice(p);for(let j=0;j<S;j++)L[j]=j>=u?j-u:j,I[j]=j>=u?j-u+1:j+1}else{N=Array(S);for(let j=0;j<S;j++)L[j]=j>=u?j-u:j,N[j]=j>=u?"V"+(j-u+1):"Y"+(j+1),I[j]=j>=u?j-u+1:j+1}let R;if(r==="values"){if(R=f==="."?N.map((j,W)=>W<u?W:Number.parseFloat(j.trim())):N.map((j,W)=>W<u?W:Number.parseFloat(j.trim().replace(f,"."))),R.some(j=>Number.isNaN(j)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else R=I;Array.isArray(R)||(R=[]),a||(a=""),c||(c=""),a=R.length>0&&a.length>0?a:"Variables",c=R.length>0&&c.length>0?c:"";const P=a+(c.length>0?", "+c:""),O=R[1]<R[0];return{values:C.t(),nresp:u,header:r,hasLabels:l,hasClassNames:s,labelsVarname:w,classLabelsVarname:M,objlabels:_,objindices:A,varlabels:N,varvalues:R,varindices:L,varrev:O,classes:k,classNames:y,sep:e,dec:f,varvaluesName:a,varvaluesUnits:c,varAxisTitle:P}}function Xc(t){if(dn(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let l=2;l<e;l++){let s=[];for(let d=1;d<t.length;d++)s.push(t[d][l]);const a=t[0][l],c=Dn(s),u=Mo(s),f=Math.abs((a-c)/u);r.push(f)}return r.every(l=>l>5)}function Kc(t){const e=",",r=t[0].split(e),l=t[1].split(e),s=r.length,a=l.length,c=";",u=t[0].split(c),f=t[1].split(c),d=u.length,v=f.length;let h,m;if(s>1&&a>1&&s===a&&s>d)m=e,h=s;else if(d>1&&v>1&&d===v)m=c,h=d;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",h]}function Qc(t,e=0){const r=Is(t),l=r.length;if(l<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[s,a,c]=Kc(r),u=Math.min(c,5),f=Math.min(l,5);let d=r[0].split(s).length,v=r.slice(0,f).map(L=>L.split(s).slice(0,u));v=v.map(L=>L.map(I=>Mr(I)));const h=v.map(L=>Hc(L.slice(),a));for(let L=1;L<f;L++)if(dn(h[L].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const m=Xc(h);let g=0;const b=m?1:0,w=b+1,p=v[b][0],_=v[w][0],A=h[b][0],M=h[w][0],y=h[b][1],k=h[w][1];let S=!1,C=!1;if(Number.isNaN(A)&&Number.isNaN(M)&&p!==_?(S=!0,g=g+1):Number.isNaN(y)&&Number.isNaN(k)&&p!==_&&(S=!0,C=!0,g=g+2),!C){const L=S?1:0,I=h[b][L],R=h[w][L];C=dn([I,R]),g=g+C}let N="no";if(m){g>0?v[0].slice(g+e):v[e];const L=g>0?h[0].slice(g+e):h[e];N=dn(L)?"labels":"values"}return[s,S,C,N,d]}function Jc(t,e){const r=t.nresp?t.nresp:0,l=t.values,s=t.varvalues,a=t.varlabels,c=t.varindices,u=l.nrows,f=l.ncols,d=f-e.length,v=Bt.zeros(u,d),h=Array(d),m=Array(d),g=Array(d);let b=0;for(let w=0;w<r;w++){const p=u*w,_=u*b;v.v.set(l.v.slice(p,p+u),_),h[b]=s[w],m[b]=a[w],g[b]=c[w],b=b+1}for(let w=r;w<f;w++){if(e.includes(w-r))continue;const p=u*w,_=u*b;v.v.set(l.v.slice(p,p+u),_),h[b]=s[w],m[b]=a[w],g[b]=c[w],b=b+1}return{values:v,header:t.header,hasLabels:t.hasLabels,hasClassNames:t.hasClassNames,classNames:t.classNames,labelsVarname:t.labelsVarname,classLabelsVarname:t.classLabelsVarname,objlabels:t.objlabels,objindices:t.objindices,varlabels:m,varvalues:h,varindices:g,varrev:t.varrev,classes:t.classes,responses:t.responses,classNames:t.classNames,sep:t.sep,dec:t.dec,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits,varAxisTitle:t.varAxisTitle,fileName:t.fileName,nresp:r}}function Vo(t,e){return gr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Se(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function Rs(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Vc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return He(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Do(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${l}${s}${a}${c}`}var Zc=K('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function Vt(t,e){let r=q(e,"text",3,"button");var l=Zc();l.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var s=B(l);ee(()=>ve(s,r())),T(t,l)}tt(["click"]);var $c=K('<button tabindex="0"></button>');function js(t,e){var r=$c();r.__click=function(...l){var s;(s=e.onclick)==null||s.apply(this,l)},ee(()=>{z(r,"title",e.title),z(r,"aria-label",e.title),z(r,"alt",e.title),ut(r,1,`button ${e.className??""}`,"svelte-bx9fh5")}),T(t,r)}tt(["click"]);function vn(t,e){let r=q(e,"title",3,"Reset");js(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function eu(t,e){let r=q(e,"title",3,"Undo");js(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function tr(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var tu=K('<span class="label svelte-vzu0vi"> </span>'),ru=K("<div><!> <!></div>");function Ee(t,e){let r=q(e,"label",3,null),l=q(e,"name",3,""),s=q(e,"status",3,""),a=q(e,"colors",3,""),c=q(e,"labelWidth",3,12);var u=ru(),f=B(u);{var d=h=>{var m=tu(),g=B(m);ee(()=>{nt(m,`flex-basis:${c()??""}ch;`),ve(g,r())}),T(h,m)};U(f,h=>{r()&&h(d)})}var v=V(f,2);vr(v,()=>e.children??vt),ee(()=>{ut(u,1,`control-element ${l()??""} ${s()??""}`,"svelte-vzu0vi"),nt(u,a())}),T(t,u)}const Fs=(t,e,r,l)=>{const s=e(t);s<0||s>1||D(r,s*100>o(l)-5&&s*100<o(l)+5,!0)},qs=(t,e,r,l,s,a)=>{D(e,!1);const c=r(t);c<0||c>1||(l(s(c)),a()&&a()(l()))},Bs=(t,e,r,l,s,a)=>{if(!o(e))return;const c=r(t);c<0||c>1||(l(s(c)),a()&&a()(l()))},nu=(t,e,r,l,s,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<l()?l():e()-r()),s()&&s()(e());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r()),s()&&s()(e());return}};var ou=K('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function lu(t,e){fe(e,!0);let r=q(e,"min",7,0),l=q(e,"max",3,100),s=q(e,"value",31,()=>et(r())),a=q(e,"decNum",3,1),c=q(e,"step",19,()=>+((l()-r())/100).toFixed(4)),u=q(e,"onchange",3,null);Be(()=>{s()<r()&&(s(r()),u()&&u()(s())),s()>l()&&(s(l()),u()&&u()(s())),r()>l()&&r(l())});let f=ne(void 0),d=ne(void 0),v=ne(!1);const h=S=>{const C=r()+S*(l()-r());return+(Math.round(C/c())*c()).toFixed(4)},m=S=>{const C=o(f).getBoundingClientRect(),N=o(d).getBoundingClientRect(),L=C.x,I=N.x+N.width;return(S.clientX-L)/(I-L)},g=S=>{D(v,!1)},b=S=>{let C=s()+c()*S.deltaY*.5;C<r()&&(C=r()),C>l()&&(C=l()),s(+(Math.round(C/c())*c()).toFixed(4)),S.preventDefault(),u()&&u()(s())},w=E(()=>r()===l()?100:(s()-r())/(l()-r())*100);var p=ou();p.__keydown=[nu,s,c,r,u,l],p.__mousemove=[Bs,v,m,s,h,u],p.__mousedown=[Fs,m,v,w],p.__mouseup=[qs,v,m,s,h,u],p.__touchmove=[Bs,v,m,s,h,u],p.__touchstart=[Fs,m,v,w],p.__touchend=[qs,v,m,s,h,u];var _=B(p);let A;var M=B(_);let y;var k=B(M);Gr(_,S=>D(f,S),()=>o(f)),Gr(p,S=>D(d,S),()=>o(d)),ee((S,C,N)=>{z(p,"aria-valuenow",s()),z(p,"aria-valuemin",r()),z(p,"aria-valuemax",l()),A=ut(_,1,"range-slider svelte-vhx0r0",null,A,S),nt(_,`width:${o(w)??""}%`),y=ut(M,1,"range-value svelte-vhx0r0",null,y,C),ve(k,N)},[()=>({"range-slider_right":o(w)<50}),()=>({"range-value_right":o(w)<50}),()=>s().toFixed(a())]),Er("mousewheel",p,b),Er("mouseleave",p,g),Er("touchcancel",p,g),T(t,p),de()}tt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Vs=(t,e,r,l,s)=>{const a=e(t);a<0||a>1||D(r,a>o(l)&&a<o(s)+o(l),!0)},Ds=(t,e,r,l,s)=>{D(e,!1);const a=r(t);if(a<0||a>1)return;const c=l(a);s()!==c&&s(c)},Os=(t,e,r,l,s)=>{if(!o(e))return;const a=r(t);if(a<0||a>1)return;const c=l(a);c!=s()&&s(c)},su=(t,e,r,l,s)=>{if(t.key==="ArrowLeft"){e(e()-r()<l()?l():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>s()?s():e()+r());return}};var au=K('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function pr(t,e){fe(e,!0);let r=q(e,"min",3,0),l=q(e,"max",3,10),s=q(e,"value",31,()=>et(r())),a=q(e,"step",3,1);s()<r()&&(console.error('The "value" is outside of the provided range.'),s(r())),s()>l()&&(console.error('The "value" is outside of the provided range.'),s(l())),r()>l()&&console.error("The min and max values must be distinct.");let c=ne(void 0),u=ne(void 0),f=ne(!1);const d=E(()=>r()===l()?0:(s()-r())/(l()-r()+1)),v=E(()=>a()/(l()-r()+1)),h=E(()=>l()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${o(v)*100}%, var(--bg-color-light2, #e8e8e8) ${o(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*o(v)}%)`:"background: #f0f0f0"),m=S=>{if(S<0||S>1)return s();let C=s();return S<o(d)&&o(d)>0&&(C=s()-Math.ceil((o(d)-S)/o(v))),S>o(d)+o(v)&&o(d)+o(v)<1&&(C=s()+Math.ceil((S-(o(d)+o(v)))/o(v))),C<r()&&(C=r()),C>l()&&(C=l()),C},g=S=>{const C=o(u).getBoundingClientRect(),N=C.x,L=C.x+C.width;return(S.clientX-N)/(L-N)},b=S=>{D(f,!1)},w=S=>{let C=Math.round(s()+S.deltaY*.5*a());C<r()&&(C=r()),C>l()&&(C=l()),s(C),S.preventDefault()};var p=au();p.__keydown=[su,s,a,r,l],p.__mousemove=[Os,f,g,m,s],p.__mousedown=[Vs,g,f,d,v],p.__mouseup=[Ds,f,g,m,s],p.__touchmove=[Os,f,g,m,s],p.__touchstart=[Vs,g,f,d,v],p.__touchend=[Ds,f,g,m,s];var _=B(p);let A;var M=B(_);let y;var k=B(M);Gr(_,S=>D(c,S),()=>o(c)),Gr(p,S=>D(u,S),()=>o(u)),ee((S,C,N)=>{z(p,"aria-valuenow",s()),z(p,"aria-valuemin",r()),z(p,"aria-valuemax",l()),nt(p,o(h)),A=ut(_,1,"range-slider svelte-xdlm7u",null,A,S),nt(_,`width: max(2px, ${o(v)*100}%);left:${o(d)*100}%;`),y=ut(M,1,"range-value svelte-xdlm7u",null,y,C),ve(k,N)},[()=>({"range-slider_left":o(v)<.1&&o(d)<.5,"range-slider_right":o(v)<.1&&o(d)>=.5}),()=>({"range-value_right":o(v)<.1&&o(d)>.5,"range-value_left":o(v)<.1&&o(d)<=.5}),()=>s().toFixed(0)]),Er("mousewheel",p,w),Er("mouseleave",p,b),Er("touchcancel",p,b),T(t,p),de()}tt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const iu=(t,e,r)=>{if(t.key==="ArrowLeft"){const l=e.options.findIndex(s=>s===r());l>0&&r(e.options[l-1]);return}if(t.key==="ArrowRight"){const l=e.options.findIndex(s=>s===r());l<e.options.length-1&&r(e.options[l+1]);return}};var cu=(t,e,r)=>e(r),uu=K('<button tabindex="-1"><!></button>'),fu=K('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function mt(t,e){fe(e,!0);let r=q(e,"value",31,()=>et(e.options[0])),l=q(e,"className",3,"");var s=fu(),a=$(s);a.__keydown=[iu,e,r],Ue(a,20,()=>e.options,u=>u,(u,f)=>{var d=uu();d.__click=[cu,r,f];let v;var h=B(d);bt(h,()=>f),ee((m,g)=>v=ut(d,1,`option option_${m??""}`,"svelte-1i17tox",v,g),[()=>f.toString().replace(".","_"),()=>({selected:f==r()})]),T(u,d)});var c=V(a,2);ee(()=>ut(a,1,`selector ${l()??""}`,"svelte-1i17tox")),ko(c,r),T(t,s),de()}tt(["keydown","click"]);function Dt(t,e){fe(e,!0);let r=q(e,"options",19,()=>["no","yes"]),l=q(e,"value",15,!1),s=ne(!0);const a=E(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());Be(()=>D(s,l()?r()[1]:r()[0],!0)),Be(()=>l(o(s)===r()[1]));var c=me(),u=$(c);{var f=d=>{mt(d,{get options(){return o(a)},get value(){return o(s)},set value(v){D(s,v,!0)}})};U(u,d=>{o(a)&&d(f)})}T(t,c),de()}var du=K('<div tabindex="0" role="radiogroup"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function Ys(t,e){fe(e,!0);let r=q(e,"file",15),l=q(e,"message",3,"Select CSV file with dataset"),s=q(e,"acceptType",3,".csv"),a;function c(p){a&&a.files.length>0?r(a.files[0]):r(null)}function u(p){(p.type==="click"||p.type==="keydown"&&(p.code==="Space"||p.code==="Enter"))&&a.click()}function f(p){a.value=null,r(null)}var d=du(),v=$(d);v.__keydown=u,v.__click=u;let h;var m=B(v),g=V(m);g.__change=c,Gr(g,p=>a=p,()=>a);var b=V(v,2);{var w=p=>{vn(p,{onclick:f})};U(b,p=>{r()&&p(w)})}ee(p=>{h=ut(v,1,"file-selector svelte-1k0x7uv",null,h,p),ve(m,`${(r()?r().name:l())??""} `),z(g,"accept",s())},[()=>({selected:r()})]),T(t,d),de()}tt(["keydown","click","change"]);function vu(t,e,r,l){e()&&D(r,e()(l()),!0)}var hu=K('<div class="error-message svelte-1qtiwcs"> </div>'),mu=K('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function Ws(t,e){fe(e,!0);let r=q(e,"value",15,""),l=q(e,"className",3,""),s=q(e,"placeholder",3,""),a=q(e,"maxLength",3,25),c=q(e,"validator",3,null),u=ne("");var f=mu();let d;var v=B(f);v.__input=[vu,c,u,r];var h=V(v,2);{var m=g=>{var b=hu(),w=B(b);ee(()=>ve(w,o(u))),T(g,b)};U(h,g=>{o(u)&&o(u).length>0&&g(m)})}ee(g=>{d=ut(f,1,`textinput ${l()??""}`,"svelte-1qtiwcs",d,g),z(v,"placeholder",s()),z(v,"maxlength",a())},[()=>({error:o(u)&&o(u).length>0})]),ko(v,r),T(t,f),de()}tt(["input"]);var gu=K('<div class="spinner svelte-n48urb"></div>');function Us(t){var e=gu();T(t,e)}const pu=(t,e,r)=>{if(t.key==="ArrowLeft"){const l=e().findIndex(s=>s===r());l>0&&r(e()[l-1]);return}if(t.key==="ArrowRight"){const l=e().findIndex(s=>s===r());l<e().length-1&&r(e()[l+1]);return}};var bu=(t,e,r)=>e(r),wu=K('<button tabindex="-1"><!></button>'),_u=K('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an">',1);function Gn(t,e){fe(e,!0);let r=q(e,"options",19,()=>["p","l","b","h"]),l=q(e,"value",31,()=>et(r()[0]));const s='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar"};var u=_u(),f=$(u);f.__keydown=[pu,r,l],Ue(f,20,r,v=>v,(v,h)=>{var m=wu();m.__click=[bu,l,h];let g;var b=B(m);bt(b,()=>s+a[h]+"</svg"),ee(w=>{g=ut(m,1,"option svelte-yf64an",null,g,w),z(m,"title",c[h])},[()=>({selected:h==l()})]),T(v,m)});var d=V(f,2);ko(d,l),T(t,u),de()}tt(["keydown","click"]),tt(["keydown","click"]);var yu=K("<h2> </h2>"),xu=K("<!> <!>",1),ku=K('<div class="widget"><!></div>');function Eu(t,e){fe(e,!0);let r=q(e,"title",3,""),l=q(e,"value",15),s=q(e,"labelWidth",3,13);function a(d){const v={};for(const h of Object.keys(d))v[h]=d[h].default;return v}Be(()=>{!l()&&e.options&&l(a(e.options))});var c=ku(),u=B(c);{var f=d=>{var v=xu(),h=$(v);{var m=b=>{Ee(b,{children:(w,p)=>{var _=yu(),A=B(_);ee(()=>ve(A,r())),T(w,_)},$$slots:{default:!0}})};U(h,b=>{r()&&b(m)})}var g=V(h,2);Ue(g,17,()=>Object.keys(e.options),Qe,(b,w)=>{var p=me();const _=E(()=>e.options[o(w)]);var A=$(p);{var M=y=>{Ee(y,{get name(){return o(_).name},get label(){return o(_).label},get labelWidth(){return s()},children:(k,S)=>{var C=me(),N=$(C);yo(N,()=>o(_).el,(L,I)=>{I(L,Xr(()=>o(_).props,{get value(){return l()[o(w)]},set value(R){l(l()[o(w)]=R,!0)}}))}),T(k,C)},$$slots:{default:!0}})};U(A,y=>{o(_).hidden||y(M)})}T(b,p)}),T(d,v)};U(u,d=>{l()&&d(f)})}T(t,c),de()}var Au=K('<span style="font-weight:bold"> </span><br>',1),Cu=K('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),Mu=K('<span class="file-size svelte-gdjwex"> </span>'),Su=K('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <!></p> <!>',1);function Nu(t,e){fe(e,!0);let r=q(e,"title",3,"");var l=me(),s=$(l);{var a=c=>{Ee(c,{children:(u,f)=>{var d=Su(),v=$(d),h=B(v);{var m=M=>{var y=Au(),k=$(y),S=B(k);ee(()=>ve(S,r())),T(M,y)};U(h,M=>{r()&&r()!==""&&M(m)})}var g=V(h,4),b=B(g),w=V(g,5);{var p=M=>{var y=Cu(),k=$(y),S=B(k),C=V(k,4),N=B(C);ee(()=>{ve(S,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),ve(N,`${e.dataset.nresp??""}×${e.dataset.values.ncols??""}`)}),T(M,y)},_=M=>{var y=Mu(),k=B(y);ee(()=>ve(k,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),T(M,y)};U(w,M=>{e.dataset.nresp&&e.dataset.nresp>0?M(p):M(_,!1)})}var A=V(v,2);vn(A,{get onclick(){return e.reset}}),ee(()=>{z(g,"title",e.dataset.fileName),ve(b,e.dataset.fileName)}),T(u,d)},$$slots:{default:!0}})};U(s,c=>{e.dataset&&c(a)})}T(t,l),de()}var zu=K("<!> <!>",1),Tu=K("<!> <!> <!> <!> <!> <!>",1),Lu=K("<!> <!>",1),Pu=K("<p> </p>"),Iu=K("<!> <p> </p>",1),Ru=K("<p> </p>"),ju=K("<!> <!> <!>",1);function Hs(t,e){fe(e,!0);let r=q(e,"model",3,null),l=q(e,"outliers",19,()=>[]),s=q(e,"className",3,"Class"),a=q(e,"classMandatory",3,!1),c=q(e,"classUnique",3,!1),u=q(e,"title",3,""),f=q(e,"dataset",15),d=q(e,"resobj",15);const v=[",",";"],h=E(()=>r()?["no","yes"]:["no","labels","values"]);let m=ne(void 0),g=ne(""),b=ne(""),w=ne(","),p=ne("no"),_=ne(!1),A=ne(!1),M=ne(null),y=ne("neutral"),k=ne("");function S(G,X,re){D(M,e.WASM().then(te=>{d(Ps(te,G,X,re))}).catch(te=>{console.error(te),d(null),D(y,"error"),D(k,te,!0)}),!0)}function C(G,X){if(!G||G.size<10)return;const te=G.slice(0,1e5),J=new FileReader;J.onload=()=>{const ae=J.result;!ae||ae.length<0||((Ae=>{let[Fe,ge,Ge,ye]=Ae;D(w,Fe,!0),D(_,ge,!0),D(A,Ge,!0),D(p,ye,!0)})(Qc(ae)),D(A,a()||o(A),!0),X&&o(p)!=="no"&&D(p,"yes"))},J.onerror=function(ae){csvString=null,D(y,"error"),D(k,ae,!0),console.error("Error reading CSV file.",ae)},J.readAsText(te)}function N(G){try{const X=Gc(G,o(w),o(p)==="yes"?"labels":o(p),o(_),o(A),o(g),o(b));if(X.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(r()&&X.values.ncols!==r().ncols+r().exclvars.length)throw new Error("Dataset has different number of columns than the training set.");if(X.classNames.length>X.values.nrows/2)throw new Error("Dataset has too many unique "+s().toLowerCase()+" labels ("+X.classNames.length+"), check your CSV file.");if(a()&&X.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&X.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");X.fileName=o(m).name.replace(/\.[^/.]+$/,""),r()&&(X.varrev=r().varrev,X.header=r().header,X.varlabels=r().varlabels,X.varvalues=r().varvalues,X.varvaluesName=r().varvaluesName,X.varvaluesUnits=r().varvaluesUnits),f(X),D(k,""),D(y,"success")}catch(X){console.error(X),f(null),D(y,"error"),D(k,X,!0)}}function L(G){const X=new FileReader;X.onload=()=>{N(X.result)},X.readAsText(o(m))}function I(){D(m,""),f(null),d(null),D(g,""),D(b,""),D(y,"neutral"),D(k,"")}Be(()=>{o(m)===null?I():(C(o(m),r()),D(y,"neutral"),D(k,""))}),Be(()=>{o(w)&&(D(y,"neutral"),D(k,""))}),Be(()=>{if(f()&&r()&&!d()&&!o(k))try{d(S(r(),f(),l())),D(k,""),D(y,"success")}catch(G){console.error(G),f(null),d(null),D(y,"error"),D(k,G,!0)}});var R=ju(),P=$(R);{var O=G=>{var X=Lu(),re=$(X);Fn(re,()=>o(m)===void 0,ae=>{Ee(ae,{children:(Ae,Fe)=>{Ys(Ae,{id:"dataFile",message:"Select CSV file with dataset",get file(){return o(m)},set file(ge){D(m,ge,!0)}})},$$slots:{default:!0}})});var te=V(re,2);{var J=ae=>{var Ae=Tu(),Fe=$(Ae);Ee(Fe,{label:"Delimiter",children:(se,Te)=>{mt(se,{id:"sep",options:v,get value(){return o(w)},set value(pe){D(w,pe,!0)}})},$$slots:{default:!0}});var ge=V(Fe,2);Ee(ge,{label:"Row labels",children:(se,Te)=>{Dt(se,{id:"hasLabels",options:["no","yes"],get value(){return o(_)},set value(pe){D(_,pe,!0)}})},$$slots:{default:!0}});var Ge=V(ge,2);{var ye=se=>{Ee(se,{get label(){return`${s()??""} labels`},children:(Te,pe)=>{Dt(Te,{id:"hasLabels",options:["no","yes"],get value(){return o(A)},set value(_e){D(A,_e,!0)}})},$$slots:{default:!0}})};U(Ge,se=>{a()||se(ye)})}var xe=V(Ge,2);Ee(xe,{label:"Header",children:(se,Te)=>{mt(se,{id:"header",get options(){return o(h)},get value(){return o(p)},set value(pe){D(p,pe,!0)}})},$$slots:{default:!0}});var ke=V(xe,2);{var le=se=>{var Te=zu(),pe=$(Te);Ee(pe,{label:"Header name",children:(lt,Kt)=>{Ws(lt,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return o(g)},set value(Xe){D(g,Xe,!0)}})},$$slots:{default:!0}});var _e=V(pe,2);Ee(_e,{label:"Header units",children:(lt,Kt)=>{Ws(lt,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return o(b)},set value(Xe){D(b,Xe,!0)}})},$$slots:{default:!0}}),T(se,Te)};U(ke,se=>{o(p)==="values"&&se(le)})}var ue=V(ke,2);Ee(ue,{label:" ",children:(se,Te)=>{Vt(se,{text:"Load",onclick:L})},$$slots:{default:!0}}),T(ae,Ae)};U(te,ae=>{o(m)&&ae(J)})}T(G,X)},Y=G=>{var X=me(),re=$(X);{var te=J=>{var ae=me(),Ae=$(ae);Ql(Ae,()=>o(M),Fe=>{Ee(Fe,{children:(ge,Ge)=>{var ye=Iu(),xe=$(ye);Us(xe);var ke=V(xe,2),le=B(ke);ee(()=>ve(le,r()?"Loading data and apply model...":"Loading data...")),T(ge,ye)},$$slots:{default:!0}})},void 0,(Fe,ge)=>{Ee(Fe,{status:"error",children:(Ge,ye)=>{var xe=Pu(),ke=B(xe);ee(()=>ve(ke,o(ge))),T(Ge,xe)},$$slots:{default:!0}})}),T(J,ae)};U(re,J=>{o(M)&&J(te)})}T(G,X)};U(P,G=>{f()?G(Y,!1):G(O)})}var j=V(P,2);{var W=G=>{Nu(G,{get dataset(){return f()},reset:I,get title(){return u()}})};U(j,G=>{f()&&G(W)})}var Q=V(j,2);{var Z=G=>{Ee(G,{status:"error",children:(X,re)=>{var te=Ru(),J=B(te);ee(()=>ve(J,o(k))),T(X,te)},$$slots:{default:!0}})};U(Q,G=>{(o(y)==="error"||o(k))&&G(Z)})}T(t,R),de()}var Fu=K('<tr class="svelte-1xneg44"><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td></tr>'),qu=K('<tr class="svelte-1xneg44"><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td></tr>'),Bu=K('<tr class="svelte-1xneg44"><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td></tr>'),Vu=K('<table class="svelte-1xneg44"><thead><tr class="svelte-1xneg44"><th class="svelte-1xneg44">PC</th><th class="svelte-1xneg44">Expvar</th><th class="svelte-1xneg44">Cumexpvar</th><th class="svelte-1xneg44">Eigenvals</th></tr></thead><tbody><!><!><!></tbody></table>');function Gs(t,e){fe(e,!0);const r=16,l=E(()=>e.resobj?e.resobj.stat.cumexpvar:null),s=E(()=>e.resobj?e.resobj.stat.expvar:null),a=E(()=>e.resobj?e.resobj.eigenvals.map(d=>d*(e.resobj.nrows-1)):null);var c=me(),u=$(c);{var f=d=>{var v=Vu(),h=V(B(v)),m=B(h);Ue(m,17,()=>e.resobj.stat.components.filter(_=>_<r),Qe,(_,A)=>{var M=Fu(),y=B(M),k=B(y),S=V(y),C=B(S),N=V(S),L=B(N),I=V(N),R=B(I);ee((P,O,Y)=>{ve(k,o(A)),ve(C,P),ve(L,O),ve(R,Y)},[()=>(o(s)[o(A)-1]*100).toFixed(2),()=>(o(l)[o(A)-1]*100).toFixed(2),()=>o(a)[o(A)-1].toFixed(2)]),T(_,M)});var g=V(m);{var b=_=>{var A=qu();T(_,A)};U(g,_=>{e.resobj.ncomp>r&&_(b)})}var w=V(g);{var p=_=>{var A=Bu(),M=B(A),y=B(M),k=V(M),S=B(k),C=V(k),N=B(C),L=V(C),I=B(L);ee((R,P,O)=>{ve(y,e.resobj.ncomp),ve(S,R),ve(N,P),ve(I,O)},[()=>((o(l)[e.resobj.ncomp-1]-o(l)[e.resobj.ncomp-2])*100).toFixed(2),()=>(o(l)[e.resobj.ncomp-1]*100).toFixed(2),()=>o(a)[e.resobj.ncomp-1].toFixed(2)]),T(_,A)};U(w,_=>{e.resobj.ncomp>=r&&_(p)})}T(d,v)};U(u,d=>{e.resobj&&d(f)})}T(t,c),de()}var Du=K('<span class="item svelte-1ggez3e"> </span>'),Ou=K('<p class="outliers svelte-1ggez3e"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function Xs(t,e){fe(e,!0);var r=me(),l=$(r);{var s=a=>{Ee(a,{children:(c,u)=>{var f=Ou(),d=$(f),v=V(B(d),2);Ue(v,17,()=>e.outliers,Qe,(b,w)=>{var p=Du(),_=B(p);ee(()=>ve(_,e.dataset.objlabels[o(w)])),T(b,p)});var h=V(d,2);{var m=b=>{eu(b,{get onclick(){return e.undoOutliers}})};U(h,b=>{e.outliers.length>1&&b(m)})}var g=V(h,2);vn(g,{get onclick(){return e.resetOutliers}}),T(c,f)},$$slots:{default:!0}})};U(l,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(s)})}T(t,r),de()}const Yu={small:30,medium:40,large:50,xlarge:60},Wu={small:5,medium:8,large:12,xlarge:15},Uu={small:6,medium:10,large:14,xlarge:18},Oo={small:4,medium:6,large:8,xlarge:10},Hu={small:12,medium:15,large:19,xlarge:21},Yo={small:11,medium:15,large:17,xlarge:19},hn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Xn=["●","◼","▲","▼","⬥","＋","✳","✕"],Gu=.8,Ks=.5,Xu={small:5,medium:8,large:12,xlarge:15},St={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Qs(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function Js(t,e){if(t!=null&&(Array.isArray(t)&&(t=He(t)),!(!Se(t)||t.length<1)))return t.apply(r=>Ko((r-e[1])*e[0]+e[2])).v}function ot(t,e){return Js(t,e.coords)}function Wo(t,e){return Js(t,e.objects)}function Zs(t,e){if(t!=null&&(Array.isArray(t)&&(t=He(t)),!(!Se(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function $s(t,e){return Zs(t,e.coords)}function ea(t,e){return Zs(t,e.objects)}function Uo(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Sr(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Ho(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Sr(Math.abs(Ar(as(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Sr(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let l=Math.ceil(-Sr(Math.log10(e)));return l<=2?[0,Array.from(t).map(s=>s.toFixed(l))]:(r=l-2,l=2,Sr(Math.abs(Cr(t)))<=10?[-r,Array.from(t).map(s=>(s*Math.pow(10,r)).toFixed(l))]:[-r,Array.from(t).map(s=>(s/Math.pow(10,r)).toString())])}function xt(t,e,r){return Array.isArray(t)&&(t=He(t)),Se(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Go(t,e,r,l){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const s=r.coords,a=l.coords;let c="";for(let u=0;u<t.length;u++){const f=Ko((t.v[u]-s[1])*s[0]+s[2]),d=Ko((e.v[u]-a[1])*a[0]+a[2]);c+=f+","+d+" "}return c}function ta(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Kn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function ra(t,e){if(Array.isArray(t)&&(t=He(t)),!Se(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const l=e[0]<e[1]?e[0]:e[1],s=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=l&c<=s);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function Xo(t,e,r,l,s,a){s==null&&(s=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const u=Math.abs(c[1]-c[0])*a,f=c[1]-c[0]-2*u,d=Math.floor(Math.log10(f)),v=1/Math.pow(10,d-1),h=Math.round(f*v)/v;let m=Ku(h/r);s&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+u)/m)*m,b=Math.floor((c[1]-u)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-b)<m/10&&(b=b-m),r=Math.ceil(Sr((b-g)/m))+1,t=we.zeros(r);for(let w=0;w<r;w++)t.v[w]=g+m*w;if(Math.abs(m)<1){const w=Math.pow(10,1+Math.round(-Math.log10(m)));t=t.apply(p=>Math.round((p+Number.EPSILON)*w)/w)}return t.filter(w=>w>=c[0]&w<=c[1])}function Ku(t,e){const r=Math.floor(Math.log10(t)),l=t/Math.pow(10,r);let s;return l<=1?s=1:l<=2?s=2:l<=5?s=5:s=10,s*Math.pow(10,r)}function Ko(t){return Math.round(t*10)/10}function Qu(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function na(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Ju(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let l=0;l<8;l++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Zu(t){let e=-1,r=Ju();for(let l=0;l<t.length;l++)e=r[(e^t[l])&255]^e>>>8;return e^-1}function $u(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const l=Zu(r),s=new Uint8Array(4);s[0]=l>>>24,s[1]=l>>>16,s[2]=l>>>8,s[3]=l&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(s,50),c}function ef(t,e){const r=t.split(","),l=r[0],s=r[1],a=33/3*4,c=s.substring(0,a),u=s.substring(a),f=atob(c),d=new Uint8Array(f.length);for(let m=0;m<d.length;m++)d[m]=f.charCodeAt(m);const v=$u(d,e),h=btoa(String.fromCharCode(...v));return[l,",",h,u].join("")}function tf(t,e,r,l,s){if(r||(r=10),l||(l=10),s||(s=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(l<1||l>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(s<50||s>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*s,c=l/2.54*s;setTimeout(()=>{const u=t.clientHeight,f=t.clientWidth;let d=Math.max(a/f,c/u),v=1;d<1&&(v=d,d=1);const h=document.createElement("canvas"),m=h.getContext("2d");h.width=f*(v<1?v:d),h.height=u*(v<1?v:d),t.setAttribute("width",f*d),t.setAttribute("height",u*d),m.fillStyle="white",m.fillRect(0,0,h.width,h.height),m.scale(d,d);const g=new XMLSerializer().serializeToString(t),b=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),w=URL.createObjectURL(b),p=new Image;p.onload=function(){v<0&&(p.width=p.width*v,p.height=p.height*v),m.drawImage(p,0,0,h.width,h.height);const _=h.toDataURL("image/png"),A=ef(_,s),M=document.createElement("a");M.href=A,M.download=`${e}.png`,M.click()},p.src=w},20)}function rf(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,l=t.clientWidth;t.setAttribute("width",l+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${l} ${r}`);const s=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(s),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function nf(t,e,r,l){const s=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":of(e,r,l)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=s},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=s},500)}).catch(a=>console.error(a))}async function of(t,e,r){const l=t.clientHeight,s=t.clientWidth,a=Math.max(e/s,r/l),c=document.createElement("canvas"),u=c.getContext("2d");return c.width=s*a,c.height=l*a,u.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((d,v)=>{const h=new XMLSerializer().serializeToString(t),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,b=g.createObjectURL(m),w=new Image;w.onload=function(){u.drawImage(w,0,0,c.width,c.height),g.revokeObjectURL(b),c.toBlob(function(p){p?d(p):v(new Error("Failed to create blob"))},"image/png")},w.onerror=function(p){v(p)},w.src=b})}function oa(t,e){t>16&&(t=16);const r=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?r[t-1].map(l=>l+e):r[t-1]}function lf(t,e,r,l,s){let a=s.ticks,c=s.tickLabels,u=0;const f=Xo(a,t,Wu[r.x],!0,s.whole),d=f.length,v=ea([Oo[r.plot]],l)[0],h=we.fill(e[0],d),m=h.add(v),g=we.fill(e[1],d);if(c||(a?(u=0,c=a.v.map(N=>Sr(N).toString())):[u,c]=Ho(f.v)),!c||c.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[f,h],[f,g]],w=[[He([t[0]]),He([e[0]])],[He([t[1]]),He([e[0]])]],p=[[f,m],[f,h]],_=(t[1]-t[0])*.01,A=[[null,null],[[t[1]-(u>9?1:0)*_],[h.v[d-1]]]],M=Uo(u),y=c.length,k=Math.abs(t[1]>t[0]?t[1]-f.v[y-1]:t[1]-f.v[0]),S=Math.abs(t[1]-t[0]),C=Math.abs(f.v[1]-f.v[0]);if(M.length>0&&k<S*.1&&k<C*.5){const N=t[1]>t[0]?y-1:0;c[N]=" "}return{grid:b,axisLine:w,tickCoords:p,tfCoords:A,ticks:a,tickLabels:c,tickFactor:u,tfLabel:M}}function sf(t,e,r,l,s){let a=s.ticks,c=s.tickLabels,u=0;const f=Xo(s.ticks,e,Uu[r.y],!0,s.whole),d=f.length,v=ea([Oo[r.plot]],l)[0],h=we.fill(t[0],d),m=h.add(v),g=we.fill(t[1],d);if(c||(a?(u=0,c=a.v.map(C=>Sr(C).toString())):[u,c]=Ho(f.v)),c.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[h,f],[g,f]],w=[[He([t[0]]),He([e[0]])],[He([t[0]]),He([e[1]])]],p=[[h,f],[m,f]],_=[[[],[]],[[m.v[d-1]+(Math.abs(u)>9?3:2)*v],[e[1]]]],A=Uo(u),M=c.length,y=Math.abs(e[1]>e[0]?e[1]-f.v[M-1]:e[1]-f.v[0]),k=Math.abs(e[1]-e[0]),S=Math.abs(f.v[1]-f.v[0]);if(A.length>0&&y<k*.1&&y<S*.5){const C=e[1]>e[0]?M-1:0;c[C]=" "}return{grid:b,axisLine:w,tickCoords:p,tfCoords:_,ticks:a,tickLabels:c,tickFactor:u,tfLabel:A}}function af(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Se(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let l,s;if(t.labels?(l=t.labels,s=0):[s,l]=Ho(e),!(l.length===e.length-1||l.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=l.length===r.length;return{colmap:r,breaks:e,labels:l,isCentered:a,labelsFactor:s,fontSize:t.fontSize,labelColor:t.labelColor}}function cf(t,e,r,l){const s=t.colmap.length,a=e*Gu,c=a/s,u=r[1]+(e-a)*.5,f=Xu[l.y],d=r[2]+f*Ks,v=d+f*(1+Ks),h=t.isCentered?c/2:0;return{start:u,top:d,height:f,width:c,dxl:h,ltop:v}}function Nr(t,e,r){if(!t||!e||!r||typeof r!="function")return;const l=t.target;if(l.tagName===e){const s=Array.prototype.indexOf.call(l.parentNode.children,l);if(s<0)return;r(s),t.stopPropagation()}}function uf(t,e){const l=document.createElement("canvas").getContext("2d");return l.font=e,l.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function ff(t,e){const r="Arial",l=e/8,s=e*1.5,a=Array(t.length),c=Array(t.length);let u=0,f=0,d=0;for(let h=0;h<t.length;h++){const m=uf("  "+t[h].label+"  ",e+"px "+r);d=m>d?m:d;const g=e*t[h].labelHeight+2*l;a[h]=g,c[h]=u,u=u+g,f=f+g}const v=s+2*l+d;return[c,a,s,l,f,v]}function df(t,e,r,l,s){const[a,c,u,f,d,v]=ff(t.items,l*t.fontSize),h=t.position.includes("left")?e[0]+s:t.position.includes("right")?e[1]-v-s:(e[1]+e[0]-v)*.5,m=t.position.includes("top")?r[1]+s:t.position.includes("bottom")?r[0]-d-s:(r[1]+r[0]-d)*.5;return{lgl:h,lgt:m,lgw:v,lgh:d,ely:a,elh:c,elw:u,elp:f}}function Kn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let l=0,s="";for(;l<t.length;){const a=t[l];if((a==="^"||a==="_")&&l<t.length-1){const c=a==="^";if(l++,t[l]==="("){let u=l+1;for(;u<t.length&&t[u]!==")";)u++;const f=t.slice(l+1,u);s+=c?e(f):r(f),l=u+1}else if(t[l]==="-"||t[l]==="–"){const u=t.slice(l,l+2);s+=c?e(u):r(u),l=l+2}else s+=c?e(t[l]):r(t[l]),l++}else s+=a,l++}return s}var vf=ie('<line vector-effect="non-scaling-stroke"></line>'),hf=ie("<g></g>");function Qo(t,e){fe(e,!0);let r=q(e,"lineCoords",19,()=>[]),l=q(e,"lineColor",19,()=>St.DARKGRAY),s=q(e,"lineType",3,1),a=q(e,"lineWidth",3,1),c=q(e,"className",3,"");const u=Tt("axes");let f=E(()=>ot(r()[0][0],u.tX())),d=E(()=>ot(r()[1][0],u.tX())),v=E(()=>ot(r()[0][1],u.tY())),h=E(()=>ot(r()[1][1],u.tY())),m=E(()=>`stroke:${l()};stroke-width: ${a()}px;stroke-dasharray:${hn[u.scales().plot][s()-1]}`);var g=me(),b=$(g);{var w=p=>{var _=hf();Ue(_,21,()=>o(f),Qe,(A,M,y)=>{var k=vf();ee(()=>{z(k,"x1",o(f)[y]),z(k,"x2",o(d)[y]),z(k,"y1",o(v)[y]),z(k,"y2",o(h)[y]),nt(k,o(m))}),T(A,k)}),ee(()=>ut(_,0,tc(c()))),T(p,_)};U(b,p=>{o(f)&&o(v)&&o(d)&&p(w)})}T(t,g),de()}var mf=ie('<text text-anchor="middle"><!></text>'),gf=ie("<text><!></text>"),pf=ie("<text><!></text>"),bf=ie('<g class="tick-labels"><!></g>');function la(t,e){fe(e,!0);let r=q(e,"pos",3,1),l=q(e,"las",3,1),s=E(()=>["middle","middle","start","middle","end"][r()]),a=E(()=>`fill:${e.textColor};`);const c=Tt("axes");let u=E(()=>ot(e.tickCoords[1][0],c.tX())),f=E(()=>ot(e.tickCoords[1][1],c.tY())),d=E(()=>Yo[c.scales().plot]),v=E(()=>[0,0,o(d),0,-o(d)][r()]),h=E(()=>[0,o(d),0,-o(d),0][r()]);var m=bf(),g=B(m);{var b=p=>{var _=me(),A=$(_);Ue(A,17,()=>o(u),Qe,(M,y,k)=>{var S=mf();z(S,"data-id",k),z(S,"dx",0);var C=B(S);bt(C,()=>e.tickLabels[k],!0),ee(()=>{z(S,"x",o(u)[k]),z(S,"y",o(f)[k]),z(S,"dy",o(v)*1.25),z(S,"transform",`rotate(-90, ${o(u)[k]}, ${o(f)[k]})`)}),T(M,S)}),T(p,_)},w=(p,_)=>{{var A=y=>{var k=me(),S=$(k);Ue(S,17,()=>o(u),Qe,(C,N,L)=>{var I=gf();z(I,"data-id",L),z(I,"dy",0),z(I,"text-anchor","end");var R=B(I);bt(R,()=>e.tickLabels[L],!0),ee(()=>{z(I,"x",o(u)[L]),z(I,"y",o(f)[L]),z(I,"dx",-o(h)/2),z(I,"transform",`rotate(-90, ${o(u)[L]}, ${o(f)[L]})`)}),T(C,I)}),T(y,k)},M=y=>{var k=me(),S=$(k);Ue(S,17,()=>o(u),Qe,(C,N,L)=>{var I=pf();z(I,"data-id",L);var R=B(I);bt(R,()=>e.tickLabels[L],!0),ee(()=>{z(I,"x",o(u)[L]),z(I,"y",o(f)[L]),z(I,"dx",o(v)),z(I,"dy",o(h)),z(I,"text-anchor",o(s))}),T(C,I)}),T(y,k)};U(p,y=>{l()===2&&r()===1?y(A):y(M,!1)},_)}};U(g,p=>{l()===2&&r()===4?p(b):p(w,!1)})}ee(()=>nt(m,o(a))),T(t,m),de()}const wf=(t,e=vt,r=vt)=>{var l=Cf();const s=E(()=>e().colmap.length);var a=$(l);Ue(a,17,()=>e().colmap,Qe,(v,h,m)=>{var g=kf();const b=E(()=>r().start+m*r().width);var w=$(g),p=V(w);z(p,"dy",0);var _=B(p);bt(_,()=>e().labels[m],!0),ee(()=>{z(w,"x",o(b)),z(w,"y",r().top),z(w,"width",r().width),z(w,"height",r().height),z(w,"fill",o(h)),z(p,"x",o(b)),z(p,"y",r().ltop),z(p,"dx",r().dxl),z(p,"fill",e().labelColor),z(p,"font-size",e().fontSize+"em")}),T(v,g)});var c=V(a);{var u=v=>{var h=Ef();const m=E(()=>r().start+o(s)*r().width);z(h,"dx",0),z(h,"dy",0);var g=B(h);bt(g,()=>e().labels[o(s)],!0),ee(()=>{z(h,"x",o(m)),z(h,"y",r().ltop),z(h,"fill",e().labelColor),z(h,"font-size",`${e().fontSize??""}em`)}),T(v,h)};U(c,v=>{e().isCentered||v(u)})}var f=V(c);{var d=v=>{var h=Af();const m=E(()=>r().start+o(s)*r().width);var g=B(h);bt(g,()=>Uo(e().labelsFactor),!0),ee(()=>{z(h,"x",o(m)),z(h,"y",r().ltop),z(h,"fill",e().labelColor),z(h,"font-size",`${e().fontSize??""}em`)}),T(v,h)};U(f,v=>{e().labelsFactor!==0&&v(d)})}T(t,l)};function sa(t,e,r){t.preventDefault(),e(t,r())}function aa(t,e,r){t.preventDefault(),e(t,r())}function ia(t,e,r){t.preventDefault(),e(t,r())}function Qn(t,e,r){t.preventDefault(),e(t,r())}async function ca(t,e,r,l){nf(t.target,o(e),r(),l())}function ua(t,e,r){rf(o(e),r())}function fa(t,e,r,l,s,a){tf(o(e),r(),l(),s(),a())}var _f=ie('<text fill="crimson" text-anchor="middle"> </text>'),yf=ie('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),xf=ie("<!><!><!><!><!>",1),kf=ie('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Ef=ie('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Af=ie('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Cf=ie("<!><!><!>",1),Mf=ie("<line></line>"),Sf=ie('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Nf=ie('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),zf=ie('<svg><rect height="100%" width="100%"></rect><!></svg>'),Tf=ie('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Lf=ie('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Pf=ie('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),If=ie('<g class="plot-labels"><!><!><!></g>'),Rf=ie('<g class="axis x-axis"><!></g>'),jf=ie('<g class="axis y-axis"><!></g>'),Ff=ie('<rect fill="transparent" id="axes-box"></rect>'),qf=ie('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Bf=ie('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Vf=ie('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Df=ie('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Of=K('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),Yf=K('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Wf=K(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Uf(t,e){fe(e,!0);const r=(he,Ne=vt,Ce=vt)=>{var st=me(),wt=$(st);{var Qt=kt=>{var Ye=me(),Le=$(Ye);{var gt=at=>{var Je=_f(),Yt=B(Je);ee(()=>{z(Je,"x",o(ae)[0]-10),z(Je,"y",o(te)),z(Je,"transform",`rotate(-90, ${o(ae)[0]-10}, ${o(te)})`),ve(Yt,Ce().error)}),T(at,Je)},dt=at=>{var Je=yf(),Yt=B(Je);ee(()=>{z(Je,"x",o(J)),z(Je,"y",o(Ae)[0]),ve(Yt,Ce().error)}),T(at,Je)};U(Le,at=>{Ce().pos===4?at(gt):at(dt,!1)})}T(kt,Ye)},Nt=kt=>{var Ye=xf(),Le=$(Ye);{var gt=ce=>{Qo(ce,{get lineCoords(){return Ne().grid},get lineColor(){return St.MIDDLEGRAY},lineType:3})};U(Le,ce=>{Ce().showGrid&&ce(gt)})}var dt=V(Le);Qo(dt,{get lineCoords(){return Ne().axisLine},get lineColor(){return St.DARKGRAY},lineType:1});var at=V(dt);Qo(at,{get lineCoords(){return Ne().tickCoords},get lineColor(){return St.DARKGRAY},lineType:1});var Je=V(at);{var Yt=ce=>{la(ce,{get las(){return Ce().las},get pos(){return Ce().pos},get tickCoords(){return Ne().tickCoords},get tickLabels(){return Ne().tickLabels},get tickColor(){return St.DARKGRAY},get hideLast(){return Ce().hideLast}})};U(Je,ce=>{Ne().tickCoords.length===2&&Ne().tickLabels.length===Ne().tickCoords[1][0].length&&ce(Yt)})}var Lr=V(Je);{var qe=ce=>{const pt=E(()=>[Ne().tfLabel]);la(ce,{get pos(){return Ce().pos},get tickCoords(){return Ne().tfCoords},get tickLabels(){return o(pt)},get textColor(){return St.DARKGRAY}})};U(Lr,ce=>{Ne().tickFactor!==0&&ce(qe)})}T(kt,Ye)};U(wt,kt=>{Ce().error?kt(Qt):kt(Nt,!1)})}T(he,st)},l=(he,Ne=vt,Ce=vt)=>{var st=zf();const wt=E(()=>Ce().elw+2*Ce().elp),Qt=E(()=>Ce().elp),Nt=E(()=>Ce().elh),kt=E(()=>Ce().ely);var Ye=B(st),Le=V(Ye);Ue(Le,17,()=>Ne().items,Qe,(gt,dt,at)=>{var Je=Nf();z(Je,"x",0);var Yt=B(Je);{var Lr=ar=>{var Pe=Mf();ee(()=>{z(Pe,"x1",o(Qt)),z(Pe,"x2",o(wt)-o(Qt)),z(Pe,"y1",o(Nt)[at]/2),z(Pe,"y2",o(Nt)[at]/2),z(Pe,"stroke",o(dt).line.lineColor),z(Pe,"stroke-width",o(dt).line.lineWidth),z(Pe,"stroke-dasharray",o(R)[o(dt).line.lineType-1])}),T(ar,Pe)};U(Yt,ar=>{o(dt).line&&ar(Lr)})}var qe=V(Yt);{var ce=ar=>{var Pe=Sf(),sl=B(Pe);ee(()=>{z(Pe,"x",o(wt)/2),z(Pe,"y",o(Nt)[at]/2),z(Pe,"fill",o(dt).point.faceColor),z(Pe,"stroke-width",o(dt).point.lineWidth),z(Pe,"stroke",o(dt).point.lineColor),z(Pe,"font-size",o(L)),ve(sl,Xn[o(dt).point.marker-1])}),T(ar,Pe)};U(qe,ar=>{o(dt).point&&ar(ce)})}var pt=V(qe),ll=B(pt);bt(ll,()=>o(dt).label,!0),ee(()=>{z(Je,"y",o(kt)[at]),z(Je,"width",Ce().lgw),z(Je,"height",o(Nt)[at]),z(pt,"x",o(wt)+o(Qt)),z(pt,"y",o(Nt)[at]/2),z(pt,"fill",St.LEGEND),z(pt,"font-size",`${Ne().fontSize??""}em`)}),T(gt,Je)}),ee(()=>{z(st,"x",Ce().lgl),z(st,"y",Ce().lgt),z(st,"height",Ce().lgh),z(st,"width",Ce().lgw),z(Ye,"fill",Ne().faceColor),z(Ye,"stroke",Ne().lineColor),z(Ye,"stroke-width",Ne().lineWidth)}),T(he,st)};let s=q(e,"limX",19,()=>[0,1]),a=q(e,"limY",19,()=>[0,1]),c=q(e,"margins",19,()=>[1,1.1,.55,.6]),u=q(e,"downloadLinks",3,"none"),f=q(e,"fileName",3,"plot"),d=q(e,"pngWidth",3,8),v=q(e,"pngHeight",3,8),h=q(e,"pngRes",3,300),m=q(e,"clipboardWidth",3,1200),g=q(e,"clipboardHeight",3,800),b=q(e,"onclick",3,null),w=q(e,"onmousemove",3,null),p=q(e,"onmousedown",3,null),_=q(e,"onmouseup",3,null);function A(he,Ne){if(Ne&&he.target.id=="axes-box"){const Ce=$s([he.offsetX-o(O)],o(X))[0],st=$s([he.offsetY-o(Y)],o(re))[0];Ne(Ce,st)}}const M="plottingArea"+Math.round(Math.random()*1e4);let y=ne(0),k=ne(0),S=ne(0);const C=E(()=>({plot:Qu(o(k),o(S)),x:na(o(k)),y:na(o(S))})),N=E(()=>c().map(he=>he*Yu[o(C).plot])),L=E(()=>Hu[o(C).plot]),I=E(()=>Oo[o(C).plot]),R=E(()=>hn[o(C).plot]),P=E(()=>o(ye).show&&o(ye).label!==""?o(L)*1.5:0),O=E(()=>o(xe).show&&o(xe).label!==""?o(L)*1.5:0),Y=E(()=>e.title&&e.title!==""?o(L)*1.5:0),j=E(()=>o(k)>o(O)?o(k)-o(O):0),W=E(()=>o(S)>o(P)+o(Y)?o(S)-o(P)-o(Y):0),Q=E(()=>o(W)-o(N)[0]-o(N)[2]),Z=E(()=>o(j)-o(N)[1]-o(N)[3]),G=E(()=>Qs(s(),2)&&Qs(a(),2)&&o(j)>o(N)[1]+o(N)[3]&&o(W)>o(N)[0]+o(N)[2]),X=E(()=>o(G)?{coords:[o(Z)/(s()[1]-s()[0]),s()[0],o(N)[1]],objects:[o(Z)/(s()[1]-s()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),re=E(()=>o(G)?{coords:[-o(Q)/(a()[1]-a()[0]),a()[1],o(N)[2]],objects:[o(Q)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),te=E(()=>o(Q)*.5+o(Y)+o(N)[2]),J=E(()=>o(Z)*.5+o(O)+o(N)[1]),ae=E(()=>o(G)?ot(s(),o(X)):[0,1]),Ae=E(()=>o(G)?ot(a(),o(re)):[1,0]),Fe=E(()=>Kn(e.title)),ge=E(()=>o(Fe)?o(Fe).length===e.title.left?1:1.4:0);let Ge=ne(et({show:!1})),ye=ne(et({show:!1,error:""})),xe=ne(et({show:!1,error:""})),ke=ne(et({show:!1,colmap:null,breaks:null})),le=ne(et({show:!1,items:null,position:null}));const ue=E(()=>o(G)&&o(ke)&&o(ke).show?af(o(ke)):null),se=E(()=>o(G)&&o(ye).show?lf(s(),a(),o(C),o(re),o(ye)):null),Te=E(()=>o(G)&&o(xe).show?sf(s(),a(),o(C),o(X),o(xe)):null),pe=E(()=>o(G)&&o(ue)?cf(o(ue),o(Z),o(N),o(C)):null),_e=E(()=>o(G)&&o(le)&&o(le).show&&o(ae)?df(o(le),o(ae),o(Ae),o(L),o(I)):null);yi("axes",{setBox:he=>D(Ge,he,!0),setXAxis:he=>D(ye,he,!0),setYAxis:he=>D(xe,he,!0),setColmapLegend:he=>D(ke,he,!0),setGroupLegend:he=>D(le,he,!0),scales:()=>o(C),tX:()=>o(X),tY:()=>o(re),limX:()=>s(),limY:()=>a()});var lt=Wf();let Kt;var Xe=B(lt),ct=V(B(Xe));{var $e=he=>{var Ne=If(),Ce=B(Ne);{var st=Ye=>{var Le=Tf();z(Le,"dx",0),z(Le,"dy",0);var gt=B(Le);bt(gt,()=>o(ye).label,!0),ee(()=>{z(Le,"x",o(J)),z(Le,"y",o(W)+o(Y))}),T(Ye,Le)};U(Ce,Ye=>{o(ye).show&&o(ye).label&&o(ye).label!==""&&Ye(st)})}var wt=V(Ce);{var Qt=Ye=>{var Le=Lf();z(Le,"dx",0),z(Le,"dy",0);var gt=B(Le);bt(gt,()=>o(xe).label,!0),ee(()=>{z(Le,"x",o(L)/1.1*o(xe).labelHeight),z(Le,"y",o(te)),z(Le,"transform",`rotate(-90, ${o(L)*o(xe).labelHeight/1.1}, ${o(te)})`)}),T(Ye,Le)};U(wt,Ye=>{o(xe).show&&o(xe).label&&o(xe).label!==""&&Ye(Qt)})}var Nt=V(wt);{var kt=Ye=>{var Le=Pf();z(Le,"dx",0),z(Le,"dy",0);var gt=B(Le);bt(gt,()=>o(Fe),!0),ee(()=>{z(Le,"x",o(J)),z(Le,"y",o(L)*o(ge))}),T(Ye,Le)};U(Nt,Ye=>{o(Fe)&&o(Fe)!==""&&Ye(kt)})}T(he,Ne)};U(ct,he=>{o(G)&&he($e)})}var Ot=V(ct),pn=B(Ot),$n=B(pn);z($n,"id",M);var $r=B($n),el=V(pn);{var tl=he=>{var Ne=Df(),Ce=$(Ne);{var st=qe=>{var ce=Rf(),pt=B(ce);r(pt,()=>o(se),()=>o(ye)),T(qe,ce)};U(Ce,qe=>{o(ye).show&&o(se)&&qe(st)})}var wt=V(Ce);{var Qt=qe=>{var ce=jf(),pt=B(ce);r(pt,()=>o(Te),()=>o(xe)),T(qe,ce)};U(wt,qe=>{o(xe).show&&o(Te)&&qe(Qt)})}var Nt=V(wt),kt=B(Nt);{var Ye=qe=>{var ce=Ff();ce.__keydown=[Qn,A,b],ce.__click=[Qn,A,b],ce.__mousemove=[ia,A,w],ce.__mousedown=[sa,A,p],ce.__mouseup=[aa,A,_],ee(()=>{z(ce,"stroke",o(Ge).lineColor),z(ce,"stroke-width",`${o(Ge).lineWidth??""}px`),z(ce,"x",o(ae)[0]),z(ce,"y",o(Ae)[1]),z(ce,"width",o(ae)[1]-o(ae)[0]),z(ce,"height",o(Ae)[0]-o(Ae)[1])}),T(qe,ce)},Le=qe=>{var ce=qf();ce.__keydown=[Qn,A,b],ce.__click=[Qn,A,b],ce.__mousemove=[ia,A,w],ce.__mousedown=[sa,A,p],ce.__mouseup=[aa,A,_],ee(()=>{z(ce,"x",o(ae)[0]),z(ce,"y",o(Ae)[1]),z(ce,"width",o(ae)[1]-o(ae)[0]),z(ce,"height",o(Ae)[0]-o(Ae)[1])}),T(qe,ce)};U(kt,qe=>{o(Ge).show?qe(Ye):qe(Le,!1)})}var gt=V(Nt);z(gt,"clip-path",`url(#${M})`);var dt=B(gt);vr(dt,()=>e.children??vt);var at=V(gt);{var Je=qe=>{var ce=Bf(),pt=B(ce);wf(pt,()=>o(ue),()=>o(pe)),T(qe,ce)};U(at,qe=>{o(pe)&&qe(Je)})}var Yt=V(at);{var Lr=qe=>{var ce=Vf(),pt=B(ce);l(pt,()=>o(le),()=>o(_e)),T(qe,ce)};U(Yt,qe=>{o(_e)&&qe(Lr)})}T(he,Ne)};U(el,he=>{o(G)&&he(tl)})}Gr(Xe,he=>D(y,he),()=>o(y));var rl=V(Xe,2);{var nl=he=>{var Ne=Of();T(he,Ne)},ol=he=>{var Ne=Yf(),Ce=B(Ne);Ce.__click=[ua,y,f],Ce.__keydown=[ua,y,f];var st=V(Ce,2);st.__click=[fa,y,f,d,v,h],st.__keydown=[fa,y,f,d,v,h];var wt=V(st,2);wt.__click=[ca,y,m,g],wt.__keydown=[ca,y,m,g],T(he,Ne)};U(rl,he=>{o(G)?he(ol,!1):he(nl)})}ee(he=>{Kt=ut(lt,1,`plot-container show-download-links-${u()??""}`,"svelte-1jtdxd0",Kt,he),nt(Xe,`font-size:${o(L)??""}px`),z(Ot,"x",o(O)),z(Ot,"y",o(Y)),z(Ot,"width",o(j)),z(Ot,"height",o(W)),z($r,"x",o(ae)[0]),z($r,"y",o(Ae)[1]),z($r,"width",o(ae)[1]-o(ae)[0]),z($r,"height",o(Ae)[0]-o(Ae)[1])},[()=>({"plot-error":!o(G)})]),ns(Xe,"clientWidth",he=>D(k,he)),ns(Xe,"clientHeight",he=>D(S,he)),T(t,lt),de()}tt(["keydown","click","mousemove","mousedown","mouseup"]);function da(t,e){fe(e,!0);let r=q(e,"tickLabels",7),l=q(e,"las",3,1),s=q(e,"whole",3,!1),a=q(e,"show",3,!0),c=q(e,"showGrid",3,!1);const u=Tt("axes");Be(()=>{const f=Kn(e.label),d=f?f.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=ra(e.ticks,u.limX())),!h&&r()&&(m=>{let[g,b]=m;r(g),h=b})(ta(r(),v)),u.setXAxis({show:a(),error:h,label:f,ticks:v,labelHeight:d,showGrid:c(),las:l(),whole:s(),tickLabels:r()})}),de()}function va(t,e){fe(e,!0);let r=q(e,"tickLabels",7),l=q(e,"las",3,1),s=q(e,"whole",3,!1),a=q(e,"show",3,!0),c=q(e,"showGrid",3,!1);const u=Tt("axes");Be(()=>{const f=Kn(e.label),d=f?f.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=ra(e.ticks,u.limY())),!h&&r()&&(m=>{let[g,b]=m;r(g),h=b})(ta(r(),v)),u.setYAxis({show:a(),error:h,label:f,ticks:v,labelHeight:d,showGrid:c(),las:l(),whole:s(),tickLabels:r(),pos:4})}),de()}function ha(t,e){fe(e,!0);let r=q(e,"lineWidth",3,1),l=q(e,"lineColor",3,"#606060");const s=Tt("axes");Be(()=>{s.setBox({show:!0,lineWidth:r(),lineColor:l()})}),de()}var Hf=(t,e)=>Nr(t,"rect",e.onclick),Gf=ie("<rect></rect>"),Xf=ie("<g></g>");function ma(t,e){fe(e,!0);let r=q(e,"faceColor",19,()=>St.PRIMARY),l=q(e,"lineColor",19,r),s=q(e,"lineWidth",3,1),a=q(e,"className",3,"series-rect");const c=E(()=>xt(e.left,"Rectangles (left)")),u=E(()=>o(c)?xt(e.top,"Rectangles (top)",o(c).length):null),f=E(()=>o(u)?typeof e.width!="object"?we.fill(e.width,o(c).length):e.width:null),d=E(()=>o(u)?typeof e.height!="object"?we.fill(e.height,o(c).length):e.height:null),v=Tt("axes"),h=E(()=>o(c)?ot(o(c),v.tX()):null),m=E(()=>o(u)?ot(o(u),v.tY()):null),g=E(()=>o(f)?Wo(o(f),v.tX()):null),b=E(()=>o(d)?Wo(o(d),v.tY()):null),w=E(()=>`fill:${r()};stroke:${l()};stroke-width:${s()}px;`),p=E(()=>o(h)&&o(m)&&o(g)&&o(b)&&o(g).length===o(h).length&&o(b).length===o(h).length);var _=me(),A=$(_);{var M=y=>{var k=Xf();k.__click=[Hf,e],Ue(k,21,()=>e.left,Qe,(S,C,N)=>{var L=Gf();ee(()=>{z(L,"x",o(h)[N]),z(L,"y",o(m)[N]),z(L,"width",o(g)[N]),z(L,"height",o(b)[N])}),T(S,L)}),ee(()=>{ut(k,0,`series ${a()??""}`),nt(k,o(w))}),T(y,k)};U(A,y=>{o(p)&&y(M)})}T(t,_),de()}tt(["click"]);var Kf=(t,e)=>Nr(t,"line",e.onclick),Qf=ie("<line></line>"),Jf=ie('<g class="series series-segment"></g>');function zr(t,e){fe(e,!0);let r=q(e,"lineColor",19,()=>St.PRIMARY),l=q(e,"lineType",3,1),s=q(e,"lineWidth",3,1);const a=E(()=>xt(e.xStart,"Segments")),c=E(()=>o(a)?xt(e.yStart,"Segments",o(a).length):null),u=E(()=>o(c)?xt(e.xEnd,"Segments",o(a).length):null),f=E(()=>o(u)?xt(e.yEnd,"Segments",o(a).length):null),d=Tt("axes"),v=E(()=>o(a)?ot(o(a),d.tX()):null),h=E(()=>o(u)?ot(o(u),d.tX()):null),m=E(()=>o(c)?ot(o(c),d.tY()):null),g=E(()=>o(f)?ot(o(f),d.tY()):null),b=E(()=>`stroke:${r()};stroke-width: ${s()}px;stroke-dasharray:${hn[d.scales().plot][l()-1]}`),w=E(()=>o(v)&&o(h)&&o(m)&&o(g));var p=me(),_=$(p);{var A=M=>{var y=Jf();y.__click=[Kf,e],Ue(y,21,()=>o(v),Qe,(k,S,C)=>{var N=Qf();ee(()=>{z(N,"x1",o(v)[C]),z(N,"x2",o(h)[C]),z(N,"y1",o(m)[C]),z(N,"y2",o(g)[C])}),T(k,N)}),ee(()=>nt(y,o(b))),T(M,y)};U(_,M=>{o(w)&&M(A)})}T(t,p),de()}tt(["click"]);var Zf=(t,e)=>Nr(t,"text",e.onclick),$f=ie("<text><!></text>"),ed=ie("<text><!></text>"),td=ie("<text><!></text>"),rd=ie('<g class="series series-textlabels"><!></g>');function Jo(t,e){fe(e,!0);let r=q(e,"pos",3,0),l=q(e,"faceColor",19,()=>St.PRIMARY_TEXT),s=q(e,"lineColor",3,"transparent"),a=q(e,"lineWidth",3,0),c=q(e,"textSize",3,1),u=q(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],d=E(()=>xt(e.xValues,"TextLabels")),v=E(()=>o(d)?xt(e.yValues,"TextLabels",o(d).length):null),h=E(()=>o(v)?Array.isArray(e.labels)&&e.labels.length!==o(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=E(()=>o(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Tt("axes"),b=E(()=>o(d)&&o(m)!==null?ot(o(d),g.tX()):null),w=E(()=>o(v)&&o(b)?ot(o(v),g.tY()):null),p=E(()=>Yo[g.scales().plot]),_=E(()=>[0,0,-o(p),0,o(p),o(p)]),A=E(()=>[0,o(p),0,-o(p),0,o(p)]),M=E(()=>`fill:${l()};stroke-width:${a()}px;stroke:${s()};font-size:${c()}em;`),y=E(()=>o(b)&&o(w)&&o(m)!==null&&o(h)&&o(b).length===o(w).length);var k=me(),S=$(k);{var C=N=>{var L=rd();L.__click=[Zf,e];var I=B(L);{var R=O=>{var Y=me(),j=$(Y);Ue(j,17,()=>o(b),Qe,(W,Q,Z)=>{var G=$f();z(G,"data-id",Z);var X=B(G);bt(X,()=>e.labels,!0),ee(()=>{z(G,"x",o(b)[Z]),z(G,"y",o(w)[Z]),z(G,"dx",o(_)[r()]),z(G,"dy",o(A)[r()]),z(G,"transform",u()!==void 0?`rotate(${u()}, ${o(b)[Z]+o(_)[r()]}, ${o(w)[Z]+o(A)[r()]})`:""),z(G,"text-anchor",f[r()[Z]])}),T(W,G)}),T(O,Y)},P=(O,Y)=>{{var j=Q=>{var Z=me(),G=$(Z);Ue(G,17,()=>o(b),Qe,(X,re,te)=>{var J=ed();z(J,"data-id",te);var ae=B(J);bt(ae,()=>e.labels[te],!0),ee(()=>{z(J,"x",o(b)[te]),z(J,"y",o(w)[te]),z(J,"dx",o(_)[r()[te]]),z(J,"dy",o(A)[r()[te]]),z(J,"transform",u()!==void 0?`rotate(${u()}, ${o(b)[te]+o(_)[r()]}, ${o(w)[te]+o(A)[r()]})`:""),z(J,"text-anchor",f[r()[te]])}),T(X,J)}),T(Q,Z)},W=Q=>{var Z=me(),G=$(Z);Ue(G,17,()=>o(b),Qe,(X,re,te)=>{var J=td();z(J,"data-id",te);var ae=B(J);bt(ae,()=>e.labels[te],!0),ee(()=>{z(J,"x",o(b)[te]),z(J,"y",o(w)[te]),z(J,"dx",o(_)[r()]),z(J,"dy",o(A)[r()]),z(J,"transform",u()!==void 0?`rotate(${u()}, ${o(b)[te]+o(_)[r()]}, ${o(w)[te]+o(A)[r()]})`:""),z(J,"text-anchor",f[r()])}),T(X,J)}),T(Q,Z)};U(O,Q=>{Array.isArray(r())||ArrayBuffer.isView(r())?Q(j):Q(W,!1)},Y)}};U(I,O=>{typeof e.labels=="string"?O(R):O(P,!1)})}ee(()=>nt(L,o(M))),T(N,L)};U(S,N=>{o(y)&&N(C)})}T(t,k),de()}tt(["click"]),tt(["click"]);var nd=(t,e)=>Nr(t,"text",e.onclick),od=ie("<text> </text>"),ld=ie('<g text-anchor="middle"></g>');function Zo(t,e){fe(e,!0);let r=q(e,"marker",3,1),l=q(e,"faceColor",3,"transparent"),s=q(e,"lineColor",19,()=>St.PRIMARY),a=q(e,"lineWidth",3,1),c=q(e,"markerSize",3,1);const u=E(()=>typeof r()!="number"||r()<1||r()>Xn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+Xn.length+"."),null):Xn[r()-1]),f=E(()=>xt(e.xValues,"Points")),d=E(()=>o(f)?xt(e.yValues,"Points",o(f).length):null),v=Tt("axes"),h=E(()=>o(f)?ot(o(f),v.tX()):null),m=E(()=>o(h)&&o(d)?ot(o(d),v.tY()):null),g=E(()=>["＋","✳","✕"].includes(o(u))?`fill:${s()&&s()!=="transparent"?s():l()};stroke-width:0px;font-size:${c()}em;`:`fill:${l()};stroke-width:${a()}px;stroke:${s()}; font-size:${c()}em;`),b=E(()=>["◼","⬥","＋","✳","✕"].includes(o(u))?"series-points2":"series-points1"),w=E(()=>o(h)&&o(m)&&o(h).length===o(m).length);var p=me(),_=$(p);{var A=M=>{var y=ld();y.__click=[nd,e],Ue(y,21,()=>o(h),Qe,(k,S,C)=>{var N=od(),L=B(N);ee(()=>{z(N,"x",o(h)[C]),z(N,"y",o(m)[C]),ve(L,o(u))}),T(k,N)}),ee(()=>{ut(y,0,`series series-points ${o(b)??""}`),nt(y,o(g))}),T(M,y)};U(_,M=>{o(w)&&M(A)})}T(t,p),de()}tt(["click"]);var sd=(t,e)=>Nr(t,"polyline",e.onclick),ad=ie('<g class="series series-line"><polyline class="line"></polyline></g>');function Qr(t,e){fe(e,!0);let r=q(e,"lineColor",19,()=>St.PRIMARY),l=q(e,"lineType",3,1),s=q(e,"lineWidth",3,1);const a=E(()=>xt(e.xValues,"Lines")),c=E(()=>o(a)?xt(e.yValues,"Lines",o(a).length):null),u=Tt("axes"),f=E(()=>o(a)&&o(c)?Go(o(a),o(c),u.tX(),u.tY()):null),d=E(()=>`fill:transparent;stroke:${r()};stroke-width: ${s()}px; stroke-dasharray:${hn[u.scales().plot][l()-1]}`);var v=me(),h=$(v);{var m=g=>{var b=ad();b.__click=[sd,e];var w=B(b);ee(()=>{nt(b,o(d)),z(w,"points",o(f))}),T(g,b)};U(h,g=>{o(f)&&g(m)})}T(t,v),de()}tt(["click"]);var id=(t,e)=>Nr(t,"polyline",e.onclick),cd=ie('<polyline class="line"></polyline>'),ud=ie('<g class="series series-multiline"></g>');function fd(t,e){fe(e,!0);let r=q(e,"lineColor",19,()=>St.PRIMARY),l=q(e,"lineType",3,1),s=q(e,"lineWidth",3,1);const a=E(()=>xt(e.xValues,"Multilines")),c=E(()=>o(a)?gr(e.yValues)?(o(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),u=Tt("axes"),f=E(()=>{if(!o(a)||!o(c))return null;const g=new Array(o(c).ncols);for(let b=0;b<g.length;b++)g[b]=Go(o(a),o(c).getcolumn(b+1),u.tX(),u.tY());return g}),d=E(()=>`fill:transparent;stroke:${r()};stroke-width: ${s()}px; stroke-dasharray:${hn[u.scales().plot][l()-1]}`);var v=me(),h=$(v);{var m=g=>{var b=ud();b.__click=[id,e],Ue(b,21,()=>o(f),Qe,(w,p)=>{var _=cd();ee(()=>z(_,"points",o(p))),T(w,_)}),ee(()=>nt(b,o(d))),T(g,b)};U(h,g=>{o(f)&&o(f).length>0&&g(m)})}T(t,v),de()}tt(["click"]);function ga(t,e){fe(e,!0);let r=q(e,"show",3,!0),l=q(e,"labels",3,null),s=q(e,"labelColor",19,()=>St.CLEGEND_LABELS),a=q(e,"fontSize",3,.85);const c=Tt("axes");Be(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:l(),labelColor:s(),fontSize:a()})}),de()}function dd(t,e,r,l){e===void 0&&(e=!0),r===void 0&&(r=!1),l===void 0&&(l=!1);function s(f,d,v,h){if(typeof d=="boolean")return d?f.apply(v,2):He([h]).rep(f.ncols);if(!Se(d))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(d.length!==f.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return d}const a=s(t,e,Dn,0),c=s(t,r,Mo,1),u=Bt.zeros(t.nrows,t.ncols);for(let f=1;f<=t.ncols;f++){const d=t.getcolref(f),v=u.getcolref(f),h=a.v[f-1],m=1/c.v[f-1];for(let g=0;g<t.nrows;g++)v[g]=(d[g]-h)*m}return l?[u,a,c]:u}const vd=t=>t;function hd(t,{delay:e=0,duration:r=400,easing:l=vd}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:l,css:a=>`opacity: ${a*s}`}}var md=K('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function pa(t,e){fe(e,!0);function r(d){d.key==="Escape"&&e.closeModal()}var l=md();Er("keydown",ao,r);var s=B(l),a=B(s),c=B(a);c.__click=function(...d){var v;(v=e.closeModal)==null||v.apply(this,d)};var u=V(a,2),f=B(u);vr(f,()=>e.children),dc(7,l,()=>hd),T(t,l),de()}tt(["click"]);const gd=[1,1.1,.45,.4],ba={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",test:"#2679B2",alt:"#2679B2",new:"#2679B2"},wa={cal:"#f0f8ff"},_a="#a0a0a0",ya="#909090",Jr="#909090",$o=8,pd=8,bd=8,wd=600;function xa(t,e){return!t||!e||e<0||e>t.ncomp?"":`PC${e} (${(t.stat.expvar[e-1]*100).toFixed(1)}%)`}function _d(t,e){if(t.length===e.length)return t;const r=e.length,l=new t.constructor(r);for(let s in e)l[s]=t[e[s]];return l}function yd(t,e){let r=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)l=Math.min(l,t[c]),r=Math.max(r,t[c]);let s=Xo(void 0,[l,r],e-1,!0,!1,0).v;const a=s[1]-s[0];if(s[0]>l){const c=s[0]-a;s=[c<l?c:l,...s]}if(s[s.length-1]<r){const c=s[s.length-1]+a;s=[...s,c>r?c:r]}return s}function xd(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=oa(e);return t.reduce((s,a,c)=>(s[a]=r[c],s),{})}function kd(t,e,r){const l=e.length,s=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let u=0;u<l-1;u++){const f=t[c]>=e[u],d=u===l-2?t[c]<e[u+1]+a:t[c]<e[u+1];if(f&&d){s[c]=r[u];break}}return s}function ka(t,e,r,l,s="cal",a){if(!e)return null;let c,u,f,d,v;if(a){const h=a.values;c=a.labels;const m=a.classColmap;u=Object.keys(m).map(g=>m[g]),d=h.map(g=>m[g]),f=new Array(c.length+1).map((g,b)=>b-.5),v=null}else if(r==="groups"&&e.classNames){const h=xd(e.classNames);u=Object.keys(h).map(m=>h[m]),c=e.classNames,d=e.classes.map(m=>h[m]),f=new Array(c.length+1).map((m,g)=>g-.5),v=null}else if(r==="variable"){const h=_d(t.values.getcolref(l),e.objindices);v=t.varlabels[l-1],v.length>30&&(v=v.substring(0,29)+"..."),f=yd(h,10),u=oa(f.length-1),d=kd(h,f,u)}else c=null,f=null,u=null,d=Array(e.nrows).fill(ba[s]);return{labels:c,map:u,breaks:f,colors:d,varname:v}}function Ed(t,e,r=.95){const s=2*Math.PI/99,[a,c,u]=t,f=Math.sqrt((a+u)**2-4*(a*u-c*c));let d=.5*(a+u-f),v=.5*(a+u+f);if(d<v){let C=d;d=v,v=C}const h=Yn(r,2),m=Math.sqrt(h*d),g=Math.sqrt(h*v);let b;if(Math.abs(c)<1e-7)b=0;else{let C=-c/(a-d),N=1;const L=Math.sqrt(C*C+N*N);C=C/L,N=N/L,b=Math.atan2(N,C),b<0&&(b=b+2*Math.PI)}const w=Math.cos(b),p=Math.sin(b),_=we.zeros(100),A=we.zeros(100);let M=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY;for(let C=0;C<100;C++){const N=C*s,L=m*Math.cos(N),I=g*Math.sin(N),R=L*w-I*p+e[0],P=L*p+I*w+e[1];_.v[C]=R,A.v[C]=P,M=Math.min(M,R),y=Math.max(y,R),k=Math.min(k,P),S=Math.max(S,P)}return[_,A,M,y,k,S]}function Ad(t,e,r,l,s,a){if(!t||!e||!r||!l||!s)return null;const c=t.length,u=l.length,f=new Array(u).fill(0),d=new Array(u*2).fill(0);for(let p=0;p<c;p++){const _=l.indexOf(r[p]);f[_]+=1,d[_*2]+=t.v[p],d[_*2+1]+=e.v[p]}for(let p=0;p<u;p++)d[p*2]=d[p*2]/f[p],d[p*2+1]=d[p*2+1]/f[p];const v=new Array(u*3).fill(0);for(let p=0;p<c;p++){const _=l.indexOf(r[p]),A=t.v[p]-d[_*2],M=e.v[p]-d[_*2+1];v[_*3]+=A*A,v[_*3+1]+=A*M,v[_*3+2]+=M*M}let h=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;const w=Array(u);for(let p=0;p<u;p++){const[_,A,M,y,k,S]=Ed([v[p*3]/(f[p]-1),v[p*3+1]/(f[p]-1),v[p*3+2]/(f[p]-1)],[d[p*2],d[p*2+1]],a);w[p]={x:_,y:A,c:s[p]},h=Math.min(h,M),m=Math.max(m,y),g=Math.min(g,k),b=Math.max(b,S)}return{ellipses:w,xRange:[h,m],yRange:[g,b]}}function Ea(t,e,r,l){if(!t||!e)return null;const s=t.length;let a=we.zeros(s),c=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(l==="log")for(let f=0;f<s;f++){const d=Math.log(1+t[f]/r);a.v[f]=d,c=Math.max(c,d),u=Math.min(u,d)}else for(let f=0;f<s;f++){const d=t[f]/r;a.v[f]=d,c=Math.max(c,d),u=Math.min(u,d)}return{values:a,min:u,max:c}}function Aa(t,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[t]+", "+(e==="log"?"log(1 + "+t+"/"+t+"0)":t+"/"+t+"0")}function Ca(t,e,r,l){const a=e+r,u=Yn(t,a)/r,f=-e/r,d=-u/f,v=we.seq(0,d*1,d/100),h=v.apply(m=>m*f+u);return{x:l==="log"?v.apply(m=>Math.log(1+m)):v,y:l==="log"?h.apply(m=>Math.log(1+m)):h}}var Cd=K("<!> <!> <!> <!>",1);function Tr(t,e){let r=q(e,"whole",3,!1),l=pc(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Uf(t,Xr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",margins:gd,pngWidth:pd,pngHeight:bd,pngRes:wd},()=>l,{children:(s,a)=>{var c=Cd(),u=$(c);vr(u,()=>e.children);var f=V(u,2);da(f,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var d=V(f,2);va(d,{showGrid:!0,get label(){return e.yLabel}});var v=V(d,2);ha(v,{}),T(s,c)},$$slots:{default:!0}}))}function Md(t,e){if(t.target.tagName!=="rect"){D(e,-1);return}const r=Array.from(t.target.parentNode.children).indexOf(t.target);if(r<0){D(e,-1);return}o(e)!==r&&D(e,r,!0)}var Sd=K("<!> <!> <!>",1),Nd=K("<!> <!> <!> <!> <!>",1),zd=K('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function Ma(t,e){fe(e,!0);let r=q(e,"outliers",19,()=>[]),l=q(e,"getter",3,Mt),s=ne("residual"),a=ne(-1);const c=E(()=>e.model.npred?e.model.npred:e.model.ncols);function u(R){const P=e.model.exclvars&&e.model.exclvars.length>0?Jc(R,e.model.exclvars):R;if(!P.nresp||P.nresp<1)return P.values;const O=P.nresp*P.values.nrows,Y=P.values.nrows,j=P.values.ncols-P.nresp;return new Bt(P.values.v.subarray(O),Y,j)}const f=E(()=>o(h)&&o(a)>=0?o(h).values.v[o(a)]:null),d=E(()=>o(k)&&o(a)>=0?o(k).sel.v[o(a)]:null),v=E(()=>e.model&&o(a)>=0?e.model.varlabels[o(a)]:null),h=E(()=>{if(!e.model)return null;const R=e.model.nresp?e.model.nresp:0,P=He(e.model.varvalues.filter((G,X)=>X>=R)),O=P.length,Y=(P.v[1]-P.v[0])/2,j=(P.v[O-1]-P.v[O-2])/2,W=[P.v[0],P.v[O-1]],Q=[W[0]-Y,W[1]+j],Z=(W[1]-W[0])/O;return{values:P,lim:Q,width:Z,hwidth:Z*.5}}),m=E(()=>o(h)?o(h).values.apply(R=>R-o(h).hwidth):null),g=E(()=>{if(!e.dataset||!e.model)return null;const R=u(e.dataset,e.model.exclvars),P=new we(l()(e.model,"mX")),O=new we(l()(e.model,"sX"));return dd(R,P,O).t()}),b=E(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new Bt(l()(e.model,"P",e.ncomp),o(c),e.ncomp).t():null),w=E(()=>o(g)&&o(b)?o(b).dot(o(g)):null),p=E(()=>o(w)?Es(o(b),o(w)):null),_=E(()=>o(p)?o(g).subtract(o(p)):null);let A=E(()=>o(p)?o(p).getcolumn(e.selected+1):null),M=E(()=>o(_)?o(_).getcolumn(e.selected+1):null),y=E(()=>o(g)?o(g).getcolumn(e.selected+1):null),k=E(()=>{if(!o(A)||!o(M)||!o(y))return null;const R=o(s)==="explained"?{all:o(p),sel:o(A),label:"Explained part, TP^T"}:o(s)==="residual"?{all:o(_),sel:o(M),label:"Residuals, E"}:{all:o(g),sel:o(y),label:"Preprocessed data, X"},P=Vn(R.all.v),O=P[1]-P[0],Y=[P[0]-O/50,P[1]+O/12],j=we.fill(P[1],R.sel.length);return R.lim=Y,R.top=j,R.height=O,R});const S=E(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),C=E(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var N=me(),L=$(N);{var I=R=>{pa(R,{get closeModal(){return e.closeModal},children:(P,O)=>{var Y=zd(),j=B(Y);j.__click=[Md,a];var W=B(j);Tr(W,{get title(){return o(S)},get yLabel(){return o(k).label},get xLabel(){return o(C)},get limY(){return o(k).lim},get limX(){return o(h).lim},fileName:"plot-contributions",children:(G,X)=>{var re=Nd(),te=$(re);fd(te,{get xValues(){return o(h).values},get yValues(){return o(k).all},lineColor:"#e0e0e0"});var J=V(te,2);{var ae=ye=>{var xe=me(),ke=$(xe);Ue(ke,17,r,Qe,(le,ue)=>{const se=E(()=>o(k).all.getcolumn(o(ue)+1));Qr(le,{get xValues(){return o(h).values},get yValues(){return o(se)},lineColor:"#ffdd88"})}),T(ye,xe)};U(J,ye=>{r().length>0&&ye(ae)})}var Ae=V(J,2);Qr(Ae,{get xValues(){return o(h).values},get yValues(){return o(k).sel},lineColor:"crimson"});var Fe=V(Ae,2);ma(Fe,{get left(){return o(m)},get top(){return o(k).top},get height(){return o(k).height},get width(){return o(h).width},faceColor:"transparent",borderColor:"transparent"});var ge=V(Fe,2);{var Ge=ye=>{var xe=Sd(),ke=$(xe);const le=E(()=>[o(f)]),ue=E(()=>[o(k).top.v[0]]),se=E(()=>[o(v)]);Jo(ke,{get xValues(){return o(le)},get yValues(){return o(ue)},get labels(){return o(se)},pos:3,textSize:.85});var Te=V(ke,2);const pe=E(()=>[o(f)]),_e=E(()=>[o(d)]);Zo(Te,{get xValues(){return o(pe)},get yValues(){return o(_e)},faceColor:"crimson",lineColor:"crimson"});var lt=V(Te,2);const Kt=E(()=>[o(m).v[o(a)]]),Xe=E(()=>[o(k).top.v[o(a)]]);ma(lt,{get left(){return o(Kt)},get top(){return o(Xe)},get height(){return o(k).height},get width(){return o(h).width},faceColor:"#ff000015"}),T(ye,xe)};U(ge,ye=>{o(a)>=0&&ye(Ge)})}T(G,re)},$$slots:{default:!0}});var Q=V(j,4),Z=B(Q);Ee(Z,{label:"",children:(G,X)=>{mt(G,{id:"type",options:["full","explained","residual"],get value(){return o(s)},set value(re){D(s,re,!0)}})},$$slots:{default:!0}}),T(P,Y)},$$slots:{default:!0}})};U(L,R=>{o(h)&&o(k)&&R(I)})}T(t,N),de()}tt(["click"]);var Td=K("<!> <!> <!> <!>",1),Ld=K("<p> </p>"),Pd=K("<!> <p>Computing global model...</p>",1),Id=K('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Rd=K('<div class="buttons"><!> <!></div>'),jd=K("<!> <!>",1),Fd=K("<p> </p>"),qd=K("<!> <!> <!> <!>",1);function Bd(t,e){fe(e,!0);let r=q(e,"outliers",19,()=>[]),l=q(e,"resobj",15),s=q(e,"model",15),a=q(e,"downloadModel",3,null),c=q(e,"downloadResults",3,null),u=ne("neutral"),f=ne(""),d=ne(1),v=ne(!0),h=ne(!1),m=ne(void 0);async function g(I,R,P,O){D(m,e.WASM().then(Y=>{D(u,"computing");const j=Yc(Y,I.values,R,P,O,r());j.hash=Ls(),j.exclvars=[],j.varlabels=I.varlabels,j.varindices=I.varindices,j.varvalues=I.varvalues,j.varvaluesName=I.varvaluesName,j.varvaluesUnits=I.varvaluesUnits,j.varrev=I.varrev,j.prep=[];const W=Ps(Y,j,I,r());s(j),l(W),D(u,"success")}).catch(Y=>{console.error(Y),s(null),D(u,"error"),D(f,Y,!0)}),!0)}function b(I){D(u,"neutral"),D(f,null),g(e.dataset,o(d),o(v),o(h))}function w(){D(u,"neutral"),D(m,null),l(null),s(null),D(f,null)}let p=E(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-1,50):null);Be(()=>{e.dataset===null&&w()}),Be(()=>{D(d,o(p)?Math.min(o(p),20):null,!0)});var _=qd(),A=$(_);{var M=I=>{var R=Td(),P=$(R);Ee(P,{name:"ncomp",label:"# of PCs",children:(W,Q)=>{lu(W,{id:"ncomp",min:1,get max(){return o(p)},step:1,decNum:0,get value(){return o(d)},set value(Z){D(d,Z,!0)}})},$$slots:{default:!0}});var O=V(P,2);Ee(O,{name:"center",label:"Center",children:(W,Q)=>{Dt(W,{id:"center",options:["no","yes"],get value(){return o(v)},set value(Z){D(v,Z,!0)}})},$$slots:{default:!0}});var Y=V(O,2);Ee(Y,{name:"scale",label:"Scale",children:(W,Q)=>{Dt(W,{id:"scale",options:["no","yes"],get value(){return o(h)},set value(Z){D(h,Z,!0)}})},$$slots:{default:!0}});var j=V(Y,2);Ee(j,{name:"create-model",label:" ",children:(W,Q)=>{Vt(W,{onclick:b,text:"Create model"})},$$slots:{default:!0}}),T(I,R)};U(A,I=>{e.dataset&&!s()&&o(u)!=="computing"&&I(M)})}var y=V(A,2);{var k=I=>{var R=me(),P=$(R);Ql(P,()=>o(m),O=>{Ee(O,{name:"spinner",children:(Y,j)=>{var W=Pd(),Q=$(W);Us(Q),T(Y,W)},$$slots:{default:!0}})},void 0,(O,Y)=>{Ee(O,{name:"error",status:"error",children:(j,W)=>{var Q=Ld(),Z=B(Q);ee(()=>ve(Z,o(Y))),T(j,Q)},$$slots:{default:!0}})}),T(I,R)};U(y,I=>{o(m)&&I(k)})}var S=V(y,2);{var C=I=>{var R=jd(),P=$(R);Ee(P,{name:"info",children:(j,W)=>{var Q=Id(),Z=$(Q),G=V(B(Z)),X=V(Z,2);vn(X,{onclick:w}),ee(()=>ve(G,` ${s().ncomp??""} PCs${s().center?", centered":""}${s().scale?", scaled":""}`)),T(j,Q)},$$slots:{default:!0}});var O=V(P,2);{var Y=j=>{Ee(j,{name:"download-buttons",label:"Download",children:(W,Q)=>{var Z=Rd(),G=B(Z);Vt(G,{onclick:()=>c()(l(),e.dataset,"train",r(),s()),text:"Results"});var X=V(G,2);Vt(X,{onclick:()=>a()(s()),text:"Model"}),T(W,Z)},$$slots:{default:!0}})};U(O,j=>{a()&&c()&&j(Y)})}T(I,R)};U(S,I=>{s()&&I(C)})}var N=V(S,2);{var L=I=>{Ee(I,{name:"error",status:"error",children:(R,P)=>{var O=Fd(),Y=B(O);ee(()=>ve(Y,o(f))),T(R,O)},$$slots:{default:!0}})};U(N,I=>{(o(u)==="error"||o(f))&&I(L)})}T(t,_),de()}function Sa(t,e,r,l,s){(!l||!Array.isArray(l))&&(l=[]);const a=e.values.nrows,c=e.values.ncols,u=l.length,f=a-u,d=t.ncomp,v=4,h=Math.max(d,v),m=Array(h).fill(""),g=d>h?Array(h-d).fill(""):[],b=Array(d).fill(0).map((S,C)=>"PC"+(C+1)),w=e.sep;function p(S,C,N){_+=`
`,_+=[S+": ","",...m].join(w)+`
`,_+=["object","group","outlier",...b,...g].join(w)+`
`;const L=t.v.subarray(C,C+d*f);let I=0;for(let R=0;R<a;R++){const P=e.classes?e.classes[R]:"-";if(u>0&&l.includes(R)){_+=[N[R],P,"yes",...Array(d).fill("-"),...g].join(w)+`
`;continue}const O=Array(d);for(let Y=0;Y<d;Y++)O[Y]=L[Y*f+I];_+=[N[R],P,"",...O,g].join(w)+`
`,I=I+1}_+=`
`}let _="";if(_+=["Number of components:",d,...m].join(w)+`
`,_+=["Center: ",t.center,...m].join(w)+`
`,_+=["Scale: ",t.scale,...m].join(w)+`
`,_+=`
`,_+=["Statistics: ","",...m].join(w)+`
`,s){const S=v>h?Array(h-v-1).fill(""):[];_+=["","PC","Expvar","Cumexpvar","Resvar","Cumresvar","Eigenvalues",...S].join(e.sep)+`
`;for(let C=0;C<d;C++)_+=["",C+1,t.stat.expvar[C],t.stat.cumexpvar[C],t.stat.resvar[C],t.stat.cumresvar[C],t.eigenvals[C],...S].join(e.sep)+`
`}else{const S=v>h?Array(h-v).fill(""):[];_+=["","PC","Expvar","Cumexpvar","Resvar","Cumresvar",...S].join(w)+`
`;for(let C=0;C<d;C++)_+=["",C+1,t.stat.expvar[C],t.stat.cumexpvar[C],t.stat.resvar[C],t.stat.cumresvar[C],...S].join(w)+`
`}if(_+=`
`,s){_+=`
`,_+=["Loading, center and scale values: ","",...m].join(w)+`
`,_+=["variable","center","scale",...b,...g].join(w)+`
`;const S=s.v.subarray(2,2+c),C=s.v.subarray(2+c,2+c*2),N=s.v.subarray(2+c*2,f+c*2+d*c);for(let L=0;L<c;L++){const I=Array(d);for(let R=0;R<d;R++)I[R]=N[R*d+L];_+=[e.varlabels[L],S[L],C[L],...I,g].join(w)+`
`}_+=`
`}p("Scores",0,e.objlabels),p("Score distances, h",d*f,e.objlabels),p("Orthogonal distances, q",d*f*2,e.objlabels),e.dec!=="."&&(_=_.replace(/\./g,e.dec)),_=["Data filename:",e.fileName,...m].join(e.sep)+`
`+_;let A=["PCA results ("+r+")","https://mda.tools/pca/",...m].join(e.sep)+`

`;const M=new Blob([A+_],{type:"text/csv"}),y=window.URL.createObjectURL(M),k=document.createElement("a");k.setAttribute("href",y),k.setAttribute("download",`pca-results-${r}.csv`),k.click()}function Vd(t){const e=new Blob([JSON.stringify({center:t.center,class:t.class,hash:t.hash,exclvars:t.exclvars,ncols:t.ncols,ncomp:t.ncomp,nrows:t.nrows,prep:t.prep,scale:t.scale,v:Array.from(t.v),exclvars:t.exclvars,varlabels:t.varlabels,varvalues:t.varvalues,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits})],{type:"application/json"}),r=window.URL.createObjectURL(e),l=document.createElement("a");l.setAttribute("href",r),l.setAttribute("download","pca-model.json"),l.click()}var Dd=K('<div class="msg-select"> </div>'),Od=K('<div class="msg-select"> </div>'),Yd=K('<div class="msg-select"> </div>'),Wd=K('<div class="msg-select"> </div>'),Ud=K('<div class="selected-buttons svelte-8mh2yv"><!></div>'),Hd=K('<div class="selected-buttons svelte-8mh2yv"><!></div>'),Gd=K("<!> <!> <!>",1),Xd=()=>switchPlot(i),Kd=(t,e,r)=>D(e,o(r),!0),Qd=K("<button> </button>"),Jd=K('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!> <!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function Na(t,e){fe(e,!0);let r=q(e,"selobjText",3,"Click to select an object..."),l=q(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),s=q(e,"clearText",3,"Click anywhere to remove selection..."),a=q(e,"params",15),c=et({objects:-1,variables:[]}),u=ne(et(Object.keys(e.plots)[0]));function f(L){c.objects=L}function d(L){c.objects=-1}function v(L){c.variables=L}function h(L){c.variables=[]}let m={objects:{select:f,unselect:d},variables:{select:v,unselect:h},stats:{}},g=E(()=>o(u)?e.plots[o(u)]:null),b=E(()=>o(g)?o(g).component:null);var w=Jd(),p=B(w),_=B(p),A=B(_);yo(A,()=>o(b),(L,I)=>{I(L,{get params(){return a()[o(u)]},get callbacks(){return m[o(g).scope]},get selected(){return c[o(g).scope]},get props(){return e.props}})});var M=V(_,2),y=B(M);{var k=L=>{var I=me(),R=$(I);{var P=Y=>{var j=Dd(),W=B(j);ee(()=>ve(W,r())),T(Y,j)},O=Y=>{var j=Od(),W=B(j);ee(()=>ve(W,s())),T(Y,j)};U(R,Y=>{c[o(g).scope]<0?Y(P):Y(O,!1)})}T(L,I)};U(y,L=>{o(g).scope==="objects"&&a()[o(u)].plotType!=="l"&&r().length>0&&L(k)})}var S=V(y,2);{var C=L=>{var I=me(),R=$(I);{var P=Y=>{var j=Yd(),W=B(j);ee(()=>ve(W,l())),T(Y,j)},O=Y=>{var j=Wd(),W=B(j);ee(()=>ve(W,s())),T(Y,j)};U(R,Y=>{c[o(g).scope].length===0?Y(P):Y(O,!1)})}T(L,I)};U(S,L=>{o(g).scope==="variables"&&a()[o(u)].plotType!=="l"&&l().length>0&&L(C)})}var N=V(p,2);Ue(N,21,()=>Object.keys(e.plots),Qe,(L,I)=>{var R=me(),P=$(R);{var O=j=>{var W=Gd(),Q=$(W);Eu(Q,{get title(){return o(g).label},labelWidth:12,get options(){return e.controls[o(u)]},get value(){return a()[o(u)]},set value(te){a(a()[o(u)]=te,!0)}});var Z=V(Q,2);{var G=te=>{var J=Ud(),ae=B(J);vr(ae,()=>o(g).buttons,()=>c.objects),T(te,J)};U(Z,te=>{o(g).scope==="objects"&&o(g).buttons&&c.objects>=0&&te(G)})}var X=V(Z,2);{var re=te=>{var J=Hd(),ae=B(J);vr(ae,()=>o(g).buttons,()=>c.variables),T(te,J)};U(X,te=>{o(g).scope==="variables"&&o(g).buttons&&c.variables.length>0&&te(re)})}T(j,W)},Y=j=>{var W=Qd();W.__keydown=[Xd],W.__click=[Kd,u,I];var Q=B(W);ee(()=>{ut(W,1,`plot-selector plot-selector-${o(I)??""}`,"svelte-8mh2yv"),ve(Q,e.plots[o(I)].label)}),T(j,W)};U(P,j=>{o(g)&&o(u)===o(I)?j(O):j(Y,!1)})}T(L,R)}),T(t,w),de()}tt(["keydown","click"]);function za(t,e){!e.callbacks||!e.callbacks.select||Nr(t,t.target.tagName,e.callbacks.select)}function Zd(t,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var $d=ie("<text> </text>"),ev=ie('<g class="series series-textlabels"></g>'),tv=ie('<g class="series series-line"><polyline class="line"></polyline></g>'),rv=ie("<rect></rect>"),nv=ie('<g class="series series-bar"></g>'),ov=ie("<text> </text>"),lv=ie('<g class="series series-points series-points1"></g>'),sv=ie('<g class="series series-points series-points1"><text> </text></g>'),av=ie('<g class="series series-bar"><rect></rect></g>'),iv=ie('<g class="series series-text"><text> </text></g>'),cv=ie('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),uv=ie("<!><!><!><!><!>",1);function mn(t,e){fe(e,!0);let r=q(e,"shortenLabels",3,!0),l=q(e,"lineWidth",3,1),s=q(e,"markerSize",3,null),a=q(e,"markerWidth",3,2),c=q(e,"pch",3,"●"),u=q(e,"colors",3,void 0),f=q(e,"mainColor",19,()=>ba.cal),d=q(e,"faceColor",3,null),v=q(e,"selected",19,()=>-1),h=q(e,"xRange",15),m=q(e,"yRange",15);const g=Tt("axes"),b=E(()=>xt(e.xValues,"PlotSeries")),w=E(()=>o(b)?xt(e.yValues,"PlotSeries",o(b).length):null);Be(()=>{h(o(b)?Vn(o(b)):null),m(o(w)?Vn(o(w)):null)});const p=E(()=>d()===null?e.plotType==="p"?"transparent":"white":d()),_=E(()=>s()?s():e.plotType==="p"?1:.85),A=E(()=>Yo[g.scales().plot]),M=E(()=>ot([0],g.tY())[0]),y=E(()=>Wo([.8],g.tX())[0]),k=E(()=>o(y)/2),S=E(()=>o(A));let C=E(()=>e.plotType==="l"||e.plotType==="b"?Go(o(b),o(w),g.tX(),g.tY()):null),N=E(()=>o(b)?ot(o(b),g.tX()):null),L=E(()=>o(w)?ot(o(w),g.tY()):null),I=E(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(X=>X.slice(0,$o)):e.labels:null),R=E(()=>u()&&u().length===o(b).length?u():Array(o(b).length).fill(f()));const P=E(()=>`font-size:${o(_)}em;fill:${o(p)};cursor:default;text-anchor:middle;stroke-width:${a()}px;user-select:none;`),O=`font-size:0.85em;fill:${_a};cursor:default;text-anchor:middle;stroke:${_a};stroke-width:0.1px;user-select:none;`,Y="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",j=`fill:transparent;stroke-width: ${l()}px;`,W=`stroke-width:${l()}px;`;var Q=me(),Z=$(Q);{var G=X=>{var re=uv(),te=$(re);{var J=le=>{var ue=ev();nt(ue,O),Ue(ue,21,()=>o(N),Qe,(se,Te,pe)=>{var _e=$d(),lt=B(_e);ee(()=>{z(_e,"x",o(N)[pe]),z(_e,"y",o(L)[pe]),z(_e,"dy",o(w).v[pe]<0?o(S):-o(S)),ve(lt,o(I)[pe])}),T(se,_e)}),T(le,ue)};U(te,le=>{e.showLabels&&o(I)&&le(J)})}var ae=V(te);{var Ae=le=>{var ue=tv();nt(ue,j);var se=B(ue);ee(()=>{z(se,"points",o(C)),z(se,"stroke",f())}),T(le,ue)};U(ae,le=>{(e.plotType==="l"||e.plotType==="b")&&le(Ae)})}var Fe=V(ae);{var ge=le=>{var ue=nv();nt(ue,W),ue.__click=[za,e],Ue(ue,21,()=>o(N),Qe,(se,Te,pe)=>{var _e=rv();ee(()=>{z(_e,"x",o(N)[pe]-o(k)),z(_e,"y",o(w).v[pe]<0?o(M):o(L)[pe]),z(_e,"fill",o(R)[pe]),z(_e,"width",o(y)),z(_e,"height",o(w).v[pe]<0?o(L)[pe]-o(M):o(M)-o(L)[pe])}),T(se,_e)}),T(le,ue)};U(Fe,le=>{e.plotType==="h"&&le(ge)})}var Ge=V(Fe);{var ye=le=>{var ue=lv();ue.__click=[za,e],Ue(ue,21,()=>o(N),Qe,(se,Te,pe)=>{var _e=ov(),lt=B(_e);ee(()=>{z(_e,"x",o(N)[pe]),z(_e,"y",o(L)[pe]),z(_e,"fill",d()),z(_e,"stroke",o(R)[pe]),ve(lt,c())}),T(se,_e)}),ee(()=>nt(ue,o(P))),T(le,ue)};U(Ge,le=>{(e.plotType==="p"||e.plotType==="b")&&le(ye)})}var xe=V(Ge);{var ke=le=>{var ue=cv(),se=$(ue);z(se,"x",0),z(se,"y",0),se.__click=[Zd,e];var Te=V(se);{var pe=Xe=>{var ct=sv();nt(ct,Y);var $e=B(ct),Ot=B($e);ee(()=>{z($e,"x",o(N)[v()]),z($e,"y",o(L)[v()]),z($e,"stroke",o(R)[v()]),ve(Ot,c())}),T(Xe,ct)},_e=Xe=>{var ct=av();nt(ct,W);var $e=B(ct);ee(()=>{z($e,"stroke",o(R)[v()]),z($e,"fill",o(R)[v()]),z($e,"x",o(N)[v()]-o(k)),z($e,"y",o(w).v[v()]<0?o(M):o(L)[v()]),z($e,"width",o(y)),z($e,"height",o(w).v[v()]<0?o(L)[v()]-o(M):o(M)-o(L)[v()])}),T(Xe,ct)};U(Te,Xe=>{e.plotType!=="h"?Xe(pe):Xe(_e,!1)})}var lt=V(Te);{var Kt=Xe=>{var ct=iv();nt(ct,O);var $e=B(ct);z($e,"stroke",ya),z($e,"fill",ya);var Ot=B($e);ee(()=>{z($e,"x",o(N)[v()]),z($e,"y",o(L)[v()]),z($e,"dy",o(w).v[v()]<0?o(S):-o(S)),ve(Ot,o(I)[v()])}),T(Xe,ct)};U(lt,Xe=>{e.showLabels&&o(I)&&o(I).length>0&&Xe(Kt)})}T(le,ue)};U(xe,le=>{v()>=0&&le(ke)})}T(X,re)};U(Z,X=>{o(N)&&o(L)&&X(G)})}T(t,Q),de()}tt(["click"]);function fv(t,e){fe(e,!0);let r=q(e,"lineColor",3,"#606060"),l=q(e,"lineType",3,2),s=q(e,"alpha",3,.05),a=q(e,"xRange",15),c=q(e,"yRange",15);const u=we.seq(0,2*Math.PI,.05);function f(p,_,A,M){const y=p.eigenvals[_-1],k=Yn(1-s(),2),S=Math.sqrt(k*y),C=we.zeros(M.length);for(let N=0;N<M.length;N++)C.v[N]=S*A(M.v[N]);return[C,-S,S]}let d=E(()=>e.comp?e.comp[0]:null),v=E(()=>o(d)?f(e.resobj,o(d),Math.cos,u):null);Be(()=>{a(o(v)?[o(v)[1],o(v)[2]]:null)});let h=E(()=>e.comp?e.comp[1]:null),m=E(()=>o(h)?f(e.resobj,o(h),Math.sin,u):null);Be(()=>{c(o(m)?[o(m)[1],o(m)[2]]:null)});var g=me(),b=$(g);{var w=p=>{Qr(p,{get xValues(){return o(v)[0]},get yValues(){return o(m)[0]},get lineColor(){return r()},get lineType(){return l()}})};U(b,p=>{o(v)&&o(m)&&p(w)})}T(t,g),de()}function dv(t,e){fe(e,!0);let r=q(e,"confLevel",3,.95),l=q(e,"xRange",15),s=q(e,"yRange",15),a=E(()=>Ad(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,r()));Be(()=>{o(a)?(l(o(a).xRange),s(o(a).yRange)):(l(null),s(null))});var c=me(),u=$(c);{var f=d=>{var v=me(),h=$(v);Ue(h,17,()=>o(a).ellipses,Qe,(m,g,b)=>{Qr(m,{get xValues(){return o(g).x},get yValues(){return o(g).y},get lineColor(){return e.groupColors[b]}})}),T(d,v)};U(u,d=>{o(a)&&o(a).ellipses&&d(f)})}T(t,c),de()}var vv=K("<!> <!> <!> <!> <!> <!>",1);function Ta(t,e){fe(e,!0);let r=q(e,"alpha",3,.05),l=E(()=>e.props&&e.props.data?e.props.data:null),s=E(()=>e.props&&e.props.res?e.props.res:null),a=E(()=>e.params&&e.params.resID?o(s)[e.params.resID]:null),c=E(()=>e.params&&e.params.resID?o(l)[e.params.resID]:null);function u(W,Q,Z,G,X){if(!Z)return null;let re=Z[0],te=Z[1];W&&G&&(re=Math.min(re,G[0]),te=Math.max(te,G[1])),Q!=="none"&&X&&(re=Math.min(re,X[0]),te=Math.max(te,X[1]));const J=(te-re)*.1;return{min:re,max:te,d:J}}function f(W,Q){if(!(!W||!Q||Q<1||Q>W.ncomp))return new we(fn(W,"scores",Q))}let d=ne(void 0),v=ne(void 0),h=ne(void 0),m=ne(void 0),g=ne(void 0),b=ne(void 0),w=E(()=>o(s)?He(o(a).objindices):null),p=E(()=>o(a)?o(a).objlabels.map(W=>W.slice(0,$o)):null),_=E(()=>f(o(a),e.params.comp1)),A=E(()=>e.params.plotType==="p"?o(_):o(w)),M=E(()=>e.params.comp2?e.params.comp2:null),y=E(()=>f(o(a),o(M))),k=E(()=>ka(o(c),o(a),e.params.colorBy,e.params.colorByVar,e.params.resID)),S=E(()=>e.params.plotType==="p"?xa(o(a),e.params.comp1):"Objects"),C=E(()=>xa(o(a),e.params.comp2)),N=E(()=>u(e.params.showEllipse,e.params.confEllipse,o(d),o(h),o(g))),L=E(()=>o(N)?[o(N).min-o(N).d,o(N).max+o(N).d]:[0,1]),I=E(()=>u(e.params.showEllipse,e.params.confEllipse,o(v),o(m),o(b))),R=E(()=>o(I)?[o(I).min-o(I).d,o(I).max+o(I).d*(1+(e.params.colorBy!=="none"))]:[0,1]),P=E(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!o(k)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+o(k).varname+(o(c).varvaluesUnits?" "+o(c).varvaluesUnits:"")+")");var O=me(),Y=$(O);{var j=W=>{Tr(W,{get title(){return o(P)},get limX(){return o(L)},get limY(){return o(R)},get xLabel(){return o(S)},get yLabel(){return o(C)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(Q,Z)=>{var G=vv(),X=$(G);const re=E(()=>[o(L)[0]]),te=E(()=>[o(L)[1]]);zr(X,{get xStart(){return o(re)},get xEnd(){return o(te)},yStart:[0],yEnd:[0],lineColor:Jr});var J=V(X,2);{var ae=le=>{const ue=E(()=>[o(R)[0]]),se=E(()=>[o(R)[1]]);zr(le,{xStart:[0],xEnd:[0],get yStart(){return o(ue)},get yEnd(){return o(se)},lineColor:Jr})};U(J,le=>{e.params.plotType==="p"&&le(ae)})}var Ae=V(J,2);{var Fe=le=>{const ue=E(()=>[e.params.comp1,e.params.comp2]);fv(le,{get alpha(){return r()},get resobj(){return o(a)},get comp(){return o(ue)},get xRange(){return o(h)},set xRange(se){D(h,se,!0)},get yRange(){return o(m)},set yRange(se){D(m,se,!0)}})};U(Ae,le=>{e.params.showEllipse&&e.params.plotType==="p"&&le(Fe)})}var ge=V(Ae,2);{var Ge=le=>{const ue=E(()=>Number.parseInt(e.params.confEllipse)/100);dv(le,{get xValues(){return o(A)},get yValues(){return o(y)},get confLevel(){return o(ue)},get groups(){return o(a).classes},get groupNames(){return o(a).classNames},get groupColors(){return o(k).map},get xRange(){return o(g)},set xRange(se){D(g,se,!0)},get yRange(){return o(b)},set yRange(se){D(b,se,!0)}})};U(ge,le=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&o(k)&&le(Ge)})}var ye=V(ge,2);mn(ye,{get xValues(){return o(A)},get yValues(){return o(y)},get labels(){return o(p)},get selected(){return e.selected},get callbacks(){return e.callbacks},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return o(k).colors},get xRange(){return o(d)},set xRange(le){D(d,le,!0)},get yRange(){return o(v)},set yRange(le){D(v,le,!0)}});var xe=V(ye,2);{var ke=le=>{const ue=E(()=>o(k).breaks!==null);ga(le,{get show(){return o(ue)},get colmap(){return o(k).map},get breaks(){return o(k).breaks},get labels(){return o(k).labels}})};U(xe,le=>{o(k)&&le(ke)})}T(Q,G)},$$slots:{default:!0}})};U(Y,W=>{o(A)&&o(y)&&W(j)})}T(t,O),de()}var hv=K("<!> <!> <!>",1);function mv(t,e){fe(e,!0);let r=E(()=>e.props?e.props.model:null);function l(y,k){return!y||!k||k<1||k>y.ncomp?null:new we(Mt(y,"loadings",k))}let s=ne(void 0),a=ne(void 0),c=E(()=>o(r)?He(o(r).varvalues):null),u=E(()=>o(r)?He(o(r).varindices):null),f=E(()=>l(o(r),e.params.comp1)),d=E(()=>!o(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:o(f),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&o(c)?{values:o(c),label:o(r).varvaluesName+(o(r).varvaluesUnits?", "+o(r).varvaluesUnits:"")}:{values:o(u),label:"Variables"}),v=E(()=>o(d)?o(d).values:null),h=E(()=>o(d)?o(d).label:null),m=E(()=>l(o(r),e.params.comp2)),g=E(()=>`PC${e.params.comp2}`),b=E(()=>{if(o(a)&&o(a)[0]<Number.POSITIVE_INFINITY&&o(a)[1]>Number.NEGATIVE_INFINITY){const y=(o(a)[1]-o(a)[0])*.1;return[o(a)[0]-y,o(a)[1]+y]}else return[0,1]}),w=E(()=>{if(o(s)&&o(s)[0]<Number.POSITIVE_INFINITY&&o(s)[1]>Number.NEGATIVE_INFINITY){const y=(o(s)[1]-o(s)[0])*.1;return e.params.plotType==="l"&&o(r).varrev?[o(s)[1]+y,o(s)[0]-y]:[o(s)[0]-y,o(s)[1]+y]}else return[0,1]}),p=E(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const y=Math.max(Math.abs(o(w)[0]),Math.abs(o(b)[0]),o(w)[1],o(b)[1])*1.05;return{x:[-y,y],y:[-y,y]}}else{const y=Math.max(Math.abs(o(b)[0]),o(b)[1])*1.05;return{x:o(w),y:[-y,y]}}return{x:o(w),y:o(b)}});var _=me(),A=$(_);{var M=y=>{Tr(y,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return o(h)},get yLabel(){return o(g)},get limX(){return o(p).x},get limY(){return o(p).y},children:(k,S)=>{var C=hv(),N=$(C);const L=E(()=>[o(p).x[0]]),I=E(()=>[o(p).x[1]]);zr(N,{get xStart(){return o(L)},get xEnd(){return o(I)},yStart:[0],yEnd:[0],lineColor:Jr});var R=V(N,2);{var P=Y=>{const j=E(()=>[o(p).y[0]]),W=E(()=>[o(p).y[1]]);zr(Y,{xStart:[0],xEnd:[0],get yStart(){return o(j)},get yEnd(){return o(W)},lineColor:Jr})};U(R,Y=>{e.params.plotType==="p"&&Y(P)})}var O=V(R,2);mn(O,{get xValues(){return o(v)},get yValues(){return o(m)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return o(r).varlabels},shortenLabels:!1,get xRange(){return o(s)},set xRange(Y){D(s,Y,!0)},get yRange(){return o(a)},set yRange(Y){D(a,Y,!0)}}),T(k,C)},$$slots:{default:!0}})};U(A,y=>{o(v)&&o(m)&&y(M)})}T(t,_),de()}var gv=K("<!> <!> <!> <!> <!> <!> <!>",1);function La(t,e){fe(e,!0),q(e,"alpha",3,.05);const r="#2679B2",l="#D22C2F",s="#667892",a="#927866";let c=E(()=>e.props?e.props.model:null),u=E(()=>e.props?e.props.res:null),f=E(()=>o(u)?o(u)[e.params.resID]:null);function d(S,C){return`PC${C} (${(S.stat.expvar[C-1]*100).toFixed(1)}%)`}function v(S,C,N){if(!C||!N||S<1||S>o(u).ncomp)return null;const L=fn(C,"scores",S).slice(),I=Mt(N,"loadings",S),R=L.length,P=I.length;let O=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY;const j=new Array(R);for(let J=0;J<R;J++)L[J]=L[J]/Math.sqrt(o(h)[S-1]*(R-1)),O>L[J]&&(O=L[J]),Y<L[J]&&(Y=L[J]),j[J]=L[J]<0?1:3;const W=new Array(R);for(let J=0;J<P;J++)O>I[J]&&(O=I[J]),Y<I[J]&&(Y=I[J]),W[J]=I[J]<0?1:3;const Q=new we(L),Z=new we(I),G=d(C,S),X=(Y-O)/15,re=[O-X,Y+X],te=Math.max(Math.abs(re[0]),re[1]);return{values:Q,end:Z,lim:re,label:G,tpos:j,ppos:W,mx:te}}let h=E(()=>o(c)?Mt(o(c),"eigenvals"):null),m=E(()=>o(f)?we.zeros(o(f).ncols):null),g=E(()=>o(f)?we.zeros(o(f).ncols):null),b=E(()=>v(e.params.comp1,o(f),o(c))),w=E(()=>v(e.params.comp2,o(f),o(c))),p=E(()=>o(b)&&o(w)?Math.max(o(b).mx,o(w).mx)*1.05:0),_=E(()=>o(b)?e.params.axesEqual?[-o(p),o(p)]:o(b).lim:[0,1]),A=E(()=>o(w)?e.params.axesEqual?[-o(p),o(p)]:o(w).lim:[0,1]);var M=me(),y=$(M);{var k=S=>{Tr(S,{get limX(){return o(_)},get limY(){return o(A)},get xLabel(){return o(b).label},get yLabel(){return o(w).label},fileName:"plot-biplot",title:"Bi-plot (scores and loadings)",children:(C,N)=>{var L=gv(),I=$(L);const R=E(()=>[o(_)[0]]),P=E(()=>[o(_)[1]]);zr(I,{get xStart(){return o(R)},get xEnd(){return o(P)},yStart:[0],yEnd:[0],lineColor:Jr});var O=V(I,2);const Y=E(()=>[o(A)[0]]),j=E(()=>[o(A)[1]]);zr(O,{xStart:[0],xEnd:[0],get yStart(){return o(Y)},get yEnd(){return o(j)},lineColor:Jr});var W=V(O,2);Zo(W,{get xValues(){return o(b).values},get yValues(){return o(w).values},lineColor:l,borderWidth:1.5});var Q=V(W,2);zr(Q,{get xStart(){return o(m)},get yStart(){return o(g)},get xEnd(){return o(b).end},get yEnd(){return o(w).end},lineColor:r});var Z=V(Q,2);Zo(Z,{get xValues(){return o(b).end},get yValues(){return o(w).end},marker:1,lineColor:r,faceColor:r,markerSize:.4});var G=V(Z,2);{var X=J=>{Jo(J,{get xValues(){return o(b).values},get yValues(){return o(w).values},get labels(){return o(f).objlabels},get pos(){return o(w).tpos},textSize:.75,faceColor:a})};U(G,J=>{(e.params.showLabels==="obj"||e.params.showLabels==="both")&&J(X)})}var re=V(G,2);{var te=J=>{Jo(J,{get xValues(){return o(b).end},get yValues(){return o(w).end},get labels(){return o(f).varlabels},textSize:.75,get pos(){return o(w).ppos},faceColor:s})};U(re,J=>{(e.params.showLabels==="var"||e.params.showLabels==="both")&&J(te)})}T(C,L)},$$slots:{default:!0}})};U(y,S=>{o(b)&&o(w)&&S(k)})}T(t,M),de()}var pv=K("<!> <!> <!> <!>",1);function Pa(t,e){fe(e,!0);let r=E(()=>e.props?e.props.res:null),l=E(()=>o(r)?o(r)[e.params.resID]:null);const s={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"},a=E(()=>e.params.varForm==="cumulative"?"cum":""),c=E(()=>e.params.varType==="explained"?"exp":"res"),u=E(()=>o(a)+o(c)+"var"),f=E(()=>s[o(u)]),d=E(()=>o(l).ncomp>1?1-o(l).ncomp*.065:-.1),v=E(()=>o(l).ncomp>1?o(l).ncomp*1.065:2.1),h=E(()=>[o(d),o(v)]),m=E(()=>o(l)?o(l).stat.components:null),g=E(()=>o(l)?He(o(l).stat[o(u)]):null),b=E(()=>o(g)?Array.from(o(g).v).map(M=>M<.1?M.toFixed(3):M.toFixed(2)):null),w=E(()=>o(g)?[Math.min(-.1,Ar(o(g))),1.1]:[0,1.1]);var p=me(),_=$(p);{var A=M=>{const y=E(()=>"plot-"+o(u));Tr(M,{get title(){return o(f)},get limX(){return o(h)},get limY(){return o(w)},get fileName(){return o(y)},whole:!0,children:(k,S)=>{var C=pv(),N=$(C);mn(N,{get xValues(){return o(m)},get yValues(){return o(g)},get labels(){return o(b)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return wa.cal},lineWidth:1.5});var L=V(N,2);da(L,{showGrid:!0,label:"Number of PCs",whole:!0});var I=V(L,2);va(I,{showGrid:!0,label:"Variance"});var R=V(I,2);ha(R,{}),T(k,C)},$$slots:{default:!0}})};U(_,M=>{o(m)&&o(g)&&M(A)})}T(t,p),de()}function bv(t,e){fe(e,!0);let r=E(()=>e.props?e.props.model:null);const l={none:"λ",log:"log(λ)",sqrt:"sqrt(λ)"};function s(k,S){const C=o(r).nrows-1;if(S==="none")return k.apply(N=>N*C);if(S==="log")return k.apply(N=>Math.log(N*C));if(S==="sqrt")return k.apply(N=>Math.sqrt(N*C))}let a=E(()=>o(r)?new we(Mt(o(r),"eigenvals")):null),c=E(()=>o(r)?we.seq(1,o(r).ncomp):null),u=E(()=>o(a)?s(o(a),e.params.transform):null),f=E(()=>o(u)?Array.from(o(u).v).map(k=>k.toFixed(k<.1?3:2)):null);const d=E(()=>o(r).ncomp>10?o(r).ncomp*.05:.5),v=E(()=>o(r).ncomp>1?1:0),h=E(()=>o(r).ncomp>1?o(r).ncomp:2),m=E(()=>[o(v)-o(d),o(h)+o(d)]);let g=E(()=>o(u)?e.params.transform==="none"?0:o(u).v[o(r).ncomp-1]:0),b=E(()=>o(u)?o(u).v[0]:1),w=E(()=>(o(b)-o(g))/18),p=E(()=>o(u)?[o(g)-o(w),o(b)+o(w)]:[0,1]),_=E(()=>l[e.params.transform]);var A=me(),M=$(A);{var y=k=>{Tr(k,{get limX(){return o(m)},get limY(){return o(p)},get yLabel(){return o(_)},whole:!0,xLabel:"Number of PCs",title:"Eigenvalues",fileName:"plot-eigenvalues",children:(S,C)=>{mn(S,{get xValues(){return o(c)},get yValues(){return o(u)},get labels(){return o(f)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return wa.cal},lineWidth:1.5})},$$slots:{default:!0}})};U(M,k=>{o(c)&&o(u)&&k(y)})}T(t,A),de()}var wv=K("<!> <!> <!> <!>",1);function Ia(t,e){fe(e,!0);let r=E(()=>e.props&&e.props.data?e.props.data:null),l=E(()=>e.props&&e.props.res?e.props.res:null),s=E(()=>e.params&&e.params.resID?o(l)[e.params.resID]:null),a=E(()=>e.params&&e.params.resID?o(r)[e.params.resID]:null);const c="#909090",u=100;let f=E(()=>e.params.limType==="classic"?{h:o(s).cNh,q:o(s).cNq}:{h:o(s).rNh,q:o(s).rNq}),d=E(()=>e.params.limType==="classic"?{h:o(s).ch0,q:o(s).cq0}:{h:o(s).rh0,q:o(s).rq0}),v=E(()=>({h:o(f).h[e.params.ncomp-1],q:o(f).q[e.params.ncomp-1]})),h=E(()=>({h:o(d).h[e.params.ncomp-1],q:o(d).q[e.params.ncomp-1]})),m=E(()=>e.params.alpha?1-e.params.alpha/100:.95),g=E(()=>e.params.gamma?1-e.params.gamma/100:.99),b=E(()=>Ca(o(m),o(v).h,o(v).q,e.params.transType)),w=E(()=>Ca(Math.pow(o(g),1/o(s).nrows),o(v).h,o(v).q,e.params.transType)),p=E(()=>ka(o(a),o(s),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),_=E(()=>o(s)?fn(o(s),"hdist",e.params.ncomp):null),A=E(()=>o(s)?fn(o(s),"qdist",e.params.ncomp):null),M=E(()=>Ea(o(_),o(v).h,o(h).h,e.params.transType)),y=E(()=>Ea(o(A),o(v).q,o(h).q,e.params.transType)),k=E(()=>o(s)?o(s).objlabels.map(W=>W.slice(0,$o)):null),S=E(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),C=E(()=>Aa("h",e.params.transType)),N=E(()=>Aa("q",e.params.transType)),L=ne(void 0),I=ne(void 0),R=E(()=>{if(!o(M)||!o(L))return[0,1];const W=Math.max(o(M).max,o(w).x.v[u-1]);return[-.02*(W-o(L)[0]),1.05*W]}),P=E(()=>{if(!o(y)||!o(I))return[0,1];const W=Math.max(o(y).max,o(w).y.v[0]);return[-.02*(W-o(I)[0]),(1.05+.1*(e.params.colorBy!=="none"))*W]});var O=me(),Y=$(O);{var j=W=>{Tr(W,{get title(){return o(S)},get limX(){return o(R)},get limY(){return o(P)},get xLabel(){return o(C)},get yLabel(){return o(N)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(Q,Z)=>{var G=wv(),X=$(G);{var re=ge=>{Qr(ge,{get xValues(){return o(b).x},get yValues(){return o(b).y},lineColor:c,lineType:2})};U(X,ge=>{o(b)&&ge(re)})}var te=V(X,2);{var J=ge=>{Qr(ge,{get xValues(){return o(w).x},get yValues(){return o(w).y},lineColor:c,lineType:3})};U(te,ge=>{o(w)&&ge(J)})}var ae=V(te,2);mn(ae,{get labels(){return o(k)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return o(M).values},get yValues(){return o(y).values},plotType:"p",get showLabels(){return e.params.showLabels},get colors(){return o(p).colors},get xRange(){return o(L)},set xRange(ge){D(L,ge,!0)},get yRange(){return o(I)},set yRange(ge){D(I,ge,!0)}});var Ae=V(ae,2);{var Fe=ge=>{const Ge=E(()=>o(p).breaks!==null);ga(ge,{get show(){return o(Ge)},get colmap(){return o(p).map},get breaks(){return o(p).breaks},get labels(){return o(p).labels}})};U(Ae,ge=>{o(p)&&ge(Fe)})}T(Q,G)},$$slots:{default:!0}})};U(Y,W=>{o(M)&&o(y)&&W(j)})}T(t,O),de()}function Ra(t){const e=Object.keys(t),r=t[e[0]],l={ncomp:{el:pr,hidden:!1,default:r.ncomp>1?2:1,label:"# PCs",props:{min:1,max:r.ncomp}},resID:{el:mt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},transType:{el:mt,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:mt,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}};return r.classNames&&r.classNames.length>1&&(l.colorBy={el:mt,hidden:!1,default:"none",label:"Color by",props:{options:["none","groups"]}}),l}function _v(t){return{plotType:{el:Gn,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},transform:{el:mt,hidden:!1,default:"none",label:"Type",props:{options:["none","sqrt","log"]}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function yv(t){return{plotType:{el:Gn,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:pr,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:pr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},axesEqual:{el:Dt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function ja(t){const e=Object.keys(t),r=t[e[0]],l=r.classNames&&r.classNames.length>1?["none","groups","variable"]:["none","variable"];return{plotType:{el:Gn,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:pr,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:pr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},resID:{el:mt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},showEllipse:{el:Dt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:mt,hidden:!1,default:"none",label:"Color by",props:{options:l}},colorByVar:{el:pr,hidden:!0,default:1,label:"Variable",props:{min:1,max:r.ncols}},confEllipse:{el:mt,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}function Fa(t){const e=Object.keys(t);return t[e[0]],{plotType:{el:Gn,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},resID:{el:mt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},varType:{el:mt,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:mt,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function qa(t){const e=Object.keys(t),r=t[e[0]];return{resID:{el:mt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},comp2:{el:pr,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:pr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:mt,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","obj","var","both"]}},axesEqual:{el:Dt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}var xv=K("<!> <!>",1);function kv(t,e){fe(e,!0);const r=(h,m=vt)=>{Ee(h,{label:"Selected",children:(g,b)=>{Vt(g,{onclick:()=>e.markOutlier(m()),text:"remove"})},$$slots:{default:!0}})},l=(h,m=vt)=>{Ee(h,{label:"Selected",children:(g,b)=>{var w=xv(),p=$(w);Vt(p,{onclick:()=>e.showContributions(m(),o(f).distance.ncomp),text:"plot"});var _=V(p,2);Vt(_,{onclick:()=>e.markOutlier(m()),text:"remove"}),T(g,w)},$$slots:{default:!0}})};let s={cal:e.resobj},a={cal:e.dataset};const c=E(()=>({scores:{label:"Scores",scope:"objects",component:Ta,buttons:r},loadings:{label:"Loadings",scope:"stats",component:mv},biplot:{label:"Bi-plot",scope:"stats",component:La},variance:{label:"Variance",scope:"stats",component:Pa},eigenvals:{label:"Eigenvalues",scope:"stats",component:bv},distance:{label:"Distances",scope:"objects",component:Ia,buttons:l}})),u=et({scores:ja(s),loadings:yv(e.model),biplot:qa(s),variance:Fa(s),eigenvals:_v(e.model),distance:Ra(s)});let f=ne(et({scores:tr(u.scores),loadings:tr(u.loadings),biplot:tr(u.biplot),variance:tr(u.variance),eigenvals:tr(u.eigenvals),distance:tr(u.distance)}));Be(()=>{o(f).scores.plotType!=="p"?(u.scores.comp1.hidden=!0,u.scores.showEllipse.hidden=!0,o(f).scores.showEllipse=!1):(u.scores.comp1.hidden=!1,u.scores.showEllipse.hidden=!1),o(f).scores.plotType==="l"||o(f).scores.plotType==="b"?(u.scores.colorBy.hidden=!0,o(f).scores.colorBy="none"):u.scores.colorBy.hidden=!1,o(f).scores.colorBy==="variable"?u.scores.colorByVar.hidden=!1:u.scores.colorByVar.hidden=!0,o(f).scores.colorBy==="groups"&&o(f).scores.plotType==="p"?u.scores.confEllipse.hidden=!1:(u.scores.confEllipse.hidden=!0,o(f).scores.confEllipse="none")}),Be(()=>{o(f).loadings.plotType!=="p"?u.loadings.comp1.hidden=!0:u.loadings.comp1.hidden=!1});const d=E(()=>({res:s,model:e.model,data:a})),v={markOutlier:e.markOutlier,showContributions:e.showContributions};Na(t,{get plots(){return o(c)},get controls(){return u},get props(){return o(d)},callbacks:v,get params(){return o(f)},set params(h){D(f,h,!0)}}),de()}var Ev=K('<div class="outliers-pane svelte-1dk0fsp"><!></div>'),Av=K('<div class="model-calculator svelte-1dk0fsp"><!></div>'),Cv=K('<div class="result-stats svelte-1dk0fsp"><!></div>'),Mv=K(`<p class="svelte-1dk0fsp">In this tab you can train a PCA model and explore how well it describes the training set. After creating the model you can save it to a file and apply it to another, new set of samples, and see how well this new set is explained by the model (tab <strong>Project</strong>).</p> <p class="svelte-1dk0fsp"><strong>Step 1.</strong></p> <p class="svelte-1dk0fsp">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1dk0fsp">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. If this is the case, select <em>values</em> option for the header. In this case you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1dk0fsp">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. It is also possible to have group labels, which you can use, for example, to color group samples on the score plot. Here is an example how data structure may look like (note, that column with group, row labels and header are optional):</p> <div class="svelte-1dk0fsp"><table class="svelte-1dk0fsp"><thead class="svelte-1dk0fsp"><tr class="svelte-1dk0fsp"><td class="svelte-1dk0fsp">Name</td><td class="svelte-1dk0fsp">Group</td><td class="svelte-1dk0fsp">x1</td><td class="svelte-1dk0fsp">x2</td><td class="svelte-1dk0fsp">x3</td></tr></thead><tbody class="svelte-1dk0fsp"><tr><td class="svelte-1dk0fsp">O1</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">3.8</td><td class="svelte-1dk0fsp">1.3</td><td class="svelte-1dk0fsp">13.6</td></tr><tr><td class="svelte-1dk0fsp">O2</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">11.1</td><td class="svelte-1dk0fsp">12.3</td><td class="svelte-1dk0fsp">3.3</td></tr><tr><td class="svelte-1dk0fsp">O3</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">1.2</td><td class="svelte-1dk0fsp">2.3</td><td class="svelte-1dk0fsp">4.2</td></tr></tbody></table></div> <p class="svelte-1dk0fsp"></p>`,1),Sv=K('<p class="svelte-1dk0fsp"><strong>Step 2</strong></p> <p class="svelte-1dk0fsp">Next step is to create a global PCA model for the training set. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to select number of components for every plot.</p>',1),Nv=K('<div class="help-text svelte-1dk0fsp"><!></div>'),zv=K('<!> <div class="app-container svelte-1dk0fsp"><div class="app-controls svelte-1dk0fsp"><div class="data-loader svelte-1dk0fsp"><!></div> <!> <!> <!></div> <div class="app-content svelte-1dk0fsp"><!></div></div>',1);function Tv(t,e){fe(e,!0);const r=E(()=>e.session.train);let l=ne(-1),s=ne(1),a=ne(!1);function c(P){if(P<0||P>o(r).resobj.nrows-1)return;const O=o(r).resobj.objindices[P];O>=0&&!o(r).outliers.includes(O)&&(o(r).outliers.push(O),o(r).model=null)}function u(P,O){P<0||(D(l,P,!0),D(a,!0))}function f(){D(a,!1),D(l,-1),D(s,1)}function d(){o(r).outliers=[],o(r).model=null}function v(){o(r).outliers.pop(),o(r).model=null}Be(()=>{o(r).dataset===null&&(o(r).model=null,o(r).outliers=[]),o(r).model===null&&(o(r).resobj=null)}),Be(()=>{const P=er(()=>JSON.stringify(e.session,Vo));e.backupSession(P,o(r).model,o(r).dataset,o(r).resobj)});var h=zv(),m=$(h);{var g=P=>{Ma(P,Xr(()=>o(r),{get ncomp(){return o(s)},get selected(){return o(r).resobj.objindices[o(l)]},closeModal:f}))};U(m,P=>{o(a)&&P(g)})}var b=V(m,2),w=B(b),p=B(w),_=B(p);Hs(_,{className:"Group",get dataset(){return o(r).dataset},set dataset(P){o(r).dataset=P}});var A=V(p,2);{var M=P=>{var O=Ev(),Y=B(O);Xs(Y,{get outliers(){return o(r).outliers},get dataset(){return o(r).dataset},resetOutliers:d,undoOutliers:v}),T(P,O)};U(A,P=>{o(r).outliers&&o(r).outliers.length>0&&P(M)})}var y=V(A,2);{var k=P=>{var O=Av(),Y=B(O);Bd(Y,{get WASM(){return e.WASM},downloadModel:Vd,downloadResults:Sa,get dataset(){return o(r).dataset},get outliers(){return o(r).outliers},get model(){return o(r).model},set model(j){o(r).model=j},get resobj(){return o(r).resobj},set resobj(j){o(r).resobj=j}}),T(P,O)};U(y,P=>{o(r).dataset&&P(k)})}var S=V(y,2);{var C=P=>{var O=Cv(),Y=B(O);Gs(Y,{get resobj(){return o(r).resobj}}),T(P,O)};U(S,P=>{o(r).resobj&&P(C)})}var N=V(w,2),L=B(N);{var I=P=>{var O=Nv(),Y=B(O);{var j=Q=>{var Z=Mv();T(Q,Z)},W=Q=>{var Z=me(),G=$(Z);{var X=re=>{var te=Sv();T(re,te)};U(G,re=>{o(r).model||re(X)})}T(Q,Z)};U(Y,Q=>{o(r).dataset?Q(W,!1):Q(j)})}T(P,O)},R=P=>{var O=me(),Y=$(O);Fn(Y,()=>o(r).resobj,j=>{kv(j,Xr({markOutlier:c,showContributions:u},()=>o(r)))}),T(P,O)};U(L,P=>{!o(r).resobj||!o(r).model?P(I):P(R,!1)})}T(t,h),de()}var Lv=K("<!> <!>",1),Pv=K('<p class="info-text svelte-3v2vv7"><span>Model file:</span> <span class="file-name svelte-3v2vv7"> </span><br> <span style="color:#a0a0a0;">Model info:</span> </p> <!>',1),Iv=K("<p><!></p>"),Rv=K("<!> <!>",1);function jv(t,e){fe(e,!0);let r=q(e,"model",15),l=ne(""),s=ne("neutral"),a=ne("");function c(p){try{const _=JSON.parse(p,Rs);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),!Object.keys(_).includes("class")||_.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain PCA model.");_.fileName=o(d),r(_),D(s,"success"),D(a,"")}catch(_){console.log(_),r(null),D(s,"error"),D(a,_,!0)}}function u(p){const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsText(o(l))}function f(){D(l,""),r(null),D(s,"neutral"),D(a,"")}Be(()=>{o(l)===null?(r(null),D(s,"neutral"),D(a,"")):(D(s,"neutral"),D(a,""))});let d=E(()=>o(l)?o(l).name.replace(/\.[^/.]+$/,""):"");var v=Rv(),h=$(v);{var m=p=>{var _=Lv(),A=$(_);Fn(A,()=>o(l),k=>{Ee(k,{name:"file-selector",children:(S,C)=>{Ys(S,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return o(l)},set file(N){D(l,N,!0)}})},$$slots:{default:!0}})});var M=V(A,2);{var y=k=>{Ee(k,{name:"load-button",label:" ",children:(S,C)=>{Vt(S,{onclick:u,text:"Load"})},$$slots:{default:!0}})};U(M,k=>{o(l)&&k(y)})}T(p,_)},g=p=>{Ee(p,{name:"info",class:"info",children:(_,A)=>{var M=Pv(),y=$(M),k=V(B(y),2),S=B(k),C=V(k,4),N=V(y,2);vn(N,{onclick:f}),ee(()=>{z(k,"title",r().fileName),ve(S,r().fileName),ve(C,` ${r().ncomp??""} PCs${r().center?", centered":""}${r().scale?", scaled":""}`)}),T(_,M)},$$slots:{default:!0}})};U(h,p=>{r()?p(g,!1):p(m)})}var b=V(h,2);{var w=p=>{Ee(p,{name:"error",status:"error",children:(_,A)=>{var M=Iv(),y=B(M);bt(y,()=>o(a)),T(_,M)},$$slots:{default:!0}})};U(b,p=>{(o(s)==="error"||o(a))&&p(w)})}T(t,v),de()}var Fv=K("<!> <!>",1);function qv(t,e){fe(e,!0);const r=(h,m=vt)=>{Ee(h,{label:"Selected",children:(g,b)=>{Vt(g,{onclick:()=>e.markOutlier(m()),text:"remove"})},$$slots:{default:!0}})},l=(h,m=vt)=>{Ee(h,{label:"Selected",children:(g,b)=>{var w=Fv(),p=$(w);Vt(p,{onclick:()=>e.showContributions(m(),o(f).distance.ncomp),text:"plot"});var _=V(p,2);Vt(_,{onclick:()=>e.markOutlier(m()),text:"remove"}),T(g,w)},$$slots:{default:!0}})};let s={new:e.resobj},a={new:e.dataset};const c=E(()=>({scores:{label:"Scores",scope:"objects",component:Ta,buttons:r},biplot:{label:"Bi-plot",scope:"stats",component:La},variance:{label:"Variance",scope:"stats",component:Pa},distance:{label:"Distances",scope:"objects",component:Ia,buttons:l}})),u=et({scores:ja(s),biplot:qa(s),variance:Fa(s),distance:Ra(s)});let f=ne(et({scores:tr(u.scores),biplot:tr(u.biplot),variance:tr(u.variance),distance:tr(u.distance)}));Be(()=>{o(f).scores.plotType!=="p"?(u.scores.comp1.hidden=!0,u.scores.showEllipse.hidden=!0,o(f).scores.showEllipse=!1):(u.scores.comp1.hidden=!1,u.scores.showEllipse.hidden=!1),o(f).scores.plotType==="l"||o(f).scores.plotType==="b"?(u.scores.colorBy.hidden=!0,o(f).scores.colorBy="none"):u.scores.colorBy.hidden=!1,o(f).scores.colorBy==="variable"?u.scores.colorByVar.hidden=!1:u.scores.colorByVar.hidden=!0,o(f).scores.colorBy==="groups"&&o(f).scores.plotType==="p"?u.scores.confEllipse.hidden=!1:(u.scores.confEllipse.hidden=!0,o(f).scores.confEllipse="none")});const d=E(()=>({res:s,model:e.model,data:a})),v={markOutlier:e.markOutlier,showContributions:e.showContributions};Na(t,{get plots(){return o(c)},get controls(){return u},get props(){return o(d)},callbacks:v,get params(){return o(f)},set params(h){D(f,h,!0)}}),de()}var Bv=K('<div class="data-loader svelte-1mqkfgh"><!></div>'),Vv=K('<div class="outliers-pane svelte-1mqkfgh"><!></div>'),Dv=K('<div class="buttons"><!></div>'),Ov=K('<div class="model-dowloader svelte-1mqkfgh"><!></div> <div class="result-stats svelte-1mqkfgh"><!></div>',1),Yv=K('<p class="svelte-1mqkfgh"><strong>Step 1.</strong></p> <p class="svelte-1mqkfgh">Load file with PCA model you created earlier in tab <strong>Train</strong></p>',1),Wv=K('<p class="svelte-1mqkfgh"><strong>Step 2.</strong></p> <p class="svelte-1mqkfgh">Load your dataset set from a CSV file. The interface and selection steps are similar to the ones you used in <em>Train</em> tab. However, in this case you do not need to specify all details for header, just select if the new dataset has header as a first row or not. All values will be inherited from the model object.</p> <p class="svelte-1mqkfgh"><strong>It is important that the new dataset has same variables as the training set used to create the model.</strong></p>',1),Uv=K('<div class="help-text svelte-1mqkfgh"><p class="svelte-1mqkfgh">In this tab you can project new data points to a previosly trained PCA model and explore main outcomes: scores, distances and variances.</p> <!> <p class="svelte-1mqkfgh"></p></div>'),Hv=K('<!> <div class="app-container svelte-1mqkfgh"><div class="app-controls svelte-1mqkfgh"><div class="model-loader svelte-1mqkfgh"><!></div> <!> <!> <!></div> <div class="app-content svelte-1mqkfgh"><!></div></div>',1);function Gv(t,e){fe(e,!0);const r=E(()=>e.session.new);let l=ne(-1),s=ne(1),a=ne(!1);function c(P){if(P<0||P>o(r).resobj.nrows-1)return;const O=o(r).resobj.objindices[P];O>=0&&!o(r).outliers.includes(O)&&(o(r).outliers.push(O),o(r).resobj=null)}function u(P,O){P<0||(D(l,P,!0),D(a,!0))}function f(){D(a,!1),D(l,-1),D(s,1)}function d(){o(r).outliers=[],o(r).resobj=null}function v(){o(r).outliers.pop(),o(r).resobj=null}Be(()=>{o(r).model===null&&(o(r).dataset=null),o(r).dataset===null&&(o(r).outliers=[],o(r).resobj=null)}),Be(()=>{const P=er(()=>JSON.stringify(e.session,Vo));e.backupSession(P,o(r).model,o(r).dataset,o(r).resobj)});var h=Hv(),m=$(h);{var g=P=>{Ma(P,Xr(()=>o(r),{get ncomp(){return o(s)},get selected(){return o(r).resobj.objindices[o(l)]},closeModal:f}))};U(m,P=>{o(a)&&P(g)})}var b=V(m,2),w=B(b),p=B(w),_=B(p);jv(_,{get model(){return o(r).model},set model(P){o(r).model=P}});var A=V(p,2);{var M=P=>{var O=Bv(),Y=B(O);Hs(Y,{get WASM(){return e.WASM},get outliers(){return o(r).outliers},get model(){return o(r).model},className:"Group",get dataset(){return o(r).dataset},set dataset(j){o(r).dataset=j},get resobj(){return o(r).resobj},set resobj(j){o(r).resobj=j}}),T(P,O)};U(A,P=>{o(r).model&&P(M)})}var y=V(A,2);{var k=P=>{var O=Vv(),Y=B(O);Xs(Y,{get dataset(){return o(r).dataset},get outliers(){return o(r).outliers},resetOutliers:d,undoOutliers:v}),T(P,O)};U(y,P=>{o(r).outliers&&o(r).outliers.length>0&&P(k)})}var S=V(y,2);{var C=P=>{var O=Ov(),Y=$(O),j=B(Y);Ee(j,{label:"Download",children:(Z,G)=>{var X=Dv(),re=B(X);Vt(re,{text:"Results",onclick:()=>Sa(o(r).resobj,o(r).dataset,"new",o(r).outliers)}),T(Z,X)},$$slots:{default:!0}});var W=V(Y,2),Q=B(W);Gs(Q,{get resobj(){return o(r).resobj}}),T(P,O)};U(S,P=>{o(r).resobj&&P(C)})}var N=V(w,2),L=B(N);{var I=P=>{var O=Uv(),Y=V(B(O),2);{var j=Q=>{var Z=Yv();T(Q,Z)},W=(Q,Z)=>{{var G=X=>{var re=Wv();T(X,re)};U(Q,X=>{o(r).dataset||X(G)},Z)}};U(Y,Q=>{o(r).model?Q(W,!1):Q(j)})}T(P,O)},R=P=>{var O=me(),Y=$(O);Fn(Y,()=>o(r).resobj,j=>{qv(j,Xr({markOutlier:c,showContributions:u},()=>o(r)))}),T(P,O)};U(L,P=>{o(r).resobj?P(R,!1):P(I)})}T(t,h),de()}function Ba(t,e){D(e,!0)}function Xv(t,e,r){const l=Do(new Date),s=e.appID+"-session-"+l+".json";o(r).date=l;const a=JSON.stringify(o(r),Vo),c=new Blob([a],{type:"text/json"}),u=window.URL.createObjectURL(c),f=document.createElement("a");f.setAttribute("href",u),f.setAttribute("download",s),f.click()}function Kv(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var Qv=K('<sup style="color:red">β</sup>'),Jv=K('<li><button class="svelte-1cyr8za"> </button></li>'),Zv=K("<div><!></div>"),$v=K('<div class="info-container svelte-1cyr8za"><!></div>'),e1=K('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function t1(t,e){fe(e,!0);let r=q(e,"tabs",19,()=>[]),l=q(e,"isBeta",3,!1);const s="mdatools-"+e.appID;let a=ne(!1),c=ne(void 0),u=ne("Current session "),f=ne(!1);function d(y){D(u,y,!0),D(f,!0),setTimeout(()=>{D(u,"Current session "),D(f,!1)},1e3)}function v(){D(a,!1)}function h(y){o(c).tab=y}function m(){const y=indexedDB.open(s,1);y.onsuccess=k=>{const C=k.target.result.transaction(e.appID,"readwrite");C.objectStore(e.appID).delete("session"),C.oncomplete=()=>{D(c,e.initSession(),!0),d("Session was reinitialzed.")},C.onerror=()=>console.error("Failed to session from DB.")}}function g(y,k){window.localStorage.removeItem(e.appID+"-blocked");const S=indexedDB.open(s,1);S.onsuccess=C=>{const I=C.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);I.put(y,"session"),I.put(Do(new Date),"session-update")}}function b(){new Promise((y,k)=>{const S=indexedDB.open(s,1);S.onsuccess=C=>{const R=C.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");R.onsuccess=()=>y(R.result),R.onerror=()=>k(R.error)}}).then(y=>{w(y),D(u,"Last session is restored "),D(f,!0),setTimeout(()=>{D(u,"Current session "),D(f,!1)},1500)}).catch(y=>{console.error(y),D(c,e.initSession(),!0)})}function w(y){if(!y||y==="undefined"){D(c,e.initSession(),!0);return}const k=JSON.parse(y,Rs);D(c,e.checkSession(k)?k:e.initSession(e.appID),!0)}function p(y){e.resetSession(o(c));const k=new FileReader;k.onload=()=>{w(k.result),y.target.value=""},k.readAsText(y.target.files[0])}wc(()=>{const y=e.appID,k=indexedDB.open(s,1);k.onupgradeneeded=S=>{const C=S.target.result;C.objectStoreNames.contains(y)||C.createObjectStore(y)},k.onsuccess=S=>{b()}});var _=me(),A=$(_);{var M=y=>{var k=e1(),S=B(k),C=B(S),N=B(C),L=V(N,2),I=B(L),R=V(I);{var P=ke=>{var le=Qv();T(ke,le)};U(R,ke=>{l()&&ke(P)})}var O=V(L,2),Y=B(O),j=V(C,2);Ue(j,21,r,Qe,(ke,le,ue)=>{var se=Jv();let Te;var pe=B(se);pe.__click=()=>h(ue),pe.__keydown=()=>h(ue);var _e=B(pe);ee(lt=>{Te=ut(se,1,"nav-item svelte-1cyr8za",null,Te,lt),ve(_e,o(le).name)},[()=>({selected:o(c).tab===ue})]),T(ke,se)});var W=V(S,2);Ue(W,21,r,Qe,(ke,le,ue)=>{var se=Zv();let Te;var pe=B(se);yo(pe,()=>o(le).component,(_e,lt)=>{lt(_e,{get WASM(){return e.WASM},get session(){return o(c)},backupSession:g})}),ee(_e=>Te=ut(se,1,"tab-content svelte-1cyr8za",null,Te,_e),[()=>({hidden:o(c).tab!==ue})]),T(ke,se)});var Q=V(W,2),Z=B(Q);let G;var X=B(Z),re=B(X),te=V(X,2),J=B(te);J.__change=p;var ae=V(te,2);ae.__click=[Xv,e,c];var Ae=V(ae,2);Ae.__click=[Kv,m];var Fe=V(Z,2),ge=B(Fe);ge.__click=[Ba,a],ge.__keydown=[Ba,a];var Ge=V(ge,2);vr(Ge,()=>e.footer);var ye=V(Q,2);{var xe=ke=>{pa(ke,{closeModal:v,children:(le,ue)=>{var se=$v(),Te=B(se);vr(Te,()=>e.info),T(le,se)},$$slots:{default:!0}})};U(ye,ke=>{o(a)&&ke(xe)})}ee(ke=>{z(N,"alt",e.appShortTitle),ve(I,e.appTitle),ve(Y,e.appSlogan),G=ut(Z,1,"session svelte-1cyr8za",null,G,ke),ve(re,o(u))},[()=>({"no-buttons":o(f)})]),T(y,k)};U(A,y=>{o(c)&&y(M)})}T(t,_),de()}tt(["click","keydown","change"]);const g1="modulepreload",p1=function(t){return"/"+t},b1={},r1=function(e,r,l){let s=Promise.resolve();function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};var n1=async function(t={}){var e,r=t,l,s,a=new Promise((F,H)=>{l=F,s=H}),c=typeof window=="object",u=typeof WorkerGlobalScope<"u",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(f){const{createRequire:F}=await r1(()=>Promise.resolve().then(()=>a1),void 0);var d=F(ze&&ze.tagName.toUpperCase()==="SCRIPT"&&ze.src||new URL("pca.js",document.baseURI).href)}var v=(F,H)=>{throw H},h=ze&&ze.tagName.toUpperCase()==="SCRIPT"&&ze.src||new URL("pca.js",document.baseURI).href,m="";function g(F){return r.locateFile?r.locateFile(F,m):m+F}var b,w;if(f){var p=d("fs"),_=d("path");h.startsWith("file:")&&(m=_.dirname(d("url").fileURLToPath(h))+"/"),w=F=>{F=R(F)?new URL(F):F;var H=p.readFileSync(F);return H},b=async(F,H=!0)=>{F=R(F)?new URL(F):F;var oe=p.readFileSync(F,H?void 0:"utf8");return oe},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),v=(F,H)=>{throw process.exitCode=F,H}}else if(c||u){try{m=new URL(".",h).href}catch{}u&&(w=F=>{var H=new XMLHttpRequest;return H.open("GET",F,!1),H.responseType="arraybuffer",H.send(null),new Uint8Array(H.response)}),b=async F=>{if(R(F))return new Promise((oe,Ie)=>{var Me=new XMLHttpRequest;Me.open("GET",F,!0),Me.responseType="arraybuffer",Me.onload=()=>{if(Me.status==200||Me.status==0&&Me.response){oe(Me.response);return}Ie(Me.status)},Me.onerror=Ie,Me.send(null)});var H=await fetch(F,{credentials:"same-origin"});if(H.ok)return H.arrayBuffer();throw new Error(H.status+" : "+H.url)}}var A=console.log.bind(console),M=console.error.bind(console),y,k,S=!1,C,N,L,I,R=F=>F.startsWith("file://");function P(){var F=k.buffer;N=new Int8Array(F),L=new Uint8Array(F),r.HEAP32=new Int32Array(F),I=new Uint32Array(F),r.HEAPF64=new Float64Array(F),new BigInt64Array(F),new BigUint64Array(F)}function O(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)se(r.preRun.shift());xe(ue)}function Y(){Pe.k()}function j(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)le(r.postRun.shift());xe(ke)}var W=0,Q=null;function Z(F){var H;W++,(H=r.monitorRunDependencies)==null||H.call(r,W)}function G(F){var oe;if(W--,(oe=r.monitorRunDependencies)==null||oe.call(r,W),W==0&&Q){var H=Q;Q=null,H()}}function X(F){var oe;(oe=r.onAbort)==null||oe.call(r,F),F="Aborted("+F+")",M(F),S=!0,F+=". Build with -sASSERTIONS for more info.";var H=new WebAssembly.RuntimeError(F);throw s(H),H}var re;function te(){return r.locateFile?g("pca_wasm.wasm"):new URL("/pca/pca.wasm",ze&&ze.tagName.toUpperCase()==="SCRIPT"&&ze.src||new URL("pca.js",document.baseURI).href).href}function J(F){if(F==re&&y)return new Uint8Array(y);if(w)return w(F);throw"both async and sync fetching of the wasm failed"}async function ae(F){if(!y)try{var H=await b(F);return new Uint8Array(H)}catch{}return J(F)}async function Ae(F,H){try{var oe=await ae(F),Ie=await WebAssembly.instantiate(oe,H);return Ie}catch(Me){M(`failed to asynchronously prepare wasm: ${Me}`),X(Me)}}async function Fe(F,H,oe){if(!F&&typeof WebAssembly.instantiateStreaming=="function"&&!R(H)&&!f)try{var Ie=fetch(H,{credentials:"same-origin"}),Me=await WebAssembly.instantiateStreaming(Ie,oe);return Me}catch(De){M(`wasm streaming compile failed: ${De}`),M("falling back to ArrayBuffer instantiation")}return Ae(H,oe)}function ge(){return{a:ar}}async function Ge(){function F(De,Ke){return Pe=De.exports,k=Pe.j,P(),G(),Pe}Z();function H(De){return F(De.instance)}var oe=ge();if(r.instantiateWasm)return new Promise((De,Ke)=>{r.instantiateWasm(oe,(Oe,It)=>{De(F(Oe))})});re??(re=te());try{var Ie=await Fe(y,re,oe),Me=H(Ie);return Me}catch(De){return s(De),Promise.reject(De)}}class ye{constructor(H){Rr(this,"name","ExitStatus");this.message=`Program terminated with exit(${H})`,this.status=H}}var xe=F=>{for(;F.length>0;)F.shift()(r)},ke=[],le=F=>ke.push(F),ue=[],se=F=>ue.push(F),Te=!0,pe=F=>i1(F),_e=()=>u1(),lt=()=>X(""),Kt=0,Xe=()=>{Te=!1,Kt=0},ct={},$e=F=>{if(F instanceof ye||F=="unwind")return C;v(1,F)},Ot=()=>Te||Kt>0,pn=F=>{var H;C=F,Ot()||((H=r.onExit)==null||H.call(r,F),S=!0),v(F,new ye(F))},$n=(F,H)=>{C=F,pn(F)},$r=$n,el=()=>{if(!Ot())try{$r(C)}catch(F){$e(F)}},tl=F=>{if(!S)try{F(),el()}catch(H){$e(H)}},rl=()=>performance.now(),nl=(F,H)=>{if(ct[F]&&(clearTimeout(ct[F].id),delete ct[F]),!H)return 0;var oe=setTimeout(()=>{delete ct[F],tl(()=>sl(F,rl()))},H);return ct[F]={id:oe,timeout_ms:H},0},ol=()=>Date.now(),he=()=>2147483648,Ne=(F,H)=>Math.ceil(F/H)*H,Ce=F=>{var H=k.buffer,oe=(F-H.byteLength+65535)/65536|0;try{return k.grow(oe),P(),1}catch{}},st=F=>{var H=L.length;F>>>=0;var oe=he();if(F>oe)return!1;for(var Ie=1;Ie<=4;Ie*=2){var Me=H*(1+.2/Ie);Me=Math.min(Me,F+100663296);var De=Math.min(oe,Ne(Math.max(F,Me),65536)),Ke=Ce(De);if(Ke)return!0}return!1},wt=F=>52;function Qt(F,H,oe,Ie){return 70}var Nt=[null,[],[]],kt=typeof TextDecoder<"u"?new TextDecoder:void 0,Ye=(F,H=0,oe=NaN)=>{for(var Ie=H+oe,Me=H;F[Me]&&!(Me>=Ie);)++Me;if(Me-H>16&&F.buffer&&kt)return kt.decode(F.subarray(H,Me));for(var De="";H<Me;){var Ke=F[H++];if(!(Ke&128)){De+=String.fromCharCode(Ke);continue}var Oe=F[H++]&63;if((Ke&224)==192){De+=String.fromCharCode((Ke&31)<<6|Oe);continue}var It=F[H++]&63;if((Ke&240)==224?Ke=(Ke&15)<<12|Oe<<6|It:Ke=(Ke&7)<<18|Oe<<12|It<<6|F[H++]&63,Ke<65536)De+=String.fromCharCode(Ke);else{var Pr=Ke-65536;De+=String.fromCharCode(55296|Pr>>10,56320|Pr&1023)}}return De},Le=(F,H)=>{var oe=Nt[F];H===0||H===10?((F===1?A:M)(Ye(oe)),oe.length=0):oe.push(H)},gt=(F,H)=>F?Ye(L,F,H):"",dt=(F,H,oe,Ie)=>{for(var Me=0,De=0;De<oe;De++){var Ke=I[H>>2],Oe=I[H+4>>2];H+=8;for(var It=0;It<Oe;It++)Le(F,L[Ke+It]);Me+=Oe}return I[Ie>>2]=Me,0},at=F=>{var H=r["_"+F];return H},Je=(F,H)=>{N.set(F,H)},Yt=F=>{for(var H=0,oe=0;oe<F.length;++oe){var Ie=F.charCodeAt(oe);Ie<=127?H++:Ie<=2047?H+=2:Ie>=55296&&Ie<=57343?(H+=4,++oe):H+=3}return H},Lr=(F,H,oe,Ie)=>{if(!(Ie>0))return 0;for(var Me=oe,De=oe+Ie-1,Ke=0;Ke<F.length;++Ke){var Oe=F.charCodeAt(Ke);if(Oe>=55296&&Oe<=57343){var It=F.charCodeAt(++Ke);Oe=65536+((Oe&1023)<<10)|It&1023}if(Oe<=127){if(oe>=De)break;H[oe++]=Oe}else if(Oe<=2047){if(oe+1>=De)break;H[oe++]=192|Oe>>6,H[oe++]=128|Oe&63}else if(Oe<=65535){if(oe+2>=De)break;H[oe++]=224|Oe>>12,H[oe++]=128|Oe>>6&63,H[oe++]=128|Oe&63}else{if(oe+3>=De)break;H[oe++]=240|Oe>>18,H[oe++]=128|Oe>>12&63,H[oe++]=128|Oe>>6&63,H[oe++]=128|Oe&63}}return H[oe]=0,oe-Me},qe=(F,H,oe)=>Lr(F,L,H,oe),ce=F=>c1(F),pt=F=>{var H=Yt(F)+1,oe=ce(H);return qe(F,oe,H),oe},ll=(F,H,oe,Ie,Me)=>{var De={string:Rt=>{var bn=0;return Rt!=null&&Rt!==0&&(bn=pt(Rt)),bn},array:Rt=>{var bn=ce(Rt.length);return Je(Rt,bn),bn}};function Ke(Rt){return H==="string"?gt(Rt):H==="boolean"?!!Rt:Rt}var Oe=at(F),It=[],Pr=0;if(Ie)for(var Ir=0;Ir<Ie.length;Ir++){var Da=De[oe[Ir]];Da?(Pr===0&&(Pr=_e()),It[Ir]=Da(Ie[Ir])):It[Ir]=Ie[Ir]}var il=Oe(...It);function d1(Rt){return Pr!==0&&pe(Pr),Ke(Rt)}return il=d1(il),il};r.noExitRuntime&&(Te=r.noExitRuntime),r.print&&(A=r.print),r.printErr&&(M=r.printErr),r.wasmBinary&&(y=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=ll;var ar={c:lt,b:Xe,d:nl,i:ol,e:st,h:wt,f:Qt,g:dt,a:pn},Pe=await Ge();Pe.k,r._pcafit_wasm=Pe.l,r._malloc=Pe.m,r._free=Pe.n,r._pcapredict_wasm=Pe.o,r._pcvpca_wasm=Pe.p;var sl=Pe.q,i1=Pe.r,c1=Pe.s,u1=Pe.t;function al(){if(W>0){Q=al;return}if(O(),W>0){Q=al;return}function F(){var H;r.calledRun=!0,!S&&(Y(),l(r),(H=r.onRuntimeInitialized)==null||H.call(r),j())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),F()},1)):F()}function f1(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return f1(),al(),e=a,e},o1=K('<p>Current release: <span>2.0.11</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="/pca/Wines.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video lessons</a></p>'),l1=K(`<h2>Principal Component Analysis</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using PCA models for data exploration
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>Check out YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video-lessons</a></p><h3>v. 2.0.8-2.0.11</h3> <p class="release-info">released 21/05/2025</p> <ul><li>Fixed bug in contributions plot and several minor issues.</li></ul> <h3>v. 2.0.7</h3> <p class="release-info">released 16/04/2025</p> <ul><li>App now remembers the plot settings when you switch between plots.</li> <li>Introducing sessons — app states, including model, results, datasets, and outliers
         (in all tabs). When you close tab or app window or click on reboot button, the current
         session is saved to browser's local storage and then is restored automatically. You can
         also download session as a file and load it from file.</li> <li>Added undo option for outliers (if more than one is removed).</li> <li>More robust CSV converter which filters out empty rows created by some versions of MS Excel.</li> <li>Many small improvements to plots and control elements.</li></ul>`,1);function s1(t,e){fe(e,!1);function r(c){c.train.dataset=null,c.new.model=null,c.tab=0}function l(c){const u=Object.keys(c);if(!["date","tab","train","new"].every(v=>u.includes(v)))return!1;const f=Object.keys(c.train),d=Object.keys(c.new);return!!["model","dataset","resobj","outliers"].every(v=>f.includes(v)&&d.includes(v))}function s(){return{date:Do(new Date),tab:0,train:{model:0,dataset:0,resobj:0,outliers:[]},new:{model:0,dataset:0,resobj:0,outliers:[]}}}const a=[{name:"Train",label:"train",component:Tv},{name:"Project",label:"new",component:Gv}];hc(),t1(t,{appID:"pca",appTitle:"PCA",appShortTitle:"PCA",appSlogan:"Principal component analysis",WASM:n1,tabs:a,initSession:s,checkSession:l,resetSession:r,footer:f=>{var d=o1();T(f,d)},info:f=>{var d=l1();T(f,d)},$$slots:{footer:!0,info:!0}}),de()}Gi(s1,{target:document.body});const a1=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pca.js.map
