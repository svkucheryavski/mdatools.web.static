var $v=Object.defineProperty;var La=De=>{throw TypeError(De)};var e1=(De,ke,st)=>ke in De?$v(De,ke,{enumerable:!0,configurable:!0,writable:!0,value:st}):De[ke]=st;var Pr=(De,ke,st)=>e1(De,typeof ke!="symbol"?ke+"":ke,st),sl=(De,ke,st)=>ke.has(De)||La("Cannot "+st);var sr=(De,ke,st)=>(sl(De,ke,"read from private field"),st?st.call(De):ke.get(De)),pn=(De,ke,st)=>ke.has(De)?La("Cannot add the same private member more than once"):ke instanceof WeakSet?ke.add(De):ke.set(De,st),al=(De,ke,st,Ir)=>(sl(De,ke,"write to private field"),Ir?Ir.call(De,st):ke.set(De,st),st),Ra=(De,ke,st)=>(sl(De,ke,"access private method"),st);(function(){"use strict";var gr,Jr,mn,Xn,ja,Pa;var De=document.createElement("style");De.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-vzu0vi{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-vzu0vi:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-vzu0vi:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-vzu0vi:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-vzu0vi{display:none}.control-element.error.svelte-vzu0vi{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-vzu0vi{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-vzu0vi>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-vzu0vi>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-vzu0vi>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-vzu0vi>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-vzu0vi .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-vzu0vi .range-value_left,.control-element.svelte-vzu0vi .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-vzu0vi .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-vzu0vi .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-vzu0vi .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-vzu0vi .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-vzu0vi .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-vzu0vi .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-vzu0vi .textinput>input:active::placeholder,.control-element.svelte-vzu0vi .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-vzu0vi .textinput>input:focus,.control-element.svelte-vzu0vi .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .textinput.error>input,.control-element.svelte-vzu0vi .textinput.error>input:focus,.control-element.svelte-vzu0vi .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-vzu0vi .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-vzu0vi .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-vzu0vi .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1xneg44{width:100%;border-collapse:collapse}tr.svelte-1xneg44{width:100%}th.svelte-1xneg44{border-bottom:1px solid #a0a0a0}th.svelte-1xneg44,td.svelte-1xneg44{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}.app-container.svelte-1dk0fsp{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1dk0fsp{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1dk0fsp{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1dk0fsp>div:where(.svelte-1dk0fsp){border-radius:.25rem}.app-controls.svelte-1dk0fsp>.result-stats:where(.svelte-1dk0fsp){background:#e8e8e8}.help-text.svelte-1dk0fsp{margin-top:.25rem}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp),.help-text.svelte-1dk0fsp>div:where(.svelte-1dk0fsp){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp){border-collapse:collapse}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) thead:where(.svelte-1dk0fsp) tr:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp){font-weight:700;background:#f8f4e0}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) tbody:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1dk0fsp{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1dk0fsp{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1dk0fsp{grid-template-columns:min(320px,30%) 1fr}}.info-text.svelte-3v2vv7{line-height:1.5em}.info-text.svelte-3v2vv7>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-3v2vv7>.file-name:where(.svelte-3v2vv7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-1mqkfgh{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mqkfgh{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mqkfgh{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mqkfgh>div:where(.svelte-1mqkfgh){border-radius:.25rem}.app-controls.svelte-1mqkfgh>.result-stats:where(.svelte-1mqkfgh){background:#e8e8e8}.help-text.svelte-1mqkfgh{margin-top:.25rem}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mqkfgh{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1mqkfgh{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1mqkfgh{grid-template-columns:min(320px,30%) 1fr}}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(De);var ke=typeof document<"u"?document.currentScript:null;const st=!1;var Ir=Array.isArray,Fa=Array.prototype.indexOf,$n=Array.from,qa=Object.defineProperty,ar=Object.getOwnPropertyDescriptor,il=Object.getOwnPropertyDescriptors,Ba=Object.prototype,Oa=Array.prototype,eo=Object.getPrototypeOf,cl=Object.isExtensible;function Lr(t){return typeof t=="function"}const ut=()=>{};function Va(t){return typeof(t==null?void 0:t.then)=="function"}function Da(t){return t()}function bn(t){for(var e=0;e<t.length;e++)t[e]()}const Kt=2,ul=4,wn=8,yn=16,er=32,Rr=64,_n=128,Lt=256,xn=512,St=1024,tr=2048,jr=4096,rr=8192,kn=16384,fl=32768,Fr=65536,Ya=1<<17,Ua=1<<19,dl=1<<20,to=1<<21,ir=Symbol("$state"),vl=Symbol("legacy props"),Wa=Symbol("");function hl(t){return t===this.v}function ml(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ha(t,e){return t!==e}function ro(t){return!ml(t,this.v)}function Ga(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ka(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xa(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Qa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ja(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Za(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $a(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ei(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let qr=!1,ti=!1;function ri(){qr=!0}const no=1,oo=2,gl=4,ni=8,oi=16,li=1,si=2,ai=4,ii=8,ci=16,ui=4,pl=1,fi=2,vt=Symbol(),di="http://www.w3.org/1999/xhtml";function bl(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Re=null;function En(t){Re=t}function Nt(t){return wl().get(t)}function vi(t,e){return wl().set(t,e),e}function ve(t,e=!1,r){var o=Re={p:Re,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};qr&&!e&&(Re.l={s:null,u:null,r1:[],r2:yr(!1)}),Nl(()=>{o.d=!0})}function he(t){const e=Re;if(e!==null){const c=e.e;if(c!==null){var r=je,o=Ie;e.e=null;try{for(var s=0;s<c.length;s++){var a=c[s];Rt(a.effect),kt(a.reaction),en(a.fn)}}finally{Rt(r),kt(o)}}Re=e.p,e.m=!0}return{}}function wr(){return!qr||Re!==null&&Re.l===null}function wl(t){return Re===null&&bl(),Re.c??(Re.c=new Map(hi(Re)||void 0))}function hi(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}function Ze(t,e){if(typeof t!="object"||t===null||ir in t)return t;const r=eo(t);if(r!==Ba&&r!==Oa)return t;var o=new Map,s=Ir(t),a=ne(0),c=Ie,d=u=>{var f=Ie;kt(c);var v;return v=u(),kt(f),v};return s&&o.set("length",ne(t.length)),new Proxy(t,{defineProperty(u,f,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Za();var m=o.get(f);return m===void 0?(m=d(()=>ne(v.value)),o.set(f,m)):O(m,d(()=>Ze(v.value))),!0},deleteProperty(u,f){var v=o.get(f);if(v===void 0)f in u&&o.set(f,d(()=>ne(vt)));else{if(s&&typeof f=="string"){var m=o.get("length"),h=Number(f);Number.isInteger(h)&&h<m.v&&O(m,h)}O(v,vt),yl(a)}return!0},get(u,f,v){var b;if(f===ir)return t;var m=o.get(f),h=f in u;if(m===void 0&&(!h||(b=ar(u,f))!=null&&b.writable)&&(m=d(()=>ne(Ze(h?u[f]:vt))),o.set(f,m)),m!==void 0){var g=l(m);return g===vt?void 0:g}return Reflect.get(u,f,v)},getOwnPropertyDescriptor(u,f){var v=Reflect.getOwnPropertyDescriptor(u,f);if(v&&"value"in v){var m=o.get(f);m&&(v.value=l(m))}else if(v===void 0){var h=o.get(f),g=h==null?void 0:h.v;if(h!==void 0&&g!==vt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(u,f){var g;if(f===ir)return!0;var v=o.get(f),m=v!==void 0&&v.v!==vt||Reflect.has(u,f);if(v!==void 0||je!==null&&(!m||(g=ar(u,f))!=null&&g.writable)){v===void 0&&(v=d(()=>ne(m?Ze(u[f]):vt)),o.set(f,v));var h=l(v);if(h===vt)return!1}return m},set(u,f,v,m){var N;var h=o.get(f),g=f in u;if(s&&f==="length")for(var b=v;b<h.v;b+=1){var w=o.get(b+"");w!==void 0?O(w,vt):b in u&&(w=d(()=>ne(vt)),o.set(b+"",w))}h===void 0?(!g||(N=ar(u,f))!=null&&N.writable)&&(h=d(()=>ne(void 0)),O(h,d(()=>Ze(v))),o.set(f,h)):(g=h.v!==vt,O(h,d(()=>Ze(v))));var p=Reflect.getOwnPropertyDescriptor(u,f);if(p!=null&&p.set&&p.set.call(m,v),!g){if(s&&typeof f=="string"){var y=o.get("length"),C=Number(f);Number.isInteger(C)&&C>=y.v&&O(y,C+1)}yl(a)}return!0},ownKeys(u){l(a);var f=Reflect.ownKeys(u).filter(h=>{var g=o.get(h);return g===void 0||g.v!==vt});for(var[v,m]of o)m.v!==vt&&!(v in u)&&f.push(v);return f},setPrototypeOf(){$a()}})}function yl(t,e=1){O(t,t.v+e)}const $r=new Map;function yr(t,e){var r={f:0,v:t,reactions:null,equals:hl,rv:0,wv:0};return r}function ne(t,e){const r=yr(t);return ql(r),r}function An(t,e=!1){var o;const r=yr(t);return e||(r.equals=ro),qr&&Re!==null&&Re.l!==null&&((o=Re.l).s??(o.s=[])).push(r),r}function O(t,e,r=!1){Ie!==null&&!Qt&&wr()&&(Ie.f&(Kt|yn))!==0&&!(yt!=null&&yt.includes(t))&&ei();let o=r?Ze(e):e;return Br(t,o)}function Br(t,e){if(!t.equals(e)){var r=t.v;nn?$r.set(t,e):$r.set(t,r),t.v=e,t.wv=Ol(),_l(t,tr),wr()&&je!==null&&(je.f&St)!==0&&(je.f&(er|Rr))===0&&(jt===null?Ci([t]):jt.push(t))}return e}function _l(t,e){var r=t.reactions;if(r!==null)for(var o=wr(),s=r.length,a=0;a<s;a++){var c=r[a],d=c.f;(d&tr)===0&&(!o&&c===je||(Zt(c,e),(d&(St|Lt))!==0&&((d&Kt)!==0?_l(c,jr):In(c))))}}let mi=!1;var lo,xl,kl,El;function gi(){if(lo===void 0){lo=window,xl=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;kl=ar(e,"firstChild").get,El=ar(e,"nextSibling").get,cl(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),cl(r)&&(r.__t=void 0)}}function so(t=""){return document.createTextNode(t)}function zt(t){return kl.call(t)}function Cn(t){return El.call(t)}function B(t,e){return zt(t)}function $(t,e){{var r=zt(t);return r instanceof Comment&&r.data===""?Cn(r):r}}function q(t,e=1,r=!1){let o=t;for(;e--;)o=Cn(o);return o}function pi(t){t.textContent=""}function Or(t){var e=Kt|tr,r=Ie!==null&&(Ie.f&Kt)!==0?Ie:null;return je===null||r!==null&&(r.f&Lt)!==0?e|=Lt:je.f|=dl,{ctx:Re,deps:null,effects:null,equals:hl,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??je}}function A(t){const e=Or(t);return ql(e),e}function Al(t){const e=Or(t);return e.equals=ro,e}function Cl(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Xt(e[r])}}function bi(t){for(var e=t.parent;e!==null;){if((e.f&Kt)===0)return e;e=e.parent}return null}function wi(t){var e,r=je;Rt(bi(t));try{Cl(t),e=Dl(t)}finally{Rt(r)}return e}function Ml(t){var e=wi(t),r=(ur||(t.f&Lt)!==0)&&t.deps!==null?jr:St;Zt(t,r),t.equals(e)||(t.v=e,t.wv=Ol())}function Sl(t){je===null&&Ie===null&&Xa(),Ie!==null&&(Ie.f&Lt)!==0&&je===null&&Ka(),nn&&Ga()}function yi(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Vr(t,e,r,o=!0){var s=je,a={ctx:Re,deps:null,nodes_start:null,nodes_end:null,f:t|tr,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(r)try{uo(a),a.f|=fl}catch(u){throw Xt(a),u}else e!==null&&In(a);var c=r&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(dl|_n))===0;if(!c&&o&&(s!==null&&yi(a,s),Ie!==null&&(Ie.f&Kt)!==0)){var d=Ie;(d.effects??(d.effects=[])).push(a)}return a}function Nl(t){const e=Vr(wn,null,!1);return Zt(e,St),e.teardown=t,e}function qe(t){Sl();var e=je!==null&&(je.f&er)!==0&&Re!==null&&!Re.m;if(e){var r=Re;(r.e??(r.e=[])).push({fn:t,effect:je,reaction:Ie})}else{var o=en(t);return o}}function _i(t){return Sl(),ao(t)}function xi(t){const e=Vr(Rr,t,!0);return(r={})=>new Promise(o=>{r.outro?nr(e,()=>{Xt(e),o(void 0)}):(Xt(e),o(void 0))})}function en(t){return Vr(ul,t,!1)}function ao(t){return Vr(wn,t,!0)}function ee(t,e=[],r=Or){const o=e.map(r);return cr(()=>t(...o.map(l)))}function cr(t,e=0){return Vr(wn|yn|e,t,!0)}function Vt(t,e=!0){return Vr(wn|er,t,!0,e)}function zl(t){var e=t.teardown;if(e!==null){const r=nn,o=Ie;Fl(!0),kt(null);try{e.call(null)}finally{Fl(r),kt(o)}}}function Tl(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var o=r.next;(r.f&Rr)!==0?r.parent=null:Xt(r,e),r=o}}function ki(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&er)===0&&Xt(e),e=r}}function Xt(t,e=!0){var r=!1;if((e||(t.f&Ua)!==0)&&t.nodes_start!==null){for(var o=t.nodes_start,s=t.nodes_end;o!==null;){var a=o===s?null:Cn(o);o.remove(),o=a}r=!0}Tl(t,e&&!r),Pn(t,0),Zt(t,kn);var c=t.transitions;if(c!==null)for(const u of c)u.stop();zl(t);var d=t.parent;d!==null&&d.first!==null&&Pl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Pl(t){var e=t.parent,r=t.prev,o=t.next;r!==null&&(r.next=o),o!==null&&(o.prev=r),e!==null&&(e.first===t&&(e.first=o),e.last===t&&(e.last=r))}function nr(t,e){var r=[];io(t,r,!0),Il(r,()=>{Xt(t),e&&e()})}function Il(t,e){var r=t.length;if(r>0){var o=()=>--r||e();for(var s of t)s.out(o)}else e()}function io(t,e,r){if((t.f&rr)===0){if(t.f^=rr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var o=t.first;o!==null;){var s=o.next,a=(o.f&Fr)!==0||(o.f&er)!==0;io(o,e,a?r:!1),o=s}}}function Dr(t){Ll(t,!0)}function Ll(t,e){if((t.f&rr)!==0){t.f^=rr,(t.f&St)===0&&(t.f^=St),ln(t)&&(Zt(t,tr),In(t));for(var r=t.first;r!==null;){var o=r.next,s=(r.f&Fr)!==0||(r.f&er)!==0;Ll(r,s?e:!1),r=o}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let tn=[],co=[];function Rl(){var t=tn;tn=[],bn(t)}function Ei(){var t=co;co=[],bn(t)}function rn(t){tn.length===0&&queueMicrotask(Rl),tn.push(t)}function jl(){tn.length>0&&Rl(),co.length>0&&Ei()}let Mn=!1,Sn=!1,Nn=null,_r=!1,nn=!1;function Fl(t){nn=t}let on=[],t1=[],Ie=null,Qt=!1;function kt(t){Ie=t}let je=null;function Rt(t){je=t}let yt=null;function Ai(t){yt=t}function ql(t){Ie!==null&&Ie.f&to&&(yt===null?Ai([t]):yt.push(t))}let _t=null,Tt=0,jt=null;function Ci(t){jt=t}let Bl=1,zn=0,ur=!1;function Ol(){return++Bl}function ln(t){var m;var e=t.f;if((e&tr)!==0)return!0;if((e&jr)!==0){var r=t.deps,o=(e&Lt)!==0;if(r!==null){var s,a,c=(e&xn)!==0,d=o&&je!==null&&!ur,u=r.length;if(c||d){var f=t,v=f.parent;for(s=0;s<u;s++)a=r[s],(c||!((m=a==null?void 0:a.reactions)!=null&&m.includes(f)))&&(a.reactions??(a.reactions=[])).push(f);c&&(f.f^=xn),d&&v!==null&&(v.f&Lt)===0&&(f.f^=Lt)}for(s=0;s<u;s++)if(a=r[s],ln(a)&&Ml(a),a.wv>t.wv)return!0}(!o||je!==null&&!ur)&&Zt(t,St)}return!1}function Mi(t,e){for(var r=e;r!==null;){if((r.f&_n)!==0)try{r.fn(t);return}catch{r.f^=_n}r=r.parent}throw Mn=!1,t}function Si(t){return(t.f&kn)===0&&(t.parent===null||(t.parent.f&_n)===0)}function Tn(t,e,r,o){if(Mn){if(r===null&&(Mn=!1),Si(e))throw t;return}r!==null&&(Mn=!0);{Mi(t,e);return}}function Vl(t,e,r=!0){var o=t.reactions;if(o!==null)for(var s=0;s<o.length;s++){var a=o[s];yt!=null&&yt.includes(t)||((a.f&Kt)!==0?Vl(a,e,!1):e===a&&(r?Zt(a,tr):(a.f&St)!==0&&Zt(a,jr),In(a)))}}function Dl(t){var g;var e=_t,r=Tt,o=jt,s=Ie,a=ur,c=yt,d=Re,u=Qt,f=t.f;_t=null,Tt=0,jt=null,ur=(f&Lt)!==0&&(Qt||!_r||Ie===null),Ie=(f&(er|Rr))===0?t:null,yt=null,En(t.ctx),Qt=!1,zn++,t.f|=to;try{var v=(0,t.fn)(),m=t.deps;if(_t!==null){var h;if(Pn(t,Tt),m!==null&&Tt>0)for(m.length=Tt+_t.length,h=0;h<_t.length;h++)m[Tt+h]=_t[h];else t.deps=m=_t;if(!ur)for(h=Tt;h<m.length;h++)((g=m[h]).reactions??(g.reactions=[])).push(t)}else m!==null&&Tt<m.length&&(Pn(t,Tt),m.length=Tt);if(wr()&&jt!==null&&!Qt&&m!==null&&(t.f&(Kt|jr|tr))===0)for(h=0;h<jt.length;h++)Vl(jt[h],t);return s!==null&&(zn++,jt!==null&&(o===null?o=jt:o.push(...jt))),v}finally{_t=e,Tt=r,jt=o,Ie=s,ur=a,yt=c,En(d),Qt=u,t.f^=to}}function Ni(t,e){let r=e.reactions;if(r!==null){var o=Fa.call(r,t);if(o!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[o]=r[s],r.pop())}}r===null&&(e.f&Kt)!==0&&(_t===null||!_t.includes(e))&&(Zt(e,jr),(e.f&(Lt|xn))===0&&(e.f^=xn),Cl(e),Pn(e,0))}function Pn(t,e){var r=t.deps;if(r!==null)for(var o=e;o<r.length;o++)Ni(t,r[o])}function uo(t){var e=t.f;if((e&kn)===0){Zt(t,St);var r=je,o=Re,s=_r;je=t,_r=!0;try{(e&yn)!==0?ki(t):Tl(t),zl(t);var a=Dl(t);t.teardown=typeof a=="function"?a:null,t.wv=Bl;var c=t.deps,d;st&&ti&&t.f&tr}catch(u){Tn(u,t,r,o||t.ctx)}finally{_r=s,je=r}}}function zi(){try{Qa()}catch(t){if(Nn!==null)Tn(t,Nn,null);else throw t}}function Yl(){var t=_r;try{var e=0;for(_r=!0;on.length>0;){e++>1e3&&zi();var r=on,o=r.length;on=[];for(var s=0;s<o;s++){var a=Pi(r[s]);Ti(a)}}}finally{Sn=!1,_r=t,Nn=null,$r.clear()}}function Ti(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var o=t[r];if((o.f&(kn|rr))===0)try{ln(o)&&(uo(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null?Pl(o):o.fn=null))}catch(s){Tn(s,o,null,o.ctx)}}}function In(t){Sn||(Sn=!0,queueMicrotask(Yl));for(var e=Nn=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(Rr|er))!==0){if((r&St)===0)return;e.f^=St}}on.push(e)}function Pi(t){for(var e=[],r=t;r!==null;){var o=r.f,s=(o&(er|Rr))!==0,a=s&&(o&St)!==0;if(!a&&(o&rr)===0){if((o&ul)!==0)e.push(r);else if(s)r.f^=St;else{var c=Ie;try{Ie=r,ln(r)&&uo(r)}catch(f){Tn(f,r,null,r.ctx)}finally{Ie=c}}var d=r.first;if(d!==null){r=d;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return e}function Ii(t){var e;for(jl();on.length>0;)Sn=!0,Yl(),jl();return e}function l(t){var e=t.f,r=(e&Kt)!==0;if(Ie!==null&&!Qt){if(!(yt!=null&&yt.includes(t))){var o=Ie.deps;t.rv<zn&&(t.rv=zn,_t===null&&o!==null&&o[Tt]===t?Tt++:_t===null?_t=[t]:(!ur||!_t.includes(t))&&_t.push(t))}}else if(r&&t.deps===null&&t.effects===null){var s=t,a=s.parent;a!==null&&(a.f&Lt)===0&&(s.f^=Lt)}return r&&(s=t,ln(s)&&Ml(s)),nn&&$r.has(t)?$r.get(t):t.v}function Jt(t){var e=Qt;try{return Qt=!0,t()}finally{Qt=e}}const Li=-7169;function Zt(t,e){t.f=t.f&Li|e}function Ri(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ir in t)fo(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&ir in r&&fo(r)}}}function fo(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let o in t)try{fo(t[o],e)}catch{}const r=eo(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const o=il(r);for(let s in o){const a=o[s].get;if(a)try{a.call(t)}catch{}}}}}const ji=["touchstart","touchmove"];function Fi(t){return ji.includes(t)}let Ul=!1;function qi(){Ul||(Ul=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function vo(t){var e=Ie,r=je;kt(null),Rt(null);try{return t()}finally{kt(e),Rt(r)}}function Bi(t,e,r,o=r){t.addEventListener(e,()=>vo(r));const s=t.__on_r;s?t.__on_r=()=>{s(),o(!0)}:t.__on_r=()=>o(!0),qi()}const Wl=new Set,ho=new Set;function Oi(t,e,r,o={}){function s(a){if(o.capture||sn.call(e,a),!a.cancelBubble)return vo(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?rn(()=>{e.addEventListener(t,s,o)}):e.addEventListener(t,s,o),s}function xr(t,e,r,o,s){var a={capture:o,passive:s},c=Oi(t,e,r,a);(e===document.body||e===window||e===document)&&Nl(()=>{e.removeEventListener(t,c,a)})}function $e(t){for(var e=0;e<t.length;e++)Wl.add(t[e]);for(var r of ho)r(t)}function sn(t){var C;var e=this,r=e.ownerDocument,o=t.type,s=((C=t.composedPath)==null?void 0:C.call(t))||[],a=s[0]||t.target,c=0,d=t.__root;if(d){var u=s.indexOf(d);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var f=s.indexOf(e);if(f===-1)return;u<=f&&(c=u)}if(a=s[c]||t.target,a!==e){qa(t,"currentTarget",{configurable:!0,get(){return a||r}});var v=Ie,m=je;kt(null),Rt(null);try{for(var h,g=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var w=a["__"+o];if(w!=null&&(!a.disabled||t.target===a))if(Ir(w)){var[p,...y]=w;p.apply(a,[t,...y])}else w.call(a,t)}catch(N){h?g.push(N):h=N}if(t.cancelBubble||b===e||b===null)break;a=b}if(h){for(let N of g)queueMicrotask(()=>{throw N});throw h}}finally{t.__root=e,delete t.currentTarget,kt(v),Rt(m)}}}function mo(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Yr(t,e){var r=je;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function J(t,e){var r=(e&pl)!==0,o=(e&fi)!==0,s,a=!t.startsWith("<!>");return()=>{s===void 0&&(s=mo(a?t:"<!>"+t),r||(s=zt(s)));var c=o||xl?document.importNode(s,!0):s.cloneNode(!0);if(r){var d=zt(c),u=c.lastChild;Yr(d,u)}else Yr(c,c);return c}}function ce(t,e,r="svg"){var o=!t.startsWith("<!>"),s=(e&pl)!==0,a=`<${r}>${o?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var d=mo(a),u=zt(d);if(s)for(c=document.createDocumentFragment();zt(u);)c.appendChild(zt(u));else c=zt(u)}var f=c.cloneNode(!0);if(s){var v=zt(f),m=f.lastChild;Yr(v,m)}else Yr(f,f);return f}}function be(){var t=document.createDocumentFragment(),e=document.createComment(""),r=so();return t.append(e,r),Yr(e,r),t}function T(t,e){t!==null&&t.before(e)}let go=!0;function we(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Vi(t,e){return Di(t,e)}const Ur=new Map;function Di(t,{target:e,anchor:r,props:o={},events:s,context:a,intro:c=!0}){gi();var d=new Set,u=m=>{for(var h=0;h<m.length;h++){var g=m[h];if(!d.has(g)){d.add(g);var b=Fi(g);e.addEventListener(g,sn,{passive:b});var w=Ur.get(g);w===void 0?(document.addEventListener(g,sn,{passive:b}),Ur.set(g,1)):Ur.set(g,w+1)}}};u($n(Wl)),ho.add(u);var f=void 0,v=xi(()=>{var m=r??e.appendChild(so());return Vt(()=>{if(a){ve({});var h=Re;h.c=a}s&&(o.$$events=s),go=c,f=t(m,o)||{},go=!0,a&&he()}),()=>{var b;for(var h of d){e.removeEventListener(h,sn);var g=Ur.get(h);--g===0?(document.removeEventListener(h,sn),Ur.delete(h)):Ur.set(h,g)}ho.delete(u),m!==r&&((b=m.parentNode)==null||b.removeChild(m))}});return Yi.set(f,v),f}let Yi=new WeakMap;const po=0,Ln=1,bo=2;function Hl(t,e,r,o,s){var a=t,c=wr(),d=Re,u=vt,f,v,m,h=(c?yr:An)(void 0),g=(c?yr:An)(void 0),b=!1;function w(y,C){b=!0,C&&(Rt(p),kt(p),En(d));try{y===po&&r&&(f?Dr(f):f=Vt(()=>r(a))),y===bo&&s&&(m?Dr(m):m=Vt(()=>s(a,g))),y!==po&&f&&nr(f,()=>f=null),y!==Ln&&v&&nr(v,()=>v=null),y!==bo&&m&&nr(m,()=>m=null)}finally{C&&(En(null),kt(null),Rt(null),Ii())}}var p=cr(()=>{if(u!==(u=e())){if(Va(u)){var y=u;b=!1,y.then(C=>{y===u&&(Br(h,C),w(Ln,!0))},C=>{if(y===u&&(Br(g,C),w(bo,!0),!s))throw g.v}),rn(()=>{b||w(po,!0)})}else Br(h,u),w(Ln,!1);return()=>u=vt}})}function W(t,e,[r,o]=[0,0]){var s=t,a=null,c=null,d=vt,u=r>0?Fr:0,f=!1;const v=(h,g=!0)=>{f=!0,m(g,h)},m=(h,g)=>{d!==(d=h)&&(d?(a?Dr(a):g&&(a=Vt(()=>g(s))),c&&nr(c,()=>{c=null})):(c?Dr(c):g&&(c=Vt(()=>g(s,[r+1,o]))),a&&nr(a,()=>{a=null})))};cr(()=>{f=!1,e(v),f||m(null,null)},u)}function Rn(t,e,r){var o=t,s=vt,a,c=wr()?Ha:ml;cr(()=>{c(s,s=e())&&(a&&nr(a),a=Vt(()=>r(o)))})}function Ge(t,e){return e}function Ui(t,e,r,o){for(var s=[],a=e.length,c=0;c<a;c++)io(e[c].e,s,!0);var d=a>0&&s.length===0&&r!==null;if(d){var u=r.parentNode;pi(u),u.append(r),o.clear(),fr(t,e[0].prev,e[a-1].next)}Il(s,()=>{for(var f=0;f<a;f++){var v=e[f];d||(o.delete(v.k),fr(t,v.prev,v.next)),Xt(v.e,!d)}})}function Ye(t,e,r,o,s,a=null){var c=t,d={flags:e,items:new Map,first:null},u=(e&gl)!==0;if(u){var f=t;c=f.appendChild(so())}var v=null,m=!1,h=Al(()=>{var g=r();return Ir(g)?g:g==null?[]:$n(g)});cr(()=>{var g=l(h),b=g.length;m&&b===0||(m=b===0,Wi(g,d,c,s,e,o,r),a!==null&&(b===0?v?Dr(v):v=Vt(()=>a(c)):v!==null&&nr(v,()=>{v=null})),l(h))})}function Wi(t,e,r,o,s,a,c){var U,Q,V,Z;var d=(s&ni)!==0,u=(s&(no|oo))!==0,f=t.length,v=e.items,m=e.first,h=m,g,b=null,w,p=[],y=[],C,N,_,k;if(d)for(k=0;k<f;k+=1)C=t[k],N=a(C,k),_=v.get(N),_!==void 0&&((U=_.a)==null||U.measure(),(w??(w=new Set)).add(_));for(k=0;k<f;k+=1){if(C=t[k],N=a(C,k),_=v.get(N),_===void 0){var M=h?h.e.nodes_start:r;b=Gi(M,e,b,b===null?e.first:b.next,C,N,k,o,s,c),v.set(N,b),p=[],y=[],h=b.next;continue}if(u&&Hi(_,C,k,s),(_.e.f&rr)!==0&&(Dr(_.e),d&&((Q=_.a)==null||Q.unfix(),(w??(w=new Set)).delete(_))),_!==h){if(g!==void 0&&g.has(_)){if(p.length<y.length){var E=y[0],S;b=E.prev;var I=p[0],R=p[p.length-1];for(S=0;S<p.length;S+=1)Gl(p[S],E,r);for(S=0;S<y.length;S+=1)g.delete(y[S]);fr(e,I.prev,R.next),fr(e,b,I),fr(e,R,E),h=E,b=R,k-=1,p=[],y=[]}else g.delete(_),Gl(_,h,r),fr(e,_.prev,_.next),fr(e,_,b===null?e.first:b.next),fr(e,b,_),b=_;continue}for(p=[],y=[];h!==null&&h.k!==N;)(h.e.f&rr)===0&&(g??(g=new Set)).add(h),y.push(h),h=h.next;if(h===null)continue;_=h}p.push(_),b=_,h=_.next}if(h!==null||g!==void 0){for(var F=g===void 0?[]:$n(g);h!==null;)(h.e.f&rr)===0&&F.push(h),h=h.next;var P=F.length;if(P>0){var D=(s&gl)!==0&&f===0?r:null;if(d){for(k=0;k<P;k+=1)(V=F[k].a)==null||V.measure();for(k=0;k<P;k+=1)(Z=F[k].a)==null||Z.fix()}Ui(e,F,D,v)}}d&&rn(()=>{var K;if(w!==void 0)for(_ of w)(K=_.a)==null||K.apply()}),je.first=e.first&&e.first.e,je.last=b&&b.e}function Hi(t,e,r,o){(o&no)!==0&&Br(t.v,e),(o&oo)!==0?Br(t.i,r):t.i=r}function Gi(t,e,r,o,s,a,c,d,u,f){var v=(u&no)!==0,m=(u&oi)===0,h=v?m?An(s):yr(s):s,g=(u&oo)===0?c:yr(c),b={i:g,v:h,k:a,a:null,e:null,prev:r,next:o};try{return b.e=Vt(()=>d(t,h,g,f),mi),b.e.prev=r&&r.e,b.e.next=o&&o.e,r===null?e.first=b:(r.next=b,r.e.next=b.e),o!==null&&(o.prev=b,o.e.prev=b.e),b}finally{}}function Gl(t,e,r){for(var o=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==o;){var c=Cn(a);s.before(a),a=c}}function fr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function pt(t,e,r,o,s){var a=t,c="",d;cr(()=>{c!==(c=e()??"")&&(d!==void 0&&(Xt(d),d=void 0),c!==""&&(d=Vt(()=>{var u=c+"";r&&(u=`<svg>${u}</svg>`);var f=mo(u);if((r||o)&&(f=zt(f)),Yr(zt(f),f.lastChild),r||o)for(;zt(f);)a.before(zt(f));else a.before(f)})))})}function kr(t,e,...r){var o=t,s=ut,a;cr(()=>{s!==(s=e())&&(a&&(Xt(a),a=null),a=Vt(()=>s(o,...r)))},Fr)}function wo(t,e,r){var o=t,s,a;cr(()=>{s!==(s=e())&&(a&&(nr(a),a=null),s&&(a=Vt(()=>r(o,s))))},Fr)}function Kl(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Kl(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function Ki(){for(var t,e,r=0,o="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Kl(t))&&(o&&(o+=" "),o+=e);return o}function Xi(t){return typeof t=="object"?Ki(t):t??""}const Xl=[...`
\r\f \v\uFEFF`];function Qi(t,e,r){var o=t==null?"":""+t;if(e&&(o=o?o+" "+e:e),r){for(var s in r)if(r[s])o=o?o+" "+s:s;else if(o.length)for(var a=s.length,c=0;(c=o.indexOf(s,c))>=0;){var d=c+a;(c===0||Xl.includes(o[c-1]))&&(d===o.length||Xl.includes(o[d]))?o=(c===0?"":o.substring(0,c))+o.substring(d+1):c=d}}return o===""?null:o}function Ji(t,e){return t==null?null:String(t)}function ft(t,e,r,o,s,a){var c=t.__className;if(c!==r||c===void 0){var d=Qi(r,o,a);d==null?t.removeAttribute("class"):e?t.className=d:t.setAttribute("class",d),t.__className=r}else if(a&&s!==a)for(var u in a){var f=!!a[u];(s==null||f!==!!s[u])&&t.classList.toggle(u,f)}return a}function rt(t,e,r,o){var s=t.__style;if(s!==e){var a=Ji(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return o}const Zi=Symbol("is custom element"),$i=Symbol("is html");function z(t,e,r,o){var s=ec(t);s[e]!==(s[e]=r)&&(e==="loading"&&(t[Wa]=r),r==null?t.removeAttribute(e):typeof r!="string"&&tc(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function ec(t){return t.__attributes??(t.__attributes={[Zi]:t.nodeName.includes("-"),[$i]:t.namespaceURI===di})}var Ql=new Map;function tc(t){var e=Ql.get(t.nodeName);if(e)return e;Ql.set(t.nodeName,e=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=il(o);for(var a in r)r[a].set&&e.push(a);o=eo(o)}return e}const rc=()=>performance.now(),or={tick:t=>requestAnimationFrame(t),now:()=>rc(),tasks:new Set};function Jl(){const t=or.now();or.tasks.forEach(e=>{e.c(t)||(or.tasks.delete(e),e.f())}),or.tasks.size!==0&&or.tick(Jl)}function nc(t){let e;return or.tasks.size===0&&or.tick(Jl),{promise:new Promise(r=>{or.tasks.add(e={c:t,f:r})}),abort(){or.tasks.delete(e)}}}function jn(t,e){vo(()=>{t.dispatchEvent(new CustomEvent(e))})}function oc(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Zl(t){const e={},r=t.split(";");for(const o of r){const[s,a]=o.split(":");if(!s||a===void 0)break;const c=oc(s.trim());e[c]=a.trim()}return e}const lc=t=>t;function sc(t,e,r,o){var s=(t&ui)!==0,a="both",c,d=e.inert,u=e.style.overflow,f,v;function m(){var p=Ie,y=je;kt(null),Rt(null);try{return c??(c=r()(e,(o==null?void 0:o())??{},{direction:a}))}finally{kt(p),Rt(y)}}var h={is_global:s,in(){e.inert=d,jn(e,"introstart"),f=yo(e,m(),v,1,()=>{jn(e,"introend"),f==null||f.abort(),f=c=void 0,e.style.overflow=u})},out(p){e.inert=!0,jn(e,"outrostart"),v=yo(e,m(),f,0,()=>{jn(e,"outroend"),p==null||p()})},stop:()=>{f==null||f.abort(),v==null||v.abort()}},g=je;if((g.transitions??(g.transitions=[])).push(h),go){var b=s;if(!b){for(var w=g.parent;w&&(w.f&Fr)!==0;)for(;(w=w.parent)&&(w.f&yn)===0;);b=!w||(w.f&fl)!==0}b&&en(()=>{Jt(()=>h.in())})}}function yo(t,e,r,o,s){var a=o===1;if(Lr(e)){var c,d=!1;return rn(()=>{if(!d){var p=e({direction:a?"in":"out"});c=yo(t,p,r,o,s)}}),{abort:()=>{d=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return s(),{abort:ut,deactivate:ut,reset:ut,t:()=>o};const{delay:u=0,css:f,tick:v,easing:m=lc}=e;var h=[];if(a&&r===void 0&&(v&&v(0,1),f)){var g=Zl(f(0,1));h.push(g,g)}var b=()=>1-o,w=t.animate(h,{duration:u});return w.onfinish=()=>{var p=(r==null?void 0:r.t())??1-o;r==null||r.abort();var y=o-p,C=e.duration*Math.abs(y),N=[];if(C>0){var _=!1;if(f)for(var k=Math.ceil(C/16.666666666666668),M=0;M<=k;M+=1){var E=p+y*m(M/k),S=Zl(f(E,1-E));N.push(S),_||(_=S.overflow==="hidden")}_&&(t.style.overflow="hidden"),b=()=>{var I=w.currentTime;return p+y*m(I/C)},v&&nc(()=>{if(w.playState!=="running")return!1;var I=b();return v(I,1-I),!0})}w=t.animate(N,{duration:C,fill:"forwards"}),w.onfinish=()=>{b=()=>o,v==null||v(o,1-o),s()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=ut)},deactivate:()=>{s=ut},reset:()=>{o===0&&(v==null||v(1,0))},t:()=>b()}}function _o(t,e,r=e){var o=wr();Bi(t,"input",s=>{var a=s?t.defaultValue:t.value;if(a=xo(t)?ko(a):a,r(a),o&&a!==(a=e())){var c=t.selectionStart,d=t.selectionEnd;t.value=a??"",d!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(d,t.value.length))}}),Jt(e)==null&&t.value&&r(xo(t)?ko(t.value):t.value),ao(()=>{var s=e();xo(t)&&s===ko(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function xo(t){var e=t.type;return e==="number"||e==="range"}function ko(t){return t===""?null:+t}const Qn=class Qn{constructor(e){pn(this,Xn);pn(this,gr,new WeakMap);pn(this,Jr);pn(this,mn);al(this,mn,e)}observe(e,r){var o=sr(this,gr).get(e)||new Set;return o.add(r),sr(this,gr).set(e,o),Ra(this,Xn,ja).call(this).observe(e,sr(this,mn)),()=>{var s=sr(this,gr).get(e);s.delete(r),s.size===0&&(sr(this,gr).delete(e),sr(this,Jr).unobserve(e))}}};gr=new WeakMap,Jr=new WeakMap,mn=new WeakMap,Xn=new WeakSet,ja=function(){return sr(this,Jr)??al(this,Jr,new ResizeObserver(e=>{for(var r of e){Qn.entries.set(r.target,r);for(var o of sr(this,gr).get(r.target)||[])o(r)}}))},Pr(Qn,"entries",new WeakMap);let Eo=Qn;var ac=new Eo({box:"border-box"});function $l(t,e,r){var o=ac.observe(t,()=>r(t[e]));en(()=>(Jt(()=>r(t[e])),o))}function es(t,e){return t===e||(t==null?void 0:t[ir])===e}function Wr(t={},e,r,o){return en(()=>{var s,a;return ao(()=>{s=a,a=[],Jt(()=>{t!==r(...a)&&(e(t,...a),s&&es(r(...s),t)&&e(null,...s))})}),()=>{rn(()=>{a&&es(r(...a),t)&&e(null,...a)})}}),t}function ic(t=!1){const e=Re,r=e.l.u;if(!r)return;let o=()=>Ri(e.s);if(t){let s=0,a={};const c=Or(()=>{let d=!1;const u=e.s;for(const f in u)u[f]!==a[f]&&(a[f]=u[f],d=!0);return d&&s++,s});o=()=>l(c)}r.b.length&&_i(()=>{ts(e,o),bn(r.b)}),qe(()=>{const s=Jt(()=>r.m.map(Da));return()=>{for(const a of s)typeof a=="function"&&a()}}),r.a.length&&qe(()=>{ts(e,o),bn(r.a)})}function ts(t,e){if(t.l.s)for(const r of t.l.s)l(r);e()}let Fn=!1;function cc(t){var e=Fn;try{return Fn=!1,[t(),Fn]}finally{Fn=e}}const uc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function fc(t,e,r){return new Proxy({props:t,exclude:e},uc)}const dc={get(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(Lr(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o)return o[e]}},set(t,e,r){let o=t.props.length;for(;o--;){let s=t.props[o];Lr(s)&&(s=s());const a=ar(s,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(Lr(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o){const s=ar(o,e);return s&&!s.configurable&&(s.configurable=!0),s}}},has(t,e){if(e===ir||e===vl)return!1;for(let r of t.props)if(Lr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props){Lr(r)&&(r=r());for(const o in r)e.includes(o)||e.push(o)}return e}};function Hr(...t){return new Proxy({props:t},dc)}function rs(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function j(t,e,r,o){var M;var s=(r&li)!==0,a=!qr||(r&si)!==0,c=(r&ii)!==0,d=(r&ci)!==0,u=!1,f;c?[f,u]=cc(()=>t[e]):f=t[e];var v=ir in t||vl in t,m=c&&(((M=ar(t,e))==null?void 0:M.set)??(v&&e in t&&(E=>t[e]=E)))||void 0,h=o,g=!0,b=!1,w=()=>(b=!0,g&&(g=!1,d?h=Jt(o):h=o),h);f===void 0&&o!==void 0&&(m&&a&&Ja(),f=w(),m&&m(f));var p;if(a)p=()=>{var E=t[e];return E===void 0?w():(g=!0,b=!1,E)};else{var y=(s?Or:Al)(()=>t[e]);y.f|=Ya,p=()=>{var E=l(y);return E!==void 0&&(h=void 0),E===void 0?h:E}}if((r&ai)===0)return p;if(m){var C=t.$$legacy;return function(E,S){return arguments.length>0?((!a||!S||C||u)&&m(S?p():E),E):p()}}var N=!1,_=An(f),k=Or(()=>{var E=p(),S=l(_);return N?(N=!1,S):_.v=E});return c&&l(k),s||(k.equals=ro),function(E,S){if(arguments.length>0){const I=S?l(k):a&&c?Ze(E):E;if(!k.equals(I)){if(N=!0,O(_,I),b&&h!==void 0&&(h=I),rs(k))return E;Jt(()=>l(k))}return E}return rs(k)?k.v:l(k)}}function vc(t){Re===null&&bl(),qr&&Re.l!==null?hc(Re).m.push(t):qe(()=>{const e=Jt(t);if(typeof e=="function")return e})}function hc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const mc="5";typeof window<"u"&&((Pa=window.__svelte??(window.__svelte={})).v??(Pa.v=new Set)).add(mc),ri();function ns(t){if(ze(t))return ns(t.v);const e=new Ee.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Ee(e)}function qn(t){if(ze(t))return qn(t.v);let e=t[0],r=t[0];for(let o=1;o<t.length;o++)t[o]<e&&(e=t[o]),t[o]>r&&(r=t[o]);return[e,r]}function Ao(t,e){return ze(t)?Ao(t.v,e):Math.sqrt(os(t,e))}function os(t,e){if(e===void 0&&(e=!1),ze(t))return os(t.v);const r=Bn(t);let o=0;for(let s=0;s<t.length;s++){const a=t[s]-r;o=o+a*a}return o/(e?t.length:t.length-1)}function Bn(t){return ze(t)?Bn(t.v):ls(t)/t.length}function ls(t){if(ze(t))return ls(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function ss(t){if(ze(t))return ss(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Gr(t){return ze(t)||Ut(t)?t.v[Co(t.v)-1]:t[Co(t)-1]}function Co(t){if(ze(t)||Ut(t))return Co(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]<r&&(e=o,r=t[o-1]);return e}function Er(t){return ze(t)||Ut(t)?t.v[Mo(t.v)-1]:t[Mo(t)-1]}function Mo(t){if(ze(t)||Ut(t))return Mo(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]>r&&(e=o,r=t[o-1]);return e}const So=30,gc=1e-7,pc=1e-7,as=1e-13,is=1e3,bc=100;function cs(t,e,r,o,s){o===void 0&&(o=is),r===void 0&&(r=as),s===void 0&&(s=bc);let a=r,c=o,d=(c-a)/s;for(let u=0;u<s;u++){let f,v;for(let g=0;g<s;g++){f=a+g*d,v=a+(g+1)*d;const b=e(f),w=e(v);if(b<=t&&w>=t)break}const m=(f+v)/2,h=e(m);if(Math.abs(h-t)<gc||(a=f,c=v,d=(c-a)/s,d/c<pc))return m}return(a+c)/2}function us(t,e=0,r=1){let o=Ee.zeros(t);for(let s=0;s<t;s++)o.v[s]=e+Math.random()*(r-e);return o}function fs(t,e=0,r=1){let o=Ee.zeros(t);for(let s=0;s<t;s++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();o.v[s]=a*Math.sin(c)*r+e}return o}function ds(t,e=0,r=1){if(ze(t))return t.apply(s=>ds(s,e,r));const o=1/(Math.sqrt(2)*r);return .5*(1+yc((t-e)*o))}function No(t,e=0,r=1){if(ze(t))return t.apply(D=>No(D,e,r));if(e!==0||r!==1)return No(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const o=.425,s=5,a=.180625,c=1.6,d=3.3871327179,u=5.0434271938*10,f=1.5929113202*100,v=5.910937472*10,m=1.7895169469*10,h=7.8757757664*10,g=6.71875636*10,b=1.4234372777,w=2.75681539,p=1.3067284816,y=1.7023821103*.1,C=7.370016425*.1,N=1.2021132975*.1,_=6.657905115,k=3.081226386,M=4.2868294337*.1,E=1.7337203997*.01,S=2.4197894225*.1,I=1.2258202635*.01,R=t-.5;let F;if(Math.abs(R)<=o)return F=a-R*R,R*(((v*F+f)*F+u)*F+d)/(((g*F+h)*F+m)*F+1);F=R<0?t:1-t,F=Math.sqrt(-Math.log(F));let P;return F<=s?(F=F-c,P=(((y*F+p)*F+w)*F+b)/((N*F+C)*F+1)):(F=F-s,P=((E*F+M)*F+k+_)/((I*F+S)*F+1)),R<0?-P:P}function zo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return zo(Ue(t),e,r);if(ze(t))return t.apply(o=>zo(o,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return On(t*e,e)}return e==Number.POSITIVE_INFINITY?1-On(r/t,r):e*t>r?1-Dn(r/(r+e*t),r/2,e/2):Dn(e*t/(r+e*t),e/2,r/2)}function vs(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let o=is,s=as;if(t>.9997&&r===1?(o=1e7,s=6e5,t=.9997):t>.9992&&r===1?(o=1e7,s=6e5):t>.997&&r===1?(o=1e6,s=45e3):t>.992&&r===1?(o=1e5,s=5e3):t>.97&&r===1&&(o=1e4,s=400),Array.isArray(t))return vs(Ue(t),e,r);const a=d=>zo(d,e,r);function c(d,u,f){return d===0?0:d===1?Inf:u===0?NaN:f===0?NaN:cs(d,a,s,o)}return ze(t)?t.apply(c,e,r):c(t,e,r)}function On(t,e){if(Array.isArray(t))return On(Ue(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),s=Math.sqrt(o);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const f=u/e,v=Math.pow(f,1/6)-.5*Math.pow(f,1/3)+1/3*Math.pow(f,1/2);return ds(v,r,s)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:wc(u/2,e/2)/an(e/2)}const d=e>So?a:c;return ze(t)?t.apply(d):d(t)}function Vn(t,e){if(Array.isArray(t))return Vn(Ue(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),s=Math.sqrt(o);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const f=No(u,r,s),v=Math.pow(Math.sqrt(36*f*f-30*f+13)/4+(3*f-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:cs(u,v=>On(v,e),0,So*10)}const d=e>So?a:c;return ze(t)?t.apply(d):d(t)}function Dn(t,e,r){if(Array.isArray(t))return Dn(Ue(t),e,r);if(ze(t))return t.apply(s=>Dn(s,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const o=.5-t+.5;return Pc(e,r,t,o)}function an(t){if(ze(t))return t.apply(an);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+an(1-t));t=t-1;let r=.9999999999998099;for(let s=0;s<e.length;s++)r=r+e[s]/(t+s+1);const o=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*r}function wc(t,e){let s=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/an(e+a+1);if(isNaN(c)||c<1e-18)break;s+=c}return Math.pow(t,e)*an(e)*Math.exp(-t)*s}function yc(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,o=-.284496736,s=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*t),f=1-((((c*u+a)*u+s)*u+o)*u+r)*u*Math.exp(-t*t);return e*f}function hs(t,e){const r=.564189583547756,o=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],d=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,v,m,h,g=Math.abs(e);if(g<=.5)return v=e*e,h=(((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4]+1,m=((s[0]*v+s[1])*v+s[2])*v+1,f=.5-e*(h/m)+.5,f=Math.exp(v)*f,f;if(g<=4)h=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],m=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],f=h/m;else{if(e<=-5.6)return f=2,f=Math.exp(e*e)*2,f;v=1/(e*e),h=(((d[0]*v+d[1])*v+d[2])*v+d[3])*v+d[4],m=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+1,f=(r-v*h/m)/g}return e<0&&(f=Math.exp(e*e)*2-f),f}function ms(t,e){let r=t+e-2;return r<=.25?Ft(r+1):r<=1.25?Ft(r)+vr(r):Ft(r-1)+Math.log(r*(r+1))}function Yn(t,e){const r=.0833333333333333,o=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let u,f,v,m,h,g,b,w,p,y,C,N,_,k,M;return v=Math.min(t,e),m=Math.max(t,e),g=v/m,h=g/(g+1),p=1/(g+1),N=p*p,y=p+N+1,C=p+N*y+1,_=p+N*C+1,k=p+N*_+1,M=p+N*k+1,f=1/m,b=f*f,w=((((d*M*b+c*k)*b+a*_)*b+s*C)*b+o*y)*b+r,w*=h/m,f=1/v,b=f*f,u=(((((d*b+c)*b+a)*b+s)*b+o)*b+r)/v+w,u}function Qe(t){let e,r,o,s,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],d=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],s=(u*r+d)*r+1,o=a/s,e>0?r*o/t:t*(o+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],d=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],s=(((d[4]*r+d[3])*r+d[2])*r+d[1])*r+1,o=a/s,e>0?r/t*(o-.5-.5):t*o}}}function _c(t,e,r){let o,s,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=s=0,o=0;for(let d=1;d<=r;d++)a=s,s=o,o=c*s-a+e[r-d];return(o-a)*.5}function gs(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,o=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*_c(t/.375,e,r));if(t<o)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function dr(t,e){const r=.0833333333333333,o=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let u,f,v,m,h,g,b,w,p,y,C,N,_,k;return t>e?(v=e/t,u=1/(v+1),w=v/(v+1),f=t+(e-.5)):(v=t/e,u=v/(v+1),w=1/(v+1),f=e+(t-.5)),C=w*w,p=w+C+1,y=w+C*p+1,N=w+C*y+1,_=w+C*N+1,k=w+C*_+1,m=1/(e*e),b=((((d*k*m+c*_)*m+a*N)*m+s*y)*m+o*p)*m+r,b*=u/e,h=f*vr(t/e),g=t*(Math.log(e)-1),h>g?b-g-h:b-h-g}function Ft(t){if(t<.6){const b=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*b}else{const e=.422784335098467,r=.848044614534529,o=.565221050691933,s=.156513060486551,a=.017050248402265,c=.000497958207639485,d=1.24313399877507,u=.548042109832463,f=.10155218743983,v=.00713309612391,m=.000116165475989616,h=t-.5-.5,g=(((((c*h+a)*h+s)*h+o)*h+r)*h+e)/(((((m*h+v)*h+f)*h+u)*h+d)*h+1);return h*g}}function Dt(t){const e=.418938533204673,r=.0833333333333333,o=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;if(t<=.8)return Ft(t)-Math.log(t);if(t<=2.25)return Ft(t-.5-.5);if(t<10){let v=Math.round(t-1.25),m=t,h=1;for(let g=1;g<=v;++g)m+=-1,h*=m;return Ft(m-1)+Math.log(h)}let u=1/(t*t),f=(((((d*u+c)*u+a)*u+s)*u+o)*u+r)/t;return e+f+(t-.5)*(Math.log(t)-1)}function To(t,e){const r=.918938533204673;let o=Math.min(t,e),s=Math.max(t,e);function a(c,d,u){let f=Math.round(u-1),v=1;for(let m=1;m<=f;++m)u+=-1,v*=u/(d+u);return c+Math.log(v)+(Dt(d)+(Dt(u)-ms(d,u)))}if(o<8){if(o<1)return s<8?Dt(o)+(Dt(s)-Dt(o+s)):Dt(o)+dr(o,s);let c;if(o<2)return s<=2?Dt(o)+Dt(s)-ms(o,s):s<8?(c=0,a(c,o,s)):Dt(o)+dr(o,s);if(s<=1e3){let d=Math.round(o-1);c=1;for(let u=1;u<=d;++u){o+=-1;let f=o/s;c*=f/(f+1)}return c=Math.log(c),s>=8?c+Dt(o)+dr(o,s):a(c,o,s)}else{let d=Math.round(o-1);c=1;for(let u=1;u<=d;++u)o+=-1,c*=o/(o/s+1);return log(c)-d*log(s)+(Dt(o)+dr(o,s))}}else{let c=Yn(o,s),d=o/s,u=-(o-.5)*Math.log(d/(d+1)),f=s*vr(d);return u>f?Math.log(s)*-.5+r+c-f-u:Math.log(s)*-.5+r+c-u-f}}function ps(t){return(t==0?1024:-300)*.69314718055995*.99999}function Kr(t){const e=.0566749439387324,r=.0456512608815524,o=.333333333333333,s=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,d=.354508718369557;let u,f,v,m,h;return t<-.39||t>.57?(m=t+.5+.5,t-Math.log(m)):(t<-.18?(u=t+.3,u/=.7,h=e-u*.3):t>.18?(u=t*.75-.25,h=r+u/3):(u=t,h=0),f=u/(u+2),v=f*f,m=((a*v+s)*v+o)/((d*v+c)*v+1),v*2*(1/(1-f)-f*m)+h)}function vr(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,o=-.0178874546012214,s=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let d=t/(t+2),u=d*d,f=(((o*u+r)*u+e)*u+1)/(((c*u+a)*u+s)*u+1);return d*2*f}function xc(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],s=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],d=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,f,v,m,h;if(v=Math.abs(t),v<=.5)return u=t*t,h=(((r[0]*u+r[1])*u+r[2])*u+r[3])*u+r[4]+1,m=((o[0]*u+o[1])*u+o[2])*u+1,t*(h/m);if(v<=4){h=((((((s[0]*v+s[1])*v+s[2])*v+s[3])*v+s[4])*v+s[5])*v+s[6])*v+s[7],m=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7];let b=.5-Math.exp(-t*t)*h/m+.5;return t<0?-b:b}if(v>=5.8)return t>0?1:-1;f=t*t,u=1/f,h=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],m=(((d[0]*u+d[1])*u+d[2])*u+d[3])*u+1,u=(e-h/(f*m))/v;let g=.5-Math.exp(-f)*u+.5;return t<0?-g:g}function kc(t){const e=914041914819518e-24,r=.0238082361044469,o=-.499999999085958,s=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+s)*t+o)*t+1));{let d=Math.exp(t);return t>0?d*(.5-1/d+.5):d-.5-.5}}function cn(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function Ec(t){const e=.785398163397448,r=1.4616321449683622,o=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],s=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let d,u,f,v,m,h,g,b,w,p,y,C,N;if(y=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),y>v&&(y=v),N=1e-9,b=0,t<.5){if(fabs(t)<=N){if(t==0)return 0;b=-1/t}else{if(m=-t,w=e,m<=0&&(m=-m,w=-w),m>=y)return 0;if(f=Math.round(m),m-=f,f=Math.round(m*4),m=(m-f*.25)*4,u=f/2,u+u!=f&&(m=1-m),h=e*m,d=u/2,d+d!=u&&(w=-w),u=(f+1)/2,d=u/2,d+=d,d==u){if(h==0)return 0;b=w*(cos(h)/sin(h)*4)}else b=w*(sin(h)/cos(h)*4)}t=1-t}if(t<=3){g=t,C=o[0]*t;for(let _=1;_<=5;++_)g=(g+s[_-1])*t,C=(C+o[_])*t;return g=(C+o[6])/(g+s[5]),p=t-r,g*p+b}if(t<y){m=1/(t*t),g=m,C=a[0]*m;for(let _=1;_<=3;++_)g=(g+c[_-1])*m,C=(C+a[_])*m;b=C/(g+c[3])-.5/t+b}return b+log(t)}function Ac(t,e,r,o){let s,a,c,d,u,f;if(t>o*.001){if(d=t*Math.log(r),d<Math.exparg(1))return 0;s=Math.exp(d)}else s=1;for(s*=e/t,f=o/t,u=t+1,d=r,c=d/u,u+=1,d=r*d,a=d/u,c+=a;Math.abs(r)>f;)u+=1,d=r*d,a=d/u,c+=a;return s*=t*c+1,s}function Cc(t,e,r,o){const s=.577215664901533;let a,c,d,u,f,v,m=e*r;for(f=r-m,c=e*o<=.02?Math.log(r)+Ec(e)+s+f:Math.log(m)+s+f,a=o*5*Math.abs(c),d=1,u=0,d+=1,f*=r-m/d,v=f/d,u+=v;Math.abs(v)>a;)d+=1,f*=r-m/d,v=f/d,u+=v;return-t*(c+u)}function Po(t,e,r,o){let s,a,c,d,u,f,v,m,h;if(r==0)return 0;if(v=Math.min(t,e),v>=1)f=t*Math.log(r)-To(t,e),a=Math.exp(f)/t;else if(m=Math.max(t,e),m<8)if(m<=1){if(a=Math.pow(r,t),a==0)return a;h=t+e,h>1?(u=t+e-1,f=(Qe(u)+1)/h):f=Qe(h)+1,c=(Qe(t)+1)*(Qe(e)+1)/f,a*=c*(e/h)}else{if(u=Ft(v),s=Math.round(m-1),s>=1){c=1;for(let y=1;y<=s;++y)m+=-1,c*=m/(v+m);u+=Math.log(c)}f=t*Math.log(r)-u,m+=-1,h=v+m,h>1?(u=v+m-1,d=(Qe(u)+1)/h):d=Qe(h)+1,a=Math.exp(f)*(v/t)*(Qe(m)+1)/d}else u=Ft(v)+dr(v,m),f=t*Math.log(r)-u,a=v/t*Math.exp(f);if(a==0||t<=o*.1)return a;let g=o/t,b=0,w=0,p;for(c=1,b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),w+=p;b<1e7&&Math.abs(p)>g;)b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),w+=p;return t*w>-1?a*=t*w+1:a=0,a}function Un(t,e,r,o,s,a){let c,d,u,f,v,m=t+e,h=t+1;if(s>1&&t>=1&&m>=h*1.1?(u=Math.round(Math.abs(ps(1))),d=Math.round(ps(0)),u>d&&(u=d),f=Math.exp(-u)):(u=0,f=1),c=Nc(u,t,e,r,o)/t,s==1||c==0)return c;let g=s-1,b=f;if(d=0,e>1){if(o>1e-4){let w=(e-1)*r/o-t;w>=1&&(d=w<g?Math.round(w):g)}else d=g;for(let w=0;w<d;++w)v=w,f*=(m+v)/(h+v)*r,b+=f}for(let w=d;w<g&&(v=w,f*=(m+v)/(h+v)*r,b+=f,!(f<=a*b));++w);return c*=b,c}function Mc(t,e,r,o,s,a){let c,d,u,f,v,m,h,g,b,w,p,y,C,N,_,k,M,E,S;if(!Number.isFinite(s)||(S=Sc(t,e,r,o),Number.isNaN(S)))return Number.NaN;if(S==0)return 0;for(c=s+1,b=e/t,w=1/t+1,N=o+1,u=0,f=1,m=t+1,y=0,C=1,_=1,k=c/w,v=w/c,u+=1,h=u/t,g=u*(e-u)*r,d=t/m,E=f*(f+b)*d*d*(g*r),d=(h+1)/(w+h+h),M=u+g/m+d*(c+u*N),f=h+1,m+=2,h=E*y+M*_,y=_,_=h,h=E*C+M*k,C=k,k=h,p=v,v=_/k,y/=k,C/=k,_=v,k=1;u<1e4&&(u+=1,h=u/t,g=u*(e-u)*r,d=t/m,E=f*(f+b)*d*d*(g*r),d=(h+1)/(w+h+h),M=u+g/m+d*(c+u*N),f=h+1,m+=2,h=E*y+M*_,y=_,_=h,h=E*C+M*k,C=k,k=h,p=v,v=_/k,!(Math.abs(v-p)<=a*v));)y/=k,C/=k,_=v,k=1;return S*v}function Sc(t,e,r,o){const s=.398942280401433;let a,c,d,u,f,v,m,h,g;if(r==0||o==0)return 0;if(m=Math.min(t,e),m<8){let b,w;if(r<=.375?(b=Math.log(r),w=vr(-r)):o>.375?(b=Math.log(r),w=Math.log(o)):(b=vr(-o),w=Math.log(o)),v=t*b+e*w,m>=1)return v-=To(t,e),Math.exp(v);if(h=Math.max(t,e),h>=8)return u=Ft(m)+dr(m,h),m*Math.exp(v-u);if(h<=1){let y=Math.exp(v);return y==0?0:(g=t+e,g>1?(u=t+e-1,v=(Qe(u)+1)/g):v=Qe(g)+1,c=(Qe(t)+1)*(Qe(e)+1)/v,y*(m*c)/(m/h+1))}if(u=Ft(m),a=Math.round(h-1),a>=1){c=1;for(let y=1;y<=a;++y)h+=-1,c*=h/(m+h);u=Math.log(c)+u}v-=u,h+=-1,g=m+h;let p;return g>1?(u=m+h-1,p=(Qe(u)+1)/g):p=Qe(g)+1,m*Math.exp(v)*(Qe(h)+1)/p}else{let b,w,p,y;return t<=e?(b=t/e,w=b/(b+1),p=1/(b+1),y=t-(t+e)*r):(b=e/t,w=1/(b+1),p=b/(b+1),y=(t+e)*o-e),d=-y/t,u=Math.abs(d)>.6?d-Math.log(r/w):Kr(d),d=y/e,f=Math.abs(d)<=.6?Kr(d):d-Math.log(o/p),v=Math.exp(-(t*u+e*f)),s*Math.sqrt(e*w)*v*Math.exp(-Yn(t,e))}}function Nc(t,e,r,o,s){const a=.398942280401433;let c,d,u,f,v,m,h,g;if(m=Math.min(e,r),m<8){let b,w;if(o<=.375?(b=Math.log(o),w=vr(-o)):s>.375?(b=Math.log(o),w=Math.log(s)):(b=vr(-s),w=Math.log(s)),v=e*b+r*w,m>=1)return v-=To(e,r),cn(t,v);if(h=Math.max(e,r),h>=8)return u=Ft(m)+dr(m,h),m*cn(t,v-u);if(h<=1){let y=cn(t,v);return y==0?y:(g=e+r,g>1?(u=e+r-1,v=(Qe(u)+1)/g):v=Qe(g)+1,c=(Qe(e)+1)*(Qe(r)+1)/v,y*(m*c)/(m/h+1))}u=Ft(m);let p=Math.round(h-1);if(p>=1){c=1;for(let y=1;y<=p;++y)h+=-1,c*=h/(m+h);u+=Math.log(c)}return v-=u,h+=-1,g=m+h,d=g>1?(Qe(g-1)+1)/g:Qe(g)+1,m*cn(t,v)*(Qe(h)+1)/d}else{let b,w,p,y;e>r?(b=r/e,w=1/(b+1),p=b/(b+1),y=(e+r)*s-r):(b=e/r,w=b/(b+1),p=1/(b+1),y=e-(e+r)*o),-gs(r/e);let C=-y/e;return u=Math.abs(C)>.6?C-Math.log(o/w):Kr(C),C=y/r,f=Math.abs(C)>.6?C-Math.log(s/p):Kr(C),v=cn(t,-(e*u+r*f)),a*Math.sqrt(r*w)*v*Math.exp(-Yn(e,r))}}function Io(t,e,r,o,s,a){let d=Array(30),u=Array(30),f=e-.5-.5,v=t+f*.5,m=o>.375?Math.log(r):vr(-o),h=-v*m;if(e*h==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+gs(Qe(e))+e*Math.log(h)+v*m,b=g-(dr(e,t)+e*Math.log(v)),w=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let p=w==0,y=s==0?0:Math.exp(Math.log(s)-b),C=zc(e,h,g,a),N=.25/(v*v),_=m*.25*m,k=C,M=k,E=1,S=1,I=0;for(let R=1;R<=30;++R){let F=e+I;k=(F*(F+1)*k+(h+F+1)*E)*N,I+=2,E*=_,S/=I*(I+1);let P=R-1;d[P]=S;let D=0;if(R>1){let Q=e-R;for(let V=1;V<=P;++V)D+=Q*d[V-1]*u[P-V],Q+=e}u[P]=f*S+D/R;let U=u[P]*k;if(M+=U,M<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(U)<=a*(M+y))break}return s+=p?Math.exp(b+Math.log(M)):w*M,s}function zc(t,e,r,o){const s=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-xc(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return hs(1,a)/a*s}}else if(e<1.1){let a=3,c=e,d=e/(t+3),u=o*.1/(t+1),f;for(a+=1,c*=-(e/a),f=c/(t+a),d+=f;Math.abs(f)>u;)a+=1,c*=-(e/a),f=c/(t+a),d+=f;let v=t*e*((d/6-.5/(t+2))*e+1/(t+1)),m=t*Math.log(e),h=Qe(t),g=h+1;if(e>=.25&&t<e/2.59||m>-.13394){let b=kc(m),w=((b+.5+.5)*v-b)*g-h;return w<=0?0:w*Math.exp(-r)}else return(.5-Math.exp(m)*g*(.5-v+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,d=e,u=e+(1-t),f=1,v,m;a=e*c+f*a,d=e*u+f*d,v=a/d,f+=1;let h=f-t;for(c=a+h*c,u=d+h*u,m=c/u;Math.abs(m-v)>=o*m;)a=e*c+f*a,d=e*u+f*d,v=a/d,f+=1,h=f-t,c=a+h*c,u=d+h*u,m=c/u;return m}}function Tc(t,e,r,o){const a=1.12837916709551,c=.353553390593274,d=Array(21),u=Array(21),f=Array(21),v=Array(21);let m=t*Kr(-r/t)+e*Kr(r/e),h;if(h=Math.exp(-m),h==0)return 0;let g=Math.sqrt(m),b=g/c*.5,w=m+m,p,y,C,N;t<e?(p=t/e,y=1/(p+1),C=(e-t)/e,N=1/Math.sqrt(t*(p+1))):(p=e/t,y=1/(p+1),C=(e-t)/t,N=1/Math.sqrt(e*(p+1))),d[0]=C*.6666666666666666,f[0]=d[0]*-.5,v[0]=-f[0];let _=.5/a*hs(1,g),k=c,M=_+v[0]*N*k,E=1,S=p*p,I=1,R=N,F=b,P=w;for(let U=2;U<=20;U+=2){I*=S,d[U-1]=y*2*(p*I+1)/(U+2);let Q=U+1;E+=I,d[Q-1]=C*2*E/(U+3);for(let K=U;K<=Q;++K){let Y=(K+1)*-.5;u[0]=Y*d[0];for(let re=2;re<=K;++re){let te=0;for(let X=1;X<=re-1;++X){let ie=re-X;te+=(X*Y-ie)*d[X-1]*u[ie-1]}u[re-1]=Y*d[re-1]+te/re}f[K-1]=u[K-1]/(K+1);let H=0;for(let re=1;re<=K-1;++re)H+=v[K-re-1]*f[re-1];v[K-1]=-(H+f[K-1])}_=c*F+(U-1)*_,k=c*P+U*k,F=w*F,P=w*P,R*=N;let V=v[U-1]*R*_;R*=N;let Z=v[Q-1]*R*k;if(M+=V+Z,Math.abs(V)+Math.abs(Z)<=o*M)break}let D=Math.exp(-Yn(t,e));return a*h*D*M}function Pc(t,e,r,o){let a=0,c=0;function d(p,y,C,N){const _=Po(p,y,C,1e-15);return N?.5-_+.5:_}function u(p,y,C,N){const _=Po(y,p,C,1e-15);return N?_:.5-_+.5}function f(p,y,C,N,_,k){const M=Mc(p,y,C,N,_,15000000000000002e-30);return k?.5-M+.5:M}function v(p,y,C,N,_){let k=Math.round(y);y=y-k,y===0&&(k=k-1,y=1);let M=Un(y,p,N,C,k,1e-15);return C<=.7?(M=M+Po(p,y,C,1e-15),_?.5-M+.5:M):(p<=15&&(k=20,M=M+Un(p,y,C,N,k,1e-15),p=p+k),M=Io(p,y,C,N,M,15*1e-15),_?.5-M+.5:M)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let m,h,g,b,w;if(t<=1||e<=1){if(r>.5?(w=!0,m=e,g=o,h=t,b=r):(w=!1,m=t,g=r,h=e,b=o),h<Math.min(1e-15,1e-15*m))return a=Ac(m,h,g,1e-15),w?.5-a+.5:a;if(m<Math.min(1e-15,1e-15*h)&&h*g<=1)return c=Cc(m,h,g,1e-15),w?c:.5-c+.5;if(Math.max(m,h)>1){if(h<=1)return d(m,h,g,w);if(g>=.29)return u(m,h,b,w);if(g<.1&&Math.pow(g*h,m)<=.7)return d(m,h,g,w)}else{if(m>=Math.min(.2,h)||Math.pow(g,m)<=.9)return d(m,h,g,w);if(g>=.3)return u(m,h,b,w)}let p=!1;return Math.max(m,h)>1&&h>15?c=0:(p=!0,c=Un(h,m,b,g,20,1e-15),h+=20),c=Io(h,m,b,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(p?c=Un(h-n,m,b,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Io(h,m,b,g,c,15*1e-15),a=-expm1(c),w?.5-a+.5:a):(a=.5-c+.5,w?.5-a+.5:a)}else{let p=Number.isFinite(t+e)?t>e?(t+e)*o-e:t-(t+e)*r:t*o-e*r;const y=p<0;let C,N,_,k;if(y?(p=-p,C=e,_=o,N=t,k=r):(C=t,_=r,N=e,k=o),N<40)return N*_<=.7?d(C,N,_,y):v(C,N,_,k,y);if(C>N){if(N<=100||p>N*.03)return f(C,N,_,k,p,y)}else{if(C<=100)return f(C,N,_,k,p,y);if(p>C*.03)return f(C,N,_,k,p,y)}return a=Tc(C,N,p,1e-15*100),y?.5-a+.5:a}}function bs(t){const e=t.nrows,r=t.ncols;if(e<r){const c=bs(t.subset([],Et.seq(1,e)));return{Q:c.Q,R:Rc(c.Q,t)}}let o=Yt.eye(e),s=t.t();for(let c=1;c<=r;c++)for(let d=e;d>=c+1;d--){const u=s.v.subarray((d-2)*r,d*r),f=o.v.subarray((d-2)*e,d*e),v=u.slice(),m=f.slice(),[h,g,b]=Ic(v[c-1],v[c-1+r]);for(let w=0;w<r;w++)u[w]=v[w]*h+v[w+r]*g,u[w+r]=v[w]*-g+v[w+r]*h,f[w]=m[w]*h+m[w+e]*g,f[w+e]=m[w]*-g+m[w+e]*h;for(let w=r;w<e;w++)f[w]=m[w]*h+m[w+e]*g,f[w+e]=m[w]*-g+m[w+e]*h}const a=Et.seq(1,r);return{Q:e===r?o:o.subset([],a),R:e===r?s.t():s.subset([],a).t()}}function Ic(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),d=1/c;return[d,a*d,t*c]}const r=t/e,o=Math.sqrt(1+r*r),s=1/o;return[r*s,s,e*o]}function ws(t){return typeof t=="number"}function Lc(t,e){e===void 0&&(e=t);const r=t.nrows,o=t.ncols,s=e.nrows;e.ncols;const a=r,c=s,d=o,u=new Float64Array(a*c);for(let f=0;f<d;f++){const v=t.v.subarray(f*r,(f+1)*r),m=e.v.subarray(f*s,(f+1)*s);for(let h=0;h<c;h++){const g=u.subarray(h*a,(h+1)*a);for(let b=0;b<a;b++)g[b]+=v[b]*m[h]}}return new Yt(u,a,c)}function Rc(t,e){if(e===void 0&&(e=t),!hr(t)||!hr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,o=t.ncols,s=e.nrows,a=e.ncols,c=o,d=a,u=r,f=new Float64Array(c*d);for(let v=0;v<d;v++){const m=e.v.subarray(v*s,(v+1)*s),h=f.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const b=t.v.subarray(g*r,(g+1)*r);let w=0;for(let p=0;p<u;p++)w+=b[p]*m[p];h[g]=w}}return new Yt(f,c,d)}function ys(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ee(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new Yt(t.v,e,r)}function hr(t){return t&&t.constructor===Yt}function jc(t,e,r){return new Yt(new Float64Array(t),e,r)}const xe=class xe{constructor(e,r,o){if(!ArrayBuffer.isView(e)||e.constructor!==xe.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||o===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*o)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=o}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return xe.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const o=xe.eye(e),s=xe.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],d=e-1;for(let u=0;u<e;u++)s.v[d*e+u]=o.v[d*e+u]/c;for(let u=e-2;u>=0;u--){let f=o.getcolumn(u+1);const v=a.getcolref(u+1);for(let m=u+1;m<e;m++){const h=s.getcolumn(m+1);f=f.subtract(h.mult(v[m]))}s.v.set(f.divide(v[u]).v,u*e)}return s.t()}if(this.islowertriangular()){const o=this.diag();if(ss(o)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const s=xe.eye(e),a=xe.eye(e),c=this.t(),d=0,u=c.v[0];for(let f=0;f<e;f++)a.v[d*e+f]=s.v[d*e+f]/u;for(let f=1;f<e;f++){let v=s.getcolumn(f+1);const m=c.getcolref(f+1);for(let h=0;h<f;h++){const g=a.getcolumn(h+1);v=v.subtract(g.mult(m[h]))}a.v.set(v.divide(m[f]).v,f*e)}return a.t()}const r=bs(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>xe.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>xe.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let o=0;o<e;o++)r[o]=this.getcolref(o+1)[o];return new Ee(r)}t(){const e=this.nrows,r=this.ncols,o=new xe.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let s=0;s<this.ncols;s++){const a=this.v.subarray(s*this.nrows,(s+1)*this.nrows);for(let c=0;c<this.nrows;c++)o[c*r+s]=a[c]}return new xe(o,r,e)}for(let s=0;s<this.nrows;s++){const a=o.subarray(s*r,(s+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+s]}return new xe(o,r,e)}dot(e){if(ze(e))return new xe(jo(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(hr(e))return new xe(jo(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,o){if(hr(e))return new xe(Lo(this.v,e.v,r),this.nrows,this.ncols);if(ws(e))return new xe(Ro(this.v,e,r),this.nrows,this.ncols);if(!ze(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(o===void 0&&(o=e.length===this.ncols?2:1),o===2&&e.length===this.ncols){const s=new xe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)s.set(Ro(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new xe(s,this.nrows,this.ncols)}if(o===1&&e.length===this.nrows){const s=new xe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)s.set(Lo(this.getcolref(a+1),e.v,r),a*this.nrows);return new xe(s,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e,r){if(r===void 0&&(r=2),r==2){const o=this.ncols,s=new xe.valuesConstructor(o);for(let a=0;a<o;a++)s[a]=e(this.getcolref(a+1));return new Ee(s)}if(r==1)return this.t().apply(e,2);if(r==0){const o=this.v.length,s=new xe.valuesConstructor(o);for(let a=0;a<o;a++)s[a]=e(this.v[a]);return new xe(s,this.nrows,this.ncols)}}replace(e,r,o){typeof r=="number"&&(r=[r]),r.length===0&&(r=Et.seq(1,this.nrows)),Ut(r)||(r=Wt(r)),typeof o=="number"&&(o=[o]),o.length===0&&(o=Et.seq(1,this.ncols)),Ut(o)||(o=Wt(o));const s=r.length,a=o.length;if(Gr(r)<1||Er(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Gr(o)<1||Er(o)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==s||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<o.length;c++){const d=e.getcolref(c+1),u=(o.v[c]-1)*this.nrows;for(let f=0;f<r.length;f++){const v=r.v[f];this.v[u+v-1]=d[f]}}return this}copy(){return new xe(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Ee.valuesConstructor(this.ncols);for(let o=0;o<this.ncols;o++)r[o]=this.getcolref(o+1)[e-1];return new Ee(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ee(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Wt([e])),typeof r=="number"&&(r=Wt([r])),Array.isArray(e)&&(e=e.length===0?null:Wt(e)),Array.isArray(r)&&(r=r.length===0?null:Wt(r)),e!==null&&!Ut(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Ut(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Gr(e)<1||Er(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Gr(r)<1||Er(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const d=r.length,u=this.nrows,f=new xe.valuesConstructor(u*d);for(let v=0;v<r.length;v++)f.set(this.v.slice((r.v[v]-1)*this.nrows,r.v[v]*this.nrows),v*this.nrows);return new xe(f,u,d)}if(r==null)return this.t().subset(r,e).t();const o=e.length,s=r.length,a=new xe.valuesConstructor(o*s);let c=new xe.valuesConstructor(o);for(let d=0;d<s;d++){const u=this.v.subarray((r.v[d]-1)*this.nrows,r.v[d]*this.nrows);for(let f=0;f<o;f++)c[f]=u[e.v[f]-1];a.set(c,d*o)}return new xe(a,o,s)}toString(e){function r(c,d){return" ".repeat(d-c.length)+c}e===void 0&&(e=2),this.ncols;const o=Math.round(Math.abs(Math.log10(Er(this.v))))+e+3;let s="";const a=this.t();for(let c=1;c<=a.ncols;c++)s+=Array.from(a.getcolref(c)).map(d=>r(d.toFixed(e),o)).join(" ")+`
`;return s}toCSV(e,r,o,s){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=s!=null&&s.length>0,c=o!=null&&o.length>0;if(a&&s.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&o.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const d=this.t();let u=c?o.join(e)+`
`:"";for(let f=1;f<=d.ncols;f++)u=u+(a?s[f-1]+e:"")+d.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,o,s){return ys(fs(e*r,o,s),e,r)}static rand(e,r,o,s){return ys(us(e*r,o,s),e,r)}static eye(e,r){r===void 0&&(r=e);const o=new Float64Array(e*r);for(let s=0;s<Math.min(e,r);s++)o[s*e+s]=1;return new xe(o,e,r)}static diagm(e){if(!ze(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,o=new Float64Array(r*r);for(let s=0;s<r;s++)o[s*r+s]=e.v[s];return new xe(o,r,r)}static zeros(e,r){return r===void 0&&(r=e),new xe(new Float64Array(e*r),e,r)}static ones(e,r){return xe.fill(1,e,r)}static fill(e,r,o){o===void 0&&(o=r);const s=new Float64Array(r*o);for(let a=0;a<s.length;a++)s[a]=e;return new xe(s,r,o)}static outer(e,r,o){if(Array.isArray(e)&&(e=Ue(e)),Array.isArray(r)&&(r=Ue(r)),!ze(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!ze(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const s=xe.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],d=s.getcolref(a+1);for(let u=0;u<e.length;u++)d[u]=o(e.v[u],c)}return s}static parseCSV(e,r,o,s){function a(p){return p.some(y=>Number.isNaN(Number.parseFloat(y.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let d=e.split(/\n/),u=[],f=0;const v=d[0].split(r);(o||o===void 0&&a(v))&&(u=v,f=1),d=d.filter(p=>p.trim().length>1);let m=[],h=0;s&&(h=1);const g=d.length-f,b=v.length-h;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const w=xe.zeros(b,g);for(let p=f;p<g+f;p++){const y=d[p].split(r);let C;if(s?(m[p-f]=y[0],C=y.slice(1).map(N=>Number.parseFloat(N.trim().replace(c,".")))):C=y.map(N=>Number.parseFloat(N.trim().replace(c,"."))),C.some(N=>Number.isNaN(N)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(C.length!=b)throw Error("Wrong number of values in row #"+p);w.v.set(new Float64Array(C),(p-f)*b)}return{values:w.t(),header:u,labels:m,sep:r,dec:c}}};Pr(xe,"valuesConstructor",Float64Array),Pr(xe,"TOLERANCE",Math.pow(10,-9));let Yt=xe;function ze(t){return t&&t.constructor===Ee}function Ue(t){return new Ee(new Float64Array(t))}const et=class et{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new Et.valuesConstructor(this.length);let o=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[o]=s+1,o=o+1);return new Et(r.subarray(0,o))}filter(e){const r=new et.valuesConstructor(this.length);let o=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[o]=this.v[s],o=o+1);return new et(r.subarray(0,o))}shuffle(){return new et(Es(this.v))}sort(e){return new et(As(this.v,e))}sortind(e){return new Et(Cs(this.v,e))}rep(e){return xs(this,e)}repeach(e){return ks(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=Et.seq(1,this.length)),Ut(r)||(r=Wt(r));const o=r.length;if(Gr(r)<1||Er(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==o)throw Error('Vector.replace: length of "x" does not match the indices.');for(let s=0;s<r.length;s++){const a=r.v[s];this.v[a-1]=e.v[s]}return this}subset(e){if(typeof e=="number"&&(e=Wt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Et.bool2ind(e):Wt(e)),!Ut(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=et.zeros(r);for(let s=0;s<r;s++){if(e.v[s]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[s]>this.length)throw Error("subset: index exceeds the length of the vector.");o.v[s]=this.v[e.v[s]-1]}return o}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new et(this.v.slice(e-1,r))}copy(){return new et(this.v.slice())}dot(e){return e===void 0&&(e=this),jo(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(ze(e))return new et(Lo(this.v,e.v,r));if(ws(e))return new et(Ro(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e){const r=this.v.length,o=et.zeros(r);for(let s=0;s<r;s++)o.v[s]=e(this.v[s]);return o}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),o=new et.valuesConstructor(r);let s=0;for(const a of e)typeof a=="number"?(o[s]=a,s+=1):(o.set(ze(a)?a.v:new et.valuesConstructor(a),s),s+=typeof a=="number"?1:a.length);return new et(o)}static seq(e,r,o){return _s(e,r,o,et)}static randn(e,r,o){return fs(e,r,o)}static rand(e,r,o){return us(e,r,o)}static zeros(e){return new et(new et.valuesConstructor(e))}static ones(e){return et.fill(1,e)}static fill(e,r){const o=new et.valuesConstructor(r);for(let s=0;s<o.length;s++)o[s]=e;return new et(o)}};Pr(et,"valuesConstructor",Float64Array);let Ee=et;function Ut(t){return t.constructor===Et}function Wt(t){return new Et(new Int32Array(t))}const it=class it{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new it.valuesConstructor(this.length);let o=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[o]=s+1,o=o+1);return new it(r.subarray(0,o))}filter(e){const r=new it.valuesConstructor(this.length);let o=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[o]=this.v[s],o=o+1);return new it(r.subarray(0,o))}shuffle(){return new it(Es(this.v))}sort(e){return new it(As(this.v,e))}sortind(e){return new it(Cs(this.v,e))}rep(e){return xs(this,e)}repeach(e){return ks(this,e)}subset(e){if(typeof e=="number"&&(e=Wt([e])),Array.isArray(e)&&(e=Wt(e)),!Ut(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=new it.valuesConstructor(r);for(let s=0;s<r;s++){if(e.v[s]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[s]>this.length)throw Error("subset: index exceeds the length of the vector.");o[s]=this.v[e.v[s]-1]}return new it(o)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new it(this.v.slice(e-1,r))}static seq(e,r,o){return _s(e,r,o,it)}static ones(e){return it.fill(1,e)}static fill(e,r){const o=new it.valuesConstructor(r);for(let s=0;s<o.length;s++)o[s]=e;return new it(o)}static bool2ind(e){let r=0;const o=new it.valuesConstructor(e.length);for(let s=0;s<e.length;s++)e[s]&&(o[r]=s+1,r=r+1);return new it(o.subarray(0,r))}};Pr(it,"valuesConstructor",Int32Array);let Et=it;function _s(t,e,r,o){r===void 0&&(r=t<=e?1:-1);const s=Math.floor((e-t)/r)+1;if(s<1)throw Error("seq: wrong combination of parameters.");const a=new o.valuesConstructor(s);for(let c=0;c<s;c++)a[c]=t+c*r;return new o(a)}function xs(t,e){const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let s=1;s<=e;s++)for(let a=0;a<t.length;a++)o[(s-1)*t.length+a]=t.v[a];return new t.constructor(o)}function ks(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let s=0;s<t.length;s++)for(let a=0;a<e;a++)o[s*e+a]=t.v[s];return new t.constructor(o)}function Lo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const o=new t.constructor(t.length);for(let s=0;s<t.length;s++)o[s]=r(t[s],e[s]);return o}function Ro(t,e,r){const o=new t.constructor(t.length);for(let s=0;s<t.length;s++)o[s]=r(t[s],e);return o}function jo(t,e,r,o,s,a){if(o!==s)throw Error("_dot: matrix dimensions do not much.");const c=r,d=a,u=o,f=new t.constructor(c*d);for(let v=0;v<d;v++){const m=e.subarray(v*s,(v+1)*s),h=f.subarray(v*c,(v+1)*c);for(let g=0;g<u;g++){const b=m[g],w=t.subarray(g*r,(g+1)*r);for(let p=0;p<c;p++)h[p]+=w[p]*b}}return f}function Es(t){let e=t.slice(),r=e.length,o,s;for(;r;)s=Math.floor(Math.random()*r--),o=e[r],e[r]=e[s],e[s]=o;return e}function As(t,e=!1){return e?t.slice().sort((r,o)=>o-r):t.slice().sort((r,o)=>r-o)}function Cs(t,e=!1){const r=Et.seq(1,t.length).v;return e?r.sort((o,s)=>t[s-1]-t[o-1]):r.sort((o,s)=>t[o-1]-t[s-1])}function Fc(t,e,r){return 5*t*e+e+4*r*e}function qc(t,e){return 2+2*t+t*e+17*e}function Pt(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const o=t.ncols,s=t.ncomp;let a,c;switch(e){case"mX":a=2,c=o;break;case"sX":a=2+o,c=o;break;case"loadings":case"xloadings":a=2+2*o+(r-1)*o,c=o;break;case"P":a=2+2*o,c=r*o;break;case"eigenvals":case"xeigenvals":a=2+2*o+o*s,c=s;break;case"cq0":a=2+2*o+o*s+s,c=s;break;case"cNq":a=2+2*o+o*s+2*s,c=s;break;case"rq0":a=2+2*o+o*s+3*s,c=s;break;case"rNq":a=2+2*o+o*s+4*s,c=s;break;case"ch0":a=2+2*o+o*s+5*s,c=s;break;case"cNh":a=2+2*o+o*s+6*s,c=s;break;case"rh0":a=2+2*o+o*s+7*s,c=s;break;case"rNh":a=2+2*o+o*s+8*s,c=s;break;case"cr0":a=2+2*o+o*s+9*s,c=s;break;case"cNr":a=2+2*o+o*s+10*s,c=s;break;case"rr0":a=2+2*o+o*s+11*s,c=s;break;case"rNr":a=2+2*o+o*s+12*s,c=s;break;case"cg0":a=2+2*o+o*s+13*s,c=s;break;case"cNg":a=2+2*o+o*s+14*s,c=s;break;case"rg0":a=2+2*o+o*s+15*s,c=s;break;case"rNg":a=2+2*o+o*s+16*s,c=s;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function un(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const o=t.ncols,s=t.nrows,a=t.ncomp;let c,d;switch(e){case"scores":case"xscores":c=(r-1)*s,d=s;break;case"hdist":c=s*a+(r-1)*s,d=s;break;case"qdist":c=2*s*a+(r-1)*s,d=s;break;case"xcumexpvar":case"cumexpvar":c=3*s*a,d=a;break;case"fdistc":c=3*s*a+a+(r-1)*s,d=s;break;case"fdistr":c=4*s*a+a+(r-1)*s,d=s;break;case"gdist":c=5*s*a+a+(r-1)*o,d=o;break;case"rdist":c=5*s*a+a+o*a+(r-1)*o,d=o;break;case"idistc":c=5*s*a+a+2*o*a+(r-1)*o,d=o;break;case"idistr":c=5*s*a+a+3*o*a+(r-1)*o,d=o;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+d)}function Fo(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let o=0;o<t.length;o++){const s=t[o];if(s<e||s>r)return!1}return!0}function Bc(t,e,r,o,s,a,c){if(!hr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const d=a&&Array.isArray(a)?a.length:0;if(!Fo(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!Fo(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const f=e.nrows-d,v=e.ncols-u;if(f<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(o===void 0&&(o=!0),s===void 0&&(s=!1),r===void 0&&(r=Math.min(e.nrows-d-1,e.ncols-u)),r<1||r>Math.min(f-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);let h=null;if(d>0){const N=new Int32Array(a);h=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,h/N.BYTES_PER_ELEMENT)}let g=null;if(u>0){const N=new Int32Array(c);g=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,g/N.BYTES_PER_ELEMENT)}const b=qc(v,r),w=Float64Array,p=t._malloc(b*w.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[m,e.nrows,e.ncols,r,o,s,p,h,d,g,u])!==1)throw new Error("pca_fit: PCA failed.");const C=t.HEAPF64.slice(p/w.BYTES_PER_ELEMENT,p/w.BYTES_PER_ELEMENT+b);return t._free(m),t._free(p),h&&t._free(h),g&&t._free(g),{class:["pcamodel"],v:C,ncomp:r,nrows:f,ncols:v,exclvars:c,center:o,scale:s}}function Oc(t,e,r,o){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!hr(r))throw new Error("pca_predict: X must be a matrix.");o||(o=[]);const s=o&&Array.isArray(o)?o.length:0;if(!Fo(o,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=r.nrows-s;r.ncols===e.ncols&&(a=0);const d=r.ncols-a;if(c<1)throw new Error("pca_predict: X must have at least 1 row.");if(d!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const u=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,u/r.v.BYTES_PER_ELEMENT);let f=null;if(s>0){const S=new Int32Array(o);f=t._malloc(S.length*S.BYTES_PER_ELEMENT),t.HEAP32.set(S,f/S.BYTES_PER_ELEMENT)}let v=null;if(a>0){const S=new Int32Array(e.exclvars);v=t._malloc(S.length*S.BYTES_PER_ELEMENT),t.HEAP32.set(S,v/S.BYTES_PER_ELEMENT)}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const h=Fc(r.nrows-s,e.ncomp,r.ncols-a),g=Float64Array,b=t._malloc(h*g.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[u,r.nrows,r.ncols,m,b,f,s,v,a])!==1)throw new Error("pca_predict: PCA prediction failed.");const p=t.HEAPF64.slice(b/g.BYTES_PER_ELEMENT,b/g.BYTES_PER_ELEMENT+h);t._free(u),t._free(m),t._free(b),f&&t._free(f),v&&t._free(v);const y={class:["pcares"],v:p,ncomp:e.ncomp,nrows:c,ncols:d,outliers:o,exclvars:e.exclvars,center:e.center,scale:e.scale},C=new Array(e.ncomp),N=new Array(e.ncomp),_=new Array(e.ncomp),k=new Array(e.ncomp),M=new Array(e.ncomp),E=un(y,"xcumexpvar");M[0]=1,k[0]=E[0],_[0]=1-E[0],C[0]=E[0],N[0]=1-E[0];for(let S=1;S<e.ncomp;S++)M[S]=S+1,k[S]=E[S],_[S]=1-E[S],C[S]=E[S]-E[S-1],N[S]=1-C[S];return y.stat={components:M,resvar:N,expvar:C,cumexpvar:k,cumresvar:_},y}function Vc(t,e){let r,o,s;if(e.length>0){const a=t.values.nrows,c=t.objindices,d=a-e.length;r=Array(d),o=Array(d),s=Array(d);let u=0;for(let f=0;f<a;f++)e.includes(f)||(r[u]=c[f],o[u]=t.classes[f],s[u]=t.objlabels[f],u=u+1)}else r=t.objindices,s=t.objlabels,o=t.classes;return[r,s,o]}function Ms(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Ss(t,e,r,o){const[s,a,c]=Vc(r,o),d=Oc(t,e,r.values,o);d.hash=Ms(),d.objindices=s,d.objlabels=a,d.classes=c,d.classNames=r.classNames,d.varlabels=r.varlabels,d.eigenvals=Pt(e,"eigenvals"),d.cNh=Pt(e,"cNh"),d.cNq=Pt(e,"cNq"),d.ch0=Pt(e,"ch0"),d.cq0=Pt(e,"cq0"),d.rNh=Pt(e,"rNh"),d.rNq=Pt(e,"rNq"),d.rh0=Pt(e,"rh0"),d.rq0=Pt(e,"rq0");const u=e.nrows;return d.T2lim=2*(u-1)/(u-2)*vs(.95,2,u-2),d}function Dc(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function fn(t){return t.some(e=>Number.isNaN(e))}function Ar(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ns(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Yc(t,e,r,o,s,a,c,d=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let v=Ns(t);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");v=v.filter(V=>V.replaceAll(e,"").trim().length>0);const m=v[0].split(e);if(m.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,g;const b=r!=="no";(b||b===void 0&&fn(firstRow))&&(g=m,h=1);const w=v.length-h;if(w<1)throw new Error("Data file should contain at least 1 row with values.");let p,y,C,N=Array(w);o?(p=b?Ar(g[0]):"",C=Array(w),y=1):(p="",C=[],y=0);let _,k=[],M;s?(_=b?Ar(g[y]):"",M=Array(w),y=y+1):(_="",M=[]);const E=m.length-y;if(E<1)throw new Error("Data file should contain at least 1 column with values.");const S=Yt.zeros(E,w);for(let V=h;V<w+h;V++){const Z=V-h;N[Z]=Z;let K=v[V].split(e);if(o&&(C[Z]=K[0],K.shift()),s){const H=K[0];M[Z]=H,K.shift(),(k.length===0||k.indexOf(H)<0)&&k.push(H)}const Y=f==="."?K.map(H=>Number.parseFloat(H.trim())):K.map(H=>Number.parseFloat(H.trim().replace(f,".")));if(Y.some(H=>Number.isNaN(H)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(Y.length!=E)throw new Error("Wrong number of values in row #"+V);S.v.set(new Float64Array(Y),(V-h)*E)}if(!o||C.length!==w){C=Array(w);for(let V=0;V<w;V++)C[V]="O"+(V+1)}C=C.map(V=>Ar(V)),M=M.map(V=>Ar(V)),k=k.map(V=>Ar(V));let I,R=Array(E),F=Array(E);if(g&&g.length===E+y){I=g.map(V=>Ar(V)).slice(y);for(let V=0;V<E;V++)R[V]=V,F[V]=V+1}else{I=Array(E);for(let V=0;V<E;V++)R[V]=V,I[V]="V"+(V+1),F[V]=V+1}let P;if(r==="values"){if(P=f==="."?I.map(V=>Number.parseFloat(V.trim())):I.map(V=>Number.parseFloat(V.trim().replace(f,"."))),P.some(V=>Number.isNaN(V)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else P=F;Array.isArray(P)||(P=[]),a||(a=""),c||(c=""),a=P.length>0&&a.length>0?a:"Variables",c=P.length>0&&c.length>0?c:"";const D=a+(c.length>0?", "+c:""),U=P[1]<P[0];return{values:S.t(),header:r,hasLabels:o,hasClassNames:s,labelsVarname:p,classLabelsVarname:_,objlabels:C,objindices:N,varlabels:I,varvalues:P,varindices:R,varrev:U,classes:M,responses:null,classNames:k,sep:e,dec:f,varvaluesName:a,varvaluesUnits:c,varAxisTitle:D}}function Uc(t){if(fn(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let o=2;o<e;o++){let s=[];for(let f=1;f<t.length;f++)s.push(t[f][o]);const a=t[0][o],c=Bn(s),d=Ao(s),u=Math.abs((a-c)/d);r.push(u)}return r.every(o=>o>5)}function Wc(t){const e=",",r=t[0].split(e),o=t[1].split(e),s=r.length,a=o.length,c=";",d=t[0].split(c),u=t[1].split(c),f=d.length,v=u.length;let m,h;if(s>1&&a>1&&s===a&&s>f)h=e,m=s;else if(f>1&&v>1&&f===v)h=c,m=a;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",m]}function Hc(t){const e=Ns(t),r=e.length;if(r<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,s,a]=Wc(e),c=Math.min(a,5),d=Math.min(r,5);let u=e.slice(0,d).map(E=>E.split(o).slice(0,c));u=u.map(E=>E.map(S=>Ar(S)));const f=u.map(E=>Dc(E.slice(),s));for(let E=1;E<d;E++)if(fn(f[E].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const v=Uc(f);let m=0;const h=v?1:0,g=h+1,b=u[h][0],w=u[g][0],p=f[h][0],y=f[g][0],C=f[h][1],N=f[g][1];let _=!1,k=!1;if(Number.isNaN(p)&&Number.isNaN(y)&&b!==w?(_=!0,m=m+1):Number.isNaN(C)&&Number.isNaN(N)&&b!==w&&(_=!0,k=!0,m=m+2),!k){const E=_?1:0,S=f[h][E],I=f[g][E];k=fn([S,I]),m=m+k}let M="no";if(v){m>0?u[0].slice(m):u[0];const E=m>0?f[0].slice(m):f[0];M=fn(E)?"labels":"values"}return[o,_,k,M]}function qo(t,e){return hr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:ze(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function zs(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return jc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Ue(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Bo(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${o}${s}${a}${c}`}var Gc=J('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function qt(t,e){let r=j(e,"text",3,"button");var o=Gc();o.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var s=B(o);ee(()=>we(s,r())),T(t,o)}$e(["click"]);var Kc=J('<button tabindex="0"></button>');function Ts(t,e){var r=Kc();r.__click=function(...o){var s;(s=e.onclick)==null||s.apply(this,o)},ee(()=>{z(r,"title",e.title),z(r,"aria-label",e.title),z(r,"alt",e.title),ft(r,1,`button ${e.className??""}`,"svelte-bx9fh5")}),T(t,r)}$e(["click"]);function dn(t,e){let r=j(e,"title",3,"Reset");Ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function Xc(t,e){let r=j(e,"title",3,"Undo");Ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function $t(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var Qc=J('<span class="label svelte-vzu0vi"> </span>'),Jc=J("<div><!> <!></div>");function Se(t,e){let r=j(e,"label",3,null),o=j(e,"name",3,""),s=j(e,"status",3,""),a=j(e,"colors",3,""),c=j(e,"labelWidth",3,12);var d=Jc(),u=B(d);{var f=m=>{var h=Qc(),g=B(h);ee(()=>{rt(h,`flex-basis:${c()??""}ch;`),we(g,r())}),T(m,h)};W(u,m=>{r()&&m(f)})}var v=q(u,2);kr(v,()=>e.children??ut),ee(()=>{ft(d,1,`control-element ${o()??""} ${s()??""}`,"svelte-vzu0vi"),rt(d,a())}),T(t,d)}const Ps=(t,e,r,o)=>{const s=e(t);s<0||s>1||O(r,s*100>l(o)-5&&s*100<l(o)+5,!0)},Is=(t,e,r,o,s,a)=>{O(e,!1);const c=r(t);c<0||c>1||(o(s(c)),a()&&a()(o()))},Ls=(t,e,r,o,s,a)=>{if(!l(e))return;const c=r(t);c<0||c>1||(o(s(c)),a()&&a()(o()))},Zc=(t,e,r,o,s,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r()),s()&&s()(e());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r()),s()&&s()(e());return}};var $c=J('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function eu(t,e){ve(e,!0);let r=j(e,"min",7,0),o=j(e,"max",3,100),s=j(e,"value",31,()=>Ze(r())),a=j(e,"decNum",3,1),c=j(e,"step",19,()=>+((o()-r())/100).toFixed(4)),d=j(e,"onchange",3,null);qe(()=>{s()<r()&&(s(r()),d()&&d()(s())),s()>o()&&(s(o()),d()&&d()(s())),r()>o()&&r(o())});let u=ne(void 0),f=ne(void 0),v=ne(!1);const m=M=>{const E=r()+M*(o()-r());return+(Math.round(E/c())*c()).toFixed(4)},h=M=>{const E=l(u).getBoundingClientRect(),S=l(f).getBoundingClientRect(),I=E.x,R=S.x+S.width;return(M.clientX-I)/(R-I)},g=M=>{O(v,!1)},b=M=>{let E=s()+c()*M.deltaY*.5;E<r()&&(E=r()),E>o()&&(E=o()),s(+(Math.round(E/c())*c()).toFixed(4)),M.preventDefault(),d()&&d()(s())},w=A(()=>r()===o()?100:(s()-r())/(o()-r())*100);var p=$c();p.__keydown=[Zc,s,c,r,d,o],p.__mousemove=[Ls,v,h,s,m,d],p.__mousedown=[Ps,h,v,w],p.__mouseup=[Is,v,h,s,m,d],p.__touchmove=[Ls,v,h,s,m,d],p.__touchstart=[Ps,h,v,w],p.__touchend=[Is,v,h,s,m,d];var y=B(p);let C;var N=B(y);let _;var k=B(N);Wr(y,M=>O(u,M),()=>l(u)),Wr(p,M=>O(f,M),()=>l(f)),ee((M,E,S)=>{z(p,"aria-valuenow",s()),z(p,"aria-valuemin",r()),z(p,"aria-valuemax",o()),C=ft(y,1,"range-slider svelte-vhx0r0",null,C,M),rt(y,`width:${l(w)??""}%`),_=ft(N,1,"range-value svelte-vhx0r0",null,_,E),we(k,S)},[()=>({"range-slider_right":l(w)<50}),()=>({"range-value_right":l(w)<50}),()=>s().toFixed(a())]),xr("mousewheel",p,b),xr("mouseleave",p,g),xr("touchcancel",p,g),T(t,p),he()}$e(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Rs=(t,e,r,o,s)=>{const a=e(t);a<0||a>1||O(r,a>l(o)&&a<l(s)+l(o),!0)},js=(t,e,r,o,s)=>{O(e,!1);const a=r(t);if(a<0||a>1)return;const c=o(a);s()!==c&&s(c)},Fs=(t,e,r,o,s)=>{if(!l(e))return;const a=r(t);if(a<0||a>1)return;const c=o(a);c!=s()&&s(c)},tu=(t,e,r,o,s)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>s()?s():e()+r());return}};var ru=J('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function mr(t,e){ve(e,!0);let r=j(e,"min",3,0),o=j(e,"max",3,10),s=j(e,"value",31,()=>Ze(r())),a=j(e,"step",3,1);s()<r()&&(console.error('The "value" is outside of the provided range.'),s(r())),s()>o()&&(console.error('The "value" is outside of the provided range.'),s(o())),r()>o()&&console.error("The min and max values must be distinct.");let c=ne(void 0),d=ne(void 0),u=ne(!1);const f=A(()=>r()===o()?0:(s()-r())/(o()-r()+1)),v=A(()=>a()/(o()-r()+1)),m=A(()=>o()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*l(v)}%)`:"background: #f0f0f0"),h=M=>{if(M<0||M>1)return s();let E=s();return M<l(f)&&l(f)>0&&(E=s()-Math.ceil((l(f)-M)/l(v))),M>l(f)+l(v)&&l(f)+l(v)<1&&(E=s()+Math.ceil((M-(l(f)+l(v)))/l(v))),E<r()&&(E=r()),E>o()&&(E=o()),E},g=M=>{const E=l(d).getBoundingClientRect(),S=E.x,I=E.x+E.width;return(M.clientX-S)/(I-S)},b=M=>{O(u,!1)},w=M=>{let E=Math.round(s()+M.deltaY*.5*a());E<r()&&(E=r()),E>o()&&(E=o()),s(E),M.preventDefault()};var p=ru();p.__keydown=[tu,s,a,r,o],p.__mousemove=[Fs,u,g,h,s],p.__mousedown=[Rs,g,u,f,v],p.__mouseup=[js,u,g,h,s],p.__touchmove=[Fs,u,g,h,s],p.__touchstart=[Rs,g,u,f,v],p.__touchend=[js,u,g,h,s];var y=B(p);let C;var N=B(y);let _;var k=B(N);Wr(y,M=>O(c,M),()=>l(c)),Wr(p,M=>O(d,M),()=>l(d)),ee((M,E,S)=>{z(p,"aria-valuenow",s()),z(p,"aria-valuemin",r()),z(p,"aria-valuemax",o()),rt(p,l(m)),C=ft(y,1,"range-slider svelte-xdlm7u",null,C,M),rt(y,`width: max(2px, ${l(v)*100}%);left:${l(f)*100}%;`),_=ft(N,1,"range-value svelte-xdlm7u",null,_,E),we(k,S)},[()=>({"range-slider_left":l(v)<.1&&l(f)<.5,"range-slider_right":l(v)<.1&&l(f)>=.5}),()=>({"range-value_right":l(v)<.1&&l(f)>.5,"range-value_left":l(v)<.1&&l(f)<=.5}),()=>s().toFixed(0)]),xr("mousewheel",p,w),xr("mouseleave",p,b),xr("touchcancel",p,b),T(t,p),he()}$e(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const nu=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e.options.findIndex(s=>s===r());o>0&&r(e.options[o-1]);return}if(t.key==="ArrowRight"){const o=e.options.findIndex(s=>s===r());o<e.options.length-1&&r(e.options[o+1]);return}};var ou=(t,e,r)=>e(r),lu=J('<button tabindex="-1"><!></button>'),su=J('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function ht(t,e){ve(e,!0);let r=j(e,"value",31,()=>Ze(e.options[0])),o=j(e,"className",3,"");var s=su(),a=$(s);a.__keydown=[nu,e,r],Ye(a,20,()=>e.options,d=>d,(d,u)=>{var f=lu();f.__click=[ou,r,u];let v;var m=B(f);pt(m,()=>u,!1,!1),ee((h,g)=>v=ft(f,1,`option option_${h??""}`,"svelte-1i17tox",v,g),[()=>u.toString().replace(".","_"),()=>({selected:u==r()})]),T(d,f)});var c=q(a,2);ee(()=>ft(a,1,`selector ${o()??""}`,"svelte-1i17tox")),_o(c,r),T(t,s),he()}$e(["keydown","click"]);function Bt(t,e){ve(e,!0);let r=j(e,"options",19,()=>["no","yes"]),o=j(e,"value",15,!1),s=ne(!0);const a=A(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());qe(()=>O(s,o()?r()[1]:r()[0],!0)),qe(()=>o(l(s)===r()[1]));var c=be(),d=$(c);{var u=f=>{ht(f,{get options(){return l(a)},get value(){return l(s)},set value(v){O(s,v,!0)}})};W(d,f=>{l(a)&&f(u)})}T(t,c),he()}var au=J('<div tabindex="0" role="radiogroup"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function qs(t,e){ve(e,!0);let r=j(e,"file",15),o=j(e,"message",3,"Select CSV file with dataset"),s=j(e,"acceptType",3,".csv"),a;function c(p){a&&a.files.length>0?r(a.files[0]):r(null)}function d(p){(p.type==="click"||p.type==="keydown"&&(p.code==="Space"||p.code==="Enter"))&&a.click()}function u(p){a.value=null,r(null)}var f=au(),v=$(f);v.__keydown=d,v.__click=d;let m;var h=B(v),g=q(h);g.__change=c,Wr(g,p=>a=p,()=>a);var b=q(v,2);{var w=p=>{dn(p,{onclick:u})};W(b,p=>{r()&&p(w)})}ee(p=>{m=ft(v,1,"file-selector svelte-1k0x7uv",null,m,p),we(h,`${(r()?r().name:o())??""} `),z(g,"accept",s())},[()=>({selected:r()})]),T(t,f),he()}$e(["keydown","click","change"]);function iu(t,e,r,o){e()&&O(r,e()(o()),!0)}var cu=J('<div class="error-message svelte-1qtiwcs"> </div>'),uu=J('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function Bs(t,e){ve(e,!0);let r=j(e,"value",15,""),o=j(e,"className",3,""),s=j(e,"placeholder",3,""),a=j(e,"maxLength",3,25),c=j(e,"validator",3,null),d=ne("");var u=uu();let f;var v=B(u);v.__input=[iu,c,d,r];var m=q(v,2);{var h=g=>{var b=cu(),w=B(b);ee(()=>we(w,l(d))),T(g,b)};W(m,g=>{l(d)&&l(d).length>0&&g(h)})}ee(g=>{f=ft(u,1,`textinput ${o()??""}`,"svelte-1qtiwcs",f,g),z(v,"placeholder",s()),z(v,"maxlength",a())},[()=>({error:l(d)&&l(d).length>0})]),_o(v,r),T(t,u),he()}$e(["input"]);var fu=J('<div class="spinner svelte-n48urb"></div>');function Os(t){var e=fu();T(t,e)}const du=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e().findIndex(s=>s===r());o>0&&r(e()[o-1]);return}if(t.key==="ArrowRight"){const o=e().findIndex(s=>s===r());o<e().length-1&&r(e()[o+1]);return}};var vu=(t,e,r)=>e(r),hu=J('<button tabindex="-1"><!></button>'),mu=J('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an">',1);function Wn(t,e){ve(e,!0);let r=j(e,"options",19,()=>["p","l","b","h"]),o=j(e,"value",31,()=>Ze(r()[0]));const s='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar"};var d=mu(),u=$(d);u.__keydown=[du,r,o],Ye(u,20,r,v=>v,(v,m)=>{var h=hu();h.__click=[vu,o,m];let g;var b=B(h);pt(b,()=>s+a[m]+"</svg",!1,!1),ee(w=>{g=ft(h,1,"option svelte-yf64an",null,g,w),z(h,"title",c[m])},[()=>({selected:m==o()})]),T(v,h)});var f=q(u,2);_o(f,o),T(t,d),he()}$e(["keydown","click"]),$e(["keydown","click"]);var gu=J("<h2> </h2>"),pu=J("<!> <!>",1),bu=J('<div class="widget"><!></div>');function wu(t,e){ve(e,!0);let r=j(e,"title",3,""),o=j(e,"value",15),s=j(e,"labelWidth",3,13);function a(f){const v={};for(const m of Object.keys(f))v[m]=f[m].default;return v}qe(()=>{!o()&&e.options&&o(a(e.options))});var c=bu(),d=B(c);{var u=f=>{var v=pu(),m=$(v);{var h=b=>{Se(b,{children:(w,p)=>{var y=gu(),C=B(y);ee(()=>we(C,r())),T(w,y)},$$slots:{default:!0}})};W(m,b=>{r()&&b(h)})}var g=q(m,2);Ye(g,17,()=>Object.keys(e.options),Ge,(b,w)=>{var p=be();const y=A(()=>e.options[l(w)]);var C=$(p);{var N=_=>{Se(_,{get name(){return l(y).name},get label(){return l(y).label},get labelWidth(){return s()},children:(k,M)=>{var E=be(),S=$(E);wo(S,()=>l(y).el,(I,R)=>{R(I,Hr(()=>l(y).props,{get value(){return o()[l(w)]},set value(F){o(o()[l(w)]=F,!0)}}))}),T(k,E)},$$slots:{default:!0}})};W(C,_=>{l(y).hidden||_(N)})}T(b,p)}),T(f,v)};W(d,f=>{o()&&f(u)})}T(t,c),he()}var yu=J('<span style="font-weight:bold"> </span><br>',1),_u=J('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <span class="file-size svelte-gdjwex"> </span></p> <!>',1);function xu(t,e){ve(e,!0);let r=j(e,"title",3,"");var o=be(),s=$(o);{var a=c=>{Se(c,{children:(d,u)=>{var f=_u(),v=$(f),m=B(v);{var h=C=>{var N=yu(),_=$(N),k=B(_);ee(()=>we(k,r())),T(C,N)};W(m,C=>{r()&&r()!==""&&C(h)})}var g=q(m,4),b=B(g),w=q(g,5),p=B(w),y=q(v,2);dn(y,{get onclick(){return e.reset}}),ee(()=>{z(g,"title",e.dataset.fileName),we(b,e.dataset.fileName),we(p,`${e.dataset.values.nrows??""} × ${e.dataset.values.ncols??""}`)}),T(d,f)},$$slots:{default:!0}})};W(s,c=>{e.dataset&&c(a)})}T(t,o),he()}var ku=J("<!> <!>",1),Eu=J("<!> <!> <!> <!> <!> <!>",1),Au=J("<!> <!>",1),Cu=J("<p> </p>"),Mu=J("<!> <p> </p>",1),Su=J("<p> </p>"),Nu=J("<!> <!> <!>",1);function Vs(t,e){ve(e,!0);let r=j(e,"model",3,null),o=j(e,"outliers",19,()=>[]),s=j(e,"className",3,"Class"),a=j(e,"classMandatory",3,!1),c=j(e,"classUnique",3,!1),d=j(e,"title",3,""),u=j(e,"dataset",15),f=j(e,"resobj",15);const v=[",",";"],m=A(()=>r()?["no","yes"]:["no","labels","values"]);let h=ne(void 0),g=ne(""),b=ne(""),w=ne(","),p=ne("no"),y=ne(!1),C=ne(!1),N=ne(null),_=ne("neutral"),k=ne("");function M(Y,H,re){O(N,e.WASM().then(te=>{f(Ss(te,Y,H,re))}).catch(te=>{console.error(te),f(null),O(_,"error"),O(k,te,!0)}),!0)}function E(Y,H){if(!Y||Y.size<10)return;const te=Y.slice(0,1e5),X=new FileReader;X.onload=()=>{const ie=X.result;!ie||ie.length<0||((de=>(O(w,de[0],!0),O(y,de[1],!0),O(C,de[2],!0),O(p,de[3],!0)))(Hc(ie)),O(C,a()||l(C),!0),H&&l(p)!=="no"&&O(p,"yes"))},X.onerror=function(ie){csvString=null,O(_,"error"),O(k,ie,!0),console.error("Error reading CSV file.",ie)},X.readAsText(te)}function S(Y){try{const H=Yc(Y,l(w),l(p)==="yes"?"labels":l(p),l(y),l(C),l(g),l(b));if(H.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(r()&&H.values.ncols!==r().ncols+r().exclvars.length)throw new Error("Dataset has different number of columns than the training set.");if(H.classNames.length>H.values.nrows/2)throw new Error("Dataset has too many unique "+s().toLowerCase()+" labels ("+H.classNames.length+"), check your CSV file.");if(a()&&H.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&H.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");H.fileName=l(h).name.replace(/\.[^/.]+$/,""),r()&&(H.varrev=r().varrev,H.header=r().header,H.varlabels=r().varlabels,H.varvalues=r().varvalues,H.varvaluesName=r().varvaluesName,H.varvaluesUnits=r().varvaluesUnits),u(H),O(k,""),O(_,"success")}catch(H){console.error(H),u(null),O(_,"error"),O(k,H,!0)}}function I(Y){const H=new FileReader;H.onload=()=>{S(H.result)},H.readAsText(l(h))}function R(){O(h,""),u(null),f(null),O(g,""),O(b,""),O(_,"neutral"),O(k,"")}qe(()=>{l(h)===null?R():(E(l(h),r()),O(_,"neutral"),O(k,""))}),qe(()=>{l(w)&&(O(_,"neutral"),O(k,""))}),qe(()=>{if(u()&&r()&&!f()&&!l(k))try{f(M(r(),u(),o())),O(k,""),O(_,"success")}catch(Y){console.error(Y),u(null),f(null),O(_,"error"),O(k,Y,!0)}});var F=Nu(),P=$(F);{var D=Y=>{var H=Au(),re=$(H);Rn(re,()=>l(h)===void 0,ie=>{Se(ie,{children:(de,_e)=>{qs(de,{id:"dataFile",message:"Select CSV file with dataset",get file(){return l(h)},set file(me){O(h,me,!0)}})},$$slots:{default:!0}})});var te=q(re,2);{var X=ie=>{var de=Eu(),_e=$(de);Se(_e,{label:"Delimiter",children:(fe,ye)=>{ht(fe,{id:"sep",options:v,get value(){return l(w)},set value(ge){O(w,ge,!0)}})},$$slots:{default:!0}});var me=q(_e,2);Se(me,{label:"Row labels",children:(fe,ye)=>{Bt(fe,{id:"hasLabels",options:["no","yes"],get value(){return l(y)},set value(ge){O(y,ge,!0)}})},$$slots:{default:!0}});var Ae=q(me,2);{var Me=fe=>{Se(fe,{get label(){return`${s()??""} labels`},children:(ye,ge)=>{Bt(ye,{id:"hasLabels",options:["no","yes"],get value(){return l(C)},set value(tt){O(C,tt,!0)}})},$$slots:{default:!0}})};W(Ae,fe=>{a()||fe(Me)})}var le=q(Ae,2);Se(le,{label:"Header",children:(fe,ye)=>{ht(fe,{id:"header",get options(){return l(m)},get value(){return l(p)},set value(ge){O(p,ge,!0)}})},$$slots:{default:!0}});var ae=q(le,2);{var oe=fe=>{var ye=ku(),ge=$(ye);Se(ge,{label:"Header name",children:(bt,mt)=>{Bs(bt,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return l(g)},set value(Be){O(g,Be,!0)}})},$$slots:{default:!0}});var tt=q(ge,2);Se(tt,{label:"Header units",children:(bt,mt)=>{Bs(bt,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return l(b)},set value(Be){O(b,Be,!0)}})},$$slots:{default:!0}}),T(fe,ye)};W(ae,fe=>{l(p)==="values"&&fe(oe)})}var Ce=q(ae,2);Se(Ce,{label:" ",children:(fe,ye)=>{qt(fe,{text:"Load",onclick:I})},$$slots:{default:!0}}),T(ie,de)};W(te,ie=>{l(h)&&ie(X)})}T(Y,H)},U=Y=>{var H=be(),re=$(H);{var te=X=>{var ie=be(),de=$(ie);Hl(de,()=>l(N),_e=>{Se(_e,{children:(me,Ae)=>{var Me=Mu(),le=$(Me);Os(le);var ae=q(le,2),oe=B(ae);ee(()=>we(oe,r()?"Loading data and apply model...":"Loading data...")),T(me,Me)},$$slots:{default:!0}})},void 0,(_e,me)=>{Se(_e,{status:"error",children:(Ae,Me)=>{var le=Cu(),ae=B(le);ee(()=>we(ae,l(me))),T(Ae,le)},$$slots:{default:!0}})}),T(X,ie)};W(re,X=>{l(N)&&X(te)})}T(Y,H)};W(P,Y=>{u()?Y(U,!1):Y(D)})}var Q=q(P,2);{var V=Y=>{xu(Y,{get dataset(){return u()},reset:R,get title(){return d()}})};W(Q,Y=>{u()&&Y(V)})}var Z=q(Q,2);{var K=Y=>{Se(Y,{status:"error",children:(H,re)=>{var te=Su(),X=B(te);ee(()=>we(X,l(k))),T(H,te)},$$slots:{default:!0}})};W(Z,Y=>{(l(_)==="error"||l(k))&&Y(K)})}T(t,F),he()}var zu=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td></tr>'),Tu=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td></tr>'),Pu=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td></tr>'),Iu=J('<table class="svelte-1xneg44"><thead><tr class="svelte-1xneg44"><th class="svelte-1xneg44">PC</th><th class="svelte-1xneg44">Expvar</th><th class="svelte-1xneg44">Cumexpvar</th><th class="svelte-1xneg44">Eigenvals</th></tr></thead><tbody><!><!><!></tbody></table>');function Ds(t,e){ve(e,!0);const r=16,o=A(()=>e.resobj?e.resobj.stat.cumexpvar:null),s=A(()=>e.resobj?e.resobj.stat.expvar:null),a=A(()=>e.resobj?e.resobj.eigenvals.map(f=>f*(e.resobj.nrows-1)):null);var c=be(),d=$(c);{var u=f=>{var v=Iu(),m=q(B(v)),h=B(m);Ye(h,17,()=>e.resobj.stat.components.filter(y=>y<r),Ge,(y,C)=>{var N=zu(),_=B(N),k=B(_),M=q(_),E=B(M),S=q(M),I=B(S),R=q(S),F=B(R);ee((P,D,U)=>{we(k,l(C)),we(E,P),we(I,D),we(F,U)},[()=>(l(s)[l(C)-1]*100).toFixed(2),()=>(l(o)[l(C)-1]*100).toFixed(2),()=>l(a)[l(C)-1].toFixed(2)]),T(y,N)});var g=q(h);{var b=y=>{var C=Tu();T(y,C)};W(g,y=>{e.resobj.ncomp>r&&y(b)})}var w=q(g);{var p=y=>{var C=Pu(),N=B(C),_=B(N),k=q(N),M=B(k),E=q(k),S=B(E),I=q(E),R=B(I);ee((F,P,D)=>{we(_,e.resobj.ncomp),we(M,F),we(S,P),we(R,D)},[()=>((l(o)[e.resobj.ncomp-1]-l(o)[e.resobj.ncomp-2])*100).toFixed(2),()=>(l(o)[e.resobj.ncomp-1]*100).toFixed(2),()=>l(a)[e.resobj.ncomp-1].toFixed(2)]),T(y,C)};W(w,y=>{e.resobj.ncomp>=r&&y(p)})}T(f,v)};W(d,f=>{e.resobj&&f(u)})}T(t,c),he()}var Lu=J('<span class="item svelte-1ggez3e"> </span>'),Ru=J('<p class="outliers svelte-1ggez3e"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function Ys(t,e){ve(e,!0);var r=be(),o=$(r);{var s=a=>{Se(a,{children:(c,d)=>{var u=Ru(),f=$(u),v=q(B(f),2);Ye(v,17,()=>e.outliers,Ge,(b,w)=>{var p=Lu(),y=B(p);ee(()=>we(y,e.dataset.objlabels[l(w)])),T(b,p)});var m=q(f,2);{var h=b=>{Xc(b,{get onclick(){return e.undoOutliers}})};W(m,b=>{e.outliers.length>1&&b(h)})}var g=q(m,2);dn(g,{get onclick(){return e.resetOutliers}}),T(c,u)},$$slots:{default:!0}})};W(o,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(s)})}T(t,r),he()}const ju={small:30,medium:40,large:50,xlarge:60},Fu={small:5,medium:8,large:12,xlarge:15},qu={small:6,medium:10,large:14,xlarge:18},Oo={small:4,medium:6,large:8,xlarge:10},Bu={small:12,medium:15,large:19,xlarge:21},Vo={small:11,medium:15,large:17,xlarge:19},vn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Hn=["●","◼","▲","▼","⬥","＋","✳","✕"],Ou=.8,Us=.5,Vu={small:5,medium:8,large:12,xlarge:15},At={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Ws(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function Hs(t,e){if(t!=null&&(Array.isArray(t)&&(t=Ue(t)),!(!ze(t)||t.length<1)))return t.apply(r=>Go((r-e[1])*e[0]+e[2])).v}function nt(t,e){return Hs(t,e.coords)}function Do(t,e){return Hs(t,e.objects)}function Gs(t,e){if(t!=null&&(Array.isArray(t)&&(t=Ue(t)),!(!ze(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function Ks(t,e){return Gs(t,e.coords)}function Xs(t,e){return Gs(t,e.objects)}function Yo(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Cr(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Uo(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Cr(Math.abs(Gr(ns(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Cr(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let o=Math.ceil(-Cr(Math.log10(e)));return o<=2?[0,Array.from(t).map(s=>s.toFixed(o))]:(r=o-2,o=2,Cr(Math.abs(Er(t)))<=10?[-r,Array.from(t).map(s=>(s*Math.pow(10,r)).toFixed(o))]:[-r,Array.from(t).map(s=>(s/Math.pow(10,r)).toString())])}function xt(t,e,r){return Array.isArray(t)&&(t=Ue(t)),ze(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Wo(t,e,r,o){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const s=r.coords,a=o.coords;let c="";for(let d=0;d<t.length;d++){const u=Go((t.v[d]-s[1])*s[0]+s[2]),f=Go((e.v[d]-a[1])*a[0]+a[2]);c+=u+","+f+" "}return c}function Qs(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Gn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Js(t,e){if(Array.isArray(t)&&(t=Ue(t)),!ze(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const o=e[0]<e[1]?e[0]:e[1],s=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=o&c<=s);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function Ho(t,e,r,o,s,a){s==null&&(s=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const d=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*d,f=Math.floor(Math.log10(u)),v=1/Math.pow(10,f-1),m=Math.round(u*v)/v;let h=Du(m/r);s&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let g=Math.ceil((c[0]+d)/h)*h,b=Math.floor((c[1]-d)/h)*h;Math.abs(c[0]-g)<h/10&&(g=g+h),Math.abs(c[1]-b)<h/10&&(b=b-h),r=Math.ceil(Cr((b-g)/h))+1,t=Ee.zeros(r);for(let w=0;w<r;w++)t.v[w]=g+h*w;if(Math.abs(h)<1){const w=Math.pow(10,1+Math.round(-Math.log10(h)));t=t.apply(p=>Math.round((p+Number.EPSILON)*w)/w)}return t.filter(w=>w>=c[0]&w<=c[1])}function Du(t,e){const r=Math.floor(Math.log10(t)),o=t/Math.pow(10,r);let s;return o<=1?s=1:o<=2?s=2:o<=5?s=5:s=10,s*Math.pow(10,r)}function Go(t){return Math.round(t*10)/10}function Yu(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function Zs(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Uu(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Wu(t){let e=-1,r=Uu();for(let o=0;o<t.length;o++)e=r[(e^t[o])&255]^e>>>8;return e^-1}function Hu(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=Wu(r),s=new Uint8Array(4);s[0]=o>>>24,s[1]=o>>>16,s[2]=o>>>8,s[3]=o&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(s,50),c}function Gu(t,e){const r=t.split(","),o=r[0],s=r[1],a=33/3*4,c=s.substring(0,a),d=s.substring(a),u=atob(c),f=new Uint8Array(u.length);for(let h=0;h<f.length;h++)f[h]=u.charCodeAt(h);const v=Hu(f,e),m=btoa(String.fromCharCode(...v));return[o,",",m,d].join("")}function Ku(t,e,r,o,s){if(r||(r=10),o||(o=10),s||(s=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(o<1||o>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(s<50||s>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*s,c=o/2.54*s;setTimeout(()=>{const d=t.clientHeight,u=t.clientWidth;let f=Math.max(a/u,c/d),v=1;f<1&&(v=f,f=1);const m=document.createElement("canvas"),h=m.getContext("2d");m.width=u*(v<1?v:f),m.height=d*(v<1?v:f),t.setAttribute("width",u*f),t.setAttribute("height",d*f),h.fillStyle="white",h.fillRect(0,0,m.width,m.height),h.scale(f,f);const g=new XMLSerializer().serializeToString(t),b=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),w=URL.createObjectURL(b),p=new Image;p.onload=function(){v<0&&(p.width=p.width*v,p.height=p.height*v),h.drawImage(p,0,0,m.width,m.height);const y=m.toDataURL("image/png"),C=Gu(y,s),N=document.createElement("a");N.href=C,N.download=`${e}.png`,N.click()},p.src=w},20)}function Xu(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,o=t.clientWidth;t.setAttribute("width",o+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${o} ${r}`);const s=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(s),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function Qu(t,e,r,o){const s=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Ju(e,r,o)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=s},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=s},500)}).catch(a=>console.error(a))}async function Ju(t,e,r){const o=t.clientHeight,s=t.clientWidth,a=Math.max(e/s,r/o),c=document.createElement("canvas"),d=c.getContext("2d");return c.width=s*a,c.height=o*a,d.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((f,v)=>{const m=new XMLSerializer().serializeToString(t),h=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,b=g.createObjectURL(h),w=new Image;w.onload=function(){d.drawImage(w,0,0,c.width,c.height),g.revokeObjectURL(b),c.toBlob(function(p){p?f(p):v(new Error("Failed to create blob"))},"image/png")},w.onerror=function(p){v(p)},w.src=b})}function $s(t,e){t>16&&(t=16);const r=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?r[t-1].map(o=>o+e):r[t-1]}function Zu(t,e,r,o,s){let a=s.ticks,c=s.tickLabels,d=0;const u=Ho(a,t,Fu[r.x],!0,s.whole),f=u.length,v=Xs([Oo[r.plot]],o)[0],m=Ee.fill(e[0],f),h=m.add(v),g=Ee.fill(e[1],f);if(c||(a?(d=0,c=a.v.map(S=>Cr(S).toString())):[d,c]=Uo(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[u,m],[u,g]],w=[[Ue([t[0]]),Ue([e[0]])],[Ue([t[1]]),Ue([e[0]])]],p=[[u,h],[u,m]],y=(t[1]-t[0])*.01,C=[[null,null],[[t[1]-(d>9?1:0)*y],[m.v[f-1]]]],N=Yo(d),_=c.length,k=Math.abs(t[1]>t[0]?t[1]-u.v[_-1]:t[1]-u.v[0]),M=Math.abs(t[1]-t[0]),E=Math.abs(u.v[1]-u.v[0]);if(N.length>0&&k<M*.1&&k<E*.5){const S=t[1]>t[0]?_-1:0;c[S]=" "}return{grid:b,axisLine:w,tickCoords:p,tfCoords:C,ticks:a,tickLabels:c,tickFactor:d,tfLabel:N}}function $u(t,e,r,o,s){let a=s.ticks,c=s.tickLabels,d=0;const u=Ho(s.ticks,e,qu[r.y],!0,s.whole),f=u.length,v=Xs([Oo[r.plot]],o)[0],m=Ee.fill(t[0],f),h=m.add(v),g=Ee.fill(t[1],f);if(c||(a?(d=0,c=a.v.map(E=>Cr(E).toString())):[d,c]=Uo(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[m,u],[g,u]],w=[[Ue([t[0]]),Ue([e[0]])],[Ue([t[0]]),Ue([e[1]])]],p=[[m,u],[h,u]],y=[[[],[]],[[h.v[f-1]+(Math.abs(d)>9?3:2)*v],[e[1]]]],C=Yo(d),N=c.length,_=Math.abs(e[1]>e[0]?e[1]-u.v[N-1]:e[1]-u.v[0]),k=Math.abs(e[1]-e[0]),M=Math.abs(u.v[1]-u.v[0]);if(C.length>0&&_<k*.1&&_<M*.5){const E=e[1]>e[0]?N-1:0;c[E]=" "}return{grid:b,axisLine:w,tickCoords:p,tfCoords:y,ticks:a,tickLabels:c,tickFactor:d,tfLabel:C}}function ef(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=ze(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let o,s;if(t.labels?(o=t.labels,s=0):[s,o]=Uo(e),!(o.length===e.length-1||o.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=o.length===r.length;return{colmap:r,breaks:e,labels:o,isCentered:a,labelsFactor:s,fontSize:t.fontSize,labelColor:t.labelColor}}function tf(t,e,r,o){const s=t.colmap.length,a=e*Ou,c=a/s,d=r[1]+(e-a)*.5,u=Vu[o.y],f=r[2]+u*Us,v=f+u*(1+Us),m=t.isCentered?c/2:0;return{start:d,top:f,height:u,width:c,dxl:m,ltop:v}}function Mr(t,e,r){if(!t||!e||!r||typeof r!="function")return;const o=t.target;if(o.tagName===e){const s=Array.prototype.indexOf.call(o.parentNode.children,o);if(s<0)return;r(s),t.stopPropagation()}}function rf(t,e){const o=document.createElement("canvas").getContext("2d");return o.font=e,o.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function nf(t,e){const r="Arial",o=e/8,s=e*1.5,a=Array(t.length),c=Array(t.length);let d=0,u=0,f=0;for(let m=0;m<t.length;m++){const h=rf("  "+t[m].label+"  ",e+"px "+r);f=h>f?h:f;const g=e*t[m].labelHeight+2*o;a[m]=g,c[m]=d,d=d+g,u=u+g}const v=s+2*o+f;return[c,a,s,o,u,v]}function of(t,e,r,o,s){const[a,c,d,u,f,v]=nf(t.items,o*t.fontSize),m=t.position.includes("left")?e[0]+s:t.position.includes("right")?e[1]-v-s:(e[1]+e[0]-v)*.5,h=t.position.includes("top")?r[1]+s:t.position.includes("bottom")?r[0]-f-s:(r[1]+r[0]-f)*.5;return{lgl:m,lgt:h,lgw:v,lgh:f,ely:a,elh:c,elw:d,elp:u}}function Gn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let o=0,s="";for(;o<t.length;){const a=t[o];if((a==="^"||a==="_")&&o<t.length-1){const c=a==="^";if(o++,t[o]==="("){let d=o+1;for(;d<t.length&&t[d]!==")";)d++;const u=t.slice(o+1,d);s+=c?e(u):r(u),o=d+1}else if(t[o]==="-"||t[o]==="–"){const d=t.slice(o,o+2);s+=c?e(d):r(d),o=o+2}else s+=c?e(t[o]):r(t[o]),o++}else s+=a,o++}return s}var lf=ce('<line vector-effect="non-scaling-stroke"></line>'),sf=ce("<g></g>");function Ko(t,e){ve(e,!0);let r=j(e,"lineCoords",19,()=>[]),o=j(e,"lineColor",19,()=>At.DARKGRAY),s=j(e,"lineType",3,1),a=j(e,"lineWidth",3,1),c=j(e,"className",3,"");const d=Nt("axes");let u=A(()=>nt(r()[0][0],d.tX())),f=A(()=>nt(r()[1][0],d.tX())),v=A(()=>nt(r()[0][1],d.tY())),m=A(()=>nt(r()[1][1],d.tY())),h=A(()=>`stroke:${o()};stroke-width: ${a()}px;stroke-dasharray:${vn[d.scales().plot][s()-1]}`);var g=be(),b=$(g);{var w=p=>{var y=sf();Ye(y,21,()=>l(u),Ge,(C,N,_)=>{var k=lf();ee(()=>{z(k,"x1",l(u)[_]),z(k,"x2",l(f)[_]),z(k,"y1",l(v)[_]),z(k,"y2",l(m)[_]),rt(k,l(h))}),T(C,k)}),ee(()=>ft(y,0,Xi(c()))),T(p,y)};W(b,p=>{l(u)&&l(v)&&l(f)&&p(w)})}T(t,g),he()}var af=ce('<text text-anchor="middle"><!></text>'),cf=ce("<text><!></text>"),uf=ce("<text><!></text>"),ff=ce('<g class="tick-labels"><!></g>');function ea(t,e){ve(e,!0);let r=j(e,"pos",3,1),o=j(e,"las",3,1),s=A(()=>["middle","middle","start","middle","end"][r()]),a=A(()=>`fill:${e.textColor};`);const c=Nt("axes");let d=A(()=>nt(e.tickCoords[1][0],c.tX())),u=A(()=>nt(e.tickCoords[1][1],c.tY())),f=A(()=>Vo[c.scales().plot]),v=A(()=>[0,0,l(f),0,-l(f)][r()]),m=A(()=>[0,l(f),0,-l(f),0][r()]);var h=ff(),g=B(h);{var b=p=>{var y=be(),C=$(y);Ye(C,17,()=>l(d),Ge,(N,_,k)=>{var M=af();z(M,"data-id",k),z(M,"dx",0);var E=B(M);pt(E,()=>e.tickLabels[k],!0,!1),ee(()=>{z(M,"x",l(d)[k]),z(M,"y",l(u)[k]),z(M,"dy",l(v)*1.25),z(M,"transform",`rotate(-90, ${l(d)[k]}, ${l(u)[k]})`)}),T(N,M)}),T(p,y)},w=(p,y)=>{{var C=_=>{var k=be(),M=$(k);Ye(M,17,()=>l(d),Ge,(E,S,I)=>{var R=cf();z(R,"data-id",I),z(R,"dy",0),z(R,"text-anchor","end");var F=B(R);pt(F,()=>e.tickLabels[I],!0,!1),ee(()=>{z(R,"x",l(d)[I]),z(R,"y",l(u)[I]),z(R,"dx",-l(m)/2),z(R,"transform",`rotate(-90, ${l(d)[I]}, ${l(u)[I]})`)}),T(E,R)}),T(_,k)},N=_=>{var k=be(),M=$(k);Ye(M,17,()=>l(d),Ge,(E,S,I)=>{var R=uf();z(R,"data-id",I);var F=B(R);pt(F,()=>e.tickLabels[I],!0,!1),ee(()=>{z(R,"x",l(d)[I]),z(R,"y",l(u)[I]),z(R,"dx",l(v)),z(R,"dy",l(m)),z(R,"text-anchor",l(s))}),T(E,R)}),T(_,k)};W(p,_=>{o()===2&&r()===1?_(C):_(N,!1)},y)}};W(g,p=>{o()===2&&r()===4?p(b):p(w,!1)})}ee(()=>rt(h,l(a))),T(t,h),he()}const df=(t,e=ut,r=ut)=>{var o=wf();A(()=>r().height*1.25);const s=A(()=>e().colmap.length);var a=$(o);Ye(a,17,()=>e().colmap,Ge,(v,m,h)=>{var g=gf();const b=A(()=>r().start+h*r().width);var w=$(g),p=q(w);z(p,"dy",0);var y=B(p);pt(y,()=>e().labels[h],!0,!1),ee(()=>{z(w,"x",l(b)),z(w,"y",r().top),z(w,"width",r().width),z(w,"height",r().height),z(w,"fill",l(m)),z(p,"x",l(b)),z(p,"y",r().ltop),z(p,"dx",r().dxl),z(p,"fill",e().labelColor),z(p,"font-size",e().fontSize+"em")}),T(v,g)});var c=q(a);{var d=v=>{var m=pf();const h=A(()=>r().start+l(s)*r().width);z(m,"dx",0),z(m,"dy",0);var g=B(m);pt(g,()=>e().labels[l(s)],!0,!1),ee(()=>{z(m,"x",l(h)),z(m,"y",r().ltop),z(m,"fill",e().labelColor),z(m,"font-size",`${e().fontSize??""}em`)}),T(v,m)};W(c,v=>{e().isCentered||v(d)})}var u=q(c);{var f=v=>{var m=bf();const h=A(()=>r().start+l(s)*r().width);var g=B(m);pt(g,()=>Yo(e().labelsFactor),!0,!1),ee(()=>{z(m,"x",l(h)),z(m,"y",r().ltop),z(m,"fill",e().labelColor),z(m,"font-size",`${e().fontSize??""}em`)}),T(v,m)};W(u,v=>{e().labelsFactor!==0&&v(f)})}T(t,o)};function ta(t,e,r){e(t,r())}function ra(t,e,r){e(t,r())}function na(t,e,r){e(t,r())}function Kn(t,e,r){e(t,r())}async function oa(t,e,r,o){Qu(t.target,l(e),r(),o())}function la(t,e,r){Xu(l(e),r())}function sa(t,e,r,o,s,a){Ku(l(e),r(),o(),s(),a())}var vf=ce('<text fill="crimson" text-anchor="middle"> </text>'),hf=ce('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),mf=ce("<!><!><!><!><!>",1),gf=ce('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),pf=ce('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),bf=ce('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),wf=ce("<!><!><!>",1),yf=ce("<line></line>"),_f=ce('<text dominant-baseline="middle" text-anchor="middle"> </text>'),xf=ce('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),kf=ce('<svg><rect height="100%" width="100%"></rect><!></svg>'),Ef=ce('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Af=ce('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Cf=ce('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Mf=ce('<g class="plot-labels"><!><!><!></g>'),Sf=ce('<g class="axis x-axis"><!></g>'),Nf=ce('<g class="axis y-axis"><!></g>'),zf=ce('<rect fill="transparent" id="axes-box"></rect>'),Tf=ce('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Pf=ce('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),If=ce('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Lf=ce('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Rf=J('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),jf=J('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Ff=J(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function qf(t,e){ve(e,!0);const r=(pe,Te=ut,Ne=ut)=>{var ot=be(),wt=$(ot);{var Ht=Mt=>{var Ve=be(),Pe=$(Ve);{var dt=lt=>{var Xe=vf(),Ot=B(Xe);ee(()=>{z(Xe,"x",l(ie)[0]-10),z(Xe,"y",l(te)),z(Xe,"transform",`rotate(-90, ${l(ie)[0]-10}, ${l(te)})`),we(Ot,Ne().error)}),T(lt,Xe)},ct=lt=>{var Xe=hf(),Ot=B(Xe);ee(()=>{z(Xe,"x",l(X)),z(Xe,"y",l(de)[0]),we(Ot,Ne().error)}),T(lt,Xe)};W(Pe,lt=>{Ne().pos===4?lt(dt):lt(ct,!1)})}T(Mt,Ve)},Ct=Mt=>{var Ve=mf(),Pe=$(Ve);{var dt=ue=>{Ko(ue,{get lineCoords(){return Te().grid},get lineColor(){return At.MIDDLEGRAY},lineType:3})};W(Pe,ue=>{Ne().showGrid&&ue(dt)})}var ct=q(Pe);Ko(ct,{get lineCoords(){return Te().axisLine},get lineColor(){return At.DARKGRAY},lineType:1});var lt=q(ct);Ko(lt,{get lineCoords(){return Te().tickCoords},get lineColor(){return At.DARKGRAY},lineType:1});var Xe=q(lt);{var Ot=ue=>{ea(ue,{get las(){return Ne().las},get pos(){return Ne().pos},get tickCoords(){return Te().tickCoords},get tickLabels(){return Te().tickLabels},get tickColor(){return At.DARKGRAY},get hideLast(){return Ne().hideLast}})};W(Xe,ue=>{Te().tickCoords.length===2&&Te().tickLabels.length===Te().tickCoords[1][0].length&&ue(Ot)})}var at=q(Xe);{var Fe=ue=>{const gt=A(()=>[Te().tfLabel]);ea(ue,{get pos(){return Ne().pos},get tickCoords(){return Te().tfCoords},get tickLabels(){return l(gt)},get textColor(){return At.DARKGRAY}})};W(at,ue=>{Te().tickFactor!==0&&ue(Fe)})}T(Mt,Ve)};W(wt,Mt=>{Ne().error?Mt(Ht):Mt(Ct,!1)})}T(pe,ot)},o=(pe,Te=ut,Ne=ut)=>{var ot=kf();const wt=A(()=>Ne().elw+2*Ne().elp),Ht=A(()=>Ne().elp),Ct=A(()=>Ne().elh),Mt=A(()=>Ne().ely);var Ve=B(ot),Pe=q(Ve);Ye(Pe,17,()=>Te().items,Ge,(dt,ct,lt)=>{var Xe=xf();z(Xe,"x",0);var Ot=B(Xe);{var at=Gt=>{var L=yf();ee(()=>{z(L,"x1",l(Ht)),z(L,"x2",l(wt)-l(Ht)),z(L,"y1",l(Ct)[lt]/2),z(L,"y2",l(Ct)[lt]/2),z(L,"stroke",l(ct).line.lineColor),z(L,"stroke-width",l(ct).line.lineWidth),z(L,"stroke-dasharray",l(F)[l(ct).line.lineType-1])}),T(Gt,L)};W(Ot,Gt=>{l(ct).line&&Gt(at)})}var Fe=q(Ot);{var ue=Gt=>{var L=_f(),G=B(L);ee(()=>{z(L,"x",l(wt)/2),z(L,"y",l(Ct)[lt]/2),z(L,"fill",l(ct).point.faceColor),z(L,"stroke-width",l(ct).point.lineWidth),z(L,"stroke",l(ct).point.lineColor),z(L,"font-size",l(I)),we(G,Hn[l(ct).point.marker-1])}),T(Gt,L)};W(Fe,Gt=>{l(ct).point&&Gt(ue)})}var gt=q(Fe),ol=B(gt);pt(ol,()=>l(ct).label,!0,!1),ee(()=>{z(Xe,"y",l(Mt)[lt]),z(Xe,"width",Ne().lgw),z(Xe,"height",l(Ct)[lt]),z(gt,"x",l(wt)+l(Ht)),z(gt,"y",l(Ct)[lt]/2),z(gt,"fill",At.LEGEND),z(gt,"font-size",`${Te().fontSize??""}em`)}),T(dt,Xe)}),ee(()=>{z(ot,"x",Ne().lgl),z(ot,"y",Ne().lgt),z(ot,"height",Ne().lgh),z(ot,"width",Ne().lgw),z(Ve,"fill",Te().faceColor),z(Ve,"stroke",Te().lineColor),z(Ve,"stroke-width",Te().lineWidth)}),T(pe,ot)};let s=j(e,"limX",19,()=>[0,1]),a=j(e,"limY",19,()=>[0,1]),c=j(e,"margins",19,()=>[1,1.1,.55,.6]),d=j(e,"downloadLinks",3,"none"),u=j(e,"fileName",3,"plot"),f=j(e,"pngWidth",3,8),v=j(e,"pngHeight",3,8),m=j(e,"pngRes",3,300),h=j(e,"clipboardWidth",3,1200),g=j(e,"clipboardHeight",3,800),b=j(e,"onclick",3,null),w=j(e,"onmousemove",3,null),p=j(e,"onmousedown",3,null),y=j(e,"onmouseup",3,null);function C(pe,Te){if(Te&&pe.target.id=="axes-box"){const Ne=Ks([pe.offsetX-l(D)],l(H))[0],ot=Ks([pe.offsetY-l(U)],l(re))[0];Te(Ne,ot)}}const N="plottingArea"+Math.round(Math.random()*1e4);let _=ne(0),k=ne(0),M=ne(0);const E=A(()=>({plot:Yu(l(k),l(M)),x:Zs(l(k)),y:Zs(l(M))})),S=A(()=>c().map(pe=>pe*ju[l(E).plot])),I=A(()=>Bu[l(E).plot]),R=A(()=>Oo[l(E).plot]),F=A(()=>vn[l(E).plot]),P=A(()=>l(Me).show&&l(Me).label!==""?l(I)*1.5:0),D=A(()=>l(le).show&&l(le).label!==""?l(I)*1.5:0),U=A(()=>e.title&&e.title!==""?l(I)*1.5:0),Q=A(()=>l(k)>l(D)?l(k)-l(D):0),V=A(()=>l(M)>l(P)+l(U)?l(M)-l(P)-l(U):0),Z=A(()=>l(V)-l(S)[0]-l(S)[2]),K=A(()=>l(Q)-l(S)[1]-l(S)[3]),Y=A(()=>Ws(s(),2)&&Ws(a(),2)&&l(Q)>l(S)[1]+l(S)[3]&&l(V)>l(S)[0]+l(S)[2]),H=A(()=>l(Y)?{coords:[l(K)/(s()[1]-s()[0]),s()[0],l(S)[1]],objects:[l(K)/(s()[1]-s()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),re=A(()=>l(Y)?{coords:[-l(Z)/(a()[1]-a()[0]),a()[1],l(S)[2]],objects:[l(Z)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),te=A(()=>l(Z)*.5+l(U)+l(S)[2]),X=A(()=>l(K)*.5+l(D)+l(S)[1]),ie=A(()=>l(Y)?nt(s(),l(H)):[0,1]),de=A(()=>l(Y)?nt(a(),l(re)):[1,0]),_e=A(()=>Gn(e.title)),me=A(()=>l(_e)?l(_e).length===e.title.left?1:1.4:0);let Ae=ne(Ze({show:!1})),Me=ne(Ze({show:!1,error:""})),le=ne(Ze({show:!1,error:""})),ae=ne(Ze({show:!1,colmap:null,breaks:null})),oe=ne(Ze({show:!1,items:null,position:null}));const Ce=A(()=>l(Y)&&l(ae)&&l(ae).show?ef(l(ae)):null),fe=A(()=>l(Y)&&l(Me).show?Zu(s(),a(),l(E),l(re),l(Me)):null),ye=A(()=>l(Y)&&l(le).show?$u(s(),a(),l(E),l(H),l(le)):null),ge=A(()=>l(Y)&&l(Ce)?tf(l(Ce),l(K),l(S),l(E)):null),tt=A(()=>l(Y)&&l(oe)&&l(oe).show&&l(ie)?of(l(oe),l(ie),l(de),l(I),l(R)):null);vi("axes",{setBox:pe=>O(Ae,pe,!0),setXAxis:pe=>O(Me,pe,!0),setYAxis:pe=>O(le,pe,!0),setColmapLegend:pe=>O(ae,pe,!0),setGroupLegend:pe=>O(oe,pe,!0),scales:()=>l(E),tX:()=>l(H),tY:()=>l(re),limX:()=>s(),limY:()=>a()});var bt=Ff();let mt;var Be=B(bt),Ke=q(B(Be));{var pr=pe=>{var Te=Mf(),Ne=B(Te);{var ot=Ve=>{var Pe=Ef();z(Pe,"dx",0),z(Pe,"dy",0);var dt=B(Pe);pt(dt,()=>l(Me).label,!0,!1),ee(()=>{z(Pe,"x",l(X)),z(Pe,"y",l(V)+l(U))}),T(Ve,Pe)};W(Ne,Ve=>{l(Me).show&&l(Me).label&&l(Me).label!==""&&Ve(ot)})}var wt=q(Ne);{var Ht=Ve=>{var Pe=Af();z(Pe,"dx",0),z(Pe,"dy",0);var dt=B(Pe);pt(dt,()=>l(le).label,!0,!1),ee(()=>{z(Pe,"x",l(I)/1.1*l(le).labelHeight),z(Pe,"y",l(te)),z(Pe,"transform",`rotate(-90, ${l(I)*l(le).labelHeight/1.1}, ${l(te)})`)}),T(Ve,Pe)};W(wt,Ve=>{l(le).show&&l(le).label&&l(le).label!==""&&Ve(Ht)})}var Ct=q(wt);{var Mt=Ve=>{var Pe=Cf();z(Pe,"dx",0),z(Pe,"dy",0);var dt=B(Pe);pt(dt,()=>l(_e),!0,!1),ee(()=>{z(Pe,"x",l(X)),z(Pe,"y",l(I)*l(me))}),T(Ve,Pe)};W(Ct,Ve=>{l(_e)&&l(_e)!==""&&Ve(Mt)})}T(pe,Te)};W(Ke,pe=>{l(Y)&&pe(pr)})}var br=q(Ke),Jn=B(br),Zn=B(Jn);z(Zn,"id",N);var Zr=B(Zn),$o=q(Jn);{var el=pe=>{var Te=Lf(),Ne=$(Te);{var ot=Fe=>{var ue=Sf(),gt=B(ue);r(gt,()=>l(fe),()=>l(Me)),T(Fe,ue)};W(Ne,Fe=>{l(Me).show&&l(fe)&&Fe(ot)})}var wt=q(Ne);{var Ht=Fe=>{var ue=Nf(),gt=B(ue);r(gt,()=>l(ye),()=>l(le)),T(Fe,ue)};W(wt,Fe=>{l(le).show&&l(ye)&&Fe(Ht)})}var Ct=q(wt),Mt=B(Ct);{var Ve=Fe=>{var ue=zf();ue.__keydown=[Kn,C,b],ue.__click=[Kn,C,b],ue.__mousemove=[na,C,w],ue.__mousedown=[ta,C,p],ue.__mouseup=[ra,C,y],ee(()=>{z(ue,"stroke",l(Ae).lineColor),z(ue,"stroke-width",`${l(Ae).lineWidth??""}px`),z(ue,"x",l(ie)[0]),z(ue,"y",l(de)[1]),z(ue,"width",l(ie)[1]-l(ie)[0]),z(ue,"height",l(de)[0]-l(de)[1])}),T(Fe,ue)},Pe=Fe=>{var ue=Tf();ue.__keydown=[Kn,C,b],ue.__click=[Kn,C,b],ue.__mousemove=[na,C,w],ue.__mousedown=[ta,C,p],ue.__mouseup=[ra,C,y],ee(()=>{z(ue,"x",l(ie)[0]),z(ue,"y",l(de)[1]),z(ue,"width",l(ie)[1]-l(ie)[0]),z(ue,"height",l(de)[0]-l(de)[1])}),T(Fe,ue)};W(Mt,Fe=>{l(Ae).show?Fe(Ve):Fe(Pe,!1)})}var dt=q(Ct);z(dt,"clip-path",`url(#${N??""})`);var ct=B(dt);kr(ct,()=>e.children??ut);var lt=q(dt);{var Xe=Fe=>{var ue=Pf(),gt=B(ue);df(gt,()=>l(Ce),()=>l(ge)),T(Fe,ue)};W(lt,Fe=>{l(ge)&&Fe(Xe)})}var Ot=q(lt);{var at=Fe=>{var ue=If(),gt=B(ue);o(gt,()=>l(oe),()=>l(tt)),T(Fe,ue)};W(Ot,Fe=>{l(tt)&&Fe(at)})}T(pe,Te)};W($o,pe=>{l(Y)&&pe(el)})}Wr(Be,pe=>O(_,pe),()=>l(_));var tl=q(Be,2);{var rl=pe=>{var Te=Rf();T(pe,Te)},nl=pe=>{var Te=jf(),Ne=B(Te);Ne.__click=[la,_,u],Ne.__keydown=[la,_,u];var ot=q(Ne,2);ot.__click=[sa,_,u,f,v,m],ot.__keydown=[sa,_,u,f,v,m];var wt=q(ot,2);wt.__click=[oa,_,h,g],wt.__keydown=[oa,_,h,g],T(pe,Te)};W(tl,pe=>{l(Y)?pe(nl,!1):pe(rl)})}ee(pe=>{mt=ft(bt,1,`plot-container show-download-links-${d()??""}`,"svelte-1jtdxd0",mt,pe),rt(Be,`font-size:${l(I)??""}px`),z(br,"x",l(D)),z(br,"y",l(U)),z(br,"width",l(Q)),z(br,"height",l(V)),z(Zr,"x",l(ie)[0]),z(Zr,"y",l(de)[1]),z(Zr,"width",l(ie)[1]-l(ie)[0]),z(Zr,"height",l(de)[0]-l(de)[1])},[()=>({"plot-error":!l(Y)})]),$l(Be,"clientWidth",pe=>O(k,pe)),$l(Be,"clientHeight",pe=>O(M,pe)),T(t,bt),he()}$e(["keydown","click","mousemove","mousedown","mouseup"]);function aa(t,e){ve(e,!0);let r=j(e,"tickLabels",7),o=j(e,"las",3,1),s=j(e,"whole",3,!1),a=j(e,"show",3,!0),c=j(e,"showGrid",3,!1);const d=Nt("axes");qe(()=>{const u=Gn(e.label),f=u?u.length===e.label.length?1:1.4:0;let v,m="";e.ticks&&([v,m]=Js(e.ticks,d.limX())),!m&&r()&&(h=>(r(h[0]),m=h[1]))(Qs(r(),v)),d.setXAxis({show:a(),error:m,label:u,ticks:v,labelHeight:f,showGrid:c(),las:o(),whole:s(),tickLabels:r()})}),he()}function ia(t,e){ve(e,!0);let r=j(e,"tickLabels",7),o=j(e,"las",3,1),s=j(e,"whole",3,!1),a=j(e,"show",3,!0),c=j(e,"showGrid",3,!1);const d=Nt("axes");qe(()=>{const u=Gn(e.label),f=u?u.length===e.label.length?1:1.4:0;let v,m="";e.ticks&&([v,m]=Js(e.ticks,d.limY())),!m&&r()&&(h=>(r(h[0]),m=h[1]))(Qs(r(),v)),d.setYAxis({show:a(),error:m,label:u,ticks:v,labelHeight:f,showGrid:c(),las:o(),whole:s(),tickLabels:r(),pos:4})}),he()}function ca(t,e){ve(e,!0);let r=j(e,"lineWidth",3,1),o=j(e,"lineColor",3,"#606060");const s=Nt("axes");qe(()=>{s.setBox({show:!0,lineWidth:r(),lineColor:o()})}),he()}var Bf=(t,e)=>Mr(t,"rect",e.onclick),Of=ce("<rect></rect>"),Vf=ce("<g></g>");function ua(t,e){ve(e,!0);let r=j(e,"faceColor",19,()=>At.PRIMARY),o=j(e,"lineColor",19,r),s=j(e,"lineWidth",3,1),a=j(e,"className",3,"series-rect");const c=A(()=>xt(e.left,"Rectangles (left)")),d=A(()=>l(c)?xt(e.top,"Rectangles (top)",l(c).length):null),u=A(()=>l(d)?typeof e.width!="object"?Ee.fill(e.width,l(c).length):e.width:null),f=A(()=>l(d)?typeof e.height!="object"?Ee.fill(e.height,l(c).length):e.height:null),v=Nt("axes"),m=A(()=>l(c)?nt(l(c),v.tX()):null),h=A(()=>l(d)?nt(l(d),v.tY()):null),g=A(()=>l(u)?Do(l(u),v.tX()):null),b=A(()=>l(f)?Do(l(f),v.tY()):null),w=A(()=>`fill:${r()};stroke:${o()};stroke-width:${s()}px;`),p=A(()=>l(m)&&l(h)&&l(g)&&l(b)&&l(g).length===l(m).length&&l(b).length===l(m).length);var y=be(),C=$(y);{var N=_=>{var k=Vf();k.__click=[Bf,e],Ye(k,21,()=>e.left,Ge,(M,E,S)=>{var I=Of();ee(()=>{z(I,"x",l(m)[S]),z(I,"y",l(h)[S]),z(I,"width",l(g)[S]),z(I,"height",l(b)[S])}),T(M,I)}),ee(()=>{ft(k,0,`series ${a()??""}`),rt(k,l(w))}),T(_,k)};W(C,_=>{l(p)&&_(N)})}T(t,y),he()}$e(["click"]);var Df=(t,e)=>Mr(t,"line",e.onclick),Yf=ce("<line></line>"),Uf=ce('<g class="series series-segment"></g>');function Sr(t,e){ve(e,!0);let r=j(e,"lineColor",19,()=>At.PRIMARY),o=j(e,"lineType",3,1),s=j(e,"lineWidth",3,1);const a=A(()=>xt(e.xStart,"Segments")),c=A(()=>l(a)?xt(e.yStart,"Segments",l(a).length):null),d=A(()=>l(c)?xt(e.xEnd,"Segments",l(a).length):null),u=A(()=>l(d)?xt(e.yEnd,"Segments",l(a).length):null),f=Nt("axes"),v=A(()=>l(a)?nt(l(a),f.tX()):null),m=A(()=>l(d)?nt(l(d),f.tX()):null),h=A(()=>l(c)?nt(l(c),f.tY()):null),g=A(()=>l(u)?nt(l(u),f.tY()):null),b=A(()=>`stroke:${r()};stroke-width: ${s()}px;stroke-dasharray:${vn[f.scales().plot][o()-1]}`),w=A(()=>l(v)&&l(m)&&l(h)&&l(g));var p=be(),y=$(p);{var C=N=>{var _=Uf();_.__click=[Df,e],Ye(_,21,()=>l(v),Ge,(k,M,E)=>{var S=Yf();ee(()=>{z(S,"x1",l(v)[E]),z(S,"x2",l(m)[E]),z(S,"y1",l(h)[E]),z(S,"y2",l(g)[E])}),T(k,S)}),ee(()=>rt(_,l(b))),T(N,_)};W(y,N=>{l(w)&&N(C)})}T(t,p),he()}$e(["click"]);var Wf=(t,e)=>Mr(t,"text",e.onclick),Hf=ce("<text><!></text>"),Gf=ce("<text><!></text>"),Kf=ce("<text><!></text>"),Xf=ce('<g class="series series-textlabels"><!></g>');function Xo(t,e){ve(e,!0);let r=j(e,"pos",3,0),o=j(e,"faceColor",19,()=>At.PRIMARY_TEXT),s=j(e,"lineColor",3,"transparent"),a=j(e,"lineWidth",3,0),c=j(e,"textSize",3,1),d=j(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],f=A(()=>xt(e.xValues,"TextLabels")),v=A(()=>l(f)?xt(e.yValues,"TextLabels",l(f).length):null),m=A(()=>l(v)?Array.isArray(e.labels)&&e.labels.length!==l(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=A(()=>l(m)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Nt("axes"),b=A(()=>l(f)&&l(h)!==null?nt(l(f),g.tX()):null),w=A(()=>l(v)&&l(b)?nt(l(v),g.tY()):null),p=A(()=>Vo[g.scales().plot]),y=A(()=>[0,0,-l(p),0,l(p),l(p)]),C=A(()=>[0,l(p),0,-l(p),0,l(p)]),N=A(()=>`fill:${o()};stroke-width:${a()}px;stroke:${s()};font-size:${c()}em;`),_=A(()=>l(b)&&l(w)&&l(h)!==null&&l(m)&&l(b).length===l(w).length);var k=be(),M=$(k);{var E=S=>{var I=Xf();I.__click=[Wf,e];var R=B(I);{var F=D=>{var U=be(),Q=$(U);Ye(Q,17,()=>l(b),Ge,(V,Z,K)=>{var Y=Hf();z(Y,"data-id",K);var H=B(Y);pt(H,()=>e.labels,!0,!1),ee(()=>{z(Y,"x",l(b)[K]),z(Y,"y",l(w)[K]),z(Y,"dx",l(y)[r()]),z(Y,"dy",l(C)[r()]),z(Y,"transform",d()!==void 0?`rotate(${d()}, ${l(b)[K]+l(y)[r()]}, ${l(w)[K]+l(C)[r()]})`:""),z(Y,"text-anchor",u[r()[K]])}),T(V,Y)}),T(D,U)},P=(D,U)=>{{var Q=Z=>{var K=be(),Y=$(K);Ye(Y,17,()=>l(b),Ge,(H,re,te)=>{var X=Gf();z(X,"data-id",te);var ie=B(X);pt(ie,()=>e.labels[te],!0,!1),ee(()=>{z(X,"x",l(b)[te]),z(X,"y",l(w)[te]),z(X,"dx",l(y)[r()[te]]),z(X,"dy",l(C)[r()[te]]),z(X,"transform",d()!==void 0?`rotate(${d()}, ${l(b)[te]+l(y)[r()]}, ${l(w)[te]+l(C)[r()]})`:""),z(X,"text-anchor",u[r()[te]])}),T(H,X)}),T(Z,K)},V=Z=>{var K=be(),Y=$(K);Ye(Y,17,()=>l(b),Ge,(H,re,te)=>{var X=Kf();z(X,"data-id",te);var ie=B(X);pt(ie,()=>e.labels[te],!0,!1),ee(()=>{z(X,"x",l(b)[te]),z(X,"y",l(w)[te]),z(X,"dx",l(y)[r()]),z(X,"dy",l(C)[r()]),z(X,"transform",d()!==void 0?`rotate(${d()}, ${l(b)[te]+l(y)[r()]}, ${l(w)[te]+l(C)[r()]})`:""),z(X,"text-anchor",u[r()])}),T(H,X)}),T(Z,K)};W(D,Z=>{Array.isArray(r())||ArrayBuffer.isView(r())?Z(Q):Z(V,!1)},U)}};W(R,D=>{typeof e.labels=="string"?D(F):D(P,!1)})}ee(()=>rt(I,l(N))),T(S,I)};W(M,S=>{l(_)&&S(E)})}T(t,k),he()}$e(["click"]),$e(["click"]);var Qf=(t,e)=>Mr(t,"text",e.onclick),Jf=ce("<text> </text>"),Zf=ce('<g text-anchor="middle"></g>');function Qo(t,e){ve(e,!0);let r=j(e,"marker",3,1),o=j(e,"faceColor",3,"transparent"),s=j(e,"lineColor",19,()=>At.PRIMARY),a=j(e,"lineWidth",3,1),c=j(e,"markerSize",3,1);const d=A(()=>typeof r()!="number"||r()<1||r()>Hn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+Hn.length+"."),null):Hn[r()-1]),u=A(()=>xt(e.xValues,"Points")),f=A(()=>l(u)?xt(e.yValues,"Points",l(u).length):null),v=Nt("axes"),m=A(()=>l(u)?nt(l(u),v.tX()):null),h=A(()=>l(m)&&l(f)?nt(l(f),v.tY()):null),g=A(()=>["＋","✳","✕"].includes(l(d))?`fill:${s()&&s()!=="transparent"?s():o()};stroke-width:0px;font-size:${c()}em;`:`fill:${o()};stroke-width:${a()}px;stroke:${s()}; font-size:${c()}em;`),b=A(()=>["◼","⬥","＋","✳","✕"].includes(l(d))?"series-points2":"series-points1"),w=A(()=>l(m)&&l(h)&&l(m).length===l(h).length);var p=be(),y=$(p);{var C=N=>{var _=Zf();_.__click=[Qf,e],Ye(_,21,()=>l(m),Ge,(k,M,E)=>{var S=Jf(),I=B(S);ee(()=>{z(S,"x",l(m)[E]),z(S,"y",l(h)[E]),we(I,l(d))}),T(k,S)}),ee(()=>{ft(_,0,`series series-points ${l(b)??""}`),rt(_,l(g))}),T(N,_)};W(y,N=>{l(w)&&N(C)})}T(t,p),he()}$e(["click"]);var $f=(t,e)=>Mr(t,"polyline",e.onclick),ed=ce('<g class="series series-line"><polyline class="line"></polyline></g>');function Xr(t,e){ve(e,!0);let r=j(e,"lineColor",19,()=>At.PRIMARY),o=j(e,"lineType",3,1),s=j(e,"lineWidth",3,1);const a=A(()=>xt(e.xValues,"Lines")),c=A(()=>l(a)?xt(e.yValues,"Lines",l(a).length):null),d=Nt("axes"),u=A(()=>l(a)&&l(c)?Wo(l(a),l(c),d.tX(),d.tY()):null),f=A(()=>`fill:transparent;stroke:${r()};stroke-width: ${s()}px; stroke-dasharray:${vn[d.scales().plot][o()-1]}`);var v=be(),m=$(v);{var h=g=>{var b=ed();b.__click=[$f,e];var w=B(b);ee(()=>{rt(b,l(f)),z(w,"points",l(u))}),T(g,b)};W(m,g=>{l(u)&&g(h)})}T(t,v),he()}$e(["click"]);var td=(t,e)=>Mr(t,"polyline",e.onclick),rd=ce('<polyline class="line"></polyline>'),nd=ce('<g class="series series-multiline"></g>');function od(t,e){ve(e,!0);let r=j(e,"lineColor",19,()=>At.PRIMARY),o=j(e,"lineType",3,1),s=j(e,"lineWidth",3,1);const a=A(()=>xt(e.xValues,"Multilines")),c=A(()=>l(a)?hr(e.yValues)?(l(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),d=Nt("axes"),u=A(()=>{if(!l(a)||!l(c))return null;const g=new Array(l(c).ncols);for(let b=0;b<g.length;b++)g[b]=Wo(l(a),l(c).getcolumn(b+1),d.tX(),d.tY());return g}),f=A(()=>`fill:transparent;stroke:${r()};stroke-width: ${s()}px; stroke-dasharray:${vn[d.scales().plot][o()-1]}`);var v=be(),m=$(v);{var h=g=>{var b=nd();b.__click=[td,e],Ye(b,21,()=>l(u),Ge,(w,p)=>{var y=rd();ee(()=>z(y,"points",l(p))),T(w,y)}),ee(()=>rt(b,l(f))),T(g,b)};W(m,g=>{l(u)&&l(u).length>0&&g(h)})}T(t,v),he()}$e(["click"]);function fa(t,e){ve(e,!0);let r=j(e,"show",3,!0),o=j(e,"labels",3,null),s=j(e,"labelColor",19,()=>At.CLEGEND_LABELS),a=j(e,"fontSize",3,.85);const c=Nt("axes");qe(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:o(),labelColor:s(),fontSize:a()})}),he()}function ld(t,e,r,o){e===void 0&&(e=!0),r===void 0&&(r=!1),o===void 0&&(o=!1);function s(u,f,v,m){if(typeof f=="boolean")return f?u.apply(v,2):Ue([m]).rep(u.ncols);if(!ze(f))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(f.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return f}const a=s(t,e,Bn,0),c=s(t,r,Ao,1),d=Yt.zeros(t.nrows,t.ncols);for(let u=1;u<=t.ncols;u++){const f=t.getcolref(u),v=d.getcolref(u),m=a.v[u-1],h=1/c.v[u-1];for(let g=0;g<t.nrows;g++)v[g]=(f[g]-m)*h}return o?[d,a,c]:d}function Jo(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const o=t.ncols,s=t.ncomp;let a,c;switch(e){case"mX":a=2,c=o;break;case"sX":a=2+o,c=o;break;case"loadings":case"xloadings":a=2+2*o+(r-1)*o,c=o;break;case"P":a=2+2*o,c=r*o;break;case"eigenvals":case"xeigenvals":a=2+2*o+o*s,c=s;break;case"cq0":a=2+2*o+o*s+s,c=s;break;case"cNq":a=2+2*o+o*s+2*s,c=s;break;case"rq0":a=2+2*o+o*s+3*s,c=s;break;case"rNq":a=2+2*o+o*s+4*s,c=s;break;case"ch0":a=2+2*o+o*s+5*s,c=s;break;case"cNh":a=2+2*o+o*s+6*s,c=s;break;case"rh0":a=2+2*o+o*s+7*s,c=s;break;case"rNh":a=2+2*o+o*s+8*s,c=s;break;case"cr0":a=2+2*o+o*s+9*s,c=s;break;case"cNr":a=2+2*o+o*s+10*s,c=s;break;case"rr0":a=2+2*o+o*s+11*s,c=s;break;case"rNr":a=2+2*o+o*s+12*s,c=s;break;case"cg0":a=2+2*o+o*s+13*s,c=s;break;case"cNg":a=2+2*o+o*s+14*s,c=s;break;case"rg0":a=2+2*o+o*s+15*s,c=s;break;case"rNg":a=2+2*o+o*s+16*s,c=s;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}const sd=t=>t;function ad(t,{delay:e=0,duration:r=400,easing:o=sd}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:o,css:a=>`opacity: ${a*s}`}}var id=J('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function da(t,e){ve(e,!0);function r(f){f.key==="Escape"&&e.closeModal()}var o=id();xr("keydown",lo,r);var s=B(o),a=B(s),c=B(a);c.__click=function(...f){var v;(v=e.closeModal)==null||v.apply(this,f)};var d=q(a,2),u=B(d);kr(u,()=>e.children),sc(7,o,()=>ad),T(t,o),he()}$e(["click"]);const cd=[1,1.1,.45,.4],va={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",alt:"#2679B2",new:"#2679B2"},ha={cal:"#f0f8ff"},ma="#a0a0a0",ga="#909090",Qr="#909090",Zo=8,ud=8,fd=8,dd=600;function pa(t,e){return!t||!e||e<0||e>t.ncomp?"":`PC${e} (${(t.stat.expvar[e-1]*100).toFixed(1)}%)`}function vd(t,e){if(t.length===e.length)return t;const r=e.length,o=new t.constructor(r);for(let s in e)o[s]=t[e[s]];return o}function hd(t,e){let r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)o=Math.min(o,t[c]),r=Math.max(r,t[c]);let s=Ho(void 0,[o,r],e-1,!0,!1,0).v;const a=s[1]-s[0];if(s[0]>o){const c=s[0]-a;s=[c<o?c:o,...s]}if(s[s.length-1]<r){const c=s[s.length-1]+a;s=[...s,c>r?c:r]}return s}function md(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=$s(e);return t.reduce((s,a,c)=>(s[a]=r[c],s),{})}function gd(t,e,r){const o=e.length,s=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let d=0;d<o-1;d++){const u=t[c]>=e[d],f=d===o-2?t[c]<e[d+1]+a:t[c]<e[d+1];if(u&&f){s[c]=r[d];break}}return s}function ba(t,e,r,o,s="cal",a){if(!e)return null;let c,d,u,f,v;if(a){const m=a.values;c=a.labels;const h=a.classColmap;d=Object.keys(h).map(g=>h[g]),f=m.map(g=>h[g]),u=new Array(c.length+1).map((g,b)=>b-.5),v=null}else if(r==="groups"&&e.classNames){const m=md(e.classNames);d=Object.keys(m).map(h=>m[h]),c=e.classNames,f=e.classes.map(h=>m[h]),u=new Array(c.length+1).map((h,g)=>g-.5),v=null}else if(r==="variable"){const m=vd(t.values.getcolref(o),e.objindices);v=t.varlabels[o-1],v.length>30&&(v=v.substring(0,29)+"..."),u=hd(m,10),d=$s(u.length-1),f=gd(m,u,d)}else c=null,u=null,d=null,f=Array(e.nrows).fill(va[s]);return{labels:c,map:d,breaks:u,colors:f,varname:v}}function pd(t,e,r=.95){const s=2*Math.PI/99,[a,c,d]=t,u=Math.sqrt((a+d)**2-4*(a*d-c*c));let f=.5*(a+d-u),v=.5*(a+d+u);if(f<v){let E=f;f=v,v=E}const m=Vn(r,2),h=Math.sqrt(m*f),g=Math.sqrt(m*v);let b;if(Math.abs(c)<1e-7)b=0;else{let E=-c/(a-f),S=1;const I=Math.sqrt(E*E+S*S);E=E/I,S=S/I,b=Math.atan2(S,E),b<0&&(b=b+2*Math.PI)}const w=Math.cos(b),p=Math.sin(b),y=Ee.zeros(100),C=Ee.zeros(100);let N=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY;for(let E=0;E<100;E++){const S=E*s,I=h*Math.cos(S),R=g*Math.sin(S),F=I*w-R*p+e[0],P=I*p+R*w+e[1];y.v[E]=F,C.v[E]=P,N=Math.min(N,F),_=Math.max(_,F),k=Math.min(k,P),M=Math.max(M,P)}return[y,C,N,_,k,M]}function bd(t,e,r,o,s,a){if(!t||!e||!r||!o||!s)return null;const c=t.length,d=o.length,u=new Array(d).fill(0),f=new Array(d*2).fill(0);for(let p=0;p<c;p++){const y=o.indexOf(r[p]);u[y]+=1,f[y*2]+=t.v[p],f[y*2+1]+=e.v[p]}for(let p=0;p<d;p++)f[p*2]=f[p*2]/u[p],f[p*2+1]=f[p*2+1]/u[p];const v=new Array(d*3).fill(0);for(let p=0;p<c;p++){const y=o.indexOf(r[p]),C=t.v[p]-f[y*2],N=e.v[p]-f[y*2+1];v[y*3]+=C*C,v[y*3+1]+=C*N,v[y*3+2]+=N*N}let m=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;const w=Array(d);for(let p=0;p<d;p++){const[y,C,N,_,k,M]=pd([v[p*3]/(u[p]-1),v[p*3+1]/(u[p]-1),v[p*3+2]/(u[p]-1)],[f[p*2],f[p*2+1]],a);w[p]={x:y,y:C,c:s[p]},m=Math.min(m,N),h=Math.max(h,_),g=Math.min(g,k),b=Math.max(b,M)}return{ellipses:w,xRange:[m,h],yRange:[g,b]}}var wd=J("<!> <!> <!> <!>",1);function Nr(t,e){let r=j(e,"whole",3,!1),o=fc(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);qf(t,Hr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",margins:cd,pngWidth:ud,pngHeight:fd,pngRes:dd},()=>o,{children:(s,a)=>{var c=wd(),d=$(c);kr(d,()=>e.children);var u=q(d,2);aa(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var f=q(u,2);ia(f,{showGrid:!0,get label(){return e.yLabel}});var v=q(f,2);ca(v,{}),T(s,c)},$$slots:{default:!0}}))}function yd(t,e){if(t.target.tagName!=="rect"){O(e,-1);return}const r=Array.from(t.target.parentNode.children).indexOf(t.target);if(r<0){O(e,-1);return}l(e)!==r&&O(e,r,!0)}var _d=J("<!> <!> <!>",1),xd=J("<!> <!> <!> <!> <!>",1),kd=J('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function wa(t,e){ve(e,!0);let r=j(e,"outliers",19,()=>[]),o=ne("residual"),s=ne(-1),a=A(()=>l(u)&&l(s)>=0?l(u).values.v[l(s)]:null),c=A(()=>l(C)&&l(s)>=0?l(C).sel.v[l(s)]:null),d=A(()=>e.model&&l(s)>=0?e.model.varlabels[l(s)]:null),u=A(()=>{if(!e.model)return null;const S=Ue(e.model.varvalues),I=S.length,R=(S.v[1]-S.v[0])/2,F=(S.v[I-2]-S.v[I-1])/2,P=[S.v[0],S.v[I-1]],D=[P[0]-R,P[1]+F],U=(P[1]-P[0])/I;return{values:S,lim:D,width:U,hwidth:U*.5}}),f=A(()=>l(u)?l(u).values.apply(S=>S-l(u).hwidth):null),v=A(()=>{if(!e.dataset||!e.model)return null;const S=e.dataset.values,I=new Ee(Jo(e.model,"mX")),R=new Ee(Jo(e.model,"sX"));return ld(S,I,R).t()}),m=A(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new Yt(Jo(e.model,"P",e.ncomp),e.model.ncols,e.ncomp):null),h=A(()=>l(m)?Lc(l(m),l(m)):null),g=A(()=>l(v)&&l(h)?l(h).dot(l(v)):null),b=A(()=>l(g)?l(v).subtract(l(g)):null),w=A(()=>l(g)?l(g).getcolumn(e.selected+1):null),p=A(()=>l(b)?l(b).getcolumn(e.selected+1):null),y=A(()=>l(v)?l(v).getcolumn(e.selected+1):null),C=A(()=>{if(!l(w)||!l(p)||!l(y))return null;const S=l(o)==="explained"?{all:l(g),sel:l(w),label:"Explained part, TP^T"}:l(o)==="residual"?{all:l(b),sel:l(p),label:"Residuals, E"}:{all:l(v),sel:l(y),label:"Data, X"},I=qn(S.all.v),R=I[1]-I[0],F=[I[0]-R/50,I[1]+R/12],P=Ee.fill(I[1],S.sel.length);return S.lim=F,S.top=P,S.height=R,S});const N=A(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),_=A(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var k=be(),M=$(k);{var E=S=>{da(S,{get closeModal(){return e.closeModal},children:(I,R)=>{var F=kd(),P=B(F);P.__click=[yd,s];var D=B(P);Nr(D,{get title(){return l(N)},get yLabel(){return l(C).label},get xLabel(){return l(_)},get limY(){return l(C).lim},get limX(){return l(u).lim},fileName:"plot-contributions",children:(V,Z)=>{var K=xd(),Y=$(K);od(Y,{get xValues(){return l(u).values},get yValues(){return l(C).all},lineColor:"#e0e0e0"});var H=q(Y,2);{var re=_e=>{var me=be(),Ae=$(me);Ye(Ae,17,r,Ge,(Me,le)=>{const ae=A(()=>l(C).all.getcolumn(l(le)+1));Xr(Me,{get xValues(){return l(u).values},get yValues(){return l(ae)},lineColor:"#ffdd88"})}),T(_e,me)};W(H,_e=>{r().length>0&&_e(re)})}var te=q(H,2);Xr(te,{get xValues(){return l(u).values},get yValues(){return l(C).sel},lineColor:"crimson"});var X=q(te,2);ua(X,{get left(){return l(f)},get top(){return l(C).top},get height(){return l(C).height},get width(){return l(u).width},faceColor:"transparent",borderColor:"transparent"});var ie=q(X,2);{var de=_e=>{var me=_d(),Ae=$(me);const Me=A(()=>[l(a)]),le=A(()=>[l(C).top.v[0]]),ae=A(()=>[l(d)]);Xo(Ae,{get xValues(){return l(Me)},get yValues(){return l(le)},get labels(){return l(ae)},pos:3,textSize:.85});var oe=q(Ae,2);const Ce=A(()=>[l(a)]),fe=A(()=>[l(c)]);Qo(oe,{get xValues(){return l(Ce)},get yValues(){return l(fe)},faceColor:"crimson",lineColor:"crimson"});var ye=q(oe,2);const ge=A(()=>[l(f).v[l(s)]]),tt=A(()=>[l(C).top.v[l(s)]]);ua(ye,{get left(){return l(ge)},get top(){return l(tt)},get height(){return l(C).height},get width(){return l(u).width},faceColor:"#ff000015"}),T(_e,me)};W(ie,_e=>{l(s)>=0&&_e(de)})}T(V,K)},$$slots:{default:!0}});var U=q(P,4),Q=B(U);Se(Q,{label:"",children:(V,Z)=>{ht(V,{id:"type",options:["full","explained","residual"],get value(){return l(o)},set value(K){O(o,K,!0)}})},$$slots:{default:!0}}),T(I,F)},$$slots:{default:!0}})};W(M,S=>{l(u)&&l(C)&&S(E)})}T(t,k),he()}$e(["click"]);var Ed=J("<!> <!> <!> <!>",1),Ad=J("<p> </p>"),Cd=J("<!> <p>Computing global model...</p>",1),Md=J('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Sd=J('<div class="buttons"><!> <!></div>'),Nd=J("<!> <!>",1),zd=J("<p> </p>"),Td=J("<!> <!> <!> <!>",1);function Pd(t,e){ve(e,!0);let r=j(e,"outliers",19,()=>[]),o=j(e,"resobj",15),s=j(e,"model",15),a=j(e,"downloadModel",3,null),c=j(e,"downloadResults",3,null),d=ne("neutral"),u=ne(""),f=ne(1),v=ne(!0),m=ne(!1),h=ne(void 0);async function g(R,F,P,D){O(h,e.WASM().then(U=>{O(d,"computing");const Q=Bc(U,R.values,F,P,D,r());Q.hash=Ms(),Q.exclvars=[],Q.varlabels=R.varlabels,Q.varindices=R.varindices,Q.varvalues=R.varvalues,Q.varvaluesName=R.varvaluesName,Q.varvaluesUnits=R.varvaluesUnits,Q.varrev=R.varrev,Q.prep=[];const V=Ss(U,Q,R,r());s(Q),o(V),O(d,"success")}).catch(U=>{console.error(U),s(null),O(d,"error"),O(u,U,!0)}),!0)}function b(R){O(d,"neutral"),O(u,null),g(e.dataset,l(f),l(v),l(m))}function w(){O(d,"neutral"),O(h,null),o(null),s(null),O(u,null)}let p=A(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-1,50):null);qe(()=>{e.dataset===null&&w()}),qe(()=>{O(f,l(p)?Math.min(l(p),20):null,!0)});var y=Td(),C=$(y);{var N=R=>{var F=Ed(),P=$(F);Se(P,{name:"ncomp",label:"# of PCs",children:(V,Z)=>{eu(V,{id:"ncomp",min:1,get max(){return l(p)},step:1,decNum:0,get value(){return l(f)},set value(K){O(f,K,!0)}})},$$slots:{default:!0}});var D=q(P,2);Se(D,{name:"center",label:"Center",children:(V,Z)=>{Bt(V,{id:"center",options:["no","yes"],get value(){return l(v)},set value(K){O(v,K,!0)}})},$$slots:{default:!0}});var U=q(D,2);Se(U,{name:"scale",label:"Scale",children:(V,Z)=>{Bt(V,{id:"scale",options:["no","yes"],get value(){return l(m)},set value(K){O(m,K,!0)}})},$$slots:{default:!0}});var Q=q(U,2);Se(Q,{name:"create-model",label:" ",children:(V,Z)=>{qt(V,{onclick:b,text:"Create model"})},$$slots:{default:!0}}),T(R,F)};W(C,R=>{e.dataset&&!s()&&l(d)!=="computing"&&R(N)})}var _=q(C,2);{var k=R=>{var F=be(),P=$(F);Hl(P,()=>l(h),D=>{Se(D,{name:"spinner",children:(U,Q)=>{var V=Cd(),Z=$(V);Os(Z),T(U,V)},$$slots:{default:!0}})},void 0,(D,U)=>{Se(D,{name:"error",status:"error",children:(Q,V)=>{var Z=Ad(),K=B(Z);ee(()=>we(K,l(U))),T(Q,Z)},$$slots:{default:!0}})}),T(R,F)};W(_,R=>{l(h)&&R(k)})}var M=q(_,2);{var E=R=>{var F=Nd(),P=$(F);Se(P,{name:"info",children:(Q,V)=>{var Z=Md(),K=$(Z),Y=q(B(K)),H=q(K,2);dn(H,{onclick:w}),ee(()=>we(Y,` ${s().ncomp??""} PCs${(s().center?", centered":"")??""}${(s().scale?", scaled":"")??""}`)),T(Q,Z)},$$slots:{default:!0}});var D=q(P,2);{var U=Q=>{Se(Q,{name:"download-buttons",label:"Download",children:(V,Z)=>{var K=Sd(),Y=B(K);qt(Y,{onclick:()=>c()(o(),e.dataset,"train",r(),s()),text:"Results"});var H=q(Y,2);qt(H,{onclick:()=>a()(s()),text:"Model"}),T(V,K)},$$slots:{default:!0}})};W(D,Q=>{a()&&c()&&Q(U)})}T(R,F)};W(M,R=>{s()&&R(E)})}var S=q(M,2);{var I=R=>{Se(R,{name:"error",status:"error",children:(F,P)=>{var D=zd(),U=B(D);ee(()=>we(U,l(u))),T(F,D)},$$slots:{default:!0}})};W(S,R=>{(l(d)==="error"||l(u))&&R(I)})}T(t,y),he()}function ya(t,e,r,o,s){(!o||!Array.isArray(o))&&(o=[]);const a=e.values.nrows,c=e.values.ncols,d=o.length,u=a-d,f=t.ncomp,v=4,m=Math.max(f,v),h=Array(m).fill(""),g=f>m?Array(m-f).fill(""):[],b=Array(f).fill(0).map((M,E)=>"PC"+(E+1)),w=e.sep;function p(M,E,S){y+=`
`,y+=[M+": ","",...h].join(w)+`
`,y+=["object","group","outlier",...b,...g].join(w)+`
`;const I=t.v.subarray(E,E+f*u);let R=0;for(let F=0;F<a;F++){const P=e.classes?e.classes[F]:"-";if(d>0&&o.includes(F)){y+=[S[F],P,"yes",...Array(f).fill("-"),...g].join(w)+`
`;continue}const D=Array(f);for(let U=0;U<f;U++)D[U]=I[U*u+R];y+=[S[F],P,"",...D,g].join(w)+`
`,R=R+1}y+=`
`}let y="";if(y+=["Number of components:",f,...h].join(w)+`
`,y+=["Center: ",t.center,...h].join(w)+`
`,y+=["Scale: ",t.scale,...h].join(w)+`
`,y+=`
`,y+=["Statistics: ","",...h].join(w)+`
`,s){const M=v>m?Array(m-v-1).fill(""):[];y+=["","PC","Expvar","Cumexpvar","Resvar","Cumresvar","Eigenvalues",...M].join(e.sep)+`
`;for(let E=0;E<f;E++)y+=["",E+1,t.stat.expvar[E],t.stat.cumexpvar[E],t.stat.resvar[E],t.stat.cumresvar[E],t.eigenvals[E],...M].join(e.sep)+`
`}else{const M=v>m?Array(m-v).fill(""):[];y+=["","PC","Expvar","Cumexpvar","Resvar","Cumresvar",...M].join(w)+`
`;for(let E=0;E<f;E++)y+=["",E+1,t.stat.expvar[E],t.stat.cumexpvar[E],t.stat.resvar[E],t.stat.cumresvar[E],...M].join(w)+`
`}if(y+=`
`,s){y+=`
`,y+=["Loading, center and scale values: ","",...h].join(w)+`
`,y+=["variable","center","scale",...b,...g].join(w)+`
`;const M=s.v.subarray(2,2+c),E=s.v.subarray(2+c,2+c*2),S=s.v.subarray(2+c*2,u+c*2+f*c);for(let I=0;I<c;I++){const R=Array(f);for(let F=0;F<f;F++)R[F]=S[F*f+I];y+=[e.varlabels[I],M[I],E[I],...R,g].join(w)+`
`}y+=`
`}p("Scores",0,e.objlabels),p("Score distances, h",f*u,e.objlabels),p("Orthogonal distances, q",f*u*2,e.objlabels),e.dec!=="."&&(y=y.replace(/\./g,e.dec)),y=["Data filename:",e.fileName,...h].join(e.sep)+`
`+y;let C=["PCA results ("+r+")","https://mda.tools/pca/",...h].join(e.sep)+`

`;const N=new Blob([C+y],{type:"text/csv"}),_=window.URL.createObjectURL(N),k=document.createElement("a");k.setAttribute("href",_),k.setAttribute("download",`pca-results-${r}.csv`),k.click()}function Id(t){const e=new Blob([JSON.stringify({center:t.center,class:t.class,hash:t.hash,exclvars:t.exclvars,ncols:t.ncols,ncomp:t.ncomp,nrows:t.nrows,prep:t.prep,scale:t.scale,v:Array.from(t.v),exclvars:t.exclvars,varlabels:t.varlabels,varvalues:t.varvalues,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits})],{type:"application/json"}),r=window.URL.createObjectURL(e),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download","pca-model.json"),o.click()}var Ld=J('<div class="msg-select"> </div>'),Rd=J('<div class="msg-select"> </div>'),jd=J('<div class="selected-buttons svelte-8mh2yv"><!></div>'),Fd=J("<!> <!>",1),qd=()=>switchPlot(i),Bd=(t,e,r)=>O(e,l(r),!0),Od=J('<button class="plot-selector svelte-8mh2yv"> </button>'),Vd=J('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function _a(t,e){ve(e,!0);let r=j(e,"selobjText",3,"Click to select an object...");j(e,"selvarText",3,"Click to select a variable...");let o=j(e,"clearText",3,"Click anywhere to remove selection..."),s=j(e,"params",15),a=Ze({objects:-1,variables:-1}),c=ne(Ze(Object.keys(e.plots)[0]));function d(M){a.objects=M}function u(M){a.objects=-1}function f(M){a.variables=M}function v(M){a.variables=-1}let m={objects:{select:d,unselect:u},variables:{select:f,unselect:v},stats:{}},h=A(()=>l(c)?e.plots[l(c)]:null),g=A(()=>l(h)?l(h).component:null);var b=Vd(),w=B(b),p=B(w),y=B(p);wo(y,()=>l(g),(M,E)=>{E(M,{get params(){return s()[l(c)]},get callbacks(){return m[l(h).scope]},get selected(){return a[l(h).scope]},get props(){return e.props}})});var C=q(p,2),N=B(C);{var _=M=>{var E=be(),S=$(E);{var I=F=>{var P=Ld(),D=B(P);ee(()=>we(D,r())),T(F,P)},R=F=>{var P=Rd(),D=B(P);ee(()=>we(D,o())),T(F,P)};W(S,F=>{a[l(h).scope]<0?F(I):F(R,!1)})}T(M,E)};W(N,M=>{l(h).scope==="objects"&&s()[l(c)].plotType!=="l"&&r().length>0&&M(_)})}var k=q(w,2);Ye(k,21,()=>Object.keys(e.plots),Ge,(M,E)=>{var S=be(),I=$(S);{var R=P=>{var D=Fd(),U=$(D);wu(U,{get title(){return l(h).label},labelWidth:12,get options(){return e.controls[l(c)]},get value(){return s()[l(c)]},set value(Z){s(s()[l(c)]=Z,!0)}});var Q=q(U,2);{var V=Z=>{var K=jd(),Y=B(K);kr(Y,()=>l(h).buttons,()=>a.objects),T(Z,K)};W(Q,Z=>{l(h).buttons&&a.objects>=0&&Z(V)})}T(P,D)},F=P=>{var D=Od();D.__keydown=[qd],D.__click=[Bd,c,E];var U=B(D);ee(()=>we(U,e.plots[l(E)].label)),T(P,D)};W(I,P=>{l(h)&&l(c)===l(E)?P(R):P(F,!1)})}T(M,S)}),T(t,b),he()}$e(["keydown","click"]);function xa(t,e){!e.callbacks||!e.callbacks.select||Mr(t,t.target.tagName,e.callbacks.select)}function Dd(t,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var Yd=ce("<text> </text>"),Ud=ce('<g class="series series-textlabels"></g>'),Wd=ce('<g class="series series-line"><polyline class="line"></polyline></g>'),Hd=ce("<rect></rect>"),Gd=ce('<g class="series series-bar"></g>'),Kd=ce("<text> </text>"),Xd=ce('<g class="series series-points series-points1"></g>'),Qd=ce('<g class="series series-points series-points1"><text> </text></g>'),Jd=ce('<g class="series series-bar"><rect></rect></g>'),Zd=ce('<g class="series series-text"><text> </text></g>'),$d=ce('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),ev=ce("<!><!><!><!><!>",1);function hn(t,e){ve(e,!0);let r=j(e,"shortenLabels",3,!0),o=j(e,"lineWidth",3,1),s=j(e,"markerSize",3,null),a=j(e,"pch",3,"●"),c=j(e,"colors",3,void 0),d=j(e,"mainColor",19,()=>va.cal),u=j(e,"faceColor",3,null),f=j(e,"selected",19,()=>-1),v=j(e,"xRange",15),m=j(e,"yRange",15);const h=Nt("axes"),g=A(()=>xt(e.xValues,"PlotSeries")),b=A(()=>l(g)?xt(e.yValues,"PlotSeries",l(g).length):null);qe(()=>{v(l(g)?qn(l(g)):null),m(l(b)?qn(l(b)):null)});const w=A(()=>u()===null?e.plotType==="p"?"transparent":"white":u()),p=A(()=>s()?s():e.plotType==="p"?1:.85),y=A(()=>Vo[h.scales().plot]),C=A(()=>nt([0],h.tY())[0]),N=A(()=>Do([.8],h.tX())[0]),_=A(()=>l(N)/2),k=A(()=>l(y));let M=A(()=>e.plotType==="l"||e.plotType==="b"?Wo(l(g),l(b),h.tX(),h.tY()):null),E=A(()=>l(g)?nt(l(g),h.tX()):null),S=A(()=>l(b)?nt(l(b),h.tY()):null),I=A(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(Y=>Y.slice(0,Zo)):e.labels:null),R=A(()=>c()&&c().length===l(g).length?c():Array(l(g).length).fill(d()));const F=A(()=>`font-size:${l(p)}em;fill:${l(w)};cursor:default;text-anchor:middle;stroke-width:2px;user-select:none;`),P=`font-size:0.85em;fill:${ma};cursor:default;text-anchor:middle;stroke:${ma};stroke-width:0.1px;user-select:none;`,D="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",U=`fill:transparent;stroke-width: ${o()}px;`,Q=`stroke-width:${o()}px;`;var V=be(),Z=$(V);{var K=Y=>{var H=ev(),re=$(H);{var te=ae=>{var oe=Ud();rt(oe,P),Ye(oe,21,()=>l(E),Ge,(Ce,fe,ye)=>{var ge=Yd(),tt=B(ge);ee(()=>{z(ge,"x",l(E)[ye]),z(ge,"y",l(S)[ye]),z(ge,"dy",l(b).v[ye]<0?l(k):-l(k)),we(tt,l(I)[ye])}),T(Ce,ge)}),T(ae,oe)};W(re,ae=>{e.showLabels&&l(I)&&ae(te)})}var X=q(re);{var ie=ae=>{var oe=Wd();rt(oe,U);var Ce=B(oe);ee(()=>{z(Ce,"points",l(M)),z(Ce,"stroke",d())}),T(ae,oe)};W(X,ae=>{(e.plotType==="l"||e.plotType==="b")&&ae(ie)})}var de=q(X);{var _e=ae=>{var oe=Gd();rt(oe,Q),oe.__click=[xa,e],Ye(oe,21,()=>l(E),Ge,(Ce,fe,ye)=>{var ge=Hd();ee(()=>{z(ge,"x",l(E)[ye]-l(_)),z(ge,"y",l(b).v[ye]<0?l(C):l(S)[ye]),z(ge,"fill",l(R)[ye]),z(ge,"width",l(N)),z(ge,"height",l(b).v[ye]<0?l(S)[ye]-l(C):l(C)-l(S)[ye])}),T(Ce,ge)}),T(ae,oe)};W(de,ae=>{e.plotType==="h"&&ae(_e)})}var me=q(de);{var Ae=ae=>{var oe=Xd();oe.__click=[xa,e],Ye(oe,21,()=>l(E),Ge,(Ce,fe,ye)=>{var ge=Kd(),tt=B(ge);ee(()=>{z(ge,"x",l(E)[ye]),z(ge,"y",l(S)[ye]),z(ge,"fill",u()),z(ge,"stroke",l(R)[ye]),we(tt,a())}),T(Ce,ge)}),ee(()=>rt(oe,l(F))),T(ae,oe)};W(me,ae=>{(e.plotType==="p"||e.plotType==="b")&&ae(Ae)})}var Me=q(me);{var le=ae=>{var oe=$d(),Ce=$(oe);z(Ce,"x",0),z(Ce,"y",0),Ce.__click=[Dd,e];var fe=q(Ce);{var ye=mt=>{var Be=Qd();rt(Be,D);var Ke=B(Be),pr=B(Ke);ee(()=>{z(Ke,"x",l(E)[f()]),z(Ke,"y",l(S)[f()]),z(Ke,"stroke",l(R)[f()]),we(pr,a())}),T(mt,Be)},ge=mt=>{var Be=Jd();rt(Be,Q);var Ke=B(Be);ee(()=>{z(Ke,"stroke",l(R)[f()]),z(Ke,"fill",l(R)[f()]),z(Ke,"x",l(E)[f()]-l(_)),z(Ke,"y",l(b).v[f()]<0?l(C):l(S)[f()]),z(Ke,"width",l(N)),z(Ke,"height",l(b).v[f()]<0?l(S)[f()]-l(C):l(C)-l(S)[f()])}),T(mt,Be)};W(fe,mt=>{e.plotType!=="h"?mt(ye):mt(ge,!1)})}var tt=q(fe);{var bt=mt=>{var Be=Zd();rt(Be,P);var Ke=B(Be);z(Ke,"stroke",ga),z(Ke,"fill",ga);var pr=B(Ke);ee(()=>{z(Ke,"x",l(E)[f()]),z(Ke,"y",l(S)[f()]),z(Ke,"dy",l(b).v[f()]<0?l(k):-l(k)),we(pr,l(I)[f()])}),T(mt,Be)};W(tt,mt=>{e.showLabels&&l(I)&&l(I).length>0&&mt(bt)})}T(ae,oe)};W(Me,ae=>{f()>=0&&ae(le)})}T(Y,H)};W(Z,Y=>{l(E)&&l(S)&&Y(K)})}T(t,V),he()}$e(["click"]);function tv(t,e){ve(e,!0);let r=j(e,"lineColor",3,"#606060"),o=j(e,"lineType",3,2),s=j(e,"alpha",3,.05),a=j(e,"xRange",15),c=j(e,"yRange",15);const d=Ee.seq(0,2*Math.PI,.05);function u(p,y,C,N){const _=p.eigenvals[y-1],k=Vn(1-s(),2),M=Math.sqrt(k*_),E=Ee.zeros(N.length);for(let S=0;S<N.length;S++)E.v[S]=M*C(N.v[S]);return[E,-M,M]}let f=A(()=>e.comp?e.comp[0]:null),v=A(()=>l(f)?u(e.resobj,l(f),Math.cos,d):null);qe(()=>{a(l(v)?[l(v)[1],l(v)[2]]:null)});let m=A(()=>e.comp?e.comp[1]:null),h=A(()=>l(m)?u(e.resobj,l(m),Math.sin,d):null);qe(()=>{c(l(h)?[l(h)[1],l(h)[2]]:null)});var g=be(),b=$(g);{var w=p=>{Xr(p,{get xValues(){return l(v)[0]},get yValues(){return l(h)[0]},get lineColor(){return r()},get lineType(){return o()}})};W(b,p=>{l(v)&&l(h)&&p(w)})}T(t,g),he()}function rv(t,e){ve(e,!0);let r=j(e,"confLevel",3,.95),o=j(e,"xRange",15),s=j(e,"yRange",15),a=A(()=>bd(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,r()));qe(()=>{l(a)?(o(l(a).xRange),s(l(a).yRange)):(o(null),s(null))});var c=be(),d=$(c);{var u=f=>{var v=be(),m=$(v);Ye(m,17,()=>l(a).ellipses,Ge,(h,g,b)=>{Xr(h,{get xValues(){return l(g).x},get yValues(){return l(g).y},get lineColor(){return e.groupColors[b]}})}),T(f,v)};W(d,f=>{l(a)&&l(a).ellipses&&f(u)})}T(t,c),he()}var nv=J("<!> <!> <!> <!> <!> <!>",1);function ka(t,e){ve(e,!0);let r=j(e,"alpha",3,.05),o=A(()=>e.props&&e.props.data?e.props.data:null),s=A(()=>e.props&&e.props.res?e.props.res:null),a=A(()=>e.params&&e.params.resID?l(s)[e.params.resID]:null),c=A(()=>e.params&&e.params.resID?l(o)[e.params.resID]:null);function d(V,Z,K,Y,H){if(!K)return null;let re=K[0],te=K[1];V&&Y&&(re=Math.min(re,Y[0]),te=Math.max(te,Y[1])),Z!=="none"&&H&&(re=Math.min(re,H[0]),te=Math.max(te,H[1]));const X=(te-re)*.1;return{min:re,max:te,d:X}}function u(V,Z){if(!(!V||!Z||Z<1||Z>V.ncomp))return new Ee(un(V,"scores",Z))}let f=ne(void 0),v=ne(void 0),m=ne(void 0),h=ne(void 0),g=ne(void 0),b=ne(void 0),w=A(()=>l(s)?Ue(l(a).objindices):null),p=A(()=>l(a)?l(a).objlabels.map(V=>V.slice(0,Zo)):null),y=A(()=>u(l(a),e.params.comp1)),C=A(()=>e.params.plotType==="p"?l(y):l(w)),N=A(()=>e.params.comp2?e.params.comp2:null),_=A(()=>u(l(a),l(N))),k=A(()=>ba(l(c),l(a),e.params.colorBy,e.params.colorByVar,e.params.resID)),M=A(()=>e.params.plotType==="p"?pa(l(a),e.params.comp1):"Objects"),E=A(()=>pa(l(a),e.params.comp2)),S=A(()=>d(e.params.showEllipse,e.params.confEllipse,l(f),l(m),l(g))),I=A(()=>l(S)?[l(S).min-l(S).d,l(S).max+l(S).d]:[0,1]),R=A(()=>d(e.params.showEllipse,e.params.confEllipse,l(v),l(h),l(b))),F=A(()=>l(R)?[l(R).min-l(R).d,l(R).max+l(R).d*(1+(e.params.colorBy!=="none"))]:[0,1]),P=A(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!l(k)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+l(k).varname+(l(c).varvaluesUnits?" "+l(c).varvaluesUnits:"")+")");var D=be(),U=$(D);{var Q=V=>{Nr(V,{get title(){return l(P)},get limX(){return l(I)},get limY(){return l(F)},get xLabel(){return l(M)},get yLabel(){return l(E)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(Z,K)=>{var Y=nv(),H=$(Y);const re=A(()=>[l(I)[0]]),te=A(()=>[l(I)[1]]);Sr(H,{get xStart(){return l(re)},get xEnd(){return l(te)},yStart:[0],yEnd:[0],lineColor:Qr});var X=q(H,2);{var ie=oe=>{const Ce=A(()=>[l(F)[0]]),fe=A(()=>[l(F)[1]]);Sr(oe,{xStart:[0],xEnd:[0],get yStart(){return l(Ce)},get yEnd(){return l(fe)},lineColor:Qr})};W(X,oe=>{e.params.plotType==="p"&&oe(ie)})}var de=q(X,2);{var _e=oe=>{const Ce=A(()=>[e.params.comp1,e.params.comp2]);tv(oe,{get alpha(){return r()},get resobj(){return l(a)},get comp(){return l(Ce)},get xRange(){return l(m)},set xRange(fe){O(m,fe,!0)},get yRange(){return l(h)},set yRange(fe){O(h,fe,!0)}})};W(de,oe=>{e.params.showEllipse&&e.params.plotType==="p"&&oe(_e)})}var me=q(de,2);{var Ae=oe=>{const Ce=A(()=>Number.parseInt(e.params.confEllipse)/100);rv(oe,{get xValues(){return l(C)},get yValues(){return l(_)},get confLevel(){return l(Ce)},get groups(){return l(a).classes},get groupNames(){return l(a).classNames},get groupColors(){return l(k).map},get xRange(){return l(g)},set xRange(fe){O(g,fe,!0)},get yRange(){return l(b)},set yRange(fe){O(b,fe,!0)}})};W(me,oe=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&l(k)&&oe(Ae)})}var Me=q(me,2);hn(Me,{get xValues(){return l(C)},get yValues(){return l(_)},get labels(){return l(p)},get selected(){return e.selected},get callbacks(){return e.callbacks},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return l(k).colors},get xRange(){return l(f)},set xRange(oe){O(f,oe,!0)},get yRange(){return l(v)},set yRange(oe){O(v,oe,!0)}});var le=q(Me,2);{var ae=oe=>{const Ce=A(()=>l(k).breaks!==null);fa(oe,{get show(){return l(Ce)},get colmap(){return l(k).map},get breaks(){return l(k).breaks},get labels(){return l(k).labels}})};W(le,oe=>{l(k)&&oe(ae)})}T(Z,Y)},$$slots:{default:!0}})};W(U,V=>{l(C)&&l(_)&&V(Q)})}T(t,D),he()}var ov=J("<!> <!> <!>",1);function lv(t,e){ve(e,!0);let r=A(()=>e.props?e.props.model:null);function o(_,k){return!_||!k||k<1||k>_.ncomp?null:new Ee(Pt(_,"loadings",k))}let s=ne(void 0),a=ne(void 0),c=A(()=>l(r)?Ue(l(r).varvalues):null),d=A(()=>l(r)?Ue(l(r).varindices):null),u=A(()=>o(l(r),e.params.comp1)),f=A(()=>!l(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:l(u),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&l(c)?{values:l(c),label:l(r).varvaluesName+(l(r).varvaluesUnits?", "+l(r).varvaluesUnits:"")}:{values:l(d),label:"Variables"}),v=A(()=>l(f)?l(f).values:null),m=A(()=>l(f)?l(f).label:null),h=A(()=>o(l(r),e.params.comp2)),g=A(()=>`PC${e.params.comp2}`),b=A(()=>{if(l(a)&&l(a)[0]<Number.POSITIVE_INFINITY&&l(a)[1]>Number.NEGATIVE_INFINITY){const _=(l(a)[1]-l(a)[0])*.1;return[l(a)[0]-_,l(a)[1]+_]}else return[0,1]}),w=A(()=>{if(l(s)&&l(s)[0]<Number.POSITIVE_INFINITY&&l(s)[1]>Number.NEGATIVE_INFINITY){const _=(l(s)[1]-l(s)[0])*.1;return e.params.plotType==="l"&&l(r).varrev?[l(s)[1]+_,l(s)[0]-_]:[l(s)[0]-_,l(s)[1]+_]}else return[0,1]}),p=A(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const _=Math.max(Math.abs(l(w)[0]),Math.abs(l(b)[0]),l(w)[1],l(b)[1])*1.05;return{x:[-_,_],y:[-_,_]}}else{const _=Math.max(Math.abs(l(b)[0]),l(b)[1])*1.05;return{x:l(w),y:[-_,_]}}return{x:l(w),y:l(b)}});var y=be(),C=$(y);{var N=_=>{Nr(_,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return l(m)},get yLabel(){return l(g)},get limX(){return l(p).x},get limY(){return l(p).y},children:(k,M)=>{var E=ov(),S=$(E);const I=A(()=>[l(p).x[0]]),R=A(()=>[l(p).x[1]]);Sr(S,{get xStart(){return l(I)},get xEnd(){return l(R)},yStart:[0],yEnd:[0],lineColor:Qr});var F=q(S,2);{var P=U=>{const Q=A(()=>[l(p).y[0]]),V=A(()=>[l(p).y[1]]);Sr(U,{xStart:[0],xEnd:[0],get yStart(){return l(Q)},get yEnd(){return l(V)},lineColor:Qr})};W(F,U=>{e.params.plotType==="p"&&U(P)})}var D=q(F,2);hn(D,{get xValues(){return l(v)},get yValues(){return l(h)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return l(r).varlabels},shortenLabels:!1,get xRange(){return l(s)},set xRange(U){O(s,U,!0)},get yRange(){return l(a)},set yRange(U){O(a,U,!0)}}),T(k,E)},$$slots:{default:!0}})};W(C,_=>{l(v)&&l(h)&&_(N)})}T(t,y),he()}var sv=J("<!> <!> <!> <!> <!> <!> <!>",1);function Ea(t,e){ve(e,!0),j(e,"alpha",3,.05);const r="#2679B2",o="#D22C2F",s="#667892",a="#927866";let c=A(()=>e.props?e.props.model:null),d=A(()=>e.props?e.props.res:null),u=A(()=>l(d)?l(d)[e.params.resID]:null);function f(M,E){return`PC${E} (${(M.stat.expvar[E-1]*100).toFixed(1)}%)`}function v(M,E,S){if(!E||!S||M<1||M>l(d).ncomp)return null;const I=un(E,"scores",M).slice(),R=Pt(S,"loadings",M),F=I.length,P=R.length;let D=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY;const Q=new Array(F);for(let X=0;X<F;X++)I[X]=I[X]/Math.sqrt(l(m)[M-1]*(F-1)),D>I[X]&&(D=I[X]),U<I[X]&&(U=I[X]),Q[X]=I[X]<0?1:3;const V=new Array(F);for(let X=0;X<P;X++)D>R[X]&&(D=R[X]),U<R[X]&&(U=R[X]),V[X]=R[X]<0?1:3;const Z=new Ee(I),K=new Ee(R),Y=f(E,M),H=(U-D)/15,re=[D-H,U+H],te=Math.max(Math.abs(re[0]),re[1]);return{values:Z,end:K,lim:re,label:Y,tpos:Q,ppos:V,mx:te}}let m=A(()=>l(c)?Pt(l(c),"eigenvals"):null),h=A(()=>l(u)?Ee.zeros(l(u).ncols):null),g=A(()=>l(u)?Ee.zeros(l(u).ncols):null),b=A(()=>v(e.params.comp1,l(u),l(c))),w=A(()=>v(e.params.comp2,l(u),l(c))),p=A(()=>l(b)&&l(w)?Math.max(l(b).mx,l(w).mx)*1.05:0),y=A(()=>l(b)?e.params.axesEqual?[-l(p),l(p)]:l(b).lim:[0,1]),C=A(()=>l(w)?e.params.axesEqual?[-l(p),l(p)]:l(w).lim:[0,1]);var N=be(),_=$(N);{var k=M=>{Nr(M,{get limX(){return l(y)},get limY(){return l(C)},get xLabel(){return l(b).label},get yLabel(){return l(w).label},fileName:"plot-biplot",title:"Bi-plot (scores and loadings)",children:(E,S)=>{var I=sv(),R=$(I);const F=A(()=>[l(y)[0]]),P=A(()=>[l(y)[1]]);Sr(R,{get xStart(){return l(F)},get xEnd(){return l(P)},yStart:[0],yEnd:[0],lineColor:Qr});var D=q(R,2);const U=A(()=>[l(C)[0]]),Q=A(()=>[l(C)[1]]);Sr(D,{xStart:[0],xEnd:[0],get yStart(){return l(U)},get yEnd(){return l(Q)},lineColor:Qr});var V=q(D,2);Qo(V,{get xValues(){return l(b).values},get yValues(){return l(w).values},lineColor:o,borderWidth:1.5});var Z=q(V,2);Sr(Z,{get xStart(){return l(h)},get yStart(){return l(g)},get xEnd(){return l(b).end},get yEnd(){return l(w).end},lineColor:r});var K=q(Z,2);Qo(K,{get xValues(){return l(b).end},get yValues(){return l(w).end},marker:1,lineColor:r,faceColor:r,markerSize:.4});var Y=q(K,2);{var H=X=>{Xo(X,{get xValues(){return l(b).values},get yValues(){return l(w).values},get labels(){return l(u).objlabels},get pos(){return l(w).tpos},textSize:.75,faceColor:a})};W(Y,X=>{(e.params.showLabels==="obj"||e.params.showLabels==="both")&&X(H)})}var re=q(Y,2);{var te=X=>{Xo(X,{get xValues(){return l(b).end},get yValues(){return l(w).end},get labels(){return l(u).varlabels},textSize:.75,get pos(){return l(w).ppos},faceColor:s})};W(re,X=>{(e.params.showLabels==="var"||e.params.showLabels==="both")&&X(te)})}T(E,I)},$$slots:{default:!0}})};W(_,M=>{l(b)&&l(w)&&M(k)})}T(t,N),he()}var av=J("<!> <!> <!> <!>",1);function Aa(t,e){ve(e,!0);let r=A(()=>e.props?e.props.res:null),o=A(()=>l(r)?l(r)[e.params.resID]:null);const s=[-.05,1.1],a={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"};let c=A(()=>e.params.varForm==="cumulative"?"cum":""),d=A(()=>e.params.varType==="explained"?"exp":"res"),u=A(()=>l(c)+l(d)+"var"),f=A(()=>a[l(u)]),v=A(()=>l(o).ncomp>1?1-l(o).ncomp*.065:-.1),m=A(()=>l(o).ncomp>1?l(o).ncomp*1.065:2.1),h=A(()=>[l(v),l(m)]),g=A(()=>l(o)?l(o).stat.components:null),b=A(()=>l(o)?Ue(l(o).stat[l(u)]):null),w=A(()=>l(b)?Array.from(l(b).v).map(N=>N.toFixed(N<.1?3:2)):null);var p=be(),y=$(p);{var C=N=>{const _=A(()=>"plot-"+l(u));Nr(N,{get title(){return l(f)},get limX(){return l(h)},limY:s,get fileName(){return l(_)},whole:!0,children:(k,M)=>{var E=av(),S=$(E);hn(S,{get xValues(){return l(g)},get yValues(){return l(b)},get labels(){return l(w)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return ha.cal},lineWidth:1.5});var I=q(S,2);aa(I,{showGrid:!0,label:"Number of PCs",whole:!0});var R=q(I,2);ia(R,{showGrid:!0,label:"Variance"});var F=q(R,2);ca(F,{}),T(k,E)},$$slots:{default:!0}})};W(y,N=>{l(g)&&l(b)&&N(C)})}T(t,p),he()}function iv(t,e){ve(e,!0);let r=A(()=>e.props?e.props.model:null);const o={none:"λ",log:"log(λ)",sqrt:"sqrt(λ)"};function s(k,M){const E=l(r).nrows-1;if(M==="none")return k.apply(S=>S*E);if(M==="log")return k.apply(S=>Math.log(S*E));if(M==="sqrt")return k.apply(S=>Math.sqrt(S*E))}let a=A(()=>l(r)?new Ee(Pt(l(r),"eigenvals")):null),c=A(()=>l(r)?Ee.seq(1,l(r).ncomp):null),d=A(()=>l(a)?s(l(a),e.params.transform):null),u=A(()=>l(d)?Array.from(l(d).v).map(k=>k.toFixed(k<.1?3:2)):null);const f=A(()=>l(r).ncomp>10?l(r).ncomp*.05:.5),v=A(()=>l(r).ncomp>1?1:0),m=A(()=>l(r).ncomp>1?l(r).ncomp:2),h=A(()=>[l(v)-l(f),l(m)+l(f)]);let g=A(()=>l(d)?e.params.transform==="none"?0:l(d).v[l(r).ncomp-1]:0),b=A(()=>l(d)?l(d).v[0]:1),w=A(()=>(l(b)-l(g))/18),p=A(()=>l(d)?[l(g)-l(w),l(b)+l(w)]:[0,1]),y=A(()=>o[e.params.transform]);var C=be(),N=$(C);{var _=k=>{Nr(k,{get limX(){return l(h)},get limY(){return l(p)},get yLabel(){return l(y)},whole:!0,xLabel:"Number of PCs",title:"Eigenvalues",fileName:"plot-eigenvalues",children:(M,E)=>{hn(M,{get xValues(){return l(c)},get yValues(){return l(d)},get labels(){return l(u)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return ha.cal},lineWidth:1.5})},$$slots:{default:!0}})};W(N,k=>{l(c)&&l(d)&&k(_)})}T(t,C),he()}var cv=J("<!> <!> <!> <!>",1);function Ca(t,e){ve(e,!0);let r=A(()=>e.props&&e.props.data?e.props.data:null),o=A(()=>e.props&&e.props.res?e.props.res:null),s=A(()=>e.params&&e.params.resID?l(o)[e.params.resID]:null),a=A(()=>e.params&&e.params.resID?l(r)[e.params.resID]:null);const c="#909090",d=100;function u(Y,H,re,te){if(!Y||!H)return null;const X=Y.length;let ie=Ee.zeros(X),de=Number.NEGATIVE_INFINITY,_e=Number.POSITIVE_INFINITY;if(te==="log")for(let me=0;me<X;me++){const Ae=Math.log(1+Y[me]/re);ie.v[me]=Ae,de=Math.max(de,Ae),_e=Math.min(_e,Ae)}else for(let me=0;me<X;me++){const Ae=Y[me]/re;ie.v[me]=Ae,de=Math.max(de,Ae),_e=Math.min(_e,Ae)}return{values:ie,min:_e,max:de}}function f(Y,H){return{q:"Orthogonal distance",h:"Score distance"}[Y]+", "+(H==="log"?"log(1 + "+Y+"/"+Y+"0)":Y+"/"+Y+"0")}function v(Y,H,re,te){const X=H+re,de=Vn(Y,X)/re,_e=-H/re,me=-de/_e,Ae=Ee.seq(0,me*1,me/d),Me=Ae.apply(le=>le*_e+de);return{x:te==="log"?Ae.apply(le=>Math.log(1+le)):Ae,y:te==="log"?Me.apply(le=>Math.log(1+le)):Me}}let m=A(()=>e.params.limType==="classic"?{h:l(s).cNh,q:l(s).cNq}:{h:l(s).rNh,q:l(s).rNq}),h=A(()=>e.params.limType==="classic"?{h:l(s).ch0,q:l(s).cq0}:{h:l(s).rh0,q:l(s).rq0}),g=A(()=>({h:l(m).h[e.params.ncomp-1],q:l(m).q[e.params.ncomp-1]})),b=A(()=>({h:l(h).h[e.params.ncomp-1],q:l(h).q[e.params.ncomp-1]})),w=A(()=>e.params.alpha?1-e.params.alpha/100:.95),p=A(()=>e.params.gamma?1-e.params.gamma/100:.99),y=A(()=>v(l(w),l(g).h,l(g).q,e.params.transType)),C=A(()=>v(Math.pow(l(p),1/l(s).nrows),l(g).h,l(g).q,e.params.transType)),N=A(()=>ba(l(a),l(s),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),_=A(()=>l(s)?un(l(s),"hdist",e.params.ncomp):null),k=A(()=>l(s)?un(l(s),"qdist",e.params.ncomp):null),M=A(()=>u(l(_),l(g).h,l(b).h,e.params.transType)),E=A(()=>u(l(k),l(g).q,l(b).q,e.params.transType)),S=A(()=>l(s)?l(s).objlabels.map(Y=>Y.slice(0,Zo)):null),I=A(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),R=A(()=>f("h",e.params.transType)),F=A(()=>f("q",e.params.transType)),P=ne(void 0),D=ne(void 0),U=A(()=>{if(!l(M)||!l(P))return[0,1];const Y=Math.max(l(M).max,l(C).x.v[d-1]);return[-.02*(Y-l(P)[0]),1.05*Y]}),Q=A(()=>{if(!l(E)||!l(D))return[0,1];const Y=Math.max(l(E).max,l(C).y.v[0]);return[-.02*(Y-l(D)[0]),(1.05+.1*(e.params.colorBy!=="none"))*Y]});var V=be(),Z=$(V);{var K=Y=>{Nr(Y,{get title(){return l(I)},get limX(){return l(U)},get limY(){return l(Q)},get xLabel(){return l(R)},get yLabel(){return l(F)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(H,re)=>{var te=cv(),X=$(te);{var ie=le=>{Xr(le,{get xValues(){return l(y).x},get yValues(){return l(y).y},lineColor:c,lineType:2})};W(X,le=>{l(y)&&le(ie)})}var de=q(X,2);{var _e=le=>{Xr(le,{get xValues(){return l(C).x},get yValues(){return l(C).y},lineColor:c,lineType:3})};W(de,le=>{l(C)&&le(_e)})}var me=q(de,2);hn(me,{get labels(){return l(S)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(M).values},get yValues(){return l(E).values},plotType:"p",get showLabels(){return e.params.showLabels},get colors(){return l(N).colors},get xRange(){return l(P)},set xRange(le){O(P,le,!0)},get yRange(){return l(D)},set yRange(le){O(D,le,!0)}});var Ae=q(me,2);{var Me=le=>{const ae=A(()=>l(N).breaks!==null);fa(le,{get show(){return l(ae)},get colmap(){return l(N).map},get breaks(){return l(N).breaks},get labels(){return l(N).labels}})};W(Ae,le=>{l(N)&&le(Me)})}T(H,te)},$$slots:{default:!0}})};W(Z,Y=>{l(M)&&l(E)&&Y(K)})}T(t,V),he()}function Ma(t){const e=Object.keys(t),r=t[e[0]],o={ncomp:{el:mr,hidden:!1,default:r.ncomp>1?2:1,label:"# PCs",props:{min:1,max:r.ncomp}},resID:{el:ht,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},transType:{el:ht,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:ht,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}};return r.classNames&&r.classNames.length>1&&(o.colorBy={el:ht,hidden:!1,default:"none",label:"Color by",props:{options:["none","groups"]}}),o}function uv(t){return{plotType:{el:Wn,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},transform:{el:ht,hidden:!1,default:"none",label:"Type",props:{options:["none","sqrt","log"]}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}}}function fv(t){return{plotType:{el:Wn,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:mr,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:mr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},axesEqual:{el:Bt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function Sa(t){const e=Object.keys(t),r=t[e[0]],o=r.classNames&&r.classNames.length>1?["none","groups","variable"]:["none","variable"];return{plotType:{el:Wn,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:mr,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:mr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},resID:{el:ht,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},showEllipse:{el:Bt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:ht,hidden:!1,default:"none",label:"Color by",props:{options:o}},colorByVar:{el:mr,hidden:!0,default:1,label:"Variable",props:{min:1,max:r.ncols}},confEllipse:{el:ht,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}function Na(t){const e=Object.keys(t);return t[e[0]],{plotType:{el:Wn,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},resID:{el:ht,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},varType:{el:ht,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:ht,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}}}function za(t){const e=Object.keys(t),r=t[e[0]];return{resID:{el:ht,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},comp2:{el:mr,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:mr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:ht,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","obj","var","both"]}},axesEqual:{el:Bt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}var dv=J("<!> <!>",1);function vv(t,e){ve(e,!0);const r=(m,h=ut)=>{Se(m,{label:"Selected",children:(g,b)=>{qt(g,{onclick:()=>e.markOutlier(h()),text:"remove"})},$$slots:{default:!0}})},o=(m,h=ut)=>{Se(m,{label:"Selected",children:(g,b)=>{var w=dv(),p=$(w);qt(p,{onclick:()=>e.showContributions(h(),l(u).distance.ncomp),text:"plot"});var y=q(p,2);qt(y,{onclick:()=>e.markOutlier(h()),text:"remove"}),T(g,w)},$$slots:{default:!0}})};let s={cal:e.resobj},a={cal:e.dataset};const c=A(()=>({scores:{label:"Scores",scope:"objects",component:ka,buttons:r},loadings:{label:"Loadings",scope:"variables",component:lv},biplot:{label:"Bi-plot",scope:"stats",component:Ea},variance:{label:"Variance",scope:"stats",component:Aa},eigenvals:{label:"Eigenvalues",scope:"stats",component:iv},distance:{label:"Distances",scope:"objects",component:Ca,buttons:o}})),d=Ze({scores:Sa(s),loadings:fv(e.model),biplot:za(s),variance:Na(s),eigenvals:uv(e.model),distance:Ma(s)});let u=ne(Ze({scores:$t(d.scores),loadings:$t(d.loadings),biplot:$t(d.biplot),variance:$t(d.variance),eigenvals:$t(d.eigenvals),distance:$t(d.distance)}));qe(()=>{l(u).scores.plotType!=="p"?(d.scores.comp1.hidden=!0,d.scores.showEllipse.hidden=!0,l(u).scores.showEllipse=!1):(d.scores.comp1.hidden=!1,d.scores.showEllipse.hidden=!1),l(u).scores.plotType==="l"||l(u).scores.plotType==="b"?(d.scores.colorBy.hidden=!0,l(u).scores.colorBy="none"):d.scores.colorBy.hidden=!1,l(u).scores.colorBy==="variable"?d.scores.colorByVar.hidden=!1:d.scores.colorByVar.hidden=!0,l(u).scores.colorBy==="groups"&&l(u).scores.plotType==="p"?d.scores.confEllipse.hidden=!1:(d.scores.confEllipse.hidden=!0,l(u).scores.confEllipse="none")}),qe(()=>{l(u).loadings.plotType!=="p"?d.loadings.comp1.hidden=!0:d.loadings.comp1.hidden=!1});const f=A(()=>({res:s,model:e.model,data:a})),v={markOutlier:e.markOutlier,showContributions:e.showContributions};_a(t,{get plots(){return l(c)},get controls(){return d},get props(){return l(f)},callbacks:v,get params(){return l(u)},set params(m){O(u,m,!0)}}),he()}var hv=J('<div class="outliers-pane svelte-1dk0fsp"><!></div>'),mv=J('<div class="model-calculator svelte-1dk0fsp"><!></div>'),gv=J('<div class="result-stats svelte-1dk0fsp"><!></div>'),pv=J(`<p class="svelte-1dk0fsp">In this tab you can train a PCA model and explore how well it describes the training set. After creating the model you can save it to a file and apply it to another, new set of samples, and see how well this new set is explained by the model (tab <strong>Project</strong>).</p> <p class="svelte-1dk0fsp"><strong>Step 1.</strong></p> <p class="svelte-1dk0fsp">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1dk0fsp">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. If this is the case, select <em>values</em> option for the header. In this case you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1dk0fsp">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. It is also possible to have group labels, which you can use, for example, to color group samples on the score plot. Here is an example how data structure may look like (note, that column with group, row labels and header are optional):</p> <div class="svelte-1dk0fsp"><table class="svelte-1dk0fsp"><thead class="svelte-1dk0fsp"><tr class="svelte-1dk0fsp"><td class="svelte-1dk0fsp">Name</td><td class="svelte-1dk0fsp">Group</td><td class="svelte-1dk0fsp">x1</td><td class="svelte-1dk0fsp">x2</td><td class="svelte-1dk0fsp">x3</td></tr></thead><tbody class="svelte-1dk0fsp"><tr><td class="svelte-1dk0fsp">O1</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">3.8</td><td class="svelte-1dk0fsp">1.3</td><td class="svelte-1dk0fsp">13.6</td></tr><tr><td class="svelte-1dk0fsp">O2</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">11.1</td><td class="svelte-1dk0fsp">12.3</td><td class="svelte-1dk0fsp">3.3</td></tr><tr><td class="svelte-1dk0fsp">O3</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">1.2</td><td class="svelte-1dk0fsp">2.3</td><td class="svelte-1dk0fsp">4.2</td></tr></tbody></table></div> <p class="svelte-1dk0fsp"></p>`,1),bv=J('<p class="svelte-1dk0fsp"><strong>Step 2</strong></p> <p class="svelte-1dk0fsp">Next step is to create a global PCA model for the training set. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to select number of components for every plot.</p>',1),wv=J('<div class="help-text svelte-1dk0fsp"><!></div>'),yv=J('<!> <div class="app-container svelte-1dk0fsp"><div class="app-controls svelte-1dk0fsp"><div class="data-loader svelte-1dk0fsp"><!></div> <!> <!> <!></div> <div class="app-content svelte-1dk0fsp"><!></div></div>',1);function _v(t,e){ve(e,!0);const r=A(()=>e.session.train);let o=ne(-1),s=ne(1),a=ne(!1);function c(P){if(P<0||P>l(r).resobj.nrows-1)return;const D=l(r).resobj.objindices[P];D>=0&&!l(r).outliers.includes(D)&&(l(r).outliers.push(D),l(r).model=null)}function d(P,D){P<0||(O(o,P,!0),O(a,!0))}function u(){O(a,!1),O(o,-1),O(s,1)}function f(){l(r).outliers=[],l(r).model=null}function v(){l(r).outliers.pop(),l(r).model=null}qe(()=>{l(r).dataset===null&&(l(r).model=null,l(r).outliers=[]),l(r).model===null&&(l(r).resobj=null)}),qe(()=>{const P=Jt(()=>JSON.stringify(e.session,qo));e.backupSession(P,l(r).model,l(r).dataset,l(r).resobj)});var m=yv(),h=$(m);{var g=P=>{wa(P,Hr(()=>l(r),{get ncomp(){return l(s)},get selected(){return l(o)},closeModal:u}))};W(h,P=>{l(a)&&P(g)})}var b=q(h,2),w=B(b),p=B(w),y=B(p);Vs(y,{className:"Group",get dataset(){return l(r).dataset},set dataset(P){l(r).dataset=P}});var C=q(p,2);{var N=P=>{var D=hv(),U=B(D);Ys(U,{get outliers(){return l(r).outliers},get dataset(){return l(r).dataset},resetOutliers:f,undoOutliers:v}),T(P,D)};W(C,P=>{l(r).outliers&&l(r).outliers.length>0&&P(N)})}var _=q(C,2);{var k=P=>{var D=mv(),U=B(D);Pd(U,{get WASM(){return e.WASM},downloadModel:Id,downloadResults:ya,get dataset(){return l(r).dataset},get outliers(){return l(r).outliers},get model(){return l(r).model},set model(Q){l(r).model=Q},get resobj(){return l(r).resobj},set resobj(Q){l(r).resobj=Q}}),T(P,D)};W(_,P=>{l(r).dataset&&P(k)})}var M=q(_,2);{var E=P=>{var D=gv(),U=B(D);Ds(U,{get resobj(){return l(r).resobj}}),T(P,D)};W(M,P=>{l(r).resobj&&P(E)})}var S=q(w,2),I=B(S);{var R=P=>{var D=wv(),U=B(D);{var Q=Z=>{var K=pv();T(Z,K)},V=Z=>{var K=be(),Y=$(K);{var H=re=>{var te=bv();T(re,te)};W(Y,re=>{l(r).model||re(H)})}T(Z,K)};W(U,Z=>{l(r).dataset?Z(V,!1):Z(Q)})}T(P,D)},F=P=>{var D=be(),U=$(D);Rn(U,()=>l(r).resobj,Q=>{vv(Q,Hr({markOutlier:c,showContributions:d},()=>l(r)))}),T(P,D)};W(I,P=>{!l(r).resobj||!l(r).model?P(R):P(F,!1)})}T(t,m),he()}var xv=J("<!> <!>",1),kv=J('<p class="info-text svelte-3v2vv7"><span>Model file:</span> <span class="file-name svelte-3v2vv7"> </span><br> <span style="color:#a0a0a0;">Model info:</span> </p> <!>',1),Ev=J("<p><!></p>"),Av=J("<!> <!>",1);function Cv(t,e){ve(e,!0);let r=j(e,"model",15),o=ne(""),s=ne("neutral"),a=ne("");function c(p){try{const y=JSON.parse(p,zs);if(Array.isArray(y.v)&&(y.v=Float64Array.from(y.v)),!Object.keys(y).includes("class")||y.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain PCA model.");y.fileName=l(f),r(y),O(s,"success"),O(a,"")}catch(y){console.log(y),r(null),O(s,"error"),O(a,y,!0)}}function d(p){const y=new FileReader;y.onload=()=>{c(y.result)},y.readAsText(l(o))}function u(){O(o,""),r(null),O(s,"neutral"),O(a,"")}qe(()=>{l(o)===null?(r(null),O(s,"neutral"),O(a,"")):(O(s,"neutral"),O(a,""))});let f=A(()=>l(o)?l(o).name.replace(/\.[^/.]+$/,""):"");var v=Av(),m=$(v);{var h=p=>{var y=xv(),C=$(y);Rn(C,()=>l(o),k=>{Se(k,{name:"file-selector",children:(M,E)=>{qs(M,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(o)},set file(S){O(o,S,!0)}})},$$slots:{default:!0}})});var N=q(C,2);{var _=k=>{Se(k,{name:"load-button",label:" ",children:(M,E)=>{qt(M,{onclick:d,text:"Load"})},$$slots:{default:!0}})};W(N,k=>{l(o)&&k(_)})}T(p,y)},g=p=>{Se(p,{name:"info",class:"info",children:(y,C)=>{var N=kv(),_=$(N),k=q(B(_),2),M=B(k),E=q(k,4),S=q(_,2);dn(S,{onclick:u}),ee(()=>{z(k,"title",r().fileName),we(M,r().fileName),we(E,` ${r().ncomp??""} PCs${(r().center?", centered":"")??""}${(r().scale?", scaled":"")??""}`)}),T(y,N)},$$slots:{default:!0}})};W(m,p=>{r()?p(g,!1):p(h)})}var b=q(m,2);{var w=p=>{Se(p,{name:"error",status:"error",children:(y,C)=>{var N=Ev(),_=B(N);pt(_,()=>l(a),!1,!1),T(y,N)},$$slots:{default:!0}})};W(b,p=>{(l(s)==="error"||l(a))&&p(w)})}T(t,v),he()}var Mv=J("<!> <!>",1);function Sv(t,e){ve(e,!0);const r=(m,h=ut)=>{Se(m,{label:"Selected",children:(g,b)=>{qt(g,{onclick:()=>e.markOutlier(h()),text:"remove"})},$$slots:{default:!0}})},o=(m,h=ut)=>{Se(m,{label:"Selected",children:(g,b)=>{var w=Mv(),p=$(w);qt(p,{onclick:()=>e.showContributions(h(),l(u).distance.ncomp),text:"plot"});var y=q(p,2);qt(y,{onclick:()=>e.markOutlier(h()),text:"remove"}),T(g,w)},$$slots:{default:!0}})};let s={new:e.resobj},a={new:e.dataset};const c=A(()=>({scores:{label:"Scores",scope:"objects",component:ka,buttons:r},biplot:{label:"Bi-plot",scope:"stats",component:Ea},variance:{label:"Variance",scope:"stats",component:Aa},distance:{label:"Distances",scope:"objects",component:Ca,buttons:o}})),d=Ze({scores:Sa(s),biplot:za(s),variance:Na(s),distance:Ma(s)});let u=ne(Ze({scores:$t(d.scores),biplot:$t(d.biplot),variance:$t(d.variance),distance:$t(d.distance)}));qe(()=>{l(u).scores.plotType!=="p"?(d.scores.comp1.hidden=!0,d.scores.showEllipse.hidden=!0,l(u).scores.showEllipse=!1):(d.scores.comp1.hidden=!1,d.scores.showEllipse.hidden=!1),l(u).scores.plotType==="l"||l(u).scores.plotType==="b"?(d.scores.colorBy.hidden=!0,l(u).scores.colorBy="none"):d.scores.colorBy.hidden=!1,l(u).scores.colorBy==="variable"?d.scores.colorByVar.hidden=!1:d.scores.colorByVar.hidden=!0,l(u).scores.colorBy==="groups"&&l(u).scores.plotType==="p"?d.scores.confEllipse.hidden=!1:(d.scores.confEllipse.hidden=!0,l(u).scores.confEllipse="none")});const f=A(()=>({res:s,model:e.model,data:a})),v={markOutlier:e.markOutlier,showContributions:e.showContributions};_a(t,{get plots(){return l(c)},get controls(){return d},get props(){return l(f)},callbacks:v,get params(){return l(u)},set params(m){O(u,m,!0)}}),he()}var Nv=J('<div class="data-loader svelte-1mqkfgh"><!></div>'),zv=J('<div class="outliers-pane svelte-1mqkfgh"><!></div>'),Tv=J('<div class="buttons"><!></div>'),Pv=J('<div class="model-dowloader svelte-1mqkfgh"><!></div> <div class="result-stats svelte-1mqkfgh"><!></div>',1),Iv=J('<p class="svelte-1mqkfgh"><strong>Step 1.</strong></p> <p class="svelte-1mqkfgh">Load file with PCA model you created earlier in tab <strong>Train</strong></p>',1),Lv=J('<p class="svelte-1mqkfgh"><strong>Step 2.</strong></p> <p class="svelte-1mqkfgh">Load your dataset set from a CSV file. The interface and selection steps are similar to the ones you used in <em>Train</em> tab. However, in this case you do not need to specify all details for header, just select if the new dataset has header as a first row or not. All values will be inherited from the model object.</p> <p class="svelte-1mqkfgh"><strong>It is important that the new dataset has same variables as the training set used to create the model.</strong></p>',1),Rv=J('<div class="help-text svelte-1mqkfgh"><p class="svelte-1mqkfgh">In this tab you can project new data points to a previosly trained PCA model and explore main outcomes: scores, distances and variances.</p> <!> <p class="svelte-1mqkfgh"></p></div>'),jv=J('<!> <div class="app-container svelte-1mqkfgh"><div class="app-controls svelte-1mqkfgh"><div class="model-loader svelte-1mqkfgh"><!></div> <!> <!> <!></div> <div class="app-content svelte-1mqkfgh"><!></div></div>',1);function Fv(t,e){ve(e,!0);const r=A(()=>e.session.new);let o=ne(-1),s=ne(1),a=ne(!1);function c(P){if(P<0||P>l(r).resobj.nrows-1)return;const D=l(r).resobj.objindices[P];D>=0&&!l(r).outliers.includes(D)&&(l(r).outliers.push(D),l(r).resobj=null)}function d(P,D){P<0||(O(o,P,!0),O(a,!0))}function u(){O(a,!1),O(o,-1),O(s,1)}function f(){l(r).outliers=[],l(r).resobj=null}function v(){l(r).outliers.pop(),l(r).resobj=null}qe(()=>{l(r).model===null&&(l(r).dataset=null),l(r).dataset===null&&(l(r).outliers=[],l(r).resobj=null)}),qe(()=>{const P=Jt(()=>JSON.stringify(e.session,qo));e.backupSession(P,l(r).model,l(r).dataset,l(r).resobj)});var m=jv(),h=$(m);{var g=P=>{wa(P,Hr(()=>l(r),{get ncomp(){return l(s)},get selected(){return l(o)},closeModal:u}))};W(h,P=>{l(a)&&P(g)})}var b=q(h,2),w=B(b),p=B(w),y=B(p);Cv(y,{get model(){return l(r).model},set model(P){l(r).model=P}});var C=q(p,2);{var N=P=>{var D=Nv(),U=B(D);Vs(U,{get outliers(){return l(r).outliers},get WASM(){return e.WASM},get model(){return l(r).model},className:"Group",get dataset(){return l(r).dataset},set dataset(Q){l(r).dataset=Q},get resobj(){return l(r).resobj},set resobj(Q){l(r).resobj=Q}}),T(P,D)};W(C,P=>{l(r).model&&P(N)})}var _=q(C,2);{var k=P=>{var D=zv(),U=B(D);Ys(U,{get dataset(){return l(r).dataset},get outliers(){return l(r).outliers},resetOutliers:f,undoOutliers:v}),T(P,D)};W(_,P=>{l(r).outliers&&l(r).outliers.length>0&&P(k)})}var M=q(_,2);{var E=P=>{var D=Pv(),U=$(D),Q=B(U);Se(Q,{label:"Download",children:(K,Y)=>{var H=Tv(),re=B(H);qt(re,{text:"Results",onclick:()=>ya(l(r).resobj,l(r).dataset,"new",l(r).outliers)}),T(K,H)},$$slots:{default:!0}});var V=q(U,2),Z=B(V);Ds(Z,{get resobj(){return l(r).resobj}}),T(P,D)};W(M,P=>{l(r).resobj&&P(E)})}var S=q(w,2),I=B(S);{var R=P=>{var D=Rv(),U=q(B(D),2);{var Q=Z=>{var K=Iv();T(Z,K)},V=(Z,K)=>{{var Y=H=>{var re=Lv();T(H,re)};W(Z,H=>{l(r).dataset||H(Y)},K)}};W(U,Z=>{l(r).model?Z(V,!1):Z(Q)})}T(P,D)},F=P=>{var D=be(),U=$(D);Rn(U,()=>l(r).resobj,Q=>{Sv(Q,Hr({markOutlier:c,showContributions:d},()=>l(r)))}),T(P,D)};W(I,P=>{l(r).resobj?P(F,!1):P(R)})}T(t,m),he()}function Ta(t,e){O(e,!0)}function qv(t,e,r){const o=Bo(new Date),s=e.appID+"-session-"+o+".json";l(r).date=o;const a=JSON.stringify(l(r),qo),c=new Blob([a],{type:"text/json"}),d=window.URL.createObjectURL(c),u=document.createElement("a");u.setAttribute("href",d),u.setAttribute("download",s),u.click()}function Bv(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var Ov=J('<sup style="color:red">β</sup>'),Vv=J('<li><button class="svelte-1cyr8za"> </button></li>'),Dv=J("<div><!></div>"),Yv=J('<div class="info-container svelte-1cyr8za"><!></div>'),Uv=J('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function Wv(t,e){ve(e,!0);let r=j(e,"tabs",19,()=>[]),o=j(e,"isBeta",3,!1);const s="mdatools-"+e.appID;let a=ne(!1),c=ne(void 0),d=ne("Current session "),u=ne(!1);function f(_){O(d,_,!0),O(u,!0),setTimeout(()=>{O(d,"Current session "),O(u,!1)},1e3)}function v(){O(a,!1)}function m(_){l(c).tab=_}function h(){const _=indexedDB.open(s,1);_.onsuccess=k=>{const E=k.target.result.transaction(e.appID,"readwrite");E.objectStore(e.appID).delete("session"),E.oncomplete=()=>{O(c,e.initSession(),!0),f("Session was reinitialzed.")},E.onerror=()=>console.error("Failed to session from DB.")}}function g(_,k){window.localStorage.removeItem(e.appID+"-blocked");const M=indexedDB.open(s,1);M.onsuccess=E=>{const R=E.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);R.put(_,"session"),R.put(Bo(new Date),"session-update")}}function b(){new Promise((_,k)=>{const M=indexedDB.open(s,1);M.onsuccess=E=>{const F=E.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");F.onsuccess=()=>_(F.result),F.onerror=()=>k(F.error)}}).then(_=>{w(_),O(d,"Last session is restored "),O(u,!0),setTimeout(()=>{O(d,"Current session "),O(u,!1)},1500)}).catch(_=>{console.error(_),O(c,e.initSession(),!0)})}function w(_){if(!_||_==="undefined"){O(c,e.initSession(),!0);return}const k=JSON.parse(_,zs);O(c,e.checkSession(k)?k:e.initSession(e.appID),!0)}function p(_){e.resetSession(l(c));const k=new FileReader;k.onload=()=>{w(k.result),_.target.value=""},k.readAsText(_.target.files[0])}vc(()=>{const _=e.appID,k=indexedDB.open(s,1);k.onupgradeneeded=M=>{const E=M.target.result;E.objectStoreNames.contains(_)||E.createObjectStore(_)},k.onsuccess=M=>{b()}});var y=be(),C=$(y);{var N=_=>{var k=Uv(),M=B(k),E=B(M),S=B(E),I=q(S,2),R=B(I),F=q(R);{var P=ae=>{var oe=Ov();T(ae,oe)};W(F,ae=>{o()&&ae(P)})}var D=q(I,2),U=B(D),Q=q(E,2);Ye(Q,21,r,Ge,(ae,oe,Ce)=>{var fe=Vv();let ye;var ge=B(fe);ge.__click=()=>m(Ce),ge.__keydown=()=>m(Ce);var tt=B(ge);ee(bt=>{ye=ft(fe,1,"nav-item svelte-1cyr8za",null,ye,bt),we(tt,l(oe).name)},[()=>({selected:l(c).tab===Ce})]),T(ae,fe)});var V=q(M,2);Ye(V,21,r,Ge,(ae,oe,Ce)=>{var fe=Dv();let ye;var ge=B(fe);wo(ge,()=>l(oe).component,(tt,bt)=>{bt(tt,{get WASM(){return e.WASM},get session(){return l(c)},backupSession:g})}),ee(tt=>ye=ft(fe,1,"tab-content svelte-1cyr8za",null,ye,tt),[()=>({hidden:l(c).tab!==Ce})]),T(ae,fe)});var Z=q(V,2),K=B(Z);let Y;var H=B(K),re=B(H),te=q(H,2),X=B(te);X.__change=p;var ie=q(te,2);ie.__click=[qv,e,c];var de=q(ie,2);de.__click=[Bv,h];var _e=q(K,2),me=B(_e);me.__click=[Ta,a],me.__keydown=[Ta,a];var Ae=q(me,2);kr(Ae,()=>e.footer);var Me=q(Z,2);{var le=ae=>{da(ae,{closeModal:v,children:(oe,Ce)=>{var fe=Yv(),ye=B(fe);kr(ye,()=>e.info),T(oe,fe)},$$slots:{default:!0}})};W(Me,ae=>{l(a)&&ae(le)})}ee(ae=>{z(S,"alt",e.appShortTitle),we(R,e.appTitle),we(U,e.appSlogan),Y=ft(K,1,"session svelte-1cyr8za",null,Y,ae),we(re,l(d))},[()=>({"no-buttons":l(u)})]),T(_,k)};W(C,_=>{l(c)&&_(N)})}T(t,y),he()}$e(["click","keydown","change"]);const r1="modulepreload",n1=function(t){return"/"+t},o1={},Hv=function(e,r,o){let s=Promise.resolve();function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var Gv=(()=>{var t=ke&&ke.tagName.toUpperCase()==="SCRIPT"&&ke.src||new URL("pca.js",document.baseURI).href;return async function(e={}){var r,o=e,s,a,c=new Promise((L,G)=>{s=L,a=G}),d=typeof window=="object",u=typeof WorkerGlobalScope<"u",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(f){const{createRequire:L}=await Hv(()=>Promise.resolve().then(()=>Jv),void 0);var v=L(ke&&ke.tagName.toUpperCase()==="SCRIPT"&&ke.src||new URL("pca.js",document.baseURI).href)}var m={...o},h=(L,G)=>{throw G},g="";function b(L){return o.locateFile?o.locateFile(L,g):g+L}var w,p;if(f){var y=v("fs"),C=v("path");(ke&&ke.tagName.toUpperCase()==="SCRIPT"&&ke.src||new URL("pca.js",document.baseURI).href).startsWith("data:")||(g=C.dirname(v("url").fileURLToPath(ke&&ke.tagName.toUpperCase()==="SCRIPT"&&ke.src||new URL("pca.js",document.baseURI).href))+"/"),p=L=>{L=R(L)?new URL(L):L;var G=y.readFileSync(L);return G},w=async(L,G=!0)=>{L=R(L)?new URL(L):L;var se=y.readFileSync(L,G?void 0:"utf8");return se},!o.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),h=(L,G)=>{throw process.exitCode=L,G}}else(d||u)&&(u?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g.startsWith("blob:")?g="":g=g.slice(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(p=L=>{var G=new XMLHttpRequest;return G.open("GET",L,!1),G.responseType="arraybuffer",G.send(null),new Uint8Array(G.response)}),w=async L=>{if(R(L))return new Promise((se,Oe)=>{var Le=new XMLHttpRequest;Le.open("GET",L,!0),Le.responseType="arraybuffer",Le.onload=()=>{if(Le.status==200||Le.status==0&&Le.response){se(Le.response);return}Oe(Le.status)},Le.onerror=Oe,Le.send(null)});var G=await fetch(L,{credentials:"same-origin"});if(G.ok)return G.arrayBuffer();throw new Error(G.status+" : "+G.url)});o.print||console.log.bind(console);var N=o.printErr||console.error.bind(console);Object.assign(o,m),m=null,o.arguments&&o.arguments,o.thisProgram&&o.thisProgram;var _=o.wasmBinary,k,M=!1,E,S,I,R=L=>L.startsWith("file://");function F(){var L=k.buffer;o.HEAP8=S=new Int8Array(L),o.HEAP16=new Int16Array(L),o.HEAPU8=I=new Uint8Array(L),o.HEAPU16=new Uint16Array(L),o.HEAP32=new Int32Array(L),o.HEAPU32=new Uint32Array(L),o.HEAPF32=new Float32Array(L),o.HEAPF64=new Float64Array(L),o.HEAP64=new BigInt64Array(L),o.HEAPU64=new BigUint64Array(L)}function P(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Ce(o.preRun.shift());Me(oe)}function D(){at.h()}function U(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)ae(o.postRun.shift());Me(le)}var Q=0,V=null;function Z(L){var G;Q++,(G=o.monitorRunDependencies)==null||G.call(o,Q)}function K(L){var se;if(Q--,(se=o.monitorRunDependencies)==null||se.call(o,Q),Q==0&&V){var G=V;V=null,G()}}function Y(L){var se;(se=o.onAbort)==null||se.call(o,L),L="Aborted("+L+")",N(L),M=!0,L+=". Build with -sASSERTIONS for more info.";var G=new WebAssembly.RuntimeError(L);throw a(G),G}var H;function re(){return o.locateFile?b("pca_wasm.wasm"):new URL("/pca/pca.wasm",ke&&ke.tagName.toUpperCase()==="SCRIPT"&&ke.src||new URL("pca.js",document.baseURI).href).href}function te(L){if(L==H&&_)return new Uint8Array(_);if(p)return p(L);throw"both async and sync fetching of the wasm failed"}async function X(L){if(!_)try{var G=await w(L);return new Uint8Array(G)}catch{}return te(L)}async function ie(L,G){try{var se=await X(L),Oe=await WebAssembly.instantiate(se,G);return Oe}catch(Le){N(`failed to asynchronously prepare wasm: ${Le}`),Y(Le)}}async function de(L,G,se){if(!L&&typeof WebAssembly.instantiateStreaming=="function"&&!R(G)&&!f)try{var Oe=fetch(G,{credentials:"same-origin"}),Le=await WebAssembly.instantiateStreaming(Oe,se);return Le}catch(He){N(`wasm streaming compile failed: ${He}`),N("falling back to ArrayBuffer instantiation")}return ie(G,se)}function _e(){return{a:Ot}}async function me(){function L(He,Je){return at=He.exports,k=at.g,F(),K(),at}Z();function G(He){return L(He.instance)}var se=_e();if(o.instantiateWasm)return new Promise((He,Je)=>{o.instantiateWasm(se,(We,lr)=>{L(We),He(We.exports)})});H??(H=re());try{var Oe=await de(_,H,se),Le=G(Oe);return Le}catch(He){return a(He),Promise.reject(He)}}class Ae{constructor(G){Pr(this,"name","ExitStatus");this.message=`Program terminated with exit(${G})`,this.status=G}}var Me=L=>{for(;L.length>0;)L.shift()(o)},le=[],ae=L=>le.unshift(L),oe=[],Ce=L=>oe.unshift(L),fe=o.noExitRuntime||!0,ye=L=>ue(L),ge=()=>ol(),tt=()=>Y(""),bt=0,mt=()=>{fe=!1,bt=0},Be={},Ke=L=>{if(L instanceof Ae||L=="unwind")return E;h(1,L)},pr=()=>fe||bt>0,br=L=>{var G;E=L,pr()||((G=o.onExit)==null||G.call(o,L),M=!0),h(L,new Ae(L))},Jn=(L,G)=>{E=L,br(L)},Zn=Jn,Zr=()=>{if(!pr())try{Zn(E)}catch(L){Ke(L)}},$o=L=>{if(!M)try{L(),Zr()}catch(G){Ke(G)}},el=()=>performance.now(),tl=(L,G)=>{if(Be[L]&&(clearTimeout(Be[L].id),delete Be[L]),!G)return 0;var se=setTimeout(()=>{delete Be[L],$o(()=>Fe(L,el()))},G);return Be[L]={id:se,timeout_ms:G},0},rl=()=>Date.now(),nl=()=>2147483648,pe=(L,G)=>Math.ceil(L/G)*G,Te=L=>{var G=k.buffer,se=(L-G.byteLength+65535)/65536|0;try{return k.grow(se),F(),1}catch{}},Ne=L=>{var G=I.length;L>>>=0;var se=nl();if(L>se)return!1;for(var Oe=1;Oe<=4;Oe*=2){var Le=G*(1+.2/Oe);Le=Math.min(Le,L+100663296);var He=Math.min(se,pe(Math.max(L,Le),65536)),Je=Te(He);if(Je)return!0}return!1},ot=L=>{var G=o["_"+L];return G},wt=(L,G)=>{S.set(L,G)},Ht=L=>{for(var G=0,se=0;se<L.length;++se){var Oe=L.charCodeAt(se);Oe<=127?G++:Oe<=2047?G+=2:Oe>=55296&&Oe<=57343?(G+=4,++se):G+=3}return G},Ct=(L,G,se,Oe)=>{if(!(Oe>0))return 0;for(var Le=se,He=se+Oe-1,Je=0;Je<L.length;++Je){var We=L.charCodeAt(Je);if(We>=55296&&We<=57343){var lr=L.charCodeAt(++Je);We=65536+((We&1023)<<10)|lr&1023}if(We<=127){if(se>=He)break;G[se++]=We}else if(We<=2047){if(se+1>=He)break;G[se++]=192|We>>6,G[se++]=128|We&63}else if(We<=65535){if(se+2>=He)break;G[se++]=224|We>>12,G[se++]=128|We>>6&63,G[se++]=128|We&63}else{if(se+3>=He)break;G[se++]=240|We>>18,G[se++]=128|We>>12&63,G[se++]=128|We>>6&63,G[se++]=128|We&63}}return G[se]=0,se-Le},Mt=(L,G,se)=>Ct(L,I,G,se),Ve=L=>gt(L),Pe=L=>{var G=Ht(L)+1,se=Ve(G);return Mt(L,se,G),se},dt=typeof TextDecoder<"u"?new TextDecoder:void 0,ct=(L,G=0,se=NaN)=>{for(var Oe=G+se,Le=G;L[Le]&&!(Le>=Oe);)++Le;if(Le-G>16&&L.buffer&&dt)return dt.decode(L.subarray(G,Le));for(var He="";G<Le;){var Je=L[G++];if(!(Je&128)){He+=String.fromCharCode(Je);continue}var We=L[G++]&63;if((Je&224)==192){He+=String.fromCharCode((Je&31)<<6|We);continue}var lr=L[G++]&63;if((Je&240)==224?Je=(Je&15)<<12|We<<6|lr:Je=(Je&7)<<18|We<<12|lr<<6|L[G++]&63,Je<65536)He+=String.fromCharCode(Je);else{var zr=Je-65536;He+=String.fromCharCode(55296|zr>>10,56320|zr&1023)}}return He},lt=(L,G)=>L?ct(I,L,G):"",Xe=(L,G,se,Oe,Le)=>{var He={string:It=>{var gn=0;return It!=null&&It!==0&&(gn=Pe(It)),gn},array:It=>{var gn=Ve(It.length);return wt(It,gn),gn}};function Je(It){return G==="string"?lt(It):G==="boolean"?!!It:It}var We=ot(L),lr=[],zr=0;if(Oe)for(var Tr=0;Tr<Oe.length;Tr++){var Ia=He[se[Tr]];Ia?(zr===0&&(zr=ge()),lr[Tr]=Ia(Oe[Tr])):lr[Tr]=Oe[Tr]}var ll=We(...lr);function Zv(It){return zr!==0&&ye(zr),Je(It)}return ll=Zv(ll),ll},Ot={c:tt,b:mt,d:tl,f:rl,e:Ne,a:br},at=await me();at.h,o._pcafit_wasm=at.i,o._malloc=at.j,o._free=at.k,o._pcapredict_wasm=at.l,o._pcvpca_wasm=at.m;var Fe=at.o,ue=at.p,gt=at.q,ol=at.r;o.ccall=Xe;function Gt(){if(Q>0){V=Gt;return}if(P(),Q>0){V=Gt;return}function L(){var G;o.calledRun=!0,!M&&(D(),s(o),(G=o.onRuntimeInitialized)==null||G.call(o),U())}o.setStatus?(o.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>o.setStatus(""),1),L()},1)):L()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Gt(),r=c,r}})(),Kv=J('<p>Current release: <span>2.0.7</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="Wines.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video lessons</a></p>'),Xv=J(`<h2>Principal Component Analysis</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using PCA models for data exploration
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>Check out YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video-lessons</a></p><h3>v. 2.0.7</h3> <p class="release-info">released 16/04/2025</p> <ul><li>App now remembers the plot settings when you switch between plots.</li> <li>Introducing sessons — app states, including model, results, datasets, and outliers
         (in all tabs). When you close tab or app window or click on reboot button, the current
         session is saved to browser's local storage and then is restored automatically. You can
         also download session as a file and load it from file.</li> <li>Added undo option for outliers (if more than one is removed).</li> <li>More robust CSV converter which filters out empty rows created by some versions of MS Excel.</li> <li>Many small improvements to plots and control elements.</li></ul>`,1);function Qv(t,e){ve(e,!1);function r(c){c.train.dataset=null,c.new.model=null,c.tab=0}function o(c){const d=Object.keys(c);if(!["date","tab","train","new"].every(v=>d.includes(v)))return!1;const u=Object.keys(c.train),f=Object.keys(c.new);return!!["model","dataset","resobj","outliers"].every(v=>u.includes(v)&&f.includes(v))}function s(){return{date:Bo(new Date),tab:0,train:{model:0,dataset:0,resobj:0,outliers:[]},new:{model:0,dataset:0,resobj:0,outliers:[]}}}const a=[{name:"Train",label:"train",component:_v},{name:"Project",label:"new",component:Fv}];ic(),Wv(t,{appID:"pca",appTitle:"PCA",appShortTitle:"PCA",appSlogan:"Principal component analysis",WASM:Gv,tabs:a,initSession:s,checkSession:o,resetSession:r,footer:u=>{var f=Kv();T(u,f)},info:u=>{var f=Xv();T(u,f)},$$slots:{footer:!0,info:!0}}),he()}Vi(Qv,{target:document.body});const Jv=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pca.js.map
