(function(){"use strict";var Vs=document.createElement("style");Vs.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-142p4sy{display:none}.selector.svelte-142p4sy{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-142p4sy{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-142p4sy:not(.selected):hover{border:1px solid}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.control-element.res-switcher{margin-top:1em;margin-bottom:0;padding-bottom:0;justify-content:center;background:transparent;font-size:.8rem}.control-element.res-switcher:hover{background:transparent}.control-element.res-switcher .selector{justify-content:center}.control-element.res-switcher>.selector>.option{background-color:#e8e8e8;border-color:#708090;color:#607080}.control-element.res-switcher>.selector>.option:not(.selected):hover{background-color:#fffef0;color:#607080;border-color:#607080}.control-element.res-switcher>.selector>.option.selected{background-color:#607080;color:#e8f0f8;border-color:#607080}table.svelte-110ino2{width:100%;border-collapse:collapse}tr.svelte-110ino2{width:100%}th.svelte-110ino2{border-bottom:1px solid #a0a0a0}th.svelte-110ino2,td.svelte-110ino2{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;inset:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.wrapper.svelte-1di9qjd{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-1di9qjd{grid-area:plot}.plot-controls.svelte-1di9qjd{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-1di9qjd>.control-element{background:transparent}.msg-select.svelte-1di9qjd{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mp4dba{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(330px,30%) 1fr}}.info-text.svelte-7h7avz{line-height:1.5em}.info-text.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){background:#e8e8e8}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1rjc99q{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Vs);var fr=typeof document<"u"?document.currentScript:null;const kl=!1;var Sl=Array.isArray,ii=Array.prototype.indexOf,Jn=Array.from,ci=Object.defineProperty,Cr=Object.getOwnPropertyDescriptor,Ds=Object.getOwnPropertyDescriptors,Ys=Object.prototype,ui=Array.prototype,Qn=Object.getPrototypeOf,Ws=Object.isExtensible;function hn(t){return typeof t=="function"}const pt=()=>{};function fi(t){return typeof t?.then=="function"}function di(t){return t()}function Al(t){for(var e=0;e<t.length;e++)t[e]()}function Us(){var t,e,r=new Promise((s,o)=>{t=s,e=o});return{promise:r,resolve:t,reject:e}}function Cl(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const bt=2,Nl=4,Zn=8,vi=1<<24,er=16,dr=32,Wr=64,$n=128,Xt=512,Et=1024,jt=2048,tr=4096,qt=8192,vr=16384,el=32768,hr=65536,Hs=1<<17,Gs=1<<18,mn=1<<19,Xs=1<<20,mr=1<<25,Ur=32768,Tl=1<<21,Ml=1<<22,Nr=1<<23,Tr=Symbol("$state"),Ks=Symbol("legacy props"),hi=Symbol(""),gn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Js(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function mi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function gi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function pi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function bi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function _i(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function wi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function yi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function xi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ei(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ki(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Si=1,Ai=2,Qs=4,Ci=8,Ni=16,Ti=1,Mi=2,Pi=4,ji=8,Li=16,Ri=1,Ii=2,zi=4,Zs=1,Fi=2,_t=Symbol(),qi="http://www.w3.org/1999/xhtml";function Oi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function $s(t){return t===this.v}function Bi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function eo(t){return!Bi(t,this.v)}let pn=!1,Vi=!1;function Di(){pn=!0}const Yi=[];function Wi(t,e=!1,r=!1){return tl(t,new Map,"",Yi,null,r)}function tl(t,e,r,s,o=null,a=!1){if(typeof t=="object"&&t!==null){var c=e.get(t);if(c!==void 0)return c;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Sl(t)){var u=Array(t.length);e.set(t,u),o!==null&&e.set(o,u);for(var f=0;f<t.length;f+=1){var d=t[f];f in t&&(u[f]=tl(d,e,r,s,null,a))}return u}if(Qn(t)===Ys){u={},e.set(t,u),o!==null&&e.set(o,u);for(var v in t)u[v]=tl(t[v],e,r,s,null,a);return u}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!a)return tl(t.toJSON(),e,r,s,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let rt=null;function bn(t){rt=t}function Lt(t){return to().get(t)}function Ui(t,e){return to().set(t,e),e}function _e(t,e=!1,r){rt={p:rt,i:!1,c:null,e:null,s:t,x:null,l:pn&&!e?{s:null,u:null,$:[]}:null}}function we(t){var e=rt,r=e.e;if(r!==null){e.e=null;for(var s of r)xo(s)}return e.i=!0,rt=e.p,{}}function Hr(){return!pn||rt!==null&&rt.l===null}function to(t){return rt===null&&Js(),rt.c??=new Map(Hi(rt)||void 0)}function Hi(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let Gr=[];function ro(){var t=Gr;Gr=[],Al(t)}function Mr(t){if(Gr.length===0&&!wn){var e=Gr;queueMicrotask(()=>{e===Gr&&ro()})}Gr.push(t)}function Gi(){for(;Gr.length>0;)ro()}function no(t){var e=He;if(e===null)return We.f|=Nr,t;if((e.f&el)===0){if((e.f&$n)===0)throw t;e.b.error(t)}else _n(t,e)}function _n(t,e){for(;e!==null;){if((e.f&$n)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t}const rl=new Set;let Je=null,nl=null,Yt=null,Wt=[],ll=null,Pl=!1,wn=!1;class Kt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#i=null;#s=new Set;#l=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){Wt=[],nl=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const s of e)this.#o(s,r);this.is_fork||this.#u(),this.is_deferred()?(this.#a(r.effects),this.#a(r.render_effects)):(nl=this,Je=null,oo(r.render_effects),oo(r.effects),nl=null,this.#i?.resolve()),Yt=null}#o(e,r){e.f^=Et;for(var s=e.first;s!==null;){var o=s.f,a=(o&(dr|Wr))!==0,c=a&&(o&Et)!==0,u=c||(o&qt)!==0||this.skipped_effects.has(s);if((s.f&$n)!==0&&s.b?.is_pending()&&(r={parent:r,effect:s,effects:[],render_effects:[]}),!u&&s.fn!==null){a?s.f^=Et:(o&Nl)!==0?r.effects.push(s):In(s)&&((s.f&er)!==0&&this.#s.add(s),zn(s));var f=s.first;if(f!==null){s=f;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===r.effect&&(this.#a(r.effects),this.#a(r.render_effects),r=r.parent),s=d.next,d=d.parent}}#a(e){for(const r of e)(r.f&jt)!==0?this.#s.add(r):(r.f&tr)!==0&&this.#l.add(r),this.#c(r.deps),kt(r,Et)}#c(e){if(e!==null)for(const r of e)(r.f&bt)===0||(r.f&Ur)===0||(r.f^=Ur,this.#c(r.deps))}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&Nr)===0&&(this.current.set(e,e.v),Yt?.set(e,e.v))}activate(){Je=this,this.apply()}deactivate(){Je===this&&(Je=null,Yt=null)}flush(){if(this.activate(),Wt.length>0){if(so(),Je!==null&&Je!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(rl.size>1){this.previous.clear();var e=Yt,r=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const a of rl){if(a===this){r=!1;continue}const c=[];for(const[f,d]of this.current){if(a.current.has(f))if(r&&d!==a.current.get(f))a.current.set(f,d);else continue;c.push(f)}if(c.length===0)continue;const u=[...a.current.keys()].filter(f=>!this.current.has(f));if(u.length>0){var o=Wt;Wt=[];const f=new Set,d=new Map;for(const v of c)ao(v,u,f,d);if(Wt.length>0){Je=a,a.apply();for(const v of Wt)a.#o(v,s);a.deactivate()}Wt=o}}Je=null,Yt=e}this.committed=!0,rl.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#s)this.#l.delete(e),kt(e,jt),Xr(e);for(const e of this.#l)kt(e,tr),Xr(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#i??=Us()).promise}static ensure(){if(Je===null){const e=Je=new Kt;rl.add(Je),wn||Kt.enqueue(()=>{Je===e&&e.flush()})}return Je}static enqueue(e){Mr(e)}apply(){}}function lo(t){var e=wn;wn=!0;try{for(var r;;){if(Gi(),Wt.length===0&&(Je?.flush(),Wt.length===0))return ll=null,r;so()}}finally{wn=e}}function so(){var t=Qr;Pl=!0;var e=null;try{var r=0;for(sl(!0);Wt.length>0;){var s=Kt.ensure();if(r++>1e3){var o,a;Xi()}s.process(Wt),Pr.clear()}}finally{Pl=!1,sl(t),ll=null}}function Xi(){try{_i()}catch(t){_n(t,ll)}}let gr=null;function oo(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var s=t[r++];if((s.f&(vr|qt))===0&&In(s)&&(gr=new Set,zn(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Ao(s):s.fn=null),gr?.size>0)){Pr.clear();for(const o of gr){if((o.f&(vr|qt))!==0)continue;const a=[o];let c=o.parent;for(;c!==null;)gr.has(c)&&(gr.delete(c),a.push(c)),c=c.parent;for(let u=a.length-1;u>=0;u--){const f=a[u];(f.f&(vr|qt))===0&&zn(f)}}gr.clear()}}gr=null}}function ao(t,e,r,s){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const o of t.reactions){const a=o.f;(a&bt)!==0?ao(o,e,r,s):(a&(Ml|er))!==0&&(a&jt)===0&&io(o,e,s)&&(kt(o,jt),Xr(o))}}function io(t,e,r){const s=r.get(t);if(s!==void 0)return s;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&bt)!==0&&io(o,e,r))return r.set(o,!0),!0}return r.set(t,!1),!1}function Xr(t){for(var e=ll=t;e.parent!==null;){e=e.parent;var r=e.f;if(Pl&&e===He&&(r&er)!==0&&(r&Gs)===0)return;if((r&(Wr|dr))!==0){if((r&Et)===0)return;e.f^=Et}}Wt.push(e)}function Ki(t){let e=0,r=pr(0),s;return()=>{Ln()&&(l(r),ql(()=>(e===0&&(s=sr(()=>t(()=>Pn(r)))),e+=1,()=>{Mr(()=>{e-=1,e===0&&(s?.(),s=void 0,Pn(r))})})))}}var Ji=hr|mn|$n;function Qi(t,e,r){new Zi(t,e,r)}class Zi{parent;#e=!1;#t;#r=null;#n;#i;#s;#l=null;#o=null;#a=null;#c=null;#u=null;#f=0;#d=0;#h=!1;#v=null;#_=Ki(()=>(this.#v=pr(this.#f),()=>{this.#v=null}));constructor(e,r,s){this.#t=e,this.#n=r,this.#i=s,this.parent=He.b,this.#e=!!this.#n.pending,this.#s=Kr(()=>{He.b=this;{var o=this.#p();try{this.#l=Ut(()=>s(o))}catch(a){this.error(a)}this.#d>0?this.#g():this.#e=!1}return()=>{this.#u?.remove()}},Ji)}#w(){try{this.#l=Ut(()=>this.#i(this.#t))}catch(e){this.error(e)}this.#e=!1}#y(){const e=this.#n.pending;e&&(this.#o=Ut(()=>e(this.#t)),Kt.enqueue(()=>{var r=this.#p();this.#l=this.#m(()=>(Kt.ensure(),Ut(()=>this.#i(r)))),this.#d>0?this.#g():(Jr(this.#o,()=>{this.#o=null}),this.#e=!1)}))}#p(){var e=this.#t;return this.#e&&(this.#u=_r(),this.#t.before(this.#u),e=this.#u),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#m(e){var r=He,s=We,o=rt;lr(this.#s),It(this.#s),bn(this.#s.ctx);try{return e()}catch(a){return no(a),null}finally{lr(r),It(s),bn(o)}}#g(){const e=this.#n.pending;this.#l!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),To(this.#l,this.#c)),this.#o===null&&(this.#o=Ut(()=>e(this.#t)))}#b(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(e);return}this.#d+=e,this.#d===0&&(this.#e=!1,this.#o&&Jr(this.#o,()=>{this.#o=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(e){this.#b(e),this.#f+=e,this.#v&&br(this.#v,this.#f)}get_effect_pending(){return this.#_(),l(this.#v)}error(e){var r=this.#n.onerror;let s=this.#n.failed;if(this.#h||!r&&!s)throw e;this.#l&&(Rt(this.#l),this.#l=null),this.#o&&(Rt(this.#o),this.#o=null),this.#a&&(Rt(this.#a),this.#a=null);var o=!1,a=!1;const c=()=>{if(o){Oi();return}o=!0,a&&ki(),Kt.ensure(),this.#f=0,this.#a!==null&&Jr(this.#a,()=>{this.#a=null}),this.#e=this.has_pending_snippet(),this.#l=this.#m(()=>(this.#h=!1,Ut(()=>this.#i(this.#t)))),this.#d>0?this.#g():this.#e=!1};var u=We;try{It(null),a=!0,r?.(e,c),a=!1}catch(f){_n(f,this.#s&&this.#s.parent)}finally{It(u)}s&&Mr(()=>{this.#a=this.#m(()=>{Kt.ensure(),this.#h=!0;try{return Ut(()=>{s(this.#t,()=>e,()=>c)})}catch(f){return _n(f,this.#s.parent),null}finally{this.#h=!1}})})}}function $i(t,e,r,s){const o=Hr()?Mn:jl;if(r.length===0&&t.length===0){s(e.map(o));return}var a=Je,c=He,u=co();function f(){Promise.all(r.map(d=>ec(d))).then(d=>{u();try{s([...e.map(o),...d])}catch(v){(c.f&vr)===0&&_n(v,c)}a?.deactivate(),Tn()}).catch(d=>{_n(d,c)})}t.length>0?Promise.all(t).then(()=>{u();try{return f()}finally{a?.deactivate(),Tn()}}):f()}function co(){var t=He,e=We,r=rt,s=Je;return function(a=!0){lr(t),It(e),bn(r),a&&s?.activate()}}function Tn(){lr(null),It(null),bn(null)}function Mn(t){var e=bt|jt,r=We!==null&&(We.f&bt)!==0?We:null;return He!==null&&(He.f|=mn),{ctx:rt,deps:null,effects:null,equals:$s,f:e,fn:t,reactions:null,rv:0,v:_t,wv:0,parent:r??He,ac:null}}function ec(t,e){let r=He;r===null&&mi();var s=r.b,o=void 0,a=pr(_t),c=!We,u=new Map;return uc(()=>{var f=Us();o=f.promise;try{Promise.resolve(t()).then(f.resolve,f.reject).then(()=>{d===Je&&d.committed&&d.deactivate(),Tn()})}catch(m){f.reject(m),Tn()}var d=Je;if(c){var v=!s.is_pending();s.update_pending_count(1),d.increment(v),u.get(d)?.reject(gn),u.delete(d),u.set(d,f)}const h=(m,g=void 0)=>{if(d.activate(),g)g!==gn&&(a.f|=Nr,br(a,g));else{(a.f&Nr)!==0&&(a.f^=Nr),br(a,m);for(const[b,_]of u){if(u.delete(b),b===d)break;_.reject(gn)}}c&&(s.update_pending_count(-1),d.decrement(v))};f.promise.then(h,m=>h(null,m||"unknown"))}),yo(()=>{for(const f of u.values())f.reject(gn)}),new Promise(f=>{function d(v){function h(){v===o?f(a):d(o)}v.then(h,h)}d(o)})}function y(t){const e=Mn(t);return Po(e),e}function jl(t){const e=Mn(t);return e.equals=eo,e}function uo(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Rt(e[r])}}function tc(t){for(var e=t.parent;e!==null;){if((e.f&bt)===0)return(e.f&vr)===0?e:null;e=e.parent}return null}function Ll(t){var e,r=He;lr(tc(t));try{t.f&=~Ur,uo(t),e=zo(t)}finally{lr(r)}return e}function fo(t){var e=Ll(t);if(t.equals(e)||(Je?.is_fork||(t.v=e),t.wv=Ro()),!Zr)if(Yt!==null)(Ln()||Je?.is_fork)&&Yt.set(t,e);else{var r=(t.f&Xt)===0?tr:Et;kt(t,r)}}let Rl=new Set;const Pr=new Map;let vo=!1;function pr(t,e){var r={f:0,v:t,reactions:null,equals:$s,rv:0,wv:0};return r}function ee(t,e){const r=pr(t);return Po(r),r}function Il(t,e=!1,r=!0){const s=pr(t);return e||(s.equals=eo),pn&&r&&rt!==null&&rt.l!==null&&(rt.l.s??=[]).push(s),s}function I(t,e,r=!1){We!==null&&(!nr||(We.f&Hs)!==0)&&Hr()&&(We.f&(bt|er|Ml|Hs))!==0&&!wr?.includes(t)&&Ei();let s=r?ze(e):e;return br(t,s)}function br(t,e){if(!t.equals(e)){var r=t.v;Zr?Pr.set(t,e):Pr.set(t,r),t.v=e;var s=Kt.ensure();s.capture(t,r),(t.f&bt)!==0&&((t.f&jt)!==0&&Ll(t),kt(t,(t.f&Xt)!==0?Et:tr)),t.wv=Ro(),ho(t,jt),Hr()&&He!==null&&(He.f&Et)!==0&&(He.f&(dr|Wr))===0&&(Ht===null?dc([t]):Ht.push(t)),!s.is_fork&&Rl.size>0&&!vo&&rc()}return e}function rc(){vo=!1;var t=Qr;sl(!0);const e=Array.from(Rl);try{for(const r of e)(r.f&Et)!==0&&kt(r,tr),In(r)&&zn(r)}finally{sl(t)}Rl.clear()}function Pn(t){I(t,t.v+1)}function ho(t,e){var r=t.reactions;if(r!==null)for(var s=Hr(),o=r.length,a=0;a<o;a++){var c=r[a],u=c.f;if(!(!s&&c===He)){var f=(u&jt)===0;if(f&&kt(c,e),(u&bt)!==0){var d=c;Yt?.delete(d),(u&Ur)===0&&(u&Xt&&(c.f|=Ur),ho(d,tr))}else f&&((u&er)!==0&&gr!==null&&gr.add(c),Xr(c))}}}function ze(t){if(typeof t!="object"||t===null||Tr in t)return t;const e=Qn(t);if(e!==Ys&&e!==ui)return t;var r=new Map,s=Sl(t),o=ee(0),a=$r,c=u=>{if($r===a)return u();var f=We,d=$r;It(null),Lo(a);var v=u();return It(f),Lo(d),v};return s&&r.set("length",ee(t.length)),new Proxy(t,{defineProperty(u,f,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&yi();var v=r.get(f);return v===void 0?v=c(()=>{var h=ee(d.value);return r.set(f,h),h}):I(v,d.value,!0),!0},deleteProperty(u,f){var d=r.get(f);if(d===void 0){if(f in u){const v=c(()=>ee(_t));r.set(f,v),Pn(o)}}else I(d,_t),Pn(o);return!0},get(u,f,d){if(f===Tr)return t;var v=r.get(f),h=f in u;if(v===void 0&&(!h||Cr(u,f)?.writable)&&(v=c(()=>{var g=ze(h?u[f]:_t),b=ee(g);return b}),r.set(f,v)),v!==void 0){var m=l(v);return m===_t?void 0:m}return Reflect.get(u,f,d)},getOwnPropertyDescriptor(u,f){var d=Reflect.getOwnPropertyDescriptor(u,f);if(d&&"value"in d){var v=r.get(f);v&&(d.value=l(v))}else if(d===void 0){var h=r.get(f),m=h?.v;if(h!==void 0&&m!==_t)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return d},has(u,f){if(f===Tr)return!0;var d=r.get(f),v=d!==void 0&&d.v!==_t||Reflect.has(u,f);if(d!==void 0||He!==null&&(!v||Cr(u,f)?.writable)){d===void 0&&(d=c(()=>{var m=v?ze(u[f]):_t,g=ee(m);return g}),r.set(f,d));var h=l(d);if(h===_t)return!1}return v},set(u,f,d,v){var h=r.get(f),m=f in u;if(s&&f==="length")for(var g=d;g<h.v;g+=1){var b=r.get(g+"");b!==void 0?I(b,_t):g in u&&(b=c(()=>ee(_t)),r.set(g+"",b))}if(h===void 0)(!m||Cr(u,f)?.writable)&&(h=c(()=>ee(void 0)),I(h,ze(d)),r.set(f,h));else{m=h.v!==_t;var _=c(()=>ze(d));I(h,_)}var p=Reflect.getOwnPropertyDescriptor(u,f);if(p?.set&&p.set.call(v,d),!m){if(s&&typeof f=="string"){var w=r.get("length"),S=Number(f);Number.isInteger(S)&&S>=w.v&&I(w,S+1)}Pn(o)}return!0},ownKeys(u){l(o);var f=Reflect.ownKeys(u).filter(h=>{var m=r.get(h);return m===void 0||m.v!==_t});for(var[d,v]of r)v.v!==_t&&!(d in u)&&f.push(d);return f},setPrototypeOf(){xi()}})}var zl,mo,go,po;function nc(){if(zl===void 0){zl=window,mo=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;go=Cr(e,"firstChild").get,po=Cr(e,"nextSibling").get,Ws(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ws(r)&&(r.__t=void 0)}}function _r(t=""){return document.createTextNode(t)}function Ot(t){return go.call(t)}function jn(t){return po.call(t)}function D(t,e){return Ot(t)}function X(t,e=!1){{var r=Ot(t);return r instanceof Comment&&r.data===""?jn(r):r}}function F(t,e=1,r=!1){let s=t;for(;e--;)s=jn(s);return s}function lc(t){t.textContent=""}function bo(){return!1}let _o=!1;function sc(){_o||(_o=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function yn(t){var e=We,r=He;It(null),lr(null);try{return t()}finally{It(e),lr(r)}}function oc(t,e,r,s=r){t.addEventListener(e,()=>yn(r));const o=t.__on_r;o?t.__on_r=()=>{o(),s(!0)}:t.__on_r=()=>s(!0),sc()}function wo(t){He===null&&(We===null&&bi(),pi()),Zr&&gi()}function ac(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function rr(t,e,r){var s=He;s!==null&&(s.f&qt)!==0&&(t|=qt);var o={ctx:rt,deps:null,nodes:null,f:t|jt|Xt,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{zn(o),o.f|=el}catch(u){throw Rt(o),u}else e!==null&&Xr(o);var a=o;if(r&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&mn)===0&&(a=a.first,(t&er)!==0&&(t&hr)!==0&&a!==null&&(a.f|=hr)),a!==null&&(a.parent=s,s!==null&&ac(a,s),We!==null&&(We.f&bt)!==0&&(t&Wr)===0)){var c=We;(c.effects??=[]).push(a)}return o}function Ln(){return We!==null&&!nr}function yo(t){const e=rr(Zn,null,!1);return kt(e,Et),e.teardown=t,e}function ye(t){wo();var e=He.f,r=!We&&(e&dr)!==0&&(e&el)===0;if(r){var s=rt;(s.e??=[]).push(t)}else return xo(t)}function xo(t){return rr(Nl|Xs,t,!1)}function ic(t){return wo(),rr(Zn|Xs,t,!0)}function cc(t){Kt.ensure();const e=rr(Wr|mn,t,!0);return(r={})=>new Promise(s=>{r.outro?Jr(e,()=>{Rt(e),s(void 0)}):(Rt(e),s(void 0))})}function Fl(t){return rr(Nl,t,!1)}function uc(t){return rr(Ml|mn,t,!0)}function ql(t,e=0){return rr(Zn|e,t,!0)}function ie(t,e=[],r=[],s=[]){$i(s,e,r,o=>{rr(Zn,()=>t(...o.map(l)),!0)})}function Kr(t,e=0){var r=rr(er|e,t,!0);return r}function Ut(t){return rr(dr|mn,t,!0)}function Eo(t){var e=t.teardown;if(e!==null){const r=Zr,s=We;Mo(!0),It(null);try{e.call(null)}finally{Mo(r),It(s)}}}function ko(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const o=r.ac;o!==null&&yn(()=>{o.abort(gn)});var s=r.next;(r.f&Wr)!==0?r.parent=null:Rt(r,e),r=s}}function fc(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&dr)===0&&Rt(e),e=r}}function Rt(t,e=!0){var r=!1;(e||(t.f&Gs)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(So(t.nodes.start,t.nodes.end),r=!0),ko(t,e&&!r),ol(t,0),kt(t,vr);var s=t.nodes&&t.nodes.t;if(s!==null)for(const a of s)a.stop();Eo(t);var o=t.parent;o!==null&&o.first!==null&&Ao(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function So(t,e){for(;t!==null;){var r=t===e?null:jn(t);t.remove(),t=r}}function Ao(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function Jr(t,e,r=!0){var s=[];Co(t,s,!0);var o=()=>{r&&Rt(t),e&&e()},a=s.length;if(a>0){var c=()=>--a||o();for(var u of s)u.out(c)}else o()}function Co(t,e,r){if((t.f&qt)===0){t.f^=qt;var s=t.nodes&&t.nodes.t;if(s!==null)for(const u of s)(u.is_global||r)&&e.push(u);for(var o=t.first;o!==null;){var a=o.next,c=(o.f&hr)!==0||(o.f&dr)!==0&&(t.f&er)!==0;Co(o,e,c?r:!1),o=a}}}function Ol(t){No(t,!0)}function No(t,e){if((t.f&qt)!==0){t.f^=qt,(t.f&Et)===0&&(kt(t,jt),Xr(t));for(var r=t.first;r!==null;){var s=r.next,o=(r.f&hr)!==0||(r.f&dr)!==0;No(r,o?e:!1),r=s}var a=t.nodes&&t.nodes.t;if(a!==null)for(const c of a)(c.is_global||e)&&c.in()}}function To(t,e){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end;r!==null;){var o=r===s?null:jn(r);e.append(r),r=o}}let Qr=!1;function sl(t){Qr=t}let Zr=!1;function Mo(t){Zr=t}let We=null,nr=!1;function It(t){We=t}let He=null;function lr(t){He=t}let wr=null;function Po(t){We!==null&&(wr===null?wr=[t]:wr.push(t))}let Nt=null,Bt=0,Ht=null;function dc(t){Ht=t}let jo=1,Rn=0,$r=Rn;function Lo(t){$r=t}function Ro(){return++jo}function In(t){var e=t.f;if((e&jt)!==0)return!0;if(e&bt&&(t.f&=~Ur),(e&tr)!==0){var r=t.deps;if(r!==null)for(var s=r.length,o=0;o<s;o++){var a=r[o];if(In(a)&&fo(a),a.wv>t.wv)return!0}(e&Xt)!==0&&Yt===null&&kt(t,Et)}return!1}function Io(t,e,r=!0){var s=t.reactions;if(s!==null&&!wr?.includes(t))for(var o=0;o<s.length;o++){var a=s[o];(a.f&bt)!==0?Io(a,e,!1):e===a&&(r?kt(a,jt):(a.f&Et)!==0&&kt(a,tr),Xr(a))}}function zo(t){var e=Nt,r=Bt,s=Ht,o=We,a=wr,c=rt,u=nr,f=$r,d=t.f;Nt=null,Bt=0,Ht=null,We=(d&(dr|Wr))===0?t:null,wr=null,bn(t.ctx),nr=!1,$r=++Rn,t.ac!==null&&(yn(()=>{t.ac.abort(gn)}),t.ac=null);try{t.f|=Tl;var v=t.fn,h=v(),m=t.deps;if(Nt!==null){var g;if(ol(t,Bt),m!==null&&Bt>0)for(m.length=Bt+Nt.length,g=0;g<Nt.length;g++)m[Bt+g]=Nt[g];else t.deps=m=Nt;if(Ln()&&(t.f&Xt)!==0)for(g=Bt;g<m.length;g++)(m[g].reactions??=[]).push(t)}else m!==null&&Bt<m.length&&(ol(t,Bt),m.length=Bt);if(Hr()&&Ht!==null&&!nr&&m!==null&&(t.f&(bt|tr|jt))===0)for(g=0;g<Ht.length;g++)Io(Ht[g],t);return o!==null&&o!==t&&(Rn++,Ht!==null&&(s===null?s=Ht:s.push(...Ht))),(t.f&Nr)!==0&&(t.f^=Nr),h}catch(b){return no(b)}finally{t.f^=Tl,Nt=e,Bt=r,Ht=s,We=o,wr=a,bn(c),nr=u,$r=f}}function vc(t,e){let r=e.reactions;if(r!==null){var s=ii.call(r,t);if(s!==-1){var o=r.length-1;o===0?r=e.reactions=null:(r[s]=r[o],r.pop())}}r===null&&(e.f&bt)!==0&&(Nt===null||!Nt.includes(e))&&(kt(e,tr),(e.f&Xt)!==0&&(e.f^=Xt,e.f&=~Ur),uo(e),ol(e,0))}function ol(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)vc(t,r[s])}function zn(t){var e=t.f;if((e&vr)===0){kt(t,Et);var r=He,s=Qr;He=t,Qr=!0;try{(e&(er|vi))!==0?fc(t):ko(t),Eo(t);var o=zo(t);t.teardown=typeof o=="function"?o:null,t.wv=jo;var a;kl&&Vi&&(t.f&jt)!==0&&t.deps}finally{Qr=s,He=r}}}async function hc(){await Promise.resolve(),lo()}function l(t){var e=t.f,r=(e&bt)!==0;if(We!==null&&!nr){var s=He!==null&&(He.f&vr)!==0;if(!s&&!wr?.includes(t)){var o=We.deps;if((We.f&Tl)!==0)t.rv<Rn&&(t.rv=Rn,Nt===null&&o!==null&&o[Bt]===t?Bt++:Nt===null?Nt=[t]:Nt.includes(t)||Nt.push(t));else{(We.deps??=[]).push(t);var a=t.reactions;a===null?t.reactions=[We]:a.includes(We)||a.push(We)}}}if(Zr){if(Pr.has(t))return Pr.get(t);if(r){var c=t,u=c.v;return((c.f&Et)===0&&c.reactions!==null||qo(c))&&(u=Ll(c)),Pr.set(c,u),u}}else r&&(!Yt?.has(t)||Je?.is_fork&&!Ln())&&(c=t,In(c)&&fo(c),Qr&&Ln()&&(c.f&Xt)===0&&Fo(c));if(Yt?.has(t))return Yt.get(t);if((t.f&Nr)!==0)throw t.v;return t.v}function Fo(t){if(t.deps!==null){t.f^=Xt;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&bt)!==0&&(e.f&Xt)===0&&Fo(e)}}function qo(t){if(t.v===_t)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Pr.has(e)||(e.f&bt)!==0&&qo(e))return!0;return!1}function sr(t){var e=nr;try{return nr=!0,t()}finally{nr=e}}const mc=-7169;function kt(t,e){t.f=t.f&mc|e}function gc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Tr in t)Bl(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Tr in r&&Bl(r)}}}function Bl(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{Bl(t[s],e)}catch{}const r=Qn(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=Ds(r);for(let o in s){const a=s[o].get;if(a)try{a.call(t)}catch{}}}}}const pc=["touchstart","touchmove"];function bc(t){return pc.includes(t)}const Oo=new Set,Vl=new Set;function _c(t,e,r,s={}){function o(a){if(s.capture||Fn.call(e,a),!a.cancelBubble)return yn(()=>r?.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Mr(()=>{e.addEventListener(t,o,s)}):e.addEventListener(t,o,s),o}function en(t,e,r,s,o){var a={capture:s,passive:o},c=_c(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&yo(()=>{e.removeEventListener(t,c,a)})}function lt(t){for(var e=0;e<t.length;e++)Oo.add(t[e]);for(var r of Vl)r(t)}let Bo=null;function Fn(t){var e=this,r=e.ownerDocument,s=t.type,o=t.composedPath?.()||[],a=o[0]||t.target;Bo=t;var c=0,u=Bo===t&&t.__root;if(u){var f=o.indexOf(u);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var d=o.indexOf(e);if(d===-1)return;f<=d&&(c=f)}if(a=o[c]||t.target,a!==e){ci(t,"currentTarget",{configurable:!0,get(){return a||r}});var v=We,h=He;It(null),lr(null);try{for(var m,g=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var _=a["__"+s];_!=null&&(!a.disabled||t.target===a)&&_.call(a,t)}catch(p){m?g.push(p):m=p}if(t.cancelBubble||b===e||b===null)break;a=b}if(m){for(let p of g)queueMicrotask(()=>{throw p});throw m}}finally{t.__root=e,delete t.currentTarget,It(v),lr(h)}}}function Dl(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function tn(t,e){var r=He;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function G(t,e){var r=(e&Zs)!==0,s=(e&Fi)!==0,o,a=!t.startsWith("<!>");return()=>{o===void 0&&(o=Dl(a?t:"<!>"+t),r||(o=Ot(o)));var c=s||mo?document.importNode(o,!0):o.cloneNode(!0);if(r){var u=Ot(c),f=c.lastChild;tn(u,f)}else tn(c,c);return c}}function wc(t,e,r="svg"){var s=!t.startsWith("<!>"),o=(e&Zs)!==0,a=`<${r}>${s?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var u=Dl(a),f=Ot(u);if(o)for(c=document.createDocumentFragment();Ot(f);)c.appendChild(Ot(f));else c=Ot(f)}var d=c.cloneNode(!0);if(o){var v=Ot(d),h=d.lastChild;tn(v,h)}else tn(d,d);return d}}function Ne(t,e){return wc(t,e,"svg")}function yc(t=""){{var e=_r(t+"");return tn(e,e),e}}function ge(){var t=document.createDocumentFragment(),e=document.createComment(""),r=_r();return t.append(e,r),tn(e,r),t}function C(t,e){t!==null&&t.before(e)}let Yl=!0;function ke(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function xc(t,e){return Ec(t,e)}const xn=new Map;function Ec(t,{target:e,anchor:r,props:s={},events:o,context:a,intro:c=!0}){nc();var u=new Set,f=h=>{for(var m=0;m<h.length;m++){var g=h[m];if(!u.has(g)){u.add(g);var b=bc(g);e.addEventListener(g,Fn,{passive:b});var _=xn.get(g);_===void 0?(document.addEventListener(g,Fn,{passive:b}),xn.set(g,1)):xn.set(g,_+1)}}};f(Jn(Oo)),Vl.add(f);var d=void 0,v=cc(()=>{var h=r??e.appendChild(_r());return Qi(h,{pending:()=>{}},m=>{if(a){_e({});var g=rt;g.c=a}o&&(s.$$events=o),Yl=c,d=t(m,s)||{},Yl=!0,a&&we()}),()=>{for(var m of u){e.removeEventListener(m,Fn);var g=xn.get(m);--g===0?(document.removeEventListener(m,Fn),xn.delete(m)):xn.set(m,g)}Vl.delete(f),h!==r&&h.parentNode?.removeChild(h)}});return kc.set(d,v),d}let kc=new WeakMap;class qn{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#i=!0;constructor(e,r=!0){this.anchor=e,this.#i=r}#s=()=>{var e=Je;if(this.#e.has(e)){var r=this.#e.get(e),s=this.#t.get(r);if(s)Ol(s),this.#n.delete(r);else{var o=this.#r.get(r);o&&(this.#t.set(r,o.effect),this.#r.delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),s=o.effect)}for(const[a,c]of this.#e){if(this.#e.delete(a),a===e)break;const u=this.#r.get(c);u&&(Rt(u.effect),this.#r.delete(c))}for(const[a,c]of this.#t){if(a===r||this.#n.has(a))continue;const u=()=>{if(Array.from(this.#e.values()).includes(a)){var d=document.createDocumentFragment();To(c,d),d.append(_r()),this.#r.set(a,{effect:c,fragment:d})}else Rt(c);this.#n.delete(a),this.#t.delete(a)};this.#i||!s?(this.#n.add(a),Jr(c,u,!1)):u()}}};#l=e=>{this.#e.delete(e);const r=Array.from(this.#e.values());for(const[s,o]of this.#r)r.includes(s)||(Rt(o.effect),this.#r.delete(s))};ensure(e,r){var s=Je,o=bo();if(r&&!this.#t.has(e)&&!this.#r.has(e))if(o){var a=document.createDocumentFragment(),c=_r();a.append(c),this.#r.set(e,{effect:Ut(()=>r(c)),fragment:a})}else this.#t.set(e,Ut(()=>r(this.anchor)));if(this.#e.set(s,e),o){for(const[u,f]of this.#t)u===e?s.skipped_effects.delete(f):s.skipped_effects.add(f);for(const[u,f]of this.#r)u===e?s.skipped_effects.delete(f.effect):s.skipped_effects.add(f.effect);s.oncommit(this.#s),s.ondiscard(this.#l)}else this.#s()}}const Sc=0,Wl=1;function Ul(t,e,r,s,o){var a=Hr(),c=_t,u=a?pr(c):Il(c,!1,!1),f=a?pr(c):Il(c,!1,!1),d=new qn(t);Kr(()=>{var v=e(),h=!1;if(fi(v)){var m=co(),g=!1;const b=_=>{if(!h){g=!0,m(!1),Kt.ensure();try{_()}finally{Tn(),wn||lo()}}};v.then(_=>{b(()=>{br(u,_),d.ensure(Wl,s&&(p=>s(p,u)))})},_=>{b(()=>{if(br(f,_),d.ensure(Wl,o&&(p=>o(p,f))),!o)throw f.v})}),Mr(()=>{g||b(()=>{d.ensure(Sc,r)})})}else br(u,v),d.ensure(Wl,s);return()=>{h=!0}})}function Y(t,e,r=!1){var s=new qn(t),o=r?hr:0;function a(c,u){s.ensure(c,u)}Kr(()=>{var c=!1;e((u,f=!0)=>{c=!0,a(f,u)}),c||a(!1,null)},o)}function En(t,e,r){var s=new qn(t),o=!Hr();Kr(()=>{var a=e();o&&a!==null&&typeof a=="object"&&(a={}),s.ensure(a,r)})}function et(t,e){return e}function Ac(t,e,r){for(var s=[],o=e.length,a,c=e.length,u=0;u<o;u++){let h=e[u];Jr(h,()=>{if(a){if(a.pending.delete(h),a.done.add(h),a.pending.size===0){var m=t.outrogroups;Hl(Jn(a.done)),m.delete(a),m.size===0&&(t.outrogroups=null)}}else c-=1},!1)}if(c===0){var f=s.length===0&&r!==null;if(f){var d=r,v=d.parentNode;lc(v),v.append(d),t.items.clear()}Hl(e,!f)}else a={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(a)}function Hl(t,e=!0){for(var r=0;r<t.length;r++)Rt(t[r],e)}var Vo;function Qe(t,e,r,s,o,a=null){var c=t,u=new Map,f=(e&Qs)!==0;if(f){var d=t;c=d.appendChild(_r())}var v=null,h=jl(()=>{var w=r();return Sl(w)?w:w==null?[]:Jn(w)}),m,g=!0;function b(){p.fallback=v,Cc(p,m,c,e,s),v!==null&&(m.length===0?(v.f&mr)===0?Ol(v):(v.f^=mr,On(v,null,c)):Jr(v,()=>{v=null}))}var _=Kr(()=>{m=l(h);for(var w=m.length,S=new Set,E=Je,k=bo(),A=0;A<w;A+=1){var j=m[A],N=s(j,A),R=g?null:u.get(N);R?(R.v&&br(R.v,j),R.i&&br(R.i,A),k&&E.skipped_effects.delete(R.e)):(R=Nc(u,g?c:Vo??=_r(),j,N,A,o,e,r),g||(R.e.f|=mr),u.set(N,R)),S.add(N)}if(w===0&&a&&!v&&(g?v=Ut(()=>a(c)):(v=Ut(()=>a(Vo??=_r())),v.f|=mr)),!g)if(k){for(const[L,T]of u)S.has(L)||E.skipped_effects.add(T.e);E.oncommit(b),E.ondiscard(()=>{})}else b();l(h)}),p={effect:_,items:u,outrogroups:null,fallback:v};g=!1}function Cc(t,e,r,s,o){var a=(s&Ci)!==0,c=e.length,u=t.items,f=t.effect.first,d,v=null,h,m=[],g=[],b,_,p,w;if(a)for(w=0;w<c;w+=1)b=e[w],_=o(b,w),p=u.get(_).e,(p.f&mr)===0&&(p.nodes?.a?.measure(),(h??=new Set).add(p));for(w=0;w<c;w+=1){if(b=e[w],_=o(b,w),p=u.get(_).e,t.outrogroups!==null)for(const T of t.outrogroups)T.pending.delete(p),T.done.delete(p);if((p.f&mr)!==0)if(p.f^=mr,p===f)On(p,null,r);else{var S=v?v.next:f;p===t.effect.last&&(t.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),jr(t,v,p),jr(t,p,S),On(p,S,r),v=p,m=[],g=[],f=v.next;continue}if((p.f&qt)!==0&&(Ol(p),a&&(p.nodes?.a?.unfix(),(h??=new Set).delete(p))),p!==f){if(d!==void 0&&d.has(p)){if(m.length<g.length){var E=g[0],k;v=E.prev;var A=m[0],j=m[m.length-1];for(k=0;k<m.length;k+=1)On(m[k],E,r);for(k=0;k<g.length;k+=1)d.delete(g[k]);jr(t,A.prev,j.next),jr(t,v,A),jr(t,j,E),f=E,v=j,w-=1,m=[],g=[]}else d.delete(p),On(p,f,r),jr(t,p.prev,p.next),jr(t,p,v===null?t.effect.first:v.next),jr(t,v,p),v=p;continue}for(m=[],g=[];f!==null&&f!==p;)(d??=new Set).add(f),g.push(f),f=f.next;if(f===null)continue}(p.f&mr)===0&&m.push(p),v=p,f=p.next}if(t.outrogroups!==null){for(const T of t.outrogroups)T.pending.size===0&&(Hl(Jn(T.done)),t.outrogroups?.delete(T));t.outrogroups.size===0&&(t.outrogroups=null)}if(f!==null||d!==void 0){var N=[];if(d!==void 0)for(p of d)(p.f&qt)===0&&N.push(p);for(;f!==null;)(f.f&qt)===0&&f!==t.fallback&&N.push(f),f=f.next;var R=N.length;if(R>0){var L=(s&Qs)!==0&&c===0?r:null;if(a){for(w=0;w<R;w+=1)N[w].nodes?.a?.measure();for(w=0;w<R;w+=1)N[w].nodes?.a?.fix()}Ac(t,N,L)}}a&&Mr(()=>{if(h!==void 0)for(p of h)p.nodes?.a?.apply()})}function Nc(t,e,r,s,o,a,c,u){var f=(c&Si)!==0?(c&Ni)===0?Il(r,!1,!1):pr(r):null,d=(c&Ai)!==0?pr(o):null;return{v:f,i:d,e:Ut(()=>(a(e,f??r,d??o,u),()=>{t.delete(s)}))}}function On(t,e,r){if(t.nodes)for(var s=t.nodes.start,o=t.nodes.end,a=e&&(e.f&mr)===0?e.nodes.start:r;s!==null;){var c=jn(s);if(a.before(s),s===o)return;s=c}}function jr(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function ht(t,e,r=!1,s=!1,o=!1){var a=t,c="";ie(()=>{var u=He;if(c!==(c=e()??"")&&(u.nodes!==null&&(So(u.nodes.start,u.nodes.end),u.nodes=null),c!=="")){var f=c+"";r?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var d=Dl(f);if((r||s)&&(d=Ot(d)),tn(Ot(d),d.lastChild),r||s)for(;Ot(d);)a.before(Ot(d));else a.before(d)}})}function yr(t,e,...r){var s=new qn(t);Kr(()=>{const o=e()??null;s.ensure(o,o&&(a=>o(a,...r)))},hr)}function Bn(t,e,r){var s=new qn(t);Kr(()=>{var o=e()??null;s.ensure(o,o&&(a=>r(a,o)))},hr)}const Tc=()=>performance.now(),xr={tick:t=>requestAnimationFrame(t),now:()=>Tc(),tasks:new Set};function Do(){const t=xr.now();xr.tasks.forEach(e=>{e.c(t)||(xr.tasks.delete(e),e.f())}),xr.tasks.size!==0&&xr.tick(Do)}function Mc(t){let e;return xr.tasks.size===0&&xr.tick(Do),{promise:new Promise(r=>{xr.tasks.add(e={c:t,f:r})}),abort(){xr.tasks.delete(e)}}}function al(t,e){yn(()=>{t.dispatchEvent(new CustomEvent(e))})}function Pc(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Yo(t){const e={},r=t.split(";");for(const s of r){const[o,a]=s.split(":");if(!o||a===void 0)break;const c=Pc(o.trim());e[c]=a.trim()}return e}const jc=t=>t;function Wo(t,e,r,s){var o=(t&Ri)!==0,a=(t&Ii)!==0,c=o&&a,u=(t&zi)!==0,f=c?"both":o?"in":"out",d,v=e.inert,h=e.style.overflow,m,g;function b(){return yn(()=>d??=r()(e,s?.()??{},{direction:f}))}var _={is_global:u,in(){if(e.inert=v,!o){g?.abort(),g?.reset?.();return}a||m?.abort(),al(e,"introstart"),m=Gl(e,b(),g,1,()=>{al(e,"introend"),m?.abort(),m=d=void 0,e.style.overflow=h})},out(E){if(!a){E?.(),d=void 0;return}e.inert=!0,al(e,"outrostart"),g=Gl(e,b(),m,0,()=>{al(e,"outroend"),E?.()})},stop:()=>{m?.abort(),g?.abort()}},p=He;if((p.nodes.t??=[]).push(_),o&&Yl){var w=u;if(!w){for(var S=p.parent;S&&(S.f&hr)!==0;)for(;(S=S.parent)&&(S.f&er)===0;);w=!S||(S.f&el)!==0}w&&Fl(()=>{sr(()=>_.in())})}}function Gl(t,e,r,s,o){var a=s===1;if(hn(e)){var c,u=!1;return Mr(()=>{if(!u){var p=e({direction:a?"in":"out"});c=Gl(t,p,r,s,o)}}),{abort:()=>{u=!0,c?.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r?.deactivate(),!e?.duration)return o(),{abort:pt,deactivate:pt,reset:pt,t:()=>s};const{delay:f=0,css:d,tick:v,easing:h=jc}=e;var m=[];if(a&&r===void 0&&(v&&v(0,1),d)){var g=Yo(d(0,1));m.push(g,g)}var b=()=>1-s,_=t.animate(m,{duration:f,fill:"forwards"});return _.onfinish=()=>{_.cancel();var p=r?.t()??1-s;r?.abort();var w=s-p,S=e.duration*Math.abs(w),E=[];if(S>0){var k=!1;if(d)for(var A=Math.ceil(S/16.666666666666668),j=0;j<=A;j+=1){var N=p+w*h(j/A),R=Yo(d(N,1-N));E.push(R),k||=R.overflow==="hidden"}k&&(t.style.overflow="hidden"),b=()=>{var L=_.currentTime;return p+w*h(L/S)},v&&Mc(()=>{if(_.playState!=="running")return!1;var L=b();return v(L,1-L),!0})}_=t.animate(E,{duration:S,fill:"forwards"}),_.onfinish=()=>{b=()=>s,v?.(s,1-s),o()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=pt)},deactivate:()=>{o=pt},reset:()=>{s===0&&v?.(1,0)},t:()=>b()}}function Uo(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=Uo(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Lc(){for(var t,e,r=0,s="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=Uo(t))&&(s&&(s+=" "),s+=e);return s}function Rc(t){return typeof t=="object"?Lc(t):t??""}const Ho=[...`
\r\f \v\uFEFF`];function Ic(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var o in r)if(r[o])s=s?s+" "+o:o;else if(s.length)for(var a=o.length,c=0;(c=s.indexOf(o,c))>=0;){var u=c+a;(c===0||Ho.includes(s[c-1]))&&(u===s.length||Ho.includes(s[u]))?s=(c===0?"":s.substring(0,c))+s.substring(u+1):c=u}}return s===""?null:s}function zc(t,e){return t==null?null:String(t)}function it(t,e,r,s,o,a){var c=t.__className;if(c!==r||c===void 0){var u=Ic(r,s,a);u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u),t.__className=r}else if(a&&o!==a)for(var f in a){var d=!!a[f];(o==null||d!==!!o[f])&&t.classList.toggle(f,d)}return a}function ct(t,e,r,s){var o=t.__style;if(o!==e){var a=zc(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return s}const Fc=Symbol("is custom element"),qc=Symbol("is html");function O(t,e,r,s){var o=Oc(t);o[e]!==(o[e]=r)&&(e==="loading"&&(t[hi]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Bc(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Oc(t){return t.__attributes??={[Fc]:t.nodeName.includes("-"),[qc]:t.namespaceURI===qi}}var Go=new Map;function Bc(t){var e=t.getAttribute("is")||t.nodeName,r=Go.get(e);if(r)return r;Go.set(e,r=[]);for(var s,o=t,a=Element.prototype;a!==o;){s=Ds(o);for(var c in s)s[c].set&&r.push(c);o=Qn(o)}return r}function Xl(t,e,r=e){var s=new WeakSet;oc(t,"input",async o=>{var a=o?t.defaultValue:t.value;if(a=Kl(t)?Jl(a):a,r(a),Je!==null&&s.add(Je),await hc(),a!==(a=e())){var c=t.selectionStart,u=t.selectionEnd,f=t.value.length;if(t.value=a??"",u!==null){var d=t.value.length;c===u&&u===f&&d>f?(t.selectionStart=d,t.selectionEnd=d):(t.selectionStart=c,t.selectionEnd=Math.min(u,d))}}}),sr(e)==null&&t.value&&(r(Kl(t)?Jl(t.value):t.value),Je!==null&&s.add(Je)),ql(()=>{var o=e();if(t===document.activeElement){var a=nl??Je;if(s.has(a))return}Kl(t)&&o===Jl(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Kl(t){var e=t.type;return e==="number"||e==="range"}function Jl(t){return t===""?null:+t}class Ql{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(e){this.#r=e}observe(e,r){var s=this.#e.get(e)||new Set;return s.add(r),this.#e.set(e,s),this.#n().observe(e,this.#r),()=>{var o=this.#e.get(e);o.delete(r),o.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#n(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var r of e){Ql.entries.set(r.target,r);for(var s of this.#e.get(r.target)||[])s(r)}}))}}var Vc=new Ql({box:"border-box"});function Xo(t,e,r){var s=Vc.observe(t,()=>r(t[e]));Fl(()=>(sr(()=>r(t[e])),s))}function Ko(t,e){return t===e||t?.[Tr]===e}function rn(t={},e,r,s){return Fl(()=>{var o,a;return ql(()=>{o=a,a=[],sr(()=>{t!==r(...a)&&(e(t,...a),o&&Ko(r(...o),t)&&e(null,...o))})}),()=>{Mr(()=>{a&&Ko(r(...a),t)&&e(null,...a)})}}),t}function Dc(t=!1){const e=rt,r=e.l.u;if(!r)return;let s=()=>gc(e.s);if(t){let o=0,a={};const c=Mn(()=>{let u=!1;const f=e.s;for(const d in f)f[d]!==a[d]&&(a[d]=f[d],u=!0);return u&&o++,o});s=()=>l(c)}r.b.length&&ic(()=>{Jo(e,s),Al(r.b)}),ye(()=>{const o=sr(()=>r.m.map(di));return()=>{for(const a of o)typeof a=="function"&&a()}}),r.a.length&&ye(()=>{Jo(e,s),Al(r.a)})}function Jo(t,e){if(t.l.s)for(const r of t.l.s)l(r);e()}let il=!1;function Yc(t){var e=il;try{return il=!1,[t(),il]}finally{il=e}}const Wc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function nn(t,e,r){return new Proxy({props:t,exclude:e},Wc)}const Uc={get(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(hn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,r){let s=t.props.length;for(;s--;){let o=t.props[s];hn(o)&&(o=o());const a=Cr(o,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(hn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const o=Cr(s,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Tr||e===Ks)return!1;for(let r of t.props)if(hn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(hn(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function Lr(...t){return new Proxy({props:t},Uc)}function q(t,e,r,s){var o=!pn||(r&Mi)!==0,a=(r&ji)!==0,c=(r&Li)!==0,u=s,f=!0,d=()=>(f&&(f=!1,u=c?sr(s):s),u),v;if(a){var h=Tr in t||Ks in t;v=Cr(t,e)?.set??(h&&e in t?E=>t[e]=E:void 0)}var m,g=!1;a?[m,g]=Yc(()=>t[e]):m=t[e],m===void 0&&s!==void 0&&(m=d(),v&&(o&&wi(),v(m)));var b;if(o?b=()=>{var E=t[e];return E===void 0?d():(f=!0,E)}:b=()=>{var E=t[e];return E!==void 0&&(u=void 0),E===void 0?u:E},o&&(r&Pi)===0)return b;if(v){var _=t.$$legacy;return(function(E,k){return arguments.length>0?((!o||!k||_||g)&&v(k?b():E),E):b()})}var p=!1,w=((r&Ti)!==0?Mn:jl)(()=>(p=!1,b()));a&&l(w);var S=He;return(function(E,k){if(arguments.length>0){const A=k?l(w):o&&a?ze(E):E;return I(w,A),p=!0,u!==void 0&&(u=A),E}return Zr&&p||(S.f&vr)!==0?w.v:l(w)})}function Hc(t){rt===null&&Js(),pn&&rt.l!==null?Gc(rt).m.push(t):ye(()=>{const e=sr(t);if(typeof e=="function")return e})}function Gc(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Xc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Xc),Di();function Kc(t){return Vn(t,.5)}function Jc(t){return Vn(t,.75)-Vn(t,.25)}function Vn(t,e){if(Ve(t))return Vn(t.v,e);if(Ve(e))return Vn(t,e.v);const r=t.length;if(Array.isArray(e)||(e=[e]),!is(e[0])||Er(e)<0||Ir(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(c,u){const f=(r-1)*u+1,d=Math.floor(f),v=Math.ceil(f);return c[d-1]+(c[v-1]-c[d-1])*(f-Math.floor(f))}const o=ds(t),a=e.map(c=>s(o,c));return e.length==1?a[0]:Ze(a)}function Qo(t,e){Ve(t)&&Qo(t.v,e);const r=Rr(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const s=(r[1]-r[0])/e;return xe.seq(r[0],r[1],s)}function Zo(t){if(Ve(t))return Zo(t.v);const e=new xe.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new xe(e)}function Zl(t,e){if(Ve(t))return Zl(t.v,e);e===void 0&&(e=.1);const r=Rr(t),s=(r[1]-r[0])*e;return[r[0]-s,r[1]+s]}function Rr(t){if(Ve(t))return Rr(t.v);let e=t[0],r=t[0];for(let s=1;s<t.length;s++)t[s]<e&&(e=t[s]),t[s]>r&&(r=t[s]);return[e,r]}function cl(t,e){return Ve(t)?cl(t.v,e):Math.sqrt(ul(t,e))}function ul(t,e){if(e===void 0&&(e=!1),Ve(t))return ul(t.v);const r=ln(t);let s=0;for(let o=0;o<t.length;o++){const a=t[o]-r;s=s+a*a}return s/(e?t.length:t.length-1)}function ln(t){return Ve(t)?ln(t.v):$o(t)/t.length}function $o(t){if(Ve(t))return $o(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function ea(t){if(Ve(t))return ea(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Er(t){return Ve(t)||Qt(t)?t.v[$l(t.v)-1]:t[$l(t)-1]}function $l(t){if(Ve(t)||Qt(t))return $l(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]<r&&(e=s,r=t[s-1]);return e}function Ir(t){return Ve(t)||Qt(t)?t.v[es(t.v)-1]:t[es(t)-1]}function es(t){if(Ve(t)||Qt(t))return es(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]>r&&(e=s,r=t[s-1]);return e}const ts=30,Qc=1e-7,Zc=1e-7,ta=1e-13,ra=1e3,$c=100;function na(t,e,r,s,o){s===void 0&&(s=ra),r===void 0&&(r=ta),o===void 0&&(o=$c);let a=r,c=s,u=(c-a)/o;for(let f=0;f<o;f++){let d,v;for(let g=0;g<o;g++){d=a+g*u,v=a+(g+1)*u;const b=e(d),_=e(v);if(b<=t&&_>=t)break}const h=(d+v)/2,m=e(h);if(Math.abs(m-t)<Qc||(a=d,c=v,u=(c-a)/o,u/c<Zc))return h}return(a+c)/2}function la(t,e=0,r=1){let s=xe.zeros(t);for(let o=0;o<t;o++)s.v[o]=e+Math.random()*(r-e);return s}function sa(t,e=0,r=1){let s=xe.zeros(t);for(let o=0;o<t;o++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[o]=a*Math.sin(c)*r+e}return s}function rs(t,e=0,r=1){if(Ve(t))return t.apply(o=>rs(o,e,r));const s=1/(Math.sqrt(2)*r);return .5*(1+tu((t-e)*s))}function ns(t,e=0,r=1){if(Ve(t))return t.apply(B=>ns(B,e,r));if(e!==0||r!==1)return ns(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const s=.425,o=5,a=.180625,c=1.6,u=3.3871327179,f=5.0434271938*10,d=1.5929113202*100,v=5.910937472*10,h=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,b=1.4234372777,_=2.75681539,p=1.3067284816,w=1.7023821103*.1,S=7.370016425*.1,E=1.2021132975*.1,k=6.657905115,A=3.081226386,j=4.2868294337*.1,N=1.7337203997*.01,R=2.4197894225*.1,L=1.2258202635*.01,T=t-.5;let M;if(Math.abs(T)<=s)return M=a-T*T,T*(((v*M+d)*M+f)*M+u)/(((g*M+m)*M+h)*M+1);M=T<0?t:1-t,M=Math.sqrt(-Math.log(M));let P;return M<=o?(M=M-c,P=(((w*M+p)*M+_)*M+b)/((E*M+S)*M+1)):(M=M-o,P=((N*M+j)*M+A+k)/((L*M+R)*M+1)),T<0?-P:P}function ls(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return ls(Ze(t),e,r);if(Ve(t))return t.apply(s=>ls(s,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return fl(t*e,e)}return e==Number.POSITIVE_INFINITY?1-fl(r/t,r):e*t>r?1-dl(r/(r+e*t),r/2,e/2):dl(e*t/(r+e*t),e/2,r/2)}function oa(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let s=ra,o=ta;if(t>.9997&&r===1?(s=1e7,o=6e5,t=.9997):t>.9992&&r===1?(s=1e7,o=6e5):t>.997&&r===1?(s=1e6,o=45e3):t>.992&&r===1?(s=1e5,o=5e3):t>.97&&r===1&&(s=1e4,o=400),Array.isArray(t))return oa(Ze(t),e,r);const a=u=>ls(u,e,r);function c(u,f,d){return u===0?0:u===1?Inf:f===0?NaN:d===0?NaN:na(u,a,o,s)}return Ve(t)?t.apply(c,e,r):c(t,e,r)}function fl(t,e){if(Array.isArray(t))return fl(Ze(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(s);function a(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const d=f/e,v=Math.pow(d,1/6)-.5*Math.pow(d,1/3)+1/3*Math.pow(d,1/2);return rs(v,r,o)}function c(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:eu(f/2,e/2)/Dn(e/2)}const u=e>ts?a:c;return Ve(t)?t.apply(u):u(t)}function kr(t,e){if(Array.isArray(t))return kr(Ze(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(s);function a(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const d=ns(f,r,o),v=Math.pow(Math.sqrt(36*d*d-30*d+13)/4+(3*d-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(f){return f===0?0:f===1?Inf:e===0?0:na(f,v=>fl(v,e),0,ts*10)}const u=e>ts?a:c;return Ve(t)?t.apply(u):u(t)}function dl(t,e,r){if(Array.isArray(t))return dl(Ze(t),e,r);if(Ve(t))return t.apply(o=>dl(o,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const s=.5-t+.5;return vu(e,r,t,s)}function Dn(t){if(Ve(t))return t.apply(Dn);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+Dn(1-t));t=t-1;let r=.9999999999998099;for(let o=0;o<e.length;o++)r=r+e[o]/(t+o+1);const s=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*r}function eu(t,e){let o=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/Dn(e+a+1);if(isNaN(c)||c<1e-18)break;o+=c}return Math.pow(t,e)*Dn(e)*Math.exp(-t)*o}function tu(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,s=-.284496736,o=1.421413741,a=-1.453152027,c=1.061405429,f=1/(1+.3275911*t),d=1-((((c*f+a)*f+o)*f+s)*f+r)*f*Math.exp(-t*t);return e*d}function aa(t,e){const r=.564189583547756,s=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],u=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let d,v,h,m,g=Math.abs(e);if(g<=.5)return v=e*e,m=(((s[0]*v+s[1])*v+s[2])*v+s[3])*v+s[4]+1,h=((o[0]*v+o[1])*v+o[2])*v+1,d=.5-e*(m/h)+.5,d=Math.exp(v)*d,d;if(g<=4)m=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],h=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],d=m/h;else{if(e<=-5.6)return d=2,d=Math.exp(e*e)*2,d;v=1/(e*e),m=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+u[4],h=(((f[0]*v+f[1])*v+f[2])*v+f[3])*v+1,d=(r-v*m/h)/g}return e<0&&(d=Math.exp(e*e)*2-d),d}function ia(t,e){let r=t+e-2;return r<=.25?Gt(r+1):r<=1.25?Gt(r)+Fr(r):Gt(r-1)+Math.log(r*(r+1))}function vl(t,e){const r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,d,v,h,m,g,b,_,p,w,S,E,k,A,j;return v=Math.min(t,e),h=Math.max(t,e),g=v/h,m=g/(g+1),p=1/(g+1),E=p*p,w=p+E+1,S=p+E*w+1,k=p+E*S+1,A=p+E*k+1,j=p+E*A+1,d=1/h,b=d*d,_=((((u*j*b+c*A)*b+a*k)*b+o*S)*b+s*w)*b+r,_*=m/h,d=1/v,b=d*d,f=(((((u*b+c)*b+a)*b+o)*b+s)*b+r)/v+_,f}function st(t){let e,r,s,o,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],u=.273076135303957,f=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(f*r+u)*r+1,s=a/o,e>0?r*s/t:t*(s+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],u=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(((u[4]*r+u[3])*r+u[2])*r+u[1])*r+1,s=a/o,e>0?r/t*(s-.5-.5):t*s}}}function ru(t,e,r){let s,o,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=o=0,s=0;for(let u=1;u<=r;u++)a=o,o=s,s=c*o-a+e[r-u];return(s-a)*.5}function ca(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,s=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*ru(t/.375,e,r));if(t<s)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function zr(t,e){const r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,d,v,h,m,g,b,_,p,w,S,E,k,A;return t>e?(v=e/t,f=1/(v+1),_=v/(v+1),d=t+(e-.5)):(v=t/e,f=v/(v+1),_=1/(v+1),d=e+(t-.5)),S=_*_,p=_+S+1,w=_+S*p+1,E=_+S*w+1,k=_+S*E+1,A=_+S*k+1,h=1/(e*e),b=((((u*A*h+c*k)*h+a*E)*h+o*w)*h+s*p)*h+r,b*=f/e,m=d*Fr(t/e),g=t*(Math.log(e)-1),m>g?b-g-m:b-m-g}function Gt(t){if(t<.6){const b=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*b}else{const e=.422784335098467,r=.848044614534529,s=.565221050691933,o=.156513060486551,a=.017050248402265,c=.000497958207639485,u=1.24313399877507,f=.548042109832463,d=.10155218743983,v=.00713309612391,h=.000116165475989616,m=t-.5-.5,g=(((((c*m+a)*m+o)*m+s)*m+r)*m+e)/(((((h*m+v)*m+d)*m+f)*m+u)*m+1);return m*g}}function Jt(t){const e=.418938533204673,r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;if(t<=.8)return Gt(t)-Math.log(t);if(t<=2.25)return Gt(t-.5-.5);if(t<10){let v=Math.round(t-1.25),h=t,m=1;for(let g=1;g<=v;++g)h+=-1,m*=h;return Gt(h-1)+Math.log(m)}let f=1/(t*t),d=(((((u*f+c)*f+a)*f+o)*f+s)*f+r)/t;return e+d+(t-.5)*(Math.log(t)-1)}function ss(t,e){const r=.918938533204673;let s=Math.min(t,e),o=Math.max(t,e);function a(c,u,f){let d=Math.round(f-1),v=1;for(let h=1;h<=d;++h)f+=-1,v*=f/(u+f);return c+Math.log(v)+(Jt(u)+(Jt(f)-ia(u,f)))}if(s<8){if(s<1)return o<8?Jt(s)+(Jt(o)-Jt(s+o)):Jt(s)+zr(s,o);let c;if(s<2)return o<=2?Jt(s)+Jt(o)-ia(s,o):o<8?(c=0,a(c,s,o)):Jt(s)+zr(s,o);if(o<=1e3){let u=Math.round(s-1);c=1;for(let f=1;f<=u;++f){s+=-1;let d=s/o;c*=d/(d+1)}return c=Math.log(c),o>=8?c+Jt(s)+zr(s,o):a(c,s,o)}else{let u=Math.round(s-1);c=1;for(let f=1;f<=u;++f)s+=-1,c*=s/(s/o+1);return log(c)-u*log(o)+(Jt(s)+zr(s,o))}}else{let c=vl(s,o),u=s/o,f=-(s-.5)*Math.log(u/(u+1)),d=o*Fr(u);return f>d?Math.log(o)*-.5+r+c-d-f:Math.log(o)*-.5+r+c-f-d}}function ua(t){return(t==0?1024:-300)*.69314718055995*.99999}function kn(t){const e=.0566749439387324,r=.0456512608815524,s=.333333333333333,o=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,u=.354508718369557;let f,d,v,h,m;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(f=t+.3,f/=.7,m=e-f*.3):t>.18?(f=t*.75-.25,m=r+f/3):(f=t,m=0),d=f/(f+2),v=d*d,h=((a*v+o)*v+s)/((u*v+c)*v+1),v*2*(1/(1-d)-d*h)+m)}function Fr(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,s=-.0178874546012214,o=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let u=t/(t+2),f=u*u,d=(((s*f+r)*f+e)*f+1)/(((c*f+a)*f+o)*f+1);return u*2*d}function nu(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,d,v,h,m;if(v=Math.abs(t),v<=.5)return f=t*t,m=(((r[0]*f+r[1])*f+r[2])*f+r[3])*f+r[4]+1,h=((s[0]*f+s[1])*f+s[2])*f+1,t*(m/h);if(v<=4){m=((((((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4])*v+o[5])*v+o[6])*v+o[7],h=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7];let b=.5-Math.exp(-t*t)*m/h+.5;return t<0?-b:b}if(v>=5.8)return t>0?1:-1;d=t*t,f=1/d,m=(((c[0]*f+c[1])*f+c[2])*f+c[3])*f+c[4],h=(((u[0]*f+u[1])*f+u[2])*f+u[3])*f+1,f=(e-m/(d*h))/v;let g=.5-Math.exp(-d)*f+.5;return t<0?-g:g}function lu(t){const e=914041914819518e-24,r=.0238082361044469,s=-.499999999085958,o=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+o)*t+s)*t+1));{let u=Math.exp(t);return t>0?u*(.5-1/u+.5):u-.5-.5}}function Yn(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function su(t){const e=.785398163397448,r=1.4616321449683622,s=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],o=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let u,f,d,v,h,m,g,b,_,p,w,S,E;if(w=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),w>v&&(w=v),E=1e-9,b=0,t<.5){if(fabs(t)<=E){if(t==0)return 0;b=-1/t}else{if(h=-t,_=e,h<=0&&(h=-h,_=-_),h>=w)return 0;if(d=Math.round(h),h-=d,d=Math.round(h*4),h=(h-d*.25)*4,f=d/2,f+f!=d&&(h=1-h),m=e*h,u=f/2,u+u!=f&&(_=-_),f=(d+1)/2,u=f/2,u+=u,u==f){if(m==0)return 0;b=_*(cos(m)/sin(m)*4)}else b=_*(sin(m)/cos(m)*4)}t=1-t}if(t<=3){g=t,S=s[0]*t;for(let k=1;k<=5;++k)g=(g+o[k-1])*t,S=(S+s[k])*t;return g=(S+s[6])/(g+o[5]),p=t-r,g*p+b}if(t<w){h=1/(t*t),g=h,S=a[0]*h;for(let k=1;k<=3;++k)g=(g+c[k-1])*h,S=(S+a[k])*h;b=S/(g+c[3])-.5/t+b}return b+log(t)}function ou(t,e,r,s){let o,a,c,u,f,d;if(t>s*.001){if(u=t*Math.log(r),u<Math.exparg(1))return 0;o=Math.exp(u)}else o=1;for(o*=e/t,d=s/t,f=t+1,u=r,c=u/f,f+=1,u=r*u,a=u/f,c+=a;Math.abs(r)>d;)f+=1,u=r*u,a=u/f,c+=a;return o*=t*c+1,o}function au(t,e,r,s){const o=.577215664901533;let a,c,u,f,d,v,h=e*r;for(d=r-h,c=e*s<=.02?Math.log(r)+su(e)+o+d:Math.log(h)+o+d,a=s*5*Math.abs(c),u=1,f=0,u+=1,d*=r-h/u,v=d/u,f+=v;Math.abs(v)>a;)u+=1,d*=r-h/u,v=d/u,f+=v;return-t*(c+f)}function os(t,e,r,s){let o,a,c,u,f,d,v,h,m;if(r==0)return 0;if(v=Math.min(t,e),v>=1)d=t*Math.log(r)-ss(t,e),a=Math.exp(d)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(a=Math.pow(r,t),a==0)return a;m=t+e,m>1?(f=t+e-1,d=(st(f)+1)/m):d=st(m)+1,c=(st(t)+1)*(st(e)+1)/d,a*=c*(e/m)}else{if(f=Gt(v),o=Math.round(h-1),o>=1){c=1;for(let w=1;w<=o;++w)h+=-1,c*=h/(v+h);f+=Math.log(c)}d=t*Math.log(r)-f,h+=-1,m=v+h,m>1?(f=v+h-1,u=(st(f)+1)/m):u=st(m)+1,a=Math.exp(d)*(v/t)*(st(h)+1)/u}else f=Gt(v)+zr(v,h),d=t*Math.log(r)-f,a=v/t*Math.exp(d);if(a==0||t<=s*.1)return a;let g=s/t,b=0,_=0,p;for(c=1,b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),_+=p;b<1e7&&Math.abs(p)>g;)b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),_+=p;return t*_>-1?a*=t*_+1:a=0,a}function hl(t,e,r,s,o,a){let c,u,f,d,v,h=t+e,m=t+1;if(o>1&&t>=1&&h>=m*1.1?(f=Math.round(Math.abs(ua(1))),u=Math.round(ua(0)),f>u&&(f=u),d=Math.exp(-f)):(f=0,d=1),c=uu(f,t,e,r,s)/t,o==1||c==0)return c;let g=o-1,b=d;if(u=0,e>1){if(s>1e-4){let _=(e-1)*r/s-t;_>=1&&(u=_<g?Math.round(_):g)}else u=g;for(let _=0;_<u;++_)v=_,d*=(h+v)/(m+v)*r,b+=d}for(let _=u;_<g&&(v=_,d*=(h+v)/(m+v)*r,b+=d,!(d<=a*b));++_);return c*=b,c}function iu(t,e,r,s,o,a){let c,u,f,d,v,h,m,g,b,_,p,w,S,E,k,A,j,N,R;if(!Number.isFinite(o)||(R=cu(t,e,r,s),Number.isNaN(R)))return Number.NaN;if(R==0)return 0;for(c=o+1,b=e/t,_=1/t+1,E=s+1,f=0,d=1,h=t+1,w=0,S=1,k=1,A=c/_,v=_/c,f+=1,m=f/t,g=f*(e-f)*r,u=t/h,N=d*(d+b)*u*u*(g*r),u=(m+1)/(_+m+m),j=f+g/h+u*(c+f*E),d=m+1,h+=2,m=N*w+j*k,w=k,k=m,m=N*S+j*A,S=A,A=m,p=v,v=k/A,w/=A,S/=A,k=v,A=1;f<1e4&&(f+=1,m=f/t,g=f*(e-f)*r,u=t/h,N=d*(d+b)*u*u*(g*r),u=(m+1)/(_+m+m),j=f+g/h+u*(c+f*E),d=m+1,h+=2,m=N*w+j*k,w=k,k=m,m=N*S+j*A,S=A,A=m,p=v,v=k/A,!(Math.abs(v-p)<=a*v));)w/=A,S/=A,k=v,A=1;return R*v}function cu(t,e,r,s){const o=.398942280401433;let a,c,u,f,d,v,h,m,g;if(r==0||s==0)return 0;if(h=Math.min(t,e),h<8){let b,_;if(r<=.375?(b=Math.log(r),_=Fr(-r)):s>.375?(b=Math.log(r),_=Math.log(s)):(b=Fr(-s),_=Math.log(s)),v=t*b+e*_,h>=1)return v-=ss(t,e),Math.exp(v);if(m=Math.max(t,e),m>=8)return f=Gt(h)+zr(h,m),h*Math.exp(v-f);if(m<=1){let w=Math.exp(v);return w==0?0:(g=t+e,g>1?(f=t+e-1,v=(st(f)+1)/g):v=st(g)+1,c=(st(t)+1)*(st(e)+1)/v,w*(h*c)/(h/m+1))}if(f=Gt(h),a=Math.round(m-1),a>=1){c=1;for(let w=1;w<=a;++w)m+=-1,c*=m/(h+m);f=Math.log(c)+f}v-=f,m+=-1,g=h+m;let p;return g>1?(f=h+m-1,p=(st(f)+1)/g):p=st(g)+1,h*Math.exp(v)*(st(m)+1)/p}else{let b,_,p,w;return t<=e?(b=t/e,_=b/(b+1),p=1/(b+1),w=t-(t+e)*r):(b=e/t,_=1/(b+1),p=b/(b+1),w=(t+e)*s-e),u=-w/t,f=Math.abs(u)>.6?u-Math.log(r/_):kn(u),u=w/e,d=Math.abs(u)<=.6?kn(u):u-Math.log(s/p),v=Math.exp(-(t*f+e*d)),o*Math.sqrt(e*_)*v*Math.exp(-vl(t,e))}}function uu(t,e,r,s,o){const a=.398942280401433;let c,u,f,d,v,h,m,g;if(h=Math.min(e,r),h<8){let b,_;if(s<=.375?(b=Math.log(s),_=Fr(-s)):o>.375?(b=Math.log(s),_=Math.log(o)):(b=Fr(-o),_=Math.log(o)),v=e*b+r*_,h>=1)return v-=ss(e,r),Yn(t,v);if(m=Math.max(e,r),m>=8)return f=Gt(h)+zr(h,m),h*Yn(t,v-f);if(m<=1){let w=Yn(t,v);return w==0?w:(g=e+r,g>1?(f=e+r-1,v=(st(f)+1)/g):v=st(g)+1,c=(st(e)+1)*(st(r)+1)/v,w*(h*c)/(h/m+1))}f=Gt(h);let p=Math.round(m-1);if(p>=1){c=1;for(let w=1;w<=p;++w)m+=-1,c*=m/(h+m);f+=Math.log(c)}return v-=f,m+=-1,g=h+m,u=g>1?(st(g-1)+1)/g:st(g)+1,h*Yn(t,v)*(st(m)+1)/u}else{let b,_,p,w;e>r?(b=r/e,_=1/(b+1),p=b/(b+1),w=(e+r)*o-r):(b=e/r,_=b/(b+1),p=1/(b+1),w=e-(e+r)*s),-ca(r/e);let S=-w/e;return f=Math.abs(S)>.6?S-Math.log(s/_):kn(S),S=w/r,d=Math.abs(S)>.6?S-Math.log(o/p):kn(S),v=Yn(t,-(e*f+r*d)),a*Math.sqrt(r*_)*v*Math.exp(-vl(e,r))}}function as(t,e,r,s,o,a){let u=Array(30),f=Array(30),d=e-.5-.5,v=t+d*.5,h=s>.375?Math.log(r):Fr(-s),m=-v*h;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+ca(st(e))+e*Math.log(m)+v*h,b=g-(zr(e,t)+e*Math.log(v)),_=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let p=_==0,w=o==0?0:Math.exp(Math.log(o)-b),S=fu(e,m,g,a),E=.25/(v*v),k=h*.25*h,A=S,j=A,N=1,R=1,L=0;for(let T=1;T<=30;++T){let M=e+L;A=(M*(M+1)*A+(m+M+1)*N)*E,L+=2,N*=k,R/=L*(L+1);let P=T-1;u[P]=R;let B=0;if(T>1){let z=e-T;for(let H=1;H<=P;++H)B+=z*u[H-1]*f[P-H],z+=e}f[P]=d*R+B/T;let V=f[P]*A;if(j+=V,j<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(V)<=a*(j+w))break}return o+=p?Math.exp(b+Math.log(j)):_*j,o}function fu(t,e,r,s){const o=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-nu(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return aa(1,a)/a*o}}else if(e<1.1){let a=3,c=e,u=e/(t+3),f=s*.1/(t+1),d;for(a+=1,c*=-(e/a),d=c/(t+a),u+=d;Math.abs(d)>f;)a+=1,c*=-(e/a),d=c/(t+a),u+=d;let v=t*e*((u/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),m=st(t),g=m+1;if(e>=.25&&t<e/2.59||h>-.13394){let b=lu(h),_=((b+.5+.5)*v-b)*g-m;return _<=0?0:_*Math.exp(-r)}else return(.5-Math.exp(h)*g*(.5-v+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,u=e,f=e+(1-t),d=1,v,h;a=e*c+d*a,u=e*f+d*u,v=a/u,d+=1;let m=d-t;for(c=a+m*c,f=u+m*f,h=c/f;Math.abs(h-v)>=s*h;)a=e*c+d*a,u=e*f+d*u,v=a/u,d+=1,m=d-t,c=a+m*c,f=u+m*f,h=c/f;return h}}function du(t,e,r,s){const a=1.12837916709551,c=.353553390593274,u=Array(21),f=Array(21),d=Array(21),v=Array(21);let h=t*kn(-r/t)+e*kn(r/e),m;if(m=Math.exp(-h),m==0)return 0;let g=Math.sqrt(h),b=g/c*.5,_=h+h,p,w,S,E;t<e?(p=t/e,w=1/(p+1),S=(e-t)/e,E=1/Math.sqrt(t*(p+1))):(p=e/t,w=1/(p+1),S=(e-t)/t,E=1/Math.sqrt(e*(p+1))),u[0]=S*.6666666666666666,d[0]=u[0]*-.5,v[0]=-d[0];let k=.5/a*aa(1,g),A=c,j=k+v[0]*E*A,N=1,R=p*p,L=1,T=E,M=b,P=_;for(let V=2;V<=20;V+=2){L*=R,u[V-1]=w*2*(p*L+1)/(V+2);let z=V+1;N+=L,u[z-1]=S*2*N/(V+3);for(let U=V;U<=z;++U){let Q=(U+1)*-.5;f[0]=Q*u[0];for(let K=2;K<=U;++K){let Z=0;for(let le=1;le<=K-1;++le){let re=K-le;Z+=(le*Q-re)*u[le-1]*f[re-1]}f[K-1]=Q*u[K-1]+Z/K}d[U-1]=f[U-1]/(U+1);let ne=0;for(let K=1;K<=U-1;++K)ne+=v[U-K-1]*d[K-1];v[U-1]=-(ne+d[U-1])}k=c*M+(V-1)*k,A=c*P+V*A,M=_*M,P=_*P,T*=E;let H=v[V-1]*T*k;T*=E;let oe=v[z-1]*T*A;if(j+=H+oe,Math.abs(H)+Math.abs(oe)<=s*j)break}let B=Math.exp(-vl(t,e));return a*m*B*j}function vu(t,e,r,s){let a=0,c=0;function u(p,w,S,E){const k=os(p,w,S,1e-15);return E?.5-k+.5:k}function f(p,w,S,E){const k=os(w,p,S,1e-15);return E?k:.5-k+.5}function d(p,w,S,E,k,A){const j=iu(p,w,S,E,k,15000000000000002e-30);return A?.5-j+.5:j}function v(p,w,S,E,k){let A=Math.round(w);w=w-A,w===0&&(A=A-1,w=1);let j=hl(w,p,E,S,A,1e-15);return S<=.7?(j=j+os(p,w,S,1e-15),k?.5-j+.5:j):(p<=15&&(A=20,j=j+hl(p,w,S,E,A,1e-15),p=p+A),j=as(p,w,S,E,j,15*1e-15),k?.5-j+.5:j)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,m,g,b,_;if(t<=1||e<=1){if(r>.5?(_=!0,h=e,g=s,m=t,b=r):(_=!1,h=t,g=r,m=e,b=s),m<Math.min(1e-15,1e-15*h))return a=ou(h,m,g,1e-15),_?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=au(h,m,g,1e-15),_?c:.5-c+.5;if(Math.max(h,m)>1){if(m<=1)return u(h,m,g,_);if(g>=.29)return f(h,m,b,_);if(g<.1&&Math.pow(g*m,h)<=.7)return u(h,m,g,_)}else{if(h>=Math.min(.2,m)||Math.pow(g,h)<=.9)return u(h,m,g,_);if(g>=.3)return f(h,m,b,_)}let p=!1;return Math.max(h,m)>1&&m>15?c=0:(p=!0,c=hl(m,h,b,g,20,1e-15),m+=20),c=as(m,h,b,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(p?c=hl(m-n,h,b,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=as(m,h,b,g,c,15*1e-15),a=-expm1(c),_?.5-a+.5:a):(a=.5-c+.5,_?.5-a+.5:a)}else{let p=Number.isFinite(t+e)?t>e?(t+e)*s-e:t-(t+e)*r:t*s-e*r;const w=p<0;let S,E,k,A;if(w?(p=-p,S=e,k=s,E=t,A=r):(S=t,k=r,E=e,A=s),E<40)return E*k<=.7?u(S,E,k,w):v(S,E,k,A,w);if(S>E){if(E<=100||p>E*.03)return d(S,E,k,A,p,w)}else{if(S<=100)return d(S,E,k,A,p,w);if(p>S*.03)return d(S,E,k,A,p,w)}return a=du(S,E,p,1e-15*100),w?.5-a+.5:a}}function fa(t){const e=t.nrows,r=t.ncols;if(e<r){const c=fa(t.subset([],Ue.seq(1,e)));return{Q:c.Q,R:mu(c.Q,t)}}let s=Pe.eye(e),o=t.t();for(let c=1;c<=r;c++)for(let u=e;u>=c+1;u--){const f=o.v.subarray((u-2)*r,u*r),d=s.v.subarray((u-2)*e,u*e),v=f.slice(),h=d.slice(),[m,g,b]=hu(v[c-1],v[c-1+r]);for(let _=0;_<r;_++)f[_]=v[_]*m+v[_+r]*g,f[_+r]=v[_]*-g+v[_+r]*m,d[_]=h[_]*m+h[_+e]*g,d[_+e]=h[_]*-g+h[_+e]*m;for(let _=r;_<e;_++)d[_]=h[_]*m+h[_+e]*g,d[_+e]=h[_]*-g+h[_+e]*m}const a=Ue.seq(1,r);return{Q:e===r?s:s.subset([],a),R:e===r?o.t():o.subset([],a).t()}}function hu(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),u=1/c;return[u,a*u,t*c]}const r=t/e,s=Math.sqrt(1+r*r),o=1/s;return[r*o,o,e*s]}function is(t){return typeof t=="number"}function da(t,e){e===void 0&&(e=t);const r=t.nrows,s=t.ncols,o=e.nrows;e.ncols;const a=r,c=o,u=s,f=new Float64Array(a*c);for(let d=0;d<u;d++){const v=t.v.subarray(d*r,(d+1)*r),h=e.v.subarray(d*o,(d+1)*o);for(let m=0;m<c;m++){const g=f.subarray(m*a,(m+1)*a);for(let b=0;b<a;b++)g[b]+=v[b]*h[m]}}return new Pe(f,a,c)}function mu(t,e){if(e===void 0&&(e=t),!Vt(t)||!Vt(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,s=t.ncols,o=e.nrows,a=e.ncols,c=s,u=a,f=r,d=new Float64Array(c*u);for(let v=0;v<u;v++){const h=e.v.subarray(v*o,(v+1)*o),m=d.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const b=t.v.subarray(g*r,(g+1)*r);let _=0;for(let p=0;p<f;p++)_+=b[p]*h[p];m[g]=_}}return new Pe(d,c,u)}function va(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new xe(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new Pe(t.v,e,r)}function Vt(t){return t&&t.constructor===Pe}function gu(t,e,r){return new Pe(new Float64Array(t),e,r)}class Pe{static valuesConstructor=Float64Array;static TOLERANCE=Math.pow(10,-9);constructor(e,r,s){if(!ArrayBuffer.isView(e)||e.constructor!==Pe.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Pe.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const s=Pe.eye(e),o=Pe.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],u=e-1;for(let f=0;f<e;f++)o.v[u*e+f]=s.v[u*e+f]/c;for(let f=e-2;f>=0;f--){let d=s.getcolumn(f+1);const v=a.getcolref(f+1);for(let h=f+1;h<e;h++){const m=o.getcolumn(h+1);d=d.subtract(m.mult(v[h]))}o.v.set(d.divide(v[f]).v,f*e)}return o.t()}if(this.islowertriangular()){const s=this.diag();if(ea(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=Pe.eye(e),a=Pe.eye(e),c=this.t(),u=0,f=c.v[0];for(let d=0;d<e;d++)a.v[u*e+d]=o.v[u*e+d]/f;for(let d=1;d<e;d++){let v=o.getcolumn(d+1);const h=c.getcolref(d+1);for(let m=0;m<d;m++){const g=a.getcolumn(m+1);v=v.subtract(g.mult(h[m]))}a.v.set(v.divide(h[d]).v,d*e)}return a.t()}const r=fa(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>Pe.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>Pe.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let s=0;s<e;s++)r[s]=this.getcolref(s+1)[s];return new xe(r)}t(){const e=this.nrows,r=this.ncols,s=new Pe.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const a=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*r+o]=a[c]}return new Pe(s,r,e)}for(let o=0;o<this.nrows;o++){const a=s.subarray(o*r,(o+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+o]}return new Pe(s,r,e)}dot(e){if(Ve(e))return new Pe(fs(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Vt(e))return new Pe(fs(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,s){if(Vt(e))return new Pe(cs(this.v,e.v,r),this.nrows,this.ncols);if(is(e))return new Pe(us(this.v,e,r),this.nrows,this.ncols);if(!Ve(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const o=new Pe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(us(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new Pe(o,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const o=new Pe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(cs(this.getcolref(a+1),e.v,r),a*this.nrows);return new Pe(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e,r){if(r===void 0&&(r=2),r==2){const s=this.ncols,o=new Pe.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=e(this.getcolref(a+1));return new xe(o)}if(r==1)return this.t().apply(e,2);if(r==0){const s=this.v.length,o=new Pe.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=e(this.v[a]);return new Pe(o,this.nrows,this.ncols)}}replace(e,r,s){typeof r=="number"&&(r=[r]),r.length===0&&(r=Ue.seq(1,this.nrows)),Qt(r)||(r=Zt(r)),typeof s=="number"&&(s=[s]),s.length===0&&(s=Ue.seq(1,this.ncols)),Qt(s)||(s=Zt(s));const o=r.length,a=s.length;if(Er(r)<1||Ir(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Er(s)<1||Ir(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const u=e.getcolref(c+1),f=(s.v[c]-1)*this.nrows;for(let d=0;d<r.length;d++){const v=r.v[d];this.v[f+v-1]=u[d]}}return this}copy(){return new Pe(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new xe.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)r[s]=this.getcolref(s+1)[e-1];return new xe(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new xe(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Zt([e])),typeof r=="number"&&(r=Zt([r])),Array.isArray(e)&&(e=e.length===0?null:Zt(e)),Array.isArray(r)&&(r=r.length===0?null:Zt(r)),e!==null&&!Qt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Qt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Er(e)<1||Ir(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Er(r)<1||Ir(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const u=r.length,f=this.nrows,d=new Pe.valuesConstructor(f*u);for(let v=0;v<r.length;v++)d.set(this.v.slice((r.v[v]-1)*this.nrows,r.v[v]*this.nrows),v*this.nrows);return new Pe(d,f,u)}if(r==null)return this.t().subset(r,e).t();const s=e.length,o=r.length,a=new Pe.valuesConstructor(s*o);let c=new Pe.valuesConstructor(s);for(let u=0;u<o;u++){const f=this.v.subarray((r.v[u]-1)*this.nrows,r.v[u]*this.nrows);for(let d=0;d<s;d++)c[d]=f[e.v[d]-1];a.set(c,u*s)}return new Pe(a,s,o)}toString(e){function r(c,u){return" ".repeat(u-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Ir(this.v))))+e+3;let o="";const a=this.t();for(let c=1;c<=a.ncols;c++)o+=Array.from(a.getcolref(c)).map(u=>r(u.toFixed(e),s)).join(" ")+`
`;return o}toCSV(e,r,s,o){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=o!=null&&o.length>0,c=s!=null&&s.length>0;if(a&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const u=this.t();let f=c?s.join(e)+`
`:"";for(let d=1;d<=u.ncols;d++)f=f+(a?o[d-1]+e:"")+u.getcolref(d).join(e)+`
`;return f=f.replace(/\./g,r),f}static randn(e,r,s,o){return va(sa(e*r,s,o),e,r)}static rand(e,r,s,o){return va(la(e*r,s,o),e,r)}static eye(e,r){r===void 0&&(r=e);const s=new Float64Array(e*r);for(let o=0;o<Math.min(e,r);o++)s[o*e+o]=1;return new Pe(s,e,r)}static diagm(e){if(!Ve(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,s=new Float64Array(r*r);for(let o=0;o<r;o++)s[o*r+o]=e.v[o];return new Pe(s,r,r)}static zeros(e,r){return r===void 0&&(r=e),new Pe(new Float64Array(e*r),e,r)}static ones(e,r){return Pe.fill(1,e,r)}static fill(e,r,s){s===void 0&&(s=r);const o=new Float64Array(r*s);for(let a=0;a<o.length;a++)o[a]=e;return new Pe(o,r,s)}static outer(e,r,s){if(Array.isArray(e)&&(e=Ze(e)),Array.isArray(r)&&(r=Ze(r)),!Ve(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ve(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=Pe.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],u=o.getcolref(a+1);for(let f=0;f<e.length;f++)u[f]=s(e.v[f],c)}return o}static parseCSV(e,r,s,o){function a(p){return p.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let u=e.split(/\n/),f=[],d=0;const v=u[0].split(r);(s||s===void 0&&a(v))&&(f=v,d=1),u=u.filter(p=>p.trim().length>1);let h=[],m=0;o&&(m=1);const g=u.length-d,b=v.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const _=Pe.zeros(b,g);for(let p=d;p<g+d;p++){const w=u[p].split(r);let S;if(o?(h[p-d]=w[0],S=w.slice(1).map(E=>Number.parseFloat(E.trim().replace(c,".")))):S=w.map(E=>Number.parseFloat(E.trim().replace(c,"."))),S.some(E=>Number.isNaN(E)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(S.length!=b)throw Error("Wrong number of values in row #"+p);_.v.set(new Float64Array(S),(p-d)*b)}return{values:_.t(),header:f,labels:h,sep:r,dec:c}}}function Ve(t){return t&&t.constructor===xe}function Ze(t){return new xe(new Float64Array(t))}class xe{static valuesConstructor=Float64Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new Ue.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=o+1,s=s+1);return new Ue(r.subarray(0,s))}filter(e){const r=new xe.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=this.v[o],s=s+1);return new xe(r.subarray(0,s))}shuffle(){return new xe(pa(this.v))}sort(e){return new xe(ds(this.v,e))}sortind(e){return new Ue(ba(this.v,e))}rep(e){return ma(this,e)}repeach(e){return ga(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=Ue.seq(1,this.length)),Qt(r)||(r=Zt(r));const s=r.length;if(Er(r)<1||Ir(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<r.length;o++){const a=r.v[o];this.v[a-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=Zt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Ue.bool2ind(e):Zt(e)),!Qt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=xe.zeros(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[o]=this.v[e.v[o]-1]}return s}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new xe(this.v.slice(e-1,r))}copy(){return new xe(this.v.slice())}dot(e){return e===void 0&&(e=this),fs(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Ve(e))return new xe(cs(this.v,e.v,r));if(is(e))return new xe(us(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e){const r=this.v.length,s=xe.zeros(r);for(let o=0;o<r;o++)s.v[o]=e(this.v[o]);return s}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new xe.valuesConstructor(r);let o=0;for(const a of e)typeof a=="number"?(s[o]=a,o+=1):(s.set(Ve(a)?a.v:new xe.valuesConstructor(a),o),o+=typeof a=="number"?1:a.length);return new xe(s)}static seq(e,r,s){return ha(e,r,s,xe)}static randn(e,r,s){return sa(e,r,s)}static rand(e,r,s){return la(e,r,s)}static zeros(e){return new xe(new xe.valuesConstructor(e))}static ones(e){return xe.fill(1,e)}static fill(e,r){const s=new xe.valuesConstructor(r);for(let o=0;o<s.length;o++)s[o]=e;return new xe(s)}}function Qt(t){return t.constructor===Ue}function Zt(t){return new Ue(new Int32Array(t))}class Ue{static valuesConstructor=Int32Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new Ue.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=o+1,s=s+1);return new Ue(r.subarray(0,s))}filter(e){const r=new Ue.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=this.v[o],s=s+1);return new Ue(r.subarray(0,s))}shuffle(){return new Ue(pa(this.v))}sort(e){return new Ue(ds(this.v,e))}sortind(e){return new Ue(ba(this.v,e))}rep(e){return ma(this,e)}repeach(e){return ga(this,e)}subset(e){if(typeof e=="number"&&(e=Zt([e])),Array.isArray(e)&&(e=Zt(e)),!Qt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=new Ue.valuesConstructor(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");s[o]=this.v[e.v[o]-1]}return new Ue(s)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new Ue(this.v.slice(e-1,r))}static seq(e,r,s){return ha(e,r,s,Ue)}static ones(e){return Ue.fill(1,e)}static fill(e,r){const s=new Ue.valuesConstructor(r);for(let o=0;o<s.length;o++)s[o]=e;return new Ue(s)}static bool2ind(e){let r=0;const s=new Ue.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(s[r]=o+1,r=r+1);return new Ue(s.subarray(0,r))}}function ha(t,e,r,s){r===void 0&&(r=t<=e?1:-1);const o=Math.floor((e-t)/r)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(o);for(let c=0;c<o;c++)a[c]=t+c*r;return new s(a)}function ma(t,e){const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let o=1;o<=e;o++)for(let a=0;a<t.length;a++)s[(o-1)*t.length+a]=t.v[a];return new t.constructor(s)}function ga(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)s[o*e+a]=t.v[o];return new t.constructor(s)}function cs(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new t.constructor(t.length);for(let o=0;o<t.length;o++)s[o]=r(t[o],e[o]);return s}function us(t,e,r){const s=new t.constructor(t.length);for(let o=0;o<t.length;o++)s[o]=r(t[o],e);return s}function fs(t,e,r,s,o,a){if(s!==o)throw Error("_dot: matrix dimensions do not much.");const c=r,u=a,f=s,d=new t.constructor(c*u);for(let v=0;v<u;v++){const h=e.subarray(v*o,(v+1)*o),m=d.subarray(v*c,(v+1)*c);for(let g=0;g<f;g++){const b=h[g],_=t.subarray(g*r,(g+1)*r);for(let p=0;p<c;p++)m[p]+=_[p]*b}}return d}function pa(t){let e=t.slice(),r=e.length,s,o;for(;r;)o=Math.floor(Math.random()*r--),s=e[r],e[r]=e[o],e[o]=s;return e}function ds(t,e=!1){return e?t.slice().sort((r,s)=>s-r):t.slice().sort((r,s)=>r-s)}function ba(t,e=!1){const r=Ue.seq(1,t.length).v;return e?r.sort((s,o)=>t[o-1]-t[s-1]):r.sort((s,o)=>t[s-1]-t[o-1])}function pu(t,e,r){return 5*t*e+e+4*r*e+t*r}function bu(t,e){return 2+2*t+t*e+17*e}function St(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=t.ncols,o=t.ncomp;let a,c;switch(e){case"mX":a=2,c=s;break;case"sX":a=2+s,c=s;break;case"loadings":case"xloadings":a=2+2*s+(r-1)*s,c=s;break;case"P":a=2+2*s,c=o*s;break;case"eigenvals":case"xeigenvals":a=2+2*s+s*o,c=o;break;case"cq0":a=2+2*s+s*o+o,c=o;break;case"cNq":a=2+2*s+s*o+2*o,c=o;break;case"rq0":a=2+2*s+s*o+3*o,c=o;break;case"rNq":a=2+2*s+s*o+4*o,c=o;break;case"ch0":a=2+2*s+s*o+5*o,c=o;break;case"cNh":a=2+2*s+s*o+6*o,c=o;break;case"rh0":a=2+2*s+s*o+7*o,c=o;break;case"rNh":a=2+2*s+s*o+8*o,c=o;break;case"cr0":a=2+2*s+s*o+9*o,c=o;break;case"cNr":a=2+2*s+s*o+10*o,c=o;break;case"rr0":a=2+2*s+s*o+11*o,c=o;break;case"rNr":a=2+2*s+s*o+12*o,c=o;break;case"cg0":a=2+2*s+s*o+13*o,c=o;break;case"cNg":a=2+2*s+s*o+14*o,c=o;break;case"rg0":a=2+2*s+s*o+15*o,c=o;break;case"rNg":a=2+2*s+s*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function or(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=t.ncols,o=t.nrows,a=t.ncomp;let c,u;switch(e){case"scores":case"xscores":c=(r-1)*o,u=o;break;case"T":c=0,u=o*a;break;case"hdist":c=o*a+(r-1)*o,u=o;break;case"qdist":c=2*o*a+(r-1)*o,u=o;break;case"xcumexpvar":case"cumexpvar":c=3*o*a,u=a;break;case"fdistc":c=3*o*a+a+(r-1)*o,u=o;break;case"fdistr":c=4*o*a+a+(r-1)*o,u=o;break;case"gdist":c=5*o*a+a+(r-1)*s,u=s;break;case"rdist":c=5*o*a+a+s*a+(r-1)*s,u=s;break;case"idistc":c=5*o*a+a+2*s*a+(r-1)*s,u=s;break;case"idistr":c=5*o*a+a+3*s*a+(r-1)*s,u=s;break;case"E":c=5*o*a+a+3*s*a+a*s,u=o*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+u)}function ml(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let s=0;s<t.length;s++){const o=t[s];if(o<e||o>r)return!1}return!0}function _u(t,e,r,s,o,a,c){if(!Vt(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const u=a&&Array.isArray(a)?a.length:0;if(!ml(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!ml(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const d=e.nrows-u,v=e.ncols-f;if(d<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(s===void 0&&(s=!0),o===void 0&&(o=!1),r===void 0&&(r=Math.min(d-1,v)),r<1||r>Math.min(d-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(u>0){const E=new Int32Array(a);m=t._malloc(E.length*E.BYTES_PER_ELEMENT),t.HEAP32.set(E,m/E.BYTES_PER_ELEMENT)}let g=null;if(f>0){const E=new Int32Array(c);g=t._malloc(E.length*E.BYTES_PER_ELEMENT),t.HEAP32.set(E,g/E.BYTES_PER_ELEMENT)}const b=bu(v,r),_=Float64Array,p=t._malloc(b*_.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,r,s,o,p,m,u,g,f])!==1)throw new Error("pca_fit: PCA failed.");const S=t.HEAPF64.slice(p/_.BYTES_PER_ELEMENT,p/_.BYTES_PER_ELEMENT+b);return t._free(h),t._free(p),m&&t._free(m),g&&t._free(g),{class:["pcamodel"],v:S,ncomp:r,nrows:d,ncols:v,exclvars:c,center:s,scale:o}}function wu(t,e,r,s){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!Vt(r))throw new Error("pca_predict: X must be a matrix.");s||(s=[]);const o=s&&Array.isArray(s)?s.length:0;if(!ml(s,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=r.nrows-o;let c=e.exclvars;r.ncols===e.ncols&&(c=[]);const u=c.length,f=r.ncols-u;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(f!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const d=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,d/r.v.BYTES_PER_ELEMENT);let v=null;if(o>0){const L=new Int32Array(s);v=t._malloc(L.length*L.BYTES_PER_ELEMENT),t.HEAP32.set(L,v/L.BYTES_PER_ELEMENT)}let h=null;if(u>0){const L=new Int32Array(c);h=t._malloc(L.length*L.BYTES_PER_ELEMENT),t.HEAP32.set(L,h/L.BYTES_PER_ELEMENT)}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const g=pu(a,e.ncomp,f),b=Float64Array,_=t._malloc(g*b.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[d,r.nrows,r.ncols,m,_,v,o,h,u])!==1)throw new Error("pca_predict: PCA prediction failed.");const w=t.HEAPF64.slice(_/b.BYTES_PER_ELEMENT,_/b.BYTES_PER_ELEMENT+g);t._free(d),t._free(m),t._free(_),v&&t._free(v),h&&t._free(h);const S={class:["pcares"],v:w,ncomp:e.ncomp,nrows:a,ncols:f,npred:f,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},E=new Array(e.ncomp),k=new Array(e.ncomp),A=new Array(e.ncomp),j=new Array(e.ncomp),N=new Array(e.ncomp),R=or(S,"xcumexpvar");N[0]=1,j[0]=R[0],A[0]=1-R[0],E[0]=R[0],k[0]=1-R[0];for(let L=1;L<e.ncomp;L++)N[L]=L+1,j[L]=R[L],A[L]=1-R[L],E[L]=R[L]-R[L-1],k[L]=1-E[L];return S.stat={components:N,resvar:k,expvar:E,cumexpvar:j,cumresvar:A},S}function yu(t,e,r,s,o,a,c,u){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!Vt(r))throw new Error("pcapcv: X must be a matrix.");u||(u=[]);const f=u&&Array.isArray(u)?u.length:0;if(!ml(u,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const d=e.exclvars.length,v=r.nrows-f,h=r.ncols-d;if(v<3)throw new Error("pcapcv: X must have at least 3 rows.");if(h!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>v)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(s)||s<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?v-2:v-Math.ceil(v/o)-1,h,e.ncomp);if(s>m)throw new Error('pcapcv: the value of "ncomp" is too large.');const g=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,g/r.v.BYTES_PER_ELEMENT);let b=null;if(f>0){const j=new Int32Array(u);b=t._malloc(j.length*j.BYTES_PER_ELEMENT),t.HEAP32.set(j,b/j.BYTES_PER_ELEMENT)}let _=null;if(d>0){const j=new Int32Array(e.exclvars);_=t._malloc(j.length*j.BYTES_PER_ELEMENT),t.HEAP32.set(j,_/j.BYTES_PER_ELEMENT)}const p=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const w=v*h,S=r.v.constructor,E=t._malloc(w*S.BYTES_PER_ELEMENT);if(t.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,r.nrows,r.ncols,s,e.center,e.scale,a,o,c,p,E,b,f,_,d])!==1)throw new Error("pcapcv: PCVPCA failed.");const A=t.HEAPF64.slice(E/S.BYTES_PER_ELEMENT,E/S.BYTES_PER_ELEMENT+w);return t._free(g),t._free(p),t._free(E),b&&t._free(b),_&&t._free(_),new Pe(A,v,h)}function xu(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const qr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:xu,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function Eu(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const s=qr[t.ml[r]].title;e=e+"<li>"+s+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function _a(t,e,r){const s=qr.findIndex(h=>h.id==="trim");let o=0,a=t.ncols-e,c=0;for(let h=0;h<r.ml.length;h++){if(r.ml[h]!==s){c+=r.mpl_new[h];continue}o=Math.max(o,r.mp_new[c]),a=Math.min(a,r.mp_new[c+1]),c+=r.mpl_new[h]}const u=t.nrows,d=a-o+e,v=Pe.zeros(u,d);return c=0,e>0&&(v.v.set(t.v.slice(0,e*u),c),c+=e*u),v.v.set(t.v.slice((e+o)*u,(e+a)*u),c),[o,a,v]}function ku(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=qr.findIndex(u=>u.id==="trim");if(e.ml.findIndex(u=>u===r)<0)return t;const[o,a,c]=_a(t.values,t.nresp,e);return t.values=c,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+o,t.nresp+a)):t.varlabels.slice(o,a),t.varindices=t.nresp>0?Sr(0,t.nresp-1).concat(Sr(0,a-o-1)):Sr(0,a-o-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+o,t.nresp+a)):t.varvalues.slice(o,a),t}function wa(t,e,r,s,o=!0,a=[]){if(!Vt(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,u;o?(c=e.ncols,u=e.nrows-r):(c=e.nrows,u=e.ncols-r);const f=s.length;if(f<1)throw new Error("prep_fit: no preprocessing methods are provided.");const d=new Int32Array(f),v=new Int32Array(f),h=new Int32Array(f);let m=0,g=0;for(let P=0;P<s.length;P++){const B=s[P].id,V=s[P].params,z=qr.findIndex(oe=>oe.id==B);if(z<0)throw new Error("prep_fit: wrong method name: "+B+".");const H=qr[z];if(V.length!==H.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+B+".");d[P]=z,v[P]=H.mpl,h[P]=H.get_mpl_new(u,V),m=m+v[P],g=g+h[P]}const b=new Float64Array(m);let _=0;for(let P=0;P<s.length;P++){const B=s[P].id,V=s[P].params;qr.findIndex(z=>z.id==B),b.set(V,_),_=_+v[P]}const p=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const w=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,w/d.BYTES_PER_ELEMENT);const S=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,S/v.BYTES_PER_ELEMENT);const E=t._malloc(h.length*h.BYTES_PER_ELEMENT);t.HEAP32.set(h,E/h.BYTES_PER_ELEMENT);const k=t._malloc(b.length*b.BYTES_PER_ELEMENT);t.HEAPF64.set(b,k/b.BYTES_PER_ELEMENT);const A=t._malloc(g*b.BYTES_PER_ELEMENT),j=new Int32Array(a),N=j.length,R=t._malloc(N*j.BYTES_PER_ELEMENT);if(t.HEAP32.set(j,R/j.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[p,c,u,r,f,w,S,k,E,A,o,R,N])!==1)throw new Error("prep_fit: unexpected error.");const T=t.HEAPF64.slice(A/b.BYTES_PER_ELEMENT,A/b.BYTES_PER_ELEMENT+g);return t._free(p),t._free(w),t._free(k),t._free(S),t._free(R),t._free(A),t._free(E),{ml:d,mpl:v,mp:b,mpl_new:h,mp_new:T,npred:u,class:["prepmodel"]}}function vs(t,e,r,s,o=!0,a=!1){if(!Vt(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let c,u;if(o?(c=e.ncols,u=e.nrows-r):(c=e.nrows,u=e.ncols-r),u!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+u+").");const f=s.ml,d=s.mpl_new,v=s.mp_new,h=d.reduce((A,j)=>A+j,0);if(!f||f.length<1||!d||d.length!==f.length||v.length!==h)throw new Error("prep_apply: wrong structure of the model object.");const m=f.length,g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const b=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAP32.set(f,b/f.BYTES_PER_ELEMENT);const _=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,_/d.BYTES_PER_ELEMENT);const p=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAPF64.set(v,p/v.BYTES_PER_ELEMENT);const w=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[g,c,u,r,m,b,_,p,w,o])!==1)throw new Error("prep_apply: unexpected error.");const E=t.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(g),t._free(b),t._free(_),t._free(p),t._free(w);const k=new Pe(E,e.nrows,e.ncols);if(a){const[A,j,N]=_a(k,r,s);return N}return k}function Su(t,e,r,s){e===void 0&&(e=!0),r===void 0&&(r=!1),s===void 0&&(s=!1);function o(f,d,v,h){if(typeof d=="boolean")return d?f.apply(v,2):Ze([h]).rep(f.ncols);if(!Ve(d))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(d.length!==f.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return d}const a=o(t,e,ln,0),c=o(t,r,cl,1),u=Pe.zeros(t.nrows,t.ncols);for(let f=1;f<=t.ncols;f++){const d=t.getcolref(f),v=u.getcolref(f),h=a.v[f-1],m=1/c.v[f-1];for(let g=0;g<t.nrows;g++)v[g]=(d[g]-h)*m}return s?[u,a,c]:u}function ya(t,e,r){return t<e?["regular","in"]:t>r?["outlier","out"]:["extreme","out"]}function Au(t,e,r,s,o,a,c,u){if(!u||u.length===0)return[0,0];let f=0,d=0;for(let v of u){const h=t[v],[m,g]=ya(h,e,r);a[m]+=1,c[g]+=1,s[v]=m,o[v]=g,f=f+(g==="in"),d=d+(g!=="in")}return[f,d]}function xa(t,e,r,s,o,a,c,u,f){if(!f||f.length===0)return[0,0,0,0,0,0,0,0,0,0];let d=0,v=0;for(let B of f){const V=t[B],[z,H]=ya(V,r,s);u[H]+=1,o[B]="alien",c.alien+=1,a[B]=H,d=d+(H!=="in"),v=v+(H==="in")}const h=f.slice();h.sort((B,V)=>t[B]-t[V]);let m=h.length;const g=h.map(B=>t[B]);let b=-1,_=0,p=0,w=0,S=0;for(;b<0;)_>0&&(o[h[m-1]]="external",c.alien=c.alien-1,c.external=c.external+1,m=m-1,h.pop(),g.pop()),p=ln(g),w=ul(g),S=w/(p*p),b=4-2*e*S,_=_+1;const E=(2+Math.sqrt(b))/S,k=E-e,A=p/E,j=r/A,N=1-2*(e+k)*(e+3*k)/(3*(e+2*k)**2),R=(N-1)*(1-3*N),L=(e+2*k)/(e+k)**2,T=1+N*L*(N-1-.5*(2-N)*R*L),M=N*Math.sqrt(2*L)*(1+.5*R*L),P=rs((Math.pow(j/(e+k),N)-T)/M);return[d,v,P,k,A,N,T,M,e,p]}class hs{#e;get outcomes(){return l(this.#e)}set outcomes(e){I(this.#e,e)}constructor(e,r,s,o,a,c,u){this.d=e,this.ind=r,this.objlabels=s,this.objindices=o,this.classes=a,this.classNames=c,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,this.#e=y(()=>u.oCrit&&u.eCrit?this.getOutcomes(u):null)}getOutcomes(e){const r=this.d.apply(L=>L/e.f0*e.Nf).v,s=new Array(this.nrows),o=new Array(this.nrows),a={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[u,f]=Au(r,e.eCrit,e.oCrit,o,s,a,c,this.ind.members),[d,v,h,m,g,b,_,p,w,S]=xa(r,e.Nf,e.eCrit,e.oCrit,o,s,a,c,this.ind.strangers);this.nUnknown>0&&xa(r,e.Nf,e.eCrit,e.oCrit,o,s,a,c,this.ind.unknown);const E=u>0?u/(u+f):0,k=d>0?d/(d+v):0,A=1-h,j=Math.sqrt(E*k),N=u>0&&d>0?(u+d)/(u+d+v+f):0,R={sensitivity:E,specificity:k,selectivity:A,efficiency:j,accuracy:N};return{Nf:e.Nf,f:r,decs:s,rols:o,decsNum:c,rolsNum:a,TP:u,FN:f,TN:d,FP:v,beta:h,s:m,f0:g,hz:b,Mz:_,Sz:p,k:w,m:S,stat:R}}toJSON(){return null}static fromJSON(e){return new hs(...e)}}class sn{#e;get alpha(){return l(this.#e)}set alpha(e){I(this.#e,e,!0)}#t;get gamma(){return l(this.#t)}set gamma(e){I(this.#t,e,!0)}#r;get limType(){return l(this.#r)}set limType(e){I(this.#r,e,!0)}#n;get Nf(){return l(this.#n)}set Nf(e){I(this.#n,e)}#i;get f0(){return l(this.#i)}set f0(e){I(this.#i,e)}#s;get eConfLim(){return l(this.#s)}set eConfLim(e){I(this.#s,e)}#l;get oConfLim(){return l(this.#l)}set oConfLim(e){I(this.#l,e)}#o;get eCrit(){return l(this.#o)}set eCrit(e){I(this.#o,e)}#a;get oCrit(){return l(this.#a)}set oCrit(e){I(this.#a,e)}constructor(e,r,s,o,a,c,u,f,d,v,h,m,g,b,_,p="nimca-model"){this.mX=r,this.sX=s,this.nrows=o,this.ncols=a,this.className=e,this.Nfc=c,this.Nfr=u,this.f0c=f,this.f0r=d,this.hash=v,this.class=["nimcamodel"],this.fileName=p,this.center=b,this.scale=_,this.#e=ee(ze(h)),this.#t=ee(ze(m)),this.#r=ee(ze(g)),this.#n=y(()=>this.limType==="classic"?this.Nfc:this.Nfr),this.#i=y(()=>this.limType==="classic"?this.f0c:this.f0r),this.#s=y(()=>1-Number.parseFloat(this.alpha)/100),this.#l=y(()=>Math.pow(1-this.gamma/100,1/o)),this.#o=y(()=>kr(this.eConfLim,this.Nf)),this.#a=y(()=>kr(this.oConfLim,this.Nf))}predict(e){if(!e.values||!Vt(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=sn.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let o=0;o<e.classes.length;o++)e.classes[o]===this.className?s.members.push(o):s.strangers.push(o);else s.unknown=Sr(0,e.values.nrows-1);return new hs(r,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r,s,o={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let a=e.values;const c=e.classNames[0];if(!Vt(a))throw new Error("nimca.fit: X must be a matrix.");const u=r?a.apply(ln,2):xe.zeros(a.ncols),f=s?a.apply(cl,2):xe.ones(a.ncols),d=sn.getDistance(a,u,f),v=ln(d),h=ul(d);let m=Math.round(2*v*v/h);m<1&&(m=1),m>250&&(m=250);const g=Kc(d),b=Jc(d),_=b/g;let p;_>2.685592117?p=1:_<.194565995?p=100:p=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/_),1.185785)));const w=.5*p*(g/kr(.5,p)+b/(kr(.75,p)-kr(.25,p)));return new sn(c,u,f,a.nrows,a.ncols,m,p,v,w,ms(),o.alpha,o.gamma,o.limType,r,s)}static fromJSON(e){const{__type:r,mX:s,sX:o,nrows:a,ncols:c,className:u,Nfc:f,Nfr:d,f0c:v,f0r:h,hash:m,alpha:g,gamma:b,limType:_,fileName:p,center:w,scale:S}=e;return new sn(u,s,o,a,c,f,d,v,h,m,g,b,_,w,S,p)}static getDistance(e,r,s){const o=Su(e,r,s),a=o.nrows,c=o.ncols,u=xe.zeros(a);for(let f=0;f<c;f++){const d=o.getcolref(f+1);for(let v=0;v<a;v++)u.v[v]+=d[v]**2}return u}}function Sr(t,e,r=1){const s=Math.round((e-t+1)/r),o=Array(s);for(let a=0;a<s;a++)o[a]=t+a*r;return o}function Cu(t,e){let r,s,o,a=[];if(e.length>0){const c=t.values.nrows,u=t.objindices,f=c-e.length;r=Array(f),s=Array(f),o=Array(f);let d=0;for(let v=0;v<c;v++)e.includes(v)||(r[d]=u[v],s[d]=t.classes[v],o[d]=t.objlabels[v],(a.length===0||!a.includes(s[d]))&&a.push(s[d]),d=d+1)}else r=t.objindices,o=t.objlabels,s=t.classes,a=t.classNames;return[r,o,s,a]}function ms(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function gs(t,e,r,s,o=!1){const[a,c,u]=Cu(r,s),f=o&&e.prep&&e.prep.ml&&e.prep.ml.length>0?vs(t,r.values,0,e.prep,!1,!0):r.values,d=wu(t,e,f,s);d.hash=ms(),d.objindices=a,d.objlabels=c,d.classes=u,d.classNames=r.classNames,d.varlabels=r.varlabels,d.eigenvals=St(e,"eigenvals"),d.cNh=St(e,"cNh"),d.cNq=St(e,"cNq"),d.ch0=St(e,"ch0"),d.cq0=St(e,"cq0"),d.rNh=St(e,"rNh"),d.rNq=St(e,"rNq"),d.rh0=St(e,"rh0"),d.rq0=St(e,"rq0");const v=e.nrows;return d.T2lim=2*(v-1)/(v-2)*oa(.95,2,v-2),d}function Nu(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function Wn(t){return t.some(e=>Number.isNaN(e))}function on(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ea(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Tu(t,e,r,s,o,a,c,u=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let d=Ea(t);if(d.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");d=d.filter(z=>z.replaceAll(e,"").trim().length>0);const v=d[0].split(e);if(v.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,m;const g=r!=="no";(g||g===void 0&&Wn(firstRow))&&(m=v,h=1);const b=d.length-h;if(b<1)throw new Error("Data file should contain at least 1 row with values.");u===-1&&(u=b);let _,p,w,S=Array(b);s?(_=g?on(m[0]):"",w=Array(b),p=1):(_="",w=[],p=0);let E,k=[],A;o?(E=g?on(m[p]):"",A=Array(b),p=p+1):(E="",A=[]);const j=v.length-p;if(j<1)throw new Error("Data file should contain at least 1 column with values.");const N=Pe.zeros(j,b);for(let z=h;z<b+h;z++){const H=z-h;S[H]=H;let oe=d[z].split(e);if(s&&(w[H]=oe[0],oe.shift()),o){const Q=oe[0];A[H]=Q,oe.shift(),(k.length===0||k.indexOf(Q)<0)&&k.push(Q)}const U=f==="."?oe.map((Q,ne)=>Number.parseFloat(Q.trim())):oe.map((Q,ne)=>Number.parseFloat(Q.trim().replace(f,".")));if(U.some(Q=>Number.isNaN(Q)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(U.length!=j)throw new Error("Wrong number of values in row #"+z);N.v.set(new Float64Array(U),(z-h)*j)}if(!s||w.length!==b){w=Array(b);for(let z=0;z<b;z++)w[z]="O"+(z+1)}w=w.map(z=>on(z)),A=A.map(z=>on(z)),k=k.map(z=>on(z));let R,L=Array(j),T=Array(j);if(m&&m.length===j+p){R=m.map(z=>on(z)).slice(p);for(let z=0;z<j;z++)L[z]=z>=u?z-u:z,T[z]=z>=u?z-u+1:z+1}else{R=Array(j);for(let z=0;z<j;z++)L[z]=z>=u?z-u:z,R[z]=z>=u?"V"+(z-u+1):"Y"+(z+1),T[z]=z>=u?z-u+1:z+1}let M;if(r==="values"){if(M=f==="."?R.map((z,H)=>H<u?H:Number.parseFloat(z.trim())):R.map((z,H)=>H<u?H:Number.parseFloat(z.trim().replace(f,"."))),M.some(z=>Number.isNaN(z)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else M=T;Array.isArray(M)||(M=[]),a||(a=""),c||(c=""),a=M.length>0&&a.length>0?a:"Variables",c=M.length>0&&c.length>0?c:"";const P=a+(c.length>0?", "+c:""),B=M[1]<M[0];return{values:N.t(),nresp:u,header:r,hasLabels:s,hasClassNames:o,labelsVarname:_,classLabelsVarname:E,objlabels:w,objindices:S,varlabels:R,varvalues:M,varindices:L,varrev:B,classes:A,classNames:k,sep:e,dec:f,varvaluesName:a,varvaluesUnits:c,varAxisTitle:P}}function Mu(t){if(Wn(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let s=2;s<e;s++){let o=[];for(let d=1;d<t.length;d++)o.push(t[d][s]);const a=t[0][s],c=ln(o),u=cl(o),f=Math.abs((a-c)/u);r.push(f)}return r.every(s=>s>5)}function Pu(t){const r=t[0].split(","),s=t[1].split(","),o=r.length,a=s.length,c=";",u=t[0].split(c),f=t[1].split(c),d=u.length,v=f.length;let h,m;if(o>1&&a>1&&o===a&&o>d)m=",",h=o;else if(d>1&&v>1&&d===v)m=c,h=d;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",h]}function ju(t,e=0){const r=Ea(t),s=r.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,a,c]=Pu(r),u=Math.min(c,5),f=Math.min(s,5);let d=r[0].split(o).length,v=r.slice(0,f).map(L=>L.split(o).slice(0,u));v=v.map(L=>L.map(T=>on(T)));const h=v.map(L=>Nu(L.slice(),a));for(let L=1;L<f;L++)if(Wn(h[L].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const m=Mu(h);let g=0;const b=m?1:0,_=b+1,p=v[b][0],w=v[_][0],S=h[b][0],E=h[_][0],k=h[b][1],A=h[_][1];let j=!1,N=!1;if(Number.isNaN(S)&&Number.isNaN(E)&&p!==w?(j=!0,g=g+1):Number.isNaN(k)&&Number.isNaN(A)&&p!==w&&(j=!0,N=!0,g=g+2),!N){const L=j?1:0,T=h[b][L],M=h[_][L];N=Wn([T,M]),g=g+N}let R="no";if(m){g>0?v[0].slice(g+e):v[e];const L=g>0?h[0].slice(g+e):h[e];R=Wn(L)?"labels":"values"}return[o,j,N,R,d]}function Lu(t){const e=t.values.t(),r=t.sep,s=t.dec;let o=null;t.header!=="no"&&(o=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),o&&t.hasClassNames&&(o=[t.classLabelsVarname,...o]),o&&t.hasLabels&&(o=[t.labelsVarname,...o]);const a=t.classes&&t.classes.length===e.ncols,c=t.objlabels&&t.objlabels.length===e.ncols;let u=o?o.join(r):"";for(let f=0;f<e.ncols;f++){let d=e.getcolref(f+1).join(r);s!=="."&&(d=d.replace(".",s)),a&&(d=t.classes[f]+t.sep+d),c&&(d=t.objlabels[f]+t.sep+d),u=u+`
`+d}return u=u+`
`,s!=="."&&(u=u.replace(/\./g,s)),u}function Ru(t,e){const r=Lu(t),s=new Blob([r],{type:"text/csv"}),o=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.csv`),a.click()}function gl(t,e){return Vt(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ve(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof sn?e.asJSON():e}function ps(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return gu(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Ze(e.v);if(e.__type==="NIMCA")return sn.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function bs(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${s}${o}${a}${c}`}function ka(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function pl(t,e,r){let s="";for(let o=0;o<e;o++){const a=t.getUint8(r++);if(a===0)break;s+=String.fromCharCode(a)}return s}function Iu(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],o=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=t.getUint8(a);a+=1;const u=t.getUint8(a);if(a+=1,u===77)throw new Error("SPC file has old format which is not supported.");const f=u===75,d=t.getUint8(a);a+=1;const v=t.getInt8(a);a+=1;const h=t.getUint32(a,f);a+=4;const m=t.getFloat64(a,f);a+=8;const g=t.getFloat64(a,f);a+=8;const b=t.getUint32(a,f);a+=4;const _=t.getUint8(a);a+=1;const p=t.getUint8(a);a+=1;const w=t.getUint8(a);a+=1;const S=t.getUint8(a);a+=1;const E=t.getUint32(a,f);a+=4;const k=pl(t,9,a);a+=9;const A=pl(t,9,a);a+=9;const j=t.getUint16(a,f);a+=2;const N=Array.from({length:8},()=>{const Z=t.getFloat32(a,f);return a+=4,Z}),R=pl(t,130,a);a+=130;const L=pl(t,30,a);a+=30;const T=t.getUint32(a,f);a+=4;const[M,P,B,V,z,H,oe,U]=ka(c),Q=_===255?r[31]:r[_],ne=_===255?e[31]:e[_],K=p<=26?s[p]:p>=128&&p<=131?o[p]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:M,TCGRAM:P,TMULTI:B,TRANDM:V,TORDRD:z,TALABS:H,TXYXYS:oe,TXVALS:U},fexper:d,fexp:v,fnpts:h,ffirst:m,flast:g,fnsub:b,fxtype:_,fytype:p,fztype:w,fpost:S,fdate:E,fres:k,fsource:A,fpeakpt:j,fspare:N,fcmnt:R,fcatxt:L,flogoff:T,xaxisName:Q,xaxisUnit:ne,yaxisName:K}}function zu(t,e){const r=ka(t.getUint8(e));e+=1;const s=t.getInt8(e);e+=1;const o=t.getUint16(e,!0);e+=2;const a=t.getFloat32(e,!0);e+=4;const c=t.getFloat32(e,!0);e+=4;const u=t.getFloat32(e,!0);e+=4;const f=t.getInt32(e,!0);e+=4;const d=t.getInt32(e,!0);e+=4;const v=t.getFloat32(e,!0);return e+=4,{flags:r,exp:s,index:o,time:a,next:c,noise:u,nPoints:f,nScans:d,wAxis:v}}async function Sa(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),s=await t.arrayBuffer(),o=new DataView(s);let a=0;const c=Iu(o);a+=512;const u=c.fnpts;if(u<2)throw new Error(`Error reading SPC file (${t.name}).`);let f=new Array(u);if(c.ftflgs.TXVALS)for(let h=0;h<u;h++){const m=o.getFloat32(a,!0);a=a+4,f[h]=m}else{(c.flast-c.ffirst)/(u-1);for(let h=0;h<u;h++)f[h]=c.ffirst+h*c.flast}const d=new Float64Array(u*c.fnsub);for(let h=0;h<c.fnsub;h++){zu(o,a),a=a+32;for(let m=0;m<u;m++){const g=o.getFloat32(a,!0);a=a+4,d[h*u+m]=g}}const v=[];return c.fnsub>1?Sr(1,c.fnsub).forEach(m=>{v.push(r+"_"+m)}):v.push(r),{hdr:c,xvalues:f,yvalues:d,objlabels:v}}async function Fu(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let s=[],o=[];const a=await Sa(t[0]),c=a.xvalues.length;if(r.push(a.yvalues),s=s.concat(a.objlabels),o.push(a.hdr.fnsub),e>1)for(let b=1;b<e;b++){const _=await Sa(t[b]);if(_.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");r.push(_.yvalues),s=s.concat(_.objlabels),o.push(_.hdr.fnsub)}const u=o.reduce((b,_)=>b+_,0),f=new Float64Array(u*c);let d=0;for(let b=0;b<r.length;b++)f.set(r[b].slice(),d),d+=o[b]*c;const v=new Pe(f,c,u),h=Sr(0,c-1),m=Sr(0,u-1),g=a.xvalues.map(b=>b.toFixed(1));return{values:v.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:m,varlabels:g,varvalues:a.xvalues,varindices:h,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var qu=G('<button tabindex="0" class="button svelte-1to1iow"> </button>');function ot(t,e){let r=q(e,"text",3,"button");var s=qu();s.__click=function(...a){e.onclick?.apply(this,a)};var o=D(s);ie(()=>ke(o,r())),C(t,s)}lt(["click"]);var Ou=G('<button tabindex="0"></button>');function an(t,e){q(e,"disable",3,!1);var r=Ou();r.__click=function(...s){e.onclick?.apply(this,s)},ie(()=>{O(r,"title",e.title),O(r,"aria-label",e.title),O(r,"alt",e.title),it(r,1,`button ${e.className??""}`,"svelte-qbt64")}),C(t,r)}lt(["click"]);function ar(t,e){let r=q(e,"title",3,"Reset");an(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function Bu(t,e){let r=q(e,"title",3,"Undo");an(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function Vu(t,e){let r=q(e,"title",3,"Download");an(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function Du(t,e){let r=q(e,"title",3,"Add");an(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function Aa(t,e){let r=q(e,"title",3,"Settings");an(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function Yu(t,e){let r=q(e,"title",3,"Move up");an(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function Wu(t,e){let r=q(e,"title",3,"Move down");an(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}function ir(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var Uu=G('<span class="label svelte-1bhp5bp"> </span>'),Hu=G("<div><!> <!></div>");function fe(t,e){let r=q(e,"label",3,null),s=q(e,"name",3,""),o=q(e,"status",3,""),a=q(e,"colors",3,""),c=q(e,"labelWidth",3,12);var u=Hu(),f=D(u);{var d=h=>{var m=Uu(),g=D(m);ie(()=>{ct(m,`flex-basis:${c()??""}ch;`),ke(g,r())}),C(h,m)};Y(f,h=>{r()&&h(d)})}var v=F(f,2);yr(v,()=>e.children??pt),ie(()=>{it(u,1,`control-element ${s()??""} ${o()??""}`,"svelte-1bhp5bp"),ct(u,a())}),C(t,u)}var Gu=G('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function Un(t,e){_e(e,!0);let r=q(e,"min",7,0),s=q(e,"max",3,100),o=q(e,"value",31,()=>ze(r())),a=q(e,"decNum",3,1),c=q(e,"step",19,()=>+((s()-r())/100).toFixed(4)),u=q(e,"onchange",3,null);ye(()=>{o()<r()&&(o(r()),u()&&u()(o())),o()>s()&&(o(s()),u()&&u()(o())),r()>s()&&r(s())});let f=ee(void 0),d=ee(void 0),v=ee(!1);const h=T=>{const M=r()+T*(s()-r());return+(Math.round(M/c())*c()).toFixed(4)},m=T=>{const M=l(f).getBoundingClientRect(),P=l(d).getBoundingClientRect(),B=M.x,V=P.x+P.width;return(T.clientX-B)/(V-B)},g=T=>{const M=m(T);M<0||M>1||I(v,M*100>l(E)-5&&M*100<l(E)+5,!0)},b=T=>{I(v,!1)},_=T=>{I(v,!1);const M=m(T);M<0||M>1||(o(h(M)),u()&&u()(o()))},p=T=>{let M=o()+c()*T.deltaY*.5;M<r()&&(M=r()),M>s()&&(M=s()),o(+(Math.round(M/c())*c()).toFixed(4)),T.preventDefault(),u()&&u()(o())},w=T=>{if(!l(v))return;const M=m(T);M<0||M>1||(o(h(M)),u()&&u()(o()))},S=T=>{if(T.key==="ArrowLeft"){o(o()-c()<r()?r():o()-c()),u()&&u()(o());return}if(T.key==="ArrowRight"){o(o()+c()>s()?s():o()+c()),u()&&u()(o());return}},E=y(()=>r()===s()?100:(o()-r())/(s()-r())*100);var k=Gu();k.__keydown=S,k.__mousemove=w,k.__mousedown=g,k.__mouseup=_,k.__touchmove=w,k.__touchstart=g,k.__touchend=_;var A=D(k);let j;var N=D(A);let R;var L=D(N);rn(A,T=>I(f,T),()=>l(f)),rn(k,T=>I(d,T),()=>l(d)),ie(T=>{O(k,"aria-valuenow",o()),O(k,"aria-valuemin",r()),O(k,"aria-valuemax",s()),j=it(A,1,"range-slider svelte-7wycr",null,j,{"range-slider_right":l(E)<50}),ct(A,`width:${l(E)??""}%`),R=it(N,1,"range-value svelte-7wycr",null,R,{"range-value_right":l(E)<50}),ke(L,T)},[()=>o().toFixed(a())]),en("mousewheel",k,p),en("mouseleave",k,b),en("touchcancel",k,b),C(t,k),we()}lt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var Xu=G('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function Dt(t,e){_e(e,!0);let r=q(e,"min",3,0),s=q(e,"max",3,10),o=q(e,"value",31,()=>ze(r())),a=q(e,"step",3,1);o()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(r())),o()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(s())),r()>s()&&console.error("The min and max values must be distinct.");let c=ee(void 0),u=ee(void 0),f=ee(!1);const d=y(()=>r()===s()?0:(o()-r())/(s()-r()+a())),v=y(()=>a()/(s()-r()+a())),h=y(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*l(v)}%)`:"background: #f0f0f0"),m=T=>{if(T<0||T>1)return o();let M=o();return Math.round(l(v)/T),T<l(d)&&l(d)>0&&(M=o()-a()*Math.ceil((l(d)-T)/l(v))),T>l(d)+l(v)&&l(d)+l(v)<1&&(M=o()+a()*Math.ceil((T-(l(d)+l(v)))/l(v))),M<r()&&(M=r()),M>s()&&(M=s()),M},g=T=>{const M=l(u).getBoundingClientRect(),P=M.x,B=M.x+M.width;return(T.clientX-P)/(B-P)},b=T=>{const M=g(T);M<0||M>1||I(f,M>l(d)&&M<l(v)+l(d),!0)},_=T=>{I(f,!1)},p=T=>{I(f,!1);const M=g(T);if(M<0||M>1)return;const P=m(M);o()!==P&&o(P)},w=T=>{let M=o()+Math.round(T.deltaY*.5)*a();M<r()&&(M=r()),M>s()&&(M=s()),o(M),T.preventDefault()},S=T=>{if(!l(f))return;const M=g(T);if(M<0||M>1)return;const P=m(M);P!=o()&&o(P)},E=T=>{if(T.key==="ArrowLeft"){o(o()-a()<r()?r():o()-a());return}if(T.key==="ArrowRight"){o(o()+a()>s()?s():o()+a());return}};var k=Xu();k.__keydown=E,k.__mousemove=S,k.__mousedown=b,k.__mouseup=p,k.__touchmove=S,k.__touchstart=b,k.__touchend=p;var A=D(k);let j;var N=D(A);let R;var L=D(N);rn(A,T=>I(c,T),()=>l(c)),rn(k,T=>I(u,T),()=>l(u)),ie(T=>{O(k,"aria-valuenow",o()),O(k,"aria-valuemin",r()),O(k,"aria-valuemax",s()),ct(k,l(h)),j=it(A,1,"range-slider svelte-1lbks0y",null,j,{"range-slider_left":l(v)<.1&&l(d)<.5,"range-slider_right":l(v)<.1&&l(d)>=.5}),ct(A,`width: max(2px, ${l(v)*100}%);left:${l(d)*100}%;`),R=it(N,1,"range-value svelte-1lbks0y",null,R,{"range-value_right":l(v)<.1&&l(d)>.5,"range-value_left":l(v)<.1&&l(d)<=.5}),ke(L,T)},[()=>o().toFixed(0)]),en("mousewheel",k,w),en("mouseleave",k,_),en("touchcancel",k,_),C(t,k),we()}lt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var Ku=G('<button tabindex="-1"><!></button>'),Ju=G('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function $e(t,e){_e(e,!0);let r=q(e,"value",31,()=>ze(e.options[0])),s=q(e,"className",3,"");const o=f=>{if(f.key==="ArrowLeft"){const d=e.options.findIndex(v=>v===r());d>0&&r(e.options[d-1]);return}if(f.key==="ArrowRight"){const d=e.options.findIndex(v=>v===r());d<e.options.length-1&&r(e.options[d+1]);return}};var a=Ju(),c=X(a);c.__keydown=o,Qe(c,20,()=>e.options,f=>f,(f,d)=>{var v=Ku();v.__click=()=>r(d);let h;var m=D(v);ht(m,()=>d),ie(g=>h=it(v,1,`option option_${g??""}`,"svelte-bifhtc",h,{selected:d==r()}),[()=>d.toString().replace(".","_")]),C(f,v)});var u=F(c,2);ie(()=>it(c,1,`selector ${s()??""}`,"svelte-bifhtc")),Xl(u,r),C(t,a),we()}lt(["keydown","click"]);function zt(t,e){_e(e,!0);let r=q(e,"options",19,()=>["no","yes"]),s=q(e,"value",15,!1),o=ee(!0);const a=y(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());ye(()=>I(o,s()?r()[1]:r()[0],!0)),ye(()=>s(l(o)===r()[1]));var c=ge(),u=X(c);{var f=d=>{$e(d,{get options(){return l(a)},get value(){return l(o)},set value(v){I(o,v,!0)}})};Y(u,d=>{l(a)&&d(f)})}C(t,c),we()}var Qu=G('<input type="file" multiple class="svelte-xoa0sf"/>'),Zu=G('<input type="file" class="svelte-xoa0sf"/>'),$u=G('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function bl(t,e){_e(e,!0);let r=q(e,"file",15),s=q(e,"message",3,"Select CSV file with dataset"),o=q(e,"acceptType",3,".csv"),a=q(e,"multiple",3,!1),c=ee(void 0);function u(E){l(c)&&l(c).files.length>0?r(l(c).files.length===1?l(c).files[0]:l(c).files):r(null)}function f(E){(E.type==="click"||E.type==="keydown"&&(E.code==="Space"||E.code==="Enter"))&&l(c).click()}function d(E){l(c).value=null,r(null)}var v=$u(),h=X(v);h.__keydown=f,h.__click=f;let m;var g=D(h),b=F(g);{var _=E=>{var k=Qu();k.__change=u,rn(k,A=>I(c,A),()=>l(c)),ie(()=>O(k,"accept",o())),C(E,k)},p=E=>{var k=Zu();k.__change=u,rn(k,A=>I(c,A),()=>l(c)),ie(()=>O(k,"accept",o())),C(E,k)};Y(b,E=>{a()?E(_):E(p,!1)})}var w=F(h,2);{var S=E=>{ar(E,{onclick:d})};Y(w,E=>{r()&&E(S)})}ie(()=>{m=it(h,1,"file-selector svelte-xoa0sf",null,m,{selected:r()}),ke(g,`${(r()?r().length>1?`Selected ${r().length} files`:r().name:s())??""} `)}),C(t,v),we()}lt(["keydown","click","change"]);var ef=G('<div class="error-message svelte-11e14eb"> </div>'),tf=G('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function Ca(t,e){_e(e,!0);let r=q(e,"value",15,""),s=q(e,"className",3,""),o=q(e,"placeholder",3,""),a=q(e,"maxLength",3,25),c=q(e,"validator",3,null),u=ee("");function f(){c()&&I(u,c()(r()),!0)}var d=tf();let v;var h=D(d);h.__input=f;var m=F(h,2);{var g=b=>{var _=ef(),p=D(_);ie(()=>ke(p,l(u))),C(b,_)};Y(m,b=>{l(u)&&l(u).length>0&&b(g)})}ie(()=>{v=it(d,1,`textinput ${s()??""}`,"svelte-11e14eb",v,{error:l(u)&&l(u).length>0}),O(h,"placeholder",o()),O(h,"maxlength",a())}),Xl(h,r),C(t,d),we()}lt(["input"]);var rf=G('<div class="spinner svelte-wlgijz"></div>');function _s(t){var e=rf();C(t,e)}var nf=G('<button tabindex="-1"><!></button>'),lf=G('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-142p4sy"></div> <input class="svelte-142p4sy"/>',1);function _l(t,e){_e(e,!0);let r=q(e,"options",19,()=>["p","l","b","h","qq"]),s=q(e,"value",31,()=>ze(r()[0]));const o=h=>{if(h.key==="ArrowLeft"){const m=r().findIndex(g=>g===s());m>0&&s(r()[m-1]);return}if(h.key==="ArrowRight"){const m=r().findIndex(g=>g===s());m<r().length-1&&s(r()[m+1]);return}},a='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',c={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};c.b=c.l+c.p;const u={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var f=lf(),d=X(f);d.__keydown=o,Qe(d,20,r,h=>h,(h,m)=>{var g=nf();g.__click=()=>s(m);let b;var _=D(g);ht(_,()=>a+c[m]+"</svg>"),ie(()=>{b=it(g,1,"option svelte-142p4sy",null,b,{selected:m==s()}),O(g,"title",u[m])}),C(h,g)});var v=F(d,2);Xl(v,s),C(t,f),we()}lt(["keydown","click"]),lt(["keydown","click"]);var sf=G("<h2> </h2>"),of=G("<!> <!>",1),af=G('<div class="widget"><!></div>');function cf(t,e){_e(e,!0);let r=q(e,"title",3,""),s=q(e,"value",15),o=q(e,"labelWidth",3,13);function a(d){const v={};for(const h of Object.keys(d))v[h]=d[h].default;return v}ye(()=>{!s()&&e.options&&s(a(e.options))});var c=af(),u=D(c);{var f=d=>{var v=of(),h=X(v);{var m=b=>{fe(b,{children:(_,p)=>{var w=sf(),S=D(w);ie(()=>ke(S,r())),C(_,w)},$$slots:{default:!0}})};Y(h,b=>{r()&&b(m)})}var g=F(h,2);Qe(g,17,()=>Object.keys(e.options),et,(b,_)=>{const p=y(()=>e.options[l(_)]);var w=ge(),S=X(w);{var E=k=>{fe(k,{get name(){return l(p).name},get label(){return l(p).label},get labelWidth(){return o()},children:(A,j)=>{var N=ge(),R=X(N);Bn(R,()=>l(p).el,(L,T)=>{T(L,Lr(()=>l(p).props,{get value(){return s()[l(_)]},set value(M){s(s()[l(_)]=M,!0)}}))}),C(A,N)},$$slots:{default:!0}})};Y(S,k=>{l(p).hidden||k(E)})}C(b,w)}),C(d,v)};Y(u,d=>{s()&&d(f)})}C(t,c),we()}function ws(t,e,r,s,o){(!s||!Array.isArray(s))&&(s=[]);const a=e.values.nrows,c=e.values.ncols,u=s.length,f=a-u,d=t.ncomp,v=o?5:4,h=Math.max(d,v),m=Array(h).fill(""),g=d<v?Array(v-d).fill(""):[],b=v<d?Array(d-v).fill(""):[],_=Array(d).fill(0).map((N,R)=>"PC"+(R+1)),p=e.sep;function w(N,R,L){S+=`
`,S+=[N+":","","",...m].join(p)+`
`,S+=["object","group","outlier",..._,...g].join(p)+`
`;const T=t.v.subarray(R,R+d*f);let M=0;for(let P=0;P<a;P++){const B=e.classes?e.classes[P]:"";if(u>0&&s.includes(P)){S+=[L[P],B,"yes",...Array(d).fill("-"),...g].join(p)+`
`;continue}const V=Array(d);for(let z=0;z<d;z++)V[z]=T[z*f+M];S+=[L[P],B,"",...V,...g].join(p)+`
`,M=M+1}S+=`
`}let S="";if(S+=["Number of components:",d,"",...m].join(p)+`
`,S+=["Center:",t.center,"",...m].join(p)+`
`,S+=["Scale:",t.scale,"",...m].join(p)+`
`,S+=`
`,S+=["Statistics:","","",...m].join(p)+`
`,o){S+=["","","PC","Expvar","Cumexpvar","Resvar","Cumresvar","Eigenvalues",...b].join(p)+`
`;for(let N=0;N<d;N++)S+=["","",N+1,t.stat.expvar[N],t.stat.cumexpvar[N],t.stat.resvar[N],t.stat.cumresvar[N],t.eigenvals[N],...b].join(p)+`
`}else{S+=["","","PC","Expvar","Cumexpvar","Resvar","Cumresvar",...b].join(p)+`
`;for(let N=0;N<d;N++)S+=["","",N+1,t.stat.expvar[N],t.stat.cumexpvar[N],t.stat.resvar[N],t.stat.cumresvar[N],...b].join(p)+`
`}if(S+=`
`,o){S+=`
`,S+=["Loading, center and scale values:","","",...m].join(p)+`
`,S+=["variable","center","scale",..._,...g].join(p)+`
`;const N=o.v.subarray(2,2+c),R=o.v.subarray(2+c,2+c*2),L=o.v.subarray(2+c*2,2+c*2+d*c);for(let T=0;T<c;T++){const M=Array(d);for(let P=0;P<d;P++)M[P]=L[P*c+T];S+=[e.varlabels[T],N[T],R[T],...M,...g].join(p)+`
`}S+=`
`}w("Scores",0,e.objlabels),w("Score distances, h",d*f,e.objlabels),w("Orthogonal distances, q",d*f*2,e.objlabels),e.dec!=="."&&(S=S.replace(/\./g,e.dec)),S=["Data filename:",e.fileName,"",...m].join(p)+`
`+S;let E=["PCA results ("+r+")","https://mda.tools/pca/","",...m].join(p)+`

`;const k=new Blob([E+S],{type:"text/csv"}),A=window.URL.createObjectURL(k),j=document.createElement("a");j.setAttribute("href",A),j.setAttribute("download",`pca-results-${r}.csv`),j.click()}function uf(t,e){t.prep=e;const r=new Blob([JSON.stringify(t,gl)],{type:"application/json"}),s=window.URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",s),o.setAttribute("download","pca-model.json"),o.click()}var ff=G('<span style="font-weight:bold"> </span><br/>',1),df=G('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),vf=G('<span class="file-size svelte-1uxd0r7"> </span>'),hf=G('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function mf(t,e){_e(e,!0);let r=q(e,"title",3,"");var s=ge(),o=X(s);{var a=c=>{fe(c,{children:(u,f)=>{var d=hf(),v=X(d),h=D(v);{var m=E=>{var k=ff(),A=X(k),j=D(A);ie(()=>ke(j,r())),C(E,k)};Y(h,E=>{r()&&r()!==""&&E(m)})}var g=F(h,4),b=D(g),_=F(g,5);{var p=E=>{var k=df(),A=X(k),j=D(A),N=F(A,4),R=D(N);ie(()=>{ke(j,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),ke(R,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),C(E,k)},w=E=>{var k=vf(),A=D(k);ie(()=>ke(A,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),C(E,k)};Y(_,E=>{e.dataset.nresp&&e.dataset.nresp>0?E(p):E(w,!1)})}var S=F(v,2);ar(S,{get onclick(){return e.reset}}),ie(()=>{O(g,"title",e.dataset.fileName),ke(b,e.dataset.fileName)}),C(u,d)},$$slots:{default:!0}})};Y(o,c=>{e.dataset&&c(a)})}C(t,s),we()}var gf=G("<!> <!>",1),pf=G("<!> <!> <!> <!> <!> <!>",1),bf=G("<!> <!>",1),_f=G("<p> </p>"),wf=G("<!> <p> </p>",1),yf=G("<p> </p>"),xf=G("<!> <!> <!>",1);function Na(t,e){_e(e,!0);let r=q(e,"model",3,null),s=q(e,"outliers",19,()=>[]),o=q(e,"className",3,"Class"),a=q(e,"classMandatory",3,!1),c=q(e,"classUnique",3,!1),u=q(e,"title",3,""),f=q(e,"dataset",15),d=q(e,"resobj",15),v=q(e,"csvOnly",3,!0);const h=[",",";"],m=y(()=>r()?["no","yes"]:["no","labels","values"]);let g=ee(void 0),b=ee(""),_=ee(""),p=ee(","),w=ee("no"),S=ee(!1),E=ee(!1),k=ee(null),A=ee("neutral"),j=ee("");function N(re){I(A,"error"),I(j,re,!0),console.error(re)}function R(){I(A,"neural"),I(j,"")}function L(){I(A,"success"),I(j,"")}function T(re,ve,pe){I(k,e.WASM().then(Re=>{d(gs(Re,re,ve,pe,!0)),L()}).catch(Re=>{d(null),N(Re)}),!0)}function M(re,ve){if(!re||re.size<10)return;const Re=re.slice(0,1e5),Te=new FileReader;Te.onload=()=>{const Se=Te.result;!Se||Se.length<0||((Me=>{var je=Cl(Me,4);I(p,je[0],!0),I(S,je[1],!0),I(E,je[2],!0),I(w,je[3],!0)})(ju(Se)),I(E,a()||l(E),!0),ve&&l(w)!=="no"&&I(w,"yes"))},Te.onerror=function(Se){csvString=null,I(A,"error"),I(j,Se,!0),console.error("Error reading CSV file.",Se)},Te.readAsText(Re)}function P(re){try{const ve=Tu(re,l(p),l(w)==="yes"?"labels":l(w),l(S),l(E),l(b),l(_));if(ve.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const pe=r()?r().prep&&Object.keys(r().prep).length>0?r().prep.npred:r().ncols+r().exclvars.length:0;if(r()&&ve.values.ncols!==pe)throw new Error("Dataset has different number of columns than the training set.");if(ve.classNames.length>ve.values.nrows/2)throw new Error("Dataset has too many unique "+o().toLowerCase()+" labels ("+ve.classNames.length+"), check your CSV file.");if(a()&&ve.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&ve.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");ve.fileName=l(g).name.replace(/\.[^/.]+$/,""),r()&&(ve.varrev=r().varrev,ve.header=r().header,ve.varlabels=r().varlabels,ve.varvalues=r().varvalues,ve.varvaluesName=r().varvaluesName,ve.varvaluesUnits=r().varvaluesUnits),f(ve),L()}catch(ve){f(null),N(ve)}}function B(re){const ve=new FileReader;ve.onload=()=>{P(ve.result)},ve.readAsText(l(g))}async function V(re){try{const ve=l(g)instanceof FileList?l(g):[l(g)];f(await Fu(ve)),L()}catch(ve){N("Failed to read SPC file: "+ve)}}function z(){I(g,""),f(null),d(null),I(b,""),I(_,""),R()}ye(()=>{if(!(l(g)===0||l(g)===void 0||f())){if(l(g)===null||l(g)===""){z();return}if(Array.isArray(l(g))){if(l(g).filter(re=>re.slice(-4)===".spc").length!==l(g).length){N("Multiple file selection is allowed only for SPC files.");return}V(l(g));return}l(g)&&(l(g).type==="text/csv"||l(g).type==="application/vnd.ms-excel")?(M(l(g),r()),R()):V([l(g)])}}),ye(()=>{l(p)&&R()}),ye(()=>{if(f()&&r()&&!d()&&!l(j))try{d(T(r(),f(),s())),L()}catch(re){f(null),d(null),N(re)}});var H=xf(),oe=X(H);{var U=re=>{var ve=bf(),pe=X(ve);En(pe,()=>l(g)===void 0,Se=>{fe(Se,{children:(Me,je)=>{var Ce=ge(),Ee=X(Ce);{var se=te=>{bl(te,{id:"dataFile",message:"Select CSV file with dataset",get file(){return l(g)},set file(de){I(g,de,!0)}})},ae=te=>{bl(te,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return l(g)},set file(de){I(g,de,!0)}})};Y(Ee,te=>{v()?te(se):te(ae,!1)})}C(Me,Ce)},$$slots:{default:!0}})});var Re=F(pe,2);{var Te=Se=>{var Me=pf(),je=X(Me);fe(je,{label:"Delimiter",children:(he,Fe)=>{$e(he,{id:"sep",get options(){return h},get value(){return l(p)},set value(Ie){I(p,Ie,!0)}})},$$slots:{default:!0}});var Ce=F(je,2);fe(Ce,{label:"Row labels",children:(he,Fe)=>{zt(he,{id:"hasLabels",options:["no","yes"],get value(){return l(S)},set value(Ie){I(S,Ie,!0)}})},$$slots:{default:!0}});var Ee=F(Ce,2);{var se=he=>{fe(he,{get label(){return`${o()??""} labels`},children:(Fe,Ie)=>{zt(Fe,{id:"hasLabels",options:["no","yes"],get value(){return l(E)},set value(qe){I(E,qe,!0)}})},$$slots:{default:!0}})};Y(Ee,he=>{a()||he(se)})}var ae=F(Ee,2);fe(ae,{label:"Header",children:(he,Fe)=>{$e(he,{id:"header",get options(){return l(m)},get value(){return l(w)},set value(Ie){I(w,Ie,!0)}})},$$slots:{default:!0}});var te=F(ae,2);{var de=he=>{var Fe=gf(),Ie=X(Fe);fe(Ie,{label:"Header name",children:(W,J)=>{Ca(W,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return l(b)},set value($){I(b,$,!0)}})},$$slots:{default:!0}});var qe=F(Ie,2);fe(qe,{label:"Header units",children:(W,J)=>{Ca(W,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return l(_)},set value($){I(_,$,!0)}})},$$slots:{default:!0}}),C(he,Fe)};Y(te,he=>{l(w)==="values"&&he(de)})}var be=F(te,2);fe(be,{label:" ",children:(he,Fe)=>{ot(he,{text:"Load",onclick:B})},$$slots:{default:!0}}),C(Se,Me)};Y(Re,Se=>{l(g)&&!Array.isArray(l(g))&&(l(g).type==="text/csv"||l(g).type==="application/vnd.ms-excel")&&Se(Te)})}C(re,ve)},Q=re=>{var ve=ge(),pe=X(ve);{var Re=Te=>{var Se=ge(),Me=X(Se);Ul(Me,()=>l(k),je=>{fe(je,{children:(Ce,Ee)=>{var se=wf(),ae=X(se);_s(ae);var te=F(ae,2),de=D(te);ie(()=>ke(de,r()?"Loading data and apply model...":"Loading data...")),C(Ce,se)},$$slots:{default:!0}})},void 0,(je,Ce)=>{fe(je,{status:"error",children:(Ee,se)=>{var ae=_f(),te=D(ae);ie(()=>ke(te,l(Ce))),C(Ee,ae)},$$slots:{default:!0}})}),C(Te,Se)};Y(pe,Te=>{l(k)&&Te(Re)})}C(re,ve)};Y(oe,re=>{f()?re(Q,!1):re(U)})}var ne=F(oe,2);{var K=re=>{mf(re,{get dataset(){return f()},reset:z,get title(){return u()}})};Y(ne,re=>{f()&&re(K)})}var Z=F(ne,2);{var le=re=>{fe(re,{status:"error",children:(ve,pe)=>{var Re=yf(),Te=D(Re);ie(()=>ke(Te,l(j))),C(ve,Re)},$$slots:{default:!0}})};Y(Z,re=>{(l(A)==="error"||l(j))&&re(le)})}C(t,H),we()}var Ef=G("<!> <!> <!>",1),kf=G("<p> </p>"),Sf=G("<!> <p>Computing PV-set...</p>",1),Af=G('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),Cf=G("<p> </p>"),Nf=G("<!> <!> <!> <!>",1);function Tf(t,e){_e(e,!0);let r=q(e,"outliers",19,()=>[]),s=q(e,"pvset",15),o=q(e,"pvres",15),a=ee("neutral"),c=ee(""),u=ee(ze(["ven","rand","loo"])),f=ee("ven"),d=ee(void 0),v=e.calset.values.nrows-r().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(L=>L>=v/(v-e.model.ncomp-1)&&L<=v/2):[],m=ee(ze(h.length>0?h[0]:0));ye(()=>{h.length===0&&(I(u,["loo"],!0),I(f,"loo"))});async function g(L,T,M){I(d,e.WASM().then(P=>{const B=M.type=="loo"?0:M.type=="rand"?2:1,V=yu(P,T,L.values,T.ncomp,M.nseg,B,0,r());s({classLabelsVarname:L.classLabelsVarname,classNames:L.classNames,dec:L.dec,fileName:L.fileName+"-pcv",hasClassNames:L.hasClassNames,hasLabels:L.hasLabels,header:L.header,labelsVarname:L.labelsVarname,classes:e.calres.classes,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:L.sep,values:V,varAxisTitle:L.varAxisTitle,varindices:T.varindices,varlabels:T.varlabels,varrev:T.varrev,varvalues:T.varvalues,varvaluesName:T.varvaluesName,varvaluesUnits:T.varvaluesUnits}),o(gs(P,T,s(),[]))}).catch(P=>{console.error(P),s(null),o(null),I(a,"error"),I(c,P,!0)}),!0)}function b(L){I(a,"neutral"),I(c,""),g(e.calset,e.model,{type:l(f),nseg:l(m)})}function _(){I(a,"neutral"),I(c,""),I(d,null),s(null),o(null)}ye(()=>{e.model===null&&_()});var p=Nf(),w=X(p);{var S=L=>{var T=Ef(),M=X(T);fe(M,{name:"split",label:"Split type:",children:(z,H)=>{$e(z,{id:"cvType",get options(){return l(u)},get value(){return l(f)},set value(oe){I(f,oe,!0)}})},$$slots:{default:!0}});var P=F(M,2);{var B=z=>{fe(z,{name:"nseg",label:"Segments:",children:(H,oe)=>{$e(H,{id:"nseg",get options(){return h},get value(){return l(m)},set value(U){I(m,U,!0)}})},$$slots:{default:!0}})};Y(P,z=>{l(f)!=="loo"&&z(B)})}var V=F(P,2);fe(V,{name:"run-button",label:" ",children:(z,H)=>{ot(z,{onclick:b,text:"Compute PV-set"})},$$slots:{default:!0}}),C(L,T)};Y(w,L=>{e.model&&!s()&&l(a)!=="busy"&&L(S)})}var E=F(w,2);{var k=L=>{var T=ge(),M=X(T);Ul(M,()=>l(d),P=>{fe(P,{name:"spinner",children:(B,V)=>{var z=Sf(),H=X(z);_s(H),C(B,z)},$$slots:{default:!0}})},void 0,(P,B)=>{fe(P,{name:"error",status:"error",children:(V,z)=>{var H=kf(),oe=D(H);ie(()=>ke(oe,l(B))),C(V,H)},$$slots:{default:!0}})}),C(L,T)};Y(E,L=>{l(d)&&L(k)})}var A=F(E,2);{var j=L=>{fe(L,{name:"info",children:(T,M)=>{var P=Af(),B=X(P),V=F(D(B)),z=F(B,2);Vu(z,{onclick:()=>Ru(s(),e.calset.fileName+"-pv")});var H=F(z,2);ar(H,{onclick:_}),ie(()=>ke(V,` ${s().values.nrows??""} × ${s().values.ncols??""}, ${l(f)??""}
      ${l(f)!=="loo"?l(m)+" seg":""}`)),C(T,P)},$$slots:{default:!0}})};Y(A,L=>{s()&&L(j)})}var N=F(A,2);{var R=L=>{fe(L,{name:"error",status:"error",children:(T,M)=>{var P=Cf(),B=D(P);ie(()=>ke(B,l(c))),C(T,P)},$$slots:{default:!0}})};Y(N,L=>{l(a)==="error"&&l(c)&&L(R)})}C(t,p),we()}var Mf=G("<!> <!> <!> <!>",1),Pf=G("<p> </p>"),jf=G("<!> <p>Computing global model...</p>",1),Lf=G('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Rf=G('<div class="buttons"><!> <!></div>'),If=G("<!> <!>",1),zf=G("<p> </p>"),Ff=G("<!> <!> <!> <!>",1);function qf(t,e){_e(e,!0);let r=q(e,"outliers",19,()=>[]),s=q(e,"resobj",15),o=q(e,"model",15),a=q(e,"downloadModel",3,null),c=q(e,"downloadResults",3,null),u=ee("neutral"),f=ee(""),d=ee(1),v=ee(!0),h=ee(!1),m=ee(void 0);async function g(T,M,P,B){I(m,e.WASM().then(V=>{I(u,"computing");const z=_u(V,T.values,M,P,B,r());z.hash=ms(),z.exclvars=[],z.varlabels=T.varlabels,z.varindices=T.varindices,z.varvalues=T.varvalues,z.varvaluesName=T.varvaluesName,z.varvaluesUnits=T.varvaluesUnits,z.varrev=T.varrev,z.prep=[];const H=gs(V,z,T,r());o(z),s(H),I(u,"success")}).catch(V=>{console.error(V),o(null),I(u,"error"),I(f,V,!0)}),!0)}function b(T){I(u,"neutral"),I(f,null),g(e.dataset,l(d),l(v),l(h))}function _(){I(u,"neutral"),I(m,null),s(null),o(null),I(f,null)}let p=y(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-1,50):null);ye(()=>{e.dataset===null&&_()}),ye(()=>{I(d,l(p)?Math.min(l(p),20):null,!0)});var w=Ff(),S=X(w);{var E=T=>{var M=Mf(),P=X(M);fe(P,{name:"ncomp",label:"# of PCs",children:(H,oe)=>{Un(H,{id:"ncomp",min:1,get max(){return l(p)},step:1,decNum:0,get value(){return l(d)},set value(U){I(d,U,!0)}})},$$slots:{default:!0}});var B=F(P,2);fe(B,{name:"center",label:"Center",children:(H,oe)=>{zt(H,{id:"center",options:["no","yes"],get value(){return l(v)},set value(U){I(v,U,!0)}})},$$slots:{default:!0}});var V=F(B,2);fe(V,{name:"scale",label:"Scale",children:(H,oe)=>{zt(H,{id:"scale",options:["no","yes"],get value(){return l(h)},set value(U){I(h,U,!0)}})},$$slots:{default:!0}});var z=F(V,2);fe(z,{name:"create-model",label:" ",children:(H,oe)=>{ot(H,{onclick:b,text:"Create model"})},$$slots:{default:!0}}),C(T,M)};Y(S,T=>{e.dataset&&!o()&&l(u)!=="computing"&&T(E)})}var k=F(S,2);{var A=T=>{var M=ge(),P=X(M);Ul(P,()=>l(m),B=>{fe(B,{name:"spinner",children:(V,z)=>{var H=jf(),oe=X(H);_s(oe),C(V,H)},$$slots:{default:!0}})},void 0,(B,V)=>{fe(B,{name:"error",status:"error",children:(z,H)=>{var oe=Pf(),U=D(oe);ie(()=>ke(U,l(V))),C(z,oe)},$$slots:{default:!0}})}),C(T,M)};Y(k,T=>{l(m)&&T(A)})}var j=F(k,2);{var N=T=>{var M=If(),P=X(M);fe(P,{name:"info",children:(z,H)=>{var oe=Lf(),U=X(oe),Q=F(D(U)),ne=F(U,2);ar(ne,{onclick:_}),ie(()=>ke(Q,` ${o().ncomp??""} PCs${o().center?", centered":""}${o().scale?", scaled":""}`)),C(z,oe)},$$slots:{default:!0}});var B=F(P,2);{var V=z=>{fe(z,{name:"download-buttons",label:"Download",children:(H,oe)=>{var U=Rf(),Q=D(U);ot(Q,{onclick:()=>c()(s(),e.dataset,"train",r(),o()),text:"Results"});var ne=F(Q,2);ot(ne,{onclick:()=>a()(o()),text:"Model"}),C(H,U)},$$slots:{default:!0}})};Y(B,z=>{a()&&c()&&z(V)})}C(T,M)};Y(j,T=>{o()&&T(N)})}var R=F(j,2);{var L=T=>{fe(T,{name:"error",status:"error",children:(M,P)=>{var B=zf(),V=D(B);ie(()=>ke(V,l(f))),C(M,B)},$$slots:{default:!0}})};Y(R,T=>{(l(u)==="error"||l(f))&&T(L)})}C(t,w),we()}var Of=G('<tr class="svelte-110ino2"><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td></tr>'),Bf=G('<tr class="svelte-110ino2"><td class="svelte-110ino2">...</td><td class="svelte-110ino2">...</td><td class="svelte-110ino2">...</td><td class="svelte-110ino2">...</td></tr>'),Vf=G('<tr class="svelte-110ino2"><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td></tr>'),Df=G('<table class="svelte-110ino2"><thead><tr class="svelte-110ino2"><th class="svelte-110ino2">PC</th><th class="svelte-110ino2">Expvar</th><th class="svelte-110ino2">Cumexpvar</th><th class="svelte-110ino2">Eigenvals</th></tr></thead><tbody><!><!><!></tbody></table> <!>',1);function Ta(t,e){_e(e,!0);const r=16,s=y(()=>e.res?Object.keys(e.res):null);let o=ee(ze(l(s)[0]));const a=y(()=>e.res?e.res[l(o)]:null),c=y(()=>l(a)?l(a).stat.cumexpvar:null),u=y(()=>l(a)?l(a).stat.expvar:null),f=y(()=>l(a)?l(a).eigenvals.map(m=>m*(l(a).nrows-1)):null);var d=ge(),v=X(d);{var h=m=>{var g=Df(),b=X(g),_=F(D(b)),p=D(_);Qe(p,17,()=>l(a).stat.components.filter(N=>N<r),et,(N,R)=>{var L=Of(),T=D(L),M=D(T),P=F(T),B=D(P),V=F(P),z=D(V),H=F(V),oe=D(H);ie((U,Q,ne)=>{ke(M,l(R)),ke(B,U),ke(z,Q),ke(oe,ne)},[()=>(l(u)[l(R)-1]*100).toFixed(2),()=>(l(c)[l(R)-1]*100).toFixed(2),()=>l(f)[l(R)-1].toFixed(2)]),C(N,L)});var w=F(p);{var S=N=>{var R=Bf();C(N,R)};Y(w,N=>{l(a).ncomp>r&&N(S)})}var E=F(w);{var k=N=>{var R=Vf(),L=D(R),T=D(L),M=F(L),P=D(M),B=F(M),V=D(B),z=F(B),H=D(z);ie((oe,U,Q)=>{ke(T,l(a).ncomp),ke(P,oe),ke(V,U),ke(H,Q)},[()=>((l(c)[l(a).ncomp-1]-l(c)[l(a).ncomp-2])*100).toFixed(2),()=>(l(c)[l(a).ncomp-1]*100).toFixed(2),()=>l(f)[l(a).ncomp-1].toFixed(2)]),C(N,R)};Y(E,N=>{l(a).ncomp>=r&&N(k)})}var A=F(b,2);{var j=N=>{fe(N,{name:"res-switcher",children:(R,L)=>{$e(R,{get options(){return l(s)},get value(){return l(o)},set value(T){I(o,T,!0)}})},$$slots:{default:!0}})};Y(A,N=>{l(s)&&l(s).length>1&&N(j)})}C(m,g)};Y(v,m=>{l(a)&&m(h)})}C(t,d),we()}var Yf=G('<span class="item svelte-igakmm"> </span>'),Wf=G('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function Ma(t,e){_e(e,!0);var r=ge(),s=X(r);{var o=a=>{fe(a,{children:(c,u)=>{var f=Wf(),d=X(f),v=F(D(d),2);Qe(v,17,()=>e.outliers,et,(b,_)=>{var p=Yf(),w=D(p);ie(()=>ke(w,e.dataset.objlabels[l(_)])),C(b,p)});var h=F(d,2);{var m=b=>{Bu(b,{get onclick(){return e.undoOutliers}})};Y(h,b=>{e.outliers.length>1&&b(m)})}var g=F(h,2);ar(g,{get onclick(){return e.resetOutliers}}),C(c,f)},$$slots:{default:!0}})};Y(s,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(o)})}C(t,r),we()}const Uf={small:30,medium:40,large:50,xlarge:60},Hf={small:5,medium:8,large:12,xlarge:15},Gf={small:6,medium:10,large:14,xlarge:18},ys={small:4,medium:6,large:8,xlarge:10},Xf={small:12,medium:15,large:19,xlarge:21},xs={small:11,medium:15,large:17,xlarge:19},Hn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Sn=["●","◼","▲","▼","⬥","＋","✳","✕"],Kf=.8,Pa=.5,Jf={small:5,medium:8,large:12,xlarge:15},wt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function ja(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function La(t,e){if(t!=null&&(Array.isArray(t)&&(t=Ze(t)),!(!Ve(t)||t.length<1)))return t.apply(r=>Ns((r-e[1])*e[0]+e[2])).v}function ut(t,e){return La(t,e.coords)}function Es(t,e){return La(t,e.objects)}function Ra(t,e){if(t!=null&&(Array.isArray(t)&&(t=Ze(t)),!(!Ve(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function Ia(t,e){return Ra(t,e.coords)}function za(t,e){return Ra(t,e.objects)}function ks(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function cn(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Ss(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=cn(Math.abs(Er(Zo(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(cn(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let s=Math.ceil(-cn(Math.log10(e)));return s<=2?[0,Array.from(t).map(o=>o.toFixed(s))]:(r=s-2,s=2,cn(Math.abs(Ir(t)))<=10?[-r,Array.from(t).map(o=>(o*Math.pow(10,r)).toFixed(s))]:[-r,Array.from(t).map(o=>(o/Math.pow(10,r)).toString())])}function Tt(t,e,r){return Array.isArray(t)&&(t=Ze(t)),Ve(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function As(t,e,r,s){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=r.coords,a=s.coords;let c="";for(let u=0;u<t.length;u++){const f=Ns((t.v[u]-o[1])*o[0]+o[2]),d=Ns((e.v[u]-a[1])*a[0]+a[2]);c+=f+","+d+" "}return c}function Fa(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Or(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function qa(t,e){if(Array.isArray(t)&&(t=Ze(t)),!Ve(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=s&c<=o);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function Cs(t,e,r,s,o,a){o==null&&(o=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const u=Math.abs(c[1]-c[0])*a,f=c[1]-c[0]-2*u,d=Math.floor(Math.log10(f)),v=1/Math.pow(10,d-1),h=Math.round(f*v)/v;let m=Qf(h/r);o&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+u)/m)*m,b=Math.floor((c[1]-u)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-b)<m/10&&(b=b-m),r=Math.ceil(cn((b-g)/m))+1,t=xe.zeros(r);for(let _=0;_<r;_++)t.v[_]=g+m*_;if(Math.abs(m)<1){const _=Math.pow(10,1+Math.round(-Math.log10(m)));t=t.apply(p=>Math.round((p+Number.EPSILON)*_)/_)}return t.filter(_=>_>=c[0]&_<=c[1])}function Qf(t,e){const r=Math.floor(Math.log10(t)),s=t/Math.pow(10,r);let o;return s<=1?o=1:s<=2?o=2:s<=5?o=5:o=10,o*Math.pow(10,r)}function Ns(t){return Math.round(t*10)/10}function Zf(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function Oa(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function $f(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function ed(t){let e=-1,r=$f();for(let s=0;s<t.length;s++)e=r[(e^t[s])&255]^e>>>8;return e^-1}function td(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const s=ed(r),o=new Uint8Array(4);o[0]=s>>>24,o[1]=s>>>16,o[2]=s>>>8,o[3]=s&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(o,50),c}function rd(t,e){const r=t.split(","),s=r[0],o=r[1],a=33/3*4,c=o.substring(0,a),u=o.substring(a),f=atob(c),d=new Uint8Array(f.length);for(let m=0;m<d.length;m++)d[m]=f.charCodeAt(m);const v=td(d,e),h=btoa(String.fromCharCode(...v));return[s,",",h,u].join("")}function nd(t,e,r,s,o){if(r||(r=10),s||(s=10),o||(o=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*o,c=s/2.54*o;setTimeout(()=>{const u=t.clientHeight,f=t.clientWidth;let d=Math.max(a/f,c/u),v=1;d<1&&(v=d,d=1);const h=document.createElement("canvas"),m=h.getContext("2d");h.width=f*(v<1?v:d),h.height=u*(v<1?v:d),t.setAttribute("width",f*d),t.setAttribute("height",u*d),m.fillStyle="white",m.fillRect(0,0,h.width,h.height),m.scale(d,d);const g=new XMLSerializer().serializeToString(t),b=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(b),p=new Image;p.onload=function(){v<0&&(p.width=p.width*v,p.height=p.height*v),m.drawImage(p,0,0,h.width,h.height);const w=h.toDataURL("image/png"),S=rd(w,o),E=document.createElement("a");E.href=S,E.download=`${e}.png`,E.click()},p.src=_},20)}function ld(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,s=t.clientWidth;t.setAttribute("width",s+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${s} ${r}`);const o=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(o),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function sd(t,e,r,s){const o=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":od(e,r,s)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=o},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=o},500)}).catch(a=>console.error(a))}async function od(t,e,r){const s=t.clientHeight,o=t.clientWidth,a=Math.max(e/o,r/s),c=document.createElement("canvas"),u=c.getContext("2d");return c.width=o*a,c.height=s*a,u.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((d,v)=>{const h=new XMLSerializer().serializeToString(t),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,b=g.createObjectURL(m),_=new Image;_.onload=function(){u.drawImage(_,0,0,c.width,c.height),g.revokeObjectURL(b),c.toBlob(function(p){p?d(p):v(new Error("Failed to create blob"))},"image/png")},_.onerror=function(p){v(p)},_.src=b})}function wl(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function ad(t,e,r,s,o){let a=o.ticks,c=o.tickLabels,u=0;const f=Cs(a,t,Hf[r.x],!0,o.whole),d=f.length,v=za([ys[r.plot]],s)[0],h=xe.fill(e[0],d),m=h.add(v),g=xe.fill(e[1],d);if(c||(a?(u=0,c=a.v.map(R=>cn(R).toString())):[u,c]=Ss(f.v)),!c||c.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[f,h],[f,g]],_=[[Ze([t[0]]),Ze([e[0]])],[Ze([t[1]]),Ze([e[0]])]],p=[[f,m],[f,h]],w=(t[1]-t[0])*.01,S=[[null,null],[[t[1]-(u>9?1:0)*w],[h.v[d-1]]]],E=ks(u),k=c.length,A=Math.abs(t[1]>t[0]?t[1]-f.v[k-1]:t[1]-f.v[0]),j=Math.abs(t[1]-t[0]),N=Math.abs(f.v[1]-f.v[0]);if(E.length>0&&A<j*.1&&A<N*.5){const R=t[1]>t[0]?k-1:0;c[R]=" "}return{grid:b,axisLine:_,tickCoords:p,tfCoords:S,ticks:a,tickLabels:c,tickFactor:u,tfLabel:E}}function id(t,e,r,s,o){let a=o.ticks,c=o.tickLabels,u=0;const f=Cs(o.ticks,e,Gf[r.y],!0,o.whole),d=f.length,v=za([ys[r.plot]],s)[0],h=xe.fill(t[0],d),m=h.add(v),g=xe.fill(t[1],d);if(c||(a?(u=0,c=a.v.map(N=>cn(N).toString())):[u,c]=Ss(f.v)),c.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[h,f],[g,f]],_=[[Ze([t[0]]),Ze([e[0]])],[Ze([t[0]]),Ze([e[1]])]],p=[[h,f],[m,f]],w=[[[],[]],[[m.v[d-1]+(Math.abs(u)>9?3:2)*v],[e[1]]]],S=ks(u),E=c.length,k=Math.abs(e[1]>e[0]?e[1]-f.v[E-1]:e[1]-f.v[0]),A=Math.abs(e[1]-e[0]),j=Math.abs(f.v[1]-f.v[0]);if(S.length>0&&k<A*.1&&k<j*.5){const N=e[1]>e[0]?E-1:0;c[N]=" "}return{grid:b,axisLine:_,tickCoords:p,tfCoords:w,ticks:a,tickLabels:c,tickFactor:u,tfLabel:S}}function cd(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ve(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let s,o;if(t.labels?(s=t.labels,o=0):[o,s]=Ss(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=s.length===r.length;return{colmap:r,breaks:e,labels:s,isCentered:a,labelsFactor:o,fontSize:t.fontSize,labelColor:t.labelColor}}function ud(t,e,r,s){const o=t.colmap.length,a=e*Kf,c=a/o,u=r[1]+(e-a)*.5,f=Jf[s.y],d=r[2]+f*Pa,v=d+f*(1+Pa),h=t.isCentered?c/2:0;return{start:u,top:d,height:f,width:c,dxl:h,ltop:v}}function un(t,e,r){if(!t||!e||!r||typeof r!="function")return;const s=t.target;if(s.tagName===e){const o=Array.prototype.indexOf.call(s.parentNode.children,s);if(o<0)return;r(o),t.stopPropagation()}}function fd(t,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function dd(t,e){const r="Arial",s=e/8,o=e*1.5,a=Array(t.length),c=Array(t.length);let u=0,f=0,d=0;for(let h=0;h<t.length;h++){const m=fd("  "+t[h].label+"  ",e+"px "+r);d=m>d?m:d;const g=e*t[h].labelHeight+2*s;a[h]=g,c[h]=u,u=u+g,f=f+g}const v=o+2*s+d;return[c,a,o,s,f,v]}function vd(t,e,r,s,o){const[a,c,u,f,d,v]=dd(t.items,s*t.fontSize),h=t.position.includes("left")?e[0]+o:t.position.includes("right")?e[1]-v-o:(e[1]+e[0]-v)*.5,m=t.position.includes("top")?r[1]+o:t.position.includes("bottom")?r[0]-d-o:(r[1]+r[0]-d)*.5;return{lgl:h,lgt:m,lgw:v,lgh:d,ely:a,elh:c,elw:u,elp:f}}function Or(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,o="";for(;s<t.length;){const a=t[s];if((a==="^"||a==="_")&&s<t.length-1){const c=a==="^";if(s++,t[s]==="("){let u=s+1;for(;u<t.length&&t[u]!==")";)u++;const f=t.slice(s+1,u);o+=c?e(f):r(f),s=u+1}else if(t[s]==="-"||t[s]==="–"){const u=t.slice(s,s+2);o+=c?e(u):r(u),s=s+2}else o+=c?e(t[s]):r(t[s]),s++}else o+=a,s++}return o}var hd=Ne('<line vector-effect="non-scaling-stroke"></line>'),md=Ne("<g></g>");function Ts(t,e){_e(e,!0);let r=q(e,"lineCoords",19,()=>[]),s=q(e,"lineColor",19,()=>wt.DARKGRAY),o=q(e,"lineType",3,1),a=q(e,"lineWidth",3,1),c=q(e,"className",3,"");const u=Lt("axes");let f=y(()=>ut(r()[0][0],u.tX())),d=y(()=>ut(r()[1][0],u.tX())),v=y(()=>ut(r()[0][1],u.tY())),h=y(()=>ut(r()[1][1],u.tY())),m=y(()=>`stroke:${s()};stroke-width: ${a()}px;stroke-dasharray:${Hn[u.scales().plot][o()-1]}`);var g=ge(),b=X(g);{var _=p=>{var w=md();Qe(w,21,()=>l(f),et,(S,E,k)=>{var A=hd();ie(()=>{O(A,"x1",l(f)[k]),O(A,"x2",l(d)[k]),O(A,"y1",l(v)[k]),O(A,"y2",l(h)[k]),ct(A,l(m))}),C(S,A)}),ie(()=>it(w,0,Rc(c()))),C(p,w)};Y(b,p=>{l(f)&&l(v)&&l(d)&&p(_)})}C(t,g),we()}var gd=Ne('<text text-anchor="middle"><!></text>'),pd=Ne("<text><!></text>"),bd=Ne("<text><!></text>"),_d=Ne('<g class="tick-labels"><!></g>');function Ba(t,e){_e(e,!0);let r=q(e,"pos",3,1),s=q(e,"las",3,1),o=y(()=>["middle","middle","start","middle","end"][r()]),a=y(()=>`fill:${e.textColor};`);const c=Lt("axes");let u=y(()=>ut(e.tickCoords[1][0],c.tX())),f=y(()=>ut(e.tickCoords[1][1],c.tY())),d=y(()=>xs[c.scales().plot]),v=y(()=>[0,0,l(d),0,-l(d)][r()]),h=y(()=>[0,l(d),0,-l(d),0][r()]);var m=_d(),g=D(m);{var b=p=>{var w=ge(),S=X(w);Qe(S,17,()=>l(u),et,(E,k,A)=>{var j=gd();O(j,"data-id",A),O(j,"dx",0);var N=D(j);ht(N,()=>e.tickLabels[A],!0),ie(()=>{O(j,"x",l(u)[A]),O(j,"y",l(f)[A]),O(j,"dy",l(v)*1.25),O(j,"transform",`rotate(-90, ${l(u)[A]}, ${l(f)[A]})`)}),C(E,j)}),C(p,w)},_=p=>{var w=ge(),S=X(w);{var E=A=>{var j=ge(),N=X(j);Qe(N,17,()=>l(u),et,(R,L,T)=>{var M=pd();O(M,"data-id",T),O(M,"dy",0),O(M,"text-anchor","end");var P=D(M);ht(P,()=>e.tickLabels[T],!0),ie(()=>{O(M,"x",l(u)[T]),O(M,"y",l(f)[T]),O(M,"dx",-l(h)/2),O(M,"transform",`rotate(-90, ${l(u)[T]}, ${l(f)[T]})`)}),C(R,M)}),C(A,j)},k=A=>{var j=ge(),N=X(j);Qe(N,17,()=>l(u),et,(R,L,T)=>{var M=bd();O(M,"data-id",T);var P=D(M);ht(P,()=>e.tickLabels[T],!0),ie(()=>{O(M,"x",l(u)[T]),O(M,"y",l(f)[T]),O(M,"dx",l(v)),O(M,"dy",l(h)),O(M,"text-anchor",l(o))}),C(R,M)}),C(A,j)};Y(S,A=>{s()===2&&r()===1?A(E):A(k,!1)},!0)}C(p,w)};Y(g,p=>{s()===2&&r()===4?p(b):p(_,!1)})}ie(()=>ct(m,l(a))),C(t,m),we()}const wd=(t,e=pt,r=pt)=>{const s=y(()=>e().colmap.length);var o=Cd(),a=X(o);Qe(a,17,()=>e().colmap,et,(v,h,m)=>{const g=y(()=>r().start+m*r().width);var b=kd(),_=X(b),p=F(_);O(p,"dy",0);var w=D(p);ht(w,()=>e().labels[m],!0),ie(()=>{O(_,"x",l(g)),O(_,"y",r().top),O(_,"width",r().width),O(_,"height",r().height),O(_,"fill",l(h)),O(p,"x",l(g)),O(p,"y",r().ltop),O(p,"dx",r().dxl),O(p,"fill",e().labelColor),O(p,"font-size",e().fontSize+"em")}),C(v,b)});var c=F(a);{var u=v=>{const h=y(()=>r().start+l(s)*r().width);var m=Sd();O(m,"dx",0),O(m,"dy",0);var g=D(m);ht(g,()=>e().labels[l(s)],!0),ie(()=>{O(m,"x",l(h)),O(m,"y",r().ltop),O(m,"fill",e().labelColor),O(m,"font-size",`${e().fontSize??""}em`)}),C(v,m)};Y(c,v=>{e().isCentered||v(u)})}var f=F(c);{var d=v=>{const h=y(()=>r().start+l(s)*r().width);var m=Ad(),g=D(m);ht(g,()=>ks(e().labelsFactor),!0),ie(()=>{O(m,"x",l(h)),O(m,"y",r().ltop),O(m,"fill",e().labelColor),O(m,"font-size",`${e().fontSize??""}em`)}),C(v,m)};Y(f,v=>{e().labelsFactor!==0&&v(d)})}C(t,o)};var yd=Ne('<text fill="crimson" text-anchor="middle"> </text>'),xd=Ne('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Ed=Ne("<!><!><!><!><!>",1),kd=Ne('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Sd=Ne('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Ad=Ne('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Cd=Ne("<!><!><!>",1),Nd=Ne("<line></line>"),Td=Ne('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Md=Ne('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Pd=Ne('<svg><rect height="100%" width="100%"></rect><!></svg>'),jd=Ne('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Ld=Ne('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Rd=Ne('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Id=Ne('<g class="plot-labels"><!><!><!></g>'),zd=Ne('<g class="axis x-axis"><!></g>'),Fd=Ne('<g class="axis y-axis"><!></g>'),qd=Ne('<rect fill="transparent" id="axes-box"></rect>'),Od=Ne('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Bd=Ne('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Vd=Ne('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Dd=Ne('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),Yd=G('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),Wd=G('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),Ud=G(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Va(t,e){_e(e,!0);const r=(Ae,Xe=pt,Ge=pt)=>{var Ct=ge(),Ft=X(Ct);{var $t=yt=>{var nt=ge(),Ke=X(nt);{var Mt=vt=>{var at=yd(),ur=D(at);ie(()=>{O(at,"x",l(je)[0]-10),O(at,"y",l(Se)),O(at,"transform",`rotate(-90, ${l(je)[0]-10}, ${l(Se)})`),ke(ur,Ge().error)}),C(vt,at)},gt=vt=>{var at=xd(),ur=D(at);ie(()=>{O(at,"x",l(Me)),O(at,"y",l(Ce)[0]),ke(ur,Ge().error)}),C(vt,at)};Y(Ke,vt=>{Ge().pos===4?vt(Mt):vt(gt,!1)})}C(yt,nt)},Yr=yt=>{var nt=Ed(),Ke=X(nt);{var Mt=Le=>{Ts(Le,{get lineCoords(){return Xe().grid},get lineColor(){return wt.MIDDLEGRAY},lineType:3})};Y(Ke,Le=>{Ge().showGrid&&Le(Mt)})}var gt=F(Ke);Ts(gt,{get lineCoords(){return Xe().axisLine},get lineColor(){return wt.DARKGRAY},lineType:1});var vt=F(gt);Ts(vt,{get lineCoords(){return Xe().tickCoords},get lineColor(){return wt.DARKGRAY},lineType:1});var at=F(vt);{var ur=Le=>{Ba(Le,{get las(){return Ge().las},get pos(){return Ge().pos},get tickCoords(){return Xe().tickCoords},get tickLabels(){return Xe().tickLabels},get tickColor(){return wt.DARKGRAY},get hideLast(){return Ge().hideLast}})};Y(at,Le=>{Xe().tickCoords.length===2&&Xe().tickLabels.length===Xe().tickCoords[1][0].length&&Le(ur)})}var Kn=F(at);{var tt=Le=>{{let Pt=y(()=>[Xe().tfLabel]);Ba(Le,{get pos(){return Ge().pos},get tickCoords(){return Xe().tfCoords},get tickLabels(){return l(Pt)},get textColor(){return wt.DARKGRAY}})}};Y(Kn,Le=>{Xe().tickFactor!==0&&Le(tt)})}C(yt,nt)};Y(Ft,yt=>{Ge().error?yt($t):yt(Yr,!1)})}C(Ae,Ct)},s=(Ae,Xe=pt,Ge=pt)=>{const Ct=y(()=>Ge().elw+2*Ge().elp),Ft=y(()=>Ge().elp),$t=y(()=>Ge().elh),Yr=y(()=>Ge().ely);var yt=Pd(),nt=D(yt),Ke=F(nt);Qe(Ke,17,()=>Xe().items,et,(Mt,gt,vt)=>{var at=Md();O(at,"x",0);var ur=D(at);{var Kn=vn=>{var xt=Nd();ie(()=>{O(xt,"x1",l(Ft)),O(xt,"x2",l(Ct)-l(Ft)),O(xt,"y1",l($t)[vt]/2),O(xt,"y2",l($t)[vt]/2),O(xt,"stroke",l(gt).line.lineColor),O(xt,"stroke-width",l(gt).line.lineWidth),O(xt,"stroke-dasharray",l(U)[l(gt).line.lineType-1])}),C(vn,xt)};Y(ur,vn=>{l(gt).line&&vn(Kn)})}var tt=F(ur);{var Le=vn=>{var xt=Td(),Hh=D(xt);ie(()=>{O(xt,"x",l(Ct)/2),O(xt,"y",l($t)[vt]/2),O(xt,"fill",l(gt).point.faceColor),O(xt,"stroke-width",l(gt).point.lineWidth),O(xt,"stroke",l(gt).point.lineColor),O(xt,"font-size",`${l(gt).point.markerSize??""}em`),ke(Hh,Sn[l(gt).point.marker-1])}),C(vn,xt)};Y(tt,vn=>{l(gt).point&&vn(Le)})}var Pt=F(tt),Uh=D(Pt);ht(Uh,()=>l(gt).label,!0),ie(()=>{O(at,"y",l(Yr)[vt]),O(at,"width",Ge().lgw),O(at,"height",l($t)[vt]),O(Pt,"x",l(Ct)+l(Ft)),O(Pt,"y",l($t)[vt]/2),O(Pt,"fill",wt.LEGEND),O(Pt,"font-size",`${Xe().fontSize??""}em`)}),C(Mt,at)}),ie(()=>{O(yt,"x",Ge().lgl),O(yt,"y",Ge().lgt),O(yt,"height",Ge().lgh),O(yt,"width",Ge().lgw),O(nt,"fill",Xe().faceColor),O(nt,"stroke",Xe().lineColor),O(nt,"stroke-width",Xe().lineWidth)}),C(Ae,yt)};let o=q(e,"limX",19,()=>[0,1]),a=q(e,"limY",19,()=>[0,1]),c=q(e,"margins",19,()=>[1,1.1,.55,.6]),u=q(e,"downloadLinks",3,"none"),f=q(e,"fileName",3,"plot"),d=q(e,"pngWidth",3,8),v=q(e,"pngHeight",3,8),h=q(e,"pngRes",3,300),m=q(e,"clipboardWidth",3,1200),g=q(e,"clipboardHeight",3,800),b=q(e,"onclick",3,null),_=q(e,"onmousemove",3,null),p=q(e,"onmousedown",3,null),w=q(e,"onmouseup",3,null);function S(Ae,Xe){if(Xe&&Ae.target.id=="axes-box"){const Ge=Ia([Ae.offsetX-l(ne)],l(Re))[0],Ct=Ia([Ae.offsetY-l(K)],l(Te))[0];Xe(Ge,Ct)}}function E(Ae){Ae.preventDefault(),S(Ae,p())}function k(Ae){Ae.preventDefault(),S(Ae,w())}function A(Ae){Ae.preventDefault(),S(Ae,_())}function j(Ae){Ae.preventDefault(),S(Ae,b())}async function N(Ae){sd(Ae.target,l(M),m(),g())}function R(){ld(l(M),f())}function L(){nd(l(M),f(),d(),v(),h())}const T="plottingArea"+Math.round(Math.random()*1e4);let M=ee(0),P=ee(0),B=ee(0);const V=y(()=>({plot:Zf(l(P),l(B)),x:Oa(l(P)),y:Oa(l(B))})),z=y(()=>c().map(Ae=>Ae*Uf[l(V).plot])),H=y(()=>Xf[l(V).plot]),oe=y(()=>ys[l(V).plot]),U=y(()=>Hn[l(V).plot]),Q=y(()=>l(te).show&&l(te).label!==""?l(H)*1.5:0),ne=y(()=>l(de).show&&l(de).label!==""?l(H)*1.5:0),K=y(()=>e.title&&e.title!==""?l(H)*1.5:0),Z=y(()=>l(P)>l(ne)?l(P)-l(ne):0),le=y(()=>l(B)>l(Q)+l(K)?l(B)-l(Q)-l(K):0),re=y(()=>l(le)-l(z)[0]-l(z)[2]),ve=y(()=>l(Z)-l(z)[1]-l(z)[3]),pe=y(()=>ja(o(),2)&&ja(a(),2)&&l(Z)>l(z)[1]+l(z)[3]&&l(le)>l(z)[0]+l(z)[2]),Re=y(()=>l(pe)?{coords:[l(ve)/(o()[1]-o()[0]),o()[0],l(z)[1]],objects:[l(ve)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Te=y(()=>l(pe)?{coords:[-l(re)/(a()[1]-a()[0]),a()[1],l(z)[2]],objects:[l(re)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Se=y(()=>l(re)*.5+l(K)+l(z)[2]),Me=y(()=>l(ve)*.5+l(ne)+l(z)[1]),je=y(()=>l(pe)?ut(o(),l(Re)):[0,1]),Ce=y(()=>l(pe)?ut(a(),l(Te)):[1,0]),Ee=y(()=>Or(e.title)),se=y(()=>l(Ee)?l(Ee).length===e.title.left?1:1.4:0);let ae=ee(ze({show:!1})),te=ee(ze({show:!1,error:""})),de=ee(ze({show:!1,error:""})),be=ee(ze({show:!1,colmap:null,breaks:null})),he=ee(ze({show:!1,items:null,position:null}));const Fe=y(()=>l(pe)&&l(be)&&l(be).show?cd(l(be)):null),Ie=y(()=>l(pe)&&l(te).show?ad(o(),a(),l(V),l(Te),l(te)):null),qe=y(()=>l(pe)&&l(de).show?id(o(),a(),l(V),l(Re),l(de)):null),W=y(()=>l(pe)&&l(Fe)?ud(l(Fe),l(ve),l(z),l(V)):null),J=y(()=>l(pe)&&l(he)&&l(he).show&&l(je)?vd(l(he),l(je),l(Ce),l(H),l(oe)):null);Ui("axes",{setBox:Ae=>I(ae,Ae,!0),setXAxis:Ae=>I(te,Ae,!0),setYAxis:Ae=>I(de,Ae,!0),setColmapLegend:Ae=>I(be,Ae,!0),setGroupLegend:Ae=>I(he,Ae,!0),scales:()=>l(V),tX:()=>l(Re),tY:()=>l(Te),limX:()=>o(),limY:()=>a()});var $=Ud();let ce;var ue=D($),me=F(D(ue));{var Oe=Ae=>{var Xe=Id(),Ge=D(Xe);{var Ct=nt=>{var Ke=jd();O(Ke,"dx",0),O(Ke,"dy",0);var Mt=D(Ke);ht(Mt,()=>l(te).label,!0),ie(()=>{O(Ke,"x",l(Me)),O(Ke,"y",l(le)+l(K))}),C(nt,Ke)};Y(Ge,nt=>{l(te).show&&l(te).label&&l(te).label!==""&&nt(Ct)})}var Ft=F(Ge);{var $t=nt=>{var Ke=Ld();O(Ke,"dx",0),O(Ke,"dy",0);var Mt=D(Ke);ht(Mt,()=>l(de).label,!0),ie(()=>{O(Ke,"x",l(H)/1.1*l(de).labelHeight),O(Ke,"y",l(Se)),O(Ke,"transform",`rotate(-90, ${l(H)*l(de).labelHeight/1.1}, ${l(Se)})`)}),C(nt,Ke)};Y(Ft,nt=>{l(de).show&&l(de).label&&l(de).label!==""&&nt($t)})}var Yr=F(Ft);{var yt=nt=>{var Ke=Rd();O(Ke,"dx",0),O(Ke,"dy",0);var Mt=D(Ke);ht(Mt,()=>l(Ee),!0),ie(()=>{O(Ke,"x",l(Me)),O(Ke,"y",l(H)*l(se))}),C(nt,Ke)};Y(Yr,nt=>{l(Ee)&&l(Ee)!==""&&nt(yt)})}C(Ae,Xe)};Y(me,Ae=>{l(pe)&&Ae(Oe)})}var Be=F(me),De=D(Be),Ye=D(De),dt=D(Ye),cr=F(De);{var Bs=Ae=>{var Xe=Dd(),Ge=X(Xe);{var Ct=tt=>{var Le=zd(),Pt=D(Le);r(Pt,()=>l(Ie),()=>l(te)),C(tt,Le)};Y(Ge,tt=>{l(te).show&&l(Ie)&&tt(Ct)})}var Ft=F(Ge);{var $t=tt=>{var Le=Fd(),Pt=D(Le);r(Pt,()=>l(qe),()=>l(de)),C(tt,Le)};Y(Ft,tt=>{l(de).show&&l(qe)&&tt($t)})}var Yr=F(Ft),yt=D(Yr);{var nt=tt=>{var Le=qd();Le.__keydown=j,Le.__click=j,Le.__mousemove=A,Le.__mousedown=E,Le.__mouseup=k,ie(()=>{O(Le,"stroke",l(ae).lineColor),O(Le,"stroke-width",`${l(ae).lineWidth??""}px`),O(Le,"x",l(je)[0]),O(Le,"y",l(Ce)[1]),O(Le,"width",l(je)[1]-l(je)[0]),O(Le,"height",l(Ce)[0]-l(Ce)[1])}),C(tt,Le)},Ke=tt=>{var Le=Od();Le.__keydown=j,Le.__click=j,Le.__mousemove=A,Le.__mousedown=E,Le.__mouseup=k,ie(()=>{O(Le,"x",l(je)[0]),O(Le,"y",l(Ce)[1]),O(Le,"width",l(je)[1]-l(je)[0]),O(Le,"height",l(Ce)[0]-l(Ce)[1])}),C(tt,Le)};Y(yt,tt=>{l(ae).show?tt(nt):tt(Ke,!1)})}var Mt=F(Yr),gt=D(Mt);yr(gt,()=>e.children??pt);var vt=F(Mt);{var at=tt=>{var Le=Bd(),Pt=D(Le);wd(Pt,()=>l(Fe),()=>l(W)),C(tt,Le)};Y(vt,tt=>{l(W)&&tt(at)})}var ur=F(vt);{var Kn=tt=>{var Le=Vd(),Pt=D(Le);s(Pt,()=>l(he),()=>l(J)),C(tt,Le)};Y(ur,tt=>{l(J)&&tt(Kn)})}ie(()=>O(Mt,"clip-path",`url(#${T})`)),C(Ae,Xe)};Y(cr,Ae=>{l(pe)&&Ae(Bs)})}rn(ue,Ae=>I(M,Ae),()=>l(M));var At=F(ue,2);{var mt=Ae=>{var Xe=Yd();C(Ae,Xe)},ft=Ae=>{var Xe=Wd(),Ge=D(Xe);Ge.__click=R,Ge.__keydown=R;var Ct=F(Ge,2);Ct.__click=L,Ct.__keydown=L;var Ft=F(Ct,2);Ft.__click=N,Ft.__keydown=N,C(Ae,Xe)};Y(At,Ae=>{l(pe)?Ae(ft,!1):Ae(mt)})}ie(()=>{ce=it($,1,`plot-container show-download-links-${u()??""}`,"svelte-1t5q9z1",ce,{"plot-error":!l(pe)}),ct(ue,`font-size:${l(H)??""}px`),O(Be,"x",l(ne)),O(Be,"y",l(K)),O(Be,"width",l(Z)),O(Be,"height",l(le)),O(Ye,"id",T),O(dt,"x",l(je)[0]),O(dt,"y",l(Ce)[1]),O(dt,"width",l(je)[1]-l(je)[0]),O(dt,"height",l(Ce)[0]-l(Ce)[1])}),Xo(ue,"clientWidth",Ae=>I(P,Ae)),Xo(ue,"clientHeight",Ae=>I(B,Ae)),C(t,$),we()}lt(["keydown","click","mousemove","mousedown","mouseup"]);function Ms(t,e){_e(e,!0);let r=q(e,"tickLabels",7),s=q(e,"las",3,1),o=q(e,"whole",3,!1),a=q(e,"show",3,!0),c=q(e,"showGrid",3,!1);const u=Lt("axes");ye(()=>{const f=Or(e.label),d=f?f.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=qa(e.ticks,u.limX())),!h&&r()&&(m=>{var g=Cl(m,2);r(g[0]),h=g[1]})(Fa(r(),v)),u.setXAxis({show:a(),error:h,label:f,ticks:v,labelHeight:d,showGrid:c(),las:s(),whole:o(),tickLabels:r()})}),we()}function Ps(t,e){_e(e,!0);let r=q(e,"tickLabels",7),s=q(e,"las",3,1),o=q(e,"whole",3,!1),a=q(e,"show",3,!0),c=q(e,"showGrid",3,!1);const u=Lt("axes");ye(()=>{const f=Or(e.label),d=f?f.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=qa(e.ticks,u.limY())),!h&&r()&&(m=>{var g=Cl(m,2);r(g[0]),h=g[1]})(Fa(r(),v)),u.setYAxis({show:a(),error:h,label:f,ticks:v,labelHeight:d,showGrid:c(),las:s(),whole:o(),tickLabels:r(),pos:4})}),we()}function js(t,e){_e(e,!0);let r=q(e,"lineWidth",3,1),s=q(e,"lineColor",3,"#606060");const o=Lt("axes");ye(()=>{o.setBox({show:!0,lineWidth:r(),lineColor:s()})}),we()}var Hd=Ne("<rect></rect>"),Gd=Ne("<g></g>");function yl(t,e){_e(e,!0);let r=q(e,"faceColor",19,()=>wt.PRIMARY),s=q(e,"lineColor",19,r),o=q(e,"lineWidth",3,1),a=q(e,"className",3,"series-rect");const c=y(()=>Tt(e.left,"Rectangles (left)")),u=y(()=>l(c)?Tt(e.top,"Rectangles (top)",l(c).length):null),f=y(()=>l(u)?typeof e.width!="object"?xe.fill(e.width,l(c).length):e.width:null),d=y(()=>l(u)?typeof e.height!="object"?xe.fill(e.height,l(c).length):e.height:null),v=Lt("axes"),h=y(()=>l(c)?ut(l(c),v.tX()):null),m=y(()=>l(u)?ut(l(u),v.tY()):null),g=y(()=>l(f)?Es(l(f),v.tX()):null),b=y(()=>l(d)?Es(l(d),v.tY()):null),_=y(()=>`fill:${r()};stroke:${s()};stroke-width:${o()}px;`),p=y(()=>l(h)&&l(m)&&l(g)&&l(b)&&l(g).length===l(h).length&&l(b).length===l(h).length);var w=ge(),S=X(w);{var E=k=>{var A=Gd();A.__click=j=>un(j,"rect",e.onclick),Qe(A,21,()=>e.left,et,(j,N,R)=>{var L=Hd();ie(()=>{O(L,"x",l(h)[R]),O(L,"y",l(m)[R]),O(L,"width",l(g)[R]),O(L,"height",l(b)[R])}),C(j,L)}),ie(()=>{it(A,0,`series ${a()??""}`),ct(A,l(_))}),C(k,A)};Y(S,k=>{l(p)&&k(E)})}C(t,w),we()}lt(["click"]);var Xd=Ne("<line></line>"),Kd=Ne('<g class="series series-segment"></g>');function fn(t,e){_e(e,!0);let r=q(e,"lineColor",19,()=>wt.PRIMARY),s=q(e,"lineType",3,1),o=q(e,"lineWidth",3,1);const a=y(()=>Tt(e.xStart,"Segments")),c=y(()=>l(a)?Tt(e.yStart,"Segments",l(a).length):null),u=y(()=>l(c)?Tt(e.xEnd,"Segments",l(a).length):null),f=y(()=>l(u)?Tt(e.yEnd,"Segments",l(a).length):null),d=Lt("axes"),v=y(()=>l(a)?ut(l(a),d.tX()):null),h=y(()=>l(u)?ut(l(u),d.tX()):null),m=y(()=>l(c)?ut(l(c),d.tY()):null),g=y(()=>l(f)?ut(l(f),d.tY()):null),b=y(()=>`stroke:${r()};stroke-width: ${o()}px;stroke-dasharray:${Hn[d.scales().plot][s()-1]}`),_=y(()=>l(v)&&l(h)&&l(m)&&l(g));var p=ge(),w=X(p);{var S=E=>{var k=Kd();k.__click=A=>un(A,"line",e.onclick),Qe(k,21,()=>l(v),et,(A,j,N)=>{var R=Xd();ie(()=>{O(R,"x1",l(v)[N]),O(R,"x2",l(h)[N]),O(R,"y1",l(m)[N]),O(R,"y2",l(g)[N])}),C(A,R)}),ie(()=>ct(k,l(b))),C(E,k)};Y(w,E=>{l(_)&&E(S)})}C(t,p),we()}lt(["click"]);var Jd=Ne("<text><!></text>"),Qd=Ne("<text><!></text>"),Zd=Ne("<text><!></text>"),$d=Ne('<g class="series series-textlabels"><!></g>');function An(t,e){_e(e,!0);let r=q(e,"pos",3,0),s=q(e,"faceColor",19,()=>wt.PRIMARY_TEXT),o=q(e,"lineColor",3,"transparent"),a=q(e,"lineWidth",3,0),c=q(e,"textSize",3,1),u=q(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],d=y(()=>Tt(e.xValues,"TextLabels")),v=y(()=>l(d)?Tt(e.yValues,"TextLabels",l(d).length):null),h=y(()=>l(v)?Array.isArray(e.labels)&&e.labels.length!==l(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=y(()=>l(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Lt("axes"),b=y(()=>l(d)&&l(m)!==null?ut(l(d),g.tX()):null),_=y(()=>l(v)&&l(b)?ut(l(v),g.tY()):null),p=y(()=>xs[g.scales().plot]),w=y(()=>[0,0,-l(p),0,l(p),l(p)]),S=y(()=>[0,l(p),0,-l(p),0,l(p)]),E=y(()=>`fill:${s()};stroke-width:${a()}px;stroke:${o()};font-size:${c()}em;`),k=y(()=>l(b)&&l(_)&&l(m)!==null&&l(h)&&l(b).length===l(_).length);var A=ge(),j=X(A);{var N=R=>{var L=$d();L.__click=B=>un(B,"text",e.onclick);var T=D(L);{var M=B=>{var V=ge(),z=X(V);Qe(z,17,()=>l(b),et,(H,oe,U)=>{var Q=Jd();O(Q,"data-id",U);var ne=D(Q);ht(ne,()=>e.labels,!0),ie(()=>{O(Q,"x",l(b)[U]),O(Q,"y",l(_)[U]),O(Q,"dx",l(w)[r()]),O(Q,"dy",l(S)[r()]),O(Q,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[U]+l(w)[r()]}, ${l(_)[U]+l(S)[r()]})`:""),O(Q,"text-anchor",f[r()[U]])}),C(H,Q)}),C(B,V)},P=B=>{var V=ge(),z=X(V);{var H=U=>{var Q=ge(),ne=X(Q);Qe(ne,17,()=>l(b),et,(K,Z,le)=>{var re=Qd();O(re,"data-id",le);var ve=D(re);ht(ve,()=>e.labels[le],!0),ie(()=>{O(re,"x",l(b)[le]),O(re,"y",l(_)[le]),O(re,"dx",l(w)[r()[le]]),O(re,"dy",l(S)[r()[le]]),O(re,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[le]+l(w)[r()]}, ${l(_)[le]+l(S)[r()]})`:""),O(re,"text-anchor",f[r()[le]])}),C(K,re)}),C(U,Q)},oe=U=>{var Q=ge(),ne=X(Q);Qe(ne,17,()=>l(b),et,(K,Z,le)=>{var re=Zd();O(re,"data-id",le);var ve=D(re);ht(ve,()=>e.labels[le],!0),ie(()=>{O(re,"x",l(b)[le]),O(re,"y",l(_)[le]),O(re,"dx",l(w)[r()]),O(re,"dy",l(S)[r()]),O(re,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[le]+l(w)[r()]}, ${l(_)[le]+l(S)[r()]})`:""),O(re,"text-anchor",f[r()])}),C(K,re)}),C(U,Q)};Y(z,U=>{Array.isArray(r())||ArrayBuffer.isView(r())?U(H):U(oe,!1)},!0)}C(B,V)};Y(T,B=>{typeof e.labels=="string"?B(M):B(P,!1)})}ie(()=>ct(L,l(E))),C(R,L)};Y(j,R=>{l(k)&&R(N)})}C(t,A),we()}lt(["click"]),lt(["click"]);var ev=Ne("<text> </text>"),tv=Ne('<g text-anchor="middle"></g>');function Ls(t,e){_e(e,!0);let r=q(e,"marker",3,1),s=q(e,"faceColor",3,"transparent"),o=q(e,"lineColor",19,()=>wt.PRIMARY),a=q(e,"lineWidth",3,1),c=q(e,"markerSize",3,1);const u=y(()=>typeof r()!="number"||r()<1||r()>Sn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+Sn.length+"."),null):Sn[r()-1]),f=y(()=>Tt(e.xValues,"Points")),d=y(()=>l(f)?Tt(e.yValues,"Points",l(f).length):null),v=Lt("axes"),h=y(()=>l(f)?ut(l(f),v.tX()):null),m=y(()=>l(h)&&l(d)?ut(l(d),v.tY()):null),g=y(()=>["＋","✳","✕"].includes(l(u))?`fill:${o()&&o()!=="transparent"?o():s()};stroke-width:0px;font-size:${c()}em;`:`fill:${s()};stroke-width:${a()}px;stroke:${o()}; font-size:${c()}em;`),b=y(()=>["◼","⬥","＋","✳","✕"].includes(l(u))?"series-points2":"series-points1"),_=y(()=>l(h)&&l(m)&&l(h).length===l(m).length);var p=ge(),w=X(p);{var S=E=>{var k=tv();k.__click=A=>un(A,"text",e.onclick),Qe(k,21,()=>l(h),et,(A,j,N)=>{var R=ev(),L=D(R);ie(()=>{O(R,"x",l(h)[N]),O(R,"y",l(m)[N]),ke(L,l(u))}),C(A,R)}),ie(()=>{it(k,0,`series series-points ${l(b)??""}`),ct(k,l(g))}),C(E,k)};Y(w,E=>{l(_)&&E(S)})}C(t,p),we()}lt(["click"]);var rv=Ne('<g class="series series-line"><polyline class="line"></polyline></g>');function Br(t,e){_e(e,!0);let r=q(e,"lineColor",19,()=>wt.PRIMARY),s=q(e,"lineType",3,1),o=q(e,"lineWidth",3,1);const a=y(()=>Tt(e.xValues,"Lines")),c=y(()=>l(a)?Tt(e.yValues,"Lines",l(a).length):null),u=Lt("axes"),f=y(()=>l(a)&&l(c)?As(l(a),l(c),u.tX(),u.tY()):null),d=y(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Hn[u.scales().plot][s()-1]}`);var v=ge(),h=X(v);{var m=g=>{var b=rv();b.__click=p=>un(p,"polyline",e.onclick);var _=D(b);ie(()=>{ct(b,l(d)),O(_,"points",l(f))}),C(g,b)};Y(h,g=>{l(f)&&g(m)})}C(t,v),we()}lt(["click"]);var nv=Ne('<polyline class="line"></polyline>'),lv=Ne('<g class="series series-multiline"></g>');function Da(t,e){_e(e,!0);let r=q(e,"lineColor",19,()=>wt.PRIMARY),s=q(e,"lineType",3,1),o=q(e,"lineWidth",3,1);const a=y(()=>Tt(e.xValues,"Multilines")),c=y(()=>l(a)?Vt(e.yValues)?(l(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),u=Lt("axes"),f=y(()=>{if(!l(a)||!l(c))return null;const g=new Array(l(c).ncols);for(let b=0;b<g.length;b++)g[b]=As(l(a),l(c).getcolumn(b+1),u.tX(),u.tY());return g}),d=y(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Hn[u.scales().plot][s()-1]}`);var v=ge(),h=X(v);{var m=g=>{var b=lv();b.__click=_=>un(_,"polyline",e.onclick),Qe(b,21,()=>l(f),et,(_,p)=>{var w=nv();ie(()=>O(w,"points",l(p))),C(_,w)}),ie(()=>ct(b,l(d))),C(g,b)};Y(h,g=>{l(f)&&l(f).length>0&&g(m)})}C(t,v),we()}lt(["click"]);function Rs(t,e){_e(e,!0);let r=q(e,"show",3,!0),s=q(e,"position",3,"topleft"),o=q(e,"lineColor",19,()=>wt.LEGEND),a=q(e,"lineWidth",3,1),c=q(e,"faceColor",3,"#fff"),u=q(e,"fontSize",3,.85);function f(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function d(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let m=0;m<h.length;m++){const g=h[m];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const b=Or(g.label),_=b.length===g.label?1:1.4;g.label=b,g.labelHeight=_,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(m+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:wt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=Sn.length||console.error('Legend: parameter "marker" for legend item '+(m+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.markerSize=g.point.markerSize?g.point.markerSize:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:wt.PRIMARY)}return h}const v=Lt("axes");ye(()=>{const h=d(e.items),m=f(s());v.setGroupLegend(h&&m?{show:r(),position:s(),items:e.items,lineColor:o(),faceColor:c(),lineWidth:a(),fontSize:u()}:{show:!1,position:null,items:null})}),we()}function Ya(t,e){_e(e,!0);let r=q(e,"show",3,!0),s=q(e,"labels",3,null),o=q(e,"labelColor",19,()=>wt.CLEGEND_LABELS),a=q(e,"fontSize",3,.85);const c=Lt("axes");ye(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:o(),fontSize:a()})}),we()}const sv=t=>t;function Wa(t,{delay:e=0,duration:r=400,easing:s=sv}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:a=>`opacity: ${a*o}`}}var ov=G('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function Is(t,e){_e(e,!0);let r=q(e,"isDark",3,!1);function s(h){h.key==="Escape"&&e.closeModal()}var o=ov();en("keydown",zl,s);let a;var c=D(o),u=D(c),f=D(u);f.__click=function(...h){e.closeModal?.apply(this,h)};var d=F(u,2),v=D(d);yr(v,()=>e.children),ie(()=>a=it(o,1,"drop svelte-oie633",null,a,{isdark:r()})),Wo(7,o,()=>Wa),C(t,o),we()}lt(["click"]);const av=[1,1.1,.45,.4],Vr={cal:1,pv:2,test:2,new:2},Ar={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},xl={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Gn={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},Ua="#808090",zs="#a0a0a0",Ha="#909090",Cn="#909090",Xn=8,iv=8,cv=8,uv=600;function Ga(t,e){return!t||!e||e<0||e>t.ncomp?"":`PC${e} (${(t.stat.expvar[e-1]*100).toFixed(1)}%)`}function fv(t,e){if(t.length===e.length)return t;const r=e.length,s=new t.constructor(r);for(let o in e)s[o]=t[e[o]];return s}function dv(t,e){let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)s=Math.min(s,t[c]),r=Math.max(r,t[c]);let o=Cs(void 0,[s,r],e-1,!0,!1,0).v;const a=o[1]-o[0];if(o[0]>s){const c=o[0]-a;o=[c<s?c:s,...o]}if(o[o.length-1]<r){const c=o[o.length-1]+a;o=[...o,c>r?c:r]}return o}function vv(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=wl(e);return t.reduce((o,a,c)=>(o[a]=r[c],o),{})}function Xa(t,e,r){const s=e.length,o=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let u=0;u<s-1;u++){const f=t[c]>=e[u],d=u===s-2?t[c]<e[u+1]+a:t[c]<e[u+1];if(f&&d){o[c]=r[u];break}}return o}function Ka(t,e,r,s,o="cal",a){if(!e)return null;let c,u,f,d,v,h,m=!0;if((r==="groups"||r==="classes")&&e.classNames){const g=vv(e.classNames);u=Object.keys(g).map(b=>g[b]),c=e.classNames,d=e.classes.map(b=>g[b]),f=new Array(c.length+1).map((b,_)=>_-.5),v=null}else if(r==="variable"){const g=fv(t.values.getcolref(s),e.objindices);v=t.varlabels[s-1],v.length>30&&(v=v.substring(0,29)+"..."),f=dv(g,10),u=wl(f.length-1),d=Xa(g,f,u)}else c=null,f=null,u=null,d=Array(e.nrows).fill(Ar[o]);return{labels:c,map:u,breaks:f,colors:d,varname:v,filled:h,showBar:m,mainColor:Ar[o],faceColor:xl[o],faceTColor:Gn[o]}}function hv(t,e,r=.95){const o=2*Math.PI/99,[a,c,u]=t,f=Math.sqrt((a+u)**2-4*(a*u-c*c));let d=.5*(a+u-f),v=.5*(a+u+f);if(d<v){let N=d;d=v,v=N}const h=kr(r,2),m=Math.sqrt(h*d),g=Math.sqrt(h*v);let b;if(Math.abs(c)<1e-7)b=0;else{let N=-c/(a-d),R=1;const L=Math.sqrt(N*N+R*R);N=N/L,R=R/L,b=Math.atan2(R,N),b<0&&(b=b+2*Math.PI)}const _=Math.cos(b),p=Math.sin(b),w=xe.zeros(100),S=xe.zeros(100);let E=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY;for(let N=0;N<100;N++){const R=N*o,L=m*Math.cos(R),T=g*Math.sin(R),M=L*_-T*p+e[0],P=L*p+T*_+e[1];w.v[N]=M,S.v[N]=P,E=Math.min(E,M),k=Math.max(k,M),A=Math.min(A,P),j=Math.max(j,P)}return[w,S,E,k,A,j]}function mv(t,e,r,s,o,a){if(!t||!e||!r||!s||!o)return null;const c=t.length,u=s.length,f=new Array(u).fill(0),d=new Array(u*2).fill(0);for(let p=0;p<c;p++){const w=s.indexOf(r[p]);f[w]+=1,d[w*2]+=t.v[p],d[w*2+1]+=e.v[p]}for(let p=0;p<u;p++)d[p*2]=d[p*2]/f[p],d[p*2+1]=d[p*2+1]/f[p];const v=new Array(u*3).fill(0);for(let p=0;p<c;p++){const w=s.indexOf(r[p]),S=t.v[p]-d[w*2],E=e.v[p]-d[w*2+1];v[w*3]+=S*S,v[w*3+1]+=S*E,v[w*3+2]+=E*E}let h=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;const _=Array(u);for(let p=0;p<u;p++){const[w,S,E,k,A,j]=hv([v[p*3]/(f[p]-1),v[p*3+1]/(f[p]-1),v[p*3+2]/(f[p]-1)],[d[p*2],d[p*2+1]],a);_[p]={x:w,y:S,c:o[p]},h=Math.min(h,E),m=Math.max(m,k),g=Math.min(g,A),b=Math.max(b,j)}return{ellipses:_,xRange:[h,m],yRange:[g,b]}}function El(t,e,r,s){if(!t||!e)return null;const o=t.length;let a=xe.zeros(o),c=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(s==="log")for(let f=0;f<o;f++){const d=Math.log(1+t[f]/r);a.v[f]=d,c=Math.max(c,d),u=Math.min(u,d)}else for(let f=0;f<o;f++){const d=t[f]/r;a.v[f]=d,c=Math.max(c,d),u=Math.min(u,d)}return{values:a,min:u,max:c}}function Ja(t,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[t]+", "+(e==="log"?"log(1 + "+t+"/"+t+"0)":t+"/"+t+"0")}function Qa(t,e,r,s){const a=e+r,u=kr(t,a)/r,f=-e/r,d=-u/f,v=xe.seq(0,d*1,d/100),h=v.apply(m=>m*f+u);return{x:s==="log"?v.apply(m=>Math.log(1+m)):v,y:s==="log"?h.apply(m=>Math.log(1+m)):h}}function Fs(t,e=Gn){return t?t.map(r=>({id:r,label:r,point:{marker:Vr[r],faceColor:e[r],lineColor:Ar[r],markerSize:Vr[r]===1?.85:.65,lineWidth:1.5}})):null}var gv=G("<!> <!> <!> <!>",1);function dn(t,e){let r=q(e,"whole",3,!1),s=nn(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Va(t,Lr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return av},get pngWidth(){return iv},get pngHeight(){return cv},get pngRes(){return uv}},()=>s,{children:(o,a)=>{var c=gv(),u=X(c);yr(u,()=>e.children);var f=F(u,2);Ms(f,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var d=F(f,2);Ps(d,{showGrid:!0,get label(){return e.yLabel}});var v=F(d,2);js(v,{}),C(o,c)},$$slots:{default:!0}}))}var pv=G("<!> <!> <!>",1),bv=G("<!> <!> <!> <!> <!>",1),_v=G("<div><!></div>"),wv=G('<div class="wrapper svelte-1di9qjd"><div class="plot-container svelte-1di9qjd" role="tooltip"><!></div> <div class="msg-select svelte-1di9qjd">click inside the plot to see a variable label</div> <div class="plot-controls svelte-1di9qjd"><div><!></div> <!></div></div>');function Za(t,e){_e(e,!0);let r=q(e,"outliers",19,()=>[]),s=q(e,"model_getter",3,St),o=q(e,"res_getter",3,or),a=ee("residual"),c=ee(-1);const u=y(()=>e.res?Object.keys(e.res):null);let f=ee(ze(l(u)?l(u)[0]:null));function d(K){if(K.target.tagName!=="rect"){I(c,-1);return}const Z=Array.from(K.target.parentNode.children).indexOf(K.target);if(Z<0){I(c,-1);return}l(c)!==Z&&I(c,Z,!0)}const v=y(()=>{if(!e.model)return null;const K=e.model.nresp?e.model.nresp:0,Z=Ze(e.model.varvalues.filter((Se,Me)=>Me>=K)),le=Z.length,re=(Z.v[1]-Z.v[0])/2,ve=(Z.v[le-1]-Z.v[le-2])/2,pe=[Z.v[0],Z.v[le-1]],Re=[pe[0]-re,pe[1]+ve],Te=(pe[1]-pe[0])/le;return{values:Z,lim:Re,width:Te,hwidth:Te*.5}}),h=y(()=>l(v)?l(v).values.apply(K=>K-l(v).hwidth):null),m=y(()=>l(f)?e.res[l(f)]:null),g=y(()=>l(m)?new Pe(o()(l(m),"T"),l(m).nrows,l(m).ncomp):null),b=y(()=>l(m)?new Pe(o()(l(m),"E"),l(m).nrows,l(m).npred).t():null),_=y(()=>e.model?new Pe(s()(e.model,"P"),e.model.npred?e.model.npred:e.model.ncols,e.model.ncomp):null),p=y(()=>e.ncomp?Ue.seq(1,e.ncomp):null),w=y(()=>e.ncomp<e.model.ncomp?Ue.seq(e.ncomp+1,e.model.ncomp):null),S=y(()=>l(g)&&l(p)?l(g).subset(null,l(p)):null),E=y(()=>l(g)&&l(p)?l(_).subset(null,l(p)):null),k=y(()=>l(g)&&l(w)?l(g).subset(null,l(w)):null),A=y(()=>l(g)&&l(w)?l(_).subset(null,l(w)):null),j=y(()=>l(S)&&l(E)?da(l(E),l(S)):null),N=y(()=>l(k)&&l(A)?da(l(A),l(k)).add(l(b)):l(b)),R=y(()=>l(j)&&l(N)?l(j).add(l(N)):null);let L=y(()=>l(j)?l(j).getcolumn(e.selected+1):null),T=y(()=>l(N)?l(N).getcolumn(e.selected+1):null),M=y(()=>l(R)?l(R).getcolumn(e.selected+1):null),P=y(()=>{if(!l(L)||!l(T)||!l(M))return null;const K=l(a)==="explained"?{all:l(j),sel:l(L),label:"Explained part, TP^T"}:l(a)==="residual"?{all:l(N),sel:l(T),label:"Residuals, E"}:{all:l(R),sel:l(M),label:"Preprocessed data, X"},Z=Rr(K.all.v),le=Z[1]-Z[0],re=[Z[0]-le/50,Z[1]+le/12],ve=xe.fill(Z[1],K.sel.length);return K.lim=re,K.top=ve,K.height=le,K});const B=y(()=>l(v)&&l(c)>=0?l(v).values.v[l(c)]:null),V=y(()=>l(P)&&l(c)>=0?l(P).sel.v[l(c)]:null),z=y(()=>e.model&&l(c)>=0?e.model.varlabels[l(c)]:null),H=y(()=>l(m)&&e.selected>=0?`Object ${l(m).objlabels[e.selected].replace("_","-")}`:null),oe=y(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var U=ge(),Q=X(U);{var ne=K=>{Is(K,{get closeModal(){return e.closeModal},children:(Z,le)=>{var re=wv(),ve=D(re);ve.__click=d;var pe=D(ve);dn(pe,{get title(){return l(H)},get yLabel(){return l(P).label},get xLabel(){return l(oe)},get limY(){return l(P).lim},get limX(){return l(v).lim},fileName:"plot-contributions",children:(Ce,Ee)=>{var se=bv(),ae=X(se);Da(ae,{get xValues(){return l(v).values},get yValues(){return l(P).all},lineColor:"#e0e0e0"});var te=F(ae,2);{var de=qe=>{var W=ge(),J=X(W);Qe(J,17,r,et,($,ce)=>{{let ue=y(()=>l(P).all.getcolumn(l(ce)+1));Br($,{get xValues(){return l(v).values},get yValues(){return l(ue)},lineColor:"#ffdd88"})}}),C(qe,W)};Y(te,qe=>{r().length>0&&qe(de)})}var be=F(te,2);Br(be,{get xValues(){return l(v).values},get yValues(){return l(P).sel},lineColor:"crimson"});var he=F(be,2);yl(he,{get left(){return l(h)},get top(){return l(P).top},get height(){return l(P).height},get width(){return l(v).width},faceColor:"transparent",borderColor:"transparent"});var Fe=F(he,2);{var Ie=qe=>{var W=pv(),J=X(W);{let ue=y(()=>[l(B)]),me=y(()=>[l(P).top.v[0]]),Oe=y(()=>[l(z)]);An(J,{get xValues(){return l(ue)},get yValues(){return l(me)},get labels(){return l(Oe)},pos:3,textSize:.85})}var $=F(J,2);{let ue=y(()=>[l(B)]),me=y(()=>[l(V)]);Ls($,{get xValues(){return l(ue)},get yValues(){return l(me)},faceColor:"crimson",lineColor:"crimson"})}var ce=F($,2);{let ue=y(()=>[l(h).v[l(c)]]),me=y(()=>[l(P).top.v[l(c)]]);yl(ce,{get left(){return l(ue)},get top(){return l(me)},get height(){return l(P).height},get width(){return l(v).width},faceColor:"#ff000015"})}C(qe,W)};Y(Fe,qe=>{l(c)>=0&&qe(Ie)})}C(Ce,se)},$$slots:{default:!0}});var Re=F(ve,4),Te=D(Re),Se=D(Te);fe(Se,{label:"Show",children:(Ce,Ee)=>{$e(Ce,{id:"type",options:["full","explained","residual"],get value(){return l(a)},set value(se){I(a,se,!0)}})},$$slots:{default:!0}});var Me=F(Te,2);{var je=Ce=>{var Ee=_v(),se=D(Ee);fe(se,{label:"For",children:(ae,te)=>{$e(ae,{id:"type",get options(){return l(u)},get value(){return l(f)},set value(de){I(f,de,!0)}})},$$slots:{default:!0}}),C(Ce,Ee)};Y(Me,Ce=>{l(u).length>1&&Ce(je)})}C(Z,re)},$$slots:{default:!0}})};Y(Q,K=>{l(v)&&l(P)&&K(ne)})}C(t,U),we()}lt(["click"]);function yv(t,e){let r=0,s=0;t.nresp>0&&(r=new xe(t.values.v.slice(0,t.nresp*t.values.nrows-1)),s=t.nresp);const o=new Pe(t.values.v.slice(s*t.values.nrows),t.values.nrows,t.values.ncols-s).t(),a=o.ncols<e?1:Math.round(o.ncols/e),c=Ue.seq(1,o.ncols,a),u=o.subset(null,c),f=r?r.subset(c):null,d=t.classes?t.classes.filter((v,h)=>c.v.includes(h)):null;return{classNames:t.classNames,classes:d,resp:f,values:u,varvalues:t.varvalues.filter((v,h)=>h>=s),varindices:t.varindices.filter((v,h)=>h>=s),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function qs(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function xv(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}var Ev=G('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function Os(t,e){_e(e,!0);var r=ge(),s=X(r);{var o=c=>{var u=Ev(),f=D(u),d=F(f),v=D(d);ht(v,()=>Eu(e.prepmodel)),ie(()=>ke(f,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),C(c,u)},a=c=>{var u=yc("skipped");C(c,u)};Y(s,c=>{e.prepmodel.ml?c(o):c(a,!1)})}C(t,r),we()}var kv=G('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),Sv=G('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Av(t,e){_e(e,!0);var r=ge(),s=X(r);{var o=a=>{fe(a,{name:"info",children:(c,u)=>{var f=Sv(),d=X(f),v=F(D(d),3);{var h=p=>{var w=kv(),S=F(X(w),2),E=D(S);ie(()=>{O(S,"title",e.model.fileName),ke(E,e.model.fileName)}),C(p,w)};Y(v,p=>{e.model.fileName&&p(h)})}var m=F(v),g=F(m,3);Os(g,{get prepmodel(){return e.model}});var b=F(d,2);{var _=p=>{ar(p,{get onclick(){return e.reset}})};Y(b,p=>{e.reset&&p(_)})}ie(()=>ke(m,` ${e.model.npred??""} `)),C(c,f)},$$slots:{default:!0}})};Y(s,a=>{e.model&&a(o)})}C(t,r),we()}var Cv=G("<!> <!>",1),Nv=G("<p><!></p>"),Tv=G("<!> <!>",1);function Mv(t,e){_e(e,!0);let r=q(e,"model",15),s=ee(""),o=ee("neutral"),a=ee("");function c(p){try{const w=JSON.parse(p,ps);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");w.fileName=l(d),r(w),I(o,"success"),I(a,"")}catch(w){console.log(w),r(null),I(o,"error"),I(a,w,!0)}}function u(p){const w=new FileReader;w.onload=()=>{c(w.result)},w.readAsText(l(s))}function f(){I(s,""),r(null),I(o,"neutral"),I(a,"")}ye(()=>{l(s)===null?(r(null),I(o,"neutral"),I(a,"")):(I(o,"neutral"),I(a,""))}),ye(()=>{(r()===null||r()===0)&&I(s,"")});let d=y(()=>l(s)?l(s).name.replace(/\.[^/.]+$/,""):"");var v=Tv(),h=X(v);{var m=p=>{var w=Cv(),S=X(w);En(S,()=>l(s),A=>{fe(A,{name:"file-selector",children:(j,N)=>{bl(j,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(s)},set file(R){I(s,R,!0)}})},$$slots:{default:!0}})});var E=F(S,2);{var k=A=>{fe(A,{name:"load-button",label:" ",children:(j,N)=>{ot(j,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(E,A=>{l(s)&&A(k)})}C(p,w)},g=p=>{Av(p,{get model(){return r()},reset:f})};Y(h,p=>{r()?p(g,!1):p(m)})}var b=F(h,2);{var _=p=>{fe(p,{name:"error",status:"error",children:(w,S)=>{var E=Nv(),k=D(E);ht(k,()=>l(a)),C(w,E)},$$slots:{default:!0}})};Y(b,p=>{(l(o)==="error"||l(a))&&p(_)})}C(t,v),we()}var Pv=G('<p class="title"> </p>'),jv=G("<!>&nbsp;",1),Lv=G("<!> <!>",1),Rv=G('<div class="method-open svelte-10os93"><!> <!> <!></div>'),Iv=G('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function Nn(t,e){_e(e,!0);let r=q(e,"cancel",3,null);var s=ge(),o=X(s);{var a=u=>{var f=Rv(),d=D(f);fe(d,{children:(m,g)=>{var b=Pv(),_=D(b);ie(()=>ke(_,e.title)),C(m,b)},$$slots:{default:!0}});var v=F(d,2);yr(v,()=>e.children);var h=F(v,2);fe(h,{label:" ",children:(m,g)=>{var b=Lv(),_=X(b);{var p=S=>{var E=jv(),k=X(E);ot(k,{text:"Cancel",get onclick(){return r()}}),C(S,E)};Y(_,S=>{r()&&S(p)})}var w=F(_,2);ot(w,{text:"Save",get onclick(){return e.apply}}),C(m,b)},$$slots:{default:!0}}),Wo(3,f,()=>Wa,()=>({duration:10})),C(u,f)},c=u=>{fe(u,{children:(f,d)=>{var v=Iv(),h=X(v),m=D(h),g=F(m);g.__click=()=>e.open(e.pos);var b=D(g),_=F(h,2);Yu(_,{onclick:()=>e.moveUp(e.pos)});var p=F(_,2);Wu(p,{onclick:()=>e.moveDown(e.pos)});var w=F(p,2);ar(w,{onclick:()=>e.remove(e.pos)}),ie(()=>{ke(m,`${e.title??""} `),ke(b,e.settings)}),C(f,v)},$$slots:{default:!0}})};Y(o,u=>{e.isOpen?u(a):u(c,!1)})}C(t,s),we()}lt(["click"]);var zv=G("<!> <!>",1);function Fv(t,e){_e(e,!0);let r=q(e,"params",31,()=>ze([0,0])),s=q(e,"varind",15),o=q(e,"settings",15),a=q(e,"nvars",3,0),c=nn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const u={snv:0,area:1,length:2,var:3},f=Object.keys(u);let d=ee(ze(f[r()[0]])),v=ee(r()[1]+1);const h="Normalization";ye(()=>{o(l(d)+(l(d)==="var"?" #"+l(v):""))}),ye(()=>{l(d)==="var"?s(s()[0]=r()[1]>0?r()[1]:1,!0):s(s()[0]=-1,!0)}),ye(()=>{l(d)==="var"&&e.isOpen?s(s()[0]=r()[1],!0):s(s()[0]=-1,!0)}),ye(()=>{l(d)&&r(r()[0]=u[l(d)],!0)}),ye(()=>{l(v)&&r(r()[1]=l(v)-1,!0)}),Nn(t,Lr({id:"norm",title:h,get settings(){return o()},get isOpen(){return e.isOpen}},()=>c,{children:(m,g)=>{var b=zv(),_=X(b);fe(_,{label:"Type",children:(S,E)=>{$e(S,{get options(){return f},get value(){return l(d)},set value(k){I(d,k,!0)}})},$$slots:{default:!0}});var p=F(_,2);{var w=S=>{fe(S,{label:"Variable index",children:(E,k)=>{Dt(E,{min:1,get max(){return a()},step:1,get value(){return l(v)},set value(A){I(v,A,!0)}})},$$slots:{default:!0}})};Y(p,S=>{l(d)==="var"&&S(w)})}C(m,b)},$$slots:{default:!0}})),we()}var qv=G("<!> <!> <!>",1);function Ov(t,e){_e(e,!0);let r=q(e,"params",31,()=>ze([3,1,0])),s=q(e,"settings",15),o=nn(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const a=y(()=>{if(!e.nvars)return 3;const d=Math.round(e.nvars*.25);return d>39?39:d%2<1?d+1:d}),c=y(()=>r()[1]<2?[0,1]:[0,1,2]),u=y(()=>r()[0]<5?[1,2]:[1,2,3]);ye(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),ye(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),ye(()=>{s(r()[0]+", "+r()[1]+", "+r()[2])}),Nn(t,Lr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>o,{children:(d,v)=>{var h=qv(),m=X(h);fe(m,{label:"Width",children:(_,p)=>{Dt(_,{min:3,get max(){return l(a)},step:2,get value(){return r()[0]},set value(w){r(r()[0]=w,!0)}})},$$slots:{default:!0}});var g=F(m,2);fe(g,{label:"Polynomial",children:(_,p)=>{$e(_,{get options(){return l(u)},get value(){return r()[1]},set value(w){r(r()[1]=w,!0)}})},$$slots:{default:!0}});var b=F(g,2);fe(b,{label:"Derivative",children:(_,p)=>{$e(_,{get options(){return l(c)},get value(){return r()[2]},set value(w){r(r()[2]=w,!0)}})},$$slots:{default:!0}}),C(d,h)},$$slots:{default:!0}})),we()}var Bv=G("<!> <!>",1);function Vv(t,e){_e(e,!0);let r=q(e,"params",31,()=>ze([1,0]));q(e,"varind",27,()=>-1);let s=q(e,"settings",15);q(e,"nvars",3,0);let o=nn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},u=Object.keys(a),f=Object.keys(c);let d=ee(ze(u[r()[0]])),v=ee(ze(f[r()[1]]));const h="Scaling";ye(()=>{s(l(d)+"/"+l(v))}),ye(()=>{l(d)&&r(r()[0]=a[l(d)],!0)}),ye(()=>{l(v)&&r(r()[1]=c[l(v)],!0)}),Nn(t,Lr({id:"scale",title:h,get settings(){return s()}},()=>o,{children:(m,g)=>{var b=Bv(),_=X(b);fe(_,{label:"Center",children:(w,S)=>{$e(w,{get options(){return u},get value(){return l(d)},set value(E){I(d,E,!0)}})},$$slots:{default:!0}});var p=F(_,2);fe(p,{label:"Scale",children:(w,S)=>{$e(w,{get options(){return f},get value(){return l(v)},set value(E){I(v,E,!0)}})},$$slots:{default:!0}}),C(m,b)},$$slots:{default:!0}})),we()}var Dv=G("<!> <!> <!>",1),Yv=G("<!> <!> <!>",1);function Wv(t,e){_e(e,!0);let r=q(e,"params",31,()=>ze([0,1,.1]));q(e,"varind",27,()=>-1);let s=q(e,"settings",15,"");q(e,"nvars",3,0);let o=nn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Baseline correction",c={emsc:0,als:1},u=Object.keys(c);function f(b){const _=Math.ceil(Math.log10(b));return Math.pow(10,_)}let d=ee(ze(u[r()[0]])),v=ee(ze(r()[2]>0?f(r()[2]).toString():"0.1")),h=y(()=>parseFloat(l(v))),m=y(()=>l(h)/10),g=y(()=>Math.ceil(-Math.log10(l(h)))+1);ye(()=>{if(l(d)!=="als")return;const b=parseFloat(l(v));(r()[2]<l(m)||r()[2]>b-l(m))&&r(r()[2]=l(m),!0)}),ye(()=>{s(l(d)+" ("+(l(d)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),ye(()=>{l(d)&&r(r()[0]=c[l(d)],!0)}),Nn(t,Lr({id:"scale",title:a,get settings(){return s()}},()=>o,{children:(b,_)=>{var p=Yv(),w=X(p);fe(w,{label:"Type",children:(j,N)=>{$e(j,{get options(){return u},get value(){return l(d)},set value(R){I(d,R,!0)}})},$$slots:{default:!0}});var S=F(w,2);{var E=j=>{var N=Dv(),R=X(N);fe(R,{label:"Lambda",children:(M,P)=>{Un(M,{min:1,max:7,step:.1,get value(){return r()[1]},set value(B){r(r()[1]=B,!0)}})},$$slots:{default:!0}});var L=F(R,2);fe(L,{label:"Penalty range",children:(M,P)=>{$e(M,{options:["1","0.1","0.01"],get value(){return l(v)},set value(B){I(v,B,!0)}})},$$slots:{default:!0}});var T=F(L,2);fe(T,{label:"Penalty",children:(M,P)=>{{let B=y(()=>l(h)-l(m));Un(M,{get min(){return l(m)},get max(){return l(B)},get step(){return l(m)},get decNum(){return l(g)},get value(){return r()[2]},set value(V){r(r()[2]=V,!0)}})}},$$slots:{default:!0}}),C(j,N)};Y(S,j=>{l(d)==="als"&&j(E)})}var k=F(S,2);{var A=j=>{fe(j,{label:"Polynomial",children:(N,R)=>{Dt(N,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(L){r(r()[1]=L,!0)}})},$$slots:{default:!0}})};Y(k,j=>{l(d)==="emsc"&&j(A)})}C(b,p)},$$slots:{default:!0}})),we()}var Uv=G("<!> <!>",1);function Hv(t,e){_e(e,!0);let r=q(e,"params",15),s=q(e,"varind",15),o=q(e,"settings",15),a=nn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let u=ee(!1);const f=y(()=>e.nvars?Math.round(e.nvars*.1):1);ye(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-l(f))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+l(f))&&r(r()[1]=e.right,!0),s(s()[1]=r()[0],!0),s(s()[2]=r()[1],!0),I(u,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),I(u,!1))}),ye(()=>{o("left: "+r()[0]+" right: "+r()[1])}),Nn(t,Lr({id:"norm",title:c,get settings(){return o()},get isOpen(){return e.isOpen}},()=>a,{children:(d,v)=>{var h=ge(),m=X(h);{var g=b=>{var _=Uv(),p=X(_);fe(p,{label:"Left",children:(S,E)=>{{let k=y(()=>e.right-l(f));Un(S,{get min(){return e.left},get max(){return l(k)},step:1,decNum:0,get value(){return r()[0]},set value(A){r(r()[0]=A,!0)}})}},$$slots:{default:!0}});var w=F(p,2);fe(w,{label:"Right",children:(S,E)=>{{let k=y(()=>e.left+l(f));Un(S,{get min(){return l(k)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(A){r(r()[1]=A,!0)}})}},$$slots:{default:!0}}),C(b,_)};Y(m,b=>{l(u)&&b(g)})}C(d,h)},$$slots:{default:!0}})),we()}var Gv=G("<!> <!>",1);function Xv(t,e){_e(e,!0);let r=q(e,"params",31,()=>ze([3,5]));q(e,"varind",27,()=>-1);let s=q(e,"settings",15);q(e,"nvars",3,0);let o=nn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Spike removal";ye(()=>{s(r()[0]+"/"+r()[1])}),Nn(t,Lr({id:"scale",title:a,get settings(){return s()}},()=>o,{children:(c,u)=>{var f=Gv(),d=X(f);fe(d,{label:"Window",children:(h,m)=>{Dt(h,{min:3,max:15,step:2,get value(){return r()[0]},set value(g){r(r()[0]=g,!0)}})},$$slots:{default:!0}});var v=F(d,2);fe(v,{label:"Threshold",children:(h,m)=>{Dt(h,{min:3,max:50,get value(){return r()[1]},set value(g){r(r()[1]=g,!0)}})},$$slots:{default:!0}}),C(c,f)},$$slots:{default:!0}})),we()}var Kv=G("<h2>Selected methods</h2> <!>",1),Jv=G("<p>No methods selected</p>"),Qv=G("<p> </p>"),Zv=G("<h2>Available methods</h2>"),$v=G("<p>Maximum number of methods is selected.</p>"),e1=G("<p> </p> <!>",1),t1=G('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function r1(t,e){_e(e,!0);let r=q(e,"prepobj",31,()=>ze([])),s=q(e,"meta",15),o=q(e,"varind",31,()=>-1),a=q(e,"rawdataShort",15),c=q(e,"prepdataShort",15),u=q(e,"prepmodel",3,null),f=q(e,"reset",3,null),d=q(e,"finalize",3,null);const v=30,h=8,m={savgol:Ov,norm:Fv,scale:Vv,baseline:Wv,trim:Hv,spikes:Xv};let g=ee("neutral"),b=ee(""),_=ee(void 0),p=ee(""),w=ee(ze([])),S=ee(!1),E=ee(ze([])),k=ee(ze([]));s(new Array(h).fill(""));const A=y(()=>e.rawdata.values.ncols-e.rawdata.nresp);let j=ze(e.rawdata.values.nrows<3?Object.keys(m).filter(se=>se!=="scale"):Object.keys(m));R(),r().length!==0&&N();async function N(){r().length!==0&&I(_,e.WASM().then(se=>{I(g,"applying");const ae=wa(se,a().values,0,r(),!0,[]),te=vs(se,a().values,0,ae,!0);c(qs(a(),te)),I(g,"success")}).catch(se=>{c(qs(a())),console.error(se),I(g,"error"),I(b,se,!0)}),!0)}function R(){const se=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(se),I(E,[],!0),I(k,[],!0);return}let ae=[],te=[],de=0,be=se;for(let he of r())he.id==="trim"?(ae.push(de),te.push(be),he.params[0]<de&&(he.params[0]=de),he.params[1]>be&&(he.params[1]=be),de=he.params[0]>de?he.params[0]:de,be=he.params[1]>0&&he.params[1]<be?he.params[1]:be):(ae.push(de),te.push(be));I(E,ae,!0),I(k,te,!0),e.setLeft(de),e.setRight(be)}function L(se){const ae=qr.find(te=>te.id===se);ae&&(l(E).push(e.left),l(k).push(e.right),r().push({id:ae.id,params:ae.mp}),I(S,!0),I(p,r().length-1))}function T(){r().length<1||(l(E).pop(),l(k).pop(),r().pop(),I(S,!1),I(p,-1))}function M(se){if(se<=0)return;const ae=r()[se],te=r()[se-1];r(r()[se-1]=ae,!0),r(r()[se]=te,!0),H()}function P(se){if(se<0||se===r().length-1)return;const ae=r()[se],te=r()[se+1];r(r()[se+1]=ae,!0),r(r()[se]=te,!0),H()}function B(se){se<0||se>=r().length||(r(r().filter((ae,te)=>te!==se)),H())}function V(se){I(p,se,!0)}function z(){I(p,null)}function H(){I(g,"neutral"),I(b,""),I(S,!1),I(p,null),u()&&f()(),R(),N(),o(o()[1]=-1,!0),o(o()[2]=-1,!0)}ye(()=>{e.rawdata&&!a()&&a(yv(e.rawdata,v))}),ye(()=>{a()&&!c()&&c(qs(a()))}),ye(()=>{(!r()||r().length===0)&&(I(w,[],!0),c(null),I(E,[],!0),I(k,[],!0),I(p,""),s(new Array(h).fill("")))});var oe=t1(),U=X(oe);let Q;var ne=D(U);fe(ne,{label:"",children:(se,ae)=>{var te=Kv(),de=F(X(te),2);{var be=he=>{Aa(he,{text:"edit",get onclick(){return f()}})};Y(de,he=>{u()&&f()&&he(be)})}C(se,te)},$$slots:{default:!0}});var K=F(ne,2);{var Z=se=>{fe(se,{label:"",children:(ae,te)=>{var de=Jv();C(ae,de)},$$slots:{default:!0}})},le=se=>{var ae=ge(),te=X(ae);Qe(te,17,r,et,(de,be,he)=>{const Fe=y(()=>m[l(be).id]);var Ie=ge(),qe=X(Ie);{var W=$=>{var ce=ge(),ue=X(ce);{let me=y(()=>he===l(p)),Oe=y(()=>l(S)?T:null);Bn(ue,()=>l(Fe),(Be,De)=>{De(Be,{get isOpen(){return l(me)},get left(){return l(E)[he]},get right(){return l(k)[he]},pos:he,get nvars(){return l(A)},moveUp:M,moveDown:P,apply:H,open:V,close:z,remove:B,get cancel(){return l(Oe)},get params(){return l(be).params},set params(Ye){l(be).params=Ye},get varind(){return o()},set varind(Ye){o(Ye)},get settings(){return s()[he]},set settings(Ye){s(s()[he]=Ye,!0)}})})}C($,ce)},J=$=>{var ce=ge(),ue=X(ce);{let me=y(()=>he===l(p)),Oe=y(()=>l(S)?T:null);Bn(ue,()=>l(Fe),(Be,De)=>{De(Be,{pos:he,get isOpen(){return l(me)},get left(){return l(E)[he]},get right(){return l(k)[he]},get nvars(){return l(A)},moveUp:M,moveDown:P,apply:H,open:V,close:z,remove:B,get cancel(){return l(Oe)},get params(){return l(be).params},set params(Ye){l(be).params=Ye},get settings(){return s()[he]},set settings(Ye){s(s()[he]=Ye,!0)}})})}C($,ce)};Y(qe,$=>{l(be).id==="norm"||l(be).id==="trim"?$(W):$(J,!1)})}C(de,Ie)}),C(se,ae)};Y(K,se=>{r().length===0?se(Z):se(le,!1)})}var re=F(K,2);{var ve=se=>{fe(se,{status:"error",children:(ae,te)=>{var de=Qv(),be=D(de);ie(()=>ke(be,l(b))),C(ae,de)},$$slots:{default:!0}})};Y(re,se=>{(l(g)==="error"||l(b))&&se(ve)})}var pe=F(U,2),Re=D(pe);{var Te=se=>{fe(se,{label:" ",children:(ae,te)=>{ot(ae,{get onclick(){return d()},text:"Finalize"})},$$slots:{default:!0}})};Y(Re,se=>{!u()&&!l(p)&&r().length>0&&se(Te)})}var Se=F(pe,2),Me=D(Se);fe(Me,{label:"",children:(se,ae)=>{var te=Zv();C(se,te)},$$slots:{default:!0}});var je=F(Me,2);{var Ce=se=>{fe(se,{label:"",children:(ae,te)=>{var de=$v();C(ae,de)},$$slots:{default:!0}})},Ee=se=>{var ae=ge(),te=X(ae);Qe(te,17,()=>j,et,(de,be)=>{const he=y(()=>qr.find(Fe=>Fe.id===l(be)));fe(de,{children:(Fe,Ie)=>{var qe=e1(),W=X(qe),J=D(W),$=F(W,2);Du($,{onclick:()=>L(l(he).id)}),ie(()=>ke(J,l(he).title)),C(Fe,qe)},$$slots:{default:!0}})}),C(se,ae)};Y(je,se=>{r().length>=h?se(Ce):se(Ee,!1)})}ie(()=>Q=it(U,1,"selected-methods-list svelte-9cg1zq",null,Q,{final:u()!==null&&u()!==void 0})),C(t,oe),we()}var n1=G("<!> <!>",1),l1=G("<!> <!>",1),s1=G("<!> <!>",1),o1=G("<!> <!> <!> <!> <!> <!> <!> <!>",1),a1=G("<h2>Plot settings</h2>"),i1=G('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),c1=G('<div class="plot-panel svelte-5p9gcx"><!></div>');function u1(t,e){_e(e,!0);let r=ee(!0),s=ee("none"),o=ee(!1);const a=y(()=>(l(r)?"Preprocessed":"Raw")+" data (selected rows)"),c=y(()=>l(r)&&e.prepdata?e.prepdata:e.rawdata),u=y(()=>l(c)?l(c).varaxisLabel:"Variables"),f=y(()=>e.rawdata.varaxisUnits),d=y(()=>e.left>=0||e.right>0&&e.right<l(c).values.nrows),v=y(()=>e.left>=0?e.left+1:1),h=y(()=>e.right>0&&e.right<l(c).values.nrows?e.right:l(c).values.nrows),m=y(()=>l(r)&&l(c)&&l(d)?Ue.seq(l(v),l(h)):null),g=y(()=>l(m)?l(c).varvalues.filter((R,L)=>L>=l(v)-1&&L<l(h)):l(c).varvalues),b=y(()=>l(m)?l(c).values.subset(l(m),null):l(c).values),_=y(()=>l(b)?Zl(l(b).v):null),p=y(()=>l(_)?(l(_)[1]-l(_)[0])*.05:null),w=y(()=>l(_)?[l(_)[0],l(_)[1]+(l(s)!=="none")*l(p)]:[0,1]),S=y(()=>l(c)?Zl(l(c).varvalues,l(o)?.005:.1):[0,1]),E=y(()=>l(o)&&l(d)?[l(c).varvalues[l(v)-1],l(c).varvalues[l(h)-1]]:l(S)),k=y(()=>{if(!e.rawdata)return null;const R={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const L=wl(e.rawdata.classNames.length);R.groups={colors:e.rawdata.classes.map(T=>L[e.rawdata.classNames.findIndex(M=>M===T)]),breaks:Sr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:L}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const L=Qo(e.rawdata.resp,8),T=wl(L.length-1);R.response={colors:Xa(e.rawdata.resp.v,L.v,T),labels:null,breaks:L,map:T}}return R});ye(()=>{(e.left<1||e.right<1||e.right>=e.left)&&I(o,!1)});var A=c1(),j=D(A);{var N=R=>{var L=i1(),T=X(L),M=D(T),P=D(M);Va(P,{get title(){return l(a)},get limY(){return l(w)},get limX(){return l(E)},fileName:"plot-preprocessed",children:(ne,K)=>{var Z=o1(),le=X(Z);{var re=te=>{Da(te,{get xValues(){return l(g)},get yValues(){return l(b)}})},ve=te=>{var de=ge(),be=X(de);Qe(be,17,()=>l(k)[l(s)].colors,et,(he,Fe,Ie)=>{{let qe=y(()=>l(b).getcolumn(Ie+1));Br(he,{get xValues(){return l(g)},get yValues(){return l(qe)},get lineColor(){return l(Fe)}})}}),C(te,de)};Y(le,te=>{l(s)==="none"?te(re):te(ve,!1)})}var pe=F(le,2);{var Re=te=>{const de=y(()=>l(c).varvalues[e.varind[0]]);var be=n1(),he=X(be);{let Ie=y(()=>[l(de),l(de)]);Br(he,{get xValues(){return l(Ie)},get yValues(){return l(w)},lineColor:"#00000060"})}var Fe=F(he,2);{let Ie=y(()=>[l(de)]),qe=y(()=>[l(w)[1]-l(p)*(l(s)==="none"?1:2)]),W=y(()=>Or(l(de).toFixed(2)+" "+l(f)));An(Fe,{get xValues(){return l(Ie)},get yValues(){return l(qe)},get labels(){return l(W)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(te,be)};Y(pe,te=>{e.varind&&e.varind[0]>0&&te(Re)})}var Te=F(pe,2);{var Se=te=>{const de=y(()=>l(c).varvalues[e.varind[1]]);var be=l1(),he=X(be);{let Ie=y(()=>[l(E)[0]]),qe=y(()=>[l(c).varvalues[e.varind[1]]-l(E)[0]]),W=y(()=>[l(w)[1]]),J=y(()=>[l(w)[1]-l(w)[0]]);yl(he,{get left(){return l(Ie)},get width(){return l(qe)},get top(){return l(W)},get height(){return l(J)},lineColor:"transparent",faceColor:"#00000040"})}var Fe=F(he,2);{let Ie=y(()=>[l(de)]),qe=y(()=>[l(w)[1]-l(p)*(l(s)==="none"?1:2)]),W=y(()=>Or(l(de).toFixed(2)+" "+l(f)));An(Fe,{get xValues(){return l(Ie)},get yValues(){return l(qe)},get labels(){return l(W)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(te,be)};Y(Te,te=>{e.varind&&e.varind[1]>0&&te(Se)})}var Me=F(Te,2);{var je=te=>{const de=y(()=>l(c).varvalues[e.varind[2]-1]);var be=s1(),he=X(be);{let Ie=y(()=>[l(c).varvalues[e.varind[2]-1]]),qe=y(()=>[l(E)[1]-l(c).varvalues[e.varind[2]-1]]),W=y(()=>[l(w)[1]]),J=y(()=>[l(w)[1]-l(w)[0]]);yl(he,{get left(){return l(Ie)},get width(){return l(qe)},get top(){return l(W)},get height(){return l(J)},lineColor:"transparent",faceColor:"#00000040"})}var Fe=F(he,2);{let Ie=y(()=>[l(de)]),qe=y(()=>[l(w)[1]-l(p)*(l(s)==="none"?1:2)]),W=y(()=>Or(l(de).toFixed(2)+" "+l(f)));An(Fe,{get xValues(){return l(Ie)},get yValues(){return l(qe)},get labels(){return l(W)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(te,be)};Y(Me,te=>{e.varind&&e.varind[2]<l(c).varvalues.length&&e.varind[2]>0&&te(je)})}var Ce=F(Me,2);{let te=y(()=>l(s)!=="none");Ya(Ce,{get show(){return l(te)},get labels(){return l(k)[l(s)].labels},get breaks(){return l(k)[l(s)].breaks},get colmap(){return l(k)[l(s)].map}})}var Ee=F(Ce,2);Ms(Ee,{get label(){return l(u)},showGrid:!0});var se=F(Ee,2);Ps(se,{showGrid:!0});var ae=F(se,2);js(ae,{}),C(ne,Z)},$$slots:{default:!0}});var B=F(T,2),V=D(B);fe(V,{label:"",children:(ne,K)=>{var Z=a1();C(ne,Z)},$$slots:{default:!0}});var z=F(V,2);fe(z,{label:"Show",children:(ne,K)=>{zt(ne,{options:["raw","preprocessed"],get value(){return l(r)},set value(Z){I(r,Z,!0)}})},$$slots:{default:!0}});var H=F(z,2);{var oe=ne=>{fe(ne,{label:"Color by",children:(K,Z)=>{{let le=y(()=>Object.keys(l(k)));$e(K,{get options(){return l(le)},get value(){return l(s)},set value(re){I(s,re,!0)}})}},$$slots:{default:!0}})};Y(H,ne=>{Object.keys(l(k)).length>1&&ne(oe)})}var U=F(H,2);{var Q=ne=>{fe(ne,{label:"Zoom (x-axis)",children:(K,Z)=>{zt(K,{options:["off","on"],get value(){return l(o)},set value(le){I(o,le,!0)}})},$$slots:{default:!0}})};Y(U,ne=>{e.left>0&&e.right>e.left&&ne(Q)})}C(R,L)};Y(j,R=>{l(g)&&l(b)&&R(N)})}C(t,A),we()}var f1=G('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function d1(t,e){_e(e,!0);let r=q(e,"left",15),s=q(e,"right",15),o=q(e,"prepobj",15),a=q(e,"meta",15),c=q(e,"finalize",3,null),u=ee(ze([-1,0,0])),f=ee(null),d=ee(null);function v(E){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E>=0&&E<k&&E<s()&&r(E)}function h(E){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E<=k&&E>r()&&s(E)}var m=f1(),g=D(m),b=D(g),_=D(b);r1(_,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return r()},get right(){return s()},setLeft:v,",":!0,setRight:h,get finalize(){return c()},get varind(){return l(u)},set varind(E){I(u,E,!0)},get prepobj(){return o()},set prepobj(E){o(E)},get rawdataShort(){return l(f)},set rawdataShort(E){I(f,E,!0)},get prepdataShort(){return l(d)},set prepdataShort(E){I(d,E,!0)},get meta(){return a()},set meta(E){a(E)}});var p=F(g,2),w=D(p);{var S=E=>{u1(E,{get rawdata(){return l(f)},get prepdata(){return l(d)},get left(){return r()},get right(){return s()},get varind(){return l(u)}})};Y(w,E=>{l(f)&&E(S)})}C(t,m),we()}var v1=G('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),h1=G("<!> <!> <!>",1),m1=G('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),g1=G("<!> <!> <!>",1),p1=G("<p><strong>Preprocessing model</strong></p>"),b1=G("<!> <!>",1),_1=G("<p> </p>"),w1=G('<div class="prep-widget"><!></div> <!> <!>',1);function y1(t,e){_e(e,!0);let r=q(e,"prepType",15),s=q(e,"prepobj",15),o=q(e,"prepdata",15),a=q(e,"prepmodel",15),c=q(e,"prepmeta",15),u=ee(!1),f=ee(0),d=ee(ze(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),v=ee("neutral"),h=ee(""),m=ee(void 0);async function g(P,B,V){!B||!P||B.length===0||I(m,e.WASM().then(z=>{I(v,"applying");const H=wa(z,P.values,P.nresp,B,!1,V);H.info=c(),a(H)}).catch(z=>{a(null),console.error(z),I(v,"error"),I(h,z,!0)}),!0)}async function b(P,B){if(!B||typeof B!="object"){o(null);return}if(Object.keys(B).length===0){o(P);return}I(m,e.WASM().then(V=>{I(v,"applying");const z=vs(V,P.values,P.nresp,B,!1,!1),H=xv(Wi(P),z);o(ku(H,B))}).catch(V=>{o(null),console.error(V),I(v,"error"),I(h,V,!0)}),!0)}function _(){r(null),o(null),a(null),s([]),I(f,0),I(d,e.rawdata.values.ncols-e.rawdata.nresp)}function p(){s()&&s().length>0?g(e.rawdata,s(),e.outliers):(r(null),a(null)),I(u,!1)}function w(){r("create"),o(null),a(null),I(u,!0)}function S(){r("skip"),a({})}ye(()=>{a(),e.rawdata&&b(e.rawdata,a())}),ye(()=>{r()==="create"&&s()&&!a()&&g(e.rawdata,s(),e.outliers)}),ye(()=>{r()==="skip"&&o()===null&&(a({}),s([]),o(e.rawdata))});var E=w1(),k=X(E),A=D(k);{var j=P=>{fe(P,{name:"info",children:(B,V)=>{var z=h1(),H=X(z);{var oe=K=>{var Z=v1(),le=F(D(Z),2);Os(le,{get prepmodel(){return a()}}),C(K,Z)};Y(H,K=>{l(u)||K(oe)})}var U=F(H,2);{var Q=K=>{Aa(K,{onclick:w})};Y(U,K=>{r()==="create"&&K(Q)})}var ne=F(U,2);ar(ne,{onclick:_}),C(B,z)},$$slots:{default:!0}})},N=P=>{var B=ge(),V=X(B);{var z=oe=>{fe(oe,{name:"prep-info",children:(U,Q)=>{var ne=m1(),K=F(X(ne),2),Z=D(K);ar(Z,{onclick:_}),C(U,ne)},$$slots:{default:!0}})},H=oe=>{var U=ge(),Q=X(U);{var ne=Z=>{fe(Z,{label:"Preprocessing",name:"prep-container",children:(le,re)=>{var ve=g1(),pe=X(ve);ot(pe,{text:"Skip",onclick:S});var Re=F(pe,2);ot(Re,{text:"Load",onclick:()=>r("file")});var Te=F(Re,2);ot(Te,{text:"Create",onclick:w}),C(le,ve)},$$slots:{default:!0}})},K=Z=>{var le=ge(),re=X(le);{var ve=pe=>{var Re=b1(),Te=X(Re);fe(Te,{children:(Me,je)=>{var Ce=p1();C(Me,Ce)},$$slots:{default:!0}});var Se=F(Te,2);Mv(Se,{get model(){return a()},set model(Me){a(Me)},get prepobj(){return s()},set prepobj(Me){s(Me)},get left(){return l(f)},set left(Me){I(f,Me,!0)},get right(){return l(d)},set right(Me){I(d,Me,!0)}}),C(pe,Re)};Y(re,pe=>{r()==="file"&&pe(ve)},!0)}C(Z,le)};Y(Q,Z=>{r()?Z(K,!1):Z(ne)},!0)}C(oe,U)};Y(V,oe=>{r()==="skip"?oe(z):oe(H,!1)},!0)}C(P,B)};Y(A,P=>{a()&&o()&&a().ml?P(j):P(N,!1)})}var R=F(k,2);{var L=P=>{Is(P,{closeModal:p,isDark:!0,children:(B,V)=>{d1(B,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:p,get prepobj(){return s()},set prepobj(z){s(z)},get left(){return l(f)},set left(z){I(f,z,!0)},get right(){return l(d)},set right(z){I(d,z,!0)},get meta(){return c()},set meta(z){c(z)}})},$$slots:{default:!0}})};Y(R,P=>{l(u)&&P(L)})}var T=F(R,2);{var M=P=>{fe(P,{status:"error",children:(B,V)=>{var z=_1(),H=D(z);ie(()=>ke(H,l(h))),C(B,z)},$$slots:{default:!0}})};Y(T,P=>{(l(v)==="error"||l(h))&&P(M)})}C(t,E),we()}var x1=G('<div class="msg-select"> </div>'),E1=G('<div class="msg-select"> </div>'),k1=G('<div class="msg-select"> </div>'),S1=G('<div class="msg-select"> </div>'),A1=G('<div class="selected-buttons svelte-188sk7n"><!></div>'),C1=G('<div class="selected-buttons svelte-188sk7n"><!></div>'),N1=G("<!> <!> <!>",1),T1=G("<button> </button>"),M1=G('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function $a(t,e){_e(e,!0);let r=q(e,"selobjText",3,"Click to select an object..."),s=q(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),o=q(e,"clearText",3,"Click anywhere to remove selection..."),a=q(e,"params",15),c=ze({objects:-1,variables:[]}),u=ee(ze(Object.keys(e.plots)[0]));function f(L,T){c.objects=T?T[L]:L}function d(L){c.objects=-1}function v(L){c.variables=L}function h(L){c.variables=[]}let m={objects:{select:f,unselect:d},variables:{select:v,unselect:h},stats:{}},g=y(()=>l(u)?e.plots[l(u)]:null),b=y(()=>l(g)?l(g).component:null);var _=M1(),p=D(_),w=D(p),S=D(w);Bn(S,()=>l(b),(L,T)=>{T(L,{get params(){return a()[l(u)]},get callbacks(){return m[l(g).scope]},get selected(){return c[l(g).scope]},get props(){return e.props}})});var E=F(w,2),k=D(E);{var A=L=>{var T=ge(),M=X(T);{var P=V=>{var z=x1(),H=D(z);ie(()=>ke(H,r())),C(V,z)},B=V=>{var z=E1(),H=D(z);ie(()=>ke(H,o())),C(V,z)};Y(M,V=>{c[l(g).scope]<0?V(P):V(B,!1)})}C(L,T)};Y(k,L=>{l(g).scope==="objects"&&a()[l(u)].plotType!=="l"&&r().length>0&&L(A)})}var j=F(k,2);{var N=L=>{var T=ge(),M=X(T);{var P=V=>{var z=k1(),H=D(z);ie(()=>ke(H,s())),C(V,z)},B=V=>{var z=S1(),H=D(z);ie(()=>ke(H,o())),C(V,z)};Y(M,V=>{c[l(g).scope].length===0?V(P):V(B,!1)})}C(L,T)};Y(j,L=>{l(g).scope==="variables"&&a()[l(u)].plotType!=="l"&&s().length>0&&L(N)})}var R=F(p,2);Qe(R,21,()=>Object.keys(e.plots),et,(L,T)=>{var M=ge(),P=X(M);{var B=z=>{var H=N1(),oe=X(H);cf(oe,{get title(){return l(g).label},labelWidth:12,get options(){return e.controls[l(u)]},get value(){return a()[l(u)]},set value(Z){a(a()[l(u)]=Z,!0)}});var U=F(oe,2);{var Q=Z=>{var le=A1(),re=D(le);yr(re,()=>l(g).buttons,()=>c.objects),C(Z,le)};Y(U,Z=>{l(g).scope==="objects"&&l(g).buttons&&c.objects>=0&&Z(Q)})}var ne=F(U,2);{var K=Z=>{var le=C1(),re=D(le);yr(re,()=>l(g).buttons,()=>c.variables),C(Z,le)};Y(ne,Z=>{l(g).scope==="variables"&&l(g).buttons&&c.variables.length>0&&Z(K)})}C(z,H)},V=z=>{var H=T1();H.__keydown=()=>switchPlot(i),H.__click=()=>I(u,l(T),!0);var oe=D(H);ie(()=>{it(H,1,`plot-selector plot-selector-${l(T)??""}`,"svelte-188sk7n"),ke(oe,e.plots[l(T)].label)}),C(z,H)};Y(P,z=>{l(g)&&l(u)===l(T)?z(B):z(V,!1)})}C(L,M)}),C(t,_),we()}lt(["keydown","click"]);var P1=Ne("<text> </text>"),j1=Ne('<g class="series series-textlabels"></g>'),L1=Ne('<g class="series series-line"><polyline class="line"></polyline></g>'),R1=Ne("<rect></rect>"),I1=Ne('<g class="series series-bar"></g>'),z1=Ne("<text> </text>"),F1=Ne('<g class="series series-points series-points1"></g>'),q1=Ne('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),O1=Ne('<g class="series series-points series-points1"><text> </text></g>'),B1=Ne('<g class="series series-bar"><rect></rect></g>'),V1=Ne('<g class="series series-text"><text> </text></g>'),D1=Ne("<!><!><!>",1),Y1=Ne("<!><!><!><!><!>",1);function Dr(t,e){_e(e,!0);let r=q(e,"shortenLabels",3,!0),s=q(e,"lineWidth",3,1),o=q(e,"nBars",3,1),a=q(e,"barNum",3,1),c=q(e,"markerSize",3,null),u=q(e,"markerWidth",3,2),f=q(e,"marker",3,1),d=q(e,"colors",3,void 0),v=q(e,"filled",3,void 0),h=q(e,"mainColor",19,()=>Ar.cal),m=q(e,"faceColor",3,null),g=q(e,"lineColor",19,h),b=q(e,"selected",19,()=>-1),_=q(e,"maskSelected",3,!0),p=q(e,"xRange",15),w=q(e,"yRange",15),S=q(e,"ind",3,null);function E(ae){!e.callbacks||!e.callbacks.select||un(ae,ae.target.tagName,te=>e.callbacks.select(te,S()))}function k(ae){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const A=Lt("axes"),j=y(()=>Tt(e.xValues,"PlotSeries")),N=y(()=>l(j)?Tt(e.yValues,"PlotSeries",l(j).length):null);ye(()=>{if(S()){const ae=S().map(te=>te+1);p(l(j)?Rr(l(j).subset(ae)):null),w(l(N)?Rr(l(N).subset(ae)):null)}else p(l(j)?Rr(l(j)):null),w(l(N)?Rr(l(N)):null)});const R=y(()=>m()===null?e.plotType==="p"?"transparent":"white":m()),L=[1,.8,.8,.8,.8,.8,.8,.8],T=[.85,.65,.65,.65,.65,.65,.65,.65],M=y(()=>c()?c():e.plotType==="p"?L[f()-1]:T[f()-1]),P=y(()=>Sn[f()-1]),B=y(()=>xs[A.scales().plot]),V=y(()=>ut([0],A.tY())[0]),z=y(()=>Es([.8],A.tX())[0]),H=y(()=>e.plotType==="h"?l(z)/o():0),oe=y(()=>e.plotType==="h"?l(z)/2-(a()-1)*l(H):0),U=y(()=>l(B));let Q=y(()=>e.plotType==="l"||e.plotType==="b"?As(l(j),l(N),A.tX(),A.tY()):null),ne=y(()=>l(j)?ut(l(j),A.tX()):null),K=y(()=>l(N)?ut(l(N),A.tY()):null),Z=y(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(ae=>ae.slice(0,Xn)):e.labels:null);const le=y(()=>S()?S():Sr(0,l(ne).length-1));let re=y(()=>d()&&d().length===l(j).length?d():Array(l(j).length).fill(h())),ve=y(()=>v()&&v().length===l(j).length?v().map(ae=>ae?"ff":"30"):Array(l(j).length).fill("30")),pe=y(()=>d()&&d().length===l(j).length?d().map((ae,te)=>ae+l(ve)[te]):Array(l(j).length).fill(m()));const Re=y(()=>`font-size:${l(M)}em;fill:${l(R)};cursor:default;text-anchor:middle;stroke-width:${u()}px;user-select:none;`),Te=`font-size:0.85em;fill:${zs};cursor:default;text-anchor:middle;stroke:${zs};stroke-width:0.1px;user-select:none;`,Se=y(()=>`font-size:${l(M)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),Me=`fill:transparent;stroke-width:${s()}px;`,je=`stroke-width:${s()}px;stroke:${g()}`;ye(()=>{b()&&S()&&S().indexOf(b())<0&&e.callbacks.unselect()});var Ce=ge(),Ee=X(Ce);{var se=ae=>{var te=Y1(),de=X(te);{var be=ue=>{var me=j1();Qe(me,21,()=>l(le),et,(Oe,Be)=>{var De=P1(),Ye=D(De);ie(()=>{O(De,"opacity",l(Be)===b()),O(De,"x",l(ne)[l(Be)]-l(oe)+l(H)/2),O(De,"y",l(K)[l(Be)]),O(De,"dy",l(N).v[l(Be)]<0?l(U):-l(U)),ke(Ye,l(Z)[l(Be)])}),C(Oe,De)}),ie(()=>ct(me,Te+(b()>=0?"opacity:0.2;":""))),C(ue,me)};Y(de,ue=>{e.showLabels&&l(Z)&&ue(be)})}var he=F(de);{var Fe=ue=>{var me=L1(),Oe=D(me);ie(()=>{ct(me,Me),O(Oe,"points",l(Q)),O(Oe,"stroke",h())}),C(ue,me)};Y(he,ue=>{(e.plotType==="l"||e.plotType==="b")&&ue(Fe)})}var Ie=F(he);{var qe=ue=>{var me=I1();me.__click=E,Qe(me,21,()=>l(le),et,(Oe,Be)=>{var De=R1();ie(()=>{O(De,"x",l(ne)[l(Be)]-l(oe)),O(De,"y",l(N).v[l(Be)]<0?l(V):l(K)[l(Be)]),O(De,"fill",l(re)[l(Be)]),O(De,"width",l(H)),O(De,"height",l(N).v[l(Be)]<0?l(K)[l(Be)]-l(V):l(V)-l(K)[l(Be)])}),C(Oe,De)}),ie(()=>ct(me,je+(b()>=0?"opacity:0.2;":""))),C(ue,me)};Y(Ie,ue=>{e.plotType==="h"&&ue(qe)})}var W=F(Ie);{var J=ue=>{var me=F1();me.__click=E,Qe(me,21,()=>l(le),et,(Oe,Be)=>{var De=z1(),Ye=D(De);ie(()=>{O(De,"x",l(ne)[l(Be)]),O(De,"y",l(K)[l(Be)]),O(De,"fill",l(pe)[l(Be)]),O(De,"stroke",l(re)[l(Be)]),ke(Ye,l(P))}),C(Oe,De)}),ie(()=>ct(me,l(Re)+(b()>=0?"opacity:0.2;":""))),C(ue,me)};Y(W,ue=>{(e.plotType==="p"||e.plotType==="b")&&ue(J)})}var $=F(W);{var ce=ue=>{var me=D1(),Oe=X(me);{var Be=At=>{var mt=q1();O(mt,"x",0),O(mt,"y",0),mt.__click=k,C(At,mt)};Y(Oe,At=>{_()&&At(Be)})}var De=F(Oe);{var Ye=At=>{var mt=O1(),ft=D(mt),Ae=D(ft);ie(()=>{ct(mt,l(Se)),O(ft,"x",l(ne)[b()]),O(ft,"y",l(K)[b()]),O(ft,"stroke",l(re)[b()]),O(ft,"fill",l(pe)[b()]),ke(Ae,l(P))}),C(At,mt)},dt=At=>{var mt=B1(),ft=D(mt);ie(()=>{ct(mt,je),O(ft,"stroke",l(re)[b()]),O(ft,"fill",l(re)[b()]),O(ft,"x",l(ne)[b()]-l(oe)),O(ft,"y",l(N).v[b()]<0?l(V):l(K)[b()]),O(ft,"width",l(H)),O(ft,"height",l(N).v[b()]<0?l(K)[b()]-l(V):l(V)-l(K)[b()])}),C(At,mt)};Y(De,At=>{e.plotType!=="h"?At(Ye):At(dt,!1)})}var cr=F(De);{var Bs=At=>{var mt=V1(),ft=D(mt),Ae=D(ft);ie(()=>{ct(mt,Te),O(ft,"stroke",Ha),O(ft,"fill",Ha),O(ft,"x",l(ne)[b()]),O(ft,"y",l(K)[b()]),O(ft,"dy",l(N).v[b()]<0?l(U):-l(U)),ke(Ae,l(Z)[b()])}),C(At,mt)};Y(cr,At=>{e.showLabels&&l(Z)&&l(Z).length>0&&At(Bs)})}C(ue,me)};Y($,ue=>{b()>=0&&ue(ce)})}C(ae,te)};Y(Ee,ae=>{l(ne)&&l(K)&&ae(se)})}C(t,Ce),we()}lt(["click"]);function W1(t,e){_e(e,!0);let r=q(e,"lineColor",3,"#606060"),s=q(e,"lineType",3,2),o=q(e,"alpha",3,.05),a=q(e,"xRange",15),c=q(e,"yRange",15);const u=xe.seq(0,2*Math.PI,.05);function f(p,w,S,E){const k=p.eigenvals[w-1],A=kr(1-o(),2),j=Math.sqrt(A*k),N=xe.zeros(E.length);for(let R=0;R<E.length;R++)N.v[R]=j*S(E.v[R]);return[N,-j,j]}let d=y(()=>e.comp?e.comp[0]:null),v=y(()=>l(d)?f(e.resobj,l(d),Math.cos,u):null);ye(()=>{a(l(v)?[l(v)[1],l(v)[2]]:null)});let h=y(()=>e.comp?e.comp[1]:null),m=y(()=>l(h)?f(e.resobj,l(h),Math.sin,u):null);ye(()=>{c(l(m)?[l(m)[1],l(m)[2]]:null)});var g=ge(),b=X(g);{var _=p=>{Br(p,{get xValues(){return l(v)[0]},get yValues(){return l(m)[0]},get lineColor(){return r()},get lineType(){return s()}})};Y(b,p=>{l(v)&&l(m)&&p(_)})}C(t,g),we()}function U1(t,e){_e(e,!0);let r=q(e,"confLevel",3,.95),s=q(e,"xRange",15),o=q(e,"yRange",15),a=y(()=>mv(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,r()));ye(()=>{l(a)?(s(l(a).xRange),o(l(a).yRange)):(s(null),o(null))});var c=ge(),u=X(c);{var f=d=>{var v=ge(),h=X(v);Qe(h,17,()=>l(a).ellipses,et,(m,g,b)=>{Br(m,{get xValues(){return l(g).x},get yValues(){return l(g).y},get lineColor(){return e.groupColors[b]}})}),C(d,v)};Y(u,d=>{l(a)&&l(a).ellipses&&d(f)})}C(t,c),we()}var H1=G("<!> <!> <!> <!> <!> <!> <!> <!>",1);function ei(t,e){_e(e,!0);let r=q(e,"alpha",3,.05);const s=y(()=>e.props&&e.props.data?e.props.data:null),o=y(()=>e.props&&e.props.res?e.props.res:null),a=y(()=>l(o)&&e.params?e.params.resID==="both"?Object.keys(l(o)):[e.params.resID]:null),c=y(()=>l(a)?l(o)[l(a)[0]]:null),u=y(()=>l(a)&&l(a).length>1?l(o)[l(a)[1]]:null),f=y(()=>l(a)?l(s)[l(a)[0]]:null);function d(Se,Me,je,Ce,Ee,se){if(!je)return null;let ae=je[0],te=je[1];Ce&&(ae=Math.min(ae,Ce[0]),te=Math.max(te,Ce[1])),Se&&Ee&&(ae=Math.min(ae,Ee[0]),te=Math.max(te,Ee[1])),Me!=="none"&&se&&(ae=Math.min(ae,se[0]),te=Math.max(te,se[1]));const de=(te-ae)*.1;return{min:ae,max:te,d:de}}function v(Se,Me){if(!(!Se||!Me||Me<1||Me>Se.ncomp))return new xe(or(Se,"scores",Me))}let h=ee(void 0),m=ee(void 0),g=ee(void 0),b=ee(void 0),_=ee(void 0),p=ee(void 0),w=ee(void 0),S=ee(void 0),E=y(()=>l(c)?Ze(l(c).objindices):null),k=y(()=>l(u)?Ze(l(u).objindices):null),A=y(()=>l(c)?l(c).objlabels.map(Se=>Se.slice(0,Xn)):null),j=y(()=>l(u)?l(u).objlabels.map(Se=>Se.slice(0,Xn)):null),N=y(()=>v(l(c),e.params.comp1)),R=y(()=>v(l(u),e.params.comp1)),L=y(()=>e.params.plotType==="p"?l(N):l(E)),T=y(()=>e.params.plotType==="p"?l(R):l(k)),M=y(()=>e.params.comp2?e.params.comp2:null),P=y(()=>v(l(c),l(M))),B=y(()=>l(u)?v(l(u),l(M)):null),V=y(()=>Ka(l(f),l(c),e.params.colorBy,e.params.colorByVar,l(a)[0])),z=y(()=>Vr[l(a)[0]]),H=y(()=>l(a).length>1?Ka(null,l(u),"none",0,l(a)[1]):null),oe=y(()=>l(a).length>1?Vr[l(a)[1]]:null),U=y(()=>e.params.plotType==="p"?Ga(l(c),e.params.comp1):"Objects"),Q=y(()=>Ga(l(c),e.params.comp2)),ne=y(()=>d(e.params.showEllipse,e.params.confEllipse,l(h),l(g),l(_),l(w))),K=y(()=>l(ne)?[l(ne).min-l(ne).d,l(ne).max+l(ne).d]:[0,1]),Z=y(()=>d(e.params.showEllipse,e.params.confEllipse,l(m),l(b),l(p),l(S))),le=y(()=>l(Z)?[l(Z).min-l(Z).d,l(Z).max+l(Z).d*(1+(e.params.colorBy!=="none"))]:[0,1]),re=y(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!l(V)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+l(V).varname+(l(f).varvaluesUnits?" "+l(f).varvaluesUnits:"")+")");const ve=y(()=>Fs(l(a)));var pe=ge(),Re=X(pe);{var Te=Se=>{dn(Se,{get title(){return l(re)},get limX(){return l(K)},get limY(){return l(le)},get xLabel(){return l(U)},get yLabel(){return l(Q)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(Me,je)=>{var Ce=H1(),Ee=X(Ce);{let ce=y(()=>[l(K)[0]]),ue=y(()=>[l(K)[1]]);fn(Ee,{get xStart(){return l(ce)},get xEnd(){return l(ue)},yStart:[0],yEnd:[0],get lineColor(){return Cn}})}var se=F(Ee,2);{var ae=ce=>{{let ue=y(()=>[l(le)[0]]),me=y(()=>[l(le)[1]]);fn(ce,{xStart:[0],xEnd:[0],get yStart(){return l(ue)},get yEnd(){return l(me)},get lineColor(){return Cn}})}};Y(se,ce=>{e.params.plotType==="p"&&ce(ae)})}var te=F(se,2);{var de=ce=>{{let ue=y(()=>[e.params.comp1,e.params.comp2]);W1(ce,{get alpha(){return r()},get resobj(){return l(c)},get comp(){return l(ue)},get xRange(){return l(_)},set xRange(me){I(_,me,!0)},get yRange(){return l(p)},set yRange(me){I(p,me,!0)}})}};Y(te,ce=>{e.params.showEllipse&&e.params.plotType==="p"&&ce(de)})}var be=F(te,2);{var he=ce=>{{let ue=y(()=>Number.parseInt(e.params.confEllipse)/100);U1(ce,{get xValues(){return l(L)},get yValues(){return l(P)},get confLevel(){return l(ue)},get groups(){return l(c).classes},get groupNames(){return l(c).classNames},get groupColors(){return l(V).map},get xRange(){return l(w)},set xRange(me){I(w,me,!0)},get yRange(){return l(S)},set yRange(me){I(S,me,!0)}})}};Y(be,ce=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&l(V)&&ce(he)})}var Fe=F(be,2);Dr(Fe,{get xValues(){return l(L)},get yValues(){return l(P)},get labels(){return l(A)},get marker(){return l(z)},get nBars(){return l(a).length},barNum:1,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return l(V).colors},get mainColor(){return l(V).mainColor},get faceColor(){return l(V).faceTColor},get selected(){return e.selected},get callbacks(){return e.callbacks},get xRange(){return l(h)},set xRange(ce){I(h,ce,!0)},get yRange(){return l(m)},set yRange(ce){I(m,ce,!0)}});var Ie=F(Fe,2);{var qe=ce=>{{let ue=y(()=>e.params.showLabels&&e.params.plotType==="p");Dr(ce,{get xValues(){return l(T)},get yValues(){return l(B)},get labels(){return l(j)},get selected(){return e.selected},get callbacks(){return e.callbacks},get nBars(){return l(a).length},barNum:2,get plotType(){return e.params.plotType},get showLabels(){return l(ue)},get marker(){return l(oe)},get colors(){return l(H).colors},get mainColor(){return l(H).mainColor},get faceColor(){return l(H).faceTColor},get xRange(){return l(g)},set xRange(me){I(g,me,!0)},get yRange(){return l(b)},set yRange(me){I(b,me,!0)}})}};Y(Ie,ce=>{l(T)&&l(B)&&ce(qe)})}var W=F(Ie,2);{var J=ce=>{{let ue=y(()=>l(V).breaks!==null);Ya(ce,{get show(){return l(ue)},get colmap(){return l(V).map},get breaks(){return l(V).breaks},get labels(){return l(V).labels}})}};Y(W,ce=>{l(V)&&ce(J)})}var $=F(W,2);{let ce=y(()=>e.params.colorBy==="none");Rs($,{get items(){return l(ve)},get show(){return l(ce)}})}C(Me,Ce)},$$slots:{default:!0}})};Y(Re,Se=>{l(L)&&l(P)&&Se(Te)})}C(t,pe),we()}var G1=G("<!> <!> <!>",1);function X1(t,e){_e(e,!0);let r=y(()=>e.props?e.props.model:null);function s(k,A){return!k||!A||A<1||A>k.ncomp?null:new xe(St(k,"loadings",A))}let o=ee(void 0),a=ee(void 0),c=y(()=>l(r)?Ze(l(r).varvalues):null),u=y(()=>l(r)?Ze(l(r).varindices):null),f=y(()=>s(l(r),e.params.comp1)),d=y(()=>!l(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:l(f),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&l(c)?{values:l(c),label:l(r).varvaluesName+(l(r).varvaluesUnits?", "+l(r).varvaluesUnits:"")}:{values:l(u),label:"Variables"}),v=y(()=>l(d)?l(d).values:null),h=y(()=>l(d)?l(d).label:null),m=y(()=>s(l(r),e.params.comp2)),g=y(()=>`PC${e.params.comp2}`),b=y(()=>{if(l(a)&&l(a)[0]<Number.POSITIVE_INFINITY&&l(a)[1]>Number.NEGATIVE_INFINITY){const k=(l(a)[1]-l(a)[0])*.1;return[l(a)[0]-k,l(a)[1]+k]}else return[0,1]}),_=y(()=>{if(l(o)&&l(o)[0]<Number.POSITIVE_INFINITY&&l(o)[1]>Number.NEGATIVE_INFINITY){const k=(l(o)[1]-l(o)[0])*.1;return e.params.plotType==="l"&&l(r).varrev?[l(o)[1]+k,l(o)[0]-k]:[l(o)[0]-k,l(o)[1]+k]}else return[0,1]}),p=y(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const k=Math.max(Math.abs(l(_)[0]),Math.abs(l(b)[0]),l(_)[1],l(b)[1])*1.05;return{x:[-k,k],y:[-k,k]}}else{const k=Math.max(Math.abs(l(b)[0]),l(b)[1])*1.05;return{x:l(_),y:[-k,k]}}return{x:l(_),y:l(b)}});var w=ge(),S=X(w);{var E=k=>{dn(k,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return l(h)},get yLabel(){return l(g)},get limX(){return l(p).x},get limY(){return l(p).y},children:(A,j)=>{var N=G1(),R=X(N);{let P=y(()=>[l(p).x[0]]),B=y(()=>[l(p).x[1]]);fn(R,{get xStart(){return l(P)},get xEnd(){return l(B)},yStart:[0],yEnd:[0],get lineColor(){return Cn}})}var L=F(R,2);{var T=P=>{{let B=y(()=>[l(p).y[0]]),V=y(()=>[l(p).y[1]]);fn(P,{xStart:[0],xEnd:[0],get yStart(){return l(B)},get yEnd(){return l(V)},get lineColor(){return Cn}})}};Y(L,P=>{e.params.plotType==="p"&&P(T)})}var M=F(L,2);{let P=y(()=>Ua+"30");Dr(M,{get xValues(){return l(v)},get yValues(){return l(m)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return l(r).varlabels},shortenLabels:!1,get mainColor(){return Ua},get faceColor(){return l(P)},get xRange(){return l(o)},set xRange(B){I(o,B,!0)},get yRange(){return l(a)},set yRange(B){I(a,B,!0)}})}C(A,N)},$$slots:{default:!0}})};Y(S,k=>{l(v)&&l(m)&&k(E)})}C(t,w),we()}var K1=G("<!> <!> <!> <!> <!> <!> <!>",1);function ti(t,e){_e(e,!0),q(e,"alpha",3,.05);const r="#808089",s="#404050",o=zs;let a=y(()=>e.props?e.props.model:null),c=y(()=>e.props?e.props.res:null),u=y(()=>l(c)?l(c)[e.params.resID]:null);function f(A,j){return`PC${j} (${(A.stat.expvar[j-1]*100).toFixed(1)}%)`}function d(A,j,N){if(!j||!N||A<1||A>l(c).ncomp)return null;const R=or(j,"scores",A).slice(),L=St(N,"loadings",A),T=R.length,M=L.length;let P=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY;const V=new Array(T);for(let Z=0;Z<T;Z++)R[Z]=R[Z]/Math.sqrt(l(v)[A-1]*(T-1)),P>R[Z]&&(P=R[Z]),B<R[Z]&&(B=R[Z]),V[Z]=R[Z]<0?1:3;const z=new Array(T);for(let Z=0;Z<M;Z++)P>L[Z]&&(P=L[Z]),B<L[Z]&&(B=L[Z]),z[Z]=L[Z]<0?1:3;const H=new xe(R),oe=new xe(L),U=f(j,A),Q=(B-P)/15,ne=[P-Q,B+Q],K=Math.max(Math.abs(ne[0]),ne[1]);return{values:H,end:oe,lim:ne,label:U,tpos:V,ppos:z,mx:K}}let v=y(()=>l(a)?St(l(a),"eigenvals"):null),h=y(()=>l(u)?xe.zeros(l(u).ncols):null),m=y(()=>l(u)?xe.zeros(l(u).ncols):null),g=y(()=>d(e.params.comp1,l(u),l(a))),b=y(()=>d(e.params.comp2,l(u),l(a))),_=y(()=>l(g)&&l(b)?Math.max(l(g).mx,l(b).mx)*1.05:0),p=y(()=>l(g)?e.params.axesEqual?[-l(_),l(_)]:l(g).lim:[0,1]),w=y(()=>l(b)?e.params.axesEqual?[-l(_),l(_)]:l(b).lim:[0,1]);var S=ge(),E=X(S);{var k=A=>{dn(A,{get limX(){return l(p)},get limY(){return l(w)},get xLabel(){return l(g).label},get yLabel(){return l(b).label},fileName:"plot-biplot",title:"Bi-plot (scores and loadings)",children:(j,N)=>{var R=K1(),L=X(R);{let U=y(()=>[l(p)[0]]),Q=y(()=>[l(p)[1]]);fn(L,{get xStart(){return l(U)},get xEnd(){return l(Q)},yStart:[0],yEnd:[0],get lineColor(){return Cn}})}var T=F(L,2);{let U=y(()=>[l(w)[0]]),Q=y(()=>[l(w)[1]]);fn(T,{xStart:[0],xEnd:[0],get yStart(){return l(U)},get yEnd(){return l(Q)},get lineColor(){return Cn}})}var M=F(T,2);Ls(M,{get xValues(){return l(g).values},get yValues(){return l(b).values},get lineColor(){return Ar[e.params.resID]},get faceColor(){return Gn[e.params.resID]},lineWidth:1.5});var P=F(M,2);fn(P,{get xStart(){return l(h)},get yStart(){return l(m)},get xEnd(){return l(g).end},get yEnd(){return l(b).end},lineColor:r});var B=F(P,2);Ls(B,{get xValues(){return l(g).end},get yValues(){return l(b).end},marker:1,lineColor:r,faceColor:r,markerSize:.4});var V=F(B,2);{var z=U=>{An(U,{get xValues(){return l(g).values},get yValues(){return l(b).values},get labels(){return l(u).objlabels},get pos(){return l(b).tpos},textSize:.75,get faceColor(){return o}})};Y(V,U=>{(e.params.showLabels==="obj"||e.params.showLabels==="both")&&U(z)})}var H=F(V,2);{var oe=U=>{An(U,{get xValues(){return l(g).end},get yValues(){return l(b).end},get labels(){return l(u).varlabels},textSize:.75,get pos(){return l(b).ppos},faceColor:s})};Y(H,U=>{(e.params.showLabels==="var"||e.params.showLabels==="both")&&U(oe)})}C(j,R)},$$slots:{default:!0}})};Y(E,A=>{l(g)&&l(b)&&A(k)})}C(t,S),we()}var J1=G("<!> <!> <!> <!> <!> <!>",1);function ri(t,e){_e(e,!0);let r=y(()=>e.props?e.props.res:null);const s=y(()=>l(r)&&e.params?e.params.resID==="both"?Object.keys(l(r)):[e.params.resID]:null),o=y(()=>l(s)?l(r)[l(s)[0]]:null),a=y(()=>l(s)&&l(s).length>1?l(r)[l(s)[1]]:null),c={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"},u=y(()=>e.params.varForm==="cumulative"?"cum":""),f=y(()=>e.params.varType==="explained"?"exp":"res"),d=y(()=>l(u)+l(f)+"var"),v=y(()=>c[l(d)]),h=y(()=>l(o).ncomp>1?1-l(o).ncomp*.065:-.1),m=y(()=>l(o).ncomp>1?l(o).ncomp*1.065:2.1),g=y(()=>[l(h),l(m)]),b=y(()=>l(o)?l(o).stat.components:null),_=y(()=>l(o)?Ze(l(o).stat[l(d)]):null),p=y(()=>l(a)?l(a).stat.components:null),w=y(()=>l(a)?Ze(l(a).stat[l(d)]):null),S=y(()=>l(_)?Array.from(l(_).v).map(M=>M<.1?M.toFixed(3):M.toFixed(2)):null),E=y(()=>l(w)?Array.from(l(w).v).map(M=>M<.1?M.toFixed(3):M.toFixed(2)):null),k=y(()=>l(_)?[Math.min(-.1,Er(l(_)))]:-.1),A=y(()=>l(w)?[Math.min(-.1,Er(l(w)))]:-.1),j=y(()=>l(k)&&l(A)?[Math.min(l(k),l(A)),1.1]:[0,1.1]),N=y(()=>Fs(l(s)));var R=ge(),L=X(R);{var T=M=>{{let P=y(()=>"plot-"+l(d));dn(M,{get title(){return l(v)},get limX(){return l(g)},get limY(){return l(j)},get fileName(){return l(P)},whole:!0,children:(B,V)=>{var z=J1(),H=X(z);Dr(H,{get xValues(){return l(b)},get yValues(){return l(_)},get labels(){return l(S)},get nBars(){return l(s).length},barNum:1,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Ar[l(s)[0]]},get faceColor(){return xl[l(s)[0]]},get marker(){return Vr[l(s)[0]]},lineWidth:1.5});var oe=F(H,2);{var U=le=>{Dr(le,{get xValues(){return l(p)},get yValues(){return l(w)},get labels(){return l(E)},get nBars(){return l(s).length},barNum:2,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Ar[l(s)[1]]},get faceColor(){return xl[l(s)[1]]},get marker(){return Vr[l(s)[1]]},lineWidth:1.5})};Y(oe,le=>{l(p)&&l(w)&&le(U)})}var Q=F(oe,2);Rs(Q,{get items(){return l(N)},position:"bottomright"});var ne=F(Q,2);Ms(ne,{showGrid:!0,label:"Number of PCs",whole:!0});var K=F(ne,2);Ps(K,{showGrid:!0,label:"Variance"});var Z=F(K,2);js(Z,{}),C(B,z)},$$slots:{default:!0}})}};Y(L,M=>{l(b)&&l(_)&&M(T)})}C(t,R),we()}function Q1(t,e){_e(e,!0);let r=y(()=>e.props?e.props.model:null);const s={none:"λ",log:"log(λ)",sqrt:"sqrt(λ)"};function o(A,j){const N=l(r).nrows-1;if(j==="no")return A.apply(R=>R*N);if(j==="log")return A.apply(R=>Math.log(R*N));if(j==="sqrt")return A.apply(R=>Math.sqrt(R*N))}let a=y(()=>l(r)?new xe(St(l(r),"eigenvals")):null),c=y(()=>l(r)?xe.seq(1,l(r).ncomp):null),u=y(()=>l(a)?o(l(a),e.params.transform):null),f=y(()=>l(u)?Array.from(l(u).v).map(A=>A.toFixed(A<.1?3:2)):null);const d=y(()=>l(r).ncomp>10?l(r).ncomp*.05:.5),v=y(()=>l(r).ncomp>1?1:0),h=y(()=>l(r).ncomp>1?l(r).ncomp:2),m=y(()=>[l(v)-l(d),l(h)+l(d)]);let g=y(()=>l(u)?e.params.transform==="no"?0:l(u).v[l(r).ncomp-1]:0),b=y(()=>l(u)?l(u).v[0]:1),_=y(()=>(l(b)-l(g))/18),p=y(()=>l(u)?[l(g)-l(_),l(b)+l(_)]:[0,1]),w=y(()=>s[e.params.transform]);var S=ge(),E=X(S);{var k=A=>{dn(A,{get limX(){return l(m)},get limY(){return l(p)},get yLabel(){return l(w)},whole:!0,xLabel:"Number of PCs",title:"Eigenvalues",fileName:"plot-eigenvalues",children:(j,N)=>{Dr(j,{get xValues(){return l(c)},get yValues(){return l(u)},get labels(){return l(f)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return xl.cal},lineWidth:1.5})},$$slots:{default:!0}})};Y(E,A=>{l(c)&&l(u)&&A(k)})}C(t,S),we()}var Z1=G("<!> <!> <!> <!> <!>",1);function ni(t,e){_e(e,!0);let r=y(()=>e.props&&e.props.res?e.props.res:null);const s=y(()=>l(r)&&e.params?e.params.resID==="both"?Object.keys(l(r)):[e.params.resID]:null),o=y(()=>l(s)?l(r)[l(s)[0]]:null),a=y(()=>l(s)&&l(s).length>1?l(r)[l(s)[1]]:null),c="#909090",u=100;let f=y(()=>e.params.limType==="classic"?{h:l(o).cNh,q:l(o).cNq}:{h:l(o).rNh,q:l(o).rNq}),d=y(()=>e.params.limType==="classic"?{h:l(o).ch0,q:l(o).cq0}:{h:l(o).rh0,q:l(o).rq0}),v=y(()=>({h:l(f).h[e.params.ncomp-1],q:l(f).q[e.params.ncomp-1]})),h=y(()=>({h:l(d).h[e.params.ncomp-1],q:l(d).q[e.params.ncomp-1]})),m=y(()=>e.params.alpha?1-e.params.alpha/100:.95),g=y(()=>e.params.gamma?1-e.params.gamma/100:.99),b=y(()=>Qa(l(m),l(v).h,l(v).q,e.params.transType)),_=y(()=>Qa(Math.pow(l(g),1/l(o).nrows),l(v).h,l(v).q,e.params.transType)),p=y(()=>l(o)?or(l(o),"hdist",e.params.ncomp):null),w=y(()=>l(o)?or(l(o),"qdist",e.params.ncomp):null),S=y(()=>l(a)?or(l(a),"hdist",e.params.ncomp):null),E=y(()=>l(a)?or(l(a),"qdist",e.params.ncomp):null),k=y(()=>El(l(p),l(v).h,l(h).h,e.params.transType)),A=y(()=>El(l(w),l(v).q,l(h).q,e.params.transType)),j=y(()=>l(o)?l(o).objlabels.map(K=>K.slice(0,Xn)):null),N=y(()=>l(S)?El(l(S),l(v).h,l(h).h,e.params.transType):null),R=y(()=>l(E)?El(l(E),l(v).q,l(h).q,e.params.transType):null),L=y(()=>l(a)?l(a).objlabels.map(K=>K.slice(0,Xn)):null),T=y(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),M=y(()=>Ja("h",e.params.transType)),P=y(()=>Ja("q",e.params.transType)),B=ee(void 0),V=ee(void 0),z=y(()=>{if(!l(k)||!l(B))return[0,1];const K=Math.max(l(k).max,l(_).x.v[u-1]),Z=l(N)?Math.max(l(N).max,l(_).x.v[u-1]):0,le=Math.max(K,Z);return[-.02*(le-l(B)[0]),1.05*le]}),H=y(()=>{if(!l(A)||!l(V))return[0,1];const K=Math.max(l(A).max,l(_).y.v[0]),Z=l(R)?Math.max(l(R).max,l(_).y.v[0]):0,le=Math.max(K,Z);return[-.02*(le-l(V)[0]),(1.05+.1*(e.params.colorBy!=="none"))*le]});const oe=y(()=>Fs(l(s)));var U=ge(),Q=X(U);{var ne=K=>{dn(K,{get title(){return l(T)},get limX(){return l(z)},get limY(){return l(H)},get xLabel(){return l(M)},get yLabel(){return l(P)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(Z,le)=>{var re=Z1(),ve=X(re);{var pe=Ee=>{Br(Ee,{get xValues(){return l(b).x},get yValues(){return l(b).y},lineColor:c,lineType:2})};Y(ve,Ee=>{l(b)&&Ee(pe)})}var Re=F(ve,2);{var Te=Ee=>{Br(Ee,{get xValues(){return l(_).x},get yValues(){return l(_).y},lineColor:c,lineType:3})};Y(Re,Ee=>{l(_)&&e.params.resID&&e.params.resID!=="alt"&&Ee(Te)})}var Se=F(Re,2);Dr(Se,{get labels(){return l(j)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(k).values},get yValues(){return l(A).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Vr[l(s)[0]]},get mainColor(){return Ar[l(s)[0]]},get faceColor(){return Gn[l(s)[0]]},get xRange(){return l(B)},set xRange(Ee){I(B,Ee,!0)},get yRange(){return l(V)},set yRange(Ee){I(V,Ee,!0)}});var Me=F(Se,2);{var je=Ee=>{Dr(Ee,{get labels(){return l(L)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(N).values},get yValues(){return l(R).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Vr[l(s)[1]]},get mainColor(){return Ar[l(s)[1]]},get faceColor(){return Gn[l(s)[1]]},get xRange(){return l(B)},set xRange(se){I(B,se,!0)},get yRange(){return l(V)},set yRange(se){I(V,se,!0)}})};Y(Me,Ee=>{l(N)&&l(R)&&Ee(je)})}var Ce=F(Me,2);Rs(Ce,{get items(){return l(oe)},position:"bottomright"}),C(Z,re)},$$slots:{default:!0}})};Y(Q,K=>{l(k)&&l(A)&&K(ne)})}C(t,U),we()}function li(t){const e=Object.keys(t),r=t[e[0]],s=e.concat(["both"]);return{resID:{el:$e,hidden:e.length==1,default:e[0],label:"Show",props:{options:s}},ncomp:{el:Dt,hidden:!1,default:r.ncomp>1?2:1,label:"# PCs",props:{min:1,max:r.ncomp}},transType:{el:$e,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:$e,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function $1(t){return{plotType:{el:_l,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},transform:{el:$e,hidden:!1,default:"no",label:"Transform",props:{options:["no","sqrt","log"]}},showLabels:{el:zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function eh(t){return{plotType:{el:_l,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:Dt,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:Dt,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},showLabels:{el:zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},axesEqual:{el:zt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function si(t){const e=Object.keys(t),r=t[e[0]],s=r.classNames&&r.classNames.length>1?["none","groups","variable"]:["none","variable"],o=e.concat(["both"]);return{resID:{el:$e,hidden:e.length==1,default:e[0],label:"Show",props:{options:o}},plotType:{el:_l,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:Dt,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:Dt,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},showEllipse:{el:zt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:$e,hidden:!1,default:"none",label:"Color by",props:{options:s}},colorByVar:{el:Dt,hidden:!0,default:1,label:"Variable",props:{min:1,max:r.ncols}},confEllipse:{el:$e,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}function oi(t){const e=Object.keys(t),r=e.concat(["both"]);return{resID:{el:$e,hidden:e.length==1,default:e[0],label:"Show",props:{options:r}},plotType:{el:_l,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},varType:{el:$e,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:$e,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function ai(t){const e=Object.keys(t),r=t[e[0]];return{resID:{el:$e,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},comp2:{el:Dt,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:Dt,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:$e,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","obj","var","both"]}},axesEqual:{el:zt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}var th=G("<!> <!>",1);function rh(t,e){_e(e,!0);const r=(d,v=pt)=>{fe(d,{label:"Selected",children:(h,m)=>{ot(h,{onclick:()=>e.markOutlier(v()),text:"remove"})},$$slots:{default:!0}})},s=(d,v=pt)=>{fe(d,{label:"Selected",children:(h,m)=>{var g=th(),b=X(g);ot(b,{onclick:()=>e.showContributions(v(),l(c).distance.ncomp),text:"plot"});var _=F(b,2);ot(_,{onclick:()=>e.markOutlier(v()),text:"remove"}),C(h,g)},$$slots:{default:!0}})};Object.keys(e.res);const o=y(()=>({scores:{label:"Scores",scope:"objects",component:ei,buttons:r},loadings:{label:"Loadings",scope:"stats",component:X1},biplot:{label:"Bi-plot",scope:"stats",component:ti},variance:{label:"Variance",scope:"stats",component:ri},eigenvals:{label:"Eigenvalues",scope:"stats",component:Q1},distance:{label:"Distances",scope:"objects",component:ni,buttons:s}})),a=ze({scores:si(e.res),loadings:eh(e.model),biplot:ai(e.res),variance:oi(e.res),eigenvals:$1(e.model),distance:li(e.res)});let c=ee(ze({scores:ir(a.scores),loadings:ir(a.loadings),biplot:ir(a.biplot),variance:ir(a.variance),eigenvals:ir(a.eigenvals),distance:ir(a.distance)}));ye(()=>{l(c).scores.plotType!=="p"?(a.scores.comp1.hidden=!0,a.scores.showEllipse.hidden=!0,l(c).scores.showEllipse=!1):(a.scores.comp1.hidden=!1,a.scores.showEllipse.hidden=!1),l(c).scores.plotType==="l"||l(c).scores.plotType==="b"?(a.scores.colorBy.hidden=!0,l(c).scores.colorBy="none"):a.scores.colorBy.hidden=!1,l(c).scores.colorBy==="variable"?a.scores.colorByVar.hidden=!1:a.scores.colorByVar.hidden=!0,l(c).scores.colorBy==="groups"&&l(c).scores.plotType==="p"?a.scores.confEllipse.hidden=!1:(a.scores.confEllipse.hidden=!0,l(c).scores.confEllipse="none"),l(c).scores.resID==="both"&&(l(c).scores.confEllipse="none",l(c).scores.colorBy="none",a.scores.colorBy.hidden=!0,a.scores.colorByVar.hidden=!0,a.scores.confEllipse.hidden=!0)}),ye(()=>{l(c).loadings.plotType!=="p"?a.loadings.comp1.hidden=!0:a.loadings.comp1.hidden=!1});const u=y(()=>({res:e.res,model:e.model,data:e.data})),f={markOutlier:e.markOutlier,showContributions:e.showContributions};$a(t,{get plots(){return l(o)},get controls(){return a},get props(){return l(u)},get callbacks(){return f},get params(){return l(c)},set params(d){I(c,d,!0)}}),we()}var nh=G('<div class="outliers-pane svelte-1mp4dba"><!></div>'),lh=G('<div class="model-calculator svelte-1mp4dba"><!></div>'),sh=G('<div class="pcv-calculator svelte-1mp4dba"><!></div>'),oh=G('<div class="buttons"><!> <!> <!></div>'),ah=G('<div class="download-area svelte-1mp4dba"><!></div>'),ih=G('<div class="result-stats svelte-1mp4dba"><!></div>'),ch=G(`<p class="svelte-1mp4dba">In this tab you can train a PCA model and explore how well it describes the training set. After creating the model you can save it to a file and apply it to another, new set of samples, and see how well this new set is explained by the model (tab <strong>Project</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1mp4dba">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. If this is the case, select <em>values</em> option for the header. In this case you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1mp4dba">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. It is also possible to have group labels, which you can use, for example, to color group samples on the score plot. Here is an example how data structure may look like (note, that column with group, row labels and header are optional):</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Group</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),uh=G(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to decide how to preprocess the data. You can either skip preprocessing (in the model settings you
               will be able to apply centering and scaling), create the chain of preprocessing methods in special constructor
               (use <em>Create</em> to load the constructor) or load already built preprocessing model from a file. Make your choice.</p>`,1),fh=G('<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Next step is to create a global PCA model for the training set. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to select number of components for every plot.</p>',1),dh=G(`<p class="svelte-1mp4dba"><strong>Step 4</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to create the PV-set,
               which you can use to validate the model. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">After this step you will be able to explore the model and tune its parameters.</p>`,1),vh=G('<div class="help-text svelte-1mp4dba"><!></div>'),hh=G('<!> <div class="app-container svelte-1mp4dba"><div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>',1);function mh(t,e){_e(e,!0);const r=y(()=>e.session.train);let s=ee(-1),o=ee(1),a=ee(!1);function c(U){if(U<0||U>l(r).calres.nrows-1)return;const Q=l(r).calres.objindices[U];Q>=0&&!l(r).outliers.includes(Q)&&(l(r).outliers.push(Q),l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null)}function u(){l(r).outliers=[],l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null}function f(){l(r).outliers.pop(),l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null}function d(U,Q){U<0||(I(s,U,!0),I(o,Q,!0),I(a,!0))}function v(){I(a,!1),I(s,-1),I(o,1)}ye(()=>{l(r).calset===null&&(l(r).pvres=null,l(r).calres=null,l(r).pvset=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).prepobj=[],l(r).prepType=null,l(r).outliers=[],l(r).model=null)}),ye(()=>{l(r).model===null&&(l(r).calres=null,l(r).pvres=null,l(r).pvset=null)}),ye(()=>{l(r).prepmodel||(l(r).calres=null,l(r).calsetp=null)}),ye(()=>{l(r).calsetp||(l(r).model=null,l(r).calres=null,l(r).pvres=null)}),ye(()=>{const U=sr(()=>JSON.stringify(e.session,gl));e.backupSession(U,l(r).model,l(r).calset,l(r).calsetp,l(r).pvres)});var h=hh(),m=X(h);{var g=U=>{{let Q=y(()=>({cal:l(r).calres,pv:l(r).pvres}));Za(U,{get model_getter(){return St},get res_getter(){return or},get model(){return l(r).model},get res(){return l(Q)},closeModal:v,get ncomp(){return l(o)},get selected(){return l(s)}})}};Y(m,U=>{l(a)&&U(g)})}var b=F(m,2),_=D(b),p=D(_),w=D(p);Na(w,{className:"Group",csvOnly:!1,get dataset(){return l(r).calset},set dataset(U){l(r).calset=U}});var S=F(p,2);{var E=U=>{var Q=nh(),ne=D(Q);Ma(ne,{get outliers(){return l(r).outliers},get dataset(){return l(r).calset},resetOutliers:u,undoOutliers:f}),C(U,Q)};Y(S,U=>{l(r).outliers&&l(r).outliers.length>0&&U(E)})}var k=F(S,2);{var A=U=>{y1(U,{get WASM(){return e.WASM},get rawdata(){return l(r).calset},get outliers(){return l(r).outliers},get prepType(){return l(r).prepType},set prepType(Q){l(r).prepType=Q},get prepobj(){return l(r).prepobj},set prepobj(Q){l(r).prepobj=Q},get prepdata(){return l(r).calsetp},set prepdata(Q){l(r).calsetp=Q},get prepmeta(){return l(r).prepmeta},set prepmeta(Q){l(r).prepmeta=Q},get prepmodel(){return l(r).prepmodel},set prepmodel(Q){l(r).prepmodel=Q}})};Y(k,U=>{l(r).calset&&U(A)})}var j=F(k,2);{var N=U=>{var Q=lh(),ne=D(Q);qf(ne,{get WASM(){return e.WASM},get dataset(){return l(r).calsetp},get outliers(){return l(r).outliers},get model(){return l(r).model},set model(K){l(r).model=K},get resobj(){return l(r).calres},set resobj(K){l(r).calres=K}}),C(U,Q)};Y(j,U=>{l(r).calsetp&&U(N)})}var R=F(j,2);{var L=U=>{var Q=sh(),ne=D(Q);Tf(ne,{get WASM(){return e.WASM},get calset(){return l(r).calsetp},get outliers(){return l(r).outliers},get model(){return l(r).model},get calres(){return l(r).calres},get pvset(){return l(r).pvset},set pvset(K){l(r).pvset=K},get pvres(){return l(r).pvres},set pvres(K){l(r).pvres=K}}),C(U,Q)};Y(R,U=>{l(r).calsetp&&l(r).model&&U(L)})}var T=F(R,2);{var M=U=>{var Q=ah(),ne=D(Q);fe(ne,{name:"download-buttons",label:"Download",children:(K,Z)=>{var le=oh(),re=D(le);ot(re,{onclick:()=>ws(l(r).calres,l(r).calset,"train",l(r).outliers,l(r).model),text:"Res (cal)"});var ve=F(re,2);ot(ve,{onclick:()=>ws(l(r).pvres,l(r).pvset,"pv",l(r).outliers,l(r).model),text:"Res (pv)"});var pe=F(ve,2);ot(pe,{onclick:()=>uf(l(r).model,l(r).prepmodel),text:"Model"}),C(K,le)},$$slots:{default:!0}}),C(U,Q)};Y(T,U=>{l(r).calres&&l(r).pvres&&l(r).model&&U(M)})}var P=F(T,2);{var B=U=>{var Q=ih(),ne=D(Q);{let K=y(()=>({cal:l(r).calres,pv:l(r).pvres}));Ta(ne,{get res(){return l(K)}})}C(U,Q)};Y(P,U=>{l(r).pvres&&U(B)})}var V=F(_,2),z=D(V);{var H=U=>{var Q=vh(),ne=D(Q);{var K=le=>{var re=ch();C(le,re)},Z=le=>{var re=ge(),ve=X(re);{var pe=Te=>{var Se=uh();C(Te,Se)},Re=Te=>{var Se=ge(),Me=X(Se);{var je=Ee=>{var se=fh();C(Ee,se)},Ce=Ee=>{var se=ge(),ae=X(se);{var te=de=>{var be=dh();C(de,be)};Y(ae,de=>{l(r).pvset||de(te)},!0)}C(Ee,se)};Y(Me,Ee=>{l(r).model?Ee(Ce,!1):Ee(je)},!0)}C(Te,Se)};Y(ve,Te=>{l(r).calsetp?Te(Re,!1):Te(pe)},!0)}C(le,re)};Y(ne,le=>{l(r).calset?le(Z,!1):le(K)})}C(U,Q)},oe=U=>{var Q=ge(),ne=X(Q);{var K=Z=>{var le=ge(),re=X(le);En(re,()=>l(r).calres,ve=>{{let pe=y(()=>({cal:l(r).calset,pv:l(r).pvset})),Re=y(()=>({cal:l(r).calres,pv:l(r).pvres}));rh(ve,{markOutlier:c,showContributions:d,get data(){return l(pe)},get res(){return l(Re)},get model(){return l(r).model}})}}),C(Z,le)};Y(ne,Z=>{l(r).model&&l(r).calres&&l(r).pvres&&Z(K)})}C(U,Q)};Y(z,U=>{!l(r).pvres||!l(r).model?U(H):U(oe,!1)})}C(t,h),we()}var gh=G("<!> <!>",1),ph=G('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),bh=G('<p class="info-text svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model info:</span> <!></p> <!>',1),_h=G("<p><!></p>"),wh=G("<!> <!>",1);function yh(t,e){_e(e,!0);let r=q(e,"model",15),s=ee(""),o=ee("neutral"),a=ee("");function c(p){try{const w=JSON.parse(p,ps);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain PCA model.");w.fileName=l(d),r(w),I(o,"success"),I(a,"")}catch(w){console.error(w),r(null),I(o,"error"),I(a,w,!0)}}function u(p){const w=new FileReader;w.onload=()=>{c(w.result)},w.readAsText(l(s))}function f(){I(s,""),r(null),I(o,"neutral"),I(a,"")}ye(()=>{l(s)===null?(r(null),I(o,"neutral"),I(a,"")):(I(o,"neutral"),I(a,""))});let d=y(()=>l(s)?l(s).name.replace(/\.[^/.]+$/,""):"");var v=wh(),h=X(v);{var m=p=>{var w=gh(),S=X(w);En(S,()=>l(s),A=>{fe(A,{name:"file-selector",children:(j,N)=>{bl(j,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(s)},set file(R){I(s,R,!0)}})},$$slots:{default:!0}})});var E=F(S,2);{var k=A=>{fe(A,{name:"load-button",label:" ",children:(j,N)=>{ot(j,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(E,A=>{l(s)&&A(k)})}C(p,w)},g=p=>{fe(p,{name:"info",class:"info",children:(w,S)=>{var E=bh(),k=X(E),A=F(D(k),2),j=D(A),N=F(A,4),R=F(N);{var L=M=>{var P=ph(),B=F(X(P),3);Os(B,{get prepmodel(){return r().prep}}),C(M,P)};Y(R,M=>{r().prep&&M(L)})}var T=F(k,2);ar(T,{onclick:f}),ie(()=>{O(A,"title",r().fileName),ke(j,r().fileName),ke(N,` ${r().ncomp??""} PCs${r().center?", centered":""}${r().scale?", scaled":""} `)}),C(w,E)},$$slots:{default:!0}})};Y(h,p=>{r()?p(g,!1):p(m)})}var b=F(h,2);{var _=p=>{fe(p,{name:"error",status:"error",children:(w,S)=>{var E=_h(),k=D(E);ht(k,()=>l(a)),C(w,E)},$$slots:{default:!0}})};Y(b,p=>{(l(o)==="error"||l(a))&&p(_)})}C(t,v),we()}var xh=G("<!> <!>",1);function Eh(t,e){_e(e,!0);const r=(d,v=pt)=>{fe(d,{label:"Selected",children:(h,m)=>{ot(h,{onclick:()=>e.markOutlier(v()),text:"remove"})},$$slots:{default:!0}})},s=(d,v=pt)=>{fe(d,{label:"Selected",children:(h,m)=>{var g=xh(),b=X(g);ot(b,{onclick:()=>e.showContributions(v(),l(c).distance.ncomp),text:"plot"});var _=F(b,2);ot(_,{onclick:()=>e.markOutlier(v()),text:"remove"}),C(h,g)},$$slots:{default:!0}})},o=y(()=>({scores:{label:"Scores",scope:"objects",component:ei,buttons:r},biplot:{label:"Bi-plot",scope:"stats",component:ti},variance:{label:"Variance",scope:"stats",component:ri},distance:{label:"Distances",scope:"objects",component:ni,buttons:s}})),a=ze({scores:si(e.res),biplot:ai(e.res),variance:oi(e.res),distance:li(e.res)});let c=ee(ze({scores:ir(a.scores),biplot:ir(a.biplot),variance:ir(a.variance),distance:ir(a.distance)}));ye(()=>{l(c).scores.plotType!=="p"?(a.scores.comp1.hidden=!0,a.scores.showEllipse.hidden=!0,l(c).scores.showEllipse=!1):(a.scores.comp1.hidden=!1,a.scores.showEllipse.hidden=!1),l(c).scores.plotType==="l"||l(c).scores.plotType==="b"?(a.scores.colorBy.hidden=!0,l(c).scores.colorBy="none"):a.scores.colorBy.hidden=!1,l(c).scores.colorBy==="variable"?a.scores.colorByVar.hidden=!1:a.scores.colorByVar.hidden=!0,l(c).scores.colorBy==="groups"&&l(c).scores.plotType==="p"?a.scores.confEllipse.hidden=!1:(a.scores.confEllipse.hidden=!0,l(c).scores.confEllipse="none")});const u=y(()=>({res:e.res,model:e.model,data:e.data})),f={markOutlier:e.markOutlier,showContributions:e.showContributions};$a(t,{get plots(){return l(o)},get controls(){return a},get props(){return l(u)},get callbacks(){return f},get params(){return l(c)},set params(d){I(c,d,!0)}}),we()}var kh=G('<div class="data-loader svelte-1rjc99q"><!></div>'),Sh=G('<div class="outliers-pane svelte-1rjc99q"><!></div>'),Ah=G('<div class="buttons"><!></div>'),Ch=G('<div class="model-dowloader svelte-1rjc99q"><!></div> <div class="result-stats svelte-1rjc99q"><!></div>',1),Nh=G('<p class="svelte-1rjc99q"><strong>Step 1.</strong></p> <p class="svelte-1rjc99q">Load file with PCA model you created earlier in tab <strong>Train</strong></p>',1),Th=G('<p class="svelte-1rjc99q"><strong>Step 2.</strong></p> <p class="svelte-1rjc99q">Load your dataset set from a CSV file. The interface and selection steps are similar to the ones you used in <em>Train</em> tab. However, in this case you do not need to specify all details for header, just select if the new dataset has header as a first row or not. All values will be inherited from the model object.</p> <p class="svelte-1rjc99q"><strong>It is important that the new dataset has same variables as the training set used to create the model.</strong></p>',1),Mh=G('<div class="help-text svelte-1rjc99q"><p class="svelte-1rjc99q">In this tab you can project new data points to a previosly trained PCA model and explore main outcomes: scores, distances and variances.</p> <!> <p class="svelte-1rjc99q"></p></div>'),Ph=G('<!> <div class="app-container svelte-1rjc99q"><div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>',1);function jh(t,e){_e(e,!0);const r=y(()=>e.session.new);let s=ee(-1),o=ee(1),a=ee(!1);function c(P){if(P<0||P>l(r).newres.nrows-1)return;const B=l(r).newres.objindices[P];B>=0&&!l(r).outliers.includes(B)&&(l(r).outliers.push(B),l(r).newres=null)}function u(){l(r).outliers=[],l(r).newres=null}function f(){l(r).outliers.pop(),l(r).newres=null}function d(P,B){P<0||(I(s,P,!0),I(a,!0))}function v(){I(a,!1),I(s,-1),I(o,1)}ye(()=>{l(r).model===null&&(l(r).newset=null)}),ye(()=>{l(r).newset===null&&(l(r).outliers=[],l(r).newres=null)}),ye(()=>{const P=sr(()=>JSON.stringify(e.session,gl));e.backupSession(P,l(r).model,l(r).newset,l(r).newres)});var h=Ph(),m=X(h);{var g=P=>{{let B=y(()=>({new:l(r).newres}));Za(P,{get model_getter(){return St},get res_getter(){return or},get model(){return l(r).model},get res(){return l(B)},closeModal:v,get ncomp(){return l(o)},get selected(){return l(s)}})}};Y(m,P=>{l(a)&&P(g)})}var b=F(m,2),_=D(b),p=D(_),w=D(p);yh(w,{get model(){return l(r).model},set model(P){l(r).model=P}});var S=F(p,2);{var E=P=>{var B=kh(),V=D(B);Na(V,{get WASM(){return e.WASM},get outliers(){return l(r).outliers},get model(){return l(r).model},className:"Group",csvOnly:!1,get dataset(){return l(r).newset},set dataset(z){l(r).newset=z},get resobj(){return l(r).newres},set resobj(z){l(r).newres=z}}),C(P,B)};Y(S,P=>{l(r).model&&P(E)})}var k=F(S,2);{var A=P=>{var B=Sh(),V=D(B);Ma(V,{get dataset(){return l(r).newset},get outliers(){return l(r).outliers},resetOutliers:u,undoOutliers:f}),C(P,B)};Y(k,P=>{l(r).outliers&&l(r).outliers.length>0&&P(A)})}var j=F(k,2);{var N=P=>{var B=Ch(),V=X(B),z=D(V);fe(z,{label:"Download",children:(U,Q)=>{var ne=Ah(),K=D(ne);ot(K,{text:"Res (new)",onclick:()=>ws(l(r).newres,l(r).newset,"new",l(r).outliers,l(r).model)}),C(U,ne)},$$slots:{default:!0}});var H=F(V,2),oe=D(H);{let U=y(()=>({new:l(r).newres}));Ta(oe,{get res(){return l(U)}})}C(P,B)};Y(j,P=>{l(r).newres&&P(N)})}var R=F(_,2),L=D(R);{var T=P=>{var B=Mh(),V=F(D(B),2);{var z=oe=>{var U=Nh();C(oe,U)},H=oe=>{var U=ge(),Q=X(U);{var ne=K=>{var Z=Th();C(K,Z)};Y(Q,K=>{l(r).newset||K(ne)},!0)}C(oe,U)};Y(V,oe=>{l(r).model?oe(H,!1):oe(z)})}C(P,B)},M=P=>{var B=ge(),V=X(B);{var z=H=>{var oe=ge(),U=X(oe);En(U,()=>l(r).neweres,Q=>{{let ne=y(()=>({new:l(r).newset})),K=y(()=>({new:l(r).newres}));Eh(Q,{markOutlier:c,showContributions:d,get data(){return l(ne)},get res(){return l(K)},get model(){return l(r).model}})}}),C(H,oe)};Y(V,H=>{l(r).model&&l(r).newres&&l(r).newset&&H(z)})}C(P,B)};Y(L,P=>{l(r).newres?P(M,!1):P(T)})}C(t,h),we()}var Lh=G('<sup style="color:red">β</sup>'),Rh=G('<li><button class="svelte-1josccy"> </button></li>'),Ih=G("<div><!></div>"),zh=G('<div class="info-container svelte-1josccy"><!></div>'),Fh=G('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function qh(t,e){_e(e,!0);let r=q(e,"tabs",19,()=>[]),s=q(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let a=ee(!1),c=ee(void 0),u=ee("Current session "),f=ee(!1);function d(N){I(u,N,!0),I(f,!0),setTimeout(()=>{I(u,"Current session "),I(f,!1)},1e3)}function v(){I(a,!0)}function h(){I(a,!1)}function m(N){l(c).tab=N}function g(){const N=indexedDB.open(o,1);N.onsuccess=R=>{const T=R.target.result.transaction(e.appID,"readwrite");T.objectStore(e.appID).delete("session"),T.oncomplete=()=>{I(c,e.initSession(),!0),d("Session was reinitialzed.")},T.onerror=()=>console.error("Failed to session from DB.")}}function b(N,R){window.localStorage.removeItem(e.appID+"-blocked");const L=indexedDB.open(o,1);L.onsuccess=T=>{const B=T.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);B.put(N,"session"),B.put(bs(new Date),"session-update")}}function _(){new Promise((N,R)=>{const L=indexedDB.open(o,1);L.onsuccess=T=>{const V=T.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");V.onsuccess=()=>N(V.result),V.onerror=()=>R(V.error)}}).then(N=>{p(N),I(u,"Last session is restored "),I(f,!0),setTimeout(()=>{I(u,"Current session "),I(f,!1)},1500)}).catch(N=>{console.error(N),I(c,e.initSession(),!0)})}function p(N){if(!N||N==="undefined"){I(c,e.initSession(),!0);return}const R=JSON.parse(N,ps);I(c,e.checkSession(R)?R:e.initSession(e.appID),!0)}function w(){const N=bs(new Date),R=e.appID+"-session-"+N+".json";l(c).date=N;const L=JSON.stringify(l(c),gl),T=new Blob([L],{type:"text/json"}),M=window.URL.createObjectURL(T),P=document.createElement("a");P.setAttribute("href",M),P.setAttribute("download",R),P.click()}function S(N){const R=new FileReader;R.onload=()=>{p(R.result),N.target.value=""},R.readAsText(N.target.files[0])}function E(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&g()}Hc(()=>{const N=e.appID,R=indexedDB.open(o,1);R.onupgradeneeded=L=>{const T=L.target.result;T.objectStoreNames.contains(N)||T.createObjectStore(N)},R.onsuccess=L=>{_()}});var k=ge(),A=X(k);{var j=N=>{var R=Fh(),L=D(R),T=D(L),M=D(T),P=F(M,2),B=D(P),V=F(B);{var z=ae=>{var te=Lh();C(ae,te)};Y(V,ae=>{s()&&ae(z)})}var H=F(P,2),oe=D(H),U=F(T,2);Qe(U,21,r,et,(ae,te,de)=>{var be=Rh();let he;var Fe=D(be);Fe.__click=()=>m(de),Fe.__keydown=()=>m(de);var Ie=D(Fe);ie(()=>{he=it(be,1,"nav-item svelte-1josccy",null,he,{selected:l(c).tab===de}),ke(Ie,l(te).name)}),C(ae,be)});var Q=F(L,2),ne=D(Q);En(ne,()=>l(c).date,ae=>{var te=ge(),de=X(te);Qe(de,17,r,et,(be,he,Fe)=>{var Ie=Ih();let qe;var W=D(Ie);Bn(W,()=>l(he).component,(J,$)=>{$(J,{get WASM(){return e.WASM},get session(){return l(c)},backupSession:b})}),ie(()=>qe=it(Ie,1,"tab-content svelte-1josccy",null,qe,{hidden:l(c).tab!==Fe})),C(be,Ie)}),C(ae,te)});var K=F(Q,2),Z=D(K);let le;var re=D(Z),ve=D(re),pe=F(re,2),Re=D(pe);Re.__change=S;var Te=F(pe,2);Te.__click=w;var Se=F(Te,2);Se.__click=E;var Me=F(Z,2),je=D(Me);je.__click=v,je.__keydown=v;var Ce=F(je,2);yr(Ce,()=>e.footer);var Ee=F(K,2);{var se=ae=>{Is(ae,{closeModal:h,children:(te,de)=>{var be=zh(),he=D(be);yr(he,()=>e.info),C(te,be)},$$slots:{default:!0}})};Y(Ee,ae=>{l(a)&&ae(se)})}ie(()=>{O(M,"alt",e.appShortTitle),ke(B,e.appTitle),ke(oe,e.appSlogan),le=it(Z,1,"session svelte-1josccy",null,le,{"no-buttons":l(f)}),ke(ve,l(u))}),C(N,R)};Y(A,N=>{l(c)&&N(j)})}C(t,k),we()}lt(["click","keydown","change"]);const Gh="modulepreload",Xh=function(t){return"/"+t},Kh={},Oh=function(e,r,s){let o=Promise.resolve();function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};async function Bh(t={}){var e,r=t,s=!!globalThis.window,o=!!globalThis.WorkerGlobalScope,a=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer";if(a){const{createRequire:W}=await Oh(async()=>{const{createRequire:J}=await Promise.resolve().then(()=>Wh);return{createRequire:J}},void 0);var c=W(fr&&fr.tagName.toUpperCase()==="SCRIPT"&&fr.src||new URL("pca.js",document.baseURI).href)}var u="./this.program",f=(W,J)=>{throw J},d=fr&&fr.tagName.toUpperCase()==="SCRIPT"&&fr.src||new URL("pca.js",document.baseURI).href,v="",h,m;if(a){var g=c("fs");d.startsWith("file:")&&(v=c("path").dirname(c("url").fileURLToPath(d))+"/"),m=W=>(W=E(W)?new URL(W):W,g.readFileSync(W)),h=async W=>(W=E(W)?new URL(W):W,g.readFileSync(W,void 0)),1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),f=(W,J)=>{throw process.exitCode=W,J}}else if(s||o){try{v=new URL(".",d).href}catch{}o&&(m=W=>{var J=new XMLHttpRequest;return J.open("GET",W,!1),J.responseType="arraybuffer",J.send(null),new Uint8Array(J.response)}),h=async W=>{if(E(W))return new Promise(($,ce)=>{var ue=new XMLHttpRequest;ue.open("GET",W,!0),ue.responseType="arraybuffer",ue.onload=()=>{ue.status==200||ue.status==0&&ue.response?$(ue.response):ce(ue.status)},ue.onerror=ce,ue.send(null)});var J=await fetch(W,{credentials:"same-origin"});if(J.ok)return J.arrayBuffer();throw Error(J.status+" : "+J.url)}}var b=console.log.bind(console),_=console.error.bind(console),p,w=!1,S,E=W=>W.startsWith("file://"),k,A,j,N,R,L=!1;function T(){var W=Fe.buffer;j=new Int8Array(W),N=new Uint8Array(W),r.HEAP32=new Int32Array(W),R=new Uint32Array(W),r.HEAPF64=new Float64Array(W),new BigInt64Array(W),new BigUint64Array(W)}function M(W){throw r.onAbort?.(W),W="Aborted("+W+")",_(W),w=!0,W=new WebAssembly.RuntimeError(W+". Build with -sASSERTIONS for more info."),A?.(W),W}var P;async function B(W){if(!p)try{var J=await h(W);return new Uint8Array(J)}catch{}if(W==P&&p)W=new Uint8Array(p);else if(m)W=m(W);else throw"both async and sync fetching of the wasm failed";return W}async function V(W,J){try{var $=await B(W);return await WebAssembly.instantiate($,J)}catch(ce){_(`failed to asynchronously prepare wasm: ${ce}`),M(ce)}}async function z(W){var J=P;if(!p&&!E(J)&&!a)try{var $=fetch(J,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming($,W)}catch(ce){_(`wasm streaming compile failed: ${ce}`),_("falling back to ArrayBuffer instantiation")}return V(J,W)}class H{name="ExitStatus";constructor(J){this.message=`Program terminated with exit(${J})`,this.status=J}}var oe=W=>{for(;0<W.length;)W.shift()(r)},U=[],Q=[],ne=()=>{var W=r.preRun.shift();Q.push(W)},K=!0,Z=0,le={},re=W=>{S=W,K||0<Z||(r.onExit?.(W),w=!0),f(W,new H(W))},ve=W=>{if(!w)try{if(W(),!(K||0<Z))try{S=W=S,re(W)}catch(J){J instanceof H||J=="unwind"||f(1,J)}}catch(J){J instanceof H||J=="unwind"||f(1,J)}},pe=globalThis.TextDecoder&&new TextDecoder,Re=(W,J=0)=>{for(var $=J,ce=$+void 0;W[$]&&!($>=ce);)++$;if(16<$-J&&W.buffer&&pe)return pe.decode(W.subarray(J,$));for(ce="";J<$;){var ue=W[J++];if(ue&128){var me=W[J++]&63;if((ue&224)==192)ce+=String.fromCharCode((ue&31)<<6|me);else{var Oe=W[J++]&63;ue=(ue&240)==224?(ue&15)<<12|me<<6|Oe:(ue&7)<<18|me<<12|Oe<<6|W[J++]&63,65536>ue?ce+=String.fromCharCode(ue):(ue-=65536,ce+=String.fromCharCode(55296|ue>>10,56320|ue&1023))}}else ce+=String.fromCharCode(ue)}return ce},Te={},Se=()=>{if(!Me){var W={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},J;for(J in Te)Te[J]===void 0?delete W[J]:W[J]=Te[J];var $=[];for(J in W)$.push(`${J}=${W[J]}`);Me=$}return Me},Me,je=(W,J,$)=>{var ce=N;if(!(0<$))return 0;var ue=J;$=J+$-1;for(var me=0;me<W.length;++me){var Oe=W.codePointAt(me);if(127>=Oe){if(J>=$)break;ce[J++]=Oe}else if(2047>=Oe){if(J+1>=$)break;ce[J++]=192|Oe>>6,ce[J++]=128|Oe&63}else if(65535>=Oe){if(J+2>=$)break;ce[J++]=224|Oe>>12,ce[J++]=128|Oe>>6&63,ce[J++]=128|Oe&63}else{if(J+3>=$)break;ce[J++]=240|Oe>>18,ce[J++]=128|Oe>>12&63,ce[J++]=128|Oe>>6&63,ce[J++]=128|Oe&63,me++}}return ce[J]=0,J-ue},Ce=W=>{for(var J=0,$=0;$<W.length;++$){var ce=W.charCodeAt($);127>=ce?J++:2047>=ce?J+=2:55296<=ce&&57343>=ce?(J+=4,++$):J+=3}return J},Ee=[null,[],[]],se=()=>{if(a){var W=c("crypto");return J=>W.randomFillSync(J)}return J=>crypto.getRandomValues(J)},ae=W=>{(ae=se())(W)};if(r.noExitRuntime&&(K=r.noExitRuntime),r.print&&(b=r.print),r.printErr&&(_=r.printErr),r.wasmBinary&&(p=r.wasmBinary),r.thisProgram&&(u=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.shift()();r.ccall=(W,J,$,ce)=>{var ue={string:Ye=>{var dt=0;if(Ye!=null&&Ye!==0){dt=Ce(Ye)+1;var cr=be(dt);je(Ye,cr,dt),dt=cr}return dt},array:Ye=>{var dt=be(Ye.length);return j.set(Ye,dt),dt}};W=r["_"+W];var me=[],Oe=0;if(ce)for(var Be=0;Be<ce.length;Be++){var De=ue[$[Be]];De?(Oe===0&&(Oe=he()),me[Be]=De(ce[Be])):me[Be]=ce[Be]}return $=W(...me),$=(function(Ye){return Oe!==0&&de(Oe),J==="string"?Ye?Re(N,Ye):"":J==="boolean"?!!Ye:Ye})($)};var te,de,be,he,Fe,Ie={g:()=>M(""),j:()=>{K=!1,Z=0},k:(W,J)=>{if(le[W]&&(clearTimeout(le[W].id),delete le[W]),!J)return 0;var $=setTimeout(()=>{delete le[W],ve(()=>te(W,performance.now()))},J);return le[W]={id:$,U:J},0},a:()=>Date.now(),c:W=>_(W?Re(N,W):""),b:()=>performance.now(),l:W=>{var J=N.length;if(W>>>=0,2147483648<W)return!1;for(var $=1;4>=$;$*=2){var ce=J*(1+.2/$);ce=Math.min(ce,W+100663296);e:{ce=(Math.min(2147483648,65536*Math.ceil(Math.max(W,ce)/65536))-Fe.buffer.byteLength+65535)/65536|0;try{Fe.grow(ce),T();var ue=1;break e}catch{}ue=void 0}if(ue)return!0}return!1},e:(W,J)=>{var $=0,ce=0,ue;for(ue of Se()){var me=J+$;R[W+ce>>2]=me,$+=je(ue,me,1/0)+1,ce+=4}return 0},f:(W,J)=>{var $=Se();R[W>>2]=$.length,W=0;for(var ce of $)W+=Ce(ce)+1;return R[J>>2]=W,0},h:(W,J,$,ce)=>{for(var ue=0,me=0;me<$;me++){var Oe=R[J>>2],Be=R[J+4>>2];J+=8;for(var De=0;De<Be;De++){var Ye=W,dt=N[Oe+De],cr=Ee[Ye];dt===0||dt===10?((Ye===1?b:_)(Re(cr)),cr.length=0):cr.push(dt)}ue+=Be}return R[ce>>2]=ue,0},i:re,d:(W,J)=>(ae(N.subarray(W,W+J)),0)},qe;return qe=await(async function(){function W($){return $=qe=$.exports,r._pcafit_wasm=$.o,r._free=$.p,r._malloc=$.q,r._pcapredict_wasm=$.r,r._pcvpca_wasm=$.s,r._prepfit_wasm=$.t,r._prepapply_wasm=$.u,te=$.v,r._strdup=$.w,r._strndup=$.x,r.__ZdaPv=$.y,r.__ZdaPvm=$.z,r.__ZdlPv=$.A,r.__ZdlPvm=$.B,r.__Znaj=$.C,r.__ZnajSt11align_val_t=$.D,r.__Znwj=$.E,r.__ZnwjSt11align_val_t=$.F,r.___libc_calloc=$.G,r.___libc_free=$.H,r.___libc_malloc=$.I,r.___libc_realloc=$.J,r._emscripten_builtin_malloc=$.K,r._emscripten_builtin_calloc=$.L,r._emscripten_builtin_free=$.M,r._emscripten_builtin_realloc=$.N,r._malloc_size=$.O,r._malloc_usable_size=$.P,r._reallocf=$.Q,de=$.R,be=$.S,he=$.T,Fe=$.m,T(),qe}var J={a:Ie};return r.instantiateWasm?new Promise($=>{r.instantiateWasm(J,(ce,ue)=>{$(W(ce))})}):(P??=r.locateFile?r.locateFile?r.locateFile("pca_wasm.wasm",v):v+"pca_wasm.wasm":new URL("/pca/pca.wasm",fr&&fr.tagName.toUpperCase()==="SCRIPT"&&fr.src||new URL("pca.js",document.baseURI).href).href,W((await z(J)).instance))})(),(function(){function W(){if(r.calledRun=!0,!w){if(L=!0,qe.n(),k?.(r),r.onRuntimeInitialized?.(),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var J=r.postRun.shift();U.push(J)}oe(U)}}if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne();oe(Q),r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),W()},1)):W()})(),L?e=r:e=new Promise((W,J)=>{k=W,A=J}),e}var Vh=G('<p>Current release: <span>2.1.7</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="/pca/Wines.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmpfjgu7n4y-slf8AAN74xC">video lessons</a></p>'),Dh=G(`<h2>Principal Component Analysis</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using PCA models for data exploration
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>Check out YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmpfjgu7n4y-slf8AAN74xC">video-lessons</a></p> <h3>v. 2.1.7</h3> <p class="release-info">released 11/02/2026</p> <ul><li>Small improvements and updates.</li></ul> <h3>v. 2.1.6</h3> <p class="release-info">released 30/11/2025</p> <ul><li>Fixed several small bugs and improved app performance.</li></ul> <h3>v. 2.1.5</h3> <p class="release-info">released 4/08/2025</p> <ul><li>Updated link to video-tutorial.</li></ul> <h3>v. 2.1.4</h3> <p class="release-info">released 1/08/2025</p> <ul><li>Fixed issue with data loader when trim trails is used in preprocessing.</li></ul>`,1);function Yh(t,e){_e(e,!1);function r(c){c.train.calset=null,c.new.model=null,c.tab=0}function s(c){const u=Object.keys(c);if(!["date","tab","train","new"].every(v=>u.includes(v)))return!1;const f=Object.keys(c.train);if(!["model","calset","calsetp","pvset","calres","pvres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(v=>f.includes(v)))return!1;const d=Object.keys(c.new);return!!["model","newset","newres","outliers"].every(v=>d.includes(v))}function o(){return{date:bs(new Date),tab:0,train:{model:0,calset:0,calsetp:0,pvset:0,calres:0,pvres:0,outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},new:{model:0,newset:0,newres:0,outliers:[]}}}const a=[{name:"Train",label:"train",component:mh},{name:"Project",label:"new",component:jh}];Dc(),qh(t,{appID:"pca",appTitle:"PCA",appShortTitle:"PCA",appSlogan:"Principal component analysis",get WASM(){return Bh},get tabs(){return a},initSession:o,checkSession:s,resetSession:r,footer:f=>{var d=Vh();C(f,d)},info:f=>{var d=Dh();C(f,d)},$$slots:{footer:!0,info:!0}}),we()}xc(Yh,{target:document.body});const Wh=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pca.js.map
