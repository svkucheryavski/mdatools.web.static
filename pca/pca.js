var im=Object.defineProperty;var ac=ot=>{throw TypeError(ot)};var cm=(ot,Je,yt)=>Je in ot?im(ot,Je,{enumerable:!0,configurable:!0,writable:!0,value:yt}):ot[Je]=yt;var fr=(ot,Je,yt)=>cm(ot,typeof Je!="symbol"?Je+"":Je,yt),ya=(ot,Je,yt)=>Je.has(ot)||ac("Cannot "+yt);var De=(ot,Je,yt)=>(ya(ot,Je,"read from private field"),yt?yt.call(ot):Je.get(ot)),Nt=(ot,Je,yt)=>Je.has(ot)?ac("Cannot add the same private member more than once"):Je instanceof WeakSet?Je.add(ot):Je.set(ot,yt),Wt=(ot,Je,yt,en)=>(ya(ot,Je,"write to private field"),en?en.call(ot,yt):Je.set(ot,yt),yt),$r=(ot,Je,yt)=>(ya(ot,Je,"access private method"),yt);(function(){"use strict";var On,Vn,Kr,il,cl,xn,Dn,kn,Jr,Yn,ul,fl,ir,sc,eo,xa,Qr,Wn,dl,Ql,ic,nc;var ot=document.createElement("style");ot.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1986c5z{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1986c5z:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1986c5z:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1986c5z:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1986c5z{display:none}.control-element.error.svelte-1986c5z{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1986c5z{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1986c5z>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1986c5z>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1986c5z>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1986c5z>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1986c5z .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1986c5z .range-value_left,.control-element.svelte-1986c5z .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1986c5z .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1986c5z .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1986c5z .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1986c5z .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1986c5z .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1986c5z .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1986c5z .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1986c5z .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1986c5z .textinput>input:active::placeholder,.control-element.svelte-1986c5z .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1986c5z .textinput>input:focus,.control-element.svelte-1986c5z .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .textinput.error>input,.control-element.svelte-1986c5z .textinput.error>input:focus,.control-element.svelte-1986c5z .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1986c5z .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1986c5z .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1986c5z .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.control-element.res-switcher{margin-top:1em;margin-bottom:0;padding-bottom:0;justify-content:center;background:transparent;font-size:.8rem}.control-element.res-switcher:hover{background:transparent}.control-element.res-switcher .selector{justify-content:center}.control-element.res-switcher>.selector>.option{background-color:#e8e8e8;border-color:#708090;color:#607080}.control-element.res-switcher>.selector>.option:not(.selected):hover{background-color:#fffef0;color:#607080;border-color:#607080}.control-element.res-switcher>.selector>.option.selected{background-color:#607080;color:#e8f0f8;border-color:#607080}table.svelte-zebw4f{width:100%;border-collapse:collapse}tr.svelte-zebw4f{width:100%}th.svelte-zebw4f{border-bottom:1px solid #a0a0a0}th.svelte-zebw4f,td.svelte-zebw4f{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-q7wo60{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-q7wo60{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-q7wo60{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-q7wo60{grid-area:header}.close-button.svelte-q7wo60{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-q7wo60:hover{background-color:#4e5052}.isdark.svelte-q7wo60,.isdark.svelte-q7wo60 .header:where(.svelte-q7wo60),.isdark.svelte-q7wo60 .body:where(.svelte-q7wo60){background-color:#606060}.isdark.svelte-q7wo60 .close-button:where(.svelte-q7wo60){color:#433201;background-color:#c2be9b}.isdark.svelte-q7wo60 .close-button:where(.svelte-q7wo60):hover{background-color:#f0f674}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.info-details.svelte-1l1cvmx{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul{padding:0;margin:0;list-style:none}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul>li{padding:.25em 0}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-1l1cvmx:hover>span:where(.svelte-1l1cvmx){visibility:visible}.info{position:relative}.info-text.svelte-1dxrrpt{line-height:1.5em}.info-text.svelte-1dxrrpt>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1dxrrpt>.file-name:where(.svelte-1dxrrpt){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-2gffce{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-2gffce:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-2gffce{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-15cx0gr{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-15cx0gr>.control-element:last-child .button-down,.selected-methods-list.svelte-15cx0gr>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-15cx0gr:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-15cx0gr{margin-top:1em;font-size:.9em}.methods-list.svelte-15cx0gr>div{background:#ebf0f0}.final.svelte-15cx0gr .button-up,.final.svelte-15cx0gr .button-down,.final.svelte-15cx0gr .button-cancel{visibility:hidden}.plot-panel.svelte-x8qn01{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-x8qn01{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-x8qn01{padding:0 .25em 0 .5em}.plot.svelte-x8qn01{width:100%;height:calc(100% - 15px)}@media (min-width:1100px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr 400px}}.widget-container.svelte-1soqt9v{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-1soqt9v{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1soqt9v{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1soqt9v>div:where(.svelte-1soqt9v){border-radius:.25rem}@media (min-width:1300px){.widget-container.svelte-1soqt9v{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.widget-container.svelte-1soqt9v{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}.app-container.svelte-b7gdku{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-b7gdku{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-b7gdku{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-b7gdku>div:where(.svelte-b7gdku){border-radius:.25rem}.app-controls.svelte-b7gdku>.result-stats:where(.svelte-b7gdku){background:#e8e8e8}.help-text.svelte-b7gdku{margin-top:.25rem}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku),.help-text.svelte-b7gdku>div:where(.svelte-b7gdku){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-b7gdku table:where(.svelte-b7gdku){border-collapse:collapse}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) td:where(.svelte-b7gdku){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) thead:where(.svelte-b7gdku) tr:where(.svelte-b7gdku) td:where(.svelte-b7gdku){font-weight:700;background:#f8f4e0}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) td:where(.svelte-b7gdku):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) tbody:where(.svelte-b7gdku) td:where(.svelte-b7gdku):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-b7gdku{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-b7gdku{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-b7gdku{grid-template-columns:min(330px,30%) 1fr}}.info-text.svelte-3v2vv7{line-height:1.5em}.info-text.svelte-3v2vv7>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-3v2vv7>.file-name:where(.svelte-3v2vv7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-1v7q3pk{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1v7q3pk{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1v7q3pk{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1v7q3pk>div:where(.svelte-1v7q3pk){border-radius:.25rem}.app-controls.svelte-1v7q3pk>.result-stats:where(.svelte-1v7q3pk){background:#e8e8e8}.help-text.svelte-1v7q3pk{margin-top:.25rem}.help-text.svelte-1v7q3pk>p:where(.svelte-1v7q3pk){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1v7q3pk>p:where(.svelte-1v7q3pk):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1v7q3pk>p:where(.svelte-1v7q3pk):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1v7q3pk{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1v7q3pk{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1v7q3pk{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(ot);var Je=typeof document<"u"?document.currentScript:null;const yt=!1;var en=Array.isArray,cc=Array.prototype.indexOf,to=Array.from,ro=Object.defineProperty,Tr=Object.getOwnPropertyDescriptor,ka=Object.getOwnPropertyDescriptors,Ea=Object.prototype,uc=Array.prototype,ml=Object.getPrototypeOf,Aa=Object.isExtensible;function Cn(t){return typeof t=="function"}const Ct=()=>{};function fc(t){return typeof(t==null?void 0:t.then)=="function"}function dc(t){return t()}function gl(t){for(var e=0;e<t.length;e++)t[e]()}function vc(){var t,e,r=new Promise((o,a)=>{t=o,e=a});return{promise:r,resolve:t,reject:e}}function no(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const o of t)if(r.push(o),r.length===e)break;return r}const Ut=2,lo=4,pl=8,Sn=16,xr=32,tn=64,Ca=128,Qt=256,bl=512,Rt=1024,Zt=2048,Nr=4096,nr=8192,rn=16384,wl=32768,Mn=65536,Sa=1<<17,hc=1<<18,oo=1<<19,ao=1<<20,so=1<<21,io=1<<22,nn=1<<23,Pr=Symbol("$state"),Ma=Symbol("legacy props"),mc=Symbol(""),co=new class extends Error{constructor(){super(...arguments);fr(this,"name","StaleReactionError");fr(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function gc(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Ta(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function pc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function bc(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function wc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _c(t){throw new Error("https://svelte.dev/e/effect_orphan")}function yc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xc(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function kc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ec(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ac(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const _l=1,yl=2,Na=4,Cc=8,Sc=16,Mc=1,Tc=2,Nc=4,Pc=8,zc=16,Lc=1,Rc=2,Ic=4,Pa=1,jc=2,xt=Symbol(),Fc="http://www.w3.org/1999/xhtml";let qc=!1;function za(t){return t===this.v}function La(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Bc(t,e){return t!==e}function Ra(t){return!La(t,this.v)}let Tn=!1,Oc=!1;function Vc(){Tn=!0}const Dc=[];function Yc(t,e=!1){return xl(t,new Map,"",Dc)}function xl(t,e,r,o,a=null){if(typeof t=="object"&&t!==null){var s=e.get(t);if(s!==void 0)return s;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(en(t)){var c=Array(t.length);e.set(t,c),a!==null&&e.set(a,c);for(var u=0;u<t.length;u+=1){var f=t[u];u in t&&(c[u]=xl(f,e,r,o))}return c}if(ml(t)===Ea){c={},e.set(t,c),a!==null&&e.set(a,c);for(var d in t)c[d]=xl(t[d],e,r,o);return c}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return xl(t.toJSON(),e,r,o,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let at=null;function Nn(t){at=t}function Ot(t){return Ia().get(t)}function Wc(t,e){return Ia().set(t,e),e}function pe(t,e=!1,r){at={p:at,c:null,e:null,s:t,x:null,l:Tn&&!e?{s:null,u:null,$:[]}:null}}function be(t){var e=at,r=e.e;if(r!==null){e.e=null;for(var o of r)Ja(o)}return at=e.p,{}}function zr(){return!Tn||at!==null&&at.l===null}function Ia(t){return at===null&&Ta(),at.c??(at.c=new Map(Uc(at)||void 0))}function Uc(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}const Hc=new WeakMap;function Gc(t){var e=He;if(e===null)return Ge.f|=nn,t;if((e.f&wl)===0){if((e.f&Ca)===0)throw!e.parent&&t instanceof Error&&ja(t),t;e.b.error(t)}else uo(t,e)}function uo(t,e){for(;e!==null;){if((e.f&Ca)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t instanceof Error&&ja(t),t}function ja(t){const e=Hc.get(t);e&&(ro(t,"message",{value:e.message}),ro(t,"stack",{value:e.stack}))}let Un=[],fo=[];function Fa(){var t=Un;Un=[],gl(t)}function Xc(){var t=fo;fo=[],gl(t)}function Hn(t){Un.length===0&&queueMicrotask(Fa),Un.push(t)}function Kc(){Un.length>0&&Fa(),fo.length>0&&Xc()}function Jc(){for(var t=He.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&gc(),t}function Gn(t){var e=Ut|Zt,r=Ge!==null&&(Ge.f&Ut)!==0?Ge:null;return He===null||r!==null&&(r.f&Qt)!==0?e|=Qt:He.f|=oo,{ctx:at,deps:null,effects:null,equals:za,f:e,fn:t,reactions:null,rv:0,v:xt,wv:0,parent:r??He,ac:null}}function Qc(t,e){let r=He;r===null&&pc();var o=r.b,a=void 0,s=sn(xt),c=null,u=!Ge;return cu(()=>{try{var f=t()}catch(m){f=Promise.reject(m)}var d=()=>f;a=(c==null?void 0:c.then(d,d))??Promise.resolve(f),c=a;var v=Ze,h=o.pending;u&&(o.update_pending_count(1),h||v.increment());const g=(m,b=void 0)=>{c=null,h||v.activate(),b?b!==co&&(s.f|=nn,Rr(s,b)):((s.f&nn)!==0&&(s.f^=nn),Rr(s,m)),u&&(o.update_pending_count(-1),h||v.decrement()),Oa()};if(a.then(g,m=>g(null,m||"unknown")),v)return()=>{queueMicrotask(()=>v.neuter())}}),new Promise(f=>{function d(v){function h(){v===a?f(s):d(a)}v.then(h,h)}d(a)})}function y(t){const e=Gn(t);return as(e),e}function vo(t){const e=Gn(t);return e.equals=Ra,e}function qa(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)hr(e[r])}}function Zc(t){for(var e=t.parent;e!==null;){if((e.f&Ut)===0)return e;e=e.parent}return null}function ho(t){var e,r=He;gr(Zc(t));try{qa(t),e=fs(t)}finally{gr(r)}return e}function Ba(t){var e=ho(t);if(t.equals(e)||(t.v=e,t.wv=cs()),!cn)if(Lr!==null)Lr.set(t,t.v);else{var r=(Fr||(t.f&Qt)!==0)&&t.deps!==null?Nr:Rt;Vt(t,r)}}function $c(t,e,r){const o=zr()?Gn:vo;if(e.length===0){r(t.map(o));return}var a=Ze,s=He,c=eu(),u=Jc();Promise.all(e.map(f=>Qc(f))).then(f=>{a==null||a.activate(),c();try{r([...t.map(o),...f])}catch(d){(s.f&rn)===0&&uo(d,s)}a==null||a.deactivate(),Oa()}).catch(f=>{u.error(f)})}function eu(){var t=He,e=Ge,r=at;return function(){gr(t),$t(e),Nn(r)}}function Oa(){gr(null),$t(null),Nn(null)}const Xn=new Set;let Ze=null,kl=null,Lr=null,Va=new Set,El=[];function Da(){const t=El.shift();El.length>0&&queueMicrotask(Da),t()}let ln=[],Al=null,mo=!1,Cl=!1;const Jl=class Jl{constructor(){Nt(this,ir);fr(this,"current",new Map);Nt(this,On,new Map);Nt(this,Vn,new Set);Nt(this,Kr,0);Nt(this,il,null);Nt(this,cl,!1);Nt(this,xn,[]);Nt(this,Dn,[]);Nt(this,kn,[]);Nt(this,Jr,[]);Nt(this,Yn,[]);Nt(this,ul,[]);Nt(this,fl,[]);fr(this,"skipped_effects",new Set)}process(e){var s;ln=[],kl=null;var r=null;if(Xn.size>1){r=new Map,Lr=new Map;for(const[c,u]of this.current)r.set(c,{v:c.v,wv:c.wv}),c.v=u;for(const c of Xn)if(c!==this)for(const[u,f]of De(c,On))r.has(u)||(r.set(u,{v:u.v,wv:u.wv}),u.v=f)}for(const c of e)$r(this,ir,sc).call(this,c);if(De(this,xn).length===0&&De(this,Kr)===0){$r(this,ir,xa).call(this);var o=De(this,kn),a=De(this,Jr);Wt(this,kn,[]),Wt(this,Jr,[]),Wt(this,Yn,[]),kl=Ze,Ze=null,Wa(o),Wa(a),Ze===null?Ze=this:Xn.delete(this),(s=De(this,il))==null||s.resolve()}else $r(this,ir,eo).call(this,De(this,kn)),$r(this,ir,eo).call(this,De(this,Jr)),$r(this,ir,eo).call(this,De(this,Yn));if(r){for(const[c,{v:u,wv:f}]of r)c.wv<=f&&(c.v=u);Lr=null}for(const c of De(this,xn))Zn(c);for(const c of De(this,Dn))Zn(c);Wt(this,xn,[]),Wt(this,Dn,[])}capture(e,r){De(this,On).has(e)||De(this,On).set(e,r),this.current.set(e,e.v)}activate(){Ze=this}deactivate(){Ze=null,kl=null;for(const e of Va)if(Va.delete(e),e(),Ze!==null)break}neuter(){Wt(this,cl,!0)}flush(){ln.length>0?Ya():$r(this,ir,xa).call(this),Ze===this&&(De(this,Kr)===0&&Xn.delete(this),this.deactivate())}increment(){Wt(this,Kr,De(this,Kr)+1)}decrement(){if(Wt(this,Kr,De(this,Kr)-1),De(this,Kr)===0){for(const e of De(this,ul))Vt(e,Zt),on(e);for(const e of De(this,fl))Vt(e,Nr),on(e);Wt(this,kn,[]),Wt(this,Jr,[]),this.flush()}else this.deactivate()}add_callback(e){De(this,Vn).add(e)}settled(){return(De(this,il)??Wt(this,il,vc())).promise}static ensure(){if(Ze===null){const e=Ze=new Jl;Xn.add(Ze),Cl||Jl.enqueue(()=>{Ze===e&&e.flush()})}return Ze}static enqueue(e){El.length===0&&queueMicrotask(Da),El.unshift(e)}};On=new WeakMap,Vn=new WeakMap,Kr=new WeakMap,il=new WeakMap,cl=new WeakMap,xn=new WeakMap,Dn=new WeakMap,kn=new WeakMap,Jr=new WeakMap,Yn=new WeakMap,ul=new WeakMap,fl=new WeakMap,ir=new WeakSet,sc=function(e){var v;e.f^=Rt;for(var r=e.first;r!==null;){var o=r.f,a=(o&(xr|tn))!==0,s=a&&(o&Rt)!==0,c=s||(o&nr)!==0||this.skipped_effects.has(r);if(!c&&r.fn!==null){if(a)r.f^=Rt;else if((o&Rt)===0)if((o&lo)!==0)De(this,Jr).push(r);else if((o&io)!==0){var u=(v=r.b)!=null&&v.pending?De(this,Dn):De(this,xn);u.push(r)}else Tl(r)&&((r.f&Sn)!==0&&De(this,Yn).push(r),Zn(r));var f=r.first;if(f!==null){r=f;continue}}var d=r.parent;for(r=r.next;r===null&&d!==null;)r=d.next,d=d.parent}},eo=function(e){for(const r of e)((r.f&Zt)!==0?De(this,ul):De(this,fl)).push(r),Vt(r,Rt);e.length=0},xa=function(){if(!De(this,cl))for(const e of De(this,Vn))e();De(this,Vn).clear()};let Kn=Jl;function tu(t){var e=Cl;Cl=!0;try{for(var r;;){if(Kc(),ln.length===0&&(Ze==null||Ze.flush(),ln.length===0))return Al=null,r;Ya()}}finally{Cl=e}}function Ya(){var t=zn;mo=!0;try{var e=0;for(ls(!0);ln.length>0;){var r=Kn.ensure();if(e++>1e3){var o,a;ru()}r.process(ln),an.clear()}}finally{mo=!1,ls(t),Al=null}}function ru(){try{yc()}catch(t){uo(t,Al)}}function Wa(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var o=t[r++];if((o.f&(rn|nr))===0&&Tl(o)){var a=Ze?Ze.current.size:0;if(Zn(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null&&o.ac===null?ts(o):o.fn=null),Ze!==null&&Ze.current.size>a&&(o.f&ao)!==0)break}}for(;r<e;)on(t[r++])}}function on(t){for(var e=Al=t;e.parent!==null;){e=e.parent;var r=e.f;if(mo&&e===He&&(r&Sn)!==0)return;if((r&(tn|xr))!==0){if((r&Rt)===0)return;e.f^=Rt}}ln.push(e)}const an=new Map;function sn(t,e){var r={f:0,v:t,reactions:null,equals:za,rv:0,wv:0};return r}function ee(t,e){const r=sn(t);return as(r),r}function go(t,e=!1,r=!0){var a;const o=sn(t);return e||(o.equals=Ra),Tn&&r&&at!==null&&at.l!==null&&((a=at.l).s??(a.s=[])).push(o),o}function I(t,e,r=!1){Ge!==null&&(!mr||(Ge.f&Sa)!==0)&&zr()&&(Ge.f&(Ut|Sn|io|Sa))!==0&&!(jt!=null&&jt.includes(t))&&Ac();let o=r?qe(e):e;return Rr(t,o)}function Rr(t,e){if(!t.equals(e)){var r=t.v;cn?an.set(t,e):an.set(t,r),t.v=e;var o=Kn.ensure();o.capture(t,r),(t.f&Ut)!==0&&((t.f&Zt)!==0&&ho(t),Vt(t,(t.f&Qt)===0?Rt:Nr)),t.wv=cs(),Ua(t,Zt),zr()&&He!==null&&(He.f&Rt)!==0&&(He.f&(xr|tn))===0&&(er===null?fu([t]):er.push(t))}return e}function po(t){I(t,t.v+1)}function Ua(t,e){var r=t.reactions;if(r!==null)for(var o=zr(),a=r.length,s=0;s<a;s++){var c=r[s],u=c.f;if(!(!o&&c===He)){var f=(u&Zt)===0;f&&Vt(c,e),(u&Ut)!==0?Ua(c,Nr):f&&on(c)}}}function qe(t){if(typeof t!="object"||t===null||Pr in t)return t;const e=ml(t);if(e!==Ea&&e!==uc)return t;var r=new Map,o=en(t),a=ee(0),s=un,c=u=>{if(un===s)return u();var f=Ge,d=un;$t(null),is(s);var v=u();return $t(f),is(d),v};return o&&r.set("length",ee(t.length)),new Proxy(t,{defineProperty(u,f,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&kc();var v=r.get(f);return v===void 0?v=c(()=>{var h=ee(d.value);return r.set(f,h),h}):I(v,d.value,!0),!0},deleteProperty(u,f){var d=r.get(f);if(d===void 0){if(f in u){const v=c(()=>ee(xt));r.set(f,v),po(a)}}else I(d,xt),po(a);return!0},get(u,f,d){var m;if(f===Pr)return t;var v=r.get(f),h=f in u;if(v===void 0&&(!h||(m=Tr(u,f))!=null&&m.writable)&&(v=c(()=>{var b=qe(h?u[f]:xt),w=ee(b);return w}),r.set(f,v)),v!==void 0){var g=l(v);return g===xt?void 0:g}return Reflect.get(u,f,d)},getOwnPropertyDescriptor(u,f){var d=Reflect.getOwnPropertyDescriptor(u,f);if(d&&"value"in d){var v=r.get(f);v&&(d.value=l(v))}else if(d===void 0){var h=r.get(f),g=h==null?void 0:h.v;if(h!==void 0&&g!==xt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return d},has(u,f){var g;if(f===Pr)return!0;var d=r.get(f),v=d!==void 0&&d.v!==xt||Reflect.has(u,f);if(d!==void 0||He!==null&&(!v||(g=Tr(u,f))!=null&&g.writable)){d===void 0&&(d=c(()=>{var m=v?qe(u[f]):xt,b=ee(m);return b}),r.set(f,d));var h=l(d);if(h===xt)return!1}return v},set(u,f,d,v){var A;var h=r.get(f),g=f in u;if(o&&f==="length")for(var m=d;m<h.v;m+=1){var b=r.get(m+"");b!==void 0?I(b,xt):m in u&&(b=c(()=>ee(xt)),r.set(m+"",b))}if(h===void 0)(!g||(A=Tr(u,f))!=null&&A.writable)&&(h=c(()=>ee(void 0)),I(h,qe(d)),r.set(f,h));else{g=h.v!==xt;var w=c(()=>qe(d));I(h,w)}var p=Reflect.getOwnPropertyDescriptor(u,f);if(p!=null&&p.set&&p.set.call(v,d),!g){if(o&&typeof f=="string"){var _=r.get("length"),k=Number(f);Number.isInteger(k)&&k>=_.v&&I(_,k+1)}po(a)}return!0},ownKeys(u){l(a);var f=Reflect.ownKeys(u).filter(h=>{var g=r.get(h);return g===void 0||g.v!==xt});for(var[d,v]of r)v.v!==xt&&!(d in u)&&f.push(d);return f},setPrototypeOf(){Ec()}})}var bo,Ha,Ga,Xa;function nu(){if(bo===void 0){bo=window,Ha=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Ga=Tr(e,"firstChild").get,Xa=Tr(e,"nextSibling").get,Aa(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Aa(r)&&(r.__t=void 0)}}function Ir(t=""){return document.createTextNode(t)}function Ht(t){return Ga.call(t)}function Sl(t){return Xa.call(t)}function O(t,e){return Ht(t)}function K(t,e){{var r=Ht(t);return r instanceof Comment&&r.data===""?Sl(r):r}}function R(t,e=1,r=!1){let o=t;for(;e--;)o=Sl(o);return o}function lu(t){t.textContent=""}function Ml(){return!1}function Ka(t){He===null&&Ge===null&&_c(),Ge!==null&&(Ge.f&Qt)!==0&&He===null&&wc(),cn&&bc()}function ou(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function dr(t,e,r,o=!0){var a=He;a!==null&&(a.f&nr)!==0&&(t|=nr);var s={ctx:at,deps:null,nodes_start:null,nodes_end:null,f:t|Zt,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Zn(s),s.f|=wl}catch(f){throw hr(s),f}else e!==null&&on(s);var c=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&oo)===0;if(!c&&o&&(a!==null&&ou(s,a),Ge!==null&&(Ge.f&Ut)!==0&&(t&tn)===0)){var u=Ge;(u.effects??(u.effects=[])).push(s)}return s}function au(t){const e=dr(pl,null,!1);return Vt(e,Rt),e.teardown=t,e}function we(t){Ka();var e=He.f,r=!Ge&&(e&xr)!==0&&(e&wl)===0;if(r){var o=at;(o.e??(o.e=[])).push(t)}else return Ja(t)}function Ja(t){return dr(lo|ao,t,!1)}function su(t){return Ka(),dr(pl|ao,t,!0)}function iu(t){Kn.ensure();const e=dr(tn,t,!0);return(r={})=>new Promise(o=>{r.outro?jr(e,()=>{hr(e),o(void 0)}):(hr(e),o(void 0))})}function wo(t){return dr(lo,t,!1)}function cu(t){return dr(io|oo,t,!0)}function Qa(t,e=0){return dr(pl|e,t,!0)}function le(t,e=[],r=[]){$c(e,r,o=>{dr(pl,()=>t(...o.map(l)),!0)})}function Pn(t,e=0){var r=dr(Sn|e,t,!0);return r}function vr(t,e=!0){return dr(xr,t,!0,e)}function Za(t){var e=t.teardown;if(e!==null){const r=cn,o=Ge;os(!0),$t(null);try{e.call(null)}finally{os(r),$t(o)}}}function $a(t,e=!1){var a;var r=t.first;for(t.first=t.last=null;r!==null;){(a=r.ac)==null||a.abort(co);var o=r.next;(r.f&tn)!==0?r.parent=null:hr(r,e),r=o}}function uu(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&xr)===0&&hr(e),e=r}}function hr(t,e=!0){var r=!1;(e||(t.f&hc)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(es(t.nodes_start,t.nodes_end),r=!0),$a(t,e&&!r),Nl(t,0),Vt(t,rn);var o=t.transitions;if(o!==null)for(const s of o)s.stop();Za(t);var a=t.parent;a!==null&&a.first!==null&&ts(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function es(t,e){for(;t!==null;){var r=t===e?null:Sl(t);t.remove(),t=r}}function ts(t){var e=t.parent,r=t.prev,o=t.next;r!==null&&(r.next=o),o!==null&&(o.prev=r),e!==null&&(e.first===t&&(e.first=o),e.last===t&&(e.last=r))}function jr(t,e){var r=[];_o(t,r,!0),rs(r,()=>{hr(t),e&&e()})}function rs(t,e){var r=t.length;if(r>0){var o=()=>--r||e();for(var a of t)a.out(o)}else e()}function _o(t,e,r){if((t.f&nr)===0){if(t.f^=nr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var o=t.first;o!==null;){var a=o.next,s=(o.f&Mn)!==0||(o.f&xr)!==0;_o(o,e,s?r:!1),o=a}}}function Jn(t){ns(t,!0)}function ns(t,e){if((t.f&nr)!==0){t.f^=nr,(t.f&Rt)===0&&(Vt(t,Zt),on(t));for(var r=t.first;r!==null;){var o=r.next,a=(r.f&Mn)!==0||(r.f&xr)!==0;ns(r,a?e:!1),r=o}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let zn=!1;function ls(t){zn=t}let cn=!1;function os(t){cn=t}let Ge=null,mr=!1;function $t(t){Ge=t}let He=null;function gr(t){He=t}let jt=null;function as(t){Ge!==null&&(jt===null?jt=[t]:jt.push(t))}let Ft=null,Gt=0,er=null;function fu(t){er=t}let ss=1,Qn=0,un=Qn;function is(t){un=t}let Fr=!1;function cs(){return++ss}function Tl(t){var h;var e=t.f;if((e&Zt)!==0)return!0;if((e&Nr)!==0){var r=t.deps,o=(e&Qt)!==0;if(r!==null){var a,s,c=(e&bl)!==0,u=o&&He!==null&&!Fr,f=r.length;if((c||u)&&(He===null||(He.f&rn)===0)){var d=t,v=d.parent;for(a=0;a<f;a++)s=r[a],(c||!((h=s==null?void 0:s.reactions)!=null&&h.includes(d)))&&(s.reactions??(s.reactions=[])).push(d);c&&(d.f^=bl),u&&v!==null&&(v.f&Qt)===0&&(d.f^=Qt)}for(a=0;a<f;a++)if(s=r[a],Tl(s)&&Ba(s),s.wv>t.wv)return!0}(!o||He!==null&&!Fr)&&Vt(t,Rt)}return!1}function us(t,e,r=!0){var o=t.reactions;if(o!==null&&!(jt!=null&&jt.includes(t)))for(var a=0;a<o.length;a++){var s=o[a];(s.f&Ut)!==0?us(s,e,!1):e===s&&(r?Vt(s,Zt):(s.f&Rt)!==0&&Vt(s,Nr),on(s))}}function fs(t){var b;var e=Ft,r=Gt,o=er,a=Ge,s=Fr,c=jt,u=at,f=mr,d=un,v=t.f;Ft=null,Gt=0,er=null,Fr=(v&Qt)!==0&&(mr||!zn||Ge===null),Ge=(v&(xr|tn))===0?t:null,jt=null,Nn(t.ctx),mr=!1,un=++Qn,t.ac!==null&&(t.ac.abort(co),t.ac=null);try{t.f|=so;var h=(0,t.fn)(),g=t.deps;if(Ft!==null){var m;if(Nl(t,Gt),g!==null&&Gt>0)for(g.length=Gt+Ft.length,m=0;m<Ft.length;m++)g[Gt+m]=Ft[m];else t.deps=g=Ft;if(!Fr||(v&Ut)!==0&&t.reactions!==null)for(m=Gt;m<g.length;m++)((b=g[m]).reactions??(b.reactions=[])).push(t)}else g!==null&&Gt<g.length&&(Nl(t,Gt),g.length=Gt);if(zr()&&er!==null&&!mr&&g!==null&&(t.f&(Ut|Nr|Zt))===0)for(m=0;m<er.length;m++)us(er[m],t);return a!==null&&a!==t&&(Qn++,er!==null&&(o===null?o=er:o.push(...er))),(t.f&nn)!==0&&(t.f^=nn),h}catch(w){return Gc(w)}finally{t.f^=so,Ft=e,Gt=r,er=o,Ge=a,Fr=s,jt=c,Nn(u),mr=f,un=d}}function du(t,e){let r=e.reactions;if(r!==null){var o=cc.call(r,t);if(o!==-1){var a=r.length-1;a===0?r=e.reactions=null:(r[o]=r[a],r.pop())}}r===null&&(e.f&Ut)!==0&&(Ft===null||!Ft.includes(e))&&(Vt(e,Nr),(e.f&(Qt|bl))===0&&(e.f^=bl),qa(e),Nl(e,0))}function Nl(t,e){var r=t.deps;if(r!==null)for(var o=e;o<r.length;o++)du(t,r[o])}function Zn(t){var e=t.f;if((e&rn)===0){Vt(t,Rt);var r=He,o=zn;He=t,zn=!0;try{(e&Sn)!==0?uu(t):$a(t),Za(t);var a=fs(t);t.teardown=typeof a=="function"?a:null,t.wv=ss;var s;yt&&Oc&&(t.f&Zt)!==0&&t.deps}finally{zn=o,He=r}}}function l(t){var e=t.f,r=(e&Ut)!==0;if(Ge!==null&&!mr){var o=He!==null&&(He.f&rn)!==0;if(!o&&!(jt!=null&&jt.includes(t))){var a=Ge.deps;if((Ge.f&so)!==0)t.rv<Qn&&(t.rv=Qn,Ft===null&&a!==null&&a[Gt]===t?Gt++:Ft===null?Ft=[t]:(!Fr||!Ft.includes(t))&&Ft.push(t));else{(Ge.deps??(Ge.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Ge]:s.includes(Ge)||s.push(Ge)}}}else if(r&&t.deps===null&&t.effects===null){var c=t,u=c.parent;u!==null&&(u.f&Qt)===0&&(c.f^=Qt)}if(cn){if(an.has(t))return an.get(t);if(r){c=t;var f=c.v;return((c.f&Rt)===0&&c.reactions!==null||ds(c))&&(f=ho(c)),an.set(c,f),f}}else if(r){if(c=t,Lr!=null&&Lr.has(c))return Lr.get(c);Tl(c)&&Ba(c)}if((t.f&nn)!==0)throw t.v;return t.v}function ds(t){if(t.v===xt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(an.has(e)||(e.f&Ut)!==0&&ds(e))return!0;return!1}function kr(t){var e=mr;try{return mr=!0,t()}finally{mr=e}}const vu=-7169;function Vt(t,e){t.f=t.f&vu|e}function hu(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Pr in t)yo(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Pr in r&&yo(r)}}}function yo(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let o in t)try{yo(t[o],e)}catch{}const r=ml(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const o=ka(r);for(let a in o){const s=o[a].get;if(s)try{s.call(t)}catch{}}}}}const mu=["touchstart","touchmove"];function gu(t){return mu.includes(t)}let vs=!1;function pu(){vs||(vs=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Pl(t){var e=Ge,r=He;$t(null),gr(null);try{return t()}finally{$t(e),gr(r)}}function bu(t,e,r,o=r){t.addEventListener(e,()=>Pl(r));const a=t.__on_r;a?t.__on_r=()=>{a(),o(!0)}:t.__on_r=()=>o(!0),pu()}const hs=new Set,xo=new Set;function wu(t,e,r,o={}){function a(s){if(o.capture||$n.call(e,s),!s.cancelBubble)return Pl(()=>r==null?void 0:r.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Hn(()=>{e.addEventListener(t,a,o)}):e.addEventListener(t,a,o),a}function fn(t,e,r,o,a){var s={capture:o,passive:a},c=wu(t,e,r,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&au(()=>{e.removeEventListener(t,c,s)})}function dt(t){for(var e=0;e<t.length;e++)hs.add(t[e]);for(var r of xo)r(t)}function $n(t){var k;var e=this,r=e.ownerDocument,o=t.type,a=((k=t.composedPath)==null?void 0:k.call(t))||[],s=a[0]||t.target,c=0,u=t.__root;if(u){var f=a.indexOf(u);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var d=a.indexOf(e);if(d===-1)return;f<=d&&(c=f)}if(s=a[c]||t.target,s!==e){ro(t,"currentTarget",{configurable:!0,get(){return s||r}});var v=Ge,h=He;$t(null),gr(null);try{for(var g,m=[];s!==null;){var b=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+o];if(w!=null&&(!s.disabled||t.target===s))if(en(w)){var[p,..._]=w;p.apply(s,[t,..._])}else w.call(s,t)}catch(A){g?m.push(A):g=A}if(t.cancelBubble||b===e||b===null)break;s=b}if(g){for(let A of m)queueMicrotask(()=>{throw A});throw g}}finally{t.__root=e,delete t.currentTarget,$t(v),gr(h)}}}function ko(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function dn(t,e){var r=He;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function H(t,e){var r=(e&Pa)!==0,o=(e&jc)!==0,a,s=!t.startsWith("<!>");return()=>{a===void 0&&(a=ko(s?t:"<!>"+t),r||(a=Ht(a)));var c=o||Ha?document.importNode(a,!0):a.cloneNode(!0);if(r){var u=Ht(c),f=c.lastChild;dn(u,f)}else dn(c,c);return c}}function _u(t,e,r="svg"){var o=!t.startsWith("<!>"),a=(e&Pa)!==0,s=`<${r}>${o?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var u=ko(s),f=Ht(u);if(a)for(c=document.createDocumentFragment();Ht(f);)c.appendChild(Ht(f));else c=Ht(f)}var d=c.cloneNode(!0);if(a){var v=Ht(d),h=d.lastChild;dn(v,h)}else dn(d,d);return d}}function Ae(t,e){return _u(t,e,"svg")}function yu(t=""){{var e=Ir(t+"");return dn(e,e),e}}function he(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Ir();return t.append(e,r),dn(e,r),t}function M(t,e){t!==null&&t.before(e)}let Eo=!0;function ke(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function xu(t,e){return ku(t,e)}const Ln=new Map;function ku(t,{target:e,anchor:r,props:o={},events:a,context:s,intro:c=!0}){nu();var u=new Set,f=h=>{for(var g=0;g<h.length;g++){var m=h[g];if(!u.has(m)){u.add(m);var b=gu(m);e.addEventListener(m,$n,{passive:b});var w=Ln.get(m);w===void 0?(document.addEventListener(m,$n,{passive:b}),Ln.set(m,1)):Ln.set(m,w+1)}}};f(to(hs)),xo.add(f);var d=void 0,v=iu(()=>{var h=r??e.appendChild(Ir());return vr(()=>{if(s){pe({});var g=at;g.c=s}a&&(o.$$events=a),Eo=c,d=t(h,o)||{},Eo=!0,s&&be()}),()=>{var b;for(var g of u){e.removeEventListener(g,$n);var m=Ln.get(g);--m===0?(document.removeEventListener(g,$n),Ln.delete(g)):Ln.set(g,m)}xo.delete(f),h!==r&&((b=h.parentNode)==null||b.removeChild(h))}});return Eu.set(d,v),d}let Eu=new WeakMap;const Ao=0,zl=1,Co=2;function So(t,e,r,o,a){var s=t,c=zr(),u=at,f=xt,d,v,h,g=c?sn(void 0):go(void 0,!1,!1),m=c?sn(void 0):go(void 0,!1,!1),b=!1;function w(_,k){b=!0,k&&(gr(p),$t(p),Nn(u));try{_===Ao&&r&&(d?Jn(d):d=vr(()=>r(s))),_===Co&&a&&(h?Jn(h):h=vr(()=>a(s,m))),_!==Ao&&d&&jr(d,()=>d=null),_!==zl&&v&&jr(v,()=>v=null),_!==Co&&h&&jr(h,()=>h=null)}finally{k&&(Nn(null),$t(null),gr(null),tu())}}var p=Pn(()=>{if(f!==(f=e())){if(fc(f)){var _=f;b=!1,_.then(k=>{_===f&&(Rr(g,k),w(zl,!0))},k=>{if(_===f&&(Rr(m,k),w(Co,!0),!a))throw m.v}),Hn(()=>{b||w(Ao,!0)})}else Rr(g,f),w(zl,!1);return()=>f=xt}})}function Y(t,e,r=!1){var o=t,a=null,s=null,c=xt,u=r?Mn:0,f=!1;const d=(m,b=!0)=>{f=!0,g(b,m)};var v=null;function h(){v!==null&&(v.lastChild.remove(),o.before(v),v=null);var m=c?a:s,b=c?s:a;m&&Jn(m),b&&jr(b,()=>{c?s=null:a=null})}const g=(m,b)=>{if(c!==(c=m)){var w=Ml(),p=o;if(w&&(v=document.createDocumentFragment(),v.append(p=Ir())),c?a??(a=b&&vr(()=>b(p))):s??(s=b&&vr(()=>b(p))),w){var _=Ze,k=c?a:s,A=c?s:a;k&&_.skipped_effects.delete(k),A&&_.skipped_effects.add(A),_.add_callback(h)}else h()}};Pn(()=>{f=!1,e(d),f||g(null,null)},u)}function Rn(t,e,r){var o=t,a=xt,s,c,u=null,f=zr()?Bc:La;function d(){s&&jr(s),u!==null&&(u.lastChild.remove(),o.before(u),u=null),s=c}Pn(()=>{if(f(a,a=e())){var v=o,h=Ml();h&&(u=document.createDocumentFragment(),u.append(v=Ir())),c=vr(()=>r(v)),h?Ze.add_callback(d):d()}})}function nt(t,e){return e}function Au(t,e,r){for(var o=t.items,a=[],s=e.length,c=0;c<s;c++)_o(e[c].e,a,!0);var u=s>0&&a.length===0&&r!==null;if(u){var f=r.parentNode;lu(f),f.append(r),o.clear(),pr(t,e[0].prev,e[s-1].next)}rs(a,()=>{for(var d=0;d<s;d++){var v=e[d];u||(o.delete(v.k),pr(t,v.prev,v.next)),hr(v.e,!u)}})}function et(t,e,r,o,a,s=null){var c=t,u={flags:e,items:new Map,first:null},f=(e&Na)!==0;if(f){var d=t;c=d.appendChild(Ir())}var v=null,h=!1,g=new Map,m=vo(()=>{var _=r();return en(_)?_:_==null?[]:to(_)}),b,w;function p(){Cu(w,b,u,g,c,a,e,o,r),s!==null&&(b.length===0?v?Jn(v):v=vr(()=>s(c)):v!==null&&jr(v,()=>{v=null}))}Pn(()=>{w??(w=He),b=l(m);var _=b.length;if(!(h&&_===0)){h=_===0;var k,A,E,C;if(Ml()){var S=new Set,T=Ze;for(A=0;A<_;A+=1){E=b[A],C=o(E,A);var P=u.items.get(C)??g.get(C);P?(e&(_l|yl))!==0&&ms(P,E,A,e):(k=gs(null,u,null,null,E,C,A,a,e,r,!0),g.set(C,k)),S.add(C)}for(const[N,B]of u.items)S.has(N)||T.skipped_effects.add(B.e);T.add_callback(p)}else p();l(m)}})}function Cu(t,e,r,o,a,s,c,u,f){var X,Q,J,te;var d=(c&Cc)!==0,v=(c&(_l|yl))!==0,h=e.length,g=r.items,m=r.first,b=m,w,p=null,_,k=[],A=[],E,C,S,T;if(d)for(T=0;T<h;T+=1)E=e[T],C=u(E,T),S=g.get(C),S!==void 0&&((X=S.a)==null||X.measure(),(_??(_=new Set)).add(S));for(T=0;T<h;T+=1){if(E=e[T],C=u(E,T),S=g.get(C),S===void 0){var P=o.get(C);if(P!==void 0){o.delete(C),g.set(C,P);var N=p?p.next:b;pr(r,p,P),pr(r,P,N),Mo(P,N,a),p=P}else{var B=b?b.e.nodes_start:a;p=gs(B,r,p,p===null?r.first:p.next,E,C,T,s,c,f)}g.set(C,p),k=[],A=[],b=p.next;continue}if(v&&ms(S,E,T,c),(S.e.f&nr)!==0&&(Jn(S.e),d&&((Q=S.a)==null||Q.unfix(),(_??(_=new Set)).delete(S))),S!==b){if(w!==void 0&&w.has(S)){if(k.length<A.length){var F=A[0],L;p=F.prev;var D=k[0],W=k[k.length-1];for(L=0;L<k.length;L+=1)Mo(k[L],F,a);for(L=0;L<A.length;L+=1)w.delete(A[L]);pr(r,D.prev,W.next),pr(r,p,D),pr(r,W,F),b=F,p=W,T-=1,k=[],A=[]}else w.delete(S),Mo(S,b,a),pr(r,S.prev,S.next),pr(r,S,p===null?r.first:p.next),pr(r,p,S),p=S;continue}for(k=[],A=[];b!==null&&b.k!==C;)(b.e.f&nr)===0&&(w??(w=new Set)).add(b),A.push(b),b=b.next;if(b===null)continue;S=b}k.push(S),p=S,b=S.next}if(b!==null||w!==void 0){for(var z=w===void 0?[]:to(w);b!==null;)(b.e.f&nr)===0&&z.push(b),b=b.next;var G=z.length;if(G>0){var ne=(c&Na)!==0&&h===0?a:null;if(d){for(T=0;T<G;T+=1)(J=z[T].a)==null||J.measure();for(T=0;T<G;T+=1)(te=z[T].a)==null||te.fix()}Au(r,z,ne)}}d&&Hn(()=>{var oe;if(_!==void 0)for(S of _)(oe=S.a)==null||oe.apply()}),t.first=r.first&&r.first.e,t.last=p&&p.e;for(var V of o.values())hr(V.e);o.clear()}function ms(t,e,r,o){(o&_l)!==0&&Rr(t.v,e),(o&yl)!==0?Rr(t.i,r):t.i=r}function gs(t,e,r,o,a,s,c,u,f,d,v){var h=(f&_l)!==0,g=(f&Sc)===0,m=h?g?go(a,!1,!1):sn(a):a,b=(f&yl)===0?c:sn(c),w={i:b,v:m,k:s,a:null,e:null,prev:r,next:o};try{if(t===null){var p=document.createDocumentFragment();p.append(t=Ir())}return w.e=vr(()=>u(t,m,b,d),qc),w.e.prev=r&&r.e,w.e.next=o&&o.e,r===null?v||(e.first=w):(r.next=w,r.e.next=w.e),o!==null&&(o.prev=w,o.e.prev=w.e),w}finally{}}function Mo(t,e,r){for(var o=t.next?t.next.e.nodes_start:r,a=e?e.e.nodes_start:r,s=t.e.nodes_start;s!==null&&s!==o;){var c=Sl(s);a.before(s),s=c}}function pr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function St(t,e,r=!1,o=!1,a=!1){var s=t,c="";le(()=>{var u=He;if(c!==(c=e()??"")&&(u.nodes_start!==null&&(es(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),c!=="")){var f=c+"";r?f=`<svg>${f}</svg>`:o&&(f=`<math>${f}</math>`);var d=ko(f);if((r||o)&&(d=Ht(d)),dn(Ht(d),d.lastChild),r||o)for(;Ht(d);)s.before(Ht(d));else s.before(d)}})}function Er(t,e,...r){var o=t,a=Ct,s;Pn(()=>{a!==(a=e())&&(s&&(hr(s),s=null),s=vr(()=>a(o,...r)))},Mn)}function el(t,e,r){var o=t,a,s,c=null,u=null;function f(){s&&(jr(s),s=null),c&&(c.lastChild.remove(),o.before(c),c=null),s=u,u=null}Pn(()=>{if(a!==(a=e())){var d=Ml();if(a){var v=o;d&&(c=document.createDocumentFragment(),c.append(v=Ir())),u=vr(()=>r(v,a))}d?Ze.add_callback(f):f()}},Mn)}function ps(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=ps(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function Su(){for(var t,e,r=0,o="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=ps(t))&&(o&&(o+=" "),o+=e);return o}function Mu(t){return typeof t=="object"?Su(t):t??""}const bs=[...`
\r\f \v\uFEFF`];function Tu(t,e,r){var o=t==null?"":""+t;if(e&&(o=o?o+" "+e:e),r){for(var a in r)if(r[a])o=o?o+" "+a:a;else if(o.length)for(var s=a.length,c=0;(c=o.indexOf(a,c))>=0;){var u=c+s;(c===0||bs.includes(o[c-1]))&&(u===o.length||bs.includes(o[u]))?o=(c===0?"":o.substring(0,c))+o.substring(u+1):c=u}}return o===""?null:o}function Nu(t,e){return t==null?null:String(t)}function gt(t,e,r,o,a,s){var c=t.__className;if(c!==r||c===void 0){var u=Tu(r,o,s);u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u),t.__className=r}else if(s&&a!==s)for(var f in s){var d=!!s[f];(a==null||d!==!!a[f])&&t.classList.toggle(f,d)}return s}function pt(t,e,r,o){var a=t.__style;if(a!==e){var s=Nu(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return o}const Pu=Symbol("is custom element"),zu=Symbol("is html");function q(t,e,r,o){var a=Lu(t);a[e]!==(a[e]=r)&&(e==="loading"&&(t[mc]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Ru(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Lu(t){return t.__attributes??(t.__attributes={[Pu]:t.nodeName.includes("-"),[zu]:t.namespaceURI===Fc})}var ws=new Map;function Ru(t){var e=ws.get(t.nodeName);if(e)return e;ws.set(t.nodeName,e=[]);for(var r,o=t,a=Element.prototype;a!==o;){r=ka(o);for(var s in r)r[s].set&&e.push(s);o=ml(o)}return e}const Iu=()=>performance.now(),Ar={tick:t=>requestAnimationFrame(t),now:()=>Iu(),tasks:new Set};function _s(){const t=Ar.now();Ar.tasks.forEach(e=>{e.c(t)||(Ar.tasks.delete(e),e.f())}),Ar.tasks.size!==0&&Ar.tick(_s)}function ju(t){let e;return Ar.tasks.size===0&&Ar.tick(_s),{promise:new Promise(r=>{Ar.tasks.add(e={c:t,f:r})}),abort(){Ar.tasks.delete(e)}}}function Ll(t,e){Pl(()=>{t.dispatchEvent(new CustomEvent(e))})}function Fu(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ys(t){const e={},r=t.split(";");for(const o of r){const[a,s]=o.split(":");if(!a||s===void 0)break;const c=Fu(a.trim());e[c]=s.trim()}return e}const qu=t=>t;function xs(t,e,r,o){var a=(t&Lc)!==0,s=(t&Rc)!==0,c=a&&s,u=(t&Ic)!==0,f=c?"both":a?"in":"out",d,v=e.inert,h=e.style.overflow,g,m;function b(){return Pl(()=>d??(d=r()(e,(o==null?void 0:o())??{},{direction:f})))}var w={is_global:u,in(){var A;if(e.inert=v,!a){m==null||m.abort(),(A=m==null?void 0:m.reset)==null||A.call(m);return}s||g==null||g.abort(),Ll(e,"introstart"),g=To(e,b(),m,1,()=>{Ll(e,"introend"),g==null||g.abort(),g=d=void 0,e.style.overflow=h})},out(A){if(!s){A==null||A(),d=void 0;return}e.inert=!0,Ll(e,"outrostart"),m=To(e,b(),g,0,()=>{Ll(e,"outroend"),A==null||A()})},stop:()=>{g==null||g.abort(),m==null||m.abort()}},p=He;if((p.transitions??(p.transitions=[])).push(w),a&&Eo){var _=u;if(!_){for(var k=p.parent;k&&(k.f&Mn)!==0;)for(;(k=k.parent)&&(k.f&Sn)===0;);_=!k||(k.f&wl)!==0}_&&wo(()=>{kr(()=>w.in())})}}function To(t,e,r,o,a){var s=o===1;if(Cn(e)){var c,u=!1;return Hn(()=>{if(!u){var p=e({direction:s?"in":"out"});c=To(t,p,r,o,a)}}),{abort:()=>{u=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return a(),{abort:Ct,deactivate:Ct,reset:Ct,t:()=>o};const{delay:f=0,css:d,tick:v,easing:h=qu}=e;var g=[];if(s&&r===void 0&&(v&&v(0,1),d)){var m=ys(d(0,1));g.push(m,m)}var b=()=>1-o,w=t.animate(g,{duration:f,fill:"forwards"});return w.onfinish=()=>{w.cancel();var p=(r==null?void 0:r.t())??1-o;r==null||r.abort();var _=o-p,k=e.duration*Math.abs(_),A=[];if(k>0){var E=!1;if(d)for(var C=Math.ceil(k/16.666666666666668),S=0;S<=C;S+=1){var T=p+_*h(S/C),P=ys(d(T,1-T));A.push(P),E||(E=P.overflow==="hidden")}E&&(t.style.overflow="hidden"),b=()=>{var N=w.currentTime;return p+_*h(N/k)},v&&ju(()=>{if(w.playState!=="running")return!1;var N=b();return v(N,1-N),!0})}w=t.animate(A,{duration:k,fill:"forwards"}),w.onfinish=()=>{b=()=>o,v==null||v(o,1-o),a()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=Ct)},deactivate:()=>{a=Ct},reset:()=>{o===0&&(v==null||v(1,0))},t:()=>b()}}function No(t,e,r=e){var o=zr(),a=new WeakSet;bu(t,"input",s=>{var c=s?t.defaultValue:t.value;if(c=Po(t)?zo(c):c,r(c),Ze!==null&&a.add(Ze),o&&c!==(c=e())){var u=t.selectionStart,f=t.selectionEnd;t.value=c??"",f!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(f,t.value.length))}}),kr(e)==null&&t.value&&(r(Po(t)?zo(t.value):t.value),Ze!==null&&a.add(Ze)),Qa(()=>{var s=e();if(t===document.activeElement){var c=kl??Ze;if(a.has(c))return}Po(t)&&s===zo(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Po(t){var e=t.type;return e==="number"||e==="range"}function zo(t){return t===""?null:+t}const Zl=class Zl{constructor(e){Nt(this,Ql);Nt(this,Qr,new WeakMap);Nt(this,Wn);Nt(this,dl);Wt(this,dl,e)}observe(e,r){var o=De(this,Qr).get(e)||new Set;return o.add(r),De(this,Qr).set(e,o),$r(this,Ql,ic).call(this).observe(e,De(this,dl)),()=>{var a=De(this,Qr).get(e);a.delete(r),a.size===0&&(De(this,Qr).delete(e),De(this,Wn).unobserve(e))}}};Qr=new WeakMap,Wn=new WeakMap,dl=new WeakMap,Ql=new WeakSet,ic=function(){return De(this,Wn)??Wt(this,Wn,new ResizeObserver(e=>{for(var r of e){Zl.entries.set(r.target,r);for(var o of De(this,Qr).get(r.target)||[])o(r)}}))},fr(Zl,"entries",new WeakMap);let Lo=Zl;var Bu=new Lo({box:"border-box"});function ks(t,e,r){var o=Bu.observe(t,()=>r(t[e]));wo(()=>(kr(()=>r(t[e])),o))}function Es(t,e){return t===e||(t==null?void 0:t[Pr])===e}function vn(t={},e,r,o){return wo(()=>{var a,s;return Qa(()=>{a=s,s=[],kr(()=>{t!==r(...s)&&(e(t,...s),a&&Es(r(...a),t)&&e(null,...a))})}),()=>{Hn(()=>{s&&Es(r(...s),t)&&e(null,...s)})}}),t}function Ou(t=!1){const e=at,r=e.l.u;if(!r)return;let o=()=>hu(e.s);if(t){let a=0,s={};const c=Gn(()=>{let u=!1;const f=e.s;for(const d in f)f[d]!==s[d]&&(s[d]=f[d],u=!0);return u&&a++,a});o=()=>l(c)}r.b.length&&su(()=>{As(e,o),gl(r.b)}),we(()=>{const a=kr(()=>r.m.map(dc));return()=>{for(const s of a)typeof s=="function"&&s()}}),r.a.length&&we(()=>{As(e,o),gl(r.a)})}function As(t,e){if(t.l.s)for(const r of t.l.s)l(r);e()}let Rl=!1;function Vu(t){var e=Rl;try{return Rl=!1,[t(),Rl]}finally{Rl=e}}const Du={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function hn(t,e,r){return new Proxy({props:t,exclude:e},Du)}const Yu={get(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(Cn(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o)return o[e]}},set(t,e,r){let o=t.props.length;for(;o--;){let a=t.props[o];Cn(a)&&(a=a());const s=Tr(a,e);if(s&&s.set)return s.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(Cn(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o){const a=Tr(o,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(t,e){if(e===Pr||e===Ma)return!1;for(let r of t.props)if(Cn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Cn(r)&&(r=r()),!!r){for(const o in r)e.includes(o)||e.push(o);for(const o of Object.getOwnPropertySymbols(r))e.includes(o)||e.push(o)}return e}};function qr(...t){return new Proxy({props:t},Yu)}function j(t,e,r,o){var A;var a=!Tn||(r&Tc)!==0,s=(r&Pc)!==0,c=(r&zc)!==0,u=o,f=!0,d=()=>(f&&(f=!1,u=c?kr(o):o),u),v;if(s){var h=Pr in t||Ma in t;v=((A=Tr(t,e))==null?void 0:A.set)??(h&&e in t?E=>t[e]=E:void 0)}var g,m=!1;s?[g,m]=Vu(()=>t[e]):g=t[e],g===void 0&&o!==void 0&&(g=d(),v&&(a&&xc(),v(g)));var b;if(a?b=()=>{var E=t[e];return E===void 0?d():(f=!0,E)}:b=()=>{var E=t[e];return E!==void 0&&(u=void 0),E===void 0?u:E},a&&(r&Nc)===0)return b;if(v){var w=t.$$legacy;return function(E,C){return arguments.length>0?((!a||!C||w||m)&&v(C?b():E),E):b()}}var p=!1,_=((r&Mc)!==0?Gn:vo)(()=>(p=!1,b()));s&&l(_);var k=He;return function(E,C){if(arguments.length>0){const S=C?l(_):a&&s?qe(E):E;return I(_,S),p=!0,u!==void 0&&(u=S),E}return cn&&p||(k.f&rn)!==0?_.v:l(_)}}function Wu(t){at===null&&Ta(),Tn&&at.l!==null?Uu(at).m.push(t):we(()=>{const e=kr(t);if(typeof e=="function")return e})}function Uu(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Hu="5";typeof window<"u"&&((nc=window.__svelte??(window.__svelte={})).v??(nc.v=new Set)).add(Hu),Vc();function Cs(t,e){Xe(t)&&Cs(t.v,e);const r=Br(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const o=(r[1]-r[0])/e;return Ye.seq(r[0],r[1],o)}function Ss(t){if(Xe(t))return Ss(t.v);const e=new Ye.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Ye(e)}function Ro(t,e){if(Xe(t))return Ro(t.v,e);e===void 0&&(e=.1);const r=Br(t),o=(r[1]-r[0])*e;return[r[0]-o,r[1]+o]}function Br(t){if(Xe(t))return Br(t.v);let e=t[0],r=t[0];for(let o=1;o<t.length;o++)t[o]<e&&(e=t[o]),t[o]>r&&(r=t[o]);return[e,r]}function Ms(t,e){return Xe(t)?Ms(t.v,e):Math.sqrt(Ts(t,e))}function Ts(t,e){if(e===void 0&&(e=!1),Xe(t))return Ts(t.v);const r=Io(t);let o=0;for(let a=0;a<t.length;a++){const s=t[a]-r;o=o+s*s}return o/(e?t.length:t.length-1)}function Io(t){return Xe(t)?Io(t.v):Ns(t)/t.length}function Ns(t){if(Xe(t))return Ns(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function Ps(t){if(Xe(t))return Ps(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Or(t){return Xe(t)||ar(t)?t.v[jo(t.v)-1]:t[jo(t)-1]}function jo(t){if(Xe(t)||ar(t))return jo(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]<r&&(e=o,r=t[o-1]);return e}function mn(t){return Xe(t)||ar(t)?t.v[Fo(t.v)-1]:t[Fo(t)-1]}function Fo(t){if(Xe(t)||ar(t))return Fo(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]>r&&(e=o,r=t[o-1]);return e}const qo=30,Gu=1e-7,Xu=1e-7,zs=1e-13,Ls=1e3,Ku=100;function Rs(t,e,r,o,a){o===void 0&&(o=Ls),r===void 0&&(r=zs),a===void 0&&(a=Ku);let s=r,c=o,u=(c-s)/a;for(let f=0;f<a;f++){let d,v;for(let m=0;m<a;m++){d=s+m*u,v=s+(m+1)*u;const b=e(d),w=e(v);if(b<=t&&w>=t)break}const h=(d+v)/2,g=e(h);if(Math.abs(g-t)<Gu||(s=d,c=v,u=(c-s)/a,u/c<Xu))return h}return(s+c)/2}function Is(t,e=0,r=1){let o=Ye.zeros(t);for(let a=0;a<t;a++)o.v[a]=e+Math.random()*(r-e);return o}function js(t,e=0,r=1){let o=Ye.zeros(t);for(let a=0;a<t;a++){const s=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();o.v[a]=s*Math.sin(c)*r+e}return o}function Fs(t,e=0,r=1){if(Xe(t))return t.apply(a=>Fs(a,e,r));const o=1/(Math.sqrt(2)*r);return .5*(1+Qu((t-e)*o))}function Bo(t,e=0,r=1){if(Xe(t))return t.apply(D=>Bo(D,e,r));if(e!==0||r!==1)return Bo(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const o=.425,a=5,s=.180625,c=1.6,u=3.3871327179,f=5.0434271938*10,d=1.5929113202*100,v=5.910937472*10,h=1.7895169469*10,g=7.8757757664*10,m=6.71875636*10,b=1.4234372777,w=2.75681539,p=1.3067284816,_=1.7023821103*.1,k=7.370016425*.1,A=1.2021132975*.1,E=6.657905115,C=3.081226386,S=4.2868294337*.1,T=1.7337203997*.01,P=2.4197894225*.1,N=1.2258202635*.01,B=t-.5;let F;if(Math.abs(B)<=o)return F=s-B*B,B*(((v*F+d)*F+f)*F+u)/(((m*F+g)*F+h)*F+1);F=B<0?t:1-t,F=Math.sqrt(-Math.log(F));let L;return F<=a?(F=F-c,L=(((_*F+p)*F+w)*F+b)/((A*F+k)*F+1)):(F=F-a,L=((T*F+S)*F+C+E)/((N*F+P)*F+1)),B<0?-L:L}function Oo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return Oo(lt(t),e,r);if(Xe(t))return t.apply(o=>Oo(o,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return Il(t*e,e)}return e==Number.POSITIVE_INFINITY?1-Il(r/t,r):e*t>r?1-Fl(r/(r+e*t),r/2,e/2):Fl(e*t/(r+e*t),e/2,r/2)}function qs(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let o=Ls,a=zs;if(t>.9997&&r===1?(o=1e7,a=6e5,t=.9997):t>.9992&&r===1?(o=1e7,a=6e5):t>.997&&r===1?(o=1e6,a=45e3):t>.992&&r===1?(o=1e5,a=5e3):t>.97&&r===1&&(o=1e4,a=400),Array.isArray(t))return qs(lt(t),e,r);const s=u=>Oo(u,e,r);function c(u,f,d){return u===0?0:u===1?Inf:f===0?NaN:d===0?NaN:Rs(u,s,a,o)}return Xe(t)?t.apply(c,e,r):c(t,e,r)}function Il(t,e){if(Array.isArray(t))return Il(lt(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),a=Math.sqrt(o);function s(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const d=f/e,v=Math.pow(d,1/6)-.5*Math.pow(d,1/3)+1/3*Math.pow(d,1/2);return Fs(v,r,a)}function c(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:Ju(f/2,e/2)/tl(e/2)}const u=e>qo?s:c;return Xe(t)?t.apply(u):u(t)}function jl(t,e){if(Array.isArray(t))return jl(lt(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),a=Math.sqrt(o);function s(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const d=Bo(f,r,a),v=Math.pow(Math.sqrt(36*d*d-30*d+13)/4+(3*d-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(f){return f===0?0:f===1?Inf:e===0?0:Rs(f,v=>Il(v,e),0,qo*10)}const u=e>qo?s:c;return Xe(t)?t.apply(u):u(t)}function Fl(t,e,r){if(Array.isArray(t))return Fl(lt(t),e,r);if(Xe(t))return t.apply(a=>Fl(a,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const o=.5-t+.5;return uf(e,r,t,o)}function tl(t){if(Xe(t))return t.apply(tl);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+tl(1-t));t=t-1;let r=.9999999999998099;for(let a=0;a<e.length;a++)r=r+e[a]/(t+a+1);const o=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*r}function Ju(t,e){let a=0;for(let s=0;s<1e4;s++){const c=Math.pow(t,s)/tl(e+s+1);if(isNaN(c)||c<1e-18)break;a+=c}return Math.pow(t,e)*tl(e)*Math.exp(-t)*a}function Qu(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,o=-.284496736,a=1.421413741,s=-1.453152027,c=1.061405429,f=1/(1+.3275911*t),d=1-((((c*f+s)*f+a)*f+o)*f+r)*f*Math.exp(-t*t);return e*d}function Bs(t,e){const r=.564189583547756,o=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],a=[.00301048631703895,.0538971687740286,.375795757275549],s=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],u=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let d,v,h,g,m=Math.abs(e);if(m<=.5)return v=e*e,g=(((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4]+1,h=((a[0]*v+a[1])*v+a[2])*v+1,d=.5-e*(g/h)+.5,d=Math.exp(v)*d,d;if(m<=4)g=((((((s[0]*m+s[1])*m+s[2])*m+s[3])*m+s[4])*m+s[5])*m+s[6])*m+s[7],h=((((((c[0]*m+c[1])*m+c[2])*m+c[3])*m+c[4])*m+c[5])*m+c[6])*m+c[7],d=g/h;else{if(e<=-5.6)return d=2,d=Math.exp(e*e)*2,d;v=1/(e*e),g=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+u[4],h=(((f[0]*v+f[1])*v+f[2])*v+f[3])*v+1,d=(r-v*g/h)/m}return e<0&&(d=Math.exp(e*e)*2-d),d}function Os(t,e){let r=t+e-2;return r<=.25?tr(r+1):r<=1.25?tr(r)+Dr(r):tr(r-1)+Math.log(r*(r+1))}function ql(t,e){const r=.0833333333333333,o=-.00277777777760991,a=.00079365066682539,s=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,d,v,h,g,m,b,w,p,_,k,A,E,C,S;return v=Math.min(t,e),h=Math.max(t,e),m=v/h,g=m/(m+1),p=1/(m+1),A=p*p,_=p+A+1,k=p+A*_+1,E=p+A*k+1,C=p+A*E+1,S=p+A*C+1,d=1/h,b=d*d,w=((((u*S*b+c*C)*b+s*E)*b+a*k)*b+o*_)*b+r,w*=g/h,d=1/v,b=d*d,f=(((((u*b+c)*b+s)*b+a)*b+o)*b+r)/v+w,f}function vt(t){let e,r,o,a,s;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],u=.273076135303957,f=.0559398236957378;return s=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],a=(f*r+u)*r+1,o=s/a,e>0?r*o/t:t*(o+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],u=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return s=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],a=(((u[4]*r+u[3])*r+u[2])*r+u[1])*r+1,o=s/a,e>0?r/t*(o-.5-.5):t*o}}}function Zu(t,e,r){let o,a,s,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,s=a=0,o=0;for(let u=1;u<=r;u++)s=a,a=o,o=c*a-s+e[r-u];return(o-s)*.5}function Vs(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,o=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*Zu(t/.375,e,r));if(t<o)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function Vr(t,e){const r=.0833333333333333,o=-.00277777777760991,a=.00079365066682539,s=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,d,v,h,g,m,b,w,p,_,k,A,E,C;return t>e?(v=e/t,f=1/(v+1),w=v/(v+1),d=t+(e-.5)):(v=t/e,f=v/(v+1),w=1/(v+1),d=e+(t-.5)),k=w*w,p=w+k+1,_=w+k*p+1,A=w+k*_+1,E=w+k*A+1,C=w+k*E+1,h=1/(e*e),b=((((u*C*h+c*E)*h+s*A)*h+a*_)*h+o*p)*h+r,b*=f/e,g=d*Dr(t/e),m=t*(Math.log(e)-1),g>m?b-m-g:b-g-m}function tr(t){if(t<.6){const b=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*b}else{const e=.422784335098467,r=.848044614534529,o=.565221050691933,a=.156513060486551,s=.017050248402265,c=.000497958207639485,u=1.24313399877507,f=.548042109832463,d=.10155218743983,v=.00713309612391,h=.000116165475989616,g=t-.5-.5,m=(((((c*g+s)*g+a)*g+o)*g+r)*g+e)/(((((h*g+v)*g+d)*g+f)*g+u)*g+1);return g*m}}function lr(t){const e=.418938533204673,r=.0833333333333333,o=-.00277777777760991,a=.00079365066682539,s=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;if(t<=.8)return tr(t)-Math.log(t);if(t<=2.25)return tr(t-.5-.5);if(t<10){let v=Math.round(t-1.25),h=t,g=1;for(let m=1;m<=v;++m)h+=-1,g*=h;return tr(h-1)+Math.log(g)}let f=1/(t*t),d=(((((u*f+c)*f+s)*f+a)*f+o)*f+r)/t;return e+d+(t-.5)*(Math.log(t)-1)}function Vo(t,e){const r=.918938533204673;let o=Math.min(t,e),a=Math.max(t,e);function s(c,u,f){let d=Math.round(f-1),v=1;for(let h=1;h<=d;++h)f+=-1,v*=f/(u+f);return c+Math.log(v)+(lr(u)+(lr(f)-Os(u,f)))}if(o<8){if(o<1)return a<8?lr(o)+(lr(a)-lr(o+a)):lr(o)+Vr(o,a);let c;if(o<2)return a<=2?lr(o)+lr(a)-Os(o,a):a<8?(c=0,s(c,o,a)):lr(o)+Vr(o,a);if(a<=1e3){let u=Math.round(o-1);c=1;for(let f=1;f<=u;++f){o+=-1;let d=o/a;c*=d/(d+1)}return c=Math.log(c),a>=8?c+lr(o)+Vr(o,a):s(c,o,a)}else{let u=Math.round(o-1);c=1;for(let f=1;f<=u;++f)o+=-1,c*=o/(o/a+1);return log(c)-u*log(a)+(lr(o)+Vr(o,a))}}else{let c=ql(o,a),u=o/a,f=-(o-.5)*Math.log(u/(u+1)),d=a*Dr(u);return f>d?Math.log(a)*-.5+r+c-d-f:Math.log(a)*-.5+r+c-f-d}}function Ds(t){return(t==0?1024:-300)*.69314718055995*.99999}function In(t){const e=.0566749439387324,r=.0456512608815524,o=.333333333333333,a=-.224696413112536,s=.00620886815375787,c=-1.27408923933623,u=.354508718369557;let f,d,v,h,g;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(f=t+.3,f/=.7,g=e-f*.3):t>.18?(f=t*.75-.25,g=r+f/3):(f=t,g=0),d=f/(f+2),v=d*d,h=((s*v+a)*v+o)/((u*v+c)*v+1),v*2*(1/(1-d)-d*h)+g)}function Dr(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,o=-.0178874546012214,a=-1.62752256355323,s=.747811014037616,c=-.0845104217945565;let u=t/(t+2),f=u*u,d=(((o*f+r)*f+e)*f+1)/(((c*f+s)*f+a)*f+1);return u*2*d}function $u(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],s=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,d,v,h,g;if(v=Math.abs(t),v<=.5)return f=t*t,g=(((r[0]*f+r[1])*f+r[2])*f+r[3])*f+r[4]+1,h=((o[0]*f+o[1])*f+o[2])*f+1,t*(g/h);if(v<=4){g=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7],h=((((((s[0]*v+s[1])*v+s[2])*v+s[3])*v+s[4])*v+s[5])*v+s[6])*v+s[7];let b=.5-Math.exp(-t*t)*g/h+.5;return t<0?-b:b}if(v>=5.8)return t>0?1:-1;d=t*t,f=1/d,g=(((c[0]*f+c[1])*f+c[2])*f+c[3])*f+c[4],h=(((u[0]*f+u[1])*f+u[2])*f+u[3])*f+1,f=(e-g/(d*h))/v;let m=.5-Math.exp(-d)*f+.5;return t<0?-m:m}function ef(t){const e=914041914819518e-24,r=.0238082361044469,o=-.499999999085958,a=.107141568980644,s=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+s)*t+a)*t+o)*t+1));{let u=Math.exp(t);return t>0?u*(.5-1/u+.5):u-.5-.5}}function rl(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function tf(t){const e=.785398163397448,r=1.4616321449683622,o=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],a=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],s=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let u,f,d,v,h,g,m,b,w,p,_,k,A;if(_=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),_>v&&(_=v),A=1e-9,b=0,t<.5){if(fabs(t)<=A){if(t==0)return 0;b=-1/t}else{if(h=-t,w=e,h<=0&&(h=-h,w=-w),h>=_)return 0;if(d=Math.round(h),h-=d,d=Math.round(h*4),h=(h-d*.25)*4,f=d/2,f+f!=d&&(h=1-h),g=e*h,u=f/2,u+u!=f&&(w=-w),f=(d+1)/2,u=f/2,u+=u,u==f){if(g==0)return 0;b=w*(cos(g)/sin(g)*4)}else b=w*(sin(g)/cos(g)*4)}t=1-t}if(t<=3){m=t,k=o[0]*t;for(let E=1;E<=5;++E)m=(m+a[E-1])*t,k=(k+o[E])*t;return m=(k+o[6])/(m+a[5]),p=t-r,m*p+b}if(t<_){h=1/(t*t),m=h,k=s[0]*h;for(let E=1;E<=3;++E)m=(m+c[E-1])*h,k=(k+s[E])*h;b=k/(m+c[3])-.5/t+b}return b+log(t)}function rf(t,e,r,o){let a,s,c,u,f,d;if(t>o*.001){if(u=t*Math.log(r),u<Math.exparg(1))return 0;a=Math.exp(u)}else a=1;for(a*=e/t,d=o/t,f=t+1,u=r,c=u/f,f+=1,u=r*u,s=u/f,c+=s;Math.abs(r)>d;)f+=1,u=r*u,s=u/f,c+=s;return a*=t*c+1,a}function nf(t,e,r,o){const a=.577215664901533;let s,c,u,f,d,v,h=e*r;for(d=r-h,c=e*o<=.02?Math.log(r)+tf(e)+a+d:Math.log(h)+a+d,s=o*5*Math.abs(c),u=1,f=0,u+=1,d*=r-h/u,v=d/u,f+=v;Math.abs(v)>s;)u+=1,d*=r-h/u,v=d/u,f+=v;return-t*(c+f)}function Do(t,e,r,o){let a,s,c,u,f,d,v,h,g;if(r==0)return 0;if(v=Math.min(t,e),v>=1)d=t*Math.log(r)-Vo(t,e),s=Math.exp(d)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(s=Math.pow(r,t),s==0)return s;g=t+e,g>1?(f=t+e-1,d=(vt(f)+1)/g):d=vt(g)+1,c=(vt(t)+1)*(vt(e)+1)/d,s*=c*(e/g)}else{if(f=tr(v),a=Math.round(h-1),a>=1){c=1;for(let _=1;_<=a;++_)h+=-1,c*=h/(v+h);f+=Math.log(c)}d=t*Math.log(r)-f,h+=-1,g=v+h,g>1?(f=v+h-1,u=(vt(f)+1)/g):u=vt(g)+1,s=Math.exp(d)*(v/t)*(vt(h)+1)/u}else f=tr(v)+Vr(v,h),d=t*Math.log(r)-f,s=v/t*Math.exp(d);if(s==0||t<=o*.1)return s;let m=o/t,b=0,w=0,p;for(c=1,b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),w+=p;b<1e7&&Math.abs(p)>m;)b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),w+=p;return t*w>-1?s*=t*w+1:s=0,s}function Bl(t,e,r,o,a,s){let c,u,f,d,v,h=t+e,g=t+1;if(a>1&&t>=1&&h>=g*1.1?(f=Math.round(Math.abs(Ds(1))),u=Math.round(Ds(0)),f>u&&(f=u),d=Math.exp(-f)):(f=0,d=1),c=af(f,t,e,r,o)/t,a==1||c==0)return c;let m=a-1,b=d;if(u=0,e>1){if(o>1e-4){let w=(e-1)*r/o-t;w>=1&&(u=w<m?Math.round(w):m)}else u=m;for(let w=0;w<u;++w)v=w,d*=(h+v)/(g+v)*r,b+=d}for(let w=u;w<m&&(v=w,d*=(h+v)/(g+v)*r,b+=d,!(d<=s*b));++w);return c*=b,c}function lf(t,e,r,o,a,s){let c,u,f,d,v,h,g,m,b,w,p,_,k,A,E,C,S,T,P;if(!Number.isFinite(a)||(P=of(t,e,r,o),Number.isNaN(P)))return Number.NaN;if(P==0)return 0;for(c=a+1,b=e/t,w=1/t+1,A=o+1,f=0,d=1,h=t+1,_=0,k=1,E=1,C=c/w,v=w/c,f+=1,g=f/t,m=f*(e-f)*r,u=t/h,T=d*(d+b)*u*u*(m*r),u=(g+1)/(w+g+g),S=f+m/h+u*(c+f*A),d=g+1,h+=2,g=T*_+S*E,_=E,E=g,g=T*k+S*C,k=C,C=g,p=v,v=E/C,_/=C,k/=C,E=v,C=1;f<1e4&&(f+=1,g=f/t,m=f*(e-f)*r,u=t/h,T=d*(d+b)*u*u*(m*r),u=(g+1)/(w+g+g),S=f+m/h+u*(c+f*A),d=g+1,h+=2,g=T*_+S*E,_=E,E=g,g=T*k+S*C,k=C,C=g,p=v,v=E/C,!(Math.abs(v-p)<=s*v));)_/=C,k/=C,E=v,C=1;return P*v}function of(t,e,r,o){const a=.398942280401433;let s,c,u,f,d,v,h,g,m;if(r==0||o==0)return 0;if(h=Math.min(t,e),h<8){let b,w;if(r<=.375?(b=Math.log(r),w=Dr(-r)):o>.375?(b=Math.log(r),w=Math.log(o)):(b=Dr(-o),w=Math.log(o)),v=t*b+e*w,h>=1)return v-=Vo(t,e),Math.exp(v);if(g=Math.max(t,e),g>=8)return f=tr(h)+Vr(h,g),h*Math.exp(v-f);if(g<=1){let _=Math.exp(v);return _==0?0:(m=t+e,m>1?(f=t+e-1,v=(vt(f)+1)/m):v=vt(m)+1,c=(vt(t)+1)*(vt(e)+1)/v,_*(h*c)/(h/g+1))}if(f=tr(h),s=Math.round(g-1),s>=1){c=1;for(let _=1;_<=s;++_)g+=-1,c*=g/(h+g);f=Math.log(c)+f}v-=f,g+=-1,m=h+g;let p;return m>1?(f=h+g-1,p=(vt(f)+1)/m):p=vt(m)+1,h*Math.exp(v)*(vt(g)+1)/p}else{let b,w,p,_;return t<=e?(b=t/e,w=b/(b+1),p=1/(b+1),_=t-(t+e)*r):(b=e/t,w=1/(b+1),p=b/(b+1),_=(t+e)*o-e),u=-_/t,f=Math.abs(u)>.6?u-Math.log(r/w):In(u),u=_/e,d=Math.abs(u)<=.6?In(u):u-Math.log(o/p),v=Math.exp(-(t*f+e*d)),a*Math.sqrt(e*w)*v*Math.exp(-ql(t,e))}}function af(t,e,r,o,a){const s=.398942280401433;let c,u,f,d,v,h,g,m;if(h=Math.min(e,r),h<8){let b,w;if(o<=.375?(b=Math.log(o),w=Dr(-o)):a>.375?(b=Math.log(o),w=Math.log(a)):(b=Dr(-a),w=Math.log(a)),v=e*b+r*w,h>=1)return v-=Vo(e,r),rl(t,v);if(g=Math.max(e,r),g>=8)return f=tr(h)+Vr(h,g),h*rl(t,v-f);if(g<=1){let _=rl(t,v);return _==0?_:(m=e+r,m>1?(f=e+r-1,v=(vt(f)+1)/m):v=vt(m)+1,c=(vt(e)+1)*(vt(r)+1)/v,_*(h*c)/(h/g+1))}f=tr(h);let p=Math.round(g-1);if(p>=1){c=1;for(let _=1;_<=p;++_)g+=-1,c*=g/(h+g);f+=Math.log(c)}return v-=f,g+=-1,m=h+g,u=m>1?(vt(m-1)+1)/m:vt(m)+1,h*rl(t,v)*(vt(g)+1)/u}else{let b,w,p,_;e>r?(b=r/e,w=1/(b+1),p=b/(b+1),_=(e+r)*a-r):(b=e/r,w=b/(b+1),p=1/(b+1),_=e-(e+r)*o),-Vs(r/e);let k=-_/e;return f=Math.abs(k)>.6?k-Math.log(o/w):In(k),k=_/r,d=Math.abs(k)>.6?k-Math.log(a/p):In(k),v=rl(t,-(e*f+r*d)),s*Math.sqrt(r*w)*v*Math.exp(-ql(e,r))}}function Yo(t,e,r,o,a,s){let u=Array(30),f=Array(30),d=e-.5-.5,v=t+d*.5,h=o>.375?Math.log(r):Dr(-o),g=-v*h;if(e*g==0)throw new Error("bgrat: expansion can not be computed.");let m=Math.log(e)+Vs(vt(e))+e*Math.log(g)+v*h,b=m-(Vr(e,t)+e*Math.log(v)),w=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let p=w==0,_=a==0?0:Math.exp(Math.log(a)-b),k=sf(e,g,m,s),A=.25/(v*v),E=h*.25*h,C=k,S=C,T=1,P=1,N=0;for(let B=1;B<=30;++B){let F=e+N;C=(F*(F+1)*C+(g+F+1)*T)*A,N+=2,T*=E,P/=N*(N+1);let L=B-1;u[L]=P;let D=0;if(B>1){let z=e-B;for(let G=1;G<=L;++G)D+=z*u[G-1]*f[L-G],z+=e}f[L]=d*P+D/B;let W=f[L]*C;if(S+=W,S<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(W)<=s*(S+_))break}return a+=p?Math.exp(b+Math.log(S)):w*S,a}function sf(t,e,r,o){const a=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-$u(Math.sqrt(e))+.5)*Math.exp(-r);{let s=Math.sqrt(e);return Bs(1,s)/s*a}}else if(e<1.1){let s=3,c=e,u=e/(t+3),f=o*.1/(t+1),d;for(s+=1,c*=-(e/s),d=c/(t+s),u+=d;Math.abs(d)>f;)s+=1,c*=-(e/s),d=c/(t+s),u+=d;let v=t*e*((u/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),g=vt(t),m=g+1;if(e>=.25&&t<e/2.59||h>-.13394){let b=ef(h),w=((b+.5+.5)*v-b)*m-g;return w<=0?0:w*Math.exp(-r)}else return(.5-Math.exp(h)*m*(.5-v+.5)+.5)*Math.exp(-r)}else{let s=1,c=1,u=e,f=e+(1-t),d=1,v,h;s=e*c+d*s,u=e*f+d*u,v=s/u,d+=1;let g=d-t;for(c=s+g*c,f=u+g*f,h=c/f;Math.abs(h-v)>=o*h;)s=e*c+d*s,u=e*f+d*u,v=s/u,d+=1,g=d-t,c=s+g*c,f=u+g*f,h=c/f;return h}}function cf(t,e,r,o){const s=1.12837916709551,c=.353553390593274,u=Array(21),f=Array(21),d=Array(21),v=Array(21);let h=t*In(-r/t)+e*In(r/e),g;if(g=Math.exp(-h),g==0)return 0;let m=Math.sqrt(h),b=m/c*.5,w=h+h,p,_,k,A;t<e?(p=t/e,_=1/(p+1),k=(e-t)/e,A=1/Math.sqrt(t*(p+1))):(p=e/t,_=1/(p+1),k=(e-t)/t,A=1/Math.sqrt(e*(p+1))),u[0]=k*.6666666666666666,d[0]=u[0]*-.5,v[0]=-d[0];let E=.5/s*Bs(1,m),C=c,S=E+v[0]*A*C,T=1,P=p*p,N=1,B=A,F=b,L=w;for(let W=2;W<=20;W+=2){N*=P,u[W-1]=_*2*(p*N+1)/(W+2);let z=W+1;T+=N,u[z-1]=k*2*T/(W+3);for(let V=W;V<=z;++V){let X=(V+1)*-.5;f[0]=X*u[0];for(let J=2;J<=V;++J){let te=0;for(let oe=1;oe<=J-1;++oe){let $=J-oe;te+=(oe*X-$)*u[oe-1]*f[$-1]}f[J-1]=X*u[J-1]+te/J}d[V-1]=f[V-1]/(V+1);let Q=0;for(let J=1;J<=V-1;++J)Q+=v[V-J-1]*d[J-1];v[V-1]=-(Q+d[V-1])}E=c*F+(W-1)*E,C=c*L+W*C,F=w*F,L=w*L,B*=A;let G=v[W-1]*B*E;B*=A;let ne=v[z-1]*B*C;if(S+=G+ne,Math.abs(G)+Math.abs(ne)<=o*S)break}let D=Math.exp(-ql(t,e));return s*g*D*S}function uf(t,e,r,o){let s=0,c=0;function u(p,_,k,A){const E=Do(p,_,k,1e-15);return A?.5-E+.5:E}function f(p,_,k,A){const E=Do(_,p,k,1e-15);return A?E:.5-E+.5}function d(p,_,k,A,E,C){const S=lf(p,_,k,A,E,15000000000000002e-30);return C?.5-S+.5:S}function v(p,_,k,A,E){let C=Math.round(_);_=_-C,_===0&&(C=C-1,_=1);let S=Bl(_,p,A,k,C,1e-15);return k<=.7?(S=S+Do(p,_,k,1e-15),E?.5-S+.5:S):(p<=15&&(C=20,S=S+Bl(p,_,k,A,C,1e-15),p=p+C),S=Yo(p,_,k,A,S,15*1e-15),E?.5-S+.5:S)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,g,m,b,w;if(t<=1||e<=1){if(r>.5?(w=!0,h=e,m=o,g=t,b=r):(w=!1,h=t,m=r,g=e,b=o),g<Math.min(1e-15,1e-15*h))return s=rf(h,g,m,1e-15),w?.5-s+.5:s;if(h<Math.min(1e-15,1e-15*g)&&g*m<=1)return c=nf(h,g,m,1e-15),w?c:.5-c+.5;if(Math.max(h,g)>1){if(g<=1)return u(h,g,m,w);if(m>=.29)return f(h,g,b,w);if(m<.1&&Math.pow(m*g,h)<=.7)return u(h,g,m,w)}else{if(h>=Math.min(.2,g)||Math.pow(m,h)<=.9)return u(h,g,m,w);if(m>=.3)return f(h,g,b,w)}let p=!1;return Math.max(h,g)>1&&g>15?c=0:(p=!0,c=Bl(g,h,b,m,20,1e-15),g+=20),c=Yo(g,h,b,m,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(p?c=Bl(g-n,h,b,m,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Yo(g,h,b,m,c,15*1e-15),s=-expm1(c),w?.5-s+.5:s):(s=.5-c+.5,w?.5-s+.5:s)}else{let p=Number.isFinite(t+e)?t>e?(t+e)*o-e:t-(t+e)*r:t*o-e*r;const _=p<0;let k,A,E,C;if(_?(p=-p,k=e,E=o,A=t,C=r):(k=t,E=r,A=e,C=o),A<40)return A*E<=.7?u(k,A,E,_):v(k,A,E,C,_);if(k>A){if(A<=100||p>A*.03)return d(k,A,E,C,p,_)}else{if(k<=100)return d(k,A,E,C,p,_);if(p>k*.03)return d(k,A,E,C,p,_)}return s=cf(k,A,p,1e-15*100),_?.5-s+.5:s}}function Ys(t){const e=t.nrows,r=t.ncols;if(e<r){const c=Ys(t.subset([],Mt.seq(1,e)));return{Q:c.Q,R:df(c.Q,t)}}let o=Pt.eye(e),a=t.t();for(let c=1;c<=r;c++)for(let u=e;u>=c+1;u--){const f=a.v.subarray((u-2)*r,u*r),d=o.v.subarray((u-2)*e,u*e),v=f.slice(),h=d.slice(),[g,m,b]=ff(v[c-1],v[c-1+r]);for(let w=0;w<r;w++)f[w]=v[w]*g+v[w+r]*m,f[w+r]=v[w]*-m+v[w+r]*g,d[w]=h[w]*g+h[w+e]*m,d[w+e]=h[w]*-m+h[w+e]*g;for(let w=r;w<e;w++)d[w]=h[w]*g+h[w+e]*m,d[w+e]=h[w]*-m+h[w+e]*g}const s=Mt.seq(1,r);return{Q:e===r?o:o.subset([],s),R:e===r?a.t():a.subset([],s).t()}}function ff(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const s=e/t,c=Math.sqrt(1+s*s),u=1/c;return[u,s*u,t*c]}const r=t/e,o=Math.sqrt(1+r*r),a=1/o;return[r*a,a,e*o]}function Ws(t){return typeof t=="number"}function Us(t,e){e===void 0&&(e=t);const r=t.nrows,o=t.ncols,a=e.nrows;e.ncols;const s=r,c=a,u=o,f=new Float64Array(s*c);for(let d=0;d<u;d++){const v=t.v.subarray(d*r,(d+1)*r),h=e.v.subarray(d*a,(d+1)*a);for(let g=0;g<c;g++){const m=f.subarray(g*s,(g+1)*s);for(let b=0;b<s;b++)m[b]+=v[b]*h[g]}}return new Pt(f,s,c)}function df(t,e){if(e===void 0&&(e=t),!or(t)||!or(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,o=t.ncols,a=e.nrows,s=e.ncols,c=o,u=s,f=r,d=new Float64Array(c*u);for(let v=0;v<u;v++){const h=e.v.subarray(v*a,(v+1)*a),g=d.subarray(v*c,(v+1)*c);for(let m=0;m<c;m++){const b=t.v.subarray(m*r,(m+1)*r);let w=0;for(let p=0;p<f;p++)w+=b[p]*h[p];g[m]=w}}return new Pt(d,c,u)}function Hs(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ye(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new Pt(t.v,e,r)}function or(t){return t&&t.constructor===Pt}function vf(t,e,r){return new Pt(new Float64Array(t),e,r)}const Ve=class Ve{constructor(e,r,o){if(!ArrayBuffer.isView(e)||e.constructor!==Ve.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||o===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*o)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=o}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Ve.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const o=Ve.eye(e),a=Ve.eye(e),s=this.t(),c=s.v[(e-1)*e+(e-1)],u=e-1;for(let f=0;f<e;f++)a.v[u*e+f]=o.v[u*e+f]/c;for(let f=e-2;f>=0;f--){let d=o.getcolumn(f+1);const v=s.getcolref(f+1);for(let h=f+1;h<e;h++){const g=a.getcolumn(h+1);d=d.subtract(g.mult(v[h]))}a.v.set(d.divide(v[f]).v,f*e)}return a.t()}if(this.islowertriangular()){const o=this.diag();if(Ps(o)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const a=Ve.eye(e),s=Ve.eye(e),c=this.t(),u=0,f=c.v[0];for(let d=0;d<e;d++)s.v[u*e+d]=a.v[u*e+d]/f;for(let d=1;d<e;d++){let v=a.getcolumn(d+1);const h=c.getcolref(d+1);for(let g=0;g<d;g++){const m=s.getcolumn(g+1);v=v.subtract(m.mult(h[g]))}s.v.set(v.divide(h[d]).v,d*e)}return s.t()}const r=Ys(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>Ve.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>Ve.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let o=0;o<e;o++)r[o]=this.getcolref(o+1)[o];return new Ye(r)}t(){const e=this.nrows,r=this.ncols,o=new Ve.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let a=0;a<this.ncols;a++){const s=this.v.subarray(a*this.nrows,(a+1)*this.nrows);for(let c=0;c<this.nrows;c++)o[c*r+a]=s[c]}return new Ve(o,r,e)}for(let a=0;a<this.nrows;a++){const s=o.subarray(a*r,(a+1)*r);for(let c=0;c<this.ncols;c++)s[c]=this.v[c*this.nrows+a]}return new Ve(o,r,e)}dot(e){if(Xe(e))return new Ve(Ho(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(or(e))return new Ve(Ho(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,o){if(or(e))return new Ve(Wo(this.v,e.v,r),this.nrows,this.ncols);if(Ws(e))return new Ve(Uo(this.v,e,r),this.nrows,this.ncols);if(!Xe(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(o===void 0&&(o=e.length===this.ncols?2:1),o===2&&e.length===this.ncols){const a=new Ve.valuesConstructor(this.v.length);for(let s=0;s<this.ncols;s++)a.set(Uo(this.getcolref(s+1),e.v[s],r),s*this.nrows);return new Ve(a,this.nrows,this.ncols)}if(o===1&&e.length===this.nrows){const a=new Ve.valuesConstructor(this.v.length);for(let s=0;s<this.ncols;s++)a.set(Wo(this.getcolref(s+1),e.v,r),s*this.nrows);return new Ve(a,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e,r){if(r===void 0&&(r=2),r==2){const o=this.ncols,a=new Ve.valuesConstructor(o);for(let s=0;s<o;s++)a[s]=e(this.getcolref(s+1));return new Ye(a)}if(r==1)return this.t().apply(e,2);if(r==0){const o=this.v.length,a=new Ve.valuesConstructor(o);for(let s=0;s<o;s++)a[s]=e(this.v[s]);return new Ve(a,this.nrows,this.ncols)}}replace(e,r,o){typeof r=="number"&&(r=[r]),r.length===0&&(r=Mt.seq(1,this.nrows)),ar(r)||(r=sr(r)),typeof o=="number"&&(o=[o]),o.length===0&&(o=Mt.seq(1,this.ncols)),ar(o)||(o=sr(o));const a=r.length,s=o.length;if(Or(r)<1||mn(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Or(o)<1||mn(o)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==a||e.ncols!==s)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<o.length;c++){const u=e.getcolref(c+1),f=(o.v[c]-1)*this.nrows;for(let d=0;d<r.length;d++){const v=r.v[d];this.v[f+v-1]=u[d]}}return this}copy(){return new Ve(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Ye.valuesConstructor(this.ncols);for(let o=0;o<this.ncols;o++)r[o]=this.getcolref(o+1)[e-1];return new Ye(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ye(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=sr([e])),typeof r=="number"&&(r=sr([r])),Array.isArray(e)&&(e=e.length===0?null:sr(e)),Array.isArray(r)&&(r=r.length===0?null:sr(r)),e!==null&&!ar(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!ar(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Or(e)<1||mn(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Or(r)<1||mn(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const u=r.length,f=this.nrows,d=new Ve.valuesConstructor(f*u);for(let v=0;v<r.length;v++)d.set(this.v.slice((r.v[v]-1)*this.nrows,r.v[v]*this.nrows),v*this.nrows);return new Ve(d,f,u)}if(r==null)return this.t().subset(r,e).t();const o=e.length,a=r.length,s=new Ve.valuesConstructor(o*a);let c=new Ve.valuesConstructor(o);for(let u=0;u<a;u++){const f=this.v.subarray((r.v[u]-1)*this.nrows,r.v[u]*this.nrows);for(let d=0;d<o;d++)c[d]=f[e.v[d]-1];s.set(c,u*o)}return new Ve(s,o,a)}toString(e){function r(c,u){return" ".repeat(u-c.length)+c}e===void 0&&(e=2),this.ncols;const o=Math.round(Math.abs(Math.log10(mn(this.v))))+e+3;let a="";const s=this.t();for(let c=1;c<=s.ncols;c++)a+=Array.from(s.getcolref(c)).map(u=>r(u.toFixed(e),o)).join(" ")+`
`;return a}toCSV(e,r,o,a){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const s=a!=null&&a.length>0,c=o!=null&&o.length>0;if(s&&a.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&o.length!==this.ncols+(s?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const u=this.t();let f=c?o.join(e)+`
`:"";for(let d=1;d<=u.ncols;d++)f=f+(s?a[d-1]+e:"")+u.getcolref(d).join(e)+`
`;return f=f.replace(/\./g,r),f}static randn(e,r,o,a){return Hs(js(e*r,o,a),e,r)}static rand(e,r,o,a){return Hs(Is(e*r,o,a),e,r)}static eye(e,r){r===void 0&&(r=e);const o=new Float64Array(e*r);for(let a=0;a<Math.min(e,r);a++)o[a*e+a]=1;return new Ve(o,e,r)}static diagm(e){if(!Xe(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,o=new Float64Array(r*r);for(let a=0;a<r;a++)o[a*r+a]=e.v[a];return new Ve(o,r,r)}static zeros(e,r){return r===void 0&&(r=e),new Ve(new Float64Array(e*r),e,r)}static ones(e,r){return Ve.fill(1,e,r)}static fill(e,r,o){o===void 0&&(o=r);const a=new Float64Array(r*o);for(let s=0;s<a.length;s++)a[s]=e;return new Ve(a,r,o)}static outer(e,r,o){if(Array.isArray(e)&&(e=lt(e)),Array.isArray(r)&&(r=lt(r)),!Xe(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Xe(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const a=Ve.zeros(e.length,r.length);for(let s=0;s<r.length;s++){const c=r.v[s],u=a.getcolref(s+1);for(let f=0;f<e.length;f++)u[f]=o(e.v[f],c)}return a}static parseCSV(e,r,o,a){function s(p){return p.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let u=e.split(/\n/),f=[],d=0;const v=u[0].split(r);(o||o===void 0&&s(v))&&(f=v,d=1),u=u.filter(p=>p.trim().length>1);let h=[],g=0;a&&(g=1);const m=u.length-d,b=v.length-g;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const w=Ve.zeros(b,m);for(let p=d;p<m+d;p++){const _=u[p].split(r);let k;if(a?(h[p-d]=_[0],k=_.slice(1).map(A=>Number.parseFloat(A.trim().replace(c,".")))):k=_.map(A=>Number.parseFloat(A.trim().replace(c,"."))),k.some(A=>Number.isNaN(A)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(k.length!=b)throw Error("Wrong number of values in row #"+p);w.v.set(new Float64Array(k),(p-d)*b)}return{values:w.t(),header:f,labels:h,sep:r,dec:c}}};fr(Ve,"valuesConstructor",Float64Array),fr(Ve,"TOLERANCE",Math.pow(10,-9));let Pt=Ve;function Xe(t){return t&&t.constructor===Ye}function lt(t){return new Ye(new Float64Array(t))}const mt=class mt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new Mt.valuesConstructor(this.length);let o=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[o]=a+1,o=o+1);return new Mt(r.subarray(0,o))}filter(e){const r=new mt.valuesConstructor(this.length);let o=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[o]=this.v[a],o=o+1);return new mt(r.subarray(0,o))}shuffle(){return new mt(Js(this.v))}sort(e){return new mt(Qs(this.v,e))}sortind(e){return new Mt(Zs(this.v,e))}rep(e){return Xs(this,e)}repeach(e){return Ks(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=Mt.seq(1,this.length)),ar(r)||(r=sr(r));const o=r.length;if(Or(r)<1||mn(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==o)throw Error('Vector.replace: length of "x" does not match the indices.');for(let a=0;a<r.length;a++){const s=r.v[a];this.v[s-1]=e.v[a]}return this}subset(e){if(typeof e=="number"&&(e=sr([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Mt.bool2ind(e):sr(e)),!ar(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=mt.zeros(r);for(let a=0;a<r;a++){if(e.v[a]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[a]>this.length)throw Error("subset: index exceeds the length of the vector.");o.v[a]=this.v[e.v[a]-1]}return o}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new mt(this.v.slice(e-1,r))}copy(){return new mt(this.v.slice())}dot(e){return e===void 0&&(e=this),Ho(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Xe(e))return new mt(Wo(this.v,e.v,r));if(Ws(e))return new mt(Uo(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e){const r=this.v.length,o=mt.zeros(r);for(let a=0;a<r;a++)o.v[a]=e(this.v[a]);return o}static c(...e){if(e.length===1)return e[0];const r=e.reduce((s,c)=>s+(typeof c=="number"?1:c.length),0),o=new mt.valuesConstructor(r);let a=0;for(const s of e)typeof s=="number"?(o[a]=s,a+=1):(o.set(Xe(s)?s.v:new mt.valuesConstructor(s),a),a+=typeof s=="number"?1:s.length);return new mt(o)}static seq(e,r,o){return Gs(e,r,o,mt)}static randn(e,r,o){return js(e,r,o)}static rand(e,r,o){return Is(e,r,o)}static zeros(e){return new mt(new mt.valuesConstructor(e))}static ones(e){return mt.fill(1,e)}static fill(e,r){const o=new mt.valuesConstructor(r);for(let a=0;a<o.length;a++)o[a]=e;return new mt(o)}};fr(mt,"valuesConstructor",Float64Array);let Ye=mt;function ar(t){return t.constructor===Mt}function sr(t){return new Mt(new Int32Array(t))}const At=class At{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new At.valuesConstructor(this.length);let o=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[o]=a+1,o=o+1);return new At(r.subarray(0,o))}filter(e){const r=new At.valuesConstructor(this.length);let o=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[o]=this.v[a],o=o+1);return new At(r.subarray(0,o))}shuffle(){return new At(Js(this.v))}sort(e){return new At(Qs(this.v,e))}sortind(e){return new At(Zs(this.v,e))}rep(e){return Xs(this,e)}repeach(e){return Ks(this,e)}subset(e){if(typeof e=="number"&&(e=sr([e])),Array.isArray(e)&&(e=sr(e)),!ar(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=new At.valuesConstructor(r);for(let a=0;a<r;a++){if(e.v[a]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[a]>this.length)throw Error("subset: index exceeds the length of the vector.");o[a]=this.v[e.v[a]-1]}return new At(o)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new At(this.v.slice(e-1,r))}static seq(e,r,o){return Gs(e,r,o,At)}static ones(e){return At.fill(1,e)}static fill(e,r){const o=new At.valuesConstructor(r);for(let a=0;a<o.length;a++)o[a]=e;return new At(o)}static bool2ind(e){let r=0;const o=new At.valuesConstructor(e.length);for(let a=0;a<e.length;a++)e[a]&&(o[r]=a+1,r=r+1);return new At(o.subarray(0,r))}};fr(At,"valuesConstructor",Int32Array);let Mt=At;function Gs(t,e,r,o){r===void 0&&(r=t<=e?1:-1);const a=Math.floor((e-t)/r)+1;if(a<1)throw Error("seq: wrong combination of parameters.");const s=new o.valuesConstructor(a);for(let c=0;c<a;c++)s[c]=t+c*r;return new o(s)}function Xs(t,e){const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let a=1;a<=e;a++)for(let s=0;s<t.length;s++)o[(a-1)*t.length+s]=t.v[s];return new t.constructor(o)}function Ks(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let a=0;a<t.length;a++)for(let s=0;s<e;s++)o[a*e+s]=t.v[a];return new t.constructor(o)}function Wo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const o=new t.constructor(t.length);for(let a=0;a<t.length;a++)o[a]=r(t[a],e[a]);return o}function Uo(t,e,r){const o=new t.constructor(t.length);for(let a=0;a<t.length;a++)o[a]=r(t[a],e);return o}function Ho(t,e,r,o,a,s){if(o!==a)throw Error("_dot: matrix dimensions do not much.");const c=r,u=s,f=o,d=new t.constructor(c*u);for(let v=0;v<u;v++){const h=e.subarray(v*a,(v+1)*a),g=d.subarray(v*c,(v+1)*c);for(let m=0;m<f;m++){const b=h[m],w=t.subarray(m*r,(m+1)*r);for(let p=0;p<c;p++)g[p]+=w[p]*b}}return d}function Js(t){let e=t.slice(),r=e.length,o,a;for(;r;)a=Math.floor(Math.random()*r--),o=e[r],e[r]=e[a],e[a]=o;return e}function Qs(t,e=!1){return e?t.slice().sort((r,o)=>o-r):t.slice().sort((r,o)=>r-o)}function Zs(t,e=!1){const r=Mt.seq(1,t.length).v;return e?r.sort((o,a)=>t[a-1]-t[o-1]):r.sort((o,a)=>t[o-1]-t[a-1])}function hf(t,e,r){return 5*t*e+e+4*r*e+t*r}function mf(t,e){return 2+2*t+t*e+17*e}function It(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const o=t.ncols,a=t.ncomp;let s,c;switch(e){case"mX":s=2,c=o;break;case"sX":s=2+o,c=o;break;case"loadings":case"xloadings":s=2+2*o+(r-1)*o,c=o;break;case"P":s=2+2*o,c=a*o;break;case"eigenvals":case"xeigenvals":s=2+2*o+o*a,c=a;break;case"cq0":s=2+2*o+o*a+a,c=a;break;case"cNq":s=2+2*o+o*a+2*a,c=a;break;case"rq0":s=2+2*o+o*a+3*a,c=a;break;case"rNq":s=2+2*o+o*a+4*a,c=a;break;case"ch0":s=2+2*o+o*a+5*a,c=a;break;case"cNh":s=2+2*o+o*a+6*a,c=a;break;case"rh0":s=2+2*o+o*a+7*a,c=a;break;case"rNh":s=2+2*o+o*a+8*a,c=a;break;case"cr0":s=2+2*o+o*a+9*a,c=a;break;case"cNr":s=2+2*o+o*a+10*a,c=a;break;case"rr0":s=2+2*o+o*a+11*a,c=a;break;case"rNr":s=2+2*o+o*a+12*a,c=a;break;case"cg0":s=2+2*o+o*a+13*a,c=a;break;case"cNg":s=2+2*o+o*a+14*a,c=a;break;case"rg0":s=2+2*o+o*a+15*a,c=a;break;case"rNg":s=2+2*o+o*a+16*a,c=a;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(s,s+c)}function br(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const o=t.ncols,a=t.nrows,s=t.ncomp;let c,u;switch(e){case"scores":case"xscores":c=(r-1)*a,u=a;break;case"T":c=0,u=a*s;break;case"hdist":c=a*s+(r-1)*a,u=a;break;case"qdist":c=2*a*s+(r-1)*a,u=a;break;case"xcumexpvar":case"cumexpvar":c=3*a*s,u=s;break;case"fdistc":c=3*a*s+s+(r-1)*a,u=a;break;case"fdistr":c=4*a*s+s+(r-1)*a,u=a;break;case"gdist":c=5*a*s+s+(r-1)*o,u=o;break;case"rdist":c=5*a*s+s+o*s+(r-1)*o,u=o;break;case"idistc":c=5*a*s+s+2*o*s+(r-1)*o,u=o;break;case"idistr":c=5*a*s+s+3*o*s+(r-1)*o,u=o;break;case"E":c=5*a*s+s+3*o*s+s*o,u=a*o;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+u)}function Ol(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let o=0;o<t.length;o++){const a=t[o];if(a<e||a>r)return!1}return!0}function gf(t,e,r,o,a,s,c){if(!or(e))throw new Error("pca_fit: X must be a matrix.");s||(s=[]);const u=s&&Array.isArray(s)?s.length:0;if(!Ol(s,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!Ol(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const d=e.nrows-u,v=e.ncols-f;if(d<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(o===void 0&&(o=!0),a===void 0&&(a=!1),r===void 0&&(r=Math.min(d-1,v)),r<1||r>Math.min(d-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let g=null;if(u>0){const A=new Int32Array(s);g=t._malloc(A.length*A.BYTES_PER_ELEMENT),t.HEAP32.set(A,g/A.BYTES_PER_ELEMENT)}let m=null;if(f>0){const A=new Int32Array(c);m=t._malloc(A.length*A.BYTES_PER_ELEMENT),t.HEAP32.set(A,m/A.BYTES_PER_ELEMENT)}const b=mf(v,r),w=Float64Array,p=t._malloc(b*w.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,r,o,a,p,g,u,m,f])!==1)throw new Error("pca_fit: PCA failed.");const k=t.HEAPF64.slice(p/w.BYTES_PER_ELEMENT,p/w.BYTES_PER_ELEMENT+b);return t._free(h),t._free(p),g&&t._free(g),m&&t._free(m),{class:["pcamodel"],v:k,ncomp:r,nrows:d,ncols:v,exclvars:c,center:o,scale:a}}function pf(t,e,r,o){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!or(r))throw new Error("pca_predict: X must be a matrix.");o||(o=[]);const a=o&&Array.isArray(o)?o.length:0;if(!Ol(o,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const s=r.nrows-a;let c=e.exclvars;r.ncols===e.ncols&&(c=[]);const u=c.length,f=r.ncols-u;if(s<1)throw new Error("pca_predict: X must have at least 1 row.");if(f!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const d=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,d/r.v.BYTES_PER_ELEMENT);let v=null;if(a>0){const N=new Int32Array(o);v=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,v/N.BYTES_PER_ELEMENT)}let h=null;if(u>0){const N=new Int32Array(c);h=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,h/N.BYTES_PER_ELEMENT)}const g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const m=hf(s,e.ncomp,f),b=Float64Array,w=t._malloc(m*b.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[d,r.nrows,r.ncols,g,w,v,a,h,u])!==1)throw new Error("pca_predict: PCA prediction failed.");const _=t.HEAPF64.slice(w/b.BYTES_PER_ELEMENT,w/b.BYTES_PER_ELEMENT+m);t._free(d),t._free(g),t._free(w),v&&t._free(v),h&&t._free(h);const k={class:["pcares"],v:_,ncomp:e.ncomp,nrows:s,ncols:f,npred:f,outliers:o,exclvars:e.exclvars,center:e.center,scale:e.scale},A=new Array(e.ncomp),E=new Array(e.ncomp),C=new Array(e.ncomp),S=new Array(e.ncomp),T=new Array(e.ncomp),P=br(k,"xcumexpvar");T[0]=1,S[0]=P[0],C[0]=1-P[0],A[0]=P[0],E[0]=1-P[0];for(let N=1;N<e.ncomp;N++)T[N]=N+1,S[N]=P[N],C[N]=1-P[N],A[N]=P[N]-P[N-1],E[N]=1-A[N];return k.stat={components:T,resvar:E,expvar:A,cumexpvar:S,cumresvar:C},k}function bf(t,e,r,o,a,s,c,u){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!or(r))throw new Error("pcapcv: X must be a matrix.");u||(u=[]);const f=u&&Array.isArray(u)?u.length:0;if(!Ol(u,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const d=e.exclvars.length,v=r.nrows-f,h=r.ncols-d;if(v<3)throw new Error("pcapcv: X must have at least 3 rows.");if(h!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(s)||![0,1,2].includes(s))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(s>0&&(!Number.isInteger(a)||a<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(s>0&&a>v)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(o)||o<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const g=Math.min(s===0?v-2:v-Math.ceil(v/a)-1,h,e.ncomp);if(o>g)throw new Error('pcapcv: the value of "ncomp" is too large.');const m=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,m/r.v.BYTES_PER_ELEMENT);let b=null;if(f>0){const S=new Int32Array(u);b=t._malloc(S.length*S.BYTES_PER_ELEMENT),t.HEAP32.set(S,b/S.BYTES_PER_ELEMENT)}let w=null;if(d>0){const S=new Int32Array(e.exclvars);w=t._malloc(S.length*S.BYTES_PER_ELEMENT),t.HEAP32.set(S,w/S.BYTES_PER_ELEMENT)}const p=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const _=v*h,k=r.v.constructor,A=t._malloc(_*k.BYTES_PER_ELEMENT);if(t.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[m,r.nrows,r.ncols,o,e.center,e.scale,s,a,c,p,A,b,f,w,d])!==1)throw new Error("pcapcv: PCVPCA failed.");const C=t.HEAPF64.slice(A/k.BYTES_PER_ELEMENT,A/k.BYTES_PER_ELEMENT+_);return t._free(m),t._free(p),t._free(A),b&&t._free(b),w&&t._free(w),new Pt(C,v,h)}function wf(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const Yr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:wf,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function _f(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const o=Yr[t.ml[r]].title;e=e+"<li>"+o+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function $s(t,e,r){const o=Yr.findIndex(h=>h.id==="trim");let a=0,s=t.ncols-e,c=0;for(let h=0;h<r.ml.length;h++){if(r.ml[h]!==o){c+=r.mpl_new[h];continue}a=Math.max(a,r.mp_new[c]),s=Math.min(s,r.mp_new[c+1]),c+=r.mpl_new[h]}const u=t.nrows,d=s-a+e,v=Pt.zeros(u,d);return c=0,e>0&&(v.v.set(t.v.slice(0,e*u),c),c+=e*u),v.v.set(t.v.slice((e+a)*u,(e+s)*u),c),[a,s,v]}function yf(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=Yr.findIndex(u=>u.id==="trim");if(e.ml.findIndex(u=>u===r)<0)return t;const[a,s,c]=$s(t.values,t.nresp,e);return t.values=c,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+a,t.nresp+s)):t.varlabels.slice(a,s),t.varindices=t.nresp>0?Wr(0,t.nresp-1).concat(Wr(0,s-a-1)):Wr(0,s-a-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+a,t.nresp+s)):t.varvalues.slice(a,s),t}function ei(t,e,r,o,a=!0,s=[]){if(!or(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(o)||o.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,u;a?(c=e.ncols,u=e.nrows-r):(c=e.nrows,u=e.ncols-r);const f=o.length;if(f<1)throw new Error("prep_fit: no preprocessing methods are provided.");const d=new Int32Array(f),v=new Int32Array(f),h=new Int32Array(f);let g=0,m=0;for(let L=0;L<o.length;L++){const D=o[L].id,W=o[L].params,z=Yr.findIndex(ne=>ne.id==D);if(z<0)throw new Error("prep_fit: wrong method name: "+D+".");const G=Yr[z];if(W.length!==G.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+D+".");d[L]=z,v[L]=G.mpl,h[L]=G.get_mpl_new(u,W),g=g+v[L],m=m+h[L]}const b=new Float64Array(g);let w=0;for(let L=0;L<o.length;L++){const D=o[L].id,W=o[L].params;Yr.findIndex(z=>z.id==D),b.set(W,w),w=w+v[L]}const p=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const _=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,_/d.BYTES_PER_ELEMENT);const k=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,k/v.BYTES_PER_ELEMENT);const A=t._malloc(h.length*h.BYTES_PER_ELEMENT);t.HEAP32.set(h,A/h.BYTES_PER_ELEMENT);const E=t._malloc(b.length*b.BYTES_PER_ELEMENT);t.HEAPF64.set(b,E/b.BYTES_PER_ELEMENT);const C=t._malloc(m*b.BYTES_PER_ELEMENT),S=new Int32Array(s),T=S.length,P=t._malloc(T*S.BYTES_PER_ELEMENT);if(t.HEAP32.set(S,P/S.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[p,c,u,r,f,_,k,E,A,C,a,P,T])!==1)throw new Error("prep_fit: unexpected error.");const B=t.HEAPF64.slice(C/b.BYTES_PER_ELEMENT,C/b.BYTES_PER_ELEMENT+m);return t._free(p),t._free(_),t._free(E),t._free(k),t._free(P),t._free(C),t._free(A),{ml:d,mpl:v,mp:b,mpl_new:h,mp_new:B,npred:u,class:["prepmodel"]}}function Go(t,e,r,o,a=!0,s=!1){if(!or(e))throw new Error("prep_apply: D must be a matrix.");let c,u;if(a?(c=e.ncols,u=e.nrows-r):(c=e.nrows,u=e.ncols-r),u!==o.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+o.npred+" got "+u+").");const f=o.ml,d=o.mpl_new,v=o.mp_new,h=d.reduce((C,S)=>C+S,0);if(!f||f.length<1||!d||d.length!==f.length||v.length!==h)throw console.log(c,u,v.length,h),new Error("prep_apply: wrong structure of the model object.");const g=f.length,m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const b=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAP32.set(f,b/f.BYTES_PER_ELEMENT);const w=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,w/d.BYTES_PER_ELEMENT);const p=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAPF64.set(v,p/v.BYTES_PER_ELEMENT);const _=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[m,c,u,r,g,b,w,p,_,a])!==1)throw new Error("prep_apply: unexpected error.");const A=t.HEAPF64.slice(_/e.v.BYTES_PER_ELEMENT,_/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(m),t._free(b),t._free(w),t._free(p),t._free(_);const E=new Pt(A,e.nrows,e.ncols);if(s){const[C,S,T]=$s(E,r,o);return T}return E}function Wr(t,e,r=1){const o=Math.round((e-t+1)/r),a=Array(o);for(let s=0;s<o;s++)a[s]=t+s*r;return a}function xf(t,e){let r,o,a;if(e.length>0){const s=t.values.nrows,c=t.objindices,u=s-e.length;r=Array(u),o=Array(u),a=Array(u);let f=0;for(let d=0;d<s;d++)e.includes(d)||(r[f]=c[d],o[f]=t.classes[d],a[f]=t.objlabels[d],f=f+1)}else r=t.objindices,a=t.objlabels,o=t.classes;return[r,a,o]}function ti(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Xo(t,e,r,o,a=!1){const[s,c,u]=xf(r,o),f=a&&e.prep&&e.prep.ml&&e.prep.ml.length>0?Go(t,r.values,0,e.prep,!1,!0):r.values,d=pf(t,e,f,o);d.hash=ti(),d.objindices=s,d.objlabels=c,d.classes=u,d.classNames=r.classNames,d.varlabels=r.varlabels,d.eigenvals=It(e,"eigenvals"),d.cNh=It(e,"cNh"),d.cNq=It(e,"cNq"),d.ch0=It(e,"ch0"),d.cq0=It(e,"cq0"),d.rNh=It(e,"rNh"),d.rNq=It(e,"rNq"),d.rh0=It(e,"rh0"),d.rq0=It(e,"rq0");const v=e.nrows;return d.T2lim=2*(v-1)/(v-2)*qs(.95,2,v-2),d}function kf(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function nl(t){return t.some(e=>Number.isNaN(e))}function gn(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function ri(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Ef(t,e,r,o,a,s,c,u=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let d=ri(t);if(d.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");d=d.filter(z=>z.replaceAll(e,"").trim().length>0);const v=d[0].split(e);if(v.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,g;const m=r!=="no";(m||m===void 0&&nl(firstRow))&&(g=v,h=1);const b=d.length-h;if(b<1)throw new Error("Data file should contain at least 1 row with values.");let w,p,_,k=Array(b);o?(w=m?gn(g[0]):"",_=Array(b),p=1):(w="",_=[],p=0);let A,E=[],C;a?(A=m?gn(g[p]):"",C=Array(b),p=p+1):(A="",C=[]);const S=v.length-p;if(S<1)throw new Error("Data file should contain at least 1 column with values.");const T=Pt.zeros(S,b);for(let z=h;z<b+h;z++){const G=z-h;k[G]=G;let ne=d[z].split(e);if(o&&(_[G]=ne[0],ne.shift()),a){const X=ne[0];C[G]=X,ne.shift(),(E.length===0||E.indexOf(X)<0)&&E.push(X)}const V=f==="."?ne.map((X,Q)=>Number.parseFloat(X.trim())):ne.map((X,Q)=>Number.parseFloat(X.trim().replace(f,".")));if(V.some(X=>Number.isNaN(X)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(V.length!=S)throw new Error("Wrong number of values in row #"+z);T.v.set(new Float64Array(V),(z-h)*S)}if(!o||_.length!==b){_=Array(b);for(let z=0;z<b;z++)_[z]="O"+(z+1)}_=_.map(z=>gn(z)),C=C.map(z=>gn(z)),E=E.map(z=>gn(z));let P,N=Array(S),B=Array(S);if(g&&g.length===S+p){P=g.map(z=>gn(z)).slice(p);for(let z=0;z<S;z++)N[z]=z>=u?z-u:z,B[z]=z>=u?z-u+1:z+1}else{P=Array(S);for(let z=0;z<S;z++)N[z]=z>=u?z-u:z,P[z]=z>=u?"V"+(z-u+1):"Y"+(z+1),B[z]=z>=u?z-u+1:z+1}let F;if(r==="values"){if(F=f==="."?P.map((z,G)=>G<u?G:Number.parseFloat(z.trim())):P.map((z,G)=>G<u?G:Number.parseFloat(z.trim().replace(f,"."))),F.some(z=>Number.isNaN(z)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else F=B;Array.isArray(F)||(F=[]),s||(s=""),c||(c=""),s=F.length>0&&s.length>0?s:"Variables",c=F.length>0&&c.length>0?c:"";const L=s+(c.length>0?", "+c:""),D=F[1]<F[0];return{values:T.t(),nresp:u,header:r,hasLabels:o,hasClassNames:a,labelsVarname:w,classLabelsVarname:A,objlabels:_,objindices:k,varlabels:P,varvalues:F,varindices:N,varrev:D,classes:C,classNames:E,sep:e,dec:f,varvaluesName:s,varvaluesUnits:c,varAxisTitle:L}}function Af(t){if(nl(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let o=2;o<e;o++){let a=[];for(let d=1;d<t.length;d++)a.push(t[d][o]);const s=t[0][o],c=Io(a),u=Ms(a),f=Math.abs((s-c)/u);r.push(f)}return r.every(o=>o>5)}function Cf(t){const r=t[0].split(","),o=t[1].split(","),a=r.length,s=o.length,c=";",u=t[0].split(c),f=t[1].split(c),d=u.length,v=f.length;let h,g;if(a>1&&s>1&&a===s&&a>d)g=",",h=a;else if(d>1&&v>1&&d===v)g=c,h=d;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[g,g===","?".":",",h]}function Sf(t,e=0){const r=ri(t),o=r.length;if(o<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[a,s,c]=Cf(r),u=Math.min(c,5),f=Math.min(o,5);let d=r[0].split(a).length,v=r.slice(0,f).map(N=>N.split(a).slice(0,u));v=v.map(N=>N.map(B=>gn(B)));const h=v.map(N=>kf(N.slice(),s));for(let N=1;N<f;N++)if(nl(h[N].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const g=Af(h);let m=0;const b=g?1:0,w=b+1,p=v[b][0],_=v[w][0],k=h[b][0],A=h[w][0],E=h[b][1],C=h[w][1];let S=!1,T=!1;if(Number.isNaN(k)&&Number.isNaN(A)&&p!==_?(S=!0,m=m+1):Number.isNaN(E)&&Number.isNaN(C)&&p!==_&&(S=!0,T=!0,m=m+2),!T){const N=S?1:0,B=h[b][N],F=h[w][N];T=nl([B,F]),m=m+T}let P="no";if(g){m>0?v[0].slice(m+e):v[e];const N=m>0?h[0].slice(m+e):h[e];P=nl(N)?"labels":"values"}return[a,S,T,P,d]}function Mf(t){const e=t.values.t(),r=t.sep,o=t.dec;let a=null;t.header!=="no"&&(a=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),a&&t.hasClassNames&&(a=[t.classLabelsVarname,...a]),a&&t.hasLabels&&(a=[t.labelsVarname,...a]);const s=t.classes&&t.classes.length===e.ncols,c=t.objlabels&&t.objlabels.length===e.ncols;let u=a?a.join(r):"";for(let f=0;f<e.ncols;f++){let d=e.getcolref(f+1).join(r);o!=="."&&(d=d.replace(".",o)),s&&(d=t.classes[f]+t.sep+d),c&&(d=t.objlabels[f]+t.sep+d),u=u+`
`+d}return u=u+`
`,o!=="."&&(u=u.replace(/\./g,o)),u}function Tf(t,e){const r=Mf(t),o=new Blob([r],{type:"text/csv"}),a=window.URL.createObjectURL(o),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",`${e}.csv`),s.click()}function Vl(t,e){return or(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Xe(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function Ko(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return vf(e.v,e.nrows,e.ncols);if(e.__type==="vector")return lt(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Jo(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${o}${a}${s}${c}`}function ni(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function Dl(t,e,r){let o="";for(let a=0;a<e;a++){const s=t.getUint8(r++);if(s===0)break;o+=String.fromCharCode(s)}return o}function Nf(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],o=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],a=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let s=0;const c=t.getUint8(s);s+=1;const u=t.getUint8(s);if(s+=1,u===77)throw new Error("SPC file has old format which is not supported.");const f=u===75,d=t.getUint8(s);s+=1;const v=t.getInt8(s);s+=1;const h=t.getUint32(s,f);s+=4;const g=t.getFloat64(s,f);s+=8;const m=t.getFloat64(s,f);s+=8;const b=t.getUint32(s,f);s+=4;const w=t.getUint8(s);s+=1;const p=t.getUint8(s);s+=1;const _=t.getUint8(s);s+=1;const k=t.getUint8(s);s+=1;const A=t.getUint32(s,f);s+=4;const E=Dl(t,9,s);s+=9;const C=Dl(t,9,s);s+=9;const S=t.getUint16(s,f);s+=2;const T=Array.from({length:8},()=>{const te=t.getFloat32(s,f);return s+=4,te}),P=Dl(t,130,s);s+=130;const N=Dl(t,30,s);s+=30;const B=t.getUint32(s,f);s+=4;const[F,L,D,W,z,G,ne,V]=ni(c),X=w===255?r[31]:r[w],Q=w===255?e[31]:e[w],J=p<=26?o[p]:p>=128&&p<=131?a[p]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:F,TCGRAM:L,TMULTI:D,TRANDM:W,TORDRD:z,TALABS:G,TXYXYS:ne,TXVALS:V},fexper:d,fexp:v,fnpts:h,ffirst:g,flast:m,fnsub:b,fxtype:w,fytype:p,fztype:_,fpost:k,fdate:A,fres:E,fsource:C,fpeakpt:S,fspare:T,fcmnt:P,fcatxt:N,flogoff:B,xaxisName:X,xaxisUnit:Q,yaxisName:J}}function Pf(t,e){const r=ni(t.getUint8(e));e+=1;const o=t.getInt8(e);e+=1;const a=t.getUint16(e,!0);e+=2;const s=t.getFloat32(e,!0);e+=4;const c=t.getFloat32(e,!0);e+=4;const u=t.getFloat32(e,!0);e+=4;const f=t.getInt32(e,!0);e+=4;const d=t.getInt32(e,!0);e+=4;const v=t.getFloat32(e,!0);return e+=4,{flags:r,exp:o,index:a,time:s,next:c,noise:u,nPoints:f,nScans:d,wAxis:v}}async function li(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),o=await t.arrayBuffer(),a=new DataView(o);let s=0;const c=Nf(a);s+=512;const u=c.fnpts;if(u<2)throw new Error(`Error reading SPC file (${t.name}).`);let f=new Array(u);if(c.ftflgs.TXVALS)for(let h=0;h<u;h++){const g=a.getFloat32(s,!0);s=s+4,f[h]=g}else{(c.flast-c.ffirst)/(u-1);for(let h=0;h<u;h++)f[h]=c.ffirst+h*c.flast}const d=new Float64Array(u*c.fnsub);for(let h=0;h<c.fnsub;h++){Pf(a,s),s=s+32;for(let g=0;g<u;g++){const m=a.getFloat32(s,!0);s=s+4,d[h*u+g]=m}}const v=[];return c.fnsub>1?Wr(1,c.fnsub).forEach(g=>{v.push(r+"_"+g)}):v.push(r),{hdr:c,xvalues:f,yvalues:d,objlabels:v}}async function zf(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let o=[],a=[];const s=await li(t[0]),c=s.xvalues.length;if(r.push(s.yvalues),o=o.concat(s.objlabels),a.push(s.hdr.fnsub),e>1)for(let b=1;b<e;b++){const w=await li(t[b]);if(w.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");r.push(w.yvalues),o=o.concat(w.objlabels),a.push(w.hdr.fnsub)}const u=a.reduce((b,w)=>b+w,0),f=new Float64Array(u*c);let d=0;for(let b=0;b<r.length;b++)f.set(r[b].slice(),d),d+=a[b]*c;const v=new Pt(f,c,u),h=Wr(0,c-1),g=Wr(0,u-1),m=s.xvalues.map(b=>b.toFixed(1));return{values:v.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:o,objindices:g,varlabels:m,varvalues:s.xvalues,varindices:h,varev:s.xvalues[1]<s.xvalues[0],sep:",",dec:".",varvaluesName:s.hdr.xaxisName,varvaluesUnits:s.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var Lf=H('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function ht(t,e){let r=j(e,"text",3,"button");var o=Lf();o.__click=function(...s){var c;(c=e.onclick)==null||c.apply(this,s)};var a=O(o);le(()=>ke(a,r())),M(t,o)}dt(["click"]);var Rf=H('<button tabindex="0"></button>');function pn(t,e){j(e,"disable",3,!1);var r=Rf();r.__click=function(...o){var a;(a=e.onclick)==null||a.apply(this,o)},le(()=>{q(r,"title",e.title),q(r,"aria-label",e.title),q(r,"alt",e.title),gt(r,1,`button ${e.className??""}`,"svelte-bx9fh5")}),M(t,r)}dt(["click"]);function wr(t,e){let r=j(e,"title",3,"Reset");pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function If(t,e){let r=j(e,"title",3,"Undo");pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function jf(t,e){let r=j(e,"title",3,"Download");pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function Ff(t,e){let r=j(e,"title",3,"Add");pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function oi(t,e){let r=j(e,"title",3,"Settings");pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function qf(t,e){let r=j(e,"title",3,"Move up");pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function Bf(t,e){let r=j(e,"title",3,"Move down");pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}function _r(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var Of=H('<span class="label svelte-1986c5z"> </span>'),Vf=H("<div><!> <!></div>");function ie(t,e){let r=j(e,"label",3,null),o=j(e,"name",3,""),a=j(e,"status",3,""),s=j(e,"colors",3,""),c=j(e,"labelWidth",3,12);var u=Vf(),f=O(u);{var d=h=>{var g=Of(),m=O(g);le(()=>{pt(g,`flex-basis:${c()??""}ch;`),ke(m,r())}),M(h,g)};Y(f,h=>{r()&&h(d)})}var v=R(f,2);Er(v,()=>e.children??Ct),le(()=>{gt(u,1,`control-element ${o()??""} ${a()??""}`,"svelte-1986c5z"),pt(u,s())}),M(t,u)}const ai=(t,e,r,o)=>{const a=e(t);a<0||a>1||I(r,a*100>l(o)-5&&a*100<l(o)+5,!0)},si=(t,e,r,o,a,s)=>{I(e,!1);const c=r(t);c<0||c>1||(o(a(c)),s()&&s()(o()))},ii=(t,e,r,o,a,s)=>{if(!l(e))return;const c=r(t);c<0||c>1||(o(a(c)),s()&&s()(o()))},Df=(t,e,r,o,a,s)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r()),a()&&a()(e());return}if(t.key==="ArrowRight"){e(e()+r()>s()?s():e()+r()),a()&&a()(e());return}};var Yf=H('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function ll(t,e){pe(e,!0);let r=j(e,"min",7,0),o=j(e,"max",3,100),a=j(e,"value",31,()=>qe(r())),s=j(e,"decNum",3,1),c=j(e,"step",19,()=>+((o()-r())/100).toFixed(4)),u=j(e,"onchange",3,null);we(()=>{a()<r()&&(a(r()),u()&&u()(a())),a()>o()&&(a(o()),u()&&u()(a())),r()>o()&&r(o())});let f=ee(void 0),d=ee(void 0),v=ee(!1);const h=S=>{const T=r()+S*(o()-r());return+(Math.round(T/c())*c()).toFixed(4)},g=S=>{const T=l(f).getBoundingClientRect(),P=l(d).getBoundingClientRect(),N=T.x,B=P.x+P.width;return(S.clientX-N)/(B-N)},m=S=>{I(v,!1)},b=S=>{let T=a()+c()*S.deltaY*.5;T<r()&&(T=r()),T>o()&&(T=o()),a(+(Math.round(T/c())*c()).toFixed(4)),S.preventDefault(),u()&&u()(a())},w=y(()=>r()===o()?100:(a()-r())/(o()-r())*100);var p=Yf();p.__keydown=[Df,a,c,r,u,o],p.__mousemove=[ii,v,g,a,h,u],p.__mousedown=[ai,g,v,w],p.__mouseup=[si,v,g,a,h,u],p.__touchmove=[ii,v,g,a,h,u],p.__touchstart=[ai,g,v,w],p.__touchend=[si,v,g,a,h,u];var _=O(p);let k;var A=O(_);let E;var C=O(A);vn(_,S=>I(f,S),()=>l(f)),vn(p,S=>I(d,S),()=>l(d)),le((S,T,P)=>{q(p,"aria-valuenow",a()),q(p,"aria-valuemin",r()),q(p,"aria-valuemax",o()),k=gt(_,1,"range-slider svelte-vhx0r0",null,k,S),pt(_,`width:${l(w)??""}%`),E=gt(A,1,"range-value svelte-vhx0r0",null,E,T),ke(C,P)},[()=>({"range-slider_right":l(w)<50}),()=>({"range-value_right":l(w)<50}),()=>a().toFixed(s())]),fn("mousewheel",p,b),fn("mouseleave",p,m),fn("touchcancel",p,m),M(t,p),be()}dt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const ci=(t,e,r,o,a)=>{const s=e(t);s<0||s>1||I(r,s>l(o)&&s<l(a)+l(o),!0)},ui=(t,e,r,o,a)=>{I(e,!1);const s=r(t);if(s<0||s>1)return;const c=o(s);a()!==c&&a(c)},fi=(t,e,r,o,a)=>{if(!l(e))return;const s=r(t);if(s<0||s>1)return;const c=o(s);c!=a()&&a(c)},Wf=(t,e,r,o,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r());return}};var Uf=H('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function Xt(t,e){pe(e,!0);let r=j(e,"min",3,0),o=j(e,"max",3,10),a=j(e,"value",31,()=>qe(r())),s=j(e,"step",3,1);a()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),a(r())),a()>o()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),a(o())),r()>o()&&console.error("The min and max values must be distinct.");let c=ee(void 0),u=ee(void 0),f=ee(!1);const d=y(()=>r()===o()?0:(a()-r())/(o()-r()+s())),v=y(()=>s()/(o()-r()+s())),h=y(()=>o()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*l(v)}%)`:"background: #f0f0f0"),g=S=>{if(S<0||S>1)return a();let T=a();return Math.round(l(v)/S),S<l(d)&&l(d)>0&&(T=a()-s()*Math.ceil((l(d)-S)/l(v))),S>l(d)+l(v)&&l(d)+l(v)<1&&(T=a()+s()*Math.ceil((S-(l(d)+l(v)))/l(v))),T<r()&&(T=r()),T>o()&&(T=o()),T},m=S=>{const T=l(u).getBoundingClientRect(),P=T.x,N=T.x+T.width;return(S.clientX-P)/(N-P)},b=S=>{I(f,!1)},w=S=>{let T=a()+Math.round(S.deltaY*.5)*s();T<r()&&(T=r()),T>o()&&(T=o()),a(T),S.preventDefault()};var p=Uf();p.__keydown=[Wf,a,s,r,o],p.__mousemove=[fi,f,m,g,a],p.__mousedown=[ci,m,f,d,v],p.__mouseup=[ui,f,m,g,a],p.__touchmove=[fi,f,m,g,a],p.__touchstart=[ci,m,f,d,v],p.__touchend=[ui,f,m,g,a];var _=O(p);let k;var A=O(_);let E;var C=O(A);vn(_,S=>I(c,S),()=>l(c)),vn(p,S=>I(u,S),()=>l(u)),le((S,T,P)=>{q(p,"aria-valuenow",a()),q(p,"aria-valuemin",r()),q(p,"aria-valuemax",o()),pt(p,l(h)),k=gt(_,1,"range-slider svelte-xdlm7u",null,k,S),pt(_,`width: max(2px, ${l(v)*100}%);left:${l(d)*100}%;`),E=gt(A,1,"range-value svelte-xdlm7u",null,E,T),ke(C,P)},[()=>({"range-slider_left":l(v)<.1&&l(d)<.5,"range-slider_right":l(v)<.1&&l(d)>=.5}),()=>({"range-value_right":l(v)<.1&&l(d)>.5,"range-value_left":l(v)<.1&&l(d)<=.5}),()=>a().toFixed(0)]),fn("mousewheel",p,w),fn("mouseleave",p,b),fn("touchcancel",p,b),M(t,p),be()}dt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Hf=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e.options.findIndex(a=>a===r());o>0&&r(e.options[o-1]);return}if(t.key==="ArrowRight"){const o=e.options.findIndex(a=>a===r());o<e.options.length-1&&r(e.options[o+1]);return}};var Gf=(t,e,r)=>e(r),Xf=H('<button tabindex="-1"><!></button>'),Kf=H('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox"/>',1);function rt(t,e){pe(e,!0);let r=j(e,"value",31,()=>qe(e.options[0])),o=j(e,"className",3,"");var a=Kf(),s=K(a);s.__keydown=[Hf,e,r],et(s,20,()=>e.options,u=>u,(u,f)=>{var d=Xf();d.__click=[Gf,r,f];let v;var h=O(d);St(h,()=>f),le((g,m)=>v=gt(d,1,`option option_${g??""}`,"svelte-1i17tox",v,m),[()=>f.toString().replace(".","_"),()=>({selected:f==r()})]),M(u,d)});var c=R(s,2);le(()=>gt(s,1,`selector ${o()??""}`,"svelte-1i17tox")),No(c,r),M(t,a),be()}dt(["keydown","click"]);function Dt(t,e){pe(e,!0);let r=j(e,"options",19,()=>["no","yes"]),o=j(e,"value",15,!1),a=ee(!0);const s=y(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());we(()=>I(a,o()?r()[1]:r()[0],!0)),we(()=>o(l(a)===r()[1]));var c=he(),u=K(c);{var f=d=>{rt(d,{get options(){return l(s)},get value(){return l(a)},set value(v){I(a,v,!0)}})};Y(u,d=>{l(s)&&d(f)})}M(t,c),be()}function di(t,e,r){l(e)&&l(e).files.length>0?r(l(e).files.length===1?l(e).files[0]:l(e).files):r(null)}function vi(t,e){(t.type==="click"||t.type==="keydown"&&(t.code==="Space"||t.code==="Enter"))&&l(e).click()}var Jf=H('<input type="file" multiple class="svelte-1k0x7uv"/>'),Qf=H('<input type="file" class="svelte-1k0x7uv"/>'),Zf=H('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function Yl(t,e){pe(e,!0);let r=j(e,"file",15),o=j(e,"message",3,"Select CSV file with dataset"),a=j(e,"acceptType",3,".csv"),s=j(e,"multiple",3,!1),c=ee(void 0);function u(_){l(c).value=null,r(null)}var f=Zf(),d=K(f);d.__keydown=[vi,c],d.__click=[vi,c];let v;var h=O(d),g=R(h);{var m=_=>{var k=Jf();k.__change=[di,c,r],vn(k,A=>I(c,A),()=>l(c)),le(()=>q(k,"accept",a())),M(_,k)},b=_=>{var k=Qf();k.__change=[di,c,r],vn(k,A=>I(c,A),()=>l(c)),le(()=>q(k,"accept",a())),M(_,k)};Y(g,_=>{s()?_(m):_(b,!1)})}var w=R(d,2);{var p=_=>{wr(_,{onclick:u})};Y(w,_=>{r()&&_(p)})}le(_=>{v=gt(d,1,"file-selector svelte-1k0x7uv",null,v,_),ke(h,`${(r()?r().name:o())??""} `)},[()=>({selected:r()})]),M(t,f),be()}dt(["keydown","click","change"]);function $f(t,e,r,o){e()&&I(r,e()(o()),!0)}var ed=H('<div class="error-message svelte-1qtiwcs"> </div>'),td=H('<div><input type="text" class="svelte-1qtiwcs"/> <!></div>');function hi(t,e){pe(e,!0);let r=j(e,"value",15,""),o=j(e,"className",3,""),a=j(e,"placeholder",3,""),s=j(e,"maxLength",3,25),c=j(e,"validator",3,null),u=ee("");var f=td();let d;var v=O(f);v.__input=[$f,c,u,r];var h=R(v,2);{var g=m=>{var b=ed(),w=O(b);le(()=>ke(w,l(u))),M(m,b)};Y(h,m=>{l(u)&&l(u).length>0&&m(g)})}le(m=>{d=gt(f,1,`textinput ${o()??""}`,"svelte-1qtiwcs",d,m),q(v,"placeholder",a()),q(v,"maxlength",s())},[()=>({error:l(u)&&l(u).length>0})]),No(v,r),M(t,f),be()}dt(["input"]);var rd=H('<div class="spinner svelte-n48urb"></div>');function Qo(t){var e=rd();M(t,e)}const nd=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e().findIndex(a=>a===r());o>0&&r(e()[o-1]);return}if(t.key==="ArrowRight"){const o=e().findIndex(a=>a===r());o<e().length-1&&r(e()[o+1]);return}};var ld=(t,e,r)=>e(r),od=H('<button tabindex="-1"><!></button>'),ad=H('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an"/>',1);function Wl(t,e){pe(e,!0);let r=j(e,"options",19,()=>["p","l","b","h","qq"]),o=j(e,"value",31,()=>qe(r()[0]));const a='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',s={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};s.b=s.l+s.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var u=ad(),f=K(u);f.__keydown=[nd,r,o],et(f,20,r,v=>v,(v,h)=>{var g=od();g.__click=[ld,o,h];let m;var b=O(g);St(b,()=>a+s[h]+"</svg"),le(w=>{m=gt(g,1,"option svelte-yf64an",null,m,w),q(g,"title",c[h])},[()=>({selected:h==o()})]),M(v,g)});var d=R(f,2);No(d,o),M(t,u),be()}dt(["keydown","click"]),dt(["keydown","click"]);var sd=H("<h2> </h2>"),id=H("<!> <!>",1),cd=H('<div class="widget"><!></div>');function ud(t,e){pe(e,!0);let r=j(e,"title",3,""),o=j(e,"value",15),a=j(e,"labelWidth",3,13);function s(d){const v={};for(const h of Object.keys(d))v[h]=d[h].default;return v}we(()=>{!o()&&e.options&&o(s(e.options))});var c=cd(),u=O(c);{var f=d=>{var v=id(),h=K(v);{var g=b=>{ie(b,{children:(w,p)=>{var _=sd(),k=O(_);le(()=>ke(k,r())),M(w,_)},$$slots:{default:!0}})};Y(h,b=>{r()&&b(g)})}var m=R(h,2);et(m,17,()=>Object.keys(e.options),nt,(b,w)=>{var p=he();const _=y(()=>e.options[l(w)]);var k=K(p);{var A=E=>{ie(E,{get name(){return l(_).name},get label(){return l(_).label},get labelWidth(){return a()},children:(C,S)=>{var T=he(),P=K(T);el(P,()=>l(_).el,(N,B)=>{B(N,qr(()=>l(_).props,{get value(){return o()[l(w)]},set value(F){o(o()[l(w)]=F,!0)}}))}),M(C,T)},$$slots:{default:!0}})};Y(k,E=>{l(_).hidden||E(A)})}M(b,p)}),M(d,v)};Y(u,d=>{o()&&d(f)})}M(t,c),be()}function Zo(t,e,r,o,a){(!o||!Array.isArray(o))&&(o=[]);const s=e.values.nrows,c=e.values.ncols,u=o.length,f=s-u,d=t.ncomp,v=a?5:4,h=Math.max(d,v),g=Array(h).fill(""),m=d<v?Array(v-d).fill(""):[],b=v<d?Array(d-v).fill(""):[],w=Array(d).fill(0).map((T,P)=>"PC"+(P+1)),p=e.sep;function _(T,P,N){k+=`
`,k+=[T+":","","",...g].join(p)+`
`,k+=["object","group","outlier",...w,...m].join(p)+`
`;const B=t.v.subarray(P,P+d*f);let F=0;for(let L=0;L<s;L++){const D=e.classes?e.classes[L]:"";if(u>0&&o.includes(L)){k+=[N[L],D,"yes",...Array(d).fill("-"),...m].join(p)+`
`;continue}const W=Array(d);for(let z=0;z<d;z++)W[z]=B[z*f+F];k+=[N[L],D,"",...W,...m].join(p)+`
`,F=F+1}k+=`
`}let k="";if(k+=["Number of components:",d,"",...g].join(p)+`
`,k+=["Center:",t.center,"",...g].join(p)+`
`,k+=["Scale:",t.scale,"",...g].join(p)+`
`,k+=`
`,k+=["Statistics:","","",...g].join(p)+`
`,a){k+=["","","PC","Expvar","Cumexpvar","Resvar","Cumresvar","Eigenvalues",...b].join(p)+`
`;for(let T=0;T<d;T++)k+=["","",T+1,t.stat.expvar[T],t.stat.cumexpvar[T],t.stat.resvar[T],t.stat.cumresvar[T],t.eigenvals[T],...b].join(p)+`
`}else{k+=["","","PC","Expvar","Cumexpvar","Resvar","Cumresvar",...b].join(p)+`
`;for(let T=0;T<d;T++)k+=["","",T+1,t.stat.expvar[T],t.stat.cumexpvar[T],t.stat.resvar[T],t.stat.cumresvar[T],...b].join(p)+`
`}if(k+=`
`,a){k+=`
`,k+=["Loading, center and scale values:","","",...g].join(p)+`
`,k+=["variable","center","scale",...w,...m].join(p)+`
`;const T=a.v.subarray(2,2+c),P=a.v.subarray(2+c,2+c*2),N=a.v.subarray(2+c*2,2+c*2+d*c);for(let B=0;B<c;B++){const F=Array(d);for(let L=0;L<d;L++)F[L]=N[L*c+B];k+=[e.varlabels[B],T[B],P[B],...F,...m].join(p)+`
`}k+=`
`}_("Scores",0,e.objlabels),_("Score distances, h",d*f,e.objlabels),_("Orthogonal distances, q",d*f*2,e.objlabels),e.dec!=="."&&(k=k.replace(/\./g,e.dec)),k=["Data filename:",e.fileName,"",...g].join(p)+`
`+k;let A=["PCA results ("+r+")","https://mda.tools/pca/","",...g].join(p)+`

`;const E=new Blob([A+k],{type:"text/csv"}),C=window.URL.createObjectURL(E),S=document.createElement("a");S.setAttribute("href",C),S.setAttribute("download",`pca-results-${r}.csv`),S.click()}function fd(t,e){t.prep=e;const r=new Blob([JSON.stringify(t,Vl)],{type:"application/json"}),o=window.URL.createObjectURL(r),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download","pca-model.json"),a.click()}var dd=H('<span style="font-weight:bold"> </span><br/>',1),vd=H('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),hd=H('<span class="file-size svelte-gdjwex"> </span>'),md=H('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br/> <span>Size:</span> <!></p> <!>',1);function gd(t,e){pe(e,!0);let r=j(e,"title",3,"");var o=he(),a=K(o);{var s=c=>{ie(c,{children:(u,f)=>{var d=md(),v=K(d),h=O(v);{var g=A=>{var E=dd(),C=K(E),S=O(C);le(()=>ke(S,r())),M(A,E)};Y(h,A=>{r()&&r()!==""&&A(g)})}var m=R(h,4),b=O(m),w=R(m,5);{var p=A=>{var E=vd(),C=K(E),S=O(C),T=R(C,4),P=O(T);le(()=>{ke(S,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),ke(P,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),M(A,E)},_=A=>{var E=hd(),C=O(E);le(()=>ke(C,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),M(A,E)};Y(w,A=>{e.dataset.nresp&&e.dataset.nresp>0?A(p):A(_,!1)})}var k=R(v,2);wr(k,{get onclick(){return e.reset}}),le(()=>{q(m,"title",e.dataset.fileName),ke(b,e.dataset.fileName)}),M(u,d)},$$slots:{default:!0}})};Y(a,c=>{e.dataset&&c(s)})}M(t,o),be()}var pd=H("<!> <!>",1),bd=H("<!> <!> <!> <!> <!> <!>",1),wd=H("<!> <!>",1),_d=H("<p> </p>"),yd=H("<!> <p> </p>",1),xd=H("<p> </p>"),kd=H("<!> <!> <!>",1);function mi(t,e){pe(e,!0);let r=j(e,"model",3,null),o=j(e,"outliers",19,()=>[]),a=j(e,"className",3,"Class"),s=j(e,"classMandatory",3,!1),c=j(e,"classUnique",3,!1),u=j(e,"title",3,""),f=j(e,"dataset",15),d=j(e,"resobj",15),v=j(e,"csvOnly",3,!0);const h=[",",";"],g=y(()=>r()?["no","yes"]:["no","labels","values"]);let m=ee(void 0),b=ee(""),w=ee(""),p=ee(","),_=ee("no"),k=ee(!1),A=ee(!1),E=ee(null),C=ee("neutral"),S=ee("");function T($){I(C,"error"),I(S,$,!0),console.error($)}function P(){I(C,"neural"),I(S,"")}function N(){I(C,"success"),I(S,"")}function B($,se,Te){I(E,e.WASM().then(Ie=>{d(Xo(Ie,$,se,Te,!0)),N()}).catch(Ie=>{d(null),T(Ie)}),!0)}function F($,se){if(!$||$.size<10)return;const Ie=$.slice(0,1e5),Ce=new FileReader;Ce.onload=()=>{const ve=Ce.result;!ve||ve.length<0||((_e=>{var je=no(_e,4);I(p,je[0],!0),I(k,je[1],!0),I(A,je[2],!0),I(_,je[3],!0)})(Sf(ve)),I(A,s()||l(A),!0),se&&l(_)!=="no"&&I(_,"yes"))},Ce.onerror=function(ve){csvString=null,I(C,"error"),I(S,ve,!0),console.error("Error reading CSV file.",ve)},Ce.readAsText(Ie)}function L($){try{const se=Ef($,l(p),l(_)==="yes"?"labels":l(_),l(k),l(A),l(b),l(w));if(se.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const Te=r()?r().prep&&Object.keys(r().prep).length>0?r().prep.npred:r().ncols+r().exclvars.length:0;if(r()&&se.values.ncols!==Te)throw new Error("Dataset has different number of columns than the training set.");if(se.classNames.length>se.values.nrows/2)throw new Error("Dataset has too many unique "+a().toLowerCase()+" labels ("+se.classNames.length+"), check your CSV file.");if(s()&&se.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&se.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");se.fileName=l(m).name.replace(/\.[^/.]+$/,""),r()&&(se.varrev=r().varrev,se.header=r().header,se.varlabels=r().varlabels,se.varvalues=r().varvalues,se.varvaluesName=r().varvaluesName,se.varvaluesUnits=r().varvaluesUnits),f(se),N()}catch(se){f(null),T(se)}}function D($){const se=new FileReader;se.onload=()=>{L(se.result)},se.readAsText(l(m))}async function W($){try{const se=l(m)instanceof FileList?l(m):[l(m)];f(await zf(se)),N()}catch(se){T("Failed to read SPC file: "+se)}}function z(){I(m,""),f(null),d(null),I(b,""),I(w,""),P()}we(()=>{if(!(l(m)===0||l(m)===void 0||f())){if(l(m)===null||l(m)===""){z();return}if(Array.isArray(l(m))){if(l(m).filter($=>$.slice(-4)===".spc").length!==l(m).length){T("Multiple file selection is allowed only for SPC files.");return}W(l(m));return}l(m)&&(l(m).type==="text/csv"||l(m).type==="application/vnd.ms-excel")?(F(l(m),r()),P()):W([l(m)])}}),we(()=>{l(p)&&P()}),we(()=>{if(f()&&r()&&!d()&&!l(S))try{d(B(r(),f(),o())),N()}catch($){f(null),d(null),T($)}});var G=kd(),ne=K(G);{var V=$=>{var se=wd(),Te=K(se);Rn(Te,()=>l(m)===void 0,ve=>{ie(ve,{children:(_e,je)=>{var de=he(),fe=K(de);{var re=ae=>{Yl(ae,{id:"dataFile",message:"Select CSV file with dataset",get file(){return l(m)},set file(ge){I(m,ge,!0)}})},ce=ae=>{Yl(ae,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return l(m)},set file(ge){I(m,ge,!0)}})};Y(fe,ae=>{v()?ae(re):ae(ce,!1)})}M(_e,de)},$$slots:{default:!0}})});var Ie=R(Te,2);{var Ce=ve=>{var _e=bd(),je=K(_e);ie(je,{label:"Delimiter",children:(ue,Le)=>{rt(ue,{id:"sep",get options(){return h},get value(){return l(p)},set value(Ne){I(p,Ne,!0)}})},$$slots:{default:!0}});var de=R(je,2);ie(de,{label:"Row labels",children:(ue,Le)=>{Dt(ue,{id:"hasLabels",options:["no","yes"],get value(){return l(k)},set value(Ne){I(k,Ne,!0)}})},$$slots:{default:!0}});var fe=R(de,2);{var re=ue=>{ie(ue,{get label(){return`${a()??""} labels`},children:(Le,Ne)=>{Dt(Le,{id:"hasLabels",options:["no","yes"],get value(){return l(A)},set value(We){I(A,We,!0)}})},$$slots:{default:!0}})};Y(fe,ue=>{s()||ue(re)})}var ce=R(fe,2);ie(ce,{label:"Header",children:(ue,Le)=>{rt(ue,{id:"header",get options(){return l(g)},get value(){return l(_)},set value(Ne){I(_,Ne,!0)}})},$$slots:{default:!0}});var ae=R(ce,2);{var ge=ue=>{var Le=pd(),Ne=K(Le);ie(Ne,{label:"Header name",children:(Ue,Be)=>{hi(Ue,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return l(b)},set value(Fe){I(b,Fe,!0)}})},$$slots:{default:!0}});var We=R(Ne,2);ie(We,{label:"Header units",children:(Ue,Be)=>{hi(Ue,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return l(w)},set value(Fe){I(w,Fe,!0)}})},$$slots:{default:!0}}),M(ue,Le)};Y(ae,ue=>{l(_)==="values"&&ue(ge)})}var ye=R(ae,2);ie(ye,{label:" ",children:(ue,Le)=>{ht(ue,{text:"Load",onclick:D})},$$slots:{default:!0}}),M(ve,_e)};Y(Ie,ve=>{l(m)&&!Array.isArray(l(m))&&(l(m).type==="text/csv"||l(m).type==="application/vnd.ms-excel")&&ve(Ce)})}M($,se)},X=$=>{var se=he(),Te=K(se);{var Ie=Ce=>{var ve=he(),_e=K(ve);So(_e,()=>l(E),je=>{ie(je,{children:(de,fe)=>{var re=yd(),ce=K(re);Qo(ce);var ae=R(ce,2),ge=O(ae);le(()=>ke(ge,r()?"Loading data and apply model...":"Loading data...")),M(de,re)},$$slots:{default:!0}})},void 0,(je,de)=>{ie(je,{status:"error",children:(fe,re)=>{var ce=_d(),ae=O(ce);le(()=>ke(ae,l(de))),M(fe,ce)},$$slots:{default:!0}})}),M(Ce,ve)};Y(Te,Ce=>{l(E)&&Ce(Ie)})}M($,se)};Y(ne,$=>{f()?$(X,!1):$(V)})}var Q=R(ne,2);{var J=$=>{gd($,{get dataset(){return f()},reset:z,get title(){return u()}})};Y(Q,$=>{f()&&$(J)})}var te=R(Q,2);{var oe=$=>{ie($,{status:"error",children:(se,Te)=>{var Ie=xd(),Ce=O(Ie);le(()=>ke(Ce,l(S))),M(se,Ie)},$$slots:{default:!0}})};Y(te,$=>{(l(C)==="error"||l(S))&&$(oe)})}M(t,G),be()}var Ed=H("<!> <!> <!>",1),Ad=H("<p> </p>"),Cd=H("<!> <p>Computing PV-set...</p>",1),Sd=H('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),Md=H("<p> </p>"),Td=H("<!> <!> <!> <!>",1);function Nd(t,e){pe(e,!0);let r=j(e,"outliers",19,()=>[]),o=j(e,"pvset",15),a=j(e,"pvres",15),s=ee("neutral"),c=ee(""),u=ee(qe(["ven","rand","loo"])),f=ee("ven"),d=ee(void 0),v=e.calset.values.nrows-r().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(N=>N>=v/(v-e.model.ncomp-1)&&N<=v/2):[],g=ee(qe(h.length>0?h[0]:0));we(()=>{h.length===0&&(I(u,["loo"],!0),I(f,"loo"))});async function m(N,B,F){I(d,e.WASM().then(L=>{const D=F.type=="loo"?0:F.type=="rand"?2:1,W=bf(L,B,N.values,B.ncomp,F.nseg,D,0,r());o({classLabelsVarname:N.classLabelsVarname,classNames:N.classNames,dec:N.dec,fileName:N.fileName+"-pcv",hasClassNames:N.hasClassNames,hasLabels:N.hasLabels,header:N.header,labelsVarname:N.labelsVarname,classes:e.calres.classes,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:N.sep,values:W,varAxisTitle:N.varAxisTitle,varindices:B.varindices,varlabels:B.varlabels,varrev:B.varrev,varvalues:B.varvalues,varvaluesName:B.varvaluesName,varvaluesUnits:B.varvaluesUnits}),a(Xo(L,B,o(),[]))}).catch(L=>{console.error(L),o(null),a(null),I(s,"error"),I(c,L,!0)}),!0)}function b(N){I(s,"neutral"),I(c,""),m(e.calset,e.model,{type:l(f),nseg:l(g)})}function w(){I(s,"neutral"),I(c,""),I(d,null),o(null),a(null)}we(()=>{e.model===null&&w()});var p=Td(),_=K(p);{var k=N=>{var B=Ed(),F=K(B);ie(F,{name:"split",label:"Split type:",children:(z,G)=>{rt(z,{id:"cvType",get options(){return l(u)},get value(){return l(f)},set value(ne){I(f,ne,!0)}})},$$slots:{default:!0}});var L=R(F,2);{var D=z=>{ie(z,{name:"nseg",label:"Segments:",children:(G,ne)=>{rt(G,{id:"nseg",get options(){return h},get value(){return l(g)},set value(V){I(g,V,!0)}})},$$slots:{default:!0}})};Y(L,z=>{l(f)!=="loo"&&z(D)})}var W=R(L,2);ie(W,{name:"run-button",label:" ",children:(z,G)=>{ht(z,{onclick:b,text:"Compute PV-set"})},$$slots:{default:!0}}),M(N,B)};Y(_,N=>{e.model&&!o()&&l(s)!=="busy"&&N(k)})}var A=R(_,2);{var E=N=>{var B=he(),F=K(B);So(F,()=>l(d),L=>{ie(L,{name:"spinner",children:(D,W)=>{var z=Cd(),G=K(z);Qo(G),M(D,z)},$$slots:{default:!0}})},void 0,(L,D)=>{ie(L,{name:"error",status:"error",children:(W,z)=>{var G=Ad(),ne=O(G);le(()=>ke(ne,l(D))),M(W,G)},$$slots:{default:!0}})}),M(N,B)};Y(A,N=>{l(d)&&N(E)})}var C=R(A,2);{var S=N=>{ie(N,{name:"info",children:(B,F)=>{var L=Sd(),D=K(L),W=R(O(D)),z=R(D,2);jf(z,{onclick:()=>Tf(o(),e.calset.fileName+"-pv")});var G=R(z,2);wr(G,{onclick:w}),le(()=>ke(W,` ${o().values.nrows??""} × ${o().values.ncols??""}, ${l(f)??""}
      ${l(f)!=="loo"?l(g)+" seg":""}`)),M(B,L)},$$slots:{default:!0}})};Y(C,N=>{o()&&N(S)})}var T=R(C,2);{var P=N=>{ie(N,{name:"error",status:"error",children:(B,F)=>{var L=Md(),D=O(L);le(()=>ke(D,l(c))),M(B,L)},$$slots:{default:!0}})};Y(T,N=>{l(s)==="error"&&l(c)&&N(P)})}M(t,p),be()}var Pd=H("<!> <!> <!> <!>",1),zd=H("<p> </p>"),Ld=H("<!> <p>Computing global model...</p>",1),Rd=H('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Id=H('<div class="buttons"><!> <!></div>'),jd=H("<!> <!>",1),Fd=H("<p> </p>"),qd=H("<!> <!> <!> <!>",1);function Bd(t,e){pe(e,!0);let r=j(e,"outliers",19,()=>[]),o=j(e,"resobj",15),a=j(e,"model",15),s=j(e,"downloadModel",3,null),c=j(e,"downloadResults",3,null),u=ee("neutral"),f=ee(""),d=ee(1),v=ee(!0),h=ee(!1),g=ee(void 0);async function m(B,F,L,D){I(g,e.WASM().then(W=>{I(u,"computing");const z=gf(W,B.values,F,L,D,r());z.hash=ti(),z.exclvars=[],z.varlabels=B.varlabels,z.varindices=B.varindices,z.varvalues=B.varvalues,z.varvaluesName=B.varvaluesName,z.varvaluesUnits=B.varvaluesUnits,z.varrev=B.varrev,z.prep=[];const G=Xo(W,z,B,r());a(z),o(G),I(u,"success")}).catch(W=>{console.error(W),a(null),I(u,"error"),I(f,W,!0)}),!0)}function b(B){I(u,"neutral"),I(f,null),m(e.dataset,l(d),l(v),l(h))}function w(){I(u,"neutral"),I(g,null),o(null),a(null),I(f,null)}let p=y(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-1,50):null);we(()=>{e.dataset===null&&w()}),we(()=>{I(d,l(p)?Math.min(l(p),20):null,!0)});var _=qd(),k=K(_);{var A=B=>{var F=Pd(),L=K(F);ie(L,{name:"ncomp",label:"# of PCs",children:(G,ne)=>{ll(G,{id:"ncomp",min:1,get max(){return l(p)},step:1,decNum:0,get value(){return l(d)},set value(V){I(d,V,!0)}})},$$slots:{default:!0}});var D=R(L,2);ie(D,{name:"center",label:"Center",children:(G,ne)=>{Dt(G,{id:"center",options:["no","yes"],get value(){return l(v)},set value(V){I(v,V,!0)}})},$$slots:{default:!0}});var W=R(D,2);ie(W,{name:"scale",label:"Scale",children:(G,ne)=>{Dt(G,{id:"scale",options:["no","yes"],get value(){return l(h)},set value(V){I(h,V,!0)}})},$$slots:{default:!0}});var z=R(W,2);ie(z,{name:"create-model",label:" ",children:(G,ne)=>{ht(G,{onclick:b,text:"Create model"})},$$slots:{default:!0}}),M(B,F)};Y(k,B=>{e.dataset&&!a()&&l(u)!=="computing"&&B(A)})}var E=R(k,2);{var C=B=>{var F=he(),L=K(F);So(L,()=>l(g),D=>{ie(D,{name:"spinner",children:(W,z)=>{var G=Ld(),ne=K(G);Qo(ne),M(W,G)},$$slots:{default:!0}})},void 0,(D,W)=>{ie(D,{name:"error",status:"error",children:(z,G)=>{var ne=zd(),V=O(ne);le(()=>ke(V,l(W))),M(z,ne)},$$slots:{default:!0}})}),M(B,F)};Y(E,B=>{l(g)&&B(C)})}var S=R(E,2);{var T=B=>{var F=jd(),L=K(F);ie(L,{name:"info",children:(z,G)=>{var ne=Rd(),V=K(ne),X=R(O(V)),Q=R(V,2);wr(Q,{onclick:w}),le(()=>ke(X,` ${a().ncomp??""} PCs${a().center?", centered":""}${a().scale?", scaled":""}`)),M(z,ne)},$$slots:{default:!0}});var D=R(L,2);{var W=z=>{ie(z,{name:"download-buttons",label:"Download",children:(G,ne)=>{var V=Id(),X=O(V);ht(X,{onclick:()=>c()(o(),e.dataset,"train",r(),a()),text:"Results"});var Q=R(X,2);ht(Q,{onclick:()=>s()(a()),text:"Model"}),M(G,V)},$$slots:{default:!0}})};Y(D,z=>{s()&&c()&&z(W)})}M(B,F)};Y(S,B=>{a()&&B(T)})}var P=R(S,2);{var N=B=>{ie(B,{name:"error",status:"error",children:(F,L)=>{var D=Fd(),W=O(D);le(()=>ke(W,l(f))),M(F,D)},$$slots:{default:!0}})};Y(P,B=>{(l(u)==="error"||l(f))&&B(N)})}M(t,_),be()}var Od=H('<tr class="svelte-zebw4f"><td class="svelte-zebw4f"> </td><td class="svelte-zebw4f"> </td><td class="svelte-zebw4f"> </td><td class="svelte-zebw4f"> </td></tr>'),Vd=H('<tr class="svelte-zebw4f"><td class="svelte-zebw4f">...</td><td class="svelte-zebw4f">...</td><td class="svelte-zebw4f">...</td><td class="svelte-zebw4f">...</td></tr>'),Dd=H('<tr class="svelte-zebw4f"><td class="svelte-zebw4f"> </td><td class="svelte-zebw4f"> </td><td class="svelte-zebw4f"> </td><td class="svelte-zebw4f"> </td></tr>'),Yd=H('<table class="svelte-zebw4f"><thead><tr class="svelte-zebw4f"><th class="svelte-zebw4f">PC</th><th class="svelte-zebw4f">Expvar</th><th class="svelte-zebw4f">Cumexpvar</th><th class="svelte-zebw4f">Eigenvals</th></tr></thead><tbody><!><!><!></tbody></table> <!>',1);function gi(t,e){pe(e,!0);const r=16,o=y(()=>e.res?Object.keys(e.res):null);let a=ee(qe(l(o)[0]));const s=y(()=>e.res?e.res[l(a)]:null),c=y(()=>l(s)?l(s).stat.cumexpvar:null),u=y(()=>l(s)?l(s).stat.expvar:null),f=y(()=>l(s)?l(s).eigenvals.map(g=>g*(l(s).nrows-1)):null);var d=he(),v=K(d);{var h=g=>{var m=Yd(),b=K(m),w=R(O(b)),p=O(w);et(p,17,()=>l(s).stat.components.filter(T=>T<r),nt,(T,P)=>{var N=Od(),B=O(N),F=O(B),L=R(B),D=O(L),W=R(L),z=O(W),G=R(W),ne=O(G);le((V,X,Q)=>{ke(F,l(P)),ke(D,V),ke(z,X),ke(ne,Q)},[()=>(l(u)[l(P)-1]*100).toFixed(2),()=>(l(c)[l(P)-1]*100).toFixed(2),()=>l(f)[l(P)-1].toFixed(2)]),M(T,N)});var _=R(p);{var k=T=>{var P=Vd();M(T,P)};Y(_,T=>{l(s).ncomp>r&&T(k)})}var A=R(_);{var E=T=>{var P=Dd(),N=O(P),B=O(N),F=R(N),L=O(F),D=R(F),W=O(D),z=R(D),G=O(z);le((ne,V,X)=>{ke(B,l(s).ncomp),ke(L,ne),ke(W,V),ke(G,X)},[()=>((l(c)[l(s).ncomp-1]-l(c)[l(s).ncomp-2])*100).toFixed(2),()=>(l(c)[l(s).ncomp-1]*100).toFixed(2),()=>l(f)[l(s).ncomp-1].toFixed(2)]),M(T,P)};Y(A,T=>{l(s).ncomp>=r&&T(E)})}var C=R(b,2);{var S=T=>{ie(T,{name:"res-switcher",children:(P,N)=>{rt(P,{get options(){return l(o)},get value(){return l(a)},set value(B){I(a,B,!0)}})},$$slots:{default:!0}})};Y(C,T=>{l(o)&&l(o).length>1&&T(S)})}M(g,m)};Y(v,g=>{l(s)&&g(h)})}M(t,d),be()}var Wd=H('<span class="item svelte-1ggez3e"> </span>'),Ud=H('<p class="outliers svelte-1ggez3e"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function pi(t,e){pe(e,!0);var r=he(),o=K(r);{var a=s=>{ie(s,{children:(c,u)=>{var f=Ud(),d=K(f),v=R(O(d),2);et(v,17,()=>e.outliers,nt,(b,w)=>{var p=Wd(),_=O(p);le(()=>ke(_,e.dataset.objlabels[l(w)])),M(b,p)});var h=R(d,2);{var g=b=>{If(b,{get onclick(){return e.undoOutliers}})};Y(h,b=>{e.outliers.length>1&&b(g)})}var m=R(h,2);wr(m,{get onclick(){return e.resetOutliers}}),M(c,f)},$$slots:{default:!0}})};Y(o,s=>{e.dataset&&e.outliers&&e.outliers.length>0&&s(a)})}M(t,r),be()}const Hd={small:30,medium:40,large:50,xlarge:60},Gd={small:5,medium:8,large:12,xlarge:15},Xd={small:6,medium:10,large:14,xlarge:18},$o={small:4,medium:6,large:8,xlarge:10},Kd={small:12,medium:15,large:19,xlarge:21},ea={small:11,medium:15,large:17,xlarge:19},ol={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},jn=["●","◼","▲","▼","⬥","＋","✳","✕"],Jd=.8,bi=.5,Qd={small:5,medium:8,large:12,xlarge:15},zt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function wi(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function _i(t,e){if(t!=null&&(Array.isArray(t)&&(t=lt(t)),!(!Xe(t)||t.length<1)))return t.apply(r=>aa((r-e[1])*e[0]+e[2])).v}function bt(t,e){return _i(t,e.coords)}function ta(t,e){return _i(t,e.objects)}function yi(t,e){if(t!=null&&(Array.isArray(t)&&(t=lt(t)),!(!Xe(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function xi(t,e){return yi(t,e.coords)}function ki(t,e){return yi(t,e.objects)}function ra(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function bn(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function na(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=bn(Math.abs(Or(Ss(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(s=>s.toFixed(0))]:(r=Math.ceil(bn(Math.log10(e)))-2,[r,Array.from(t).map(s=>(s/Math.pow(10,r)).toFixed(0))]);let o=Math.ceil(-bn(Math.log10(e)));return o<=2?[0,Array.from(t).map(a=>a.toFixed(o))]:(r=o-2,o=2,bn(Math.abs(mn(t)))<=10?[-r,Array.from(t).map(a=>(a*Math.pow(10,r)).toFixed(o))]:[-r,Array.from(t).map(a=>(a/Math.pow(10,r)).toString())])}function qt(t,e,r){return Array.isArray(t)&&(t=lt(t)),Xe(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function la(t,e,r,o){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const a=r.coords,s=o.coords;let c="";for(let u=0;u<t.length;u++){const f=aa((t.v[u]-a[1])*a[0]+a[2]),d=aa((e.v[u]-s[1])*s[0]+s[2]);c+=f+","+d+" "}return c}function Ei(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Ur(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Ai(t,e){if(Array.isArray(t)&&(t=lt(t)),!Xe(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const o=e[0]<e[1]?e[0]:e[1],a=e[0]<e[1]?e[1]:e[0],s=t.filter(c=>c>=o&c<=a);return s.length!==t.length?[null,"some of ticks values are outside axis limits."]:[s,""]}function oa(t,e,r,o,a,s){a==null&&(a=!1),s===void 0&&(s=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const u=Math.abs(c[1]-c[0])*s,f=c[1]-c[0]-2*u,d=Math.floor(Math.log10(f)),v=1/Math.pow(10,d-1),h=Math.round(f*v)/v;let g=Zd(h/r);a&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(g<1&&(g=1),g=Math.round(g)));let m=Math.ceil((c[0]+u)/g)*g,b=Math.floor((c[1]-u)/g)*g;Math.abs(c[0]-m)<g/10&&(m=m+g),Math.abs(c[1]-b)<g/10&&(b=b-g),r=Math.ceil(bn((b-m)/g))+1,t=Ye.zeros(r);for(let w=0;w<r;w++)t.v[w]=m+g*w;if(Math.abs(g)<1){const w=Math.pow(10,1+Math.round(-Math.log10(g)));t=t.apply(p=>Math.round((p+Number.EPSILON)*w)/w)}return t.filter(w=>w>=c[0]&w<=c[1])}function Zd(t,e){const r=Math.floor(Math.log10(t)),o=t/Math.pow(10,r);let a;return o<=1?a=1:o<=2?a=2:o<=5?a=5:a=10,a*Math.pow(10,r)}function aa(t){return Math.round(t*10)/10}function $d(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function Ci(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function ev(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function tv(t){let e=-1,r=ev();for(let o=0;o<t.length;o++)e=r[(e^t[o])&255]^e>>>8;return e^-1}function rv(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=tv(r),a=new Uint8Array(4);a[0]=o>>>24,a[1]=o>>>16,a[2]=o>>>8,a[3]=o&255;const s=new Uint8Array(4);s[0]=0,s[1]=0,s[2]=0,s[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(s,33),c.set(r,37),c.set(a,50),c}function nv(t,e){const r=t.split(","),o=r[0],a=r[1],s=33/3*4,c=a.substring(0,s),u=a.substring(s),f=atob(c),d=new Uint8Array(f.length);for(let g=0;g<d.length;g++)d[g]=f.charCodeAt(g);const v=rv(d,e),h=btoa(String.fromCharCode(...v));return[o,",",h,u].join("")}function lv(t,e,r,o,a){if(r||(r=10),o||(o=10),a||(a=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(o<1||o>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(a<50||a>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const s=r/2.54*a,c=o/2.54*a;setTimeout(()=>{const u=t.clientHeight,f=t.clientWidth;let d=Math.max(s/f,c/u),v=1;d<1&&(v=d,d=1);const h=document.createElement("canvas"),g=h.getContext("2d");h.width=f*(v<1?v:d),h.height=u*(v<1?v:d),t.setAttribute("width",f*d),t.setAttribute("height",u*d),g.fillStyle="white",g.fillRect(0,0,h.width,h.height),g.scale(d,d);const m=new XMLSerializer().serializeToString(t),b=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),w=URL.createObjectURL(b),p=new Image;p.onload=function(){v<0&&(p.width=p.width*v,p.height=p.height*v),g.drawImage(p,0,0,h.width,h.height);const _=h.toDataURL("image/png"),k=nv(_,a),A=document.createElement("a");A.href=k,A.download=`${e}.png`,A.click()},p.src=w},20)}function ov(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,o=t.clientWidth;t.setAttribute("width",o+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${o} ${r}`);const a=new Blob([t.outerHTML],{type:"image/svg+xml"}),s=window.URL.createObjectURL(a),c=document.createElement("a");c.setAttribute("href",s),c.setAttribute("download",`${e}.svg`),c.click()}function av(t,e,r,o){const a=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":sv(e,r,o)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=a},500)},s=>{console.error(s),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=a},500)}).catch(s=>console.error(s))}async function sv(t,e,r){const o=t.clientHeight,a=t.clientWidth,s=Math.max(e/a,r/o),c=document.createElement("canvas"),u=c.getContext("2d");return c.width=a*s,c.height=o*s,u.scale(s,s),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((d,v)=>{const h=new XMLSerializer().serializeToString(t),g=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,b=m.createObjectURL(g),w=new Image;w.onload=function(){u.drawImage(w,0,0,c.width,c.height),m.revokeObjectURL(b),c.toBlob(function(p){p?d(p):v(new Error("Failed to create blob"))},"image/png")},w.onerror=function(p){v(p)},w.src=b})}function Ul(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function iv(t,e,r,o,a){let s=a.ticks,c=a.tickLabels,u=0;const f=oa(s,t,Gd[r.x],!0,a.whole),d=f.length,v=ki([$o[r.plot]],o)[0],h=Ye.fill(e[0],d),g=h.add(v),m=Ye.fill(e[1],d);if(c||(s?(u=0,c=s.v.map(P=>bn(P).toString())):[u,c]=na(f.v)),!c||c.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[f,h],[f,m]],w=[[lt([t[0]]),lt([e[0]])],[lt([t[1]]),lt([e[0]])]],p=[[f,g],[f,h]],_=(t[1]-t[0])*.01,k=[[null,null],[[t[1]-(u>9?1:0)*_],[h.v[d-1]]]],A=ra(u),E=c.length,C=Math.abs(t[1]>t[0]?t[1]-f.v[E-1]:t[1]-f.v[0]),S=Math.abs(t[1]-t[0]),T=Math.abs(f.v[1]-f.v[0]);if(A.length>0&&C<S*.1&&C<T*.5){const P=t[1]>t[0]?E-1:0;c[P]=" "}return{grid:b,axisLine:w,tickCoords:p,tfCoords:k,ticks:s,tickLabels:c,tickFactor:u,tfLabel:A}}function cv(t,e,r,o,a){let s=a.ticks,c=a.tickLabels,u=0;const f=oa(a.ticks,e,Xd[r.y],!0,a.whole),d=f.length,v=ki([$o[r.plot]],o)[0],h=Ye.fill(t[0],d),g=h.add(v),m=Ye.fill(t[1],d);if(c||(s?(u=0,c=s.v.map(T=>bn(T).toString())):[u,c]=na(f.v)),c.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[h,f],[m,f]],w=[[lt([t[0]]),lt([e[0]])],[lt([t[0]]),lt([e[1]])]],p=[[h,f],[g,f]],_=[[[],[]],[[g.v[d-1]+(Math.abs(u)>9?3:2)*v],[e[1]]]],k=ra(u),A=c.length,E=Math.abs(e[1]>e[0]?e[1]-f.v[A-1]:e[1]-f.v[0]),C=Math.abs(e[1]-e[0]),S=Math.abs(f.v[1]-f.v[0]);if(k.length>0&&E<C*.1&&E<S*.5){const T=e[1]>e[0]?A-1:0;c[T]=" "}return{grid:b,axisLine:w,tickCoords:p,tfCoords:_,ticks:s,tickLabels:c,tickFactor:u,tfLabel:k}}function uv(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Xe(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let o,a;if(t.labels?(o=t.labels,a=0):[a,o]=na(e),!(o.length===e.length-1||o.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const s=o.length===r.length;return{colmap:r,breaks:e,labels:o,isCentered:s,labelsFactor:a,fontSize:t.fontSize,labelColor:t.labelColor}}function fv(t,e,r,o){const a=t.colmap.length,s=e*Jd,c=s/a,u=r[1]+(e-s)*.5,f=Qd[o.y],d=r[2]+f*bi,v=d+f*(1+bi),h=t.isCentered?c/2:0;return{start:u,top:d,height:f,width:c,dxl:h,ltop:v}}function wn(t,e,r){if(!t||!e||!r||typeof r!="function")return;const o=t.target;if(o.tagName===e){const a=Array.prototype.indexOf.call(o.parentNode.children,o);if(a<0)return;r(a),t.stopPropagation()}}function dv(t,e){const o=document.createElement("canvas").getContext("2d");return o.font=e,o.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function vv(t,e){const r="Arial",o=e/8,a=e*1.5,s=Array(t.length),c=Array(t.length);let u=0,f=0,d=0;for(let h=0;h<t.length;h++){const g=dv("  "+t[h].label+"  ",e+"px "+r);d=g>d?g:d;const m=e*t[h].labelHeight+2*o;s[h]=m,c[h]=u,u=u+m,f=f+m}const v=a+2*o+d;return[c,s,a,o,f,v]}function hv(t,e,r,o,a){const[s,c,u,f,d,v]=vv(t.items,o*t.fontSize),h=t.position.includes("left")?e[0]+a:t.position.includes("right")?e[1]-v-a:(e[1]+e[0]-v)*.5,g=t.position.includes("top")?r[1]+a:t.position.includes("bottom")?r[0]-d-a:(r[1]+r[0]-d)*.5;return{lgl:h,lgt:g,lgw:v,lgh:d,ely:s,elh:c,elw:u,elp:f}}function Ur(t){if(!t||t.length<1)return t;function e(s){return'<tspan font-size="0.75em" dy="-0.5em">'+s+'</tspan><tspan dy="0.4em"> </tspan>'}function r(s){return'<tspan font-size="0.75em" dy="0.5em">'+s+'</tspan><tspan dy="-0.4em"> </tspan>'}let o=0,a="";for(;o<t.length;){const s=t[o];if((s==="^"||s==="_")&&o<t.length-1){const c=s==="^";if(o++,t[o]==="("){let u=o+1;for(;u<t.length&&t[u]!==")";)u++;const f=t.slice(o+1,u);a+=c?e(f):r(f),o=u+1}else if(t[o]==="-"||t[o]==="–"){const u=t.slice(o,o+2);a+=c?e(u):r(u),o=o+2}else a+=c?e(t[o]):r(t[o]),o++}else a+=s,o++}return a}var mv=Ae('<line vector-effect="non-scaling-stroke"></line>'),gv=Ae("<g></g>");function sa(t,e){pe(e,!0);let r=j(e,"lineCoords",19,()=>[]),o=j(e,"lineColor",19,()=>zt.DARKGRAY),a=j(e,"lineType",3,1),s=j(e,"lineWidth",3,1),c=j(e,"className",3,"");const u=Ot("axes");let f=y(()=>bt(r()[0][0],u.tX())),d=y(()=>bt(r()[1][0],u.tX())),v=y(()=>bt(r()[0][1],u.tY())),h=y(()=>bt(r()[1][1],u.tY())),g=y(()=>`stroke:${o()};stroke-width: ${s()}px;stroke-dasharray:${ol[u.scales().plot][a()-1]}`);var m=he(),b=K(m);{var w=p=>{var _=gv();et(_,21,()=>l(f),nt,(k,A,E)=>{var C=mv();le(()=>{q(C,"x1",l(f)[E]),q(C,"x2",l(d)[E]),q(C,"y1",l(v)[E]),q(C,"y2",l(h)[E]),pt(C,l(g))}),M(k,C)}),le(()=>gt(_,0,Mu(c()))),M(p,_)};Y(b,p=>{l(f)&&l(v)&&l(d)&&p(w)})}M(t,m),be()}var pv=Ae('<text text-anchor="middle"><!></text>'),bv=Ae("<text><!></text>"),wv=Ae("<text><!></text>"),_v=Ae('<g class="tick-labels"><!></g>');function Si(t,e){pe(e,!0);let r=j(e,"pos",3,1),o=j(e,"las",3,1),a=y(()=>["middle","middle","start","middle","end"][r()]),s=y(()=>`fill:${e.textColor};`);const c=Ot("axes");let u=y(()=>bt(e.tickCoords[1][0],c.tX())),f=y(()=>bt(e.tickCoords[1][1],c.tY())),d=y(()=>ea[c.scales().plot]),v=y(()=>[0,0,l(d),0,-l(d)][r()]),h=y(()=>[0,l(d),0,-l(d),0][r()]);var g=_v(),m=O(g);{var b=p=>{var _=he(),k=K(_);et(k,17,()=>l(u),nt,(A,E,C)=>{var S=pv();q(S,"data-id",C),q(S,"dx",0);var T=O(S);St(T,()=>e.tickLabels[C],!0),le(()=>{q(S,"x",l(u)[C]),q(S,"y",l(f)[C]),q(S,"dy",l(v)*1.25),q(S,"transform",`rotate(-90, ${l(u)[C]}, ${l(f)[C]})`)}),M(A,S)}),M(p,_)},w=p=>{var _=he(),k=K(_);{var A=C=>{var S=he(),T=K(S);et(T,17,()=>l(u),nt,(P,N,B)=>{var F=bv();q(F,"data-id",B),q(F,"dy",0),q(F,"text-anchor","end");var L=O(F);St(L,()=>e.tickLabels[B],!0),le(()=>{q(F,"x",l(u)[B]),q(F,"y",l(f)[B]),q(F,"dx",-l(h)/2),q(F,"transform",`rotate(-90, ${l(u)[B]}, ${l(f)[B]})`)}),M(P,F)}),M(C,S)},E=C=>{var S=he(),T=K(S);et(T,17,()=>l(u),nt,(P,N,B)=>{var F=wv();q(F,"data-id",B);var L=O(F);St(L,()=>e.tickLabels[B],!0),le(()=>{q(F,"x",l(u)[B]),q(F,"y",l(f)[B]),q(F,"dx",l(v)),q(F,"dy",l(h)),q(F,"text-anchor",l(a))}),M(P,F)}),M(C,S)};Y(k,C=>{o()===2&&r()===1?C(A):C(E,!1)},!0)}M(p,_)};Y(m,p=>{o()===2&&r()===4?p(b):p(w,!1)})}le(()=>pt(g,l(s))),M(t,g),be()}const yv=(t,e=Ct,r=Ct)=>{var o=Mv();const a=y(()=>e().colmap.length);var s=K(o);et(s,17,()=>e().colmap,nt,(v,h,g)=>{var m=Av();const b=y(()=>r().start+g*r().width);var w=K(m),p=R(w);q(p,"dy",0);var _=O(p);St(_,()=>e().labels[g],!0),le(()=>{q(w,"x",l(b)),q(w,"y",r().top),q(w,"width",r().width),q(w,"height",r().height),q(w,"fill",l(h)),q(p,"x",l(b)),q(p,"y",r().ltop),q(p,"dx",r().dxl),q(p,"fill",e().labelColor),q(p,"font-size",e().fontSize+"em")}),M(v,m)});var c=R(s);{var u=v=>{var h=Cv();const g=y(()=>r().start+l(a)*r().width);q(h,"dx",0),q(h,"dy",0);var m=O(h);St(m,()=>e().labels[l(a)],!0),le(()=>{q(h,"x",l(g)),q(h,"y",r().ltop),q(h,"fill",e().labelColor),q(h,"font-size",`${e().fontSize??""}em`)}),M(v,h)};Y(c,v=>{e().isCentered||v(u)})}var f=R(c);{var d=v=>{var h=Sv();const g=y(()=>r().start+l(a)*r().width);var m=O(h);St(m,()=>ra(e().labelsFactor),!0),le(()=>{q(h,"x",l(g)),q(h,"y",r().ltop),q(h,"fill",e().labelColor),q(h,"font-size",`${e().fontSize??""}em`)}),M(v,h)};Y(f,v=>{e().labelsFactor!==0&&v(d)})}M(t,o)};function Mi(t,e,r){t.preventDefault(),e(t,r())}function Ti(t,e,r){t.preventDefault(),e(t,r())}function Ni(t,e,r){t.preventDefault(),e(t,r())}function Hl(t,e,r){t.preventDefault(),e(t,r())}async function Pi(t,e,r,o){av(t.target,l(e),r(),o())}function zi(t,e,r){ov(l(e),r())}function Li(t,e,r,o,a,s){lv(l(e),r(),o(),a(),s())}var xv=Ae('<text fill="crimson" text-anchor="middle"> </text>'),kv=Ae('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Ev=Ae("<!><!><!><!><!>",1),Av=Ae('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Cv=Ae('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Sv=Ae('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Mv=Ae("<!><!><!>",1),Tv=Ae("<line></line>"),Nv=Ae('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Pv=Ae('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),zv=Ae('<svg><rect height="100%" width="100%"></rect><!></svg>'),Lv=Ae('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Rv=Ae('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Iv=Ae('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),jv=Ae('<g class="plot-labels"><!><!><!></g>'),Fv=Ae('<g class="axis x-axis"><!></g>'),qv=Ae('<g class="axis y-axis"><!></g>'),Bv=Ae('<rect fill="transparent" id="axes-box"></rect>'),Ov=Ae('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Vv=Ae('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Dv=Ae('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Yv=Ae('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Wv=H('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),Uv=H('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Hv=H(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Ri(t,e){pe(e,!0);const r=(Ee,Pe=Ct,Se=Ct)=>{var Oe=he(),wt=K(Oe);{var cr=Yt=>{var st=he(),Qe=K(st);{var Lt=_t=>{var ut=xv(),rr=O(ut);le(()=>{q(ut,"x",l($)[0]-10),q(ut,"y",l(te)),q(ut,"transform",`rotate(-90, ${l($)[0]-10}, ${l(te)})`),ke(rr,Se().error)}),M(_t,ut)},kt=_t=>{var ut=kv(),rr=O(ut);le(()=>{q(ut,"x",l(oe)),q(ut,"y",l(se)[0]),ke(rr,Se().error)}),M(_t,ut)};Y(Qe,_t=>{Se().pos===4?_t(Lt):_t(kt,!1)})}M(Yt,st)},Bt=Yt=>{var st=Ev(),Qe=K(st);{var Lt=Me=>{sa(Me,{get lineCoords(){return Pe().grid},get lineColor(){return zt.MIDDLEGRAY},lineType:3})};Y(Qe,Me=>{Se().showGrid&&Me(Lt)})}var kt=R(Qe);sa(kt,{get lineCoords(){return Pe().axisLine},get lineColor(){return zt.DARKGRAY},lineType:1});var _t=R(kt);sa(_t,{get lineCoords(){return Pe().tickCoords},get lineColor(){return zt.DARKGRAY},lineType:1});var ut=R(_t);{var rr=Me=>{Si(Me,{get las(){return Se().las},get pos(){return Se().pos},get tickCoords(){return Pe().tickCoords},get tickLabels(){return Pe().tickLabels},get tickColor(){return zt.DARKGRAY},get hideLast(){return Se().hideLast}})};Y(ut,Me=>{Pe().tickCoords.length===2&&Pe().tickLabels.length===Pe().tickCoords[1][0].length&&Me(rr)})}var Zr=R(ut);{var tt=Me=>{{let Tt=y(()=>[Pe().tfLabel]);Si(Me,{get pos(){return Se().pos},get tickCoords(){return Pe().tfCoords},get tickLabels(){return l(Tt)},get textColor(){return zt.DARKGRAY}})}};Y(Zr,Me=>{Pe().tickFactor!==0&&Me(tt)})}M(Yt,st)};Y(wt,Yt=>{Se().error?Yt(cr):Yt(Bt,!1)})}M(Ee,Oe)},o=(Ee,Pe=Ct,Se=Ct)=>{var Oe=zv();const wt=y(()=>Se().elw+2*Se().elp),cr=y(()=>Se().elp),Bt=y(()=>Se().elh),Yt=y(()=>Se().ely);var st=O(Oe),Qe=R(st);et(Qe,17,()=>Pe().items,nt,(Lt,kt,_t)=>{var ut=Pv();q(ut,"x",0);var rr=O(ut);{var Zr=yr=>{var Et=Tv();le(()=>{q(Et,"x1",l(cr)),q(Et,"x2",l(wt)-l(cr)),q(Et,"y1",l(Bt)[_t]/2),q(Et,"y2",l(Bt)[_t]/2),q(Et,"stroke",l(kt).line.lineColor),q(Et,"stroke-width",l(kt).line.lineWidth),q(Et,"stroke-dasharray",l(F)[l(kt).line.lineType-1])}),M(yr,Et)};Y(rr,yr=>{l(kt).line&&yr(Zr)})}var tt=R(rr);{var Me=yr=>{var Et=Nv(),ba=O(Et);le(()=>{q(Et,"x",l(wt)/2),q(Et,"y",l(Bt)[_t]/2),q(Et,"fill",l(kt).point.faceColor),q(Et,"stroke-width",l(kt).point.lineWidth),q(Et,"stroke",l(kt).point.lineColor),q(Et,"font-size",`${l(kt).point.markerSize??""}em`),ke(ba,jn[l(kt).point.marker-1])}),M(yr,Et)};Y(tt,yr=>{l(kt).point&&yr(Me)})}var Tt=R(tt),$l=O(Tt);St($l,()=>l(kt).label,!0),le(()=>{q(ut,"y",l(Yt)[_t]),q(ut,"width",Se().lgw),q(ut,"height",l(Bt)[_t]),q(Tt,"x",l(wt)+l(cr)),q(Tt,"y",l(Bt)[_t]/2),q(Tt,"fill",zt.LEGEND),q(Tt,"font-size",`${Pe().fontSize??""}em`)}),M(Lt,ut)}),le(()=>{q(Oe,"x",Se().lgl),q(Oe,"y",Se().lgt),q(Oe,"height",Se().lgh),q(Oe,"width",Se().lgw),q(st,"fill",Pe().faceColor),q(st,"stroke",Pe().lineColor),q(st,"stroke-width",Pe().lineWidth)}),M(Ee,Oe)};let a=j(e,"limX",19,()=>[0,1]),s=j(e,"limY",19,()=>[0,1]),c=j(e,"margins",19,()=>[1,1.1,.55,.6]),u=j(e,"downloadLinks",3,"none"),f=j(e,"fileName",3,"plot"),d=j(e,"pngWidth",3,8),v=j(e,"pngHeight",3,8),h=j(e,"pngRes",3,300),g=j(e,"clipboardWidth",3,1200),m=j(e,"clipboardHeight",3,800),b=j(e,"onclick",3,null),w=j(e,"onmousemove",3,null),p=j(e,"onmousedown",3,null),_=j(e,"onmouseup",3,null);function k(Ee,Pe){if(Pe&&Ee.target.id=="axes-box"){const Se=xi([Ee.offsetX-l(D)],l(Q))[0],Oe=xi([Ee.offsetY-l(W)],l(J))[0];Pe(Se,Oe)}}const A="plottingArea"+Math.round(Math.random()*1e4);let E=ee(0),C=ee(0),S=ee(0);const T=y(()=>({plot:$d(l(C),l(S)),x:Ci(l(C)),y:Ci(l(S))})),P=y(()=>c().map(Ee=>Ee*Hd[l(T).plot])),N=y(()=>Kd[l(T).plot]),B=y(()=>$o[l(T).plot]),F=y(()=>ol[l(T).plot]),L=y(()=>l(ve).show&&l(ve).label!==""?l(N)*1.5:0),D=y(()=>l(_e).show&&l(_e).label!==""?l(N)*1.5:0),W=y(()=>e.title&&e.title!==""?l(N)*1.5:0),z=y(()=>l(C)>l(D)?l(C)-l(D):0),G=y(()=>l(S)>l(L)+l(W)?l(S)-l(L)-l(W):0),ne=y(()=>l(G)-l(P)[0]-l(P)[2]),V=y(()=>l(z)-l(P)[1]-l(P)[3]),X=y(()=>wi(a(),2)&&wi(s(),2)&&l(z)>l(P)[1]+l(P)[3]&&l(G)>l(P)[0]+l(P)[2]),Q=y(()=>l(X)?{coords:[l(V)/(a()[1]-a()[0]),a()[0],l(P)[1]],objects:[l(V)/(a()[1]-a()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),J=y(()=>l(X)?{coords:[-l(ne)/(s()[1]-s()[0]),s()[1],l(P)[2]],objects:[l(ne)/(s()[1]-s()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),te=y(()=>l(ne)*.5+l(W)+l(P)[2]),oe=y(()=>l(V)*.5+l(D)+l(P)[1]),$=y(()=>l(X)?bt(a(),l(Q)):[0,1]),se=y(()=>l(X)?bt(s(),l(J)):[1,0]),Te=y(()=>Ur(e.title)),Ie=y(()=>l(Te)?l(Te).length===e.title.left?1:1.4:0);let Ce=ee(qe({show:!1})),ve=ee(qe({show:!1,error:""})),_e=ee(qe({show:!1,error:""})),je=ee(qe({show:!1,colmap:null,breaks:null})),de=ee(qe({show:!1,items:null,position:null}));const fe=y(()=>l(X)&&l(je)&&l(je).show?uv(l(je)):null),re=y(()=>l(X)&&l(ve).show?iv(a(),s(),l(T),l(J),l(ve)):null),ce=y(()=>l(X)&&l(_e).show?cv(a(),s(),l(T),l(Q),l(_e)):null),ae=y(()=>l(X)&&l(fe)?fv(l(fe),l(V),l(P),l(T)):null),ge=y(()=>l(X)&&l(de)&&l(de).show&&l($)?hv(l(de),l($),l(se),l(N),l(B)):null);Wc("axes",{setBox:Ee=>I(Ce,Ee,!0),setXAxis:Ee=>I(ve,Ee,!0),setYAxis:Ee=>I(_e,Ee,!0),setColmapLegend:Ee=>I(je,Ee,!0),setGroupLegend:Ee=>I(de,Ee,!0),scales:()=>l(T),tX:()=>l(Q),tY:()=>l(J),limX:()=>a(),limY:()=>s()});var ye=Hv();let ue;var Le=O(ye),Ne=R(O(Le));{var We=Ee=>{var Pe=jv(),Se=O(Pe);{var Oe=st=>{var Qe=Lv();q(Qe,"dx",0),q(Qe,"dy",0);var Lt=O(Qe);St(Lt,()=>l(ve).label,!0),le(()=>{q(Qe,"x",l(oe)),q(Qe,"y",l(G)+l(W))}),M(st,Qe)};Y(Se,st=>{l(ve).show&&l(ve).label&&l(ve).label!==""&&st(Oe)})}var wt=R(Se);{var cr=st=>{var Qe=Rv();q(Qe,"dx",0),q(Qe,"dy",0);var Lt=O(Qe);St(Lt,()=>l(_e).label,!0),le(()=>{q(Qe,"x",l(N)/1.1*l(_e).labelHeight),q(Qe,"y",l(te)),q(Qe,"transform",`rotate(-90, ${l(N)*l(_e).labelHeight/1.1}, ${l(te)})`)}),M(st,Qe)};Y(wt,st=>{l(_e).show&&l(_e).label&&l(_e).label!==""&&st(cr)})}var Bt=R(wt);{var Yt=st=>{var Qe=Iv();q(Qe,"dx",0),q(Qe,"dy",0);var Lt=O(Qe);St(Lt,()=>l(Te),!0),le(()=>{q(Qe,"x",l(oe)),q(Qe,"y",l(N)*l(Ie))}),M(st,Qe)};Y(Bt,st=>{l(Te)&&l(Te)!==""&&st(Yt)})}M(Ee,Pe)};Y(Ne,Ee=>{l(X)&&Ee(We)})}var Ue=R(Ne),Be=O(Ue),Fe=O(Be),xe=O(Fe),Re=R(Be);{var ze=Ee=>{var Pe=Yv(),Se=K(Pe);{var Oe=tt=>{var Me=Fv(),Tt=O(Me);r(Tt,()=>l(re),()=>l(ve)),M(tt,Me)};Y(Se,tt=>{l(ve).show&&l(re)&&tt(Oe)})}var wt=R(Se);{var cr=tt=>{var Me=qv(),Tt=O(Me);r(Tt,()=>l(ce),()=>l(_e)),M(tt,Me)};Y(wt,tt=>{l(_e).show&&l(ce)&&tt(cr)})}var Bt=R(wt),Yt=O(Bt);{var st=tt=>{var Me=Bv();Me.__keydown=[Hl,k,b],Me.__click=[Hl,k,b],Me.__mousemove=[Ni,k,w],Me.__mousedown=[Mi,k,p],Me.__mouseup=[Ti,k,_],le(()=>{q(Me,"stroke",l(Ce).lineColor),q(Me,"stroke-width",`${l(Ce).lineWidth??""}px`),q(Me,"x",l($)[0]),q(Me,"y",l(se)[1]),q(Me,"width",l($)[1]-l($)[0]),q(Me,"height",l(se)[0]-l(se)[1])}),M(tt,Me)},Qe=tt=>{var Me=Ov();Me.__keydown=[Hl,k,b],Me.__click=[Hl,k,b],Me.__mousemove=[Ni,k,w],Me.__mousedown=[Mi,k,p],Me.__mouseup=[Ti,k,_],le(()=>{q(Me,"x",l($)[0]),q(Me,"y",l(se)[1]),q(Me,"width",l($)[1]-l($)[0]),q(Me,"height",l(se)[0]-l(se)[1])}),M(tt,Me)};Y(Yt,tt=>{l(Ce).show?tt(st):tt(Qe,!1)})}var Lt=R(Bt),kt=O(Lt);Er(kt,()=>e.children??Ct);var _t=R(Lt);{var ut=tt=>{var Me=Vv(),Tt=O(Me);yv(Tt,()=>l(fe),()=>l(ae)),M(tt,Me)};Y(_t,tt=>{l(ae)&&tt(ut)})}var rr=R(_t);{var Zr=tt=>{var Me=Dv(),Tt=O(Me);o(Tt,()=>l(de),()=>l(ge)),M(tt,Me)};Y(rr,tt=>{l(ge)&&tt(Zr)})}le(()=>q(Lt,"clip-path",`url(#${A})`)),M(Ee,Pe)};Y(Re,Ee=>{l(X)&&Ee(ze)})}vn(Le,Ee=>I(E,Ee),()=>l(E));var Kt=R(Le,2);{var Sr=Ee=>{var Pe=Wv();M(Ee,Pe)},Mr=Ee=>{var Pe=Uv(),Se=O(Pe);Se.__click=[zi,E,f],Se.__keydown=[zi,E,f];var Oe=R(Se,2);Oe.__click=[Li,E,f,d,v,h],Oe.__keydown=[Li,E,f,d,v,h];var wt=R(Oe,2);wt.__click=[Pi,E,g,m],wt.__keydown=[Pi,E,g,m],M(Ee,Pe)};Y(Kt,Ee=>{l(X)?Ee(Mr,!1):Ee(Sr)})}le(Ee=>{ue=gt(ye,1,`plot-container show-download-links-${u()??""}`,"svelte-1jtdxd0",ue,Ee),pt(Le,`font-size:${l(N)??""}px`),q(Ue,"x",l(D)),q(Ue,"y",l(W)),q(Ue,"width",l(z)),q(Ue,"height",l(G)),q(Fe,"id",A),q(xe,"x",l($)[0]),q(xe,"y",l(se)[1]),q(xe,"width",l($)[1]-l($)[0]),q(xe,"height",l(se)[0]-l(se)[1])},[()=>({"plot-error":!l(X)})]),ks(Le,"clientWidth",Ee=>I(C,Ee)),ks(Le,"clientHeight",Ee=>I(S,Ee)),M(t,ye),be()}dt(["keydown","click","mousemove","mousedown","mouseup"]);function ia(t,e){pe(e,!0);let r=j(e,"tickLabels",7),o=j(e,"las",3,1),a=j(e,"whole",3,!1),s=j(e,"show",3,!0),c=j(e,"showGrid",3,!1);const u=Ot("axes");we(()=>{const f=Ur(e.label),d=f?f.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=Ai(e.ticks,u.limX())),!h&&r()&&(g=>{var m=no(g,2);r(m[0]),h=m[1]})(Ei(r(),v)),u.setXAxis({show:s(),error:h,label:f,ticks:v,labelHeight:d,showGrid:c(),las:o(),whole:a(),tickLabels:r()})}),be()}function ca(t,e){pe(e,!0);let r=j(e,"tickLabels",7),o=j(e,"las",3,1),a=j(e,"whole",3,!1),s=j(e,"show",3,!0),c=j(e,"showGrid",3,!1);const u=Ot("axes");we(()=>{const f=Ur(e.label),d=f?f.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=Ai(e.ticks,u.limY())),!h&&r()&&(g=>{var m=no(g,2);r(m[0]),h=m[1]})(Ei(r(),v)),u.setYAxis({show:s(),error:h,label:f,ticks:v,labelHeight:d,showGrid:c(),las:o(),whole:a(),tickLabels:r(),pos:4})}),be()}function ua(t,e){pe(e,!0);let r=j(e,"lineWidth",3,1),o=j(e,"lineColor",3,"#606060");const a=Ot("axes");we(()=>{a.setBox({show:!0,lineWidth:r(),lineColor:o()})}),be()}var Gv=(t,e)=>wn(t,"rect",e.onclick),Xv=Ae("<rect></rect>"),Kv=Ae("<g></g>");function Gl(t,e){pe(e,!0);let r=j(e,"faceColor",19,()=>zt.PRIMARY),o=j(e,"lineColor",19,r),a=j(e,"lineWidth",3,1),s=j(e,"className",3,"series-rect");const c=y(()=>qt(e.left,"Rectangles (left)")),u=y(()=>l(c)?qt(e.top,"Rectangles (top)",l(c).length):null),f=y(()=>l(u)?typeof e.width!="object"?Ye.fill(e.width,l(c).length):e.width:null),d=y(()=>l(u)?typeof e.height!="object"?Ye.fill(e.height,l(c).length):e.height:null),v=Ot("axes"),h=y(()=>l(c)?bt(l(c),v.tX()):null),g=y(()=>l(u)?bt(l(u),v.tY()):null),m=y(()=>l(f)?ta(l(f),v.tX()):null),b=y(()=>l(d)?ta(l(d),v.tY()):null),w=y(()=>`fill:${r()};stroke:${o()};stroke-width:${a()}px;`),p=y(()=>l(h)&&l(g)&&l(m)&&l(b)&&l(m).length===l(h).length&&l(b).length===l(h).length);var _=he(),k=K(_);{var A=E=>{var C=Kv();C.__click=[Gv,e],et(C,21,()=>e.left,nt,(S,T,P)=>{var N=Xv();le(()=>{q(N,"x",l(h)[P]),q(N,"y",l(g)[P]),q(N,"width",l(m)[P]),q(N,"height",l(b)[P])}),M(S,N)}),le(()=>{gt(C,0,`series ${s()??""}`),pt(C,l(w))}),M(E,C)};Y(k,E=>{l(p)&&E(A)})}M(t,_),be()}dt(["click"]);var Jv=(t,e)=>wn(t,"line",e.onclick),Qv=Ae("<line></line>"),Zv=Ae('<g class="series series-segment"></g>');function _n(t,e){pe(e,!0);let r=j(e,"lineColor",19,()=>zt.PRIMARY),o=j(e,"lineType",3,1),a=j(e,"lineWidth",3,1);const s=y(()=>qt(e.xStart,"Segments")),c=y(()=>l(s)?qt(e.yStart,"Segments",l(s).length):null),u=y(()=>l(c)?qt(e.xEnd,"Segments",l(s).length):null),f=y(()=>l(u)?qt(e.yEnd,"Segments",l(s).length):null),d=Ot("axes"),v=y(()=>l(s)?bt(l(s),d.tX()):null),h=y(()=>l(u)?bt(l(u),d.tX()):null),g=y(()=>l(c)?bt(l(c),d.tY()):null),m=y(()=>l(f)?bt(l(f),d.tY()):null),b=y(()=>`stroke:${r()};stroke-width: ${a()}px;stroke-dasharray:${ol[d.scales().plot][o()-1]}`),w=y(()=>l(v)&&l(h)&&l(g)&&l(m));var p=he(),_=K(p);{var k=A=>{var E=Zv();E.__click=[Jv,e],et(E,21,()=>l(v),nt,(C,S,T)=>{var P=Qv();le(()=>{q(P,"x1",l(v)[T]),q(P,"x2",l(h)[T]),q(P,"y1",l(g)[T]),q(P,"y2",l(m)[T])}),M(C,P)}),le(()=>pt(E,l(b))),M(A,E)};Y(_,A=>{l(w)&&A(k)})}M(t,p),be()}dt(["click"]);var $v=(t,e)=>wn(t,"text",e.onclick),e1=Ae("<text><!></text>"),t1=Ae("<text><!></text>"),r1=Ae("<text><!></text>"),n1=Ae('<g class="series series-textlabels"><!></g>');function Fn(t,e){pe(e,!0);let r=j(e,"pos",3,0),o=j(e,"faceColor",19,()=>zt.PRIMARY_TEXT),a=j(e,"lineColor",3,"transparent"),s=j(e,"lineWidth",3,0),c=j(e,"textSize",3,1),u=j(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],d=y(()=>qt(e.xValues,"TextLabels")),v=y(()=>l(d)?qt(e.yValues,"TextLabels",l(d).length):null),h=y(()=>l(v)?Array.isArray(e.labels)&&e.labels.length!==l(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),g=y(()=>l(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),m=Ot("axes"),b=y(()=>l(d)&&l(g)!==null?bt(l(d),m.tX()):null),w=y(()=>l(v)&&l(b)?bt(l(v),m.tY()):null),p=y(()=>ea[m.scales().plot]),_=y(()=>[0,0,-l(p),0,l(p),l(p)]),k=y(()=>[0,l(p),0,-l(p),0,l(p)]),A=y(()=>`fill:${o()};stroke-width:${s()}px;stroke:${a()};font-size:${c()}em;`),E=y(()=>l(b)&&l(w)&&l(g)!==null&&l(h)&&l(b).length===l(w).length);var C=he(),S=K(C);{var T=P=>{var N=n1();N.__click=[$v,e];var B=O(N);{var F=D=>{var W=he(),z=K(W);et(z,17,()=>l(b),nt,(G,ne,V)=>{var X=e1();q(X,"data-id",V);var Q=O(X);St(Q,()=>e.labels,!0),le(()=>{q(X,"x",l(b)[V]),q(X,"y",l(w)[V]),q(X,"dx",l(_)[r()]),q(X,"dy",l(k)[r()]),q(X,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[V]+l(_)[r()]}, ${l(w)[V]+l(k)[r()]})`:""),q(X,"text-anchor",f[r()[V]])}),M(G,X)}),M(D,W)},L=D=>{var W=he(),z=K(W);{var G=V=>{var X=he(),Q=K(X);et(Q,17,()=>l(b),nt,(J,te,oe)=>{var $=t1();q($,"data-id",oe);var se=O($);St(se,()=>e.labels[oe],!0),le(()=>{q($,"x",l(b)[oe]),q($,"y",l(w)[oe]),q($,"dx",l(_)[r()[oe]]),q($,"dy",l(k)[r()[oe]]),q($,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[oe]+l(_)[r()]}, ${l(w)[oe]+l(k)[r()]})`:""),q($,"text-anchor",f[r()[oe]])}),M(J,$)}),M(V,X)},ne=V=>{var X=he(),Q=K(X);et(Q,17,()=>l(b),nt,(J,te,oe)=>{var $=r1();q($,"data-id",oe);var se=O($);St(se,()=>e.labels[oe],!0),le(()=>{q($,"x",l(b)[oe]),q($,"y",l(w)[oe]),q($,"dx",l(_)[r()]),q($,"dy",l(k)[r()]),q($,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[oe]+l(_)[r()]}, ${l(w)[oe]+l(k)[r()]})`:""),q($,"text-anchor",f[r()])}),M(J,$)}),M(V,X)};Y(z,V=>{Array.isArray(r())||ArrayBuffer.isView(r())?V(G):V(ne,!1)},!0)}M(D,W)};Y(B,D=>{typeof e.labels=="string"?D(F):D(L,!1)})}le(()=>pt(N,l(A))),M(P,N)};Y(S,P=>{l(E)&&P(T)})}M(t,C),be()}dt(["click"]),dt(["click"]);var l1=(t,e)=>wn(t,"text",e.onclick),o1=Ae("<text> </text>"),a1=Ae('<g text-anchor="middle"></g>');function fa(t,e){pe(e,!0);let r=j(e,"marker",3,1),o=j(e,"faceColor",3,"transparent"),a=j(e,"lineColor",19,()=>zt.PRIMARY),s=j(e,"lineWidth",3,1),c=j(e,"markerSize",3,1);const u=y(()=>typeof r()!="number"||r()<1||r()>jn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+jn.length+"."),null):jn[r()-1]),f=y(()=>qt(e.xValues,"Points")),d=y(()=>l(f)?qt(e.yValues,"Points",l(f).length):null),v=Ot("axes"),h=y(()=>l(f)?bt(l(f),v.tX()):null),g=y(()=>l(h)&&l(d)?bt(l(d),v.tY()):null),m=y(()=>["＋","✳","✕"].includes(l(u))?`fill:${a()&&a()!=="transparent"?a():o()};stroke-width:0px;font-size:${c()}em;`:`fill:${o()};stroke-width:${s()}px;stroke:${a()}; font-size:${c()}em;`),b=y(()=>["◼","⬥","＋","✳","✕"].includes(l(u))?"series-points2":"series-points1"),w=y(()=>l(h)&&l(g)&&l(h).length===l(g).length);var p=he(),_=K(p);{var k=A=>{var E=a1();E.__click=[l1,e],et(E,21,()=>l(h),nt,(C,S,T)=>{var P=o1(),N=O(P);le(()=>{q(P,"x",l(h)[T]),q(P,"y",l(g)[T]),ke(N,l(u))}),M(C,P)}),le(()=>{gt(E,0,`series series-points ${l(b)??""}`),pt(E,l(m))}),M(A,E)};Y(_,A=>{l(w)&&A(k)})}M(t,p),be()}dt(["click"]);var s1=(t,e)=>wn(t,"polyline",e.onclick),i1=Ae('<g class="series series-line"><polyline class="line"></polyline></g>');function Hr(t,e){pe(e,!0);let r=j(e,"lineColor",19,()=>zt.PRIMARY),o=j(e,"lineType",3,1),a=j(e,"lineWidth",3,1);const s=y(()=>qt(e.xValues,"Lines")),c=y(()=>l(s)?qt(e.yValues,"Lines",l(s).length):null),u=Ot("axes"),f=y(()=>l(s)&&l(c)?la(l(s),l(c),u.tX(),u.tY()):null),d=y(()=>`fill:transparent;stroke:${r()};stroke-width: ${a()}px; stroke-dasharray:${ol[u.scales().plot][o()-1]}`);var v=he(),h=K(v);{var g=m=>{var b=i1();b.__click=[s1,e];var w=O(b);le(()=>{pt(b,l(d)),q(w,"points",l(f))}),M(m,b)};Y(h,m=>{l(f)&&m(g)})}M(t,v),be()}dt(["click"]);var c1=(t,e)=>wn(t,"polyline",e.onclick),u1=Ae('<polyline class="line"></polyline>'),f1=Ae('<g class="series series-multiline"></g>');function Ii(t,e){pe(e,!0);let r=j(e,"lineColor",19,()=>zt.PRIMARY),o=j(e,"lineType",3,1),a=j(e,"lineWidth",3,1);const s=y(()=>qt(e.xValues,"Multilines")),c=y(()=>l(s)?or(e.yValues)?(l(s).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),u=Ot("axes"),f=y(()=>{if(!l(s)||!l(c))return null;const m=new Array(l(c).ncols);for(let b=0;b<m.length;b++)m[b]=la(l(s),l(c).getcolumn(b+1),u.tX(),u.tY());return m}),d=y(()=>`fill:transparent;stroke:${r()};stroke-width: ${a()}px; stroke-dasharray:${ol[u.scales().plot][o()-1]}`);var v=he(),h=K(v);{var g=m=>{var b=f1();b.__click=[c1,e],et(b,21,()=>l(f),nt,(w,p)=>{var _=u1();le(()=>q(_,"points",l(p))),M(w,_)}),le(()=>pt(b,l(d))),M(m,b)};Y(h,m=>{l(f)&&l(f).length>0&&m(g)})}M(t,v),be()}dt(["click"]);function da(t,e){pe(e,!0);let r=j(e,"show",3,!0),o=j(e,"position",3,"topleft"),a=j(e,"lineColor",19,()=>zt.LEGEND),s=j(e,"lineWidth",3,1),c=j(e,"faceColor",3,"#fff"),u=j(e,"fontSize",3,.85);function f(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function d(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let g=0;g<h.length;g++){const m=h[g];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const b=Ur(m.label),w=b.length===m.label?1:1.4;m.label=b,m.labelHeight=w,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(g+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:zt.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=jn.length||console.error('Legend: parameter "marker" for legend item '+(g+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.markerSize=m.point.markerSize?m.point.markerSize:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:zt.PRIMARY)}return h}const v=Ot("axes");we(()=>{const h=d(e.items),g=f(o());v.setGroupLegend(h&&g?{show:r(),position:o(),items:e.items,lineColor:a(),faceColor:c(),lineWidth:s(),fontSize:u()}:{show:!1,position:null,items:null})}),be()}function ji(t,e){pe(e,!0);let r=j(e,"show",3,!0),o=j(e,"labels",3,null),a=j(e,"labelColor",19,()=>zt.CLEGEND_LABELS),s=j(e,"fontSize",3,.85);const c=Ot("axes");we(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:o(),labelColor:a(),fontSize:s()})}),be()}const d1=t=>t;function Fi(t,{delay:e=0,duration:r=400,easing:o=d1}={}){const a=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:o,css:s=>`opacity: ${s*a}`}}var v1=H('<div><div class="modal svelte-q7wo60"><div class="header svelte-q7wo60"><button class="close-button svelte-q7wo60">✕</button></div> <div class="body svelte-q7wo60"><!></div></div></div>');function va(t,e){pe(e,!0);let r=j(e,"isDark",3,!1);function o(h){h.key==="Escape"&&e.closeModal()}var a=v1();fn("keydown",bo,o);let s;var c=O(a),u=O(c),f=O(u);f.__click=function(...h){var g;(g=e.closeModal)==null||g.apply(this,h)};var d=R(u,2),v=O(d);Er(v,()=>e.children),le(h=>s=gt(a,1,"drop svelte-q7wo60",null,s,h),[()=>({isdark:r()})]),xs(7,a,()=>Fi),M(t,a),be()}dt(["click"]);const h1=[1,1.1,.45,.4],Gr={cal:1,pv:2,test:2,new:2},Cr={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},Xl={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},al={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},qi="#808090",ha="#a0a0a0",Bi="#909090",qn="#909090",sl=8,m1=8,g1=8,p1=600;function Oi(t,e){return!t||!e||e<0||e>t.ncomp?"":`PC${e} (${(t.stat.expvar[e-1]*100).toFixed(1)}%)`}function b1(t,e){if(t.length===e.length)return t;const r=e.length,o=new t.constructor(r);for(let a in e)o[a]=t[e[a]];return o}function w1(t,e){let r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)o=Math.min(o,t[c]),r=Math.max(r,t[c]);let a=oa(void 0,[o,r],e-1,!0,!1,0).v;const s=a[1]-a[0];if(a[0]>o){const c=a[0]-s;a=[c<o?c:o,...a]}if(a[a.length-1]<r){const c=a[a.length-1]+s;a=[...a,c>r?c:r]}return a}function _1(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=Ul(e);return t.reduce((a,s,c)=>(a[s]=r[c],a),{})}function Vi(t,e,r){const o=e.length,a=new Array(t.length),s=e[1]-e[0];for(let c=0;c<t.length;c++)for(let u=0;u<o-1;u++){const f=t[c]>=e[u],d=u===o-2?t[c]<e[u+1]+s:t[c]<e[u+1];if(f&&d){a[c]=r[u];break}}return a}function Di(t,e,r,o,a="cal",s){if(!e)return null;let c,u,f,d,v,h,g=!0;if((r==="groups"||r==="classes")&&e.classNames){const m=_1(e.classNames);u=Object.keys(m).map(b=>m[b]),c=e.classNames,d=e.classes.map(b=>m[b]),f=new Array(c.length+1).map((b,w)=>w-.5),v=null}else if(r==="variable"){const m=b1(t.values.getcolref(o),e.objindices);v=t.varlabels[o-1],v.length>30&&(v=v.substring(0,29)+"..."),f=w1(m,10),u=Ul(f.length-1),d=Vi(m,f,u)}else c=null,f=null,u=null,d=Array(e.nrows).fill(Cr[a]);return{labels:c,map:u,breaks:f,colors:d,varname:v,filled:h,showBar:g,mainColor:Cr[a],faceColor:Xl[a],faceTColor:al[a]}}function y1(t,e,r=.95){const a=2*Math.PI/99,[s,c,u]=t,f=Math.sqrt((s+u)**2-4*(s*u-c*c));let d=.5*(s+u-f),v=.5*(s+u+f);if(d<v){let T=d;d=v,v=T}const h=jl(r,2),g=Math.sqrt(h*d),m=Math.sqrt(h*v);let b;if(Math.abs(c)<1e-7)b=0;else{let T=-c/(s-d),P=1;const N=Math.sqrt(T*T+P*P);T=T/N,P=P/N,b=Math.atan2(P,T),b<0&&(b=b+2*Math.PI)}const w=Math.cos(b),p=Math.sin(b),_=Ye.zeros(100),k=Ye.zeros(100);let A=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY;for(let T=0;T<100;T++){const P=T*a,N=g*Math.cos(P),B=m*Math.sin(P),F=N*w-B*p+e[0],L=N*p+B*w+e[1];_.v[T]=F,k.v[T]=L,A=Math.min(A,F),E=Math.max(E,F),C=Math.min(C,L),S=Math.max(S,L)}return[_,k,A,E,C,S]}function x1(t,e,r,o,a,s){if(!t||!e||!r||!o||!a)return null;const c=t.length,u=o.length,f=new Array(u).fill(0),d=new Array(u*2).fill(0);for(let p=0;p<c;p++){const _=o.indexOf(r[p]);f[_]+=1,d[_*2]+=t.v[p],d[_*2+1]+=e.v[p]}for(let p=0;p<u;p++)d[p*2]=d[p*2]/f[p],d[p*2+1]=d[p*2+1]/f[p];const v=new Array(u*3).fill(0);for(let p=0;p<c;p++){const _=o.indexOf(r[p]),k=t.v[p]-d[_*2],A=e.v[p]-d[_*2+1];v[_*3]+=k*k,v[_*3+1]+=k*A,v[_*3+2]+=A*A}let h=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;const w=Array(u);for(let p=0;p<u;p++){const[_,k,A,E,C,S]=y1([v[p*3]/(f[p]-1),v[p*3+1]/(f[p]-1),v[p*3+2]/(f[p]-1)],[d[p*2],d[p*2+1]],s);w[p]={x:_,y:k,c:a[p]},h=Math.min(h,A),g=Math.max(g,E),m=Math.min(m,C),b=Math.max(b,S)}return{ellipses:w,xRange:[h,g],yRange:[m,b]}}function Kl(t,e,r,o){if(!t||!e)return null;const a=t.length;let s=Ye.zeros(a),c=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(o==="log")for(let f=0;f<a;f++){const d=Math.log(1+t[f]/r);s.v[f]=d,c=Math.max(c,d),u=Math.min(u,d)}else for(let f=0;f<a;f++){const d=t[f]/r;s.v[f]=d,c=Math.max(c,d),u=Math.min(u,d)}return{values:s,min:u,max:c}}function Yi(t,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[t]+", "+(e==="log"?"log(1 + "+t+"/"+t+"0)":t+"/"+t+"0")}function Wi(t,e,r,o){const s=e+r,u=jl(t,s)/r,f=-e/r,d=-u/f,v=Ye.seq(0,d*1,d/100),h=v.apply(g=>g*f+u);return{x:o==="log"?v.apply(g=>Math.log(1+g)):v,y:o==="log"?h.apply(g=>Math.log(1+g)):h}}function ma(t,e=al){return t?t.map(r=>({id:r,label:r,point:{marker:Gr[r],faceColor:e[r],lineColor:Cr[r],markerSize:Gr[r]===1?.85:.65,lineWidth:1.5}})):null}var k1=H("<!> <!> <!> <!>",1);function yn(t,e){let r=j(e,"whole",3,!1),o=hn(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Ri(t,qr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return h1},get pngWidth(){return m1},get pngHeight(){return g1},get pngRes(){return p1}},()=>o,{children:(a,s)=>{var c=k1(),u=K(c);Er(u,()=>e.children);var f=R(u,2);ia(f,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var d=R(f,2);ca(d,{showGrid:!0,get label(){return e.yLabel}});var v=R(d,2);ua(v,{}),M(a,c)},$$slots:{default:!0}}))}function E1(t,e){if(t.target.tagName!=="rect"){I(e,-1);return}const r=Array.from(t.target.parentNode.children).indexOf(t.target);if(r<0){I(e,-1);return}l(e)!==r&&I(e,r,!0)}var A1=H("<!> <!> <!>",1),C1=H("<!> <!> <!> <!> <!>",1),S1=H("<div><!></div>"),M1=H('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><div><!></div> <!></div></div>');function Ui(t,e){pe(e,!0);let r=j(e,"outliers",19,()=>[]),o=j(e,"model_getter",3,It),a=j(e,"res_getter",3,br),s=ee("residual"),c=ee(-1);const u=y(()=>e.res?Object.keys(e.res):null);let f=ee(qe(l(u)?l(u)[0]:null));const d=y(()=>{if(!e.model)return null;const Q=e.model.nresp?e.model.nresp:0,J=lt(e.model.varvalues.filter((Ce,ve)=>ve>=Q)),te=J.length,oe=(J.v[1]-J.v[0])/2,$=(J.v[te-1]-J.v[te-2])/2,se=[J.v[0],J.v[te-1]],Te=[se[0]-oe,se[1]+$],Ie=(se[1]-se[0])/te;return{values:J,lim:Te,width:Ie,hwidth:Ie*.5}}),v=y(()=>l(d)?l(d).values.apply(Q=>Q-l(d).hwidth):null),h=y(()=>l(f)?e.res[l(f)]:null),g=y(()=>l(h)?new Pt(a()(l(h),"T"),l(h).nrows,l(h).ncomp):null),m=y(()=>l(h)?new Pt(a()(l(h),"E"),l(h).nrows,l(h).npred).t():null),b=y(()=>e.model?new Pt(o()(e.model,"P"),e.model.npred?e.model.npred:e.model.ncols,e.model.ncomp):null),w=y(()=>e.ncomp?Mt.seq(1,e.ncomp):null),p=y(()=>e.ncomp<e.model.ncomp?Mt.seq(e.ncomp+1,e.model.ncomp):null),_=y(()=>l(g)&&l(w)?l(g).subset(null,l(w)):null),k=y(()=>l(g)&&l(w)?l(b).subset(null,l(w)):null),A=y(()=>l(g)&&l(p)?l(g).subset(null,l(p)):null),E=y(()=>l(g)&&l(p)?l(b).subset(null,l(p)):null),C=y(()=>l(_)&&l(k)?Us(l(k),l(_)):null),S=y(()=>l(A)&&l(E)?Us(l(E),l(A)).add(l(m)):l(m)),T=y(()=>l(C)&&l(S)?l(C).add(l(S)):null);let P=y(()=>l(C)?l(C).getcolumn(e.selected+1):null),N=y(()=>l(S)?l(S).getcolumn(e.selected+1):null),B=y(()=>l(T)?l(T).getcolumn(e.selected+1):null),F=y(()=>{if(!l(P)||!l(N)||!l(B))return null;const Q=l(s)==="explained"?{all:l(C),sel:l(P),label:"Explained part, TP^T"}:l(s)==="residual"?{all:l(S),sel:l(N),label:"Residuals, E"}:{all:l(T),sel:l(B),label:"Preprocessed data, X"},J=Br(Q.all.v),te=J[1]-J[0],oe=[J[0]-te/50,J[1]+te/12],$=Ye.fill(J[1],Q.sel.length);return Q.lim=oe,Q.top=$,Q.height=te,Q});const L=y(()=>l(d)&&l(c)>=0?l(d).values.v[l(c)]:null),D=y(()=>l(F)&&l(c)>=0?l(F).sel.v[l(c)]:null),W=y(()=>e.model&&l(c)>=0?e.model.varlabels[l(c)]:null),z=y(()=>l(h)&&e.selected>=0?`Object ${l(h).objlabels[e.selected].replace("_","-")}`:null),G=y(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var ne=he(),V=K(ne);{var X=Q=>{va(Q,{get closeModal(){return e.closeModal},children:(J,te)=>{var oe=M1(),$=O(oe);$.__click=[E1,c];var se=O($);yn(se,{get title(){return l(z)},get yLabel(){return l(F).label},get xLabel(){return l(G)},get limY(){return l(F).lim},get limX(){return l(d).lim},fileName:"plot-contributions",children:(je,de)=>{var fe=C1(),re=K(fe);Ii(re,{get xValues(){return l(d).values},get yValues(){return l(F).all},lineColor:"#e0e0e0"});var ce=R(re,2);{var ae=Ne=>{var We=he(),Ue=K(We);et(Ue,17,r,nt,(Be,Fe)=>{{let xe=y(()=>l(F).all.getcolumn(l(Fe)+1));Hr(Be,{get xValues(){return l(d).values},get yValues(){return l(xe)},lineColor:"#ffdd88"})}}),M(Ne,We)};Y(ce,Ne=>{r().length>0&&Ne(ae)})}var ge=R(ce,2);Hr(ge,{get xValues(){return l(d).values},get yValues(){return l(F).sel},lineColor:"crimson"});var ye=R(ge,2);Gl(ye,{get left(){return l(v)},get top(){return l(F).top},get height(){return l(F).height},get width(){return l(d).width},faceColor:"transparent",borderColor:"transparent"});var ue=R(ye,2);{var Le=Ne=>{var We=A1(),Ue=K(We);{let xe=y(()=>[l(L)]),Re=y(()=>[l(F).top.v[0]]),ze=y(()=>[l(W)]);Fn(Ue,{get xValues(){return l(xe)},get yValues(){return l(Re)},get labels(){return l(ze)},pos:3,textSize:.85})}var Be=R(Ue,2);{let xe=y(()=>[l(L)]),Re=y(()=>[l(D)]);fa(Be,{get xValues(){return l(xe)},get yValues(){return l(Re)},faceColor:"crimson",lineColor:"crimson"})}var Fe=R(Be,2);{let xe=y(()=>[l(v).v[l(c)]]),Re=y(()=>[l(F).top.v[l(c)]]);Gl(Fe,{get left(){return l(xe)},get top(){return l(Re)},get height(){return l(F).height},get width(){return l(d).width},faceColor:"#ff000015"})}M(Ne,We)};Y(ue,Ne=>{l(c)>=0&&Ne(Le)})}M(je,fe)},$$slots:{default:!0}});var Te=R($,4),Ie=O(Te),Ce=O(Ie);ie(Ce,{label:"Show",children:(je,de)=>{rt(je,{id:"type",options:["full","explained","residual"],get value(){return l(s)},set value(fe){I(s,fe,!0)}})},$$slots:{default:!0}});var ve=R(Ie,2);{var _e=je=>{var de=S1(),fe=O(de);ie(fe,{label:"For",children:(re,ce)=>{rt(re,{id:"type",get options(){return l(u)},get value(){return l(f)},set value(ae){I(f,ae,!0)}})},$$slots:{default:!0}}),M(je,de)};Y(ve,je=>{l(u).length>1&&je(_e)})}M(J,oe)},$$slots:{default:!0}})};Y(V,Q=>{l(d)&&l(F)&&Q(X)})}M(t,ne),be()}dt(["click"]);function T1(t,e){let r=0,o=0;t.nresp>0&&(r=new Ye(t.values.v.slice(0,t.values.nrows)),o=1);const a=new Pt(t.values.v.slice(o*t.values.nrows),t.values.nrows,t.values.ncols-o).t(),s=a.ncols<e?1:Math.round(a.ncols/e),c=Mt.seq(1,a.ncols,s),u=a.subset(null,c),f=r?r.subset(c):null,d=t.classes?t.classes.filter((v,h)=>c.v.includes(h)):null;return{classNames:t.classNames,classes:d,resp:f,values:u,varvalues:t.varvalues.filter((v,h)=>h>=o),varindices:t.varindices.filter((v,h)=>h>=o),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function ga(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function N1(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}var P1=H('<span class="info-details svelte-1l1cvmx"> <span class="svelte-1l1cvmx"><!></span></span>');function pa(t,e){pe(e,!0);var r=he(),o=K(r);{var a=c=>{var u=P1(),f=O(u),d=R(f),v=O(d);St(v,()=>_f(e.prepmodel)),le(()=>ke(f,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),M(c,u)},s=c=>{var u=yu("skipped");M(c,u)};Y(o,c=>{e.prepmodel.ml?c(a):c(s,!1)})}M(t,r),be()}var z1=H('<span>file:</span> <span class="file-name svelte-1dxrrpt"> </span><br/>',1),L1=H('<p class="info-text svelte-1dxrrpt"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function R1(t,e){pe(e,!0);var r=he(),o=K(r);{var a=s=>{ie(s,{name:"info",children:(c,u)=>{var f=L1(),d=K(f),v=R(O(d),3);{var h=p=>{var _=z1(),k=R(K(_),2),A=O(k);le(()=>{q(k,"title",e.model.fileName),ke(A,e.model.fileName)}),M(p,_)};Y(v,p=>{e.model.fileName&&p(h)})}var g=R(v),m=R(g,3);pa(m,{get prepmodel(){return e.model}});var b=R(d,2);{var w=p=>{wr(p,{get onclick(){return e.reset}})};Y(b,p=>{e.reset&&p(w)})}le(()=>ke(g,` ${e.model.npred??""} `)),M(c,f)},$$slots:{default:!0}})};Y(o,s=>{e.model&&s(a)})}M(t,r),be()}var I1=H("<!> <!>",1),j1=H("<p><!></p>"),F1=H("<!> <!>",1);function q1(t,e){pe(e,!0);let r=j(e,"model",15),o=ee(""),a=ee("neutral"),s=ee("");function c(p){try{const _=JSON.parse(p,Ko);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),!Object.keys(_).includes("class")||_.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");_.fileName=l(d),r(_),I(a,"success"),I(s,"")}catch(_){console.log(_),r(null),I(a,"error"),I(s,_,!0)}}function u(p){const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsText(l(o))}function f(){I(o,""),r(null),I(a,"neutral"),I(s,"")}we(()=>{l(o)===null?(r(null),I(a,"neutral"),I(s,"")):(I(a,"neutral"),I(s,""))}),we(()=>{(r()===null||r()===0)&&I(o,"")});let d=y(()=>l(o)?l(o).name.replace(/\.[^/.]+$/,""):"");var v=F1(),h=K(v);{var g=p=>{var _=I1(),k=K(_);Rn(k,()=>l(o),C=>{ie(C,{name:"file-selector",children:(S,T)=>{Yl(S,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(o)},set file(P){I(o,P,!0)}})},$$slots:{default:!0}})});var A=R(k,2);{var E=C=>{ie(C,{name:"load-button",label:" ",children:(S,T)=>{ht(S,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(A,C=>{l(o)&&C(E)})}M(p,_)},m=p=>{R1(p,{get model(){return r()},reset:f})};Y(h,p=>{r()?p(m,!1):p(g)})}var b=R(h,2);{var w=p=>{ie(p,{name:"error",status:"error",children:(_,k)=>{var A=j1(),E=O(A);St(E,()=>l(s)),M(_,A)},$$slots:{default:!0}})};Y(b,p=>{(l(a)==="error"||l(s))&&p(w)})}M(t,v),be()}var B1=H('<p class="title"> </p>'),O1=H("<!>&nbsp;",1),V1=H("<!> <!>",1),D1=H('<div class="method-open svelte-2gffce"><!> <!> <!></div>'),Y1=(t,e)=>e.open(e.pos),W1=H('<p> <span title="Edit" class="svelte-2gffce"> </span></p> <!> <!> <!>',1);function Bn(t,e){pe(e,!0);let r=j(e,"cancel",3,null);var o=he(),a=K(o);{var s=u=>{var f=D1(),d=O(f);ie(d,{children:(g,m)=>{var b=B1(),w=O(b);le(()=>ke(w,e.title)),M(g,b)},$$slots:{default:!0}});var v=R(d,2);Er(v,()=>e.children);var h=R(v,2);ie(h,{label:" ",children:(g,m)=>{var b=V1(),w=K(b);{var p=k=>{var A=O1(),E=K(A);ht(E,{text:"Cancel",get onclick(){return r()}}),M(k,A)};Y(w,k=>{r()&&k(p)})}var _=R(w,2);ht(_,{text:"Save",get onclick(){return e.apply}}),M(g,b)},$$slots:{default:!0}}),xs(3,f,()=>Fi,()=>({duration:10})),M(u,f)},c=u=>{ie(u,{children:(f,d)=>{var v=W1(),h=K(v),g=O(h),m=R(g);m.__click=[Y1,e];var b=O(m),w=R(h,2);qf(w,{onclick:()=>e.moveUp(e.pos)});var p=R(w,2);Bf(p,{onclick:()=>e.moveDown(e.pos)});var _=R(p,2);wr(_,{onclick:()=>e.remove(e.pos)}),le(()=>{ke(g,`${e.title??""} `),ke(b,e.settings)}),M(f,v)},$$slots:{default:!0}})};Y(a,u=>{e.isOpen?u(s):u(c,!1)})}M(t,o),be()}dt(["click"]);var U1=H("<!> <!>",1);function H1(t,e){pe(e,!0);let r=j(e,"params",31,()=>qe([0,0])),o=j(e,"varind",15),a=j(e,"settings",15),s=j(e,"nvars",3,0),c=hn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const u={snv:0,area:1,length:2,var:3},f=Object.keys(u);let d=ee(qe(f[r()[0]])),v=ee(r()[1]+1);const h="Normalization";we(()=>{a(l(d)+(l(d)==="var"?" #"+l(v):""))}),we(()=>{l(d)==="var"?o(o()[0]=r()[1]>0?r()[1]:1,!0):o(o()[0]=-1,!0)}),we(()=>{l(d)==="var"&&e.isOpen?o(o()[0]=r()[1],!0):o(o()[0]=-1,!0)}),we(()=>{l(d)&&r(r()[0]=u[l(d)],!0)}),we(()=>{l(v)&&r(r()[1]=l(v)-1,!0)}),Bn(t,qr({id:"norm",title:h,get settings(){return a()},get isOpen(){return e.isOpen}},()=>c,{children:(g,m)=>{var b=U1(),w=K(b);ie(w,{label:"Type",children:(k,A)=>{rt(k,{get options(){return f},get value(){return l(d)},set value(E){I(d,E,!0)}})},$$slots:{default:!0}});var p=R(w,2);{var _=k=>{ie(k,{label:"Variable index",children:(A,E)=>{Xt(A,{min:1,get max(){return s()},step:1,get value(){return l(v)},set value(C){I(v,C,!0)}})},$$slots:{default:!0}})};Y(p,k=>{l(d)==="var"&&k(_)})}M(g,b)},$$slots:{default:!0}})),be()}var G1=H("<!> <!> <!>",1);function X1(t,e){pe(e,!0);let r=j(e,"params",31,()=>qe([3,1,0])),o=j(e,"settings",15),a=hn(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const s=y(()=>{if(!e.nvars)return 3;const d=Math.round(e.nvars*.25);return d>39?39:d%2<1?d+1:d}),c=y(()=>r()[1]<2?[0,1]:[0,1,2]),u=y(()=>r()[0]<5?[1,2]:[1,2,3]);we(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),we(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),we(()=>{o(r()[0]+", "+r()[1]+", "+r()[2])}),Bn(t,qr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return o()}},()=>a,{children:(d,v)=>{var h=G1(),g=K(h);ie(g,{label:"Width",children:(w,p)=>{Xt(w,{min:3,get max(){return l(s)},step:2,get value(){return r()[0]},set value(_){r(r()[0]=_,!0)}})},$$slots:{default:!0}});var m=R(g,2);ie(m,{label:"Polynomial",children:(w,p)=>{rt(w,{get options(){return l(u)},get value(){return r()[1]},set value(_){r(r()[1]=_,!0)}})},$$slots:{default:!0}});var b=R(m,2);ie(b,{label:"Derivative",children:(w,p)=>{rt(w,{get options(){return l(c)},get value(){return r()[2]},set value(_){r(r()[2]=_,!0)}})},$$slots:{default:!0}}),M(d,h)},$$slots:{default:!0}})),be()}var K1=H("<!> <!>",1);function J1(t,e){pe(e,!0);let r=j(e,"params",31,()=>qe([1,0]));j(e,"varind",27,()=>-1);let o=j(e,"settings",15);j(e,"nvars",3,0);let a=hn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const s={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},u=Object.keys(s),f=Object.keys(c);let d=ee(qe(u[r()[0]])),v=ee(qe(f[r()[1]]));const h="Scaling";we(()=>{o(l(d)+"/"+l(v))}),we(()=>{l(d)&&r(r()[0]=s[l(d)],!0)}),we(()=>{l(v)&&r(r()[1]=c[l(v)],!0)}),Bn(t,qr({id:"scale",title:h,get settings(){return o()}},()=>a,{children:(g,m)=>{var b=K1(),w=K(b);ie(w,{label:"Center",children:(_,k)=>{rt(_,{get options(){return u},get value(){return l(d)},set value(A){I(d,A,!0)}})},$$slots:{default:!0}});var p=R(w,2);ie(p,{label:"Scale",children:(_,k)=>{rt(_,{get options(){return f},get value(){return l(v)},set value(A){I(v,A,!0)}})},$$slots:{default:!0}}),M(g,b)},$$slots:{default:!0}})),be()}var Q1=H("<!> <!> <!>",1),Z1=H("<!> <!> <!>",1);function $1(t,e){pe(e,!0);let r=j(e,"params",31,()=>qe([0,1,.1]));j(e,"varind",27,()=>-1);let o=j(e,"settings",15,"");j(e,"nvars",3,0);let a=hn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const s="Baseline correction",c={emsc:0,als:1},u=Object.keys(c);function f(b){const w=Math.ceil(Math.log10(b));return Math.pow(10,w)}let d=ee(qe(u[r()[0]])),v=ee(qe(r()[2]>0?f(r()[2]).toString():"0.1")),h=y(()=>parseFloat(l(v))),g=y(()=>l(h)/10),m=y(()=>Math.ceil(-Math.log10(l(h)))+1);we(()=>{if(l(d)!=="als")return;const b=parseFloat(l(v));(r()[2]<l(g)||r()[2]>b-l(g))&&r(r()[2]=l(g),!0)}),we(()=>{o(l(d)+" ("+(l(d)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),we(()=>{l(d)&&r(r()[0]=c[l(d)],!0)}),Bn(t,qr({id:"scale",title:s,get settings(){return o()}},()=>a,{children:(b,w)=>{var p=Z1(),_=K(p);ie(_,{label:"Type",children:(S,T)=>{rt(S,{get options(){return u},get value(){return l(d)},set value(P){I(d,P,!0)}})},$$slots:{default:!0}});var k=R(_,2);{var A=S=>{var T=Q1(),P=K(T);ie(P,{label:"Lambda",children:(F,L)=>{ll(F,{min:1,max:7,step:.1,get value(){return r()[1]},set value(D){r(r()[1]=D,!0)}})},$$slots:{default:!0}});var N=R(P,2);ie(N,{label:"Penalty range",children:(F,L)=>{rt(F,{options:["1","0.1","0.01"],get value(){return l(v)},set value(D){I(v,D,!0)}})},$$slots:{default:!0}});var B=R(N,2);ie(B,{label:"Penalty",children:(F,L)=>{{let D=y(()=>l(h)-l(g));ll(F,{get min(){return l(g)},get max(){return l(D)},get step(){return l(g)},get decNum(){return l(m)},get value(){return r()[2]},set value(W){r(r()[2]=W,!0)}})}},$$slots:{default:!0}}),M(S,T)};Y(k,S=>{l(d)==="als"&&S(A)})}var E=R(k,2);{var C=S=>{ie(S,{label:"Polynomial",children:(T,P)=>{Xt(T,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(N){r(r()[1]=N,!0)}})},$$slots:{default:!0}})};Y(E,S=>{l(d)==="emsc"&&S(C)})}M(b,p)},$$slots:{default:!0}})),be()}var e0=H("<!> <!>",1);function t0(t,e){pe(e,!0);let r=j(e,"params",15),o=j(e,"varind",15),a=j(e,"settings",15),s=hn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let u=ee(!1);const f=y(()=>e.nvars?Math.round(e.nvars*.1):1);we(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-l(f))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+l(f))&&r(r()[1]=e.right,!0),o(o()[1]=r()[0],!0),o(o()[2]=r()[1],!0),I(u,!0)):(o(o()[1]=-1,!0),o(o()[2]=-1,!0),I(u,!1))}),we(()=>{a("left: "+r()[0]+" right: "+r()[1])}),Bn(t,qr({id:"norm",title:c,get settings(){return a()},get isOpen(){return e.isOpen}},()=>s,{children:(d,v)=>{var h=he(),g=K(h);{var m=b=>{var w=e0(),p=K(w);ie(p,{label:"Left",children:(k,A)=>{{let E=y(()=>e.right-l(f));ll(k,{get min(){return e.left},get max(){return l(E)},step:1,decNum:0,get value(){return r()[0]},set value(C){r(r()[0]=C,!0)}})}},$$slots:{default:!0}});var _=R(p,2);ie(_,{label:"Right",children:(k,A)=>{{let E=y(()=>e.left+l(f));ll(k,{get min(){return l(E)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(C){r(r()[1]=C,!0)}})}},$$slots:{default:!0}}),M(b,w)};Y(g,b=>{l(u)&&b(m)})}M(d,h)},$$slots:{default:!0}})),be()}var r0=H("<!> <!>",1);function n0(t,e){pe(e,!0);let r=j(e,"params",31,()=>qe([3,5]));j(e,"varind",27,()=>-1);let o=j(e,"settings",15);j(e,"nvars",3,0);let a=hn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const s="Spike removal";we(()=>{o(r()[0]+"/"+r()[1])}),Bn(t,qr({id:"scale",title:s,get settings(){return o()}},()=>a,{children:(c,u)=>{var f=r0(),d=K(f);ie(d,{label:"Window",children:(h,g)=>{Xt(h,{min:3,max:15,step:2,get value(){return r()[0]},set value(m){r(r()[0]=m,!0)}})},$$slots:{default:!0}});var v=R(d,2);ie(v,{label:"Threshold",children:(h,g)=>{Xt(h,{min:3,max:50,get value(){return r()[1]},set value(m){r(r()[1]=m,!0)}})},$$slots:{default:!0}}),M(c,f)},$$slots:{default:!0}})),be()}var l0=H("<h2>Selected methods</h2> <!>",1),o0=H("<p>No methods selected</p>"),a0=H("<p> </p>"),s0=H("<h2>Available methods</h2>"),i0=H("<p>Maximum number of methods is selected.</p>"),c0=H("<p> </p> <!>",1),u0=H('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-15cx0gr"><!> <!></div>',1);function f0(t,e){pe(e,!0);let r=j(e,"prepobj",31,()=>qe([])),o=j(e,"meta",15),a=j(e,"varind",31,()=>-1),s=j(e,"rawdataShort",15),c=j(e,"prepdataShort",15),u=j(e,"prepmodel",3,null),f=j(e,"reset",3,null),d=j(e,"finalize",3,null);const v=30,h=8,g={savgol:X1,norm:H1,scale:J1,baseline:$1,trim:t0,spikes:n0};let m=ee("neutral"),b=ee(""),w=ee(void 0),p=ee(""),_=ee(qe([])),k=ee(!1),A=ee(qe([])),E=ee(qe([]));o(new Array(h).fill(""));const C=y(()=>e.rawdata.values.ncols-e.rawdata.nresp);let S=qe(e.rawdata.values.nrows<3?Object.keys(g).filter(re=>re!=="scale"):Object.keys(g));P(),r().length!==0&&T();async function T(){r().length!==0&&I(w,e.WASM().then(re=>{I(m,"applying");const ce=ei(re,s().values,0,r(),!0,[]),ae=Go(re,s().values,0,ce,!0);c(ga(s(),ae)),I(m,"success")}).catch(re=>{c(ga(s())),console.error(re),I(m,"error"),I(b,re,!0)}),!0)}function P(){const re=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(re),I(A,[],!0),I(E,[],!0);return}let ce=[],ae=[],ge=0,ye=re;for(let ue of r())ue.id==="trim"?(ce.push(ge),ae.push(ye),ue.params[0]<ge&&(ue.params[0]=ge),ue.params[1]>ye&&(ue.params[1]=ye),ge=ue.params[0]>ge?ue.params[0]:ge,ye=ue.params[1]>0&&ue.params[1]<ye?ue.params[1]:ye):(ce.push(ge),ae.push(ye));I(A,ce,!0),I(E,ae,!0),e.setLeft(ge),e.setRight(ye)}function N(re){const ce=Yr.find(ae=>ae.id===re);ce&&(l(A).push(e.left),l(E).push(e.right),r().push({id:ce.id,params:ce.mp}),I(k,!0),I(p,r().length-1))}function B(){r().length<1||(l(A).pop(),l(E).pop(),r().pop(),I(k,!1),I(p,-1))}function F(re){if(re<=0)return;const ce=r()[re],ae=r()[re-1];r(r()[re-1]=ce,!0),r(r()[re]=ae,!0),G()}function L(re){if(re<0||re===r().length-1)return;const ce=r()[re],ae=r()[re+1];r(r()[re+1]=ce,!0),r(r()[re]=ae,!0),G()}function D(re){re<0||re>=r().length||(r(r().filter((ce,ae)=>ae!==re)),G())}function W(re){I(p,re,!0)}function z(){I(p,null)}function G(){I(m,"neutral"),I(b,""),I(k,!1),I(p,null),u()&&f()(),P(),T(),a(a()[1]=-1,!0),a(a()[2]=-1,!0)}we(()=>{e.rawdata&&!s()&&s(T1(e.rawdata,v))}),we(()=>{s()&&!c()&&c(ga(s()))}),we(()=>{(!r()||r().length===0)&&(I(_,[],!0),c(null),I(A,[],!0),I(E,[],!0),I(p,""),o(new Array(h).fill("")))});var ne=u0(),V=K(ne);let X;var Q=O(V);ie(Q,{label:"",children:(re,ce)=>{var ae=l0(),ge=R(K(ae),2);{var ye=ue=>{oi(ue,{text:"edit",get onclick(){return f()}})};Y(ge,ue=>{u()&&f()&&ue(ye)})}M(re,ae)},$$slots:{default:!0}});var J=R(Q,2);{var te=re=>{ie(re,{label:"",children:(ce,ae)=>{var ge=o0();M(ce,ge)},$$slots:{default:!0}})},oe=re=>{var ce=he(),ae=K(ce);et(ae,17,r,nt,(ge,ye,ue)=>{var Le=he();const Ne=y(()=>g[l(ye).id]);var We=K(Le);{var Ue=Fe=>{var xe=he(),Re=K(xe);{let ze=y(()=>ue===l(p)),Kt=y(()=>l(k)?B:null);el(Re,()=>l(Ne),(Sr,Mr)=>{Mr(Sr,{get isOpen(){return l(ze)},get left(){return l(A)[ue]},get right(){return l(E)[ue]},pos:ue,get nvars(){return l(C)},moveUp:F,moveDown:L,apply:G,open:W,close:z,remove:D,get cancel(){return l(Kt)},get params(){return l(ye).params},set params(Ee){l(ye).params=Ee},get varind(){return a()},set varind(Ee){a(Ee)},get settings(){return o()[ue]},set settings(Ee){o(o()[ue]=Ee,!0)}})})}M(Fe,xe)},Be=Fe=>{var xe=he(),Re=K(xe);{let ze=y(()=>ue===l(p)),Kt=y(()=>l(k)?B:null);el(Re,()=>l(Ne),(Sr,Mr)=>{Mr(Sr,{pos:ue,get isOpen(){return l(ze)},get left(){return l(A)[ue]},get right(){return l(E)[ue]},get nvars(){return l(C)},moveUp:F,moveDown:L,apply:G,open:W,close:z,remove:D,get cancel(){return l(Kt)},get params(){return l(ye).params},set params(Ee){l(ye).params=Ee},get settings(){return o()[ue]},set settings(Ee){o(o()[ue]=Ee,!0)}})})}M(Fe,xe)};Y(We,Fe=>{l(ye).id==="norm"||l(ye).id==="trim"?Fe(Ue):Fe(Be,!1)})}M(ge,Le)}),M(re,ce)};Y(J,re=>{r().length===0?re(te):re(oe,!1)})}var $=R(J,2);{var se=re=>{ie(re,{status:"error",children:(ce,ae)=>{var ge=a0(),ye=O(ge);le(()=>ke(ye,l(b))),M(ce,ge)},$$slots:{default:!0}})};Y($,re=>{(l(m)==="error"||l(b))&&re(se)})}var Te=R(V,2),Ie=O(Te);{var Ce=re=>{ie(re,{label:" ",children:(ce,ae)=>{ht(ce,{get onclick(){return d()},text:"Finalize"})},$$slots:{default:!0}})};Y(Ie,re=>{!u()&&!l(p)&&r().length>0&&re(Ce)})}var ve=R(Te,2),_e=O(ve);ie(_e,{label:"",children:(re,ce)=>{var ae=s0();M(re,ae)},$$slots:{default:!0}});var je=R(_e,2);{var de=re=>{ie(re,{label:"",children:(ce,ae)=>{var ge=i0();M(ce,ge)},$$slots:{default:!0}})},fe=re=>{var ce=he(),ae=K(ce);et(ae,17,()=>S,nt,(ge,ye)=>{const ue=y(()=>Yr.find(Le=>Le.id===l(ye)));ie(ge,{children:(Le,Ne)=>{var We=c0(),Ue=K(We),Be=O(Ue),Fe=R(Ue,2);Ff(Fe,{onclick:()=>N(l(ue).id)}),le(()=>ke(Be,l(ue).title)),M(Le,We)},$$slots:{default:!0}})}),M(re,ce)};Y(je,re=>{r().length>=h?re(de):re(fe,!1)})}le(re=>X=gt(V,1,"selected-methods-list svelte-15cx0gr",null,X,re),[()=>({final:u()!==null&&u()!==void 0})]),M(t,ne),be()}var d0=H("<!> <!>",1),v0=H("<!> <!>",1),h0=H("<!> <!>",1),m0=H("<!> <!> <!> <!> <!> <!> <!> <!>",1),g0=H("<h2>Plot settings</h2>"),p0=H('<div class="plot-area svelte-x8qn01"><div class="plot svelte-x8qn01"><!></div></div> <div class="plot-controls-area svelte-x8qn01"><!> <!> <!> <!></div>',1),b0=H('<div class="plot-panel svelte-x8qn01"><!></div>');function w0(t,e){pe(e,!0);let r=ee(!0),o=ee("none"),a=ee(!1);const s=y(()=>(l(r)?"Preprocessed":"Raw")+" data (selected rows)"),c=y(()=>l(r)&&e.prepdata?e.prepdata:e.rawdata),u=y(()=>l(c)?l(c).varaxisLabel:"Variables"),f=y(()=>e.rawdata.varaxisUnits),d=y(()=>e.left>=0||e.right>0&&e.right<l(c).values.nrows),v=y(()=>e.left>=0?e.left+1:1),h=y(()=>e.right>0&&e.right<l(c).values.nrows?e.right:l(c).values.nrows),g=y(()=>l(r)&&l(c)&&l(d)?Mt.seq(l(v),l(h)):null),m=y(()=>l(g)?l(c).varvalues.filter((P,N)=>N>=l(v)-1&&N<l(h)):l(c).varvalues),b=y(()=>l(g)?l(c).values.subset(l(g),null):l(c).values),w=y(()=>l(b)?Ro(l(b).v):null),p=y(()=>l(w)?(l(w)[1]-l(w)[0])*.05:null),_=y(()=>l(w)?[l(w)[0],l(w)[1]+(l(o)!=="none")*l(p)]:[0,1]),k=y(()=>l(c)?Ro(l(c).varvalues,l(a)?.005:.1):[0,1]),A=y(()=>l(a)&&l(d)?[l(c).varvalues[l(v)-1],l(c).varvalues[l(h)-1]]:l(k)),E=y(()=>{if(!e.rawdata)return null;const P={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const N=Ul(e.rawdata.classNames.length);P.groups={colors:e.rawdata.classes.map(B=>N[e.rawdata.classNames.findIndex(F=>F===B)]),breaks:Wr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:N}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const N=Cs(e.rawdata.resp,8),B=Ul(N.length-1);P.response={colors:Vi(e.rawdata.resp.v,N.v,B),labels:null,breaks:N,map:B}}return P});we(()=>{(e.left<1||e.right<1||e.right>=e.left)&&I(a,!1)});var C=b0(),S=O(C);{var T=P=>{var N=p0(),B=K(N),F=O(B),L=O(F);Ri(L,{get title(){return l(s)},get limY(){return l(_)},get limX(){return l(A)},fileName:"plot-preprocessed",children:(Q,J)=>{var te=m0(),oe=K(te);{var $=ae=>{Ii(ae,{get xValues(){return l(m)},get yValues(){return l(b)}})},se=ae=>{var ge=he(),ye=K(ge);et(ye,17,()=>l(E)[l(o)].colors,nt,(ue,Le,Ne)=>{{let We=y(()=>l(b).getcolumn(Ne+1));Hr(ue,{get xValues(){return l(m)},get yValues(){return l(We)},get lineColor(){return l(Le)}})}}),M(ae,ge)};Y(oe,ae=>{l(o)==="none"?ae($):ae(se,!1)})}var Te=R(oe,2);{var Ie=ae=>{var ge=d0();const ye=y(()=>l(c).varvalues[e.varind[0]]);var ue=K(ge);{let Ne=y(()=>[l(ye),l(ye)]);Hr(ue,{get xValues(){return l(Ne)},get yValues(){return l(_)},lineColor:"#00000060"})}var Le=R(ue,2);{let Ne=y(()=>[l(ye)]),We=y(()=>[l(_)[1]-l(p)*(l(o)==="none"?1:2)]),Ue=y(()=>Ur(l(ye).toFixed(2)+" "+l(f)));Fn(Le,{get xValues(){return l(Ne)},get yValues(){return l(We)},get labels(){return l(Ue)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(ae,ge)};Y(Te,ae=>{e.varind&&e.varind[0]>0&&ae(Ie)})}var Ce=R(Te,2);{var ve=ae=>{var ge=v0();const ye=y(()=>l(c).varvalues[e.varind[1]]);var ue=K(ge);{let Ne=y(()=>[l(A)[0]]),We=y(()=>[l(c).varvalues[e.varind[1]]-l(A)[0]]),Ue=y(()=>[l(_)[1]]),Be=y(()=>[l(_)[1]-l(_)[0]]);Gl(ue,{get left(){return l(Ne)},get width(){return l(We)},get top(){return l(Ue)},get height(){return l(Be)},lineColor:"transparent",faceColor:"#00000040"})}var Le=R(ue,2);{let Ne=y(()=>[l(ye)]),We=y(()=>[l(_)[1]-l(p)*(l(o)==="none"?1:2)]),Ue=y(()=>Ur(l(ye).toFixed(2)+" "+l(f)));Fn(Le,{get xValues(){return l(Ne)},get yValues(){return l(We)},get labels(){return l(Ue)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(ae,ge)};Y(Ce,ae=>{e.varind&&e.varind[1]>0&&ae(ve)})}var _e=R(Ce,2);{var je=ae=>{var ge=h0();const ye=y(()=>l(c).varvalues[e.varind[2]-1]);var ue=K(ge);{let Ne=y(()=>[l(c).varvalues[e.varind[2]-1]]),We=y(()=>[l(A)[1]-l(c).varvalues[e.varind[2]-1]]),Ue=y(()=>[l(_)[1]]),Be=y(()=>[l(_)[1]-l(_)[0]]);Gl(ue,{get left(){return l(Ne)},get width(){return l(We)},get top(){return l(Ue)},get height(){return l(Be)},lineColor:"transparent",faceColor:"#00000040"})}var Le=R(ue,2);{let Ne=y(()=>[l(ye)]),We=y(()=>[l(_)[1]-l(p)*(l(o)==="none"?1:2)]),Ue=y(()=>Ur(l(ye).toFixed(2)+" "+l(f)));Fn(Le,{get xValues(){return l(Ne)},get yValues(){return l(We)},get labels(){return l(Ue)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(ae,ge)};Y(_e,ae=>{e.varind&&e.varind[2]<l(c).varvalues.length&&e.varind[2]>0&&ae(je)})}var de=R(_e,2);{let ae=y(()=>l(o)!=="none");ji(de,{get show(){return l(ae)},get labels(){return l(E)[l(o)].labels},get breaks(){return l(E)[l(o)].breaks},get colmap(){return l(E)[l(o)].map}})}var fe=R(de,2);ia(fe,{get label(){return l(u)},showGrid:!0});var re=R(fe,2);ca(re,{showGrid:!0});var ce=R(re,2);ua(ce,{}),M(Q,te)},$$slots:{default:!0}});var D=R(B,2),W=O(D);ie(W,{label:"",children:(Q,J)=>{var te=g0();M(Q,te)},$$slots:{default:!0}});var z=R(W,2);ie(z,{label:"Show",children:(Q,J)=>{Dt(Q,{options:["raw","preprocessed"],get value(){return l(r)},set value(te){I(r,te,!0)}})},$$slots:{default:!0}});var G=R(z,2);{var ne=Q=>{ie(Q,{label:"Color by",children:(J,te)=>{{let oe=y(()=>Object.keys(l(E)));rt(J,{get options(){return l(oe)},get value(){return l(o)},set value($){I(o,$,!0)}})}},$$slots:{default:!0}})};Y(G,Q=>{Object.keys(l(E)).length>1&&Q(ne)})}var V=R(G,2);{var X=Q=>{ie(Q,{label:"Zoom (x-axis)",children:(J,te)=>{Dt(J,{options:["off","on"],get value(){return l(a)},set value(oe){I(a,oe,!0)}})},$$slots:{default:!0}})};Y(V,Q=>{e.left>0&&e.right>e.left&&Q(X)})}M(P,N)};Y(S,P=>{l(m)&&l(b)&&P(T)})}M(t,C),be()}var _0=H('<div class="widget-container svelte-1soqt9v"><div class="app-controls svelte-1soqt9v"><div class="prep-creator svelte-1soqt9v"><!></div></div> <div class="app-content svelte-1soqt9v"><!></div></div>');function y0(t,e){pe(e,!0);let r=j(e,"left",15),o=j(e,"right",15),a=j(e,"prepobj",15),s=j(e,"meta",15),c=j(e,"finalize",3,null),u=ee(qe([-1,0,0])),f=ee(null),d=ee(null);function v(A){const E=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&A>=0&&A<E&&A<o()&&r(A)}function h(A){const E=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&A<=E&&A>r()&&o(A)}var g=_0(),m=O(g),b=O(m),w=O(b);f0(w,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return r()},get right(){return o()},setLeft:v,",":!0,setRight:h,get finalize(){return c()},get varind(){return l(u)},set varind(A){I(u,A,!0)},get prepobj(){return a()},set prepobj(A){a(A)},get rawdataShort(){return l(f)},set rawdataShort(A){I(f,A,!0)},get prepdataShort(){return l(d)},set prepdataShort(A){I(d,A,!0)},get meta(){return s()},set meta(A){s(A)}});var p=R(m,2),_=O(p);{var k=A=>{w0(A,{get rawdata(){return l(f)},get prepdata(){return l(d)},get left(){return r()},get right(){return o()},get varind(){return l(u)}})};Y(_,A=>{l(f)&&A(k)})}M(t,g),be()}var x0=H('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),k0=H("<!> <!> <!>",1),E0=H('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),A0=H("<!> <!> <!>",1),C0=H("<p><strong>Preprocessing model</strong></p>"),S0=H("<!> <!>",1),M0=H("<p> </p>"),T0=H('<div class="prep-widget"><!></div> <!> <!>',1);function N0(t,e){pe(e,!0);let r=j(e,"prepType",15),o=j(e,"prepobj",15),a=j(e,"prepdata",15),s=j(e,"prepmodel",15),c=j(e,"prepmeta",15),u=ee(!1),f=ee(0),d=ee(qe(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),v=ee("neutral"),h=ee(""),g=ee(void 0);async function m(L,D,W){!D||!L||D.length===0||I(g,e.WASM().then(z=>{I(v,"applying");const G=ei(z,L.values,L.nresp,D,!1,W);G.info=c(),s(G)}).catch(z=>{s(null),console.error(z),I(v,"error"),I(h,z,!0)}),!0)}async function b(L,D){if(!D||typeof D!="object"){a(null);return}if(Object.keys(D).length===0){a(L);return}I(g,e.WASM().then(W=>{I(v,"applying");const z=Go(W,L.values,L.nresp,D,!1,!1),G=N1(Yc(L),z);a(yf(G,D))}).catch(W=>{a(null),console.error(W),I(v,"error"),I(h,W,!0)}),!0)}function w(){r(null),a(null),s(null),o([]),setLeft(0),setRight(e.rawdata.values.ncols-e.rawdata.nresp)}function p(){o()&&o().length>0?m(e.rawdata,o(),e.outliers):(r(null),s(null)),I(u,!1)}function _(){r("create"),a(null),s(null),I(u,!0)}function k(){r("skip"),s({})}we(()=>{s(),e.rawdata&&b(e.rawdata,s())}),we(()=>{r()==="create"&&o()&&!s()&&m(e.rawdata,o(),e.outliers)}),we(()=>{r()==="skip"&&a()===null&&(s({}),o([]),a(e.rawdata))});var A=T0(),E=K(A),C=O(E);{var S=L=>{ie(L,{name:"info",children:(D,W)=>{var z=k0(),G=K(z);{var ne=J=>{var te=x0(),oe=R(O(te),2);pa(oe,{get prepmodel(){return s()}}),M(J,te)};Y(G,J=>{l(u)||J(ne)})}var V=R(G,2);{var X=J=>{oi(J,{onclick:_})};Y(V,J=>{r()==="create"&&J(X)})}var Q=R(V,2);wr(Q,{onclick:w}),M(D,z)},$$slots:{default:!0}})},T=L=>{var D=he(),W=K(D);{var z=ne=>{ie(ne,{name:"prep-info",children:(V,X)=>{var Q=E0(),J=R(K(Q),2),te=O(J);wr(te,{onclick:w}),M(V,Q)},$$slots:{default:!0}})},G=ne=>{var V=he(),X=K(V);{var Q=te=>{ie(te,{label:"Preprocessing",name:"prep-container",children:(oe,$)=>{var se=A0(),Te=K(se);ht(Te,{text:"Skip",onclick:k});var Ie=R(Te,2);ht(Ie,{text:"Load",onclick:()=>r("file")});var Ce=R(Ie,2);ht(Ce,{text:"Create",onclick:_}),M(oe,se)},$$slots:{default:!0}})},J=te=>{var oe=he(),$=K(oe);{var se=Te=>{var Ie=S0(),Ce=K(Ie);ie(Ce,{children:(_e,je)=>{var de=C0();M(_e,de)},$$slots:{default:!0}});var ve=R(Ce,2);q1(ve,{get model(){return s()},set model(_e){s(_e)},get prepobj(){return o()},set prepobj(_e){o(_e)},get left(){return l(f)},set left(_e){I(f,_e,!0)},get right(){return l(d)},set right(_e){I(d,_e,!0)}}),M(Te,Ie)};Y($,Te=>{r()==="file"&&Te(se)},!0)}M(te,oe)};Y(X,te=>{r()?te(J,!1):te(Q)},!0)}M(ne,V)};Y(W,ne=>{r()==="skip"?ne(z):ne(G,!1)},!0)}M(L,D)};Y(C,L=>{s()&&a()&&s().ml?L(S):L(T,!1)})}var P=R(E,2);{var N=L=>{va(L,{closeModal:p,isDark:!0,children:(D,W)=>{y0(D,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:p,get prepobj(){return o()},set prepobj(z){o(z)},get left(){return l(f)},set left(z){I(f,z,!0)},get right(){return l(d)},set right(z){I(d,z,!0)},get meta(){return c()},set meta(z){c(z)}})},$$slots:{default:!0}})};Y(P,L=>{l(u)&&L(N)})}var B=R(P,2);{var F=L=>{ie(L,{status:"error",children:(D,W)=>{var z=M0(),G=O(z);le(()=>ke(G,l(h))),M(D,z)},$$slots:{default:!0}})};Y(B,L=>{(l(v)==="error"||l(h))&&L(F)})}M(t,A),be()}var P0=H('<div class="msg-select"> </div>'),z0=H('<div class="msg-select"> </div>'),L0=H('<div class="msg-select"> </div>'),R0=H('<div class="msg-select"> </div>'),I0=H('<div class="selected-buttons svelte-8mh2yv"><!></div>'),j0=H('<div class="selected-buttons svelte-8mh2yv"><!></div>'),F0=H("<!> <!> <!>",1),q0=()=>switchPlot(i),B0=(t,e,r)=>I(e,l(r),!0),O0=H("<button> </button>"),V0=H('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!> <!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function Hi(t,e){pe(e,!0);let r=j(e,"selobjText",3,"Click to select an object..."),o=j(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),a=j(e,"clearText",3,"Click anywhere to remove selection..."),s=j(e,"params",15),c=qe({objects:-1,variables:[]}),u=ee(qe(Object.keys(e.plots)[0]));function f(N,B){c.objects=B?B[N]:N}function d(N){c.objects=-1}function v(N){c.variables=N}function h(N){c.variables=[]}let g={objects:{select:f,unselect:d},variables:{select:v,unselect:h},stats:{}},m=y(()=>l(u)?e.plots[l(u)]:null),b=y(()=>l(m)?l(m).component:null);var w=V0(),p=O(w),_=O(p),k=O(_);el(k,()=>l(b),(N,B)=>{B(N,{get params(){return s()[l(u)]},get callbacks(){return g[l(m).scope]},get selected(){return c[l(m).scope]},get props(){return e.props}})});var A=R(_,2),E=O(A);{var C=N=>{var B=he(),F=K(B);{var L=W=>{var z=P0(),G=O(z);le(()=>ke(G,r())),M(W,z)},D=W=>{var z=z0(),G=O(z);le(()=>ke(G,a())),M(W,z)};Y(F,W=>{c[l(m).scope]<0?W(L):W(D,!1)})}M(N,B)};Y(E,N=>{l(m).scope==="objects"&&s()[l(u)].plotType!=="l"&&r().length>0&&N(C)})}var S=R(E,2);{var T=N=>{var B=he(),F=K(B);{var L=W=>{var z=L0(),G=O(z);le(()=>ke(G,o())),M(W,z)},D=W=>{var z=R0(),G=O(z);le(()=>ke(G,a())),M(W,z)};Y(F,W=>{c[l(m).scope].length===0?W(L):W(D,!1)})}M(N,B)};Y(S,N=>{l(m).scope==="variables"&&s()[l(u)].plotType!=="l"&&o().length>0&&N(T)})}var P=R(p,2);et(P,21,()=>Object.keys(e.plots),nt,(N,B)=>{var F=he(),L=K(F);{var D=z=>{var G=F0(),ne=K(G);ud(ne,{get title(){return l(m).label},labelWidth:12,get options(){return e.controls[l(u)]},get value(){return s()[l(u)]},set value(te){s(s()[l(u)]=te,!0)}});var V=R(ne,2);{var X=te=>{var oe=I0(),$=O(oe);Er($,()=>l(m).buttons,()=>c.objects),M(te,oe)};Y(V,te=>{l(m).scope==="objects"&&l(m).buttons&&c.objects>=0&&te(X)})}var Q=R(V,2);{var J=te=>{var oe=j0(),$=O(oe);Er($,()=>l(m).buttons,()=>c.variables),M(te,oe)};Y(Q,te=>{l(m).scope==="variables"&&l(m).buttons&&c.variables.length>0&&te(J)})}M(z,G)},W=z=>{var G=O0();G.__keydown=[q0],G.__click=[B0,u,B];var ne=O(G);le(()=>{gt(G,1,`plot-selector plot-selector-${l(B)??""}`,"svelte-8mh2yv"),ke(ne,e.plots[l(B)].label)}),M(z,G)};Y(L,z=>{l(m)&&l(u)===l(B)?z(D):z(W,!1)})}M(N,F)}),M(t,w),be()}dt(["keydown","click"]);function Gi(t,e,r){!e.callbacks||!e.callbacks.select||wn(t,t.target.tagName,o=>e.callbacks.select(o,r()))}function D0(t,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var Y0=Ae("<text> </text>"),W0=Ae('<g class="series series-textlabels"></g>'),U0=Ae('<g class="series series-line"><polyline class="line"></polyline></g>'),H0=Ae("<rect></rect>"),G0=Ae('<g class="series series-bar"></g>'),X0=Ae("<text> </text>"),K0=Ae('<g class="series series-points series-points1"></g>'),J0=Ae('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),Q0=Ae('<g class="series series-points series-points1"><text> </text></g>'),Z0=Ae('<g class="series series-bar"><rect></rect></g>'),$0=Ae('<g class="series series-text"><text> </text></g>'),eh=Ae("<!><!><!>",1),th=Ae("<!><!><!><!><!>",1);function Xr(t,e){pe(e,!0);let r=j(e,"shortenLabels",3,!0),o=j(e,"lineWidth",3,1),a=j(e,"nBars",3,1),s=j(e,"barNum",3,1),c=j(e,"markerSize",3,null),u=j(e,"markerWidth",3,2),f=j(e,"marker",3,1),d=j(e,"colors",3,void 0),v=j(e,"filled",3,void 0),h=j(e,"mainColor",19,()=>Cr.cal),g=j(e,"faceColor",3,null),m=j(e,"selected",19,()=>-1),b=j(e,"maskSelected",3,!0),w=j(e,"xRange",15),p=j(e,"yRange",15),_=j(e,"ind",3,null);const k=Ot("axes"),A=y(()=>qt(e.xValues,"PlotSeries")),E=y(()=>l(A)?qt(e.yValues,"PlotSeries",l(A).length):null);we(()=>{if(_()){const de=_().map(fe=>fe+1);w(l(A)?Br(l(A).subset(de)):null),p(l(E)?Br(l(E).subset(de)):null)}else w(l(A)?Br(l(A)):null),p(l(E)?Br(l(E)):null)});const C=y(()=>g()===null?e.plotType==="p"?"transparent":"white":g()),S=[1,.8,.8,.8,.8,.8,.8,.8],T=[.85,.65,.65,.65,.65,.65,.65,.65],P=y(()=>c()?c():e.plotType==="p"?S[f()-1]:T[f()-1]),N=y(()=>jn[f()-1]),B=y(()=>ea[k.scales().plot]),F=y(()=>bt([0],k.tY())[0]),L=y(()=>ta([.8],k.tX())[0]),D=y(()=>e.plotType==="h"?l(L)/a():0),W=y(()=>e.plotType==="h"?l(L)/2-(s()-1)*l(D):0),z=y(()=>l(B));let G=y(()=>e.plotType==="l"||e.plotType==="b"?la(l(A),l(E),k.tX(),k.tY()):null),ne=y(()=>l(A)?bt(l(A),k.tX()):null),V=y(()=>l(E)?bt(l(E),k.tY()):null),X=y(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(de=>de.slice(0,sl)):e.labels:null);const Q=y(()=>_()?_():Wr(0,l(ne).length-1));let J=y(()=>d()&&d().length===l(A).length?d():Array(l(A).length).fill(h())),te=y(()=>v()&&v().length===l(A).length?v().map(de=>de?"ff":"30"):Array(l(A).length).fill("30")),oe=y(()=>d()&&d().length===l(A).length?d().map((de,fe)=>de+l(te)[fe]):Array(l(A).length).fill(g()));const $=y(()=>`font-size:${l(P)}em;fill:${l(C)};cursor:default;text-anchor:middle;stroke-width:${u()}px;user-select:none;`),se=`font-size:0.85em;fill:${ha};cursor:default;text-anchor:middle;stroke:${ha};stroke-width:0.1px;user-select:none;`,Te=y(()=>`font-size:${l(P)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),Ie=`fill:transparent;stroke-width:${o()}px;`,Ce=`stroke-width:${o()}px;`;we(()=>{m()&&_()&&_().indexOf(m())<0&&e.callbacks.unselect()});var ve=he(),_e=K(ve);{var je=de=>{var fe=th(),re=K(fe);{var ce=Be=>{var Fe=W0();et(Fe,21,()=>l(Q),nt,(xe,Re)=>{var ze=Y0(),Kt=O(ze);le(()=>{q(ze,"opacity",l(Re)===m()),q(ze,"x",l(ne)[l(Re)]-l(W)+l(D)/2),q(ze,"y",l(V)[l(Re)]),q(ze,"dy",l(E).v[l(Re)]<0?l(z):-l(z)),ke(Kt,l(X)[l(Re)])}),M(xe,ze)}),le(()=>pt(Fe,se+(m()>=0?"opacity:0.2;":""))),M(Be,Fe)};Y(re,Be=>{e.showLabels&&l(X)&&Be(ce)})}var ae=R(re);{var ge=Be=>{var Fe=U0(),xe=O(Fe);le(()=>{pt(Fe,Ie),q(xe,"points",l(G)),q(xe,"stroke",h())}),M(Be,Fe)};Y(ae,Be=>{(e.plotType==="l"||e.plotType==="b")&&Be(ge)})}var ye=R(ae);{var ue=Be=>{var Fe=G0();Fe.__click=[Gi,e,_],et(Fe,21,()=>l(Q),nt,(xe,Re)=>{var ze=H0();le(()=>{q(ze,"x",l(ne)[l(Re)]-l(W)),q(ze,"y",l(E).v[l(Re)]<0?l(F):l(V)[l(Re)]),q(ze,"fill",l(J)[l(Re)]),q(ze,"width",l(D)),q(ze,"height",l(E).v[l(Re)]<0?l(V)[l(Re)]-l(F):l(F)-l(V)[l(Re)])}),M(xe,ze)}),le(()=>pt(Fe,Ce+(m()>=0?"opacity:0.2;":""))),M(Be,Fe)};Y(ye,Be=>{e.plotType==="h"&&Be(ue)})}var Le=R(ye);{var Ne=Be=>{var Fe=K0();Fe.__click=[Gi,e,_],et(Fe,21,()=>l(Q),nt,(xe,Re)=>{var ze=X0(),Kt=O(ze);le(()=>{q(ze,"x",l(ne)[l(Re)]),q(ze,"y",l(V)[l(Re)]),q(ze,"fill",l(oe)[l(Re)]),q(ze,"stroke",l(J)[l(Re)]),ke(Kt,l(N))}),M(xe,ze)}),le(()=>pt(Fe,l($)+(m()>=0?"opacity:0.2;":""))),M(Be,Fe)};Y(Le,Be=>{(e.plotType==="p"||e.plotType==="b")&&Be(Ne)})}var We=R(Le);{var Ue=Be=>{var Fe=eh(),xe=K(Fe);{var Re=Pe=>{var Se=J0();q(Se,"x",0),q(Se,"y",0),Se.__click=[D0,e],M(Pe,Se)};Y(xe,Pe=>{b()&&Pe(Re)})}var ze=R(xe);{var Kt=Pe=>{var Se=Q0(),Oe=O(Se),wt=O(Oe);le(()=>{pt(Se,l(Te)),q(Oe,"x",l(ne)[m()]),q(Oe,"y",l(V)[m()]),q(Oe,"stroke",l(J)[m()]),q(Oe,"fill",l(oe)[m()]),ke(wt,l(N))}),M(Pe,Se)},Sr=Pe=>{var Se=Z0(),Oe=O(Se);le(()=>{pt(Se,Ce),q(Oe,"stroke",l(J)[m()]),q(Oe,"fill",l(J)[m()]),q(Oe,"x",l(ne)[m()]-l(W)),q(Oe,"y",l(E).v[m()]<0?l(F):l(V)[m()]),q(Oe,"width",l(D)),q(Oe,"height",l(E).v[m()]<0?l(V)[m()]-l(F):l(F)-l(V)[m()])}),M(Pe,Se)};Y(ze,Pe=>{e.plotType!=="h"?Pe(Kt):Pe(Sr,!1)})}var Mr=R(ze);{var Ee=Pe=>{var Se=$0(),Oe=O(Se),wt=O(Oe);le(()=>{pt(Se,se),q(Oe,"stroke",Bi),q(Oe,"fill",Bi),q(Oe,"x",l(ne)[m()]),q(Oe,"y",l(V)[m()]),q(Oe,"dy",l(E).v[m()]<0?l(z):-l(z)),ke(wt,l(X)[m()])}),M(Pe,Se)};Y(Mr,Pe=>{e.showLabels&&l(X)&&l(X).length>0&&Pe(Ee)})}M(Be,Fe)};Y(We,Be=>{m()>=0&&Be(Ue)})}M(de,fe)};Y(_e,de=>{l(ne)&&l(V)&&de(je)})}M(t,ve),be()}dt(["click"]);function rh(t,e){pe(e,!0);let r=j(e,"lineColor",3,"#606060"),o=j(e,"lineType",3,2),a=j(e,"alpha",3,.05),s=j(e,"xRange",15),c=j(e,"yRange",15);const u=Ye.seq(0,2*Math.PI,.05);function f(p,_,k,A){const E=p.eigenvals[_-1],C=jl(1-a(),2),S=Math.sqrt(C*E),T=Ye.zeros(A.length);for(let P=0;P<A.length;P++)T.v[P]=S*k(A.v[P]);return[T,-S,S]}let d=y(()=>e.comp?e.comp[0]:null),v=y(()=>l(d)?f(e.resobj,l(d),Math.cos,u):null);we(()=>{s(l(v)?[l(v)[1],l(v)[2]]:null)});let h=y(()=>e.comp?e.comp[1]:null),g=y(()=>l(h)?f(e.resobj,l(h),Math.sin,u):null);we(()=>{c(l(g)?[l(g)[1],l(g)[2]]:null)});var m=he(),b=K(m);{var w=p=>{Hr(p,{get xValues(){return l(v)[0]},get yValues(){return l(g)[0]},get lineColor(){return r()},get lineType(){return o()}})};Y(b,p=>{l(v)&&l(g)&&p(w)})}M(t,m),be()}function nh(t,e){pe(e,!0);let r=j(e,"confLevel",3,.95),o=j(e,"xRange",15),a=j(e,"yRange",15),s=y(()=>x1(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,r()));we(()=>{l(s)?(o(l(s).xRange),a(l(s).yRange)):(o(null),a(null))});var c=he(),u=K(c);{var f=d=>{var v=he(),h=K(v);et(h,17,()=>l(s).ellipses,nt,(g,m,b)=>{Hr(g,{get xValues(){return l(m).x},get yValues(){return l(m).y},get lineColor(){return e.groupColors[b]}})}),M(d,v)};Y(u,d=>{l(s)&&l(s).ellipses&&d(f)})}M(t,c),be()}var lh=H("<!> <!> <!> <!> <!> <!> <!> <!>",1);function Xi(t,e){pe(e,!0);let r=j(e,"alpha",3,.05);const o=y(()=>e.props&&e.props.data?e.props.data:null),a=y(()=>e.props&&e.props.res?e.props.res:null),s=y(()=>l(a)&&e.params?e.params.resID==="both"?Object.keys(l(a)):[e.params.resID]:null),c=y(()=>l(s)?l(a)[l(s)[0]]:null),u=y(()=>l(s)&&l(s).length>1?l(a)[l(s)[1]]:null),f=y(()=>l(s)?l(o)[l(s)[0]]:null);function d(ve,_e,je,de,fe,re){if(!je)return null;let ce=je[0],ae=je[1];de&&(ce=Math.min(ce,de[0]),ae=Math.max(ae,de[1])),ve&&fe&&(ce=Math.min(ce,fe[0]),ae=Math.max(ae,fe[1])),_e!=="none"&&re&&(ce=Math.min(ce,re[0]),ae=Math.max(ae,re[1]));const ge=(ae-ce)*.1;return{min:ce,max:ae,d:ge}}function v(ve,_e){if(!(!ve||!_e||_e<1||_e>ve.ncomp))return new Ye(br(ve,"scores",_e))}let h=ee(void 0),g=ee(void 0),m=ee(void 0),b=ee(void 0),w=ee(void 0),p=ee(void 0),_=ee(void 0),k=ee(void 0),A=y(()=>l(c)?lt(l(c).objindices):null),E=y(()=>l(u)?lt(l(u).objindices):null),C=y(()=>l(c)?l(c).objlabels.map(ve=>ve.slice(0,sl)):null),S=y(()=>l(u)?l(u).objlabels.map(ve=>ve.slice(0,sl)):null),T=y(()=>v(l(c),e.params.comp1)),P=y(()=>v(l(u),e.params.comp1)),N=y(()=>e.params.plotType==="p"?l(T):l(A)),B=y(()=>e.params.plotType==="p"?l(P):l(E)),F=y(()=>e.params.comp2?e.params.comp2:null),L=y(()=>v(l(c),l(F))),D=y(()=>l(u)?v(l(u),l(F)):null),W=y(()=>Di(l(f),l(c),e.params.colorBy,e.params.colorByVar,l(s)[0])),z=y(()=>Gr[l(s)[0]]),G=y(()=>l(s).length>1?Di(null,l(u),"none",0,l(s)[1]):null),ne=y(()=>l(s).length>1?Gr[l(s)[1]]:null),V=y(()=>e.params.plotType==="p"?Oi(l(c),e.params.comp1):"Objects"),X=y(()=>Oi(l(c),e.params.comp2)),Q=y(()=>d(e.params.showEllipse,e.params.confEllipse,l(h),l(m),l(w),l(_))),J=y(()=>l(Q)?[l(Q).min-l(Q).d,l(Q).max+l(Q).d]:[0,1]),te=y(()=>d(e.params.showEllipse,e.params.confEllipse,l(g),l(b),l(p),l(k))),oe=y(()=>l(te)?[l(te).min-l(te).d,l(te).max+l(te).d*(1+(e.params.colorBy!=="none"))]:[0,1]),$=y(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!l(W)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+l(W).varname+(l(f).varvaluesUnits?" "+l(f).varvaluesUnits:"")+")");const se=y(()=>ma(l(s)));var Te=he(),Ie=K(Te);{var Ce=ve=>{yn(ve,{get title(){return l($)},get limX(){return l(J)},get limY(){return l(oe)},get xLabel(){return l(V)},get yLabel(){return l(X)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(_e,je)=>{var de=lh(),fe=K(de);{let xe=y(()=>[l(J)[0]]),Re=y(()=>[l(J)[1]]);_n(fe,{get xStart(){return l(xe)},get xEnd(){return l(Re)},yStart:[0],yEnd:[0],get lineColor(){return qn}})}var re=R(fe,2);{var ce=xe=>{{let Re=y(()=>[l(oe)[0]]),ze=y(()=>[l(oe)[1]]);_n(xe,{xStart:[0],xEnd:[0],get yStart(){return l(Re)},get yEnd(){return l(ze)},get lineColor(){return qn}})}};Y(re,xe=>{e.params.plotType==="p"&&xe(ce)})}var ae=R(re,2);{var ge=xe=>{{let Re=y(()=>[e.params.comp1,e.params.comp2]);rh(xe,{get alpha(){return r()},get resobj(){return l(c)},get comp(){return l(Re)},get xRange(){return l(w)},set xRange(ze){I(w,ze,!0)},get yRange(){return l(p)},set yRange(ze){I(p,ze,!0)}})}};Y(ae,xe=>{e.params.showEllipse&&e.params.plotType==="p"&&xe(ge)})}var ye=R(ae,2);{var ue=xe=>{{let Re=y(()=>Number.parseInt(e.params.confEllipse)/100);nh(xe,{get xValues(){return l(N)},get yValues(){return l(L)},get confLevel(){return l(Re)},get groups(){return l(c).classes},get groupNames(){return l(c).classNames},get groupColors(){return l(W).map},get xRange(){return l(_)},set xRange(ze){I(_,ze,!0)},get yRange(){return l(k)},set yRange(ze){I(k,ze,!0)}})}};Y(ye,xe=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&l(W)&&xe(ue)})}var Le=R(ye,2);Xr(Le,{get xValues(){return l(N)},get yValues(){return l(L)},get labels(){return l(C)},get marker(){return l(z)},get nBars(){return l(s).length},barNum:1,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return l(W).colors},get mainColor(){return l(W).mainColor},get faceColor(){return l(W).faceTColor},get selected(){return e.selected},get callbacks(){return e.callbacks},get xRange(){return l(h)},set xRange(xe){I(h,xe,!0)},get yRange(){return l(g)},set yRange(xe){I(g,xe,!0)}});var Ne=R(Le,2);{var We=xe=>{{let Re=y(()=>e.params.showLabels&&e.params.plotType==="p");Xr(xe,{get xValues(){return l(B)},get yValues(){return l(D)},get labels(){return l(S)},get selected(){return e.selected},get callbacks(){return e.callbacks},get nBars(){return l(s).length},barNum:2,get plotType(){return e.params.plotType},get showLabels(){return l(Re)},get marker(){return l(ne)},get colors(){return l(G).colors},get mainColor(){return l(G).mainColor},get faceColor(){return l(G).faceTColor},get xRange(){return l(m)},set xRange(ze){I(m,ze,!0)},get yRange(){return l(b)},set yRange(ze){I(b,ze,!0)}})}};Y(Ne,xe=>{l(B)&&l(D)&&xe(We)})}var Ue=R(Ne,2);{var Be=xe=>{{let Re=y(()=>l(W).breaks!==null);ji(xe,{get show(){return l(Re)},get colmap(){return l(W).map},get breaks(){return l(W).breaks},get labels(){return l(W).labels}})}};Y(Ue,xe=>{l(W)&&xe(Be)})}var Fe=R(Ue,2);{let xe=y(()=>e.params.colorBy==="none");da(Fe,{get items(){return l(se)},get show(){return l(xe)}})}M(_e,de)},$$slots:{default:!0}})};Y(Ie,ve=>{l(N)&&l(L)&&ve(Ce)})}M(t,Te),be()}var oh=H("<!> <!> <!>",1);function ah(t,e){pe(e,!0);let r=y(()=>e.props?e.props.model:null);function o(E,C){return!E||!C||C<1||C>E.ncomp?null:new Ye(It(E,"loadings",C))}let a=ee(void 0),s=ee(void 0),c=y(()=>l(r)?lt(l(r).varvalues):null),u=y(()=>l(r)?lt(l(r).varindices):null),f=y(()=>o(l(r),e.params.comp1)),d=y(()=>!l(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:l(f),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&l(c)?{values:l(c),label:l(r).varvaluesName+(l(r).varvaluesUnits?", "+l(r).varvaluesUnits:"")}:{values:l(u),label:"Variables"}),v=y(()=>l(d)?l(d).values:null),h=y(()=>l(d)?l(d).label:null),g=y(()=>o(l(r),e.params.comp2)),m=y(()=>`PC${e.params.comp2}`),b=y(()=>{if(l(s)&&l(s)[0]<Number.POSITIVE_INFINITY&&l(s)[1]>Number.NEGATIVE_INFINITY){const E=(l(s)[1]-l(s)[0])*.1;return[l(s)[0]-E,l(s)[1]+E]}else return[0,1]}),w=y(()=>{if(l(a)&&l(a)[0]<Number.POSITIVE_INFINITY&&l(a)[1]>Number.NEGATIVE_INFINITY){const E=(l(a)[1]-l(a)[0])*.1;return e.params.plotType==="l"&&l(r).varrev?[l(a)[1]+E,l(a)[0]-E]:[l(a)[0]-E,l(a)[1]+E]}else return[0,1]}),p=y(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const E=Math.max(Math.abs(l(w)[0]),Math.abs(l(b)[0]),l(w)[1],l(b)[1])*1.05;return{x:[-E,E],y:[-E,E]}}else{const E=Math.max(Math.abs(l(b)[0]),l(b)[1])*1.05;return{x:l(w),y:[-E,E]}}return{x:l(w),y:l(b)}});var _=he(),k=K(_);{var A=E=>{yn(E,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return l(h)},get yLabel(){return l(m)},get limX(){return l(p).x},get limY(){return l(p).y},children:(C,S)=>{var T=oh(),P=K(T);{let L=y(()=>[l(p).x[0]]),D=y(()=>[l(p).x[1]]);_n(P,{get xStart(){return l(L)},get xEnd(){return l(D)},yStart:[0],yEnd:[0],get lineColor(){return qn}})}var N=R(P,2);{var B=L=>{{let D=y(()=>[l(p).y[0]]),W=y(()=>[l(p).y[1]]);_n(L,{xStart:[0],xEnd:[0],get yStart(){return l(D)},get yEnd(){return l(W)},get lineColor(){return qn}})}};Y(N,L=>{e.params.plotType==="p"&&L(B)})}var F=R(N,2);{let L=y(()=>qi+"30");Xr(F,{get xValues(){return l(v)},get yValues(){return l(g)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return l(r).varlabels},shortenLabels:!1,get mainColor(){return qi},get faceColor(){return l(L)},get xRange(){return l(a)},set xRange(D){I(a,D,!0)},get yRange(){return l(s)},set yRange(D){I(s,D,!0)}})}M(C,T)},$$slots:{default:!0}})};Y(k,E=>{l(v)&&l(g)&&E(A)})}M(t,_),be()}var sh=H("<!> <!> <!> <!> <!> <!> <!>",1);function Ki(t,e){pe(e,!0),j(e,"alpha",3,.05);const r="#808089",o="#404050",a=ha;let s=y(()=>e.props?e.props.model:null),c=y(()=>e.props?e.props.res:null),u=y(()=>l(c)?l(c)[e.params.resID]:null);function f(C,S){return`PC${S} (${(C.stat.expvar[S-1]*100).toFixed(1)}%)`}function d(C,S,T){if(!S||!T||C<1||C>l(c).ncomp)return null;const P=br(S,"scores",C).slice(),N=It(T,"loadings",C),B=P.length,F=N.length;let L=Number.POSITIVE_INFINITY,D=Number.NEGATIVE_INFINITY;const W=new Array(B);for(let te=0;te<B;te++)P[te]=P[te]/Math.sqrt(l(v)[C-1]*(B-1)),L>P[te]&&(L=P[te]),D<P[te]&&(D=P[te]),W[te]=P[te]<0?1:3;const z=new Array(B);for(let te=0;te<F;te++)L>N[te]&&(L=N[te]),D<N[te]&&(D=N[te]),z[te]=N[te]<0?1:3;const G=new Ye(P),ne=new Ye(N),V=f(S,C),X=(D-L)/15,Q=[L-X,D+X],J=Math.max(Math.abs(Q[0]),Q[1]);return{values:G,end:ne,lim:Q,label:V,tpos:W,ppos:z,mx:J}}let v=y(()=>l(s)?It(l(s),"eigenvals"):null),h=y(()=>l(u)?Ye.zeros(l(u).ncols):null),g=y(()=>l(u)?Ye.zeros(l(u).ncols):null),m=y(()=>d(e.params.comp1,l(u),l(s))),b=y(()=>d(e.params.comp2,l(u),l(s))),w=y(()=>l(m)&&l(b)?Math.max(l(m).mx,l(b).mx)*1.05:0),p=y(()=>l(m)?e.params.axesEqual?[-l(w),l(w)]:l(m).lim:[0,1]),_=y(()=>l(b)?e.params.axesEqual?[-l(w),l(w)]:l(b).lim:[0,1]);var k=he(),A=K(k);{var E=C=>{yn(C,{get limX(){return l(p)},get limY(){return l(_)},get xLabel(){return l(m).label},get yLabel(){return l(b).label},fileName:"plot-biplot",title:"Bi-plot (scores and loadings)",children:(S,T)=>{var P=sh(),N=K(P);{let V=y(()=>[l(p)[0]]),X=y(()=>[l(p)[1]]);_n(N,{get xStart(){return l(V)},get xEnd(){return l(X)},yStart:[0],yEnd:[0],get lineColor(){return qn}})}var B=R(N,2);{let V=y(()=>[l(_)[0]]),X=y(()=>[l(_)[1]]);_n(B,{xStart:[0],xEnd:[0],get yStart(){return l(V)},get yEnd(){return l(X)},get lineColor(){return qn}})}var F=R(B,2);fa(F,{get xValues(){return l(m).values},get yValues(){return l(b).values},get lineColor(){return Cr[e.params.resID]},get faceColor(){return al[e.params.resID]},lineWidth:1.5});var L=R(F,2);_n(L,{get xStart(){return l(h)},get yStart(){return l(g)},get xEnd(){return l(m).end},get yEnd(){return l(b).end},lineColor:r});var D=R(L,2);fa(D,{get xValues(){return l(m).end},get yValues(){return l(b).end},marker:1,lineColor:r,faceColor:r,markerSize:.4});var W=R(D,2);{var z=V=>{Fn(V,{get xValues(){return l(m).values},get yValues(){return l(b).values},get labels(){return l(u).objlabels},get pos(){return l(b).tpos},textSize:.75,get faceColor(){return a}})};Y(W,V=>{(e.params.showLabels==="obj"||e.params.showLabels==="both")&&V(z)})}var G=R(W,2);{var ne=V=>{Fn(V,{get xValues(){return l(m).end},get yValues(){return l(b).end},get labels(){return l(u).varlabels},textSize:.75,get pos(){return l(b).ppos},faceColor:o})};Y(G,V=>{(e.params.showLabels==="var"||e.params.showLabels==="both")&&V(ne)})}M(S,P)},$$slots:{default:!0}})};Y(A,C=>{l(m)&&l(b)&&C(E)})}M(t,k),be()}var ih=H("<!> <!> <!> <!> <!> <!>",1);function Ji(t,e){pe(e,!0);let r=y(()=>e.props?e.props.res:null);const o=y(()=>l(r)&&e.params?e.params.resID==="both"?Object.keys(l(r)):[e.params.resID]:null),a=y(()=>l(o)?l(r)[l(o)[0]]:null),s=y(()=>l(o)&&l(o).length>1?l(r)[l(o)[1]]:null),c={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"},u=y(()=>e.params.varForm==="cumulative"?"cum":""),f=y(()=>e.params.varType==="explained"?"exp":"res"),d=y(()=>l(u)+l(f)+"var"),v=y(()=>c[l(d)]),h=y(()=>l(a).ncomp>1?1-l(a).ncomp*.065:-.1),g=y(()=>l(a).ncomp>1?l(a).ncomp*1.065:2.1),m=y(()=>[l(h),l(g)]),b=y(()=>l(a)?l(a).stat.components:null),w=y(()=>l(a)?lt(l(a).stat[l(d)]):null),p=y(()=>l(s)?l(s).stat.components:null),_=y(()=>l(s)?lt(l(s).stat[l(d)]):null),k=y(()=>l(w)?Array.from(l(w).v).map(F=>F<.1?F.toFixed(3):F.toFixed(2)):null),A=y(()=>l(_)?Array.from(l(_).v).map(F=>F<.1?F.toFixed(3):F.toFixed(2)):null),E=y(()=>l(w)?[Math.min(-.1,Or(l(w)))]:-.1),C=y(()=>l(_)?[Math.min(-.1,Or(l(_)))]:-.1),S=y(()=>l(E)&&l(C)?[Math.min(l(E),l(C)),1.1]:[0,1.1]),T=y(()=>ma(l(o)));var P=he(),N=K(P);{var B=F=>{{let L=y(()=>"plot-"+l(d));yn(F,{get title(){return l(v)},get limX(){return l(m)},get limY(){return l(S)},get fileName(){return l(L)},whole:!0,children:(D,W)=>{var z=ih(),G=K(z);Xr(G,{get xValues(){return l(b)},get yValues(){return l(w)},get labels(){return l(k)},get nBars(){return l(o).length},barNum:1,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Cr[l(o)[0]]},get faceColor(){return Xl[l(o)[0]]},get marker(){return Gr[l(o)[0]]},lineWidth:1.5});var ne=R(G,2);{var V=oe=>{Xr(oe,{get xValues(){return l(p)},get yValues(){return l(_)},get labels(){return l(A)},get nBars(){return l(o).length},barNum:2,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Cr[l(o)[1]]},get faceColor(){return Xl[l(o)[1]]},get marker(){return Gr[l(o)[1]]},lineWidth:1.5})};Y(ne,oe=>{l(p)&&l(_)&&oe(V)})}var X=R(ne,2);da(X,{get items(){return l(T)},position:"bottomright"});var Q=R(X,2);ia(Q,{showGrid:!0,label:"Number of PCs",whole:!0});var J=R(Q,2);ca(J,{showGrid:!0,label:"Variance"});var te=R(J,2);ua(te,{}),M(D,z)},$$slots:{default:!0}})}};Y(N,F=>{l(b)&&l(w)&&F(B)})}M(t,P),be()}function ch(t,e){pe(e,!0);let r=y(()=>e.props?e.props.model:null);const o={none:"λ",log:"log(λ)",sqrt:"sqrt(λ)"};function a(C,S){const T=l(r).nrows-1;if(S==="no")return C.apply(P=>P*T);if(S==="log")return C.apply(P=>Math.log(P*T));if(S==="sqrt")return C.apply(P=>Math.sqrt(P*T))}let s=y(()=>l(r)?new Ye(It(l(r),"eigenvals")):null),c=y(()=>l(r)?Ye.seq(1,l(r).ncomp):null),u=y(()=>l(s)?a(l(s),e.params.transform):null),f=y(()=>l(u)?Array.from(l(u).v).map(C=>C.toFixed(C<.1?3:2)):null);const d=y(()=>l(r).ncomp>10?l(r).ncomp*.05:.5),v=y(()=>l(r).ncomp>1?1:0),h=y(()=>l(r).ncomp>1?l(r).ncomp:2),g=y(()=>[l(v)-l(d),l(h)+l(d)]);let m=y(()=>l(u)?e.params.transform==="no"?0:l(u).v[l(r).ncomp-1]:0),b=y(()=>l(u)?l(u).v[0]:1),w=y(()=>(l(b)-l(m))/18),p=y(()=>l(u)?[l(m)-l(w),l(b)+l(w)]:[0,1]),_=y(()=>o[e.params.transform]);var k=he(),A=K(k);{var E=C=>{yn(C,{get limX(){return l(g)},get limY(){return l(p)},get yLabel(){return l(_)},whole:!0,xLabel:"Number of PCs",title:"Eigenvalues",fileName:"plot-eigenvalues",children:(S,T)=>{Xr(S,{get xValues(){return l(c)},get yValues(){return l(u)},get labels(){return l(f)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return Xl.cal},lineWidth:1.5})},$$slots:{default:!0}})};Y(A,C=>{l(c)&&l(u)&&C(E)})}M(t,k),be()}var uh=H("<!> <!> <!> <!> <!>",1);function Qi(t,e){pe(e,!0);let r=y(()=>e.props&&e.props.res?e.props.res:null);const o=y(()=>l(r)&&e.params?e.params.resID==="both"?Object.keys(l(r)):[e.params.resID]:null),a=y(()=>l(o)?l(r)[l(o)[0]]:null),s=y(()=>l(o)&&l(o).length>1?l(r)[l(o)[1]]:null),c="#909090",u=100;let f=y(()=>e.params.limType==="classic"?{h:l(a).cNh,q:l(a).cNq}:{h:l(a).rNh,q:l(a).rNq}),d=y(()=>e.params.limType==="classic"?{h:l(a).ch0,q:l(a).cq0}:{h:l(a).rh0,q:l(a).rq0}),v=y(()=>({h:l(f).h[e.params.ncomp-1],q:l(f).q[e.params.ncomp-1]})),h=y(()=>({h:l(d).h[e.params.ncomp-1],q:l(d).q[e.params.ncomp-1]})),g=y(()=>e.params.alpha?1-e.params.alpha/100:.95),m=y(()=>e.params.gamma?1-e.params.gamma/100:.99),b=y(()=>Wi(l(g),l(v).h,l(v).q,e.params.transType)),w=y(()=>Wi(Math.pow(l(m),1/l(a).nrows),l(v).h,l(v).q,e.params.transType)),p=y(()=>l(a)?br(l(a),"hdist",e.params.ncomp):null),_=y(()=>l(a)?br(l(a),"qdist",e.params.ncomp):null),k=y(()=>l(s)?br(l(s),"hdist",e.params.ncomp):null),A=y(()=>l(s)?br(l(s),"qdist",e.params.ncomp):null),E=y(()=>Kl(l(p),l(v).h,l(h).h,e.params.transType)),C=y(()=>Kl(l(_),l(v).q,l(h).q,e.params.transType)),S=y(()=>l(a)?l(a).objlabels.map(J=>J.slice(0,sl)):null),T=y(()=>l(k)?Kl(l(k),l(v).h,l(h).h,e.params.transType):null),P=y(()=>l(A)?Kl(l(A),l(v).q,l(h).q,e.params.transType):null),N=y(()=>l(s)?l(s).objlabels.map(J=>J.slice(0,sl)):null),B=y(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),F=y(()=>Yi("h",e.params.transType)),L=y(()=>Yi("q",e.params.transType)),D=ee(void 0),W=ee(void 0),z=y(()=>{if(!l(E)||!l(D))return[0,1];const J=Math.max(l(E).max,l(w).x.v[u-1]),te=l(T)?Math.max(l(T).max,l(w).x.v[u-1]):0,oe=Math.max(J,te);return[-.02*(oe-l(D)[0]),1.05*oe]}),G=y(()=>{if(!l(C)||!l(W))return[0,1];const J=Math.max(l(C).max,l(w).y.v[0]),te=l(P)?Math.max(l(P).max,l(w).y.v[0]):0,oe=Math.max(J,te);return[-.02*(oe-l(W)[0]),(1.05+.1*(e.params.colorBy!=="none"))*oe]});const ne=y(()=>ma(l(o)));var V=he(),X=K(V);{var Q=J=>{yn(J,{get title(){return l(B)},get limX(){return l(z)},get limY(){return l(G)},get xLabel(){return l(F)},get yLabel(){return l(L)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(te,oe)=>{var $=uh(),se=K($);{var Te=fe=>{Hr(fe,{get xValues(){return l(b).x},get yValues(){return l(b).y},lineColor:c,lineType:2})};Y(se,fe=>{l(b)&&fe(Te)})}var Ie=R(se,2);{var Ce=fe=>{Hr(fe,{get xValues(){return l(w).x},get yValues(){return l(w).y},lineColor:c,lineType:3})};Y(Ie,fe=>{l(w)&&e.params.resID&&e.params.resID!=="alt"&&fe(Ce)})}var ve=R(Ie,2);Xr(ve,{get labels(){return l(S)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(E).values},get yValues(){return l(C).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Gr[l(o)[0]]},get mainColor(){return Cr[l(o)[0]]},get faceColor(){return al[l(o)[0]]},get xRange(){return l(D)},set xRange(fe){I(D,fe,!0)},get yRange(){return l(W)},set yRange(fe){I(W,fe,!0)}});var _e=R(ve,2);{var je=fe=>{Xr(fe,{get labels(){return l(N)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(T).values},get yValues(){return l(P).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Gr[l(o)[1]]},get mainColor(){return Cr[l(o)[1]]},get faceColor(){return al[l(o)[1]]},get xRange(){return l(D)},set xRange(re){I(D,re,!0)},get yRange(){return l(W)},set yRange(re){I(W,re,!0)}})};Y(_e,fe=>{l(T)&&l(P)&&fe(je)})}var de=R(_e,2);da(de,{get items(){return l(ne)},position:"bottomright"}),M(te,$)},$$slots:{default:!0}})};Y(X,J=>{l(E)&&l(C)&&J(Q)})}M(t,V),be()}function Zi(t){const e=Object.keys(t),r=t[e[0]],o=e.concat(["both"]);return{resID:{el:rt,hidden:e.length==1,default:e[0],label:"Show",props:{options:o}},ncomp:{el:Xt,hidden:!1,default:r.ncomp>1?2:1,label:"# PCs",props:{min:1,max:r.ncomp}},transType:{el:rt,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:rt,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function fh(t){return{plotType:{el:Wl,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},transform:{el:rt,hidden:!1,default:"no",label:"Transform",props:{options:["no","sqrt","log"]}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function dh(t){return{plotType:{el:Wl,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:Xt,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:Xt,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},axesEqual:{el:Dt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function $i(t){const e=Object.keys(t),r=t[e[0]],o=r.classNames&&r.classNames.length>1?["none","groups","variable"]:["none","variable"],a=e.concat(["both"]);return{resID:{el:rt,hidden:e.length==1,default:e[0],label:"Show",props:{options:a}},plotType:{el:Wl,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:Xt,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:Xt,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},showEllipse:{el:Dt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:rt,hidden:!1,default:"none",label:"Color by",props:{options:o}},colorByVar:{el:Xt,hidden:!0,default:1,label:"Variable",props:{min:1,max:r.ncols}},confEllipse:{el:rt,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}function ec(t){const e=Object.keys(t),r=e.concat(["both"]);return{resID:{el:rt,hidden:e.length==1,default:e[0],label:"Show",props:{options:r}},plotType:{el:Wl,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},varType:{el:rt,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:rt,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Dt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function tc(t){const e=Object.keys(t),r=t[e[0]];return{resID:{el:rt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},comp2:{el:Xt,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:Xt,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:rt,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","obj","var","both"]}},axesEqual:{el:Dt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}var vh=H("<!> <!>",1);function hh(t,e){pe(e,!0);const r=(d,v=Ct)=>{ie(d,{label:"Selected",children:(h,g)=>{ht(h,{onclick:()=>e.markOutlier(v()),text:"remove"})},$$slots:{default:!0}})},o=(d,v=Ct)=>{ie(d,{label:"Selected",children:(h,g)=>{var m=vh(),b=K(m);ht(b,{onclick:()=>e.showContributions(v(),l(c).distance.ncomp),text:"plot"});var w=R(b,2);ht(w,{onclick:()=>e.markOutlier(v()),text:"remove"}),M(h,m)},$$slots:{default:!0}})};Object.keys(e.res);const a=y(()=>({scores:{label:"Scores",scope:"objects",component:Xi,buttons:r},loadings:{label:"Loadings",scope:"stats",component:ah},biplot:{label:"Bi-plot",scope:"stats",component:Ki},variance:{label:"Variance",scope:"stats",component:Ji},eigenvals:{label:"Eigenvalues",scope:"stats",component:ch},distance:{label:"Distances",scope:"objects",component:Qi,buttons:o}})),s=qe({scores:$i(e.res),loadings:dh(e.model),biplot:tc(e.res),variance:ec(e.res),eigenvals:fh(e.model),distance:Zi(e.res)});let c=ee(qe({scores:_r(s.scores),loadings:_r(s.loadings),biplot:_r(s.biplot),variance:_r(s.variance),eigenvals:_r(s.eigenvals),distance:_r(s.distance)}));we(()=>{l(c).scores.plotType!=="p"?(s.scores.comp1.hidden=!0,s.scores.showEllipse.hidden=!0,l(c).scores.showEllipse=!1):(s.scores.comp1.hidden=!1,s.scores.showEllipse.hidden=!1),l(c).scores.plotType==="l"||l(c).scores.plotType==="b"?(s.scores.colorBy.hidden=!0,l(c).scores.colorBy="none"):s.scores.colorBy.hidden=!1,l(c).scores.colorBy==="variable"?s.scores.colorByVar.hidden=!1:s.scores.colorByVar.hidden=!0,l(c).scores.colorBy==="groups"&&l(c).scores.plotType==="p"?s.scores.confEllipse.hidden=!1:(s.scores.confEllipse.hidden=!0,l(c).scores.confEllipse="none"),l(c).scores.resID==="both"&&(l(c).scores.confEllipse="none",l(c).scores.colorBy="none",s.scores.colorBy.hidden=!0,s.scores.colorByVar.hidden=!0,s.scores.confEllipse.hidden=!0)}),we(()=>{l(c).loadings.plotType!=="p"?s.loadings.comp1.hidden=!0:s.loadings.comp1.hidden=!1});const u=y(()=>({res:e.res,model:e.model,data:e.data})),f={markOutlier:e.markOutlier,showContributions:e.showContributions};Hi(t,{get plots(){return l(a)},get controls(){return s},get props(){return l(u)},get callbacks(){return f},get params(){return l(c)},set params(d){I(c,d,!0)}}),be()}var mh=H('<div class="outliers-pane svelte-b7gdku"><!></div>'),gh=H('<div class="model-calculator svelte-b7gdku"><!></div>'),ph=H('<div class="pcv-calculator svelte-b7gdku"><!></div>'),bh=H('<div class="buttons"><!> <!> <!></div>'),wh=H('<div class="download-area svelte-b7gdku"><!></div>'),_h=H('<div class="result-stats svelte-b7gdku"><!></div>'),yh=H(`<p class="svelte-b7gdku">In this tab you can train a PCA model and explore how well it describes the training set. After creating the model you can save it to a file and apply it to another, new set of samples, and see how well this new set is explained by the model (tab <strong>Project</strong>).</p> <p class="svelte-b7gdku"><strong>Step 1.</strong></p> <p class="svelte-b7gdku">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-b7gdku">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. If this is the case, select <em>values</em> option for the header. In this case you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-b7gdku">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. It is also possible to have group labels, which you can use, for example, to color group samples on the score plot. Here is an example how data structure may look like (note, that column with group, row labels and header are optional):</p> <div class="svelte-b7gdku"><table class="svelte-b7gdku"><thead class="svelte-b7gdku"><tr class="svelte-b7gdku"><td class="svelte-b7gdku">Name</td><td class="svelte-b7gdku">Group</td><td class="svelte-b7gdku">x1</td><td class="svelte-b7gdku">x2</td><td class="svelte-b7gdku">x3</td></tr></thead><tbody class="svelte-b7gdku"><tr><td class="svelte-b7gdku">O1</td><td class="svelte-b7gdku">A</td><td class="svelte-b7gdku">3.8</td><td class="svelte-b7gdku">1.3</td><td class="svelte-b7gdku">13.6</td></tr><tr><td class="svelte-b7gdku">O2</td><td class="svelte-b7gdku">A</td><td class="svelte-b7gdku">11.1</td><td class="svelte-b7gdku">12.3</td><td class="svelte-b7gdku">3.3</td></tr><tr><td class="svelte-b7gdku">O3</td><td class="svelte-b7gdku">A</td><td class="svelte-b7gdku">1.2</td><td class="svelte-b7gdku">2.3</td><td class="svelte-b7gdku">4.2</td></tr></tbody></table></div> <p class="svelte-b7gdku"></p>`,1),xh=H(`<p class="svelte-b7gdku"><strong>Step 2</strong></p> <p class="svelte-b7gdku">Next step is to decide how to preprocess the data. You can either skip preprocessing (in the model settings you
               will be able to apply centering and scaling), create the chain of preprocessing methods in special constructor
               (use <em>Create</em> to load the constructor) or load already built preprocessing model from a file. Make your choice.</p>`,1),kh=H('<p class="svelte-b7gdku"><strong>Step 3</strong></p> <p class="svelte-b7gdku">Next step is to create a global PCA model for the training set. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to select number of components for every plot.</p>',1),Eh=H(`<p class="svelte-b7gdku"><strong>Step 4</strong></p> <p class="svelte-b7gdku">Now set necessary parameters for Procrustes cross-validation and click button to create the PV-set,
               which you can use to validate the model. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-b7gdku">After this step you will be able to explore the model and tune its parameters.</p>`,1),Ah=H('<div class="help-text svelte-b7gdku"><!></div>'),Ch=H('<!> <div class="app-container svelte-b7gdku"><div class="app-controls svelte-b7gdku"><div class="data-loader svelte-b7gdku"><!></div> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-b7gdku"><!></div></div>',1);function Sh(t,e){pe(e,!0);const r=y(()=>e.session.train);let o=ee(-1),a=ee(1),s=ee(!1);function c(V){if(V<0||V>l(r).calres.nrows-1)return;const X=l(r).calres.objindices[V];X>=0&&!l(r).outliers.includes(X)&&(l(r).outliers.push(X),l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null)}function u(){l(r).outliers=[],l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null}function f(){l(r).outliers.pop(),l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null}function d(V,X){V<0||(I(o,V,!0),I(a,X,!0),I(s,!0))}function v(){I(s,!1),I(o,-1),I(a,1)}we(()=>{l(r).calset===null&&(l(r).pvres=null,l(r).calres=null,l(r).pvset=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).prepobj=[],l(r).prepType=null,l(r).outliers=[],l(r).model=null)}),we(()=>{l(r).model===null&&(l(r).calres=null,l(r).pvres=null,l(r).pvset=null)}),we(()=>{l(r).prepmodel||(l(r).calres=null,l(r).calsetp=null)}),we(()=>{l(r).calsetp||(l(r).model=null,l(r).calres=null,l(r).pvres=null)}),we(()=>{const V=kr(()=>JSON.stringify(e.session,Vl));e.backupSession(V,l(r).model,l(r).calset,l(r).calsetp,l(r).pvres)});var h=Ch(),g=K(h);{var m=V=>{{let X=y(()=>({cal:l(r).calres,pv:l(r).pvres}));Ui(V,{get model_getter(){return It},get res_getter(){return br},get model(){return l(r).model},get res(){return l(X)},closeModal:v,get ncomp(){return l(a)},get selected(){return l(o)}})}};Y(g,V=>{l(s)&&V(m)})}var b=R(g,2),w=O(b),p=O(w),_=O(p);mi(_,{className:"Group",csvOnly:!1,get dataset(){return l(r).calset},set dataset(V){l(r).calset=V}});var k=R(p,2);{var A=V=>{var X=mh(),Q=O(X);pi(Q,{get outliers(){return l(r).outliers},get dataset(){return l(r).calset},resetOutliers:u,undoOutliers:f}),M(V,X)};Y(k,V=>{l(r).outliers&&l(r).outliers.length>0&&V(A)})}var E=R(k,2);{var C=V=>{N0(V,{get WASM(){return e.WASM},get rawdata(){return l(r).calset},get outliers(){return l(r).outliers},get prepType(){return l(r).prepType},set prepType(X){l(r).prepType=X},get prepobj(){return l(r).prepobj},set prepobj(X){l(r).prepobj=X},get prepdata(){return l(r).calsetp},set prepdata(X){l(r).calsetp=X},get prepmeta(){return l(r).prepmeta},set prepmeta(X){l(r).prepmeta=X},get prepmodel(){return l(r).prepmodel},set prepmodel(X){l(r).prepmodel=X}})};Y(E,V=>{l(r).calset&&V(C)})}var S=R(E,2);{var T=V=>{var X=gh(),Q=O(X);Bd(Q,{get WASM(){return e.WASM},get dataset(){return l(r).calsetp},get outliers(){return l(r).outliers},get model(){return l(r).model},set model(J){l(r).model=J},get resobj(){return l(r).calres},set resobj(J){l(r).calres=J}}),M(V,X)};Y(S,V=>{l(r).calsetp&&V(T)})}var P=R(S,2);{var N=V=>{var X=ph(),Q=O(X);Nd(Q,{get WASM(){return e.WASM},get calset(){return l(r).calsetp},get outliers(){return l(r).outliers},get model(){return l(r).model},get calres(){return l(r).calres},get pvset(){return l(r).pvset},set pvset(J){l(r).pvset=J},get pvres(){return l(r).pvres},set pvres(J){l(r).pvres=J}}),M(V,X)};Y(P,V=>{l(r).calsetp&&l(r).model&&V(N)})}var B=R(P,2);{var F=V=>{var X=wh(),Q=O(X);ie(Q,{name:"download-buttons",label:"Download",children:(J,te)=>{var oe=bh(),$=O(oe);ht($,{onclick:()=>Zo(l(r).calres,l(r).calset,"train",l(r).outliers,l(r).model),text:"Res (cal)"});var se=R($,2);ht(se,{onclick:()=>Zo(l(r).pvres,l(r).pvset,"pv",l(r).outliers,l(r).model),text:"Res (pv)"});var Te=R(se,2);ht(Te,{onclick:()=>fd(l(r).model,l(r).prepmodel),text:"Model"}),M(J,oe)},$$slots:{default:!0}}),M(V,X)};Y(B,V=>{l(r).calres&&l(r).pvres&&l(r).model&&V(F)})}var L=R(B,2);{var D=V=>{var X=_h(),Q=O(X);{let J=y(()=>({cal:l(r).calres,pv:l(r).pvres}));gi(Q,{get res(){return l(J)}})}M(V,X)};Y(L,V=>{l(r).pvres&&V(D)})}var W=R(w,2),z=O(W);{var G=V=>{var X=Ah(),Q=O(X);{var J=oe=>{var $=yh();M(oe,$)},te=oe=>{var $=he(),se=K($);{var Te=Ce=>{var ve=xh();M(Ce,ve)},Ie=Ce=>{var ve=he(),_e=K(ve);{var je=fe=>{var re=kh();M(fe,re)},de=fe=>{var re=he(),ce=K(re);{var ae=ge=>{var ye=Eh();M(ge,ye)};Y(ce,ge=>{l(r).pvset||ge(ae)},!0)}M(fe,re)};Y(_e,fe=>{l(r).model?fe(de,!1):fe(je)},!0)}M(Ce,ve)};Y(se,Ce=>{l(r).calsetp?Ce(Ie,!1):Ce(Te)},!0)}M(oe,$)};Y(Q,oe=>{l(r).calset?oe(te,!1):oe(J)})}M(V,X)},ne=V=>{var X=he(),Q=K(X);{var J=te=>{var oe=he(),$=K(oe);Rn($,()=>l(r).calres,se=>{{let Te=y(()=>({cal:l(r).calset,pv:l(r).pvset})),Ie=y(()=>({cal:l(r).calres,pv:l(r).pvres}));hh(se,{markOutlier:c,showContributions:d,get data(){return l(Te)},get res(){return l(Ie)},get model(){return l(r).model}})}}),M(te,oe)};Y(Q,te=>{l(r).model&&l(r).calres&&l(r).pvres&&te(J)})}M(V,X)};Y(z,V=>{!l(r).pvres||!l(r).model?V(G):V(ne,!1)})}M(t,h),be()}var Mh=H("<!> <!>",1),Th=H('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),Nh=H('<p class="info-text svelte-3v2vv7"><span>Model file:</span> <span class="file-name svelte-3v2vv7"> </span><br/> <span style="color:#a0a0a0;">Model info:</span> <!></p> <!>',1),Ph=H("<p><!></p>"),zh=H("<!> <!>",1);function Lh(t,e){pe(e,!0);let r=j(e,"model",15),o=ee(""),a=ee("neutral"),s=ee("");function c(p){try{const _=JSON.parse(p,Ko);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),!Object.keys(_).includes("class")||_.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain PCA model.");_.fileName=l(d),r(_),I(a,"success"),I(s,"")}catch(_){console.error(_),r(null),I(a,"error"),I(s,_,!0)}}function u(p){const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsText(l(o))}function f(){I(o,""),r(null),I(a,"neutral"),I(s,"")}we(()=>{l(o)===null?(r(null),I(a,"neutral"),I(s,"")):(I(a,"neutral"),I(s,""))});let d=y(()=>l(o)?l(o).name.replace(/\.[^/.]+$/,""):"");var v=zh(),h=K(v);{var g=p=>{var _=Mh(),k=K(_);Rn(k,()=>l(o),C=>{ie(C,{name:"file-selector",children:(S,T)=>{Yl(S,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(o)},set file(P){I(o,P,!0)}})},$$slots:{default:!0}})});var A=R(k,2);{var E=C=>{ie(C,{name:"load-button",label:" ",children:(S,T)=>{ht(S,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(A,C=>{l(o)&&C(E)})}M(p,_)},m=p=>{ie(p,{name:"info",class:"info",children:(_,k)=>{var A=Nh(),E=K(A),C=R(O(E),2),S=O(C),T=R(C,4),P=R(T);{var N=F=>{var L=Th(),D=R(K(L),3);pa(D,{get prepmodel(){return r().prep}}),M(F,L)};Y(P,F=>{r().prep&&F(N)})}var B=R(E,2);wr(B,{onclick:f}),le(()=>{q(C,"title",r().fileName),ke(S,r().fileName),ke(T,` ${r().ncomp??""} PCs${r().center?", centered":""}${r().scale?", scaled":""} `)}),M(_,A)},$$slots:{default:!0}})};Y(h,p=>{r()?p(m,!1):p(g)})}var b=R(h,2);{var w=p=>{ie(p,{name:"error",status:"error",children:(_,k)=>{var A=Ph(),E=O(A);St(E,()=>l(s)),M(_,A)},$$slots:{default:!0}})};Y(b,p=>{(l(a)==="error"||l(s))&&p(w)})}M(t,v),be()}var Rh=H("<!> <!>",1);function Ih(t,e){pe(e,!0);const r=(d,v=Ct)=>{ie(d,{label:"Selected",children:(h,g)=>{ht(h,{onclick:()=>e.markOutlier(v()),text:"remove"})},$$slots:{default:!0}})},o=(d,v=Ct)=>{ie(d,{label:"Selected",children:(h,g)=>{var m=Rh(),b=K(m);ht(b,{onclick:()=>e.showContributions(v(),l(c).distance.ncomp),text:"plot"});var w=R(b,2);ht(w,{onclick:()=>e.markOutlier(v()),text:"remove"}),M(h,m)},$$slots:{default:!0}})},a=y(()=>({scores:{label:"Scores",scope:"objects",component:Xi,buttons:r},biplot:{label:"Bi-plot",scope:"stats",component:Ki},variance:{label:"Variance",scope:"stats",component:Ji},distance:{label:"Distances",scope:"objects",component:Qi,buttons:o}})),s=qe({scores:$i(e.res),biplot:tc(e.res),variance:ec(e.res),distance:Zi(e.res)});let c=ee(qe({scores:_r(s.scores),biplot:_r(s.biplot),variance:_r(s.variance),distance:_r(s.distance)}));we(()=>{l(c).scores.plotType!=="p"?(s.scores.comp1.hidden=!0,s.scores.showEllipse.hidden=!0,l(c).scores.showEllipse=!1):(s.scores.comp1.hidden=!1,s.scores.showEllipse.hidden=!1),l(c).scores.plotType==="l"||l(c).scores.plotType==="b"?(s.scores.colorBy.hidden=!0,l(c).scores.colorBy="none"):s.scores.colorBy.hidden=!1,l(c).scores.colorBy==="variable"?s.scores.colorByVar.hidden=!1:s.scores.colorByVar.hidden=!0,l(c).scores.colorBy==="groups"&&l(c).scores.plotType==="p"?s.scores.confEllipse.hidden=!1:(s.scores.confEllipse.hidden=!0,l(c).scores.confEllipse="none")});const u=y(()=>({res:e.res,model:e.model,data:e.data})),f={markOutlier:e.markOutlier,showContributions:e.showContributions};Hi(t,{get plots(){return l(a)},get controls(){return s},get props(){return l(u)},get callbacks(){return f},get params(){return l(c)},set params(d){I(c,d,!0)}}),be()}var jh=H('<div class="data-loader svelte-1v7q3pk"><!></div>'),Fh=H('<div class="outliers-pane svelte-1v7q3pk"><!></div>'),qh=H('<div class="buttons"><!></div>'),Bh=H('<div class="model-dowloader svelte-1v7q3pk"><!></div> <div class="result-stats svelte-1v7q3pk"><!></div>',1),Oh=H('<p class="svelte-1v7q3pk"><strong>Step 1.</strong></p> <p class="svelte-1v7q3pk">Load file with PCA model you created earlier in tab <strong>Train</strong></p>',1),Vh=H('<p class="svelte-1v7q3pk"><strong>Step 2.</strong></p> <p class="svelte-1v7q3pk">Load your dataset set from a CSV file. The interface and selection steps are similar to the ones you used in <em>Train</em> tab. However, in this case you do not need to specify all details for header, just select if the new dataset has header as a first row or not. All values will be inherited from the model object.</p> <p class="svelte-1v7q3pk"><strong>It is important that the new dataset has same variables as the training set used to create the model.</strong></p>',1),Dh=H('<div class="help-text svelte-1v7q3pk"><p class="svelte-1v7q3pk">In this tab you can project new data points to a previosly trained PCA model and explore main outcomes: scores, distances and variances.</p> <!> <p class="svelte-1v7q3pk"></p></div>'),Yh=H('<!> <div class="app-container svelte-1v7q3pk"><div class="app-controls svelte-1v7q3pk"><div class="model-loader svelte-1v7q3pk"><!></div> <!> <!> <!></div> <div class="app-content svelte-1v7q3pk"><!></div></div>',1);function Wh(t,e){pe(e,!0);const r=y(()=>e.session.new);let o=ee(-1),a=ee(1),s=ee(!1);function c(L){if(L<0||L>l(r).newres.nrows-1)return;const D=l(r).newres.objindices[L];D>=0&&!l(r).outliers.includes(D)&&(l(r).outliers.push(D),l(r).newres=null)}function u(){l(r).outliers=[],l(r).newres=null}function f(){l(r).outliers.pop(),l(r).newres=null}function d(L,D){L<0||(I(o,L,!0),I(s,!0))}function v(){I(s,!1),I(o,-1),I(a,1)}we(()=>{l(r).model===null&&(l(r).newset=null)}),we(()=>{l(r).newset===null&&(l(r).outliers=[],l(r).newres=null)}),we(()=>{const L=kr(()=>JSON.stringify(e.session,Vl));e.backupSession(L,l(r).model,l(r).newset,l(r).newres)});var h=Yh(),g=K(h);{var m=L=>{{let D=y(()=>({new:l(r).newres}));Ui(L,{get model_getter(){return It},get res_getter(){return br},get model(){return l(r).model},get res(){return l(D)},closeModal:v,get ncomp(){return l(a)},get selected(){return l(o)}})}};Y(g,L=>{l(s)&&L(m)})}var b=R(g,2),w=O(b),p=O(w),_=O(p);Lh(_,{get model(){return l(r).model},set model(L){l(r).model=L}});var k=R(p,2);{var A=L=>{var D=jh(),W=O(D);mi(W,{get WASM(){return e.WASM},get outliers(){return l(r).outliers},get model(){return l(r).model},className:"Group",csvOnly:!1,get dataset(){return l(r).newset},set dataset(z){l(r).newset=z},get resobj(){return l(r).newres},set resobj(z){l(r).newres=z}}),M(L,D)};Y(k,L=>{l(r).model&&L(A)})}var E=R(k,2);{var C=L=>{var D=Fh(),W=O(D);pi(W,{get dataset(){return l(r).newset},get outliers(){return l(r).outliers},resetOutliers:u,undoOutliers:f}),M(L,D)};Y(E,L=>{l(r).outliers&&l(r).outliers.length>0&&L(C)})}var S=R(E,2);{var T=L=>{var D=Bh(),W=K(D),z=O(W);ie(z,{label:"Download",children:(V,X)=>{var Q=qh(),J=O(Q);ht(J,{text:"Res (new)",onclick:()=>Zo(l(r).newres,l(r).newset,"new",l(r).outliers,l(r).model)}),M(V,Q)},$$slots:{default:!0}});var G=R(W,2),ne=O(G);{let V=y(()=>({new:l(r).newres}));gi(ne,{get res(){return l(V)}})}M(L,D)};Y(S,L=>{l(r).newres&&L(T)})}var P=R(w,2),N=O(P);{var B=L=>{var D=Dh(),W=R(O(D),2);{var z=ne=>{var V=Oh();M(ne,V)},G=ne=>{var V=he(),X=K(V);{var Q=J=>{var te=Vh();M(J,te)};Y(X,J=>{l(r).newset||J(Q)},!0)}M(ne,V)};Y(W,ne=>{l(r).model?ne(G,!1):ne(z)})}M(L,D)},F=L=>{var D=he(),W=K(D);{var z=G=>{var ne=he(),V=K(ne);Rn(V,()=>l(r).neweres,X=>{{let Q=y(()=>({new:l(r).newset})),J=y(()=>({new:l(r).newres}));Ih(X,{markOutlier:c,showContributions:d,get data(){return l(Q)},get res(){return l(J)},get model(){return l(r).model}})}}),M(G,ne)};Y(W,G=>{l(r).model&&l(r).newres&&l(r).newset&&G(z)})}M(L,D)};Y(N,L=>{l(r).newres?L(F,!1):L(B)})}M(t,h),be()}function rc(t,e){I(e,!0)}function Uh(t,e,r){const o=Jo(new Date),a=e.appID+"-session-"+o+".json";l(r).date=o;const s=JSON.stringify(l(r),Vl),c=new Blob([s],{type:"text/json"}),u=window.URL.createObjectURL(c),f=document.createElement("a");f.setAttribute("href",u),f.setAttribute("download",a),f.click()}function Hh(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var Gh=H('<sup style="color:red">β</sup>'),Xh=H('<li><button class="svelte-1cyr8za"> </button></li>'),Kh=H("<div><!></div>"),Jh=H('<div class="info-container svelte-1cyr8za"><!></div>'),Qh=H('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"/> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"><!></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function Zh(t,e){pe(e,!0);let r=j(e,"tabs",19,()=>[]),o=j(e,"isBeta",3,!1);const a="mdatools-"+e.appID;let s=ee(!1),c=ee(void 0),u=ee("Current session "),f=ee(!1);function d(E){I(u,E,!0),I(f,!0),setTimeout(()=>{I(u,"Current session "),I(f,!1)},1e3)}function v(){I(s,!1)}function h(E){l(c).tab=E}function g(){const E=indexedDB.open(a,1);E.onsuccess=C=>{const T=C.target.result.transaction(e.appID,"readwrite");T.objectStore(e.appID).delete("session"),T.oncomplete=()=>{I(c,e.initSession(),!0),d("Session was reinitialzed.")},T.onerror=()=>console.error("Failed to session from DB.")}}function m(E,C){window.localStorage.removeItem(e.appID+"-blocked");const S=indexedDB.open(a,1);S.onsuccess=T=>{const B=T.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);B.put(E,"session"),B.put(Jo(new Date),"session-update")}}function b(){new Promise((E,C)=>{const S=indexedDB.open(a,1);S.onsuccess=T=>{const F=T.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");F.onsuccess=()=>E(F.result),F.onerror=()=>C(F.error)}}).then(E=>{w(E),I(u,"Last session is restored "),I(f,!0),setTimeout(()=>{I(u,"Current session "),I(f,!1)},1500)}).catch(E=>{console.error(E),I(c,e.initSession(),!0)})}function w(E){if(!E||E==="undefined"){I(c,e.initSession(),!0);return}const C=JSON.parse(E,Ko);I(c,e.checkSession(C)?C:e.initSession(e.appID),!0)}function p(E){const C=new FileReader;C.onload=()=>{w(C.result),E.target.value=""},C.readAsText(E.target.files[0])}Wu(()=>{const E=e.appID,C=indexedDB.open(a,1);C.onupgradeneeded=S=>{const T=S.target.result;T.objectStoreNames.contains(E)||T.createObjectStore(E)},C.onsuccess=S=>{b()}});var _=he(),k=K(_);{var A=E=>{var C=Qh(),S=O(C),T=O(S),P=O(T),N=R(P,2),B=O(N),F=R(B);{var L=de=>{var fe=Gh();M(de,fe)};Y(F,de=>{o()&&de(L)})}var D=R(N,2),W=O(D),z=R(T,2);et(z,21,r,nt,(de,fe,re)=>{var ce=Xh();let ae;var ge=O(ce);ge.__click=()=>h(re),ge.__keydown=()=>h(re);var ye=O(ge);le(ue=>{ae=gt(ce,1,"nav-item svelte-1cyr8za",null,ae,ue),ke(ye,l(fe).name)},[()=>({selected:l(c).tab===re})]),M(de,ce)});var G=R(S,2),ne=O(G);Rn(ne,()=>l(c).date,de=>{var fe=he(),re=K(fe);et(re,17,r,nt,(ce,ae,ge)=>{var ye=Kh();let ue;var Le=O(ye);el(Le,()=>l(ae).component,(Ne,We)=>{We(Ne,{get WASM(){return e.WASM},get session(){return l(c)},backupSession:m})}),le(Ne=>ue=gt(ye,1,"tab-content svelte-1cyr8za",null,ue,Ne),[()=>({hidden:l(c).tab!==ge})]),M(ce,ye)}),M(de,fe)});var V=R(G,2),X=O(V);let Q;var J=O(X),te=O(J),oe=R(J,2),$=O(oe);$.__change=p;var se=R(oe,2);se.__click=[Uh,e,c];var Te=R(se,2);Te.__click=[Hh,g];var Ie=R(X,2),Ce=O(Ie);Ce.__click=[rc,s],Ce.__keydown=[rc,s];var ve=R(Ce,2);Er(ve,()=>e.footer);var _e=R(V,2);{var je=de=>{va(de,{closeModal:v,children:(fe,re)=>{var ce=Jh(),ae=O(ce);Er(ae,()=>e.info),M(fe,ce)},$$slots:{default:!0}})};Y(_e,de=>{l(s)&&de(je)})}le(de=>{q(P,"alt",e.appShortTitle),ke(B,e.appTitle),ke(W,e.appSlogan),Q=gt(X,1,"session svelte-1cyr8za",null,Q,de),ke(te,l(u))},[()=>({"no-buttons":l(f)})]),M(E,C)};Y(k,E=>{l(c)&&E(A)})}M(t,_),be()}dt(["click","keydown","change"]);const um="modulepreload",fm=function(t){return"/"+t},dm={},$h=function(e,r,o){let a=Promise.resolve();function s(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};async function em(t={}){var lc;var e,r=t,o=typeof window=="object",a=typeof WorkerGlobalScope<"u",s=typeof process=="object"&&((lc=process.versions)==null?void 0:lc.node)&&process.type!="renderer";if(s){const{createRequire:U}=await $h(()=>Promise.resolve().then(()=>lm),void 0);var c=U(Je&&Je.tagName.toUpperCase()==="SCRIPT"&&Je.src||new URL("pca.js",document.baseURI).href)}var u=(U,Z)=>{throw Z},f=Je&&Je.tagName.toUpperCase()==="SCRIPT"&&Je.src||new URL("pca.js",document.baseURI).href,d="";function v(U){return r.locateFile?r.locateFile(U,d):d+U}var h,g;if(s){var m=c("fs");f.startsWith("file:")&&(d=c("path").dirname(c("url").fileURLToPath(f))+"/"),g=U=>{U=A(U)?new URL(U):U;var Z=m.readFileSync(U);return Z},h=async(U,Z=!0)=>{U=A(U)?new URL(U):U;var me=m.readFileSync(U,Z?void 0:"utf8");return me},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),u=(U,Z)=>{throw process.exitCode=U,Z}}else if(o||a){try{d=new URL(".",f).href}catch{}a&&(g=U=>{var Z=new XMLHttpRequest;return Z.open("GET",U,!1),Z.responseType="arraybuffer",Z.send(null),new Uint8Array(Z.response)}),h=async U=>{if(A(U))return new Promise((me,$e)=>{var Ke=new XMLHttpRequest;Ke.open("GET",U,!0),Ke.responseType="arraybuffer",Ke.onload=()=>{if(Ke.status==200||Ke.status==0&&Ke.response){me(Ke.response);return}$e(Ke.status)},Ke.onerror=$e,Ke.send(null)});var Z=await fetch(U,{credentials:"same-origin"});if(Z.ok)return Z.arrayBuffer();throw new Error(Z.status+" : "+Z.url)}}var b=console.log.bind(console),w=console.error.bind(console),p,_=!1,k,A=U=>U.startsWith("file://"),E,C,S,T,P,N,B=!1;function F(){var U=S.buffer;T=new Int8Array(U),P=new Uint8Array(U),r.HEAP32=new Int32Array(U),N=new Uint32Array(U),r.HEAPF64=new Float64Array(U),new BigInt64Array(U),new BigUint64Array(U)}function L(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)fe(r.preRun.shift());ve(de)}function D(){B=!0,vl.i()}function W(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)je(r.postRun.shift());ve(_e)}var z=0,G=null;function ne(U){var Z;z++,(Z=r.monitorRunDependencies)==null||Z.call(r,z)}function V(U){var me;if(z--,(me=r.monitorRunDependencies)==null||me.call(r,z),z==0&&G){var Z=G;G=null,Z()}}function X(U){var me;(me=r.onAbort)==null||me.call(r,U),U="Aborted("+U+")",w(U),_=!0,U+=". Build with -sASSERTIONS for more info.";var Z=new WebAssembly.RuntimeError(U);throw C==null||C(Z),Z}var Q;function J(){return r.locateFile?v("pca_wasm.wasm"):new URL("/pca/pca.wasm",Je&&Je.tagName.toUpperCase()==="SCRIPT"&&Je.src||new URL("pca.js",document.baseURI).href).href}function te(U){if(U==Q&&p)return new Uint8Array(p);if(g)return g(U);throw"both async and sync fetching of the wasm failed"}async function oe(U){if(!p)try{var Z=await h(U);return new Uint8Array(Z)}catch{}return te(U)}async function $(U,Z){try{var me=await oe(U),$e=await WebAssembly.instantiate(me,Z);return $e}catch(Ke){w(`failed to asynchronously prepare wasm: ${Ke}`),X(Ke)}}async function se(U,Z,me){if(!U&&!A(Z)&&!s)try{var $e=fetch(Z,{credentials:"same-origin"}),Ke=await WebAssembly.instantiateStreaming($e,me);return Ke}catch(it){w(`wasm streaming compile failed: ${it}`),w("falling back to ArrayBuffer instantiation")}return $(Z,me)}function Te(){return{a:om}}async function Ie(){function U(it,ct){return vl=it.exports,S=vl.h,F(),ba(vl),V(),vl}ne();function Z(it){return U(it.instance)}var me=Te();if(r.instantiateWasm)return new Promise((it,ct)=>{r.instantiateWasm(me,(ft,ur)=>{it(U(ft))})});Q??(Q=J());var $e=await se(p,Q,me),Ke=Z($e);return Ke}class Ce{constructor(Z){fr(this,"name","ExitStatus");this.message=`Program terminated with exit(${Z})`,this.status=Z}}var ve=U=>{for(;U.length>0;)U.shift()(r)},_e=[],je=U=>_e.push(U),de=[],fe=U=>de.push(U),re=!0,ce=U=>$l(U),ae=()=>Et(),ge=()=>X(""),ye=0,ue=()=>{re=!1,ye=0},Le={},Ne=U=>{if(U instanceof Ce||U=="unwind")return k;u(1,U)},We=()=>re||ye>0,Ue=U=>{var Z;k=U,We()||((Z=r.onExit)==null||Z.call(r,U),_=!0),u(U,new Ce(U))},Be=(U,Z)=>{k=U,Ue(U)},Fe=Be,xe=()=>{if(!We())try{Fe(k)}catch(U){Ne(U)}},Re=U=>{if(!_)try{U(),xe()}catch(Z){Ne(Z)}},ze=()=>performance.now(),Kt=(U,Z)=>{if(Le[U]&&(clearTimeout(Le[U].id),delete Le[U]),!Z)return 0;var me=setTimeout(()=>{delete Le[U],Re(()=>Tt(U,ze()))},Z);return Le[U]={id:me,timeout_ms:Z},0},Sr=()=>Date.now(),Mr=()=>2147483648,Ee=(U,Z)=>Math.ceil(U/Z)*Z,Pe=U=>{var Z=S.buffer.byteLength,me=(U-Z+65535)/65536|0;try{return S.grow(me),F(),1}catch{}},Se=U=>{var Z=P.length;U>>>=0;var me=Mr();if(U>me)return!1;for(var $e=1;$e<=4;$e*=2){var Ke=Z*(1+.2/$e);Ke=Math.min(Ke,U+100663296);var it=Math.min(me,Ee(Math.max(U,Ke),65536)),ct=Pe(it);if(ct)return!0}return!1},Oe=[null,[],[]],wt=typeof TextDecoder<"u"?new TextDecoder:void 0,cr=(U,Z,me,$e)=>{for(var Ke=Z+me;U[Z]&&!(Z>=Ke);)++Z;return Z},Bt=(U,Z=0,me,$e)=>{var Ke=cr(U,Z,me);if(Ke-Z>16&&U.buffer&&wt)return wt.decode(U.subarray(Z,Ke));for(var it="";Z<Ke;){var ct=U[Z++];if(!(ct&128)){it+=String.fromCharCode(ct);continue}var ft=U[Z++]&63;if((ct&224)==192){it+=String.fromCharCode((ct&31)<<6|ft);continue}var ur=U[Z++]&63;if((ct&240)==224?ct=(ct&15)<<12|ft<<6|ur:ct=(ct&7)<<18|ft<<12|ur<<6|U[Z++]&63,ct<65536)it+=String.fromCharCode(ct);else{var En=ct-65536;it+=String.fromCharCode(55296|En>>10,56320|En&1023)}}return it},Yt=(U,Z)=>{var me=Oe[U];Z===0||Z===10?((U===1?b:w)(Bt(me)),me.length=0):me.push(Z)},st=(U,Z,me)=>U?Bt(P,U,Z):"",Qe=(U,Z,me,$e)=>{for(var Ke=0,it=0;it<me;it++){var ct=N[Z>>2],ft=N[Z+4>>2];Z+=8;for(var ur=0;ur<ft;ur++)Yt(U,P[ct+ur]);Ke+=ft}return N[$e>>2]=Ke,0},Lt=U=>{var Z=r["_"+U];return Z},kt=(U,Z)=>{T.set(U,Z)},_t=U=>{for(var Z=0,me=0;me<U.length;++me){var $e=U.charCodeAt(me);$e<=127?Z++:$e<=2047?Z+=2:$e>=55296&&$e<=57343?(Z+=4,++me):Z+=3}return Z},ut=(U,Z,me,$e)=>{if(!($e>0))return 0;for(var Ke=me,it=me+$e-1,ct=0;ct<U.length;++ct){var ft=U.codePointAt(ct);if(ft<=127){if(me>=it)break;Z[me++]=ft}else if(ft<=2047){if(me+1>=it)break;Z[me++]=192|ft>>6,Z[me++]=128|ft&63}else if(ft<=65535){if(me+2>=it)break;Z[me++]=224|ft>>12,Z[me++]=128|ft>>6&63,Z[me++]=128|ft&63}else{if(me+3>=it)break;Z[me++]=240|ft>>18,Z[me++]=128|ft>>12&63,Z[me++]=128|ft>>6&63,Z[me++]=128|ft&63,ct++}}return Z[me]=0,me-Ke},rr=(U,Z,me)=>ut(U,P,Z,me),Zr=U=>yr(U),tt=U=>{var Z=_t(U)+1,me=Zr(Z);return rr(U,me,Z),me},Me=(U,Z,me,$e,Ke)=>{var it={string:Jt=>{var hl=0;return Jt!=null&&Jt!==0&&(hl=tt(Jt)),hl},array:Jt=>{var hl=Zr(Jt.length);return kt(Jt,hl),hl}};function ct(Jt){return Z==="string"?st(Jt):Z==="boolean"?!!Jt:Jt}var ft=Lt(U),ur=[],En=0;if($e)for(var An=0;An<$e.length;An++){var oc=it[me[An]];oc?(En===0&&(En=ae()),ur[An]=oc($e[An])):ur[An]=$e[An]}var _a=ft(...ur);function sm(Jt){return En!==0&&ce(En),ct(Jt)}return _a=sm(_a),_a};r.noExitRuntime&&(re=r.noExitRuntime),r.print&&(b=r.print),r.printErr&&(w=r.printErr),r.wasmBinary&&(p=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=Me;var Tt,$l,yr,Et;function ba(U){r._pcafit_wasm=U.j,r._malloc=U.k,r._free=U.l,r._pcapredict_wasm=U.m,r._pcvpca_wasm=U.n,r._prepfit_wasm=U.o,r._prepapply_wasm=U.p,Tt=U.q,$l=U.r,yr=U.s,Et=U.t}var om={c:ge,b:ue,d:Kt,g:Sr,e:Se,f:Qe,a:Ue},vl=await Ie();function wa(){if(z>0){G=wa;return}if(L(),z>0){G=wa;return}function U(){var Z;r.calledRun=!0,!_&&(D(),E==null||E(r),(Z=r.onRuntimeInitialized)==null||Z.call(r),W())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),U()},1)):U()}function am(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return am(),wa(),B?e=r:e=new Promise((U,Z)=>{E=U,C=Z}),e}var tm=H('<p>Current release: <span>2.1.4</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="/pca/Wines.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video lessons</a></p>'),rm=H(`<h2>Principal Component Analysis</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using PCA models for data exploration
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>Check out YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video-lessons</a></p> <h3>v. 2.1.4</h3> <p class="release-info">released 1/08/2025</p> <ul><li>Fixed issue with data loader when trim trails is used in preprocessing.</li></ul> <h3>v. 2.1.3</h3> <p class="release-info">released 31/07/2025</p> <ul><li>Built in preprocessing functionality.</li> <li>Added ability to read SPC files in Predict tab.</li> <li>Added PV-set generation and validation.</li> <li>Numerous small improvements and bug fixes.</li> <li>Improvements to CSV files with results.</li></ul>`,1);function nm(t,e){pe(e,!1);function r(c){c.train.calset=null,c.new.model=null,c.tab=0}function o(c){const u=Object.keys(c);if(!["date","tab","train","new"].every(v=>u.includes(v)))return!1;const f=Object.keys(c.train);if(!["model","calset","calsetp","pvset","calres","pvres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(v=>f.includes(v)))return!1;const d=Object.keys(c.new);return!!["model","newset","newres","outliers"].every(v=>d.includes(v))}function a(){return{date:Jo(new Date),tab:0,train:{model:0,calset:0,calsetp:0,pvset:0,calres:0,pvres:0,outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},new:{model:0,newset:0,newres:0,outliers:[]}}}const s=[{name:"Train",label:"train",component:Sh},{name:"Project",label:"new",component:Wh}];Ou(),Zh(t,{appID:"pca",appTitle:"PCA",appShortTitle:"PCA",appSlogan:"Principal component analysis",get WASM(){return em},get tabs(){return s},initSession:a,checkSession:o,resetSession:r,footer:f=>{var d=tm();M(f,d)},info:f=>{var d=rm();M(f,d)},$$slots:{footer:!0,info:!0}}),be()}xu(nm,{target:document.body});const lm=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pca.js.map
