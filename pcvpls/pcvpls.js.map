{"version":3,"file":"pcvpls.js","sources":["../node_modules/svelte/src/runtime/internal/utils.js","../node_modules/svelte/src/runtime/internal/dom.js","../node_modules/svelte/src/runtime/internal/lifecycle.js","../node_modules/svelte/src/runtime/internal/scheduler.js","../node_modules/svelte/src/runtime/internal/transitions.js","../node_modules/svelte/src/runtime/internal/await_block.js","../node_modules/svelte/src/runtime/internal/each.js","../node_modules/svelte/src/runtime/internal/Component.js","../node_modules/svelte/src/shared/version.js","../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../node_modules/mdatools/src/stat/index.js","../node_modules/mdatools/src/misc/index.js","../node_modules/mdatools/src/distributions/index.js","../node_modules/mdatools/src/decomp/index.js","../node_modules/mdatools/src/arrays/index.js","../src/controls/Button.svelte","../src/controls/ButtonCancel.svelte","../src/controls/Container.svelte","../src/controls/Range.svelte","../src/controls/Select.svelte","../src/controls/Spinner.svelte","../src/controls/PlotTypeSelector.svelte","../src/controls/CompSelector.svelte","../src/controls/FileSelector.svelte","../src/DataLoader.svelte","../node_modules/mdatools/src/prep/index.js","../node_modules/mdatools/src/models/index.js","../src/wasm/pcvpca.js","../src/wasm/misc.js","../src/wasm/pcvpls.js","../src/wasm/pcv_wasm.js","../src/PCVCalculator.svelte","../src/ModelCalculator.svelte","../node_modules/svelte/src/runtime/store/index.js","../node_modules/svelte-plots-basic/src/Utils.js","../node_modules/svelte-plots-basic/src/2d/Axes.svelte","../node_modules/svelte-plots-basic/src/Colors.js","../node_modules/svelte-plots-basic/src/2d/AxisLines.svelte","../node_modules/svelte-plots-basic/src/2d/AxisTickLabels.svelte","../node_modules/svelte-plots-basic/src/2d/Axis.svelte","../node_modules/svelte-plots-basic/src/2d/XAxis.svelte","../node_modules/svelte-plots-basic/src/2d/YAxis.svelte","../node_modules/svelte-plots-basic/src/2d/Box.svelte","../node_modules/svelte-plots-basic/src/2d/Rectangles.svelte","../node_modules/svelte-plots-basic/src/2d/Segments.svelte","../node_modules/svelte-plots-basic/src/2d/Points.svelte","../node_modules/svelte-plots-basic/src/2d/Lines.svelte","../node_modules/svelte-plots-basic/src/2d/Heatmap.svelte","../node_modules/svelte-plots-basic/src/2d/Legend.svelte","../node_modules/svelte-plots-basic/src/2d/ColormapLegend.svelte","../src/plots/settings.js","../src/plots/AppLegend.svelte","../src/plots/BoxplotSeries.svelte","../src/plots/PlotSeries.svelte","../src/plots/DistancePlot.svelte","../src/plots/DistancePlotControls.svelte","../src/plots/ScoresPlot.svelte","../src/plots/ScoresPlotControls.svelte","../src/plots/VariancePlot.svelte","../src/plots/VariancePlotControls.svelte","../src/plots/PredictionsPlot.svelte","../src/plots/PredictionsPlotControls.svelte","../src/plots/RMSEPlot.svelte","../src/plots/RMSEPlotControls.svelte","../src/plots/ScalarsPlot.svelte","../src/plots/ScalarsPlotControls.svelte","../src/AppPlots.svelte","../src/AppContainer.svelte","../src/MainApp.svelte","../src/main.js","../__vite-browser-external"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { is_promise } from './utils.js';\nimport { check_outros, group_outros, transition_in, transition_out } from './transitions.js';\nimport { flush } from './scheduler.js';\nimport { get_current_component, set_current_component } from './lifecycle.js';\n\n/**\n * @template T\n * @param {Promise<T>} promise\n * @param {import('./private.js').PromiseInfo<T>} info\n * @returns {boolean}\n */\nexport function handle_promise(promise, info) {\n\tconst token = (info.token = {});\n\t/**\n\t * @param {import('./private.js').FragmentFactory} type\n\t * @param {0 | 1 | 2} index\n\t * @param {number} [key]\n\t * @param {any} [value]\n\t * @returns {void}\n\t */\n\tfunction update(type, index, key, value) {\n\t\tif (info.token !== token) return;\n\t\tinfo.resolved = value;\n\t\tlet child_ctx = info.ctx;\n\t\tif (key !== undefined) {\n\t\t\tchild_ctx = child_ctx.slice();\n\t\t\tchild_ctx[key] = value;\n\t\t}\n\t\tconst block = type && (info.current = type)(child_ctx);\n\t\tlet needs_flush = false;\n\t\tif (info.block) {\n\t\t\tif (info.blocks) {\n\t\t\t\tinfo.blocks.forEach((block, i) => {\n\t\t\t\t\tif (i !== index && block) {\n\t\t\t\t\t\tgroup_outros();\n\t\t\t\t\t\ttransition_out(block, 1, 1, () => {\n\t\t\t\t\t\t\tif (info.blocks[i] === block) {\n\t\t\t\t\t\t\t\tinfo.blocks[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcheck_outros();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinfo.block.d(1);\n\t\t\t}\n\t\t\tblock.c();\n\t\t\ttransition_in(block, 1);\n\t\t\tblock.m(info.mount(), info.anchor);\n\t\t\tneeds_flush = true;\n\t\t}\n\t\tinfo.block = block;\n\t\tif (info.blocks) info.blocks[index] = block;\n\t\tif (needs_flush) {\n\t\t\tflush();\n\t\t}\n\t}\n\tif (is_promise(promise)) {\n\t\tconst current_component = get_current_component();\n\t\tpromise.then(\n\t\t\t(value) => {\n\t\t\t\tset_current_component(current_component);\n\t\t\t\tupdate(info.then, 1, info.value, value);\n\t\t\t\tset_current_component(null);\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tset_current_component(current_component);\n\t\t\t\tupdate(info.catch, 2, info.error, error);\n\t\t\t\tset_current_component(null);\n\t\t\t\tif (!info.hasCatch) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t// if we previously had a then/catch block, destroy it\n\t\tif (info.current !== info.pending) {\n\t\t\tupdate(info.pending, 0);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tif (info.current !== info.then) {\n\t\t\tupdate(info.then, 1, info.value, promise);\n\t\t\treturn true;\n\t\t}\n\t\tinfo.resolved = /** @type {T} */ (promise);\n\t}\n}\n\n/** @returns {void} */\nexport function update_await_block_branch(info, ctx, dirty) {\n\tconst child_ctx = ctx.slice();\n\tconst { resolved } = info;\n\tif (info.current === info.then) {\n\t\tchild_ctx[info.value] = resolved;\n\t}\n\tif (info.current === info.catch) {\n\t\tchild_ctx[info.error] = resolved;\n\t}\n\tinfo.block.p(child_ctx, dirty);\n}\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.2';\nexport const PUBLIC_VERSION = '4';\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","/*************************************************/\n/*    Methods for computing statistics           */\n/*************************************************/\n\nimport { isnumber, isindex, isvector, vector, Vector, _sort } from '../arrays/index.js';\n\n\n/**\n * Compute median of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} median of x.\n *\n */\nexport function median(x) {\n   return quantile(x, 0.5)\n}\n\n/**\n * Compute inter-quartile range for vector of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} IQR of x (Q3 - Q1).\n *\n */\nexport function iqr(x) {\n   return quantile(x, 0.75) - quantile(x, 0.25);\n}\n\n\n/**\n * Computes a p-th quantile/quantiles for a numeric vector.\n *\n * @param {Vector} x - vector with values.\n * @param {number|Array|Vector} p - probability (one value or a vector).\n *\n * @returns {number|Vector} quantile value or a vector with quantiles.\n */\nexport function quantile(x, p) {\n\n   if (isvector(x)) {\n      return quantile(x.v, p);\n   }\n\n   if (isvector(p)) {\n      return quantile(x, p.v);\n   }\n\n   const n = x.length;\n\n   if (!Array.isArray(p)) p = [p];\n\n   if (!isnumber(p[0]) || min(p) < 0 || max(p) > 1) {\n      throw new Error(\"Parameter 'p' must be between 0 and 1 (both included).\");\n   }\n\n   function q(x, p) {\n      const h = (n - 1) * p + 1;\n      const n1 = Math.floor(h);\n      const n2 = Math.ceil(h);\n      return x[n1 - 1] + (x[n2 - 1] - x[n1 - 1]) * (h - Math.floor(h));\n   }\n\n   const xs = _sort(x);\n   const out =  p.map(v => q(xs, v));\n   return p.length == 1 ? out[0] : vector(out);\n}\n\n\n/**\n * Counts how many values from a vector falls into provided intervals (bins).\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} bins - vector with bins boundaries.\n *\n * @returns {Vector} vector with counts for each bean.\n *\n */\nexport function count(x, bins) {\n\n   if (isvector(x)) {\n      return count(x.v, isvector(bins) ? bins.v : bins);\n   }\n\n   const n = bins.length;\n\n   // add a bit extra to right side of the last bin\n   bins[n - 1] = bins[n - 1] * 1.0001\n\n   // count\n   let counts = new Vector.valuesConstructor(n - 1);\n   for (let i = 0; i < x.length; i++) {\n      for (let j = 0; j < n - 1; j++) {\n         if (x[i] >= bins[j] && x[i] < bins[j + 1]) counts[j] += 1;\n      }\n   }\n\n   return new Vector(counts);\n}\n\n\n/**\n * Computes middle points between values of a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with middle points.\n *\n */\nexport function mids(x) {\n\n   if (isvector(x)) {\n      return mids(x.v);\n   }\n\n   const out = new Vector.valuesConstructor(x.length - 1);\n   for (let i = 0; i < out.length; i++) {\n      out[i] = 0.5 * (x[i] + x[i + 1]);\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Splits range of vector values into equal intervals.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} n - number of intervals.\n *\n * @returns {Vector} vector with boundaries of the intervals.\n *\n */\nexport function split(x, n) {\n\n   if (isvector(x)) {\n      split(x.v, n);\n   }\n\n   const rn = range(x);\n\n   if (rn[0] === rn[1]) {\n      throw new Error('split: values in a vector \"x\" should vary.');\n   }\n\n   const by = (rn[1] - rn[0]) / n;\n   return Vector.seq(rn[0], rn[1], by);\n}\n\n\n/**\n * Computes difference between all adjacent values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with the differences.\n *\n */\nexport function diff(x) {\n\n   if (isvector(x)) {\n      return diff(x.v);\n   }\n\n   const out = new Vector.valuesConstructor(x.length - 1);\n   for (let i = 0; i < x.length - 1; i++) {\n      out[i] = x[i + 1] - x[i];\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Generate probability points for QQ plot.\n *\n * @param {number} n - number of points.\n *\n * @returns {Vector} a sequence of probabilities between 0 and 1.\n *\n */\nexport function ppoints(n) {\n\n   const a = n < 10 ? 3.0/8.0 : 0.5;\n   const out = new Vector.valuesConstructor(n);\n\n   for (let i = 0; i < n; i++) {\n      out[i] = (i + 1 - a) / (n + (1 - a) - a);\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Computes cumulative sums for the vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vectors} vector with cumulative sums.\n *\n */\nexport function cumsum(x) {\n\n   if (isvector(x)) {\n      return cumsum(x.v);\n   }\n\n   let s = 0;\n   let out = new Vector.valuesConstructor(x.length);\n   for (let i = 0; i < x.length; i++) {\n      s += x[i];\n      out[i] = s\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Computes kurtosis of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} kurtosis of x.\n *\n */\nexport function kurtosis(x) {\n\n   if (isvector(x)) {\n      return kurtosis(x.v);\n   }\n\n   let n = x.length;\n   let m = mean(x);\n\n   let m4 = 0.0;\n   let m2 = 0.0;\n   for (let i = 0; i < n; i++) {\n      m2 = m2 + Math.pow((x[i] - m), 2);\n      m4 = m4 + Math.pow((x[i] - m), 4);\n   }\n\n   return (m4/n) / Math.pow((m2/n), 2);\n}\n\n\n/**\n * Computes skewness of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} skewness of x.\n *\n */\nexport function skewness(x) {\n\n   if (isvector(x)) {\n      return skewness(x.v);\n   }\n\n   let n = x.length;\n   let m = mean(x);\n\n   let m3 = 0.0;\n   let m2 = 0.0;\n   for (let i = 0; i < n; i++) {\n      m2 = m2 + Math.pow((x[i] - m), 2);\n      m3 = m3 + Math.pow((x[i] - m), 3);\n   }\n\n   return (m3/n) / Math.pow((m2/n), 1.5);\n}\n\n\n/**\n * Computes correlation between two vectors.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} y - vector with values.\n * @param {string} method - which method to use (\"pearson\" or \"spearman\").\n *\n * @returns {number} correlation between x and y.\n *\n */\nexport function cor(x, y, method = \"pearson\") {\n\n   if (isvector(x)) {\n      return cor(x.v, y.v, method);\n   }\n\n   if (method === \"spearman\") {\n      return cor(rank(x), rank(y));\n   }\n\n   return cov(x, y) / (sd(x) * sd(y));\n}\n\n\n/**\n * Computes covariance between two vectors.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} y - vector with values.\n * @param {boolean} [biased=false] - compute a biased version with n degrees of freedom or not (with n - 1).\n * @param {number} [mx=undefined] - mean of x values (if already known).\n * @param {number} [my=undefined] - mean of y values (if already known).\n *\n * @returns {number} covariance between x and y.\n *\n */\nexport function cov(x, y, biased = false, mx = undefined, my = undefined) {\n\n   if (isvector(x)) {\n      return cov(x.v, y.v, biased, mx, my);\n   }\n\n   const n = x.length;\n\n   if (y.length !== n) {\n      throw Error(\"Vectors 'x' and 'y' must have the same length.\");\n   }\n\n   if (n < 2) {\n      throw Error(\"Vectors 'x' and 'y' must have at least two values.\");\n   }\n\n   if (mx === undefined) mx = mean(x);\n   if (my === undefined) my = mean(y);\n\n   let s = 0;\n   for (let i = 0; i < n; i++) {\n      s = s + (x[i] - mx) * (y[i] - my);\n   }\n\n   return s / (biased ? n : n - 1);\n}\n\n\n/**\n * Returns ranks of values in a vector (ranks start from 1, not 0).\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with ranks.\n *\n */\nexport function rank(x) {\n\n   if (isvector(x)) {\n      return rank(x.v);\n   }\n\n   const y = [...x].sort((a, b) => a - b);\n\n   return new Vector(x.map(v => y.indexOf(v) + 1));\n}\n\n\n/**\n * Compute marginal range of values as [min, max]\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} m - margin as per cent of range (value between 0 and 1).\n *\n * @return {Array} array with two values, min and max.\n *\n */\nexport function mrange(x, m) {\n\n   if (isvector(x)) {\n      return mrange(x.v, m);\n   }\n\n   if (m === undefined) m = 0.10;\n   const r = range(x);\n   const d = (r[1] - r[0]) * m;\n\n   return [r[0] - d, r[1] + d];\n}\n\n\n/**\n * Compute range of values as [min, max].\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @return {Array} array with two values, min and max.\n *\n */\nexport function range(x) {\n\n   if (isvector(x)) {\n      return range(x.v);\n   }\n\n   let min = x[0];\n   let max = x[0];\n\n   for (let i = 1; i < x.length; i++) {\n      if (x[i] < min) min = x[i];\n      if (x[i] > max) max = x[i];\n   }\n\n   return [min, max];\n}\n\n\n/**\n * Compute norm2 of a vector (Euclidean distance).\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} norm value.\n *\n */\nexport function norm2(x) {\n\n   if (isvector(x)) {\n      return norm2(x.v);\n   }\n\n   return Math.sqrt(ssq(x));\n}\n\n\n/**\n * Compute sum of squared vector values\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} sum of squared values of x.\n *\n */\nexport function ssq(x) {\n\n   if (isvector(x)) {\n      return ssq(x.v);\n   }\n\n   let ssqv = 0;\n   const n = x.length;\n   for (let i = 0; i < n; i++) {\n      const v = x[i]\n      ssqv += v * v;\n   }\n\n   return ssqv;\n}\n\n\n/**\n * Compute standard deviation of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {boolean} [biased=false] - compute a biased value (n degrees of freedom) or unbiased (n - 1 degrees of freedom)\n *\n * @returns {number} standard deviation of x.\n *\n */\nexport function sd(x, biased) {\n\n   if (isvector(x)) {\n      return sd(x.v, biased);\n   }\n\n   return Math.sqrt(variance(x, biased));\n}\n\n\n/**\n * Compute variance of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {boolean} [biased=false] - compute a biased variance (n degrees of freedom) or unbiased (n - 1 degrees of freedom)\n *\n * @returns {number} variance of x.\n *\n */\nexport function variance(x, biased) {\n\n   if (biased === undefined) {\n      biased = false;\n   }\n\n   if (isvector(x)) {\n      return variance(x.v);\n   }\n\n   const m = mean(x);\n   let s = 0;\n   for (let i = 0; i < x.length; i++) {\n      const d = (x[i] - m);\n      s = s + d * d ;\n   }\n\n   return s / (biased ? x.length : (x.length - 1));\n}\n\n\n/**\n * Compute average of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} mean of x.\n *\n */\nexport function mean(x) {\n\n   if (isvector(x)) {\n      return mean(x.v);\n   }\n\n   return sum(x) / x.length;\n}\n\n\n/**\n * Compute sum of all values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} sum of x.\n *\n */\nexport function sum(x) {\n\n   if (isvector(x)) {\n      return sum(x.v);\n   }\n\n   let s = 0;\n   for (let i = 0; i < x.length; i++) {\n      s = s + x[i];\n   }\n\n   return s;\n}\n\n\n/**\n * Compute product of all values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} product of x.\n *\n */\nexport function prod(x) {\n\n   if (isvector(x)) {\n      return prod(x.v);\n   }\n\n   let p = 1;\n   for (let i = 0; i < x.length; i++) {\n      p = p * x[i];\n   }\n\n   return p;\n}\n\n\n/**\n * Find the smallest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} the smallest value.\n *\n */\nexport function min(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return x.v[minind(x.v) - 1];\n   }\n\n   return x[minind(x) - 1];\n}\n\n\n/**\n * Find index of the smallest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} index of the smallest value (starting from 1).\n *\n */\nexport function minind(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return minind(x.v);\n   }\n\n   let outind = 1;\n   let out = x[0]\n   for (let i = 2; i <= x.length; i++) {\n      if (x[i - 1] < out) {\n         outind = i;\n         out = x[i - 1];\n      }\n   }\n\n   return outind;\n}\n\n\n/**\n * Find the largest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} the largest value.\n *\n */\nexport function max(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return x.v[maxind(x.v) - 1];\n   }\n\n   return x[maxind(x) - 1];\n}\n\n\n/**\n * Find index of the largest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} index of the largest value (starting from 1).\n *\n */\nexport function maxind(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return maxind(x.v);\n   }\n\n   let outind = 1;\n   let out = x[0]\n   for (let i = 2; i <= x.length; i++) {\n      if (x[i - 1] > out) {\n         outind = i;\n         out = x[i - 1];\n      }\n   }\n\n   return outind;\n}\n\n\n","/*************************************************/\n/*    Misc extra methods for statistics          */\n/*************************************************/\n\nimport { isvector, vector, Index, Vector } from \"../arrays/index.js\";\nimport { prod, quantile } from \"../stat/index.js\";\n\n\n/**\n * Finds index of value in x which is closest to the value a.\n *\n * @param {Array|Vector} x - a vector with values.\n * @param {number} a - a value\n *\n * @returns {number} the index value (starts from 1).\n *\n */\nexport function closestind(x, a) {\n\n   if (isvector(x)) {\n      return closestind(x.v, a);\n   }\n\n   const c = x.reduce((prev, curr) => Math.abs(curr - a) < Math.abs(prev - a) ? curr : prev);\n   return x.indexOf(c) + 1;\n}\n\n\n/**\n * Computes numeric integral for function \"f\" with limits (a, b).\n *\n * @param {function} f - a reference to a function.\n * @param {number} a - lower limit for integration.\n * @param {number} b - upper limit for integration.\n * @param {number} [acc=0.000001] - absolute accuracy.\n * @param {number} [eps=0.00001] - relative accuracy.\n * @param {number[]} oldfs - vector of values needed for recursion.\n *\n * @returns {number} result of integration.\n *\n */\nexport function integrate(f, a, b, acc, eps, oldfs) {\n\n   if (acc === undefined) {\n      acc = 0.000001;\n   }\n\n   if (eps === undefined) {\n      eps = 0.00001\n   }\n\n   if (typeof(a) !== \"number\" || typeof(b) !== \"number\") {\n      throw Error(\"Parameters 'a' and 'b' must be numbers.\");\n   }\n\n   if (b < a) {\n      throw Error(\"Parameter 'b' must be larger 'a'.\");\n   }\n\n   // special case when left limit is minus infinity\n   if (a === -Infinity && b !== Infinity) {\n      return integrate((t) => f(b - (1 - t) / t) / (t ** 2), 0, 1);\n   }\n\n   // special case when right limit is plus infinity\n   if (a !== -Infinity && b === Infinity) {\n      return integrate((t) => f(a + (1 - t) / t) / (t ** 2), 0, 1);\n   }\n\n   // special case when both limits are infinite\n   if (a === -Infinity && b === Infinity) {\n      return integrate((t) => (f((1 - t) / t) + f((t - 1) / t)) / t ** 2, 0, 1);\n   }\n\n   // constants for splitting the integration interval\n   const x = [1/6, 2/6, 4/6, 5/6];\n   const w = [2/6, 1/6, 1/6, 2/6];\n   const v = [1/4, 1/4, 1/4, 1/4];\n   const p = [1, 0, 0, 1];\n\n   let n = x.length, h = b - a;\n   let fs;\n\n   if (oldfs === undefined) {\n      fs = x.map(v => f(a + v * h));\n   } else {\n      fs = new Array(n);\n      for (let k = 0, i = 0; i < n; i++) {\n         fs[i] = p[i] === 1 ? f(a + x[i] * h) : oldfs[k++];\n      }\n   }\n\n   let q4 = 0, q2 = 0;\n   for (let i = 0; i < n; i++) {\n      q4 += w[i] * fs[i] * h;\n      q2 += v[i] * fs[i] * h;\n   }\n\n   if (isNaN(q2) || isNaN(q4)) {\n      throw Error(\"Numerical integration ended up with NaN number.\")\n   }\n\n   let tol = acc + eps * Math.abs(q4);\n   let err = Math.abs((q4 - q2)/3);\n\n   if (err < tol) return q4;\n\n   acc = acc / Math.sqrt(2.);\n   const mid = (a + b) / 2;\n   const left = fs.filter((v, i) => i < n/2);\n   const right = fs.filter((v, i) => i >= n/2);\n\n   const ql = integrate(f, a, mid, eps, acc, left);\n   const qr = integrate(f, mid, b, eps, acc, right);\n\n   return ql + qr;\n}\n\n\n/**\n * Finds outliers in a vector based on inter-quartile range distance.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} q1 - first quartile (optional parameter).\n * @param {number} q3 - third quartile (optional parameter).\n *\n * @returns {Vector} vector with outliers or empty vector if none were found.\n *\n */\nexport function getoutliers(x, q1 = undefined, q3 = undefined) {\n\n   if (q1 === undefined) q1 = quantile(x, 0.25);\n   if (q3 === undefined) q3 = quantile(x, 0.75);\n\n   const iqr15 = (q3 - q1) * 1.5;\n   const bl = q1 - iqr15\n   const bu = q3 + iqr15\n\n   return new Vector(x.v.filter(v => v < bl || v > bu));\n}\n\n\n/**\n * Rounds number (or vector of numbers) to given amount of decimals.\n *\n * @param {numbr|Array|Vector} x - a number or a vector with values.\n *\n * @return {number|Array|Vector} a number or a vector with rounded values.\n *\n */\nexport function round(x, n = 0) {\n\n   if (isvector(x)) {\n      return vector(x.v.map(v => round(v, n)));\n   }\n\n   if (Array.isArray(x)) {\n      return x.map(v => round(v, n));\n   }\n\n   return Number.parseFloat(x.toFixed(n));\n}\n\n\n/**\n * Generate combination of all levels of vectors.\n *\n * @param {...} args - a sequence of vectors.\n *\n * @returns {Array} array of arrays with values for each vector.\n *\n */\nexport function expandgrid(...args) {\n\n   const nargs = args.length;\n   const d = args.map(v => v.length);\n   let orep = prod(d);\n\n   let grid = Array(nargs);\n   let repFac = 1;\n\n   for (let i = 0; i < nargs; i++) {\n      const x = isvector(args[i]) ? args[i] : vector(args[i]);\n      const nx = x.length;\n      orep = orep / nx;\n      grid[i] = x.subset(Index.seq(1, nx).repeach(repFac).rep(orep));\n      repFac = repFac * nx;\n   }\n\n   return grid;\n}\n","/* =================================================================== */\n/*    Methods for statistical distributions                            */\n/* =================================================================== */\n\nimport { range } from '../stat/index.js';\nimport { isvector, vector, Vector } from '../arrays/index.js';\nimport { closestind, integrate } from '../misc/index.js';\n\n// threshold to switch between two approximation for chi-square distribution\nconst CHISQ_DOF_THRESHOLD = 30;\n// tolerance for chi-square distribution search\nconst CHISQ_TOL = 0.0000001;\n\n/**\n * Generates 'n' random numbers from a uniform distribution.\n *\n * @param {number} n - amount of numbers to generate.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {Vector} vector with generated random numbers.\n *\n */\nexport function runif(n, a = 0, b = 1) {\n   let out = Vector.zeros(n);\n   for (let i = 0; i < n; i++) {\n      out.v[i] = (a + Math.random() * (b - a));\n   }\n   return out;\n}\n\n\n/**\n * Cumulative distribution function for uniform distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function punif(x, a = 0, b = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => punif(v, a, b));\n   }\n\n   return x < a ? 0 : (x > b ? 1 : (x - a) / (b - a));\n}\n\n\n/**\n * Probability density function for uniform distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dunif(x, a = 0, b = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => dunif(v, a, b));\n   }\n\n   return x < a || x > b ? 0 : 1 / (b - a);\n}\n\n\n /**\n * Generates 'n' random numbers from a normal distribution.\n *\n * @param {number} n - amount of numbers to generate.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {Vector} vector with generated random numbers.\n */\nexport function rnorm(n, mu = 0, sigma = 1) {\n\n   let out = Vector.zeros(n);\n   for (let i = 0; i < n; i ++) {\n      const a = Math.sqrt(-2 * Math.log(Math.random()));\n      const b = 2 * Math.PI * Math.random();\n      out.v[i] = (a * Math.sin(b) * sigma + mu);\n   }\n\n   return out;\n}\n\n\n/**\n * Probability density function for normal distribution.\n *\n * @param {number|Vector} x - vector of values of a single value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dnorm(x, mu = 0, sigma = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => dnorm(v, mu, sigma));\n   }\n\n   const z = (x - mu) / sigma;\n   return Math.exp(-0.5 * z * z) / (Math.sqrt(2 * Math.PI) * sigma);\n}\n\n\n/**\n * Cumulative distribution function for normal distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pnorm(x, mu = 0, sigma = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => pnorm(v, mu, sigma));\n   }\n\n   const frac = 1 / (Math.sqrt(2) * sigma);\n   return  0.5 * (1 + erf((x - mu) * frac));\n}\n\n\n/**\n * Inverse cumulative distribution function for normal distribution.\n *\n * @param {number|Vector} p - vector of probabilities or a single probability value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qnorm(p, mu = 0, sigma = 1) {\n\n   if (isvector(p)) {\n      return p.apply(v => qnorm(v, mu, sigma));\n   }\n\n   if (mu !== 0 || sigma !== 1) {\n      return qnorm(p) * sigma + mu;\n   }\n\n   if (p < 0 || p > 1) {\n      throw Error('Parameter \"p\" must be between 0 and 1.');\n   }\n\n   if (p < 0.0000000001) return -Infinity;\n   if (p > 0.9999999999) return +Infinity;\n\n   const SP1 = 0.425;\n   const SP2 = 5.0;\n   const C1 = 0.180625;\n   const C2 = 1.6;\n\n   const a0 = 3.3871327179;\n   const a1 = 5.0434271938 * 10;\n   const a2 = 1.5929113202 * 100;\n   const a3 = 5.9109374720 * 10;\n   const b1 = 1.7895169469 * 10;\n   const b2 = 7.8757757664 * 10;\n   const b3 = 6.7187563600 * 10;\n\n   const c0 = 1.4234372777;\n   const c1 = 2.7568153900;\n   const c2 = 1.3067284816;\n   const c3 = 1.7023821103 * 0.1;\n   const d1 = 7.3700164250 * 0.1;\n   const d2 = 1.2021132975 * 0.1;\n\n   const e0 = 6.6579051150;\n   const e1 = 3.0812263860;\n   const e2 = 4.2868294337 * 0.1;\n   const e3 = 1.7337203997 * 0.01;\n   const f1 = 2.4197894225 * 0.1;\n   const f2 = 1.2258202635 * 0.01;\n\n   const q = p - 0.5;\n   let r;\n\n   if (Math.abs(q) <= SP1) {\n      r = C1 - q * q;\n      return q * (((a3 * r + a2) * r + a1) *r + a0) / (((b3 * r + b2) * r + b1) * r + 1.0);\n   }\n\n   r = q < 0 ? p : 1 - p;\n   r = Math.sqrt(-Math.log(r));\n   let res;\n\n   if (r <= SP2) {\n      r = r - C2;\n      res = (((c3 * r + c2) * r + c1) * r + c0) / ((d2 * r + d1) * r + 1.0);\n   } else {\n      r = r - SP2;\n      res = (((e3 * r + e2) * r + e1) + e0) / ((f2 * r + f1) * r + 1.0);\n   }\n\n   return q < 0 ? -res : res;\n}\n\n\n/**\n * Probability density function for Student's t-distribution.\n *\n * @param {number|Vector} t - t-value or a vector of t-values.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dt(t, dof) {\n\n   if (dof < 0) {\n      throw new Error('Parameter \"dof\" should be a positive number.');\n   }\n\n   if (isvector(t)) {\n      return t.apply(v => dt(v, dof));\n   }\n\n   const pow = -0.5 * (dof + 1);\n   const A = 1 / (Math.sqrt(dof) * beta(0.5, dof/2));\n\n   return (A * Math.pow((1 + t * t / dof), pow));\n}\n\n\n/**\n * Cumulative distribution function for Student's t-distribution.\n *\n * @param {number|Vector} t - t-value or a vector of t-values.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pt(t, dof) {\n\n   if (dof === undefined || dof === null || dof < 1) {\n      throw Error('Parameter \"dof\" (degrees of freedom) must be an integer number >= 1.');\n   }\n\n   if (isvector(t)){\n      return t.apply(v => pt(v, dof));\n   }\n\n   // since distribution in symmetric we can use only left tail\n   if (t === 0) return 0.5;\n   if (t === -Infinity) return 0;\n   if (t === Infinity) return 1;\n   if (t > 0) return (1 - pt(-t, dof));\n\n   return integrate((x) => dt(x, dof), -Infinity, t);\n}\n\n\n/**\n * Inverse cumulative distribution (quantile) function for Student's t-distribution.\n *\n * @param {number|Vector} p - probability or vector with probabilities.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qt(p, dof) {\n\n   if (dof === undefined || dof === null || dof < 1) {\n      throw Error('Parameter \"dof\" (degrees of freedom) must be an integer number >= 1.');\n   }\n\n   if (p < 0 || p > 1) {\n      throw Error('Parameter \"p\" must be between 0 and 1.');\n   }\n\n   if (isvector(p)) {\n      return p.apply(v => qt(v, dof));\n   }\n\n   if (p < 0.0000000001) return -Infinity;\n   if (p > 0.9999999999) return +Infinity;\n\n\n   // simple cases  exact solutions\n   if (dof === 1) {\n      return Math.tan(Math.PI * (p - 0.5));\n   }\n\n   if (dof === 2) {\n      return 2 * (p - 0.5) * Math.sqrt(2 / (4 * p * (1 - p)));\n   }\n\n   // approximation\n\n   let sign = -1;\n   if (p >= 0.5){\n      sign = +1 ;\n      p = 2 * (1 - p);\n   } else {\n      sign = -1;\n      p = 2 * p;\n   }\n\n   const a = 1.0 / (dof - 0.5);\n   const b = 48.0 / (a ** 2);\n   let c = ((20700 * a / b - 98) * a - 16) * a + 96.36;\n   const d = ((94.5 / (b + c) - 3.0)/b + 1.0) * Math.sqrt(a * Math.PI / 2) * dof;\n\n   let x = d * p;\n   let y = x ** (2.0/dof);\n\n   if (y > 0.05 + a) {\n\n      // asymptotic inverse expansion about normal\n      x = qnorm(p * 0.5);\n      y = x * x;\n\n      if (dof < 5) {\n         c = c + 0.3 * (dof - 4.5) * (x + 0.6);\n      }\n\n      c = (((0.05 * d * x - 5.0) * x - 7.0) * x - 2.0) * x + b + c;\n      y = (((((0.4 * y + 6.3) * y + 36.0) * y + 94.5) / c - y - 3.0)/b + 1.0) * x;\n      y = a * (y ** 2);\n      y = y > 0.002 ? Math.exp(y) - 1.0 : 0.5 * (y ** 2) + y;\n   } else {\n      y = ((1.0 / (((dof + 6.0)/(dof * y) - 0.089 * d - 0.822) * (dof + 2.0) * 3.0) + 0.5/(dof + 4.0)) * y - 1.0) *\n         (dof + 1.0)/(dof + 2.0) + 1.0/y;\n   }\n\n   return sign * Math.sqrt(dof * y);\n}\n\n\n/**\n * Probability density function for F-distribution.\n *\n * @param {number|Vector} F - F-value or a vector of t-values\n * @param {number} d1 - degrees of freedom.\n * @param {number} d2 - degrees of freedom.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function df(F, d1, d2) {\n\n   if (F < 0 || d1 < 0 || d2 < 0) {\n      throw new Error('All 3 parameters must be positive.');\n   }\n\n   if (d2 <= d1) {\n      throw new Error('Parameter \"d1\" must be larger \"d2\".');\n   }\n\n   if (isvector(F)) {\n      return F.apply(v => df(v, d1, d2));\n   }\n\n   return Math.sqrt( ( Math.pow(d1 * F, d1) * Math.pow(d2, d2)) / Math.pow(d1 * F + d2, d1 + d2)) / (F * beta(d1/2, d2/2))\n}\n\n\n/**\n * Cumulative distribution function for F-distribution.\n *\n * @param {number|Vector} F - F-value or a vector of t-values.\n * @param {number} d1 - degrees of freedom.\n * @param {number} d2 - degrees of freedom.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pf(F, d1, d2) {\n\n   if (F < 0 || d1 < 0 || d2 < 0) {\n      throw new Error('All 3 parameters must be positive.');\n   }\n\n   if (isvector(F)) {\n      return F.apply(v => pf(v, d1, d2));\n   }\n\n   return ibeta(d1 * F / (d1 * F + d2), d1/2, d2/2)\n}\n\n\n/**\n * Cumulative distribution function for chi-square distribution.\n *\n * @param {number|Vector|Array} x - chi-square value.\n * @param {number} dof - degrees of freedom.\n *\n * @description if DoF is relatively small (< 30) the method computes probabilities via\n * approximation of lower incomplete gamma function, `igamma()`, and gamma function, `gamma()`.\n * If the DoF is larger than 30 it uses the a modified power series approximation\n * (doi:10.1016/j.csda.2004.04.001) and normal distribution.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pchisq(x, dof) {\n\n   if (Array.isArray(x)) {\n      return pchisq(vector(x), dof);\n   }\n\n   const mu = 5/6 - 1 / (9 * dof) - 7 / (648 * dof * dof) + 25 / (2187 * dof * dof * dof);\n   const sigma2 = 1 / (18 * dof) + 1 / (162 * dof * dof) - 37 / (1164 * dof * dof * dof);\n   const sigma = Math.sqrt(sigma2);\n\n   // works well for large dof\n   function F2(x) {\n      if (x === 0) return 0;\n      if (dof === 0) return 1;\n      if (dof > 100 && x > dof * 2) return 1;\n      if (dof > 50 && x > dof * 3) return 1;\n      if (dof > 10 && x > dof * 5) return 1;\n      if (dof > 5 && x > dof * 8) return 1;\n      if (x > dof * 30) return 1;\n      const l0 = x / dof;\n      const l = Math.pow(l0, 1/6) - 0.5 * Math.pow(l0, 1/3) + (1/3) * Math.pow(l0, 1/2);\n      return pnorm(l, mu, sigma);\n   }\n\n   // works well for small dof\n   function F1(x) {\n      if (x === 0) return 0;\n      if (dof === 0) return 1;\n      if (dof > 100 && x > dof * 2) return 1;\n      if (dof > 50 && x > dof * 3) return 1;\n      if (dof > 10 && x > dof * 5) return 1;\n      if (dof > 5 && x > dof * 8) return 1;\n      if (x > dof * 30) return 1;\n      return igamma(x/2, dof/2) / gamma(dof/2)\n   }\n\n   const F = dof > CHISQ_DOF_THRESHOLD ? F2 : F1;\n   return isvector(x) ? x.apply(F) : F(x)\n}\n\n\n/**\n * Inverse cumulative distribution (quantile) function for chi-square distribution.\n *\n * @param {number|Vector|Array} p - probability or vector/array with probabilities.\n * @param {number} dof - degrees of freedom.\n *\n * @description if DoF is relatively small (< 30) the method computes quantiles by sequential\n * improving, splitting possible quantile range into intervals, computing probabilities for each\n * element of the interval using `pchisq()`, then find the quantile which has the closest\n * probability value, make a new split around it and so on until the probability of the\n * currently selected quintile is close to the desired one. For large DoF (>30) the it uses\n * the a modified power series approximation (doi:10.1016/j.csda.2004.04.001) and\n * normal distribution.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qchisq(p, dof) {\n\n   if (Array.isArray(p)) {\n      return qchisq(vector(p), dof);\n   }\n\n   // compute parameters of normal distribution for power approximation\n   const mu = 5/6 - 1 / (9 * dof) - 7 / (648 * dof * dof) + 25 / (2187 * dof * dof * dof);\n   const sigma2 = 1 / (18 * dof) + 1 / (162 * dof * dof) - 37 / (1164 * dof * dof * dof);\n   const sigma = Math.sqrt(sigma2);\n\n   // compute quantile for one probability value using power approximations\n   // and inverse solution\n   function F2(x) {\n      if (x === 0) return 0;\n      if (x === 0) return Inf;\n      if (dof === 0) return 0;\n      const l = qnorm(x, mu, sigma);\n      const o = Math.pow(Math.sqrt(36 * l * l - 30 * l + 13)/4 + (3 * l - 3/2)/2 + 1/8, 1/3);\n      return Math.pow(o - 3 / (4 * o) + 0.5, 6) * dof;\n   }\n\n   // compute quantile using sequential splits of quantile range\n   function F1(x) {\n      if (x === 0) return 0;\n      if (x === 0) return Inf;\n      if (dof === 0) return 0;\n\n      // initial split (start, end, and delta)\n      let qs = 0;\n      let qe = CHISQ_DOF_THRESHOLD * 10;\n      let qd = qe / 30;\n\n      // loop for sequential splits\n      for (let i = 0; i < 30; i++) {\n\n         // compute vector of quantiles and corresponding probabilities\n         const q = Vector.seq(qs, qe, qd);\n         const p = pchisq(q, dof);\n\n         // find index of quantile which has probability closest to x\n         const ind = closestind(p, x) - 1;\n\n         // if the probability is close enough to the desired one return the quantile\n         if (Math.abs(p.v[ind] - x) < CHISQ_TOL) return q.v[ind];\n\n         // if not make a new split by taking left and right neighbors quantiles\n         qs = ind == 0 ? q.v[0] : q.v[ind - 1];\n         qe = ind == q.v.length - 1? q.v[ind] : q.v[ind + 1];\n\n         // if the boundaries are the same stop\n         if (qs == qe) return qs;\n\n         // compute delta for new boundaries\n         qd = (qe - qs) / 30;\n      }\n\n      // if the loop did not converge we simply return the middle quantile\n      return (qe + qs) / 2;\n   }\n\n   const F = dof > CHISQ_DOF_THRESHOLD ? F2 : F1;\n   return isvector(p) ? p.apply(F) : F(p)\n}\n\n\n/**\n * Incomplete Betta function (approximation via numeric integration).\n *\n * @param {number} x - first argument.\n * @param {number} a - second argument.\n * @param {number} b - third argument.\n *\n * @returns {number} value of the function.\n *\n */\nexport function ibeta(x, a, b) {\n\n   if (x === 0) return 0;\n   if (x === 1) return 1;\n   if (b === 1) return x ** a;\n   if (a === 1) return (1 - (1 - x)**b);\n\n   return integrate((t) => t ** (a - 1) * (1 - t) ** (b - 1), 0, x) / beta(a, b);\n}\n\n\n/**\n * Gamma function (approximation).\n *\n * @param {number|Vector} z - argument (one value or a vector).\n *\n * @returns {number} value of the Gamma function.\n *\n */\nexport function gamma(z) {\n\n   if (isvector(z)) {\n      return z.apply(gamma);\n   }\n\n   if (z <= 0) {\n      throw new Error('gamma: the function only works with arguments > 0.');\n   }\n\n   // coefficients\n   const p = [\n        676.5203681218851,\n      -1259.1392167224028,\n        771.32342877765313,\n       -176.61502916214059,\n         12.507343278686905,\n         -0.13857109526572012,\n          9.9843695780195716e-6,\n          1.5056327351493116e-7\n    ];\n\n   if (z < 0.5) {\n      return Math.PI / (Math.sin(Math.PI * z) + gamma(1 - z));\n   }\n\n   z = z - 1;\n   let x = 0.99999999999980993;\n\n   for (let i = 0; i < p.length; i++) {\n      x = x + p[i] / (z + i + 1);\n   }\n\n   const t = z + p.length - 0.5;\n   return Math.sqrt(2 * Math.PI) * Math.pow(t, z + 0.5) * Math.exp(-t) * x;\n}\n\n\n\n/**\n * Lower incomplete gamma function (approximation)\n *\n * @param {number} x - first argument (one value).\n * @param {number} a - second argument (one value).\n *\n * @returns {number} value of the lower incomplete gamma function.\n *\n */\nexport function igamma(x, a) {\n\n   const epsilon = 1e-18; // Desired accuracy\n   const maxIterations = 10000; // Maximum number of iterations\n\n   let sum = 0;\n\n   for (let k = 0; k < maxIterations; k++) {\n      const s = Math.pow(x, k) / gamma(a + k + 1);\n      if (isNaN(s) || s < epsilon) break;\n      sum += s\n   }\n\n   return Math.pow(x, a) * gamma(a) * Math.exp(-x) * sum;\n}\n\n\n\n/**\n * Beta function (approximation).\n *\n * @param {number} x - first argument (one value).\n * @param {number} y - second argument (one value).\n *\n * @returns {number} value of the Beta function.\n *\n */\nexport function beta(x, y) {\n\n   if (y > 100) {\n      // for large y we use slower integrate version\n      return integrate((u) => Math.pow(u, x - 1) / Math.pow(1 + u, x + y), 0, Infinity)\n   }\n\n   return gamma(x) * gamma(y) / gamma(x + y);\n}\n\n\n/**\n * Error function for normal distribution.\n *\n * @param {number} x - a number.\n *\n * @returns {number} value for erf.\n *\n */\nexport function erf(x) {\n\n  const sign = (x >= 0) ? 1 : -1;\n  x = Math.abs(x);\n\n  // constants\n  const a1 =  0.254829592;\n  const a2 = -0.284496736;\n  const a3 =  1.421413741;\n  const a4 = -1.453152027;\n  const a5 =  1.061405429;\n  const p  =  0.3275911;\n\n  // approximation\n  const t = 1.0 / (1.0 + p * x);\n  const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);\n\n  return sign * y;\n}\n\n\n","/************************************************************/\n/*    Methods for computing matrix decompositions           */\n/************************************************************/\n\nimport { ssq } from '../stat/index.js';\nimport { crossprod, Vector, Matrix, Index } from '../arrays/index.js';\n\n\n/**\n * Randomized SVD decomposition.\n *\n * @param {Matrix} X - matrix to decompose.\n * @param {number} [ncomp] - number of components.\n * @param {number} [pa=1] - oversampling factor (ncomp * pa + pb).\n * @param {number} [pb=10] - oversampling increment (ncomp * pa + pb).\n * @param {number} [its=3] - number of iterations\n *\n * @returns {JSON} JSON with three fields, 's' - vector with singular values,\n * 'U', 'V' - matrices with left and right singular vectors.\n *\n */\nexport function rsvd(X, ncomp, pa, pb, its) {\n\n   const m = X.nrows;\n   const n = X.ncols;\n\n   if (its === undefined) {\n      its = 3;\n   }\n\n   if (pb === undefined) {\n      pb = 5;\n   }\n\n   if (pa === undefined) {\n      pa = 1;\n   }\n\n   if (its < 1 || its > 10) {\n      throw new Error('rsvd: wrong value for parameter \"its\" (must be between 1 and 10).');\n   }\n\n   if (pa < 1 || pa > 5) {\n      throw new Error('rsvd: wrong value for parameter \"pa\" (must be between 1 and 5).');\n   }\n\n   if (pb < 1 || pb > 100) {\n      throw new Error('rsvd: wrong value for parameter \"pb\" (must be between 1 and 100).');\n   }\n\n\n   if (ncomp === undefined) {\n      ncomp = Math.round(Math.min(m - 1, n) / 1.5);\n   }\n\n   if (m < n) {\n      const res = rsvd(X.t(), ncomp, pa, pb, its);\n      return {s: res.s, V: res.U, U: res.V}\n   }\n\n   // the more the better but slower\n   const l = Math.round(pa * ncomp + pb);\n   let Q = X.dot(Matrix.rand(n, l, -1, 1));\n\n   for (let it = 1; it <= its; it++) {\n      Q = lu(crossprod(X, Q)).L;\n      Q = it < its ? lu(X.dot(Q)).L : qr(X.dot(Q)).Q;\n   }\n\n   const B = crossprod(Q, X);\n   const res = svd(B, ncomp);\n   return {s: res.s, V: res.V, U: Q.dot(res.U)};\n}\n\n/**\n * QR decomposition\n *\n * @param {Matrix} X - matrix to decompose.\n *\n * @returns {JSON} JSON with two matrices, Q and R, so X = QR.\n *\n */\nexport function qr(X) {\n\n   const m = X.nrows;\n   const n = X.ncols;\n\n   if (m < n) {\n      const res = qr(X.subset([], Index.seq(1, m)));\n      return {Q:res.Q, R:crossprod(res.Q, X)}\n   }\n\n   let Q = Matrix.eye(m);\n   let Rt = X.t();\n\n   for (let j = 1; j <= n; j++) {\n      for (let i = m; i >= (j + 1); i--) {\n\n         const r = Rt.v.subarray((i - 2) * n, i * n);\n         const q =  Q.v.subarray((i - 2) * m, i * m);\n         const rc = r.slice();\n         const qc = q.slice();\n\n         const [c, s, temp] = rot(rc[j - 1], rc[j - 1 + n]);\n\n         // apply transformation to columns i and i - 1 of matrix Rt\n         for (let k = 0; k < n; k++) {\n\n            r[k]     = rc[k] *  c + rc[k + n] * s;\n            r[k + n] = rc[k] * -s + rc[k + n] * c;\n\n            q[k]     = qc[k] *  c + qc[k + m] * s;\n            q[k + m] = qc[k] * -s + qc[k + m] * c;\n         }\n\n         for (let k = n; k < m; k++) {\n            q[k]     = qc[k] *  c + qc[k + m] * s;\n            q[k + m] = qc[k] * -s + qc[k + m] * c;\n         }\n      }\n   }\n\n   const ind = Index.seq(1, n);\n   return {\n      Q: m === n ? Q : Q.subset([], ind),\n      R: m === n ? Rt.t() : Rt.subset([], ind).t()\n   }\n}\n\n/**\n * LU decomposition.\n *\n * @param {Matrix} X - matrix to decompose.\n *\n * @returns {JSON} JSON with two matrices, L and U, so X = LU.\n *\n */\nexport function lu(X) {\n\n   const nr = X.nrows;\n   const nc = X.ncols\n   const n = Math.min(nr, nc)\n\n   const Lv = new Float64Array(nr * nc);\n   const Uv = new Float64Array(nc * nc);\n   const Xv = X.v.slice();\n\n   const s = Math.round(Math.pow(n, 0.5285425));\n   let z = 1;\n\n   for (let c = 1; c <= n; c++) {\n\n      if (c == z + s) {\n         const nro = nr - c + 1;\n         const nco = nc - c + 1;\n         const ni = c - z;\n         const Sv = new Float64Array(nro * nco);\n\n         for (let i = 0; i < nro; i++) {\n            for (let j = 0; j < nco; j++) {\n               let s = 0;\n               for (let k = 0; k < ni; k++) {\n                  s += Lv[(z - 1 + k) * nr + (c - 1) + i] * Uv[(c - 1 + j) * nc + (z - 1 + k)];\n               }\n               Sv[j * nro + i] = s;\n            }\n         }\n\n         for (let i = c; i <= nr; i++) {\n            for (let j = c; j <= nc; j++) {\n               Xv[(j - 1) * nr + (i - 1)] = Xv[(j - 1) * nr + (i - 1)] - Sv[(j - c) * nro + (i - c)];\n            }\n         }\n\n         z = c;\n      }\n\n      for (let i = c; i <= nr; i++) {\n         let acc = Xv[(c - 1) * nr + (i - 1)];\n         for (let k = z; k <= c - 1; k++) {\n            acc = acc - Lv[(k - 1) * nr + (i - 1)] * Uv[(c - 1) * nc + (k - 1)];\n         }\n         Lv[(c - 1) * nr + (i - 1)] = acc;\n      }\n\n      for (let i = c; i <= nc; i++) {\n         let acc = Xv[(i - 1) * nr + (c - 1)];\n         for (let k = z; k <= c - 1; k++) {\n            acc = acc - Lv[(k - 1) * nr + (c - 1)] * Uv[(i - 1) * nc + (k - 1)];\n         }\n         const l = Lv[(c - 1) * nr + (c - 1)];\n         Uv[(i - 1) * nc + (c - 1)] = (l == 0 ? acc : acc / l);\n      }\n   }\n\n   return {L: new Matrix(Lv, nr, nc), U: new Matrix(Uv, nc, nc)}\n}\n\n\n/**\n * Singular value decomposition\n *\n * @param {Matrix} X - matrix to decompose.\n * @param {number} [ncomp] - number of components.\n *\n * @returns {JSON} JSON with three fields, 's' - vector with singular values,\n * 'U', 'V' - matrices with left and right singular vectors.\n *\n */\nexport function svd(X, ncomp) {\n\n   let d, e, bV, bU, m, n, transposed;\n\n   if (X.nrows < X.ncols) {\n      [d, e, bV, bU] = bidiag(X.t());\n      m = X.ncols;\n      n = X.nrows;\n      transposed = true;\n   } else {\n      [d, e, bV, bU] = bidiag(X);\n      m = X.nrows;\n      n = X.ncols;\n      transposed = false;\n   }\n\n   if (!ncomp) {\n      ncomp = Math.min(m, n);\n   }\n\n   const maxit = 500 * n * n;\n   const thresh = Math.pow(10, -64);\n   let Gt = Matrix.eye(n);\n   let P = Matrix.eye(n);\n\n   for (let it = 0; it < maxit; it++) {\n\n      // find first nonzero element in e from bottom\n      let iU = 0;\n      for (let i = n - 1; i >= 1; i--) {\n         if (Math.abs(e.v[i - 1]) > thresh) {\n            iU = i\n            break;\n         }\n      }\n\n      // find first nonzero element in e from top\n      let iL = iU + 1;\n      for (let i = 1; i <= n - 1; i++) {\n         if (Math.abs(e.v[i - 1]) > thresh) {\n            iL = i;\n            break;\n         }\n      }\n\n      // check the convergence and return result\n      if ((iU == iL && Math.abs(e[iU - 1]) <= thresh) || (iU < iL)) {\n\n         // compute final results:\n         // V = bU * P\n         // U = bV * Gt\n         // and correct sign of singular values and columns of V\n\n         const s = Vector.zeros(ncomp);\n         const U = Matrix.zeros(X.nrows, ncomp);\n         const V = Matrix.zeros(X.ncols, ncomp);\n\n         for (let k = 1; k <= ncomp; k++) {\n            const sign = Math.sign(d.v[k - 1]);\n            s.v[k - 1] = Math.abs(d.v[k - 1]);\n\n            let uk, vk;\n            if (transposed) {\n               uk = V.getcolref(k);\n               vk = U.getcolref(k);\n            } else {\n               uk = U.getcolref(k);\n               vk = V.getcolref(k);\n            }\n\n            const pk = P.getcolref(k);\n            const gtk = Gt.getcolref(k);\n\n            for (let i = 0; i < n; i++) {\n               const pki = pk[i];\n               const gtki = gtk[i] * sign;\n\n               const bur = bU.getcolref(i + 1);\n               const vur = bV.getcolref(i + 1);\n\n               for (let r = 0; r < n; r++) {\n                  uk[r] += bur[r] * pki;\n                  vk[r] += vur[r] * gtki;\n               }\n               for (let r = n; r < m; r++) {\n                  uk[r] += bur[r] * pki;\n               }\n            }\n         }\n\n         return {s: s, U: U, V: V};\n      }\n\n      // re-sweep\n      const cstart = iL - 1;\n      const cend = iU + 1;\n      const clen = iU - iL + 2;\n      const [rd, re, rG, rPt] = vsweep(d.v.subarray(cstart, cend), e.v.subarray(cstart, cend - 1));\n\n      // replace elements of d and e\n      d.v.set(rd, cstart);\n      e.v.set(re, cstart);\n\n      // now we need to compute:\n      // G = rG' * G = (G' * rG)' -> this should be done only fo selected columns in G\n      // P =            P  * rP'  -> only for selected columns in P\n\n      // get local copy of the \"clen\" columns from G' and P starting from column \"cstart\"\n      const lgt = Gt.v.slice(cstart * n, cstart * n + clen * n);\n      const lp = P.v.slice(cstart * n, cstart * n + clen * n);\n\n      // compute dot(lG', rG) and save back to G'\n      // compute dot(P, rP') and save back to P\n      for (let c = 0; c < clen; c++) {\n\n         // get pointers to column \"c\" (c from \"cstart\" to \"cend\") of Gt and P - to save the results\n         const gtc = Gt.getcolref(c + cstart + 1);  // nc x 1\n         const pc = P.getcolref(c + cstart + 1);    // nc x 1\n\n         // get pointers to the columns of rG and rPt\n         const rgc = rG.getcolref(c + 1);           // clen x 1\n         const rptc = rPt.getcolref(c + 1);          // clen x 1\n\n         // copmpute and save the dot products\n         for (let r = 0; r < n; r++) {\n            // row \"r\" of lGt (nc x clen) times column \"c\" of rG (clen x 1)\n            // row of lP times column of rPt\n            let gtcr = 0;\n            let pcr = 0;\n            for (let i = 0; i < clen; i++) {\n               gtcr += lgt[i * n + r] * rgc[i];\n               pcr += lp[i * n + r] * rptc[i];\n            }\n            gtc[r] = gtcr;\n            pc[r] = pcr;\n         }\n      }\n\n\n      // get local copy of selected columns from G' and P\n      /*\n      const lGt = Matrix.zeros(n, l);\n      const lP = Matrix.zeros(n, l)\n      for (let c = iL; c <= iU + 1; c++) {\n         lGt.v.set(Gt.v.subarray((c - 1) * n, c * n), (c - iL) * n);\n         lP.v.set(P.v.subarray((c - 1) * n, c * n), (c - iL) * n);\n      }\n\n      // compute dot(lG', rG) and save back to G\n      // compute dot(P, rP') and save back to P\n      for (let c = 1; c <= l; c++) {\n         const newgc = lGt.dot(new Vector(rG.getcolref(c)));\n         const newpc = lP.dot(new Vector(rPt.getcolref(c)));\n         Gt.v.set(newgc.v, (c - 1 + iL - 1) * n);\n         P.v.set(newpc.v, (c - 1 + iL - 1) * n);\n      }\n      */\n   }\n\n   throw Error(\"svd: can not converge.\")\n}\n\n\n/**\n * Applies givens rotations to diagonal elements of bidiagonalized matrix.\n *\n * @param {Float64Array} d - vector with main diagonal elements.\n * @param {Float64Array} e - vector with diagonal elements on top of main diagonal.\n *\n * @returns {Array} array with vectors 'd' and 'e' after rotation as well as right\n * transformation matrices G and P'.\n *\n */\nexport function vsweep(d, e) {\n\n   const n = d.length;\n\n   let cold = 1;\n   let sold = 1;\n\n   let c = 1;\n   let s = 0;\n   let r = 0;\n\n   let G = Matrix.eye(n);\n   let Pt = Matrix.eye(n);\n\n   for (let k = 1; k <= (n - 1); k++) {\n\n      [c, s, r] = rot(c * d[k - 1], e[k - 1]);\n\n      // get two columns from G and rotate their values\n      const gk = G.v.subarray((k - 1) * n, (k + 1) * n);\n      const gkc = gk.slice();\n\n      for (let i = 0; i < n; i++) {\n         gk[i]     =  gkc[i] * c + gkc[i + n] * s;\n         gk[i + n] = -gkc[i] * s + gkc[i + n] * c;\n      }\n\n      if (k != 1) {\n         e[k - 2] = r * sold;\n      }\n\n      [cold, sold, r] = rot(cold * r, d[k] * s);\n      d[k - 1] = r;\n\n      // get two columns from Pt and rotate their values\n      const ptk = Pt.v.subarray((k - 1) * n, (k + 1) * n);\n      const ptkc = ptk.slice();\n\n      for (let i = 0; i < n; i++) {\n         ptk[i]     =  ptkc[i] * cold + ptkc[i + n] * sold;\n         ptk[i + n] = -ptkc[i] * sold + ptkc[i + n] * cold;\n      }\n\n   }\n\n   const h = c * d[n - 1];\n   e[n - 2] = h * sold;\n   d[n - 1] = h * cold;\n\n   return [d, e, G, Pt];\n}\n\n\n/**\n * Generate c, s, r values for Givens rotations, so [c s; -s c][f; g] = [r; 0].\n *\n * @param {number} f - first element of vector.\n * @param {number} g - second element of vector.\n *\n * @return array with values [c, s, r].\n *\n */\nexport function rot(f, g) {\n\n   if (f == 0) {\n      return [0, 1, g];\n   }\n\n   if (Math.abs(f) > Math.abs(g)) {\n      const t = g / f;\n      const t1 = Math.sqrt(1 + t * t);\n      const c = 1 / t1\n      return [c, t * c, f * t1];\n   }\n\n   const t = f / g;\n   const t1 = Math.sqrt(1 + t * t)\n   const s = 1 / t1\n   return [t * s, s, g * t1];\n}\n\n\n/**\n * Golub-Reinsch bidiagonalization of matrix A\n *\n * @param {Matrix} A - matrix with values.\n *\n * @returns {Array} array with three matrices [B, V, U].\n *\n */\nexport function bidiag(A) {\n\n   const m = A.nrows;\n   const n = A.ncols;\n\n   if (m < n) {\n      throw Error(\"bidiag: number of rows in A must not be smaller number of columns.\");\n   }\n\n   let Ut = Matrix.eye(m);\n   let V = Matrix.eye(n);\n   let B = A.copy();\n\n  for (let k = 1; k <= (m > n ? n : n - 1); k++) {\n   // for (let k = 1; k <= 1; k++) {\n      const mk = m - k + 1;\n\n      // compute:\n      // B  = H * B\n      // U' = H' * U';\n      const H1 = householder(B.getcolref(k), k);\n\n      for (let c = 1; c <= n; c++) {\n\n         // get c-th column of B (starting from (k-1) row) and make a copy\n         const bc = B.v.subarray((c - 1) * m + k - 1, c * m)\n         const bcc = bc.slice();\n\n         // get c-th column of U' (starting from (k-1) row) and make a copy\n         const utc = Ut.v.subarray((c - 1) * m + k - 1, c * m)\n         const utcc = utc.slice();\n\n         for (let r = k; r <= m; r++) {\n            // because H is symmetric we take column instead of row\n            const hr = H1.getcolref(r - k + 1);\n            let sb = 0;\n            let sut = 0;\n            for (let i = 0; i < mk; i++) {\n               sb += hr[i] * bcc[i];\n               sut += hr[i] * utcc[i]\n            }\n            bc[r - k] = sb;\n            utc[r - k] = sut;\n         }\n      }\n\n\n      for (let c = n + 1; c <= m; c++) {\n\n         // get c-th column of U' and make a copy\n         const utc = Ut.v.subarray((c - 1) * m + k - 1, c * m)\n         const utcc = utc.slice();\n\n         for (let r = k; r <= m; r++) {\n            const hr = H1.getcolref(r - k + 1);\n            let sut = 0;\n            for (let i = 0; i < mk; i++) {\n               sut += hr[i] * utcc[i];\n            }\n            utc[r - k] = sut;\n         }\n      }\n\n      if (k < n - 1) {\n\n         // compute:\n         // B = B * H'\n         // V = V * H\n         const H2 = householder(B.getrow(k).v, k + 1);\n\n         // we need to process columns from k + 1, so make a subset from the start\n         const Bvk = B.v.subarray(k * m);\n         const Vvk = V.v.subarray(k * n);\n\n         let br = new Float64Array(n - k)\n         let vr = new Float64Array(n - k)\n\n         // process first n rows for both B and V\n         for (let r = 1; r <= n; r++) {\n\n            // get elements from r-th row\n            for (let i = 0; i < n - k; i++) {\n               br[i] = Bvk[i * m + r - 1];\n               vr[i] = Vvk[i * n + r - 1];\n            }\n\n            for (let c = k + 1; c <= n; c++) {\n               const hc = H2.getcolref(c - k);\n               let sb = 0;\n               let sv = 0;\n               for (let i = 0; i < H2.nrows; i++) {\n                  sb += br[i] * hc[i];\n                  sv += vr[i] * hc[i];\n               }\n               Bvk[(c - k - 1) * m + (r - 1)] = sb;\n               Vvk[(c - k - 1) * n + (r - 1)] = sv\n            }\n         }\n\n         // process rows from (n+1) to m for B only\n         for (let r = n + 1; r <= m; r++) {\n\n            // get elements from r-th row\n            for (let i = 0; i < n - k; i++) {\n               br[i] = Bvk[i * m + r - 1];\n            }\n\n            for (let c = k + 1; c <= n; c++) {\n               const hc = H2.getcolref(c - k);\n               let sb = 0;\n               for (let i = 0; i < H2.nrows; i++) {\n                  sb += br[i] * hc[i];\n               }\n               Bvk[(c - k - 1) * m + (r - 1)] = sb;\n            }\n         }\n      }\n   }\n\n   const d = Vector.zeros(n);\n   const e = Vector.zeros(n - 1);\n   for (let i = 0; i < n - 1; i++) {\n      d.v[i] = B.v[i * m + i];\n      e.v[i] = B.v[(i + 1) * m + i];\n   }\n   d.v[n - 1] = B.v[(n - 1) * m + (n - 1)];\n\n   return [d, e, V, Ut.t()];\n}\n\n\n/**\n * Compute elements of Householder transformation as a matrix.\n *\n * @param {Float64Array} b - array with diagonal values.\n * @param {number} k - position to start with.\n *\n * @returns {Matrix} matrix with transformation values.\n *\n */\nexport function householder(b, k) {\n\n   // get vector with values\n   const h = householderv(b, k);\n   const n = h.length;\n   // compute matrix as outer product of the vector\n   const H = Matrix.zeros(n);\n   for (let c = 0; c < n; c++) {\n      const hc = H.getcolref(c + 1);\n      for (let r = 0; r < n; r++) {\n         hc[r] = 1 * (r == c) - 2 * h[r] * h[c];\n      }\n   }\n\n   return H;\n}\n\n\n/**\n * Compute elements of Householder transformation as a vector.\n *\n * @param {Float64Array} b - array with diagonal values.\n * @param {number} k - position to start with.\n *\n * @returns {Float64Array} vector with transformation values.\n *\n */\nexport function householderv(b, k) {\n\n   const n = b.length;\n\n   if (k >= n) {\n      throw Error(\"householder: parameter 'k' must be smaller than length of vector 'b'.\")\n   }\n\n   const hlen = n - k + 1;\n   const h = b.slice(k - 1);\n   // to avoid computing norm2 twice we will\n   // compute it based on the first norm\n   const hssq = ssq(h);\n   const hn2 = Math.sqrt(hssq);\n   const s = Math.sign(h[0]);\n   const a = h[0];\n\n   // change first value in the vector\n   h[0] = a - s * hn2;\n\n   // recompute the norm\n   const hn2a = Math.sqrt(2 * hssq - 2 * s * a * hn2);\n\n   // if norm is zero return vector as is\n   if (hn2a < Number.EPSILON) return h\n\n   // normalize vector and return\n   for (let i = 0; i < hlen; i++) {\n      h[i] /=  hn2a;\n   }\n   return h;\n}\n\n\n\n\n\n","/* =================================================================== */\n/*    Methods for Arrays (vectors, matrices, indices and factors, )    */\n/* =================================================================== */\n\nimport { min, max, prod } from '../stat/index.js';\nimport { rnorm, runif } from '../distributions/index.js';\nimport { qr } from '../decomp/index.js';\n\nexport function isnumber(x) {\n   return typeof(x) === 'number';\n}\n\n\n/**************************************************/\n/*    Non-class methods for Vectors and Matrix    */\n/**************************************************/\n\n/**\n * Compute XY' product of two matrices.\n *\n * @param {Matrix} X - a matrix.\n * @param {Matrix} Y - a matrix.\n *\n * @returns {Matrix} result of the product.\n *\n */\nexport function tcrossprod(X, Y) {\n\n   if (Y === undefined) {\n      Y = X;\n   }\n\n   const nrx = X.nrows;\n   const ncx = X.ncols;\n\n   const nry = Y.nrows;\n   const ncy = Y.ncols;\n\n   // create vector for the product\n   const nrows = nrx;\n   const ncols = nry;\n   const ninner = ncx;\n   const out = new Float64Array(nrows * ncols);\n\n   for (let i = 0; i < ninner; i++) {\n      const xr = X.v.subarray(i * nrx, (i + 1) * nrx);\n      const yc = Y.v.subarray(i * nry, (i + 1) * nry);\n\n      for (let c = 0; c < ncols; c++) {\n         const outc = out.subarray(c * nrows, (c + 1) * nrows);\n         for (let r = 0; r < nrows; r++) {\n            outc[r] += xr[r] * yc[c];\n         }\n      }\n   }\n\n   return new Matrix(out, nrows, ncols);\n\n}\n\n\n/**\n * Compute X'Y product of two matrices or a vector and a matrix.\n *\n * @param {Matrix|Vector} X - a matrix or a vector.\n * @param {Matrix} Y - a matrix.\n *\n * @returns {Matrix} result of the product.\n *\n */\nexport function crossprod(X, Y) {\n\n   if (Y === undefined) {\n      Y = X;\n   }\n\n   if (!ismatrix(X) || !ismatrix(Y)) {\n      throw Error('crossprod: both X and Y must be instance of Matrix class.');\n   }\n\n   const nrx = X.nrows;\n   const ncx = X.ncols;\n\n   const nry = Y.nrows;\n   const ncy = Y.ncols;\n\n   // create vector for the product\n   const nrows = ncx;\n   const ncols = ncy;\n   const ninner = nrx;\n   const out = new Float64Array(nrows * ncols);\n\n   for (let c = 0; c < ncols; c++) {\n      // column c of Y\n      const yc = Y.v.subarray(c * nry, (c + 1) * nry);\n\n      // column c of out\n      const outc = out.subarray(c * nrows, (c + 1) * nrows);\n\n      for (let r = 0; r < nrows; r++) {\n\n         // column r of X (row r of X')\n         const xr = X.v.subarray(r * nrx, (r + 1) * nrx);\n\n         let s = 0;\n         for (let i = 0; i < ninner; i++) {\n            s += xr[i] * yc[i];\n         }\n         outc[r] = s;\n      }\n   }\n\n   return new Matrix(out, nrows, ncols);\n}\n\n\n/**\n * Bind several matrices or vectors into a single matrix row wise.\n *\n * @param  {...any} args - matrices or vectors separated by comma.\n *\n * @returns {Matrix} concatenated matrix.\n *\n */\nexport function rbind(...args) {\n\n   if (args.length === 1) return args[0];\n\n   // check that all matrices have the same number of rows\n   const ncols = ismatrix(args[0]) ? args[0].ncols : args[0].length;\n   const check = args.reduce( (acc, cur) => acc & ismatrix(cur) ? cur.ncols === ncols : cur.length === ncols, true);\n\n   if (!check) {\n      throw Error('rbind: all matrices must the same number of columns.');\n   }\n\n   // compute number of columns in outside matrix\n   const nrows = args.reduce( (acc, cur) => acc + (ismatrix(cur) ? cur.nrows : 1), 0);\n   const l = nrows * ncols;\n   const out = new Matrix.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set((ismatrix(a) ? a.t().v : a.v), start);\n      start += a.v.length;\n   }\n\n   return new Matrix(out, ncols, nrows).t();\n\n}\n\n\n/**\n * Bind several matrices or vectors into a single matrix column wise.\n *\n * @param  {...any} args - matrices or vectors separated by comma.\n *\n * @returns {Matrix} concatenated matrix.\n *\n */\nexport function cbind(...args) {\n\n   if (args.length === 1) return args[0];\n\n   // check that all matrices have the same number of rows\n   const nrows = ismatrix(args[0]) ? args[0].nrows : args[0].length;\n   const check = args.reduce( (acc, cur) => acc & (ismatrix(cur) ? cur.nrows === nrows : cur.length === nrows), true);\n\n   if (!check) {\n      throw Error('cbind: all matrices must the same number of rows.');\n   }\n\n   // compute number of columns in outside matrix\n   const ncols = args.reduce( (acc, cur) => acc + (ismatrix(cur) ? cur.ncols : 1), 0);\n   const l = nrows * ncols;\n   const out = new Matrix.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set(a.v, start);\n      start += a.v.length;\n   }\n\n   return new Matrix(out, nrows, ncols);\n\n}\n\n\n/**\n * Concatenate several vectors into one vector.\n *\n * @param {...Vector | ...Index} args - vectors separated by comma.\n *\n * @returns {Vector|Index} vector with concatenated values.\n *\n */\nexport function c(...args) {\n\n   if (args.length === 1) return args[0];\n\n   const l = args.reduce( (acc, cur) => acc + cur.length, 0);\n   const out = new args[0].constructor.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set(a.v, start);\n      start += a.length;\n   }\n\n   return new args[0].constructor(out);\n}\n\n\n/**\n * Change dimension of matrices and vectors.\n * @param {Matrix|Vector} obj - a matrix or a vector.\n * @param {number} nrow - number of rows in the reshaped object.\n * @param {number} ncol - number of columns in the reshaped object, if undefined, a vector will be returned.\n *\n * @returns {Matrix|Vector} the reshaped object.\n *\n */\nexport function reshape(obj, nrow, ncol) {\n\n   if (ncol === undefined) {\n      if (nrow !== obj.v.length) {\n         throw Error(\"reshape: provided dimension does not match number of values in the object.\");\n      }\n      return new Vector(obj.v);\n   }\n\n   if (obj.v.length !== nrow * ncol) {\n      throw Error(\"reshape: provided dimension does not match number of values in the object.\");\n   }\n\n   return new Matrix(obj.v, nrow, ncol);\n}\n\n\n\n/*************************************************/\n/*         Classes and type checkers             */\n/*************************************************/\n\n\n/**\n * Return 'true' of 'X' is a Matrix object, 'false' otherwise.\n *\n * @param {any} X - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function ismatrix(X) {\n   return X && X.constructor === Matrix;\n}\n\n\n/**\n * Create a Matrix object from array of values.\n *\n * @param {number[]} values - array with values.\n * @param {number} nrows - number of rows in matrix.\n * @param {number} ncols - number of columns in matrix.\n *\n * @returns {Matrix} the matrix.\n *\n */\nexport function matrix(values, nrows, ncols) {\n   return new Matrix(new Float64Array(values), nrows, ncols);\n}\n\n\n/** Class representing a matrix */\nexport class Matrix {\n\n   static valuesConstructor = Float64Array;\n   static TOLERANCE = Math.pow(10, -9);\n\n   /**\n    * Constructor for a Matrix object.\n    *\n    * @param {Float64Array} values - typed array with values.\n    * @param {number} nrows - number of rows in the matrix.\n    * @param {number} ncols - number of columns in the matrix.\n    *\n    * @returns {Matrix} a Matrix object (see description).\n    *\n    * @description  Create a matrix from vector of values. Matrix is represented by an object with two\n    * fields. Field 'v' is a typed Float64Array with all values, unfolded column by column. The second\n    * field, 'dim', is an array with 2 values: number of rows and number of columns.\n    *\n    */\n   constructor (values, nrows, ncols) {\n      if (!ArrayBuffer.isView(values) || values.constructor !== Matrix.valuesConstructor) {\n         throw Error('Matrix: parameter \"values\" must be Float64Array.')\n      }\n\n      if (nrows === 0 || ncols === 0) {\n         throw Error('Matrix: can not create matrix with zero rows or columns.')\n      }\n\n      if (values.length !== nrows * ncols) {\n         throw Error('Matrix: number elements in \"values\" is not equal to \"nrows\" x \"ncols\".')\n      }\n\n      this.v = values;\n      this.nrows = nrows\n      this.ncols = ncols;\n   }\n\n\n   /**\n    * Compute inverse of the matrix.\n    *\n    * @returns inverse matrix.\n    *\n    */\n   inv() {\n\n      if (this.nrows !== this.ncols) {\n         throw Error('inv: only squared matrices can be inverted.');\n      }\n\n      const n = this.ncols;\n\n      if (this.isuppertriangular()) {\n\n         if (this.islowertriangular()) {\n            // it means diagonal\n            return Matrix.diagm(this.diag().apply(v => Math.abs(v) > Number.EPSILON ? 1 / v : x));\n         }\n\n         // prepare matrices - we will transpose X to work with columns instead of rows\n         const I = Matrix.eye(n);\n         const Yt = Matrix.eye(n);\n         const Xt = this.t();\n\n         // solve for the last column\n         const s = Xt.v[(n - 1) * n + (n - 1)];\n         const c = n - 1;\n         for (let r = 0; r < n; r++) {\n            Yt.v[c * n + r] = I.v[c * n + r] / s;\n         }\n\n         // do backward substitution\n         for (let c = n - 2; c >= 0; c--) {\n            let s = I.getcolumn(c + 1);\n            const xc = Xt.getcolref(c + 1);\n            for (let r = c + 1; r < n; r++ ) {\n               const yc = Yt.getcolumn(r + 1);\n               s = s.subtract(yc.mult(xc[r]));\n            }\n            Yt.v.set(s.divide(xc[c]).v, c * n);\n         }\n\n         return Yt.t()\n      }\n\n\n      if (this.islowertriangular()) {\n\n         // check if diagonal elements are not zeros\n         const d = this.diag();\n         if (prod(d) < Number.EPSILON) {\n            throw Error('inv: the matrix is not invertible.');\n         }\n\n         // prepare matrices - we will transpose X to work with columns instead of rows\n         const I = Matrix.eye(n);\n         const Yt = Matrix.eye(n);\n         const Xt = this.t();\n\n         // solve for the first column\n         const c = 0;\n         const s = Xt.v[0];\n         for (let r = 0; r < n; r++) {\n            Yt.v[c * n + r] = I.v[c * n + r] / s;\n         }\n\n         // do forward substitution\n         for (let c = 1; c < n; c++) {\n            let s = I.getcolumn(c + 1);\n            const xc = Xt.getcolref(c + 1);\n            for (let r = 0; r < c; r++ ) {\n               const yc = Yt.getcolumn(r + 1);\n               s = s.subtract(yc.mult(xc[r]));\n            }\n            Yt.v.set(s.divide(xc[c]).v, c * n);\n         }\n\n         return Yt.t()\n      }\n\n      // invert matrix using QR transformation\n      const r = qr(this);\n      if (!r.R.isuppertriangular()) {\n         throw Error('inv: QR decomposition of the matrix returned incorrect result.');\n      }\n\n      return r.R.inv().dot(r.Q.t());\n   }\n\n\n   /**\n    * Check if matrix is lower triangular.\n    *\n    * @returns {boolean} true if matrix is lower triangular, false otherwise.\n    */\n   islowertriangular() {\n\n      if (this.nrows !== this.ncols) return false;\n      for (let j = 1; j < this.ncols; j++) {\n         for (let i = 0; i < j; i++) {\n            if (Math.abs(this.v[j * this.nrows + i]) > Matrix.TOLERANCE) return false;\n         }\n      }\n\n      return true;\n   }\n\n\n   /**\n    * Check if matrix is upper triangular.\n    *\n    * @returns {boolean} true if matrix is upper triangular, false otherwise.\n    */\n   isuppertriangular() {\n\n      if (this.nrows !== this.ncols) return false;\n\n      for (let j = 0; j < this.ncols; j++) {\n         for (let i = j + 1; i < this.nrows; i++) {\n            if (Math.abs(this.v[j * this.nrows + i]) > Matrix.TOLERANCE) return false;\n         }\n      }\n\n      return true;\n   }\n\n\n   /**\n    * Return vector with diagonal elements of matrix.\n    *\n    * @returns {Vector} vector with diagonal elements.\n    *\n    */\n   diag() {\n\n      const n = Math.min(this.nrows, this.ncols);\n      const out = new Float64Array(n);\n      for (let rc = 0; rc < n; rc++) {\n         out[rc] = this.getcolref(rc + 1)[rc];\n      }\n\n      return new Vector(out);\n   }\n\n\n   /**\n    * Transpose the matrix.\n    *\n    * @returns {Matrix} transposed matrix.\n    *\n    */\n   t() {\n\n      const ncols_out = this.nrows;\n      const nrows_out = this.ncols;\n      const out = new Matrix.valuesConstructor(this.v.length);\n\n      if (this.ncols < this.nrows) {\n         for(let i = 0; i < this.ncols; i++) {\n            const x = this.v.subarray(i * this.nrows, (i + 1) * this.nrows)\n            for(let j = 0; j < this.nrows; j++) {\n               out[j * nrows_out + i] = x[j];\n            }\n         }\n\n         return new Matrix(out, nrows_out, ncols_out);\n      }\n\n      for(let j = 0; j < this.nrows; j++) {\n         const outx = out.subarray(j * nrows_out, (j + 1) * nrows_out)\n         for(let i = 0; i < this.ncols; i++) {\n            outx[i] = this.v[i * this.nrows + j];\n         }\n      }\n\n      return new Matrix(out, nrows_out, ncols_out);\n   }\n\n\n   /**\n    * Compute a dot product of the matrix with vector or another matrix.\n    *\n    * @param {Vector|Matrix} X - a vector or a matrix to compute a dot product with.\n    *\n    * @returns {Matrix} result of the dot product.\n    *\n    */\n   dot(X) {\n\n      if (isvector(X)) {\n         return new Matrix(_dot(this.v, X.v, this.nrows, this.ncols, X.length, 1), this.nrows, 1);\n      }\n\n      if (ismatrix(X)) {\n         return new Matrix(_dot(this.v, X.v, this.nrows, this.ncols, X.nrows, X.ncols), this.nrows, X.ncols);\n      }\n\n      throw Error(\"dot: argument 'X' must be a matrix or a vector.\");\n   }\n\n   /**\n    * Does mathematical operation between the matrix and another matrix, a vector or a number.\n    *\n    * @param {number|Vector|Matrix} x - a vector or a number to operate with.\n    * @param {function} fun - function to apply.\n    * @param {number} dims - if 'x' is a vector which dimension applies it to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   op(X, fun, dims) {\n\n      if (ismatrix(X)) {\n         return new Matrix(_opvv(this.v, X.v, fun), this.nrows, this.ncols);\n      }\n\n      if (isnumber(X)) {\n         return new Matrix(_opvn(this.v, X, fun), this.nrows, this.ncols);\n      }\n\n      if (!isvector(X)) {\n         throw new Error('op: argument \"x\" must be a matrix, a vector or a number.');\n      }\n\n      if (dims === undefined) {\n         dims = X.length === this.ncols ? 2 : 1;\n      }\n\n      if (dims === 2 && X.length === this.ncols) {\n\n         const out = new Matrix.valuesConstructor(this.v.length);\n         for (let c = 0; c < this.ncols; c++) {\n            out.set(_opvn(this.getcolref(c + 1), X.v[c], fun), c * this.nrows);\n         }\n\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n\n      if (dims === 1 && X.length === this.nrows) {\n\n         const out = new Matrix.valuesConstructor(this.v.length);\n         for (let c = 0; c < this.ncols; c++) {\n            out.set(_opvv(this.getcolref(c + 1), X.v, fun), c * this.nrows);\n         }\n\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n\n      throw new Error('op: length of vector \"X\" does not match number of rows nor number of columns of the maytrix.');\n\n   }\n\n\n   /**\n    * Add a number or values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to sum the values with.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   add(X) {\n      return this.op(X, (a, b) => a + b);\n   }\n\n   /**\n    * Subtract a number or values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to subtract the values of.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   subtract(X) {\n      return this.op(X, (a, b) => a - b);\n   }\n\n\n   /**\n    * Multiply to a number or to values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to multiply the values to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   mult(X) {\n      return this.op(X, (a, b) => a * b);\n   }\n\n\n   /**\n    * Divide to a number or to values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to divide the values to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   divide(X) {\n      return this.op(X, (a, b) => a / b);\n   }\n\n\n   /**\n    * Applies a function to elements of the matrix.\n    * @param {function} fun - function to apply (should return single value).\n    * @param {number} dims - which elements to apply the function to (0 - every, 1 - rows, 2 - columns).\n    *\n    * @returns {Vector|Matrix} - result of applying the function (either array with one value for each\n    * row/column or another Matrix with transformed values).\n    */\n   apply(fun, dims) {\n\n      // by default function is applied to columns\n      if (dims === undefined) {\n         dims = 2;\n      }\n\n      // columns\n      if (dims == 2) {\n         const n = this.ncols;\n         const out = new Matrix.valuesConstructor(n);\n         for (let i = 0; i < n; i++) {\n            out[i] = fun(this.getcolref(i + 1));\n         }\n         return new Vector(out);\n      }\n\n      // rows\n      if (dims == 1) {\n         return this.t().apply(fun, 2);\n      }\n\n      // individual values\n      if (dims == 0) {\n         const n = this.v.length;\n         const out = new Matrix.valuesConstructor(n);\n         for (let i = 0; i < n; i++) {\n            out[i] = fun(this.v[i]);\n         }\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n   }\n\n\n   /**\n    * Replace values of matrix specified by 'rind' and 'cind' with values from another matrix.\n    *\n    * @param {Matrix} - matrix with values to use as replacement.\n    * @param {number | Array | Index} rind - row indices (as number or vector of indices).\n    * @param {number | Array | Index} cind - column indices (as number or vector of indices).\n    *\n    * @description Row and column indices must start from 1. Empty array ([]) tells function to use\n    * all elements (e.g. all rows or all columns). Size of matrix 'X' should correspond to the\n    * number of indices.\n    *\n    * Function does not create a new matrix but changes the current one.\n    *\n    * @returns {Matrix} the matrix with replaced values.\n    *\n    */\n   replace (X, rind, cind) {\n\n      if (typeof(rind) === 'number') {\n         rind = [rind];\n      }\n\n      if (rind.length === 0) {\n         rind = Index.seq(1, this.nrows);\n      }\n\n      if (!isindex(rind)) {\n         rind = index(rind);\n      }\n\n      if (typeof(cind) === 'number') {\n         cind = [cind];\n      }\n\n      if (cind.length === 0) {\n         cind = Index.seq(1, this.ncols);\n      }\n\n      if (!isindex(cind)) {\n         cind = index(cind);\n      }\n\n      const nrows = rind.length;\n      const ncols = cind.length;\n\n      if (min(rind) < 1 || max(rind) > this.nrows) {\n         throw Error('Matrix.replace: row indices do not match the dimension of matrix.');\n      }\n\n      if (min(cind) < 1 || max(cind) > this.ncols) {\n         throw Error('Matrix.replace: column indices do not match the dimension of matrix.');\n      }\n\n      if (X.nrows !== nrows || X.ncols !== ncols) {\n         throw Error('Matrix.replace: dimension of \"X\" does not match the indices.');\n      }\n\n      for (let ic = 0; ic < cind.length; ic++) {\n         const xc = X.getcolref(ic + 1);\n         const cv = (cind.v[ic] - 1) * this.nrows;\n         for (let ir = 0; ir < rind.length; ir++) {\n            const r = rind.v[ir];\n            this.v[cv + r - 1] = xc[ir];\n         }\n      }\n\n      return this;\n   }\n\n\n   /**\n    * Create a deep copy of the matrix.\n    *\n    * @returns {Matrix}\n    *\n    */\n   copy() {\n      return new Matrix(this.v.slice(), this.nrows, this.ncols);\n   }\n\n   /**\n    * Return values from a particular matrix row as vector.\n    *\n    * @param {number} ir - row index (starting from 1).\n    *\n    * @returns {Vector} vector with column values.\n    *\n    */\n   getrow(ir) {\n\n      if (ir < 1 || ir > this.nrows) {\n         throw Error('getrow: wrong row index.');\n      }\n\n      const v = new Vector.valuesConstructor(this.ncols);\n      for (let c = 0; c < this.ncols; c++) {\n         v[c] = this.getcolref(c + 1)[ir - 1];\n      }\n      return new Vector(v);\n   }\n\n\n   /**\n    * Return values from a particular matrix column as vector.\n    *\n    * @param {number} ic - column index (starting from 1).\n    *\n    * @returns {Vector} vector with column values.\n    *\n    */\n   getcolumn(ic) {\n\n      if (ic < 1 || ic > this.ncols) {\n         throw Error('getcolumn: wrong column index.');\n      }\n\n      return new Vector(this.v.slice((ic - 1) * this.nrows, ic * this.nrows));\n   }\n\n\n   /**\n    * Return a reference (not copy) to values of a particular matrix column.\n    *\n    * @param {number} ic - index of column (starting from 1).\n    *\n    * @returns {Float64Array} - reference to the column values as typed array.\n    *\n    */\n   getcolref(ic) {\n      return this.v.subarray((ic - 1) * this.nrows, ic * this.nrows);\n   }\n\n\n   /**\n    * Create a subset of a matrix using row and column indices.\n    *\n    * @param {number|Index} rind - row indices to select (as Index or a single number).\n    * @param {number|Index} cind - column indices to select (as Index or a single number).\n    *\n    * @description Row and column indices must start from 1. If 'rind' or 'cind' are null,\n    * all items from this direction will be taken.\n    *\n    * @returns {Matrix} the subset of the matrix.\n    *\n    */\n   subset(rind, cind) {\n\n      if (typeof(rind) === 'number') {\n         rind = index([rind]);\n      }\n\n      if (typeof(cind) === 'number') {\n         cind = index([cind]);\n      }\n\n      if (Array.isArray(rind)) {\n         rind = rind.length === 0 ? null : index(rind);\n      }\n\n      if (Array.isArray(cind)) {\n         cind = cind.length === 0 ? null : index(cind);\n      }\n\n      if (rind !== null && !isindex(rind)) {\n         throw Error('subset: parameter \"rind\" can be a number, null or instance of Index.');\n      }\n\n      if (cind !== null && !isindex(cind)) {\n         throw Error('subset: parameter \"cind\" can be a number, null or instance of Index.');\n      }\n\n      if (rind !== null && (min(rind) < 1 || max(rind) > this.nrows)) {\n         throw Error('subset: parameter \"rind\" does not match size of the matrix.');\n      }\n\n      if (cind !== null && (min(cind) < 1 || max(cind) > this.ncols)) {\n         throw Error('subset: parameter \"cind\" does not match size of the matrix.');\n      }\n\n      // select all rows and a subset of columns\n      if (rind === null) {\n\n         const ncols_out = cind.length;\n         const nrows_out = this.nrows;\n         const out = new Matrix.valuesConstructor(nrows_out * ncols_out);\n         for (let ic = 0; ic < cind.length; ic++) {\n            out.set(this.v.slice((cind.v[ic] - 1) * this.nrows, cind.v[ic] * this.nrows), ic * this.nrows);\n         }\n\n         return new Matrix(out, nrows_out, ncols_out);\n      }\n\n      // select all columns and a subset of rows\n      if (cind === null || cind === undefined) {\n         return this.t().subset(cind, rind).t();\n      }\n\n      // select specific columns and rows\n      const nrows_out = rind.length;\n      const ncols_out = cind.length;\n      const out = new Matrix.valuesConstructor(nrows_out * ncols_out);\n      let xc_out = new Matrix.valuesConstructor(nrows_out)\n      for (let ic = 0; ic < ncols_out; ic++) {\n\n         // take the a whole column from matrix and pick row values from it\n         const xc = this.v.subarray((cind.v[ic] - 1) * this.nrows, (cind.v[ic]) * this.nrows);\n         for (let ir = 0; ir < nrows_out; ir++) {\n            xc_out[ir] = xc[rind.v[ir] - 1];\n         }\n         out.set(xc_out, ic * nrows_out);\n      }\n\n      return new Matrix(out, nrows_out, ncols_out);\n   }\n\n\n   /**\n    * Convert matrix to a text representation for showing the values in nice way.\n    *\n    * @param {number} ndec - number of decimals to round the values to.\n    *\n    * @returns {string} the string with matrix representation.\n    *\n    * TODO: 1) add workaround for large matrices (...)\n    *\n    */\n   toString (ndec) {\n\n      function leftpad(x, n) {\n         return  \" \".repeat(n - x.length) + x;\n      }\n\n      if (ndec === undefined) {\n         ndec = 2;\n      }\n\n      const nvar = this.ncols;\n      const ndigits = Math.round(Math.abs(Math.log10(max(this.v)))) + ndec + 3;\n\n      let str = \"\";\n      const Xt = this.t();\n      for (let c = 1; c <= Xt.ncols; c++) {\n         str += Array.from(Xt.getcolref(c)).map(v => leftpad(v.toFixed(ndec), ndigits)).join(\" \") + \"\\n\"\n      }\n\n      return str;\n   }\n\n   /**\n    * Convert matrix values to a string which can be downloaded as CSV file.\n    *\n    * @param {string} sep - symbol to use for separation of values (by default \",\").\n    * @param {string} dec - symbold to use for separation of decimals (by default \".\").\n    * @param {Array} header - optional array of header elements (column names).\n    * @param {Array} labels - optional array of labels (row names).\n    *\n    * @returns {string} - string with CSV data.\n    */\n   toCSV(sep, dec, header, labels) {\n\n      // set default separator symbol\n      if (sep === undefined) {\n         sep = \",\";\n      }\n\n      // set default decimals separator symbol\n      if (dec === undefined) {\n         dec = sep === \";\" ? \",\" : \".\"\n      }\n\n      const hasLabels = labels !== undefined && labels !== null && labels.length > 0;\n      const hasHeader = header !== undefined && header !== null && header.length > 0;\n\n      if (hasLabels && labels.length !== this.nrows) {\n         throw Error (\"Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.\");\n      }\n\n      if (hasHeader && header.length !== this.ncols + (hasLabels ? 1 : 0)) {\n         throw Error (\"Matrix.toCSV: number of elements in header must match number of columns in the matrix.\");\n      }\n\n      // transpose to make it faster\n      const m = this.t();\n      let rows = hasHeader ? header.join(sep) + \"\\n\" : \"\";\n      for (let c = 1; c <= m.ncols; c++) {\n         rows = rows + (hasLabels ? labels[c - 1] + sep : \"\") + m.getcolref(c).join(sep) + \"\\n\";\n      }\n\n      // change decimal separator if it is not a dot\n      rows = rows.replace(/\\./g, dec);\n\n      return rows;\n   }\n\n   // Static methods //\n\n   /**\n    * Create a matrix with random values from normal distribution.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    * @param {number} [mu=0] - mean (expected) value.\n    * @param {number} [sigma=1] - standard deviation.\n    *\n    * @returns {Vector} matrix with values.\n    *\n    */\n   static randn(nrows, ncols, mu, sigma) {\n      return reshape(rnorm(nrows * ncols, mu, sigma), nrows, ncols);\n   }\n\n\n   /**\n    * Create a matrix with random values from uniform distribution [a, b].\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    * @param {number} [a=0] - smallest possible value.\n    * @param {number} [b=1] - largest possible value.\n    *\n    * @returns {Vector} matrix with values.\n    *\n    */\n   static rand(nrows, ncols, a, b) {\n      return reshape(runif(nrows * ncols, a, b), nrows, ncols);\n   }\n\n\n   /**\n    * Create an identity matrix.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns (if undefined, will be same as 'nrows').\n    *\n    * @returns {Matrix} the matrix.\n    *\n    */\n   static eye(nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      const out = new Float64Array(nrows * ncols);\n      for (let rc = 0; rc < Math.min(nrows, ncols); rc++) {\n         out[rc * nrows + rc] = 1;\n      }\n\n      return new Matrix(out, nrows, ncols);\n   }\n\n\n   /**\n    * Create a diagonal matrix based on vector with values.\n    *\n    * @param {Vector} x - vector with values.\n    *\n    * @returns {Matrix} the matrix.\n    *\n    */\n   static diagm(x) {\n\n      if (!isvector(x)) {\n         throw Error('diagm: the argument \"x\" must be a Vector.');\n      }\n\n      const n = x.length;\n      const out = new Float64Array(n * n);\n      for (let rc = 0; rc < n; rc++) {\n         out[rc * n + rc] = x.v[rc];\n      }\n\n      return new Matrix(out, n, n);\n   }\n\n\n   /**\n    * Create a Matrix object filled with zeros.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static zeros(nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      return new Matrix(new Float64Array(nrows * ncols), nrows, ncols);\n   }\n\n\n   /**\n    * Create a Matrix object filled with ones.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static ones(nrows, ncols) {\n      return Matrix.fill(1, nrows, ncols);\n   }\n\n   /**\n    * Create a Matrix object filled with a manual value.\n    *\n    * @param {number} v - value to fill the matrix with.\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static fill(v, nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      const out = new Float64Array(nrows * ncols);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Matrix(out, nrows, ncols);\n   }\n\n\n   /**\n    * Create a matrix by applying function to all possible pairs of values from two vectors.\n    *\n    * @param {Array|Vector} x - vector with values.\n    * @param {Array|Vector} y - vector with values.\n    * @param {function} fun - function of two arguments which returns a single value.\n    *\n    * @returns {Matrix}\n    */\n   static outer(x, y, fun) {\n\n      if (Array.isArray(x)) {\n         x = vector(x);\n      }\n\n      if (Array.isArray(y)) {\n         y = vector(y);\n      }\n\n      if (!isvector(x)) {\n         throw Error('Matrix.outer: parameter \"x\" must be a vector or an array with numbers.');\n      }\n\n      if (!isvector(y)) {\n         throw Error('Matrix.outer: parameter \"y\" must be a vector or an array with numbers.');\n      }\n\n      const out = Matrix.zeros(x.length, y.length);\n      for (let c = 0; c < y.length; c++) {\n         const yv = y.v[c]\n         const outc = out.getcolref(c + 1);\n         for (let r = 0; r < x.length; r++) {\n            outc[r] = fun(x.v[r], yv);\n         }\n      }\n\n      return out;\n   }\n\n\n   /**\n    * Parse string with data from a CSV file and create a matrix with values.\n    *\n    * @param {string} strData - string with all data from the CSV file.\n    * @param {string} sep - symbols used for separation of values (by default \",\").\n    * @param {boolean} hasHeader - logical, if first row must be treated as header or not.\n    * @param {boolean} hasLabels - logical, if first column must be treated as object labels or not.\n    *\n    *\n    * @returns {Object} JSON containing matrix with parsed values, header, values and decimal separators.\n    */\n   static parseCSV(strData, sep, hasHeader, hasLabels) {\n\n\n      // function which returns true if at least one value in array can not be parsed to float\n      function hasNaN(vec) {\n         return vec.some(v => Number.isNaN(Number.parseFloat(v.trim())));\n      }\n\n      // set default separator symbol\n      if (sep === undefined) {\n         sep = \",\";\n      }\n\n      // setup decimal separator\n      const dec = sep === \";\" ? \",\" : \".\";\n\n      // remove BOM symbol if any\n      strData = strData.replace(/^\\uFEFF/gm, \"\").replace(/^\\u00EF?\\u00BB\\u00BF/gm,\"\");\n\n      // remove \\r symbols\n      strData = strData.replace(/\\r/gm, \"\");\n\n      // split string with data values into array of rows\n      let rows = strData.split(/\\n/);\n\n      // check if the first row contains header\n      let header = [];\n      let startRow = 0;\n      const firstRow = rows[0].split(sep);\n      if (hasHeader || (hasHeader === undefined && hasNaN(firstRow))) {\n         header = firstRow;\n         startRow = 1;\n      }\n\n      // filter empty rows out\n      rows = rows.filter(v => v.trim().length > 1);\n\n      // check if first column contains labels\n      let labels = [];\n      let startColumn = 0;\n      if (hasLabels) {\n         startColumn = 1;\n      }\n\n      // number of rows and columns in future matrix\n      const nrows = rows.length - startRow;\n      const ncols = firstRow.length - startColumn;\n\n\n      if (nrows < 1) {\n         throw Error(\"Data file should contain at least 1 row with values.\");\n      }\n\n      if (ncols < 1) {\n         throw Error(\"Data file should contain at least 1 column with values.\");\n      }\n\n      // set rows of data as columns of matrix - it is faster\n      const data = Matrix.zeros(ncols, nrows);\n\n      // find symbol used for decimals separator\n      for (let r = startRow; r < nrows + startRow; r++) {\n\n         // parsing: trim spaces and replace non-numbers with dot (.)\n         const rowValuesAll = rows[r].split(sep)\n\n         let rowValues;\n         if (hasLabels) {\n            labels[r - startRow] = rowValuesAll[0];\n            rowValues = rowValuesAll.slice(1).map(v => Number.parseFloat(v.trim().replace(dec, \".\")));\n         } else {\n            rowValues = rowValuesAll.map(v => Number.parseFloat(v.trim().replace(dec, \".\")));\n         }\n\n         if (rowValues.some(v => Number.isNaN(v))) {\n            throw Error(\"Some of the values can not be converted to numbers, check your CSV file and try again.\");\n         }\n\n         if (rowValues.length != ncols) {\n            throw Error(\"Wrong number of values in row #\" + r);\n         }\n\n         data.v.set(new Float64Array(rowValues), (r - startRow) * ncols);\n      }\n\n      return {values: data.t(), header: header, labels: labels, sep:sep, dec:dec};\n   }\n\n}\n\n\n/**\n * Return 'true' of 'x' is a Vector object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isvector(x) {\n   return x && x.constructor === Vector;\n}\n\n\n/**\n * Create a Vector object from array of values.\n *\n * @param {number[]} values - array with values.\n *\n * @returns {Vector} the vector.\n *\n */\nexport function vector(values) {\n   return new Vector(new Float64Array(values));\n}\n\n\n/** Class representing a vector */\nexport class Vector {\n\n   static valuesConstructor = Float64Array;\n\n   /**\n    * Constructor for a Vector object.\n    *\n    * @param {Float64Array} values - typed array with values.\n    *\n    * @returns {Vector} a Vector object (see description).\n    * @constructor\n    *\n    * @description  Create a vector of values. Vector is represented by an object with two\n    * fields. Field 'v' is a typed Float64Array with values. The second field, 'length', is\n    * the length of the vector.\n    *\n    */\n   constructor(values) {\n\n      if (!ArrayBuffer.isView(values) || values.constructor !== Float64Array) {\n         throw Error('Vector: parameter \"values\" must be Float64Array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n   }\n\n   /**\n    * Returns a vector of indices for values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a vector of indices.\n    */\n   which(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Returns a subset of values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Vector} a subset.\n    */\n   filter(fun) {\n      const out = new Vector.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = this.v[i];\n            n = n + 1;\n         }\n      }\n\n      return new Vector(out.subarray(0, n));\n   }\n\n\n   /**\n    * Shuffles values in vector using FisherYates algorithm.\n    *\n    * @returns {Vector} vector with shuffled values.\n    */\n   shuffle() {\n      return new Vector(_shuffle(this.v));\n   }\n\n\n   /**\n    * Sorts values in a vector.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Vector} vector with sorted values\n    *\n    */\n   sort(decreasing) {\n      return new Vector(_sort(this.v, decreasing));\n   }\n\n   /**\n    * Sorts values in a vector and return indices of sorted values.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted values\n    *\n    */\n   sortind(decreasing) {\n      return new Index(_sortind(this.v, decreasing));\n   }\n\n\n   /**\n    * Replicate a vector 'n' times.\n    *\n    * @param {number} n - how many times the vector must be replicated.\n    *\n    * @returns {Vector} a vector with replicated values.\n    *\n    */\n   rep(n) {\n      return _rep(this, n);\n   }\n\n\n   /**\n    * Replicate each value in the vector 'n' times.\n    *\n    * @param {number} n - how many times every value must be replicated.\n    *\n    * @returns {Vector} a vector with replicated values.\n    *\n    */\n   repeach(n) {\n      return _repeach(this, n);\n   }\n\n\n   /**\n    * Replace values of vectors specified by 'ind' with values from another vector.\n    *\n    * @param {Vector} - vector with values to use as replacement.\n    * @param {number | Array | Index} ind - indices (as number or vector of indices).\n    *\n    * @description Indices must start from 1. Empty array ([]) tells function to use\n    * all elements. Length of vector 'x' should correspond to the\n    * number of indices.\n    *\n    * Function does not create a new vector but changes the current one.\n    *\n    * @returns {Vector} the vector with replaced values.\n    *\n    */\n   replace (x, ind) {\n\n      if (typeof(ind) === 'number') {\n         ind = [ind];\n      }\n\n      if (ind.length === 0) {\n         ind = Index.seq(1, this.length);\n      }\n\n      if (!isindex(ind)) {\n         ind = index(ind);\n      }\n\n      const n = ind.length;\n\n      if (min(ind) < 1 || max(ind) > this.length) {\n         throw Error('Vector.replace: indices do not match the lenght of the vector.');\n      }\n\n      if (x.length !== n) {\n         throw Error('Vector.replace: length of \"x\" does not match the indices.');\n      }\n\n      for (let i = 0; i < ind.length; i++) {\n         const r = ind.v[i];\n         this.v[r - 1] = x.v[i];\n      }\n\n      return this;\n   }\n\n\n   /**\n    * Create a subset of a vector using vector with indices.\n    *\n    * @param {number|Array|Index} ind - single index or vector with indices (must start from 1, not 0).\n    *\n    * @returns {Vector} a subset.\n    */\n   subset(ind) {\n\n      if (typeof(ind) === 'number') {\n         ind = index([ind]);\n      }\n\n      if (Array.isArray(ind)) {\n         ind = typeof(ind[0]) === 'boolean' ? Index.bool2ind(ind) : index(ind);\n      }\n\n      if (!isindex(ind)) {\n         throw Error('subset: parameter \"ind\" must be number, array of instance of class Index.');\n      }\n\n      const n = ind.length;\n      const out = Vector.zeros(n);\n\n      for (let i = 0; i < n; i++) {\n\n         if (ind.v[i] < 1) {\n            throw Error('subset: indices must start with 1 (not 0).');\n         }\n\n         if (ind.v[i] > this.length) {\n            throw Error('subset: index exceeds the length of the vector.');\n         }\n\n         out.v[i] = this.v[ind.v[i] - 1];\n      }\n\n      return out;\n   }\n\n\n   /**\n    * Create a subset of a vector values which are located between positions 'start' and 'end' (both included).\n    *\n    * @param {number} start - index of value to start (must start from 1, not 0).\n    * @param {number} end - index of value to end.\n    *\n    * @returns {Vector} a subset.\n    */\n   slice(start, end) {\n\n      if (start === null) {\n         start = 1;\n      }\n\n      if (end === null || end === undefined) {\n         end = this.length;\n      }\n\n      if (start < 1) {\n         throw Error('slice: indices must start with 1 (not 0).');\n      }\n\n      if (end > this.length) {\n         throw Error('slice: index exceeds the length of the vector.');\n      }\n\n      if (end < start) {\n         throw Error('slice: \"end\" must not be smaller than \"start\".');\n      }\n\n      return new Vector(this.v.slice(start - 1, end));\n   }\n\n\n   /**\n    * Make a deep copy of the vector.\n    */\n   copy() {\n      return new Vector(this.v.slice());\n   }\n\n\n   /**\n    * Compute a dot product with another vector.\n    *\n    * @param {Vector} x - a vector.\n    *\n    * @returns {number} result of the product.\n    *\n    */\n   dot(x) {\n\n      if (x === undefined) {\n         x = this;\n      }\n\n      return _dot(this.v, x.v, 1, this.length, x.length, 1)[0];\n   }\n\n\n   /**\n    * Does mathematical operation between vector values and either values from another vector or a number.\n    *\n    * @param {number|Vector} x - a vector or a number to operate with.\n    * @param {function} fun - function to apply.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   op(x, fun) {\n      if (isvector(x)) {\n         return new Vector(_opvv(this.v, x.v, fun));\n      }\n\n      if (isnumber(x)) {\n         return new Vector(_opvn(this.v, x, fun));\n      }\n\n      throw new Error('op: argument \"x\" must be a vector or a number.');\n   }\n\n\n   /**\n    * Add a number or values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to sum the values with.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   add(x) {\n      return this.op(x, (a, b) => a + b);\n   }\n\n\n   /**\n    * Subtract a number or values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to subtract the values of.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   subtract(x) {\n      return this.op(x, (a, b) => a - b);\n   }\n\n\n   /**\n    * Multiply to a number or to values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to multiply the values to.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   mult(x) {\n      return this.op(x, (a, b) => a * b);\n   }\n\n\n   /**\n    * Divide to a number or to values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to divide the values to.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   divide(x) {\n      return this.op(x, (a, b) => a / b);\n   }\n\n\n   /**\n    * Apply a function to each value of the vector.\n    *\n    * @param {function} fun - function to apply (should take one value and return one value).\n    *\n    * @returns {Vector} the transformed vector.\n    */\n   apply(fun) {\n\n      const n = this.v.length;\n      const out = Vector.zeros(n);\n      for (let i = 0; i < n; i++) {\n         out.v[i] = fun(this.v[i]);\n      }\n\n      return out;\n   }\n\n\n   // Static methods //\n\n\n   /**\n    * Concatenates numbers, arrays and vectors into a single vector.\n    *\n    * @param  {...any} args - numbers, arrays or/and vectors.\n    *\n    * @returns {Vector}\n    *\n    */\n   static c(...args) {\n\n      if (args.length === 1) return args[0];\n\n      const l = args.reduce( (acc, cur) => acc + (typeof(cur) === 'number' ? 1 : cur.length), 0);\n      const out = new Vector.valuesConstructor(l);\n\n      let start = 0;\n      for (const a of args) {\n\n         if (typeof(a) === 'number') {\n            out[start] = a;\n            start += 1;\n         } else {\n            out.set(isvector(a) ? a.v : new Vector.valuesConstructor(a), start);\n            start += typeof(a) === 'number' ? 1 : a.length;\n         }\n      }\n\n      return new Vector(out);\n   }\n\n\n   /**\n    * Generate sequence of values.\n    *\n    * @param {number} start - first value.\n    * @param {number} end - last value.\n    * @param {number} [by=1] - increment between values.\n    *\n    * @returns {Vector} vector with sequence values.\n    *\n    */\n   static seq(start, end, by) {\n      return _seq(start, end, by, Vector)\n   }\n\n\n   /**\n    * Create a vector with random values from normal distribution.\n    *\n    * @param {number} length - number of values.\n    * @param {number} [mu=0] - mean (expected) value.\n    * @param {number} [sigma=1] - standard deviation.\n    *\n    * @returns {Vector} vector with values.\n    *\n    */\n   static randn(length, mu, sigma) {\n      return rnorm(length, mu, sigma);\n   }\n\n\n   /**\n    * Create a vector with random values from uniform distribution [a, b].\n    *\n    * @param {number} length - number of values.\n    * @param {number} [a=0] - smallest possible value.\n    * @param {number} [b=1] - largest possible value.\n    *\n    * @returns {Vector} vector with values.\n    *\n    */\n   static rand(length, a, b) {\n      return runif(length, a, b);\n   }\n\n\n   /**\n    * Create a Vector object filled with zeros.\n    *\n    * @param {number} n - length of the vector\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static zeros(n) {\n      return new Vector(new Vector.valuesConstructor(n));\n   }\n\n\n   /**\n    * Create a Vector object filled with ones.\n    *\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static ones(n) {\n      return Vector.fill(1, n);\n   }\n\n\n  /**\n    * Create a Vector object filled with a repeated value.\n    *\n    * @param {number} v - value to fill the vector with.\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static fill(v, n) {\n\n      const out = new Vector.valuesConstructor(n);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Vector(out);\n   }\n\n}\n\n\n/**\n * Return 'true' of 'x' is an Index object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isindex(x) {\n   return x.constructor === Index;\n}\n\n\n/**\n * Create an Index object from array of values.\n *\n * @param {number[]} values - array with values.\n *\n * @returns {Index} the vector.\n *\n */\nexport function index(values) {\n   return new Index(new Int32Array(values));\n}\n\n\n/** Class representing a vector with indices */\nexport class Index {\n\n   static valuesConstructor = Int32Array;\n\n   /**\n    * Constructor for an Index object.\n    *\n    * @param {Int32Array} values - typed array with index values.\n    *\n    * @returns {Index} an Index object (see description).\n    * @constructor\n    *\n    * @description  Create a vector of values to be used as indices (e.g. for subsetting,\n    * counting, etc.). Index is represented by an object with two fields. Field 'v' is a typed\n    * Int32Array with index values. The second field, 'length', is the length of the vector.\n    *\n    */\n   constructor(values) {\n\n      if (!ArrayBuffer.isView(values) || values.constructor !== Int32Array) {\n         throw Error('Index: parameter \"values\" must be Int32Array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n   }\n\n\n   /**\n    * Returns a vector of indices for values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a vector of indices.\n    */\n   which(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Returns a subset of indices for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a subset.\n    */\n   filter(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = this.v[i];\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Shuffle indices.\n    *\n    * @returns {Index} vector with shuffled indices.\n    */\n   shuffle() {\n      return new Index(_shuffle(this.v));\n   }\n\n\n   /**\n    * Sorts indices.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted indices.\n    *\n    */\n   sort(decreasing) {\n      return new Index(_sort(this.v, decreasing));\n   }\n\n   /**\n    * Sorts indices and return indices of sorted values.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted indices.\n    *\n    */\n   sortind(decreasing) {\n      return new Index(_sortind(this.v, decreasing));\n   }\n\n   /**\n    * Replicate the index object 'n' times.\n    *\n    * @param {number} n - how many times the index must be replicated.\n    *\n    * @returns {Index} index with replicated values.\n    *\n    */\n   rep(n) {\n      return _rep(this, n);\n   }\n\n\n   /**\n    * Replicate each index in the index 'n' times.\n    *\n    * @param {number} n - how many times every value must be replicated.\n    *\n    * @returns {Index} an index object with replicated values.\n    *\n    */\n   repeach(n) {\n      return _repeach(this, n);\n   }\n\n   /**\n    * Create a subset of a index using another vector with indices.\n    *\n    * @param {number|Array|Index} ind - single index or vector with indices (must start from 1, not 0).\n    *\n    * @returns {Index} a subset.\n    */\n   subset(ind) {\n\n     if (typeof(ind) === 'number') {\n         ind = index([ind]);\n      }\n\n      if (Array.isArray(ind)) {\n         ind = index(ind);\n      }\n\n      if (!isindex(ind)) {\n         throw Error('subset: parameter \"ind\" must be number, array of instance of class Index.');\n      }\n\n      const n = ind.length;\n      const out = new Index.valuesConstructor(n);\n\n      for (let i = 0; i < n; i++) {\n\n         if (ind.v[i] < 1) {\n            throw Error('subset: indices must start with 1 (not 0).');\n         }\n\n         if (ind.v[i] > this.length) {\n            throw Error('subset: index exceeds the length of the vector.');\n         }\n\n         out[i] = this.v[ind.v[i] - 1];\n      }\n\n      return new Index(out);\n   }\n\n\n   /**\n    * Create a subset of a vector of indices which are located between positions 'start' and 'end' (both included).\n    *\n    * @param {number} start - index of value to start (must start from 1, not 0).\n    * @param {number} end - index of value to end.\n    *\n    * @returns {Index} a subset.\n    */\n   slice(start, end) {\n\n      if (start === null) {\n         start = 1;\n      }\n\n      if (end === null || end === undefined) {\n         end = this.length;\n      }\n\n      if (start < 1) {\n         throw Error('slice: indices must start with 1 (not 0).');\n      }\n\n      if (end > this.length) {\n         throw Error('slice: index exceeds the length of the vector.');\n      }\n\n      if (end < start) {\n         throw Error('slice: \"end\" must not be smaller than \"start\".');\n      }\n\n      return new Index(this.v.slice(start - 1, end));\n   }\n\n\n   // Static methods //\n\n   /**\n    * Generate sequence of indices.\n    *\n    * @param {number} start - first value.\n    * @param {number} end - last value.\n    * @param {number} [by=1] - increment between values.\n    *\n    * @returns {Index} object with sequence values.\n    *\n    */\n   static seq(start, end, by) {\n      return _seq(start, end, by, Index);\n   }\n\n\n   /**\n    * Create an Index object filled with ones.\n    *\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Index} the generated vector of indices.\n    *\n    */\n   static ones(n) {\n      return Index.fill(1, n);\n   }\n\n\n  /**\n    * Create an Index object filled with a repeated value.\n    *\n    * @param {number} v - value to fill the index vector with (must be integer).\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector of indices.\n    *\n    */\n   static fill(v, n) {\n\n      const out = new Index.valuesConstructor(n);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Index(out);\n   }\n\n\n   /**\n    * Convert array of logical values to vector of indices.\n    *\n    * @param {Array} x - array of logical values.\n    *\n    * @returns {Index} vector of indices where x is true.\n    *\n    */\n   static bool2ind(x) {\n\n      let n = 0;\n      const out = new Index.valuesConstructor(x.length);\n\n      for (let i = 0; i < x.length; i++) {\n         if (x[i]) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n}\n\n/**\n * Return 'true' of 'x' is an Factor object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isfactor(x) {\n   return x.constructor === Factor;\n}\n\n/**\n * Create a factor object from Array with values.\n *\n * @param {Array} x - array with values.\n *\n * @return {Factor} returns instance of Factor object.\n *\n */\nexport function factor(x) {\n   const n = x.length;\n   const values = new Factor.valuesConstructor(n);\n   const labels = [];\n\n   for (let i = 0; i < n; i++) {\n      const j = labels.findIndex(v => v === x[i]);\n      if (j < 0) {\n         // value is new\n         labels.push(x[i])\n         values[i] = labels.length - 1;\n      } else {\n         // value already present\n         values[i] = j;\n      }\n   }\n\n   return new Factor(values, labels)\n}\n\n\n/** Class representing a factor vector with categorical variables */\nexport class Factor {\n\n   static valuesConstructor = Uint8Array;\n\n   /**\n    * Constructor for a Factor object.\n    *\n    * @param {Uint8Array} values - vector with indices for each category item.\n    * @param {Array} labels - array with labels for each category.\n    *\n    * @returns {Factor} class object (see description).\n    * @constructor\n    *\n    */\n   constructor(values, labels) {\n\n      if (values.constructor !== Factor.valuesConstructor) {\n         throw Error('Factor: wrong class for parameter \"values\".')\n      }\n\n      if (values.nrows < 1 || values.ncols < 1) {\n         throw Error('Factor: parameter \"values\" must have at least one row and one column.')\n      }\n\n      if (!labels || !Array.isArray(labels)) {\n         throw Error('Factor: parameter \"labels\" must be an array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n      this.labels = labels.map(v => v.toString());\n      this.nlevels = this.labels.length;\n   }\n\n   /**\n    * Return vector of indices corresponding to location of a particular category.\n    *\n    * @param {string} value - name (label) of the category to find.\n    *\n    * @returns {Index} vector with indices (starts from 1).\n    */\n   which(value) {\n      const ind = this.labels.findIndex((v, i) => v === value);\n      const out = new Index.valuesConstructor(this.length);\n      let k = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (this.v[i] === ind) {\n            out[k] = i + 1;\n            k += 1;\n         }\n      }\n\n      return new Index(out.slice(0, k))\n   }\n}\n\n\n\n/***********************************************/\n/*    Generic methods                          */\n/***********************************************/\n\n/**\n * Generate sequence of values for vector or index.\n *\n * @param {number} start - first value.\n * @param {number} end - last value.\n * @param {number} [by=1] - increment between values.\n * @param {class} classRef - class reference\n *\n * @returns {Object} object with sequence values.\n *\n */\nfunction _seq(start, end, by, classRef) {\n\n   // by default increment is unit\n   if (by === undefined) by = (start <= end) ? 1 : -1;\n\n   // compute length of sequence\n   const length = Math.floor((end - start) / by) + 1;\n\n   if (length < 1) {\n      throw Error('seq: wrong combination of parameters.');\n   }\n\n   const x = new classRef.valuesConstructor(length);\n   for (let i = 0; i < length; i++) {\n      x[i] = start + i * by;\n   }\n\n   return new classRef(x);\n}\n\n\n/**\n * Replicate object 'n' times.\n *\n * @param {Object} obj - object to replicate (Vector or Index).\n * @param {number} n - how many times the vector must be replicated.\n *\n * @returns {Object} an object with replicated values.\n *\n */\nfunction _rep(obj, n) {\n\n   const l = obj.length * n;\n   const out = new obj.constructor.valuesConstructor(l);\n   for (let i = 1; i <= n; i++) {\n      for (let j = 0; j < obj.length; j++) {\n         out[(i - 1) * obj.length + j] = obj.v[j];\n      }\n   }\n\n   return new obj.constructor(out);\n}\n\n\n/**\n * Replicate each value in the object 'n' times.\n *\n * @param {Object} obj - object to replicate (Vector or Index).\n * @param {number} n - how many times every value must be replicated.\n *\n * @returns {Object} an object with replicated values.\n *\n */\nfunction _repeach(obj, n) {\n\n   if (n < 1 || Math.round(n) !== n) {\n      throw Error('rep: parameter \"n\" must be an integer number > 1.');\n   }\n\n   const l = obj.length * n;\n   const out = new obj.constructor.valuesConstructor(l);\n   for (let j = 0; j < obj.length; j++) {\n      for (let i = 0; i < n; i++) {\n         out[j * n + i] = obj.v[j];\n      }\n   }\n\n   return new obj.constructor(out);\n}\n\n\n/**\n * Does an arithmetic operation for individual values from two arrays.\n *\n * @param {Array|Float64Array} v1 - the first array.\n * @param {Array|Float64Array} v2 - the second array.\n * @param {function} fun - function to use.\n *\n * @description the function must take two numbers and return one.\n *\n * @returns array of the same type as v1 and v2.\n */\nfunction _opvv(v1, v2, fun) {\n\n   if (v1.length !== v2.length) {\n      throw new Error(\"_opvv: arrays sizes do not match.\");\n   }\n\n   if (v1.constructor !== v2.constructor) {\n      throw new Error(\"_opvv: array types do not match.\");\n   }\n\n   const out = new v1.constructor(v1.length);\n   for (let i = 0; i < v1.length; i++) {\n      out[i] = fun(v1[i], v2[i]);\n   }\n\n   return out;\n}\n\n\n\n/**\n * Does an arithmetic operation for individual value from an array and a number.\n *\n * @param {Array|Float64Array} v1 - an array.\n * @param {number} v2 - a number.\n * @param {function} fun - function to use.\n *\n * @description the function must take two numbers and return one.\n *\n * @returns array of the same type as v1.\n */\nfunction _opvn(v1, v2, fun) {\n\n   const out = new v1.constructor(v1.length);\n   for (let i = 0; i < v1.length; i++) {\n      out[i] = fun(v1[i], v2);\n   }\n\n   return out;\n}\n\n\n/**\n * Generic function for taking a dot product of two matrices, X and Y, represented as vectors\n * @param {TypedArray} xv - vector with values from X\n * @param {TypedArray} yv - vector with values from Y\n * @param {number} nrx - number of rows in X\n * @param {number} ncx - number of columns in X\n * @param {number} nry - number of rows in Y\n * @param {number} ncy - number of columns in Y\n *\n * @returns {TypedArray} - vector with result of the product\n */\nexport function _dot(xv, yv, nrx, ncx, nry, ncy) {\n\n   if (ncx !== nry) {\n      throw Error('_dot: matrix dimensions do not much.');\n   }\n\n   // create vector for the product\n   const nrows = nrx;\n   const ncols = ncy;\n   const ninner = ncx;\n   const out = new xv.constructor(nrows * ncols);\n\n   for (let c = 0; c < ncols; c++) {\n      const yc = yv.subarray(c * nry, (c + 1) * nry)\n      const outc = out.subarray(c * nrows, (c + 1) * nrows);\n\n      for (let i = 0; i < ninner; i++) {\n         const yci = yc[i];\n         const xr = xv.subarray(i * nrx, (i + 1) * nrx)\n         for (let r = 0; r < nrows; r++) {\n            outc[r] += xr[r] * yci;\n         }\n      }\n   }\n\n   return out;\n}\n\n\n/**\n * Shuffles values in vector x using FisherYates algorithm.\n *\n * @param {Arrat|TypedArray} x - a vector with values.\n *\n * @returns {Array|TypedArray} ector with shuffled values.\n *\n */\nexport function _shuffle(x) {\n\n  let y = x.slice();\n  let n = y.length;\n  let t, i;\n\n  while (n) {\n    i = Math.floor(Math.random() * n--);\n    t = y[n];\n    y[n] = y[i];\n    y[i] = t;\n  }\n\n  return y;\n}\n\n\n/**\n * Sorts values in a vector.\n *\n * @param {Array|TypedArray} x - vector with values.\n * @param {boolean} decreasing - should order be decreasing (true) or increasing (false).\n *\n * @returns {Array} array with two vectors: sorted values and indices of the sorted values.\n *\n */\nexport function _sort(x, decreasing = false) {\n   return decreasing ? x.slice().sort((a, b) => b - a) : x.slice().sort((a, b) => a - b);\n}\n\n\n/**\n * Sorts values in a vector.\n *\n * @param {Array|TypedArray} x - vector with values.\n * @param {boolean} decreasing - should order be decreasing (true) or increasing (false).\n *\n * @returns {Array} array with two vectors: sorted values and indices of the sorted values.\n *\n */\nexport function _sortind(x, decreasing = false) {\n   const ind = Index.seq(1, x.length).v;\n   return decreasing ? ind.sort((a, b) => x[b - 1] - x[a - 1]) : ind.sort((a, b) => x[a - 1] - x[b - 1]);\n}\n","<script>\n   /***************************************************************\n    * Button                                                      *\n    * --------------------                                        *\n    * control element in form of rectangular button with text     *\n    ***************************************************************/\n</script>\n\n<span class=\"wrapper\">\n<button tabindex=\"0\" class=\"button-rect\" on:click><slot></slot></button>\n</span>\n\n<style>\n\nbutton {\n   background: #606060;\n   display: inline-block;\n   color: #fefefe;\n   font-size: 0.9em;\n   padding: 0.2em 0.5em;\n   line-height: 1.5em;\n   border: none;\n   border-radius: 0.25em;\n   box-shadow: none;\n   text-align: center;\n   border: 1px solid transparent;\n}\n\nbutton:hover {\n   border-color: #6eb8ff;\n   background: #6eb8ff20;\n   color: #5086b9;\n}\n\n</style>\n","<script>\n   /***************************************************************\n    * ButtonCancel                                                *\n    * --------------------                                        *\n    * control element in form of red circle button with cross     *\n    ***************************************************************/\n   export let title = 'Reset';\n</script>\n\n<button tabindex=\"0\" on:click alt={title} title={title} ></button>\n\n<style>\n\n   button {\n      background: #606060;\n      display: inline-block;\n      color: #fefefe;\n      font-size: 1em;\n      width: 1.3em;\n      height: 1.3em;\n      border: none;\n      border-radius: 50%;\n      box-shadow: none;\n      margin-left: 1.5em;\n      text-align: center;\n      padding: 0;\n      background-size: 40% 40%;\n      background-position: 50%;\n      background-repeat: no-repeat;\n      background-image:\n        url('data:image/svg+xml;utf8,<svg viewBox=\"0 0 100 100\" version=\"1.1\" style=\"stroke:%23fafafa;stroke-width:14;\" xmlns=\"http://www.w3.org/2000/svg\"><line x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\"/><line x1=\"0\" y1=\"100\" x2=\"100\" y2=\"0\"/></svg>');\n   }\n\n   button:hover {\n      background-color: crimson;\n   }\n\n</style>\n","<script>\n   /***************************************************************\n    * Container                                                   *\n    * --------------------                                        *\n    * a container for any control element                         *\n    ***************************************************************/\n\n   export let label = null;   // text label (optional)\n   export let status = '';    // class name for status (e.g. 'hidden' or 'error')\n</script>\n\n<div class=\"control-element {status}\">\n   {#if label}\n   <span class=\"label\">{label}</span>\n   {/if}\n   <slot></slot>\n</div>\n\n<style>\n   .control-element {\n      font-size: 0.85em;\n      background: #fff;\n      padding: 0.5em 0.75em;\n      border-radius: 0;\n      display: flex;\n      justify-items: center;\n      justify-content: center;\n      align-items: center;\n      margin-bottom: 0.5px;\n   }\n\n   .control-element:first-of-type {\n      margin-top: 0.25rem;\n      border-top-left-radius: 0.25rem;\n      border-top-right-radius: 0.25rem;\n      margin-bottom: 1px;\n   }\n\n   .control-element:last-of-type {\n      margin-bottom: 0.25rem;\n      border-bottom-left-radius: 0.25rem;\n      border-bottom-right-radius: 0.25rem;\n   }\n\n   .hidden {\n      display: none;\n   }\n\n   .control-element.error {\n      background: crimson;\n      color: #fefefe;\n   }\n\n   .label {\n      padding-right: 1em;\n      flex-basis: 12ch;\n      flex-grow: 0;\n      flex-shrink: 1;\n      color: #606570;\n   }\n\n   .control-element > :global(.wrapper) {\n      flex: 1 1;\n   }\n\n   .control-element > :global(p) {\n      text-align: left;\n      flex-grow: 1;\n      padding: 0 0.25em;\n      margin: 0;\n      font-size: 0.9em;\n   }\n\n   .control-element > :global(.title) {\n      font-size: 1.05em;\n      font-weight: bold;\n      color: #303540;\n      flex-grow: 1;\n      padding: 0 0.25em 0 0;\n      margin: 0;\n   }\n</style>","<script>\n   /***************************************************************\n    * Range                                                       *\n    * --------------------                                        *\n    * control element for taking a numeric value from a range     *\n    ***************************************************************/\n\n   import { createEventDispatcher } from 'svelte';\n\n   export let id;                                        // text ID for the input element\n   export let value;                                     // initial value\n   export let min;                                       // smallest value of the range\n   export let max;                                       // largest value of the range\n   export let decNum = 1;                                // number of decimals to show the current value\n   export let step = +((max - min) / 100).toFixed(4);    // increment/decrement step\n\n\n   if (value < min || value > max) {\n      throw new Error('The value is outside of the provided range.');\n   }\n\n   const dispatch = createEventDispatcher();\n\n   let sliderElement;\n   let sliderContainer;\n   let isDragging = false;\n\n   const computeValue = (p) => {\n      const tmpValue = min + p * (max - min);\n\n      // strange construction below is needed for:\n      // a. make a value fractionated according to step\n      // b. get rid of small decimals added by JS due to loss of precision\n      return(+(Math.round(tmpValue / step) * step).toFixed(4));\n   }\n\n   /**\n    * Returns relative position of the element 'e' inside the slider\n    * @param e\n    */\n   const getRelativePosition = (e) => {\n      const sliderRect = sliderElement.getBoundingClientRect();\n      const parentRect = sliderContainer.getBoundingClientRect();\n      const minX = sliderRect.x;\n      const maxX = parentRect.x + parentRect.width;\n\n      return (e.clientX - minX) / (maxX - minX);\n   }\n\n   /**\n    * Handler of changing start event\n    * @param e\n    */\n   const startChanging = (e) => {\n      const p = getRelativePosition(e);\n      if (p < 0 || p > 1) return;\n      isDragging = p * 100 > width - 5 && p * 100 < width + 5;\n   }\n\n   /**\n    * Handler of changing cancel event\n    * @param e\n    */\n   const cancelChanging = (e) => {\n      isDragging = false;\n   }\n\n   /**\n    * Handler of changing stop event\n    * @param e\n    */\n   const stopChanging = (e) => {\n      isDragging = false;\n      const p = getRelativePosition(e);\n      if (p < 0 || p > 1) return;\n\n      value = computeValue(p);\n   }\n\n   /**\n    * Handler of event when changes are made by mouse wheel\n    * @param e\n    */\n   const changingByWheel = (e) => {\n      let newValue = value + step * e.deltaY * 0.5;\n      if (newValue < min) newValue = min;\n      if (newValue > max) newValue = max;\n\n      value = +(Math.round(newValue / step) * step).toFixed(4);\n   }\n\n   /**\n    * Handler of event when changes are made by dragging an element\n    * @param e\n    */\n   const changing = (e) => {\n      if (!isDragging) return;\n      const p = getRelativePosition(e);\n      if (p < 0 || p > 1) return;\n\n      value = computeValue(p);\n   }\n\n   /**\n    * Handler of event when changes are made by pressing left and right arrows\n    * @param e\n    */\n   const changingByKeys = (e) => {\n      console.log(e.key)\n      if (e.key === 'ArrowLeft') {\n         value = value - step < min ? min : value - step;\n         return\n      }\n\n      if (e.key === 'ArrowRight') {\n         value = value + step > max ? max : value + step;\n         return\n      }\n\n   }\n\n\n   $: width = (value - min) / (max - min) * 100;\n   $: dispatch(\"change\", value);\n</script>\n\n<div\n   id={id}\n   role=\"slider\"\n   tabindex=\"0\"\n   aria-valuenow={value}\n   aria-valuemin={min}\n   aria-valuemax={max}\n   class=\"range-slider-container\"\n   bind:this={sliderContainer}\n   on:mousewheel|preventDefault={changingByWheel}\n   on:mousemove={changing}\n   on:keydown={changingByKeys}\n   on:mousedown={startChanging}\n   on:mouseleave={cancelChanging}\n   on:mouseup={stopChanging}>\n\n   <div class=\"range-slider\" style=\"width:{width}%\" bind:this={sliderElement}>\n   {#if width > 25}\n   <span style=\"padding-right:0.25em;color:#fefefe\" class=\"range-value\">{value.toFixed(decNum)}</span>\n   {/if}\n   </div>\n\n   {#if width <= 25}\n   <span style=\"padding-left:0.25em;color:#606060\" class=\"range-value\">{value.toFixed(decNum)}</span>\n   {/if}\n</div>\n\n\n<style>\n   .range-slider-container {\n      position: relative;\n      box-sizing: border-box;\n      display: inline-block;\n      flex: 1 1 auto;\n      background: #f0f0f0;\n      height: 1.5em;\n      margin: 0;\n      padding: 1px 0;\n      width: auto;\n      border-radius: 2px;\n      cursor: default;\n\n      display: flex;\n      align-items: center;\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n\n   }\n\n   .range-slider {\n      position: relative;\n      display: inline-block;\n      box-sizing: border-box;\n      background: #6EB8FF;\n      border-radius: 2px;\n      text-align: right;\n      color: #fafafa;\n      margin: 0;\n      padding: 0;\n      height: 100%;\n      cursor:default;\n      border-right: 5px solid #528abe;\n      cursor: default;\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n   }\n\n   .range-value {\n      display: inline-block;\n      margin: 0;\n      padding: 0;\n      cursor: default;\n      font-size: 0.85em;\n\n\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n   }\n\n</style>\n\n","<script>\n   /***************************************************************\n    * Select                                                      *\n    * --------------------                                        *\n    * control element for selecting among a few options           *\n    ***************************************************************/\n\n   export let id;                         // text ID of the input element\n   export let options;                    // array with all options\n   export let value = options[0];         // initial selected value\n   export let className = '';             // extra class name\n\n   /**\n    * Handler of event when changes are made by pressing left and right arrows\n    * @param e\n    */\n   const changeOption = (e) => {\n      console.log(e.key)\n      if (e.key === 'ArrowLeft') {\n         const ind = options.findIndex(v => v === value);\n         if (ind > 0) {\n            value = options[ind - 1];\n         }\n         return\n      }\n\n      if (e.key === 'ArrowRight') {\n         const ind = options.findIndex(v => v === value);\n         if (ind < options.length) {\n            value = options[ind + 1];\n         }\n         return\n      }\n   }\n\n</script>\n\n<div on:keydown={changeOption} role=\"radiogroup\" tabindex=\"0\" class=\"selector {className}\">\n   {#each options as option (option)}\n   <button on:click={() => value = option} class=\"option option_{option}\" class:selected={option==value}>\n   {@html option}\n   </button>\n   {/each}\n</div>\n<input name={id} bind:value={value}>\n\n<style>\n   input {\n      display: none;\n   }\n\n   .selector {\n      position: relative;\n      box-sizing: border-box;\n      flex: 1 1 auto;\n      font-size: 1em;\n      line-height: 1.5em;\n      margin: 0;\n      padding: 0.15em 0;\n      width: auto;\n      border-radius: 2px;\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      display: flex;\n   }\n\n   .option {\n      cursor: default;\n      padding: 0.25em 0.5em;\n      margin: 0 0.2em 0 0;\n      color: #606060;\n      background-color: #f0f0f0;\n      border: 1px solid transparent;\n      border-radius: 0.3em;\n   }\n\n   .option.selected {\n      background-color: #6EB8FF;\n      color: #fefefe;\n   }\n\n   .option:not(.selected):hover {\n      border: 1px solid #66abec;\n      background-color: #6eb8ff20;\n      color: #4777a4;\n   }\n</style>","<script>\n   /***************************************************************\n    * Spinner                                                     *\n    * --------------------                                        *\n    * shows an active spinner                                     *\n    ***************************************************************/\n</script>\n\n<div class=\"spinner\"></div>\n\n<style>\n\n.spinner {\n   display: inline-block;\n   height: 1.5em;\n   line-height: 1.5em;\n   width: 1.5em;\n   margin: 0 0.5em;\n}\n\n.spinner:after {\n  content: \" \";\n  display: block;\n  width: 0.8em;\n  height: 0.8em;\n  margin: 0.1em;\n  border-radius: 50%;\n  border: 0.2em solid #6eb8ff;\n  border-color: #6eb8ff transparent #6eb8ff transparent;\n  animation: spinner 1.2s linear infinite;\n}\n\n@keyframes spinner {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>","<script>\n   /**************************************************************/\n   /* Svelte component for selection of plot type            */\n   /**************************************************************/\n\n   import { Container as ControlElementContainer, Select } from '.';\n\n   export let value = 'p';\n   export let plotTypeOptions = ['p', 'l', 'b', 'h', 'ml'];\n</script>\n\n\n<ControlElementContainer label='Plot type'>\n<Select id='plotType' className=\"file-selector\" bind:value={value} options={plotTypeOptions} />\n</ControlElementContainer>\n\n<style>\n   :global(.file-selector > .option) {\n      width: 36px;\n      height: 24px;\n      background-size: 32px 20px;\n      background-repeat: no-repeat;\n      background-position: 50%;\n      font-size: 0;\n      border-radius: 2px;\n      margin-right: 2px;\n   }\n\n   :global(.file-selector > .option:not(.selected):hover) {\n      border-color: #6eb8ff20;\n   }\n\n   /*\n   colors:\n   %23606060\n   %23fefefe\n   %236EB8FF\n   */\n\n   :global(.file-selector .option_bp) {\n      background-image: url('data:image/svg+xml;utf8,<svg width=\"32\" height=\"20\" viewBox=\"0 0 32 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\"8\" y=\"15\" width=\"10\" height=\"16\" transform=\"rotate(-90 8 15)\" stroke=\"%23606060\" stroke-width=\"2\"/><line x1=\"15\" y1=\"14\" x2=\"15\" y2=\"4\" stroke=\"%23606060\" stroke-width=\"2\"/><line x1=\"30\" y1=\"10\" x2=\"25\" y2=\"10\" stroke=\"%23606060\" stroke-width=\"2\"/><line x1=\"8\" y1=\"10\" x2=\"2\" y2=\"10\" stroke=\"%23606060\" stroke-width=\"2\"/></svg>');\n   }\n\n   :global(.file-selector .option_bp.selected:hover, .file-selector .option_bp.selected) {\n      background-image: url('data:image/svg+xml;utf8,<svg width=\"32\" height=\"20\" viewBox=\"0 0 32 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\"8\" y=\"15\" width=\"10\" height=\"16\" transform=\"rotate(-90 8 15)\" stroke=\"%23fefefe\" stroke-width=\"2\"/><line x1=\"15\" y1=\"14\" x2=\"15\" y2=\"4\" stroke=\"%23fefefe\" stroke-width=\"2\"/><line x1=\"30\" y1=\"10\" x2=\"25\" y2=\"10\" stroke=\"%23fefefe\" stroke-width=\"2\"/><line x1=\"8\" y1=\"10\" x2=\"2\" y2=\"10\" stroke=\"%23fefefe\" stroke-width=\"2\"/></svg>');\n   }\n\n   :global(.file-selector .option_bp:hover) {\n      background-image: url('data:image/svg+xml;utf8,<svg width=\"32\" height=\"20\" viewBox=\"0 0 32 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\"8\" y=\"15\" width=\"10\" height=\"16\" transform=\"rotate(-90 8 15)\" stroke=\"%236EB8FF\" stroke-width=\"2\"/><line x1=\"15\" y1=\"14\" x2=\"15\" y2=\"4\" stroke=\"%236EB8FF\" stroke-width=\"2\"/><line x1=\"30\" y1=\"10\" x2=\"25\" y2=\"10\" stroke=\"%236EB8FF\" stroke-width=\"2\"/><line x1=\"8\" y1=\"10\" x2=\"2\" y2=\"10\" stroke=\"%236EB8FF\" stroke-width=\"2\"/></svg>');\n   }\n\n\n   /* heat map */\n   :global(.file-selector .option_hm) {\n      background-image: url('data:image/svg+xml;utf8,<svg width=\"32\" height=\"20\" viewBox=\"0 0 32 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\"5\" y=\"16\" width=\"12\" height=\"23\" transform=\"rotate(-90 5 16)\" stroke=\"%23606060\" stroke-width=\"2\"/><line x1=\"13\" y1=\"16\" x2=\"13\" y2=\"3\" stroke=\"%23606060\" stroke-width=\"2\"/><line x1=\"21\" y1=\"16\" x2=\"21\" y2=\"3\" stroke=\"%23606060\" stroke-width=\"2\"/><line x1=\"28\" y1=\"10\" x2=\"5\" y2=\"10\" stroke=\"%23606060\" stroke-width=\"2\"/></svg>');\n   }\n\n   :global(.file-selector .option_hm.selected:hover),\n   :global(.file-selector .option_hm.selected) {\n      background-image: url('data:image/svg+xml;utf8,<svg width=\"32\" height=\"20\" viewBox=\"0 0 32 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\"5\" y=\"16\" width=\"12\" height=\"23\" transform=\"rotate(-90 5 16)\" stroke=\"%23fefefe\" stroke-width=\"2\"/><line x1=\"13\" y1=\"16\" x2=\"13\" y2=\"3\" stroke=\"%23fefefe\" stroke-width=\"2\"/><line x1=\"21\" y1=\"16\" x2=\"21\" y2=\"3\" stroke=\"%23fefefe\" stroke-width=\"2\"/><line x1=\"28\" y1=\"10\" x2=\"5\" y2=\"10\" stroke=\"%23fefefe\" stroke-width=\"2\"/></svg>');\n   }\n\n   :global(.file-selector .option_hm:hover) {\n      background-image: url('data:image/svg+xml;utf8,<svg width=\"32\" height=\"20\" viewBox=\"0 0 32 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\"5\" y=\"16\" width=\"12\" height=\"23\" transform=\"rotate(-90 5 16)\" stroke=\"%236EB8FF\" stroke-width=\"2\"/><line x1=\"13\" y1=\"16\" x2=\"13\" y2=\"3\" stroke=\"%236EB8FF\" stroke-width=\"2\"/><line x1=\"21\" y1=\"16\" x2=\"21\" y2=\"3\" stroke=\"%236EB8FF\" stroke-width=\"2\"/><line x1=\"28\" y1=\"10\" x2=\"5\" y2=\"10\" stroke=\"%236EB8FF\" stroke-width=\"2\"/></svg>');\n   }\n\n\n   /* line */\n   :global(.file-selector .option_l) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n   :global(.file-selector .option_l.selected:hover),\n   :global(.file-selector .option_l.selected) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n   :global(.file-selector .option_l:hover) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n\n   /* scatter */\n   :global(.file-selector .option_p) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n   :global(.file-selector .option_p.selected:hover),\n   :global(.file-selector .option_p.selected) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n   :global(.file-selector .option_p:hover) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n\n   /* bar */\n   :global(.file-selector .option_h) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n   :global(.file-selector .option_h.selected:hover),\n   :global(.file-selector .option_h.selected) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n   :global(.file-selector .option_h:hover) {\n      background-image: url('data:image/svg+xml;utf8,');\n   }\n\n</style>","<script>\n   /**************************************************************/\n   /* Svelte component for selection of a component              */\n   /**************************************************************/\n\n   import { Container as ControlElementContainer, Range } from '.';\n\n   export let model;\n   export let value = 1;\n   export let label = '# PCs';\n</script>\n\n{#if model}\n<ControlElementContainer {label}>\n<Range id=\"ncomp\" bind:value min={1} max={model.ncomp} step={1} decNum={0}/>\n</ControlElementContainer>\n{/if}\n\n","<script>\n/***************************************************************\n * File                                                        *\n * --------------------                                        *\n * control element for uploading CSV files                     *\n ***************************************************************/\n\n   export let id;             // text ID for file input\n   export let file = null;    // container to get return the uploaded file\n\n   let fileInput;\n\n   function changeStatus(e) {\n      if (fileInput.files.length > 0) {\n         file = fileInput.files[0];\n      }\n   }\n</script>\n\n<label class:selected=\"{file !== null}\">\n   { file ? file.name : \"Select CSV file with dataset\" }\n   <input on:change={changeStatus} bind:this={fileInput} name={id} type=\"file\" accept=\".csv\">\n</label>\n\n<style>\n   input {\n      display: none;\n   }\n\n   label {\n      display: inline-block;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n      flex: 1 1;\n      min-width: 0;\n   }\n\n   label::before {\n      display: inline-block;\n      content: '\\21ea';\n      font-size: 1.2em;\n      margin: 0 0.5em 0 0em;\n   }\n\n   label.selected {\n      color: #909090;\n   }\n\n   label.selected::before {\n      content: '\\28FF\\28FF';\n      letter-spacing: -.25em;\n      color: #6EB8FF;\n      font-weight: bold;\n   }\n</style>","<script>\n   /*************************************************************/\n   /* Svelte component for loading dataset from CSV file       */\n   /*************************************************************/\n\n   // Matrix and related methods\n   import { Matrix } from 'mdatools/arrays';\n\n   // control elements\n   import { FileSelector, Select, Container, ButtonCancel, Button } from './controls';\n\n   // calibration set\n   export let dataset = null;\n\n   let dataFile = null;             // CSV file\n   let sep = ',';                   // seperator between values\n   let firstColumn = 'values';      // what is in the first column of CSV file\n   let firstRow = 'header';         // what is in the first row of CSV file\n\n   // app status for handling and showing errors\n   let status = 'neutral';\n   let errMsg = '';\n\n   // possible delimeters\n   const sepOptions = [',', ';'];\n   const firstRowOptions = ['header', 'values'];\n   const firstColumnOptions = ['labels', 'values'];\n\n   // gets CSV content as one large string, parse it into matrix\n   function setData(strData) {\n      try{\n         dataset = Matrix.parseCSV(\n            strData,\n            sep,\n            firstRow === \"header\",\n            firstColumn === \"labels\"\n         );\n\n         if (dataset.values.nrows < 3 || dataset.values.ncols < 3) {\n            throw new Error('Dataset must have at least 3 rows and 3 columns');\n         }\n         errMsg = ''\n         status = 'success';\n      } catch (e) {\n         dataset = null;\n         status = 'error';\n         errMsg = e;\n      }\n   }\n\n   // promise for reading the CSV file\n   function readFile (e) {\n      const reader = new FileReader();\n      reader.onload = () => setData(reader.result);\n      reader.readAsBinaryString(dataFile);\n   }\n\n   // reset whole component to initial state\n   function reset () {\n      dataset = null;\n      dataFile = null;\n   }\n\n   // reactive expression for tracking changes of 'dataFile'\n   $: if (dataFile === null) {\n      // if data file is empty reset status and error messages\n      reset();\n   } else {\n      // if not just remove error messages if any\n      status = 'neutral';\n      errMsg = '';\n   }\n\n   // reactive expression for tracking changes of 'sep'\n   $: if (sep) {\n      // if separator was changed remove error message\n      status = 'neutral';\n      errMsg = '';\n   }\n\n</script>\n\n{#if dataset === null}\n\n   <!-- show if data is not loaded -->\n   <!-- reset component if dataFile is changed inside -->\n   {#key dataFile === undefined}\n   <Container>\n      <FileSelector id=\"dataFile\" bind:file={dataFile} />\n   </Container>\n   {/key}\n\n   <!-- show if file is selected but data is not loaded -->\n   {#if dataFile}\n   <Container label=\"Delimiter:\">\n      <Select id=\"sep\" bind:value={sep} options={sepOptions} />\n   </Container>\n   <Container label=\"First row:\">\n      <Select id=\"firstRow\" bind:value={firstRow} options={firstRowOptions} />\n   </Container>\n   <Container label=\"First column:\">\n      <Select id=\"firstColumn\" bind:value={firstColumn} options={firstColumnOptions} />\n   </Container>\n   <Container label=\"&nbsp;\">\n      <Button on:click={readFile}>Load</Button>\n   </Container>\n   {/if}\n\n{:else}\n\n   <!-- dataset is loaded - show info and cancel button -->\n   <Container>\n   <p>Dataset is loaded. X: {dataset.values.nrows}&times;{dataset.values.ncols - 1}, y: {dataset.values.nrows}&times;1</p>\n      <ButtonCancel on:click={reset} />\n   </Container>\n\n{/if}\n\n<!-- error message -->\n{#if status === 'error' || errMsg}\n<Container status=\"error\">\n   <p>{errMsg}</p>\n</Container>\n{/if}\n\n","/********************************************************************/\n/*    Methods for Preprocessing (work with vectors and matrices)    */\n/********************************************************************/\n\nimport { isvector, Vector, Matrix, vector } from '../arrays/index.js';\nimport { mean, sd } from '../stat/index.js';\n\n/**\n * Uncenter and unscale values in every column of a matrix.\n *\n * @param {Matrix} X - matrix with values.\n * @param {Vector} center - vector with numbers to use for uncentering.\n * @param {Vector} scale - vector with numbers to use for unscaling.\n *\n * @returns {Matrix} a matrix with uncentered and unscaled column values.\n *\n */\nexport function unscale(X, centerValues, scaleValues) {\n\n   const Xp = Matrix.zeros(X.nrows, X.ncols);\n   for (let c = 1; c <= X.ncols; c++) {\n      const xc = X.getcolref(c);\n      const xpc = Xp.getcolref(c);\n\n      const cv = centerValues.v[c - 1];\n      const sv = scaleValues.v[c - 1];\n\n      for (let r = 0; r < X.nrows; r++) {\n         xpc[r] = xc[r] * sv + cv;\n      }\n   }\n\n   return Xp;\n}\n\n\n/**\n * Center and scale values in every column of a matrix.\n *\n * @param {Matrix} X - matrix with values.\n * @param {boolean|Vector} [center=true] - logical value or a vector with numbers to use for centering.\n * @param {boolean|Vector} [scale=true] - logical value or a vector with numbers to use for scaling.\n * @param {boolean} [full=true] - logical, influences the return values.\n *\n * @returns {Array|Matrix} either a matrix with centered and scaled column values (if 'full = false')\n * or an array with three elements: the matrix, vector with values for centring and vector with values\n * for scaling.\n *\n */\nexport function scale(X, center, scale, full) {\n\n   if (center === undefined) {\n      center = true;\n   }\n\n   if (scale === undefined) {\n      scale = false;\n   }\n\n   if (full === undefined) {\n      full = false;\n   }\n\n   function getStat(X, param, fun, alt) {\n\n      if (typeof(param) === \"boolean\") {\n         return param ? X.apply(fun, 2) : vector([alt]).rep(X.ncols);\n      }\n\n      if (!isvector(param)) {\n         throw Error(\"scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.\");\n      }\n\n      if (param.length !== X.ncols ) {\n         throw Error(\"scale: number of values for centring and scaling must be the same as number of columns in the matrix.\");\n      }\n\n      return param;\n   }\n\n   // prepare values for centering and scaling\n   const centerValues = getStat(X, center, mean, 0);\n   const scaleValues = getStat(X, scale, sd, 1);\n\n   const Xp = Matrix.zeros(X.nrows, X.ncols);\n   for (let c = 1; c <= X.ncols; c++) {\n      const xc = X.getcolref(c);\n      const xpc = Xp.getcolref(c);\n\n      const cv = centerValues.v[c - 1];\n      const sv = 1 / scaleValues.v[c - 1];\n\n      for (let r = 0; r < X.nrows; r++) {\n         xpc[r] = (xc[r] - cv) * sv;\n      }\n   }\n\n   return full ? [Xp, centerValues, scaleValues] : Xp;\n}\n\n","import { rsvd } from '../decomp/index.js';\nimport { pf, pt, qt, qchisq } from '../distributions/index.js';\nimport { norm2, variance, median, iqr, mean, sd, ssq } from '../stat/index.js';\nimport { scale as prep_scale, unscale as prep_unscale } from '../prep/index.js';\nimport { _dot, isfactor, factor, cbind, tcrossprod, crossprod, reshape, ismatrix, Index,\n   Matrix, vector, isvector, Vector } from '../arrays/index.js';\n\n/**\n * Check if an object has a proper class.\n *\n * @param {JSON} obj - JSON wiht object (e.g. model or results).\n * @param {string} className - expected name of the class.\n *\n * @return {boolean} true or false.\n *\n */\nexport function isa(obj, className) {\n   return obj && obj.class && Array.isArray(obj.class) && obj.class.includes(className);\n}\n\n\n\nexport function getclassres(cPred, className, cRef) {\n\n   // check inputs\n   if (!cPred || !Array.isArray(cPred) || cPred.length < 1 || !cPred.every(isfactor)) {\n      throw new Error('getclassres: parameter \"cPred\" must be array of factors.');\n   }\n\n   if (!className || typeof(className) !== 'string' || className == '' || className == 'none') {\n      throw new Error('getclassres: wrong value for \"className\" parameter (must me a string).');\n   }\n\n   if (cRef && !isfactor(cRef)) {\n      throw new Error('getclassres: parameter \"cRef\" must be a factor (or undefined).');\n   }\n\n   // if reference values are not provided return results without statistics\n   if (!cRef) {\n      return {\n         class: ['classres'],\n         className: className,\n         cPred: cPred,\n         cRef: cRef\n      }\n   }\n\n   // find index of class in factor with reference class names\n   const refInd = cRef.labels.findIndex(v => v === className);\n   const ncomp = cPred.length;\n\n   // prepare variables for statistics\n   const TP = Vector.zeros(ncomp);\n   const FP = Vector.zeros(ncomp);\n   const TN = Vector.zeros(ncomp);\n   const FN = Vector.zeros(ncomp);\n   const sensitivity = Vector.zeros(ncomp);\n   const specificity = Vector.zeros(ncomp);\n   const accuracy = Vector.zeros(ncomp);\n\n   // loop over components\n   for (let a = 1; a <= ncomp; a++) {\n\n      const predInd = cPred[a - 1].labels.findIndex(v => v === className);\n      let TPa = 0, TNa = 0, FPa = 0, FNa = 0;\n      for (let i = 0; i < cRef.length; i++) {\n         if (cPred[a - 1].v[i] === predInd && cRef.v[i] === refInd) TPa += 1;\n         if (cPred[a - 1].v[i] !== predInd && cRef.v[i] !== refInd) TNa += 1;\n         if (cPred[a - 1].v[i] === predInd && cRef.v[i] !== refInd) FPa += 1;\n         if (cPred[a - 1].v[i] !== predInd && cRef.v[i] === refInd) FNa += 1;\n      }\n\n      sensitivity.v[a - 1] =  TPa / (TPa + FNa);\n      specificity.v[a - 1] =  TNa / (TNa + FPa);\n      accuracy.v[a - 1] =  (TPa + TNa) / (TNa + TPa + FNa + FPa);\n      TP.v[a - 1] = TPa;\n      TN.v[a - 1] = TNa;\n      FP.v[a - 1] = FPa;\n      FN.v[a - 1] = FNa;\n\n   }\n\n   return {\n      class: ['classres'],\n      className: className,\n      cPred: cPred,\n      cRef: cRef,\n      TP: TP,\n      FN: FN,\n      TN: TN,\n      FP: FP,\n      sensitivity: sensitivity,\n      specificity: specificity,\n      accuracy: accuracy\n   }\n}\n\n\nexport function getsimcaparams(className, alpha, limType) {\n\n   const validLimTypes = ['classic', 'robust'];\n\n   if (!alpha) alpha = 0.05;\n   if (!limType) limType = 'classic';\n\n   if (!className || typeof(className) !== 'string' || className == '' || className == 'none') {\n      throw new Error('simcamodel: wrong value for \"className\" parameter (must me a string).');\n   }\n\n   if (isNaN(alpha) || alpha < 0 || alpha > 1) {\n      throw new Error('simcamodel: wrong value for \"alpha\" parameter.');\n   }\n\n   if (typeof(limType) !== 'string' || !validLimTypes.includes(limType)) {\n      throw new Error('simcamodel: wrong value for \"limType\" parameter (must be either \"classic\" or \"robust\").');\n   }\n\n   return {\n      class: ['simcaparams'],\n      className: className,\n      alpha: alpha,\n      limType: limType\n   }\n}\n\nexport function simcapredict(m, params, X, cRef) {\n\n   // check inputs\n   if (!isa(m, 'pcamodel')) {\n      throw new Error('simcapredict: parameter \"m\" must be an object with PCA model.');\n   }\n\n   if (!isa(params, 'simcaparams')) {\n      throw new Error('simcapredict: parameter \"params\" must be an object from \"simcaparams\" method.');\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('simcapredict: parameter \"X\" must be instance of Matrix class.');\n   }\n\n   if (cRef && !factor(cRef)) {\n      throw new Error('simcapredict: parameter \"cRef\" must be instance of Factor class.');\n   }\n\n   if (cRef && cRef.length !== X.nrows) {\n      throw new Error('simcapredict: parameter \"cRef\" must have the same number of values as rows in \"X\".');\n   }\n\n\n   // project data to PCA model\n   const pcares = pcapredict(m, X);\n\n   // prepare array for predictions\n   const cPred = new Array(m.ncomp);\n\n   // get parameters for the distances\n   const Nq = m.qParams[params.limType][1].v;\n   const q0 = m.qParams[params.limType][0].v;\n   const h0 = m.hParams[params.limType][0].v;\n   const Nh = m.hParams[params.limType][1].v;\n\n   // loop over components\n   for (let a = 1; a <= m.ncomp; a++) {\n\n      const h0a = h0[a - 1];\n      const q0a = q0[a - 1];\n      const Nha = Nh[a - 1];\n      const Nqa = Nq[a - 1];\n\n      const ha = pcares.H.getcolref(a);\n      const qa = pcares.Q.getcolref(a);\n      const cpa = new Array(X.nrows);\n\n      // compute critical value for FD\n      const fCrit = qchisq(1 - params.alpha, Nqa + Nha);\n\n      // loop over rows to make predictions\n      for (let i = 0; i < X.nrows; i++) {\n         const fa  = ha[i] / h0a * Nha + qa[i] / q0a * Nqa;\n         cpa[i] = fa <= fCrit ? params.className : \"none\";\n      }\n\n      cPred[a - 1] = factor(cpa);\n   }\n\n   return {\n      class: ['simcares'],\n      pcares: pcares,\n      classres: getclassres(cPred, params.className, cRef)\n   }\n}\n\n/**\n * Fit Partial Least Squares Regression model.\n *\n * @param {Matrix} X - matrix with predictors.\n * @param {Matrix} Y - matirx with responses (must have one column).\n * @param {number} ncomp - number of components.\n * @param {boolean} [center=true] - logical, mean center X and Y or not.\n * @param {boolean} [scale=false] - logical, standardize X and Y or not.\n *\n * @returns {JSON} object with model parameters.\n *\n */\nexport function plsfit(X, Y, ncomp, center, scale) {\n\n   if (!ismatrix(X) || X.ncols < 2 || X.nrows < 2) {\n      throw Error('plsfit: parameter \"X\" must be a matrix with at least two rows and two columns.');\n   }\n\n   if (!ismatrix(Y) || Y.ncols !== 1) {\n      throw Error('plsfit: parameter \"Y\" must be a matrix with one column.');\n   }\n\n   if (Y.nrows !== X.nrows) {\n      throw Error('plsfit: number of rows in \"X\" and \"Y\" do not match.');\n   }\n\n   if (center === undefined) {\n      center = true;\n   }\n\n   if (scale === undefined) {\n      scale = false;\n   }\n\n   if (!ncomp) {\n      ncomp = Math.min(ncols, nrows - 1);\n   }\n\n   // center and scale the training set\n   const [Xp, mX, sX] = prep_scale(X, center, scale, true);\n   const [Yp, mY, sY] = prep_scale(Y, center, scale, true);\n\n   // compute loadings and eigenvalues for X using randomized SVD\n   const m = simpls(Xp, Yp, ncomp);\n\n   // compute distances and variance\n   const pcares = pcagetmainres(Xp, m.T, m.P, m.xeigenvals);\n\n   // compute parameters for distances\n   const hParams = getDistParams(pcares.H);\n   const qParams = getDistParams(pcares.Q);\n\n   // compute Y-loadings\n\n   // return the model object\n   return {\n      class: ['plsmodel', 'regmodel', 'pcamodel'],\n      ncomp: ncomp,\n      center: center,\n      scale: scale,\n\n      // X part\n      mX: mX,\n      sX: sX,\n      P: m.P,\n      R: m.R,\n      C: m.C,\n      xeigenvals: m.xeigenvals,\n\n      // Y part\n      mY: mY,\n      sY: sY,\n      C: m.C,\n      yeigenvals: m.yeigenvals,\n\n      // distances\n      qParams: qParams,\n      hParams: hParams,\n   };\n}\n\n\n/**\n * Make predictions for PCR model and new dataset.\n *\n * @param {JSON} m - PCR model created by 'pcrfit()'.\n * @param {Matrix} X - matrix with predictors.\n * @param {Matrix} Y - matirx with responses (must have one column, use empty array [], if no response available).\n * @param {string} name - text label for the results with objects.\n *\n * @returns {JSON} object with main results.\n *\n */\nexport function plspredict(m, X, Y, name) {\n\n   const Xp = prep_scale(X, m.mX, m.sX);\n\n   // compute scores\n   const T = Xp.dot(m.R);\n\n   // compute distances and variance\n   const pcares = pcagetmainres(Xp, T, m.P, m.xeigenvals);\n\n   // compute Y-scores if reference values provided\n   let U = null;\n   if (Y !== undefined && Y !== null) {\n\n      if (!ismatrix(Y)) {\n         throw Error('plcapredict: parameter \"Y\" must be a matrix with one column or null/undefined.');\n      }\n\n      const Yp = prep_scale(Y, m.mY, m.sY);\n      U = Yp.dot(m.C);\n\n      // oprthogonalize y-scores\n      for (let a = 2; a <= m.ncomp; a++) {\n         const ua = U.subset([], a);\n         const Ta = T.subset([], Index.seq(1, a - 1));\n         const uao = ua.subtract(Ta.dot(crossprod(Ta, ua)));\n         U.v.set(uao.v, (a - 1) * U.nrows);\n      }\n   }\n\n   const regres = reggetmainres(T, m.C, m.mY, m.sY, Y);\n\n   return {\n      class: ['pcares', 'regres', 'plsres'],\n      name: name,\n      T: T,\n      U: U,\n      ...pcares,\n      ...regres\n   };\n}\n\n\n/**\n * Fit Principal Component Regression model.\n *\n * @param {Matrix} X - matrix with predictors.\n * @param {Matrix} Y - matirx with responses (must have one column).\n * @param {number} ncomp - number of components.\n * @param {boolean} [center=true] - logical, mean center X and Y or not.\n * @param {boolean} [scale=false] - logical, standardize X and Y or not.\n *\n * @returns {JSON} object with model parameters.\n */\nexport function pcrfit(X, Y, ncomp, center, scale) {\n\n   if (!ismatrix(X) || X.ncols < 2 || X.nrows < 2) {\n      throw Error('pcrfit: parameter X must be a matrix with at least two rows and two columns.');\n   }\n\n   if (!ismatrix(Y) || Y.ncols !== 1) {\n      throw Error('pcrfit: parameter Y must be a matrix with one column.');\n   }\n\n   if (Y.nrows !== X.nrows) {\n      throw Error('pcrfit: number of rows in X and Y do not match.');\n   }\n\n\n   if (center === undefined) {\n      center = true;\n   }\n\n   if (scale === undefined) {\n      scale = false;\n   }\n\n   if (!ncomp) {\n      ncomp = Math.min(ncols, nrows - 1);\n   }\n\n   // center and scale the training set\n   const [Xp, mX, sX] = prep_scale(X, center, scale, true);\n   const [Yp, mY, sY] = prep_scale(Y, center, scale, true);\n\n   // compute loadings and eigenvalues for X using randomized SVD\n   const m = rsvd(Xp, ncomp);\n   const eigenvals = m.s.apply(x => x * x / (X.nrows - 1));\n\n   // compute main PCA results for calibration set\n   const calres = pcagetmainres(Xp, m.U.dot(Matrix.diagm(m.s)), m.V, eigenvals);\n\n   // compute parameters for distances\n   const hParams = getDistParams(calres.H);\n   const qParams = getDistParams(calres.Q);\n\n   // compute Y-loadings\n   const C = Matrix.zeros(1, ncomp);\n   for (let a = 1; a <= ncomp; a++) {\n      const sigmaa = m.s.v[a - 1];\n      const ta = calres.T.getcolref(a);\n      C.v[a - 1] = _dot(Yp.v, ta, 1, X.nrows, X.nrows, 1) / (sigmaa * sigmaa);\n   }\n\n   // return the model object\n   return {\n      class: ['pcrmodel', 'regmodel', 'pcamodel'],\n\n      // PCA part\n      P: m.V,\n      eigenvals: eigenvals,\n      center: center,\n      scale: scale,\n      mX: mX,\n      sX: sX,\n      qParams: qParams,\n      hParams: hParams,\n\n      // PCR part\n      ncomp: ncomp,\n      C: C,\n      mY: mY,\n      sY: sY,\n   }\n}\n\n\n/**\n * Make predictions for PCR model and new dataset.\n *\n * @param {JSON} m - PCR model created by 'pcrfit()'.\n * @param {Matrix} X - matrix with predictors.\n * @param {Matrix} Y - matirx with responses (must have one column, use empty array [], if no response available).\n * @param {string} name - text label for the results with objects.\n *\n * @returns {JSON} object with main results.\n */\nexport function pcrpredict(m, X, Y, name) {\n\n\n   const Xp = prep_scale(X, m.mX, m.sX);\n\n   // compute PCA results\n   const T = Xp.dot(m.P);\n   const pcares = pcagetmainres(Xp, T, m.P, m.eigenvals);\n\n   // compute regression results\n   const regres = reggetmainres(T, m.C, m.mY, m.sY, Y);\n\n   return {\n      class: ['pcares', 'regres', 'pcrres'],\n      name: name,\n      ...pcares,\n      ...regres\n   };\n}\n\n\n/**\n * Fit a Principal Component Analysis model.\n *\n * @param {Matrix} X - matrix or dataset with data values.\n * @param {number} ncomp - number of components to compute.\n * @param {boolean|Vector} [center=true] - logical (mean center or not) or vector with values for centering.\n * @param {boolean|Vector} [scale=false]  - logical (standardize or not) or vector with values for scaling.\n *\n * @returns {Object} JSON with model parameters.\n *\n */\nexport function pcafit(X, ncomp, center, scale) {\n\n   if (center === undefined) {\n      center = true;\n   }\n\n   if (scale === undefined) {\n      scale = false;\n   }\n\n   if (!ismatrix(X) || X.ncols < 2 || X.nrows < 2) {\n      throw Error('plsfit: parameter \"X\" must be a matrix with at least two rows and two columns.');\n   }\n\n   if (!ncomp) {\n      ncomp = Math.min(X.ncols, X.nrows - 1);\n   }\n\n   if (ncomp < 0 || ncomp > X.ncols || ncomp > X.nrows - 1) {\n      throw new Error('pcafit: wrong value for \"ncomp\" parameter.');\n   }\n\n   // center and scale the training set\n   const [Xp, mX, sX] = prep_scale(X, center, scale, true);\n\n   // compute loadings and eigenvalues\n   const m = rsvd(Xp, ncomp);\n   const eigenvals = m.s.apply(v => v * v / (X.nrows - 1));\n\n   // compute main PCA results for calibration set\n   const calres = pcagetmainres(Xp, m.U.dot(Matrix.diagm(m.s)), m.V, eigenvals);\n\n   // compute mean values for distances\n   const hParams = getDistParams(calres.H);\n   const qParams = getDistParams(calres.Q);\n\n   // return the model object\n   return {\n      class: ['pcamodel'],\n      P: m.V,\n      eigenvals: eigenvals,\n      center: center,\n      scale: scale,\n      mX: mX,\n      sX: sX,\n      qParams: qParams,\n      hParams: hParams,\n      ncomp: ncomp,\n      nCalObj: Xp.nrows,\n      results: {'cal': calres}\n   }\n}\n\n\n/**\n * Compute parameters of distance distributions from distance matrix U.\n *\n * @param {Matrix} U - matrix with distances.\n *\n * @returns {Array} array with two vectors, u0 (scalars) and Nu (number of degrees of freedom).\n *\n */\nexport function getDistParams(U) {\n\n   const ncomp = U.ncols;\n   const u0m = Vector.zeros(ncomp)\n   const u0r = Vector.zeros(ncomp)\n   const Num = Vector.zeros(ncomp)\n   const Nur = Vector.zeros(ncomp)\n\n   const Nu = Vector.zeros(ncomp);\n   for (let i = 0; i < ncomp; i++) {\n      const u = U.getcolref(i + 1);\n\n      // moments\n      u0m.v[i] = mean(u);\n      const fm = u0m.v[i] / sd(u);\n      const Nm = Math.round(2 * fm * fm);\n      Num.v[i] = Nm < 1 ? 1 : Nm > 250 ? 250 : Nm;\n\n      // robust\n      const M = median(u);\n      const S = iqr(u);\n      const RM = S / M;\n      const Nr =  RM > 2.685592117 ? 1 :\n                  (RM < 0.194565995 ? 100 :\n                  Math.round(Math.exp(Math.pow(1.380948 * Math.log(2.68631 / RM), 1.185785))));\n      u0r.v[i] = 0.5 * Nr * (M / qchisq(0.5, Nr) + S / (qchisq(0.75, Nr) - qchisq(0.25, Nr)))\n      Nur.v[i] = Nr;\n   }\n\n   return {'classic': [u0m, Num], 'robust': [u0r, Nur]};\n}\n\n\n/**\n * Compute main PCA results for already preprocessed dataset.\n *\n * @param {Matrix} Xp - matrix with preprocessed (e.g. centered) data values.\n * @param {Matrix} T - matrix with scores.\n * @param {Matrix} P - matrix with loadings.\n * @param {Vector} eigenvals - vector with eigenvalues.\n *\n * @returns {Object} JSON with main outcomes (scores, distances, variances).\n *\n */\nexport function pcagetmainres(Xp, T, P, eigenvals) {\n\n   const ncomp = P.ncols;\n   const nrows = Xp.nrows;\n   const nvars = Xp.ncols;\n\n   // prepare objects for results\n   const H = Matrix.zeros(nrows, ncomp);\n   const Q = Matrix.zeros(nrows, ncomp);\n   const expvar = Vector.zeros(ncomp);\n   const cumexpvar = Vector.zeros(ncomp);\n\n   // compute total sum of squares\n   const ha = new Vector.valuesConstructor(nrows);\n   const E = Xp.copy();\n   const totssq = ssq(Xp.v);\n\n   // loop for computing variances and distances\n   for (let a = 1; a <= ncomp; a++) {\n      const ta = T.getcolref(a);\n      const pa = P.getcolref(a);\n      const ts = 1 / eigenvals.v[a - 1];\n\n      const qa = new Vector.valuesConstructor(nrows);\n      let qs = 0;\n      for (let c = 0; c < nvars; c++) {\n         const e = E.getcolref(c + 1);\n         for (let r = 0; r < nrows; r++) {\n            e[r] = e[r] - ta[r] * pa[c]\n            const essq = e[r] * e[r];\n            qa[r] += essq;\n            qs += essq;\n         }\n      }\n\n      for (let r = 0; r < nrows; r++) {\n         ha[r] += ta[r] * ta[r] * ts;\n      }\n\n      H.v.set(ha, (a - 1) * nrows);\n      Q.v.set(qa, (a - 1) * nrows);\n\n      cumexpvar.v[a - 1] = 100 * (1 - qs / totssq);\n      expvar.v[a - 1] = a === 1 ? cumexpvar.v[a - 1] : cumexpvar.v[a - 1] - cumexpvar.v[a - 2];\n   }\n\n   return {\n      class: ['pcares', 'ldecomp'],\n      T: T,\n      H: H,\n      Q: Q,\n      expvar: expvar,\n      cumexpvar: cumexpvar\n   }\n}\n\n\nexport function getfulldistance(h, q, h0, q0, Nh, Nq) {\n   const fh = Nh / h0;\n   const fq = Nq / q0;\n\n   const f = Vector.zeros(h.length);\n   for (let r = 0; r <= f.length; r++) {\n         f.v[r] = h.v[r] * fh + q.v[r] * fq;\n   }\n\n   return f;\n}\n\n\n/**\n * Project new data to a PCA model and create object with main outcomes.\n *\n * @param {Object} m - JSON with PCA model created by 'pcafit()'.\n * @param {Matrix} X - matrix with data values.\n * @param {string} name - name/label for the result object (e.g. \"cal\", \"val\", etc.).\n *\n * @returns {Object} - JSON wiht main outcomes (scores, distances, variance, etc.).\n *\n */\nexport function pcapredict(m, X, name) {\n\n   if (!ismatrix(X) || X.nrows < 1) {\n      throw Error('pcapredict: parameter \"X\" must be a matrix.');\n   }\n\n   if (X.ncols != m.P.nrows) {\n      throw Error('pcapredict: parameter \"X\" has wrong number of columns.');\n   }\n\n   const Xp = prep_scale(X, m.mX, m.sX);\n   const res = pcagetmainres(Xp, Xp.dot(m.P), m.P, m.eigenvals);\n   res.name = name;\n\n   return res;\n}\n\n\n/**\n * For given vector 'x' and number 'd' returns matrix with power of x values from 1 to d as columns.\n *\n * @param {Vector} x - vector with values.\n * @param {number} d - polynomial degree.\n *\n * @returns a matrix with 'd' columns.\n *\n */\nexport function polymat(x, d) {\n\n   if (!isvector(x)) {\n      throw Error('polymat: argument \"x\" must be a vector.');\n   }\n\n   const X = Matrix.zeros(x.length, d);\n   for (let i = 1; i <= d; i++) {\n      X.v.set(x.apply(v => v ** i).v, x.length * (i - 1));\n   }\n\n   return X;\n}\n\n\n/**\n * Fitting a univariate polynomial model.\n *\n * @param {Vector} x - vector with predictors.\n * @param {Vector} y - vector with responses.\n * @param {number} d - polynomial degree.\n *\n * @return JSON with model parameters and performance statistics.\n *\n */\nexport function polyfit(x, y, d) {\n\n   if (d < 1 || d >= x.length) {\n      throw Error('polyfit: polynomial degree \"d\" must a positive value smaller than number of measurements.');\n   }\n\n   let model = lmfit(polymat(x, d), y);\n   model.pdegree = d;\n   model.class = \"pm\";\n\n   return model;\n}\n\n\n/**\n * Predicts response values based on the fitted model and predictors.\n *\n * @param {JSON} m - regression model (object returned by 'polyfit()').\n * @param {vector} x - vector with predictors.\n *\n * @return vector with predicted response values.\n *\n */\nexport function polypredict(m, x) {\n\n   if (!isvector(x)) {\n      throw Error('polypredict: Argument \"x\" must be a vector.');\n   }\n\n   if (m.class !== \"pm\") {\n      throw Error('polypredict: argument \"m\" must be object with \"pm\" model.');\n   }\n\n   return lmpredict(m, polymat(x, m.pdegree));\n}\n\n\n/**\n * Fit a linear model (SLR or MLR).\n *\n * @param {Vector|Matrix} X - vector or matrix with predictors.\n * @param {Vector} y - vector with responses.\n *\n * @return JSON with model parameters and performance statistics.\n *\n */\nexport function lmfit(X, y) {\n\n   if (isvector(X)) {\n      X = reshape(X, X.length, 1);\n   }\n\n   if (!ismatrix(X)) {\n      throw Error('lmfit: argument \"X\" must be a matrix or a vector.');\n   }\n\n   if (!isvector(y)) {\n      throw Error('lmfit: argument \"y\" must be a vector.');\n   }\n\n   const n = X.nrows;\n   if (y.length !== n) {\n      throw Error('lmfit: arguments \"X\" and \"y\" must have the same number of objects.');\n   }\n\n   if (n <= X.ncols) {\n      throw Error('lmfit: number of objects must be larger than number of predictors.');\n   }\n\n   // add column of ones for estimation of intercept\n   const Xr = cbind(Vector.ones(n), X);\n\n   // compute inverse of variance-covariance matrix\n   const R = crossprod(Xr).inv();\n\n   // estimate regression coefficients\n   const estimate = reshape(R.dot(Xr.t()).dot(y), X.ncols + 1);\n\n   // compute predicted y-values and performance statistics\n   const fitted = reshape(Xr.dot(estimate), n);\n   const stat = regstat(y, fitted, X.ncols);\n\n   // compute standard error and t-values for regression coefficients, H0: beta = 0\n   const coeffse = R.mult(stat.se * stat.se).diag().apply(Math.sqrt);\n   const tstat = estimate.divide(coeffse);\n\n   // compute critical t-value for confidence intervals\n   const tCrit = qt(0.975, stat.DoF);\n\n   // return JSON with all results\n   const errMargin = coeffse.mult(tCrit);\n   return {\n      class: \"lm\",\n      data: {X: X, y: y},\n      coeffs: {\n         estimate: estimate,\n         se: coeffse,\n         tstat: tstat,\n         p: tstat.apply(t => t > 0 ? 2 * pt(-t, stat.DoF) : 2 * pt(t, stat.DoF)),\n         lower: estimate.subtract(errMargin),\n         upper: estimate.add(errMargin)\n      },\n      fitted: fitted,\n      stat: stat\n   }\n}\n\n\n/**\n * Predicts response values based on the fitted model and predictors\n * @param {JSON} m - regression model (object returned by 'limfit()')\n * @param {number[]} X - vector or matrix with predictors\n * @return vector with predicted response values\n */\nexport function lmpredict(m, X) {\n\n   if (isvector(X)) {\n      X = reshape(X, X.length, 1);\n   }\n\n   if (!ismatrix(X)) {\n      throw Error('lmpredict: argument \"X\" must be a matrix or a vector.');\n   }\n\n   if (!(m.class === 'lm' || m.class === 'pm') || !m.coeffs.estimate || m.coeffs.estimate.length < 1) {\n      throw Error('lmpredict: argument \"m\" must be object with \"lm\" model.');\n   }\n\n   if (X.ncols !== (m.coeffs.estimate.length - 1)) {\n      throw Error('lmpredict: number of columns in \"X\" does not match number of coefficients in model.');\n   }\n\n\n   // add column of ones for estimation of intercept\n   const n = X.nrows;\n   const Xr = cbind(Vector.ones(n), X);\n   return reshape(Xr.dot(m.coeffs.estimate), n);\n}\n\n\n/**\n * Computes performance statistics for predicted and reference response values\n * @param {number[]} y  vector with reference response values\n * @param {number[]} yp  vector with predicted response values\n * @return JSON with statistics (adjusted R2, R2, s(e), F-value, p-value)\n */\nexport function regstat(y, yp, p) {\n\n   const n = y.length;\n   if (!p) p = 1;\n   const e = y.subtract(yp);\n   const SSe = ssq(e);\n   const SSy = variance(y) * (n - 1);\n   const R2 = (1 - SSe / SSy);\n   const DoF = n - p - 1\n   const F = ((SSy - SSe)/p) / (SSe/DoF);\n\n   return {\n      R2: R2,\n      R2adj: 1 - (1 - R2) * (n - 1) / DoF,\n      Fstat: F,\n      p: 1 - pf(F, p, DoF),\n      DoF: DoF,\n      se: Math.sqrt(SSe/DoF)\n   };\n}\n\n\n/**\n * Split matrix with data values into matrix of predictors (X) and and matrix with responses (Y).\n *\n * @param {Matrix} data - matrix with data values.\n *\n * @returns {Array} array with X and Y.\n */\nexport function splitregdata(data) {\n\n   return [\n      new Matrix(data.v.subarray(data.nrows), data.nrows, data.ncols - 1),\n      new Matrix(data.getcolref(1), data.nrows, 1)\n   ];\n}\n\n\n/**\n * Make predictions based on x-scores and y-loadings (for PCR or PLS1) and compute\n * performance statistics if reference y-values are provided.\n *\n * @param {Matrix} T - matrix with X-scores.\n * @param {Matrix} C - matrix with y-loadings.\n * @param {number} mY - number to use for centering y-values (from the model).\n * @param {number} sY - number to use for scaling y-values (from the model).\n * @param {Vector} [y] - vector with reference response values.\n */\nexport function reggetmainres(T, C, mY, sY, Yref) {\n\n   const nrows = T.nrows;\n   const ncomp = T.ncols;\n\n   // prepare variables for predictions and statistics\n   const Ypred = Matrix.zeros(nrows, ncomp);\n\n   // if no reference values, compute predictions and return\n   if (Yref === undefined || Yref === null || Yref === []) {\n      for (let a = 1; a <= ncomp; a++) {\n         // compute predictions\n         const cind = Index.seq(1, a);\n         const Ypreda = prep_unscale(tcrossprod(T.subset([], cind), C.subset([], cind)), mY, sY);\n         Ypred.v.set(Ypreda.v, (a - 1) * nrows);\n      }\n\n      return {'Ypred': Ypred};\n   }\n\n   // otherwise compute statistics as well\n   const rmse = Vector.zeros(ncomp);\n   const r2 = Vector.zeros(ncomp);\n   const bias = Vector.zeros(ncomp);\n\n   // total y-variance\n   const ssy = variance(Yref.v) * (Yref.nrows - 1);\n   for (let a = 1; a <= ncomp; a++) {\n\n      // compute predictions\n      const cind = Index.seq(1, a);\n      const Ypreda = prep_unscale(tcrossprod(T.subset([], cind), C.subset([], cind)), mY, sY);\n      Ypred.v.set(Ypreda.v, (a - 1) * nrows);\n\n      // compute performance statistics\n      const e = Yref.subtract(Ypreda);\n      const sse = ssq(e.v);\n      bias.v[a - 1] = mean(e.v);\n      rmse.v[a - 1] = Math.sqrt(sse / nrows);\n      r2.v[a - 1] = 1 - sse / ssy;\n   }\n\n   return {\n      \"Yref\": Yref,\n      \"Ypred\": Ypred,\n      \"rmse\": rmse,\n      \"r2\": r2,\n      \"bias\": bias\n   };\n}\n\n\n/**\n * Implementation of SIMPLS algorithm.\n *\n * @param {Matrix} X - matrix with predictors.\n * @param {Matrix} Y - matrix with responses.\n * @param {number} ncomp - number of components.\n *\n * @return {JSON} JSON with decomposition results.\n *\n */\nexport function simpls(X, Y, ncomp) {\n\n   const nobj  = X.nrows;\n   const npred = X.ncols;\n   const nresp = Y.ncols;\n\n   // initial estimation\n   let S = crossprod(X, Y);\n   let M = crossprod(X);\n\n   // prepare space for results\n   const C = Matrix.zeros(nresp, ncomp)\n   const R = Matrix.zeros(npred, ncomp)\n   const V = Matrix.zeros(npred, ncomp)\n   const P = Matrix.zeros(npred, ncomp)\n   const T = Matrix.zeros(nobj, ncomp)\n   const U = Matrix.zeros(nobj, ncomp)\n\n   const xeigenvals = Vector.zeros(ncomp);\n   const yeigenvals = Vector.zeros(ncomp);\n\n   // loop for each components\n   for (let a = 1; a <= ncomp; a++) {\n\n      let r = rsvd(S, 1).U\n      let t = X.dot(r);\n\n      const tnorm = norm2(t.v);\n      t = t.apply(v => v / tnorm, 0);\n      r = r.apply(v => v / tnorm, 0);\n\n      const p = crossprod(X, t);\n      const c = crossprod(Y, t);\n      let u = Y.dot(c);\n      let v = p.copy()\n\n      if (a > 1) {\n         v = v.subtract(V.dot(crossprod(V, p)));\n         u = u.subtract(T.dot(crossprod(T, u)));\n      }\n\n      const vnorm = norm2(v.v);\n      v = v.apply(x => x / vnorm, 0);\n\n      R.v.set(r.v, (a - 1) * npred);\n      V.v.set(v.v, (a - 1) * npred);\n      P.v.set(p.v, (a - 1) * npred);\n      T.v.set(t.v, (a - 1) * nobj);\n      U.v.set(u.v, (a - 1) * nobj);\n      C.v.set(c.v, (a - 1) * nresp);\n\n\n      xeigenvals.v[a - 1] = ssq(t.v) / (nobj - 1);\n      yeigenvals.v[a - 1] = ssq(u.v) / (nobj - 1);\n\n      M = M.subtract(tcrossprod(p))\n      S = S.subtract(v.dot(crossprod(v, S)));\n   }\n\n   return {\n      R: R, P: P, T: T, C: C, U: U,\n      xeigenvals: xeigenvals,\n      yeigenvals: yeigenvals\n   };\n}\n","/**************************************************/\n/* Methods for PCA and PCVPCA based on wasm code  */\n/* partly can be also used for PCR/PCVPCR         */\n/**************************************************/\n\nimport { ismatrix, Matrix } from 'mdatools/arrays';\nimport { qchisq } from 'mdatools/distributions';\n\n// zero level for distance parameters (if below, set Nu = 1)\nconst ZERO = Math.pow(10,-16);\n\n\n/**\n * Returns length of array with PCA results.\n *\n * @param {number} nrows number of rows in a dataset.\n * @param {number} ncomp number of components in the model.\n *\n * @returns {number} the length of the results array.\n */\nexport function pca_getreslength(nrows, ncomp) {\n\n   // Structure of PCA results:\n   // - T: nr x ncomp\n   // - H: nr x ncomp\n   // - Q: nr x ncomp\n   // - expvar: 1 x ncomp\n\n   return 3 * nrows * ncomp + ncomp;\n}\n\n\n/**\n * Returns length of array with PCA model.\n *\n * @param {number} ncols number of columns in calibration set (number of variables).\n * @param {number} ncomp number of components\n *\n * @returns {number} the length of the model array.\n */\nexport function pca_getmodellength(ncols, ncomp) {\n\n   // Structure of PCA model:\n   // - nc and ncomp: 2\n   // - mX: 1 x ncols\n   // - sX: 1 x ncols\n   // - P: ncols x ncomp\n   // - eigenvals: 1 x ncomp\n   // - Q_mean: 1 x ncomp\n   // - Q_sd: 1 x ncomp\n   // - Q_median: 1 x ncomp\n   // - Q_iqr: 1 x ncomp\n   // - H_mean: 1 x ncomp\n   // - H_sd: 1 x ncomp\n   // - H_median: 1 x ncomp\n   // - H_iqr: 1 x ncomp\n\n   return 2 + 2 * ncols + ncols * ncomp + 9 * ncomp;\n}\n\n\n/**\n * Returns part of PCA model array for given outcome.\n *\n * @param {TypedArray} m array with PCA model.\n * @param {string} name name of the outcome (e.g. 'mX', 'sX', 'loadings', etc.).\n * @param {number} a component number (for loadings).\n *\n * @returns {TypedArray} array with outcomes (by reference).\n */\nexport function pcamodel_get(m, name, a) {\n\n   if (!m || !m.class || !m.class.includes('pcamodel')) {\n      throw new Error('pcamodel_get: parameter \"m\" must be JSON with PCA model.');\n   }\n\n   const ncols = m.ncols;\n   const ncomp = m.ncomp;\n   let offset, length;\n\n   switch(name) {\n      case 'mX':\n         offset = 2;\n         length = ncols;\n         break;\n      case 'sX':\n         offset = 2 + ncols;\n         length = ncols;\n         break;\n      case 'loadings':\n      case 'xloadings':\n         offset = 2 + 2 * ncols + (a - 1) * ncols;\n         length = ncols;\n         break;\n      case 'eigenvals':\n      case 'xeigenvals':\n         offset = 2 + 2 * ncols + ncols * ncomp;\n         length = ncomp;\n         break;\n      case 'qmean':\n         offset = 2 + 2 * ncols + ncols * ncomp + ncomp;\n         length = ncomp;\n         break;\n      case 'qsd':\n         offset = 2 + 2 * ncols + ncols * ncomp + 2 * ncomp;\n         length = ncomp;\n         break;\n      case 'qmedian':\n         offset = 2 + 2 * ncols + ncols * ncomp + 3 * ncomp;\n         length = ncomp;\n         break;\n      case 'qiqr':\n         offset = 2 + 2 * ncols + ncols * ncomp + 4 * ncomp;\n         length = ncomp;\n         break;\n      case 'hmean':\n         offset = 2 + 2 * ncols + ncols * ncomp + 5 * ncomp;\n         length = ncomp;\n         break;\n      case 'hsd':\n         offset = 2 + 2 * ncols + ncols * ncomp + 6 * ncomp;\n         length = ncomp;\n         break;\n      case 'hmedian':\n         offset = 2 + 2 * ncols + ncols * ncomp + 7 * ncomp;\n         length = ncomp;\n         break;\n      case 'hiqr':\n         offset = 2 + 2 * ncols + ncols * ncomp + 8 * ncomp;\n         length = ncomp;\n         break;\n      default:\n         throw Error('pcamodel_get: wrong outcome name.');\n   }\n\n   return m.v.subarray(offset, offset + length);\n}\n\n\n/**\n * Returns distance parameters (u0, Nu) for PCA model.\n *\n * @param {Object} model a PCA model\n * @param {string} name name of distance (\"q\" or \"h\").\n * @param {number} a component number.\n * @param {string} type distance type (\"classic\" or \"robust\").\n *\n * @return {Object} JSON with two arrays u0 and Nu.\n */\nexport function pcamodel_get_distparams(m, name, type) {\n\n   if (!m || !m.class || !m.class.includes('pcamodel')) {\n      throw new Error('pcamodel_get_distparams: parameter \"model\" must be JSON with PCA model.');\n   }\n\n   if (!name) name = 'q';\n   if (!type) type = 'classic';\n\n   const Nu = new m.v.constructor(m.ncomp);\n\n   if (type == 'robust') {\n      const u0 = new m.v.constructor(m.ncomp);\n      const Mu = pcamodel_get(m, name + 'median');\n      const Su = pcamodel_get(m, name + 'iqr');\n\n      for (let i = 0; i < m.ncomp; i++) {\n\n         if (Su[i] < ZERO  ) {\n            u0[i] = ZERO;\n            Nu[i] = 1;\n            continue;\n         }\n\n         const RM = Su[i] / Mu[i];\n         let Nu_i;\n         if (RM > 2.685592117) {\n            Nu_i = 1;\n         } else if (RM < 0.194565995) {\n            Nu_i = 100;\n         } else {\n            Nu_i = Math.round(Math.exp(Math.pow(1.380948 * Math.log(2.68631 / RM), 1.185785)));\n         }\n\n         const a = qchisq(0.75, Nu_i) - qchisq(0.25, Nu_i);\n         const b = qchisq(0.5, Nu_i);\n         u0[i] = 0.5 * Nu_i * (Mu[i]/b + Su[i]/a);\n         Nu[i] = Nu_i > 250 ? 250 : Nu_i;\n      }\n\n      return {u0, Nu};\n   }\n\n   const u0 = pcamodel_get(m, name + 'mean');\n   const su = pcamodel_get(m, name + 'sd');\n   for (let i = 0; i < m.ncomp; i++) {\n      if (su[i] < ZERO) {\n         Nu[i] = 1;\n      } else {\n         const Nu_l = 2 * (u0[i] / su[i]) ** 2;\n         Nu[i] = Nu_l < 1 ? 1 : Nu_l > 250 ? 250 : Math.round(Nu_l);\n      }\n   }\n\n   return {u0, Nu};\n}\n\n\n/**\n * Returns part of PCA result array for given outcome.\n *\n * @param {TypedArray} r array with PCA results.\n * @param {string} name name of the outcome (e.g. 'scores', 'hdist', 'qdist', 'expvar').\n * @param {number} a component number (for scores and distances).\n *\n * @returns {TypedArray} array with outcomes (by reference).\n */\nexport function pcares_get(r, name, a) {\n\n   if (!r || !r.class || !r.class.includes('pcares')) {\n      throw new Error('pcares_get: parameter \"r\" must be JSON with PCA results.');\n   }\n\n   const nrows = r.nrows;\n   const ncomp = r.ncomp;\n   let offset, length;\n\n   switch(name) {\n      case 'scores':\n      case 'xscores':\n         offset = (a - 1) * nrows;\n         length = nrows;\n         break;\n      case 'hdist':\n         offset = nrows * ncomp + (a - 1) * nrows;\n         length = nrows;\n         break;\n      case 'qdist':\n         offset = 2 * nrows * ncomp + (a - 1) * nrows;\n         length = nrows;\n         break;\n      case 'xcumexpvar':\n      case 'cumexpvar':\n         offset = 3 * nrows * ncomp;\n         length = ncomp;\n         break;\n      default:\n         throw new Error('pcares_get: wrong outcome name.');\n   }\n\n   return r.v.subarray(offset, offset + length);\n}\n\n\n/**\n * Creates a PCA model using wasm implementation.\n *\n * @param {Object} Module object with wasm module for PCVPCA.\n * @param {Matrix} X matrix with calibration set.\n * @param {number} ncomp number of components.\n * @param {boolean} center mean center the data columns or not.\n * @param {boolean} scale standardize the data columns or not.\n *\n * @returns {Object} JSON with PCA model.\n */\nexport function pca_fit(Module, X, ncomp, center, scale) {\n\n   if (ncomp === undefined) {\n      ncomp = Math.min(X.nrows - 1, X.ncols);\n   }\n\n   if (center === undefined) {\n      center = true;\n   }\n\n   if (scale === undefined) {\n      scale = false;\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pca_fit: X must be a matrix.');\n   }\n\n   if (X.nrows < 3 || X.ncols < 2) {\n      throw new Error('pca_fit: X must have at least 3 rows and 2 columns.');\n   }\n\n   if (ncomp < 1 || ncomp > Math.min(X.nrows - 1, X.ncols)) {\n      throw new Error('pca_fit: the value of \"ncomp\" does not match the dimension of X.');\n   }\n\n   // allocate memory in WASM heap space and copy dataset values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for model and calibration set results outcomes\n   const m_length = pca_getmodellength(X.ncols, ncomp);\n   const m_constructor = Float64Array;\n   const m_ptr = Module._malloc(m_length * m_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCA\n   const res = Module.ccall('pcafit_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, X.nrows, X.ncols, ncomp, center, scale, m_ptr]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pca_fit: PCA failed.');\n   }\n\n   // copy part of HEAP memory with model outcomes\n   const model = Module.HEAPF64.slice(\n      m_ptr/m_constructor.BYTES_PER_ELEMENT,\n      m_ptr/m_constructor.BYTES_PER_ELEMENT + m_length\n   );\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(m_ptr);\n\n   // return PCA model and result objects\n   return {\n      class: ['pcamodel'],\n      v: model,\n      ncomp: ncomp,\n      nrows: X.nrows,\n      ncols: X.ncols,\n      center: center,\n      scale: scale\n   };\n}\n\n\n/**\n * Projects dataset to a PCA model.\n *\n * @param {Object} Module object with wasm module for PCVPCA.\n * @param {Object} m JSON with PCA model created by `pca_fit()`.\n * @param {Matrix} X matrix with dataset.\n *\n * @returns {Object} JSON with PCA results.\n */\nexport function pca_predict(Module, m, X) {\n\n   if (!m || !m.class || !m.class.includes('pcamodel')) {\n      throw new Error('pca_predict: parameter \"m\" must be JSON with PCA results.');\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pca_predict: X must be a matrix.');\n   }\n\n   if (X.nrows < 1) {\n      throw new Error('pca_fit: X must have at least 1 row.');\n   }\n\n   if (X.ncols !== m.ncols) {\n      throw new Error('pca_fit: X must have the same number of columns as the training set.');\n   }\n\n   // allocate memory in WASM heap space and copy dataset values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy model values\n   const m_ptr = Module._malloc(m.v.length * m.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(m.v, m_ptr / m.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for result values\n   const r_length = pca_getreslength(X.nrows, m.ncomp);\n   const r_constructor = Float64Array;\n   const r_ptr = Module._malloc(r_length * r_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCA prediction\n   const res = Module.ccall('pcapredict_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, X.nrows, X.ncols, m_ptr, r_ptr]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pca_predict: PCA prediction failed.');\n   }\n\n   // copy part of HEAP memory with result values\n   const res_values = Module.HEAPF64.slice(\n      r_ptr/r_constructor.BYTES_PER_ELEMENT,\n      r_ptr/r_constructor.BYTES_PER_ELEMENT + r_length\n   );\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(m_ptr);\n   Module._free(r_ptr);\n\n   // return PCA results\n   return {\n      class: ['pcares'],\n      v: res_values,\n      ncomp: m.ncomp,\n      nrows: X.nrows,\n      ncols: X.ncols,\n      center: m.center,\n      scale: m.scale\n   };\n}\n\n\n/**\n * Create a PV-set based on PCA decomposition.\n *\n * @param {Object} Module object with wasm module for PCVPCA.\n * @param {Object} m JSON with PCA model created by `pca_fit()`.\n * @param {Matrix} X matrix with dataset.\n * @param {number} ncomp number of components for PV-set generation.\n * @param {number} cv_nseg number of segments for cross-validation.\n * @param {number} cv_type type of cross-validation (0: loo, 1: ven, 2: rand).\n * @param {number} cv_scope scope of cross-validation (0: global, 1: local).\n *\n * @returns {Matrix} the generated PV-set.\n */\nexport function pcvpca(Module, m, X, ncomp, cv_nseg, cv_type, cv_scope) {\n\n   if (!m || !m.class || !m.class.includes('pcamodel')) {\n      throw new Error('pcapcv: parameter \"m\" must be JSON with PCA results.');\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pcapcv: X must be a matrix.');\n   }\n\n   if (X.nrows < 3) {\n      throw new Error('pcapcv: X must have at least 3 rows.');\n   }\n\n   if (X.ncols !== m.ncols) {\n      throw new Error('pcapcv: X must have the same number of columns as the training set.');\n   }\n\n   if (!Number.isInteger(cv_type) || ![0, 1, 2].includes(cv_type)) {\n      throw new Error('pcapcv: parameter \"cv_type\" must be one of 0 (\"loo\"), 1 (\"ven\"), 2 (\"rand).');\n   }\n\n   if (!Number.isInteger(cv_scope) || ![0, 1].includes(cv_scope)) {\n      throw new Error('pcapcv: parameter \"cv_scope\" must be 0 (\"global\") or 1 (\"local\").');\n   }\n\n   if (cv_type > 0 && (!Number.isInteger(cv_nseg) || cv_nseg < 2)) {\n      throw new Error('pcapcv: parameter \"cv_nseg\" must be a number  2.');\n   }\n\n   if (cv_type > 0 && cv_nseg > X.nrows) {\n      throw new Error('pcapcv: the value of \"cv_nseg\" is too large for the given X.');\n   }\n\n   if (!Number.isInteger(ncomp) || ncomp < 1) {\n      throw new Error('pcapcv: the value of \"ncomp\" must be a number >= 1.');\n   }\n\n   const max_ncomp = cv_type === 0 ?\n      Math.min(X.nrows - 2, X.ncols, m.ncomp) :\n      Math.min(X.nrows - Math.ceil(X.nrows / cv_nseg) - 1, X.ncols, m.ncomp);\n\n   if (ncomp > max_ncomp) {\n      throw new Error('pcapcv: the value of \"ncomp\" is too large.');\n   }\n\n\n   // allocate memory in WASM heap space and copy dataset values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy model values\n   const m_ptr = Module._malloc(m.v.length * m.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(m.v, m_ptr / m.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for Xpv values\n   const xpv_length = X.v.length;\n   const xpv_constructor = X.v.constructor;\n   const xpv_ptr = Module._malloc(xpv_length * xpv_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCAPCV\n   const res = Module.ccall('pcvpca_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number', 'number',\n               'number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, X.nrows, X.ncols, ncomp, m.center, m.scale,\n               cv_type, cv_nseg, cv_scope, m_ptr, xpv_ptr]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pcapcv: PCVPCA failed.');\n   }\n\n   // copy part of HEAP memory with Xpv values\n   const xpv = Module.HEAPF64.slice(\n      xpv_ptr/xpv_constructor.BYTES_PER_ELEMENT,\n      xpv_ptr/xpv_constructor.BYTES_PER_ELEMENT + xpv_length\n   );\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(m_ptr);\n   Module._free(xpv_ptr);\n\n   // return Xpv\n   return new Matrix(xpv, X.nrows, X.ncols);\n}\n","import { Matrix, ismatrix } from 'mdatools/arrays';\nimport { ssq, variance } from 'mdatools/stat';\nimport { pca_getreslength } from './pcvpca.js';\n\nexport function get_regstat(res) {\n\n   if (!res.Yref || !ismatrix(res.Yref)) return null;\n\n   const Y = res.Yref;\n   const ncomp = res.ncomp;\n   const nresp = Y.ncols;\n   const nrows = Y.nrows;\n\n   // get predicted y-values\n   const yp_offset = pca_getreslength(nrows, ncomp);\n   const yp_length = ncomp * nresp * nrows;\n   const Yp = res.v.subarray(yp_offset, yp_offset + yp_length);\n\n   // prepare matrices for RMSE and R2\n   const RMSE = Matrix.zeros(nresp, ncomp);\n   const R2 = Matrix.zeros(nresp, ncomp);\n\n   // compute total variance for each response\n   const ssy = new Float64Array(nresp);\n   for (let iy = 0; iy < nresp; iy++) {\n      const y = Y.getcolref(iy + 1);\n      ssy[iy] = variance(y) * (nrows - 1);\n   }\n\n   for (let a = 1; a <= ncomp; a++) {\n      const Ypa = new Matrix(Yp.subarray((a - 1) * nrows * nresp, a * nrows * nresp), nrows, nresp);\n      const E = Y.subtract(Ypa);\n      const rmsea = RMSE.getcolref(a);\n      const r2a = R2.getcolref(a);\n\n      for (let iy = 0; iy < nresp; iy++) {\n         const e = E.getcolref(iy + 1);\n         const sse = ssq(e);\n         r2a[iy] = 1 - sse / ssy[iy];\n         rmsea[iy] = Math.sqrt(sse / nrows);\n      }\n   }\n\n   return {RMSE: RMSE.t(), R2: R2.t()};\n}\n","/**************************************************/\n/* Methods for PCR and PCVPLS based on wasm code  */\n/**************************************************/\n\nimport { ismatrix, Matrix, Vector, Index, crossprod } from 'mdatools/arrays';\nimport { scale as prep_scale } from 'mdatools/prep';\nimport { pca_getreslength, pca_getmodellength, pcamodel_get, pcares_get} from './pcvpca.js';\nimport { get_regstat } from './misc.js';\n\n\nfunction get_yscores(res, model) {\n\n   if (!res.Yref || !ismatrix(res.Yref)) return null;\n\n   const Y = res.Yref;\n   const ncols = model.ncols;\n   const nresp = Y.ncols;\n   const nrows = Y.nrows;\n   const ncomp = model.ncomp;\n\n   // autoscale Y\n   const mY = new Vector(plsmodel_get(model, 'mY'));\n   const sY = new Vector(plsmodel_get(model, 'sY'));\n   const Yp = prep_scale(Y, mY, sY);\n\n   // get y-loadings\n   const c_offset = pca_getmodellength(ncols, ncomp) + ncomp * ncols;\n   const c_length = ncomp * nresp;\n   const C = new Matrix(model.v.subarray(c_offset, c_offset + c_length), nresp, ncomp);\n\n   // get x-scores\n   const t_offset = 0;\n   const t_length = ncomp * nrows;\n   const T = new Matrix(res.v.subarray(t_offset, t_offset + t_length), nrows, ncomp);\n\n   // compute y-scores, orthogonalize and return\n   const U = Yp.dot(C);\n\n   for (let a = 2; a <= ncomp; a++) {\n      const ua = U.subset([], a);\n      const Ta = T.subset([], Index.seq(1, a - 1));\n      const uao = ua.subtract(Ta.dot(crossprod(Ta, ua)));\n      U.v.set(uao.v, (a - 1) * nrows);\n   }\n\n   return U;\n}\n\n\n/**\n * Returns length of array with PLS results.\n *\n * @param {number} nrows number of rows in a dataset.\n * @param {number} nresp number of response variables.\n * @param {number} ncomp number of components in the model.\n *\n * @returns {number} the length of the results array.\n */\nexport function pls_getreslength(nrows, nresp, ncomp) {\n\n   // Structure of PLS results - same as PCA with extra fields at the end:\n   // PCA part:\n   // - T: nr x ncomp\n   // - H: nr x ncomp\n   // - Q: nr x ncomp\n   // - expvar: 1 x ncomp\n   // Extra part:\n   // - Yp: nr x ny x ncomp\n   // - U: nr x ncomp\n\n   return pca_getreslength(nrows, ncomp) + nrows * nresp * ncomp + nrows * ncomp;\n}\n\n\n/**\n * Returns length of array with PLS model.\n *\n * @param {number} ncols number of predictors.\n * @param {number} nresp number of responses.\n * @param {number} ncomp number of components\n *\n * @returns {number} the length of the model array.\n */\nexport function pls_getmodellength(ncols, nresp, ncomp) {\n\n   // Structure of PLS model - same as PCA with extra fields at the end:\n   // PCA part:\n   // - mX: 1 x ncols\n   // - sX: 1 x ncols\n   // - P: ncols x ncomp\n   // - eigenvals: 1 x ncomp\n   // - Q_mean: 1 x ncomp\n   // - Q_sd: 1 x ncomp\n   // - Q_median: 1 x ncomp\n   // - Q_iqr: 1 x ncomp\n   // - H_mean: 1 x ncomp\n   // - H_sd: 1 x ncomp\n   // - H_median: 1 x ncomp\n   // - H_iqr: 1 x ncomp\n   // Extra part:\n   // - R: nc x ncomp\n   // - C: ny x ncomp\n   // - mY: ny\n   // - sY: ny\n\n\n   return pca_getmodellength(ncols, ncomp) + ncols * ncomp + nresp * ncomp + 2 * nresp;\n}\n\n\n/**\n * Returns part of PLS model array for given outcome.\n *\n * @param {TypedArray} m array with PLS model.\n * @param {string} name name of the outcome (e.g. 'yloadings', 'mY', 'sY', etc.).\n * @param {number} a component number (for loadings).\n *\n * @returns {TypedArray} array with outcomes (by reference).\n */\nexport function plsmodel_get(m, name, a) {\n\n   if (!m || !m.class || !m.class.includes('plsmodel')) {\n      throw new Error('plsmodel_get: parameter \"m\" must be JSON with PLS model.');\n   }\n\n   const ncols = m.ncols;\n   const nresp = m.nresp;\n   const ncomp = m.ncomp;\n   let length;\n   let offset = pca_getmodellength(ncols, ncomp);\n\n   switch(name) {\n      case 'weights':\n         offset = offset + (a - 1) * ncols;\n         length = ncols;\n         break;\n      case 'yloadings':\n         offset = offset + ncols * ncomp + (a - 1) * nresp;\n         length = nresp;\n         break;\n      case 'mY':\n         offset = offset + ncols * ncomp + nresp * ncomp;\n         length = nresp;\n         break;\n      case 'sY':\n         offset = offset + + ncols * ncomp + nresp * ncomp + nresp;\n         length = nresp;\n         break;\n      default:\n         return pcamodel_get(m, name, a);\n   }\n\n   return m.v.subarray(offset, offset + length);\n}\n\n\n/**\n * Returns part of PLS result array for given outcome.\n *\n * @param {TypedArray} r array with PLS results.\n * @param {string} name name of the outcome (e.g. 'Y', 'Yp', 'RMSE', 'R2').\n * @param {number} a component number (for scores, predictions and distances).\n *\n * @returns {TypedArray} array with outcomes (by reference).\n */\nexport function plsres_get(r, name, a, ny) {\n\n   if (!r || !r.class || !r.class.includes('plsres')) {\n      throw new Error('plsres_get: parameter \"r\" must be JSON with PLS results.');\n   }\n\n   if (!ny) {\n      ny = 1;\n   }\n\n   const nrows = r.nrows;\n   const ncomp = r.ncomp;\n   const nresp = r.nresp;\n   let length;\n   let offset = pca_getreslength(nrows, ncomp);\n\n   switch(name) {\n      case 'Yp':\n         offset = offset + (a - 1) * nresp * nrows + (ny - 1) * nrows;\n         length = nrows;\n         break;\n      case 'yscores':\n         return r.U ? r.U.v.subarray((a - 1) * nrows, a * nrows) : null;\n      default:\n         return pcares_get(r, name, a);\n   }\n\n   return r.v.subarray(offset, offset + length);\n}\n\n\n/**\n * Creates a PLS model using wasm implementation.\n *\n * @param {Object} Module object with wasm module for PCV.\n * @param {Matrix} X matrix with predictors for calibration set.\n * @param {Matrix} Y matrix with responses calibration set (1 column).\n * @param {number} ncomp number of components.\n * @param {boolean} center mean center the data columns or not.\n * @param {boolean} scale standardize the data columns or not.\n *\n * @returns {Object} JSON with PLS model.\n */\nexport function pls_fit(Module, X, Y, ncomp, center, scale) {\n\n   if (ncomp === undefined) {\n      ncomp = Math.min(X.nrows - 1, X.ncols);\n   }\n\n   if (center === undefined) {\n      center = true;\n   }\n\n   if (scale === undefined) {\n      scale = false;\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pls_fit: X must be a matrix.');\n   }\n\n   if (!ismatrix(Y)) {\n      throw new Error('pls_fit: Y must be a matrix.');\n   }\n\n   if (X.nrows < 3 || X.ncols < 2) {\n      throw new Error('pls_fit: X must have at least 3 rows and 2 columns.');\n   }\n\n   if (X.nrows !== Y.nrows ) {\n      throw new Error('pls_fit: X and Y must have the same number of rows.');\n   }\n\n   if (ncomp < 1 || ncomp > Math.min(X.nrows - 1, X.ncols)) {\n      throw new Error('pls_fit: the value of \"ncomp\" does not match the dimension of X.');\n   }\n\n   // allocate memory in WASM heap space and copy predictors values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy responses values\n   const y_ptr = Module._malloc(Y.v.length * Y.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(Y.v, y_ptr / Y.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for model and calibration set results outcomes\n   const m_length = pls_getmodellength(X.ncols, Y.ncols, ncomp);\n   const m_constructor = Float64Array;\n   const m_ptr = Module._malloc(m_length * m_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCA\n   const res = Module.ccall('plsfit_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, y_ptr, X.nrows, X.ncols, Y.ncols, ncomp, center, scale, m_ptr]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pls_fit: unexpected error.');\n   }\n\n   // copy part of HEAP memory with model outcomes\n   const model = Module.HEAPF64.slice(\n      m_ptr/m_constructor.BYTES_PER_ELEMENT,\n      m_ptr/m_constructor.BYTES_PER_ELEMENT + m_length\n   );\n\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(y_ptr);\n   Module._free(m_ptr);\n\n   // return PLS model object (can be also treated as PCA model)\n   return {\n      class: ['plsmodel', 'pcamodel'],\n      v: model,\n      ncomp: ncomp,\n      nrows: X.nrows,\n      ncols: X.ncols,\n      nresp: Y.ncols,\n      center: center,\n      scale: scale\n   };\n}\n\n\n/**\n * Projects dataset to a PLS model.\n *\n * @param {Object} Module object with wasm module for PCV.\n * @param {Object} m JSON with PLS model created by `pls_fit()`.\n * @param {Matrix} X matrix with dataset predictors.\n * @param {Matrix} Y matrix with dataset responses (optional).\n *\n * @returns {Object} JSON with PLS results.\n */\nexport function pls_predict(Module, m, X, Y) {\n\n   if (!m || !m.class || !m.class.includes('plsmodel')) {\n      throw new Error('pls_predict: parameter \"m\" must be JSON with PLS results.');\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pls_predict: X must be a matrix.');\n   }\n\n   if (X.nrows < 1) {\n      throw new Error('pls_predict X must have at least 1 row.');\n   }\n\n   if (X.ncols !== m.ncols) {\n      throw new Error('pls_predict: X must have the same number of columns as the training set.');\n   }\n\n   // allocate memory in WASM heap space and copy dataset values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy model values\n   const m_ptr = Module._malloc(m.v.length * m.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(m.v, m_ptr / m.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for result values\n   const r_length = pls_getreslength(X.nrows, m.nresp, m.ncomp);\n   const r_constructor = Float64Array;\n   const r_ptr = Module._malloc(r_length * r_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCA prediction\n   const res = Module.ccall('plspredict_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, X.nrows, X.ncols, m.nresp, m_ptr, r_ptr]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pls_predict: unexpected error.');\n   }\n\n   // copy part of HEAP memory with result values\n   const res_values = Module.HEAPF64.slice(\n      r_ptr/r_constructor.BYTES_PER_ELEMENT,\n      r_ptr/r_constructor.BYTES_PER_ELEMENT + r_length\n   );\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(m_ptr);\n   Module._free(r_ptr);\n\n   // return PLS results (can be also treated as PCA results)\n   const out = {\n      class: ['plsres', 'pcares'],\n      v: res_values,\n      ncomp: m.ncomp,\n      nrows: X.nrows,\n      ncols: X.ncols,\n      nresp: m.nresp,\n      center: m.center,\n      scale: m.scale,\n      Yref: Y,\n      U: null,\n      stat: null\n   }\n\n   if (Y && ismatrix(Y)) {\n      out.U = get_yscores(out, m);\n      out.stat = get_regstat(out);\n   }\n\n   return out;\n}\n\n\n/**\n * Create a PV-set based on PLS decomposition.\n *\n * @param {Object} Module object with wasm module for PCV.\n * @param {Object} m JSON with PLS model created by `pcr_fit()`.\n * @param {Matrix} X matrix with predictors for calibration set.\n * @param {Matrix} Y matrix with responses calibration set (1 column).\n * @param {number} ncomp number of components for PV-set generation.\n * @param {number} cv_nseg number of segments for cross-validation.\n * @param {number} cv_type type of cross-validation (0: loo, 1: ven, 2: rand).\n * @param {number} cv_scope scope of cross-validation (0: global, 1: local).\n *\n * @returns {Array} array with two matrices: the generated PV-set and matrix of scalars D.\n */\nexport function pcvpls(Module, m, X, Y, ncomp, cv_nseg, cv_type, cv_scope) {\n\n   if (!m || !m.class || !m.class.includes('plsmodel')) {\n      throw new Error('pcvpls: parameter \"m\" must be JSON with PLS model.');\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pcvpls: X must be a matrix.');\n   }\n\n   if (X.nrows < 3) {\n      throw new Error('pcvpls: X must have at least 3 rows.');\n   }\n\n   if (X.ncols !== m.ncols) {\n      throw new Error('pcvpls: X must have the same number of columns as the training set.');\n   }\n\n   if (!Number.isInteger(cv_type) || ![0, 1, 2].includes(cv_type)) {\n      throw new Error('pcvpls: parameter \"cv_type\" must be one of 0 (\"loo\"), 1 (\"ven\"), 2 (\"rand).');\n   }\n\n   if (!Number.isInteger(cv_scope) || ![0, 1].includes(cv_scope)) {\n      throw new Error('pcvpls: parameter \"cv_scope\" must be 0 (\"global\") or 1 (\"local\").');\n   }\n\n   if (cv_type === 0) {\n      cv_nseg = X.nrows;\n   }\n\n   if (cv_type > 0 && (!Number.isInteger(cv_nseg) || cv_nseg < 2)) {\n      throw new Error('pcvpls: parameter \"cv_nseg\" must be a number  2.');\n   }\n\n   if (cv_type > 0 && cv_nseg > X.nrows) {\n      throw new Error('pcvpls: the value of \"cv_nseg\" is too large for the given X.');\n   }\n\n   if (!Number.isInteger(ncomp) || ncomp < 1) {\n      throw new Error('pcvpls: the value of \"ncomp\" must be a number >= 1.');\n   }\n\n   if (X.nrows !== Y.nrows ) {\n      throw new Error('pcvpls: X and Y must have the same number of rows.');\n   }\n\n   if (Y.ncols !== 1) {\n      throw new Error('pcvpls: Y must have one column.');\n   }\n\n   const max_ncomp = cv_type === 0 ?\n      Math.min(X.nrows - 2, X.ncols, m.ncomp) :\n      Math.min(X.nrows - Math.ceil(X.nrows / cv_nseg) - 1, X.ncols, m.ncomp);\n\n   if (ncomp > max_ncomp) {\n      throw new Error('pcvpls: the value of \"ncomp\" is too large.');\n   }\n\n   // allocate memory in WASM heap space and copy predictors values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy response values\n   const y_ptr = Module._malloc(Y.v.length * Y.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(Y.v, y_ptr / Y.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy model values\n   const m_ptr = Module._malloc(m.v.length * m.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(m.v, m_ptr / m.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for Xpv values\n   const xpv_length = X.v.length;\n   const xpv_constructor = X.v.constructor;\n   const xpv_ptr = Module._malloc(xpv_length * xpv_constructor.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for D values\n   const d_length = cv_nseg * ncomp;\n   const d_constructor = X.v.constructor;\n   const d_ptr = Module._malloc(d_length * d_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCVPLS\n   const res = Module.ccall('pcvpls_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number', 'number', 'number',\n               'number', 'number', 'number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, y_ptr, X.nrows, X.ncols, Y.ncols, ncomp, m.center, m.scale,\n               cv_type, cv_nseg, cv_scope, m_ptr, xpv_ptr, d_ptr]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pcvpls: unexpected error.');\n   }\n\n   // copy part of HEAP memory with Xpv values\n   const xpv = Module.HEAPF64.slice(\n      xpv_ptr/xpv_constructor.BYTES_PER_ELEMENT,\n      xpv_ptr/xpv_constructor.BYTES_PER_ELEMENT + xpv_length\n   );\n\n   // copy part of HEAP memory with D values\n   const d = Module.HEAPF64.slice(\n      d_ptr/d_constructor.BYTES_PER_ELEMENT,\n      d_ptr/d_constructor.BYTES_PER_ELEMENT + d_length\n   );\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(y_ptr);\n   Module._free(m_ptr);\n   Module._free(xpv_ptr);\n   Module._free(d_ptr);\n\n   // return Xpv\n   return [new Matrix(xpv, X.nrows, X.ncols), new Matrix(d, cv_nseg, ncomp)];\n}\n","\nvar PCV = (() => {\n  var _scriptDir = import.meta.url;\n  \n  return (\nasync function(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=typeof window==\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts==\"function\";var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\";var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_NODE){const{createRequire:createRequire}=await import(\"module\");var require=createRequire(import.meta.url);var fs=require(\"fs\");var nodePath=require(\"path\");if(ENVIRONMENT_IS_WORKER){scriptDirectory=nodePath.dirname(scriptDirectory)+\"/\"}else{scriptDirectory=require(\"url\").fileURLToPath(new URL(\"./\",import.meta.url))}read_=(filename,binary)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);return fs.readFileSync(filename,binary?undefined:\"utf8\")};readBinary=filename=>{var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}return ret};readAsync=(filename,onload,onerror,binary=true)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);fs.readFile(filename,binary?undefined:\"utf8\",(err,data)=>{if(err)onerror(err);else onload(binary?data.buffer:data)})};if(!Module[\"thisProgram\"]&&process.argv.length>1){thisProgram=process.argv[1].replace(/\\\\/g,\"/\")}arguments_=process.argv.slice(2);quit_=(status,toThrow)=>{process.exitCode=status;throw toThrow};Module[\"inspect\"]=()=>\"[Emscripten Module object]\"}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b)}var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith(\"file://\")}var wasmBinaryFile;if(Module[\"locateFile\"]){wasmBinaryFile=\"pcv_wasm.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}}else{wasmBinaryFile=new URL(\"pcv_wasm.wasm\",import.meta.url).href}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"&&!isFileURI(binaryFile)){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+binaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(()=>getBinarySync(binaryFile))}else if(readAsync){return new Promise((resolve,reject)=>{readAsync(binaryFile,response=>resolve(new Uint8Array(response)),reject)})}}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&!isFileURI(binaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(`wasm streaming compile failed: ${reason}`);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"a\":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports[\"d\"];updateMemoryViews();wasmTable=wasmExports[\"q\"];addOnInit(wasmExports[\"e\"]);removeRunDependency(\"wasm-instantiate\");return exports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(`Module.instantiateWasm callback failed with error: ${e}`);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};var _emscripten_date_now=()=>Date.now();var _emscripten_memcpy_big=(dest,src,num)=>HEAPU8.copyWithin(dest,src,src+num);var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var getCFunc=ident=>{var func=Module[\"_\"+ident];return func};var writeArrayToMemory=(array,buffer)=>{HEAP8.set(array,buffer)};var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);var stringToUTF8OnStack=str=>{var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8(str,ret,size);return ret};var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var ccall=(ident,returnType,argTypes,args,opts)=>{var toC={\"string\":str=>{var ret=0;if(str!==null&&str!==undefined&&str!==0){ret=stringToUTF8OnStack(str)}return ret},\"array\":arr=>{var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\"){return UTF8ToString(ret)}if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret};var wasmImports={b:_emscripten_date_now,c:_emscripten_memcpy_big,a:_emscripten_resize_heap};var wasmExports=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"e\"])();var _pcafit_wasm=Module[\"_pcafit_wasm\"]=(a0,a1,a2,a3,a4,a5,a6)=>(_pcafit_wasm=Module[\"_pcafit_wasm\"]=wasmExports[\"f\"])(a0,a1,a2,a3,a4,a5,a6);var _malloc=Module[\"_malloc\"]=a0=>(_malloc=Module[\"_malloc\"]=wasmExports[\"g\"])(a0);var _free=Module[\"_free\"]=a0=>(_free=Module[\"_free\"]=wasmExports[\"h\"])(a0);var _pcapredict_wasm=Module[\"_pcapredict_wasm\"]=(a0,a1,a2,a3,a4)=>(_pcapredict_wasm=Module[\"_pcapredict_wasm\"]=wasmExports[\"i\"])(a0,a1,a2,a3,a4);var _pcvpca_wasm=Module[\"_pcvpca_wasm\"]=(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10)=>(_pcvpca_wasm=Module[\"_pcvpca_wasm\"]=wasmExports[\"j\"])(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10);var _pcrfit_wasm=Module[\"_pcrfit_wasm\"]=(a0,a1,a2,a3,a4,a5,a6,a7)=>(_pcrfit_wasm=Module[\"_pcrfit_wasm\"]=wasmExports[\"k\"])(a0,a1,a2,a3,a4,a5,a6,a7);var _pcrpredict_wasm=Module[\"_pcrpredict_wasm\"]=(a0,a1,a2,a3,a4)=>(_pcrpredict_wasm=Module[\"_pcrpredict_wasm\"]=wasmExports[\"l\"])(a0,a1,a2,a3,a4);var _pcvpcr_wasm=Module[\"_pcvpcr_wasm\"]=(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12)=>(_pcvpcr_wasm=Module[\"_pcvpcr_wasm\"]=wasmExports[\"m\"])(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12);var _plsfit_wasm=Module[\"_plsfit_wasm\"]=(a0,a1,a2,a3,a4,a5,a6,a7,a8)=>(_plsfit_wasm=Module[\"_plsfit_wasm\"]=wasmExports[\"n\"])(a0,a1,a2,a3,a4,a5,a6,a7,a8);var _plspredict_wasm=Module[\"_plspredict_wasm\"]=(a0,a1,a2,a3,a4,a5)=>(_plspredict_wasm=Module[\"_plspredict_wasm\"]=wasmExports[\"o\"])(a0,a1,a2,a3,a4,a5);var _pcvpls_wasm=Module[\"_pcvpls_wasm\"]=(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13)=>(_pcvpls_wasm=Module[\"_pcvpls_wasm\"]=wasmExports[\"p\"])(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13);var ___errno_location=()=>(___errno_location=wasmExports[\"__errno_location\"])();var stackSave=()=>(stackSave=wasmExports[\"r\"])();var stackRestore=a0=>(stackRestore=wasmExports[\"s\"])(a0);var stackAlloc=a0=>(stackAlloc=wasmExports[\"t\"])(a0);Module[\"ccall\"]=ccall;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return moduleArg.ready\n}\n\n);\n})();\nexport default PCV;","<script>\n   /*************************************************************/\n   /* Svelte component for calculation of global model          */\n   /*************************************************************/\n\n   import { cbind } from 'mdatools/arrays';\n   import { splitregdata } from 'mdatools/models';\n\n   import { Select, Container, ButtonCancel, Button, Spinner } from './controls';\n   import { pcvpls, pls_predict } from './wasm/pcvpls.js';\n   import PCV from './wasm/pcv_wasm.js';\n\n   // main properties of the whole app\n   export let dataset = null;\n   export let model = null;\n   export let pvset = null;\n   export let pvres = null;\n   export let scalars = null;\n\n   // error handling parameetrs\n   let status = 'neutral';\n   let errMsg = null;\n\n   // PV-set calculation parameters\n   let nseg = 4;\n   let cvtypeOptions = ['ven', 'rand', 'loo'];\n   let cvType = 'ven';\n   let promise;\n\n   // if dataset is too small (less than 4 rows) - limit CV choice by LOO\n   $: if (dataset && dataset.values && dataset.values.nrows < 4) {\n      cvtypeOptions = ['loo'];\n      cvType = 'loo';\n   }\n\n   // function for downloading of PV-set\n   function downloadPVSet(e) {\n      const out = cbind(dataset.values.getcolumn(1), pvset);\n      const blob = new Blob([out.toCSV(dataset.sep, dataset.dec, dataset.header, dataset.labels)], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.setAttribute('href', url)\n      a.setAttribute('download', 'pvset.csv');\n      a.click()\n   }\n\n   // function that computes PV-set using given parameters\n   async function computePVSet(data, model, cv) {\n      promise = PCV()\n         .then(Module => {\n            const cv_type = cv.type == 'loo' ? 0 : cv.type == 'rand' ? 2 : 1;\n            const [X, Y] = splitregdata(data);\n            [pvset, scalars] = pcvpls(Module, model, X, Y, model.ncomp, cv.nseg, cv_type, 0);\n            pvres = pls_predict(Module, model, pvset, Y);\n         })\n         .catch((e) => {\n            pvset = null;\n            pvres = null;\n            status = 'error';\n            errMsg = e;\n         });\n   }\n\n   // event handler which triggers the model computation\n   function compute(e) {\n      computePVSet(dataset.values, model, {type: cvType, nseg: nseg});\n   }\n\n   // function which resets the state of the component\n   function reset() {\n      status = 'neutral';\n      errMsg = null;\n      promise = null;\n      pvset = null;\n   }\n\n   // if data file is empty reset status and error messages\n   $: if (model === null) reset();\n\n   // adjust options for number of CV segments based on dataset size\n   $: nsegOptions = dataset && dataset.values.nrows > 0 ?\n      [2, 3, 4, 5, 10, 20].filter(v => v <= dataset.values.nrows / 2 ) : [];\n\n</script>\n\n\n{#if (model && !pvset) && status !== 'busy'}\n\n   <Container label='Split type:'>\n      <Select id='cvType' bind:value={cvType} options={cvtypeOptions} />\n   </Container>\n\n   {#if cvType !== 'loo'}\n   <Container label='Segments:'>\n      <Select id='nseg' bind:value={nseg} options={nsegOptions} />\n   </Container>\n   {/if}\n\n   <Container label=' '>\n      <Button on:click={compute}>Compute PV-set</Button>\n   </Container>\n{/if}\n\n{#if promise}\n\n   {#await promise}\n      <Container>\n         <Spinner />\n         <p>Computing PV-set...</p>\n      </Container>\n   {:then value}\n      {#if pvset !== null}\n      <Container>\n         <p>PV-set is computed: {pvset.nrows} &times; {pvset.ncols}</p>\n         <ButtonCancel on:click={reset} />\n      </Container>\n      <Container label=' '>\n         <Button on:click={downloadPVSet}>Download</Button>\n      </Container>\n      {/if}\n\n   {:catch error}\n      <Container status='error'>\n         <p>{error}</p>\n      </Container>\n   {/await}\n\n{/if}\n\n{#if status === 'error' && errMsg}\n   <Container status='error'>\n      <p>{errMsg}</p>\n   </Container>\n{/if}\n\n","<script>\n   /*************************************************************/\n   /* Svelte component for calculation of global model          */\n   /*************************************************************/\n\n   import { splitregdata } from 'mdatools/models';\n\n   import { Container, ButtonCancel, Button, Range, Select, Spinner } from './controls';\n   import { pls_fit, pls_predict } from './wasm/pcvpls';\n   import PCV from './wasm/pcv_wasm.js';\n\n   // main properties of the whole app\n   export let dataset = null;\n   export let model = null;\n   export let calres = null;\n\n   // error handling parameetrs\n   let status = 'neutral';\n   let errMsg = null;\n\n   // model calculation parameters\n   let ncomp = 1;\n   let center = 'yes';\n   let scale = 'no';\n\n   // promise for model calculation method\n   let promise;\n\n   // function that fits the model using given parameters\n   async function computeModel(data, ncomp, center, scale) {\n      promise = PCV()\n         .then(Module => {\n            const [X, Y] = splitregdata(data);\n            status = 'computing';\n            model = pls_fit(Module, X, Y, ncomp, center, scale);\n            calres = pls_predict(Module, model, X, Y);\n            status = 'success';\n         })\n         .catch(e =>{\n            model = null;\n            calres = null;\n            status = 'error';\n            errMsg = e;\n         });\n   }\n\n   // event handler which triggers the model computation\n   function compute(e) {\n      computeModel(dataset.values, ncomp, center === 'yes', scale === 'yes');\n   }\n\n   // function which resets the state of the component\n   function reset() {\n      status = 'neutral';\n      promise = null;\n      model = null;\n      errMsg = null;\n   }\n\n   // if data file is empty reset status and error messages\n   $: if (dataset === null) reset();\n\n   // set initial number of components depending on dataset size and manual limit of A = 20\n   $: maxNComp = dataset ? Math.min(dataset.values.nrows - 2, dataset.values.ncols - 1) : null;\n   $: ncomp = maxNComp ? Math.min(maxNComp, 20) : null;\n</script>\n\n{#if promise}\n\n   <!-- calculation is in process -->\n   {#await promise}\n      <Container>\n         <Spinner />\n         <p>Computing global model...</p>\n      </Container>\n\n   {:then value}\n      <!-- status if succeed -->\n      {#if model !== null}\n      <Container>\n         <p>Global model is computed: {model.ncomp} LVs</p>\n         <ButtonCancel on:click={reset} />\n      </Container>\n      {/if}\n\n   {:catch error}\n      <!-- error message if failed -->\n      <Container status=\"error\">\n         <p>{error}</p>\n      </Container>\n   {/await}\n\n{/if}\n\n{#if status !== 'computing'}\n   <!-- settings for global model calculation -->\n   {#if dataset && !model}\n   <Container label=\"# of LVs\">\n      <Range id=\"ncomp\" bind:value={ncomp} min={1} max={maxNComp} step={1} decNum={0} />\n   </Container>\n   <Container label=\"Center\">\n      <Select id=\"center\" bind:value={center} options={[\"yes\", \"no\"]} />\n   </Container>\n   <Container label=\"Scale\">\n      <Select id=\"scale\" bind:value={scale} options={[\"yes\", \"no\"]} />\n   </Container>\n   <Container label=\" \">\n      <Button on:click={compute}>Create model</Button>\n   </Container>\n   {/if}\n\n{/if}\n\n<!-- error message -->\n{#if status === 'error' || errMsg}\n<Container status=\"error\">\n   <p>{errMsg}</p>\n</Container>\n{/if}\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","import { cbind, vector, isvector, Vector } from 'mdatools/arrays';\nimport { min, max, diff } from 'mdatools/stat';\n\n\n/**\n * Generate vector with axis tick labels and tick factor based on numeric tick values.\n *\n * @param {Vector} ticks - vector with numeric tick values.\n *\n * @returns {Array} an array with tick factor and array with tick labels.\n */\nexport function getTickLabels(ticks) {\n\n   if (ticks === undefined) return undefined;\n\n   const step = Math.abs(min(diff(ticks)));\n   let tickFactor = 0;\n   if (step < 1 && Math.abs(max(ticks)) < 1) {\n      // values between 0 and 1 (absolute)\n      let decNum = Math.ceil(-Math.log10(step));\n      if (decNum <= 2) {\n         return [0, Array.from(ticks).map(v => v.toFixed(decNum).toString())];\n      }\n      tickFactor = decNum - 2;\n      decNum = 2;\n      return [-tickFactor, Array.from(ticks).map(v => (v * Math.pow(10, tickFactor)).toFixed(decNum).toString())];\n   } else {\n      let decNum = Math.ceil(Math.log10(step));\n      if (decNum <= 2) {\n         return [0, Array.from(ticks).map(v => v.toString())];\n      }\n      tickFactor = decNum - 2;\n      decNum = 2;\n      return [tickFactor, Array.from(ticks).map(v => (v / Math.pow(10, tickFactor)).toString())];\n   }\n}\n\n\n/**\n * Check coordinates and convert them to vector if necessary.\n *\n * @param {Array|Vector} x - vector or array with coordinates.\n * @param {string} source - name of component which called the method (needed for error message).\n *\n * @returns {Vector}\n *\n */\nexport function checkCoords(x, source) {\n\n   if (Array.isArray(x)) {\n      x = vector(x);\n   }\n\n   if (!isvector(x)) {\n      throw Error(source + \": coordinates must be provided as array or instance of Vector class.\");\n   }\n\n   if (x.length < 1) {\n      throw Error(source + \": vector with coordinates is empty.\");\n   }\n\n   return x;\n}\n\n\n/**\n * Create string with coordinates of SVG polygon in 3D.\n *\n * @param {Array|Vector} x - vector with x-coordinates of polygon points.\n * @param {Array|Vector} y - vector with y-coordinates of polygon points.\n * @param {Array|Vector} z - vector with y-coordinates of polygon points.\n * @param {Array} tM - transformation matrix for 3D->2D (from 'Axes').\n * @param {Object} axes - JSON with Axes context.\n *\n * @returns {string} string with coordinates.\n *\n */\nexport function val2p3d(x, y, z, tM, axes) {\n\n   if (x === undefined || y === undefined) return undefined;\n\n   const [px, py] = axes.transform(cbind(checkCoords(x), checkCoords(y), checkCoords(z)), tM);\n\n   if (px.length !== py.length) {\n      throw Error('PlotSeries: parameters \"xValues\", \"yValues\" and \"zValues\" must be numeric vectors of the same length.');\n   }\n\n   let p = \"\";\n   for (let i = 0; i < px.length; i++) {\n      p += px[i] + \",\" + py[i] + \" \";\n   }\n\n   return p;\n}\n\n\n/**\n * Create string with coordinates of SVG polygon.\n *\n * @param {Array|Vector} x - vector with x-coordinates of polygon points.\n * @param {Array|Vector} y - vector with y-coordinates of polygon points.\n * @param {Array} tX - transformation parameters for x-coordinates (from 'Axes').\n * @param {Array} tY - transformation parameters for y-coordinates (from 'Axes').\n * @param {Object} axes - JSON with Axes context.\n *\n * @returns {string} string with coordinates.\n *\n */\nexport function val2p(x, y, tX, tY, axes) {\n\n   if (x === undefined || y === undefined) return undefined;\n\n   const px = axes.transform(checkCoords(x, 'val2p'), tX.coords);\n   const py = axes.transform(checkCoords(y, 'val2p'), tY.coords);\n\n   if (px.length != py.length) {\n      throw Error('PlotSeries: parameters \"xValues\" and \"yValues\" must be numeric vectors of the same length.');\n   }\n\n   let p = \"\";\n   for (let i = 0; i < px.length; i++) {\n      p += px[i] + \",\" + py[i] + \" \";\n   }\n\n   return p;\n}\n\n/**\n * Computes nice tick values for axis.\n *\n * @param {Array} ticks - vector with ticks if alredy available (if not, new will be computed).\n * @param {Array} lim - vector with axis limits tickets must be computed for.\n * @param {number} maxTickNum - maximum number of ticks to compute.\n * @param {boolean} round - round or not the fractions when computing nice numbers for the ticks.\n *\n * @returns {Array} an array with computed tick positions.\n *\n */\nexport function getAxisTicks(ticks, lim, maxTickNum, round = true) {\n\n   // if ticks are already provided do not recompute them\n   if (ticks !== undefined) {\n      if (Array.isArray(ticks)) {\n         ticks = vector(ticks);\n      }\n\n      if (!isvector(ticks)) {\n         throw Error('getAxisTicks: axis ticks must be provided as an array or as a vector.');\n      }\n\n      return ticks.filter(x => x >= lim[0] & x <= lim[1]);\n   }\n\n   // check if limits are ok\n   if (typeof(lim) !== \"object\" || lim[0] === undefined || lim[1] === undefined) return undefined;\n\n   // get range as a nice number and compute min, max and steps for the tick sequence\n   const delta = (lim[1] - lim[0]) / 50;\n   const range = niceNum(lim[1] - lim[0] - 1 * delta, round);\n   const tickSpacing = niceNum(range / (maxTickNum - 1), round);\n   const tickMin = Math.ceil((lim[0] + delta) / tickSpacing) * tickSpacing;\n   const tickMax = Math.floor((lim[1] - delta) / tickSpacing) * tickSpacing;\n\n   // recompute maxTickNum\n   maxTickNum = Math.round((tickMax - tickMin + 1) / tickSpacing) + 1;\n\n   // create a sequence of ticks\n   ticks = Vector.seq(tickMin, tickMax, tickSpacing);\n\n   // if step is smaller than 1 round values to remove small decimals accidentially added by JS\n   if (Math.abs(tickSpacing) < 1) {\n      const decNum = Math.round(-Math.log10(tickSpacing));\n      const r = Math.pow(10, 1 + Math.round(-Math.log10(tickSpacing)));\n      ticks = ticks.apply(v => (Math.round((v + Number.EPSILON) * r) / r));\n   }\n\n   // make sure the ticks are not aligned with axes limits\n   return ticks.filter(x => x >= lim[0] & x <= lim[1]);\n}\n\n\n/**\n * Computes a nice spacing value for a given range.\n *\n * @param {Number} localRange - a range (max - min).\n * @param {boolean} round - round or not the fractions when computing the number.\n *\n * @returns {Number} the computed spacing value.\n *\n */\nexport function niceNum( localRange,  round) {\n\n   const exponent = Math.floor(Math.log10(localRange));\n   const fraction = localRange / Math.pow(10, exponent);\n   let niceFraction;\n\n   if (round) {\n      if (fraction < 1.5)\n         niceFraction = 1;\n      else if (fraction < 3)\n         niceFraction = 2;\n      else if (fraction < 7)\n         niceFraction = 5;\n      else\n         niceFraction = 10;\n   } else {\n      if (fraction <= 1)\n         niceFraction = 1;\n      else if (fraction <= 2)\n         niceFraction = 2;\n      else if (fraction <= 5)\n         niceFraction = 5;\n      else\n         niceFraction = 10;\n   }\n\n   return niceFraction * Math.pow(10, exponent);\n}\n\n\n/**\n * Rounds coordinate values to single decimal\n */\nexport function roundCoords(x) {\n   return Math.round(x * 10) / 10\n}\n\n\n/**\n * Computes a scale level.\n *\n * @param {numeric} width - width of plotting area in pixels.\n * @param {numeric} height - height of plotting area in pixels.\n *\n * @returns {text} the scale level (\"small\", \"medium\" or \"large\").\n *\n */\nexport function getScale(width, height) {\n   if (height < 300.2 || width < 300.2) return \"small\";\n   if (height < 600.2 || width < 600.2) return \"medium\";\n   if (height < 850.2 || width < 850.2) return \"large\";\n   return \"xlarge\";\n}","<script>\n   /****************************************************\n   * Axes                                              *\n   * --------------------                              *\n   * root item for any plot                            *\n   *****************************************************/\n\n\timport { setContext, createEventDispatcher, onMount, onDestroy } from 'svelte';\n\timport { writable } from 'svelte/store';\n   import { isvector, vector, Vector } from 'mdatools/arrays';\n   import { roundCoords, getScale } from '../Utils.js';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let limX;                                   // array with limits for x-axis (in plot units) [min, max]\n   export let limY;                                   // array with limits for y-axis (in plot units) [min, max]\n   export let title = '';                             // title of the plot\n   export let xLabel = '';                            // label for x-axis\n   export let yLabel = '';                            // label for y-axis\n   export let margins = [0.034, 0.034, 0.034, 0.034]; // margins [bottom, left, top, right] )\n\n\n   /*****************************************/\n   /* Constants                             */\n   /*****************************************/\n\n   // event dispatcher\n   const dispatch = createEventDispatcher();\n\n   // how big are margins (number of pixels in unit margin value) between axis and plot area if axis are shown\n   const AXES_MARGIN_FACTORS = {\n      'small': 30,\n      'medium': 40,\n      'large': 50,\n      'xlarge': 60\n   }\n\n   // number of ticks along each axis\n   const TICK_NUM = {\n      'small': 5,\n      'medium': 8,\n      'large': 12,\n      'xlarge': 15\n   };\n\n   // size of ticks\n   const TICK_SIZE = {\n      'small': 4,\n      'medium': 6,\n      'large': 8,\n      'xlarge': 10\n   };\n\n   // font size for legend items in pixels\n   const LEGEND_FONT_SIZE = {\n      \"small\": 10,\n      \"medium\": 12,\n      \"large\": 14,\n      \"xlarge\": 16\n   };\n\n   // margin between plot series elements and data labels\n   const LABELS_MARGIN = {\n      'small': 10,\n      'medium': 13,\n      'large': 15,\n      'xlarge': 17\n   };\n\n   // line styles for different scales and types\n   const LINE_STYLES = {\n      small: ['0', '3,3', '1,1', '3,1'],\n      medium: ['0', '5,5', '2,2', '5,2'],\n      large: ['0', '7,7', '3,3', '7,3'],\n      xlarge: ['0', '9,9', '4,4', '9,3'],\n   }\n\n   // marker symbols\n   const MARKER_SYMBOLS = [\"\", \"\", \"\", \"\", \"\", \"\", \"*\", \"\"];\n\n   // constant to make clip path ID unique\n   const clipPathID = 'plottingArea' + Math.round(Math.random() * 10000);\n\n\n   /*****************************************/\n   /* Variable parameters for internal use  */\n   /*****************************************/\n\n   /* parameters for internal use inside the component */\n   let plotElement;\n   let axesElement;\n   let width, height = 100;\n\n\n   /*****************************************/\n   /* Helper functions                      */\n   /*****************************************/\n\n   /**\n    * Dispatcher for click events.\n    * @param {string} eventName - name of the event.\n    * @param {HTMLDOMElement} el - DOM element the click was registered for.\n    *\n    */\n   function dispatchClickEvent(eventName, el) {\n      const id = Array.prototype.indexOf.call(el.parentNode.children, el)\n      dispatch(eventName, {seriesTitle: el.parentNode.getAttribute('title'), elementID: id});\n   }\n\n   /**\n    * Handler (router) for click events.\n    *\n    * @param {event} e - event object.\n    *\n    * @description\n    * Checks which element the click was made on and dispatch a corresponding event.\n    *\n    */\n   function handleClick(e) {\n\n      // click on scatter plot markers\n      if (e.target.tagName === 'text' && e.target.parentNode.classList.contains('series_points')) {\n         dispatchClickEvent('markerclick', e.target);\n         return;\n      }\n\n      // click on bar plot bars\n      if (e.target.tagName === 'rect' && e.target.parentNode.classList.contains('series_bar')) {\n         dispatchClickEvent('barclick', e.target);\n         return;\n      }\n\n      // click outside any plot element\n      dispatch('axesclick');\n   }\n\n   /**\n    * Generic function to transform x or y-values from plot coordinates to screen (SVG) coordinates.\n    *\n    * @param {Array|Vector} v - vector with coordinates (or objects size) in original plot coordinates.\n    * @param {Object} tA - array with scaling and translation factors.\n    *\n    * @returns {Vector} vector with rescaled values\n    *\n    */\n   const transform = function(v, tA) {\n\n      if (!$isOk || v === undefined || v === null) return undefined;\n      if (Array.isArray(v)) v = vector(v);\n      if (!isvector(v) || v.length < 1) return undefined;\n\n      return v.apply(a => roundCoords((a - tA[1]) * tA[0] + tA[2])).v;\n   }\n\n\n   /**\n    * Generic function to transform x or y-values from screen (SVG) coordinates to plot coordinates.\n    *\n    * @param {Array|Vector} v - vector with coordinates (or objects size) in screen (SVG) coordinates.\n    * @param {Object} tA - array with scaling and translation factors.\n    *\n    * @returns {Vector} vector plot coordinates.\n    *\n    */\n   const invTransform = function(v, tA) {\n\n      if (!$isOk || v === undefined || v === null) return undefined;\n      if (Array.isArray(v)) v = vector(v);\n      if (!isvector(v) || v.length < 1) return undefined;\n\n      return v.apply(a => (a - tA[2]) / tA[0] + tA[1]).v;\n   }\n\n   /*****************************************/\n   /* Storage to share with children        */\n   /*****************************************/\n\n   const scale = writable('medium');                                  // scale factor (how big the shown plot is)\n   const tX = writable({'coords': [1, 0, 0], 'objects': [1, 0, 0]});  // scaling and translation factors for x-dimension\n   const tY = writable({'coords': [1, 0, 0], 'objects': [1, 0, 0]});  // scaling and translation factors for y-dimension\n   const isOk = writable(false);                                      // are axes ready for drawing\n   const xLim = writable(limX);\n   const yLim = writable(limY);\n\n\n   /*****************************************/\n   /* Axes context                          */\n   /*****************************************/\n\n   let context = {\n\n      // methods\n      transform: transform,\n      invTransform: invTransform,\n\n      // variables\n      scale: scale,\n      isOk: isOk,\n      xLim: xLim,\n      yLim: yLim,\n      tX: tX,\n      tY: tY,\n\n      // constants\n      LINE_STYLES: LINE_STYLES,\n      LABELS_MARGIN: LABELS_MARGIN,\n      TICK_NUM: TICK_NUM,\n      TICK_SIZE: TICK_SIZE,\n      MARKER_SYMBOLS: MARKER_SYMBOLS,\n      LEGEND_FONT_SIZE: LEGEND_FONT_SIZE\n   }\n\n\tsetContext('axes', context);\n\n   /*****************************************/\n   /* Reactive updates of the parameters    */\n   /*****************************************/\n\n   // computes real margins in pixels based on current scale\n   $: pxMargins = margins.map(v => v * AXES_MARGIN_FACTORS[$scale]);\n\n   // update limits if necessary\n   $: xLim.update(v => limX);\n   $: yLim.update(v => limY);\n\n   // computes status which tells that axes limits look fine and it is safe to draw\n   // the status is based on the axis limits validity\n   $: isOk.update(v =>\n      Array.isArray($yLim) &&\n      Array.isArray($xLim) &&\n      $xLim.length === 2 &&\n      $yLim.length === 2 &&\n      !$yLim.some(v => v === undefined) &&\n      !$xLim.some(v => v === undefined) &&\n      !$yLim.some(v => isNaN(v)) &&\n      !$xLim.some(v => isNaN(v)) &&\n      $xLim[1] !== $xLim[0] &&\n      $yLim[1] !== $yLim[0] &&\n      width > (pxMargins[1] + pxMargins[3]) &&\n      height > (pxMargins[0] + pxMargins[2])\n   )\n\n   // update transformation array for x-coordinates\n   $: {\n      if ($isOk) {\n         tX.update(v => ({\n            'coords':  [ (width - pxMargins[1] - pxMargins[3]) / ($xLim[1] - $xLim[0]), $xLim[0], pxMargins[1]],\n            'objects': [ (width - pxMargins[1] - pxMargins[3]) / ($xLim[1] - $xLim[0]),       0,             0]\n         }));\n      }\n   };\n\n   // update transformation array for y-coordinates\n   $: {\n      if ($isOk) {\n         tY.update(v => ({\n            'coords':  [-(height - pxMargins[0] - pxMargins[2]) / ($yLim[1] - $yLim[0]), $yLim[1], pxMargins[2]],\n            'objects': [ (height - pxMargins[0] - pxMargins[2]) / ($yLim[1] - $yLim[0]),        0,            0]\n         }));\n      }\n   };\n\n   // computes coordinates for clip path box\n   $: cpx = $isOk ? transform($xLim, $tX.coords) : [0, 1];\n   $: cpy = $isOk ? transform($yLim, $tY.coords) : [1, 0];\n\n\n   /*****************************************/\n   /* Events observers                      */\n   /*****************************************/\n\n   // observer for the plot area size to update the scale\n   const ro1 = new ResizeObserver(entries => {\n      for (let entry of entries) {\n         const pcr = plotElement.getBoundingClientRect();\n         scale.update(x => getScale(pcr.width, pcr.height));\n      }\n   });\n\n   // observer for the axes area size - to update size of axes\n   const ro2 = new ResizeObserver(entries => {\n      for (let entry of entries) {\n         const acr = axesElement.getBoundingClientRect();\n         width = acr.width;\n         height = acr.height;\n      }\n   });\n\n   onMount(() => {\n      ro1.observe(plotElement);\n      ro2.observe(axesElement);\n   });\n\n   onDestroy(() => {\n      ro1.unobserve(plotElement);\n      ro2.unobserve(axesElement);\n   })\n\n</script>\n\n<div class=\"plot {'plot_' + $scale}\"  bind:this={plotElement} class:plot_error={!$isOk}>\n   <!-- plot title and axis labels -->\n   {#if title !== ''}<div class=\"axes__title\">{@html title}</div>{/if}\n   {#if yLabel !== ''}<div class=\"axes__ylabel\"><span>{@html yLabel}</span></div>{/if}\n   {#if xLabel !== ''}<div class=\"axes__xlabel\"><span>{@html xLabel}</span></div>{/if}\n\n   <!-- axes (coordinate system) -->\n   <div class=\"axes-wrapper\" bind:this={axesElement} >\n      <svg on:click={handleClick} on:keydown={handleClick} preserveAspectRatio=\"none\" class=\"axes\">\n\n         <!-- define clipping path -->\n         <defs>\n            <clipPath id={clipPathID}>\n               <rect style=\"pointer-events:none\" x={cpx[0]} y={cpy[1]} width={cpx[1]-cpx[0]} height={cpy[0]-cpy[1]} />\n            </clipPath>\n         </defs>\n\n\n         <!-- axis and box -->\n         <slot name=\"xaxis\"></slot>\n         <slot name=\"yaxis\"></slot>\n\n         <!-- main plot content -->\n         <g class=\"axes-content\" clip-path=\"url(#{clipPathID})\">\n            <slot></slot>\n         </g>\n\n\n         <!-- axis and box -->\n         <slot name=\"box\"></slot>\n\n      </svg>\n\n   {#if !$isOk}\n   <p class=\"message_error\">\n      Axes component was not properly initialized. <br />\n      Check that you defined axes limits and margins correctly.\n   </p>\n   {/if}\n   </div>\n\n\n</div>\n\n<style>\n\n   /* Plot (main container) */\n   .plot {\n      font-family: Arial, Helvetica, sans-serif;\n\n      display: grid;\n      grid-template-columns: min-content auto;\n      grid-template-rows: min-content auto min-content;\n      grid-template-areas:\n         \". title\"\n         \"ylab axes\"\n         \". xlab\";\n\n      box-sizing: border-box;\n      /* background: #fefefe; */\n      min-width: 100px;\n      min-height: 50px;\n      width: 100%;\n      height: 100%;\n      padding: 0;\n      margin: 0;\n   }\n\n   .plot_small {\n      font-size: 11px;\n   }\n\n   .plot_medium {\n      font-size: 13px;\n   }\n\n   .plot_large {\n      font-size: 16px;\n   }\n\n   .plot_xlarge {\n      font-size: 19px;\n   }\n\n   .plot_error {\n      display: flex;\n   }\n\n   .plot_error > .axes-wrapper > svg {\n      display: none;\n   }\n\n   .message_error {\n      font-size: 1.2em;\n      color: crimson;\n      padding: 1em;\n      box-sizing: border-box;\n      text-align: center;\n   }\n\n   /* Axes (coordinate system) */\n   .axes-wrapper {\n      grid-area: axes;\n      position:relative;\n      box-sizing: border-box;\n      display: flex;\n      width: 100%;\n      height: 100%;\n      padding: 0;\n      margin: 0;\n   }\n\n   .axes {\n      display: block;\n      box-sizing: border-box;\n      position:absolute;\n\n      padding: 0;\n      margin: 0;\n      height: 100%;\n      width: 100%;\n      max-height: 100%;\n      max-width: 100%;\n      min-height: 100%;\n      min-width: 100%;\n   }\n\n   .axes-content {\n      padding: 0;\n      margin: 0;\n      height: 100%;\n      width: 100%;\n      max-height: 100%;\n      max-width: 100%;\n      min-height: 100%;\n      min-width: 100%;\n\n   }\n\n   .axes__xlabel {\n      grid-area: xlab;\n      font-size: 1.0em;\n      font-weight: 600;\n      padding: 0.25em;\n      text-align: center;\n   }\n\n\n   .axes__ylabel {\n      grid-area: ylab;\n      font-size: 1.0em;\n      font-weight: 600;\n      padding: 0.25em;\n      text-align: center;\n      vertical-align: middle;\n      display: flex;\n   }\n\n   .axes__ylabel > span {\n      width: 1.5em;\n      line-height: 1.5em;\n      display: inline-block;\n      writing-mode: vertical-rl;\n      transform: rotate(180deg);\n   }\n\n\n   .axes__title {\n      background: transparent;\n      grid-area: title;\n\n      font-size: 1.3em;\n      font-weight: bold;\n      line-height: 1.2em;\n      padding: 0.5em 0;\n      text-align: center;\n   }\n\n   /* Axis */\n   :global(.axis-labels) {\n      fill: #303030;\n      font-size: 0.95em;\n   }\n\n   /* Data labels */\n   :global(.labels) {\n      fill: #606060;\n      font-size: 0.90em;\n   }\n\n   :global(.labels) {\n      visibility: hidden;\n      transition:visibility 0.25s linear, opacity 0.25s linear;\n      opacity: 0;\n   }\n\n</style>","export const Colors = {\n   \"AXIS_LINE\": \"#303030\",\n   \"AXIS_TICK\": \"#606060\",\n   \"WHITE\":     \"#fff\",\n   \"BLACK\":     \"#000\",\n   \"GRAY\":      \"#909090\",\n   \"MIDDLEGRAY\": \"#dadada\",\n   \"LIGHTGRAY\": \"#f0f0f0\",\n   \"DARKGRAY\":  \"#606060\",\n   \"LEGEND\": \"#303030\",\n\n   \"PRIMARY\": \"#2679B2\",\n   \"PRIMARY_LIGHT\": \"#d2ebff\",\n   \"PRIMARY_TEXT\": \"#333\",\n}\n\n\n/**\n * Returns an array with 'n' colors.\n *\n * @param {number} n - number of colors to return.\n *\n * @returns {Array} array with colors as strings (hexadecimal).\n *\n */\nexport function getcolmap(n) {\n   if (n ==  1) return [\"#2679B2\"];\n   if (n ==  2) return [\"#2679B2\", \"#D22C2F\"];\n   if (n ==  3) return [\"#2679B2\", \"#92B42A\", \"#D22C2F\"];\n   if (n ==  4) return [\"#2679B2\", \"#2E9658\", \"#F2B825\", \"#D22C2F\"];\n   if (n ==  5) return [\"#2679B2\", \"#22988A\", \"#92B42A\", \"#F79426\", \"#D22C2F\"];\n   if (n ==  6) return [\"#2679B2\", \"#1C9AA8\", \"#379531\", \"#EED524\", \"#FB7F28\", \"#D22C2F\"];\n   if (n ==  7) return [\"#2679B2\", \"#1D94A9\", \"#2E9658\", \"#92B42A\", \"#F2B825\", \"#F47129\", \"#D22C2F\"];\n   if (n ==  8) return [\"#2679B2\", \"#1E90AA\", \"#279775\", \"#519E2F\", \"#D3CB25\", \"#F5A326\", \"#EF672A\", \"#D22C2F\"];\n   if (n ==  9) return [\"#2679B2\", \"#1F8DAB\", \"#22988A\", \"#33953F\", \"#92B42A\", \"#EFCA24\", \"#F79426\", \"#EB5F2A\", \"#D22C2F\"];\n   if (n == 10) return [\"#2679B2\", \"#208BAC\", \"#1E999A\", \"#2E9658\", \"#5FA32E\", \"#C5C626\", \"#F2B825\", \"#F98827\", \"#E85A2B\", \"#D22C2F\"];\n   if (n == 11) return [\"#2679B2\", \"#2089AD\", \"#1C9AA8\", \"#29976C\", \"#379531\", \"#92B42A\", \"#EED524\", \"#F4AA26\", \"#FB7F28\",\n      \"#E6552B\", \"#D22C2F\"];\n   if (n == 12) return [\"#2679B2\", \"#2188AD\", \"#1C97A8\", \"#25987C\", \"#329546\", \"#68A62D\", \"#BCC327\", \"#F0C524\", \"#F69E26\",\n      \"#F77728\", \"#E4512B\", \"#D22C2F\"];\n   if (n == 13) return [\"#2679B2\", \"#2186AD\", \"#1D94A9\", \"#22988A\", \"#2E9658\", \"#469A2F\", \"#92B42A\", \"#DECF25\", \"#F2B825\",\n      \"#F79426\", \"#F47129\", \"#E34E2C\", \"#D22C2F\"];\n   if (n == 14) return [\"#2679B2\", \"#2285AE\", \"#1E92AA\", \"#209995\", \"#2A9767\", \"#34953A\", \"#6FA82D\", \"#B5C128\", \"#EFCE24\", \"#F3AD25\",\n      \"#F98C27\", \"#F16B29\", \"#E14B2C\", \"#D22C2F\"];\n   if (n == 15) return [\"#2679B2\", \"#2284AE\", \"#1E90AA\", \"#1D999F\", \"#279775\", \"#31964A\", \"#519E2F\", \"#92B42A\", \"#D3CB25\", \"#F0C224\",\n      \"#F5A326\", \"#FA8527\", \"#EF672A\", \"#E0492C\", \"#D22C2F\"];\n\n   // if n > 15 return 16 colors\n   return [\"#2679B2\", \"#2283AE\", \"#1F8FAB\", \"#1C9AA8\", \"#249880\", \"#2E9658\", \"#379531\", \"#73AA2C\", \"#B0BF28\", \"#EDD424\", \"#F2B825\",\n      \"#F69B26\", \"#FB7F28\", \"#ED632A\", \"#DF472C\", \"#D22C2F\"];\n}\n","<script>\n   /****************************************************\n   * Axis lines                                        *\n   * --------------------                              *\n   * generic component for axis lines (main, grid, ...)*\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors.js';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let lineCoords = [];               // coordinates of start and end points of the lines\n   export let lineColor = Colors.DARKGRAY;   // line color\n   export let lineType = 1;                  // line type\n   export let lineWidth = 1;                 // lined width (thickness)\n   export let className = '';                // CSS class name for the component\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // reactive variables for coordinates of axis lines\n   let x1, x2, y1, y2 = undefined;\n   $: if (lineCoords.length == 2) {\n      x1 = axes.transform(lineCoords[0][0], $tX.coords);\n      y1 = axes.transform(lineCoords[0][1], $tY.coords);\n      x2 = axes.transform(lineCoords[1][0], $tX.coords);\n      y2 = axes.transform(lineCoords[1][1], $tY.coords);\n   }\n\n   /* styles for axis and grid lines */\n   $: lineStyleStr = `stroke:${lineColor};stroke-width: ${lineWidth}px;stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n\n</script>\n\n{#if x1 !== undefined && y1 !== undefined && x2 !== undefined && y2 !== undefined}\n<g class={className}>\n   {#each x1 as v, i}\n   <line vector-effect=\"non-scaling-stroke\" x1={x1[i]} x2={x2[i]} y1={y1[i]} y2={y2[i]} style={lineStyleStr} />\n   {/each}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * AxisTickLabels                                    *\n   * --------------------                              *\n   * shows a series of tick labels along an axis       *\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let tickCoords;  // array with tick coordinates\n   export let textColor;   // color of tick labels\n   export let tickLabels;  // array with tick labels\n   export let pos = 1;     // position of tick labels\n   export let las = 1;     // rotation of tick labels (1 - horizontal, 2 - vertical)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n\n   let x, y = undefined;\n   let dx = 0, dy = 0, textAnchor;\n\n   // reactive calculations triggered by changes in coordinates and plot parameters\n   $: if ($isOk) {\n      x = axes.transform(tickCoords[1][0], $tX.coords);\n      y = axes.transform(tickCoords[1][1], $tY.coords);\n   }\n\n   // reactive calculations triggered by changes in scale\n   $: m = axes.LABELS_MARGIN[$scale];\n\n   // reactive calculations triggered by changes in pos\n   $: {\n      textAnchor = (['middle', 'middle', 'start', 'middle', 'end'])[pos];\n      dx = ([0, 0, m,  0, -m])[pos];\n      dy = ([0, m, 0, -m, 0])[pos];\n   }\n\n   // styles for the elements\n   $: textStyleStr = `dominant-baseline:middle;fill:${textColor};font-size:1em; text-anchor:middle;`;\n</script>\n\n{#if x !== undefined && y !== undefined}\n<g class=\"tick_labels\" style={textStyleStr} >\n   {#if las === 2 && pos === 4}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={0} dy={dx*1.25} transform={`rotate(-90, ${x[i]}, ${y[i]})`} text-anchor={\"middle\"}>{@html tickLabels[i]}</text>\n   {/each}\n   {:else if las === 2 && pos === 1}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={-dy/2} dy={0} transform={`rotate(-90, ${x[i]}, ${y[i]})`} text-anchor={\"end\"}>{@html tickLabels[i]}</text>\n   {/each}\n   {:else}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx} dy={dy} text-anchor={textAnchor}>{@html tickLabels[i]}</text>\n   {/each}\n   {/if}\n</g>\n{/if}\n\n<style>\n   text, text > :global(tspan) {\n      cursor: default;\n      user-select: none;\n      dominant-baseline: middle;\n   }\n</style>","<script>\n   /****************************************************\n   * Axis                                              *\n   * ---------------------------------                 *\n   * generic element for X- or Y-axis                  *\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { Colors } from '../Colors.js';\n   import AxisLines from './AxisLines.svelte';\n   import AxisTickLabels from './AxisTickLabels.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let tickLabels = [];               // vector with labels for each tick\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // rotation of tick labels\n\n   export let pos = 1;                       // position of tick labels\n   export let className = \"\";                // name of CSS class for the axis\n   export let grid = [];                     // array with grid coordinates\n   export let axisLine = [];                 // array with coordinates of main axis line\n   export let tickCoords = [];               // array with axis tick coordinates\n   export let tfCoords = [];                 // array with tick factor coordinates\n   export let tickFactor = 0;                // tick factor (as power of 10)\n\n   export let lineColor = Colors.DARKGRAY;   // color of main axis line\n   export let gridColor = Colors.MIDDLEGRAY; // color of grid lines\n   export let textColor = Colors.DARKGRAY;   // color of tick labels\n\n   // generate text for tick factor label\n   function getTickFactorLabel(tf) {\n      if (tf === 0) return '';\n      if (tf < 0) {\n         return `&times;10<tspan baseline-shift = \"super\">${(tf).toString()}</tspan>`;\n      } else {\n         return `&times;10<tspan baseline-shift = \"super\">${(tf).toString()}</tspan>`;\n      }\n   }\n</script>\n\n<g class=\"mdaplot__axis {className}\">\n   <!-- grid -->\n   {#if showGrid }\n      <AxisLines lineCoords={grid} lineColor={gridColor} lineType={3} />\n   {/if}\n\n   <!-- main axis line -->\n   <AxisLines lineCoords={axisLine} lineColor={lineColor} lineType={1} />\n\n   <!-- ticks-->\n   <AxisLines lineCoords={tickCoords} lineColor={lineColor} lineType={1} />\n\n   <!-- labels -->\n   {#if tickCoords.length === 2 && tickLabels.length === tickCoords[1][0].length}\n   <AxisTickLabels {las} {pos} {tickCoords} {tickLabels} {textColor} />\n   {/if}\n\n   <!-- tick factor -->\n   {#if tickFactor !== 0}\n   <AxisTickLabels {pos} tickCoords={tfCoords} tickLabels={[getTickFactorLabel(tickFactor)]} {textColor} />\n   {/if}\n</g>\n\n","<script>\n   /****************************************************\n   * X-Axis                                            *\n   * --------------------                              *\n   * shows x-axis and its elements (ticks, grid, etc.) *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector, vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors.js';\n   import { getAxisTicks, getTickLabels } from '../Utils.js';\n   import Axis from './Axis.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot = 'xaxis';                // slot the component must be placed in (must be \"xaxis\")\n   export let ticks = undefined;             // vector with numeric tick positions (by default is computed automatically)\n   export let tickLabels = undefined;        // vector with labels for each tick (by default tick values will be used)\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // orientation of tick labels (1 - horizontal, 2 - vertical)\n\n   export let lineColor = Colors.DARKGRAY;   // color of axis and tick lines\n   export let gridColor = Colors.MIDDLEGRAY; // color og grid lines\n   export let textColor = Colors.DARKGRAY;   // color of text tick labels\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // sanity checks of input parameters\n   if (slot !== 'xaxis') {\n      throw('Component XAxis must have \"slot=\\'xaxis\\'\" attribute.');\n   }\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n\n   // get reactive variables needed to compute coordinates\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tY = axes.tY;\n\n   // prepare variables for coordinates\n   let grid = [];\n   let axisLine = [];\n   let tickCoords = [];\n   let tfCoords = [];\n   let tickFactor = 0;\n\n   // compute coordinates for ticks, grid and axis line\n   $: if ($isOk) {\n\n      // compute x-coordinates of the ticks or take the ones manually specified by user\n      const ticksX = getAxisTicks(ticks, $xLim, axes.TICK_NUM[$scale], true);\n      const tickNum = ticksX.length;\n\n      // compute tick y-coordinates (up and bottom)\n      const dY = axes.invTransform([axes.TICK_SIZE[$scale]], $tY.objects)[0];\n      const ticksY1 = Vector.fill($yLim[0], tickNum);\n      const ticksY2 = ticksY1.add(dY);\n\n      // compute coordinates for the ends of grid\n      const gridYEnd = Vector.fill($yLim[1], tickNum);\n\n      // tick labels and tick factor\n      if (ticks === undefined || tickLabels === undefined) {\n         [tickFactor, tickLabels] = getTickLabels(ticksX.v);\n      }\n\n      if (tickLabels.length !== ticksX.length) {\n         throw('XAxis: \"tickLabels\" must be a array of the same size as ticks.')\n      }\n\n      // combine all coordinates together\n      grid = [\n         [ticksX, ticksY1],\n         [ticksX, gridYEnd]\n      ];\n\n      axisLine = [\n         [vector([$xLim[0]]), vector([$yLim[0]])],\n         [vector([$xLim[1]]), vector([$yLim[0]])]\n      ]\n\n      tickCoords = [\n         [ticksX, ticksY2],\n         [ticksX, ticksY1]\n      ];\n\n      tfCoords = [\n         [null, null],\n         [[$xLim[1]], [ticksY1.v[tickNum - 1]]],\n      ];\n   }\n</script>\n\n{#if $isOk && axisLine.length > 0}\n<Axis\n   className=\"mdaplot__xaxis\" pos={1}\n   {lineColor} {gridColor} {textColor}\n   {showGrid} {grid} {axisLine} {tickCoords} {tickLabels} {tfCoords} {tickFactor} {las}\n/>\n{/if}","<script>\n   /****************************************************\n   * Y-Axis                                            *\n   * --------------------                              *\n   * shows y-axis and its elements (ticks, grid, etc.) *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector, vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors.js';\n   import { getAxisTicks, getTickLabels } from '../Utils.js';\n   import Axis from './Axis.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot = 'yaxis';                // slot the component must be placed in (must be \"yaxis\")\n   export let ticks = undefined;             // vector with numeric tick positions (by default is computed automatically)\n   export let tickLabels = undefined;        // vector with labels for each tick (by default tick values will be used)\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // orientation of tick labels (1 - horizontal, 2 - vertical)\n\n   export let lineColor = Colors.DARKGRAY;   // color of axis and tick lines\n   export let gridColor = Colors.MIDDLEGRAY; // color og grid lines\n   export let textColor = Colors.DARKGRAY;   // color of text tick labels\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // sanity checks of input parameters\n   if (slot !== 'yaxis') {\n      throw('Component YAxis must have \"slot=\\'yaxis\\'\" attribute.');\n   }\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n\n   // get reactive variables needed to compute coordinates\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n\n   // prepare variables for coordinates\n   let grid = [];\n   let axisLine = [];\n   let tickCoords = [];\n   let tfCoords = [];\n   let tickFactor = 0;\n\n   // compute tick x-coordinates\n   $: if ($isOk) {\n\n      // compute x-coordinates of the ticks or take the ones manually specified by user\n      const ticksY = getAxisTicks(ticks, $yLim, axes.TICK_NUM[$scale], true);\n      const tickNum = ticksY.length;\n\n      // compute tick y-coordinates (up and bottom)\n      const dX = axes.invTransform([axes.TICK_SIZE[$scale]], $tX.objects)[0];\n      const ticksX1 = Vector.fill($xLim[0], tickNum)\n      const ticksX2 = ticksX1.add(dX)\n\n      // coordinates for the ends of grid\n      const gridXEnd = Vector.fill($xLim[1], tickNum);\n\n      // tick labels and tick factor\n      if (ticks === undefined || tickLabels === undefined) {\n         [tickFactor, tickLabels] = getTickLabels(ticksY.v)\n      }\n\n      if (tickLabels.length !== ticksY.length) {\n         throw('YAxis: \"tickLabels\" must be a array of the same size as ticks.')\n      }\n\n      // combine all coordinates together\n      grid = [\n         [ticksX1, ticksY],\n         [gridXEnd, ticksY]\n      ];\n\n      axisLine = [\n         [vector([$xLim[0]]), vector([$yLim[0]])],\n         [vector([$xLim[0]]), vector([$yLim[1]])]\n      ]\n\n      tickCoords = [\n         [ticksX1, ticksY],\n         [ticksX2, ticksY]\n      ];\n\n      tfCoords = [\n         [[], []],\n         [[ticksX1.v[tickNum - 1]], [$yLim[1]]],\n      ];\n   }\n</script>\n\n{#if $isOk && axisLine.length > 0}\n<Axis\n   className=\"mdaplot__yaxis\" pos={4}\n   {lineColor} {gridColor} {textColor}\n   {showGrid} {grid} {axisLine} {tickCoords} {tickLabels} {tfCoords} {tickFactor} {las}\n/>\n{/if}","<script>\n   /****************************************************\n   * Box                                               *\n   * --------------------                              *\n   * shows border box around axes                      *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot;  // slot name, must be \"box\"\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // check that the box is located in a correct slot\n   if (slot !== 'box') {\n      throw('Component Box must have \\'slot=\"box\"\\' attribute.')\n   }\n\n   // box style\n   const rectStyleStr = `fill:transparent;stroke:${Colors.DARKGRAY};stroke-width:1px;`;\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // reactive variables for coordinates of box points in pixels\n   $: xx = $isOk ? axes.transform($xLim, $tX.coords) : undefined;\n   $: yy = $isOk ? axes.transform($yLim, $tY.coords) : undefined;\n\n</script>\n\n{#if $isOk}\n   <g style=\"pointer-events:none\" class=\"mdaplot__axes-box\">\n   <rect x={xx[0]} y={yy[1]} width={xx[1] - xx[0]} height={yy[0] - yy[1]} style={rectStyleStr} />\n   </g>\n{/if}\n\n","<script>\n   /****************************************************\n   * Rectangles                                        *\n   * --------------------                              *\n   * shows series of rectangles                        *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let left;                          // array of vector with coordinates of left sides of the bars\n   export let top;                           // array of vector with coordinates of top sides of the bars\n   export let width;                         // single value (same for all) or vector/array with bar width\n   export let height;                        // single value (same for all) or vector/array with bar height\n   export let faceColor = Colors.PRIMARY;    // color of bar faces (fill)\n   export let borderColor = faceColor;       // color of bar borders\n   export let lineWidth = 1;                 // width (thickness) of bar border lines\n   export let className = 'series_rect';     // CSS class name of the SVG group\n   export let title = '';                    // title of the rectangle series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   let rx, ry, rw, rh = undefined;\n   $: {\n      if ($isOk) {\n         rx = axes.transform(checkCoords(left, 'Rectangles'), $tX.coords);\n         ry = axes.transform(checkCoords(top, 'Rectangles'), $tY.coords);\n\n         if (rx.length !== ry.length) {\n            throw Error('Rectangles: parameters \"left\" and \"top\" must be vectors of the same length.');\n         }\n\n         if (typeof width !== 'object') {\n            width = Vector.fill(width, left.length);\n         }\n\n         if (typeof height !== 'object') {\n            height = Vector.fill(height, left.length);\n         }\n\n         rw = axes.transform(width, $tX.objects);\n         rh = axes.transform(height, $tY.objects);\n      }\n   }\n\n   // styles for bars and labels\n   $: barsStyleStr = `fill:${faceColor};stroke:${borderColor};stroke-width:${lineWidth}px;`;\n</script>\n\n{#if $isOk}\n   <g class=\"series {className}\" title={title} style={barsStyleStr}>\n   {#each left as v, i}\n      <rect x={rx[i]} y={ry[i]} width={rw[i]} height={rh[i]} />\n   {/each}\n   </g>\n{/if}\n\n\n","<script>\n   /****************************************************\n   * Segments                                          *\n   * --------------------                              *\n   * shows series of line segments                     *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xStart;                        // vector or array with x-coordinates of starting points\n   export let xEnd;                          // vector or array with x-coordinates of end points\n   export let yStart;                        // vector or array with y-coordinates of starting points\n   export let yEnd;                          // vector or array with y-coordinates of end points\n   export let lineColor = Colors.PRIMARY;    // color of segment lines\n   export let lineType = 1;                  // type of segment lines (1 - solid, 2 - dashed, 3 - dotted, 4 - dashdot)\n   export let lineWidth = 1;                 // width (thickness) of segment lines\n   export let className = 'series_seg';      // CSS class name of the SVG group\n   export let title = '';                    // title of the segment series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   let x1, x2, y1, y2 = undefined;\n   $: {\n      if ($isOk) {\n\n         x1 = axes.transform(checkCoords(xStart, 'Segments'), $tX.coords);\n         y1 = axes.transform(checkCoords(yStart, 'Segments'), $tY.coords);\n         x2 = axes.transform(checkCoords(xEnd, 'Segments'), $tX.coords);\n         y2 = axes.transform(checkCoords(yEnd, 'Segments'), $tY.coords);\n\n         const n = x1.length;\n         if (x2.length !== n || y1.length !== n || y2.length !== n) {\n            throw Error('Segments: parameters \"xStart\", \"yStart\", \"xEnd\" and \"yEnd\" should have the same length.');\n         }\n      }\n   }\n\n   // reactive variables for coordinates of data points in pixels (and line style)\n   $: lineStyleStr = `stroke:${lineColor};stroke-width: ${lineWidth}px;stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n</script>\n\n{#if $isOk}\n   <g class=\"series {className}\" title={title} style={lineStyleStr}>\n   {#each x1 as v, i}\n      <line x1={x1[i]} x2={x2[i]} y1={y1[i]} y2={y2[i]} />\n   {/each}\n   </g>\n{/if}\n\n","<script>\n   /****************************************************\n   * Points                                            *\n   * --------------------                              *\n   * shows series of points/markers on a plot          *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                          // array of vector with x-coordinates of points\n   export let yValues;                          // array of vector with y-coordinates of points\n   export let marker = 1                        // index for point symbol (from 1 to 8): \"\", \"\", \"\", \"\", \"\", \"\", \"*\", \"\"\n   export let faceColor = 'transparent';        // face (fill) color of the points\n   export let borderColor = Colors.PRIMARY;     // border color of the points\n   export let borderWidth = 1;                  // width (thickness) of the points\n   export let markerSize = 1;                   // size of the marker symbols\n   export let title = '';                       // title of the point series - required for handling mouse click events\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   let x, y, markerSymbol;\n\n   // reactive calculations triggered by changes in coordinates and plot parameters\n   $: if ($isOk) {\n\n      if (typeof(marker) !== \"number\" || marker < 1 || marker > axes.MARKER_SYMBOLS.length) {\n         throw Error(`Points: parameter \"marker\" must be a number from 1 to ${axes.MARKER_SYMBOLS.length}.`);\n      }\n\n      markerSymbol = axes.MARKER_SYMBOLS[marker - 1];\n\n\n      x = axes.transform(checkCoords(xValues, 'Points'), $tX.coords);\n      y = axes.transform(checkCoords(yValues, 'Points'), $tY.coords);\n\n      // sanity check for input parameters\n      if (x.length !== y.length) {\n         throw Error('Points: parameters \"xValues\" and \"yValues\" must be vectors of the same length.')\n      }\n   }\n\n\n   // styles for the elements\n   $: textStyleStr = `dominant-baseline:middle;fill:${faceColor};stroke-width:${borderWidth}px;stroke:${borderColor};\n      font-size:${markerSize}em; text-anchor:middle;cursor:default;user-select:none;`;\n</script>\n\n{#if $isOk && x !== undefined && y !== undefined}\n<g class=\"series series_points\" title={title} style={textStyleStr} >\n   {#each x as v, i}\n      <text x={x[i]} y={y[i]}>{markerSymbol}</text>\n   {/each}\n</g>\n{/if}\n\n<style>\ntext, text > :global(tspan) {\n   dominant-baseline: middle;\n   text-anchor: middle;\n   cursor: default;\n   user-select: none;\n}\n</style>","<script>\n   /****************************************************\n   * Lines                                             *\n   * --------------------                              *\n   * shows lines connected sequence of points          *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { val2p } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                       // vector or array with x-coordinates of the points\n   export let yValues;                       // vector or array with y-coordinates of the points\n   export let lineWidth = 1;                 // width (thickness) of the lines\n   export let lineColor = Colors.PRIMARY;    // color of the lines\n   export let lineType = 1;                  // type of the lines (1 - solid, 2 - dashed, 3 - dotted, 4 - dashdot)\n   export let title = '';                    // title of the bar series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context\n   const axes = getContext('axes');\n\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // compute polynomial coordinates as string\n   $: p = $isOk ? val2p(xValues, yValues, $tX, $tY, axes) : undefined;\n\n   // reactive variables for coordinates of data points in pixels\n   $: lineStyleStr = `fill:transparent;stroke:${lineColor};stroke-width: ${lineWidth}px; stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n</script>\n\n{#if $isOk && p !== undefined}\n   <g class=\"series series_line\" style={lineStyleStr} title={title}>\n      <polyline class=\"line\" points={p}/>\n   </g>\n{/if}\n\n","<script>\n   /*********************************************************\n   * Heatmap                                                *\n   * --------------------                                   *\n   * shows matrix values as a heatmap                       *\n   **********************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector, ismatrix } from 'mdatools/arrays';\n   import { expandgrid } from 'mdatools/misc';\n   import { split } from 'mdatools/stat';\n\n   import { getcolmap } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let values;                        // Matrix with values to show heatmap for\n   export let breaks = null;                 // vector with breaks to distribute the values in\n   export let colmap = null;                 // array with colors for each interval\n\n   export let className = 'series_heatmap';  // CSS class name of the SVG group\n   export let title = '';                    // title of the rectangle series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // check values\n   $: if (!ismatrix(values) || values.v.length === 0) {\n      throw new Error('Heatmap: parameter \"values\" must be a matrix.');\n   }\n\n   // check breaks values\n   $: if (!lBreaks || lBreaks.length < 2) {\n      throw new Error('Heatmap: breaks values are neither defined nor can not be computed.');\n   }\n\n   // check colormap values\n   $: if (!lColmap || lColmap.length !== lBreaks.length - 1) {\n      throw new Error('Heatmap: number of color values in colormap does not match number of intervals defined by breaks.');\n   }\n\n   // define local variables for breaks and colormap\n   $: lBreaks = breaks ? breaks.v : split(values.v, 13).v;\n   $: lColmap = colmap ? colmap : getcolmap(lBreaks.length - 1);\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   // compute combinations of heatmap element positions\n   let top, left;\n   $: {\n      const x = Vector.seq(1, values.ncols);\n      const y = Vector.seq(1, values.nrows);\n      [top, left] = expandgrid(y.v, x.v);\n   }\n\n   // compute screen coordinates of the elements for each interval\n   let rx, ry, rw, rh = undefined;\n   $: {\n      if ($isOk) {\n         rx = [];\n         ry = [];\n         for (let i = 1; i < lBreaks.length; i++) {\n            let lleft = [];\n            let ltop = [];\n            for (let j = 0; j < values.v.length; j++) {\n               const v = values.v[j];\n               if (v > lBreaks[i - 1] && v <= lBreaks[i]) {\n                  lleft.push(left.v[j] - 0.5);\n                  ltop.push(top.v[j] + 0.5);\n               }\n            }\n            rx.push(lleft.length === 0 ? [] : axes.transform(checkCoords(lleft, 'Rectangles'), $tX.coords));\n            ry.push(ltop.length === 0 ? [] : axes.transform(checkCoords(ltop, 'Rectangles'), $tY.coords));\n         };\n\n         rw = axes.transform([1], $tX.objects);\n         rh = axes.transform([1], $tY.objects);\n      }\n   };\n\n</script>\n\n{#if $isOk && rx.length > 0}\n   <g class=\"series {className}\" title={title} style=\"stroke:0;stroke-width:0px;\">\n   <!-- loop over colors/intervals -->\n   {#each lColmap as col, i}\n      <g title=\"heatmap_group\" style=\"fill:{col};\">\n      {#if rx[i].length > 0}\n         <!-- loop over elements which fall into the interval -->\n         {#each rx[i] as v, j}\n            <rect x={rx[i][j]} y={ry[i][j]} width={rw} height={rh} />\n         {/each}\n      {/if}\n      </g>\n   {/each}\n   </g>\n{/if}\n\n\n","<script>\n   /****************************************************\n   * Legend                                            *\n   * --------------------                              *\n   * shows legend for plot components                  *\n   *****************************************************/\n\n   import { mean } from 'mdatools/stat';\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let items;                 // array with text labels for each legend element\n\texport let position = \"topleft\";  // position of the legend (\"topleft\", \"top\", \"topright\", \"right\", \"bottomright\", etc).\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n\n   /**\n    * Computes width of text element for given font.\n    *\n    * @param {string} text - string with text\n    * @param {string} font - font name and size, e.g. '12px Arial'\n    *\n    * @return {number} size of element in pixels\n    */\n   function getTextWidth(text, font) {\n      const element = document.createElement('canvas');\n      const context = element.getContext('2d');\n      context.font = font;\n      return context.measureText(text).width;\n   }\n\n   /**\n    * Compute size of main legend elements.\n    *\n    * @param {Array} items - array of legend items and their properties.\n    * @param {number} fontSize - font size of a legend element.\n    * @param {string} position - position of the legend.\n    *\n    * @return {Array} array with height and width og graphical part of legend item, padding size,\n    * height and width of text labels (all in pixels).\n    */\n   function getLegendSize(items, fontSize, position)  {\n\n      // compute size of graphical elements\n      const elHeight = fontSize;       // height of legend element without padding\n      const elPadding = elHeight / 4;  // top and bottom padding\n      const elWidth = elHeight * 1.5;  // width of legend element without padding\n\n      // compute size of text label elements\n      // TODO: implement one row legend if position is \"top\" or \"bottom\"\n      const lbHeight = elHeight;\n      let lbWidth = 0;\n      for (let i = 0; i < items.length; i++) {\n         const w = getTextWidth('  ' + items[i].label + '  ', fontSize + 'px Arial');\n         lbWidth = w > lbWidth ? w : lbWidth;\n      }\n\n      return [elHeight, elWidth, elPadding, lbHeight, lbWidth];\n   }\n\n   // reactive expression to compute all sizes and coordinates\n   let left, top, elHeight, elWidth, elPadding, lbHeight, lbWidth, legendHeight, legendWidth, fontSize;\n   $: if ($isOk) {\n\n      fontSize = axes.LEGEND_FONT_SIZE[$scale];\n\n      // compute size of elements\n      [elHeight, elWidth, elPadding, lbHeight, lbWidth] = getLegendSize(items, fontSize, position);\n\n      // compute size of whole legend box\n      legendHeight = (elHeight + 2 * elPadding) * items.length;\n      legendWidth = (elWidth + 2 * elPadding + lbWidth);\n\n      // compute coordinates of top left corner of the legend box\n      const xLimPx = axes.transform($xLim, $tX.coords);\n      left = position.includes(\"left\") ? xLimPx[0] + axes.TICK_SIZE[$scale] :\n          position.includes(\"right\") ? xLimPx[1] - legendWidth - axes.TICK_SIZE[$scale] :\n          mean(xLimPx) - legendWidth/2;\n\n      const yLimPx = axes.transform($yLim, $tY.coords);\n      top = position.includes(\"top\") ? yLimPx[1] + axes.TICK_SIZE[$scale] :\n          position.includes(\"bottom\") ? yLimPx[0] - legendHeight - axes.TICK_SIZE[$scale] :\n          mean(yLimPx) - legendHeight/2;\n   }\n</script>\n\n{#if $isOk }\n\n<!-- outer legend box, background and frame -->\n<svg x=\"{left}px\" y=\"{top}px\" height=\"{legendHeight}px\" width=\"{legendWidth}\">\n<rect height=\"100%\" width=\"100%\" style=\"fill:white;stroke:{Colors.MIDDLEGRAY};\"></rect>\n\n{#each items as item, i}\n\n<!-- individual legend item -->\n<svg x=\"{0}px\" y=\"{i * (elHeight + 2 * elPadding)}px\" width=\"{legendWidth}px\" height=\"{elHeight + 2 * elPadding}px\">\n\n   <!-- line -->\n   {#if item.lineType && item.lineType > 0 && item.lineType <= 4}\n   <line x1={elPadding} x2={elPadding + elWidth} y1={(elHeight + elPadding * 2)/2} y2={(elHeight + elPadding * 2)/2} style={`\n      stroke:${item.lineColor ? item.lineColor : Colors.PRIMARY};\n      stroke-width: ${item.lineWidth ? item.lineWidth : 1}px;\n      stroke-dasharray:${axes.LINE_STYLES[$scale][item.lineType - 1]}\n   `}/>\n   {/if}\n\n   <!-- marker -->\n   {#if item.marker && item.marker > 0 && item.marker < axes.MARKER_SYMBOLS.length}\n   <text x=\"{(elWidth + 2 * elPadding)/2}px\" y=\"{(elHeight + 2 * elPadding)/2}px\"\n      dominant-baseline=\"middle\"\n      style={`\n         fill:${item.faceColor ? item.faceColor : \"transparent\"};\n         stroke-width:${item.borderWidth ? item.borderWidth : 1}px;\n         stroke:${item.borderColor ? item.borderColor : Colors.PRIMARY};\n         font-size:${fontSize}px;\n         text-anchor:middle;`}\n   >{axes.MARKER_SYMBOLS[item.marker - 1]}</text>\n   {/if}\n\n\n\n   <!-- text -->\n   <text x=\"{elWidth + elPadding * 3}px\" y=\"{elPadding}px\"\n      dominant-baseline=\"hanging\"\n      style={`text-anchor:start;fill:${Colors.LEGEND};font-size:${fontSize}px`};\n   >{@html '&nbsp;' + item.label}</text>\n\n</svg>\n{/each}\n</svg>\n{/if}\n","<script>\n   /*********************************************************\n   * ColormapLegend                                         *\n   * --------------------                                   *\n   * shows color map legend on a plot                       *\n   **********************************************************/\n\n   import { getContext } from 'svelte';\n   import { checkCoords } from '../Utils';\n   import { Vector, isvector } from 'mdatools/arrays';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let breaks;                  // vector with breaks for color intervals\n   export let colmap;                  // array with colors for each interval\n   export let decNum = 1;              // number of decimals to show the interval boundaries with\n   export let labels = null;           // optional vector with labels for interval boundaries\n   export let labelColor = '#909090';  // color of labels\n   export let fontSize = 0.85;         // font size for labels in em\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // constant parameters\n   const WIDTH_RATIO = 0.80;    // legend will span 80% of plot width\n   const HEIGHT_RATIO = 0.02;   // legend will span 2% of plot height\n   const TOP_MARGIN = 0.25;     // legend top margin is 25% of its height\n\n   // height of the legend elements in pixels\n   const EL_HEIGHTS_PX = {'small': 5, 'medium': 10, 'large': 15, 'xlarge': 20};\n\n   // check breaks values\n   $: if (!breaks || breaks.length < 2) {\n      throw new Error('ColormapLegend: breaks values must be provided.');\n   }\n\n   // check colormap values\n   $: if (!colmap || colmap.length !== breaks.length - 1) {\n      throw new Error('ColormapLegend: number of color values in colormap does not match number of intervals defined by breaks.');\n   }\n\n   // define local variables for breaks and prepare breaks labels\n   $: lBreaks = isvector(breaks) ? breaks.v : breaks;\n   $: lLabels = labels && labels.length === lBreaks.length ?\n         labels :\n         Array.from(lBreaks).map(v => v.toFixed(decNum).toString());\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n\n   // number of elements\n   $: n = colmap.length;\n\n   // compute screen coordinates of the elements\n   let rx, ry, rw, rh = undefined;\n   $: {\n      if ($isOk) {\n         // compute size of the whole block in plot coordinates\n         const axesWidth = $xLim[1] - $xLim[0];\n         const axesHeight = $yLim[1] - $yLim[0];\n         const width = axesWidth * WIDTH_RATIO;\n         const height = axesHeight * HEIGHT_RATIO;\n\n         // compute elements size and position\n         const elWidth = width / n;\n         const left = $xLim[0] + axesWidth * (1 - WIDTH_RATIO) * 0.5 ;\n         const elTop = $yLim[1] - height * TOP_MARGIN;\n\n         // compute screen coordinates and sized\n         ry = axes.transform(checkCoords([elTop], 'Rectangles'), $tY.coords);\n         rx = axes.transform(Vector.seq(0, n).apply(v => left + v * elWidth), $tX.coords);\n         rw = axes.transform([elWidth], $tX.objects);\n         rh = EL_HEIGHTS_PX[$scale];\n      }\n   };\n</script>\n\n{#if $isOk && rx.length > 0}\n   <g class=\"series colormap_legend\" style=\"stroke:0;stroke-width:0px;\">\n   {#each colmap as col, i}\n      <rect x={rx[i]} y={ry} width={rw} height={rh} fill=\"{col}\"/>\n      <text x={rx[i]} y={ry} dx={0} dy={rh * 1.25} alignment-baseline=\"hanging\" fill={labelColor} font-size=\"{fontSize}em\" text-anchor=\"middle\">{@html lLabels[i]}</text>\n   {/each}\n   <text x={rx[n]} y={ry} dx={0} dy={rh * 1.25} alignment-baseline=\"hanging\" fill={labelColor} font-size=\"{fontSize}em\" text-anchor=\"middle\">{@html lLabels[n]}</text>\n   </g>\n{/if}\n\n\n\n","export const ps = {\n   cal: {\n      label: 'cal',\n      marker: 1,\n      borderColor:'white',\n      borderWidth: 0.5,\n      faceColor:'#B0A8A0',\n      lineColor:'#B0A8A0',\n      lineWidth: 1.0\n   },\n   pv: {\n      label: 'cal',\n      marker: 1,\n      borderColor:'#2679B2',\n      borderWidth: 1.5,\n      faceColor:'transparent',\n      lineColor:'#2679B2',\n      lineWidth: 1.25\n   },\n}","<script>\n   /*************************************************************\n   * AppLegend                                                  *\n   * --------------------                                       *\n   * shows legend for cal and pv series                         *\n   **************************************************************/\n\n   import { Legend } from 'svelte-plots-basic/2d';\n   import { ps } from './settings.js';\n\n   export let position = 'topright';\n</script>\n\n<Legend {position} items={[\n   { label: 'cal', marker: ps.cal.marker, borderColor: ps.cal.borderColor, faceColor: ps.cal.faceColor },\n   { label: 'pv',  marker: ps.pv.marker,  borderWidth: ps.pv.borderColor,  borderColor: ps.pv.borderColor }\n]} />\n","<script>\n   /*************************************************************************\n   * BoxplotSeries                                                          *\n   * --------------------                                                   *\n   * Svelte component to show boxes and whiskers for data matrix columns    *\n   **************************************************************************/\n\n   //! TODO: implement outliers detection and visualisation\n\n   import { Vector, ismatrix } from 'mdatools/arrays';\n   import { quantile, min, max } from 'mdatools/stat';\n   import { Colors, Segments, Rectangles } from 'svelte-plots-basic/2d';\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let values;                              // Matrix with values\n   export let borderColor = Colors.PRIMARY;        // color of box borders and whiskers\n   export let faceColor = Colors.PRIMARY_LIGHT;    // color of box face\n\n   // check the inputs\n   $: if (!values || !ismatrix(values) || values.nrows < 3 || values.ncols < 1) {\n      throw new Error('BoxplotSeries: values must be a matrix with at least 3 rows.');\n   }\n\n   // compute coordinatesfor the box and whiskers\n   let left, right, top, bottom, height, width, mn, mx, mid, med;\n   $: {\n      const n = values.ncols;\n\n      left = Vector.zeros(n);\n      right = Vector.zeros(n);\n      width = Vector.fill(0.8, n);\n      top = Vector.zeros(n);\n      bottom = Vector.zeros(n);\n      height = Vector.zeros(n);\n      mn = Vector.zeros(n);\n      mx = Vector.zeros(n);\n      mid = Vector.zeros(n);\n      med = Vector.zeros(n);\n\n      for (let i = 1; i <= values.ncols; i++) {\n         const v = values.getcolref(i);\n         left.v[i - 1] = i - 0.4;\n         mid.v[i - 1] = i;\n         right.v[i - 1] = i + 0.4;\n\n         const q = quantile(v, [0.25, 0.50, 0.75]);\n         top.v[i - 1] = q.v[2];\n         bottom.v[i - 1] = q.v[0];\n         height.v[i - 1] = q.v[2] - q.v[0];\n         med.v[i - 1] = q.v[1];\n         mn.v[i - 1] = min(v);\n         mx.v[i - 1] = max(v);\n      }\n   }\n</script>\n\n{#if values }\n   <Rectangles {left} {top} {width} {height} {borderColor} {faceColor} />\n   <Segments xStart={mid} yStart={top} xEnd={mid} yEnd={mx} lineColor={borderColor}/>\n   <Segments xStart={mid} yStart={bottom} xEnd={mid} yEnd={mn} lineColor={borderColor}/>\n   <Segments xStart={left} yStart={med} xEnd={right} yEnd={med} lineColor={borderColor}/>\n{/if}\n\n\n","<script>\n   /*************************************************************\n   * Point series for any set                                   *\n   **************************************************************/\n\n   import { Points, Lines } from 'svelte-plots-basic/2d';\n   import { ps } from './settings.js';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let type = \"p\";  // plot type\n   export let values;      // JSON with x and y-values\n</script>\n\n{#if values }\n\n   {#if type == \"l\" || type == \"b\"}\n   <Lines xValues={values.x} yValues={values.y} lineWidth={ps[values.id].lineWidth} lineColor={ps[values.id].lineColor} />\n   {/if}\n\n   {#if type == \"p\" || type == \"b\"}\n   <Points xValues={values.x} yValues={values.y} marker={ps[values.id].marker} borderWidth={ps[values.id].borderWidth}\n      faceColor={ps[values.id].faceColor} borderColor={ps[values.id].borderColor}/>\n   {/if}\n\n{/if}\n\n","<script>\n   /*************************************************************\n   * DistancePlot                                               *\n   * --------------------                                       *\n   * shows plot with score and orthogonal distances             *\n   **************************************************************/\n\n   import { Vector } from 'mdatools/arrays';\n   import { max } from 'mdatools/stat';\n   import { Axes, XAxis, YAxis, Box } from 'svelte-plots-basic/2d';\n\n   import { pcamodel_get, pcares_get } from '../wasm/pcvpca';\n\n   import PlotSeries from './PlotSeries.svelte';\n   import AppLegend from './AppLegend.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let model;                           // PCA model object\n   export let res;                             // JSON with results\n   export let params;                          // JSON with main plot parameters\n\n   // constant parameters\n   const margins = [0.65, 0.75, 0.1, 0.5];\n   const showGrid = true;\n   const xLabel = 'Score distance, h/h0';\n   const yLabel = 'Orthogonal distance, q/q0';\n\n   function getDistanceValues(id, res, u0, params) {\n      if (!params || !params.ncomp) return null;\n      const h = new Vector(pcares_get(res, \"hdist\", params.ncomp));\n      const q = new Vector(pcares_get(res, \"qdist\", params.ncomp));\n      return { id: id, x: h.apply(v => v / u0.h[params.ncomp - 1]), y: q.apply(v => v / u0.q[params.ncomp - 1]) };\n   }\n\n   function getDistanceParams(model) {\n      if (!model) return null;\n      const h = pcamodel_get(model, \"hmean\");\n      const q = pcamodel_get(model, \"qmean\");\n      return { h, q };\n   }\n\n   $: title = params && params.ncomp ? 'Distance plot (A = ' + params.ncomp + ')' : '';\n\n   $: u0 = getDistanceParams(model);\n   $: ps = params && res ? Object.keys(res).map(id => getDistanceValues(id, res[id], u0, params)) : null;\n\n   $: limX = ps ? [0, 1.2 * max(Object.keys(ps).map(id => max(ps[id].x.v)))] : [0, 1];\n   $: limY = ps ? [0, 1.2 * max(Object.keys(ps).map(id => max(ps[id].y.v)))] : [0, 1];\n</script>\n\n{#if params }\n<Axes {margins} {xLabel} {yLabel} {limX} {limY} {title} >\n\n   {#each ps as series}\n   <PlotSeries values={series} type=\"p\" />\n   {/each}\n\n   <AppLegend />\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}\n\n","<script>\n   /**************************************************************/\n   /* Svelte component for DistancePlot settings                 */\n   /**************************************************************/\n\n   import {  Container, CompSelector } from '../controls';\n\n   export let model;\n   export let params;\n   export let res;\n\n   let ncomp = 1;\n\n   $: params = {\n      ncomp\n   }\n</script>\n\n<Container label=\"\">\n<p class=\"title\">Distances</p>\n</Container>\n\n{#if model && res}\n<CompSelector bind:value={ncomp} label=\"# LVs\" {model} />\n{/if}\n","<script>\n   /*********************************************************\n   * ScoresPlot                                             *\n   * --------------------                                   *\n   * shows plot for PCA scores                              *\n   **********************************************************/\n\n   import { mrange, range } from 'mdatools/stat';\n   import { Vector } from 'mdatools/arrays';\n   import { Axes, XAxis, YAxis, Segments, Box } from 'svelte-plots-basic/2d';\n   import { pcares_get } from '../wasm/pcvpca';\n\n   import PlotSeries from './PlotSeries.svelte';\n   import AppLegend from './AppLegend.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let model;                // PCA model object\n   export let params;               // JSON with main plot parameters\n   export let res;                  // JSON with results\n\n   const title = 'Scores (X)';\n   const margins = [0.75, 1.0, 0.1, 0.5];\n   const showGrid = true;\n\n   function get_series(id, res, params) {\n      return {\n         id: id,\n         x: new Vector(pcares_get(res, 'scores', params.comp[0])),\n         y: new Vector(pcares_get(res, 'scores', params.comp[1]))\n      };\n   }\n\n   // get score values\n   $: ps = params && res ? Object.keys(res).map(id => get_series(id, res[id], params)) : null;\n\n   // set axis labels\n   $: xLabel = params && params.comp ? 'LV' + params.comp[0] : '';\n   $: yLabel = params && params.comp ? 'LV' + params.comp[1] : '';\n\n   // set limits\n   $: limX = ps ? range(...Object.keys(ps).map(id => mrange(ps[id].x.v))) : [0, 1];\n   $: limY = ps ? range(...Object.keys(ps).map(id => mrange(ps[id].y.v))) : [0, 1];\n</script>\n\n{#if params && model }\n<Axes {margins} {xLabel} {yLabel} {limX} {limY} {title} >\n\n   <Segments xStart={[limX[0]]} xEnd={[limX[1]]} yStart={[0]} yEnd={[0]} lineColor='#a0a0a0'/>\n   <Segments yStart={[limY[0]]} yEnd={[limY[1]]} xStart={[0]} xEnd={[0]} lineColor='#a0a0a0'/>\n\n   {#each ps as series}\n   <PlotSeries values={series} type=\"p\" />\n   {/each}\n\n   <AppLegend />\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /**************************************************************/\n   /* Svelte component for ScoresPlot settings                   */\n   /**************************************************************/\n\n   import { Container, CompSelector } from '../controls';\n\n   export let params;\n   export let model;\n   export let res;\n\n   let comp1 = 1;\n   let comp2 = model.ncomp > 1 ? 2 : 1;\n\n   $: params = {\n      'comp': [comp1, comp2],\n   }\n</script>\n\n<Container label=\"\">\n<p class=\"title\">Scores</p>\n</Container>\n\n{#if model && res}\n<CompSelector bind:value={comp1} label='LV for x-axis' {model} />\n<CompSelector bind:value={comp2} label='LV for y-axis' {model} />\n{/if}\n\n","<script>\n   /*********************************************************\n   * VariancePlot                                           *\n   * --------------------                                   *\n   * shows plot for explained variance                      *\n   **********************************************************/\n\n   import { diff } from 'mdatools/stat';\n   import { Vector } from 'mdatools/arrays';\n   import { Axes, XAxis, YAxis, Box } from 'svelte-plots-basic/2d';\n\n   import { pcares_get } from '../wasm/pcvpca';\n\n   import PlotSeries from './PlotSeries.svelte';\n   import AppLegend from './AppLegend.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let model;                // PCA model object\n   export let params;               // JSON with main plot parameters\n   export let res;                  // JSON with results onkects\n\n   // constant parameters\n   const margins = [0.75, 1, 0.1, 0.5];\n   const showGrid = true;\n   const xLabel = \"LVs\";\n   const yLabel = \"Relative variance\";\n\n   // compute and return explaned variance\n   function get_series(res, params) {\n      const cumexpvar = new Vector(pcares_get(res, \"cumexpvar\"));\n      if (params.vartype == \"cumexpvar\") return cumexpvar;\n\n      const out = Vector.zeros(res.ncomp);\n      out.v[0] = cumexpvar.v[0];\n      out.v.set(diff(cumexpvar.v).v, 1);\n      return out;\n   }\n\n   // set titles\n   $: title = params && params.vartype == \"expvar\" ? \"Explained variance\" : \"Cumulative explained variance\";\n\n   // get values\n   $: x = Vector.seq(1, model.ncomp);\n   $: ps = res && params ? Object.keys(res).map(id => ({'id': id, 'x': x, 'y': get_series(res[id], params)})) : null;\n\n   // set limits\n   $: limX = model ? [0.5, model.ncomp + +.5] : [0, 1];\n   $: limY = [-0.05, 1.1];\n</script>\n\n{#if ps && ps.length > 0}\n<Axes {margins} {xLabel} {yLabel} {limX} {limY} {title} >\n\n   {#each ps as series}\n   <PlotSeries values={series} type=\"b\" />\n   {/each}\n\n   <AppLegend position={params.vartype === \"cumexpvar\" ? \"bottomright\" : \"topright\"}/>\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /**************************************************************/\n   /* Svelte component for VariancePlot settings                 */\n   /**************************************************************/\n\n   import { Container, Select } from '../controls';\n\n   export let params;\n   export let model;\n   export let res;\n\n   let vartype = 'expvar';\n   $: params = {\n      vartype: vartype\n   }\n\n</script>\n\n<Container label=\"\">\n<p class=\"title\">Variance</p>\n</Container>\n\n{#if model && res}\n<Container label=\"Type\">\n<Select id=\"variance\" bind:value={vartype} options={[\"expvar\", \"cumexpvar\"]} />\n</Container>\n{/if}\n","<script>\n   /*********************************************************\n   * PredictionsPlot                                        *\n   * --------------------                                   *\n   * shows plot for regression predictions                  *\n   **********************************************************/\n\n   import { min, max, mrange } from 'mdatools/stat';\n   import { c, Vector } from 'mdatools/arrays';\n   import { Axes, XAxis, YAxis, Box, Segments } from 'svelte-plots-basic/2d';\n   import { plsres_get } from '../wasm/pcvpls';\n\n   import PlotSeries from './PlotSeries.svelte';\n   import AppLegend from './AppLegend.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n   export let model;                // PCA model object\n   export let params;               // JSON with main plot parameters\n   export let res;                  // JSON with results\n   export let ny = 1;               // number of response to show RMSE for (reserved for future)\n\n   const margins = [0.75, 1.0, 0.1, 0.5];\n   const showGrid = true;\n   const xLabel = 'Response values (y), reference';\n   const yLabel = 'Response values (y), predicted';\n\n   function get_series(id, res, params) {\n      const x = new Vector(res.Yref.getcolref(ny));\n      const y = new Vector(plsres_get(res, 'Yp', params.ncomp, ny));\n      const v = c(x, y);\n      return {\n         id: id,\n         x: x,\n         y: y,\n         min: min(v),\n         max: max(v)\n      };\n   }\n\n   // get score values\n   $: ps = params && res ? Object.keys(res).map(id => get_series(id, res[id], params)) : null;\n\n   // set axis labels\n   $: title = params ? 'Predictions (A = ' + params.ncomp + ')' : '';\n\n   // set limits\n   $: lim = ps ? mrange([...Object.keys(ps).map(id => ps[id].min), ...Object.keys(ps).map(id => ps[id].max)], 0.1) : [0, 1];\n</script>\n\n{#if params && model }\n<Axes {margins} {xLabel} {yLabel} limX={lim} limY={lim} {title}>\n\n   <Segments xStart={[lim[0]]} yStart={[lim[0]]} xEnd={[lim[1]]} yEnd={[lim[1]]} lineColor=\"#e0e0e0\"/>\n\n   {#each ps as series}\n   <PlotSeries values={series} type=\"p\" />\n   {/each}\n\n   <AppLegend position=\"bottomright\" />\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /**************************************************************/\n   /* Svelte component for ScoresPlot settings                   */\n   /**************************************************************/\n\n   import { Container, CompSelector } from '../controls';\n\n   export let params;\n   export let model;\n   export let res;\n\n   let ncomp = 1;\n\n   $: params = {\n      'ncomp': ncomp,\n   }\n</script>\n\n<Container label=\"\">\n<p class=\"title\">Predictions</p>\n</Container>\n\n{#if model && res}\n<CompSelector bind:value={ncomp} label='# LVs' {model} />\n{/if}\n\n","<script>\n   /*********************************************************\n   * RMSEPlot                                               *\n   * --------------------                                   *\n   * shows plot for RMSE values                             *\n   **********************************************************/\n\n   import { max } from 'mdatools/stat';\n   import { Vector } from 'mdatools/arrays';\n   import { Axes, XAxis, YAxis, Box } from 'svelte-plots-basic/2d';\n\n   import PlotSeries from './PlotSeries.svelte';\n   import AppLegend from './AppLegend.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let model;                // PCA model object\n   export let params;               // JSON with main plot parameters\n   export let res;                  // JSON with results onkects\n   export let ny = 1;               // number of response to show RMSE for (reserved for future)\n\n   // constant parameters\n   const margins = [0.75, 1, 0.1, 0.5];\n   const showGrid = true;\n   const xLabel = \"LVs\";\n   const yLabel = \"RMSE\";\n   const title = \"RMSE\";\n\n   // compute and return explaned variance\n   function get_series(id, x, res) {\n      if (!res || !id || !x) return null;\n      return {'id': id, 'x': x, 'y': new Vector(res.stat.RMSE.getcolref(ny))};\n   }\n\n\n   // get values\n   $: x = model ? Vector.seq(1, model.ncomp) : null;\n   $: ps = res ? Object.keys(res).map(id => get_series(id, x, res[id])) : null;\n\n   // set limits\n   $: limX = model ? [0.5, model.ncomp + +.5] : [0, 1];\n   $: limY = ps ? [0, 1.1 * max(Object.keys(ps).map(name => max(ps[name].y.v)))] : [0, 1];\n</script>\n\n{#if params && ps}\n<Axes {margins} {xLabel} {yLabel} {limX} {limY} {title} >\n\n   {#each ps as series}\n   <PlotSeries values={series} type=\"b\" />\n   {/each}\n\n   <AppLegend position={params.vartype === \"cumexpvar\" ? \"bottomright\" : \"topright\"}/>\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /**************************************************************/\n   /* Svelte component for RMSEPlot settings                     */\n   /**************************************************************/\n\n   import { Container } from '../controls';\n\n   export let params;\n   export let model;\n   export let res;\n\n   $: params = {}\n</script>\n\n{#if model && res && params}\n<Container label=\"\">\n<p class=\"title\">RMSE</p>\n</Container>\n{/if}\n\n","<script>\n   /*********************************************************\n   * ScalarsPlot                                            *\n   * --------------------                                   *\n   * shows plot for c_k/c scalars from PCV methods          *\n   **********************************************************/\n\n   import { Vector, vector, c } from 'mdatools/arrays';\n   import { mrange } from 'mdatools/stat';\n\n   import { Axes, XAxis, YAxis, Heatmap, ColormapLegend, Segments, Box } from 'svelte-plots-basic/2d';\n   import BoxplotSeries from './BoxplotSeries.svelte';\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let scalars;                // PCA model object\n   export let params;\n\n   function getTicks(n, max) {\n      const v = Vector.seq(1, n);\n      const vFactor = Math.ceil(n / max);\n      return n <= 20 ? v : v.filter(val => val % vFactor == 0);\n   }\n\n   const title = 'Scalars';\n   const margins = [0.75, 1.0, 0.1, 0.5];\n   const xLabel = 'LV, a';\n\n   const breaks = [-99999, -2, -1, 0, 0.2, 0.5, 0.8, 1.2, 1.5, 1.8, 2.0, 2.5, 3.0, 99999];\n   const colmap = [\n      '#6200DF', // < -2\n      '#6923FF', // -2.00 to -1.00\n      '#648FFF', // -1.00 to  0.00\n      '#8CCDFD', //  0.00 to  0.25\n      '#D2ECFF', //  0.25 to  0.50\n      '#E8F5FF', //  0.50 to  0.75\n      '#fefeff', //  0.75 to  1.25\n      '#FFF5E5', //  1.25 to  1.50\n      '#FFE5BE', //  1.50 to  1.75\n      '#FFCE85', //  1.75 to  2.00\n      '#FFA34E', //  2.00 to  2.50\n      '#FF8024', //  2.50 to  3.00\n      '#CF5903'  //  > 3.0\n   ];\n\n   // compute axis labels\n   $: yLabel = params && params.plotType === 'hm' ? 'Segment, k' : 'Scalars, c<sub>k</sub>/c';\n\n   // compute labels for colormap\n   const clLabels = breaks.map(v => v.toFixed(1));\n   clLabels[0] = '&minus;&infin;';\n   clLabels[clLabels.length - 1] = '&infin;';\n\n   // compute factors for axis ticks\n   $: xTicks = getTicks(scalars.ncols, 20);\n   $: yTicks = getTicks(scalars.nrows, 10);\n\n   // compute limits\n   $: limX = [0.25, scalars.ncols + 0.75];\n   $: limY = params && params.plotType === 'hm' ? [0.25, scalars.nrows * 1.15 + 0.25] : mrange(scalars.v, 0.1);\n</script>\n\n{#if scalars && params}\n   {#if params.plotType === 'hm'}\n   <Axes {margins} {xLabel} {yLabel} {title} {limX} {limY} >\n      <Heatmap values={scalars} breaks={vector(breaks)} {colmap} />\n      <ColormapLegend breaks={vector(breaks)} labels={clLabels} {colmap} fontSize={0.95} />\n      <XAxis slot=\"xaxis\" ticks={xTicks} />\n      <YAxis slot=\"yaxis\" ticks={yTicks} />\n      <Box slot=\"box\" />\n   </Axes>\n   {:else}\n   <Axes {margins} {xLabel} {yLabel} {title} {limX} limY={[Math.min(-0.1, limY[0]), Math.max(2.0, limY[1])]} >\n      <Segments xStart={[limX[0]]} yStart={[1]} xEnd={[limX[1]]} yEnd={[1]} lineColor=\"#d0d0d0\" />\n      <BoxplotSeries values={scalars} />\n      <XAxis slot=\"xaxis\" showGrid={true} ticks={xTicks} />\n      <YAxis slot=\"yaxis\" showGrid={true} />\n      <Box slot=\"box\" />\n   </Axes>\n   {/if}\n{/if}\n\n\n","<script>\n   /**************************************************************/\n   /* Svelte component for ScoresPlot settings                   */\n   /**************************************************************/\n\n   import { Container, PlotTypeSelector } from '../controls';\n   export let params;\n   export let model;\n   export let res;\n\n   const plotTypeOptions = ['hm', 'bp'];\n   let plotType = 'hm';\n\n   $: params = {\n      'plotType': plotType,\n   }\n\n\n</script>\n\n{#if params && model && res}\n<Container label=\"\">\n<p class=\"title\">Scalars</p>\n</Container>\n\n<PlotTypeSelector {plotTypeOptions} bind:value={plotType} />\n{/if}\n","<script>\n   /*************************************************************/\n   /* Svelte component for showing app plots                    */\n   /*************************************************************/\n\n   // import plot and plot controls components\n   import { DistancePlot, DistancePlotControls } from './plots';\n   import { ScoresPlot, ScoresPlotControls } from './plots';\n   import { VariancePlot, VariancePlotControls } from './plots';\n   import { RMSEPlot, RMSEPlotControls } from './plots';\n   import { PredictionsPlot, PredictionsPlotControls } from './plots';\n   import { ScalarsPlot, ScalarsPlotControls } from './plots';\n\n   // Input parameters\n   export let model;\n   export let res;\n   export let scalars;\n\n   // selected plot number and its parameters\n   let selected_plot = 0;\n   let params = null;\n\n   // array with list of plots and their components\n   const options = [\n      {label: 'Scalars', plotComponent: ScalarsPlot, controlsComponent: ScalarsPlotControls},\n      {label: 'RMSE', plotComponent: RMSEPlot, controlsComponent: RMSEPlotControls},\n      {label: 'Predictions', plotComponent: PredictionsPlot, controlsComponent: PredictionsPlotControls},\n      {label: 'Variance', plotComponent: VariancePlot, controlsComponent: VariancePlotControls},\n      {label: 'Scores', plotComponent: ScoresPlot, controlsComponent: ScoresPlotControls},\n      {label: 'Distance', plotComponent: DistancePlot, controlsComponent: DistancePlotControls}\n   ]\n\n   // function to switch between plots\n   function switchPlot(i) {\n      params = null;\n      selected_plot = i;\n   }\n</script>\n\n<div class=\"plot-container\">\n\n   <!-- column with current plot -->\n   <div class=\"plot-area\">\n      {#if options[selected_plot].label === 'Scalars'}\n      <svelte:component this={options[selected_plot].plotComponent} {scalars} {params}  />\n      {:else}\n      <svelte:component this={options[selected_plot].plotComponent} {model} {res} {params}  />\n      {/if}\n   </div>\n\n   <!-- column with plot selectors and current plot settings -->\n   <div class=\"plot-controls-area\">\n      {#each options as {label, plotComponent, controlsComponent}, i}\n         {#if selected_plot === i}\n         <svelte:component this={controlsComponent} bind:params={params} {model} {res} />\n         {:else}\n         <button class=\"plot-selector\" on:keydown={() => switchPlot(i)} on:click={() => switchPlot(i)}>{label}</button>\n         {/if}\n      {/each}\n   </div>\n\n</div>\n\n\n<style>\n   .plot-container {\n      width: 100%;\n      height: 100%;\n      box-sizing: border-box;\n      padding: 0;\n      display: grid;\n      grid-template-rows: 1fr;\n      grid-template-columns: 1fr minmax(270px, 30%);\n   }\n\n   .plot-area {\n      padding: 1em;\n      margin-top: 0.25rem;\n      border-radius: 0.25em;\n      background: #fefefe;\n   }\n\n   .plot-controls-area {\n      padding: 0 0.25em 0 0.5em;\n   }\n\n   .plot-selector {\n      cursor: pointer;\n      color: #606060;\n      background: #fffef480;\n      box-sizing: border-box;\n      padding: 0.5em 1em;\n      margin: 0.25em 0;\n      border-radius: 0.25rem;\n      box-shadow: none;\n      border: none;\n      width: 100%;\n      text-align: left;\n      font-size: 1rem;\n   }\n\n   .plot-selector:hover {\n      background: #e0e0e0;\n      color: #403020;\n   }\n\n   @media(min-width:1100px) {\n      .plot-container {\n         grid-template-columns: 1fr minmax(285px, 30%);\n      }\n   }\n\n   @media(min-width:1300px) {\n      .plot-container {\n         grid-template-columns: 1fr minmax(300px, 30%);\n      }\n   }\n\n</style>","<script>\n   /***********************************************/\n   /* Svelte component with main app container    */\n   /***********************************************/\n\n   import DataLoader from './DataLoader.svelte';\n   import PCVCalculator from './PCVCalculator.svelte';\n   import ModelCalculator from './ModelCalculator.svelte';\n   import AppPlots from './AppPlots.svelte';\n\n   let dataset = null;  // calibration set\n   let pvset = null;    // computed PV-set\n   let model = null;    // global PLS model\n   let calres = null;   // calibration results\n   let pvres = null;    // PV-set results\n   let scalars = null;  // matrix with c_k/c scalars (D)\n\n   // combine both results to one object\n   $: res = {cal: calres, pv: pvres};\n</script>\n\n<div class=\"app-container\">\n\n   <!-- left column with main app controls -->\n   <div class=\"app-controls\">\n      <div class=\"data-loader\">\n         <DataLoader bind:dataset={dataset} />\n      </div>\n      <div class=\"model-calculator\">\n         <ModelCalculator {dataset} bind:model={model} bind:calres={calres} />\n      </div>\n      <div class=\"pcv-calculator\">\n         <PCVCalculator {dataset} {model} bind:pvset={pvset} bind:pvres={pvres} bind:scalars={scalars}/>\n      </div>\n   </div>\n\n   <!-- right column with help text or with plots and plot controls -->\n   <div class=\"app-content\">\n      {#if !pvset || !pvres}\n         <div class=\"help-text\">\n         {#if dataset === null}\n            <p><strong>Step 1.</strong></p>\n            <p>\n               Load your calibration set from a CSV file. The file should contain numeric values delimited\n               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns  to variables. First row can contain variable names (header) and first column can contain labels for the objects/observations  just set the corresponding options after selecting\n               the file.\n            </p><p>\n               For PLS version you must provide both predictors (X) and response (Y). The response values must be located in the first column in the CSV file. If first column contains row labels, then the next column will be treated as response.\n            </p>\n         {:else}\n            {#if model === null}\n            <p><strong>Step 2</strong></p>\n            <p>\n               Next step is to create a global PLS model for the training set. Use more components/latent variables\n               than you expect to be optimal.\n            </p>\n            {/if}\n\n            {#if model !== null && pvset === null}\n            <p><strong>Step 3</strong></p>\n            <p>\n               Now set necessary parameters for Procrustes cross-validation method and click button to compute the PV-set. The parameters are the same as you use for cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5). The more segment you use the more time it will take to compute the PV-set.\n            </p>\n            {/if}\n         {/if}\n         </div>\n      {:else}\n         {#key pvres}\n         <AppPlots {model} {res} {scalars} />\n         {/key}\n      {/if}\n   </div>\n</div>\n\n<style>\n\n   .app-container {\n      font-family: Helvetica, Arial, sans-serif;\n      font-size: 1rem;\n      color: #404040;\n      box-sizing: border-box;\n      margin: 0 auto;\n      padding: 0.35em 0.25em;\n      width: 100%;\n      height: 100%;\n      display: grid;\n      grid-template-areas: \"controls content\";\n      grid-template-rows: 100%;\n      grid-template-columns: min(310px, 30%) 1fr;\n   }\n\n   .app-controls {\n      box-sizing: border-box;\n      padding: 0.25em 0.5em;\n   }\n\n   .app-content {\n      box-sizing: border-box;\n      padding: 0 1em 0 0.5em;\n      padding: 0.25em 0.25em;\n   }\n\n   .app-controls > div {\n      background: #e8e8e8;\n      border-radius: 0.5rem;\n   }\n\n   .help-text {\n      margin-top: 0.25rem;\n   }\n\n   .help-text > p {\n      background: #fafafa;\n      padding: 0em 1.5em 0.5em 1.5em;\n      color: #606060;\n      line-height: 1.5em;\n      margin: 0 1em 0 0;\n   }\n\n   .help-text > p:first-child {\n      border-top-left-radius: 0.25rem;\n      border-top-right-radius: 0.25rem;\n      padding-top: 1.5em;\n   }\n\n   .help-text > p:last-child {\n      border-bottom-left-radius: 0.25rem;\n      border-bottom-right-radius: 0.25rem;\n      padding-bottom: 1.5em;\n   }\n\n   @media(min-width:1300px) {\n      .app-container {\n         grid-template-columns: min(340px, 30%) 1fr;\n      }\n   }\n\n   @media(min-width:1100px) {\n      .app-container {\n         grid-template-columns: min(320px, 30%) 1fr;\n      }\n   }\n\n</style>","<script>\n   /*************************************************************/\n   /* Root component for the application                        */\n   /*************************************************************/\n\n   import AppContainer from './AppContainer.svelte';\n</script>\n\n<div class=\"page\">\n\n   <header>\n      <div class=\"header-group\">\n         <img class=\"logo\" alt=\"PCV logo\" src=\"logo.svg\" />\n         <h1>Procrustes cross-validation (PLS based)</h1>\n         <p>Create a validation set in your browser</p>\n      </div>\n   </header>\n\n   <main>\n      <AppContainer />\n   </main>\n\n   <footer>\n      <p>More details: <a class=\"github-link\" href=\"https://github.com/svkucheryavski/pcv/\">svkucheryavski/pcv</a></p>\n      <p>Theory and citation reference: <a class=\"paper-link\" href=\"https://doi.org/10.1016/j.aca.2023.341096\">10.1016/j.aca.2023.341096</a></p>\n   </footer>\n</div>\n\n<style>\n   .page {\n      width: 100%;\n      height: 100%;\n      margin: 0;\n      padding: 0;\n\n      min-width: 1020px;\n      min-height: 590px;\n\n      display: flex;\n      flex-direction: column;\n   }\n\n   .page > header{\n      flex-basis: min-content;\n      flex-shrink: 0;\n      flex-grow: 0;\n      text-align: center;\n      background: #f8f6f4;\n   }\n\n   .header-group {\n      width: max-content;\n      margin: 0 auto;\n      display: grid;\n      align-items: center;\n      grid-template-columns: min-content 1fr;\n      grid-template-rows: min-content min-content min-content min-content;\n      grid-template-areas:\n         \"logo .\"\n         \"logo title\"\n         \"logo subtitle\"\n         \"logo .\";\n   }\n\n   .logo{\n      width: 5rem;\n      margin: 0.25rem;\n      grid-area: logo;\n   }\n\n   .header-group > h1{\n      margin: 0;\n      padding: 0;\n      text-align: left;\n      font-size: 1.6rem;\n      color: #4e5052;\n      white-space: nowrap;\n      grid-area: title;\n   }\n\n   .header-group > p{\n      margin: 0;\n      padding: 0;\n      text-align: left;\n      font-size: 1.1rem;\n      color: #7e8082;\n      grid-area: subtitle;\n   }\n\n   .page > main{\n      flex-basis: auto;\n      flex-grow: 1;\n      flex-shrink: 1;\n      box-sizing: border-box;\n      padding: 0.2rem 0rem;\n   }\n\n   .page > footer {\n      font-size: 0.9rem;\n      flex-basis: min-content;\n      flex-grow: 0;\n      flex-shrink: 0;\n      background: #4e5052;\n      color: #c0c0c0;\n      padding: 0.5em;\n   }\n\n   .page > footer  p {\n      max-width: 500px;\n      text-align: center;\n      margin: 0 auto;\n      padding: 0.15em;\n   }\n\n   .page > footer  a {\n      color: #f8ebc5\n   }\n\n   .page > footer  a.github-link {\n      display: inline-block;\n      padding-left: 1.3em;\n      margin-left: 0.2em;\n      background-size: 1em;\n      background-repeat: no-repeat;\n      background-image: url(\"data:image/svg+xml;utf8,<svg width='98' height='96' fill='%23f8ebc5' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' clip-rule='evenodd' d='M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z'/></svg>\");\n   }\n</style>","import MainApp from './MainApp.svelte';\n\nconst app = new MainApp({\n\ttarget: document.body,\n});\n\nexport default app;","export default {}"],"names":["noop","assign","tar","src","k","is_promise","value","run","fn","blank_object","run_all","fns","is_function","thing","safe_not_equal","a","b","is_empty","obj","subscribe","store","callbacks","callback","unsub","component_subscribe","component","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","get_slot_changes","dirty","lets","merged","len","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","length","i","append","target","node","insert","anchor","detach","destroy_each","iterations","detaching","element","name","svg_element","text","data","space","empty","listen","event","handler","options","prevent_default","attr","attribute","children","set_data","set_input_value","input","set_style","key","important","toggle_class","toggle","custom_event","type","detail","bubbles","cancelable","HtmlTag","is_svg","__publicField","html","construct_svelte_component","props","current_component","set_current_component","get_current_component","onMount","onDestroy","createEventDispatcher","setContext","context","getContext","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","flush","add_render_callback","add_flush_callback","seen_callbacks","flushidx","saved_component","update","$$","flush_render_callbacks","filtered","targets","c","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","handle_promise","promise","info","token","index","child_ctx","needs_flush","error","update_await_block_branch","resolved","ensure_array_like","array_like_or_iterator","destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","next","get_context","o","n","old_indexes","new_blocks","new_lookup","deltas","updates","will_move","did_move","new_block","old_block","new_key","old_key","bind","create_component","mount_component","fragment","after_update","new_on_destroy","destroy_component","make_dirty","init","instance","create_fragment","not_equal","append_styles","parent_component","ready","ret","rest","nodes","SvelteComponent","PUBLIC_VERSION","quantile","x","p","isvector","isnumber","min","max","q","h","n1","n2","xs","_sort","out","v","vector","split","rn","range","by","Vector","diff","mrange","m","r","d","ssq","ssqv","sd","biased","variance","mean","s","sum","prod","isindex","minind","outind","maxind","expandgrid","args","nargs","orep","grid","repFac","nx","Index","runif","rnorm","mu","sigma","qr","X","res","crossprod","Q","Matrix","Rt","j","rc","qc","temp","rot","ind","f","g","t","t1","Y","ismatrix","nrx","ncx","nry","ncy","nrows","ncols","ninner","yc","outc","xr","cbind","acc","cur","start","l","reshape","nrow","ncol","_Matrix","values","I","Yt","Xt","xc","ncols_out","nrows_out","outx","_dot","fun","dims","_opvv","_opvn","rind","cind","ic","cv","ir","xc_out","ndec","leftpad","ndigits","str","sep","dec","header","labels","hasLabels","hasHeader","rows","y","yv","strData","hasNaN","vec","startRow","firstRow","startColumn","rowValuesAll","rowValues","_Vector","_shuffle","decreasing","_sortind","_rep","_repeach","end","_seq","_Index","classRef","v1","v2","xv","yci","span","button","title","$$props","create_if_block","div","label","status","t_value","if_block0","create_if_block_1","if_block1","div1","div0","id","decNum","step","dispatch","sliderElement","sliderContainer","isDragging","computeValue","tmpValue","getRelativePosition","e","sliderRect","parentRect","minX","maxX","startChanging","width","cancelChanging","stopChanging","changingByWheel","newValue","$$invalidate","changing","changingByKeys","$$value","html_tag","raw_value","className","changeOption","click_handler","option","plotTypeOptions","value$1","range_changes","model","t0","t0_value","file","fileInput","changeStatus","previous_key","create_if_block_2","t3_value","t1_value","current","t3","t5","t5_value","dataset","dataFile","firstColumn","errMsg","sepOptions","firstRowOptions","firstColumnOptions","setData","readFile","reader","reset","scale","center","full","getStat","param","alt","centerValues","scaleValues","Xp","xpc","sv","splitregdata","pca_getreslength","ncomp","pca_getmodellength","pcamodel_get","offset","pcares_get","get_regstat","nresp","yp_offset","yp_length","Yp","RMSE","R2","ssy","iy","Ypa","E","rmsea","r2a","sse","get_yscores","mY","plsmodel_get","sY","prep_scale","c_offset","c_length","C","t_offset","t_length","T","U","ua","Ta","uao","pls_getreslength","pls_getmodellength","plsres_get","ny","pls_fit","Module","x_ptr","y_ptr","m_length","m_constructor","m_ptr","pls_predict","r_length","r_constructor","r_ptr","res_values","pcvpls","cv_nseg","cv_type","cv_scope","max_ncomp","xpv_length","xpv_constructor","xpv_ptr","d_length","d_constructor","d_ptr","xpv","PCV","_scriptDir","_documentCurrentScript","moduleArg","readyPromiseResolve","readyPromiseReject","resolve","reject","moduleOverrides","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","ENVIRONMENT_IS_NODE","scriptDirectory","locateFile","path","read_","readAsync","readBinary","createRequire","__vitePreload","__viteBrowserExternal$1","require","fs","nodePath","filename","binary","isFileURI","onload","onerror","err","url","xhr","wasmBinary","abort","wasmMemory","ABORT","HEAP8","HEAPU8","updateMemoryViews","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","preRun","addOnPreRun","callRuntimeCallbacks","initRuntime","postRun","addOnPostRun","cb","addOnInit","runDependencies","dependenciesFulfilled","addRunDependency","removeRunDependency","what","dataURIPrefix","isDataURI","wasmBinaryFile","getBinarySync","getBinaryPromise","binaryFile","response","instantiateArrayBuffer","imports","receiver","reason","instantiateAsync","result","createWasm","wasmImports","receiveInstance","module","exports","wasmExports","receiveInstantiationResult","_emscripten_date_now","_emscripten_memcpy_big","dest","num","getHeapMax","growMemory","size","pages","_emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","alignUp","multiple","cutDown","overGrownHeapSize","newSize","replacement","getCFunc","ident","func","writeArrayToMemory","array","buffer","lengthBytesUTF8","stringToUTF8Array","heap","outIdx","maxBytesToWrite","startIdx","endIdx","u","u1","stringToUTF8","outPtr","stringToUTF8OnStack","stackAlloc","UTF8Decoder","UTF8ArrayToString","heapOrArray","idx","maxBytesToRead","endPtr","u0","u2","ch","UTF8ToString","ptr","ccall","returnType","argTypes","opts","toC","arr","convertReturnValue","cArgs","stack","converter","stackSave","onDone","stackRestore","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a10","a11","a12","a13","calledRun","runCaller","doRun","if_block","create_if_block_4","promise_1","create_if_block_3","pvset","pvres","scalars","nseg","cvtypeOptions","cvType","downloadPVSet","blob","computePVSet","compute","nsegOptions","select_props","calres","computeModel","maxNComp","subscriber_queue","writable","stop","subscribers","set","new_value","run_queue","subscriber","invalidate","getTickLabels","ticks","tickFactor","checkCoords","source","val2p","tX","tY","axes","px","py","getAxisTicks","lim","maxTickNum","round","delta","niceNum","tickSpacing","tickMin","tickMax","localRange","exponent","fraction","niceFraction","roundCoords","getScale","height","if_block2","rect","rect_x_value","rect_y_value","rect_width_value","rect_height_value","div1_class_value","svg","defs","clipPath","limX","limY","xLabel","yLabel","margins","AXES_MARGIN_FACTORS","TICK_NUM","TICK_SIZE","LEGEND_FONT_SIZE","LABELS_MARGIN","LINE_STYLES","MARKER_SYMBOLS","clipPathID","plotElement","axesElement","dispatchClickEvent","eventName","el","handleClick","transform","tA","$isOk","invTransform","isOk","xLim","yLim","ro1","entries","entry","pcr","ro2","acr","pxMargins","$scale","$yLim","$xLim","cpx","$tX","cpy","$tY","Colors","getcolmap","line","line_x__value","line_x__value_1","line_y__value","line_y__value_1","lineCoords","lineColor","lineType","lineWidth","x1","x2","y1","y2","lineStyleStr","text_1","text_1_x_value","text_1_y_value","text_1_dx_value","text_1_transform_value","text_1_dy_value","tickCoords","textColor","tickLabels","pos","las","dx","dy","textAnchor","textStyleStr","getTickFactorLabel","axisticklabels_changes","tf","showGrid","axisLine","tfCoords","gridColor","ticksX","tickNum","dY","ticksY1","ticksY2","gridYEnd","ticksY","dX","ticksX1","ticksX2","gridXEnd","rectStyleStr","xx","yy","left","top","faceColor","borderColor","rx","ry","rw","rh","barsStyleStr","xStart","xEnd","yStart","yEnd","xValues","yValues","marker","borderWidth","markerSize","markerSymbol","polyline","each_value_1","breaks","colmap","lBreaks","lColmap","lleft","ltop","svg_y_value","getTextWidth","font","getLegendSize","items","fontSize","position","elHeight","elPadding","elWidth","lbHeight","lbWidth","w","legendHeight","legendWidth","xLimPx","yLimPx","WIDTH_RATIO","HEIGHT_RATIO","TOP_MARGIN","labelColor","EL_HEIGHTS_PX","lLabels","axesWidth","axesHeight","elTop","ps","right","bottom","mn","mx","mid","med","lines_changes","points_changes","each_blocks","params","getDistanceValues","getDistanceParams","segments0_changes","segments1_changes","get_series","comp1","comp2","cumexpvar","vartype","segments_changes","axes_changes","getTicks","vFactor","val","clLabels","xTicks","yTicks","plotType","div2","selected_plot","ScalarsPlot","ScalarsPlotControls","RMSEPlot","RMSEPlotControls","PredictionsPlot","PredictionsPlotControls","VariancePlot","VariancePlotControls","ScoresPlot","ScoresPlotControls","DistancePlot","DistancePlotControls","switchPlot","keydown_handler","p0","p1","p2","div5","div3","div4","main","footer","MainApp"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,25,26,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49]}