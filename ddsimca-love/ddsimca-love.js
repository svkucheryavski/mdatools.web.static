var Zd=Object.defineProperty;var ha=Be=>{throw TypeError(Be)};var $d=(Be,Ae,et)=>Ae in Be?Zd(Be,Ae,{enumerable:!0,configurable:!0,writable:!0,value:et}):Be[Ae]=et;var Pr=(Be,Ae,et)=>$d(Be,typeof Ae!="symbol"?Ae+"":Ae,et),fo=(Be,Ae,et)=>Ae.has(Be)||ha("Cannot "+et);var ar=(Be,Ae,et)=>(fo(Be,Ae,"read from private field"),et?et.call(Be):Ae.get(Be)),gn=(Be,Ae,et)=>Ae.has(Be)?ha("Cannot add the same private member more than once"):Ae instanceof WeakSet?Ae.add(Be):Ae.set(Be,et),vo=(Be,Ae,et,Tr)=>(fo(Be,Ae,"write to private field"),Tr?Tr.call(Be,et):Ae.set(Be,et),et),ma=(Be,Ae,et)=>(fo(Be,Ae,"access private method"),et);(function(){"use strict";var gr,Kr,dn,ts,ga,va;var Be=document.createElement("style");Be.textContent=`.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1986c5z{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1986c5z:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1986c5z:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1986c5z:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1986c5z{display:none}.control-element.error.svelte-1986c5z{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1986c5z{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1986c5z>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1986c5z>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1986c5z>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1986c5z>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1986c5z .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1986c5z .range-value_left,.control-element.svelte-1986c5z .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1986c5z .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1986c5z .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1986c5z .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1986c5z .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1986c5z .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1986c5z .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1986c5z .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1986c5z .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1986c5z .textinput>input:active::placeholder,.control-element.svelte-1986c5z .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1986c5z .textinput>input:focus,.control-element.svelte-1986c5z .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .textinput.error>input,.control-element.svelte-1986c5z .textinput.error>input:focus,.control-element.svelte-1986c5z .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1986c5z .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1986c5z .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1986c5z .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.buttons.svelte-t7v4gx{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;margin:0;padding:2px 0;width:auto;border-radius:2px;cursor:default;white-space:nowrap}table.svelte-mdsuv2{width:100%;border-collapse:collapse;font-size:.85em;margin-top:1em}tr.svelte-mdsuv2{width:100%}th.svelte-mdsuv2{border-bottom:1px solid #a0a0a0}th.svelte-mdsuv2,td.svelte-mdsuv2{text-align:right;padding:.35em .5em .35em .1em;color:#404040;margin:0}td.svelte-mdsuv2{color:#a0a0a0}tr.global.svelte-mdsuv2 td:where(.svelte-mdsuv2){color:#404040}tr.current.svelte-mdsuv2 td:where(.svelte-mdsuv2){color:#2679b2}tr.selected.svelte-mdsuv2 td:where(.svelte-mdsuv2){color:#d22c2f}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}.app-container.svelte-1cx2u9k{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1cx2u9k{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1cx2u9k{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1cx2u9k>div:where(.svelte-1cx2u9k){background:#e8e8e8;border-radius:.25rem}.app-controls.svelte-1cx2u9k .data-loader-alt:where(.svelte-1cx2u9k) button{margin:0 .25em}.help-text.svelte-1cx2u9k{margin-top:.25rem}.help-text.svelte-1cx2u9k>p:where(.svelte-1cx2u9k),.help-text.svelte-1cx2u9k>div:where(.svelte-1cx2u9k){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k){border-collapse:collapse}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k) td:where(.svelte-1cx2u9k){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k) thead:where(.svelte-1cx2u9k) tr:where(.svelte-1cx2u9k):first-child td:where(.svelte-1cx2u9k){font-weight:700;background:#f8f4e0}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k) td:where(.svelte-1cx2u9k):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k) td:where(.svelte-1cx2u9k):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1cx2u9k>p:where(.svelte-1cx2u9k):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1cx2u9k>p:where(.svelte-1cx2u9k):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.help-text.svelte-1cx2u9k a:where(.svelte-1cx2u9k):visited,.help-text.svelte-1cx2u9k a:where(.svelte-1cx2u9k){color:#1e6ea7}.app-controls.svelte-1cx2u9k>.downloads-widget:where(.svelte-1cx2u9k){background:#d0d0d0}.downloads-widget.svelte-1cx2u9k>div{background:#f0f0f0}.select-tarset-type button{margin-right:5px}@media (min-width:1300px){.app-container.svelte-1cx2u9k{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1cx2u9k{grid-template-columns:min(320px,30%) 1fr}}
/*$vite$:1*/`,document.head.appendChild(Be);var Ae=typeof document<"u"?document.currentScript:null;const et=!1;var Tr=Array.isArray,ba=Array.prototype.indexOf,os=Array.from,pa=Object.defineProperty,ir=Object.getOwnPropertyDescriptor,ho=Object.getOwnPropertyDescriptors,wa=Object.prototype,_a=Array.prototype,ls=Object.getPrototypeOf,mo=Object.isExtensible;function Lr(t){return typeof t=="function"}const mt=()=>{};function ya(t){return typeof(t==null?void 0:t.then)=="function"}function xa(t){return t()}function bn(t){for(var e=0;e<t.length;e++)t[e]()}const Vt=2,go=4,pn=8,wn=16,tr=32,Rr=64,_n=128,St=256,yn=512,yt=1024,Kt=2048,wr=4096,rr=8192,xn=16384,bo=32768,jr=65536,ka=1<<17,Ea=1<<19,po=1<<20,as=1<<21,cr=Symbol("$state"),wo=Symbol("legacy props"),Ca=Symbol("");function _o(t){return t===this.v}function yo(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Aa(t,e){return t!==e}function is(t){return!yo(t,this.v)}function Sa(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ma(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Na(t){throw new Error("https://svelte.dev/e/effect_orphan")}function za(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pa(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ta(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function La(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ra(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ir=!1,ja=!1;function Ia(){Ir=!0}const cs=1,us=2,xo=4,Fa=8,qa=16,Oa=1,Da=2,Va=4,Ba=8,Wa=16,Ya=4,ko=1,Ga=2,ct=Symbol(),Ua="http://www.w3.org/1999/xhtml";function Eo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Re=null;function kn(t){Re=t}function Rt(t){return Co().get(t)}function Ha(t,e){return Co().set(t,e),e}function me(t,e=!1,r){var o=Re={p:Re,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Ir&&!e&&(Re.l={s:null,u:null,r1:[],r2:yr(!1)}),jo(()=>{o.d=!0})}function ge(t){const e=Re;if(e!==null){const c=e.e;if(c!==null){var r=Le,o=qe;e.e=null;try{for(var l=0;l<c.length;l++){var a=c[l];jt(a.effect),xt(a.reaction),Jr(a.fn)}}finally{jt(r),xt(o)}}Re=e.p,e.m=!0}return{}}function _r(){return!Ir||Re!==null&&Re.l===null}function Co(t){return Re===null&&Eo(),Re.c??(Re.c=new Map(Ka(Re)||void 0))}function Ka(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}function Ke(t){if(typeof t!="object"||t===null||cr in t)return t;const e=ls(t);if(e!==wa&&e!==_a)return t;var r=new Map,o=Tr(t),l=ie(0),a=qe,c=u=>{var f=qe;xt(a);var v=u();return xt(f),v};return o&&r.set("length",ie(t.length)),new Proxy(t,{defineProperty(u,f,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Ta();var h=r.get(f);return h===void 0?(h=c(()=>ie(v.value)),r.set(f,h)):J(h,c(()=>Ke(v.value))),!0},deleteProperty(u,f){var v=r.get(f);if(v===void 0)f in u&&(r.set(f,c(()=>ie(ct))),fs(l));else{if(o&&typeof f=="string"){var h=r.get("length"),d=Number(f);Number.isInteger(d)&&d<h.v&&J(h,d)}J(v,ct),fs(l)}return!0},get(u,f,v){var g;if(f===cr)return t;var h=r.get(f),d=f in u;if(h===void 0&&(!d||(g=ir(u,f))!=null&&g.writable)&&(h=c(()=>ie(Ke(d?u[f]:ct))),r.set(f,h)),h!==void 0){var m=s(h);return m===ct?void 0:m}return Reflect.get(u,f,v)},getOwnPropertyDescriptor(u,f){var v=Reflect.getOwnPropertyDescriptor(u,f);if(v&&"value"in v){var h=r.get(f);h&&(v.value=s(h))}else if(v===void 0){var d=r.get(f),m=d==null?void 0:d.v;if(d!==void 0&&m!==ct)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return v},has(u,f){var m;if(f===cr)return!0;var v=r.get(f),h=v!==void 0&&v.v!==ct||Reflect.has(u,f);if(v!==void 0||Le!==null&&(!h||(m=ir(u,f))!=null&&m.writable)){v===void 0&&(v=c(()=>ie(h?Ke(u[f]):ct)),r.set(f,v));var d=s(v);if(d===ct)return!1}return h},set(u,f,v,h){var A;var d=r.get(f),m=f in u;if(o&&f==="length")for(var g=v;g<d.v;g+=1){var b=r.get(g+"");b!==void 0?J(b,ct):g in u&&(b=c(()=>ie(ct)),r.set(g+"",b))}d===void 0?(!m||(A=ir(u,f))!=null&&A.writable)&&(d=c(()=>ie(void 0)),J(d,c(()=>Ke(v))),r.set(f,d)):(m=d.v!==ct,J(d,c(()=>Ke(v))));var p=Reflect.getOwnPropertyDescriptor(u,f);if(p!=null&&p.set&&p.set.call(h,v),!m){if(o&&typeof f=="string"){var w=r.get("length"),_=Number(f);Number.isInteger(_)&&_>=w.v&&J(w,_+1)}fs(l)}return!0},ownKeys(u){s(l);var f=Reflect.ownKeys(u).filter(d=>{var m=r.get(d);return m===void 0||m.v!==ct});for(var[v,h]of r)h.v!==ct&&!(v in u)&&f.push(v);return f},setPrototypeOf(){La()}})}function fs(t,e=1){J(t,t.v+e)}function Fr(t){var e=Vt|Kt,r=qe!==null&&(qe.f&Vt)!==0?qe:null;return Le===null||r!==null&&(r.f&St)!==0?e|=St:Le.f|=po,{ctx:Re,deps:null,effects:null,equals:_o,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??Le}}function L(t){const e=Fr(t);return Yo(e),e}function Ao(t){const e=Fr(t);return e.equals=is,e}function So(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)nr(e[r])}}function Xa(t){for(var e=t.parent;e!==null;){if((e.f&Vt)===0)return e;e=e.parent}return null}function Mo(t){var e,r=Le;jt(Xa(t));try{So(t),e=Xo(t)}finally{jt(r)}return e}function No(t){var e=Mo(t),r=(ur||(t.f&St)!==0)&&t.deps!==null?wr:yt;Bt(t,r),t.equals(e)||(t.v=e,t.wv=Uo())}const Qr=new Map;function yr(t,e){var r={f:0,v:t,reactions:null,equals:_o,rv:0,wv:0};return r}function ie(t,e){const r=yr(t);return Yo(r),r}function En(t,e=!1){var o;const r=yr(t);return e||(r.equals=is),Ir&&Re!==null&&Re.l!==null&&((o=Re.l).s??(o.s=[])).push(r),r}function J(t,e,r=!1){qe!==null&&!Qt&&_r()&&(qe.f&(Vt|wn))!==0&&!(gt!=null&&gt.includes(t))&&Ra();let o=r?Ke(e):e;return qr(t,o)}function qr(t,e){if(!t.equals(e)){var r=t.v;en?Qr.set(t,e):Qr.set(t,r),t.v=e,(t.f&Vt)!==0&&((t.f&Kt)!==0&&Mo(t),Bt(t,(t.f&St)===0?yt:wr)),t.wv=Uo(),zo(t,Kt),_r()&&Le!==null&&(Le.f&yt)!==0&&(Le.f&(tr|Rr))===0&&(It===null?oi([t]):It.push(t))}return e}function zo(t,e){var r=t.reactions;if(r!==null)for(var o=_r(),l=r.length,a=0;a<l;a++){var c=r[a],u=c.f;(u&Kt)===0&&(!o&&c===Le||(Bt(c,e),(u&(yt|St))!==0&&((u&Vt)!==0?zo(c,wr):Tn(c))))}}let Qa=!1;var vs,Po,To,Lo;function Ja(){if(vs===void 0){vs=window,Po=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;To=ir(e,"firstChild").get,Lo=ir(e,"nextSibling").get,mo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),mo(r)&&(r.__t=void 0)}}function ds(t=""){return document.createTextNode(t)}function Mt(t){return To.call(t)}function Cn(t){return Lo.call(t)}function Y(t,e){return Mt(t)}function $(t,e){{var r=Mt(t);return r instanceof Comment&&r.data===""?Cn(r):r}}function j(t,e=1,r=!1){let o=t;for(;e--;)o=Cn(o);return o}function Za(t){t.textContent=""}function Ro(t){Le===null&&qe===null&&Na(),qe!==null&&(qe.f&St)!==0&&Le===null&&Ma(),en&&Sa()}function $a(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Or(t,e,r,o=!0){var l=Le,a={ctx:Re,deps:null,nodes_start:null,nodes_end:null,f:t|Kt,first:null,fn:e,last:null,next:null,parent:l,prev:null,teardown:null,transitions:null,wv:0};if(r)try{bs(a),a.f|=bo}catch(f){throw nr(a),f}else e!==null&&Tn(a);var c=r&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(po|_n))===0;if(!c&&o&&(l!==null&&$a(a,l),qe!==null&&(qe.f&Vt)!==0)){var u=qe;(u.effects??(u.effects=[])).push(a)}return a}function jo(t){const e=Or(pn,null,!1);return Bt(e,yt),e.teardown=t,e}function be(t){Ro();var e=Le!==null&&(Le.f&tr)!==0&&Re!==null&&!Re.m;if(e){var r=Re;(r.e??(r.e=[])).push({fn:t,effect:Le,reaction:qe})}else{var o=Jr(t);return o}}function ei(t){return Ro(),hs(t)}function ti(t){const e=Or(Rr,t,!0);return(r={})=>new Promise(o=>{r.outro?sr(e,()=>{nr(e),o(void 0)}):(nr(e),o(void 0))})}function Jr(t){return Or(go,t,!1)}function hs(t){return Or(pn,t,!0)}function oe(t,e=[],r=Fr){const o=e.map(r);return xr(()=>t(...o.map(s)))}function xr(t,e=0){return Or(pn|wn|e,t,!0)}function Xt(t,e=!0){return Or(pn|tr,t,!0,e)}function Io(t){var e=t.teardown;if(e!==null){const r=en,o=qe;Wo(!0),xt(null);try{e.call(null)}finally{Wo(r),xt(o)}}}function Fo(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var o=r.next;(r.f&Rr)!==0?r.parent=null:nr(r,e),r=o}}function ri(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&tr)===0&&nr(e),e=r}}function nr(t,e=!0){var r=!1;(e||(t.f&Ea)!==0)&&t.nodes_start!==null&&(qo(t.nodes_start,t.nodes_end),r=!0),Fo(t,e&&!r),Pn(t,0),Bt(t,xn);var o=t.transitions;if(o!==null)for(const a of o)a.stop();Io(t);var l=t.parent;l!==null&&l.first!==null&&Oo(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function qo(t,e){for(;t!==null;){var r=t===e?null:Cn(t);t.remove(),t=r}}function Oo(t){var e=t.parent,r=t.prev,o=t.next;r!==null&&(r.next=o),o!==null&&(o.prev=r),e!==null&&(e.first===t&&(e.first=o),e.last===t&&(e.last=r))}function sr(t,e){var r=[];ms(t,r,!0),Do(r,()=>{nr(t),e&&e()})}function Do(t,e){var r=t.length;if(r>0){var o=()=>--r||e();for(var l of t)l.out(o)}else e()}function ms(t,e,r){if((t.f&rr)===0){if(t.f^=rr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var o=t.first;o!==null;){var l=o.next,a=(o.f&jr)!==0||(o.f&tr)!==0;ms(o,e,a?r:!1),o=l}}}function Dr(t){Vo(t,!0)}function Vo(t,e){if((t.f&rr)!==0){t.f^=rr,(t.f&yt)===0&&(t.f^=yt),rn(t)&&(Bt(t,Kt),Tn(t));for(var r=t.first;r!==null;){var o=r.next,l=(r.f&jr)!==0||(r.f&tr)!==0;Vo(r,l?e:!1),r=o}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let Zr=[],gs=[];function Bo(){var t=Zr;Zr=[],bn(t)}function ni(){var t=gs;gs=[],bn(t)}function $r(t){Zr.length===0&&queueMicrotask(Bo),Zr.push(t)}function si(){Zr.length>0&&Bo(),gs.length>0&&ni()}let An=!1,Sn=!1,Mn=null,kr=!1,en=!1;function Wo(t){en=t}let tn=[],e1=[],qe=null,Qt=!1;function xt(t){qe=t}let Le=null;function jt(t){Le=t}let gt=null;function Yo(t){qe!==null&&qe.f&as&&(gt===null?gt=[t]:gt.push(t))}let bt=null,Nt=0,It=null;function oi(t){It=t}let Go=1,Nn=0,ur=!1;function Uo(){return++Go}function rn(t){var d;var e=t.f;if((e&Kt)!==0)return!0;if((e&wr)!==0){var r=t.deps,o=(e&St)!==0;if(r!==null){var l,a,c=(e&yn)!==0,u=o&&Le!==null&&!ur,f=r.length;if(c||u){var v=t,h=v.parent;for(l=0;l<f;l++)a=r[l],(c||!((d=a==null?void 0:a.reactions)!=null&&d.includes(v)))&&(a.reactions??(a.reactions=[])).push(v);c&&(v.f^=yn),u&&h!==null&&(h.f&St)===0&&(v.f^=St)}for(l=0;l<f;l++)if(a=r[l],rn(a)&&No(a),a.wv>t.wv)return!0}(!o||Le!==null&&!ur)&&Bt(t,yt)}return!1}function li(t,e){for(var r=e;r!==null;){if((r.f&_n)!==0)try{r.fn(t);return}catch{r.f^=_n}r=r.parent}throw An=!1,t}function Ho(t){return(t.f&xn)===0&&(t.parent===null||(t.parent.f&_n)===0)}function zn(t,e,r,o){if(An){if(r===null&&(An=!1),Ho(e))throw t;return}if(r!==null&&(An=!0),li(t,e),Ho(e))throw t}function Ko(t,e,r=!0){var o=t.reactions;if(o!==null)for(var l=0;l<o.length;l++){var a=o[l];gt!=null&&gt.includes(t)||((a.f&Vt)!==0?Ko(a,e,!1):e===a&&(r?Bt(a,Kt):(a.f&yt)!==0&&Bt(a,wr),Tn(a)))}}function Xo(t){var g;var e=bt,r=Nt,o=It,l=qe,a=ur,c=gt,u=Re,f=Qt,v=t.f;bt=null,Nt=0,It=null,ur=(v&St)!==0&&(Qt||!kr||qe===null),qe=(v&(tr|Rr))===0?t:null,gt=null,kn(t.ctx),Qt=!1,Nn++,t.f|=as;try{var h=(0,t.fn)(),d=t.deps;if(bt!==null){var m;if(Pn(t,Nt),d!==null&&Nt>0)for(d.length=Nt+bt.length,m=0;m<bt.length;m++)d[Nt+m]=bt[m];else t.deps=d=bt;if(!ur)for(m=Nt;m<d.length;m++)((g=d[m]).reactions??(g.reactions=[])).push(t)}else d!==null&&Nt<d.length&&(Pn(t,Nt),d.length=Nt);if(_r()&&It!==null&&!Qt&&d!==null&&(t.f&(Vt|wr|Kt))===0)for(m=0;m<It.length;m++)Ko(It[m],t);return l!==null&&l!==t&&(Nn++,It!==null&&(o===null?o=It:o.push(...It))),h}finally{bt=e,Nt=r,It=o,qe=l,ur=a,gt=c,kn(u),Qt=f,t.f^=as}}function ai(t,e){let r=e.reactions;if(r!==null){var o=ba.call(r,t);if(o!==-1){var l=r.length-1;l===0?r=e.reactions=null:(r[o]=r[l],r.pop())}}r===null&&(e.f&Vt)!==0&&(bt===null||!bt.includes(e))&&(Bt(e,wr),(e.f&(St|yn))===0&&(e.f^=yn),So(e),Pn(e,0))}function Pn(t,e){var r=t.deps;if(r!==null)for(var o=e;o<r.length;o++)ai(t,r[o])}function bs(t){var e=t.f;if((e&xn)===0){Bt(t,yt);var r=Le,o=Re,l=kr;Le=t,kr=!0;try{(e&wn)!==0?ri(t):Fo(t),Io(t);var a=Xo(t);t.teardown=typeof a=="function"?a:null,t.wv=Go;var c=t.deps,u;et&&ja&&t.f&Kt}catch(f){zn(f,t,r,o||t.ctx)}finally{kr=l,Le=r}}}function ii(){try{za()}catch(t){if(Mn!==null)zn(t,Mn,null);else throw t}}function Qo(){var t=kr;try{var e=0;for(kr=!0;tn.length>0;){e++>1e3&&ii();var r=tn,o=r.length;tn=[];for(var l=0;l<o;l++){var a=ui(r[l]);ci(a)}Qr.clear()}}finally{Sn=!1,kr=t,Mn=null}}function ci(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var o=t[r];if((o.f&(xn|rr))===0)try{rn(o)&&(bs(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null?Oo(o):o.fn=null))}catch(l){zn(l,o,null,o.ctx)}}}function Tn(t){Sn||(Sn=!0,queueMicrotask(Qo));for(var e=Mn=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(Rr|tr))!==0){if((r&yt)===0)return;e.f^=yt}}tn.push(e)}function ui(t){for(var e=[],r=t;r!==null;){var o=r.f,l=(o&(tr|Rr))!==0,a=l&&(o&yt)!==0;if(!a&&(o&rr)===0){if((o&go)!==0)e.push(r);else if(l)r.f^=yt;else try{rn(r)&&bs(r)}catch(f){zn(f,r,null,r.ctx)}var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return e}function fi(t){for(var e;;){if(si(),tn.length===0)return e;Sn=!0,Qo()}}function s(t){var e=t.f,r=(e&Vt)!==0;if(qe!==null&&!Qt){if(!(gt!=null&&gt.includes(t))){var o=qe.deps;t.rv<Nn&&(t.rv=Nn,bt===null&&o!==null&&o[Nt]===t?Nt++:bt===null?bt=[t]:(!ur||!bt.includes(t))&&bt.push(t))}}else if(r&&t.deps===null&&t.effects===null){var l=t,a=l.parent;a!==null&&(a.f&St)===0&&(l.f^=St)}return r&&(l=t,rn(l)&&No(l)),en&&Qr.has(t)?Qr.get(t):t.v}function Jt(t){var e=Qt;try{return Qt=!0,t()}finally{Qt=e}}const vi=-7169;function Bt(t,e){t.f=t.f&vi|e}function di(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(cr in t)ps(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&cr in r&&ps(r)}}}function ps(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let o in t)try{ps(t[o],e)}catch{}const r=ls(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const o=ho(r);for(let l in o){const a=o[l].get;if(a)try{a.call(t)}catch{}}}}}const hi=["touchstart","touchmove"];function mi(t){return hi.includes(t)}let Jo=!1;function gi(){Jo||(Jo=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function ws(t){var e=qe,r=Le;xt(null),jt(null);try{return t()}finally{xt(e),jt(r)}}function bi(t,e,r,o=r){t.addEventListener(e,()=>ws(r));const l=t.__on_r;l?t.__on_r=()=>{l(),o(!0)}:t.__on_r=()=>o(!0),gi()}const Zo=new Set,_s=new Set;function pi(t,e,r,o={}){function l(a){if(o.capture||nn.call(e,a),!a.cancelBubble)return ws(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?$r(()=>{e.addEventListener(t,l,o)}):e.addEventListener(t,l,o),l}function Ln(t,e,r,o,l){var a={capture:o,passive:l},c=pi(t,e,r,a);(e===document.body||e===window||e===document)&&jo(()=>{e.removeEventListener(t,c,a)})}function tt(t){for(var e=0;e<t.length;e++)Zo.add(t[e]);for(var r of _s)r(t)}function nn(t){var A;var e=this,r=e.ownerDocument,o=t.type,l=((A=t.composedPath)==null?void 0:A.call(t))||[],a=l[0]||t.target,c=0,u=t.__root;if(u){var f=l.indexOf(u);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var v=l.indexOf(e);if(v===-1)return;f<=v&&(c=f)}if(a=l[c]||t.target,a!==e){pa(t,"currentTarget",{configurable:!0,get(){return a||r}});var h=qe,d=Le;xt(null),jt(null);try{for(var m,g=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var p=a["__"+o];if(p!=null&&(!a.disabled||t.target===a))if(Tr(p)){var[w,..._]=p;w.apply(a,[t,..._])}else p.call(a,t)}catch(M){m?g.push(M):m=M}if(t.cancelBubble||b===e||b===null)break;a=b}if(m){for(let M of g)queueMicrotask(()=>{throw M});throw m}}finally{t.__root=e,delete t.currentTarget,xt(h),jt(d)}}}function ys(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Vr(t,e){var r=Le;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function K(t,e){var r=(e&ko)!==0,o=(e&Ga)!==0,l,a=!t.startsWith("<!>");return()=>{l===void 0&&(l=ys(a?t:"<!>"+t),r||(l=Mt(l)));var c=o||Po?document.importNode(l,!0):l.cloneNode(!0);if(r){var u=Mt(c),f=c.lastChild;Vr(u,f)}else Vr(c,c);return c}}function pe(t,e,r="svg"){var o=!t.startsWith("<!>"),l=(e&ko)!==0,a=`<${r}>${o?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var u=ys(a),f=Mt(u);if(l)for(c=document.createDocumentFragment();Mt(f);)c.appendChild(Mt(f));else c=Mt(f)}var v=c.cloneNode(!0);if(l){var h=Mt(v),d=v.lastChild;Vr(h,d)}else Vr(v,v);return v}}function de(){var t=document.createDocumentFragment(),e=document.createComment(""),r=ds();return t.append(e,r),Vr(e,r),t}function P(t,e){t!==null&&t.before(e)}let xs=!0;function ae(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function wi(t,e){return _i(t,e)}const Br=new Map;function _i(t,{target:e,anchor:r,props:o={},events:l,context:a,intro:c=!0}){Ja();var u=new Set,f=d=>{for(var m=0;m<d.length;m++){var g=d[m];if(!u.has(g)){u.add(g);var b=mi(g);e.addEventListener(g,nn,{passive:b});var p=Br.get(g);p===void 0?(document.addEventListener(g,nn,{passive:b}),Br.set(g,1)):Br.set(g,p+1)}}};f(os(Zo)),_s.add(f);var v=void 0,h=ti(()=>{var d=r??e.appendChild(ds());return Xt(()=>{if(a){me({});var m=Re;m.c=a}l&&(o.$$events=l),xs=c,v=t(d,o)||{},xs=!0,a&&ge()}),()=>{var b;for(var m of u){e.removeEventListener(m,nn);var g=Br.get(m);--g===0?(document.removeEventListener(m,nn),Br.delete(m)):Br.set(m,g)}_s.delete(f),d!==r&&((b=d.parentNode)==null||b.removeChild(d))}});return yi.set(v,h),v}let yi=new WeakMap;const ks=0,Rn=1,Es=2;function Cs(t,e,r,o,l){var a=t,c=_r(),u=Re,f=ct,v,h,d,m=(c?yr:En)(void 0),g=(c?yr:En)(void 0),b=!1;function p(_,A){b=!0,A&&(jt(w),xt(w),kn(u));try{_===ks&&r&&(v?Dr(v):v=Xt(()=>r(a))),_===Es&&l&&(d?Dr(d):d=Xt(()=>l(a,g))),_!==ks&&v&&sr(v,()=>v=null),_!==Rn&&h&&sr(h,()=>h=null),_!==Es&&d&&sr(d,()=>d=null)}finally{A&&(kn(null),xt(null),jt(null),fi())}}var w=xr(()=>{if(f!==(f=e())){if(ya(f)){var _=f;b=!1,_.then(A=>{_===f&&(qr(m,A),p(Rn,!0))},A=>{if(_===f&&(qr(g,A),p(Es,!0),!l))throw g.v}),$r(()=>{b||p(ks,!0)})}else qr(m,f),p(Rn,!1);return()=>f=ct}})}function G(t,e,[r,o]=[0,0]){var l=t,a=null,c=null,u=ct,f=r>0?jr:0,v=!1;const h=(m,g=!0)=>{v=!0,d(g,m)},d=(m,g)=>{u!==(u=m)&&(u?(a?Dr(a):g&&(a=Xt(()=>g(l))),c&&sr(c,()=>{c=null})):(c?Dr(c):g&&(c=Xt(()=>g(l,[r+1,o]))),a&&sr(a,()=>{a=null})))};xr(()=>{v=!1,e(h),v||d(null,null)},f)}function $o(t,e,r){var o=t,l=ct,a,c=_r()?Aa:yo;xr(()=>{c(l,l=e())&&(a&&sr(a),a=Xt(()=>r(o)))})}function Xe(t,e){return e}function xi(t,e,r,o){for(var l=[],a=e.length,c=0;c<a;c++)ms(e[c].e,l,!0);var u=a>0&&l.length===0&&r!==null;if(u){var f=r.parentNode;Za(f),f.append(r),o.clear(),fr(t,e[0].prev,e[a-1].next)}Do(l,()=>{for(var v=0;v<a;v++){var h=e[v];u||(o.delete(h.k),fr(t,h.prev,h.next)),nr(h.e,!u)}})}function Ue(t,e,r,o,l,a=null){var c=t,u={flags:e,items:new Map,first:null},f=(e&xo)!==0;if(f){var v=t;c=v.appendChild(ds())}var h=null,d=!1,m=Ao(()=>{var g=r();return Tr(g)?g:g==null?[]:os(g)});xr(()=>{var g=s(m),b=g.length;d&&b===0||(d=b===0,ki(g,u,c,l,e,o,r),a!==null&&(b===0?h?Dr(h):h=Xt(()=>a(c)):h!==null&&sr(h,()=>{h=null})),s(m))})}function ki(t,e,r,o,l,a,c){var F,S,I,V;var u=(l&Fa)!==0,f=(l&(cs|us))!==0,v=t.length,h=e.items,d=e.first,m=d,g,b=null,p,w=[],_=[],A,M,y,k;if(u)for(k=0;k<v;k+=1)A=t[k],M=a(A,k),y=h.get(M),y!==void 0&&((F=y.a)==null||F.measure(),(p??(p=new Set)).add(y));for(k=0;k<v;k+=1){if(A=t[k],M=a(A,k),y=h.get(M),y===void 0){var z=m?m.e.nodes_start:r;b=Ci(z,e,b,b===null?e.first:b.next,A,M,k,o,l,c),h.set(M,b),w=[],_=[],m=b.next;continue}if(f&&Ei(y,A,k,l),(y.e.f&rr)!==0&&(Dr(y.e),u&&((S=y.a)==null||S.unfix(),(p??(p=new Set)).delete(y))),y!==m){if(g!==void 0&&g.has(y)){if(w.length<_.length){var C=_[0],E;b=C.prev;var N=w[0],T=w[w.length-1];for(E=0;E<w.length;E+=1)el(w[E],C,r);for(E=0;E<_.length;E+=1)g.delete(_[E]);fr(e,N.prev,T.next),fr(e,b,N),fr(e,T,C),m=C,b=T,k-=1,w=[],_=[]}else g.delete(y),el(y,m,r),fr(e,y.prev,y.next),fr(e,y,b===null?e.first:b.next),fr(e,b,y),b=y;continue}for(w=[],_=[];m!==null&&m.k!==M;)(m.e.f&rr)===0&&(g??(g=new Set)).add(m),_.push(m),m=m.next;if(m===null)continue;y=m}w.push(y),b=y,m=y.next}if(m!==null||g!==void 0){for(var R=g===void 0?[]:os(g);m!==null;)(m.e.f&rr)===0&&R.push(m),m=m.next;var q=R.length;if(q>0){var D=(l&xo)!==0&&v===0?r:null;if(u){for(k=0;k<q;k+=1)(I=R[k].a)==null||I.measure();for(k=0;k<q;k+=1)(V=R[k].a)==null||V.fix()}xi(e,R,D,h)}}u&&$r(()=>{var H;if(p!==void 0)for(y of p)(H=y.a)==null||H.apply()}),Le.first=e.first&&e.first.e,Le.last=b&&b.e}function Ei(t,e,r,o){(o&cs)!==0&&qr(t.v,e),(o&us)!==0?qr(t.i,r):t.i=r}function Ci(t,e,r,o,l,a,c,u,f,v){var h=(f&cs)!==0,d=(f&qa)===0,m=h?d?En(l):yr(l):l,g=(f&us)===0?c:yr(c),b={i:g,v:m,k:a,a:null,e:null,prev:r,next:o};try{return b.e=Xt(()=>u(t,m,g,v),Qa),b.e.prev=r&&r.e,b.e.next=o&&o.e,r===null?e.first=b:(r.next=b,r.e.next=b.e),o!==null&&(o.prev=b,o.e.prev=b.e),b}finally{}}function el(t,e,r){for(var o=t.next?t.next.e.nodes_start:r,l=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==o;){var c=Cn(a);l.before(a),a=c}}function fr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function pt(t,e,r=!1,o=!1,l=!1){var a=t,c="";oe(()=>{var u=Le;if(c!==(c=e()??"")&&(u.nodes_start!==null&&(qo(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),c!=="")){var f=c+"";r?f=`<svg>${f}</svg>`:o&&(f=`<math>${f}</math>`);var v=ys(f);if((r||o)&&(v=Mt(v)),Vr(Mt(v),v.lastChild),r||o)for(;Mt(v);)a.before(Mt(v));else a.before(v)}})}function vr(t,e,...r){var o=t,l=mt,a;xr(()=>{l!==(l=e())&&(a&&(nr(a),a=null),a=Xt(()=>l(o,...r)))},jr)}function As(t,e,r){var o=t,l,a;xr(()=>{l!==(l=e())&&(a&&(sr(a),a=null),l&&(a=Xt(()=>r(o,l))))},jr)}function tl(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(r=tl(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function Ai(){for(var t,e,r=0,o="",l=arguments.length;r<l;r++)(t=arguments[r])&&(e=tl(t))&&(o&&(o+=" "),o+=e);return o}function Si(t){return typeof t=="object"?Ai(t):t??""}const rl=[...`
\r\f \v\uFEFF`];function Mi(t,e,r){var o=t==null?"":""+t;if(e&&(o=o?o+" "+e:e),r){for(var l in r)if(r[l])o=o?o+" "+l:l;else if(o.length)for(var a=l.length,c=0;(c=o.indexOf(l,c))>=0;){var u=c+a;(c===0||rl.includes(o[c-1]))&&(u===o.length||rl.includes(o[u]))?o=(c===0?"":o.substring(0,c))+o.substring(u+1):c=u}}return o===""?null:o}function Ni(t,e){return t==null?null:String(t)}function ut(t,e,r,o,l,a){var c=t.__className;if(c!==r||c===void 0){var u=Mi(r,o,a);u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u),t.__className=r}else if(a&&l!==a)for(var f in a){var v=!!a[f];(l==null||v!==!!l[f])&&t.classList.toggle(f,v)}return a}function Wt(t,e,r,o){var l=t.__style;if(l!==e){var a=Ni(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return o}const zi=Symbol("is custom element"),Pi=Symbol("is html");function O(t,e,r,o){var l=Ti(t);l[e]!==(l[e]=r)&&(e==="loading"&&(t[Ca]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Li(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Ti(t){return t.__attributes??(t.__attributes={[zi]:t.nodeName.includes("-"),[Pi]:t.namespaceURI===Ua})}var nl=new Map;function Li(t){var e=nl.get(t.nodeName);if(e)return e;nl.set(t.nodeName,e=[]);for(var r,o=t,l=Element.prototype;l!==o;){r=ho(o);for(var a in r)r[a].set&&e.push(a);o=ls(o)}return e}const Ri=()=>performance.now(),or={tick:t=>requestAnimationFrame(t),now:()=>Ri(),tasks:new Set};function sl(){const t=or.now();or.tasks.forEach(e=>{e.c(t)||(or.tasks.delete(e),e.f())}),or.tasks.size!==0&&or.tick(sl)}function ji(t){let e;return or.tasks.size===0&&or.tick(sl),{promise:new Promise(r=>{or.tasks.add(e={c:t,f:r})}),abort(){or.tasks.delete(e)}}}function jn(t,e){ws(()=>{t.dispatchEvent(new CustomEvent(e))})}function Ii(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ol(t){const e={},r=t.split(";");for(const o of r){const[l,a]=o.split(":");if(!l||a===void 0)break;const c=Ii(l.trim());e[c]=a.trim()}return e}const Fi=t=>t;function qi(t,e,r,o){var l=(t&Ya)!==0,a="both",c,u=e.inert,f=e.style.overflow,v,h;function d(){var w=qe,_=Le;xt(null),jt(null);try{return c??(c=r()(e,(o==null?void 0:o())??{},{direction:a}))}finally{xt(w),jt(_)}}var m={is_global:l,in(){e.inert=u,jn(e,"introstart"),v=Ss(e,d(),h,1,()=>{jn(e,"introend"),v==null||v.abort(),v=c=void 0,e.style.overflow=f})},out(w){e.inert=!0,jn(e,"outrostart"),h=Ss(e,d(),v,0,()=>{jn(e,"outroend"),w==null||w()})},stop:()=>{v==null||v.abort(),h==null||h.abort()}},g=Le;if((g.transitions??(g.transitions=[])).push(m),xs){var b=l;if(!b){for(var p=g.parent;p&&(p.f&jr)!==0;)for(;(p=p.parent)&&(p.f&wn)===0;);b=!p||(p.f&bo)!==0}b&&Jr(()=>{Jt(()=>m.in())})}}function Ss(t,e,r,o,l){var a=o===1;if(Lr(e)){var c,u=!1;return $r(()=>{if(!u){var w=e({direction:a?"in":"out"});c=Ss(t,w,r,o,l)}}),{abort:()=>{u=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return l(),{abort:mt,deactivate:mt,reset:mt,t:()=>o};const{delay:f=0,css:v,tick:h,easing:d=Fi}=e;var m=[];if(a&&r===void 0&&(h&&h(0,1),v)){var g=ol(v(0,1));m.push(g,g)}var b=()=>1-o,p=t.animate(m,{duration:f});return p.onfinish=()=>{var w=(r==null?void 0:r.t())??1-o;r==null||r.abort();var _=o-w,A=e.duration*Math.abs(_),M=[];if(A>0){var y=!1;if(v)for(var k=Math.ceil(A/16.666666666666668),z=0;z<=k;z+=1){var C=w+_*d(z/k),E=ol(v(C,1-C));M.push(E),y||(y=E.overflow==="hidden")}y&&(t.style.overflow="hidden"),b=()=>{var N=p.currentTime;return w+_*d(N/A)},h&&ji(()=>{if(p.playState!=="running")return!1;var N=b();return h(N,1-N),!0})}p=t.animate(M,{duration:A,fill:"forwards"}),p.onfinish=()=>{b=()=>o,h==null||h(o,1-o),l()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=mt)},deactivate:()=>{l=mt},reset:()=>{o===0&&(h==null||h(1,0))},t:()=>b()}}function ll(t,e,r=e){var o=_r();bi(t,"input",l=>{var a=l?t.defaultValue:t.value;if(a=Ms(t)?Ns(a):a,r(a),o&&a!==(a=e())){var c=t.selectionStart,u=t.selectionEnd;t.value=a??"",u!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(u,t.value.length))}}),Jt(e)==null&&t.value&&r(Ms(t)?Ns(t.value):t.value),hs(()=>{var l=e();Ms(t)&&l===Ns(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}function Ms(t){var e=t.type;return e==="number"||e==="range"}function Ns(t){return t===""?null:+t}const rs=class rs{constructor(e){gn(this,ts);gn(this,gr,new WeakMap);gn(this,Kr);gn(this,dn);vo(this,dn,e)}observe(e,r){var o=ar(this,gr).get(e)||new Set;return o.add(r),ar(this,gr).set(e,o),ma(this,ts,ga).call(this).observe(e,ar(this,dn)),()=>{var l=ar(this,gr).get(e);l.delete(r),l.size===0&&(ar(this,gr).delete(e),ar(this,Kr).unobserve(e))}}};gr=new WeakMap,Kr=new WeakMap,dn=new WeakMap,ts=new WeakSet,ga=function(){return ar(this,Kr)??vo(this,Kr,new ResizeObserver(e=>{for(var r of e){rs.entries.set(r.target,r);for(var o of ar(this,gr).get(r.target)||[])o(r)}}))},Pr(rs,"entries",new WeakMap);let zs=rs;var Oi=new zs({box:"border-box"});function al(t,e,r){var o=Oi.observe(t,()=>r(t[e]));Jr(()=>(Jt(()=>r(t[e])),o))}function il(t,e){return t===e||(t==null?void 0:t[cr])===e}function In(t={},e,r,o){return Jr(()=>{var l,a;return hs(()=>{l=a,a=[],Jt(()=>{t!==r(...a)&&(e(t,...a),l&&il(r(...l),t)&&e(null,...l))})}),()=>{$r(()=>{a&&il(r(...a),t)&&e(null,...a)})}}),t}function Di(t=!1){const e=Re,r=e.l.u;if(!r)return;let o=()=>di(e.s);if(t){let l=0,a={};const c=Fr(()=>{let u=!1;const f=e.s;for(const v in f)f[v]!==a[v]&&(a[v]=f[v],u=!0);return u&&l++,l});o=()=>s(c)}r.b.length&&ei(()=>{cl(e,o),bn(r.b)}),be(()=>{const l=Jt(()=>r.m.map(xa));return()=>{for(const a of l)typeof a=="function"&&a()}}),r.a.length&&be(()=>{cl(e,o),bn(r.a)})}function cl(t,e){if(t.l.s)for(const r of t.l.s)s(r);e()}let Fn=!1;function Vi(t){var e=Fn;try{return Fn=!1,[t(),Fn]}finally{Fn=e}}const Bi={get(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(Lr(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o)return o[e]}},set(t,e,r){let o=t.props.length;for(;o--;){let l=t.props[o];Lr(l)&&(l=l());const a=ir(l,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(Lr(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o){const l=ir(o,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(t,e){if(e===cr||e===wo)return!1;for(let r of t.props)if(Lr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Lr(r)&&(r=r()),!!r){for(const o in r)e.includes(o)||e.push(o);for(const o of Object.getOwnPropertySymbols(r))e.includes(o)||e.push(o)}return e}};function je(...t){return new Proxy({props:t},Bi)}function ul(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function U(t,e,r,o){var z;var l=(r&Oa)!==0,a=!Ir||(r&Da)!==0,c=(r&Ba)!==0,u=(r&Wa)!==0,f=!1,v;c?[v,f]=Vi(()=>t[e]):v=t[e];var h=cr in t||wo in t,d=c&&(((z=ir(t,e))==null?void 0:z.set)??(h&&e in t&&(C=>t[e]=C)))||void 0,m=o,g=!0,b=!1,p=()=>(b=!0,g&&(g=!1,u?m=Jt(o):m=o),m);v===void 0&&o!==void 0&&(d&&a&&Pa(),v=p(),d&&d(v));var w;if(a)w=()=>{var C=t[e];return C===void 0?p():(g=!0,b=!1,C)};else{var _=(l?Fr:Ao)(()=>t[e]);_.f|=ka,w=()=>{var C=s(_);return C!==void 0&&(m=void 0),C===void 0?m:C}}if((r&Va)===0)return w;if(d){var A=t.$$legacy;return function(C,E){return arguments.length>0?((!a||!E||A||f)&&d(E?w():C),C):w()}}var M=!1,y=En(v),k=Fr(()=>{var C=w(),E=s(y);return M?(M=!1,E):y.v=C});return c&&s(k),l||(k.equals=is),function(C,E){if(arguments.length>0){const N=E?s(k):a&&c?Ke(C):C;if(!k.equals(N)){if(M=!0,J(y,N),b&&m!==void 0&&(m=N),ul(k))return C;Jt(()=>s(k))}return C}return ul(k)?k.v:s(k)}}function Wi(t){Re===null&&Eo(),Ir&&Re.l!==null?Yi(Re).m.push(t):be(()=>{const e=Jt(t);if(typeof e=="function")return e})}function Yi(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Gi="5";typeof window<"u"&&((va=window.__svelte??(window.__svelte={})).v??(va.v=new Set)).add(Gi),Ia();function fl(t){if(Pe(t))return fl(t.v);const e=new Se.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Se(e)}function Ps(t,e){return Pe(t)?Ps(t.v,e):Math.sqrt(qn(t,e))}function qn(t,e){if(e===void 0&&(e=!1),Pe(t))return qn(t.v);const r=Wr(t);let o=0;for(let l=0;l<t.length;l++){const a=t[l]-r;o=o+a*a}return o/(e?t.length:t.length-1)}function Wr(t){return Pe(t)?Wr(t.v):vl(t)/t.length}function vl(t){if(Pe(t))return vl(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function dl(t){if(Pe(t))return dl(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Yr(t){return Pe(t)||Gt(t)?t.v[Ts(t.v)-1]:t[Ts(t)-1]}function Ts(t){if(Pe(t)||Gt(t))return Ts(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]<r&&(e=o,r=t[o-1]);return e}function Er(t){return Pe(t)||Gt(t)?t.v[Ls(t.v)-1]:t[Ls(t)-1]}function Ls(t){if(Pe(t)||Gt(t))return Ls(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]>r&&(e=o,r=t[o-1]);return e}const Rs=30,Ui=1e-7,Hi=1e-7,hl=1e-13,ml=1e3,Ki=100;function gl(t,e,r,o,l){o===void 0&&(o=ml),r===void 0&&(r=hl),l===void 0&&(l=Ki);let a=r,c=o,u=(c-a)/l;for(let f=0;f<l;f++){let v,h;for(let g=0;g<l;g++){v=a+g*u,h=a+(g+1)*u;const b=e(v),p=e(h);if(b<=t&&p>=t)break}const d=(v+h)/2,m=e(d);if(Math.abs(m-t)<Ui||(a=v,c=h,u=(c-a)/l,u/c<Hi))return d}return(a+c)/2}function bl(t,e=0,r=1){let o=Se.zeros(t);for(let l=0;l<t;l++)o.v[l]=e+Math.random()*(r-e);return o}function pl(t,e=0,r=1){let o=Se.zeros(t);for(let l=0;l<t;l++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();o.v[l]=a*Math.sin(c)*r+e}return o}function On(t,e=0,r=1){if(Pe(t))return t.apply(l=>On(l,e,r));const o=1/(Math.sqrt(2)*r);return .5*(1+Qi((t-e)*o))}function js(t,e=0,r=1){if(Pe(t))return t.apply(D=>js(D,e,r));if(e!==0||r!==1)return js(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const o=.425,l=5,a=.180625,c=1.6,u=3.3871327179,f=5.0434271938*10,v=1.5929113202*100,h=5.910937472*10,d=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,b=1.4234372777,p=2.75681539,w=1.3067284816,_=1.7023821103*.1,A=7.370016425*.1,M=1.2021132975*.1,y=6.657905115,k=3.081226386,z=4.2868294337*.1,C=1.7337203997*.01,E=2.4197894225*.1,N=1.2258202635*.01,T=t-.5;let R;if(Math.abs(T)<=o)return R=a-T*T,T*(((h*R+v)*R+f)*R+u)/(((g*R+m)*R+d)*R+1);R=T<0?t:1-t,R=Math.sqrt(-Math.log(R));let q;return R<=l?(R=R-c,q=(((_*R+w)*R+p)*R+b)/((M*R+A)*R+1)):(R=R-l,q=((C*R+z)*R+k+y)/((N*R+E)*R+1)),T<0?-q:q}function Is(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return Is(Je(t),e,r);if(Pe(t))return t.apply(o=>Is(o,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return Dn(t*e,e)}return e==Number.POSITIVE_INFINITY?1-Dn(r/t,r):e*t>r?1-Bn(r/(r+e*t),r/2,e/2):Bn(e*t/(r+e*t),e/2,r/2)}function wl(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let o=ml,l=hl;if(t>.9997&&r===1?(o=1e7,l=6e5,t=.9997):t>.9992&&r===1?(o=1e7,l=6e5):t>.997&&r===1?(o=1e6,l=45e3):t>.992&&r===1?(o=1e5,l=5e3):t>.97&&r===1&&(o=1e4,l=400),Array.isArray(t))return wl(Je(t),e,r);const a=u=>Is(u,e,r);function c(u,f,v){return u===0?0:u===1?Inf:f===0?NaN:v===0?NaN:gl(u,a,l,o)}return Pe(t)?t.apply(c,e,r):c(t,e,r)}function Dn(t,e){if(Array.isArray(t))return Dn(Je(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(o);function a(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const v=f/e,h=Math.pow(v,1/6)-.5*Math.pow(v,1/3)+1/3*Math.pow(v,1/2);return On(h,r,l)}function c(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:Xi(f/2,e/2)/sn(e/2)}const u=e>Rs?a:c;return Pe(t)?t.apply(u):u(t)}function Vn(t,e){if(Array.isArray(t))return Vn(Je(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(o);function a(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const v=js(f,r,l),h=Math.pow(Math.sqrt(36*v*v-30*v+13)/4+(3*v-3/2)/2+1/8,1/3);return Math.pow(h-3/(4*h)+.5,6)*e}function c(f){return f===0?0:f===1?Inf:e===0?0:gl(f,h=>Dn(h,e),0,Rs*10)}const u=e>Rs?a:c;return Pe(t)?t.apply(u):u(t)}function Bn(t,e,r){if(Array.isArray(t))return Bn(Je(t),e,r);if(Pe(t))return t.apply(l=>Bn(l,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const o=.5-t+.5;return ic(e,r,t,o)}function sn(t){if(Pe(t))return t.apply(sn);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+sn(1-t));t=t-1;let r=.9999999999998099;for(let l=0;l<e.length;l++)r=r+e[l]/(t+l+1);const o=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*r}function Xi(t,e){let l=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/sn(e+a+1);if(isNaN(c)||c<1e-18)break;l+=c}return Math.pow(t,e)*sn(e)*Math.exp(-t)*l}function Qi(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,o=-.284496736,l=1.421413741,a=-1.453152027,c=1.061405429,f=1/(1+.3275911*t),v=1-((((c*f+a)*f+l)*f+o)*f+r)*f*Math.exp(-t*t);return e*v}function _l(t,e){const r=.564189583547756,o=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],u=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let v,h,d,m,g=Math.abs(e);if(g<=.5)return h=e*e,m=(((o[0]*h+o[1])*h+o[2])*h+o[3])*h+o[4]+1,d=((l[0]*h+l[1])*h+l[2])*h+1,v=.5-e*(m/d)+.5,v=Math.exp(h)*v,v;if(g<=4)m=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],d=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],v=m/d;else{if(e<=-5.6)return v=2,v=Math.exp(e*e)*2,v;h=1/(e*e),m=(((u[0]*h+u[1])*h+u[2])*h+u[3])*h+u[4],d=(((f[0]*h+f[1])*h+f[2])*h+f[3])*h+1,v=(r-h*m/d)/g}return e<0&&(v=Math.exp(e*e)*2-v),v}function yl(t,e){let r=t+e-2;return r<=.25?Ft(r+1):r<=1.25?Ft(r)+hr(r):Ft(r-1)+Math.log(r*(r+1))}function Wn(t,e){const r=.0833333333333333,o=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,v,h,d,m,g,b,p,w,_,A,M,y,k,z;return h=Math.min(t,e),d=Math.max(t,e),g=h/d,m=g/(g+1),w=1/(g+1),M=w*w,_=w+M+1,A=w+M*_+1,y=w+M*A+1,k=w+M*y+1,z=w+M*k+1,v=1/d,b=v*v,p=((((u*z*b+c*k)*b+a*y)*b+l*A)*b+o*_)*b+r,p*=m/d,v=1/h,b=v*v,f=(((((u*b+c)*b+a)*b+l)*b+o)*b+r)/h+p,f}function He(t){let e,r,o,l,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],u=.273076135303957,f=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],l=(f*r+u)*r+1,o=a/l,e>0?r*o/t:t*(o+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],u=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],l=(((u[4]*r+u[3])*r+u[2])*r+u[1])*r+1,o=a/l,e>0?r/t*(o-.5-.5):t*o}}}function Ji(t,e,r){let o,l,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=l=0,o=0;for(let u=1;u<=r;u++)a=l,l=o,o=c*l-a+e[r-u];return(o-a)*.5}function xl(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,o=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*Ji(t/.375,e,r));if(t<o)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function dr(t,e){const r=.0833333333333333,o=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,v,h,d,m,g,b,p,w,_,A,M,y,k;return t>e?(h=e/t,f=1/(h+1),p=h/(h+1),v=t+(e-.5)):(h=t/e,f=h/(h+1),p=1/(h+1),v=e+(t-.5)),A=p*p,w=p+A+1,_=p+A*w+1,M=p+A*_+1,y=p+A*M+1,k=p+A*y+1,d=1/(e*e),b=((((u*k*d+c*y)*d+a*M)*d+l*_)*d+o*w)*d+r,b*=f/e,m=v*hr(t/e),g=t*(Math.log(e)-1),m>g?b-g-m:b-m-g}function Ft(t){if(t<.6){const b=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*b}else{const e=.422784335098467,r=.848044614534529,o=.565221050691933,l=.156513060486551,a=.017050248402265,c=.000497958207639485,u=1.24313399877507,f=.548042109832463,v=.10155218743983,h=.00713309612391,d=.000116165475989616,m=t-.5-.5,g=(((((c*m+a)*m+l)*m+o)*m+r)*m+e)/(((((d*m+h)*m+v)*m+f)*m+u)*m+1);return m*g}}function Yt(t){const e=.418938533204673,r=.0833333333333333,o=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;if(t<=.8)return Ft(t)-Math.log(t);if(t<=2.25)return Ft(t-.5-.5);if(t<10){let h=Math.round(t-1.25),d=t,m=1;for(let g=1;g<=h;++g)d+=-1,m*=d;return Ft(d-1)+Math.log(m)}let f=1/(t*t),v=(((((u*f+c)*f+a)*f+l)*f+o)*f+r)/t;return e+v+(t-.5)*(Math.log(t)-1)}function Fs(t,e){const r=.918938533204673;let o=Math.min(t,e),l=Math.max(t,e);function a(c,u,f){let v=Math.round(f-1),h=1;for(let d=1;d<=v;++d)f+=-1,h*=f/(u+f);return c+Math.log(h)+(Yt(u)+(Yt(f)-yl(u,f)))}if(o<8){if(o<1)return l<8?Yt(o)+(Yt(l)-Yt(o+l)):Yt(o)+dr(o,l);let c;if(o<2)return l<=2?Yt(o)+Yt(l)-yl(o,l):l<8?(c=0,a(c,o,l)):Yt(o)+dr(o,l);if(l<=1e3){let u=Math.round(o-1);c=1;for(let f=1;f<=u;++f){o+=-1;let v=o/l;c*=v/(v+1)}return c=Math.log(c),l>=8?c+Yt(o)+dr(o,l):a(c,o,l)}else{let u=Math.round(o-1);c=1;for(let f=1;f<=u;++f)o+=-1,c*=o/(o/l+1);return log(c)-u*log(l)+(Yt(o)+dr(o,l))}}else{let c=Wn(o,l),u=o/l,f=-(o-.5)*Math.log(u/(u+1)),v=l*hr(u);return f>v?Math.log(l)*-.5+r+c-v-f:Math.log(l)*-.5+r+c-f-v}}function kl(t){return(t==0?1024:-300)*.69314718055995*.99999}function Gr(t){const e=.0566749439387324,r=.0456512608815524,o=.333333333333333,l=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,u=.354508718369557;let f,v,h,d,m;return t<-.39||t>.57?(d=t+.5+.5,t-Math.log(d)):(t<-.18?(f=t+.3,f/=.7,m=e-f*.3):t>.18?(f=t*.75-.25,m=r+f/3):(f=t,m=0),v=f/(f+2),h=v*v,d=((a*h+l)*h+o)/((u*h+c)*h+1),h*2*(1/(1-v)-v*d)+m)}function hr(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,o=-.0178874546012214,l=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let u=t/(t+2),f=u*u,v=(((o*f+r)*f+e)*f+1)/(((c*f+a)*f+l)*f+1);return u*2*v}function Zi(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],l=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,v,h,d,m;if(h=Math.abs(t),h<=.5)return f=t*t,m=(((r[0]*f+r[1])*f+r[2])*f+r[3])*f+r[4]+1,d=((o[0]*f+o[1])*f+o[2])*f+1,t*(m/d);if(h<=4){m=((((((l[0]*h+l[1])*h+l[2])*h+l[3])*h+l[4])*h+l[5])*h+l[6])*h+l[7],d=((((((a[0]*h+a[1])*h+a[2])*h+a[3])*h+a[4])*h+a[5])*h+a[6])*h+a[7];let b=.5-Math.exp(-t*t)*m/d+.5;return t<0?-b:b}if(h>=5.8)return t>0?1:-1;v=t*t,f=1/v,m=(((c[0]*f+c[1])*f+c[2])*f+c[3])*f+c[4],d=(((u[0]*f+u[1])*f+u[2])*f+u[3])*f+1,f=(e-m/(v*d))/h;let g=.5-Math.exp(-v)*f+.5;return t<0?-g:g}function $i(t){const e=914041914819518e-24,r=.0238082361044469,o=-.499999999085958,l=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+l)*t+o)*t+1));{let u=Math.exp(t);return t>0?u*(.5-1/u+.5):u-.5-.5}}function on(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function ec(t){const e=.785398163397448,r=1.4616321449683622,o=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],l=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let u,f,v,h,d,m,g,b,p,w,_,A,M;if(_=Number.MAX_SAFE_INTEGER,h=.5/(.5*Number.EPSILON),_>h&&(_=h),M=1e-9,b=0,t<.5){if(fabs(t)<=M){if(t==0)return 0;b=-1/t}else{if(d=-t,p=e,d<=0&&(d=-d,p=-p),d>=_)return 0;if(v=Math.round(d),d-=v,v=Math.round(d*4),d=(d-v*.25)*4,f=v/2,f+f!=v&&(d=1-d),m=e*d,u=f/2,u+u!=f&&(p=-p),f=(v+1)/2,u=f/2,u+=u,u==f){if(m==0)return 0;b=p*(cos(m)/sin(m)*4)}else b=p*(sin(m)/cos(m)*4)}t=1-t}if(t<=3){g=t,A=o[0]*t;for(let y=1;y<=5;++y)g=(g+l[y-1])*t,A=(A+o[y])*t;return g=(A+o[6])/(g+l[5]),w=t-r,g*w+b}if(t<_){d=1/(t*t),g=d,A=a[0]*d;for(let y=1;y<=3;++y)g=(g+c[y-1])*d,A=(A+a[y])*d;b=A/(g+c[3])-.5/t+b}return b+log(t)}function tc(t,e,r,o){let l,a,c,u,f,v;if(t>o*.001){if(u=t*Math.log(r),u<Math.exparg(1))return 0;l=Math.exp(u)}else l=1;for(l*=e/t,v=o/t,f=t+1,u=r,c=u/f,f+=1,u=r*u,a=u/f,c+=a;Math.abs(r)>v;)f+=1,u=r*u,a=u/f,c+=a;return l*=t*c+1,l}function rc(t,e,r,o){const l=.577215664901533;let a,c,u,f,v,h,d=e*r;for(v=r-d,c=e*o<=.02?Math.log(r)+ec(e)+l+v:Math.log(d)+l+v,a=o*5*Math.abs(c),u=1,f=0,u+=1,v*=r-d/u,h=v/u,f+=h;Math.abs(h)>a;)u+=1,v*=r-d/u,h=v/u,f+=h;return-t*(c+f)}function qs(t,e,r,o){let l,a,c,u,f,v,h,d,m;if(r==0)return 0;if(h=Math.min(t,e),h>=1)v=t*Math.log(r)-Fs(t,e),a=Math.exp(v)/t;else if(d=Math.max(t,e),d<8)if(d<=1){if(a=Math.pow(r,t),a==0)return a;m=t+e,m>1?(f=t+e-1,v=(He(f)+1)/m):v=He(m)+1,c=(He(t)+1)*(He(e)+1)/v,a*=c*(e/m)}else{if(f=Ft(h),l=Math.round(d-1),l>=1){c=1;for(let _=1;_<=l;++_)d+=-1,c*=d/(h+d);f+=Math.log(c)}v=t*Math.log(r)-f,d+=-1,m=h+d,m>1?(f=h+d-1,u=(He(f)+1)/m):u=He(m)+1,a=Math.exp(v)*(h/t)*(He(d)+1)/u}else f=Ft(h)+dr(h,d),v=t*Math.log(r)-f,a=h/t*Math.exp(v);if(a==0||t<=o*.1)return a;let g=o/t,b=0,p=0,w;for(c=1,b+=1,c*=(.5-e/b+.5)*r,w=c/(t+b),p+=w;b<1e7&&Math.abs(w)>g;)b+=1,c*=(.5-e/b+.5)*r,w=c/(t+b),p+=w;return t*p>-1?a*=t*p+1:a=0,a}function Yn(t,e,r,o,l,a){let c,u,f,v,h,d=t+e,m=t+1;if(l>1&&t>=1&&d>=m*1.1?(f=Math.round(Math.abs(kl(1))),u=Math.round(kl(0)),f>u&&(f=u),v=Math.exp(-f)):(f=0,v=1),c=oc(f,t,e,r,o)/t,l==1||c==0)return c;let g=l-1,b=v;if(u=0,e>1){if(o>1e-4){let p=(e-1)*r/o-t;p>=1&&(u=p<g?Math.round(p):g)}else u=g;for(let p=0;p<u;++p)h=p,v*=(d+h)/(m+h)*r,b+=v}for(let p=u;p<g&&(h=p,v*=(d+h)/(m+h)*r,b+=v,!(v<=a*b));++p);return c*=b,c}function nc(t,e,r,o,l,a){let c,u,f,v,h,d,m,g,b,p,w,_,A,M,y,k,z,C,E;if(!Number.isFinite(l)||(E=sc(t,e,r,o),Number.isNaN(E)))return Number.NaN;if(E==0)return 0;for(c=l+1,b=e/t,p=1/t+1,M=o+1,f=0,v=1,d=t+1,_=0,A=1,y=1,k=c/p,h=p/c,f+=1,m=f/t,g=f*(e-f)*r,u=t/d,C=v*(v+b)*u*u*(g*r),u=(m+1)/(p+m+m),z=f+g/d+u*(c+f*M),v=m+1,d+=2,m=C*_+z*y,_=y,y=m,m=C*A+z*k,A=k,k=m,w=h,h=y/k,_/=k,A/=k,y=h,k=1;f<1e4&&(f+=1,m=f/t,g=f*(e-f)*r,u=t/d,C=v*(v+b)*u*u*(g*r),u=(m+1)/(p+m+m),z=f+g/d+u*(c+f*M),v=m+1,d+=2,m=C*_+z*y,_=y,y=m,m=C*A+z*k,A=k,k=m,w=h,h=y/k,!(Math.abs(h-w)<=a*h));)_/=k,A/=k,y=h,k=1;return E*h}function sc(t,e,r,o){const l=.398942280401433;let a,c,u,f,v,h,d,m,g;if(r==0||o==0)return 0;if(d=Math.min(t,e),d<8){let b,p;if(r<=.375?(b=Math.log(r),p=hr(-r)):o>.375?(b=Math.log(r),p=Math.log(o)):(b=hr(-o),p=Math.log(o)),h=t*b+e*p,d>=1)return h-=Fs(t,e),Math.exp(h);if(m=Math.max(t,e),m>=8)return f=Ft(d)+dr(d,m),d*Math.exp(h-f);if(m<=1){let _=Math.exp(h);return _==0?0:(g=t+e,g>1?(f=t+e-1,h=(He(f)+1)/g):h=He(g)+1,c=(He(t)+1)*(He(e)+1)/h,_*(d*c)/(d/m+1))}if(f=Ft(d),a=Math.round(m-1),a>=1){c=1;for(let _=1;_<=a;++_)m+=-1,c*=m/(d+m);f=Math.log(c)+f}h-=f,m+=-1,g=d+m;let w;return g>1?(f=d+m-1,w=(He(f)+1)/g):w=He(g)+1,d*Math.exp(h)*(He(m)+1)/w}else{let b,p,w,_;return t<=e?(b=t/e,p=b/(b+1),w=1/(b+1),_=t-(t+e)*r):(b=e/t,p=1/(b+1),w=b/(b+1),_=(t+e)*o-e),u=-_/t,f=Math.abs(u)>.6?u-Math.log(r/p):Gr(u),u=_/e,v=Math.abs(u)<=.6?Gr(u):u-Math.log(o/w),h=Math.exp(-(t*f+e*v)),l*Math.sqrt(e*p)*h*Math.exp(-Wn(t,e))}}function oc(t,e,r,o,l){const a=.398942280401433;let c,u,f,v,h,d,m,g;if(d=Math.min(e,r),d<8){let b,p;if(o<=.375?(b=Math.log(o),p=hr(-o)):l>.375?(b=Math.log(o),p=Math.log(l)):(b=hr(-l),p=Math.log(l)),h=e*b+r*p,d>=1)return h-=Fs(e,r),on(t,h);if(m=Math.max(e,r),m>=8)return f=Ft(d)+dr(d,m),d*on(t,h-f);if(m<=1){let _=on(t,h);return _==0?_:(g=e+r,g>1?(f=e+r-1,h=(He(f)+1)/g):h=He(g)+1,c=(He(e)+1)*(He(r)+1)/h,_*(d*c)/(d/m+1))}f=Ft(d);let w=Math.round(m-1);if(w>=1){c=1;for(let _=1;_<=w;++_)m+=-1,c*=m/(d+m);f+=Math.log(c)}return h-=f,m+=-1,g=d+m,u=g>1?(He(g-1)+1)/g:He(g)+1,d*on(t,h)*(He(m)+1)/u}else{let b,p,w,_;e>r?(b=r/e,p=1/(b+1),w=b/(b+1),_=(e+r)*l-r):(b=e/r,p=b/(b+1),w=1/(b+1),_=e-(e+r)*o),-xl(r/e);let A=-_/e;return f=Math.abs(A)>.6?A-Math.log(o/p):Gr(A),A=_/r,v=Math.abs(A)>.6?A-Math.log(l/w):Gr(A),h=on(t,-(e*f+r*v)),a*Math.sqrt(r*p)*h*Math.exp(-Wn(e,r))}}function Os(t,e,r,o,l,a){let u=Array(30),f=Array(30),v=e-.5-.5,h=t+v*.5,d=o>.375?Math.log(r):hr(-o),m=-h*d;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+xl(He(e))+e*Math.log(m)+h*d,b=g-(dr(e,t)+e*Math.log(h)),p=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let w=p==0,_=l==0?0:Math.exp(Math.log(l)-b),A=lc(e,m,g,a),M=.25/(h*h),y=d*.25*d,k=A,z=k,C=1,E=1,N=0;for(let T=1;T<=30;++T){let R=e+N;k=(R*(R+1)*k+(m+R+1)*C)*M,N+=2,C*=y,E/=N*(N+1);let q=T-1;u[q]=E;let D=0;if(T>1){let S=e-T;for(let I=1;I<=q;++I)D+=S*u[I-1]*f[q-I],S+=e}f[q]=v*E+D/T;let F=f[q]*k;if(z+=F,z<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(F)<=a*(z+_))break}return l+=w?Math.exp(b+Math.log(z)):p*z,l}function lc(t,e,r,o){const l=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-Zi(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return _l(1,a)/a*l}}else if(e<1.1){let a=3,c=e,u=e/(t+3),f=o*.1/(t+1),v;for(a+=1,c*=-(e/a),v=c/(t+a),u+=v;Math.abs(v)>f;)a+=1,c*=-(e/a),v=c/(t+a),u+=v;let h=t*e*((u/6-.5/(t+2))*e+1/(t+1)),d=t*Math.log(e),m=He(t),g=m+1;if(e>=.25&&t<e/2.59||d>-.13394){let b=$i(d),p=((b+.5+.5)*h-b)*g-m;return p<=0?0:p*Math.exp(-r)}else return(.5-Math.exp(d)*g*(.5-h+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,u=e,f=e+(1-t),v=1,h,d;a=e*c+v*a,u=e*f+v*u,h=a/u,v+=1;let m=v-t;for(c=a+m*c,f=u+m*f,d=c/f;Math.abs(d-h)>=o*d;)a=e*c+v*a,u=e*f+v*u,h=a/u,v+=1,m=v-t,c=a+m*c,f=u+m*f,d=c/f;return d}}function ac(t,e,r,o){const a=1.12837916709551,c=.353553390593274,u=Array(21),f=Array(21),v=Array(21),h=Array(21);let d=t*Gr(-r/t)+e*Gr(r/e),m;if(m=Math.exp(-d),m==0)return 0;let g=Math.sqrt(d),b=g/c*.5,p=d+d,w,_,A,M;t<e?(w=t/e,_=1/(w+1),A=(e-t)/e,M=1/Math.sqrt(t*(w+1))):(w=e/t,_=1/(w+1),A=(e-t)/t,M=1/Math.sqrt(e*(w+1))),u[0]=A*.6666666666666666,v[0]=u[0]*-.5,h[0]=-v[0];let y=.5/a*_l(1,g),k=c,z=y+h[0]*M*k,C=1,E=w*w,N=1,T=M,R=b,q=p;for(let F=2;F<=20;F+=2){N*=E,u[F-1]=_*2*(w*N+1)/(F+2);let S=F+1;C+=N,u[S-1]=A*2*C/(F+3);for(let H=F;H<=S;++H){let B=(H+1)*-.5;f[0]=B*u[0];for(let re=2;re<=H;++re){let Z=0;for(let ee=1;ee<=re-1;++ee){let te=re-ee;Z+=(ee*B-te)*u[ee-1]*f[te-1]}f[re-1]=B*u[re-1]+Z/re}v[H-1]=f[H-1]/(H+1);let X=0;for(let re=1;re<=H-1;++re)X+=h[H-re-1]*v[re-1];h[H-1]=-(X+v[H-1])}y=c*R+(F-1)*y,k=c*q+F*k,R=p*R,q=p*q,T*=M;let I=h[F-1]*T*y;T*=M;let V=h[S-1]*T*k;if(z+=I+V,Math.abs(I)+Math.abs(V)<=o*z)break}let D=Math.exp(-Wn(t,e));return a*m*D*z}function ic(t,e,r,o){let a=0,c=0;function u(w,_,A,M){const y=qs(w,_,A,1e-15);return M?.5-y+.5:y}function f(w,_,A,M){const y=qs(_,w,A,1e-15);return M?y:.5-y+.5}function v(w,_,A,M,y,k){const z=nc(w,_,A,M,y,15000000000000002e-30);return k?.5-z+.5:z}function h(w,_,A,M,y){let k=Math.round(_);_=_-k,_===0&&(k=k-1,_=1);let z=Yn(_,w,M,A,k,1e-15);return A<=.7?(z=z+qs(w,_,A,1e-15),y?.5-z+.5:z):(w<=15&&(k=20,z=z+Yn(w,_,A,M,k,1e-15),w=w+k),z=Os(w,_,A,M,z,15*1e-15),y?.5-z+.5:z)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let d,m,g,b,p;if(t<=1||e<=1){if(r>.5?(p=!0,d=e,g=o,m=t,b=r):(p=!1,d=t,g=r,m=e,b=o),m<Math.min(1e-15,1e-15*d))return a=tc(d,m,g,1e-15),p?.5-a+.5:a;if(d<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=rc(d,m,g,1e-15),p?c:.5-c+.5;if(Math.max(d,m)>1){if(m<=1)return u(d,m,g,p);if(g>=.29)return f(d,m,b,p);if(g<.1&&Math.pow(g*m,d)<=.7)return u(d,m,g,p)}else{if(d>=Math.min(.2,m)||Math.pow(g,d)<=.9)return u(d,m,g,p);if(g>=.3)return f(d,m,b,p)}let w=!1;return Math.max(d,m)>1&&m>15?c=0:(w=!0,c=Yn(m,d,b,g,20,1e-15),m+=20),c=Os(m,d,b,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(w?c=Yn(m-n,d,b,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Os(m,d,b,g,c,15*1e-15),a=-expm1(c),p?.5-a+.5:a):(a=.5-c+.5,p?.5-a+.5:a)}else{let w=Number.isFinite(t+e)?t>e?(t+e)*o-e:t-(t+e)*r:t*o-e*r;const _=w<0;let A,M,y,k;if(_?(w=-w,A=e,y=o,M=t,k=r):(A=t,y=r,M=e,k=o),M<40)return M*y<=.7?u(A,M,y,_):h(A,M,y,k,_);if(A>M){if(M<=100||w>M*.03)return v(A,M,y,k,w,_)}else{if(A<=100)return v(A,M,y,k,w,_);if(w>A*.03)return v(A,M,y,k,w,_)}return a=ac(A,M,w,1e-15*100),_?.5-a+.5:a}}function El(t){const e=t.nrows,r=t.ncols;if(e<r){const c=El(t.subset([],kt.seq(1,e)));return{Q:c.Q,R:uc(c.Q,t)}}let o=it.eye(e),l=t.t();for(let c=1;c<=r;c++)for(let u=e;u>=c+1;u--){const f=l.v.subarray((u-2)*r,u*r),v=o.v.subarray((u-2)*e,u*e),h=f.slice(),d=v.slice(),[m,g,b]=cc(h[c-1],h[c-1+r]);for(let p=0;p<r;p++)f[p]=h[p]*m+h[p+r]*g,f[p+r]=h[p]*-g+h[p+r]*m,v[p]=d[p]*m+d[p+e]*g,v[p+e]=d[p]*-g+d[p+e]*m;for(let p=r;p<e;p++)v[p]=d[p]*m+d[p+e]*g,v[p+e]=d[p]*-g+d[p+e]*m}const a=kt.seq(1,r);return{Q:e===r?o:o.subset([],a),R:e===r?l.t():l.subset([],a).t()}}function cc(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),u=1/c;return[u,a*u,t*c]}const r=t/e,o=Math.sqrt(1+r*r),l=1/o;return[r*l,l,e*o]}function Cl(t){return typeof t=="number"}function uc(t,e){if(e===void 0&&(e=t),!mr(t)||!mr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,o=t.ncols,l=e.nrows,a=e.ncols,c=o,u=a,f=r,v=new Float64Array(c*u);for(let h=0;h<u;h++){const d=e.v.subarray(h*l,(h+1)*l),m=v.subarray(h*c,(h+1)*c);for(let g=0;g<c;g++){const b=t.v.subarray(g*r,(g+1)*r);let p=0;for(let w=0;w<f;w++)p+=b[w]*d[w];m[g]=p}}return new it(v,c,u)}function Al(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Se(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new it(t.v,e,r)}function mr(t){return t&&t.constructor===it}function fc(t,e,r){return new it(new Float64Array(t),e,r)}const we=class we{constructor(e,r,o){if(!ArrayBuffer.isView(e)||e.constructor!==we.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||o===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*o)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=o}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return we.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const o=we.eye(e),l=we.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],u=e-1;for(let f=0;f<e;f++)l.v[u*e+f]=o.v[u*e+f]/c;for(let f=e-2;f>=0;f--){let v=o.getcolumn(f+1);const h=a.getcolref(f+1);for(let d=f+1;d<e;d++){const m=l.getcolumn(d+1);v=v.subtract(m.mult(h[d]))}l.v.set(v.divide(h[f]).v,f*e)}return l.t()}if(this.islowertriangular()){const o=this.diag();if(dl(o)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=we.eye(e),a=we.eye(e),c=this.t(),u=0,f=c.v[0];for(let v=0;v<e;v++)a.v[u*e+v]=l.v[u*e+v]/f;for(let v=1;v<e;v++){let h=l.getcolumn(v+1);const d=c.getcolref(v+1);for(let m=0;m<v;m++){const g=a.getcolumn(m+1);h=h.subtract(g.mult(d[m]))}a.v.set(h.divide(d[v]).v,v*e)}return a.t()}const r=El(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>we.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>we.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let o=0;o<e;o++)r[o]=this.getcolref(o+1)[o];return new Se(r)}t(){const e=this.nrows,r=this.ncols,o=new we.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const a=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let c=0;c<this.nrows;c++)o[c*r+l]=a[c]}return new we(o,r,e)}for(let l=0;l<this.nrows;l++){const a=o.subarray(l*r,(l+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+l]}return new we(o,r,e)}dot(e){if(Pe(e))return new we(Bs(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(mr(e))return new we(Bs(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,o){if(mr(e))return new we(Ds(this.v,e.v,r),this.nrows,this.ncols);if(Cl(e))return new we(Vs(this.v,e,r),this.nrows,this.ncols);if(!Pe(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(o===void 0&&(o=e.length===this.ncols?2:1),o===2&&e.length===this.ncols){const l=new we.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Vs(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new we(l,this.nrows,this.ncols)}if(o===1&&e.length===this.nrows){const l=new we.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Ds(this.getcolref(a+1),e.v,r),a*this.nrows);return new we(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e,r){if(r===void 0&&(r=2),r==2){const o=this.ncols,l=new we.valuesConstructor(o);for(let a=0;a<o;a++)l[a]=e(this.getcolref(a+1));return new Se(l)}if(r==1)return this.t().apply(e,2);if(r==0){const o=this.v.length,l=new we.valuesConstructor(o);for(let a=0;a<o;a++)l[a]=e(this.v[a]);return new we(l,this.nrows,this.ncols)}}replace(e,r,o){typeof r=="number"&&(r=[r]),r.length===0&&(r=kt.seq(1,this.nrows)),Gt(r)||(r=Ut(r)),typeof o=="number"&&(o=[o]),o.length===0&&(o=kt.seq(1,this.ncols)),Gt(o)||(o=Ut(o));const l=r.length,a=o.length;if(Yr(r)<1||Er(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Yr(o)<1||Er(o)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<o.length;c++){const u=e.getcolref(c+1),f=(o.v[c]-1)*this.nrows;for(let v=0;v<r.length;v++){const h=r.v[v];this.v[f+h-1]=u[v]}}return this}copy(){return new we(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Se.valuesConstructor(this.ncols);for(let o=0;o<this.ncols;o++)r[o]=this.getcolref(o+1)[e-1];return new Se(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Se(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Ut([e])),typeof r=="number"&&(r=Ut([r])),Array.isArray(e)&&(e=e.length===0?null:Ut(e)),Array.isArray(r)&&(r=r.length===0?null:Ut(r)),e!==null&&!Gt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Gt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Yr(e)<1||Er(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Yr(r)<1||Er(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const u=r.length,f=this.nrows,v=new we.valuesConstructor(f*u);for(let h=0;h<r.length;h++)v.set(this.v.slice((r.v[h]-1)*this.nrows,r.v[h]*this.nrows),h*this.nrows);return new we(v,f,u)}if(r==null)return this.t().subset(r,e).t();const o=e.length,l=r.length,a=new we.valuesConstructor(o*l);let c=new we.valuesConstructor(o);for(let u=0;u<l;u++){const f=this.v.subarray((r.v[u]-1)*this.nrows,r.v[u]*this.nrows);for(let v=0;v<o;v++)c[v]=f[e.v[v]-1];a.set(c,u*o)}return new we(a,o,l)}toString(e){function r(c,u){return" ".repeat(u-c.length)+c}e===void 0&&(e=2),this.ncols;const o=Math.round(Math.abs(Math.log10(Er(this.v))))+e+3;let l="";const a=this.t();for(let c=1;c<=a.ncols;c++)l+=Array.from(a.getcolref(c)).map(u=>r(u.toFixed(e),o)).join(" ")+`
`;return l}toCSV(e,r,o,l){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=l!=null&&l.length>0,c=o!=null&&o.length>0;if(a&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&o.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const u=this.t();let f=c?o.join(e)+`
`:"";for(let v=1;v<=u.ncols;v++)f=f+(a?l[v-1]+e:"")+u.getcolref(v).join(e)+`
`;return f=f.replace(/\./g,r),f}static randn(e,r,o,l){return Al(pl(e*r,o,l),e,r)}static rand(e,r,o,l){return Al(bl(e*r,o,l),e,r)}static eye(e,r){r===void 0&&(r=e);const o=new Float64Array(e*r);for(let l=0;l<Math.min(e,r);l++)o[l*e+l]=1;return new we(o,e,r)}static diagm(e){if(!Pe(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,o=new Float64Array(r*r);for(let l=0;l<r;l++)o[l*r+l]=e.v[l];return new we(o,r,r)}static zeros(e,r){return r===void 0&&(r=e),new we(new Float64Array(e*r),e,r)}static ones(e,r){return we.fill(1,e,r)}static fill(e,r,o){o===void 0&&(o=r);const l=new Float64Array(r*o);for(let a=0;a<l.length;a++)l[a]=e;return new we(l,r,o)}static outer(e,r,o){if(Array.isArray(e)&&(e=Je(e)),Array.isArray(r)&&(r=Je(r)),!Pe(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Pe(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=we.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],u=l.getcolref(a+1);for(let f=0;f<e.length;f++)u[f]=o(e.v[f],c)}return l}static parseCSV(e,r,o,l){function a(w){return w.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let u=e.split(/\n/),f=[],v=0;const h=u[0].split(r);(o||o===void 0&&a(h))&&(f=h,v=1),u=u.filter(w=>w.trim().length>1);let d=[],m=0;l&&(m=1);const g=u.length-v,b=h.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const p=we.zeros(b,g);for(let w=v;w<g+v;w++){const _=u[w].split(r);let A;if(l?(d[w-v]=_[0],A=_.slice(1).map(M=>Number.parseFloat(M.trim().replace(c,".")))):A=_.map(M=>Number.parseFloat(M.trim().replace(c,"."))),A.some(M=>Number.isNaN(M)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=b)throw Error("Wrong number of values in row #"+w);p.v.set(new Float64Array(A),(w-v)*b)}return{values:p.t(),header:f,labels:d,sep:r,dec:c}}};Pr(we,"valuesConstructor",Float64Array),Pr(we,"TOLERANCE",Math.pow(10,-9));let it=we;function Pe(t){return t&&t.constructor===Se}function Je(t){return new Se(new Float64Array(t))}const Qe=class Qe{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new kt.valuesConstructor(this.length);let o=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[o]=l+1,o=o+1);return new kt(r.subarray(0,o))}filter(e){const r=new Qe.valuesConstructor(this.length);let o=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[o]=this.v[l],o=o+1);return new Qe(r.subarray(0,o))}shuffle(){return new Qe(zl(this.v))}sort(e){return new Qe(Pl(this.v,e))}sortind(e){return new kt(Tl(this.v,e))}rep(e){return Ml(this,e)}repeach(e){return Nl(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=kt.seq(1,this.length)),Gt(r)||(r=Ut(r));const o=r.length;if(Yr(r)<1||Er(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==o)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<r.length;l++){const a=r.v[l];this.v[a-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=Ut([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?kt.bool2ind(e):Ut(e)),!Gt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=Qe.zeros(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");o.v[l]=this.v[e.v[l]-1]}return o}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new Qe(this.v.slice(e-1,r))}copy(){return new Qe(this.v.slice())}dot(e){return e===void 0&&(e=this),Bs(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Pe(e))return new Qe(Ds(this.v,e.v,r));if(Cl(e))return new Qe(Vs(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e){const r=this.v.length,o=Qe.zeros(r);for(let l=0;l<r;l++)o.v[l]=e(this.v[l]);return o}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),o=new Qe.valuesConstructor(r);let l=0;for(const a of e)typeof a=="number"?(o[l]=a,l+=1):(o.set(Pe(a)?a.v:new Qe.valuesConstructor(a),l),l+=typeof a=="number"?1:a.length);return new Qe(o)}static seq(e,r,o){return Sl(e,r,o,Qe)}static randn(e,r,o){return pl(e,r,o)}static rand(e,r,o){return bl(e,r,o)}static zeros(e){return new Qe(new Qe.valuesConstructor(e))}static ones(e){return Qe.fill(1,e)}static fill(e,r){const o=new Qe.valuesConstructor(r);for(let l=0;l<o.length;l++)o[l]=e;return new Qe(o)}};Pr(Qe,"valuesConstructor",Float64Array);let Se=Qe;function Gt(t){return t.constructor===kt}function Ut(t){return new kt(new Int32Array(t))}const lt=class lt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new lt.valuesConstructor(this.length);let o=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[o]=l+1,o=o+1);return new lt(r.subarray(0,o))}filter(e){const r=new lt.valuesConstructor(this.length);let o=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[o]=this.v[l],o=o+1);return new lt(r.subarray(0,o))}shuffle(){return new lt(zl(this.v))}sort(e){return new lt(Pl(this.v,e))}sortind(e){return new lt(Tl(this.v,e))}rep(e){return Ml(this,e)}repeach(e){return Nl(this,e)}subset(e){if(typeof e=="number"&&(e=Ut([e])),Array.isArray(e)&&(e=Ut(e)),!Gt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=new lt.valuesConstructor(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");o[l]=this.v[e.v[l]-1]}return new lt(o)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new lt(this.v.slice(e-1,r))}static seq(e,r,o){return Sl(e,r,o,lt)}static ones(e){return lt.fill(1,e)}static fill(e,r){const o=new lt.valuesConstructor(r);for(let l=0;l<o.length;l++)o[l]=e;return new lt(o)}static bool2ind(e){let r=0;const o=new lt.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(o[r]=l+1,r=r+1);return new lt(o.subarray(0,r))}};Pr(lt,"valuesConstructor",Int32Array);let kt=lt;function Sl(t,e,r,o){r===void 0&&(r=t<=e?1:-1);const l=Math.floor((e-t)/r)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const a=new o.valuesConstructor(l);for(let c=0;c<l;c++)a[c]=t+c*r;return new o(a)}function Ml(t,e){const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let l=1;l<=e;l++)for(let a=0;a<t.length;a++)o[(l-1)*t.length+a]=t.v[a];return new t.constructor(o)}function Nl(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let l=0;l<t.length;l++)for(let a=0;a<e;a++)o[l*e+a]=t.v[l];return new t.constructor(o)}function Ds(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const o=new t.constructor(t.length);for(let l=0;l<t.length;l++)o[l]=r(t[l],e[l]);return o}function Vs(t,e,r){const o=new t.constructor(t.length);for(let l=0;l<t.length;l++)o[l]=r(t[l],e);return o}function Bs(t,e,r,o,l,a){if(o!==l)throw Error("_dot: matrix dimensions do not much.");const c=r,u=a,f=o,v=new t.constructor(c*u);for(let h=0;h<u;h++){const d=e.subarray(h*l,(h+1)*l),m=v.subarray(h*c,(h+1)*c);for(let g=0;g<f;g++){const b=d[g],p=t.subarray(g*r,(g+1)*r);for(let w=0;w<c;w++)m[w]+=p[w]*b}}return v}function zl(t){let e=t.slice(),r=e.length,o,l;for(;r;)l=Math.floor(Math.random()*r--),o=e[r],e[r]=e[l],e[l]=o;return e}function Pl(t,e=!1){return e?t.slice().sort((r,o)=>o-r):t.slice().sort((r,o)=>r-o)}function Tl(t,e=!1){const r=kt.seq(1,t.length).v;return e?r.sort((o,l)=>t[l-1]-t[o-1]):r.sort((o,l)=>t[o-1]-t[l-1])}function vc(t,e,r){return 5*t*e+e+4*r*e}function dc(t,e){return 2+2*t+t*e+17*e}function st(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const o=t.ncols,l=t.ncomp;let a,c;switch(e){case"mX":a=2,c=o;break;case"sX":a=2+o,c=o;break;case"loadings":case"xloadings":a=2+2*o+(r-1)*o,c=o;break;case"P":a=2+2*o,c=r*o;break;case"eigenvals":case"xeigenvals":a=2+2*o+o*l,c=l;break;case"cq0":a=2+2*o+o*l+l,c=l;break;case"cNq":a=2+2*o+o*l+2*l,c=l;break;case"rq0":a=2+2*o+o*l+3*l,c=l;break;case"rNq":a=2+2*o+o*l+4*l,c=l;break;case"ch0":a=2+2*o+o*l+5*l,c=l;break;case"cNh":a=2+2*o+o*l+6*l,c=l;break;case"rh0":a=2+2*o+o*l+7*l,c=l;break;case"rNh":a=2+2*o+o*l+8*l,c=l;break;case"cr0":a=2+2*o+o*l+9*l,c=l;break;case"cNr":a=2+2*o+o*l+10*l,c=l;break;case"rr0":a=2+2*o+o*l+11*l,c=l;break;case"rNr":a=2+2*o+o*l+12*l,c=l;break;case"cg0":a=2+2*o+o*l+13*l,c=l;break;case"cNg":a=2+2*o+o*l+14*l,c=l;break;case"rg0":a=2+2*o+o*l+15*l,c=l;break;case"rNg":a=2+2*o+o*l+16*l,c=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function Zt(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const o=t.ncols,l=t.nrows,a=t.ncomp;let c,u;switch(e){case"scores":case"xscores":c=(r-1)*l,u=l;break;case"hdist":c=l*a+(r-1)*l,u=l;break;case"qdist":c=2*l*a+(r-1)*l,u=l;break;case"xcumexpvar":case"cumexpvar":c=3*l*a,u=a;break;case"fdistc":c=3*l*a+a+(r-1)*l,u=l;break;case"fdistr":c=4*l*a+a+(r-1)*l,u=l;break;case"gdist":c=5*l*a+a+(r-1)*o,u=o;break;case"rdist":c=5*l*a+a+o*a+(r-1)*o,u=o;break;case"idistc":c=5*l*a+a+2*o*a+(r-1)*o,u=o;break;case"idistr":c=5*l*a+a+3*o*a+(r-1)*o,u=o;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+u)}function Gn(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let o=0;o<t.length;o++){const l=t[o];if(l<e||l>r)return!1}return!0}function Ws(t,e,r,o,l,a,c){if(!mr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const u=a&&Array.isArray(a)?a.length:0;if(!Gn(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!Gn(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const v=e.nrows-u,h=e.ncols-f;if(v<3||h<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(o===void 0&&(o=!0),l===void 0&&(l=!1),r===void 0&&(r=Math.min(v-1,h)),r<1||r>Math.min(v-1,h))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const d=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,d/e.v.BYTES_PER_ELEMENT);let m=null;if(u>0){const M=new Int32Array(a);m=t._malloc(M.length*M.BYTES_PER_ELEMENT),t.HEAP32.set(M,m/M.BYTES_PER_ELEMENT)}let g=null;if(f>0){const M=new Int32Array(c);g=t._malloc(M.length*M.BYTES_PER_ELEMENT),t.HEAP32.set(M,g/M.BYTES_PER_ELEMENT)}const b=dc(h,r),p=Float64Array,w=t._malloc(b*p.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[d,e.nrows,e.ncols,r,o,l,w,m,u,g,f])!==1)throw new Error("pca_fit: PCA failed.");const A=t.HEAPF64.slice(w/p.BYTES_PER_ELEMENT,w/p.BYTES_PER_ELEMENT+b);return t._free(d),t._free(w),m&&t._free(m),g&&t._free(g),{class:["pcamodel"],v:A,ncomp:r,nrows:v,ncols:h,exclvars:c,center:o,scale:l}}function ln(t,e,r,o){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!mr(r))throw new Error("pca_predict: X must be a matrix.");o||(o=[]);const l=o&&Array.isArray(o)?o.length:0;if(!Gn(o,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=r.nrows-l;r.ncols===e.ncols&&(a=0);const u=r.ncols-a;if(c<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const f=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,f/r.v.BYTES_PER_ELEMENT);let v=null;if(l>0){const E=new Int32Array(o);v=t._malloc(E.length*E.BYTES_PER_ELEMENT),t.HEAP32.set(E,v/E.BYTES_PER_ELEMENT)}let h=null;if(a>0){const E=new Int32Array(e.exclvars);h=t._malloc(E.length*E.BYTES_PER_ELEMENT),t.HEAP32.set(E,h/E.BYTES_PER_ELEMENT)}const d=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,d/e.v.BYTES_PER_ELEMENT);const m=vc(c,e.ncomp,u),g=Float64Array,b=t._malloc(m*g.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[f,r.nrows,r.ncols,d,b,v,l,h,a])!==1)throw new Error("pca_predict: PCA prediction failed.");const w=t.HEAPF64.slice(b/g.BYTES_PER_ELEMENT,b/g.BYTES_PER_ELEMENT+m);t._free(f),t._free(d),t._free(b),v&&t._free(v),h&&t._free(h);const _={class:["pcares"],v:w,ncomp:e.ncomp,nrows:c,ncols:u,outliers:o,exclvars:e.exclvars,center:e.center,scale:e.scale},A=new Array(e.ncomp),M=new Array(e.ncomp),y=new Array(e.ncomp),k=new Array(e.ncomp),z=new Array(e.ncomp),C=Zt(_,"xcumexpvar");z[0]=1,k[0]=C[0],y[0]=1-C[0],A[0]=C[0],M[0]=1-C[0];for(let E=1;E<e.ncomp;E++)z[E]=E+1,k[E]=C[E],y[E]=1-C[E],A[E]=C[E]-C[E-1],M[E]=1-A[E];return _.stat={components:z,resvar:M,expvar:A,cumexpvar:k,cumresvar:y},_}function hc(t,e,r,o,l,a,c,u){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!mr(r))throw new Error("pcapcv: X must be a matrix.");u||(u=[]);const f=u&&Array.isArray(u)?u.length:0;if(!Gn(u,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const v=e.exclvars.length,h=r.nrows-f,d=r.ncols-v;if(h<3)throw new Error("pcapcv: X must have at least 3 rows.");if(d!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(l)||l<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&l>h)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(o)||o<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?h-2:h-Math.ceil(h/l)-1,d,e.ncomp);if(o>m)throw new Error('pcapcv: the value of "ncomp" is too large.');const g=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,g/r.v.BYTES_PER_ELEMENT);let b=null;if(f>0){const z=new Int32Array(u);b=t._malloc(z.length*z.BYTES_PER_ELEMENT),t.HEAP32.set(z,b/z.BYTES_PER_ELEMENT)}let p=null;if(v>0){const z=new Int32Array(e.exclvars);p=t._malloc(z.length*z.BYTES_PER_ELEMENT),t.HEAP32.set(z,p/z.BYTES_PER_ELEMENT)}const w=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,w/e.v.BYTES_PER_ELEMENT);const _=h*d,A=r.v.constructor,M=t._malloc(_*A.BYTES_PER_ELEMENT);if(t.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,r.nrows,r.ncols,o,e.center,e.scale,a,l,c,w,M,b,f,p,v])!==1)throw new Error("pcapcv: PCVPCA failed.");const k=t.HEAPF64.slice(M/A.BYTES_PER_ELEMENT,M/A.BYTES_PER_ELEMENT+_);return t._free(g),t._free(w),t._free(M),b&&t._free(b),p&&t._free(p),new it(k,h,d)}function Un(t,e,r=1){const o=Math.round((e-t+1)/r),l=Array(o);for(let a=0;a<o;a++)l[a]=t+a*r;return l}function mc(t,e){let r,o,l;if(e.length>0){const a=t.values.nrows,c=t.objindices,u=a-e.length;r=Array(u),o=Array(u),l=Array(u);let f=0;for(let v=0;v<a;v++)e.includes(v)||(r[f]=c[v],o[f]=t.classes[v],l[f]=t.objlabels[v],f=f+1)}else r=t.objindices,l=t.objlabels,o=t.classes;return[r,l,o]}function Hn(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Ys(t,e,r,o){const[l,a,c]=mc(r,o),u=ln(t,e,r.values,o);u.hash=Hn(),u.objindices=l,u.objlabels=a,u.classes=c,u.classNames=r.classNames,u.varlabels=r.varlabels,u.eigenvals=st(e,"eigenvals"),u.cNh=st(e,"cNh"),u.cNq=st(e,"cNq"),u.ch0=st(e,"ch0"),u.cq0=st(e,"cq0"),u.rNh=st(e,"rNh"),u.rNq=st(e,"rNq"),u.rh0=st(e,"rh0"),u.rq0=st(e,"rq0");const f=e.nrows;return u.T2lim=2*(f-1)/(f-2)*wl(.95,2,f-2),u}function gc(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function an(t){return t.some(e=>Number.isNaN(e))}function Cr(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ll(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function bc(t,e,r,o,l,a,c,u=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let v=Ll(t);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");v=v.filter(S=>S.replaceAll(e,"").trim().length>0);const h=v[0].split(e);if(h.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let d=0,m;const g=r!=="no";(g||g===void 0&&an(firstRow))&&(m=h,d=1);const b=v.length-d;if(b<1)throw new Error("Data file should contain at least 1 row with values.");let p,w,_,A=Array(b);o?(p=g?Cr(m[0]):"",_=Array(b),w=1):(p="",_=[],w=0);let M,y=[],k;l?(M=g?Cr(m[w]):"",k=Array(b),w=w+1):(M="",k=[]);const z=h.length-w;if(z<1)throw new Error("Data file should contain at least 1 column with values.");const C=it.zeros(z,b);for(let S=d;S<b+d;S++){const I=S-d;A[I]=I;let V=v[S].split(e);if(o&&(_[I]=V[0],V.shift()),l){const B=V[0];k[I]=B,V.shift(),(y.length===0||y.indexOf(B)<0)&&y.push(B)}const H=f==="."?V.map((B,X)=>Number.parseFloat(B.trim())):V.map((B,X)=>Number.parseFloat(B.trim().replace(f,".")));if(H.some(B=>Number.isNaN(B)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(H.length!=z)throw new Error("Wrong number of values in row #"+S);C.v.set(new Float64Array(H),(S-d)*z)}if(!o||_.length!==b){_=Array(b);for(let S=0;S<b;S++)_[S]="O"+(S+1)}_=_.map(S=>Cr(S)),k=k.map(S=>Cr(S)),y=y.map(S=>Cr(S));let E,N=Array(z),T=Array(z);if(m&&m.length===z+w){E=m.map(S=>Cr(S)).slice(w);for(let S=0;S<z;S++)N[S]=S>=u?S-u:S,T[S]=S>=u?S-u+1:S+1}else{E=Array(z);for(let S=0;S<z;S++)N[S]=S>=u?S-u:S,E[S]=S>=u?"V"+(S-u+1):"Y"+(S+1),T[S]=S>=u?S-u+1:S+1}let R;if(r==="values"){if(R=f==="."?E.map((S,I)=>I<u?I:Number.parseFloat(S.trim())):E.map((S,I)=>I<u?I:Number.parseFloat(S.trim().replace(f,"."))),R.some(S=>Number.isNaN(S)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else R=T;Array.isArray(R)||(R=[]),a||(a=""),c||(c=""),a=R.length>0&&a.length>0?a:"Variables",c=R.length>0&&c.length>0?c:"";const q=a+(c.length>0?", "+c:""),D=R[1]<R[0];return{values:C.t(),nresp:u,header:r,hasLabels:o,hasClassNames:l,labelsVarname:p,classLabelsVarname:M,objlabels:_,objindices:A,varlabels:E,varvalues:R,varindices:N,varrev:D,classes:k,classNames:y,sep:e,dec:f,varvaluesName:a,varvaluesUnits:c,varAxisTitle:q}}function pc(t){if(an(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let o=2;o<e;o++){let l=[];for(let v=1;v<t.length;v++)l.push(t[v][o]);const a=t[0][o],c=Wr(l),u=Ps(l),f=Math.abs((a-c)/u);r.push(f)}return r.every(o=>o>5)}function wc(t){const e=",",r=t[0].split(e),o=t[1].split(e),l=r.length,a=o.length,c=";",u=t[0].split(c),f=t[1].split(c),v=u.length,h=f.length;let d,m;if(l>1&&a>1&&l===a&&l>v)m=e,d=l;else if(v>1&&h>1&&v===h)m=c,d=v;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",d]}function _c(t,e=0){const r=Ll(t),o=r.length;if(o<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,a,c]=wc(r),u=Math.min(c,5),f=Math.min(o,5);let v=r[0].split(l).length,h=r.slice(0,f).map(N=>N.split(l).slice(0,u));h=h.map(N=>N.map(T=>Cr(T)));const d=h.map(N=>gc(N.slice(),a));for(let N=1;N<f;N++)if(an(d[N].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const m=pc(d);let g=0;const b=m?1:0,p=b+1,w=h[b][0],_=h[p][0],A=d[b][0],M=d[p][0],y=d[b][1],k=d[p][1];let z=!1,C=!1;if(Number.isNaN(A)&&Number.isNaN(M)&&w!==_?(z=!0,g=g+1):Number.isNaN(y)&&Number.isNaN(k)&&w!==_&&(z=!0,C=!0,g=g+2),!C){const N=z?1:0,T=d[b][N],R=d[p][N];C=an([T,R]),g=g+C}let E="no";if(m){g>0?h[0].slice(g+e):h[e];const N=g>0?d[0].slice(g+e):d[e];E=an(N)?"labels":"values"}return[l,z,C,E,v]}function yc(t){const e=t.values.t(),r=t.sep,o=t.dec;let l=null;t.header!=="no"&&(l=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),l&&t.hasClassNames&&(l=[t.classLabelsVarname,...l]),l&&t.hasLabels&&(l=[t.labelsVarname,...l]);const a=t.classes&&t.classes.length===e.ncols,c=t.objlabels&&t.objlabels.length===e.ncols;let u=l?l.join(r):"";for(let f=0;f<e.ncols;f++){let v=e.getcolref(f+1).join(r);o!=="."&&(v=v.replace(".",o)),a&&(v=t.classes[f]+t.sep+v),c&&(v=t.objlabels[f]+t.sep+v),u=u+`
`+v}return u=u+`
`,o!=="."&&(u=u.replace(/\./g,o)),u}function Gs(t,e){const r=yc(t),o=new Blob([r],{type:"text/csv"}),l=window.URL.createObjectURL(o),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download",`${e}.csv`),a.click()}function xc(t,e){const r=t.nresp?t.nresp:0,o=t.values,l=t.varvalues,a=t.varlabels,c=t.varindices,u=o.nrows,f=o.ncols,v=f-e.length,h=it.zeros(u,v),d=Array(v),m=Array(v),g=Array(v);let b=0;for(let p=0;p<r;p++){const w=u*p,_=u*b;h.v.set(o.v.slice(w,w+u),_),d[b]=l[p],m[b]=a[p],g[b]=c[p],b=b+1}for(let p=r;p<f;p++){if(e.includes(p-r))continue;const w=u*p,_=u*b;h.v.set(o.v.slice(w,w+u),_),d[b]=l[p],m[b]=a[p],g[b]=c[p],b=b+1}return{values:h,header:t.header,hasLabels:t.hasLabels,hasClassNames:t.hasClassNames,classNames:t.classNames,labelsVarname:t.labelsVarname,classLabelsVarname:t.classLabelsVarname,objlabels:t.objlabels,objindices:t.objindices,varlabels:m,varvalues:d,varindices:g,varrev:t.varrev,classes:t.classes,responses:t.responses,classNames:t.classNames,sep:t.sep,dec:t.dec,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits,varAxisTitle:t.varAxisTitle,fileName:t.fileName,nresp:r}}function kc(t){if(!t.length)return"";t.sort((l,a)=>l-a);let e=[],r=t[0],o=r;for(let l=1;l<t.length;l++)t[l]===o+1?o=t[l]:(r===o?e.push(`${r}`):e.push(`${r}-${o}`),r=t[l],o=r);return r===o?e.push(`${r}`):e.push(`${r}-${o}`),e.join(" ")}function Kn(t,e){return mr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Pe(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function Ec(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return fc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Je(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Us(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${o}${l}${a}${c}`}function Ur(t){return!t||Object.keys(t).length<1}const Cc=t=>t;function Ac(t,{delay:e=0,duration:r=400,easing:o=Cc}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:o,css:a=>`opacity: ${a*l}`}}var Sc=K('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function Mc(t,e){me(e,!0);function r(v){v.key==="Escape"&&e.closeModal()}var o=Sc();Ln("keydown",vs,r);var l=Y(o),a=Y(l),c=Y(a);c.__click=function(...v){var h;(h=e.closeModal)==null||h.apply(this,v)};var u=j(a,2),f=Y(u);vr(f,()=>e.children),qi(7,o,()=>Ac),P(t,o),ge()}tt(["click"]);function Rl(t,e){J(e,!0)}function Nc(t,e,r){const o=Us(new Date),l=e.appID+"-session-"+o+".json";s(r).date=o;const a=JSON.stringify(s(r),Kn),c=new Blob([a],{type:"text/json"}),u=window.URL.createObjectURL(c),f=document.createElement("a");f.setAttribute("href",u),f.setAttribute("download",l),f.click()}function zc(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var Pc=K('<sup style="color:red">β</sup>'),Tc=K('<li><button class="svelte-1cyr8za"> </button></li>'),Lc=K("<div><!></div>"),Rc=K('<div class="info-container svelte-1cyr8za"><!></div>'),jc=K('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function Ic(t,e){me(e,!0);let r=U(e,"tabs",19,()=>[]),o=U(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let a=ie(!1),c=ie(void 0),u=ie("Current session "),f=ie(!1);function v(y){J(u,y,!0),J(f,!0),setTimeout(()=>{J(u,"Current session "),J(f,!1)},1e3)}function h(){J(a,!1)}function d(y){s(c).tab=y}function m(){const y=indexedDB.open(l,1);y.onsuccess=k=>{const C=k.target.result.transaction(e.appID,"readwrite");C.objectStore(e.appID).delete("session"),C.oncomplete=()=>{J(c,e.initSession(),!0),v("Session was reinitialzed.")},C.onerror=()=>console.error("Failed to session from DB.")}}function g(y,k){window.localStorage.removeItem(e.appID+"-blocked");const z=indexedDB.open(l,1);z.onsuccess=C=>{const T=C.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);T.put(y,"session"),T.put(Us(new Date),"session-update")}}function b(){new Promise((y,k)=>{const z=indexedDB.open(l,1);z.onsuccess=C=>{const R=C.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");R.onsuccess=()=>y(R.result),R.onerror=()=>k(R.error)}}).then(y=>{p(y),J(u,"Last session is restored "),J(f,!0),setTimeout(()=>{J(u,"Current session "),J(f,!1)},1500)}).catch(y=>{console.error(y),J(c,e.initSession(),!0)})}function p(y){if(!y||y==="undefined"){J(c,e.initSession(),!0);return}const k=JSON.parse(y,Ec);J(c,e.checkSession(k)?k:e.initSession(e.appID),!0)}function w(y){e.resetSession(s(c));const k=new FileReader;k.onload=()=>{p(k.result),y.target.value=""},k.readAsText(y.target.files[0])}Wi(()=>{const y=e.appID,k=indexedDB.open(l,1);k.onupgradeneeded=z=>{const C=z.target.result;C.objectStoreNames.contains(y)||C.createObjectStore(y)},k.onsuccess=z=>{b()}});var _=de(),A=$(_);{var M=y=>{var k=jc(),z=Y(k),C=Y(z),E=Y(C),N=j(E,2),T=Y(N),R=j(T);{var q=Ee=>{var Ie=Pc();P(Ee,Ie)};G(R,Ee=>{o()&&Ee(q)})}var D=j(N,2),F=Y(D),S=j(C,2);Ue(S,21,r,Xe,(Ee,Ie,ft)=>{var Me=Tc();let We;var nt=Y(Me);nt.__click=()=>d(ft),nt.__keydown=()=>d(ft);var Ct=Y(nt);oe(Pt=>{We=ut(Me,1,"nav-item svelte-1cyr8za",null,We,Pt),ae(Ct,s(Ie).name)},[()=>({selected:s(c).tab===ft})]),P(Ee,Me)});var I=j(z,2);Ue(I,21,r,Xe,(Ee,Ie,ft)=>{var Me=Lc();let We;var nt=Y(Me);As(nt,()=>s(Ie).component,(Ct,Pt)=>{Pt(Ct,{get WASM(){return e.WASM},get session(){return s(c)},backupSession:g})}),oe(Ct=>We=ut(Me,1,"tab-content svelte-1cyr8za",null,We,Ct),[()=>({hidden:s(c).tab!==ft})]),P(Ee,Me)});var V=j(I,2),H=Y(V);let B;var X=Y(H),re=Y(X),Z=j(X,2),ee=Y(Z);ee.__change=w;var te=j(Z,2);te.__click=[Nc,e,c];var ne=j(te,2);ne.__click=[zc,m];var se=j(H,2),fe=Y(se);fe.__click=[Rl,a],fe.__keydown=[Rl,a];var ye=j(fe,2);vr(ye,()=>e.footer);var ce=j(V,2);{var _e=Ee=>{Mc(Ee,{closeModal:h,children:(Ie,ft)=>{var Me=Rc(),We=Y(Me);vr(We,()=>e.info),P(Ie,Me)},$$slots:{default:!0}})};G(ce,Ee=>{s(a)&&Ee(_e)})}oe(Ee=>{O(E,"alt",e.appShortTitle),ae(T,e.appTitle),ae(F,e.appSlogan),B=ut(H,1,"session svelte-1cyr8za",null,B,Ee),ae(re,s(u))},[()=>({"no-buttons":s(f)})]),P(y,k)};G(A,y=>{s(c)&&y(M)})}P(t,_),ge()}tt(["click","keydown","change"]);function Fc(t,e,r,o,l){const a=t.ncomp,c=t.nrows,u=new Array(a),f=new Array(a),v=new Array(a),h=new Array(a);for(let d=0;d<a;d++){const m=Zt(t,e==="robust"?"fdistr":"fdistc",d+1),g=jl(!1,m,o[d],l[d]);let b=t.nrows;const p=o[d],w=r[d],_=new Se(m);let A=_.sort(),M=_.sortind();const y=Array.from({length:c},()=>"alien");let k=-1,z=0,C=0,E=0,N=0;for(;k<0;)z>0&&(y[M.v[b-1]-1]="external",b=b-1,M=M.slice(1,b),A=A.slice(1,b)),C=Wr(A),E=qn(A,!0),N=E/(C*C),k=4-2*w*N,z=z+1;const T=(2+Math.sqrt(k))/N,R=T-w,q=C/T,D=p/q,F=1-2*(w+R)*(w+3*R)/(3*(w+2*R)**2),S=(F-1)*(1-3*F),I=(w+2*R)/(w+R)**2,V=1+F*I*(F-1-.5*(2-F)*S*I),H=F*Math.sqrt(2*I)*(1+.5*S*I),B=On((Math.pow(D/(w+R),F)-V)/H);u[d]=g,u[d].beta=B,u[d].s=R,u[d].k=w,u[d].Mz=V,u[d].Sz=H,u[d].m=C,u[d].f0=q,u[d].hz=F,u[d].anum={aliens:b,external:c-b},u[d].a=y,v[d]=1-B,f[d]=g.TN/(g.TN+g.FP),h[d]=d+1}return{class:["simcares"],classes:t.classes,classNames:t.classNames,target:!1,v:u,nrows:t.nrows,stat:{specificity:f,selectivity:v,components:h}}}function jl(t,e,r,o){const l=e.length,a=new Array(l),c=new Array(l),u={regular:0,extreme:0,outliers:0},f={in:0,out:0};let v=0,h=0,d=0,m=0;for(let g=0;g<l;g++){const b=e[g];b<r?(a[g]="regular",c[g]="in",u.regular+=1,f.in+=1):b>o?(a[g]="outlier",c[g]="out",u.outliers+=1,f.out+=1):(a[g]="extreme",c[g]="out",u.extreme+=1,f.out+=1),v=v+(c[g]==="in"&&t),m=m+(c[g]!=="in"&&t),d=d+(c[g]!=="in"&&!t),h=h+(c[g]==="in"&&!t)}return{f:e,c:a,d:c,cnum:u,dnum:f,TP:v,TN:d,FN:m,FP:h}}function qc(t,e,r,o){const l=t.ncomp,a=new Array(l),c=new Array(l),u=new Array(l);for(let f=0;f<l;f++){const v=Zt(t,e==="robust"?"fdistr":"fdistc",f+1),h=jl(!0,v,r[f],o[f]);c[f]=h.TP/(h.TP+h.FN),u[f]=f+1,a[f]=h}return{class:["simcares"],classes:t.classes,target:!0,v:a,nrows:t.nrows,stat:{sensitivity:c,components:u}}}function Oc(t,e,r,o,l,a){(!a||!Array.isArray(a))&&(a=[]);let c=t.exclvars;(!c||!Array.isArray(c))&&(c=[]);const u=o.values.nrows,f=a.length,v=u-f,h=e.ncomp,d=Zt(r.pca,"qdist",h),m=Zt(r.pca,"hdist",h),g=e.limType==="classic"?"c":"r",b=Zt(r.pca,"fdist"+g,h),p=st(t,g+"Nh")[h-1],w=st(t,g+"Nq")[h-1],_=st(t,g+"h0")[h-1],A=st(t,g+"q0")[h-1],M=p+w,y=r.simca.v[h-1],k=o.sep,z=r.simca.classes&&r.simca.classes.length===v,C=z?["","","","",""]:["","","",""];let E="";if(E+=["Reference classes:",z?"provided":"not provided",...C].join(k)+`
`,E+=["Number of components:",h,...C].join(k)+`
`,E+=["Alpha:",(e.alpha/100).toFixed(3),...C].join(k)+`
`,E+=["Limits estimator:",e.limType,...C].join(k)+`
`,E+=`
`,E+=["Nh:",p,...C].join(k)+`
`,E+=["Nq:",w,...C].join(k)+`
`,E+=["Nf:",M,...C].join(k)+`
`,E+=`
`,E+=["F crit (extremes):",e.eCrit[h-1],...C].join(k)+`
`,E+=["F crit (outliers):",e.oCrit[h-1],...C].join(k)+`
`,E+=`
`,c.length>0&&(E+=["Number of excluded varibles:",c.length,...C].join(k)+`
`,E+=["Indices of excluded varibles:",kc(c),...C].join(k)+`
`,E+=`
`),y.beta!==null&&y.beta!==void 0){E+=["Objects treated as from non-target class","",...C].join(k)+`
`,E+=["Objects:",u,...C].join(k)+`
`,E+=["In:",y.dnum.in,...C].join(k)+`
`,E+=["Out:",y.dnum.out,...C].join(k)+`
`,E+=["Aliens:",y.anum.aliens,...C].join(k)+`
`,E+=["External:",y.anum.external,...C].join(k)+`
`,E+=["Specificity:",r.simca.stat.specificity?r.simca.stat.specificity[h-1]:"-",...C].join(k)+`
`,E+=["Selectivity:",r.simca.stat.selectivity?r.simca.stat.selectivity[h-1]:"-",...C].join(k)+`
`,E+=["Beta:",y.beta,...C].join(k)+`
`,E+=["Non-centrality, s:",y.s,...C].join(k)+`
`,E+=["Scaling, f0:",y.f0,...C].join(k)+`
`,E+=`
`,E+=["","object","class","role","decision","h/h0","q/q0","f"].join(k)+`
`;for(let D=0;D<u;D++)E+=["",o.objlabels[D],r.simca.classes[D],y.a[D],y.d[D],m[D]/_,d[D]/A,b[D]].join(k)+`
`}else{E+=["Objects treated as from target class","",...C].join(k)+`
`,E+=["Objects:",u,...C].join(k)+`
`,E+=["Removed:",f,...C].join(k)+`
`,E+=["In:",y.dnum.in,...C].join(k)+`
`,E+=["Out:",y.dnum.out,...C].join(k)+`
`,E+=["Regular:",y.cnum.regular,...C].join(k)+`
`,E+=["Extreme:",y.cnum.extreme,...C].join(k)+`
`,E+=["Outliers:",y.cnum.outliers,...C].join(k)+`
`,E+=["Sensitivity:",r.simca.stat.sensitivity?r.simca.stat.sensitivity[h-1]:"-",...C].join(k)+`
`,E+=`
`,E+=["","object","class","role","decision","h/h0","q/q0","f"].join(k)+`
`;let D=0;for(let F=0;F<u;F++){if(f>0&&a.includes(F)){E+=["",o.objlabels[F],"-","removed","-","-","-","-"].join(k)+`
`;continue}E+=["",o.objlabels[D],r.pca.classes[D],y.c[D],y.d[D],m[D]/_,d[D]/A,b[D]].join(k)+`
`,D=D+1}}E+=`
`,o.dec!=="."&&(E=E.replace(/\./g,o.dec)),E=["Target class:",e.className,...C].join(k)+`
`+E,E=["Data filename:",o.fileName,...C].join(k)+`
`+E;let N=["DD-SIMCA results ("+l+")","https://mda.tools/ddsimca/",...C].join(k)+`

`;const T=new Blob([N+E],{type:"text/csv"}),R=window.URL.createObjectURL(T),q=document.createElement("a");q.setAttribute("href",R),q.setAttribute("download",`ddsimca-results-${l}.csv`),q.click()}function Dc(t,e){const r=new Blob([JSON.stringify({pca:t,simca:e},Kn)],{type:"application/json"}),o=window.URL.createObjectURL(r),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download","ddsimca-model.json"),l.click()}async function Il(t,e,r=.1,o="classic"){const l=e.calset.values,a=e.tarset.values,c=Ur(e.altset)?null:e.altset.values,u=e.calset.classNames[0],f=l.ncols-e.varsExcluded.length,v=e.model.ncomp>f?f:e.model.ncomp;return t().then(h=>{const d=Ws(h,l,v,e.model.center,e.model.scale,[],e.varsExcluded),m=ln(h,d,a);m.objindices=e.tarset.objindices,m.objlabels=e.tarset.objlabels,m.classes=e.tarset.classes,m.classNames=e.tarset.classNames;let g={};c&&(g=ln(h,d,c),g.objindices=e.altres.objindices,g.objlabels=e.altres.objlabels,g.classes=e.altres.classes,g.classNames=e.altres.classNames),d.hash=Hn(),d.varlabels=e.calset.varlabels.filter(C=>!e.varsExcluded.includes(C)),d.varindices=e.calset.varindices.filter(C=>!e.varsExcluded.includes(C)),d.varvalues=e.calset.varvalues.filter(C=>!e.varsExcluded.includes(C)),d.varvaluesName=e.calset.varvaluesName,d.varvaluesUnits=e.calset.varvaluesUnits,d.varrev=e.calset.varrev,d.header=e.calset.header,d.prep=[];const b=1-e.alpha/100,p=Math.pow(1-r/100,1/d.nrows),w=o.charAt(0),_=st(d,w+"Nh"),A=st(d,w+"Nq"),M=_.map((C,E)=>C+A[E]),y=M.map(C=>Vn(b,C)),k=M.map(C=>Vn(p,C)),z={ncomp:e.nComp,alpha:e.alpha,gamma:r,limType:o,Nf:M,eCrit:y,oCrit:k,className:u,hash:Hn()};e.currentRes={model:d,simca:z,tar:{pca:m,simca:qc(m,o,y,k)},alt:g?{pca:g,simca:Fc(g,o,M,y,k)}:{}}}).catch(h=>{console.error(h)})}function Vc(t,e,r){let o=t.length;const l=Je(t);let a=l.sort(),c=l.sortind(),u=-1,f=0,v=0,h=0,d=0;for(;u<0;)f>0&&(o=o-1,c=c.slice(1,o),a=a.slice(1,o)),v=Wr(a),h=qn(a,!0),d=h/(v*v),u=4-2*r*d,f=f+1;const m=(2+Math.sqrt(u))/d,g=m-r,b=v/m,p=e/b,w=1-2*(r+g)*(r+3*g)/(3*(r+2*g)**2),_=(w-1)*(1-3*w),A=(r+2*g)/(r+g)**2,M=1+w*A*(w-1-.5*(2-w)*_*A),y=w*Math.sqrt(2*A)*(1+.5*_*A);return 1-On((Math.pow(p/(r+g),w)-M)/y)}function Fl(t,e,r,o,l=5){if(l<.01||l>50)throw new Error("getStat: wrong value for 'alpha' parameter.");let a,c,u,f,v;o?(v=o.ncompBest,a=o.sens,c=o.spec,u=o.eff,f=o.sel):(a=new Float64Array(t.ncomp),c=new Float64Array(t.ncomp),u=new Float64Array(t.ncomp),f=new Float64Array(t.ncomp));const h=st(t,"cNh"),d=st(t,"ch0"),m=st(t,"cNq"),g=st(t,"cq0"),b=new Float64Array(t.ncomp),p=new Float64Array(t.ncomp),w=new Float64Array(t.ncomp),_=new Float64Array(t.ncomp),A=new Float64Array(t.ncomp),M=new Float64Array(t.ncomp),y=new Float64Array(t.ncomp),k=new Float64Array(t.ncomp),z=1-l/100;for(let C=0;C<t.ncomp;C++){const E=h[C],N=d[C],T=m[C],R=g[C],q=E+T,D=Vn(z,q);let F,S;F=Zt(e,"qdist",C+1),S=Zt(e,"hdist",C+1);let I=0;for(let V=0;V<e.nrows;V++){const H=S[V]/N*E+F[V]/R*T;I+=H<D}if(I=I/e.nrows,b[C]=I,A[C]=b[C]-a[v?v-1:C],!Ur(r)){F=Zt(r,"qdist",C+1),S=Zt(r,"hdist",C+1);const V=Array(r.nrows);let H=0;for(let B=0;B<r.nrows;B++){const X=S[B]/N*E+F[B]/R*T;H+=X>=D,V[B]=X}H=H/r.nrows,p[C]=H,w[C]=Vc(V,D,q),M[C]=p[C]-c[v?v-1:C],y[C]=w[C]-f[v?v-1:C],_[C]=Math.sqrt(I*H),k[C]=_[C]-u[v?v-1:C]}}return{alpha:l,ncomp:t.ncomp,sens:{diff:A,val:b},spec:{diff:M,val:p},sel:{diff:y,val:w},eff:{diff:k,val:_}}}async function Bc(t,e){const{varInd:r,nComp:o,Xcal:l,Xtar:a,Xalt:c,center:u,scale:f,statsCurrent:v,alpha:h}=e;return t().then(d=>{const m=Ws(d,l,o,u,f,[],r),g=ln(d,m,a),b=c?ln(d,m,c):{};return Fl(m,g,b,v,h)}).catch(d=>{console.error(d)})}function Wc(t,e,r,o,l){if(!r&&!e)throw new Error('One of the two arguments "nInt" or "intSize" must be specified.');if(e?r=Math.round(t/e):e=Math.round(t/r),!Number.isInteger(e)||e<2||e>t)throw new Error('Wrong value for "nInt" or "intSize" arguments.');if(!Number.isInteger(r)||r<1||r>t/2)throw new Error('Wrong value for "nInt" or "intSize" arguments.');const a=Array(e),c=Array(e),u=Array(e),f=Array(e),v=Array(e),h=Array(e),d=t%e,m=Math.trunc(t/e);let g,b,p;if(e===t)for(r=1,g=0;g<e;g++)a[g]=g,c[g]=g,h[g]=l[g];else if(d===0)for(g=0;g<e;g++)b=g*m,a[g]=b,c[g]=b+m-1,h[g]=o[a[g]]+"–"+o[c[g]];else{let N=0;for(g=0;g<d;g++)a[g]=N,N+=m+1,c[g]=N-1,h[g]=o[a[g]]+"—"+o[c[g]];for(g=d;g<e;g++)a[g]=N,N+=m,c[g]=N-1,h[g]=o[a[g]]+"—"+o[c[g]]}let w,_,A,M,y,k,z,C,E=[0,1];for(g=0;g<e;g++)b=a[g],A=o[b],p=c[g],M=o[p],g>0&&(_=c[g-1],k=o[_],z=(A-k)/2),g<e-1&&(w=a[g+1],y=o[w],C=(y-M)/2),g===0&&(z=C,E[0]=A-2*z),g===e-1&&(z=C,E[1]=M+2*C),f[g]=A-z,v[g]=M-A+z+C,u[g]=(A+M)/2;return{nVars:t,nInt:e,intSize:r,intLeftIndices:a,intRightIndices:c,intLabels:h,limX:E,left:f,width:v,mid:u}}function Yc(t){const e=[4,6,7,8,9].filter(l=>l<=t&&t%l===0);let r;return t>=10&&t<20?r=[t]:t>=20&&t<30?r=[10,t]:t>=30&&t<=50?r=[10,20,t]:t>50&&t<70?r=[10,20,30]:t>=70&&t<90?r=[10,20,30,40]:t>=90?r=[10,20,30,40,50]:t===5?r=[5]:r=[],[...e,...r].sort((l,a)=>l-a)}var Gc=K('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function ot(t,e){let r=U(e,"text",3,"button");var o=Gc();o.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var l=Y(o);oe(()=>ae(l,r())),P(t,o)}tt(["click"]);var Uc=K('<button tabindex="0"></button>');function Hs(t,e){U(e,"disable",3,!1);var r=Uc();r.__click=function(...o){var l;(l=e.onclick)==null||l.apply(this,o)},oe(()=>{O(r,"title",e.title),O(r,"aria-label",e.title),O(r,"alt",e.title),ut(r,1,`button ${e.className??""}`,"svelte-bx9fh5")}),P(t,r)}tt(["click"]);function Hr(t,e){let r=U(e,"title",3,"Reset");Hs(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function Hc(t,e){let r=U(e,"title",3,"Undo");Hs(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function Kc(t,e){let r=U(e,"title",3,"Download");Hs(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function Xc(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var Qc=K('<span class="label svelte-1986c5z"> </span>'),Jc=K("<div><!> <!></div>");function ve(t,e){let r=U(e,"label",3,null),o=U(e,"name",3,""),l=U(e,"status",3,""),a=U(e,"colors",3,""),c=U(e,"labelWidth",3,12);var u=Jc(),f=Y(u);{var v=d=>{var m=Qc(),g=Y(m);oe(()=>{Wt(m,`flex-basis:${c()??""}ch;`),ae(g,r())}),P(d,m)};G(f,d=>{r()&&d(v)})}var h=j(f,2);vr(h,()=>e.children??mt),oe(()=>{ut(u,1,`control-element ${o()??""} ${l()??""}`,"svelte-1986c5z"),Wt(u,a())}),P(t,u)}const ql=(t,e,r,o)=>{const l=e(t);l<0||l>1||J(r,l*100>s(o)-5&&l*100<s(o)+5,!0)},Ol=(t,e,r,o,l,a)=>{J(e,!1);const c=r(t);c<0||c>1||(o(l(c)),a()&&a()(o()))},Dl=(t,e,r,o,l,a)=>{if(!s(e))return;const c=r(t);c<0||c>1||(o(l(c)),a()&&a()(o()))},Zc=(t,e,r,o,l,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r()),l()&&l()(e());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r()),l()&&l()(e());return}};var $c=K('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function Vl(t,e){me(e,!0);let r=U(e,"min",7,0),o=U(e,"max",3,100),l=U(e,"value",31,()=>Ke(r())),a=U(e,"decNum",3,1),c=U(e,"step",19,()=>+((o()-r())/100).toFixed(4)),u=U(e,"onchange",3,null);be(()=>{l()<r()&&(l(r()),u()&&u()(l())),l()>o()&&(l(o()),u()&&u()(l())),r()>o()&&r(o())});let f=ie(void 0),v=ie(void 0),h=ie(!1);const d=z=>{const C=r()+z*(o()-r());return+(Math.round(C/c())*c()).toFixed(4)},m=z=>{const C=s(f).getBoundingClientRect(),E=s(v).getBoundingClientRect(),N=C.x,T=E.x+E.width;return(z.clientX-N)/(T-N)},g=z=>{J(h,!1)},b=z=>{let C=l()+c()*z.deltaY*.5;C<r()&&(C=r()),C>o()&&(C=o()),l(+(Math.round(C/c())*c()).toFixed(4)),z.preventDefault(),u()&&u()(l())},p=L(()=>r()===o()?100:(l()-r())/(o()-r())*100);var w=$c();w.__keydown=[Zc,l,c,r,u,o],w.__mousemove=[Dl,h,m,l,d,u],w.__mousedown=[ql,m,h,p],w.__mouseup=[Ol,h,m,l,d,u],w.__touchmove=[Dl,h,m,l,d,u],w.__touchstart=[ql,m,h,p],w.__touchend=[Ol,h,m,l,d,u];var _=Y(w);let A;var M=Y(_);let y;var k=Y(M);In(_,z=>J(f,z),()=>s(f)),In(w,z=>J(v,z),()=>s(v)),oe((z,C,E)=>{O(w,"aria-valuenow",l()),O(w,"aria-valuemin",r()),O(w,"aria-valuemax",o()),A=ut(_,1,"range-slider svelte-vhx0r0",null,A,z),Wt(_,`width:${s(p)??""}%`),y=ut(M,1,"range-value svelte-vhx0r0",null,y,C),ae(k,E)},[()=>({"range-slider_right":s(p)<50}),()=>({"range-value_right":s(p)<50}),()=>l().toFixed(a())]),Ln("mousewheel",w,b),Ln("mouseleave",w,g),Ln("touchcancel",w,g),P(t,w),ge()}tt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]),tt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const eu=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e.options.findIndex(l=>l===r());o>0&&r(e.options[o-1]);return}if(t.key==="ArrowRight"){const o=e.options.findIndex(l=>l===r());o<e.options.length-1&&r(e.options[o+1]);return}};var tu=(t,e,r)=>e(r),ru=K('<button tabindex="-1"><!></button>'),nu=K('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function zt(t,e){me(e,!0);let r=U(e,"value",31,()=>Ke(e.options[0])),o=U(e,"className",3,"");var l=nu(),a=$(l);a.__keydown=[eu,e,r],Ue(a,20,()=>e.options,u=>u,(u,f)=>{var v=ru();v.__click=[tu,r,f];let h;var d=Y(v);pt(d,()=>f),oe((m,g)=>h=ut(v,1,`option option_${m??""}`,"svelte-1i17tox",h,g),[()=>f.toString().replace(".","_"),()=>({selected:f==r()})]),P(u,v)});var c=j(a,2);oe(()=>ut(a,1,`selector ${o()??""}`,"svelte-1i17tox")),ll(c,r),P(t,l),ge()}tt(["keydown","click"]);function cn(t,e){me(e,!0);let r=U(e,"options",19,()=>["no","yes"]),o=U(e,"value",15,!1),l=ie(!0);const a=L(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());be(()=>J(l,o()?r()[1]:r()[0],!0)),be(()=>o(s(l)===r()[1]));var c=de(),u=$(c);{var f=v=>{zt(v,{get options(){return s(a)},get value(){return s(l)},set value(h){J(l,h,!0)}})};G(u,v=>{s(a)&&v(f)})}P(t,c),ge()}var su=K('<div tabindex="0" role="radiogroup"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function ou(t,e){me(e,!0);let r=U(e,"file",15),o=U(e,"message",3,"Select CSV file with dataset"),l=U(e,"acceptType",3,".csv"),a;function c(w){a&&a.files.length>0?r(a.files[0]):r(null)}function u(w){(w.type==="click"||w.type==="keydown"&&(w.code==="Space"||w.code==="Enter"))&&a.click()}function f(w){a.value=null,r(null)}var v=su(),h=$(v);h.__keydown=u,h.__click=u;let d;var m=Y(h),g=j(m);g.__change=c,In(g,w=>a=w,()=>a);var b=j(h,2);{var p=w=>{Hr(w,{onclick:f})};G(b,w=>{r()&&w(p)})}oe(w=>{d=ut(h,1,"file-selector svelte-1k0x7uv",null,d,w),ae(m,`${(r()?r().name:o())??""} `),O(g,"accept",l())},[()=>({selected:r()})]),P(t,v),ge()}tt(["keydown","click","change"]);function lu(t,e,r,o){e()&&J(r,e()(o()),!0)}var au=K('<div class="error-message svelte-1qtiwcs"> </div>'),iu=K('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function Bl(t,e){me(e,!0);let r=U(e,"value",15,""),o=U(e,"className",3,""),l=U(e,"placeholder",3,""),a=U(e,"maxLength",3,25),c=U(e,"validator",3,null),u=ie("");var f=iu();let v;var h=Y(f);h.__input=[lu,c,u,r];var d=j(h,2);{var m=g=>{var b=au(),p=Y(b);oe(()=>ae(p,s(u))),P(g,b)};G(d,g=>{s(u)&&s(u).length>0&&g(m)})}oe(g=>{v=ut(f,1,`textinput ${o()??""}`,"svelte-1qtiwcs",v,g),O(h,"placeholder",l()),O(h,"maxlength",a())},[()=>({error:s(u)&&s(u).length>0})]),ll(h,r),P(t,f),ge()}tt(["input"]);var cu=K('<div class="spinner svelte-n48urb"></div>');function Ks(t){var e=cu();P(t,e)}tt(["keydown","click"]),tt(["keydown","click"]);var uu=K("<h2> </h2>"),fu=K("<!> <!>",1),vu=K('<div class="widget"><!></div>');function du(t,e){me(e,!0);let r=U(e,"title",3,""),o=U(e,"value",15),l=U(e,"labelWidth",3,13);function a(v){const h={};for(const d of Object.keys(v))h[d]=v[d].default;return h}be(()=>{!o()&&e.options&&o(a(e.options))});var c=vu(),u=Y(c);{var f=v=>{var h=fu(),d=$(h);{var m=b=>{ve(b,{children:(p,w)=>{var _=uu(),A=Y(_);oe(()=>ae(A,r())),P(p,_)},$$slots:{default:!0}})};G(d,b=>{r()&&b(m)})}var g=j(d,2);Ue(g,17,()=>Object.keys(e.options),Xe,(b,p)=>{var w=de();const _=L(()=>e.options[s(p)]);var A=$(w);{var M=y=>{ve(y,{get name(){return s(_).name},get label(){return s(_).label},get labelWidth(){return l()},children:(k,z)=>{var C=de(),E=$(C);As(E,()=>s(_).el,(N,T)=>{T(N,je(()=>s(_).props,{get value(){return o()[s(p)]},set value(R){o(o()[s(p)]=R,!0)}}))}),P(k,C)},$$slots:{default:!0}})};G(A,y=>{s(_).hidden||y(M)})}P(b,w)}),P(v,h)};G(u,v=>{o()&&v(f)})}P(t,c),ge()}var hu=K('<span style="font-weight:bold"> </span><br>',1),mu=K('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),gu=K('<span class="file-size svelte-gdjwex"> </span>'),bu=K('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <!></p> <!>',1);function pu(t,e){me(e,!0);let r=U(e,"title",3,"");var o=de(),l=$(o);{var a=c=>{ve(c,{children:(u,f)=>{var v=bu(),h=$(v),d=Y(h);{var m=M=>{var y=hu(),k=$(y),z=Y(k);oe(()=>ae(z,r())),P(M,y)};G(d,M=>{r()&&r()!==""&&M(m)})}var g=j(d,4),b=Y(g),p=j(g,5);{var w=M=>{var y=mu(),k=$(y),z=Y(k),C=j(k,4),E=Y(C);oe(()=>{ae(z,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),ae(E,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),P(M,y)},_=M=>{var y=gu(),k=Y(y);oe(()=>ae(k,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),P(M,y)};G(p,M=>{e.dataset.nresp&&e.dataset.nresp>0?M(w):M(_,!1)})}var A=j(h,2);Hr(A,{get onclick(){return e.reset}}),oe(()=>{O(g,"title",e.dataset.fileName),ae(b,e.dataset.fileName)}),P(u,v)},$$slots:{default:!0}})};G(l,c=>{e.dataset&&c(a)})}P(t,o),ge()}var wu=K("<!> <!>",1),_u=K("<!> <!> <!> <!> <!> <!>",1),yu=K("<!> <!>",1),xu=K("<p> </p>"),ku=K("<!> <p> </p>",1),Eu=K("<p> </p>"),Cu=K("<!> <!> <!>",1);function Xs(t,e){me(e,!0);let r=U(e,"model",3,null),o=U(e,"outliers",19,()=>[]),l=U(e,"className",3,"Class"),a=U(e,"classMandatory",3,!1),c=U(e,"classUnique",3,!1),u=U(e,"title",3,""),f=U(e,"dataset",15),v=U(e,"resobj",15);const h=[",",";"],d=L(()=>r()?["no","yes"]:["no","labels","values"]);let m=ie(void 0),g=ie(""),b=ie(""),p=ie(","),w=ie("no"),_=ie(!1),A=ie(!1),M=ie(null),y=ie("neutral"),k=ie("");function z(B,X,re){J(M,e.WASM().then(Z=>{v(Ys(Z,B,X,re))}).catch(Z=>{console.error(Z),v(null),J(y,"error"),J(k,Z,!0)}),!0)}function C(B,X){if(!B||B.size<10)return;const Z=B.slice(0,1e5),ee=new FileReader;ee.onload=()=>{const te=ee.result;!te||te.length<0||((ne=>{let[se,fe,ye,ce]=ne;J(p,se,!0),J(_,fe,!0),J(A,ye,!0),J(w,ce,!0)})(_c(te)),J(A,a()||s(A),!0),X&&s(w)!=="no"&&J(w,"yes"))},ee.onerror=function(te){csvString=null,J(y,"error"),J(k,te,!0),console.error("Error reading CSV file.",te)},ee.readAsText(Z)}function E(B){try{const X=bc(B,s(p),s(w)==="yes"?"labels":s(w),s(_),s(A),s(g),s(b));if(X.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(r()&&X.values.ncols!==r().ncols+r().exclvars.length)throw new Error("Dataset has different number of columns than the training set.");if(X.classNames.length>X.values.nrows/2)throw new Error("Dataset has too many unique "+l().toLowerCase()+" labels ("+X.classNames.length+"), check your CSV file.");if(a()&&X.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&X.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");X.fileName=s(m).name.replace(/\.[^/.]+$/,""),r()&&(X.varrev=r().varrev,X.header=r().header,X.varlabels=r().varlabels,X.varvalues=r().varvalues,X.varvaluesName=r().varvaluesName,X.varvaluesUnits=r().varvaluesUnits),f(X),J(k,""),J(y,"success")}catch(X){console.error(X),f(null),J(y,"error"),J(k,X,!0)}}function N(B){const X=new FileReader;X.onload=()=>{E(X.result)},X.readAsText(s(m))}function T(){J(m,""),f(null),v(null),J(g,""),J(b,""),J(y,"neutral"),J(k,"")}be(()=>{s(m)===null?T():(C(s(m),r()),J(y,"neutral"),J(k,""))}),be(()=>{s(p)&&(J(y,"neutral"),J(k,""))}),be(()=>{if(f()&&r()&&!v()&&!s(k))try{v(z(r(),f(),o())),J(k,""),J(y,"success")}catch(B){console.error(B),f(null),v(null),J(y,"error"),J(k,B,!0)}});var R=Cu(),q=$(R);{var D=B=>{var X=yu(),re=$(X);$o(re,()=>s(m)===void 0,te=>{ve(te,{children:(ne,se)=>{ou(ne,{id:"dataFile",message:"Select CSV file with dataset",get file(){return s(m)},set file(fe){J(m,fe,!0)}})},$$slots:{default:!0}})});var Z=j(re,2);{var ee=te=>{var ne=_u(),se=$(ne);ve(se,{label:"Delimiter",children:(Me,We)=>{zt(Me,{id:"sep",options:h,get value(){return s(p)},set value(nt){J(p,nt,!0)}})},$$slots:{default:!0}});var fe=j(se,2);ve(fe,{label:"Row labels",children:(Me,We)=>{cn(Me,{id:"hasLabels",options:["no","yes"],get value(){return s(_)},set value(nt){J(_,nt,!0)}})},$$slots:{default:!0}});var ye=j(fe,2);{var ce=Me=>{ve(Me,{get label(){return`${l()??""} labels`},children:(We,nt)=>{cn(We,{id:"hasLabels",options:["no","yes"],get value(){return s(A)},set value(Ct){J(A,Ct,!0)}})},$$slots:{default:!0}})};G(ye,Me=>{a()||Me(ce)})}var _e=j(ye,2);ve(_e,{label:"Header",children:(Me,We)=>{zt(Me,{id:"header",get options(){return s(d)},get value(){return s(w)},set value(nt){J(w,nt,!0)}})},$$slots:{default:!0}});var Ee=j(_e,2);{var Ie=Me=>{var We=wu(),nt=$(We);ve(nt,{label:"Header name",children:(Pt,Sr)=>{Bl(Pt,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return s(g)},set value(Ot){J(g,Ot,!0)}})},$$slots:{default:!0}});var Ct=j(nt,2);ve(Ct,{label:"Header units",children:(Pt,Sr)=>{Bl(Pt,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return s(b)},set value(Ot){J(b,Ot,!0)}})},$$slots:{default:!0}}),P(Me,We)};G(Ee,Me=>{s(w)==="values"&&Me(Ie)})}var ft=j(Ee,2);ve(ft,{label:" ",children:(Me,We)=>{ot(Me,{text:"Load",onclick:N})},$$slots:{default:!0}}),P(te,ne)};G(Z,te=>{s(m)&&te(ee)})}P(B,X)},F=B=>{var X=de(),re=$(X);{var Z=ee=>{var te=de(),ne=$(te);Cs(ne,()=>s(M),se=>{ve(se,{children:(fe,ye)=>{var ce=ku(),_e=$(ce);Ks(_e);var Ee=j(_e,2),Ie=Y(Ee);oe(()=>ae(Ie,r()?"Loading data and apply model...":"Loading data...")),P(fe,ce)},$$slots:{default:!0}})},void 0,(se,fe)=>{ve(se,{status:"error",children:(ye,ce)=>{var _e=xu(),Ee=Y(_e);oe(()=>ae(Ee,s(fe))),P(ye,_e)},$$slots:{default:!0}})}),P(ee,te)};G(re,ee=>{s(M)&&ee(Z)})}P(B,X)};G(q,B=>{f()?B(F,!1):B(D)})}var S=j(q,2);{var I=B=>{pu(B,{get dataset(){return f()},reset:T,get title(){return u()}})};G(S,B=>{f()&&B(I)})}var V=j(S,2);{var H=B=>{ve(B,{status:"error",children:(X,re)=>{var Z=Eu(),ee=Y(Z);oe(()=>ae(ee,s(k))),P(X,Z)},$$slots:{default:!0}})};G(V,B=>{(s(y)==="error"||s(k))&&B(H)})}P(t,R),ge()}var Au=K("<!> <!> <!> <!>",1),Su=K("<p> </p>"),Mu=K("<!> <p>Computing global model...</p>",1),Nu=K('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),zu=K('<div class="buttons"><!> <!></div>'),Pu=K("<!> <!>",1),Tu=K("<p> </p>"),Lu=K("<!> <!> <!> <!>",1);function Ru(t,e){me(e,!0);let r=U(e,"outliers",19,()=>[]),o=U(e,"resobj",15),l=U(e,"model",15),a=U(e,"downloadModel",3,null),c=U(e,"downloadResults",3,null),u=ie("neutral"),f=ie(""),v=ie(1),h=ie(!0),d=ie(!1),m=ie(void 0);async function g(T,R,q,D){J(m,e.WASM().then(F=>{J(u,"computing");const S=Ws(F,T.values,R,q,D,r());S.hash=Hn(),S.exclvars=[],S.varlabels=T.varlabels,S.varindices=T.varindices,S.varvalues=T.varvalues,S.varvaluesName=T.varvaluesName,S.varvaluesUnits=T.varvaluesUnits,S.varrev=T.varrev,S.prep=[];const I=Ys(F,S,T,r());l(S),o(I),J(u,"success")}).catch(F=>{console.error(F),l(null),J(u,"error"),J(f,F,!0)}),!0)}function b(T){J(u,"neutral"),J(f,null),g(e.dataset,s(v),s(h),s(d))}function p(){J(u,"neutral"),J(m,null),o(null),l(null),J(f,null)}let w=L(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-1,50):null);be(()=>{e.dataset===null&&p()}),be(()=>{J(v,s(w)?Math.min(s(w),20):null,!0)});var _=Lu(),A=$(_);{var M=T=>{var R=Au(),q=$(R);ve(q,{name:"ncomp",label:"# of PCs",children:(I,V)=>{Vl(I,{id:"ncomp",min:1,get max(){return s(w)},step:1,decNum:0,get value(){return s(v)},set value(H){J(v,H,!0)}})},$$slots:{default:!0}});var D=j(q,2);ve(D,{name:"center",label:"Center",children:(I,V)=>{cn(I,{id:"center",options:["no","yes"],get value(){return s(h)},set value(H){J(h,H,!0)}})},$$slots:{default:!0}});var F=j(D,2);ve(F,{name:"scale",label:"Scale",children:(I,V)=>{cn(I,{id:"scale",options:["no","yes"],get value(){return s(d)},set value(H){J(d,H,!0)}})},$$slots:{default:!0}});var S=j(F,2);ve(S,{name:"create-model",label:" ",children:(I,V)=>{ot(I,{onclick:b,text:"Create model"})},$$slots:{default:!0}}),P(T,R)};G(A,T=>{e.dataset&&!l()&&s(u)!=="computing"&&T(M)})}var y=j(A,2);{var k=T=>{var R=de(),q=$(R);Cs(q,()=>s(m),D=>{ve(D,{name:"spinner",children:(F,S)=>{var I=Mu(),V=$(I);Ks(V),P(F,I)},$$slots:{default:!0}})},void 0,(D,F)=>{ve(D,{name:"error",status:"error",children:(S,I)=>{var V=Su(),H=Y(V);oe(()=>ae(H,s(F))),P(S,V)},$$slots:{default:!0}})}),P(T,R)};G(y,T=>{s(m)&&T(k)})}var z=j(y,2);{var C=T=>{var R=Pu(),q=$(R);ve(q,{name:"info",children:(S,I)=>{var V=Nu(),H=$(V),B=j(Y(H)),X=j(H,2);Hr(X,{onclick:p}),oe(()=>ae(B,` ${l().ncomp??""} PCs${l().center?", centered":""}${l().scale?", scaled":""}`)),P(S,V)},$$slots:{default:!0}});var D=j(q,2);{var F=S=>{ve(S,{name:"download-buttons",label:"Download",children:(I,V)=>{var H=zu(),B=Y(H);ot(B,{onclick:()=>c()(o(),e.dataset,"train",r(),l()),text:"Results"});var X=j(B,2);ot(X,{onclick:()=>a()(l()),text:"Model"}),P(I,H)},$$slots:{default:!0}})};G(D,S=>{a()&&c()&&S(F)})}P(T,R)};G(z,T=>{l()&&T(C)})}var E=j(z,2);{var N=T=>{ve(T,{name:"error",status:"error",children:(R,q)=>{var D=Tu(),F=Y(D);oe(()=>ae(F,s(f))),P(R,D)},$$slots:{default:!0}})};G(E,T=>{(s(u)==="error"||s(f))&&T(N)})}P(t,_),ge()}var ju=K('<span class="buttons svelte-t7v4gx"><!> <!></span>'),Iu=K('<span class="buttons svelte-t7v4gx"><!> <!></span>'),Fu=K('<span class="buttons svelte-t7v4gx"><!> <!> <!></span>'),qu=K("<!> <!> <!>",1);function Ou(t,e){me(e,!0);function r(v,h,d){let m=["#","excluded interval","nPCs","sensitivity","specificity","efficiency","selectivity"].join(h)+`
`;const g=v.length;for(let _=0;_<g;_++)m+=[_,_===0?"-":v[_].int,v[_].ncomp,v[_].sens,v[_].spec,v[_].eff,v[_].sel].join(h)+`
`;d!=="."&&(m=m.replace(/\./g,d));const b=new Blob([m],{type:"text/csv"}),p=window.URL.createObjectURL(b),w=document.createElement("a");w.setAttribute("href",p),w.setAttribute("download","ddsimca-love-progress.csv"),w.click()}function o(v,h){if(!h||h.length===0){Gs(v,`${v.fileName}`);return}Gs(xc(v,h),`${v.fileName}-reduced`)}function l(v,h,d){const m=d.model,g=d.simca,b=d[v];Oc(m,g,b,h,v,[])}function a(v){Dc(v.model,v.simca,v.simca.ncomp)}var c=de(),u=$(c);{var f=v=>{var h=qu(),d=$(h);ve(d,{label:"Outcomes",children:(b,p)=>{var w=ju(),_=Y(w);ot(_,{onclick:()=>r(e.s.statsProgress,e.s.calset.sep,e.s.calset.dec),text:"Full progress"});var A=j(_,2);ot(A,{onclick:()=>a(e.s.currentRes),text:"Model"}),P(b,w)},$$slots:{default:!0}});var m=j(d,2);ve(m,{label:"Results",children:(b,p)=>{var w=Iu(),_=Y(w);ot(_,{onclick:()=>l("tar",e.s.tarset,e.s.currentRes),text:"Target"});var A=j(_,2);{var M=y=>{ot(y,{onclick:()=>l("alt",e.s.altset,e.s.currentRes),text:"Alt"})};G(A,y=>{Ur(e.s.altset)||y(M)})}P(b,w)},$$slots:{default:!0}});var g=j(m,2);ve(g,{label:"Reduced data",children:(b,p)=>{var w=Fu(),_=Y(w);ot(_,{onclick:()=>o(e.s.calset,e.s.varsExcluded),text:"Train"});var A=j(_,2);ot(A,{onclick:()=>o(e.s.tarset,e.s.varsExcluded),text:"Target"});var M=j(A,2);{var y=k=>{ot(k,{onclick:()=>o(e.s.altset,e.s.varsExcluded),text:"Alt"})};G(M,k=>{Ur(e.s.altset)||k(y)})}P(b,w)},$$slots:{default:!0}}),P(v,h)};G(u,v=>{e.s.varsExcluded&&e.s.varsExcluded.length>0&&v(f)})}P(t,c),ge()}var Du=K("<!> <!> <!>",1),Vu=K("<p> </p>"),Bu=K("<!> <p>Computing PV-set...</p>",1),Wu=K('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),Yu=K("<p> </p>"),Gu=K("<!> <!> <!> <!>",1);function Uu(t,e){me(e,!0);let r=U(e,"outliers",19,()=>[]),o=U(e,"pvset",15),l=U(e,"pvres",15),a=ie("neutral"),c=ie(""),u=ie(Ke(["ven","rand","loo"])),f=ie("ven"),v=ie(void 0),h=e.calset.values.nrows-r().length,d=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(N=>N>=h/(h-e.model.ncomp-1)&&N<=h/2):[],m=ie(Ke(d.length>0?d[0]:0));be(()=>{d.length===0&&(J(u,["loo"],!0),J(f,"loo"))});async function g(N,T,R){J(v,e.WASM().then(q=>{const D=R.type=="loo"?0:R.type=="rand"?2:1,F=hc(q,T,N.values,T.ncomp,R.nseg,D,0,r());o({classLabelsVarname:N.classLabelsVarname,classNames:N.classNames,dec:N.dec,fileName:N.fileName+"-pcv",hasClassNames:N.hasClassNames,hasLabels:N.hasLabels,header:N.header,labelsVarname:N.labelsVarname,classes:e.calres.classes,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:N.sep,values:F,varAxisTitle:N.varAxisTitle,varindices:T.varindices,varlabels:T.varlabels,varrev:T.varrev,varvalues:T.varvalues,varvaluesName:T.varvaluesName,varvaluesUnits:T.varvaluesUnits}),l(Ys(q,T,o(),[]))}).catch(q=>{console.error(q),o(null),l(null),J(a,"error"),J(c,q,!0)}),!0)}function b(N){J(a,"neutral"),J(c,""),g(e.calset,e.model,{type:s(f),nseg:s(m)})}function p(){J(a,"neutral"),J(c,""),J(v,null),o(null),l(null)}be(()=>{e.model===null&&p()});var w=Gu(),_=$(w);{var A=N=>{var T=Du(),R=$(T);ve(R,{name:"split",label:"Split type:",children:(S,I)=>{zt(S,{id:"cvType",get options(){return s(u)},get value(){return s(f)},set value(V){J(f,V,!0)}})},$$slots:{default:!0}});var q=j(R,2);{var D=S=>{ve(S,{name:"nseg",label:"Segments:",children:(I,V)=>{zt(I,{id:"nseg",options:d,get value(){return s(m)},set value(H){J(m,H,!0)}})},$$slots:{default:!0}})};G(q,S=>{s(f)!=="loo"&&S(D)})}var F=j(q,2);ve(F,{name:"run-button",label:" ",children:(S,I)=>{ot(S,{onclick:b,text:"Compute PV-set"})},$$slots:{default:!0}}),P(N,T)};G(_,N=>{e.model&&!o()&&s(a)!=="busy"&&N(A)})}var M=j(_,2);{var y=N=>{var T=de(),R=$(T);Cs(R,()=>s(v),q=>{ve(q,{name:"spinner",children:(D,F)=>{var S=Bu(),I=$(S);Ks(I),P(D,S)},$$slots:{default:!0}})},void 0,(q,D)=>{ve(q,{name:"error",status:"error",children:(F,S)=>{var I=Vu(),V=Y(I);oe(()=>ae(V,s(D))),P(F,I)},$$slots:{default:!0}})}),P(N,T)};G(M,N=>{s(v)&&N(y)})}var k=j(M,2);{var z=N=>{ve(N,{name:"info",children:(T,R)=>{var q=Wu(),D=$(q),F=j(Y(D)),S=j(D,2);Kc(S,{onclick:()=>Gs(o(),e.calset.fileName+"-pv")});var I=j(S,2);Hr(I,{onclick:p}),oe(()=>ae(F,` ${o().values.nrows??""} × ${o().values.ncols??""}, ${s(f)??""}
      ${s(f)!=="loo"?s(m)+" seg":""}`)),P(T,q)},$$slots:{default:!0}})};G(k,N=>{o()&&N(z)})}var C=j(k,2);{var E=N=>{ve(N,{name:"error",status:"error",children:(T,R)=>{var q=Yu(),D=Y(q);oe(()=>ae(D,s(c))),P(T,q)},$$slots:{default:!0}})};G(C,N=>{s(a)==="error"&&s(c)&&N(E)})}P(t,w),ge()}var Hu=K('<tr class="global svelte-mdsuv2"><td class="svelte-mdsuv2">0</td><td class="svelte-mdsuv2">-</td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td></tr>'),Ku=K('<tr class="global svelte-mdsuv2"><td class="svelte-mdsuv2"></td><td class="svelte-mdsuv2">-</td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td></tr> <tr class="svelte-mdsuv2"><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td></tr>',1),Xu=K('<tr><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td></tr>'),Qu=K("<!> <!>",1),Ju=K('<tr class="selected svelte-mdsuv2"><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td></tr>'),Zu=K('<table class="svelte-mdsuv2"><thead><tr class="svelte-mdsuv2"><th class="svelte-mdsuv2">#</th><th class="svelte-mdsuv2">int</th><th class="svelte-mdsuv2">#PCs</th><th class="svelte-mdsuv2">sens</th><th class="svelte-mdsuv2">spec</th><th class="svelte-mdsuv2">eff</th><th class="svelte-mdsuv2">sel</th></tr></thead><tbody><!><!></tbody></table>');function $u(t,e){me(e,!0);const r=5,o=L(()=>e.s.statsProgress?e.s.statsProgress.length:0),l=L(()=>s(o)-r+1),a=L(()=>Un(s(l)<=0?0:s(l),s(o)-1)),c=L(()=>e.s.outcomes&&e.s.outcomes.status==="done"&&e.s.intSelected>=0?{i:s(o),ncomp:e.s.nComp,int:e.s.intSelected+1,sens:e.s.outcomes.sens.val.getcolumn(e.s.nComp).v[e.s.intSelected],spec:e.s.outcomes.spec.val.getcolumn(e.s.nComp).v[e.s.intSelected],eff:e.s.outcomes.eff.val.getcolumn(e.s.nComp).v[e.s.intSelected],sel:e.s.outcomes.sel.val.getcolumn(e.s.nComp).v[e.s.intSelected]}:null);var u=de(),f=$(u);{var v=h=>{var d=Zu(),m=j(Y(d)),g=Y(m);{var b=A=>{var M=Hu(),y=j(Y(M),2),k=Y(y),z=j(y),C=Y(z),E=j(z),N=Y(E),T=j(E),R=Y(T),q=j(T),D=Y(q);oe((F,S,I,V)=>{ae(k,e.s.nComp),ae(C,F),ae(N,S),ae(R,I),ae(D,V)},[()=>e.s.statsGlobal.sens[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.spec[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.eff[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.sel[e.s.nComp-1].toFixed(3)]),P(A,M)},p=A=>{var M=Qu(),y=$(M);{var k=C=>{var E=Ku(),N=$(E),T=Y(N);T.textContent="0";var R=j(T,2),q=Y(R),D=j(R),F=Y(D),S=j(D),I=Y(S),V=j(S),H=Y(V),B=j(V),X=Y(B);oe((re,Z,ee,te)=>{ae(q,e.s.statsProgress[0].ncomp),ae(F,re),ae(I,Z),ae(H,ee),ae(X,te)},[()=>e.s.statsProgress[0].sens.toFixed(3),()=>e.s.statsProgress[0].spec.toFixed(3),()=>e.s.statsProgress[0].eff.toFixed(3),()=>e.s.statsProgress[0].sel.toFixed(3)]),P(C,E)};G(y,C=>{s(l)>0&&C(k)})}var z=j(y,2);Ue(z,17,()=>s(a),Xe,(C,E)=>{var N=Xu();let T;var R=Y(N),q=Y(R),D=j(R),F=Y(D),S=j(D),I=Y(S),V=j(S),H=Y(V),B=j(V),X=Y(B),re=j(B),Z=Y(re),ee=j(re),te=Y(ee);oe((ne,se,fe,ye,ce)=>{T=ut(N,1,"svelte-mdsuv2",null,T,ne),ae(q,s(E)),ae(F,s(E)>0?e.s.statsProgress[s(E)].int:"-"),ae(I,e.s.statsProgress[s(E)].ncomp),ae(H,se),ae(X,fe),ae(Z,ye),ae(te,ce)},[()=>({global:s(E)==0,current:s(E)===e.s.statsProgress.length-1}),()=>e.s.statsProgress[s(E)].sens.toFixed(3),()=>e.s.statsProgress[s(E)].spec.toFixed(3),()=>e.s.statsProgress[s(E)].eff.toFixed(3),()=>e.s.statsProgress[s(E)].sel.toFixed(3)]),P(C,N)}),P(A,M)};G(g,A=>{e.s.statsProgress?A(p,!1):A(b)})}var w=j(g);{var _=A=>{var M=Ju(),y=Y(M),k=Y(y),z=j(y),C=Y(z),E=j(z),N=Y(E),T=j(E),R=Y(T),q=j(T),D=Y(q),F=j(q),S=Y(F),I=j(F),V=Y(I);oe((H,B,X,re)=>{ae(k,s(c).i),ae(C,s(c).int),ae(N,s(c).ncomp),ae(R,H),ae(D,B),ae(S,X),ae(V,re)},[()=>s(c).sens.toFixed(3),()=>s(c).spec.toFixed(3),()=>s(c).eff.toFixed(3),()=>s(c).sel.toFixed(3)]),P(A,M)};G(w,A=>{s(c)&&A(_)})}P(h,d)};G(f,h=>{e.s.statsGlobal&&e.s.nComp&&h(v)})}P(t,u),ge()}const ef={small:30,medium:40,large:50,xlarge:60},tf={small:5,medium:8,large:12,xlarge:15},rf={small:6,medium:10,large:14,xlarge:18},Qs={small:4,medium:6,large:8,xlarge:10},Wl={small:12,medium:15,large:19,xlarge:21},Yl={small:11,medium:15,large:17,xlarge:19},Xn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},un=["●","◼","▲","▼","⬥","＋","✳","✕"],nf=.8,Gl=.5,sf={small:5,medium:8,large:12,xlarge:15},wt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333"};function Ul(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function Hl(t,e){if(t!=null&&(Array.isArray(t)&&(t=Je(t)),!(!Pe(t)||t.length<1)))return t.apply(r=>$s((r-e[1])*e[0]+e[2])).v}function rt(t,e){return Hl(t,e.coords)}function Kl(t,e){return Hl(t,e.objects)}function Xl(t,e){if(t!=null&&(Array.isArray(t)&&(t=Je(t)),!(!Pe(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function Ql(t,e){return Xl(t,e.coords)}function Jl(t,e){return Xl(t,e.objects)}function Js(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Ar(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Zs(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Ar(Math.abs(Yr(fl(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Ar(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let o=Math.ceil(-Ar(Math.log10(e)));return o<=2?[0,Array.from(t).map(l=>l.toFixed(o))]:(r=o-2,o=2,Ar(Math.abs(Er(t)))<=10?[-r,Array.from(t).map(l=>(l*Math.pow(10,r)).toFixed(o))]:[-r,Array.from(t).map(l=>(l/Math.pow(10,r)).toString())])}function Et(t,e,r){return Array.isArray(t)&&(t=Je(t)),Pe(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function of(t,e,r,o){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=r.coords,a=o.coords;let c="";for(let u=0;u<t.length;u++){const f=$s((t.v[u]-l[1])*l[0]+l[2]),v=$s((e.v[u]-a[1])*a[0]+a[2]);c+=f+","+v+" "}return c}function Zl(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>vn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function $l(t,e){if(Array.isArray(t)&&(t=Je(t)),!Pe(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const o=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=o&c<=l);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function ea(t,e,r,o,l,a){l==null&&(l=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const u=Math.abs(c[1]-c[0])*a,f=c[1]-c[0]-2*u,v=Math.floor(Math.log10(f)),h=1/Math.pow(10,v-1),d=Math.round(f*h)/h;let m=lf(d/r);l&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+u)/m)*m,b=Math.floor((c[1]-u)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-b)<m/10&&(b=b-m),r=Math.ceil(Ar((b-g)/m))+1,t=Se.zeros(r);for(let p=0;p<r;p++)t.v[p]=g+m*p;if(Math.abs(m)<1){const p=Math.pow(10,1+Math.round(-Math.log10(m)));t=t.apply(w=>Math.round((w+Number.EPSILON)*p)/p)}return t.filter(p=>p>=c[0]&p<=c[1])}function lf(t,e){const r=Math.floor(Math.log10(t)),o=t/Math.pow(10,r);let l;return o<=1?l=1:o<=2?l=2:o<=5?l=5:l=10,l*Math.pow(10,r)}function $s(t){return Math.round(t*10)/10}function af(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function ta(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function cf(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function uf(t){let e=-1,r=cf();for(let o=0;o<t.length;o++)e=r[(e^t[o])&255]^e>>>8;return e^-1}function ff(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=uf(r),l=new Uint8Array(4);l[0]=o>>>24,l[1]=o>>>16,l[2]=o>>>8,l[3]=o&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(l,50),c}function vf(t,e){const r=t.split(","),o=r[0],l=r[1],a=33/3*4,c=l.substring(0,a),u=l.substring(a),f=atob(c),v=new Uint8Array(f.length);for(let m=0;m<v.length;m++)v[m]=f.charCodeAt(m);const h=ff(v,e),d=btoa(String.fromCharCode(...h));return[o,",",d,u].join("")}function df(t,e,r,o,l){if(r||(r=10),o||(o=10),l||(l=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(o<1||o>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*l,c=o/2.54*l;setTimeout(()=>{const u=t.clientHeight,f=t.clientWidth;let v=Math.max(a/f,c/u),h=1;v<1&&(h=v,v=1);const d=document.createElement("canvas"),m=d.getContext("2d");d.width=f*(h<1?h:v),d.height=u*(h<1?h:v),t.setAttribute("width",f*v),t.setAttribute("height",u*v),m.fillStyle="white",m.fillRect(0,0,d.width,d.height),m.scale(v,v);const g=new XMLSerializer().serializeToString(t),b=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(b),w=new Image;w.onload=function(){h<0&&(w.width=w.width*h,w.height=w.height*h),m.drawImage(w,0,0,d.width,d.height);const _=d.toDataURL("image/png"),A=vf(_,l),M=document.createElement("a");M.href=A,M.download=`${e}.png`,M.click()},w.src=p},20)}function hf(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,o=t.clientWidth;t.setAttribute("width",o+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${o} ${r}`);const l=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(l),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function mf(t,e,r,o){const l=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":gf(e,r,o)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=l},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=l},500)}).catch(a=>console.error(a))}async function gf(t,e,r){const o=t.clientHeight,l=t.clientWidth,a=Math.max(e/l,r/o),c=document.createElement("canvas"),u=c.getContext("2d");return c.width=l*a,c.height=o*a,u.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((v,h)=>{const d=new XMLSerializer().serializeToString(t),m=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,b=g.createObjectURL(m),p=new Image;p.onload=function(){u.drawImage(p,0,0,c.width,c.height),g.revokeObjectURL(b),c.toBlob(function(w){w?v(w):h(new Error("Failed to create blob"))},"image/png")},p.onerror=function(w){h(w)},p.src=b})}function bf(t,e,r,o,l){let a=l.ticks,c=l.tickLabels,u=0;const f=ea(a,t,tf[r.x],!0,l.whole),v=f.length,h=Jl([Qs[r.plot]],o)[0],d=Se.fill(e[0],v),m=d.add(h),g=Se.fill(e[1],v);if(c||(a?(u=0,c=a.v.map(E=>Ar(E).toString())):[u,c]=Zs(f.v)),!c||c.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[f,d],[f,g]],p=[[Je([t[0]]),Je([e[0]])],[Je([t[1]]),Je([e[0]])]],w=[[f,m],[f,d]],_=(t[1]-t[0])*.01,A=[[null,null],[[t[1]-(u>9?1:0)*_],[d.v[v-1]]]],M=Js(u),y=c.length,k=Math.abs(t[1]>t[0]?t[1]-f.v[y-1]:t[1]-f.v[0]),z=Math.abs(t[1]-t[0]),C=Math.abs(f.v[1]-f.v[0]);if(M.length>0&&k<z*.1&&k<C*.5){const E=t[1]>t[0]?y-1:0;c[E]=" "}return{grid:b,axisLine:p,tickCoords:w,tfCoords:A,ticks:a,tickLabels:c,tickFactor:u,tfLabel:M}}function pf(t,e,r,o,l){let a=l.ticks,c=l.tickLabels,u=0;const f=ea(l.ticks,e,rf[r.y],!0,l.whole),v=f.length,h=Jl([Qs[r.plot]],o)[0],d=Se.fill(t[0],v),m=d.add(h),g=Se.fill(t[1],v);if(c||(a?(u=0,c=a.v.map(C=>Ar(C).toString())):[u,c]=Zs(f.v)),c.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[d,f],[g,f]],p=[[Je([t[0]]),Je([e[0]])],[Je([t[0]]),Je([e[1]])]],w=[[d,f],[m,f]],_=[[[],[]],[[m.v[v-1]+(Math.abs(u)>9?3:2)*h],[e[1]]]],A=Js(u),M=c.length,y=Math.abs(e[1]>e[0]?e[1]-f.v[M-1]:e[1]-f.v[0]),k=Math.abs(e[1]-e[0]),z=Math.abs(f.v[1]-f.v[0]);if(A.length>0&&y<k*.1&&y<z*.5){const C=e[1]>e[0]?M-1:0;c[C]=" "}return{grid:b,axisLine:p,tickCoords:w,tfCoords:_,ticks:a,tickLabels:c,tickFactor:u,tfLabel:A}}function wf(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Pe(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let o,l;if(t.labels?(o=t.labels,l=0):[l,o]=Zs(e),!(o.length===e.length-1||o.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=o.length===r.length;return{colmap:r,breaks:e,labels:o,isCentered:a,labelsFactor:l,fontSize:t.fontSize,labelColor:t.labelColor}}function _f(t,e,r,o){const l=t.colmap.length,a=e*nf,c=a/l,u=r[1]+(e-a)*.5,f=sf[o.y],v=r[2]+f*Gl,h=v+f*(1+Gl),d=t.isCentered?c/2:0;return{start:u,top:v,height:f,width:c,dxl:d,ltop:h}}function fn(t,e,r){if(!t||!e||!r||typeof r!="function")return;const o=t.target;if(o.tagName===e){const l=Array.prototype.indexOf.call(o.parentNode.children,o);if(l<0)return;r(l),t.stopPropagation()}}function yf(t,e){const o=document.createElement("canvas").getContext("2d");return o.font=e,o.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function xf(t,e){const r="Arial",o=e/8,l=e*1.5,a=Array(t.length),c=Array(t.length);let u=0,f=0,v=0;for(let d=0;d<t.length;d++){const m=yf("  "+t[d].label+"  ",e+"px "+r);v=m>v?m:v;const g=e*t[d].labelHeight+2*o;a[d]=g,c[d]=u,u=u+g,f=f+g}const h=l+2*o+v;return[c,a,l,o,f,h]}function kf(t,e,r,o,l){const[a,c,u,f,v,h]=xf(t.items,o*t.fontSize),d=t.position.includes("left")?e[0]+l:t.position.includes("right")?e[1]-h-l:(e[1]+e[0]-h)*.5,m=t.position.includes("top")?r[1]+l:t.position.includes("bottom")?r[0]-v-l:(r[1]+r[0]-v)*.5;return{lgl:d,lgt:m,lgw:h,lgh:v,ely:a,elh:c,elw:u,elp:f}}function vn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let o=0,l="";for(;o<t.length;){const a=t[o];if((a==="^"||a==="_")&&o<t.length-1){const c=a==="^";if(o++,t[o]==="("){let u=o+1;for(;u<t.length&&t[u]!==")";)u++;const f=t.slice(o+1,u);l+=c?e(f):r(f),o=u+1}else if(t[o]==="-"||t[o]==="–"){const u=t.slice(o,o+2);l+=c?e(u):r(u),o=o+2}else l+=c?e(t[o]):r(t[o]),o++}else l+=a,o++}return l}var Ef=pe('<line vector-effect="non-scaling-stroke"></line>'),Cf=pe("<g></g>");function eo(t,e){me(e,!0);let r=U(e,"lineCoords",19,()=>[]),o=U(e,"lineColor",19,()=>wt.DARKGRAY),l=U(e,"lineType",3,1),a=U(e,"lineWidth",3,1),c=U(e,"className",3,"");const u=Rt("axes");let f=L(()=>rt(r()[0][0],u.tX())),v=L(()=>rt(r()[1][0],u.tX())),h=L(()=>rt(r()[0][1],u.tY())),d=L(()=>rt(r()[1][1],u.tY())),m=L(()=>`stroke:${o()};stroke-width: ${a()}px;stroke-dasharray:${Xn[u.scales().plot][l()-1]}`);var g=de(),b=$(g);{var p=w=>{var _=Cf();Ue(_,21,()=>s(f),Xe,(A,M,y)=>{var k=Ef();oe(()=>{O(k,"x1",s(f)[y]),O(k,"x2",s(v)[y]),O(k,"y1",s(h)[y]),O(k,"y2",s(d)[y]),Wt(k,s(m))}),P(A,k)}),oe(()=>ut(_,0,Si(c()))),P(w,_)};G(b,w=>{s(f)&&s(h)&&s(v)&&w(p)})}P(t,g),ge()}var Af=pe('<text text-anchor="middle"><!></text>'),Sf=pe("<text><!></text>"),Mf=pe("<text><!></text>"),Nf=pe('<g class="tick-labels"><!></g>');function ra(t,e){me(e,!0);let r=U(e,"pos",3,1),o=U(e,"las",3,1),l=L(()=>["middle","middle","start","middle","end"][r()]),a=L(()=>`fill:${e.textColor};`);const c=Rt("axes");let u=L(()=>rt(e.tickCoords[1][0],c.tX())),f=L(()=>rt(e.tickCoords[1][1],c.tY())),v=L(()=>Yl[c.scales().plot]),h=L(()=>[0,0,s(v),0,-s(v)][r()]),d=L(()=>[0,s(v),0,-s(v),0][r()]);var m=Nf(),g=Y(m);{var b=w=>{var _=de(),A=$(_);Ue(A,17,()=>s(u),Xe,(M,y,k)=>{var z=Af();O(z,"data-id",k),O(z,"dx",0);var C=Y(z);pt(C,()=>e.tickLabels[k],!0),oe(()=>{O(z,"x",s(u)[k]),O(z,"y",s(f)[k]),O(z,"dy",s(h)*1.25),O(z,"transform",`rotate(-90, ${s(u)[k]}, ${s(f)[k]})`)}),P(M,z)}),P(w,_)},p=(w,_)=>{{var A=y=>{var k=de(),z=$(k);Ue(z,17,()=>s(u),Xe,(C,E,N)=>{var T=Sf();O(T,"data-id",N),O(T,"dy",0),O(T,"text-anchor","end");var R=Y(T);pt(R,()=>e.tickLabels[N],!0),oe(()=>{O(T,"x",s(u)[N]),O(T,"y",s(f)[N]),O(T,"dx",-s(d)/2),O(T,"transform",`rotate(-90, ${s(u)[N]}, ${s(f)[N]})`)}),P(C,T)}),P(y,k)},M=y=>{var k=de(),z=$(k);Ue(z,17,()=>s(u),Xe,(C,E,N)=>{var T=Mf();O(T,"data-id",N);var R=Y(T);pt(R,()=>e.tickLabels[N],!0),oe(()=>{O(T,"x",s(u)[N]),O(T,"y",s(f)[N]),O(T,"dx",s(h)),O(T,"dy",s(d)),O(T,"text-anchor",s(l))}),P(C,T)}),P(y,k)};G(w,y=>{o()===2&&r()===1?y(A):y(M,!1)},_)}};G(g,w=>{o()===2&&r()===4?w(b):w(p,!1)})}oe(()=>Wt(m,s(a))),P(t,m),ge()}const zf=(t,e=mt,r=mt)=>{var o=Ff();const l=L(()=>e().colmap.length);var a=$(o);Ue(a,17,()=>e().colmap,Xe,(h,d,m)=>{var g=Rf();const b=L(()=>r().start+m*r().width);var p=$(g),w=j(p);O(w,"dy",0);var _=Y(w);pt(_,()=>e().labels[m],!0),oe(()=>{O(p,"x",s(b)),O(p,"y",r().top),O(p,"width",r().width),O(p,"height",r().height),O(p,"fill",s(d)),O(w,"x",s(b)),O(w,"y",r().ltop),O(w,"dx",r().dxl),O(w,"fill",e().labelColor),O(w,"font-size",e().fontSize+"em")}),P(h,g)});var c=j(a);{var u=h=>{var d=jf();const m=L(()=>r().start+s(l)*r().width);O(d,"dx",0),O(d,"dy",0);var g=Y(d);pt(g,()=>e().labels[s(l)],!0),oe(()=>{O(d,"x",s(m)),O(d,"y",r().ltop),O(d,"fill",e().labelColor),O(d,"font-size",`${e().fontSize??""}em`)}),P(h,d)};G(c,h=>{e().isCentered||h(u)})}var f=j(c);{var v=h=>{var d=If();const m=L(()=>r().start+s(l)*r().width);var g=Y(d);pt(g,()=>Js(e().labelsFactor),!0),oe(()=>{O(d,"x",s(m)),O(d,"y",r().ltop),O(d,"fill",e().labelColor),O(d,"font-size",`${e().fontSize??""}em`)}),P(h,d)};G(f,h=>{e().labelsFactor!==0&&h(v)})}P(t,o)};function na(t,e,r){t.preventDefault(),e(t,r())}function sa(t,e,r){t.preventDefault(),e(t,r())}function oa(t,e,r){t.preventDefault(),e(t,r())}function Qn(t,e,r){t.preventDefault(),e(t,r())}async function la(t,e,r,o){mf(t.target,s(e),r(),o())}function aa(t,e,r){hf(s(e),r())}function ia(t,e,r,o,l,a){df(s(e),r(),o(),l(),a())}var Pf=pe('<text fill="crimson" text-anchor="middle"> </text>'),Tf=pe('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Lf=pe("<!><!><!><!><!>",1),Rf=pe('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),jf=pe('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),If=pe('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Ff=pe("<!><!><!>",1),qf=pe("<line></line>"),Of=pe('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Df=pe('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Vf=pe('<svg><rect height="100%" width="100%"></rect><!></svg>'),Bf=pe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Wf=pe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Yf=pe('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Gf=pe('<g class="plot-labels"><!><!><!></g>'),Uf=pe('<g class="axis x-axis"><!></g>'),Hf=pe('<g class="axis y-axis"><!></g>'),Kf=pe('<rect fill="transparent" id="axes-box"></rect>'),Xf=pe('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Qf=pe('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Jf=pe('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Zf=pe('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),$f=K('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),ev=K('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),tv=K(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function rv(t,e){me(e,!0);const r=(he,Ce=mt,xe=mt)=>{var Ze=de(),ht=$(Ze);{var Ht=_t=>{var Ve=de(),Ne=$(Ve);{var vt=$e=>{var Ge=Pf(),Dt=Y(Ge);oe(()=>{O(Ge,"x",s(te)[0]-10),O(Ge,"y",s(Z)),O(Ge,"transform",`rotate(-90, ${s(te)[0]-10}, ${s(Z)})`),ae(Dt,xe().error)}),P($e,Ge)},at=$e=>{var Ge=Tf(),Dt=Y(Ge);oe(()=>{O(Ge,"x",s(ee)),O(Ge,"y",s(ne)[0]),ae(Dt,xe().error)}),P($e,Ge)};G(Ne,$e=>{xe().pos===4?$e(vt):$e(at,!1)})}P(_t,Ve)},At=_t=>{var Ve=Lf(),Ne=$(Ve);{var vt=ue=>{eo(ue,{get lineCoords(){return Ce().grid},get lineColor(){return wt.MIDDLEGRAY},lineType:3})};G(Ne,ue=>{xe().showGrid&&ue(vt)})}var at=j(Ne);eo(at,{get lineCoords(){return Ce().axisLine},get lineColor(){return wt.DARKGRAY},lineType:1});var $e=j(at);eo($e,{get lineCoords(){return Ce().tickCoords},get lineColor(){return wt.DARKGRAY},lineType:1});var Ge=j($e);{var Dt=ue=>{ra(ue,{get las(){return xe().las},get pos(){return xe().pos},get tickCoords(){return Ce().tickCoords},get tickLabels(){return Ce().tickLabels},get tickColor(){return wt.DARKGRAY},get hideLast(){return xe().hideLast}})};G(Ge,ue=>{Ce().tickCoords.length===2&&Ce().tickLabels.length===Ce().tickCoords[1][0].length&&ue(Dt)})}var Mr=j(Ge);{var Fe=ue=>{const dt=L(()=>[Ce().tfLabel]);ra(ue,{get pos(){return xe().pos},get tickCoords(){return Ce().tfCoords},get tickLabels(){return s(dt)},get textColor(){return wt.DARKGRAY}})};G(Mr,ue=>{Ce().tickFactor!==0&&ue(Fe)})}P(_t,Ve)};G(ht,_t=>{xe().error?_t(Ht):_t(At,!1)})}P(he,Ze)},o=(he,Ce=mt,xe=mt)=>{var Ze=Vf();const ht=L(()=>xe().elw+2*xe().elp),Ht=L(()=>xe().elp),At=L(()=>xe().elh),_t=L(()=>xe().ely);var Ve=Y(Ze),Ne=j(Ve);Ue(Ne,17,()=>Ce().items,Xe,(vt,at,$e)=>{var Ge=Df();O(Ge,"x",0);var Dt=Y(Ge);{var Mr=lr=>{var ze=qf();oe(()=>{O(ze,"x1",s(Ht)),O(ze,"x2",s(ht)-s(Ht)),O(ze,"y1",s(At)[$e]/2),O(ze,"y2",s(At)[$e]/2),O(ze,"stroke",s(at).line.lineColor),O(ze,"stroke-width",s(at).line.lineWidth),O(ze,"stroke-dasharray",s(R)[s(at).line.lineType-1])}),P(lr,ze)};G(Dt,lr=>{s(at).line&&lr(Mr)})}var Fe=j(Dt);{var ue=lr=>{var ze=Of(),io=Y(ze);oe(()=>{O(ze,"x",s(ht)/2),O(ze,"y",s(At)[$e]/2),O(ze,"fill",s(at).point.faceColor),O(ze,"stroke-width",s(at).point.lineWidth),O(ze,"stroke",s(at).point.lineColor),O(ze,"font-size",s(N)),ae(io,un[s(at).point.marker-1])}),P(lr,ze)};G(Fe,lr=>{s(at).point&&lr(ue)})}var dt=j(Fe),ao=Y(dt);pt(ao,()=>s(at).label,!0),oe(()=>{O(Ge,"y",s(_t)[$e]),O(Ge,"width",xe().lgw),O(Ge,"height",s(At)[$e]),O(dt,"x",s(ht)+s(Ht)),O(dt,"y",s(At)[$e]/2),O(dt,"fill",wt.LEGEND),O(dt,"font-size",`${Ce().fontSize??""}em`)}),P(vt,Ge)}),oe(()=>{O(Ze,"x",xe().lgl),O(Ze,"y",xe().lgt),O(Ze,"height",xe().lgh),O(Ze,"width",xe().lgw),O(Ve,"fill",Ce().faceColor),O(Ve,"stroke",Ce().lineColor),O(Ve,"stroke-width",Ce().lineWidth)}),P(he,Ze)};let l=U(e,"limX",19,()=>[0,1]),a=U(e,"limY",19,()=>[0,1]),c=U(e,"margins",19,()=>[1,1.1,.55,.6]),u=U(e,"downloadLinks",3,"none"),f=U(e,"fileName",3,"plot"),v=U(e,"pngWidth",3,8),h=U(e,"pngHeight",3,8),d=U(e,"pngRes",3,300),m=U(e,"clipboardWidth",3,1200),g=U(e,"clipboardHeight",3,800),b=U(e,"onclick",3,null),p=U(e,"onmousemove",3,null),w=U(e,"onmousedown",3,null),_=U(e,"onmouseup",3,null);function A(he,Ce){if(Ce&&he.target.id=="axes-box"){const xe=Ql([he.offsetX-s(D)],s(X))[0],Ze=Ql([he.offsetY-s(F)],s(re))[0];Ce(xe,Ze)}}const M="plottingArea"+Math.round(Math.random()*1e4);let y=ie(0),k=ie(0),z=ie(0);const C=L(()=>({plot:af(s(k),s(z)),x:ta(s(k)),y:ta(s(z))})),E=L(()=>c().map(he=>he*ef[s(C).plot])),N=L(()=>Wl[s(C).plot]),T=L(()=>Qs[s(C).plot]),R=L(()=>Xn[s(C).plot]),q=L(()=>s(ce).show&&s(ce).label!==""?s(N)*1.5:0),D=L(()=>s(_e).show&&s(_e).label!==""?s(N)*1.5:0),F=L(()=>e.title&&e.title!==""?s(N)*1.5:0),S=L(()=>s(k)>s(D)?s(k)-s(D):0),I=L(()=>s(z)>s(q)+s(F)?s(z)-s(q)-s(F):0),V=L(()=>s(I)-s(E)[0]-s(E)[2]),H=L(()=>s(S)-s(E)[1]-s(E)[3]),B=L(()=>Ul(l(),2)&&Ul(a(),2)&&s(S)>s(E)[1]+s(E)[3]&&s(I)>s(E)[0]+s(E)[2]),X=L(()=>s(B)?{coords:[s(H)/(l()[1]-l()[0]),l()[0],s(E)[1]],objects:[s(H)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),re=L(()=>s(B)?{coords:[-s(V)/(a()[1]-a()[0]),a()[1],s(E)[2]],objects:[s(V)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Z=L(()=>s(V)*.5+s(F)+s(E)[2]),ee=L(()=>s(H)*.5+s(D)+s(E)[1]),te=L(()=>s(B)?rt(l(),s(X)):[0,1]),ne=L(()=>s(B)?rt(a(),s(re)):[1,0]),se=L(()=>vn(e.title)),fe=L(()=>s(se)?s(se).length===e.title.left?1:1.4:0);let ye=ie(Ke({show:!1})),ce=ie(Ke({show:!1,error:""})),_e=ie(Ke({show:!1,error:""})),Ee=ie(Ke({show:!1,colmap:null,breaks:null})),Ie=ie(Ke({show:!1,items:null,position:null}));const ft=L(()=>s(B)&&s(Ee)&&s(Ee).show?wf(s(Ee)):null),Me=L(()=>s(B)&&s(ce).show?bf(l(),a(),s(C),s(re),s(ce)):null),We=L(()=>s(B)&&s(_e).show?pf(l(),a(),s(C),s(X),s(_e)):null),nt=L(()=>s(B)&&s(ft)?_f(s(ft),s(H),s(E),s(C)):null),Ct=L(()=>s(B)&&s(Ie)&&s(Ie).show&&s(te)?kf(s(Ie),s(te),s(ne),s(N),s(T)):null);Ha("axes",{setBox:he=>J(ye,he,!0),setXAxis:he=>J(ce,he,!0),setYAxis:he=>J(_e,he,!0),setColmapLegend:he=>J(Ee,he,!0),setGroupLegend:he=>J(Ie,he,!0),scales:()=>s(C),tX:()=>s(X),tY:()=>s(re),limX:()=>l(),limY:()=>a()});var Pt=tv();let Sr;var Ot=Y(Pt),br=j(Y(Ot));{var ns=he=>{var Ce=Gf(),xe=Y(Ce);{var Ze=Ve=>{var Ne=Bf();O(Ne,"dx",0),O(Ne,"dy",0);var vt=Y(Ne);pt(vt,()=>s(ce).label,!0),oe(()=>{O(Ne,"x",s(ee)),O(Ne,"y",s(I)+s(F))}),P(Ve,Ne)};G(xe,Ve=>{s(ce).show&&s(ce).label&&s(ce).label!==""&&Ve(Ze)})}var ht=j(xe);{var Ht=Ve=>{var Ne=Wf();O(Ne,"dx",0),O(Ne,"dy",0);var vt=Y(Ne);pt(vt,()=>s(_e).label,!0),oe(()=>{O(Ne,"x",s(N)/1.1*s(_e).labelHeight),O(Ne,"y",s(Z)),O(Ne,"transform",`rotate(-90, ${s(N)*s(_e).labelHeight/1.1}, ${s(Z)})`)}),P(Ve,Ne)};G(ht,Ve=>{s(_e).show&&s(_e).label&&s(_e).label!==""&&Ve(Ht)})}var At=j(ht);{var _t=Ve=>{var Ne=Yf();O(Ne,"dx",0),O(Ne,"dy",0);var vt=Y(Ne);pt(vt,()=>s(se),!0),oe(()=>{O(Ne,"x",s(ee)),O(Ne,"y",s(N)*s(fe))}),P(Ve,Ne)};G(At,Ve=>{s(se)&&s(se)!==""&&Ve(_t)})}P(he,Ce)};G(br,he=>{s(B)&&he(ns)})}var pr=j(br),hn=Y(pr),ss=Y(hn);O(ss,"id",M);var Xr=Y(ss),ro=j(hn);{var no=he=>{var Ce=Zf(),xe=$(Ce);{var Ze=Fe=>{var ue=Uf(),dt=Y(ue);r(dt,()=>s(Me),()=>s(ce)),P(Fe,ue)};G(xe,Fe=>{s(ce).show&&s(Me)&&Fe(Ze)})}var ht=j(xe);{var Ht=Fe=>{var ue=Hf(),dt=Y(ue);r(dt,()=>s(We),()=>s(_e)),P(Fe,ue)};G(ht,Fe=>{s(_e).show&&s(We)&&Fe(Ht)})}var At=j(ht),_t=Y(At);{var Ve=Fe=>{var ue=Kf();ue.__keydown=[Qn,A,b],ue.__click=[Qn,A,b],ue.__mousemove=[oa,A,p],ue.__mousedown=[na,A,w],ue.__mouseup=[sa,A,_],oe(()=>{O(ue,"stroke",s(ye).lineColor),O(ue,"stroke-width",`${s(ye).lineWidth??""}px`),O(ue,"x",s(te)[0]),O(ue,"y",s(ne)[1]),O(ue,"width",s(te)[1]-s(te)[0]),O(ue,"height",s(ne)[0]-s(ne)[1])}),P(Fe,ue)},Ne=Fe=>{var ue=Xf();ue.__keydown=[Qn,A,b],ue.__click=[Qn,A,b],ue.__mousemove=[oa,A,p],ue.__mousedown=[na,A,w],ue.__mouseup=[sa,A,_],oe(()=>{O(ue,"x",s(te)[0]),O(ue,"y",s(ne)[1]),O(ue,"width",s(te)[1]-s(te)[0]),O(ue,"height",s(ne)[0]-s(ne)[1])}),P(Fe,ue)};G(_t,Fe=>{s(ye).show?Fe(Ve):Fe(Ne,!1)})}var vt=j(At);O(vt,"clip-path",`url(#${M})`);var at=Y(vt);vr(at,()=>e.children??mt);var $e=j(vt);{var Ge=Fe=>{var ue=Qf(),dt=Y(ue);zf(dt,()=>s(ft),()=>s(nt)),P(Fe,ue)};G($e,Fe=>{s(nt)&&Fe(Ge)})}var Dt=j($e);{var Mr=Fe=>{var ue=Jf(),dt=Y(ue);o(dt,()=>s(Ie),()=>s(Ct)),P(Fe,ue)};G(Dt,Fe=>{s(Ct)&&Fe(Mr)})}P(he,Ce)};G(ro,he=>{s(B)&&he(no)})}In(Ot,he=>J(y,he),()=>s(y));var so=j(Ot,2);{var oo=he=>{var Ce=$f();P(he,Ce)},lo=he=>{var Ce=ev(),xe=Y(Ce);xe.__click=[aa,y,f],xe.__keydown=[aa,y,f];var Ze=j(xe,2);Ze.__click=[ia,y,f,v,h,d],Ze.__keydown=[ia,y,f,v,h,d];var ht=j(Ze,2);ht.__click=[la,y,m,g],ht.__keydown=[la,y,m,g],P(he,Ce)};G(so,he=>{s(B)?he(lo,!1):he(oo)})}oe(he=>{Sr=ut(Pt,1,`plot-container show-download-links-${u()??""}`,"svelte-1jtdxd0",Sr,he),Wt(Ot,`font-size:${s(N)??""}px`),O(pr,"x",s(D)),O(pr,"y",s(F)),O(pr,"width",s(S)),O(pr,"height",s(I)),O(Xr,"x",s(te)[0]),O(Xr,"y",s(ne)[1]),O(Xr,"width",s(te)[1]-s(te)[0]),O(Xr,"height",s(ne)[0]-s(ne)[1])},[()=>({"plot-error":!s(B)})]),al(Ot,"clientWidth",he=>J(k,he)),al(Ot,"clientHeight",he=>J(z,he)),P(t,Pt),ge()}tt(["keydown","click","mousemove","mousedown","mouseup"]);function Jn(t,e){me(e,!0);let r=U(e,"tickLabels",7),o=U(e,"las",3,1),l=U(e,"whole",3,!1),a=U(e,"show",3,!0),c=U(e,"showGrid",3,!1);const u=Rt("axes");be(()=>{const f=vn(e.label),v=f?f.length===e.label.length?1:1.4:0;let h,d="";e.ticks&&([h,d]=$l(e.ticks,u.limX())),!d&&r()&&(m=>{let[g,b]=m;r(g),d=b})(Zl(r(),h)),u.setXAxis({show:a(),error:d,label:f,ticks:h,labelHeight:v,showGrid:c(),las:o(),whole:l(),tickLabels:r()})}),ge()}function Zn(t,e){me(e,!0);let r=U(e,"tickLabels",7),o=U(e,"las",3,1),l=U(e,"whole",3,!1),a=U(e,"show",3,!0),c=U(e,"showGrid",3,!1);const u=Rt("axes");be(()=>{const f=vn(e.label),v=f?f.length===e.label.length?1:1.4:0;let h,d="";e.ticks&&([h,d]=$l(e.ticks,u.limY())),!d&&r()&&(m=>{let[g,b]=m;r(g),d=b})(Zl(r(),h)),u.setYAxis({show:a(),error:d,label:f,ticks:h,labelHeight:v,showGrid:c(),las:o(),whole:l(),tickLabels:r(),pos:4})}),ge()}function $n(t,e){me(e,!0);let r=U(e,"lineWidth",3,1),o=U(e,"lineColor",3,"#606060");const l=Rt("axes");be(()=>{l.setBox({show:!0,lineWidth:r(),lineColor:o()})}),ge()}var nv=(t,e)=>fn(t,"rect",e.onclick),sv=pe("<rect></rect>"),ov=pe("<g></g>");function $t(t,e){me(e,!0);let r=U(e,"faceColor",19,()=>wt.PRIMARY),o=U(e,"lineColor",19,r),l=U(e,"lineWidth",3,1),a=U(e,"className",3,"series-rect");const c=L(()=>Et(e.left,"Rectangles (left)")),u=L(()=>s(c)?Et(e.top,"Rectangles (top)",s(c).length):null),f=L(()=>s(u)?typeof e.width!="object"?Se.fill(e.width,s(c).length):e.width:null),v=L(()=>s(u)?typeof e.height!="object"?Se.fill(e.height,s(c).length):e.height:null),h=Rt("axes"),d=L(()=>s(c)?rt(s(c),h.tX()):null),m=L(()=>s(u)?rt(s(u),h.tY()):null),g=L(()=>s(f)?Kl(s(f),h.tX()):null),b=L(()=>s(v)?Kl(s(v),h.tY()):null),p=L(()=>`fill:${r()};stroke:${o()};stroke-width:${l()}px;`),w=L(()=>s(d)&&s(m)&&s(g)&&s(b)&&s(g).length===s(d).length&&s(b).length===s(d).length);var _=de(),A=$(_);{var M=y=>{var k=ov();k.__click=[nv,e],Ue(k,21,()=>e.left,Xe,(z,C,E)=>{var N=sv();oe(()=>{O(N,"x",s(d)[E]),O(N,"y",s(m)[E]),O(N,"width",s(g)[E]),O(N,"height",s(b)[E])}),P(z,N)}),oe(()=>{ut(k,0,`series ${a()??""}`),Wt(k,s(p))}),P(y,k)};G(A,y=>{s(w)&&y(M)})}P(t,_),ge()}tt(["click"]);var lv=(t,e)=>fn(t,"line",e.onclick),av=pe("<line></line>"),iv=pe('<g class="series series-segment"></g>');function to(t,e){me(e,!0);let r=U(e,"lineColor",19,()=>wt.PRIMARY),o=U(e,"lineType",3,1),l=U(e,"lineWidth",3,1);const a=L(()=>Et(e.xStart,"Segments")),c=L(()=>s(a)?Et(e.yStart,"Segments",s(a).length):null),u=L(()=>s(c)?Et(e.xEnd,"Segments",s(a).length):null),f=L(()=>s(u)?Et(e.yEnd,"Segments",s(a).length):null),v=Rt("axes"),h=L(()=>s(a)?rt(s(a),v.tX()):null),d=L(()=>s(u)?rt(s(u),v.tX()):null),m=L(()=>s(c)?rt(s(c),v.tY()):null),g=L(()=>s(f)?rt(s(f),v.tY()):null),b=L(()=>`stroke:${r()};stroke-width: ${l()}px;stroke-dasharray:${Xn[v.scales().plot][o()-1]}`),p=L(()=>s(h)&&s(d)&&s(m)&&s(g));var w=de(),_=$(w);{var A=M=>{var y=iv();y.__click=[lv,e],Ue(y,21,()=>s(h),Xe,(k,z,C)=>{var E=av();oe(()=>{O(E,"x1",s(h)[C]),O(E,"x2",s(d)[C]),O(E,"y1",s(m)[C]),O(E,"y2",s(g)[C])}),P(k,E)}),oe(()=>Wt(y,s(b))),P(M,y)};G(_,M=>{s(p)&&M(A)})}P(t,w),ge()}tt(["click"]);var cv=(t,e)=>fn(t,"text",e.onclick),uv=pe("<text><!></text>"),fv=pe("<text><!></text>"),vv=pe("<text><!></text>"),dv=pe('<g class="series series-textlabels"><!></g>');function ca(t,e){me(e,!0);let r=U(e,"pos",3,0),o=U(e,"faceColor",19,()=>wt.PRIMARY_TEXT),l=U(e,"lineColor",3,"transparent"),a=U(e,"lineWidth",3,0),c=U(e,"textSize",3,1),u=U(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],v=L(()=>Et(e.xValues,"TextLabels")),h=L(()=>s(v)?Et(e.yValues,"TextLabels",s(v).length):null),d=L(()=>s(h)?Array.isArray(e.labels)&&e.labels.length!==s(h).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=L(()=>s(d)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Rt("axes"),b=L(()=>s(v)&&s(m)!==null?rt(s(v),g.tX()):null),p=L(()=>s(h)&&s(b)?rt(s(h),g.tY()):null),w=L(()=>Yl[g.scales().plot]),_=L(()=>[0,0,-s(w),0,s(w),s(w)]),A=L(()=>[0,s(w),0,-s(w),0,s(w)]),M=L(()=>`fill:${o()};stroke-width:${a()}px;stroke:${l()};font-size:${c()}em;`),y=L(()=>s(b)&&s(p)&&s(m)!==null&&s(d)&&s(b).length===s(p).length);var k=de(),z=$(k);{var C=E=>{var N=dv();N.__click=[cv,e];var T=Y(N);{var R=D=>{var F=de(),S=$(F);Ue(S,17,()=>s(b),Xe,(I,V,H)=>{var B=uv();O(B,"data-id",H);var X=Y(B);pt(X,()=>e.labels,!0),oe(()=>{O(B,"x",s(b)[H]),O(B,"y",s(p)[H]),O(B,"dx",s(_)[r()]),O(B,"dy",s(A)[r()]),O(B,"transform",u()!==void 0?`rotate(${u()}, ${s(b)[H]+s(_)[r()]}, ${s(p)[H]+s(A)[r()]})`:""),O(B,"text-anchor",f[r()[H]])}),P(I,B)}),P(D,F)},q=(D,F)=>{{var S=V=>{var H=de(),B=$(H);Ue(B,17,()=>s(b),Xe,(X,re,Z)=>{var ee=fv();O(ee,"data-id",Z);var te=Y(ee);pt(te,()=>e.labels[Z],!0),oe(()=>{O(ee,"x",s(b)[Z]),O(ee,"y",s(p)[Z]),O(ee,"dx",s(_)[r()[Z]]),O(ee,"dy",s(A)[r()[Z]]),O(ee,"transform",u()!==void 0?`rotate(${u()}, ${s(b)[Z]+s(_)[r()]}, ${s(p)[Z]+s(A)[r()]})`:""),O(ee,"text-anchor",f[r()[Z]])}),P(X,ee)}),P(V,H)},I=V=>{var H=de(),B=$(H);Ue(B,17,()=>s(b),Xe,(X,re,Z)=>{var ee=vv();O(ee,"data-id",Z);var te=Y(ee);pt(te,()=>e.labels[Z],!0),oe(()=>{O(ee,"x",s(b)[Z]),O(ee,"y",s(p)[Z]),O(ee,"dx",s(_)[r()]),O(ee,"dy",s(A)[r()]),O(ee,"transform",u()!==void 0?`rotate(${u()}, ${s(b)[Z]+s(_)[r()]}, ${s(p)[Z]+s(A)[r()]})`:""),O(ee,"text-anchor",f[r()])}),P(X,ee)}),P(V,H)};G(D,V=>{Array.isArray(r())||ArrayBuffer.isView(r())?V(S):V(I,!1)},F)}};G(T,D=>{typeof e.labels=="string"?D(R):D(q,!1)})}oe(()=>Wt(N,s(M))),P(E,N)};G(z,E=>{s(y)&&E(C)})}P(t,k),ge()}tt(["click"]),tt(["click"]);var hv=(t,e)=>fn(t,"text",e.onclick),mv=pe("<text> </text>"),gv=pe('<g text-anchor="middle"></g>');function qt(t,e){me(e,!0);let r=U(e,"marker",3,1),o=U(e,"faceColor",3,"transparent"),l=U(e,"lineColor",19,()=>wt.PRIMARY),a=U(e,"lineWidth",3,1),c=U(e,"markerSize",3,1);const u=L(()=>typeof r()!="number"||r()<1||r()>un.length?(console.error('Points: parameter "marker" must be a number from 1 to '+un.length+"."),null):un[r()-1]),f=L(()=>Et(e.xValues,"Points")),v=L(()=>s(f)?Et(e.yValues,"Points",s(f).length):null),h=Rt("axes"),d=L(()=>s(f)?rt(s(f),h.tX()):null),m=L(()=>s(d)&&s(v)?rt(s(v),h.tY()):null),g=L(()=>["＋","✳","✕"].includes(s(u))?`fill:${l()&&l()!=="transparent"?l():o()};stroke-width:0px;font-size:${c()}em;`:`fill:${o()};stroke-width:${a()}px;stroke:${l()}; font-size:${c()}em;`),b=L(()=>["◼","⬥","＋","✳","✕"].includes(s(u))?"series-points2":"series-points1"),p=L(()=>s(d)&&s(m)&&s(d).length===s(m).length);var w=de(),_=$(w);{var A=M=>{var y=gv();y.__click=[hv,e],Ue(y,21,()=>s(d),Xe,(k,z,C)=>{var E=mv(),N=Y(E);oe(()=>{O(E,"x",s(d)[C]),O(E,"y",s(m)[C]),ae(N,s(u))}),P(k,E)}),oe(()=>{ut(y,0,`series series-points ${s(b)??""}`),Wt(y,s(g))}),P(M,y)};G(_,M=>{s(p)&&M(A)})}P(t,w),ge()}tt(["click"]);var bv=(t,e)=>fn(t,"polyline",e.onclick),pv=pe('<g class="series series-line"><polyline class="line"></polyline></g>');function er(t,e){me(e,!0);let r=U(e,"lineColor",19,()=>wt.PRIMARY),o=U(e,"lineType",3,1),l=U(e,"lineWidth",3,1);const a=L(()=>Et(e.xValues,"Lines")),c=L(()=>s(a)?Et(e.yValues,"Lines",s(a).length):null),u=Rt("axes"),f=L(()=>s(a)&&s(c)?of(s(a),s(c),u.tX(),u.tY()):null),v=L(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${Xn[u.scales().plot][o()-1]}`);var h=de(),d=$(h);{var m=g=>{var b=pv();b.__click=[bv,e];var p=Y(b);oe(()=>{Wt(b,s(v)),O(p,"points",s(f))}),P(g,b)};G(d,g=>{s(f)&&g(m)})}P(t,h),ge()}tt(["click"]),tt(["click"]);function wv(t,e){me(e,!0);let r=U(e,"show",3,!0),o=U(e,"position",3,"topleft"),l=U(e,"lineColor",19,()=>wt.LEGEND),a=U(e,"lineWidth",3,1),c=U(e,"faceColor",3,"#fff"),u=U(e,"fontSize",3,.85);function f(d){return typeof d!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(d)?d:(console.error('Legend: wrong value of "position" property'),null)}function v(d){if(!d||!Array.isArray(d)||d.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let m=0;m<d.length;m++){const g=d[m];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const b=vn(g.label),p=b.length===g.label?1:1.4;g.label=b,g.labelHeight=p,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(m+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:wt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=un.length||console.error('Legend: parameter "marker" for legend item '+(m+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:wt.PRIMARY)}return d}const h=Rt("axes");be(()=>{const d=v(e.items),m=f(o());h.setGroupLegend(d&&m?{show:r(),position:o(),items:e.items,lineColor:l(),faceColor:c(),lineWidth:a(),fontSize:u()}:{show:!1,position:null,items:null})}),ge()}var _v=K("<!> <!> <!>",1);function ua(t,e){me(e,!0);const r="#80808060",o=L(()=>e.calset.varvalues),l=L(()=>{if(!e.calset)return null;const v=s(o).length;let h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;const m=Se.zeros(v),g=Se.zeros(v);for(let b=0;b<s(o).length;b++){const p=e.calset.values.getcolumn(b+1),w=Wr(p),_=Ps(p),A=w+_,M=w-_;m.v[b]=w,g.v[b]=_,h=Math.min(h,M),d=Math.max(d,A)}return{m,s:g,mn:h,mx:d,scale:1/(d-h)}}),a=L(()=>{if(!s(l))return null;let v=e.limY[1]-e.limY[0],h=e.limY[0]+v*.1;v=e.limY[1]-v*.3-h;const m=s(o).length,g=Se.zeros(m),b=Se.zeros(m),p=Se.zeros(m),w=s(l).scale*v;for(let _=0;_<m;_++){const A=s(l).m.v[_],M=s(l).s.v[_],y=A+M,k=A+M;b.v[_]=(y-s(l).mn)*w+h,p.v[_]=(k-s(l).mn)*w+h,g.v[_]=(A-s(l).mn)*w+h}return{m:g,su:b,sb:p}});var c=de(),u=$(c);{var f=v=>{var h=_v(),d=$(h);er(d,{get xValues(){return s(o)},get yValues(){return s(a).m},lineColor:r,lineWidth:2});var m=j(d,2);er(m,{get xValues(){return s(o)},get yValues(){return s(a).sb},lineColor:r,lineWidth:1,lineType:3});var g=j(m,2);er(g,{get xValues(){return s(o)},get yValues(){return s(a).su},lineColor:r,lineWidth:1,lineType:3}),P(v,h)};G(u,v=>{s(a)&&v(f)})}P(t,c),ge()}const yv=[1,1.1,.45,.4],xv=8,kv=8,Ev=600;function es(t,e){rv(t,{get limX(){return e.limX},get limY(){return e.limY},get title(){return e.title},get fileName(){return e.fileName},downloadLinks:"hover",margins:yv,pngWidth:xv,pngHeight:kv,pngRes:Ev,children:(r,o)=>{var l=de(),a=$(l);vr(a,()=>e.children),P(r,l)},$$slots:{default:!0}})}var Cv=K("<!> <!> <!> <!> <!> <!> <!>",1);function Av(t,e){me(e,!0);const r="ddsimca-love-intervals",o=L(()=>e.props.s);function l(_){if(!_)return[0,1];const A=_.varvalues[0],M=_.varvalues[_.varvalues.length-1],y=M-A;return[A-y*.1,M+y*.025]}const a=L(()=>{if(!s(o).outcomes)return"Data and intervals";if(s(o).outcomes.status==="running")return"Calculation in progress..."}),c=L(()=>s(o).calset.varAxisTitle),u=L(()=>s(o).varselparams?Array(s(o).varselparams.nInt).fill(10):null),f=L(()=>s(o).varselparams?Array(s(o).varselparams.nInt).fill(22):null),v=L(()=>s(u)&&s(f)?{left:s(o).varselparams.left,width:s(o).varselparams.width,top:s(u),height:s(f)}:null),h=L(()=>{if(s(v)&&s(o).intExcluded.length>0){const _=s(o).intExcluded.length,A=Array(_),M=Array(_),y=Array(_),k=Array(_);for(let z=0;z<_;z++)A[z]=s(v).left[s(o).intExcluded[z]],M[z]=s(v).width[s(o).intExcluded[z]],y[z]=s(v).top[s(o).intExcluded[z]],k[z]=s(v).height[s(o).intExcluded[z]];return{left:A,width:M,top:y,height:k}}else return null}),d=L(()=>s(o).outcomes&&s(o).outcomes.status==="running"&&s(v)?{left:[s(v).left[s(o).outcomes.curInt]],width:[s(v).width[s(o).outcomes.curInt]],top:[2],height:[4],faceColor:"#fffa0040"}:null),m=L(()=>l(s(o).calset)),g=L(()=>[0,1.1]);var b=de(),p=$(b);{var w=_=>{es(_,{fileName:r,get limX(){return s(m)},get limY(){return s(g)},get title(){return s(a)},children:(A,M)=>{var y=Cv(),k=$(y);ua(k,{get calset(){return s(o).calset},get limY(){return s(g)}});var z=j(k,2);{var C=S=>{$t(S,je({lineColor:"transparent",faceColor:"#00000040"},()=>s(h)))};G(z,S=>{s(h)&&S(C)})}var E=j(z,2);{var N=S=>{var I=de(),V=$(I);{var H=B=>{$t(B,je(()=>s(d)))};G(V,B=>{s(d)&&B(H)})}P(S,I)};G(E,S=>{s(o).outcomes&&s(o).outcomes.status==="running"&&S(N)})}var T=j(E,2);{var R=S=>{$t(S,je({lineColor:"#00000010",faceColor:"#00000005"},()=>s(v)))};G(T,S=>{s(v)&&S(R)})}var q=j(T,2);$n(q,{});var D=j(q,2);Jn(D,{get label(){return s(c)}});var F=j(D,2);Zn(F,{showGrid:!0}),P(A,y)}})};G(p,_=>{s(m)&&s(g)&&_(w)})}P(t,b),ge()}var Sv=pe("<text><!></text>");function fa(t,e){me(e,!0);let r=U(e,"dx",3,0);U(e,"dy",3,0);let o=U(e,"pos",3,0),l=U(e,"faceColor",19,()=>Colors.PRIMARY_TEXT),a=U(e,"textSize",3,1);function c(){return o()<.25?"start":o()>.75?"end":"middle"}function u(_){return _<.25?e.x:_>.75?e.x+r():e.x+r()/2}const f=L(()=>c(o())),v=Rt("axes"),h=L(()=>e.x?rt(Et([u(o())]),v.tX()):null),d=L(()=>e.y?rt(Et([e.y]),v.tY()):null),m=L(()=>Wl[v.scales().plot]),g=L(()=>e.x&&e.y);var b=de(),p=$(b);{var w=_=>{var A=de(),M=$(A);Ue(M,17,()=>e.label,Xe,(y,k,z)=>{var C=Sv(),E=Y(C);pt(E,()=>s(k),!0),oe(()=>{O(C,"x",s(h)),O(C,"y",s(d)-s(m)*z),O(C,"text-anchor",s(f)),O(C,"fill",l()),O(C,"font-size",`${a()??""}em`)}),P(y,C)}),P(_,A)};G(p,_=>{s(g)&&_(w)})}P(t,b),ge()}var Mv=K("<!> <!>",1),Nv=K("<!> <!> <!>",1),zv=K("<!> <!>",1),Pv=K("<!> <!>",1),Tv=K("<!> <!>",1),Lv=K("<!> <!> <!>; <!>",1);function Rv(t,e){me(e,!0);let r=U(e,"yMin",15),o=U(e,"yMax",15);const l=L(()=>{if(!e.fomView||!e.s.outcomes||e.s.outcomes.status!=="done")return{min:0,max:1,values:null};const b=e.s.varselparams.mid,p=e.s.varselparams.width,w=b.length;let _=0,A=0,M={};const y=e.fomView==="diff"?.21:.84,k=e.fomView==="diff"?1:0,z=.42;let C=0;for(const E of e.fomKeys){const N=e.s.outcomes[E][e.fomView].getcolumn(e.s.nComp).v,T=Array(w),R=Array(w),q=Array(w),D=Array(w);for(let F=0;F<w;F++)T[F]=b[F]-z*p[F]+C*y*k*p[F],D[F]=y*p[F],N[F]>=0?(R[F]=N[F],q[F]=N[F],A=Math.max(A,N[F])):(R[F]=0,q[F]=-N[F],_=Math.min(_,N[F]));M[E]={left:T,top:R,height:q,width:D,faceColor:"#a8a04060"},C=C+1}return{values:M,min:_,max:A}}),a=L(()=>s(l)?(s(l).max-s(l).min)*.2:0);be(()=>{r(s(l).min-s(a)),o(s(l).max+s(a))});const c=L(()=>{if(!s(l)||!s(l).values||e.s.intSelected===void 0||e.s.intSelected===null||e.s.intSelected<0)return null;const b=e.s.intSelected,p={},w={},_=s(l).values[e.fomKeys[0]],A=_.left[b],M=_.width[b];let y,k;e.fomView==="diff"?(y=A-M/2,k=M*e.fomKeys.length+M):(y=A,k=M);for(const z of e.fomKeys){const C=s(l).values[z],E=C.left[b],N=C.width[b],T=C.top[b],R=C.height[b],q=T===0?-R:R,D=e.s.varselparams.intLabels[b];p[z]={left:[E],width:[N],top:[T],height:[R]},w[z]={x:y,y:e.fomView==="diff"?o()-.5*s(a):1.02,dx:k,dy:s(a),label:[q.toFixed(3),D],pos:b/e.s.varselparams.nInt,textSize:.8,faceColor:e.seriesColors.selected}}return{psl:p,tsl:w}}),u=L(()=>e.s.statsGlobal&&e.fom?e.s.statsGlobal[e.fom][e.s.statsGlobal.ncompBest?e.s.statsGlobal.ncompBest-1:e.s.nComp-1]:null),f=L(()=>e.s.statsCurrent&&e.fom&&e.s.statsCurrent.ncompBest?e.s.statsCurrent[e.fom][e.s.statsCurrent.ncompBest?e.s.statsCurrent.ncompBest-1:e.s.nComp-1]:null),v=L(()=>s(l).values&&e.fom?s(l).values[e.fom]:null),h=L(()=>s(v)?(e.limX[0]+s(v).left[0])*.5:0);var d=de(),m=$(d);{var g=b=>{var p=de(),w=$(p);{var _=M=>{var y=Nv(),k=$(y);const z=L(()=>[e.limX[0]]),C=L(()=>[e.limX[1]]);to(k,{get xStart(){return s(z)},get xEnd(){return s(C)},yStart:[0],yEnd:[0],lineColor:"#808080"});var E=j(k,2);Ue(E,17,()=>e.fomKeys,Xe,(R,q)=>{const D=L(()=>"#a8a040"+(s(q)===e.fom?"e0":"60"));$t(R,je(()=>s(l).values[s(q)],{lineWidth:0,get faceColor(){return s(D)}}))});var N=j(E,2);{var T=R=>{var q=Mv(),D=$(q);Ue(D,17,()=>e.fomKeys,Xe,(S,I)=>{const V=L(()=>e.seriesColors.selected+(s(I)===e.fom?"":"40"));$t(S,je(()=>s(c).psl[s(I)],{lineWidth:0,get faceColor(){return s(V)}}))});var F=j(D,2);fa(F,je(()=>s(c).tsl[e.fom])),P(R,q)};G(N,R=>{s(c)&&R(T)})}P(M,y)},A=M=>{var y=Lv(),k=$(y);{var z=q=>{var D=zv(),F=$(D);const S=L(()=>[e.limX[0]]),I=L(()=>[e.limX[1]]),V=L(()=>[s(u)]),H=L(()=>[s(u)]);to(F,{get xStart(){return s(S)},get xEnd(){return s(I)},get yStart(){return s(V)},get yEnd(){return s(H)},get lineColor(){return e.seriesColors.global}});var B=j(F,2);const X=L(()=>[s(h)]),re=L(()=>[s(u)]),Z=L(()=>[s(u).toFixed(3)]),ee=L(()=>s(u)>s(f)?3:1);ca(B,{get xValues(){return s(X)},get yValues(){return s(re)},get labels(){return s(Z)},get pos(){return s(ee)},textSize:.85,get faceColor(){return e.seriesColors.global}}),P(q,D)};G(k,q=>{s(u)&&q(z)})}var C=j(k,2);{var E=q=>{var D=Pv(),F=$(D);const S=L(()=>[e.limX[0]]),I=L(()=>[e.limX[1]]),V=L(()=>[s(f)]),H=L(()=>[s(f)]);to(F,{get xStart(){return s(S)},get xEnd(){return s(I)},get yStart(){return s(V)},get yEnd(){return s(H)},lineType:3,get lineColor(){return e.seriesColors.best}});var B=j(F,2);const X=L(()=>[s(h)]),re=L(()=>[s(f)]),Z=L(()=>[s(f).toFixed(3)]),ee=L(()=>s(u)>s(f)?1:3);ca(B,{get xValues(){return s(X)},get yValues(){return s(re)},get labels(){return s(Z)},get pos(){return s(ee)},textSize:.85,get faceColor(){return e.seriesColors.best}}),P(q,D)};G(C,q=>{s(f)&&q(E)})}var N=j(C,2);$t(N,je(()=>s(v),{faceColor:"#a8a04080"}));var T=j(N,2);{var R=q=>{var D=Tv(),F=$(D);$t(F,je(()=>s(c).psl[e.fom],{lineWidth:0,get faceColor(){return e.seriesColors.selected}}));var S=j(F,2);fa(S,je(()=>s(c).tsl[e.fom])),P(q,D)};G(T,q=>{s(c)&&q(R)})}P(M,y)};G(w,M=>{e.fomView==="diff"?M(_):M(A,!1)})}P(b,p)};G(m,b=>{s(l)&&b(g)})}P(t,d),ge()}var jv=K("<!> <!> <!> <!> <!> <!> <!> <!>",1);function Iv(t,e){me(e,!0);const r="ddsimca-love-outcomes",o=L(()=>e.props?e.props.s:null),l=L(()=>e.props?e.props.fomKeys:null),a=L(()=>e.props?e.props.fomNames:null),c=L(()=>e.props?e.props.seriesColors:null);let u=ie(0),f=ie(1),v=L(()=>s(o).calset.varAxisTitle);function h(z){if(!z)return[0,1];const C=z.varvalues[0],E=z.varvalues[z.varvalues.length-1],N=E-C;return[C-N*.1,E+N*.025]}const d=L(()=>s(o).outcomes?s(o).outcomes.status==="running"?"Selection in progress...":"Variable selection outcomes (A = "+s(o).nComp+")":"Data and intervals"),m=L(()=>!s(o).outcomes||s(o).outcomes.status==="running"?" ":(e.params.fomView==="diff"?"Difference in ":"")+s(a)[e.params.fom]),g=L(()=>s(o).varselparams?Array(s(o).varselparams.nInt).fill(10):null),b=L(()=>s(o).varselparams?Array(s(o).varselparams.nInt).fill(22):null),p=L(()=>s(g)&&s(b)?{left:s(o).varselparams.left,width:s(o).varselparams.width,top:s(g),height:s(b)}:null),w=L(()=>{if(s(p)&&s(o).intExcluded.length>0){const z=s(o).intExcluded.length,C=Array(z),E=Array(z),N=Array(z),T=Array(z);for(let R=0;R<z;R++)C[R]=s(p).left[s(o).intExcluded[R]],E[R]=s(p).width[s(o).intExcluded[R]],N[R]=s(p).top[s(o).intExcluded[R]],T[R]=s(p).height[s(o).intExcluded[R]];return{left:C,width:E,top:N,height:T}}else return null}),_=L(()=>h(s(o).calset)),A=L(()=>e.params.fomView==="diff"?[s(u),s(f)]:[0,1.1]);var M=de(),y=$(M);{var k=z=>{es(z,{fileName:r,get limX(){return s(_)},get limY(){return s(A)},get title(){return s(d)},children:(C,E)=>{var N=jv(),T=$(N);ua(T,{get calset(){return s(o).calset},get limY(){return s(A)}});var R=j(T,2);{var q=Z=>{Rv(Z,{get s(){return s(o)},get limX(){return s(_)},get fomKeys(){return s(l)},get seriesColors(){return s(c)},get fomView(){return e.params.fomView},get fom(){return e.params.fom},get yMin(){return s(u)},set yMin(ee){J(u,ee,!0)},get yMax(){return s(f)},set yMax(ee){J(f,ee,!0)}})};G(R,Z=>{s(o).outcomes&&Z(q)})}var D=j(R,2);{var F=Z=>{const ee=L(()=>[s(p).left[s(o).intSelected]]),te=L(()=>[s(p).width[s(o).intSelected]]),ne=L(()=>[s(p).top[s(o).intSelected]]),se=L(()=>[s(p).height[s(o).intSelected]]);$t(Z,{get left(){return s(ee)},get width(){return s(te)},get top(){return s(ne)},get height(){return s(se)},lineColor:"#00000010",faceColor:"#ff000010"})};G(D,Z=>{s(p)&&s(o).intSelected>=0&&Z(F)})}var S=j(D,2);{var I=Z=>{$t(Z,je({className:"series-love-intervals",lineColor:"#00000010",faceColor:"#00000005"},()=>s(p),{get onclick(){return e.callbacks.select}}))};G(S,Z=>{s(p)&&Z(I)})}var V=j(S,2);{var H=Z=>{$t(Z,je({lineColor:"transparent",faceColor:"#00000040"},()=>s(w)))};G(V,Z=>{s(w)&&Z(H)})}var B=j(V,2);$n(B,{});var X=j(B,2);Jn(X,{get label(){return s(v)}});var re=j(X,2);Zn(re,{get label(){return s(m)},showGrid:!0}),P(C,N)}})};G(y,z=>{e.params&&s(_)&&s(A)&&z(k)})}P(t,M),ge()}var Fv=K("<!> <!>",1),qv=K("<!> <!> <!>",1),Ov=K("<!> <!>",1),Dv=K("<!> <!> <!> <!> <!>",1),Vv=K("<!> <!> <!> <!> <!>",1);function Bv(t,e){me(e,!0);const r="ddsimca-love-progress",o=L(()=>e.props?e.props.s:null),l=L(()=>e.props?e.props.fomKeys:null),a=L(()=>e.props?e.props.fomNames:null),c=L(()=>e.props?e.props.seriesColors:null),u="Variable selection progress",f="Steps",v=L(()=>s(a)[e.params.fom]),h=L(()=>s(o).statsProgress?s(o).statsProgress.length:0),d=L(()=>s(h)>0?Un(0,s(h)-1):null),m=L(()=>{if(s(h)<1)return null;const E={};let N=1.1,T=0;for(let R=0;R<s(h);R++){const q=s(o).statsProgress[R];for(const D of s(l)){R===0&&(E[D]=[]);const F=q[D];E[D].push(F),N=Math.min(N,F),T=Math.max(T,F)}}return{series:E,min:N,max:T}}),g=L(()=>s(m)?{xValues:s(d),yValues:s(m).series[e.params.fom]}:null),b=L(()=>s(g)?{xValues:[s(h)-1],yValues:[s(g).yValues[s(h)-1]]}:null),p=L(()=>s(g)?{xValues:[0],yValues:[s(g).yValues[0]]}:null),w=L(()=>{if(!s(g)||!s(o).outcomes||s(o).outcomes.status!=="done"||s(o).intSelected<0)return null;let E=1,N=0,T={};for(const R of s(l)){const q=s(o).outcomes[R].val.getcolumn(s(o).nComp).v[s(o).intSelected];E=Math.min(E,q),N=Math.max(N,q),T[R]={xValues:[s(h)-1,s(h)],yValues:[s(m).series[R][s(h)-1],q]}}return{series:T,min:E,max:N}}),_=L(()=>s(w)?s(w).series[e.params.fom]:null),A=L(()=>s(b)?{xValues:[s(h)-1,s(h)],yValues:[s(b).yValues[0],s(_).yValues[1]]}:null),M=L(()=>s(h)>0?s(_)?[-.5,s(h)+.5]:[-.5,s(h)-.5]:[0,1]),y=L(()=>{if(!s(m)||!e.params.zoom)return[0,1.1];const E=s(m).min,N=s(m).max;return s(w)?[Math.min(E,s(w).min)-.02,Math.max(N,s(w).max+.02)]:[E-.02,N+.02]});var k=de(),z=$(k);{var C=E=>{es(E,{fileName:r,get limX(){return s(M)},get limY(){return s(y)},title:u,children:(N,T)=>{var R=Vv(),q=$(R);{var D=B=>{var X=qv(),re=$(X);Ue(re,17,()=>Object.keys(s(w).series),Xe,(te,ne)=>{var se=Fv(),fe=$(se);er(fe,je(()=>s(w).series[s(ne)],{lineColor:"#d0d0d0",lineType:3}));var ye=j(fe,2);qt(ye,je(()=>s(w).series[s(ne)],{markerSize:.75,lineColor:"#d0d0d0",faceColor:"#e0e0e0"})),P(te,se)});var Z=j(re,2);er(Z,je(()=>s(A),{get lineColor(){return s(c).selected},lineType:3}));var ee=j(Z,2);qt(ee,je(()=>s(_),{get lineColor(){return s(c).selected},get faceColor(){return s(c).selected},borderWidth:2})),P(B,X)};G(q,B=>{s(_)&&B(D)})}var F=j(q,2);{var S=B=>{var X=Dv(),re=$(X);Ue(re,17,()=>Object.keys(s(m).series),Xe,(se,fe)=>{var ye=Ov(),ce=$(ye);er(ce,{get xValues(){return s(d)},get yValues(){return s(m).series[s(fe)]},lineColor:"#d0d0d0"});var _e=j(ce,2);qt(_e,{get xValues(){return s(d)},get yValues(){return s(m).series[s(fe)]},markerSize:.75,lineColor:"#d0d0d0",faceColor:"#e0e0e0"}),P(se,ye)});var Z=j(re,2);er(Z,je(()=>s(g),{lineColor:"#808080",lineWidth:2}));var ee=j(Z,2);qt(ee,je(()=>s(g),{lineColor:"#808080",faceColor:"#fafafa"}));var te=j(ee,2);qt(te,je(()=>s(b),{get lineColor(){return s(c).best},lineWidth:2}));var ne=j(te,2);qt(ne,je(()=>s(p),{get lineColor(){return s(c).global},lineWidth:2})),P(B,X)};G(F,B=>{s(g)&&B(S)})}var I=j(F,2);$n(I,{});var V=j(I,2);Jn(V,{showGrid:!0,label:f,whole:!0});var H=j(V,2);Zn(H,{showGrid:!0,get label(){return s(v)}}),P(N,R)}})};G(z,E=>{s(m)&&E(C)})}P(t,k),ge()}var Wv=K("<!> <!> <!>",1),Yv=K("<!> <!> <!>",1),Gv=K("<!> <!> <!>",1),Uv=K("<!> <!> <!> <!> <!> <!> <!>",1);function Hv(t,e){me(e,!0);const r=L(()=>e.props.s),o=L(()=>e.props?e.props.fomKeys:null),l=L(()=>e.props?e.props.fomNames:null),a=L(()=>e.props?e.props.seriesColors:null),c="ddsimca-love-models",u="PCs",f="Variable selection outcomes",v=[0,1.1],h=L(()=>s(l)[e.params.fom]);function d(N,T){return{label:N,line:{lineColor:T.lineColor},point:{lineColor:T.lineColor,lineWidth:1.25,faceColor:"#fafafa",marker:1}}}function m(N,T,R){const q=[];return N&&q.push(d("global",N)),T&&q.push(d("current",T)),R&&q.push(d("selected ("+(s(r).intSelected+1)+")",R)),q}let g=L(()=>s(r).statsGlobal?s(r).statsGlobal[[s(o)[0]]].length:1),b=L(()=>[0,s(g)+1]),p=L(()=>s(r).statsGlobal&&e.params.fom?{xValues:Se.seq(1,s(g)),yValues:new Se(s(r).statsGlobal[e.params.fom]),lineColor:s(a).global}:null),w=L(()=>s(p)?{xValues:[s(r).nComp],yValues:[s(p).yValues.v[s(r).nComp-1]],lineColor:s(a).global}:null),_=L(()=>s(r).statsCurrent&&e.params.fom?{xValues:Se.seq(1,s(r).statsCurrent[e.params.fom].length),yValues:new Se(s(r).statsCurrent[e.params.fom]),lineColor:s(a).best}:null),A=L(()=>s(_)?{xValues:[s(r).nComp],yValues:[s(_).yValues.v[s(r).nComp-1]],lineColor:s(a).best}:null),M=L(()=>s(r).outcomes&&e.params.fom&&s(r).intSelected>=0?{xValues:Se.seq(1,s(r).outcomes[e.params.fom].val.ncols),yValues:s(r).outcomes[e.params.fom].val.getrow(s(r).intSelected+1),lineColor:s(a).selected}:null),y=L(()=>s(M)?{xValues:[s(r).nComp],yValues:[s(M).yValues.v[s(r).nComp-1]],lineColor:s(a).selected}:null),k=L(()=>m(s(p),s(_),s(M)));var z=de(),C=$(z);{var E=N=>{es(N,{fileName:c,get limX(){return s(b)},limY:v,title:f,children:(T,R)=>{var q=Uv(),D=$(q);{var F=ee=>{var te=Wv(),ne=$(te);er(ne,je(()=>s(p)));var se=j(ne,2);qt(se,je(()=>s(p),{faceColor:"#fafafa"}));var fe=j(se,2);qt(fe,je(()=>s(w),{faceColor:"#fafafa",lineWidth:3})),P(ee,te)};G(D,ee=>{s(p)&&ee(F)})}var S=j(D,2);{var I=ee=>{var te=Yv(),ne=$(te);er(ne,je(()=>s(_)));var se=j(ne,2);qt(se,je(()=>s(_),{faceColor:"#fafafa"}));var fe=j(se,2);qt(fe,je(()=>s(A),{faceColor:"#fafafa",lineWidth:3})),P(ee,te)};G(S,ee=>{s(_)&&ee(I)})}var V=j(S,2);{var H=ee=>{var te=Gv(),ne=$(te);er(ne,je(()=>s(M)));var se=j(ne,2);qt(se,je(()=>s(M),{faceColor:"#fafafa"}));var fe=j(se,2);qt(fe,je(()=>s(y),{faceColor:"#fafafa",lineWidth:3})),P(ee,te)};G(V,ee=>{s(M)&&ee(H)})}var B=j(V,2);wv(B,{get items(){return s(k)},position:"bottomright"});var X=j(B,2);$n(X,{});var re=j(X,2);Jn(re,{showGrid:!0,label:u,whole:!0});var Z=j(re,2);Zn(Z,{showGrid:!0,get label(){return s(h)}}),P(T,q)}})};G(C,N=>{e.params&&N(E)})}P(t,z),ge()}function Kv(t,e){me(e,!0);const r=L(()=>e.props.s);be(()=>{e.selected>-1&&e.props.selectInt(e.selected)}),be(()=>{s(r).intSelected<0&&e.callbacks.select(s(r).intSelected)});var o=de(),l=$(o);{var a=u=>{Iv(u,{get props(){return e.props},get params(){return e.params},get callbacks(){return e.callbacks},get selected(){return e.selected}})},c=(u,f)=>{{var v=d=>{Bv(d,{get props(){return e.props},get params(){return e.params}})},h=(d,m)=>{{var g=p=>{Hv(p,{get props(){return e.props},get params(){return e.params}})},b=p=>{Av(p,{get props(){return e.props},get params(){return e.params}})};G(d,p=>{e.params.plot==="statistics"?p(g):p(b,!1)},m)}};G(u,d=>{e.params.plot==="progress"&&s(r).statsProgress?d(v):d(h,!1)},f)}};G(l,u=>{e.params.plot==="intervals"&&s(r).outcomes&&s(r).outcomes.status==="done"?u(a):u(c,!1)})}P(t,o),ge()}var Xv=K('<div class="msg-select"> </div>'),Qv=K('<div class="msg-select"> </div>'),Jv=K('<div class="msg-select"> </div>'),Zv=K('<div class="msg-select"> </div>'),$v=K('<div class="selected-buttons svelte-8mh2yv"><!></div>'),ed=K('<div class="selected-buttons svelte-8mh2yv"><!></div>'),td=K("<!> <!> <!>",1),rd=()=>switchPlot(i),nd=(t,e,r)=>J(e,s(r),!0),sd=K("<button> </button>"),od=K('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!> <!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function ld(t,e){me(e,!0);let r=U(e,"selobjText",3,"Click to select an object..."),o=U(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=U(e,"clearText",3,"Click anywhere to remove selection..."),a=U(e,"params",15),c=Ke({objects:-1,variables:[]}),u=ie(Ke(Object.keys(e.plots)[0]));function f(N){c.objects=N}function v(N){c.objects=-1}function h(N){c.variables=N}function d(N){c.variables=[]}let m={objects:{select:f,unselect:v},variables:{select:h,unselect:d},stats:{}},g=L(()=>s(u)?e.plots[s(u)]:null),b=L(()=>s(g)?s(g).component:null);var p=od(),w=Y(p),_=Y(w),A=Y(_);As(A,()=>s(b),(N,T)=>{T(N,{get params(){return a()[s(u)]},get callbacks(){return m[s(g).scope]},get selected(){return c[s(g).scope]},get props(){return e.props}})});var M=j(_,2),y=Y(M);{var k=N=>{var T=de(),R=$(T);{var q=F=>{var S=Xv(),I=Y(S);oe(()=>ae(I,r())),P(F,S)},D=F=>{var S=Qv(),I=Y(S);oe(()=>ae(I,l())),P(F,S)};G(R,F=>{c[s(g).scope]<0?F(q):F(D,!1)})}P(N,T)};G(y,N=>{s(g).scope==="objects"&&a()[s(u)].plotType!=="l"&&r().length>0&&N(k)})}var z=j(y,2);{var C=N=>{var T=de(),R=$(T);{var q=F=>{var S=Jv(),I=Y(S);oe(()=>ae(I,o())),P(F,S)},D=F=>{var S=Zv(),I=Y(S);oe(()=>ae(I,l())),P(F,S)};G(R,F=>{c[s(g).scope].length===0?F(q):F(D,!1)})}P(N,T)};G(z,N=>{s(g).scope==="variables"&&a()[s(u)].plotType!=="l"&&o().length>0&&N(C)})}var E=j(w,2);Ue(E,21,()=>Object.keys(e.plots),Xe,(N,T)=>{var R=de(),q=$(R);{var D=S=>{var I=td(),V=$(I);du(V,{get title(){return s(g).label},labelWidth:12,get options(){return e.controls[s(u)]},get value(){return a()[s(u)]},set value(Z){a(a()[s(u)]=Z,!0)}});var H=j(V,2);{var B=Z=>{var ee=$v(),te=Y(ee);vr(te,()=>s(g).buttons,()=>c.objects),P(Z,ee)};G(H,Z=>{s(g).scope==="objects"&&s(g).buttons&&c.objects>=0&&Z(B)})}var X=j(H,2);{var re=Z=>{var ee=ed(),te=Y(ee);vr(te,()=>s(g).buttons,()=>c.variables),P(Z,ee)};G(X,Z=>{s(g).scope==="variables"&&s(g).buttons&&c.variables.length>0&&Z(re)})}P(S,I)},F=S=>{var I=sd();I.__keydown=[rd],I.__click=[nd,u,T];var V=Y(I);oe(()=>{ut(I,1,`plot-selector plot-selector-${s(T)??""}`,"svelte-8mh2yv"),ae(V,e.plots[s(T)].label)}),P(S,I)};G(q,S=>{s(g)&&s(u)===s(T)?S(D):S(F,!1)})}P(N,R)}),P(t,p),ge()}tt(["keydown","click"]);var ad=K("<!> <!>",1);function id(t,e){me(e,!0);const r=(b,p=mt)=>{var w=de(),_=$(w);{var A=M=>{const y=L(()=>e.s.intSelected+1);ve(M,{get label(){return`Selected (${s(y)??""})`},children:(k,z)=>{var C=ad(),E=$(C);ot(E,{get onclick(){return e.cancelSelection},text:"cancel"});var N=j(E,2);ot(N,{onclick:()=>e.setExcluded(e.s.intSelected),text:"exclude"}),P(k,C)},$$slots:{default:!0}})};G(_,M=>{e.s.intSelected>=0&&M(A)})}P(b,w)};let o=ie(!0);const l={sens:"sensitivity",spec:"specificity",eff:"efficiency",sel:"selectivity"},a=Object.keys(l),c={global:"#404040",best:"#2679B2",selected:"#D22C2F"},u=["intervals","progress","statistics"],f=Ur(e.s.altset)?["sens"]:["sens","spec","eff","sel"],v={txt:{el:zt,hidden:!1,default:"Run selection",label:"Run selection"},plot:{el:zt,name:"plot",hidden:!1,default:"intervals",label:"Show",props:{options:u}},fom:{el:zt,name:"fom",hidden:!1,default:"sens",label:"Statistic",props:{options:f}},nComp:{el:Vl,name:"ncomp",hidden:!1,default:1,label:"# PCs",props:{min:1,max:1,step:1,decNum:0}},fomView:{el:zt,name:"fomview",hidden:!1,default:"val",label:"Show",props:{options:["diff","val"]}},zoom:{el:cn,name:"zoom",hidden:!1,default:!1,label:"Zoom",props:{options:["off","on"]}}},h=L(()=>({main:{label:"Outcomes",scope:"objects",component:Kv,buttons:r}})),d=Ke({main:v});let m=ie(Ke({main:Xc(v)}));be(()=>{e.s.outcomes&&e.s.outcomes.status==="done"&&(d.main.nComp.props.max=e.s.outcomes.ncomp)}),be(()=>{e.s.outcomes&&e.s.outcomes.status==="running"?(J(o,!0),s(m).main.plot="intervals",d.main.txt.hidden=!1,d.main.plot.hidden=!0):(J(o,!1),d.main.txt.hidden=!0,d.main.plot.hidden=!1)}),be(()=>{s(m).main.plot==="intervals"&&e.s.outcomes&&e.s.outcomes.status==="done"?d.main.fomView.hidden=!1:d.main.fomView.hidden=!0}),be(()=>{s(m).main.plot==="intervals"&&e.s.outcomes&&e.s.outcomes.status==="done"||s(m).main.plot==="progress"||s(m).main.plot==="statistics"?d.main.fom.hidden=!1:d.main.fom.hidden=!0}),be(()=>{s(m).main.plot!=="progress"?d.main.zoom.hidden=!0:d.main.zoom.hidden=s(o)}),be(()=>{s(m).main.plot==="progress"||!e.s.outcomes||e.s.outcomes.status!=="done"?d.main.nComp.hidden=!0:d.main.nComp.hidden=s(o)}),be(()=>{e.s.statsProgress?d.main.plot={label:"Show",hidden:!1,el:zt,props:{options:["intervals","progress","statistics"]}}:(d.main.plot={label:"Show",hidden:!1,el:zt,props:{options:["intervals","statistics"]}},s(m).plot==="progress"&&(s(m).plots="intervals"))}),be(()=>{e.setNComp(s(m).main.nComp)});const g=L(()=>({s:e.s,seriesColors:c,fomKeys:a,fomNames:l,selectInt:e.selectInt}));ld(t,{get props(){return s(g)},get plots(){return s(h)},get controls(){return d},selobjText:"",",":!0,get params(){return s(m)},set params(b){J(m,b,!0)}}),ge()}var cd=K('<p class="title">Variable selection settings</p>'),ud=K('<p style="padding: 0.25em; font-weight:bold;"> </p>'),fd=K('<p style="padding: 0.25em; font-weight:bold;"> </p>'),vd=K("<!> <!>",1),dd=K('<p style="padding: 0.25em; font-weight:bold;"> </p> <!>',1),hd=K('<p style="padding: 0.25em;font-weight:bold;">Calculation in progress...</p>'),md=K('<p style="padding: 0.25em;font-weight:bold;">Select interval</p>'),gd=K('<p style="padding: 0.25em;color:crimson;font-weight:bold;">No intervals left for selection.</p>'),bd=K("<!> <!> <!> <!>",1);function pd(t,e){me(e,!0);let r=U(e,"varselparams",15),o=U(e,"outcomes",15),l=U(e,"alpha",15);const a=[10,5,1,.1];let c=e.calset.values.ncols,u=ie(Ke(r()?r().nInt:c<50?c:10)),f=ie(Ke(e.curNInt)),v=e.calset.varvalues,h=e.calset.varlabels,d=Yc(c);async function m(E){const{center:N,scale:T,ncomp:R}=e.model,{nInt:q}=r(),D=e.calset.values,F=e.tarset.values,S=Ur(e.altset)?null:e.altset.values,I=D.ncols-e.varsExcluded.length-r().intSize,V=R>I?I:R,H=it.zeros(V,q),B=it.zeros(V,q),X=it.zeros(V,q),re=it.zeros(V,q),Z=it.zeros(V,q),ee=it.zeros(V,q),te=it.zeros(V,q),ne=it.zeros(V,q);for(let se=0;se<q;se++){if(e.intExcluded.length>0&&e.intExcluded.includes(se))continue;o({status:"running",curInt:se});const fe=Un(r().intLeftIndices[se],r().intRightIndices[se]),ye=r().intSize===1?[...e.varsExcluded,se]:e.varsExcluded.concat(fe),ce=await Bc(e.WASM,{varInd:ye,nComp:V,Xcal:D,Xtar:F,Xalt:S,center:N,scale:T,statsCurrent:e.statsCurrent,alpha:l()});H.v.set(ce.sens.val,se*V),B.v.set(ce.spec.val,se*V),X.v.set(ce.eff.val,se*V),re.v.set(ce.sel.val,se*V),Z.v.set(ce.sens.diff,se*V),ee.v.set(ce.spec.diff,se*V),te.v.set(ce.eff.diff,se*V),ne.v.set(ce.sel.diff,se*V)}o({status:"done",ncomp:V,sens:{val:H.t(),diff:Z.t()},spec:{val:B.t(),diff:ee.t()},eff:{val:X.t(),diff:te.t()},sel:{val:re.t(),diff:ne.t()}})}be(()=>{s(f)!==s(u)&&(J(f,s(u),!0),o(null))}),be(()=>{r(Wc(c,s(u),null,v,h))});var g=bd(),b=$(g);ve(b,{label:"",children:(E,N)=>{var T=cd();P(E,T)},$$slots:{default:!0}});var p=j(b,2);{var w=E=>{ve(E,{name:"alpha",label:"Alpha, %:",children:(N,T)=>{zt(N,{id:"alpha",options:a,get value(){return l()},set value(R){l(R)}})},$$slots:{default:!0}})},_=E=>{ve(E,{label:"Alpha, %:",children:(N,T)=>{var R=ud(),q=Y(R);oe(()=>ae(q,l())),P(N,R)},$$slots:{default:!0}})};G(p,E=>{e.intExcluded.length===0&&!o()?E(w):E(_,!1)})}var A=j(p,2);{var M=E=>{var N=de(),T=$(N);{var R=D=>{ve(D,{name:"nint",label:"N. of intervals:",children:(F,S)=>{zt(F,{id:"nInt",options:d,get value(){return s(u)},set value(I){J(u,I,!0)}})},$$slots:{default:!0}})},q=D=>{ve(D,{label:"N. of intervals:",children:(F,S)=>{var I=fd(),V=Y(I);oe(()=>ae(V,s(u))),P(F,I)},$$slots:{default:!0}})};G(T,D=>{!o()||o().status!=="running"?D(R):D(q,!1)})}P(E,N)},y=E=>{ve(E,{label:"N. of intervals:",children:(N,T)=>{var R=dd(),q=$(R),D=Y(q),F=j(q,2);{var S=I=>{var V=vd(),H=$(V);{var B=re=>{Hc(re,{get onclick(){return e.undoExcluded}})};G(H,re=>{e.intExcluded.length>=2&&re(B)})}var X=j(H,2);Hr(X,{get onclick(){return e.resetExcluded}}),P(I,V)};G(F,I=>{(!o()||o().status!=="running")&&I(S)})}oe(()=>ae(D,`${s(u)??""} (${e.intExcluded.length??""} out, ${r().nInt-e.intExcluded.length} in)`)),P(N,R)},$$slots:{default:!0}})};G(A,E=>{e.intExcluded.length===0||!r()?E(M):E(y,!1)})}var k=j(A,2);{var z=E=>{ve(E,{label:" ",children:(N,T)=>{var R=de(),q=$(R);{var D=S=>{var I=hd();P(S,I)},F=S=>{var I=md();P(S,I)};G(q,S=>{o().status==="running"?S(D):S(F,!1)})}P(N,R)},$$slots:{default:!0}})},C=E=>{var N=de(),T=$(N);{var R=q=>{ve(q,{label:" ",children:(D,F)=>{var S=de(),I=$(S);{var V=B=>{const X=L(()=>e.intExcluded.length>0?"new":"");ot(B,{id:"run",onclick:()=>m(),get text(){return`Run ${s(X)??""}`}})},H=B=>{var X=gd();P(B,X)};G(I,B=>{e.intExcluded.length<r().nInt-1&&e.varsExcluded.length<r().nVars-2?B(V):B(H,!1)})}P(D,S)},$$slots:{default:!0}})};G(T,q=>{r()&&q(R)})}P(E,N)};G(k,E=>{o()&&!(o().status==="done"&&e.intExcluded.length===0)?E(z):E(C,!1)})}P(t,g),ge()}var wd=K('<div class="model-calculator svelte-1cx2u9k"><!></div>'),_d=K("<!> <!>",1),yd=K("<h2>Upload target test set</h2>"),xd=K("<!> <!>",1),kd=K("<h2>Generate PV-set</h2>"),Ed=K("<!> <!>",1),Cd=K('<div class="tarset-loader svelte-1cx2u9k"><!></div>'),Ad=K("<!> <!>",1),Sd=K("<h2>Load alternative test set</h2>"),Md=K("<!> <!>",1),Nd=K("<p>No alternative set (rigorous mode)</p> <!>",1),zd=K('<div class="data-loader-alt svelte-1cx2u9k"><!> <!></div>'),Pd=K('<div class="love-settings svelte-1cx2u9k"><!></div>'),Td=K('<div class="res-table svelte-1cx2u9k"><!></div>'),Ld=K('<div class="downloads-widget svelte-1cx2u9k"><!></div>'),Rd=K(`<p class="svelte-1cx2u9k"><strong>Step 1. Load training set from a CSV file.</strong></p> <p class="svelte-1cx2u9k">The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1cx2u9k">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1cx2u9k">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1cx2u9k"><table class="svelte-1cx2u9k"><thead class="svelte-1cx2u9k"><tr class="svelte-1cx2u9k"><td class="svelte-1cx2u9k">Name</td><td class="svelte-1cx2u9k">Class</td><td class="svelte-1cx2u9k">x1</td><td class="svelte-1cx2u9k">x2</td><td class="svelte-1cx2u9k">x3</td></tr></thead><tbody><tr><td class="svelte-1cx2u9k">O1</td><td class="svelte-1cx2u9k">A</td><td class="svelte-1cx2u9k">3.8</td><td class="svelte-1cx2u9k">1.3</td><td class="svelte-1cx2u9k">13.6</td></tr><tr><td class="svelte-1cx2u9k">O2</td><td class="svelte-1cx2u9k">A</td><td class="svelte-1cx2u9k">11.1</td><td class="svelte-1cx2u9k">12.3</td><td class="svelte-1cx2u9k">3.3</td></tr><tr><td class="svelte-1cx2u9k">O3</td><td class="svelte-1cx2u9k">A</td><td class="svelte-1cx2u9k">1.2</td><td class="svelte-1cx2u9k">2.3</td><td class="svelte-1cx2u9k">4.2</td></tr></tbody></table></div> <p class="svelte-1cx2u9k"></p>`,1),jd=K(`<p class="svelte-1cx2u9k"><strong>Step 2. Create a global PCA model</strong></p> <p class="svelte-1cx2u9k">Next step is to create a global PCA model for the calibration set, which will be the basis for the SIMCA model. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to set
               optimal number later.</p>`,1),Id=K('<p class="svelte-1cx2u9k"><strong>Step 3. Compute PV-set</strong></p> <p class="svelte-1cx2u9k">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p>',1),Fd=K('<p class="svelte-1cx2u9k"><strong>Step 4. Load or skip dataset with objects of alternative classes</strong></p> <p class="svelte-1cx2u9k">Finally you can either load test set with alternative classes members from a CSV file or skip it and work only with target class (rigorous mode). In case if you want to load the alternatvie dataset, the file should be organized in the same way as the training set.</p> <p class="svelte-1cx2u9k">After this step you will be able to start variable selection procedure.</p>',1),qd=K(`<div class="help-text svelte-1cx2u9k"><p class="svelte-1cx2u9k">In this app can apply DDSIMCA-LOVE &mdash; interactive method for variable selection for DD-SIMCA classifier. The method can work
               in <em>compliant</em> (with both target class objects and objects from alternative classes) or in rigorous (using only target class objects) mode. After selection is done, you can use the final model and/or rediced datasets in the main <a href="https://mda.tools/ddsimca/" class="svelte-1cx2u9k">DD-SIMCA app</a>.</p> <!> <!> <!> <!></div>`),Od=K('<div class="app-container svelte-1cx2u9k"><div class="app-controls svelte-1cx2u9k"><div class="data-loader-train svelte-1cx2u9k"><!></div> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1cx2u9k"><!></div></div>');function Dd(t,e){me(e,!0);const r=L(()=>e.session.train);let o=ie(!1);function l(){if(s(r).intExcluded.length<2)return;s(r).intSelected=-1;const S=s(r).intExcluded[s(r).intExcluded.length-1];if(!(S>=0))return;s(r).statsProgress.pop();const I=s(r).varselparams.intLeftIndices[S],V=s(r).varselparams.intRightIndices[S],H=V===I?1:V-I+1;s(r).intExcluded.pop(),s(r).varsExcluded=s(r).varsExcluded.slice(0,s(r).varsExcluded.length-H);const B=s(r).statsProgress.length;s(r).nComp=s(r).statsProgress[B-1].ncomp,s(r).intSelected=-1,s(r).outcomes=null,J(o,!0),Il(e.WASM,s(r))}function a(){const S=s(r).intSelected;Number.isNaN(S)||S<0||S>=s(r).varselparams.nInt||s(r).intExcluded.length>0&&s(r).intExcluded.includes(S)||(s(r).intExcluded.length===0&&(s(r).statsGlobal.ncompBest=s(r).nComp),s(r).statsCurrent={ncomp:s(r).outcomes.nComp,ncompBest:s(r).nComp,sens:s(r).outcomes.sens.val.getrow(S+1).v,spec:s(r).outcomes.spec.val.getrow(S+1).v,eff:s(r).outcomes.eff.val.getrow(S+1).v,sel:s(r).outcomes.sel.val.getrow(S+1).v},s(r).statsProgress||(s(r).statsProgress=[{ncomp:s(r).nComp,int:S+1,sens:s(r).statsGlobal.sens[s(r).nComp-1],spec:s(r).statsGlobal.spec[s(r).nComp-1],eff:s(r).statsGlobal.eff[s(r).nComp-1],sel:s(r).statsGlobal.sel[s(r).nComp-1]}]),s(r).statsProgress.push({ncomp:s(r).nComp,int:S+1,sens:s(r).statsCurrent.sens[s(r).nComp-1],spec:s(r).statsCurrent.spec[s(r).nComp-1],eff:s(r).statsCurrent.eff[s(r).nComp-1],sel:s(r).statsCurrent.sel[s(r).nComp-1]}),s(r).intExcluded.push(S),s(r).varsExcluded=s(r).varsExcluded.concat(Un(s(r).varselparams.intLeftIndices[S],s(r).varselparams.intRightIndices[S])),s(r).intSelected=-1,s(r).outcomes=null,Il(e.WASM,s(r)))}function c(S){s(r).nComp=S}function u(S){s(r).intSelected=S}function f(){s(r).intExcluded=[],s(r).varsExcluded=[],s(r).statsCurrent=s(r).statsGlobal?{ncompBest:null,ncomp:s(r).statsGlobal.ncomp,sens:s(r).statsGlobal.sens,spec:s(r).statsGlobal.spec,eff:s(r).statsGlobal.eff,sel:s(r).statsGlobal.sel}:null,s(r).statsProgress=null,s(r).intSelected=-1,s(r).outcomes=null,s(r).statsGlobal&&(s(r).statsGlobal.ncompBest=null)}function v(){s(r).intSelected=-1}function h(){s(r).hasAlt=void 0,s(r).altres=null,s(r).altset=null}be(()=>{s(r).calset===null&&(s(r).calres=null,s(r).model=null)}),be(()=>{s(r).model===null&&(s(r).tarres=null,s(r).tarsetType=null,s(r).tarset=null)}),be(()=>{s(r).tarset===null&&(s(r).tarres=null,s(r).tarsetType=null,s(r).altres=null,s(r).altset=null,s(r).hasAlt=void 0)}),be(()=>{s(r).altset===null&&(s(r).intExcluded=[],s(r).varsExcluded=[],s(r).statsCurrent=null,s(r).statsGlobal=null,s(r).statsProgress=null,s(r).intSelected=-1,s(r).outcomes=null,s(r).altres=null,s(r).hasAlt=void 0)}),be(()=>{if(s(r).tarres&&s(r).altres&&!s(r).statsGlobal){const S=Fl(s(r).model,s(r).tarres,s(r).altres,null,s(r).alpha);s(r).statsGlobal={ncomp:S.ncomp,ncompBest:null,sens:S.sens.val,spec:S.spec.val,eff:S.eff.val,sel:S.sel.val},s(r).statsCurrent={ncomp:s(r).statsGlobal.ncomp,ncompBest:null,sens:s(r).statsGlobal.sens,spec:s(r).statsGlobal.spec,eff:s(r).statsGlobal.eff,sel:s(r).statsGlobal.sel}}}),be(()=>{if(s(r).currentRes&&s(o)){J(o,!1);const S=s(r).currentRes.simca.ncomp,I=s(r).currentRes.tar.simca.stat.sensitivity,V=s(r).currentRes.alt.simca.stat.specificity,H=s(r).currentRes.alt.simca.stat.selectivity,B=I.map((X,re)=>Math.sqrt(X*V[re]));s(r).statsCurrent={ncomp:I.length,ncompBest:S,sens:new Float64Array(I),spec:new Float64Array(V),eff:new Float64Array(B),sel:new Float64Array(H)}}}),be(()=>{s(r).outcomes&&s(r).outcomes.status!=="done"&&s(r).intSelected>=0&&(s(r).intSelected=-1)}),be(()=>{s(r).hasAlt===!1&&(s(r).altset={},s(r).altres={})}),be(()=>{if(s(r).outcomes&&s(r).outcomes.status==="done"){const S=Jt(()=>JSON.stringify(e.session,Kn));e.backupSession(S)}else if(!s(r).outcomes){const S=Jt(()=>JSON.stringify(e.session,Kn));e.backupSession(S,s(r).model,s(r).calset,s(r).tarres,s(r).altres,s(r).varsExcluded)}});var d=Od(),m=Y(d),g=Y(m),b=Y(g);Xs(b,{get WASM(){return e.WASM},title:"Training set",classMandatory:!0,classUnique:!0,get dataset(){return s(r).calset},set dataset(S){s(r).calset=S}});var p=j(g,2);{var w=S=>{var I=wd(),V=Y(I);Ru(V,{get WASM(){return e.WASM},get dataset(){return s(r).calset},get model(){return s(r).model},set model(H){s(r).model=H},get resobj(){return s(r).calres},set resobj(H){s(r).calres=H}}),P(S,I)};G(p,S=>{s(r).calset&&S(w)})}var _=j(p,2);{var A=S=>{var I=Cd(),V=Y(I);{var H=X=>{ve(X,{name:"select-tarset-type",label:"Target set",children:(re,Z)=>{var ee=_d(),te=$(ee);ot(te,{onclick:()=>s(r).tarsetType="file",text:"From file"});var ne=j(te,2);ot(ne,{onclick:()=>s(r).tarsetType="pv",text:"PV-set"}),P(re,ee)},$$slots:{default:!0}})},B=(X,re)=>{{var Z=te=>{var ne=xd(),se=$(ne);{var fe=ce=>{ve(ce,{label:"",children:(_e,Ee)=>{var Ie=yd();P(_e,Ie)},$$slots:{default:!0}})};G(se,ce=>{s(r).tarset||ce(fe)})}var ye=j(se,2);Xs(ye,{get WASM(){return e.WASM},get model(){return s(r).model},title:"Target test set",get dataset(){return s(r).tarset},set dataset(ce){s(r).tarset=ce},get resobj(){return s(r).tarres},set resobj(ce){s(r).tarres=ce}}),P(te,ne)},ee=(te,ne)=>{{var se=fe=>{var ye=Ed(),ce=$(ye);{var _e=Ie=>{ve(Ie,{label:"",children:(ft,Me)=>{var We=kd();P(ft,We)},$$slots:{default:!0}})};G(ce,Ie=>{s(r).tarset||Ie(_e)})}var Ee=j(ce,2);Uu(Ee,{get WASM(){return e.WASM},get calset(){return s(r).calset},get calres(){return s(r).calres},get model(){return s(r).model},get pvres(){return s(r).tarres},set pvres(Ie){s(r).tarres=Ie},get pvset(){return s(r).tarset},set pvset(Ie){s(r).tarset=Ie}}),P(fe,ye)};G(te,fe=>{s(r).tarsetType==="pv"&&fe(se)},ne)}};G(X,te=>{s(r).tarsetType==="file"?te(Z):te(ee,!1)},re)}};G(V,X=>{!s(r).tarsetType&&!s(r).tarset?X(H):X(B,!1)})}P(S,I)};G(_,S=>{s(r).model&&s(r).calset&&s(r).calres&&S(A)})}var M=j(_,2);{var y=S=>{var I=zd(),V=Y(I);{var H=Z=>{var ee=de(),te=$(ee);{var ne=se=>{ve(se,{className:"oops",label:"Alternative set",children:(fe,ye)=>{var ce=Ad(),_e=$(ce);ot(_e,{text:"Skip",onclick:()=>s(r).hasAlt=!1});var Ee=j(_e,2);ot(Ee,{text:"From file",onclick:()=>s(r).hasAlt=!0}),P(fe,ce)},$$slots:{default:!0}})};G(te,se=>{s(r).hasAlt===void 0&&se(ne)})}P(Z,ee)};G(V,Z=>{s(r).altset||Z(H)})}var B=j(V,2);{var X=Z=>{var ee=Md(),te=$(ee);{var ne=fe=>{ve(fe,{label:"",children:(ye,ce)=>{var _e=Sd();P(ye,_e)},$$slots:{default:!0}})};G(te,fe=>{s(r).altset||fe(ne)})}var se=j(te,2);Xs(se,{get WASM(){return e.WASM},title:"Alternative test set",get model(){return s(r).model},classMandatory:!0,classUnique:!1,get dataset(){return s(r).altset},set dataset(fe){s(r).altset=fe},get resobj(){return s(r).altres},set resobj(fe){s(r).altres=fe}}),P(Z,ee)},re=(Z,ee)=>{{var te=ne=>{ve(ne,{label:"",children:(se,fe)=>{var ye=Nd(),ce=j($(ye),2);Hr(ce,{onclick:h}),P(se,ye)},$$slots:{default:!0}})};G(Z,ne=>{s(r).hasAlt===!1&&s(r).altset!==null&&ne(te)},ee)}};G(B,Z=>{s(r).hasAlt===!0?Z(X):Z(re,!1)})}P(S,I)};G(M,S=>{s(r).tarset&&s(r).tarres&&S(y)})}var k=j(M,2);{var z=S=>{var I=Pd(),V=Y(I);pd(V,{get WASM(){return e.WASM},get calset(){return s(r).calset},get tarset(){return s(r).tarset},get altset(){return s(r).altset},get model(){return s(r).model},get intExcluded(){return s(r).intExcluded},get varsExcluded(){return s(r).varsExcluded},get statsCurrent(){return s(r).statsCurrent},get curNInt(){return s(r).nInt},resetExcluded:f,undoExcluded:l,get varselparams(){return s(r).varselparams},set varselparams(H){s(r).varselparams=H},get outcomes(){return s(r).outcomes},set outcomes(H){s(r).outcomes=H},get alpha(){return s(r).alpha},set alpha(H){s(r).alpha=H}}),P(S,I)};G(k,S=>{s(r).calset&&s(r).altset&&s(r).altres&&s(r).statsGlobal&&S(z)})}var C=j(k,2);{var E=S=>{var I=Td(),V=Y(I);$u(V,{get s(){return s(r)}}),P(S,I)};G(C,S=>{(s(r).statsGlobal||s(r).statsCurrent)&&S(E)})}var N=j(C,2);{var T=S=>{var I=Ld(),V=Y(I);Ou(V,{get s(){return s(r)}}),P(S,I)};G(N,S=>{s(r).intExcluded.length>0&&s(r).intSelected<0&&(!s(r).outcomes||s(r).outcomes.status!=="running")&&S(T)})}var R=j(m,2),q=Y(R);{var D=S=>{var I=qd(),V=j(Y(I),2);{var H=ne=>{var se=Rd();P(ne,se)};G(V,ne=>{s(r).calset||ne(H)})}var B=j(V,2);{var X=ne=>{var se=jd();P(ne,se)};G(B,ne=>{s(r).calset&&!s(r).model&&ne(X)})}var re=j(B,2);{var Z=ne=>{var se=Id();P(ne,se)};G(re,ne=>{s(r).model&&!s(r).tarset&&ne(Z)})}var ee=j(re,2);{var te=ne=>{var se=Fd();P(ne,se)};G(ee,ne=>{s(r).model&&s(r).tarset&&!s(r).altset&&ne(te)})}P(S,I)},F=(S,I)=>{{var V=H=>{var B=de(),X=$(B);$o(X,()=>s(r).intExcluded,re=>{id(re,{get s(){return s(r)},setExcluded:a,setNComp:c,selectInt:u,cancelSelection:v})}),P(H,B)};G(S,H=>{s(r).calset&&s(r).varselparams&&H(V)},I)}};G(q,S=>{!s(r).altres||!s(r).statsGlobal?S(D):S(F,!1)})}P(t,d),ge()}const t1="modulepreload",r1=function(t){return"/"+t},n1={},Vd=function(e,r,o){let l=Promise.resolve();function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return l.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};var Bd=async function(t={}){var e,r=t,o,l,a=new Promise((W,Q)=>{o=W,l=Q}),c=typeof window=="object",u=typeof WorkerGlobalScope<"u",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(f){const{createRequire:W}=await Vd(()=>Promise.resolve().then(()=>Ud),void 0);var v=W(Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("ddsimca-love.js",document.baseURI).href)}var h=(W,Q)=>{throw Q},d=Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("ddsimca-love.js",document.baseURI).href,m="";function g(W){return r.locateFile?r.locateFile(W,m):m+W}var b,p;if(f){var w=v("fs"),_=v("path");d.startsWith("file:")&&(m=_.dirname(v("url").fileURLToPath(d))+"/"),p=W=>{W=R(W)?new URL(W):W;var Q=w.readFileSync(W);return Q},b=async(W,Q=!0)=>{W=R(W)?new URL(W):W;var le=w.readFileSync(W,Q?void 0:"utf8");return le},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),h=(W,Q)=>{throw process.exitCode=W,Q}}else if(c||u){try{m=new URL(".",d).href}catch{}u&&(p=W=>{var Q=new XMLHttpRequest;return Q.open("GET",W,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),b=async W=>{if(R(W))return new Promise((le,Te)=>{var ke=new XMLHttpRequest;ke.open("GET",W,!0),ke.responseType="arraybuffer",ke.onload=()=>{if(ke.status==200||ke.status==0&&ke.response){le(ke.response);return}Te(ke.status)},ke.onerror=Te,ke.send(null)});var Q=await fetch(W,{credentials:"same-origin"});if(Q.ok)return Q.arrayBuffer();throw new Error(Q.status+" : "+Q.url)}}var A=console.log.bind(console),M=console.error.bind(console),y,k,z=!1,C,E,N,T,R=W=>W.startsWith("file://");function q(){var W=k.buffer;E=new Int8Array(W),N=new Uint8Array(W),r.HEAP32=new Int32Array(W),T=new Uint32Array(W),r.HEAPF64=new Float64Array(W),new BigInt64Array(W),new BigUint64Array(W)}function D(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Me(r.preRun.shift());_e(ft)}function F(){ze.k()}function S(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Ie(r.postRun.shift());_e(Ee)}var I=0,V=null;function H(W){var Q;I++,(Q=r.monitorRunDependencies)==null||Q.call(r,I)}function B(W){var le;if(I--,(le=r.monitorRunDependencies)==null||le.call(r,I),I==0&&V){var Q=V;V=null,Q()}}function X(W){var le;(le=r.onAbort)==null||le.call(r,W),W="Aborted("+W+")",M(W),z=!0,W+=". Build with -sASSERTIONS for more info.";var Q=new WebAssembly.RuntimeError(W);throw l(Q),Q}var re;function Z(){return r.locateFile?g("pca_wasm.wasm"):new URL("/ddsimca-love/ddsimca-love.wasm",Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("ddsimca-love.js",document.baseURI).href).href}function ee(W){if(W==re&&y)return new Uint8Array(y);if(p)return p(W);throw"both async and sync fetching of the wasm failed"}async function te(W){if(!y)try{var Q=await b(W);return new Uint8Array(Q)}catch{}return ee(W)}async function ne(W,Q){try{var le=await te(W),Te=await WebAssembly.instantiate(le,Q);return Te}catch(ke){M(`failed to asynchronously prepare wasm: ${ke}`),X(ke)}}async function se(W,Q,le){if(!W&&typeof WebAssembly.instantiateStreaming=="function"&&!R(Q)&&!f)try{var Te=fetch(Q,{credentials:"same-origin"}),ke=await WebAssembly.instantiateStreaming(Te,le);return ke}catch(Oe){M(`wasm streaming compile failed: ${Oe}`),M("falling back to ArrayBuffer instantiation")}return ne(Q,le)}function fe(){return{a:lr}}async function ye(){function W(Oe,Ye){return ze=Oe.exports,k=ze.j,q(),B(),ze}H();function Q(Oe){return W(Oe.instance)}var le=fe();if(r.instantiateWasm)return new Promise((Oe,Ye)=>{r.instantiateWasm(le,(De,Tt)=>{Oe(W(De))})});re??(re=Z());try{var Te=await se(y,re,le),ke=Q(Te);return ke}catch(Oe){return l(Oe),Promise.reject(Oe)}}class ce{constructor(Q){Pr(this,"name","ExitStatus");this.message=`Program terminated with exit(${Q})`,this.status=Q}}var _e=W=>{for(;W.length>0;)W.shift()(r)},Ee=[],Ie=W=>Ee.push(W),ft=[],Me=W=>ft.push(W),We=!0,nt=W=>Hd(W),Ct=()=>Xd(),Pt=()=>X(""),Sr=0,Ot=()=>{We=!1,Sr=0},br={},ns=W=>{if(W instanceof ce||W=="unwind")return C;h(1,W)},pr=()=>We||Sr>0,hn=W=>{var Q;C=W,pr()||((Q=r.onExit)==null||Q.call(r,W),z=!0),h(W,new ce(W))},ss=(W,Q)=>{C=W,hn(W)},Xr=ss,ro=()=>{if(!pr())try{Xr(C)}catch(W){ns(W)}},no=W=>{if(!z)try{W(),ro()}catch(Q){ns(Q)}},so=()=>performance.now(),oo=(W,Q)=>{if(br[W]&&(clearTimeout(br[W].id),delete br[W]),!Q)return 0;var le=setTimeout(()=>{delete br[W],no(()=>io(W,so()))},Q);return br[W]={id:le,timeout_ms:Q},0},lo=()=>Date.now(),he=()=>2147483648,Ce=(W,Q)=>Math.ceil(W/Q)*Q,xe=W=>{var Q=k.buffer,le=(W-Q.byteLength+65535)/65536|0;try{return k.grow(le),q(),1}catch{}},Ze=W=>{var Q=N.length;W>>>=0;var le=he();if(W>le)return!1;for(var Te=1;Te<=4;Te*=2){var ke=Q*(1+.2/Te);ke=Math.min(ke,W+100663296);var Oe=Math.min(le,Ce(Math.max(W,ke),65536)),Ye=xe(Oe);if(Ye)return!0}return!1},ht=W=>52;function Ht(W,Q,le,Te){return 70}var At=[null,[],[]],_t=typeof TextDecoder<"u"?new TextDecoder:void 0,Ve=(W,Q=0,le=NaN)=>{for(var Te=Q+le,ke=Q;W[ke]&&!(ke>=Te);)++ke;if(ke-Q>16&&W.buffer&&_t)return _t.decode(W.subarray(Q,ke));for(var Oe="";Q<ke;){var Ye=W[Q++];if(!(Ye&128)){Oe+=String.fromCharCode(Ye);continue}var De=W[Q++]&63;if((Ye&224)==192){Oe+=String.fromCharCode((Ye&31)<<6|De);continue}var Tt=W[Q++]&63;if((Ye&240)==224?Ye=(Ye&15)<<12|De<<6|Tt:Ye=(Ye&7)<<18|De<<12|Tt<<6|W[Q++]&63,Ye<65536)Oe+=String.fromCharCode(Ye);else{var Nr=Ye-65536;Oe+=String.fromCharCode(55296|Nr>>10,56320|Nr&1023)}}return Oe},Ne=(W,Q)=>{var le=At[W];Q===0||Q===10?((W===1?A:M)(Ve(le)),le.length=0):le.push(Q)},vt=(W,Q)=>W?Ve(N,W,Q):"",at=(W,Q,le,Te)=>{for(var ke=0,Oe=0;Oe<le;Oe++){var Ye=T[Q>>2],De=T[Q+4>>2];Q+=8;for(var Tt=0;Tt<De;Tt++)Ne(W,N[Ye+Tt]);ke+=De}return T[Te>>2]=ke,0},$e=W=>{var Q=r["_"+W];return Q},Ge=(W,Q)=>{E.set(W,Q)},Dt=W=>{for(var Q=0,le=0;le<W.length;++le){var Te=W.charCodeAt(le);Te<=127?Q++:Te<=2047?Q+=2:Te>=55296&&Te<=57343?(Q+=4,++le):Q+=3}return Q},Mr=(W,Q,le,Te)=>{if(!(Te>0))return 0;for(var ke=le,Oe=le+Te-1,Ye=0;Ye<W.length;++Ye){var De=W.charCodeAt(Ye);if(De>=55296&&De<=57343){var Tt=W.charCodeAt(++Ye);De=65536+((De&1023)<<10)|Tt&1023}if(De<=127){if(le>=Oe)break;Q[le++]=De}else if(De<=2047){if(le+1>=Oe)break;Q[le++]=192|De>>6,Q[le++]=128|De&63}else if(De<=65535){if(le+2>=Oe)break;Q[le++]=224|De>>12,Q[le++]=128|De>>6&63,Q[le++]=128|De&63}else{if(le+3>=Oe)break;Q[le++]=240|De>>18,Q[le++]=128|De>>12&63,Q[le++]=128|De>>6&63,Q[le++]=128|De&63}}return Q[le]=0,le-ke},Fe=(W,Q,le)=>Mr(W,N,Q,le),ue=W=>Kd(W),dt=W=>{var Q=Dt(W)+1,le=ue(Q);return Fe(W,le,Q),le},ao=(W,Q,le,Te,ke)=>{var Oe={string:Lt=>{var mn=0;return Lt!=null&&Lt!==0&&(mn=dt(Lt)),mn},array:Lt=>{var mn=ue(Lt.length);return Ge(Lt,mn),mn}};function Ye(Lt){return Q==="string"?vt(Lt):Q==="boolean"?!!Lt:Lt}var De=$e(W),Tt=[],Nr=0;if(Te)for(var zr=0;zr<Te.length;zr++){var da=Oe[le[zr]];da?(Nr===0&&(Nr=Ct()),Tt[zr]=da(Te[zr])):Tt[zr]=Te[zr]}var uo=De(...Tt);function Jd(Lt){return Nr!==0&&nt(Nr),Ye(Lt)}return uo=Jd(uo),uo};r.noExitRuntime&&(We=r.noExitRuntime),r.print&&(A=r.print),r.printErr&&(M=r.printErr),r.wasmBinary&&(y=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=ao;var lr={c:Pt,b:Ot,d:oo,i:lo,e:Ze,h:ht,f:Ht,g:at,a:hn},ze=await ye();ze.k,r._pcafit_wasm=ze.l,r._malloc=ze.m,r._free=ze.n,r._pcapredict_wasm=ze.o,r._pcvpca_wasm=ze.p;var io=ze.q,Hd=ze.r,Kd=ze.s,Xd=ze.t;function co(){if(I>0){V=co;return}if(D(),I>0){V=co;return}function W(){var Q;r.calledRun=!0,!z&&(F(),o(r),(Q=r.onRuntimeInitialized)==null||Q.call(r),S())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),W()},1)):W()}function Qd(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return Qd(),co(),e=a,e},Wd=K('<p>Current release: <span>1.2.0</span> &nbsp; Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=DDSIMCA-LOVE app">help@mda.tools</a> &nbsp; Learn: <a class="paper-link" href="https://dx.doi.org/10.1016/j.aca.2025.344302" download="">paper</a> | <a class="paper-link" href="/ddsimca-love/Wine.zip">dataset</a></p>'),Yd=K(`<h2>DD-SIMCA variable selection</h2> <p>Authors: <em>Alexey Pomerantsev, Sergey Kucheryavskiy, Oxana Rodionova</em></p> <p>Interactive web-application for excluding least important variables in DD-SIMCA one class classifier.
      The method is an evolution of known wrapper methods, it provides a tool for interactive variable selection,
      based on careful analysis of the main and secondary performance indicators (sensitivity, specificity, efficiency,
      selectivity), as well as domain knowledge.</p> <p>Check our open access <a href="https://dx.doi.org/10.1016/j.aca.2025.344302">paper</a> for more details.</p> <h3>v. 1.2.0</h3> <p class="release-info">released 11/06/2025</p> <ul><li>Improved interval labels on the outcomes plot.</li> <li>Implemented rigorous mode.</li></ul>`,1);function Gd(t,e){me(e,!1);function r(c){c.train.altset=null,c.train.tarset=null,c.train.calset=null,c.train.intSelected=-1}function o(c){const u=Object.keys(c);if(!["date","train","tab"].every(v=>u.includes(v)))return!1;const f=Object.keys(c.train);return["calset","altset","tarset","tarres","altres","model"].every(v=>f.includes(v))?(c.train.outcomes&&c.train.outcomes.status==="running"&&(c.train.outcomes=null),c.train.tarsetType&&!c.train.tarset&&(c.train.tarsetType=null),c.train.model&&!c.train.calres&&(c.train.model=null),!0):!1}function l(){return{date:Us(new Date),tab:0,train:{calset:0,model:0,calres:0,tarsetType:0,tarset:0,tarres:0,hasAlt:void 0,altset:0,altres:0,intSelected:-1,intExcluded:[],varsExcluded:[],varselparams:0,currentRes:0,statsGlobal:0,statsCurrent:0,statsProgress:0,alpha:5,nComp:0,outcomes:0,oldInt:0,oldNInt:0}}}const a=[{name:"Train",label:"train",component:Dd}];Di(),Ic(t,{appID:"ddsimca-love",appTitle:"DD-SIMCA with LOVE",appShortTitle:"DD-SIMCA variable selection",appSlogan:"Variable selection for DD-SIMCA",WASM:Bd,tabs:a,initSession:l,checkSession:o,resetSession:r,footer:f=>{var v=Wd();P(f,v)},info:f=>{var v=Yd();P(f,v)},$$slots:{footer:!0,info:!0}}),ge()}wi(Gd,{target:document.body});const Ud=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=ddsimca-love.js.map
