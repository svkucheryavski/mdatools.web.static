(function(){"use strict";var ao=document.createElement("style");ao.textContent=`.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.buttons.svelte-19bfqg3{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;margin:0;padding:2px 0;width:auto;border-radius:2px;cursor:default;white-space:nowrap}table.svelte-ixs19u{width:100%;border-collapse:collapse;font-size:.85em;margin-top:1em}tr.svelte-ixs19u{width:100%}th.svelte-ixs19u{border-bottom:1px solid #a0a0a0}th.svelte-ixs19u,td.svelte-ixs19u{text-align:right;padding:.35em .5em .35em .1em;color:#404040;margin:0}td.svelte-ixs19u{color:#a0a0a0}tr.global.svelte-ixs19u td:where(.svelte-ixs19u){color:#404040}tr.current.svelte-ixs19u td:where(.svelte-ixs19u){color:#2679b2}tr.selected.svelte-ixs19u td:where(.svelte-ixs19u){color:#d22c2f}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;inset:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.app-container.svelte-1xtvhtx{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1xtvhtx{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1xtvhtx{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1xtvhtx>div:where(.svelte-1xtvhtx){background:#e8e8e8;border-radius:.25rem}.app-controls.svelte-1xtvhtx .data-loader-alt:where(.svelte-1xtvhtx) button{margin:0 .25em}.help-text.svelte-1xtvhtx{margin-top:.25rem}.help-text.svelte-1xtvhtx>p:where(.svelte-1xtvhtx),.help-text.svelte-1xtvhtx>div:where(.svelte-1xtvhtx){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1xtvhtx table:where(.svelte-1xtvhtx){border-collapse:collapse}.help-text.svelte-1xtvhtx table:where(.svelte-1xtvhtx) td:where(.svelte-1xtvhtx){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1xtvhtx table:where(.svelte-1xtvhtx) thead:where(.svelte-1xtvhtx) tr:where(.svelte-1xtvhtx):first-child td:where(.svelte-1xtvhtx){font-weight:700;background:#f8f4e0}.help-text.svelte-1xtvhtx table:where(.svelte-1xtvhtx) td:where(.svelte-1xtvhtx):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1xtvhtx table:where(.svelte-1xtvhtx) td:where(.svelte-1xtvhtx):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1xtvhtx>p:where(.svelte-1xtvhtx):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1xtvhtx>p:where(.svelte-1xtvhtx):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.help-text.svelte-1xtvhtx a:where(.svelte-1xtvhtx):visited,.help-text.svelte-1xtvhtx a:where(.svelte-1xtvhtx){color:#1e6ea7}.app-controls.svelte-1xtvhtx>.downloads-widget:where(.svelte-1xtvhtx){background:#d0d0d0}.downloads-widget.svelte-1xtvhtx>div{background:#f0f0f0}.select-tarset-type button{margin-right:5px}@media(min-width:1300px){.app-container.svelte-1xtvhtx{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1xtvhtx{grid-template-columns:min(320px,30%) 1fr}}
/*$vite$:1*/`,document.head.appendChild(ao);var ln=typeof document<"u"?document.currentScript:null;const os=!1;var io=Array.isArray,fa=Array.prototype.indexOf,Lr=Array.from,va=Object.defineProperty,yn=Object.getOwnPropertyDescriptor,co=Object.getOwnPropertyDescriptors,da=Object.prototype,ha=Array.prototype,ls=Object.getPrototypeOf,uo=Object.isExtensible;function Xn(t){return typeof t=="function"}const kt=()=>{};function ma(t){return typeof t?.then=="function"}function ga(t){return t()}function as(t){for(var e=0;e<t.length;e++)t[e]()}function fo(){var t,e,r=new Promise((s,l)=>{t=s,e=l});return{promise:r,resolve:t,reject:e}}function is(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const ut=2,cs=4,Rr=8,pa=1<<24,Jt=16,an=32,Rn=64,Ir=128,Bt=512,mt=1024,Ct=2048,Qt=4096,Pt=8192,cn=16384,zr=32768,un=65536,vo=1<<17,ho=1<<18,Zn=1<<19,mo=1<<20,fn=1<<25,In=32768,us=1<<21,fs=1<<22,xn=1<<23,En=Symbol("$state"),go=Symbol("legacy props"),ba=Symbol(""),Jn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function po(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function _a(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function wa(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ya(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xa(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ea(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ka(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ca(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Sa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Aa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Na(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ma=1,ja=2,bo=4,Pa=8,Ta=16,La=1,Ra=2,Ia=4,za=8,Fa=16,qa=4,_o=1,Oa=2,ft=Symbol(),Da="http://www.w3.org/1999/xhtml";function Va(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function wo(t){return t===this.v}function Ba(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function yo(t){return!Ba(t,this.v)}let Qn=!1,Ya=!1;function Wa(){Qn=!0}let Ye=null;function $n(t){Ye=t}function It(t){return xo().get(t)}function Ua(t,e){return xo().set(t,e),e}function we(t,e=!1,r){Ye={p:Ye,i:!1,c:null,e:null,s:t,x:null,l:Qn&&!e?{s:null,u:null,$:[]}:null}}function ye(t){var e=Ye,r=e.e;if(r!==null){e.e=null;for(var s of r)Bo(s)}return e.i=!0,Ye=e.p,{}}function zn(){return!Qn||Ye!==null&&Ye.l===null}function xo(t){return Ye===null&&po(),Ye.c??=new Map(Ga(Ye)||void 0)}function Ga(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let Fn=[];function Eo(){var t=Fn;Fn=[],as(t)}function kn(t){if(Fn.length===0&&!tr){var e=Fn;queueMicrotask(()=>{e===Fn&&Eo()})}Fn.push(t)}function Ha(){for(;Fn.length>0;)Eo()}function ko(t){var e=je;if(e===null)return Ne.f|=xn,t;if((e.f&zr)===0){if((e.f&Ir)===0)throw t;e.b.error(t)}else er(t,e)}function er(t,e){for(;e!==null;){if((e.f&Ir)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t}const Fr=new Set;let ze=null,qr=null,zt=null,Ft=[],Or=null,vs=!1,tr=!1;class Yt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#i=null;#o=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(e){Ft=[],qr=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const s of e)this.#l(s,r);this.is_fork||this.#u(),this.is_deferred()?(this.#a(r.effects),this.#a(r.render_effects)):(qr=this,ze=null,Ao(r.render_effects),Ao(r.effects),qr=null,this.#i?.resolve()),zt=null}#l(e,r){e.f^=mt;for(var s=e.first;s!==null;){var l=s.f,a=(l&(an|Rn))!==0,c=a&&(l&mt)!==0,f=c||(l&Pt)!==0||this.skipped_effects.has(s);if((s.f&Ir)!==0&&s.b?.is_pending()&&(r={parent:r,effect:s,effects:[],render_effects:[]}),!f&&s.fn!==null){a?s.f^=mt:(l&cs)!==0?r.effects.push(s):hr(s)&&((s.f&Jt)!==0&&this.#o.add(s),mr(s));var u=s.first;if(u!==null){s=u;continue}}var v=s.parent;for(s=s.next;s===null&&v!==null;)v===r.effect&&(this.#a(r.effects),this.#a(r.render_effects),r=r.parent),s=v.next,v=v.parent}}#a(e){for(const r of e)(r.f&Ct)!==0?this.#o.add(r):(r.f&Qt)!==0&&this.#s.add(r),this.#c(r.deps),gt(r,mt)}#c(e){if(e!==null)for(const r of e)(r.f&ut)===0||(r.f&In)===0||(r.f^=In,this.#c(r.deps))}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&xn)===0&&(this.current.set(e,e.v),zt?.set(e,e.v))}activate(){ze=this,this.apply()}deactivate(){ze===this&&(ze=null,zt=null)}flush(){if(this.activate(),Ft.length>0){if(So(),ze!==null&&ze!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#r===0){for(const e of this.#e)e();this.#e.clear()}this.#n===0&&this.#f()}#f(){if(Fr.size>1){this.previous.clear();var e=zt,r=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const a of Fr){if(a===this){r=!1;continue}const c=[];for(const[u,v]of this.current){if(a.current.has(u))if(r&&v!==a.current.get(u))a.current.set(u,v);else continue;c.push(u)}if(c.length===0)continue;const f=[...a.current.keys()].filter(u=>!this.current.has(u));if(f.length>0){var l=Ft;Ft=[];const u=new Set,v=new Map;for(const d of c)No(d,f,u,v);if(Ft.length>0){ze=a,a.apply();for(const d of Ft)a.#l(d,s);a.deactivate()}Ft=l}}ze=null,zt=e}this.committed=!0,Fr.delete(this)}increment(e){this.#n+=1,e&&(this.#r+=1)}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive()}revive(){for(const e of this.#o)this.#s.delete(e),gt(e,Ct),qn(e);for(const e of this.#s)gt(e,Qt),qn(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#i??=fo()).promise}static ensure(){if(ze===null){const e=ze=new Yt;Fr.add(ze),tr||Yt.enqueue(()=>{ze===e&&e.flush()})}return ze}static enqueue(e){kn(e)}apply(){}}function Co(t){var e=tr;tr=!0;try{for(var r;;){if(Ha(),Ft.length===0&&(ze?.flush(),Ft.length===0))return Or=null,r;So()}}finally{tr=e}}function So(){var t=Vn;vs=!0;var e=null;try{var r=0;for(Dr(!0);Ft.length>0;){var s=Yt.ensure();if(r++>1e3){var l,a;Ka()}s.process(Ft),Cn.clear()}}finally{vs=!1,Dr(t),Or=null}}function Ka(){try{Ea()}catch(t){er(t,Or)}}let vn=null;function Ao(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var s=t[r++];if((s.f&(cn|Pt))===0&&hr(s)&&(vn=new Set,mr(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Go(s):s.fn=null),vn?.size>0)){Cn.clear();for(const l of vn){if((l.f&(cn|Pt))!==0)continue;const a=[l];let c=l.parent;for(;c!==null;)vn.has(c)&&(vn.delete(c),a.push(c)),c=c.parent;for(let f=a.length-1;f>=0;f--){const u=a[f];(u.f&(cn|Pt))===0&&mr(u)}}vn.clear()}}vn=null}}function No(t,e,r,s){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const l of t.reactions){const a=l.f;(a&ut)!==0?No(l,e,r,s):(a&(fs|Jt))!==0&&(a&Ct)===0&&Mo(l,e,s)&&(gt(l,Ct),qn(l))}}function Mo(t,e,r){const s=r.get(t);if(s!==void 0)return s;if(t.deps!==null)for(const l of t.deps){if(e.includes(l))return!0;if((l.f&ut)!==0&&Mo(l,e,r))return r.set(l,!0),!0}return r.set(t,!1),!1}function qn(t){for(var e=Or=t;e.parent!==null;){e=e.parent;var r=e.f;if(vs&&e===je&&(r&Jt)!==0&&(r&ho)===0)return;if((r&(Rn|an))!==0){if((r&mt)===0)return;e.f^=mt}}Ft.push(e)}function Xa(t){let e=0,r=dn(0),s;return()=>{vr()&&(o(r),_s(()=>(e===0&&(s=nn(()=>t(()=>ur(r)))),e+=1,()=>{kn(()=>{e-=1,e===0&&(s?.(),s=void 0,ur(r))})})))}}var Za=un|Zn|Ir;function Ja(t,e,r){new Qa(t,e,r)}class Qa{parent;#e=!1;#t;#n=null;#r;#i;#o;#s=null;#l=null;#a=null;#c=null;#u=null;#f=0;#v=0;#h=!1;#d=null;#_=Xa(()=>(this.#d=dn(this.#f),()=>{this.#d=null}));constructor(e,r,s){this.#t=e,this.#r=r,this.#i=s,this.parent=je.b,this.#e=!!this.#r.pending,this.#o=On(()=>{je.b=this;{var l=this.#p();try{this.#s=qt(()=>s(l))}catch(a){this.error(a)}this.#v>0?this.#g():this.#e=!1}return()=>{this.#u?.remove()}},Za)}#w(){try{this.#s=qt(()=>this.#i(this.#t))}catch(e){this.error(e)}this.#e=!1}#y(){const e=this.#r.pending;e&&(this.#l=qt(()=>e(this.#t)),Yt.enqueue(()=>{var r=this.#p();this.#s=this.#m(()=>(Yt.ensure(),qt(()=>this.#i(r)))),this.#v>0?this.#g():(Dn(this.#l,()=>{this.#l=null}),this.#e=!1)}))}#p(){var e=this.#t;return this.#e&&(this.#u=Sn(),this.#t.before(this.#u),e=this.#u),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#m(e){var r=je,s=Ne,l=Ye;tn(this.#o),At(this.#o),$n(this.#o.ctx);try{return e()}catch(a){return ko(a),null}finally{tn(r),At(s),$n(l)}}#g(){const e=this.#r.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Xo(this.#s,this.#c)),this.#l===null&&(this.#l=qt(()=>e(this.#t)))}#b(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(e);return}this.#v+=e,this.#v===0&&(this.#e=!1,this.#l&&Dn(this.#l,()=>{this.#l=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(e){this.#b(e),this.#f+=e,this.#d&&hn(this.#d,this.#f)}get_effect_pending(){return this.#_(),o(this.#d)}error(e){var r=this.#r.onerror;let s=this.#r.failed;if(this.#h||!r&&!s)throw e;this.#s&&(St(this.#s),this.#s=null),this.#l&&(St(this.#l),this.#l=null),this.#a&&(St(this.#a),this.#a=null);var l=!1,a=!1;const c=()=>{if(l){Va();return}l=!0,a&&Na(),Yt.ensure(),this.#f=0,this.#a!==null&&Dn(this.#a,()=>{this.#a=null}),this.#e=this.has_pending_snippet(),this.#s=this.#m(()=>(this.#h=!1,qt(()=>this.#i(this.#t)))),this.#v>0?this.#g():this.#e=!1};var f=Ne;try{At(null),a=!0,r?.(e,c),a=!1}catch(u){er(u,this.#o&&this.#o.parent)}finally{At(f)}s&&kn(()=>{this.#a=this.#m(()=>{Yt.ensure(),this.#h=!0;try{return qt(()=>{s(this.#t,()=>e,()=>c)})}catch(u){return er(u,this.#o.parent),null}finally{this.#h=!1}})})}}function $a(t,e,r,s){const l=zn()?cr:ds;if(r.length===0&&t.length===0){s(e.map(l));return}var a=ze,c=je,f=jo();function u(){Promise.all(r.map(v=>ei(v))).then(v=>{f();try{s([...e.map(l),...v])}catch(d){(c.f&cn)===0&&er(d,c)}a?.deactivate(),ir()}).catch(v=>{er(v,c)})}t.length>0?Promise.all(t).then(()=>{f();try{return u()}finally{a?.deactivate(),ir()}}):u()}function jo(){var t=je,e=Ne,r=Ye,s=ze;return function(a=!0){tn(t),At(e),$n(r),a&&s?.activate()}}function ir(){tn(null),At(null),$n(null)}function cr(t){var e=ut|Ct,r=Ne!==null&&(Ne.f&ut)!==0?Ne:null;return je!==null&&(je.f|=Zn),{ctx:Ye,deps:null,effects:null,equals:wo,f:e,fn:t,reactions:null,rv:0,v:ft,wv:0,parent:r??je,ac:null}}function ei(t,e){let r=je;r===null&&_a();var s=r.b,l=void 0,a=dn(ft),c=!Ne,f=new Map;return ui(()=>{var u=fo();l=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{v===ze&&v.committed&&v.deactivate(),ir()})}catch(g){u.reject(g),ir()}var v=ze;if(c){var d=!s.is_pending();s.update_pending_count(1),v.increment(d),f.get(v)?.reject(Jn),f.delete(v),f.set(v,u)}const h=(g,m=void 0)=>{if(v.activate(),m)m!==Jn&&(a.f|=xn,hn(a,m));else{(a.f&xn)!==0&&(a.f^=xn),hn(a,g);for(const[_,b]of f){if(f.delete(_),_===v)break;b.reject(Jn)}}c&&(s.update_pending_count(-1),v.decrement(d))};u.promise.then(h,g=>h(null,g||"unknown"))}),Vo(()=>{for(const u of f.values())u.reject(Jn)}),new Promise(u=>{function v(d){function h(){d===l?u(a):v(l)}d.then(h,h)}v(l)})}function R(t){const e=cr(t);return Jo(e),e}function ds(t){const e=cr(t);return e.equals=yo,e}function Po(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)St(e[r])}}function ti(t){for(var e=t.parent;e!==null;){if((e.f&ut)===0)return(e.f&cn)===0?e:null;e=e.parent}return null}function hs(t){var e,r=je;tn(ti(t));try{t.f&=~In,Po(t),e=nl(t)}finally{tn(r)}return e}function To(t){var e=hs(t);if(t.equals(e)||(ze?.is_fork||(t.v=e),t.wv=el()),!Bn)if(zt!==null)(vr()||ze?.is_fork)&&zt.set(t,e);else{var r=(t.f&Bt)===0?Qt:mt;gt(t,r)}}let ms=new Set;const Cn=new Map;let Lo=!1;function dn(t,e){var r={f:0,v:t,reactions:null,equals:wo,rv:0,wv:0};return r}function ie(t,e){const r=dn(t);return Jo(r),r}function gs(t,e=!1,r=!0){const s=dn(t);return e||(s.equals=yo),Qn&&r&&Ye!==null&&Ye.l!==null&&(Ye.l.s??=[]).push(s),s}function J(t,e,r=!1){Ne!==null&&(!en||(Ne.f&vo)!==0)&&zn()&&(Ne.f&(ut|Jt|fs|vo))!==0&&!mn?.includes(t)&&Aa();let s=r?We(e):e;return hn(t,s)}function hn(t,e){if(!t.equals(e)){var r=t.v;Bn?Cn.set(t,e):Cn.set(t,r),t.v=e;var s=Yt.ensure();s.capture(t,r),(t.f&ut)!==0&&((t.f&Ct)!==0&&hs(t),gt(t,(t.f&Bt)!==0?mt:Qt)),t.wv=el(),Ro(t,Ct),zn()&&je!==null&&(je.f&mt)!==0&&(je.f&(an|Rn))===0&&(Ot===null?vi([t]):Ot.push(t)),!s.is_fork&&ms.size>0&&!Lo&&ni()}return e}function ni(){Lo=!1;var t=Vn;Dr(!0);const e=Array.from(ms);try{for(const r of e)(r.f&mt)!==0&&gt(r,Qt),hr(r)&&mr(r)}finally{Dr(t)}ms.clear()}function ur(t){J(t,t.v+1)}function Ro(t,e){var r=t.reactions;if(r!==null)for(var s=zn(),l=r.length,a=0;a<l;a++){var c=r[a],f=c.f;if(!(!s&&c===je)){var u=(f&Ct)===0;if(u&&gt(c,e),(f&ut)!==0){var v=c;zt?.delete(v),(f&In)===0&&(f&Bt&&(c.f|=In),Ro(v,Qt))}else u&&((f&Jt)!==0&&vn!==null&&vn.add(c),qn(c))}}}function We(t){if(typeof t!="object"||t===null||En in t)return t;const e=ls(t);if(e!==da&&e!==ha)return t;var r=new Map,s=io(t),l=ie(0),a=Yn,c=f=>{if(Yn===a)return f();var u=Ne,v=Yn;At(null),$o(a);var d=f();return At(u),$o(v),d};return s&&r.set("length",ie(t.length)),new Proxy(t,{defineProperty(f,u,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Ca();var d=r.get(u);return d===void 0?d=c(()=>{var h=ie(v.value);return r.set(u,h),h}):J(d,v.value,!0),!0},deleteProperty(f,u){var v=r.get(u);if(v===void 0){if(u in f){const d=c(()=>ie(ft));r.set(u,d),ur(l)}}else J(v,ft),ur(l);return!0},get(f,u,v){if(u===En)return t;var d=r.get(u),h=u in f;if(d===void 0&&(!h||yn(f,u)?.writable)&&(d=c(()=>{var m=We(h?f[u]:ft),_=ie(m);return _}),r.set(u,d)),d!==void 0){var g=o(d);return g===ft?void 0:g}return Reflect.get(f,u,v)},getOwnPropertyDescriptor(f,u){var v=Reflect.getOwnPropertyDescriptor(f,u);if(v&&"value"in v){var d=r.get(u);d&&(v.value=o(d))}else if(v===void 0){var h=r.get(u),g=h?.v;if(h!==void 0&&g!==ft)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(f,u){if(u===En)return!0;var v=r.get(u),d=v!==void 0&&v.v!==ft||Reflect.has(f,u);if(v!==void 0||je!==null&&(!d||yn(f,u)?.writable)){v===void 0&&(v=c(()=>{var g=d?We(f[u]):ft,m=ie(g);return m}),r.set(u,v));var h=o(v);if(h===ft)return!1}return d},set(f,u,v,d){var h=r.get(u),g=u in f;if(s&&u==="length")for(var m=v;m<h.v;m+=1){var _=r.get(m+"");_!==void 0?J(_,ft):m in f&&(_=c(()=>ie(ft)),r.set(m+"",_))}if(h===void 0)(!g||yn(f,u)?.writable)&&(h=c(()=>ie(void 0)),J(h,We(v)),r.set(u,h));else{g=h.v!==ft;var b=c(()=>We(v));J(h,b)}var p=Reflect.getOwnPropertyDescriptor(f,u);if(p?.set&&p.set.call(d,v),!g){if(s&&typeof u=="string"){var w=r.get("length"),M=Number(u);Number.isInteger(M)&&M>=w.v&&J(w,M+1)}ur(l)}return!0},ownKeys(f){o(l);var u=Reflect.ownKeys(f).filter(h=>{var g=r.get(h);return g===void 0||g.v!==ft});for(var[v,d]of r)d.v!==ft&&!(v in f)&&u.push(v);return u},setPrototypeOf(){Sa()}})}var ps,Io,zo,Fo;function ri(){if(ps===void 0){ps=window,Io=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;zo=yn(e,"firstChild").get,Fo=yn(e,"nextSibling").get,uo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),uo(r)&&(r.__t=void 0)}}function Sn(t=""){return document.createTextNode(t)}function Tt(t){return zo.call(t)}function fr(t){return Fo.call(t)}function V(t,e){return Tt(t)}function Z(t,e=!1){{var r=Tt(t);return r instanceof Comment&&r.data===""?fr(r):r}}function I(t,e=1,r=!1){let s=t;for(;e--;)s=fr(s);return s}function si(t){t.textContent=""}function qo(){return!1}let Oo=!1;function oi(){Oo||(Oo=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function nr(t){var e=Ne,r=je;At(null),tn(null);try{return t()}finally{At(e),tn(r)}}function li(t,e,r,s=r){t.addEventListener(e,()=>nr(r));const l=t.__on_r;l?t.__on_r=()=>{l(),s(!0)}:t.__on_r=()=>s(!0),oi()}function Do(t){je===null&&(Ne===null&&xa(),ya()),Bn&&wa()}function ai(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function $t(t,e,r){var s=je;s!==null&&(s.f&Pt)!==0&&(t|=Pt);var l={ctx:Ye,deps:null,nodes:null,f:t|Ct|Bt,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{mr(l),l.f|=zr}catch(f){throw St(l),f}else e!==null&&qn(l);var a=l;if(r&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&Zn)===0&&(a=a.first,(t&Jt)!==0&&(t&un)!==0&&a!==null&&(a.f|=un)),a!==null&&(a.parent=s,s!==null&&ai(a,s),Ne!==null&&(Ne.f&ut)!==0&&(t&Rn)===0)){var c=Ne;(c.effects??=[]).push(a)}return l}function vr(){return Ne!==null&&!en}function Vo(t){const e=$t(Rr,null,!1);return gt(e,mt),e.teardown=t,e}function ke(t){Do();var e=je.f,r=!Ne&&(e&an)!==0&&(e&zr)===0;if(r){var s=Ye;(s.e??=[]).push(t)}else return Bo(t)}function Bo(t){return $t(cs|mo,t,!1)}function ii(t){return Do(),$t(Rr|mo,t,!0)}function ci(t){Yt.ensure();const e=$t(Rn|Zn,t,!0);return(r={})=>new Promise(s=>{r.outro?Dn(e,()=>{St(e),s(void 0)}):(St(e),s(void 0))})}function bs(t){return $t(cs,t,!1)}function ui(t){return $t(fs|Zn,t,!0)}function _s(t,e=0){return $t(Rr|e,t,!0)}function le(t,e=[],r=[],s=[]){$a(s,e,r,l=>{$t(Rr,()=>t(...l.map(o)),!0)})}function On(t,e=0){var r=$t(Jt|e,t,!0);return r}function qt(t){return $t(an|Zn,t,!0)}function Yo(t){var e=t.teardown;if(e!==null){const r=Bn,s=Ne;Zo(!0),At(null);try{e.call(null)}finally{Zo(r),At(s)}}}function Wo(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const l=r.ac;l!==null&&nr(()=>{l.abort(Jn)});var s=r.next;(r.f&Rn)!==0?r.parent=null:St(r,e),r=s}}function fi(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&an)===0&&St(e),e=r}}function St(t,e=!0){var r=!1;(e||(t.f&ho)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Uo(t.nodes.start,t.nodes.end),r=!0),Wo(t,e&&!r),Vr(t,0),gt(t,cn);var s=t.nodes&&t.nodes.t;if(s!==null)for(const a of s)a.stop();Yo(t);var l=t.parent;l!==null&&l.first!==null&&Go(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Uo(t,e){for(;t!==null;){var r=t===e?null:fr(t);t.remove(),t=r}}function Go(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function Dn(t,e,r=!0){var s=[];Ho(t,s,!0);var l=()=>{r&&St(t),e&&e()},a=s.length;if(a>0){var c=()=>--a||l();for(var f of s)f.out(c)}else l()}function Ho(t,e,r){if((t.f&Pt)===0){t.f^=Pt;var s=t.nodes&&t.nodes.t;if(s!==null)for(const f of s)(f.is_global||r)&&e.push(f);for(var l=t.first;l!==null;){var a=l.next,c=(l.f&un)!==0||(l.f&an)!==0&&(t.f&Jt)!==0;Ho(l,e,c?r:!1),l=a}}}function ws(t){Ko(t,!0)}function Ko(t,e){if((t.f&Pt)!==0){t.f^=Pt,(t.f&mt)===0&&(gt(t,Ct),qn(t));for(var r=t.first;r!==null;){var s=r.next,l=(r.f&un)!==0||(r.f&an)!==0;Ko(r,l?e:!1),r=s}var a=t.nodes&&t.nodes.t;if(a!==null)for(const c of a)(c.is_global||e)&&c.in()}}function Xo(t,e){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end;r!==null;){var l=r===s?null:fr(r);e.append(r),r=l}}let Vn=!1;function Dr(t){Vn=t}let Bn=!1;function Zo(t){Bn=t}let Ne=null,en=!1;function At(t){Ne=t}let je=null;function tn(t){je=t}let mn=null;function Jo(t){Ne!==null&&(mn===null?mn=[t]:mn.push(t))}let _t=null,Lt=0,Ot=null;function vi(t){Ot=t}let Qo=1,dr=0,Yn=dr;function $o(t){Yn=t}function el(){return++Qo}function hr(t){var e=t.f;if((e&Ct)!==0)return!0;if(e&ut&&(t.f&=~In),(e&Qt)!==0){var r=t.deps;if(r!==null)for(var s=r.length,l=0;l<s;l++){var a=r[l];if(hr(a)&&To(a),a.wv>t.wv)return!0}(e&Bt)!==0&&zt===null&&gt(t,mt)}return!1}function tl(t,e,r=!0){var s=t.reactions;if(s!==null&&!mn?.includes(t))for(var l=0;l<s.length;l++){var a=s[l];(a.f&ut)!==0?tl(a,e,!1):e===a&&(r?gt(a,Ct):(a.f&mt)!==0&&gt(a,Qt),qn(a))}}function nl(t){var e=_t,r=Lt,s=Ot,l=Ne,a=mn,c=Ye,f=en,u=Yn,v=t.f;_t=null,Lt=0,Ot=null,Ne=(v&(an|Rn))===0?t:null,mn=null,$n(t.ctx),en=!1,Yn=++dr,t.ac!==null&&(nr(()=>{t.ac.abort(Jn)}),t.ac=null);try{t.f|=us;var d=t.fn,h=d(),g=t.deps;if(_t!==null){var m;if(Vr(t,Lt),g!==null&&Lt>0)for(g.length=Lt+_t.length,m=0;m<_t.length;m++)g[Lt+m]=_t[m];else t.deps=g=_t;if(vr()&&(t.f&Bt)!==0)for(m=Lt;m<g.length;m++)(g[m].reactions??=[]).push(t)}else g!==null&&Lt<g.length&&(Vr(t,Lt),g.length=Lt);if(zn()&&Ot!==null&&!en&&g!==null&&(t.f&(ut|Qt|Ct))===0)for(m=0;m<Ot.length;m++)tl(Ot[m],t);return l!==null&&l!==t&&(dr++,Ot!==null&&(s===null?s=Ot:s.push(...Ot))),(t.f&xn)!==0&&(t.f^=xn),h}catch(_){return ko(_)}finally{t.f^=us,_t=e,Lt=r,Ot=s,Ne=l,mn=a,$n(c),en=f,Yn=u}}function di(t,e){let r=e.reactions;if(r!==null){var s=fa.call(r,t);if(s!==-1){var l=r.length-1;l===0?r=e.reactions=null:(r[s]=r[l],r.pop())}}r===null&&(e.f&ut)!==0&&(_t===null||!_t.includes(e))&&(gt(e,Qt),(e.f&Bt)!==0&&(e.f^=Bt,e.f&=~In),Po(e),Vr(e,0))}function Vr(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)di(t,r[s])}function mr(t){var e=t.f;if((e&cn)===0){gt(t,mt);var r=je,s=Vn;je=t,Vn=!0;try{(e&(Jt|pa))!==0?fi(t):Wo(t),Yo(t);var l=nl(t);t.teardown=typeof l=="function"?l:null,t.wv=Qo;var a;os&&Ya&&(t.f&Ct)!==0&&t.deps}finally{Vn=s,je=r}}}async function hi(){await Promise.resolve(),Co()}function o(t){var e=t.f,r=(e&ut)!==0;if(Ne!==null&&!en){var s=je!==null&&(je.f&cn)!==0;if(!s&&!mn?.includes(t)){var l=Ne.deps;if((Ne.f&us)!==0)t.rv<dr&&(t.rv=dr,_t===null&&l!==null&&l[Lt]===t?Lt++:_t===null?_t=[t]:_t.includes(t)||_t.push(t));else{(Ne.deps??=[]).push(t);var a=t.reactions;a===null?t.reactions=[Ne]:a.includes(Ne)||a.push(Ne)}}}if(Bn){if(Cn.has(t))return Cn.get(t);if(r){var c=t,f=c.v;return((c.f&mt)===0&&c.reactions!==null||sl(c))&&(f=hs(c)),Cn.set(c,f),f}}else r&&(!zt?.has(t)||ze?.is_fork&&!vr())&&(c=t,hr(c)&&To(c),Vn&&vr()&&(c.f&Bt)===0&&rl(c));if(zt?.has(t))return zt.get(t);if((t.f&xn)!==0)throw t.v;return t.v}function rl(t){if(t.deps!==null){t.f^=Bt;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&ut)!==0&&(e.f&Bt)===0&&rl(e)}}function sl(t){if(t.v===ft)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Cn.has(e)||(e.f&ut)!==0&&sl(e))return!0;return!1}function nn(t){var e=en;try{return en=!0,t()}finally{en=e}}const mi=-7169;function gt(t,e){t.f=t.f&mi|e}function gi(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(En in t)ys(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&En in r&&ys(r)}}}function ys(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{ys(t[s],e)}catch{}const r=ls(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=co(r);for(let l in s){const a=s[l].get;if(a)try{a.call(t)}catch{}}}}}const pi=["touchstart","touchmove"];function bi(t){return pi.includes(t)}const ol=new Set,xs=new Set;function _i(t,e,r,s={}){function l(a){if(s.capture||gr.call(e,a),!a.cancelBubble)return nr(()=>r?.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?kn(()=>{e.addEventListener(t,l,s)}):e.addEventListener(t,l,s),l}function Br(t,e,r,s,l){var a={capture:s,passive:l},c=_i(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Vo(()=>{e.removeEventListener(t,c,a)})}function tt(t){for(var e=0;e<t.length;e++)ol.add(t[e]);for(var r of xs)r(t)}let ll=null;function gr(t){var e=this,r=e.ownerDocument,s=t.type,l=t.composedPath?.()||[],a=l[0]||t.target;ll=t;var c=0,f=ll===t&&t.__root;if(f){var u=l.indexOf(f);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var v=l.indexOf(e);if(v===-1)return;u<=v&&(c=u)}if(a=l[c]||t.target,a!==e){va(t,"currentTarget",{configurable:!0,get(){return a||r}});var d=Ne,h=je;At(null),tn(null);try{for(var g,m=[];a!==null;){var _=a.assignedSlot||a.parentNode||a.host||null;try{var b=a["__"+s];b!=null&&(!a.disabled||t.target===a)&&b.call(a,t)}catch(p){g?m.push(p):g=p}if(t.cancelBubble||_===e||_===null)break;a=_}if(g){for(let p of m)queueMicrotask(()=>{throw p});throw g}}finally{t.__root=e,delete t.currentTarget,At(d),tn(h)}}}function Es(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function rr(t,e){var r=je;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function H(t,e){var r=(e&_o)!==0,s=(e&Oa)!==0,l,a=!t.startsWith("<!>");return()=>{l===void 0&&(l=Es(a?t:"<!>"+t),r||(l=Tt(l)));var c=s||Io?document.importNode(l,!0):l.cloneNode(!0);if(r){var f=Tt(c),u=c.lastChild;rr(f,u)}else rr(c,c);return c}}function wi(t,e,r="svg"){var s=!t.startsWith("<!>"),l=(e&_o)!==0,a=`<${r}>${s?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var f=Es(a),u=Tt(f);if(l)for(c=document.createDocumentFragment();Tt(u);)c.appendChild(Tt(u));else c=Tt(u)}var v=c.cloneNode(!0);if(l){var d=Tt(v),h=v.lastChild;rr(d,h)}else rr(v,v);return v}}function xe(t,e){return wi(t,e,"svg")}function ce(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Sn();return t.append(e,r),rr(e,r),t}function L(t,e){t!==null&&t.before(e)}let ks=!0;function ae(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function yi(t,e){return xi(t,e)}const sr=new Map;function xi(t,{target:e,anchor:r,props:s={},events:l,context:a,intro:c=!0}){ri();var f=new Set,u=h=>{for(var g=0;g<h.length;g++){var m=h[g];if(!f.has(m)){f.add(m);var _=bi(m);e.addEventListener(m,gr,{passive:_});var b=sr.get(m);b===void 0?(document.addEventListener(m,gr,{passive:_}),sr.set(m,1)):sr.set(m,b+1)}}};u(Lr(ol)),xs.add(u);var v=void 0,d=ci(()=>{var h=r??e.appendChild(Sn());return Ja(h,{pending:()=>{}},g=>{if(a){we({});var m=Ye;m.c=a}l&&(s.$$events=l),ks=c,v=t(g,s)||{},ks=!0,a&&ye()}),()=>{for(var g of f){e.removeEventListener(g,gr);var m=sr.get(g);--m===0?(document.removeEventListener(g,gr),sr.delete(g)):sr.set(g,m)}xs.delete(u),h!==r&&h.parentNode?.removeChild(h)}});return Ei.set(v,d),v}let Ei=new WeakMap;class pr{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#i=!0;constructor(e,r=!0){this.anchor=e,this.#i=r}#o=()=>{var e=ze;if(this.#e.has(e)){var r=this.#e.get(e),s=this.#t.get(r);if(s)ws(s),this.#r.delete(r);else{var l=this.#n.get(r);l&&(this.#t.set(r,l.effect),this.#n.delete(r),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[a,c]of this.#e){if(this.#e.delete(a),a===e)break;const f=this.#n.get(c);f&&(St(f.effect),this.#n.delete(c))}for(const[a,c]of this.#t){if(a===r||this.#r.has(a))continue;const f=()=>{if(Array.from(this.#e.values()).includes(a)){var v=document.createDocumentFragment();Xo(c,v),v.append(Sn()),this.#n.set(a,{effect:c,fragment:v})}else St(c);this.#r.delete(a),this.#t.delete(a)};this.#i||!s?(this.#r.add(a),Dn(c,f,!1)):f()}}};#s=e=>{this.#e.delete(e);const r=Array.from(this.#e.values());for(const[s,l]of this.#n)r.includes(s)||(St(l.effect),this.#n.delete(s))};ensure(e,r){var s=ze,l=qo();if(r&&!this.#t.has(e)&&!this.#n.has(e))if(l){var a=document.createDocumentFragment(),c=Sn();a.append(c),this.#n.set(e,{effect:qt(()=>r(c)),fragment:a})}else this.#t.set(e,qt(()=>r(this.anchor)));if(this.#e.set(s,e),l){for(const[f,u]of this.#t)f===e?s.skipped_effects.delete(u):s.skipped_effects.add(u);for(const[f,u]of this.#n)f===e?s.skipped_effects.delete(u.effect):s.skipped_effects.add(u.effect);s.oncommit(this.#o),s.ondiscard(this.#s)}else this.#o()}}const ki=0,Cs=1;function Ss(t,e,r,s,l){var a=zn(),c=ft,f=a?dn(c):gs(c,!1,!1),u=a?dn(c):gs(c,!1,!1),v=new pr(t);On(()=>{var d=e(),h=!1;if(ma(d)){var g=jo(),m=!1;const _=b=>{if(!h){m=!0,g(!1),Yt.ensure();try{b()}finally{ir(),tr||Co()}}};d.then(b=>{_(()=>{hn(f,b),v.ensure(Cs,s&&(p=>s(p,f)))})},b=>{_(()=>{if(hn(u,b),v.ensure(Cs,l&&(p=>l(p,u))),!l)throw u.v})}),kn(()=>{m||_(()=>{v.ensure(ki,r)})})}else hn(f,d),v.ensure(Cs,s);return()=>{h=!0}})}function Y(t,e,r=!1){var s=new pr(t),l=r?un:0;function a(c,f){s.ensure(c,f)}On(()=>{var c=!1;e((f,u=!0)=>{c=!0,a(u,f)}),c||a(!1,null)},l)}function As(t,e,r){var s=new pr(t),l=!zn();On(()=>{var a=e();l&&a!==null&&typeof a=="object"&&(a={}),s.ensure(a,r)})}function Ze(t,e){return e}function Ci(t,e,r){for(var s=[],l=e.length,a,c=e.length,f=0;f<l;f++){let h=e[f];Dn(h,()=>{if(a){if(a.pending.delete(h),a.done.add(h),a.pending.size===0){var g=t.outrogroups;Ns(Lr(a.done)),g.delete(a),g.size===0&&(t.outrogroups=null)}}else c-=1},!1)}if(c===0){var u=s.length===0&&r!==null;if(u){var v=r,d=v.parentNode;si(d),d.append(v),t.items.clear()}Ns(e,!u)}else a={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(a)}function Ns(t,e=!0){for(var r=0;r<t.length;r++)St(t[r],e)}var al;function Ge(t,e,r,s,l,a=null){var c=t,f=new Map,u=(e&bo)!==0;if(u){var v=t;c=v.appendChild(Sn())}var d=null,h=ds(()=>{var w=r();return io(w)?w:w==null?[]:Lr(w)}),g,m=!0;function _(){p.fallback=d,Si(p,g,c,e,s),d!==null&&(g.length===0?(d.f&fn)===0?ws(d):(d.f^=fn,br(d,null,c)):Dn(d,()=>{d=null}))}var b=On(()=>{g=o(h);for(var w=g.length,M=new Set,y=ze,k=qo(),S=0;S<w;S+=1){var T=g[S],C=s(T,S),E=m?null:f.get(C);E?(E.v&&hn(E.v,T),E.i&&hn(E.i,S),k&&y.skipped_effects.delete(E.e)):(E=Ai(f,m?c:al??=Sn(),T,C,S,l,e,r),m||(E.e.f|=fn),f.set(C,E)),M.add(C)}if(w===0&&a&&!d&&(m?d=qt(()=>a(c)):(d=qt(()=>a(al??=Sn())),d.f|=fn)),!m)if(k){for(const[N,j]of f)M.has(N)||y.skipped_effects.add(j.e);y.oncommit(_),y.ondiscard(()=>{})}else _();o(h)}),p={effect:b,items:f,outrogroups:null,fallback:d};m=!1}function Si(t,e,r,s,l){var a=(s&Pa)!==0,c=e.length,f=t.items,u=t.effect.first,v,d=null,h,g=[],m=[],_,b,p,w;if(a)for(w=0;w<c;w+=1)_=e[w],b=l(_,w),p=f.get(b).e,(p.f&fn)===0&&(p.nodes?.a?.measure(),(h??=new Set).add(p));for(w=0;w<c;w+=1){if(_=e[w],b=l(_,w),p=f.get(b).e,t.outrogroups!==null)for(const j of t.outrogroups)j.pending.delete(p),j.done.delete(p);if((p.f&fn)!==0)if(p.f^=fn,p===u)br(p,null,r);else{var M=d?d.next:u;p===t.effect.last&&(t.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),An(t,d,p),An(t,p,M),br(p,M,r),d=p,g=[],m=[],u=d.next;continue}if((p.f&Pt)!==0&&(ws(p),a&&(p.nodes?.a?.unfix(),(h??=new Set).delete(p))),p!==u){if(v!==void 0&&v.has(p)){if(g.length<m.length){var y=m[0],k;d=y.prev;var S=g[0],T=g[g.length-1];for(k=0;k<g.length;k+=1)br(g[k],y,r);for(k=0;k<m.length;k+=1)v.delete(m[k]);An(t,S.prev,T.next),An(t,d,S),An(t,T,y),u=y,d=T,w-=1,g=[],m=[]}else v.delete(p),br(p,u,r),An(t,p.prev,p.next),An(t,p,d===null?t.effect.first:d.next),An(t,d,p),d=p;continue}for(g=[],m=[];u!==null&&u!==p;)(v??=new Set).add(u),m.push(u),u=u.next;if(u===null)continue}(p.f&fn)===0&&g.push(p),d=p,u=p.next}if(t.outrogroups!==null){for(const j of t.outrogroups)j.pending.size===0&&(Ns(Lr(j.done)),t.outrogroups?.delete(j));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||v!==void 0){var C=[];if(v!==void 0)for(p of v)(p.f&Pt)===0&&C.push(p);for(;u!==null;)(u.f&Pt)===0&&u!==t.fallback&&C.push(u),u=u.next;var E=C.length;if(E>0){var N=(s&bo)!==0&&c===0?r:null;if(a){for(w=0;w<E;w+=1)C[w].nodes?.a?.measure();for(w=0;w<E;w+=1)C[w].nodes?.a?.fix()}Ci(t,C,N)}}a&&kn(()=>{if(h!==void 0)for(p of h)p.nodes?.a?.apply()})}function Ai(t,e,r,s,l,a,c,f){var u=(c&Ma)!==0?(c&Ta)===0?gs(r,!1,!1):dn(r):null,v=(c&ja)!==0?dn(l):null;return{v:u,i:v,e:qt(()=>(a(e,u??r,v??l,f),()=>{t.delete(s)}))}}function br(t,e,r){if(t.nodes)for(var s=t.nodes.start,l=t.nodes.end,a=e&&(e.f&fn)===0?e.nodes.start:r;s!==null;){var c=fr(s);if(a.before(s),s===l)return;s=c}}function An(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function wt(t,e,r=!1,s=!1,l=!1){var a=t,c="";le(()=>{var f=je;if(c!==(c=e()??"")&&(f.nodes!==null&&(Uo(f.nodes.start,f.nodes.end),f.nodes=null),c!=="")){var u=c+"";r?u=`<svg>${u}</svg>`:s&&(u=`<math>${u}</math>`);var v=Es(u);if((r||s)&&(v=Tt(v)),rr(Tt(v),v.lastChild),r||s)for(;Tt(v);)a.before(Tt(v));else a.before(v)}})}function Nn(t,e,...r){var s=new pr(t);On(()=>{const l=e()??null;s.ensure(l,l&&(a=>l(a,...r)))},un)}function Ms(t,e,r){var s=new pr(t);On(()=>{var l=e()??null;s.ensure(l,l&&(a=>r(a,l)))},un)}const Ni=()=>performance.now(),gn={tick:t=>requestAnimationFrame(t),now:()=>Ni(),tasks:new Set};function il(){const t=gn.now();gn.tasks.forEach(e=>{e.c(t)||(gn.tasks.delete(e),e.f())}),gn.tasks.size!==0&&gn.tick(il)}function Mi(t){let e;return gn.tasks.size===0&&gn.tick(il),{promise:new Promise(r=>{gn.tasks.add(e={c:t,f:r})}),abort(){gn.tasks.delete(e)}}}function Yr(t,e){nr(()=>{t.dispatchEvent(new CustomEvent(e))})}function ji(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function cl(t){const e={},r=t.split(";");for(const s of r){const[l,a]=s.split(":");if(!l||a===void 0)break;const c=ji(l.trim());e[c]=a.trim()}return e}const Pi=t=>t;function Ti(t,e,r,s){var l=(t&qa)!==0,a="both",c,f=e.inert,u=e.style.overflow,v,d;function h(){return nr(()=>c??=r()(e,s?.()??{},{direction:a}))}var g={is_global:l,in(){e.inert=f,Yr(e,"introstart"),v=js(e,h(),d,1,()=>{Yr(e,"introend"),v?.abort(),v=c=void 0,e.style.overflow=u})},out(p){e.inert=!0,Yr(e,"outrostart"),d=js(e,h(),v,0,()=>{Yr(e,"outroend"),p?.()})},stop:()=>{v?.abort(),d?.abort()}},m=je;if((m.nodes.t??=[]).push(g),ks){var _=l;if(!_){for(var b=m.parent;b&&(b.f&un)!==0;)for(;(b=b.parent)&&(b.f&Jt)===0;);_=!b||(b.f&zr)!==0}_&&bs(()=>{nn(()=>g.in())})}}function js(t,e,r,s,l){var a=s===1;if(Xn(e)){var c,f=!1;return kn(()=>{if(!f){var p=e({direction:a?"in":"out"});c=js(t,p,r,s,l)}}),{abort:()=>{f=!0,c?.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r?.deactivate(),!e?.duration)return l(),{abort:kt,deactivate:kt,reset:kt,t:()=>s};const{delay:u=0,css:v,tick:d,easing:h=Pi}=e;var g=[];if(a&&r===void 0&&(d&&d(0,1),v)){var m=cl(v(0,1));g.push(m,m)}var _=()=>1-s,b=t.animate(g,{duration:u,fill:"forwards"});return b.onfinish=()=>{b.cancel();var p=r?.t()??1-s;r?.abort();var w=s-p,M=e.duration*Math.abs(w),y=[];if(M>0){var k=!1;if(v)for(var S=Math.ceil(M/16.666666666666668),T=0;T<=S;T+=1){var C=p+w*h(T/S),E=cl(v(C,1-C));y.push(E),k||=E.overflow==="hidden"}k&&(t.style.overflow="hidden"),_=()=>{var N=b.currentTime;return p+w*h(N/M)},d&&Mi(()=>{if(b.playState!=="running")return!1;var N=_();return d(N,1-N),!0})}b=t.animate(y,{duration:M,fill:"forwards"}),b.onfinish=()=>{_=()=>s,d?.(s,1-s),l()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=kt)},deactivate:()=>{l=kt},reset:()=>{s===0&&d?.(1,0)},t:()=>_()}}function ul(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(r=ul(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Li(){for(var t,e,r=0,s="",l=arguments.length;r<l;r++)(t=arguments[r])&&(e=ul(t))&&(s&&(s+=" "),s+=e);return s}function Ri(t){return typeof t=="object"?Li(t):t??""}const fl=[...`
\r\f \v\uFEFF`];function Ii(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var l in r)if(r[l])s=s?s+" "+l:l;else if(s.length)for(var a=l.length,c=0;(c=s.indexOf(l,c))>=0;){var f=c+a;(c===0||fl.includes(s[c-1]))&&(f===s.length||fl.includes(s[f]))?s=(c===0?"":s.substring(0,c))+s.substring(f+1):c=f}}return s===""?null:s}function zi(t,e){return t==null?null:String(t)}function it(t,e,r,s,l,a){var c=t.__className;if(c!==r||c===void 0){var f=Ii(r,s,a);f==null?t.removeAttribute("class"):e?t.className=f:t.setAttribute("class",f),t.__className=r}else if(a&&l!==a)for(var u in a){var v=!!a[u];(l==null||v!==!!l[u])&&t.classList.toggle(u,v)}return a}function Wt(t,e,r,s){var l=t.__style;if(l!==e){var a=zi(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return s}const Fi=Symbol("is custom element"),qi=Symbol("is html");function O(t,e,r,s){var l=Oi(t);l[e]!==(l[e]=r)&&(e==="loading"&&(t[ba]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Di(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Oi(t){return t.__attributes??={[Fi]:t.nodeName.includes("-"),[qi]:t.namespaceURI===Da}}var vl=new Map;function Di(t){var e=t.getAttribute("is")||t.nodeName,r=vl.get(e);if(r)return r;vl.set(e,r=[]);for(var s,l=t,a=Element.prototype;a!==l;){s=co(l);for(var c in s)s[c].set&&r.push(c);l=ls(l)}return r}function dl(t,e,r=e){var s=new WeakSet;li(t,"input",async l=>{var a=l?t.defaultValue:t.value;if(a=Ps(t)?Ts(a):a,r(a),ze!==null&&s.add(ze),await hi(),a!==(a=e())){var c=t.selectionStart,f=t.selectionEnd,u=t.value.length;if(t.value=a??"",f!==null){var v=t.value.length;c===f&&f===u&&v>u?(t.selectionStart=v,t.selectionEnd=v):(t.selectionStart=c,t.selectionEnd=Math.min(f,v))}}}),nn(e)==null&&t.value&&(r(Ps(t)?Ts(t.value):t.value),ze!==null&&s.add(ze)),_s(()=>{var l=e();if(t===document.activeElement){var a=qr??ze;if(s.has(a))return}Ps(t)&&l===Ts(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}function Ps(t){var e=t.type;return e==="number"||e==="range"}function Ts(t){return t===""?null:+t}class Ls{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,r){var s=this.#e.get(e)||new Set;return s.add(r),this.#e.set(e,s),this.#r().observe(e,this.#n),()=>{var l=this.#e.get(e);l.delete(r),l.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#r(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var r of e){Ls.entries.set(r.target,r);for(var s of this.#e.get(r.target)||[])s(r)}}))}}var Vi=new Ls({box:"border-box"});function hl(t,e,r){var s=Vi.observe(t,()=>r(t[e]));bs(()=>(nn(()=>r(t[e])),s))}function ml(t,e){return t===e||t?.[En]===e}function _r(t={},e,r,s){return bs(()=>{var l,a;return _s(()=>{l=a,a=[],nn(()=>{t!==r(...a)&&(e(t,...a),l&&ml(r(...l),t)&&e(null,...l))})}),()=>{kn(()=>{a&&ml(r(...a),t)&&e(null,...a)})}}),t}function Bi(t=!1){const e=Ye,r=e.l.u;if(!r)return;let s=()=>gi(e.s);if(t){let l=0,a={};const c=cr(()=>{let f=!1;const u=e.s;for(const v in u)u[v]!==a[v]&&(a[v]=u[v],f=!0);return f&&l++,l});s=()=>o(c)}r.b.length&&ii(()=>{gl(e,s),as(r.b)}),ke(()=>{const l=nn(()=>r.m.map(ga));return()=>{for(const a of l)typeof a=="function"&&a()}}),r.a.length&&ke(()=>{gl(e,s),as(r.a)})}function gl(t,e){if(t.l.s)for(const r of t.l.s)o(r);e()}let Wr=!1;function Yi(t){var e=Wr;try{return Wr=!1,[t(),Wr]}finally{Wr=e}}const Wi={get(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Xn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,r){let s=t.props.length;for(;s--;){let l=t.props[s];Xn(l)&&(l=l());const a=yn(l,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Xn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=yn(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(t,e){if(e===En||e===go)return!1;for(let r of t.props)if(Xn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Xn(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function Fe(...t){return new Proxy({props:t},Wi)}function U(t,e,r,s){var l=!Qn||(r&Ra)!==0,a=(r&za)!==0,c=(r&Fa)!==0,f=s,u=!0,v=()=>(u&&(u=!1,f=c?nn(s):s),f),d;if(a){var h=En in t||go in t;d=yn(t,e)?.set??(h&&e in t?y=>t[e]=y:void 0)}var g,m=!1;a?[g,m]=Yi(()=>t[e]):g=t[e],g===void 0&&s!==void 0&&(g=v(),d&&(l&&ka(),d(g)));var _;if(l?_=()=>{var y=t[e];return y===void 0?v():(u=!0,y)}:_=()=>{var y=t[e];return y!==void 0&&(f=void 0),y===void 0?f:y},l&&(r&Ia)===0)return _;if(d){var b=t.$$legacy;return(function(y,k){return arguments.length>0?((!l||!k||b||m)&&d(k?_():y),y):_()})}var p=!1,w=((r&La)!==0?cr:ds)(()=>(p=!1,_()));a&&o(w);var M=je;return(function(y,k){if(arguments.length>0){const S=k?o(w):l&&a?We(y):y;return J(w,S),p=!0,f!==void 0&&(f=S),y}return Bn&&p||(M.f&cn)!==0?w.v:o(w)})}function Ui(t){Ye===null&&po(),Qn&&Ye.l!==null?Gi(Ye).m.push(t):ke(()=>{const e=nn(t);if(typeof e=="function")return e})}function Gi(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Hi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Hi),Wa();function Ki(t){return wr(t,.5)}function Xi(t){return wr(t,.75)-wr(t,.25)}function wr(t,e){if(Ae(t))return wr(t.v,e);if(Ae(e))return wr(t,e.v);const r=t.length;if(Array.isArray(e)||(e=[e]),!Bs(e[0])||Wn(e)<0||Mn(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(c,f){const u=(r-1)*f+1,v=Math.floor(u),d=Math.ceil(u);return c[v-1]+(c[d-1]-c[v-1])*(u-Math.floor(u))}const l=Gs(t),a=e.map(c=>s(l,c));return e.length==1?a[0]:Ke(a)}function pl(t){if(Ae(t))return pl(t.v);const e=new he.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new he(e)}function yr(t,e){return Ae(t)?yr(t.v,e):Math.sqrt(xr(t,e))}function xr(t,e){if(e===void 0&&(e=!1),Ae(t))return xr(t.v);const r=pn(t);let s=0;for(let l=0;l<t.length;l++){const a=t[l]-r;s=s+a*a}return s/(e?t.length:t.length-1)}function pn(t){return Ae(t)?pn(t.v):bl(t)/t.length}function bl(t){if(Ae(t))return bl(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function _l(t){if(Ae(t))return _l(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Wn(t){return Ae(t)||Ht(t)?t.v[Rs(t.v)-1]:t[Rs(t)-1]}function Rs(t){if(Ae(t)||Ht(t))return Rs(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]<r&&(e=s,r=t[s-1]);return e}function Mn(t){return Ae(t)||Ht(t)?t.v[Is(t.v)-1]:t[Is(t)-1]}function Is(t){if(Ae(t)||Ht(t))return Is(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]>r&&(e=s,r=t[s-1]);return e}const zs=30,Zi=1e-7,Ji=1e-7,wl=1e-13,yl=1e3,Qi=100;function xl(t,e,r,s,l){s===void 0&&(s=yl),r===void 0&&(r=wl),l===void 0&&(l=Qi);let a=r,c=s,f=(c-a)/l;for(let u=0;u<l;u++){let v,d;for(let m=0;m<l;m++){v=a+m*f,d=a+(m+1)*f;const _=e(v),b=e(d);if(_<=t&&b>=t)break}const h=(v+d)/2,g=e(h);if(Math.abs(g-t)<Zi||(a=v,c=d,f=(c-a)/l,f/c<Ji))return h}return(a+c)/2}function El(t,e=0,r=1){let s=he.zeros(t);for(let l=0;l<t;l++)s.v[l]=e+Math.random()*(r-e);return s}function kl(t,e=0,r=1){let s=he.zeros(t);for(let l=0;l<t;l++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[l]=a*Math.sin(c)*r+e}return s}function Ur(t,e=0,r=1){if(Ae(t))return t.apply(l=>Ur(l,e,r));const s=1/(Math.sqrt(2)*r);return .5*(1+ec((t-e)*s))}function Fs(t,e=0,r=1){if(Ae(t))return t.apply(D=>Fs(D,e,r));if(e!==0||r!==1)return Fs(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const s=.425,l=5,a=.180625,c=1.6,f=3.3871327179,u=5.0434271938*10,v=1.5929113202*100,d=5.910937472*10,h=1.7895169469*10,g=7.8757757664*10,m=6.71875636*10,_=1.4234372777,b=2.75681539,p=1.3067284816,w=1.7023821103*.1,M=7.370016425*.1,y=1.2021132975*.1,k=6.657905115,S=3.081226386,T=4.2868294337*.1,C=1.7337203997*.01,E=2.4197894225*.1,N=1.2258202635*.01,j=t-.5;let P;if(Math.abs(j)<=s)return P=a-j*j,j*(((d*P+v)*P+u)*P+f)/(((m*P+g)*P+h)*P+1);P=j<0?t:1-t,P=Math.sqrt(-Math.log(P));let z;return P<=l?(P=P-c,z=(((w*P+p)*P+b)*P+_)/((y*P+M)*P+1)):(P=P-l,z=((C*P+T)*P+S+k)/((N*P+E)*P+1)),j<0?-z:z}function qs(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return qs(Ke(t),e,r);if(Ae(t))return t.apply(s=>qs(s,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return Gr(t*e,e)}return e==Number.POSITIVE_INFINITY?1-Gr(r/t,r):e*t>r?1-Hr(r/(r+e*t),r/2,e/2):Hr(e*t/(r+e*t),e/2,r/2)}function Cl(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let s=yl,l=wl;if(t>.9997&&r===1?(s=1e7,l=6e5,t=.9997):t>.9992&&r===1?(s=1e7,l=6e5):t>.997&&r===1?(s=1e6,l=45e3):t>.992&&r===1?(s=1e5,l=5e3):t>.97&&r===1&&(s=1e4,l=400),Array.isArray(t))return Cl(Ke(t),e,r);const a=f=>qs(f,e,r);function c(f,u,v){return f===0?0:f===1?Inf:u===0?NaN:v===0?NaN:xl(f,a,l,s)}return Ae(t)?t.apply(c,e,r):c(t,e,r)}function Gr(t,e){if(Array.isArray(t))return Gr(Ke(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const v=u/e,d=Math.pow(v,1/6)-.5*Math.pow(v,1/3)+1/3*Math.pow(v,1/2);return Ur(d,r,l)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:$i(u/2,e/2)/Er(e/2)}const f=e>zs?a:c;return Ae(t)?t.apply(f):f(t)}function bn(t,e){if(Array.isArray(t))return bn(Ke(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const v=Fs(u,r,l),d=Math.pow(Math.sqrt(36*v*v-30*v+13)/4+(3*v-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:xl(u,d=>Gr(d,e),0,zs*10)}const f=e>zs?a:c;return Ae(t)?t.apply(f):f(t)}function Hr(t,e,r){if(Array.isArray(t))return Hr(Ke(t),e,r);if(Ae(t))return t.apply(l=>Hr(l,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const s=.5-t+.5;return vc(e,r,t,s)}function Er(t){if(Ae(t))return t.apply(Er);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+Er(1-t));t=t-1;let r=.9999999999998099;for(let l=0;l<e.length;l++)r=r+e[l]/(t+l+1);const s=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*r}function $i(t,e){let l=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/Er(e+a+1);if(isNaN(c)||c<1e-18)break;l+=c}return Math.pow(t,e)*Er(e)*Math.exp(-t)*l}function ec(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,s=-.284496736,l=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*t),v=1-((((c*u+a)*u+l)*u+s)*u+r)*u*Math.exp(-t*t);return e*v}function Sl(t,e){const r=.564189583547756,s=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],f=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let v,d,h,g,m=Math.abs(e);if(m<=.5)return d=e*e,g=(((s[0]*d+s[1])*d+s[2])*d+s[3])*d+s[4]+1,h=((l[0]*d+l[1])*d+l[2])*d+1,v=.5-e*(g/h)+.5,v=Math.exp(d)*v,v;if(m<=4)g=((((((a[0]*m+a[1])*m+a[2])*m+a[3])*m+a[4])*m+a[5])*m+a[6])*m+a[7],h=((((((c[0]*m+c[1])*m+c[2])*m+c[3])*m+c[4])*m+c[5])*m+c[6])*m+c[7],v=g/h;else{if(e<=-5.6)return v=2,v=Math.exp(e*e)*2,v;d=1/(e*e),g=(((f[0]*d+f[1])*d+f[2])*d+f[3])*d+f[4],h=(((u[0]*d+u[1])*d+u[2])*d+u[3])*d+1,v=(r-d*g/h)/m}return e<0&&(v=Math.exp(e*e)*2-v),v}function Al(t,e){let r=t+e-2;return r<=.25?Dt(r+1):r<=1.25?Dt(r)+Pn(r):Dt(r-1)+Math.log(r*(r+1))}function Kr(t,e){const r=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,v,d,h,g,m,_,b,p,w,M,y,k,S,T;return d=Math.min(t,e),h=Math.max(t,e),m=d/h,g=m/(m+1),p=1/(m+1),y=p*p,w=p+y+1,M=p+y*w+1,k=p+y*M+1,S=p+y*k+1,T=p+y*S+1,v=1/h,_=v*v,b=((((f*T*_+c*S)*_+a*k)*_+l*M)*_+s*w)*_+r,b*=g/h,v=1/d,_=v*v,u=(((((f*_+c)*_+a)*_+l)*_+s)*_+r)/d+b,u}function He(t){let e,r,s,l,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],f=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],l=(u*r+f)*r+1,s=a/l,e>0?r*s/t:t*(s+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],f=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],l=(((f[4]*r+f[3])*r+f[2])*r+f[1])*r+1,s=a/l,e>0?r/t*(s-.5-.5):t*s}}}function tc(t,e,r){let s,l,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=l=0,s=0;for(let f=1;f<=r;f++)a=l,l=s,s=c*l-a+e[r-f];return(s-a)*.5}function Nl(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,s=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*tc(t/.375,e,r));if(t<s)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function jn(t,e){const r=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,v,d,h,g,m,_,b,p,w,M,y,k,S;return t>e?(d=e/t,u=1/(d+1),b=d/(d+1),v=t+(e-.5)):(d=t/e,u=d/(d+1),b=1/(d+1),v=e+(t-.5)),M=b*b,p=b+M+1,w=b+M*p+1,y=b+M*w+1,k=b+M*y+1,S=b+M*k+1,h=1/(e*e),_=((((f*S*h+c*k)*h+a*y)*h+l*w)*h+s*p)*h+r,_*=u/e,g=v*Pn(t/e),m=t*(Math.log(e)-1),g>m?_-m-g:_-g-m}function Dt(t){if(t<.6){const _=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*_}else{const e=.422784335098467,r=.848044614534529,s=.565221050691933,l=.156513060486551,a=.017050248402265,c=.000497958207639485,f=1.24313399877507,u=.548042109832463,v=.10155218743983,d=.00713309612391,h=.000116165475989616,g=t-.5-.5,m=(((((c*g+a)*g+l)*g+s)*g+r)*g+e)/(((((h*g+d)*g+v)*g+u)*g+f)*g+1);return g*m}}function Ut(t){const e=.418938533204673,r=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;if(t<=.8)return Dt(t)-Math.log(t);if(t<=2.25)return Dt(t-.5-.5);if(t<10){let d=Math.round(t-1.25),h=t,g=1;for(let m=1;m<=d;++m)h+=-1,g*=h;return Dt(h-1)+Math.log(g)}let u=1/(t*t),v=(((((f*u+c)*u+a)*u+l)*u+s)*u+r)/t;return e+v+(t-.5)*(Math.log(t)-1)}function Os(t,e){const r=.918938533204673;let s=Math.min(t,e),l=Math.max(t,e);function a(c,f,u){let v=Math.round(u-1),d=1;for(let h=1;h<=v;++h)u+=-1,d*=u/(f+u);return c+Math.log(d)+(Ut(f)+(Ut(u)-Al(f,u)))}if(s<8){if(s<1)return l<8?Ut(s)+(Ut(l)-Ut(s+l)):Ut(s)+jn(s,l);let c;if(s<2)return l<=2?Ut(s)+Ut(l)-Al(s,l):l<8?(c=0,a(c,s,l)):Ut(s)+jn(s,l);if(l<=1e3){let f=Math.round(s-1);c=1;for(let u=1;u<=f;++u){s+=-1;let v=s/l;c*=v/(v+1)}return c=Math.log(c),l>=8?c+Ut(s)+jn(s,l):a(c,s,l)}else{let f=Math.round(s-1);c=1;for(let u=1;u<=f;++u)s+=-1,c*=s/(s/l+1);return log(c)-f*log(l)+(Ut(s)+jn(s,l))}}else{let c=Kr(s,l),f=s/l,u=-(s-.5)*Math.log(f/(f+1)),v=l*Pn(f);return u>v?Math.log(l)*-.5+r+c-v-u:Math.log(l)*-.5+r+c-u-v}}function Ml(t){return(t==0?1024:-300)*.69314718055995*.99999}function or(t){const e=.0566749439387324,r=.0456512608815524,s=.333333333333333,l=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,f=.354508718369557;let u,v,d,h,g;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(u=t+.3,u/=.7,g=e-u*.3):t>.18?(u=t*.75-.25,g=r+u/3):(u=t,g=0),v=u/(u+2),d=v*v,h=((a*d+l)*d+s)/((f*d+c)*d+1),d*2*(1/(1-v)-v*h)+g)}function Pn(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,s=-.0178874546012214,l=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let f=t/(t+2),u=f*f,v=(((s*u+r)*u+e)*u+1)/(((c*u+a)*u+l)*u+1);return f*2*v}function nc(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],l=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,v,d,h,g;if(d=Math.abs(t),d<=.5)return u=t*t,g=(((r[0]*u+r[1])*u+r[2])*u+r[3])*u+r[4]+1,h=((s[0]*u+s[1])*u+s[2])*u+1,t*(g/h);if(d<=4){g=((((((l[0]*d+l[1])*d+l[2])*d+l[3])*d+l[4])*d+l[5])*d+l[6])*d+l[7],h=((((((a[0]*d+a[1])*d+a[2])*d+a[3])*d+a[4])*d+a[5])*d+a[6])*d+a[7];let _=.5-Math.exp(-t*t)*g/h+.5;return t<0?-_:_}if(d>=5.8)return t>0?1:-1;v=t*t,u=1/v,g=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],h=(((f[0]*u+f[1])*u+f[2])*u+f[3])*u+1,u=(e-g/(v*h))/d;let m=.5-Math.exp(-v)*u+.5;return t<0?-m:m}function rc(t){const e=914041914819518e-24,r=.0238082361044469,s=-.499999999085958,l=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+l)*t+s)*t+1));{let f=Math.exp(t);return t>0?f*(.5-1/f+.5):f-.5-.5}}function kr(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function sc(t){const e=.785398163397448,r=1.4616321449683622,s=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],l=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let f,u,v,d,h,g,m,_,b,p,w,M,y;if(w=Number.MAX_SAFE_INTEGER,d=.5/(.5*Number.EPSILON),w>d&&(w=d),y=1e-9,_=0,t<.5){if(fabs(t)<=y){if(t==0)return 0;_=-1/t}else{if(h=-t,b=e,h<=0&&(h=-h,b=-b),h>=w)return 0;if(v=Math.round(h),h-=v,v=Math.round(h*4),h=(h-v*.25)*4,u=v/2,u+u!=v&&(h=1-h),g=e*h,f=u/2,f+f!=u&&(b=-b),u=(v+1)/2,f=u/2,f+=f,f==u){if(g==0)return 0;_=b*(cos(g)/sin(g)*4)}else _=b*(sin(g)/cos(g)*4)}t=1-t}if(t<=3){m=t,M=s[0]*t;for(let k=1;k<=5;++k)m=(m+l[k-1])*t,M=(M+s[k])*t;return m=(M+s[6])/(m+l[5]),p=t-r,m*p+_}if(t<w){h=1/(t*t),m=h,M=a[0]*h;for(let k=1;k<=3;++k)m=(m+c[k-1])*h,M=(M+a[k])*h;_=M/(m+c[3])-.5/t+_}return _+log(t)}function oc(t,e,r,s){let l,a,c,f,u,v;if(t>s*.001){if(f=t*Math.log(r),f<Math.exparg(1))return 0;l=Math.exp(f)}else l=1;for(l*=e/t,v=s/t,u=t+1,f=r,c=f/u,u+=1,f=r*f,a=f/u,c+=a;Math.abs(r)>v;)u+=1,f=r*f,a=f/u,c+=a;return l*=t*c+1,l}function lc(t,e,r,s){const l=.577215664901533;let a,c,f,u,v,d,h=e*r;for(v=r-h,c=e*s<=.02?Math.log(r)+sc(e)+l+v:Math.log(h)+l+v,a=s*5*Math.abs(c),f=1,u=0,f+=1,v*=r-h/f,d=v/f,u+=d;Math.abs(d)>a;)f+=1,v*=r-h/f,d=v/f,u+=d;return-t*(c+u)}function Ds(t,e,r,s){let l,a,c,f,u,v,d,h,g;if(r==0)return 0;if(d=Math.min(t,e),d>=1)v=t*Math.log(r)-Os(t,e),a=Math.exp(v)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(a=Math.pow(r,t),a==0)return a;g=t+e,g>1?(u=t+e-1,v=(He(u)+1)/g):v=He(g)+1,c=(He(t)+1)*(He(e)+1)/v,a*=c*(e/g)}else{if(u=Dt(d),l=Math.round(h-1),l>=1){c=1;for(let w=1;w<=l;++w)h+=-1,c*=h/(d+h);u+=Math.log(c)}v=t*Math.log(r)-u,h+=-1,g=d+h,g>1?(u=d+h-1,f=(He(u)+1)/g):f=He(g)+1,a=Math.exp(v)*(d/t)*(He(h)+1)/f}else u=Dt(d)+jn(d,h),v=t*Math.log(r)-u,a=d/t*Math.exp(v);if(a==0||t<=s*.1)return a;let m=s/t,_=0,b=0,p;for(c=1,_+=1,c*=(.5-e/_+.5)*r,p=c/(t+_),b+=p;_<1e7&&Math.abs(p)>m;)_+=1,c*=(.5-e/_+.5)*r,p=c/(t+_),b+=p;return t*b>-1?a*=t*b+1:a=0,a}function Xr(t,e,r,s,l,a){let c,f,u,v,d,h=t+e,g=t+1;if(l>1&&t>=1&&h>=g*1.1?(u=Math.round(Math.abs(Ml(1))),f=Math.round(Ml(0)),u>f&&(u=f),v=Math.exp(-u)):(u=0,v=1),c=cc(u,t,e,r,s)/t,l==1||c==0)return c;let m=l-1,_=v;if(f=0,e>1){if(s>1e-4){let b=(e-1)*r/s-t;b>=1&&(f=b<m?Math.round(b):m)}else f=m;for(let b=0;b<f;++b)d=b,v*=(h+d)/(g+d)*r,_+=v}for(let b=f;b<m&&(d=b,v*=(h+d)/(g+d)*r,_+=v,!(v<=a*_));++b);return c*=_,c}function ac(t,e,r,s,l,a){let c,f,u,v,d,h,g,m,_,b,p,w,M,y,k,S,T,C,E;if(!Number.isFinite(l)||(E=ic(t,e,r,s),Number.isNaN(E)))return Number.NaN;if(E==0)return 0;for(c=l+1,_=e/t,b=1/t+1,y=s+1,u=0,v=1,h=t+1,w=0,M=1,k=1,S=c/b,d=b/c,u+=1,g=u/t,m=u*(e-u)*r,f=t/h,C=v*(v+_)*f*f*(m*r),f=(g+1)/(b+g+g),T=u+m/h+f*(c+u*y),v=g+1,h+=2,g=C*w+T*k,w=k,k=g,g=C*M+T*S,M=S,S=g,p=d,d=k/S,w/=S,M/=S,k=d,S=1;u<1e4&&(u+=1,g=u/t,m=u*(e-u)*r,f=t/h,C=v*(v+_)*f*f*(m*r),f=(g+1)/(b+g+g),T=u+m/h+f*(c+u*y),v=g+1,h+=2,g=C*w+T*k,w=k,k=g,g=C*M+T*S,M=S,S=g,p=d,d=k/S,!(Math.abs(d-p)<=a*d));)w/=S,M/=S,k=d,S=1;return E*d}function ic(t,e,r,s){const l=.398942280401433;let a,c,f,u,v,d,h,g,m;if(r==0||s==0)return 0;if(h=Math.min(t,e),h<8){let _,b;if(r<=.375?(_=Math.log(r),b=Pn(-r)):s>.375?(_=Math.log(r),b=Math.log(s)):(_=Pn(-s),b=Math.log(s)),d=t*_+e*b,h>=1)return d-=Os(t,e),Math.exp(d);if(g=Math.max(t,e),g>=8)return u=Dt(h)+jn(h,g),h*Math.exp(d-u);if(g<=1){let w=Math.exp(d);return w==0?0:(m=t+e,m>1?(u=t+e-1,d=(He(u)+1)/m):d=He(m)+1,c=(He(t)+1)*(He(e)+1)/d,w*(h*c)/(h/g+1))}if(u=Dt(h),a=Math.round(g-1),a>=1){c=1;for(let w=1;w<=a;++w)g+=-1,c*=g/(h+g);u=Math.log(c)+u}d-=u,g+=-1,m=h+g;let p;return m>1?(u=h+g-1,p=(He(u)+1)/m):p=He(m)+1,h*Math.exp(d)*(He(g)+1)/p}else{let _,b,p,w;return t<=e?(_=t/e,b=_/(_+1),p=1/(_+1),w=t-(t+e)*r):(_=e/t,b=1/(_+1),p=_/(_+1),w=(t+e)*s-e),f=-w/t,u=Math.abs(f)>.6?f-Math.log(r/b):or(f),f=w/e,v=Math.abs(f)<=.6?or(f):f-Math.log(s/p),d=Math.exp(-(t*u+e*v)),l*Math.sqrt(e*b)*d*Math.exp(-Kr(t,e))}}function cc(t,e,r,s,l){const a=.398942280401433;let c,f,u,v,d,h,g,m;if(h=Math.min(e,r),h<8){let _,b;if(s<=.375?(_=Math.log(s),b=Pn(-s)):l>.375?(_=Math.log(s),b=Math.log(l)):(_=Pn(-l),b=Math.log(l)),d=e*_+r*b,h>=1)return d-=Os(e,r),kr(t,d);if(g=Math.max(e,r),g>=8)return u=Dt(h)+jn(h,g),h*kr(t,d-u);if(g<=1){let w=kr(t,d);return w==0?w:(m=e+r,m>1?(u=e+r-1,d=(He(u)+1)/m):d=He(m)+1,c=(He(e)+1)*(He(r)+1)/d,w*(h*c)/(h/g+1))}u=Dt(h);let p=Math.round(g-1);if(p>=1){c=1;for(let w=1;w<=p;++w)g+=-1,c*=g/(h+g);u+=Math.log(c)}return d-=u,g+=-1,m=h+g,f=m>1?(He(m-1)+1)/m:He(m)+1,h*kr(t,d)*(He(g)+1)/f}else{let _,b,p,w;e>r?(_=r/e,b=1/(_+1),p=_/(_+1),w=(e+r)*l-r):(_=e/r,b=_/(_+1),p=1/(_+1),w=e-(e+r)*s),-Nl(r/e);let M=-w/e;return u=Math.abs(M)>.6?M-Math.log(s/b):or(M),M=w/r,v=Math.abs(M)>.6?M-Math.log(l/p):or(M),d=kr(t,-(e*u+r*v)),a*Math.sqrt(r*b)*d*Math.exp(-Kr(e,r))}}function Vs(t,e,r,s,l,a){let f=Array(30),u=Array(30),v=e-.5-.5,d=t+v*.5,h=s>.375?Math.log(r):Pn(-s),g=-d*h;if(e*g==0)throw new Error("bgrat: expansion can not be computed.");let m=Math.log(e)+Nl(He(e))+e*Math.log(g)+d*h,_=m-(jn(e,t)+e*Math.log(d)),b=Math.exp(_);if(_==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let p=b==0,w=l==0?0:Math.exp(Math.log(l)-_),M=uc(e,g,m,a),y=.25/(d*d),k=h*.25*h,S=M,T=S,C=1,E=1,N=0;for(let j=1;j<=30;++j){let P=e+N;S=(P*(P+1)*S+(g+P+1)*C)*y,N+=2,C*=k,E/=N*(N+1);let z=j-1;f[z]=E;let D=0;if(j>1){let A=e-j;for(let q=1;q<=z;++q)D+=A*f[q-1]*u[z-q],A+=e}u[z]=v*E+D/j;let F=u[z]*S;if(T+=F,T<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(F)<=a*(T+w))break}return l+=p?Math.exp(_+Math.log(T)):b*T,l}function uc(t,e,r,s){const l=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-nc(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return Sl(1,a)/a*l}}else if(e<1.1){let a=3,c=e,f=e/(t+3),u=s*.1/(t+1),v;for(a+=1,c*=-(e/a),v=c/(t+a),f+=v;Math.abs(v)>u;)a+=1,c*=-(e/a),v=c/(t+a),f+=v;let d=t*e*((f/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),g=He(t),m=g+1;if(e>=.25&&t<e/2.59||h>-.13394){let _=rc(h),b=((_+.5+.5)*d-_)*m-g;return b<=0?0:b*Math.exp(-r)}else return(.5-Math.exp(h)*m*(.5-d+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,f=e,u=e+(1-t),v=1,d,h;a=e*c+v*a,f=e*u+v*f,d=a/f,v+=1;let g=v-t;for(c=a+g*c,u=f+g*u,h=c/u;Math.abs(h-d)>=s*h;)a=e*c+v*a,f=e*u+v*f,d=a/f,v+=1,g=v-t,c=a+g*c,u=f+g*u,h=c/u;return h}}function fc(t,e,r,s){const a=1.12837916709551,c=.353553390593274,f=Array(21),u=Array(21),v=Array(21),d=Array(21);let h=t*or(-r/t)+e*or(r/e),g;if(g=Math.exp(-h),g==0)return 0;let m=Math.sqrt(h),_=m/c*.5,b=h+h,p,w,M,y;t<e?(p=t/e,w=1/(p+1),M=(e-t)/e,y=1/Math.sqrt(t*(p+1))):(p=e/t,w=1/(p+1),M=(e-t)/t,y=1/Math.sqrt(e*(p+1))),f[0]=M*.6666666666666666,v[0]=f[0]*-.5,d[0]=-v[0];let k=.5/a*Sl(1,m),S=c,T=k+d[0]*y*S,C=1,E=p*p,N=1,j=y,P=_,z=b;for(let F=2;F<=20;F+=2){N*=E,f[F-1]=w*2*(p*N+1)/(F+2);let A=F+1;C+=N,f[A-1]=M*2*C/(F+3);for(let G=F;G<=A;++G){let K=(G+1)*-.5;u[0]=K*f[0];for(let se=2;se<=G;++se){let re=0;for(let te=1;te<=se-1;++te){let Q=se-te;re+=(te*K-Q)*f[te-1]*u[Q-1]}u[se-1]=K*f[se-1]+re/se}v[G-1]=u[G-1]/(G+1);let oe=0;for(let se=1;se<=G-1;++se)oe+=d[G-se-1]*v[se-1];d[G-1]=-(oe+v[G-1])}k=c*P+(F-1)*k,S=c*z+F*S,P=b*P,z=b*z,j*=y;let q=d[F-1]*j*k;j*=y;let W=d[A-1]*j*S;if(T+=q+W,Math.abs(q)+Math.abs(W)<=s*T)break}let D=Math.exp(-Kr(t,e));return a*g*D*T}function vc(t,e,r,s){let a=0,c=0;function f(p,w,M,y){const k=Ds(p,w,M,1e-15);return y?.5-k+.5:k}function u(p,w,M,y){const k=Ds(w,p,M,1e-15);return y?k:.5-k+.5}function v(p,w,M,y,k,S){const T=ac(p,w,M,y,k,15000000000000002e-30);return S?.5-T+.5:T}function d(p,w,M,y,k){let S=Math.round(w);w=w-S,w===0&&(S=S-1,w=1);let T=Xr(w,p,y,M,S,1e-15);return M<=.7?(T=T+Ds(p,w,M,1e-15),k?.5-T+.5:T):(p<=15&&(S=20,T=T+Xr(p,w,M,y,S,1e-15),p=p+S),T=Vs(p,w,M,y,T,15*1e-15),k?.5-T+.5:T)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,g,m,_,b;if(t<=1||e<=1){if(r>.5?(b=!0,h=e,m=s,g=t,_=r):(b=!1,h=t,m=r,g=e,_=s),g<Math.min(1e-15,1e-15*h))return a=oc(h,g,m,1e-15),b?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*g)&&g*m<=1)return c=lc(h,g,m,1e-15),b?c:.5-c+.5;if(Math.max(h,g)>1){if(g<=1)return f(h,g,m,b);if(m>=.29)return u(h,g,_,b);if(m<.1&&Math.pow(m*g,h)<=.7)return f(h,g,m,b)}else{if(h>=Math.min(.2,g)||Math.pow(m,h)<=.9)return f(h,g,m,b);if(m>=.3)return u(h,g,_,b)}let p=!1;return Math.max(h,g)>1&&g>15?c=0:(p=!0,c=Xr(g,h,_,m,20,1e-15),g+=20),c=Vs(g,h,_,m,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(p?c=Xr(g-n,h,_,m,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Vs(g,h,_,m,c,15*1e-15),a=-expm1(c),b?.5-a+.5:a):(a=.5-c+.5,b?.5-a+.5:a)}else{let p=Number.isFinite(t+e)?t>e?(t+e)*s-e:t-(t+e)*r:t*s-e*r;const w=p<0;let M,y,k,S;if(w?(p=-p,M=e,k=s,y=t,S=r):(M=t,k=r,y=e,S=s),y<40)return y*k<=.7?f(M,y,k,w):d(M,y,k,S,w);if(M>y){if(y<=100||p>y*.03)return v(M,y,k,S,p,w)}else{if(M<=100)return v(M,y,k,S,p,w);if(p>M*.03)return v(M,y,k,S,p,w)}return a=fc(M,y,p,1e-15*100),w?.5-a+.5:a}}function jl(t){const e=t.nrows,r=t.ncols;if(e<r){const c=jl(t.subset([],qe.seq(1,e)));return{Q:c.Q,R:hc(c.Q,t)}}let s=ue.eye(e),l=t.t();for(let c=1;c<=r;c++)for(let f=e;f>=c+1;f--){const u=l.v.subarray((f-2)*r,f*r),v=s.v.subarray((f-2)*e,f*e),d=u.slice(),h=v.slice(),[g,m,_]=dc(d[c-1],d[c-1+r]);for(let b=0;b<r;b++)u[b]=d[b]*g+d[b+r]*m,u[b+r]=d[b]*-m+d[b+r]*g,v[b]=h[b]*g+h[b+e]*m,v[b+e]=h[b]*-m+h[b+e]*g;for(let b=r;b<e;b++)v[b]=h[b]*g+h[b+e]*m,v[b+e]=h[b]*-m+h[b+e]*g}const a=qe.seq(1,r);return{Q:e===r?s:s.subset([],a),R:e===r?l.t():l.subset([],a).t()}}function dc(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),f=1/c;return[f,a*f,t*c]}const r=t/e,s=Math.sqrt(1+r*r),l=1/s;return[r*l,l,e*s]}function Bs(t){return typeof t=="number"}function hc(t,e){if(e===void 0&&(e=t),!Gt(t)||!Gt(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,s=t.ncols,l=e.nrows,a=e.ncols,c=s,f=a,u=r,v=new Float64Array(c*f);for(let d=0;d<f;d++){const h=e.v.subarray(d*l,(d+1)*l),g=v.subarray(d*c,(d+1)*c);for(let m=0;m<c;m++){const _=t.v.subarray(m*r,(m+1)*r);let b=0;for(let p=0;p<u;p++)b+=_[p]*h[p];g[m]=b}}return new ue(v,c,f)}function Pl(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new he(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new ue(t.v,e,r)}function Gt(t){return t&&t.constructor===ue}function mc(t,e,r){return new ue(new Float64Array(t),e,r)}class ue{static valuesConstructor=Float64Array;static TOLERANCE=Math.pow(10,-9);constructor(e,r,s){if(!ArrayBuffer.isView(e)||e.constructor!==ue.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return ue.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=ue.eye(e),l=ue.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],f=e-1;for(let u=0;u<e;u++)l.v[f*e+u]=s.v[f*e+u]/c;for(let u=e-2;u>=0;u--){let v=s.getcolumn(u+1);const d=a.getcolref(u+1);for(let h=u+1;h<e;h++){const g=l.getcolumn(h+1);v=v.subtract(g.mult(d[h]))}l.v.set(v.divide(d[u]).v,u*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(_l(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=ue.eye(e),a=ue.eye(e),c=this.t(),f=0,u=c.v[0];for(let v=0;v<e;v++)a.v[f*e+v]=l.v[f*e+v]/u;for(let v=1;v<e;v++){let d=l.getcolumn(v+1);const h=c.getcolref(v+1);for(let g=0;g<v;g++){const m=a.getcolumn(g+1);d=d.subtract(m.mult(h[g]))}a.v.set(d.divide(h[v]).v,v*e)}return a.t()}const r=jl(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>ue.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>ue.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let s=0;s<e;s++)r[s]=this.getcolref(s+1)[s];return new he(r)}t(){const e=this.nrows,r=this.ncols,s=new ue.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const a=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*r+l]=a[c]}return new ue(s,r,e)}for(let l=0;l<this.nrows;l++){const a=s.subarray(l*r,(l+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+l]}return new ue(s,r,e)}dot(e){if(Ae(e))return new ue(Us(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Gt(e))return new ue(Us(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,s){if(Gt(e))return new ue(Ys(this.v,e.v,r),this.nrows,this.ncols);if(Bs(e))return new ue(Ws(this.v,e,r),this.nrows,this.ncols);if(!Ae(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new ue.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Ws(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new ue(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new ue.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Ys(this.getcolref(a+1),e.v,r),a*this.nrows);return new ue(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e,r){if(r===void 0&&(r=2),r==2){const s=this.ncols,l=new ue.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.getcolref(a+1));return new he(l)}if(r==1)return this.t().apply(e,2);if(r==0){const s=this.v.length,l=new ue.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.v[a]);return new ue(l,this.nrows,this.ncols)}}replace(e,r,s){typeof r=="number"&&(r=[r]),r.length===0&&(r=qe.seq(1,this.nrows)),Ht(r)||(r=Kt(r)),typeof s=="number"&&(s=[s]),s.length===0&&(s=qe.seq(1,this.ncols)),Ht(s)||(s=Kt(s));const l=r.length,a=s.length;if(Wn(r)<1||Mn(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Wn(s)<1||Mn(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const f=e.getcolref(c+1),u=(s.v[c]-1)*this.nrows;for(let v=0;v<r.length;v++){const d=r.v[v];this.v[u+d-1]=f[v]}}return this}copy(){return new ue(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new he.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)r[s]=this.getcolref(s+1)[e-1];return new he(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new he(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Kt([e])),typeof r=="number"&&(r=Kt([r])),Array.isArray(e)&&(e=e.length===0?null:Kt(e)),Array.isArray(r)&&(r=r.length===0?null:Kt(r)),e!==null&&!Ht(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Ht(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Wn(e)<1||Mn(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Wn(r)<1||Mn(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const f=r.length,u=this.nrows,v=new ue.valuesConstructor(u*f);for(let d=0;d<r.length;d++)v.set(this.v.slice((r.v[d]-1)*this.nrows,r.v[d]*this.nrows),d*this.nrows);return new ue(v,u,f)}if(r==null)return this.t().subset(r,e).t();const s=e.length,l=r.length,a=new ue.valuesConstructor(s*l);let c=new ue.valuesConstructor(s);for(let f=0;f<l;f++){const u=this.v.subarray((r.v[f]-1)*this.nrows,r.v[f]*this.nrows);for(let v=0;v<s;v++)c[v]=u[e.v[v]-1];a.set(c,f*s)}return new ue(a,s,l)}toString(e){function r(c,f){return" ".repeat(f-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Mn(this.v))))+e+3;let l="";const a=this.t();for(let c=1;c<=a.ncols;c++)l+=Array.from(a.getcolref(c)).map(f=>r(f.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,r,s,l){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=l!=null&&l.length>0,c=s!=null&&s.length>0;if(a&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const f=this.t();let u=c?s.join(e)+`
`:"";for(let v=1;v<=f.ncols;v++)u=u+(a?l[v-1]+e:"")+f.getcolref(v).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,s,l){return Pl(kl(e*r,s,l),e,r)}static rand(e,r,s,l){return Pl(El(e*r,s,l),e,r)}static eye(e,r){r===void 0&&(r=e);const s=new Float64Array(e*r);for(let l=0;l<Math.min(e,r);l++)s[l*e+l]=1;return new ue(s,e,r)}static diagm(e){if(!Ae(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,s=new Float64Array(r*r);for(let l=0;l<r;l++)s[l*r+l]=e.v[l];return new ue(s,r,r)}static zeros(e,r){return r===void 0&&(r=e),new ue(new Float64Array(e*r),e,r)}static ones(e,r){return ue.fill(1,e,r)}static fill(e,r,s){s===void 0&&(s=r);const l=new Float64Array(r*s);for(let a=0;a<l.length;a++)l[a]=e;return new ue(l,r,s)}static outer(e,r,s){if(Array.isArray(e)&&(e=Ke(e)),Array.isArray(r)&&(r=Ke(r)),!Ae(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ae(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=ue.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],f=l.getcolref(a+1);for(let u=0;u<e.length;u++)f[u]=s(e.v[u],c)}return l}static parseCSV(e,r,s,l){function a(p){return p.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let f=e.split(/\n/),u=[],v=0;const d=f[0].split(r);(s||s===void 0&&a(d))&&(u=d,v=1),f=f.filter(p=>p.trim().length>1);let h=[],g=0;l&&(g=1);const m=f.length-v,_=d.length-g;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(_<1)throw Error("Data file should contain at least 1 column with values.");const b=ue.zeros(_,m);for(let p=v;p<m+v;p++){const w=f[p].split(r);let M;if(l?(h[p-v]=w[0],M=w.slice(1).map(y=>Number.parseFloat(y.trim().replace(c,".")))):M=w.map(y=>Number.parseFloat(y.trim().replace(c,"."))),M.some(y=>Number.isNaN(y)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(M.length!=_)throw Error("Wrong number of values in row #"+p);b.v.set(new Float64Array(M),(p-v)*_)}return{values:b.t(),header:u,labels:h,sep:r,dec:c}}}function Ae(t){return t&&t.constructor===he}function Ke(t){return new he(new Float64Array(t))}class he{static valuesConstructor=Float64Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new qe.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=l+1,s=s+1);return new qe(r.subarray(0,s))}filter(e){const r=new he.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=this.v[l],s=s+1);return new he(r.subarray(0,s))}shuffle(){return new he(Il(this.v))}sort(e){return new he(Gs(this.v,e))}sortind(e){return new qe(zl(this.v,e))}rep(e){return Ll(this,e)}repeach(e){return Rl(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=qe.seq(1,this.length)),Ht(r)||(r=Kt(r));const s=r.length;if(Wn(r)<1||Mn(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<r.length;l++){const a=r.v[l];this.v[a-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=Kt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?qe.bool2ind(e):Kt(e)),!Ht(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=he.zeros(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new he(this.v.slice(e-1,r))}copy(){return new he(this.v.slice())}dot(e){return e===void 0&&(e=this),Us(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Ae(e))return new he(Ys(this.v,e.v,r));if(Bs(e))return new he(Ws(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e){const r=this.v.length,s=he.zeros(r);for(let l=0;l<r;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new he.valuesConstructor(r);let l=0;for(const a of e)typeof a=="number"?(s[l]=a,l+=1):(s.set(Ae(a)?a.v:new he.valuesConstructor(a),l),l+=typeof a=="number"?1:a.length);return new he(s)}static seq(e,r,s){return Tl(e,r,s,he)}static randn(e,r,s){return kl(e,r,s)}static rand(e,r,s){return El(e,r,s)}static zeros(e){return new he(new he.valuesConstructor(e))}static ones(e){return he.fill(1,e)}static fill(e,r){const s=new he.valuesConstructor(r);for(let l=0;l<s.length;l++)s[l]=e;return new he(s)}}function Ht(t){return t.constructor===qe}function Kt(t){return new qe(new Int32Array(t))}class qe{static valuesConstructor=Int32Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new qe.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=l+1,s=s+1);return new qe(r.subarray(0,s))}filter(e){const r=new qe.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=this.v[l],s=s+1);return new qe(r.subarray(0,s))}shuffle(){return new qe(Il(this.v))}sort(e){return new qe(Gs(this.v,e))}sortind(e){return new qe(zl(this.v,e))}rep(e){return Ll(this,e)}repeach(e){return Rl(this,e)}subset(e){if(typeof e=="number"&&(e=Kt([e])),Array.isArray(e)&&(e=Kt(e)),!Ht(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=new qe.valuesConstructor(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new qe(s)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new qe(this.v.slice(e-1,r))}static seq(e,r,s){return Tl(e,r,s,qe)}static ones(e){return qe.fill(1,e)}static fill(e,r){const s=new qe.valuesConstructor(r);for(let l=0;l<s.length;l++)s[l]=e;return new qe(s)}static bool2ind(e){let r=0;const s=new qe.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[r]=l+1,r=r+1);return new qe(s.subarray(0,r))}}function Tl(t,e,r,s){r===void 0&&(r=t<=e?1:-1);const l=Math.floor((e-t)/r)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(l);for(let c=0;c<l;c++)a[c]=t+c*r;return new s(a)}function Ll(t,e){const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let l=1;l<=e;l++)for(let a=0;a<t.length;a++)s[(l-1)*t.length+a]=t.v[a];return new t.constructor(s)}function Rl(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let l=0;l<t.length;l++)for(let a=0;a<e;a++)s[l*e+a]=t.v[l];return new t.constructor(s)}function Ys(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new t.constructor(t.length);for(let l=0;l<t.length;l++)s[l]=r(t[l],e[l]);return s}function Ws(t,e,r){const s=new t.constructor(t.length);for(let l=0;l<t.length;l++)s[l]=r(t[l],e);return s}function Us(t,e,r,s,l,a){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const c=r,f=a,u=s,v=new t.constructor(c*f);for(let d=0;d<f;d++){const h=e.subarray(d*l,(d+1)*l),g=v.subarray(d*c,(d+1)*c);for(let m=0;m<u;m++){const _=h[m],b=t.subarray(m*r,(m+1)*r);for(let p=0;p<c;p++)g[p]+=b[p]*_}}return v}function Il(t){let e=t.slice(),r=e.length,s,l;for(;r;)l=Math.floor(Math.random()*r--),s=e[r],e[r]=e[l],e[l]=s;return e}function Gs(t,e=!1){return e?t.slice().sort((r,s)=>s-r):t.slice().sort((r,s)=>r-s)}function zl(t,e=!1){const r=qe.seq(1,t.length).v;return e?r.sort((s,l)=>t[l-1]-t[s-1]):r.sort((s,l)=>t[s-1]-t[l-1])}function gc(t,e,r){return 5*t*e+e+4*r*e+t*r}function pc(t,e){return 2+2*t+t*e+17*e}function De(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=t.ncols,l=t.ncomp;let a,c;switch(e){case"mX":a=2,c=s;break;case"sX":a=2+s,c=s;break;case"loadings":case"xloadings":a=2+2*s+(r-1)*s,c=s;break;case"P":a=2+2*s,c=l*s;break;case"eigenvals":case"xeigenvals":a=2+2*s+s*l,c=l;break;case"cq0":a=2+2*s+s*l+l,c=l;break;case"cNq":a=2+2*s+s*l+2*l,c=l;break;case"rq0":a=2+2*s+s*l+3*l,c=l;break;case"rNq":a=2+2*s+s*l+4*l,c=l;break;case"ch0":a=2+2*s+s*l+5*l,c=l;break;case"cNh":a=2+2*s+s*l+6*l,c=l;break;case"rh0":a=2+2*s+s*l+7*l,c=l;break;case"rNh":a=2+2*s+s*l+8*l,c=l;break;case"cr0":a=2+2*s+s*l+9*l,c=l;break;case"cNr":a=2+2*s+s*l+10*l,c=l;break;case"rr0":a=2+2*s+s*l+11*l,c=l;break;case"rNr":a=2+2*s+s*l+12*l,c=l;break;case"cg0":a=2+2*s+s*l+13*l,c=l;break;case"cNg":a=2+2*s+s*l+14*l,c=l;break;case"rg0":a=2+2*s+s*l+15*l,c=l;break;case"rNg":a=2+2*s+s*l+16*l,c=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function _n(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=t.ncols,l=t.nrows,a=t.ncomp;let c,f;switch(e){case"scores":case"xscores":c=(r-1)*l,f=l;break;case"T":c=0,f=l*a;break;case"hdist":c=l*a+(r-1)*l,f=l;break;case"qdist":c=2*l*a+(r-1)*l,f=l;break;case"xcumexpvar":case"cumexpvar":c=3*l*a,f=a;break;case"fdistc":c=3*l*a+a+(r-1)*l,f=l;break;case"fdistr":c=4*l*a+a+(r-1)*l,f=l;break;case"gdist":c=5*l*a+a+(r-1)*s,f=s;break;case"rdist":c=5*l*a+a+s*a+(r-1)*s,f=s;break;case"idistc":c=5*l*a+a+2*s*a+(r-1)*s,f=s;break;case"idistr":c=5*l*a+a+3*s*a+(r-1)*s,f=s;break;case"E":c=5*l*a+a+3*s*a+a*s,f=l*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+f)}function Zr(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let s=0;s<t.length;s++){const l=t[s];if(l<e||l>r)return!1}return!0}function Hs(t,e,r,s,l,a,c){if(!Gt(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const f=a&&Array.isArray(a)?a.length:0;if(!Zr(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!Zr(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const v=e.nrows-f,d=e.ncols-u;if(v<3||d<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(s===void 0&&(s=!0),l===void 0&&(l=!1),r===void 0&&(r=Math.min(v-1,d)),r<1||r>Math.min(v-1,d))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let g=null;if(f>0){const y=new Int32Array(a);g=t._malloc(y.length*y.BYTES_PER_ELEMENT),t.HEAP32.set(y,g/y.BYTES_PER_ELEMENT)}let m=null;if(u>0){const y=new Int32Array(c);m=t._malloc(y.length*y.BYTES_PER_ELEMENT),t.HEAP32.set(y,m/y.BYTES_PER_ELEMENT)}const _=pc(d,r),b=Float64Array,p=t._malloc(_*b.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,r,s,l,p,g,f,m,u])!==1)throw new Error("pca_fit: PCA failed.");const M=t.HEAPF64.slice(p/b.BYTES_PER_ELEMENT,p/b.BYTES_PER_ELEMENT+_);return t._free(h),t._free(p),g&&t._free(g),m&&t._free(m),{class:["pcamodel"],v:M,ncomp:r,nrows:v,ncols:d,exclvars:c,center:s,scale:l}}function Cr(t,e,r,s){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!Gt(r))throw new Error("pca_predict: X must be a matrix.");s||(s=[]);const l=s&&Array.isArray(s)?s.length:0;if(!Zr(s,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=r.nrows-l;let c=e.exclvars;r.ncols===e.ncols&&(c=[]);const f=c.length,u=r.ncols-f;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const v=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,v/r.v.BYTES_PER_ELEMENT);let d=null;if(l>0){const N=new Int32Array(s);d=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,d/N.BYTES_PER_ELEMENT)}let h=null;if(f>0){const N=new Int32Array(c);h=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,h/N.BYTES_PER_ELEMENT)}const g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const m=gc(a,e.ncomp,u),_=Float64Array,b=t._malloc(m*_.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[v,r.nrows,r.ncols,g,b,d,l,h,f])!==1)throw new Error("pca_predict: PCA prediction failed.");const w=t.HEAPF64.slice(b/_.BYTES_PER_ELEMENT,b/_.BYTES_PER_ELEMENT+m);t._free(v),t._free(g),t._free(b),d&&t._free(d),h&&t._free(h);const M={class:["pcares"],v:w,ncomp:e.ncomp,nrows:a,ncols:u,npred:u,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},y=new Array(e.ncomp),k=new Array(e.ncomp),S=new Array(e.ncomp),T=new Array(e.ncomp),C=new Array(e.ncomp),E=_n(M,"xcumexpvar");C[0]=1,T[0]=E[0],S[0]=1-E[0],y[0]=E[0],k[0]=1-E[0];for(let N=1;N<e.ncomp;N++)C[N]=N+1,T[N]=E[N],S[N]=1-E[N],y[N]=E[N]-E[N-1],k[N]=1-y[N];return M.stat={components:C,resvar:k,expvar:y,cumexpvar:T,cumresvar:S},M}function bc(t,e,r,s,l,a,c,f){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!Gt(r))throw new Error("pcapcv: X must be a matrix.");f||(f=[]);const u=f&&Array.isArray(f)?f.length:0;if(!Zr(f,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const v=e.exclvars.length,d=r.nrows-u,h=r.ncols-v;if(d<3)throw new Error("pcapcv: X must have at least 3 rows.");if(h!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(l)||l<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&l>d)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(s)||s<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const g=Math.min(a===0?d-2:d-Math.ceil(d/l)-1,h,e.ncomp);if(s>g)throw new Error('pcapcv: the value of "ncomp" is too large.');const m=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,m/r.v.BYTES_PER_ELEMENT);let _=null;if(u>0){const T=new Int32Array(f);_=t._malloc(T.length*T.BYTES_PER_ELEMENT),t.HEAP32.set(T,_/T.BYTES_PER_ELEMENT)}let b=null;if(v>0){const T=new Int32Array(e.exclvars);b=t._malloc(T.length*T.BYTES_PER_ELEMENT),t.HEAP32.set(T,b/T.BYTES_PER_ELEMENT)}const p=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const w=d*h,M=r.v.constructor,y=t._malloc(w*M.BYTES_PER_ELEMENT);if(t.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[m,r.nrows,r.ncols,s,e.center,e.scale,a,l,c,p,y,_,u,b,v])!==1)throw new Error("pcapcv: PCVPCA failed.");const S=t.HEAPF64.slice(y/M.BYTES_PER_ELEMENT,y/M.BYTES_PER_ELEMENT+w);return t._free(m),t._free(p),t._free(y),_&&t._free(_),b&&t._free(b),new ue(S,d,h)}function _c(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const wc=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:_c,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function yc(t,e,r){const s=wc.findIndex(h=>h.id==="trim");let l=0,a=t.ncols-e,c=0;for(let h=0;h<r.ml.length;h++){if(r.ml[h]!==s){c+=r.mpl_new[h];continue}l=Math.max(l,r.mp_new[c]),a=Math.min(a,r.mp_new[c+1]),c+=r.mpl_new[h]}const f=t.nrows,v=a-l+e,d=ue.zeros(f,v);return c=0,d.v.set(t.v.slice((e+l)*f,(e+a)*f),c),[l,a,d]}function xc(t,e,r,s,l=!0,a=!1){if(!Gt(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let c,f;if(l?(c=e.ncols,f=e.nrows-r):(c=e.nrows,f=e.ncols-r),f!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+f+").");const u=s.ml,v=s.mpl_new,d=s.mp_new,h=v.reduce((S,T)=>S+T,0);if(!u||u.length<1||!v||v.length!==u.length||d.length!==h)throw new Error("prep_apply: wrong structure of the model object.");const g=u.length,m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const _=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,_/u.BYTES_PER_ELEMENT);const b=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,b/v.BYTES_PER_ELEMENT);const p=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAPF64.set(d,p/d.BYTES_PER_ELEMENT);const w=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[m,c,f,r,g,_,b,p,w,l])!==1)throw new Error("prep_apply: unexpected error.");const y=t.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(m),t._free(_),t._free(b),t._free(p),t._free(w);const k=new ue(y,e.nrows,e.ncols);if(a){const[S,T,C]=yc(k,r,s);return C}return k}function Ec(t,e,r,s){e===void 0&&(e=!0),r===void 0&&(r=!1),s===void 0&&(s=!1);function l(u,v,d,h){if(typeof v=="boolean")return v?u.apply(d,2):Ke([h]).rep(u.ncols);if(!Ae(v))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(v.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return v}const a=l(t,e,pn,0),c=l(t,r,yr,1),f=ue.zeros(t.nrows,t.ncols);for(let u=1;u<=t.ncols;u++){const v=t.getcolref(u),d=f.getcolref(u),h=a.v[u-1],g=1/c.v[u-1];for(let m=0;m<t.nrows;m++)d[m]=(v[m]-h)*g}return s?[f,a,c]:f}function Fl(t,e,r){return t<e?["regular","in"]:t>r?["outlier","out"]:["extreme","out"]}function ql(t,e,r,s,l,a,c,f){if(!f||f.length===0)return[0,0];let u=0,v=0;for(let d of f){const h=t[d],[g,m]=Fl(h,e,r);a[g]+=1,c[m]+=1,s[d]=g,l[d]=m,u=u+(m==="in"),v=v+(m!=="in")}return[u,v]}function Jr(t,e,r,s,l,a,c,f,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let v=0,d=0;for(let D of u){const F=t[D],[A,q]=Fl(F,r,s);f[q]+=1,l[D]="alien",c.alien+=1,a[D]=q,v=v+(q!=="in"),d=d+(q==="in")}const h=u.slice();h.sort((D,F)=>t[D]-t[F]);let g=h.length;const m=h.map(D=>t[D]);let _=-1,b=0,p=0,w=0,M=0;for(;_<0;)b>0&&(l[h[g-1]]="external",c.alien=c.alien-1,c.external=c.external+1,g=g-1,h.pop(),m.pop()),p=pn(m),w=xr(m),M=w/(p*p),_=4-2*e*M,b=b+1;const y=(2+Math.sqrt(_))/M,k=y-e,S=p/y,T=r/S,C=1-2*(e+k)*(e+3*k)/(3*(e+2*k)**2),E=(C-1)*(1-3*C),N=(e+2*k)/(e+k)**2,j=1+C*N*(C-1-.5*(2-C)*E*N),P=C*Math.sqrt(2*N)*(1+.5*E*N),z=Ur((Math.pow(T/(e+k),C)-j)/P);return[v,d,z,k,S,C,j,P,e,p]}function Ol(t,e,r,s,l){const a=t.ncomp,c=t.nrows;let f,u,v;l?(f=l.members.length,u=l.strangers.length,v=0):(l={members:[],strangers:[],unknown:Xt(0,c-1)},f=0,u=0,v=c);const d=new Array(a),h=new Array(a),g=new Array(a),m=new Array(a),_=new Array(a),b=new Array(a),p=new Array(a),w=e==="robust"?t.rNq:t.cNq,M=e==="robust"?t.rNh:t.cNh;for(let y=0;y<a;y++){const k=M[y]+w[y],S=_n(t,e==="robust"?"fdistr":"fdistc",y+1),T=new Array(c),C=new Array(c),E={regular:0,extreme:0,outlier:0,alien:0,external:0},N={in:0,out:0},[j,P]=ql(S,r[y],s[y],C,T,E,N,l.members),[z,D,F,A,q,W,G,K,oe,se]=Jr(S,k,r[y],s[y],C,T,E,N,l.strangers);v>0&&Jr(S,k,r[y],s[y],C,T,E,N,l.unknown),h[y]=j>0?j/(j+P):0,g[y]=z>0?z/(z+D):0,m[y]=1-F,_[y]=Math.sqrt(h[y]*g[y]),b[y]=j>0&&z>0?(j+z)/(j+z+D+P):0,p[y]=y+1,d[y]={f:S,decs:T,rols:C,decsNum:N,rolsNum:E,TP:j,FN:P,TN:z,FP:D,beta:F,s:A,f0:q,hz:W,Mz:G,Sz:K,k:oe,m:se}}return{class:["simcares"],classes:t.classes,classNames:t.classNames,ind:l,nMembers:f,nStrangers:u,nUnknown:v,v:d,nrows:t.nrows,stat:{sensitivity:h,specificity:g,selectivity:m,efficiency:_,accuracy:b,components:p}}}function kc(t,e,r,s,l,a){(!a||!Array.isArray(a))&&(a=[]);let c=t.exclvars;(!c||!Array.isArray(c))&&(c=[]);const f=s.values.nrows,u=a.length,v=f-u,d=e.ncomp,h=_n(r.pca,"qdist",d),g=_n(r.pca,"hdist",d),m=e.limType==="classic"?"c":"r",_=_n(r.pca,"fdist"+m,d),b=De(t,m+"Nh")[d-1],p=De(t,m+"Nq")[d-1],w=De(t,m+"h0")[d-1],M=De(t,m+"q0")[d-1],y=b+p,k=r.simca.v[d-1],S=s.sep,T=r.simca.classes&&r.simca.classes.length===v,C=T?["","","","",""]:["","","",""];let E="";if(E+=["Reference classes:",T?"provided":"not provided",...C].join(S)+`
`,E+=["Number of components:",d,...C].join(S)+`
`,E+=["Alpha:",(e.alpha/100).toFixed(3),...C].join(S)+`
`,E+=["Limits estimator:",e.limType,...C].join(S)+`
`,E+=`
`,E+=["Nh:",b,...C].join(S)+`
`,E+=["Nq:",p,...C].join(S)+`
`,E+=["Nf:",y,...C].join(S)+`
`,E+=`
`,E+=["F crit (extremes):",e.eCrit[d-1],...C].join(S)+`
`,E+=["F crit (outliers):",e.oCrit[d-1],...C].join(S)+`
`,E+=`
`,c.length>0&&(E+=["Number of excluded variables:",c.length,...C].join(S)+`
`,E+=["Indices of excluded variables:",Rc(c),...C].join(S)+`
`,E+=`
`),E+=["Objects:",f,...C].join(S)+`
`,E+=["In:",k.decsNum.in,...C].join(S)+`
`,E+=["Out:",k.decsNum.out,...C].join(S)+`
`,E+=["Excluded:",u,...C].join(S)+`
`,r.simca.nMembers>0&&(E+=`
`,E+=["Members:",r.simca.nMembers,...C].join(S)+`
`,E+=["Regular:",k.rolsNum.regular,...C].join(S)+`
`,E+=["Extreme:",k.rolsNum.extreme,...C].join(S)+`
`,E+=["Outliers:",k.rolsNum.outlier,...C].join(S)+`
`,E+=["Sensitivity:",r.simca.stat.sensitivity[d-1],...C].join(S)+`
`),r.simca.nStrangers>0&&(E+=`
`,E+=["Strangers:",r.simca.nStrangers,...C].join(S)+`
`,E+=["In:",k.decsNum.in-k.rolsNum.regular,...C].join(S)+`
`,E+=["Aliens:",k.rolsNum.alien,...C].join(S)+`
`,E+=["External:",k.rolsNum.external,...C].join(S)+`
`,E+=["Specificity:",r.simca.stat.specificity[d-1],...C].join(S)+`
`,E+=["Selectivity:",r.simca.stat.selectivity[d-1],...C].join(S)+`
`,E+=`
`,E+=["Beta:",k.beta,...C].join(S)+`
`,E+=["Non-centrality (s):",k.s,...C].join(S)+`
`,E+=["Scaling (f0):",k.f0,...C].join(S)+`
`,r.simca.nMembers>0)){const F=k.TP/(k.TP+k.FP),A=r.simca.stat.sensitivity[d-1],q=1-r.simca.stat.specificity[d-1],W=2*F*A/(F+A),G=A/q,K=(1-A)/(1-q);E+=`
`,E+=["Efficiency:",r.simca.stat.efficiency[d-1],...C].join(S)+`
`,E+=["Accuracy:",r.simca.stat.accuracy[d-1],...C].join(S)+`
`,E+=["Precision:",F,...C].join(S)+`
`,E+=["F1-score:",W,...C].join(S)+`
`,E+=["PLR:",G,...C].join(S)+`
`,E+=["NLR:",K,...C].join(S)+`
`}E+=`
`,E+=["","object","class","role","decision","h/h0","q/q0","f"].join(S)+`
`;let N=0;k.rols?k.rols:new Array(f).fill("-");for(let F=0;F<f;F++){if(u>0&&a.includes(F)){E+=["",s.objlabels[F],"-","removed","-","-","-","-"].join(S)+`
`;continue}E+=["",s.objlabels[F],r.pca.classes[N],k.rols[N],k.decs[N],g[N]/w,h[N]/M,_[N]].join(S)+`
`,N=N+1}E+=`
`,s.dec!=="."&&(E=E.replace(/\./g,s.dec)),E=["Target class:",e.className,...C].join(S)+`
`+E,E=["Data filename:",s.fileName,...C].join(S)+`
`+E;let j=["DD-SIMCA results ("+l+")","https://mda.tools/ddsimca/",...C].join(S)+`

`;const P=new Blob([j+E],{type:"text/csv"}),z=window.URL.createObjectURL(P),D=document.createElement("a");D.setAttribute("href",z),D.setAttribute("download",`ddsimca-results-${l}.csv`),D.click()}function Cc(t,e,r){r&&(t.prep=r);const s=new Blob([JSON.stringify({pca:t,simca:e},Qr)],{type:"application/json"}),l=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download","ddsimca-model.json"),a.click()}class Ks{#e;get outcomes(){return o(this.#e)}set outcomes(e){J(this.#e,e)}constructor(e,r,s,l,a,c,f){this.d=e,this.ind=r,this.objlabels=s,this.objindices=l,this.classes=a,this.classNames=c,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,this.#e=R(()=>f.oCrit&&f.eCrit?this.getOutcomes(f):null)}getOutcomes(e){const r=this.d.apply(N=>N/e.f0*e.Nf).v,s=new Array(this.nrows),l=new Array(this.nrows),a={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[f,u]=ql(r,e.eCrit,e.oCrit,l,s,a,c,this.ind.members),[v,d,h,g,m,_,b,p,w,M]=Jr(r,e.Nf,e.eCrit,e.oCrit,l,s,a,c,this.ind.strangers);this.nUnknown>0&&Jr(r,e.Nf,e.eCrit,e.oCrit,l,s,a,c,this.ind.unknown);const y=f>0?f/(f+u):0,k=v>0?v/(v+d):0,S=1-h,T=Math.sqrt(y*k),C=f>0&&v>0?(f+v)/(f+v+d+u):0,E={sensitivity:y,specificity:k,selectivity:S,efficiency:T,accuracy:C};return{Nf:e.Nf,f:r,decs:s,rols:l,decsNum:c,rolsNum:a,TP:f,FN:u,TN:v,FP:d,beta:h,s:g,f0:m,hz:_,Mz:b,Sz:p,k:w,m:M,stat:E}}toJSON(){return null}static fromJSON(e){return new Ks(...e)}}class Un{#e;get alpha(){return o(this.#e)}set alpha(e){J(this.#e,e,!0)}#t;get gamma(){return o(this.#t)}set gamma(e){J(this.#t,e,!0)}#n;get limType(){return o(this.#n)}set limType(e){J(this.#n,e,!0)}#r;get Nf(){return o(this.#r)}set Nf(e){J(this.#r,e)}#i;get f0(){return o(this.#i)}set f0(e){J(this.#i,e)}#o;get eConfLim(){return o(this.#o)}set eConfLim(e){J(this.#o,e)}#s;get oConfLim(){return o(this.#s)}set oConfLim(e){J(this.#s,e)}#l;get eCrit(){return o(this.#l)}set eCrit(e){J(this.#l,e)}#a;get oCrit(){return o(this.#a)}set oCrit(e){J(this.#a,e)}constructor(e,r,s,l,a,c,f,u,v,d,h,g,m,_,b,p="nimca-model"){this.mX=r,this.sX=s,this.nrows=l,this.ncols=a,this.className=e,this.Nfc=c,this.Nfr=f,this.f0c=u,this.f0r=v,this.hash=d,this.class=["nimcamodel"],this.fileName=p,this.center=_,this.scale=b,this.#e=ie(We(h)),this.#t=ie(We(g)),this.#n=ie(We(m)),this.#r=R(()=>this.limType==="classic"?this.Nfc:this.Nfr),this.#i=R(()=>this.limType==="classic"?this.f0c:this.f0r),this.#o=R(()=>1-Number.parseFloat(this.alpha)/100),this.#s=R(()=>Math.pow(1-this.gamma/100,1/l)),this.#l=R(()=>bn(this.eConfLim,this.Nf)),this.#a=R(()=>bn(this.oConfLim,this.Nf))}predict(e){if(!e.values||!Gt(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=Un.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let l=0;l<e.classes.length;l++)e.classes[l]===this.className?s.members.push(l):s.strangers.push(l);else s.unknown=Xt(0,e.values.nrows-1);return new Ks(r,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r,s,l={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let a=e.values;const c=e.classNames[0];if(!Gt(a))throw new Error("nimca.fit: X must be a matrix.");const f=r?a.apply(pn,2):he.zeros(a.ncols),u=s?a.apply(yr,2):he.ones(a.ncols),v=Un.getDistance(a,f,u),d=pn(v),h=xr(v);let g=Math.round(2*d*d/h);g<1&&(g=1),g>250&&(g=250);const m=Ki(v),_=Xi(v),b=_/m;let p;b>2.685592117?p=1:b<.194565995?p=100:p=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/b),1.185785)));const w=.5*p*(m/bn(.5,p)+_/(bn(.75,p)-bn(.25,p)));return new Un(c,f,u,a.nrows,a.ncols,g,p,d,w,Sr(),l.alpha,l.gamma,l.limType,r,s)}static fromJSON(e){const{__type:r,mX:s,sX:l,nrows:a,ncols:c,className:f,Nfc:u,Nfr:v,f0c:d,f0r:h,hash:g,alpha:m,gamma:_,limType:b,fileName:p,center:w,scale:M}=e;return new Un(f,s,l,a,c,u,v,d,h,g,m,_,b,w,M,p)}static getDistance(e,r,s){const l=Ec(e,r,s),a=l.nrows,c=l.ncols,f=he.zeros(a);for(let u=0;u<c;u++){const v=l.getcolref(u+1);for(let d=0;d<a;d++)f.v[d]+=v[d]**2}return f}}function Xt(t,e,r=1){const s=Math.round((e-t+1)/r),l=Array(s);for(let a=0;a<s;a++)l[a]=t+a*r;return l}function Sc(t,e){let r,s,l,a=[];if(e.length>0){const c=t.values.nrows,f=t.objindices,u=c-e.length;r=Array(u),s=Array(u),l=Array(u);let v=0;for(let d=0;d<c;d++)e.includes(d)||(r[v]=f[d],s[v]=t.classes[d],l[v]=t.objlabels[d],(a.length===0||!a.includes(s[v]))&&a.push(s[v]),v=v+1)}else r=t.objindices,l=t.objlabels,s=t.classes,a=t.classNames;return[r,l,s,a]}function Sr(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Xs(t,e,r,s,l=!1){const[a,c,f]=Sc(r,s),u=l&&e.prep&&e.prep.ml&&e.prep.ml.length>0?xc(t,r.values,0,e.prep,!1,!0):r.values,v=Cr(t,e,u,s);v.hash=Sr(),v.objindices=a,v.objlabels=c,v.classes=f,v.classNames=r.classNames,v.varlabels=r.varlabels,v.eigenvals=De(e,"eigenvals"),v.cNh=De(e,"cNh"),v.cNq=De(e,"cNq"),v.ch0=De(e,"ch0"),v.cq0=De(e,"cq0"),v.rNh=De(e,"rNh"),v.rNq=De(e,"rNq"),v.rh0=De(e,"rh0"),v.rq0=De(e,"rq0");const d=e.nrows;return v.T2lim=2*(d-1)/(d-2)*Cl(.95,2,d-2),v}function Ac(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function Ar(t){return t.some(e=>Number.isNaN(e))}function Gn(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Dl(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Nc(t,e,r,s,l,a,c,f=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let v=Dl(t);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");v=v.filter(A=>A.replaceAll(e,"").trim().length>0);const d=v[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,g;const m=r!=="no";(m||m===void 0&&Ar(firstRow))&&(g=d,h=1);const _=v.length-h;if(_<1)throw new Error("Data file should contain at least 1 row with values.");f===-1&&(f=_);let b,p,w,M=Array(_);s?(b=m?Gn(g[0]):"",w=Array(_),p=1):(b="",w=[],p=0);let y,k=[],S;l?(y=m?Gn(g[p]):"",S=Array(_),p=p+1):(y="",S=[]);const T=d.length-p;if(T<1)throw new Error("Data file should contain at least 1 column with values.");const C=ue.zeros(T,_);for(let A=h;A<_+h;A++){const q=A-h;M[q]=q;let W=v[A].split(e);if(s&&(w[q]=W[0],W.shift()),l){const K=W[0];S[q]=K,W.shift(),(k.length===0||k.indexOf(K)<0)&&k.push(K)}const G=u==="."?W.map((K,oe)=>Number.parseFloat(K.trim())):W.map((K,oe)=>Number.parseFloat(K.trim().replace(u,".")));if(G.some(K=>Number.isNaN(K)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(G.length!=T)throw new Error("Wrong number of values in row #"+A);C.v.set(new Float64Array(G),(A-h)*T)}if(!s||w.length!==_){w=Array(_);for(let A=0;A<_;A++)w[A]="O"+(A+1)}w=w.map(A=>Gn(A)),S=S.map(A=>Gn(A)),k=k.map(A=>Gn(A));let E,N=Array(T),j=Array(T);if(g&&g.length===T+p){E=g.map(A=>Gn(A)).slice(p);for(let A=0;A<T;A++)N[A]=A>=f?A-f:A,j[A]=A>=f?A-f+1:A+1}else{E=Array(T);for(let A=0;A<T;A++)N[A]=A>=f?A-f:A,E[A]=A>=f?"V"+(A-f+1):"Y"+(A+1),j[A]=A>=f?A-f+1:A+1}let P;if(r==="values"){if(P=u==="."?E.map((A,q)=>q<f?q:Number.parseFloat(A.trim())):E.map((A,q)=>q<f?q:Number.parseFloat(A.trim().replace(u,"."))),P.some(A=>Number.isNaN(A)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else P=j;Array.isArray(P)||(P=[]),a||(a=""),c||(c=""),a=P.length>0&&a.length>0?a:"Variables",c=P.length>0&&c.length>0?c:"";const z=a+(c.length>0?", "+c:""),D=P[1]<P[0];return{values:C.t(),nresp:f,header:r,hasLabels:s,hasClassNames:l,labelsVarname:b,classLabelsVarname:y,objlabels:w,objindices:M,varlabels:E,varvalues:P,varindices:N,varrev:D,classes:S,classNames:k,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:z}}function Mc(t){if(Ar(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let s=2;s<e;s++){let l=[];for(let v=1;v<t.length;v++)l.push(t[v][s]);const a=t[0][s],c=pn(l),f=yr(l),u=Math.abs((a-c)/f);r.push(u)}return r.every(s=>s>5)}function jc(t){const r=t[0].split(","),s=t[1].split(","),l=r.length,a=s.length,c=";",f=t[0].split(c),u=t[1].split(c),v=f.length,d=u.length;let h,g;if(l>1&&a>1&&l===a&&l>v)g=",",h=l;else if(v>1&&d>1&&v===d)g=c,h=v;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[g,g===","?".":",",h]}function Pc(t,e=0){const r=Dl(t),s=r.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,a,c]=jc(r),f=Math.min(c,5),u=Math.min(s,5);let v=r[0].split(l).length,d=r.slice(0,u).map(N=>N.split(l).slice(0,f));d=d.map(N=>N.map(j=>Gn(j)));const h=d.map(N=>Ac(N.slice(),a));for(let N=1;N<u;N++)if(Ar(h[N].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const g=Mc(h);let m=0;const _=g?1:0,b=_+1,p=d[_][0],w=d[b][0],M=h[_][0],y=h[b][0],k=h[_][1],S=h[b][1];let T=!1,C=!1;if(Number.isNaN(M)&&Number.isNaN(y)&&p!==w?(T=!0,m=m+1):Number.isNaN(k)&&Number.isNaN(S)&&p!==w&&(T=!0,C=!0,m=m+2),!C){const N=T?1:0,j=h[_][N],P=h[b][N];C=Ar([j,P]),m=m+C}let E="no";if(g){m>0?d[0].slice(m+e):d[e];const N=m>0?h[0].slice(m+e):h[e];E=Ar(N)?"labels":"values"}return[l,T,C,E,v]}function Tc(t){const e=t.values.t(),r=t.sep,s=t.dec;let l=null;t.header!=="no"&&(l=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),l&&t.hasClassNames&&(l=[t.classLabelsVarname,...l]),l&&t.hasLabels&&(l=[t.labelsVarname,...l]);const a=t.classes&&t.classes.length===e.ncols,c=t.objlabels&&t.objlabels.length===e.ncols;let f=l?l.join(r):"";for(let u=0;u<e.ncols;u++){let v=e.getcolref(u+1).join(r);s!=="."&&(v=v.replace(".",s)),a&&(v=t.classes[u]+t.sep+v),c&&(v=t.objlabels[u]+t.sep+v),f=f+`
`+v}return f=f+`
`,s!=="."&&(f=f.replace(/\./g,s)),f}function Zs(t,e){const r=Tc(t),s=new Blob([r],{type:"text/csv"}),l=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download",`${e}.csv`),a.click()}function Lc(t,e){if(!t)return;const r=t.nresp?t.nresp:0,s=t.values,l=t.varvalues,a=t.varlabels,c=t.varindices,f=s.nrows,u=s.ncols,v=u-e.length,d=ue.zeros(f,v),h=Array(v),g=Array(v),m=Array(v);let _=0;for(let b=0;b<r;b++){const p=f*b,w=f*_;d.v.set(s.v.slice(p,p+f),w),h[_]=l[b],g[_]=a[b],m[_]=c[b],_=_+1}for(let b=r;b<u;b++){if(e.includes(b-r))continue;const p=f*b,w=f*_;d.v.set(s.v.slice(p,p+f),w),h[_]=l[b],g[_]=a[b],m[_]=c[b],_=_+1}return{values:d,header:t.header,hasLabels:t.hasLabels,hasClassNames:t.hasClassNames,classNames:t.classNames,labelsVarname:t.labelsVarname,classLabelsVarname:t.classLabelsVarname,objlabels:t.objlabels,objindices:t.objindices,varlabels:g,varvalues:h,varindices:m,varrev:t.varrev,classes:t.classes,responses:t.responses,classNames:t.classNames,sep:t.sep,dec:t.dec,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits,varAxisTitle:t.varAxisTitle,fileName:t.fileName,nresp:r}}function Rc(t){if(!t.length)return"";t.sort((l,a)=>l-a);let e=[],r=t[0],s=r;for(let l=1;l<t.length;l++)t[l]===s+1?s=t[l]:(r===s?e.push(`${r}`):e.push(`${r}-${s}`),r=t[l],s=r);return r===s?e.push(`${r}`):e.push(`${r}-${s}`),e.join(" ")}function Qr(t,e){return Gt(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ae(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof Un?e.asJSON():e}function Ic(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return mc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Ke(e.v);if(e.__type==="NIMCA")return Un.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Js(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${s}${l}${a}${c}`}function lr(t){return!t||Object.keys(t).length<1}function Vl(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function $r(t,e,r){let s="";for(let l=0;l<e;l++){const a=t.getUint8(r++);if(a===0)break;s+=String.fromCharCode(a)}return s}function zc(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],l=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=t.getUint8(a);a+=1;const f=t.getUint8(a);if(a+=1,f===77)throw new Error("SPC file has old format which is not supported.");const u=f===75,v=t.getUint8(a);a+=1;const d=t.getInt8(a);a+=1;const h=t.getUint32(a,u);a+=4;const g=t.getFloat64(a,u);a+=8;const m=t.getFloat64(a,u);a+=8;const _=t.getUint32(a,u);a+=4;const b=t.getUint8(a);a+=1;const p=t.getUint8(a);a+=1;const w=t.getUint8(a);a+=1;const M=t.getUint8(a);a+=1;const y=t.getUint32(a,u);a+=4;const k=$r(t,9,a);a+=9;const S=$r(t,9,a);a+=9;const T=t.getUint16(a,u);a+=2;const C=Array.from({length:8},()=>{const re=t.getFloat32(a,u);return a+=4,re}),E=$r(t,130,a);a+=130;const N=$r(t,30,a);a+=30;const j=t.getUint32(a,u);a+=4;const[P,z,D,F,A,q,W,G]=Vl(c),K=b===255?r[31]:r[b],oe=b===255?e[31]:e[b],se=p<=26?s[p]:p>=128&&p<=131?l[p]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:P,TCGRAM:z,TMULTI:D,TRANDM:F,TORDRD:A,TALABS:q,TXYXYS:W,TXVALS:G},fexper:v,fexp:d,fnpts:h,ffirst:g,flast:m,fnsub:_,fxtype:b,fytype:p,fztype:w,fpost:M,fdate:y,fres:k,fsource:S,fpeakpt:T,fspare:C,fcmnt:E,fcatxt:N,flogoff:j,xaxisName:K,xaxisUnit:oe,yaxisName:se}}function Fc(t,e){const r=Vl(t.getUint8(e));e+=1;const s=t.getInt8(e);e+=1;const l=t.getUint16(e,!0);e+=2;const a=t.getFloat32(e,!0);e+=4;const c=t.getFloat32(e,!0);e+=4;const f=t.getFloat32(e,!0);e+=4;const u=t.getInt32(e,!0);e+=4;const v=t.getInt32(e,!0);e+=4;const d=t.getFloat32(e,!0);return e+=4,{flags:r,exp:s,index:l,time:a,next:c,noise:f,nPoints:u,nScans:v,wAxis:d}}async function Bl(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),s=await t.arrayBuffer(),l=new DataView(s);let a=0;const c=zc(l);a+=512;const f=c.fnpts;if(f<2)throw new Error(`Error reading SPC file (${t.name}).`);let u=new Array(f);if(c.ftflgs.TXVALS)for(let h=0;h<f;h++){const g=l.getFloat32(a,!0);a=a+4,u[h]=g}else{(c.flast-c.ffirst)/(f-1);for(let h=0;h<f;h++)u[h]=c.ffirst+h*c.flast}const v=new Float64Array(f*c.fnsub);for(let h=0;h<c.fnsub;h++){Fc(l,a),a=a+32;for(let g=0;g<f;g++){const m=l.getFloat32(a,!0);a=a+4,v[h*f+g]=m}}const d=[];return c.fnsub>1?Xt(1,c.fnsub).forEach(g=>{d.push(r+"_"+g)}):d.push(r),{hdr:c,xvalues:u,yvalues:v,objlabels:d}}async function qc(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let s=[],l=[];const a=await Bl(t[0]),c=a.xvalues.length;if(r.push(a.yvalues),s=s.concat(a.objlabels),l.push(a.hdr.fnsub),e>1)for(let _=1;_<e;_++){const b=await Bl(t[_]);if(b.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");r.push(b.yvalues),s=s.concat(b.objlabels),l.push(b.hdr.fnsub)}const f=l.reduce((_,b)=>_+b,0),u=new Float64Array(f*c);let v=0;for(let _=0;_<r.length;_++)u.set(r[_].slice(),v),v+=l[_]*c;const d=new ue(u,c,f),h=Xt(0,c-1),g=Xt(0,f-1),m=a.xvalues.map(_=>_.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:g,varlabels:m,varvalues:a.xvalues,varindices:h,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}const Oc=t=>t;function Dc(t,{delay:e=0,duration:r=400,easing:s=Oc}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:a=>`opacity: ${a*l}`}}var Vc=H('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function Bc(t,e){we(e,!0);let r=U(e,"isDark",3,!1);function s(h){h.key==="Escape"&&e.closeModal()}var l=Vc();Br("keydown",ps,s);let a;var c=V(l),f=V(c),u=V(f);u.__click=function(...h){e.closeModal?.apply(this,h)};var v=I(f,2),d=V(v);Nn(d,()=>e.children),le(()=>a=it(l,1,"drop svelte-oie633",null,a,{isdark:r()})),Ti(7,l,()=>Dc),L(t,l),ye()}tt(["click"]);var Yc=H('<sup style="color:red">β</sup>'),Wc=H('<li><button class="svelte-1josccy"> </button></li>'),Uc=H("<div><!></div>"),Gc=H('<div class="info-container svelte-1josccy"><!></div>'),Hc=H('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function Kc(t,e){we(e,!0);let r=U(e,"tabs",19,()=>[]),s=U(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let a=ie(!1),c=ie(void 0),f=ie("Current session "),u=ie(!1);function v(C){J(f,C,!0),J(u,!0),setTimeout(()=>{J(f,"Current session "),J(u,!1)},1e3)}function d(){J(a,!0)}function h(){J(a,!1)}function g(C){o(c).tab=C}function m(){const C=indexedDB.open(l,1);C.onsuccess=E=>{const j=E.target.result.transaction(e.appID,"readwrite");j.objectStore(e.appID).delete("session"),j.oncomplete=()=>{J(c,e.initSession(),!0),v("Session was reinitialzed.")},j.onerror=()=>console.error("Failed to session from DB.")}}function _(C,E){window.localStorage.removeItem(e.appID+"-blocked");const N=indexedDB.open(l,1);N.onsuccess=j=>{const D=j.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);D.put(C,"session"),D.put(Js(new Date),"session-update")}}function b(){new Promise((C,E)=>{const N=indexedDB.open(l,1);N.onsuccess=j=>{const F=j.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");F.onsuccess=()=>C(F.result),F.onerror=()=>E(F.error)}}).then(C=>{p(C),J(f,"Last session is restored "),J(u,!0),setTimeout(()=>{J(f,"Current session "),J(u,!1)},1500)}).catch(C=>{console.error(C),J(c,e.initSession(),!0)})}function p(C){if(!C||C==="undefined"){J(c,e.initSession(),!0);return}const E=JSON.parse(C,Ic);J(c,e.checkSession(E)?E:e.initSession(e.appID),!0)}function w(){const C=Js(new Date),E=e.appID+"-session-"+C+".json";o(c).date=C;const N=JSON.stringify(o(c),Qr),j=new Blob([N],{type:"text/json"}),P=window.URL.createObjectURL(j),z=document.createElement("a");z.setAttribute("href",P),z.setAttribute("download",E),z.click()}function M(C){const E=new FileReader;E.onload=()=>{p(E.result),C.target.value=""},E.readAsText(C.target.files[0])}function y(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&m()}Ui(()=>{const C=e.appID,E=indexedDB.open(l,1);E.onupgradeneeded=N=>{const j=N.target.result;j.objectStoreNames.contains(C)||j.createObjectStore(C)},E.onsuccess=N=>{b()}});var k=ce(),S=Z(k);{var T=C=>{var E=Hc(),N=V(E),j=V(N),P=V(j),z=I(P,2),D=V(z),F=I(D);{var A=Pe=>{var Se=Yc();L(Pe,Se)};Y(F,Pe=>{s()&&Pe(A)})}var q=I(z,2),W=V(q),G=I(j,2);Ge(G,21,r,Ze,(Pe,Se,Me)=>{var ot=Wc();let Le;var Xe=V(ot);Xe.__click=()=>g(Me),Xe.__keydown=()=>g(Me);var rt=V(Xe);le(()=>{Le=it(ot,1,"nav-item svelte-1josccy",null,Le,{selected:o(c).tab===Me}),ae(rt,o(Se).name)}),L(Pe,ot)});var K=I(N,2),oe=V(K);As(oe,()=>o(c).date,Pe=>{var Se=ce(),Me=Z(Se);Ge(Me,17,r,Ze,(ot,Le,Xe)=>{var rt=Uc();let Mt;var B=V(rt);Ms(B,()=>o(Le).component,(X,ee)=>{ee(X,{get WASM(){return e.WASM},get session(){return o(c)},backupSession:_})}),le(()=>Mt=it(rt,1,"tab-content svelte-1josccy",null,Mt,{hidden:o(c).tab!==Xe})),L(ot,rt)}),L(Pe,Se)});var se=I(K,2),re=V(se);let te;var Q=V(re),$=V(Q),ne=I(Q,2),fe=V(ne);fe.__change=M;var _e=I(ne,2);_e.__click=w;var me=I(_e,2);me.__click=y;var Ce=I(re,2),Ee=V(Ce);Ee.__click=d,Ee.__keydown=d;var Oe=I(Ee,2);Nn(Oe,()=>e.footer);var $e=I(se,2);{var et=Pe=>{Bc(Pe,{closeModal:h,children:(Se,Me)=>{var ot=Gc(),Le=V(ot);Nn(Le,()=>e.info),L(Se,ot)},$$slots:{default:!0}})};Y($e,Pe=>{o(a)&&Pe(et)})}le(()=>{O(P,"alt",e.appShortTitle),ae(D,e.appTitle),ae(W,e.appSlogan),te=it(re,1,"session svelte-1josccy",null,te,{"no-buttons":o(u)}),ae($,o(f))}),L(C,E)};Y(S,C=>{o(c)&&C(T)})}L(t,k),ye()}tt(["click","keydown","change"]);async function Yl(t,e,r=1,s="classic"){const l=e.calset.values,a=e.tarset.values,c=lr(e.altset)?null:e.altset.values,f=e.calset.classNames[0],u=l.ncols-e.varsExcluded.length,v=e.model.ncomp>u?u:e.model.ncomp;return t().then(d=>{const h=Hs(d,l,v,e.model.center,e.model.scale,[],e.varsExcluded),g=Cr(d,h,a);g.objindices=e.tarset.objindices,g.objlabels=e.tarset.objlabels,g.classes=e.tarset.classes,g.classNames=e.tarset.classNames,g.cNh=De(h,"cNh"),g.cNq=De(h,"cNq"),g.ch0=De(h,"ch0"),g.cq0=De(h,"cq0");let m={};c&&(m=Cr(d,h,c),m.objindices=e.altres.objindices,m.objlabels=e.altres.objlabels,m.classes=e.altres.classes,m.classNames=e.altres.classNames,m.cNh=De(h,"cNh"),m.cNq=De(h,"cNq"),m.ch0=De(h,"ch0"),m.cq0=De(h,"cq0")),h.hash=Sr(),h.varlabels=e.calset.varlabels.filter(C=>!e.varsExcluded.includes(C)),h.varindices=e.calset.varindices.filter(C=>!e.varsExcluded.includes(C)),h.varvalues=e.calset.varvalues.filter(C=>!e.varsExcluded.includes(C)),h.varvaluesName=e.calset.varvaluesName,h.varvaluesUnits=e.calset.varvaluesUnits,h.varrev=e.calset.varrev,h.header=e.calset.header,h.prep=[];const _=1-e.alpha/100,b=Math.pow(1-r/100,1/h.nrows),p=s.charAt(0),w=De(h,p+"Nh"),M=De(h,p+"Nq"),y=w.map((C,E)=>C+M[E]),k=y.map(C=>bn(_,C)),S=y.map(C=>bn(b,C)),T={ncomp:e.nComp,alpha:e.alpha,gamma:r,limType:s,Nf:y,eCrit:k,oCrit:S,className:f,hash:Sr()};e.currentRes={model:h,simca:T,tar:{pca:g,simca:Ol(g,s,k,S,{members:Xt(0,g.nrows-1),strangers:[]})},alt:m?{pca:m,simca:Ol(m,s,k,S,{members:[],strangers:Xt(0,m.nrows-1)})}:{}}}).catch(d=>{console.error(d)})}function Xc(t,e,r){let s=t.length;const l=Ke(t);let a=l.sort(),c=l.sortind(),f=-1,u=0,v=0,d=0,h=0;for(;f<0;)u>0&&(s=s-1,c=c.slice(1,s),a=a.slice(1,s)),v=pn(a),d=xr(a,!0),h=d/(v*v),f=4-2*r*h,u=u+1;const g=(2+Math.sqrt(f))/h,m=g-r,_=v/g,b=e/_,p=1-2*(r+m)*(r+3*m)/(3*(r+2*m)**2),w=(p-1)*(1-3*p),M=(r+2*m)/(r+m)**2,y=1+p*M*(p-1-.5*(2-p)*w*M),k=p*Math.sqrt(2*M)*(1+.5*w*M);return 1-Ur((Math.pow(b/(r+m),p)-y)/k)}function Wl(t,e,r,s,l=5){if(l<.01||l>50)throw new Error("getStat: wrong value for 'alpha' parameter.");let a,c,f,u,v;s?(v=s.ncompBest,a=s.sens,c=s.spec,f=s.eff,u=s.sel):(a=new Float64Array(t.ncomp),c=new Float64Array(t.ncomp),f=new Float64Array(t.ncomp),u=new Float64Array(t.ncomp));const d=De(t,"cNh"),h=De(t,"ch0"),g=De(t,"cNq"),m=De(t,"cq0"),_=new Float64Array(t.ncomp),b=new Float64Array(t.ncomp),p=new Float64Array(t.ncomp),w=new Float64Array(t.ncomp),M=new Float64Array(t.ncomp),y=new Float64Array(t.ncomp),k=new Float64Array(t.ncomp),S=new Float64Array(t.ncomp),T=1-l/100;for(let C=0;C<t.ncomp;C++){const E=d[C],N=h[C],j=g[C],P=m[C],z=E+j,D=bn(T,z);let F,A;F=_n(e,"qdist",C+1),A=_n(e,"hdist",C+1);let q=0;for(let W=0;W<e.nrows;W++){const G=A[W]/N*E+F[W]/P*j;q+=G<D}if(q=q/e.nrows,_[C]=q,M[C]=_[C]-a[v?v-1:C],!lr(r)){F=_n(r,"qdist",C+1),A=_n(r,"hdist",C+1);const W=Array(r.nrows);let G=0;for(let K=0;K<r.nrows;K++){const oe=A[K]/N*E+F[K]/P*j;G+=oe>=D,W[K]=oe}G=G/r.nrows,b[C]=G,p[C]=Xc(W,D,z),y[C]=b[C]-c[v?v-1:C],k[C]=p[C]-u[v?v-1:C],w[C]=Math.sqrt(q*G),S[C]=w[C]-f[v?v-1:C]}}return{alpha:l,ncomp:t.ncomp,sens:{diff:M,val:_},spec:{diff:y,val:b},sel:{diff:k,val:p},eff:{diff:S,val:w}}}async function Zc(t,e){const{varInd:r,nComp:s,Xcal:l,Xtar:a,Xalt:c,center:f,scale:u,statsCurrent:v,alpha:d}=e;return t().then(h=>{const g=Hs(h,l,s,f,u,[],r),m=Cr(h,g,a),_=c?Cr(h,g,c):{};return Wl(g,m,_,v,d)}).catch(h=>{console.error(h)})}function Jc(t,e,r,s,l){if(!r&&!e)throw new Error('One of the two arguments "nInt" or "intSize" must be specified.');if(e?r=Math.round(t/e):e=Math.round(t/r),!Number.isInteger(e)||e<2||e>t)throw new Error('Wrong value for "nInt" or "intSize" arguments.');if(!Number.isInteger(r)||r<1||r>t/2)throw new Error('Wrong value for "nInt" or "intSize" arguments.');const a=Array(e),c=Array(e),f=Array(e),u=Array(e),v=Array(e),d=Array(e),h=t%e,g=Math.trunc(t/e);let m,_,b;if(e===t)for(r=1,m=0;m<e;m++)a[m]=m,c[m]=m,d[m]=l[m];else if(h===0)for(m=0;m<e;m++)_=m*g,a[m]=_,c[m]=_+g-1,d[m]=s[a[m]]+"–"+s[c[m]];else{let N=0;for(m=0;m<h;m++)a[m]=N,N+=g+1,c[m]=N-1,d[m]=s[a[m]]+"—"+s[c[m]];for(m=h;m<e;m++)a[m]=N,N+=g,c[m]=N-1,d[m]=s[a[m]]+"—"+s[c[m]]}let p,w,M,y,k,S,T,C,E=[0,1];for(m=0;m<e;m++)_=a[m],M=s[_],b=c[m],y=s[b],m>0&&(w=c[m-1],S=s[w],T=(M-S)/2),m<e-1&&(p=a[m+1],k=s[p],C=(k-y)/2),m===0&&(T=C,E[0]=M-2*T),m===e-1&&(T=C,E[1]=y+2*C),u[m]=M-T,v[m]=y-M+T+C,f[m]=(M+y)/2;return{nVars:t,nInt:e,intSize:r,intLeftIndices:a,intRightIndices:c,intLabels:d,limX:E,left:u,width:v,mid:f}}function Qc(t){const e=[4,6,7,8,9].filter(l=>l<=t&&t%l===0);let r;return t>=10&&t<20?r=[t]:t>=20&&t<30?r=[10,t]:t>=30&&t<=50?r=[10,20,t]:t>50&&t<70?r=[10,20,30]:t>=70&&t<90?r=[10,20,30,40]:t>=90?r=[10,20,30,40,50]:t===5?r=[5]:r=[],[...e,...r].sort((l,a)=>l-a)}var $c=H('<button tabindex="0" class="button svelte-1to1iow"> </button>');function st(t,e){let r=U(e,"text",3,"button");var s=$c();s.__click=function(...a){e.onclick?.apply(this,a)};var l=V(s);le(()=>ae(l,r())),L(t,s)}tt(["click"]);var eu=H('<button tabindex="0"></button>');function Qs(t,e){U(e,"disable",3,!1);var r=eu();r.__click=function(...s){e.onclick?.apply(this,s)},le(()=>{O(r,"title",e.title),O(r,"aria-label",e.title),O(r,"alt",e.title),it(r,1,`button ${e.className??""}`,"svelte-qbt64")}),L(t,r)}tt(["click"]);function ar(t,e){let r=U(e,"title",3,"Reset");Qs(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function tu(t,e){let r=U(e,"title",3,"Undo");Qs(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function nu(t,e){let r=U(e,"title",3,"Download");Qs(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function ru(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var su=H('<span class="label svelte-1bhp5bp"> </span>'),ou=H("<div><!> <!></div>");function pe(t,e){let r=U(e,"label",3,null),s=U(e,"name",3,""),l=U(e,"status",3,""),a=U(e,"colors",3,""),c=U(e,"labelWidth",3,12);var f=ou(),u=V(f);{var v=h=>{var g=su(),m=V(g);le(()=>{Wt(g,`flex-basis:${c()??""}ch;`),ae(m,r())}),L(h,g)};Y(u,h=>{r()&&h(v)})}var d=I(u,2);Nn(d,()=>e.children??kt),le(()=>{it(f,1,`control-element ${s()??""} ${l()??""}`,"svelte-1bhp5bp"),Wt(f,a())}),L(t,f)}var lu=H('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function Ul(t,e){we(e,!0);let r=U(e,"min",7,0),s=U(e,"max",3,100),l=U(e,"value",31,()=>We(r())),a=U(e,"decNum",3,1),c=U(e,"step",19,()=>+((s()-r())/100).toFixed(4)),f=U(e,"onchange",3,null);ke(()=>{l()<r()&&(l(r()),f()&&f()(l())),l()>s()&&(l(s()),f()&&f()(l())),r()>s()&&r(s())});let u=ie(void 0),v=ie(void 0),d=ie(!1);const h=j=>{const P=r()+j*(s()-r());return+(Math.round(P/c())*c()).toFixed(4)},g=j=>{const P=o(u).getBoundingClientRect(),z=o(v).getBoundingClientRect(),D=P.x,F=z.x+z.width;return(j.clientX-D)/(F-D)},m=j=>{const P=g(j);P<0||P>1||J(d,P*100>o(y)-5&&P*100<o(y)+5,!0)},_=j=>{J(d,!1)},b=j=>{J(d,!1);const P=g(j);P<0||P>1||(l(h(P)),f()&&f()(l()))},p=j=>{let P=l()+c()*j.deltaY*.5;P<r()&&(P=r()),P>s()&&(P=s()),l(+(Math.round(P/c())*c()).toFixed(4)),j.preventDefault(),f()&&f()(l())},w=j=>{if(!o(d))return;const P=g(j);P<0||P>1||(l(h(P)),f()&&f()(l()))},M=j=>{if(j.key==="ArrowLeft"){l(l()-c()<r()?r():l()-c()),f()&&f()(l());return}if(j.key==="ArrowRight"){l(l()+c()>s()?s():l()+c()),f()&&f()(l());return}},y=R(()=>r()===s()?100:(l()-r())/(s()-r())*100);var k=lu();k.__keydown=M,k.__mousemove=w,k.__mousedown=m,k.__mouseup=b,k.__touchmove=w,k.__touchstart=m,k.__touchend=b;var S=V(k);let T;var C=V(S);let E;var N=V(C);_r(S,j=>J(u,j),()=>o(u)),_r(k,j=>J(v,j),()=>o(v)),le(j=>{O(k,"aria-valuenow",l()),O(k,"aria-valuemin",r()),O(k,"aria-valuemax",s()),T=it(S,1,"range-slider svelte-7wycr",null,T,{"range-slider_right":o(y)<50}),Wt(S,`width:${o(y)??""}%`),E=it(C,1,"range-value svelte-7wycr",null,E,{"range-value_right":o(y)<50}),ae(N,j)},[()=>l().toFixed(a())]),Br("mousewheel",k,p),Br("mouseleave",k,_),Br("touchcancel",k,_),L(t,k),ye()}tt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]),tt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var au=H('<button tabindex="-1"><!></button>'),iu=H('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function Rt(t,e){we(e,!0);let r=U(e,"value",31,()=>We(e.options[0])),s=U(e,"className",3,"");const l=u=>{if(u.key==="ArrowLeft"){const v=e.options.findIndex(d=>d===r());v>0&&r(e.options[v-1]);return}if(u.key==="ArrowRight"){const v=e.options.findIndex(d=>d===r());v<e.options.length-1&&r(e.options[v+1]);return}};var a=iu(),c=Z(a);c.__keydown=l,Ge(c,20,()=>e.options,u=>u,(u,v)=>{var d=au();d.__click=()=>r(v);let h;var g=V(d);wt(g,()=>v),le(m=>h=it(d,1,`option option_${m??""}`,"svelte-bifhtc",h,{selected:v==r()}),[()=>v.toString().replace(".","_")]),L(u,d)});var f=I(c,2);le(()=>it(c,1,`selector ${s()??""}`,"svelte-bifhtc")),dl(f,r),L(t,a),ye()}tt(["keydown","click"]);function Nr(t,e){we(e,!0);let r=U(e,"options",19,()=>["no","yes"]),s=U(e,"value",15,!1),l=ie(!0);const a=R(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());ke(()=>J(l,s()?r()[1]:r()[0],!0)),ke(()=>s(o(l)===r()[1]));var c=ce(),f=Z(c);{var u=v=>{Rt(v,{get options(){return o(a)},get value(){return o(l)},set value(d){J(l,d,!0)}})};Y(f,v=>{o(a)&&v(u)})}L(t,c),ye()}var cu=H('<input type="file" multiple class="svelte-xoa0sf"/>'),uu=H('<input type="file" class="svelte-xoa0sf"/>'),fu=H('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function Gl(t,e){we(e,!0);let r=U(e,"file",15),s=U(e,"message",3,"Select CSV file with dataset"),l=U(e,"acceptType",3,".csv"),a=U(e,"multiple",3,!1),c=ie(void 0);function f(y){o(c)&&o(c).files.length>0?r(o(c).files.length===1?o(c).files[0]:o(c).files):r(null)}function u(y){(y.type==="click"||y.type==="keydown"&&(y.code==="Space"||y.code==="Enter"))&&o(c).click()}function v(y){o(c).value=null,r(null)}var d=fu(),h=Z(d);h.__keydown=u,h.__click=u;let g;var m=V(h),_=I(m);{var b=y=>{var k=cu();k.__change=f,_r(k,S=>J(c,S),()=>o(c)),le(()=>O(k,"accept",l())),L(y,k)},p=y=>{var k=uu();k.__change=f,_r(k,S=>J(c,S),()=>o(c)),le(()=>O(k,"accept",l())),L(y,k)};Y(_,y=>{a()?y(b):y(p,!1)})}var w=I(h,2);{var M=y=>{ar(y,{onclick:v})};Y(w,y=>{r()&&y(M)})}le(()=>{g=it(h,1,"file-selector svelte-xoa0sf",null,g,{selected:r()}),ae(m,`${(r()?r().length>1?`Selected ${r().length} files`:r().name:s())??""} `)}),L(t,d),ye()}tt(["keydown","click","change"]);var vu=H('<div class="error-message svelte-11e14eb"> </div>'),du=H('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function Hl(t,e){we(e,!0);let r=U(e,"value",15,""),s=U(e,"className",3,""),l=U(e,"placeholder",3,""),a=U(e,"maxLength",3,25),c=U(e,"validator",3,null),f=ie("");function u(){c()&&J(f,c()(r()),!0)}var v=du();let d;var h=V(v);h.__input=u;var g=I(h,2);{var m=_=>{var b=vu(),p=V(b);le(()=>ae(p,o(f))),L(_,b)};Y(g,_=>{o(f)&&o(f).length>0&&_(m)})}le(()=>{d=it(v,1,`textinput ${s()??""}`,"svelte-11e14eb",d,{error:o(f)&&o(f).length>0}),O(h,"placeholder",l()),O(h,"maxlength",a())}),dl(h,r),L(t,v),ye()}tt(["input"]);var hu=H('<div class="spinner svelte-wlgijz"></div>');function $s(t){var e=hu();L(t,e)}tt(["keydown","click"]),tt(["keydown","click"]);var mu=H("<h2> </h2>"),gu=H("<!> <!>",1),pu=H('<div class="widget"><!></div>');function bu(t,e){we(e,!0);let r=U(e,"title",3,""),s=U(e,"value",15),l=U(e,"labelWidth",3,13);function a(v){const d={};for(const h of Object.keys(v))d[h]=v[h].default;return d}ke(()=>{!s()&&e.options&&s(a(e.options))});var c=pu(),f=V(c);{var u=v=>{var d=gu(),h=Z(d);{var g=_=>{pe(_,{children:(b,p)=>{var w=mu(),M=V(w);le(()=>ae(M,r())),L(b,w)},$$slots:{default:!0}})};Y(h,_=>{r()&&_(g)})}var m=I(h,2);Ge(m,17,()=>Object.keys(e.options),Ze,(_,b)=>{const p=R(()=>e.options[o(b)]);var w=ce(),M=Z(w);{var y=k=>{pe(k,{get name(){return o(p).name},get label(){return o(p).label},get labelWidth(){return l()},children:(S,T)=>{var C=ce(),E=Z(C);Ms(E,()=>o(p).el,(N,j)=>{j(N,Fe(()=>o(p).props,{get value(){return s()[o(b)]},set value(P){s(s()[o(b)]=P,!0)}}))}),L(S,C)},$$slots:{default:!0}})};Y(M,k=>{o(p).hidden||k(y)})}L(_,w)}),L(v,d)};Y(f,v=>{s()&&v(u)})}L(t,c),ye()}var _u=H('<span style="font-weight:bold"> </span><br/>',1),wu=H('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),yu=H('<span class="file-size svelte-1uxd0r7"> </span>'),xu=H('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Eu(t,e){we(e,!0);let r=U(e,"title",3,"");var s=ce(),l=Z(s);{var a=c=>{pe(c,{children:(f,u)=>{var v=xu(),d=Z(v),h=V(d);{var g=y=>{var k=_u(),S=Z(k),T=V(S);le(()=>ae(T,r())),L(y,k)};Y(h,y=>{r()&&r()!==""&&y(g)})}var m=I(h,4),_=V(m),b=I(m,5);{var p=y=>{var k=wu(),S=Z(k),T=V(S),C=I(S,4),E=V(C);le(()=>{ae(T,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),ae(E,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),L(y,k)},w=y=>{var k=yu(),S=V(k);le(()=>ae(S,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),L(y,k)};Y(b,y=>{e.dataset.nresp&&e.dataset.nresp>0?y(p):y(w,!1)})}var M=I(d,2);ar(M,{get onclick(){return e.reset}}),le(()=>{O(m,"title",e.dataset.fileName),ae(_,e.dataset.fileName)}),L(f,v)},$$slots:{default:!0}})};Y(l,c=>{e.dataset&&c(a)})}L(t,s),ye()}var ku=H("<!> <!>",1),Cu=H("<!> <!> <!> <!> <!> <!>",1),Su=H("<!> <!>",1),Au=H("<p> </p>"),Nu=H("<!> <p> </p>",1),Mu=H("<p> </p>"),ju=H("<!> <!> <!>",1);function eo(t,e){we(e,!0);let r=U(e,"model",3,null),s=U(e,"outliers",19,()=>[]),l=U(e,"className",3,"Class"),a=U(e,"classMandatory",3,!1),c=U(e,"classUnique",3,!1),f=U(e,"title",3,""),u=U(e,"dataset",15),v=U(e,"resobj",15),d=U(e,"csvOnly",3,!0);const h=[",",";"],g=R(()=>r()?["no","yes"]:["no","labels","values"]);let m=ie(void 0),_=ie(""),b=ie(""),p=ie(","),w=ie("no"),M=ie(!1),y=ie(!1),k=ie(null),S=ie("neutral"),T=ie("");function C(Q){J(S,"error"),J(T,Q,!0),console.error(Q)}function E(){J(S,"neural"),J(T,"")}function N(){J(S,"success"),J(T,"")}function j(Q,$,ne){J(k,e.WASM().then(fe=>{v(Xs(fe,Q,$,ne,!0)),N()}).catch(fe=>{v(null),C(fe)}),!0)}function P(Q,$){if(!Q||Q.size<10)return;const fe=Q.slice(0,1e5),_e=new FileReader;_e.onload=()=>{const me=_e.result;!me||me.length<0||((Ce=>{var Ee=is(Ce,4);J(p,Ee[0],!0),J(M,Ee[1],!0),J(y,Ee[2],!0),J(w,Ee[3],!0)})(Pc(me)),J(y,a()||o(y),!0),$&&o(w)!=="no"&&J(w,"yes"))},_e.onerror=function(me){csvString=null,J(S,"error"),J(T,me,!0),console.error("Error reading CSV file.",me)},_e.readAsText(fe)}function z(Q){try{const $=Nc(Q,o(p),o(w)==="yes"?"labels":o(w),o(M),o(y),o(_),o(b));if($.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const ne=r()?r().prep&&Object.keys(r().prep).length>0?r().prep.npred:r().ncols+r().exclvars.length:0;if(r()&&$.values.ncols!==ne)throw new Error("Dataset has different number of columns than the training set.");if($.classNames.length>$.values.nrows/2)throw new Error("Dataset has too many unique "+l().toLowerCase()+" labels ("+$.classNames.length+"), check your CSV file.");if(a()&&$.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&$.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");$.fileName=o(m).name.replace(/\.[^/.]+$/,""),r()&&($.varrev=r().varrev,$.header=r().header,$.varlabels=r().varlabels,$.varvalues=r().varvalues,$.varvaluesName=r().varvaluesName,$.varvaluesUnits=r().varvaluesUnits),u($),N()}catch($){u(null),C($)}}function D(Q){const $=new FileReader;$.onload=()=>{z($.result)},$.readAsText(o(m))}async function F(Q){try{const $=o(m)instanceof FileList?o(m):[o(m)];u(await qc($)),N()}catch($){C("Failed to read SPC file: "+$)}}function A(){J(m,""),u(null),v(null),J(_,""),J(b,""),E()}ke(()=>{if(!(o(m)===0||o(m)===void 0||u())){if(o(m)===null||o(m)===""){A();return}if(Array.isArray(o(m))){if(o(m).filter(Q=>Q.slice(-4)===".spc").length!==o(m).length){C("Multiple file selection is allowed only for SPC files.");return}F(o(m));return}o(m)&&(o(m).type==="text/csv"||o(m).type==="application/vnd.ms-excel")?(P(o(m),r()),E()):F([o(m)])}}),ke(()=>{o(p)&&E()}),ke(()=>{if(u()&&r()&&!v()&&!o(T))try{v(j(r(),u(),s())),N()}catch(Q){u(null),v(null),C(Q)}});var q=ju(),W=Z(q);{var G=Q=>{var $=Su(),ne=Z($);As(ne,()=>o(m)===void 0,me=>{pe(me,{children:(Ce,Ee)=>{var Oe=ce(),$e=Z(Oe);{var et=Se=>{Gl(Se,{id:"dataFile",message:"Select CSV file with dataset",get file(){return o(m)},set file(Me){J(m,Me,!0)}})},Pe=Se=>{Gl(Se,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return o(m)},set file(Me){J(m,Me,!0)}})};Y($e,Se=>{d()?Se(et):Se(Pe,!1)})}L(Ce,Oe)},$$slots:{default:!0}})});var fe=I(ne,2);{var _e=me=>{var Ce=Cu(),Ee=Z(Ce);pe(Ee,{label:"Delimiter",children:(Le,Xe)=>{Rt(Le,{id:"sep",get options(){return h},get value(){return o(p)},set value(rt){J(p,rt,!0)}})},$$slots:{default:!0}});var Oe=I(Ee,2);pe(Oe,{label:"Row labels",children:(Le,Xe)=>{Nr(Le,{id:"hasLabels",options:["no","yes"],get value(){return o(M)},set value(rt){J(M,rt,!0)}})},$$slots:{default:!0}});var $e=I(Oe,2);{var et=Le=>{pe(Le,{get label(){return`${l()??""} labels`},children:(Xe,rt)=>{Nr(Xe,{id:"hasLabels",options:["no","yes"],get value(){return o(y)},set value(Mt){J(y,Mt,!0)}})},$$slots:{default:!0}})};Y($e,Le=>{a()||Le(et)})}var Pe=I($e,2);pe(Pe,{label:"Header",children:(Le,Xe)=>{Rt(Le,{id:"header",get options(){return o(g)},get value(){return o(w)},set value(rt){J(w,rt,!0)}})},$$slots:{default:!0}});var Se=I(Pe,2);{var Me=Le=>{var Xe=ku(),rt=Z(Xe);pe(rt,{label:"Header name",children:(B,X)=>{Hl(B,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return o(_)},set value(ee){J(_,ee,!0)}})},$$slots:{default:!0}});var Mt=I(rt,2);pe(Mt,{label:"Header units",children:(B,X)=>{Hl(B,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return o(b)},set value(ee){J(b,ee,!0)}})},$$slots:{default:!0}}),L(Le,Xe)};Y(Se,Le=>{o(w)==="values"&&Le(Me)})}var ot=I(Se,2);pe(ot,{label:" ",children:(Le,Xe)=>{st(Le,{text:"Load",onclick:D})},$$slots:{default:!0}}),L(me,Ce)};Y(fe,me=>{o(m)&&!Array.isArray(o(m))&&(o(m).type==="text/csv"||o(m).type==="application/vnd.ms-excel")&&me(_e)})}L(Q,$)},K=Q=>{var $=ce(),ne=Z($);{var fe=_e=>{var me=ce(),Ce=Z(me);Ss(Ce,()=>o(k),Ee=>{pe(Ee,{children:(Oe,$e)=>{var et=Nu(),Pe=Z(et);$s(Pe);var Se=I(Pe,2),Me=V(Se);le(()=>ae(Me,r()?"Loading data and apply model...":"Loading data...")),L(Oe,et)},$$slots:{default:!0}})},void 0,(Ee,Oe)=>{pe(Ee,{status:"error",children:($e,et)=>{var Pe=Au(),Se=V(Pe);le(()=>ae(Se,o(Oe))),L($e,Pe)},$$slots:{default:!0}})}),L(_e,me)};Y(ne,_e=>{o(k)&&_e(fe)})}L(Q,$)};Y(W,Q=>{u()?Q(K,!1):Q(G)})}var oe=I(W,2);{var se=Q=>{Eu(Q,{get dataset(){return u()},reset:A,get title(){return f()}})};Y(oe,Q=>{u()&&Q(se)})}var re=I(oe,2);{var te=Q=>{pe(Q,{status:"error",children:($,ne)=>{var fe=Mu(),_e=V(fe);le(()=>ae(_e,o(T))),L($,fe)},$$slots:{default:!0}})};Y(re,Q=>{(o(S)==="error"||o(T))&&Q(te)})}L(t,q),ye()}var Pu=H("<!> <!> <!> <!>",1),Tu=H("<p> </p>"),Lu=H("<!> <p>Computing global model...</p>",1),Ru=H('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Iu=H('<div class="buttons"><!> <!></div>'),zu=H("<!> <!>",1),Fu=H("<p> </p>"),qu=H("<!> <!> <!> <!>",1);function Ou(t,e){we(e,!0);let r=U(e,"outliers",19,()=>[]),s=U(e,"resobj",15),l=U(e,"model",15),a=U(e,"downloadModel",3,null),c=U(e,"downloadResults",3,null),f=ie("neutral"),u=ie(""),v=ie(1),d=ie(!0),h=ie(!1),g=ie(void 0);async function m(j,P,z,D){J(g,e.WASM().then(F=>{J(f,"computing");const A=Hs(F,j.values,P,z,D,r());A.hash=Sr(),A.exclvars=[],A.varlabels=j.varlabels,A.varindices=j.varindices,A.varvalues=j.varvalues,A.varvaluesName=j.varvaluesName,A.varvaluesUnits=j.varvaluesUnits,A.varrev=j.varrev,A.prep=[];const q=Xs(F,A,j,r());l(A),s(q),J(f,"success")}).catch(F=>{console.error(F),l(null),J(f,"error"),J(u,F,!0)}),!0)}function _(j){J(f,"neutral"),J(u,null),m(e.dataset,o(v),o(d),o(h))}function b(){J(f,"neutral"),J(g,null),s(null),l(null),J(u,null)}let p=R(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-1,50):null);ke(()=>{e.dataset===null&&b()}),ke(()=>{J(v,o(p)?Math.min(o(p),20):null,!0)});var w=qu(),M=Z(w);{var y=j=>{var P=Pu(),z=Z(P);pe(z,{name:"ncomp",label:"# of PCs",children:(q,W)=>{Ul(q,{id:"ncomp",min:1,get max(){return o(p)},step:1,decNum:0,get value(){return o(v)},set value(G){J(v,G,!0)}})},$$slots:{default:!0}});var D=I(z,2);pe(D,{name:"center",label:"Center",children:(q,W)=>{Nr(q,{id:"center",options:["no","yes"],get value(){return o(d)},set value(G){J(d,G,!0)}})},$$slots:{default:!0}});var F=I(D,2);pe(F,{name:"scale",label:"Scale",children:(q,W)=>{Nr(q,{id:"scale",options:["no","yes"],get value(){return o(h)},set value(G){J(h,G,!0)}})},$$slots:{default:!0}});var A=I(F,2);pe(A,{name:"create-model",label:" ",children:(q,W)=>{st(q,{onclick:_,text:"Create model"})},$$slots:{default:!0}}),L(j,P)};Y(M,j=>{e.dataset&&!l()&&o(f)!=="computing"&&j(y)})}var k=I(M,2);{var S=j=>{var P=ce(),z=Z(P);Ss(z,()=>o(g),D=>{pe(D,{name:"spinner",children:(F,A)=>{var q=Lu(),W=Z(q);$s(W),L(F,q)},$$slots:{default:!0}})},void 0,(D,F)=>{pe(D,{name:"error",status:"error",children:(A,q)=>{var W=Tu(),G=V(W);le(()=>ae(G,o(F))),L(A,W)},$$slots:{default:!0}})}),L(j,P)};Y(k,j=>{o(g)&&j(S)})}var T=I(k,2);{var C=j=>{var P=zu(),z=Z(P);pe(z,{name:"info",children:(A,q)=>{var W=Ru(),G=Z(W),K=I(V(G)),oe=I(G,2);ar(oe,{onclick:b}),le(()=>ae(K,` ${l().ncomp??""} PCs${l().center?", centered":""}${l().scale?", scaled":""}`)),L(A,W)},$$slots:{default:!0}});var D=I(z,2);{var F=A=>{pe(A,{name:"download-buttons",label:"Download",children:(q,W)=>{var G=Iu(),K=V(G);st(K,{onclick:()=>c()(s(),e.dataset,"train",r(),l()),text:"Results"});var oe=I(K,2);st(oe,{onclick:()=>a()(l()),text:"Model"}),L(q,G)},$$slots:{default:!0}})};Y(D,A=>{a()&&c()&&A(F)})}L(j,P)};Y(T,j=>{l()&&j(C)})}var E=I(T,2);{var N=j=>{pe(j,{name:"error",status:"error",children:(P,z)=>{var D=Fu(),F=V(D);le(()=>ae(F,o(u))),L(P,D)},$$slots:{default:!0}})};Y(E,j=>{(o(f)==="error"||o(u))&&j(N)})}L(t,w),ye()}var Du=H("<!> <!> <!>",1),Vu=H("<p> </p>"),Bu=H("<!> <p>Computing PV-set...</p>",1),Yu=H('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),Wu=H("<p> </p>"),Uu=H("<!> <!> <!> <!>",1);function Gu(t,e){we(e,!0);let r=U(e,"outliers",19,()=>[]),s=U(e,"pvset",15),l=U(e,"pvres",15),a=ie("neutral"),c=ie(""),f=ie(We(["ven","rand","loo"])),u=ie("ven"),v=ie(void 0),d=e.calset.values.nrows-r().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(N=>N>=d/(d-e.model.ncomp-1)&&N<=d/2):[],g=ie(We(h.length>0?h[0]:0));ke(()=>{h.length===0&&(J(f,["loo"],!0),J(u,"loo"))});async function m(N,j,P){J(v,e.WASM().then(z=>{const D=P.type=="loo"?0:P.type=="rand"?2:1,F=bc(z,j,N.values,j.ncomp,P.nseg,D,0,r());s({classLabelsVarname:N.classLabelsVarname,classNames:N.classNames,dec:N.dec,fileName:N.fileName+"-pcv",hasClassNames:N.hasClassNames,hasLabels:N.hasLabels,header:N.header,labelsVarname:N.labelsVarname,classes:e.calres.classes,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:N.sep,values:F,varAxisTitle:N.varAxisTitle,varindices:j.varindices,varlabels:j.varlabels,varrev:j.varrev,varvalues:j.varvalues,varvaluesName:j.varvaluesName,varvaluesUnits:j.varvaluesUnits}),l(Xs(z,j,s(),[]))}).catch(z=>{console.error(z),s(null),l(null),J(a,"error"),J(c,z,!0)}),!0)}function _(N){J(a,"neutral"),J(c,""),m(e.calset,e.model,{type:o(u),nseg:o(g)})}function b(){J(a,"neutral"),J(c,""),J(v,null),s(null),l(null)}ke(()=>{e.model===null&&b()});var p=Uu(),w=Z(p);{var M=N=>{var j=Du(),P=Z(j);pe(P,{name:"split",label:"Split type:",children:(A,q)=>{Rt(A,{id:"cvType",get options(){return o(f)},get value(){return o(u)},set value(W){J(u,W,!0)}})},$$slots:{default:!0}});var z=I(P,2);{var D=A=>{pe(A,{name:"nseg",label:"Segments:",children:(q,W)=>{Rt(q,{id:"nseg",get options(){return h},get value(){return o(g)},set value(G){J(g,G,!0)}})},$$slots:{default:!0}})};Y(z,A=>{o(u)!=="loo"&&A(D)})}var F=I(z,2);pe(F,{name:"run-button",label:" ",children:(A,q)=>{st(A,{onclick:_,text:"Compute PV-set"})},$$slots:{default:!0}}),L(N,j)};Y(w,N=>{e.model&&!s()&&o(a)!=="busy"&&N(M)})}var y=I(w,2);{var k=N=>{var j=ce(),P=Z(j);Ss(P,()=>o(v),z=>{pe(z,{name:"spinner",children:(D,F)=>{var A=Bu(),q=Z(A);$s(q),L(D,A)},$$slots:{default:!0}})},void 0,(z,D)=>{pe(z,{name:"error",status:"error",children:(F,A)=>{var q=Vu(),W=V(q);le(()=>ae(W,o(D))),L(F,q)},$$slots:{default:!0}})}),L(N,j)};Y(y,N=>{o(v)&&N(k)})}var S=I(y,2);{var T=N=>{pe(N,{name:"info",children:(j,P)=>{var z=Yu(),D=Z(z),F=I(V(D)),A=I(D,2);nu(A,{onclick:()=>Zs(s(),e.calset.fileName+"-pv")});var q=I(A,2);ar(q,{onclick:b}),le(()=>ae(F,` ${s().values.nrows??""} × ${s().values.ncols??""}, ${o(u)??""}
      ${o(u)!=="loo"?o(g)+" seg":""}`)),L(j,z)},$$slots:{default:!0}})};Y(S,N=>{s()&&N(T)})}var C=I(S,2);{var E=N=>{pe(N,{name:"error",status:"error",children:(j,P)=>{var z=Wu(),D=V(z);le(()=>ae(D,o(c))),L(j,z)},$$slots:{default:!0}})};Y(C,N=>{o(a)==="error"&&o(c)&&N(E)})}L(t,p),ye()}var Hu=H('<span class="buttons svelte-19bfqg3"><!> <!></span>'),Ku=H('<span class="buttons svelte-19bfqg3"><!> <!></span>'),Xu=H('<span class="buttons svelte-19bfqg3"><!> <!> <!></span>'),Zu=H("<!> <!> <!>",1);function Ju(t,e){we(e,!0);function r(v,d,h){let g=["#","excluded interval","nPCs","sensitivity","specificity","efficiency","selectivity"].join(d)+`
`;const m=v.length;for(let w=0;w<m;w++)g+=[w,w===0?"-":v[w].int,v[w].ncomp,v[w].sens,v[w].spec,v[w].eff,v[w].sel].join(d)+`
`;h!=="."&&(g=g.replace(/\./g,h));const _=new Blob([g],{type:"text/csv"}),b=window.URL.createObjectURL(_),p=document.createElement("a");p.setAttribute("href",b),p.setAttribute("download","ddsimca-love-progress.csv"),p.click()}function s(v,d){if(!d||d.length===0){Zs(v,`${v.fileName}`);return}Zs(Lc(v,d),`${v.fileName}-reduced`)}function l(v,d,h){const g=h.model,m=h.simca,_=h[v];kc(g,m,_,d,v,[])}function a(v){Cc(v.model,v.simca,v.simca.ncomp)}var c=ce(),f=Z(c);{var u=v=>{var d=Zu(),h=Z(d);pe(h,{label:"Outcomes",children:(_,b)=>{var p=Hu(),w=V(p);st(w,{onclick:()=>r(e.s.statsProgress,e.s.calset.sep,e.s.calset.dec),text:"Full progress"});var M=I(w,2);st(M,{onclick:()=>a(e.s.currentRes),text:"Model"}),L(_,p)},$$slots:{default:!0}});var g=I(h,2);pe(g,{label:"Results",children:(_,b)=>{var p=Ku(),w=V(p);st(w,{onclick:()=>l("tar",e.s.tarset,e.s.currentRes),text:"Target"});var M=I(w,2);{var y=k=>{st(k,{onclick:()=>l("alt",e.s.altset,e.s.currentRes),text:"Alt"})};Y(M,k=>{lr(e.s.altset)||k(y)})}L(_,p)},$$slots:{default:!0}});var m=I(g,2);pe(m,{label:"Reduced data",children:(_,b)=>{var p=Xu(),w=V(p);st(w,{onclick:()=>s(e.s.calset,e.s.varsExcluded),text:"Train"});var M=I(w,2);st(M,{onclick:()=>s(e.s.tarset,e.s.varsExcluded),text:"Target"});var y=I(M,2);{var k=S=>{st(S,{onclick:()=>s(e.s.altset,e.s.varsExcluded),text:"Alt"})};Y(y,S=>{lr(e.s.altset)||S(k)})}L(_,p)},$$slots:{default:!0}}),L(v,d)};Y(f,v=>{e.s.varsExcluded&&e.s.varsExcluded.length>0&&v(u)})}L(t,c),ye()}var Qu=H('<tr class="global svelte-ixs19u"><td class="svelte-ixs19u">0</td><td class="svelte-ixs19u">-</td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td></tr>'),$u=H('<tr class="global svelte-ixs19u"><td class="svelte-ixs19u"></td><td class="svelte-ixs19u">-</td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td></tr> <tr class="svelte-ixs19u"><td class="svelte-ixs19u">...</td><td class="svelte-ixs19u">...</td><td class="svelte-ixs19u">...</td><td class="svelte-ixs19u">...</td><td class="svelte-ixs19u">...</td><td class="svelte-ixs19u">...</td><td class="svelte-ixs19u">...</td></tr>',1),ef=H('<tr><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td></tr>'),tf=H("<!> <!>",1),nf=H('<tr class="selected svelte-ixs19u"><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td><td class="svelte-ixs19u"> </td></tr>'),rf=H('<table class="svelte-ixs19u"><thead><tr class="svelte-ixs19u"><th class="svelte-ixs19u">#</th><th class="svelte-ixs19u">int</th><th class="svelte-ixs19u">#PCs</th><th class="svelte-ixs19u">sens</th><th class="svelte-ixs19u">spec</th><th class="svelte-ixs19u">eff</th><th class="svelte-ixs19u">sel</th></tr></thead><tbody><!><!></tbody></table>');function sf(t,e){we(e,!0);const r=5,s=R(()=>e.s.statsProgress?e.s.statsProgress.length:0),l=R(()=>o(s)-r+1),a=R(()=>Xt(o(l)<=0?0:o(l),o(s)-1)),c=R(()=>e.s.outcomes&&e.s.outcomes.status==="done"&&e.s.intSelected>=0?{i:o(s),ncomp:e.s.nComp,int:e.s.intSelected+1,sens:e.s.outcomes.sens.val.getcolumn(e.s.nComp).v[e.s.intSelected],spec:e.s.outcomes.spec.val.getcolumn(e.s.nComp).v[e.s.intSelected],eff:e.s.outcomes.eff.val.getcolumn(e.s.nComp).v[e.s.intSelected],sel:e.s.outcomes.sel.val.getcolumn(e.s.nComp).v[e.s.intSelected]}:null);var f=ce(),u=Z(f);{var v=d=>{var h=rf(),g=I(V(h)),m=V(g);{var _=M=>{var y=Qu(),k=I(V(y),2),S=V(k),T=I(k),C=V(T),E=I(T),N=V(E),j=I(E),P=V(j),z=I(j),D=V(z);le((F,A,q,W)=>{ae(S,e.s.nComp),ae(C,F),ae(N,A),ae(P,q),ae(D,W)},[()=>e.s.statsGlobal.sens[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.spec[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.eff[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.sel[e.s.nComp-1].toFixed(3)]),L(M,y)},b=M=>{var y=tf(),k=Z(y);{var S=C=>{var E=$u(),N=Z(E),j=V(N);j.textContent="0";var P=I(j,2),z=V(P),D=I(P),F=V(D),A=I(D),q=V(A),W=I(A),G=V(W),K=I(W),oe=V(K);le((se,re,te,Q)=>{ae(z,e.s.statsProgress[0].ncomp),ae(F,se),ae(q,re),ae(G,te),ae(oe,Q)},[()=>e.s.statsProgress[0].sens.toFixed(3),()=>e.s.statsProgress[0].spec.toFixed(3),()=>e.s.statsProgress[0].eff.toFixed(3),()=>e.s.statsProgress[0].sel.toFixed(3)]),L(C,E)};Y(k,C=>{o(l)>0&&C(S)})}var T=I(k,2);Ge(T,17,()=>o(a),Ze,(C,E)=>{var N=ef();let j;var P=V(N),z=V(P),D=I(P),F=V(D),A=I(D),q=V(A),W=I(A),G=V(W),K=I(W),oe=V(K),se=I(K),re=V(se),te=I(se),Q=V(te);le(($,ne,fe,_e)=>{j=it(N,1,"svelte-ixs19u",null,j,{global:o(E)==0,current:o(E)===e.s.statsProgress.length-1}),ae(z,o(E)),ae(F,o(E)>0?e.s.statsProgress[o(E)].int:"-"),ae(q,e.s.statsProgress[o(E)].ncomp),ae(G,$),ae(oe,ne),ae(re,fe),ae(Q,_e)},[()=>e.s.statsProgress[o(E)].sens.toFixed(3),()=>e.s.statsProgress[o(E)].spec.toFixed(3),()=>e.s.statsProgress[o(E)].eff.toFixed(3),()=>e.s.statsProgress[o(E)].sel.toFixed(3)]),L(C,N)}),L(M,y)};Y(m,M=>{e.s.statsProgress?M(b,!1):M(_)})}var p=I(m);{var w=M=>{var y=nf(),k=V(y),S=V(k),T=I(k),C=V(T),E=I(T),N=V(E),j=I(E),P=V(j),z=I(j),D=V(z),F=I(z),A=V(F),q=I(F),W=V(q);le((G,K,oe,se)=>{ae(S,o(c).i),ae(C,o(c).int),ae(N,o(c).ncomp),ae(P,G),ae(D,K),ae(A,oe),ae(W,se)},[()=>o(c).sens.toFixed(3),()=>o(c).spec.toFixed(3),()=>o(c).eff.toFixed(3),()=>o(c).sel.toFixed(3)]),L(M,y)};Y(p,M=>{o(c)&&M(w)})}L(d,h)};Y(u,d=>{e.s.statsGlobal&&e.s.nComp&&d(v)})}L(t,f),ye()}const of={small:30,medium:40,large:50,xlarge:60},lf={small:5,medium:8,large:12,xlarge:15},af={small:6,medium:10,large:14,xlarge:18},to={small:4,medium:6,large:8,xlarge:10},Kl={small:12,medium:15,large:19,xlarge:21},Xl={small:11,medium:15,large:17,xlarge:19},es={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Mr=["●","◼","▲","▼","⬥","＋","✳","✕"],cf=.8,Zl=.5,uf={small:5,medium:8,large:12,xlarge:15},yt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333"};function Jl(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function Ql(t,e){if(t!=null&&(Array.isArray(t)&&(t=Ke(t)),!(!Ae(t)||t.length<1)))return t.apply(r=>so((r-e[1])*e[0]+e[2])).v}function nt(t,e){return Ql(t,e.coords)}function $l(t,e){return Ql(t,e.objects)}function ea(t,e){if(t!=null&&(Array.isArray(t)&&(t=Ke(t)),!(!Ae(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function ta(t,e){return ea(t,e.coords)}function na(t,e){return ea(t,e.objects)}function no(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Hn(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function ro(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Hn(Math.abs(Wn(pl(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Hn(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let s=Math.ceil(-Hn(Math.log10(e)));return s<=2?[0,Array.from(t).map(l=>l.toFixed(s))]:(r=s-2,s=2,Hn(Math.abs(Mn(t)))<=10?[-r,Array.from(t).map(l=>(l*Math.pow(10,r)).toFixed(s))]:[-r,Array.from(t).map(l=>(l/Math.pow(10,r)).toString())])}function Nt(t,e,r){return Array.isArray(t)&&(t=Ke(t)),Ae(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function ff(t,e,r,s){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=r.coords,a=s.coords;let c="";for(let f=0;f<t.length;f++){const u=so((t.v[f]-l[1])*l[0]+l[2]),v=so((e.v[f]-a[1])*a[0]+a[2]);c+=u+","+v+" "}return c}function ra(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Pr(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function sa(t,e){if(Array.isArray(t)&&(t=Ke(t)),!Ae(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=s&c<=l);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function oa(t,e,r,s,l,a){l==null&&(l=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const f=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*f,v=Math.floor(Math.log10(u)),d=1/Math.pow(10,v-1),h=Math.round(u*d)/d;let g=vf(h/r);l&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(g<1&&(g=1),g=Math.round(g)));let m=Math.ceil((c[0]+f)/g)*g,_=Math.floor((c[1]-f)/g)*g;Math.abs(c[0]-m)<g/10&&(m=m+g),Math.abs(c[1]-_)<g/10&&(_=_-g),r=Math.ceil(Hn((_-m)/g))+1,t=he.zeros(r);for(let b=0;b<r;b++)t.v[b]=m+g*b;if(Math.abs(g)<1){const b=Math.pow(10,1+Math.round(-Math.log10(g)));t=t.apply(p=>Math.round((p+Number.EPSILON)*b)/b)}return t.filter(b=>b>=c[0]&b<=c[1])}function vf(t,e){const r=Math.floor(Math.log10(t)),s=t/Math.pow(10,r);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,r)}function so(t){return Math.round(t*10)/10}function df(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function la(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function hf(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function mf(t){let e=-1,r=hf();for(let s=0;s<t.length;s++)e=r[(e^t[s])&255]^e>>>8;return e^-1}function gf(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const s=mf(r),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(l,50),c}function pf(t,e){const r=t.split(","),s=r[0],l=r[1],a=33/3*4,c=l.substring(0,a),f=l.substring(a),u=atob(c),v=new Uint8Array(u.length);for(let g=0;g<v.length;g++)v[g]=u.charCodeAt(g);const d=gf(v,e),h=btoa(String.fromCharCode(...d));return[s,",",h,f].join("")}function bf(t,e,r,s,l){if(r||(r=10),s||(s=10),l||(l=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*l,c=s/2.54*l;setTimeout(()=>{const f=t.clientHeight,u=t.clientWidth;let v=Math.max(a/u,c/f),d=1;v<1&&(d=v,v=1);const h=document.createElement("canvas"),g=h.getContext("2d");h.width=u*(d<1?d:v),h.height=f*(d<1?d:v),t.setAttribute("width",u*v),t.setAttribute("height",f*v),g.fillStyle="white",g.fillRect(0,0,h.width,h.height),g.scale(v,v);const m=new XMLSerializer().serializeToString(t),_=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(_),p=new Image;p.onload=function(){d<0&&(p.width=p.width*d,p.height=p.height*d),g.drawImage(p,0,0,h.width,h.height);const w=h.toDataURL("image/png"),M=pf(w,l),y=document.createElement("a");y.href=M,y.download=`${e}.png`,y.click()},p.src=b},20)}function _f(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,s=t.clientWidth;t.setAttribute("width",s+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${s} ${r}`);const l=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(l),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function wf(t,e,r,s){const l=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":yf(e,r,s)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=l},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=l},500)}).catch(a=>console.error(a))}async function yf(t,e,r){const s=t.clientHeight,l=t.clientWidth,a=Math.max(e/l,r/s),c=document.createElement("canvas"),f=c.getContext("2d");return c.width=l*a,c.height=s*a,f.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((v,d)=>{const h=new XMLSerializer().serializeToString(t),g=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,_=m.createObjectURL(g),b=new Image;b.onload=function(){f.drawImage(b,0,0,c.width,c.height),m.revokeObjectURL(_),c.toBlob(function(p){p?v(p):d(new Error("Failed to create blob"))},"image/png")},b.onerror=function(p){d(p)},b.src=_})}function xf(t,e,r,s,l){let a=l.ticks,c=l.tickLabels,f=0;const u=oa(a,t,lf[r.x],!0,l.whole),v=u.length,d=na([to[r.plot]],s)[0],h=he.fill(e[0],v),g=h.add(d),m=he.fill(e[1],v);if(c||(a?(f=0,c=a.v.map(E=>Hn(E).toString())):[f,c]=ro(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const _=[[u,h],[u,m]],b=[[Ke([t[0]]),Ke([e[0]])],[Ke([t[1]]),Ke([e[0]])]],p=[[u,g],[u,h]],w=(t[1]-t[0])*.01,M=[[null,null],[[t[1]-(f>9?1:0)*w],[h.v[v-1]]]],y=no(f),k=c.length,S=Math.abs(t[1]>t[0]?t[1]-u.v[k-1]:t[1]-u.v[0]),T=Math.abs(t[1]-t[0]),C=Math.abs(u.v[1]-u.v[0]);if(y.length>0&&S<T*.1&&S<C*.5){const E=t[1]>t[0]?k-1:0;c[E]=" "}return{grid:_,axisLine:b,tickCoords:p,tfCoords:M,ticks:a,tickLabels:c,tickFactor:f,tfLabel:y}}function Ef(t,e,r,s,l){let a=l.ticks,c=l.tickLabels,f=0;const u=oa(l.ticks,e,af[r.y],!0,l.whole),v=u.length,d=na([to[r.plot]],s)[0],h=he.fill(t[0],v),g=h.add(d),m=he.fill(t[1],v);if(c||(a?(f=0,c=a.v.map(C=>Hn(C).toString())):[f,c]=ro(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const _=[[h,u],[m,u]],b=[[Ke([t[0]]),Ke([e[0]])],[Ke([t[0]]),Ke([e[1]])]],p=[[h,u],[g,u]],w=[[[],[]],[[g.v[v-1]+(Math.abs(f)>9?3:2)*d],[e[1]]]],M=no(f),y=c.length,k=Math.abs(e[1]>e[0]?e[1]-u.v[y-1]:e[1]-u.v[0]),S=Math.abs(e[1]-e[0]),T=Math.abs(u.v[1]-u.v[0]);if(M.length>0&&k<S*.1&&k<T*.5){const C=e[1]>e[0]?y-1:0;c[C]=" "}return{grid:_,axisLine:b,tickCoords:p,tfCoords:w,ticks:a,tickLabels:c,tickFactor:f,tfLabel:M}}function kf(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ae(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let s,l;if(t.labels?(s=t.labels,l=0):[l,s]=ro(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=s.length===r.length;return{colmap:r,breaks:e,labels:s,isCentered:a,labelsFactor:l,fontSize:t.fontSize,labelColor:t.labelColor}}function Cf(t,e,r,s){const l=t.colmap.length,a=e*cf,c=a/l,f=r[1]+(e-a)*.5,u=uf[s.y],v=r[2]+u*Zl,d=v+u*(1+Zl),h=t.isCentered?c/2:0;return{start:f,top:v,height:u,width:c,dxl:h,ltop:d}}function jr(t,e,r){if(!t||!e||!r||typeof r!="function")return;const s=t.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;r(l),t.stopPropagation()}}function Sf(t,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function Af(t,e){const r="Arial",s=e/8,l=e*1.5,a=Array(t.length),c=Array(t.length);let f=0,u=0,v=0;for(let h=0;h<t.length;h++){const g=Sf("  "+t[h].label+"  ",e+"px "+r);v=g>v?g:v;const m=e*t[h].labelHeight+2*s;a[h]=m,c[h]=f,f=f+m,u=u+m}const d=l+2*s+v;return[c,a,l,s,u,d]}function Nf(t,e,r,s,l){const[a,c,f,u,v,d]=Af(t.items,s*t.fontSize),h=t.position.includes("left")?e[0]+l:t.position.includes("right")?e[1]-d-l:(e[1]+e[0]-d)*.5,g=t.position.includes("top")?r[1]+l:t.position.includes("bottom")?r[0]-v-l:(r[1]+r[0]-v)*.5;return{lgl:h,lgt:g,lgw:d,lgh:v,ely:a,elh:c,elw:f,elp:u}}function Pr(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<t.length;){const a=t[s];if((a==="^"||a==="_")&&s<t.length-1){const c=a==="^";if(s++,t[s]==="("){let f=s+1;for(;f<t.length&&t[f]!==")";)f++;const u=t.slice(s+1,f);l+=c?e(u):r(u),s=f+1}else if(t[s]==="-"||t[s]==="–"){const f=t.slice(s,s+2);l+=c?e(f):r(f),s=s+2}else l+=c?e(t[s]):r(t[s]),s++}else l+=a,s++}return l}var Mf=xe('<line vector-effect="non-scaling-stroke"></line>'),jf=xe("<g></g>");function oo(t,e){we(e,!0);let r=U(e,"lineCoords",19,()=>[]),s=U(e,"lineColor",19,()=>yt.DARKGRAY),l=U(e,"lineType",3,1),a=U(e,"lineWidth",3,1),c=U(e,"className",3,"");const f=It("axes");let u=R(()=>nt(r()[0][0],f.tX())),v=R(()=>nt(r()[1][0],f.tX())),d=R(()=>nt(r()[0][1],f.tY())),h=R(()=>nt(r()[1][1],f.tY())),g=R(()=>`stroke:${s()};stroke-width: ${a()}px;stroke-dasharray:${es[f.scales().plot][l()-1]}`);var m=ce(),_=Z(m);{var b=p=>{var w=jf();Ge(w,21,()=>o(u),Ze,(M,y,k)=>{var S=Mf();le(()=>{O(S,"x1",o(u)[k]),O(S,"x2",o(v)[k]),O(S,"y1",o(d)[k]),O(S,"y2",o(h)[k]),Wt(S,o(g))}),L(M,S)}),le(()=>it(w,0,Ri(c()))),L(p,w)};Y(_,p=>{o(u)&&o(d)&&o(v)&&p(b)})}L(t,m),ye()}var Pf=xe('<text text-anchor="middle"><!></text>'),Tf=xe("<text><!></text>"),Lf=xe("<text><!></text>"),Rf=xe('<g class="tick-labels"><!></g>');function aa(t,e){we(e,!0);let r=U(e,"pos",3,1),s=U(e,"las",3,1),l=R(()=>["middle","middle","start","middle","end"][r()]),a=R(()=>`fill:${e.textColor};`);const c=It("axes");let f=R(()=>nt(e.tickCoords[1][0],c.tX())),u=R(()=>nt(e.tickCoords[1][1],c.tY())),v=R(()=>Xl[c.scales().plot]),d=R(()=>[0,0,o(v),0,-o(v)][r()]),h=R(()=>[0,o(v),0,-o(v),0][r()]);var g=Rf(),m=V(g);{var _=p=>{var w=ce(),M=Z(w);Ge(M,17,()=>o(f),Ze,(y,k,S)=>{var T=Pf();O(T,"data-id",S),O(T,"dx",0);var C=V(T);wt(C,()=>e.tickLabels[S],!0),le(()=>{O(T,"x",o(f)[S]),O(T,"y",o(u)[S]),O(T,"dy",o(d)*1.25),O(T,"transform",`rotate(-90, ${o(f)[S]}, ${o(u)[S]})`)}),L(y,T)}),L(p,w)},b=p=>{var w=ce(),M=Z(w);{var y=S=>{var T=ce(),C=Z(T);Ge(C,17,()=>o(f),Ze,(E,N,j)=>{var P=Tf();O(P,"data-id",j),O(P,"dy",0),O(P,"text-anchor","end");var z=V(P);wt(z,()=>e.tickLabels[j],!0),le(()=>{O(P,"x",o(f)[j]),O(P,"y",o(u)[j]),O(P,"dx",-o(h)/2),O(P,"transform",`rotate(-90, ${o(f)[j]}, ${o(u)[j]})`)}),L(E,P)}),L(S,T)},k=S=>{var T=ce(),C=Z(T);Ge(C,17,()=>o(f),Ze,(E,N,j)=>{var P=Lf();O(P,"data-id",j);var z=V(P);wt(z,()=>e.tickLabels[j],!0),le(()=>{O(P,"x",o(f)[j]),O(P,"y",o(u)[j]),O(P,"dx",o(d)),O(P,"dy",o(h)),O(P,"text-anchor",o(l))}),L(E,P)}),L(S,T)};Y(M,S=>{s()===2&&r()===1?S(y):S(k,!1)},!0)}L(p,w)};Y(m,p=>{s()===2&&r()===4?p(_):p(b,!1)})}le(()=>Wt(g,o(a))),L(t,g),ye()}const If=(t,e=kt,r=kt)=>{const s=R(()=>e().colmap.length);var l=Bf(),a=Z(l);Ge(a,17,()=>e().colmap,Ze,(d,h,g)=>{const m=R(()=>r().start+g*r().width);var _=Of(),b=Z(_),p=I(b);O(p,"dy",0);var w=V(p);wt(w,()=>e().labels[g],!0),le(()=>{O(b,"x",o(m)),O(b,"y",r().top),O(b,"width",r().width),O(b,"height",r().height),O(b,"fill",o(h)),O(p,"x",o(m)),O(p,"y",r().ltop),O(p,"dx",r().dxl),O(p,"fill",e().labelColor),O(p,"font-size",e().fontSize+"em")}),L(d,_)});var c=I(a);{var f=d=>{const h=R(()=>r().start+o(s)*r().width);var g=Df();O(g,"dx",0),O(g,"dy",0);var m=V(g);wt(m,()=>e().labels[o(s)],!0),le(()=>{O(g,"x",o(h)),O(g,"y",r().ltop),O(g,"fill",e().labelColor),O(g,"font-size",`${e().fontSize??""}em`)}),L(d,g)};Y(c,d=>{e().isCentered||d(f)})}var u=I(c);{var v=d=>{const h=R(()=>r().start+o(s)*r().width);var g=Vf(),m=V(g);wt(m,()=>no(e().labelsFactor),!0),le(()=>{O(g,"x",o(h)),O(g,"y",r().ltop),O(g,"fill",e().labelColor),O(g,"font-size",`${e().fontSize??""}em`)}),L(d,g)};Y(u,d=>{e().labelsFactor!==0&&d(v)})}L(t,l)};var zf=xe('<text fill="crimson" text-anchor="middle"> </text>'),Ff=xe('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),qf=xe("<!><!><!><!><!>",1),Of=xe('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Df=xe('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Vf=xe('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Bf=xe("<!><!><!>",1),Yf=xe("<line></line>"),Wf=xe('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Uf=xe('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Gf=xe('<svg><rect height="100%" width="100%"></rect><!></svg>'),Hf=xe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Kf=xe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Xf=xe('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Zf=xe('<g class="plot-labels"><!><!><!></g>'),Jf=xe('<g class="axis x-axis"><!></g>'),Qf=xe('<g class="axis y-axis"><!></g>'),$f=xe('<rect fill="transparent" id="axes-box"></rect>'),ev=xe('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),tv=xe('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),nv=xe('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),rv=xe('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),sv=H('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),ov=H('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),lv=H(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function av(t,e){we(e,!0);const r=(de,Re=kt,Te=kt)=>{var bt=ce(),jt=Z(bt);{var Zt=dt=>{var Ue=ce(),Ie=Z(Ue);{var xt=at=>{var Qe=zf(),on=V(Qe);le(()=>{O(Qe,"x",o(Ee)[0]-10),O(Qe,"y",o(me)),O(Qe,"transform",`rotate(-90, ${o(Ee)[0]-10}, ${o(me)})`),ae(on,Te().error)}),L(at,Qe)},ct=at=>{var Qe=Ff(),on=V(Qe);le(()=>{O(Qe,"x",o(Ce)),O(Qe,"y",o(Oe)[0]),ae(on,Te().error)}),L(at,Qe)};Y(Ie,at=>{Te().pos===4?at(xt):at(ct,!1)})}L(dt,Ue)},Ln=dt=>{var Ue=qf(),Ie=Z(Ue);{var xt=ge=>{oo(ge,{get lineCoords(){return Re().grid},get lineColor(){return yt.MIDDLEGRAY},lineType:3})};Y(Ie,ge=>{Te().showGrid&&ge(xt)})}var ct=I(Ie);oo(ct,{get lineCoords(){return Re().axisLine},get lineColor(){return yt.DARKGRAY},lineType:1});var at=I(ct);oo(at,{get lineCoords(){return Re().tickCoords},get lineColor(){return yt.DARKGRAY},lineType:1});var Qe=I(at);{var on=ge=>{aa(ge,{get las(){return Te().las},get pos(){return Te().pos},get tickCoords(){return Re().tickCoords},get tickLabels(){return Re().tickLabels},get tickColor(){return yt.DARKGRAY},get hideLast(){return Te().hideLast}})};Y(Qe,ge=>{Re().tickCoords.length===2&&Re().tickLabels.length===Re().tickCoords[1][0].length&&ge(on)})}var Tr=I(Qe);{var Ve=ge=>{{let Et=R(()=>[Re().tfLabel]);aa(ge,{get pos(){return Te().pos},get tickCoords(){return Re().tfCoords},get tickLabels(){return o(Et)},get textColor(){return yt.DARKGRAY}})}};Y(Tr,ge=>{Re().tickFactor!==0&&ge(Ve)})}L(dt,Ue)};Y(jt,dt=>{Te().error?dt(Zt):dt(Ln,!1)})}L(de,bt)},s=(de,Re=kt,Te=kt)=>{const bt=R(()=>Te().elw+2*Te().elp),jt=R(()=>Te().elp),Zt=R(()=>Te().elh),Ln=R(()=>Te().ely);var dt=Gf(),Ue=V(dt),Ie=I(Ue);Ge(Ie,17,()=>Re().items,Ze,(xt,ct,at)=>{var Qe=Uf();O(Qe,"x",0);var on=V(Qe);{var Tr=Kn=>{var ht=Yf();le(()=>{O(ht,"x1",o(jt)),O(ht,"x2",o(bt)-o(jt)),O(ht,"y1",o(Zt)[at]/2),O(ht,"y2",o(Zt)[at]/2),O(ht,"stroke",o(ct).line.lineColor),O(ht,"stroke-width",o(ct).line.lineWidth),O(ht,"stroke-dasharray",o(G)[o(ct).line.lineType-1])}),L(Kn,ht)};Y(on,Kn=>{o(ct).line&&Kn(Tr)})}var Ve=I(on);{var ge=Kn=>{var ht=Wf(),Zd=V(ht);le(()=>{O(ht,"x",o(bt)/2),O(ht,"y",o(Zt)[at]/2),O(ht,"fill",o(ct).point.faceColor),O(ht,"stroke-width",o(ct).point.lineWidth),O(ht,"stroke",o(ct).point.lineColor),O(ht,"font-size",`${o(ct).point.markerSize??""}em`),ae(Zd,Mr[o(ct).point.marker-1])}),L(Kn,ht)};Y(Ve,Kn=>{o(ct).point&&Kn(ge)})}var Et=I(Ve),Xd=V(Et);wt(Xd,()=>o(ct).label,!0),le(()=>{O(Qe,"y",o(Ln)[at]),O(Qe,"width",Te().lgw),O(Qe,"height",o(Zt)[at]),O(Et,"x",o(bt)+o(jt)),O(Et,"y",o(Zt)[at]/2),O(Et,"fill",yt.LEGEND),O(Et,"font-size",`${Re().fontSize??""}em`)}),L(xt,Qe)}),le(()=>{O(dt,"x",Te().lgl),O(dt,"y",Te().lgt),O(dt,"height",Te().lgh),O(dt,"width",Te().lgw),O(Ue,"fill",Re().faceColor),O(Ue,"stroke",Re().lineColor),O(Ue,"stroke-width",Re().lineWidth)}),L(de,dt)};let l=U(e,"limX",19,()=>[0,1]),a=U(e,"limY",19,()=>[0,1]),c=U(e,"margins",19,()=>[1,1.1,.55,.6]),f=U(e,"downloadLinks",3,"none"),u=U(e,"fileName",3,"plot"),v=U(e,"pngWidth",3,8),d=U(e,"pngHeight",3,8),h=U(e,"pngRes",3,300),g=U(e,"clipboardWidth",3,1200),m=U(e,"clipboardHeight",3,800),_=U(e,"onclick",3,null),b=U(e,"onmousemove",3,null),p=U(e,"onmousedown",3,null),w=U(e,"onmouseup",3,null);function M(de,Re){if(Re&&de.target.id=="axes-box"){const Te=ta([de.offsetX-o(oe)],o(fe))[0],bt=ta([de.offsetY-o(se)],o(_e))[0];Re(Te,bt)}}function y(de){de.preventDefault(),M(de,p())}function k(de){de.preventDefault(),M(de,w())}function S(de){de.preventDefault(),M(de,b())}function T(de){de.preventDefault(),M(de,_())}async function C(de){wf(de.target,o(P),g(),m())}function E(){_f(o(P),u())}function N(){bf(o(P),u(),v(),d(),h())}const j="plottingArea"+Math.round(Math.random()*1e4);let P=ie(0),z=ie(0),D=ie(0);const F=R(()=>({plot:df(o(z),o(D)),x:la(o(z)),y:la(o(D))})),A=R(()=>c().map(de=>de*of[o(F).plot])),q=R(()=>Kl[o(F).plot]),W=R(()=>to[o(F).plot]),G=R(()=>es[o(F).plot]),K=R(()=>o(Se).show&&o(Se).label!==""?o(q)*1.5:0),oe=R(()=>o(Me).show&&o(Me).label!==""?o(q)*1.5:0),se=R(()=>e.title&&e.title!==""?o(q)*1.5:0),re=R(()=>o(z)>o(oe)?o(z)-o(oe):0),te=R(()=>o(D)>o(K)+o(se)?o(D)-o(K)-o(se):0),Q=R(()=>o(te)-o(A)[0]-o(A)[2]),$=R(()=>o(re)-o(A)[1]-o(A)[3]),ne=R(()=>Jl(l(),2)&&Jl(a(),2)&&o(re)>o(A)[1]+o(A)[3]&&o(te)>o(A)[0]+o(A)[2]),fe=R(()=>o(ne)?{coords:[o($)/(l()[1]-l()[0]),l()[0],o(A)[1]],objects:[o($)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),_e=R(()=>o(ne)?{coords:[-o(Q)/(a()[1]-a()[0]),a()[1],o(A)[2]],objects:[o(Q)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),me=R(()=>o(Q)*.5+o(se)+o(A)[2]),Ce=R(()=>o($)*.5+o(oe)+o(A)[1]),Ee=R(()=>o(ne)?nt(l(),o(fe)):[0,1]),Oe=R(()=>o(ne)?nt(a(),o(_e)):[1,0]),$e=R(()=>Pr(e.title)),et=R(()=>o($e)?o($e).length===e.title.left?1:1.4:0);let Pe=ie(We({show:!1})),Se=ie(We({show:!1,error:""})),Me=ie(We({show:!1,error:""})),ot=ie(We({show:!1,colmap:null,breaks:null})),Le=ie(We({show:!1,items:null,position:null}));const Xe=R(()=>o(ne)&&o(ot)&&o(ot).show?kf(o(ot)):null),rt=R(()=>o(ne)&&o(Se).show?xf(l(),a(),o(F),o(_e),o(Se)):null),Mt=R(()=>o(ne)&&o(Me).show?Ef(l(),a(),o(F),o(fe),o(Me)):null),B=R(()=>o(ne)&&o(Xe)?Cf(o(Xe),o($),o(A),o(F)):null),X=R(()=>o(ne)&&o(Le)&&o(Le).show&&o(Ee)?Nf(o(Le),o(Ee),o(Oe),o(q),o(W)):null);Ua("axes",{setBox:de=>J(Pe,de,!0),setXAxis:de=>J(Se,de,!0),setYAxis:de=>J(Me,de,!0),setColmapLegend:de=>J(ot,de,!0),setGroupLegend:de=>J(Le,de,!0),scales:()=>o(F),tX:()=>o(fe),tY:()=>o(_e),limX:()=>l(),limY:()=>a()});var ee=lv();let ve;var be=V(ee),Je=I(V(be));{var Be=de=>{var Re=Zf(),Te=V(Re);{var bt=Ue=>{var Ie=Hf();O(Ie,"dx",0),O(Ie,"dy",0);var xt=V(Ie);wt(xt,()=>o(Se).label,!0),le(()=>{O(Ie,"x",o(Ce)),O(Ie,"y",o(te)+o(se))}),L(Ue,Ie)};Y(Te,Ue=>{o(Se).show&&o(Se).label&&o(Se).label!==""&&Ue(bt)})}var jt=I(Te);{var Zt=Ue=>{var Ie=Kf();O(Ie,"dx",0),O(Ie,"dy",0);var xt=V(Ie);wt(xt,()=>o(Me).label,!0),le(()=>{O(Ie,"x",o(q)/1.1*o(Me).labelHeight),O(Ie,"y",o(me)),O(Ie,"transform",`rotate(-90, ${o(q)*o(Me).labelHeight/1.1}, ${o(me)})`)}),L(Ue,Ie)};Y(jt,Ue=>{o(Me).show&&o(Me).label&&o(Me).label!==""&&Ue(Zt)})}var Ln=I(jt);{var dt=Ue=>{var Ie=Xf();O(Ie,"dx",0),O(Ie,"dy",0);var xt=V(Ie);wt(xt,()=>o($e),!0),le(()=>{O(Ie,"x",o(Ce)),O(Ie,"y",o(q)*o(et))}),L(Ue,Ie)};Y(Ln,Ue=>{o($e)&&o($e)!==""&&Ue(dt)})}L(de,Re)};Y(Je,de=>{o(ne)&&de(Be)})}var pt=I(Je),wn=V(pt),lt=V(wn),vt=V(lt),Tn=I(wn);{var Ud=de=>{var Re=rv(),Te=Z(Re);{var bt=Ve=>{var ge=Jf(),Et=V(ge);r(Et,()=>o(rt),()=>o(Se)),L(Ve,ge)};Y(Te,Ve=>{o(Se).show&&o(rt)&&Ve(bt)})}var jt=I(Te);{var Zt=Ve=>{var ge=Qf(),Et=V(ge);r(Et,()=>o(Mt),()=>o(Me)),L(Ve,ge)};Y(jt,Ve=>{o(Me).show&&o(Mt)&&Ve(Zt)})}var Ln=I(jt),dt=V(Ln);{var Ue=Ve=>{var ge=$f();ge.__keydown=T,ge.__click=T,ge.__mousemove=S,ge.__mousedown=y,ge.__mouseup=k,le(()=>{O(ge,"stroke",o(Pe).lineColor),O(ge,"stroke-width",`${o(Pe).lineWidth??""}px`),O(ge,"x",o(Ee)[0]),O(ge,"y",o(Oe)[1]),O(ge,"width",o(Ee)[1]-o(Ee)[0]),O(ge,"height",o(Oe)[0]-o(Oe)[1])}),L(Ve,ge)},Ie=Ve=>{var ge=ev();ge.__keydown=T,ge.__click=T,ge.__mousemove=S,ge.__mousedown=y,ge.__mouseup=k,le(()=>{O(ge,"x",o(Ee)[0]),O(ge,"y",o(Oe)[1]),O(ge,"width",o(Ee)[1]-o(Ee)[0]),O(ge,"height",o(Oe)[0]-o(Oe)[1])}),L(Ve,ge)};Y(dt,Ve=>{o(Pe).show?Ve(Ue):Ve(Ie,!1)})}var xt=I(Ln),ct=V(xt);Nn(ct,()=>e.children??kt);var at=I(xt);{var Qe=Ve=>{var ge=tv(),Et=V(ge);If(Et,()=>o(Xe),()=>o(B)),L(Ve,ge)};Y(at,Ve=>{o(B)&&Ve(Qe)})}var on=I(at);{var Tr=Ve=>{var ge=nv(),Et=V(ge);s(Et,()=>o(Le),()=>o(X)),L(Ve,ge)};Y(on,Ve=>{o(X)&&Ve(Tr)})}le(()=>O(xt,"clip-path",`url(#${j})`)),L(de,Re)};Y(Tn,de=>{o(ne)&&de(Ud)})}_r(be,de=>J(P,de),()=>o(P));var Gd=I(be,2);{var Hd=de=>{var Re=sv();L(de,Re)},Kd=de=>{var Re=ov(),Te=V(Re);Te.__click=E,Te.__keydown=E;var bt=I(Te,2);bt.__click=N,bt.__keydown=N;var jt=I(bt,2);jt.__click=C,jt.__keydown=C,L(de,Re)};Y(Gd,de=>{o(ne)?de(Kd,!1):de(Hd)})}le(()=>{ve=it(ee,1,`plot-container show-download-links-${f()??""}`,"svelte-1t5q9z1",ve,{"plot-error":!o(ne)}),Wt(be,`font-size:${o(q)??""}px`),O(pt,"x",o(oe)),O(pt,"y",o(se)),O(pt,"width",o(re)),O(pt,"height",o(te)),O(lt,"id",j),O(vt,"x",o(Ee)[0]),O(vt,"y",o(Oe)[1]),O(vt,"width",o(Ee)[1]-o(Ee)[0]),O(vt,"height",o(Oe)[0]-o(Oe)[1])}),hl(be,"clientWidth",de=>J(z,de)),hl(be,"clientHeight",de=>J(D,de)),L(t,ee),ye()}tt(["keydown","click","mousemove","mousedown","mouseup"]);function ts(t,e){we(e,!0);let r=U(e,"tickLabels",7),s=U(e,"las",3,1),l=U(e,"whole",3,!1),a=U(e,"show",3,!0),c=U(e,"showGrid",3,!1);const f=It("axes");ke(()=>{const u=Pr(e.label),v=u?u.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=sa(e.ticks,f.limX())),!h&&r()&&(g=>{var m=is(g,2);r(m[0]),h=m[1]})(ra(r(),d)),f.setXAxis({show:a(),error:h,label:u,ticks:d,labelHeight:v,showGrid:c(),las:s(),whole:l(),tickLabels:r()})}),ye()}function ns(t,e){we(e,!0);let r=U(e,"tickLabels",7),s=U(e,"las",3,1),l=U(e,"whole",3,!1),a=U(e,"show",3,!0),c=U(e,"showGrid",3,!1);const f=It("axes");ke(()=>{const u=Pr(e.label),v=u?u.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=sa(e.ticks,f.limY())),!h&&r()&&(g=>{var m=is(g,2);r(m[0]),h=m[1]})(ra(r(),d)),f.setYAxis({show:a(),error:h,label:u,ticks:d,labelHeight:v,showGrid:c(),las:s(),whole:l(),tickLabels:r(),pos:4})}),ye()}function rs(t,e){we(e,!0);let r=U(e,"lineWidth",3,1),s=U(e,"lineColor",3,"#606060");const l=It("axes");ke(()=>{l.setBox({show:!0,lineWidth:r(),lineColor:s()})}),ye()}var iv=xe("<rect></rect>"),cv=xe("<g></g>");function rn(t,e){we(e,!0);let r=U(e,"faceColor",19,()=>yt.PRIMARY),s=U(e,"lineColor",19,r),l=U(e,"lineWidth",3,1),a=U(e,"className",3,"series-rect");const c=R(()=>Nt(e.left,"Rectangles (left)")),f=R(()=>o(c)?Nt(e.top,"Rectangles (top)",o(c).length):null),u=R(()=>o(f)?typeof e.width!="object"?he.fill(e.width,o(c).length):e.width:null),v=R(()=>o(f)?typeof e.height!="object"?he.fill(e.height,o(c).length):e.height:null),d=It("axes"),h=R(()=>o(c)?nt(o(c),d.tX()):null),g=R(()=>o(f)?nt(o(f),d.tY()):null),m=R(()=>o(u)?$l(o(u),d.tX()):null),_=R(()=>o(v)?$l(o(v),d.tY()):null),b=R(()=>`fill:${r()};stroke:${s()};stroke-width:${l()}px;`),p=R(()=>o(h)&&o(g)&&o(m)&&o(_)&&o(m).length===o(h).length&&o(_).length===o(h).length);var w=ce(),M=Z(w);{var y=k=>{var S=cv();S.__click=T=>jr(T,"rect",e.onclick),Ge(S,21,()=>e.left,Ze,(T,C,E)=>{var N=iv();le(()=>{O(N,"x",o(h)[E]),O(N,"y",o(g)[E]),O(N,"width",o(m)[E]),O(N,"height",o(_)[E])}),L(T,N)}),le(()=>{it(S,0,`series ${a()??""}`),Wt(S,o(b))}),L(k,S)};Y(M,k=>{o(p)&&k(y)})}L(t,w),ye()}tt(["click"]);var uv=xe("<line></line>"),fv=xe('<g class="series series-segment"></g>');function lo(t,e){we(e,!0);let r=U(e,"lineColor",19,()=>yt.PRIMARY),s=U(e,"lineType",3,1),l=U(e,"lineWidth",3,1);const a=R(()=>Nt(e.xStart,"Segments")),c=R(()=>o(a)?Nt(e.yStart,"Segments",o(a).length):null),f=R(()=>o(c)?Nt(e.xEnd,"Segments",o(a).length):null),u=R(()=>o(f)?Nt(e.yEnd,"Segments",o(a).length):null),v=It("axes"),d=R(()=>o(a)?nt(o(a),v.tX()):null),h=R(()=>o(f)?nt(o(f),v.tX()):null),g=R(()=>o(c)?nt(o(c),v.tY()):null),m=R(()=>o(u)?nt(o(u),v.tY()):null),_=R(()=>`stroke:${r()};stroke-width: ${l()}px;stroke-dasharray:${es[v.scales().plot][s()-1]}`),b=R(()=>o(d)&&o(h)&&o(g)&&o(m));var p=ce(),w=Z(p);{var M=y=>{var k=fv();k.__click=S=>jr(S,"line",e.onclick),Ge(k,21,()=>o(d),Ze,(S,T,C)=>{var E=uv();le(()=>{O(E,"x1",o(d)[C]),O(E,"x2",o(h)[C]),O(E,"y1",o(g)[C]),O(E,"y2",o(m)[C])}),L(S,E)}),le(()=>Wt(k,o(_))),L(y,k)};Y(w,y=>{o(b)&&y(M)})}L(t,p),ye()}tt(["click"]);var vv=xe("<text><!></text>"),dv=xe("<text><!></text>"),hv=xe("<text><!></text>"),mv=xe('<g class="series series-textlabels"><!></g>');function ia(t,e){we(e,!0);let r=U(e,"pos",3,0),s=U(e,"faceColor",19,()=>yt.PRIMARY_TEXT),l=U(e,"lineColor",3,"transparent"),a=U(e,"lineWidth",3,0),c=U(e,"textSize",3,1),f=U(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],v=R(()=>Nt(e.xValues,"TextLabels")),d=R(()=>o(v)?Nt(e.yValues,"TextLabels",o(v).length):null),h=R(()=>o(d)?Array.isArray(e.labels)&&e.labels.length!==o(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),g=R(()=>o(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),m=It("axes"),_=R(()=>o(v)&&o(g)!==null?nt(o(v),m.tX()):null),b=R(()=>o(d)&&o(_)?nt(o(d),m.tY()):null),p=R(()=>Xl[m.scales().plot]),w=R(()=>[0,0,-o(p),0,o(p),o(p)]),M=R(()=>[0,o(p),0,-o(p),0,o(p)]),y=R(()=>`fill:${s()};stroke-width:${a()}px;stroke:${l()};font-size:${c()}em;`),k=R(()=>o(_)&&o(b)&&o(g)!==null&&o(h)&&o(_).length===o(b).length);var S=ce(),T=Z(S);{var C=E=>{var N=mv();N.__click=D=>jr(D,"text",e.onclick);var j=V(N);{var P=D=>{var F=ce(),A=Z(F);Ge(A,17,()=>o(_),Ze,(q,W,G)=>{var K=vv();O(K,"data-id",G);var oe=V(K);wt(oe,()=>e.labels,!0),le(()=>{O(K,"x",o(_)[G]),O(K,"y",o(b)[G]),O(K,"dx",o(w)[r()]),O(K,"dy",o(M)[r()]),O(K,"transform",f()!==void 0?`rotate(${f()}, ${o(_)[G]+o(w)[r()]}, ${o(b)[G]+o(M)[r()]})`:""),O(K,"text-anchor",u[r()[G]])}),L(q,K)}),L(D,F)},z=D=>{var F=ce(),A=Z(F);{var q=G=>{var K=ce(),oe=Z(K);Ge(oe,17,()=>o(_),Ze,(se,re,te)=>{var Q=dv();O(Q,"data-id",te);var $=V(Q);wt($,()=>e.labels[te],!0),le(()=>{O(Q,"x",o(_)[te]),O(Q,"y",o(b)[te]),O(Q,"dx",o(w)[r()[te]]),O(Q,"dy",o(M)[r()[te]]),O(Q,"transform",f()!==void 0?`rotate(${f()}, ${o(_)[te]+o(w)[r()]}, ${o(b)[te]+o(M)[r()]})`:""),O(Q,"text-anchor",u[r()[te]])}),L(se,Q)}),L(G,K)},W=G=>{var K=ce(),oe=Z(K);Ge(oe,17,()=>o(_),Ze,(se,re,te)=>{var Q=hv();O(Q,"data-id",te);var $=V(Q);wt($,()=>e.labels[te],!0),le(()=>{O(Q,"x",o(_)[te]),O(Q,"y",o(b)[te]),O(Q,"dx",o(w)[r()]),O(Q,"dy",o(M)[r()]),O(Q,"transform",f()!==void 0?`rotate(${f()}, ${o(_)[te]+o(w)[r()]}, ${o(b)[te]+o(M)[r()]})`:""),O(Q,"text-anchor",u[r()])}),L(se,Q)}),L(G,K)};Y(A,G=>{Array.isArray(r())||ArrayBuffer.isView(r())?G(q):G(W,!1)},!0)}L(D,F)};Y(j,D=>{typeof e.labels=="string"?D(P):D(z,!1)})}le(()=>Wt(N,o(y))),L(E,N)};Y(T,E=>{o(k)&&E(C)})}L(t,S),ye()}tt(["click"]),tt(["click"]);var gv=xe("<text> </text>"),pv=xe('<g text-anchor="middle"></g>');function Vt(t,e){we(e,!0);let r=U(e,"marker",3,1),s=U(e,"faceColor",3,"transparent"),l=U(e,"lineColor",19,()=>yt.PRIMARY),a=U(e,"lineWidth",3,1),c=U(e,"markerSize",3,1);const f=R(()=>typeof r()!="number"||r()<1||r()>Mr.length?(console.error('Points: parameter "marker" must be a number from 1 to '+Mr.length+"."),null):Mr[r()-1]),u=R(()=>Nt(e.xValues,"Points")),v=R(()=>o(u)?Nt(e.yValues,"Points",o(u).length):null),d=It("axes"),h=R(()=>o(u)?nt(o(u),d.tX()):null),g=R(()=>o(h)&&o(v)?nt(o(v),d.tY()):null),m=R(()=>["＋","✳","✕"].includes(o(f))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${c()}em;`:`fill:${s()};stroke-width:${a()}px;stroke:${l()}; font-size:${c()}em;`),_=R(()=>["◼","⬥","＋","✳","✕"].includes(o(f))?"series-points2":"series-points1"),b=R(()=>o(h)&&o(g)&&o(h).length===o(g).length);var p=ce(),w=Z(p);{var M=y=>{var k=pv();k.__click=S=>jr(S,"text",e.onclick),Ge(k,21,()=>o(h),Ze,(S,T,C)=>{var E=gv(),N=V(E);le(()=>{O(E,"x",o(h)[C]),O(E,"y",o(g)[C]),ae(N,o(f))}),L(S,E)}),le(()=>{it(k,0,`series series-points ${o(_)??""}`),Wt(k,o(m))}),L(y,k)};Y(w,y=>{o(b)&&y(M)})}L(t,p),ye()}tt(["click"]);var bv=xe('<g class="series series-line"><polyline class="line"></polyline></g>');function sn(t,e){we(e,!0);let r=U(e,"lineColor",19,()=>yt.PRIMARY),s=U(e,"lineType",3,1),l=U(e,"lineWidth",3,1);const a=R(()=>Nt(e.xValues,"Lines")),c=R(()=>o(a)?Nt(e.yValues,"Lines",o(a).length):null),f=It("axes"),u=R(()=>o(a)&&o(c)?ff(o(a),o(c),f.tX(),f.tY()):null),v=R(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${es[f.scales().plot][s()-1]}`);var d=ce(),h=Z(d);{var g=m=>{var _=bv();_.__click=p=>jr(p,"polyline",e.onclick);var b=V(_);le(()=>{Wt(_,o(v)),O(b,"points",o(u))}),L(m,_)};Y(h,m=>{o(u)&&m(g)})}L(t,d),ye()}tt(["click"]),tt(["click"]);function _v(t,e){we(e,!0);let r=U(e,"show",3,!0),s=U(e,"position",3,"topleft"),l=U(e,"lineColor",19,()=>yt.LEGEND),a=U(e,"lineWidth",3,1),c=U(e,"faceColor",3,"#fff"),f=U(e,"fontSize",3,.85);function u(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function v(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let g=0;g<h.length;g++){const m=h[g];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const _=Pr(m.label),b=_.length===m.label?1:1.4;m.label=_,m.labelHeight=b,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(g+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:yt.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=Mr.length||console.error('Legend: parameter "marker" for legend item '+(g+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.markerSize=m.point.markerSize?m.point.markerSize:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:yt.PRIMARY)}return h}const d=It("axes");ke(()=>{const h=v(e.items),g=u(s());d.setGroupLegend(h&&g?{show:r(),position:s(),items:e.items,lineColor:l(),faceColor:c(),lineWidth:a(),fontSize:f()}:{show:!1,position:null,items:null})}),ye()}var wv=H("<!> <!> <!>",1);function ca(t,e){we(e,!0);const r="#80808060",s=R(()=>e.calset.varvalues),l=R(()=>{if(!e.calset)return null;const v=o(s).length;let d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;const g=he.zeros(v),m=he.zeros(v);for(let _=0;_<o(s).length;_++){const b=e.calset.values.getcolumn(_+1),p=pn(b),w=yr(b),M=p+w,y=p-w;g.v[_]=p,m.v[_]=w,d=Math.min(d,y),h=Math.max(h,M)}return{m:g,s:m,mn:d,mx:h,scale:1/(h-d)}}),a=R(()=>{if(!o(l))return null;let v=e.limY[1]-e.limY[0],d=e.limY[0]+v*.1;v=e.limY[1]-v*.3-d;const g=o(s).length,m=he.zeros(g),_=he.zeros(g),b=he.zeros(g),p=o(l).scale*v;for(let w=0;w<g;w++){const M=o(l).m.v[w],y=o(l).s.v[w],k=M+y,S=M+y;_.v[w]=(k-o(l).mn)*p+d,b.v[w]=(S-o(l).mn)*p+d,m.v[w]=(M-o(l).mn)*p+d}return{m,su:_,sb:b}});var c=ce(),f=Z(c);{var u=v=>{var d=wv(),h=Z(d);sn(h,{get xValues(){return o(s)},get yValues(){return o(a).m},lineColor:r,lineWidth:2});var g=I(h,2);sn(g,{get xValues(){return o(s)},get yValues(){return o(a).sb},lineColor:r,lineWidth:1,lineType:3});var m=I(g,2);sn(m,{get xValues(){return o(s)},get yValues(){return o(a).su},lineColor:r,lineWidth:1,lineType:3}),L(v,d)};Y(f,v=>{o(a)&&v(u)})}L(t,c),ye()}const yv=[1,1.1,.45,.4],xv=8,Ev=8,kv=600;function ss(t,e){av(t,{get limX(){return e.limX},get limY(){return e.limY},get title(){return e.title},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return yv},get pngWidth(){return xv},get pngHeight(){return Ev},get pngRes(){return kv},children:(r,s)=>{var l=ce(),a=Z(l);Nn(a,()=>e.children),L(r,l)},$$slots:{default:!0}})}var Cv=H("<!> <!> <!> <!> <!> <!> <!>",1);function Sv(t,e){we(e,!0);const r="ddsimca-love-intervals",s=R(()=>e.props.s);function l(w){if(!w)return[0,1];const M=w.varvalues[0],y=w.varvalues[w.varvalues.length-1],k=y-M;return[M-k*.1,y+k*.025]}const a=R(()=>{if(!o(s).outcomes)return"Data and intervals";if(o(s).outcomes.status==="running")return"Calculation in progress..."}),c=R(()=>o(s).calset.varAxisTitle),f=R(()=>o(s).varselparams?Array(o(s).varselparams.nInt).fill(10):null),u=R(()=>o(s).varselparams?Array(o(s).varselparams.nInt).fill(22):null),v=R(()=>o(f)&&o(u)?{left:o(s).varselparams.left,width:o(s).varselparams.width,top:o(f),height:o(u)}:null),d=R(()=>{if(o(v)&&o(s).intExcluded.length>0){const w=o(s).intExcluded.length,M=Array(w),y=Array(w),k=Array(w),S=Array(w);for(let T=0;T<w;T++)M[T]=o(v).left[o(s).intExcluded[T]],y[T]=o(v).width[o(s).intExcluded[T]],k[T]=o(v).top[o(s).intExcluded[T]],S[T]=o(v).height[o(s).intExcluded[T]];return{left:M,width:y,top:k,height:S}}else return null}),h=R(()=>o(s).outcomes&&o(s).outcomes.status==="running"&&o(v)?{left:[o(v).left[o(s).outcomes.curInt]],width:[o(v).width[o(s).outcomes.curInt]],top:[2],height:[4],faceColor:"#fffa0040"}:null),g=R(()=>l(o(s).calset)),m=R(()=>[0,1.1]);var _=ce(),b=Z(_);{var p=w=>{ss(w,{fileName:r,get limX(){return o(g)},get limY(){return o(m)},get title(){return o(a)},children:(M,y)=>{var k=Cv(),S=Z(k);ca(S,{get calset(){return o(s).calset},get limY(){return o(m)}});var T=I(S,2);{var C=A=>{rn(A,Fe({lineColor:"transparent",faceColor:"#00000040"},()=>o(d)))};Y(T,A=>{o(d)&&A(C)})}var E=I(T,2);{var N=A=>{var q=ce(),W=Z(q);{var G=K=>{rn(K,Fe(()=>o(h)))};Y(W,K=>{o(h)&&K(G)})}L(A,q)};Y(E,A=>{o(s).outcomes&&o(s).outcomes.status==="running"&&A(N)})}var j=I(E,2);{var P=A=>{rn(A,Fe({lineColor:"#00000010",faceColor:"#00000005"},()=>o(v)))};Y(j,A=>{o(v)&&A(P)})}var z=I(j,2);rs(z,{});var D=I(z,2);ts(D,{get label(){return o(c)}});var F=I(D,2);ns(F,{showGrid:!0}),L(M,k)}})};Y(b,w=>{o(g)&&o(m)&&w(p)})}L(t,_),ye()}var Av=xe("<text><!></text>");function ua(t,e){we(e,!0);let r=U(e,"dx",3,0);U(e,"dy",3,0);let s=U(e,"pos",3,0),l=U(e,"faceColor",19,()=>Colors.PRIMARY_TEXT),a=U(e,"textSize",3,1);function c(){return s()<.25?"start":s()>.75?"end":"middle"}function f(w){return w<.25?e.x:w>.75?e.x+r():e.x+r()/2}const u=R(()=>c(s())),v=It("axes"),d=R(()=>e.x?nt(Nt([f(s())]),v.tX()):null),h=R(()=>e.y?nt(Nt([e.y]),v.tY()):null),g=R(()=>Kl[v.scales().plot]),m=R(()=>e.x&&e.y);var _=ce(),b=Z(_);{var p=w=>{var M=ce(),y=Z(M);Ge(y,17,()=>e.label,Ze,(k,S,T)=>{var C=Av(),E=V(C);wt(E,()=>o(S),!0),le(()=>{O(C,"x",o(d)),O(C,"y",o(h)-o(g)*T),O(C,"text-anchor",o(u)),O(C,"fill",l()),O(C,"font-size",`${a()??""}em`)}),L(k,C)}),L(w,M)};Y(b,w=>{o(m)&&w(p)})}L(t,_),ye()}var Nv=H("<!> <!>",1),Mv=H("<!> <!> <!>",1),jv=H("<!> <!>",1),Pv=H("<!> <!>",1),Tv=H("<!> <!>",1),Lv=H("<!> <!> <!>; <!>",1);function Rv(t,e){we(e,!0);let r=U(e,"yMin",15),s=U(e,"yMax",15);const l=R(()=>{if(!e.fomView||!e.s.outcomes||e.s.outcomes.status!=="done")return{min:0,max:1,values:null};const _=e.s.varselparams.mid,b=e.s.varselparams.width,p=_.length;let w=0,M=0,y={};const k=e.fomView==="diff"?.21:.84,S=e.fomView==="diff"?1:0,T=.42;let C=0;for(const E of e.fomKeys){const N=e.s.outcomes[E][e.fomView].getcolumn(e.s.nComp).v,j=Array(p),P=Array(p),z=Array(p),D=Array(p);for(let F=0;F<p;F++)j[F]=_[F]-T*b[F]+C*k*S*b[F],D[F]=k*b[F],N[F]>=0?(P[F]=N[F],z[F]=N[F],M=Math.max(M,N[F])):(P[F]=0,z[F]=-N[F],w=Math.min(w,N[F]));y[E]={left:j,top:P,height:z,width:D,faceColor:"#a8a04060"},C=C+1}return{values:y,min:w,max:M}}),a=R(()=>o(l)?(o(l).max-o(l).min)*.2:0);ke(()=>{r(o(l).min-o(a)),s(o(l).max+o(a))});const c=R(()=>{if(!o(l)||!o(l).values||e.s.intSelected===void 0||e.s.intSelected===null||e.s.intSelected<0)return null;const _=e.s.intSelected,b={},p={},w=o(l).values[e.fomKeys[0]],M=w.left[_],y=w.width[_];let k,S;e.fomView==="diff"?(k=M-y/2,S=y*e.fomKeys.length+y):(k=M,S=y);for(const T of e.fomKeys){const C=o(l).values[T],E=C.left[_],N=C.width[_],j=C.top[_],P=C.height[_],z=j===0?-P:P,D=e.s.varselparams.intLabels[_];b[T]={left:[E],width:[N],top:[j],height:[P]},p[T]={x:k,y:e.fomView==="diff"?s()-.5*o(a):1.02,dx:S,dy:o(a),label:[z.toFixed(3),D],pos:_/e.s.varselparams.nInt,textSize:.8,faceColor:e.seriesColors.selected}}return{psl:b,tsl:p}}),f=R(()=>e.s.statsGlobal&&e.fom?e.s.statsGlobal[e.fom][e.s.statsGlobal.ncompBest?e.s.statsGlobal.ncompBest-1:e.s.nComp-1]:null),u=R(()=>e.s.statsCurrent&&e.fom&&e.s.statsCurrent.ncompBest?e.s.statsCurrent[e.fom][e.s.statsCurrent.ncompBest?e.s.statsCurrent.ncompBest-1:e.s.nComp-1]:null),v=R(()=>o(l).values&&e.fom?o(l).values[e.fom]:null),d=R(()=>o(v)?(e.limX[0]+o(v).left[0])*.5:0);var h=ce(),g=Z(h);{var m=_=>{var b=ce(),p=Z(b);{var w=y=>{var k=Mv(),S=Z(k);{let N=R(()=>[e.limX[0]]),j=R(()=>[e.limX[1]]);lo(S,{get xStart(){return o(N)},get xEnd(){return o(j)},yStart:[0],yEnd:[0],lineColor:"#808080"})}var T=I(S,2);Ge(T,17,()=>e.fomKeys,Ze,(N,j)=>{{let P=R(()=>"#a8a040"+(o(j)===e.fom?"e0":"60"));rn(N,Fe(()=>o(l).values[o(j)],{lineWidth:0,get faceColor(){return o(P)}}))}});var C=I(T,2);{var E=N=>{var j=Nv(),P=Z(j);Ge(P,17,()=>e.fomKeys,Ze,(D,F)=>{{let A=R(()=>e.seriesColors.selected+(o(F)===e.fom?"":"40"));rn(D,Fe(()=>o(c).psl[o(F)],{lineWidth:0,get faceColor(){return o(A)}}))}});var z=I(P,2);ua(z,Fe(()=>o(c).tsl[e.fom])),L(N,j)};Y(C,N=>{o(c)&&N(E)})}L(y,k)},M=y=>{var k=Lv(),S=Z(k);{var T=z=>{var D=jv(),F=Z(D);{let q=R(()=>[e.limX[0]]),W=R(()=>[e.limX[1]]),G=R(()=>[o(f)]),K=R(()=>[o(f)]);lo(F,{get xStart(){return o(q)},get xEnd(){return o(W)},get yStart(){return o(G)},get yEnd(){return o(K)},get lineColor(){return e.seriesColors.global}})}var A=I(F,2);{let q=R(()=>[o(d)]),W=R(()=>[o(f)]),G=R(()=>[o(f).toFixed(3)]),K=R(()=>o(f)>o(u)?3:1);ia(A,{get xValues(){return o(q)},get yValues(){return o(W)},get labels(){return o(G)},get pos(){return o(K)},textSize:.85,get faceColor(){return e.seriesColors.global}})}L(z,D)};Y(S,z=>{o(f)&&z(T)})}var C=I(S,2);{var E=z=>{var D=Pv(),F=Z(D);{let q=R(()=>[e.limX[0]]),W=R(()=>[e.limX[1]]),G=R(()=>[o(u)]),K=R(()=>[o(u)]);lo(F,{get xStart(){return o(q)},get xEnd(){return o(W)},get yStart(){return o(G)},get yEnd(){return o(K)},lineType:3,get lineColor(){return e.seriesColors.best}})}var A=I(F,2);{let q=R(()=>[o(d)]),W=R(()=>[o(u)]),G=R(()=>[o(u).toFixed(3)]),K=R(()=>o(f)>o(u)?1:3);ia(A,{get xValues(){return o(q)},get yValues(){return o(W)},get labels(){return o(G)},get pos(){return o(K)},textSize:.85,get faceColor(){return e.seriesColors.best}})}L(z,D)};Y(C,z=>{o(u)&&z(E)})}var N=I(C,2);rn(N,Fe(()=>o(v),{faceColor:"#a8a04080"}));var j=I(N,2);{var P=z=>{var D=Tv(),F=Z(D);rn(F,Fe(()=>o(c).psl[e.fom],{lineWidth:0,get faceColor(){return e.seriesColors.selected}}));var A=I(F,2);ua(A,Fe(()=>o(c).tsl[e.fom])),L(z,D)};Y(j,z=>{o(c)&&z(P)})}L(y,k)};Y(p,y=>{e.fomView==="diff"?y(w):y(M,!1)})}L(_,b)};Y(g,_=>{o(l)&&_(m)})}L(t,h),ye()}var Iv=H("<!> <!> <!> <!> <!> <!> <!> <!>",1);function zv(t,e){we(e,!0);const r="ddsimca-love-outcomes",s=R(()=>e.props?e.props.s:null),l=R(()=>e.props?e.props.fomKeys:null),a=R(()=>e.props?e.props.fomNames:null),c=R(()=>e.props?e.props.seriesColors:null);let f=ie(0),u=ie(1),v=R(()=>o(s).calset.varAxisTitle);function d(T){if(!T)return[0,1];const C=T.varvalues[0],E=T.varvalues[T.varvalues.length-1],N=E-C;return[C-N*.1,E+N*.025]}const h=R(()=>o(s).outcomes?o(s).outcomes.status==="running"?"Selection in progress...":"Variable selection outcomes (A = "+o(s).nComp+")":"Data and intervals"),g=R(()=>!o(s).outcomes||o(s).outcomes.status==="running"?" ":(e.params.fomView==="diff"?"Difference in ":"")+o(a)[e.params.fom]),m=R(()=>o(s).varselparams?Array(o(s).varselparams.nInt).fill(10):null),_=R(()=>o(s).varselparams?Array(o(s).varselparams.nInt).fill(22):null),b=R(()=>o(m)&&o(_)?{left:o(s).varselparams.left,width:o(s).varselparams.width,top:o(m),height:o(_)}:null),p=R(()=>{if(o(b)&&o(s).intExcluded.length>0){const T=o(s).intExcluded.length,C=Array(T),E=Array(T),N=Array(T),j=Array(T);for(let P=0;P<T;P++)C[P]=o(b).left[o(s).intExcluded[P]],E[P]=o(b).width[o(s).intExcluded[P]],N[P]=o(b).top[o(s).intExcluded[P]],j[P]=o(b).height[o(s).intExcluded[P]];return{left:C,width:E,top:N,height:j}}else return null}),w=R(()=>d(o(s).calset)),M=R(()=>e.params.fomView==="diff"?[o(f),o(u)]:[0,1.1]);var y=ce(),k=Z(y);{var S=T=>{ss(T,{fileName:r,get limX(){return o(w)},get limY(){return o(M)},get title(){return o(h)},children:(C,E)=>{var N=Iv(),j=Z(N);ca(j,{get calset(){return o(s).calset},get limY(){return o(M)}});var P=I(j,2);{var z=re=>{Rv(re,{get s(){return o(s)},get limX(){return o(w)},get fomKeys(){return o(l)},get seriesColors(){return o(c)},get fomView(){return e.params.fomView},get fom(){return e.params.fom},get yMin(){return o(f)},set yMin(te){J(f,te,!0)},get yMax(){return o(u)},set yMax(te){J(u,te,!0)}})};Y(P,re=>{o(s).outcomes&&re(z)})}var D=I(P,2);{var F=re=>{{let te=R(()=>[o(b).left[o(s).intSelected]]),Q=R(()=>[o(b).width[o(s).intSelected]]),$=R(()=>[o(b).top[o(s).intSelected]]),ne=R(()=>[o(b).height[o(s).intSelected]]);rn(re,{get left(){return o(te)},get width(){return o(Q)},get top(){return o($)},get height(){return o(ne)},lineColor:"#00000010",faceColor:"#ff000010"})}};Y(D,re=>{o(b)&&o(s).intSelected>=0&&re(F)})}var A=I(D,2);{var q=re=>{rn(re,Fe({className:"series-love-intervals",lineColor:"#00000010",faceColor:"#00000005"},()=>o(b),{get onclick(){return e.callbacks.select}}))};Y(A,re=>{o(b)&&re(q)})}var W=I(A,2);{var G=re=>{rn(re,Fe({lineColor:"transparent",faceColor:"#00000040"},()=>o(p)))};Y(W,re=>{o(p)&&re(G)})}var K=I(W,2);rs(K,{});var oe=I(K,2);ts(oe,{get label(){return o(v)}});var se=I(oe,2);ns(se,{get label(){return o(g)},showGrid:!0}),L(C,N)}})};Y(k,T=>{e.params&&o(w)&&o(M)&&T(S)})}L(t,y),ye()}var Fv=H("<!> <!>",1),qv=H("<!> <!> <!>",1),Ov=H("<!> <!>",1),Dv=H("<!> <!> <!> <!> <!>",1),Vv=H("<!> <!> <!> <!> <!>",1);function Bv(t,e){we(e,!0);const r="ddsimca-love-progress",s=R(()=>e.props?e.props.s:null),l=R(()=>e.props?e.props.fomKeys:null),a=R(()=>e.props?e.props.fomNames:null),c=R(()=>e.props?e.props.seriesColors:null),f="Variable selection progress",u="Steps",v=R(()=>o(a)[e.params.fom]),d=R(()=>o(s).statsProgress?o(s).statsProgress.length:0),h=R(()=>o(d)>0?Xt(0,o(d)-1):null),g=R(()=>{if(o(d)<1)return null;const E={};let N=1.1,j=0;for(let P=0;P<o(d);P++){const z=o(s).statsProgress[P];for(const D of o(l)){P===0&&(E[D]=[]);const F=z[D];E[D].push(F),N=Math.min(N,F),j=Math.max(j,F)}}return{series:E,min:N,max:j}}),m=R(()=>o(g)?{xValues:o(h),yValues:o(g).series[e.params.fom]}:null),_=R(()=>o(m)?{xValues:[o(d)-1],yValues:[o(m).yValues[o(d)-1]]}:null),b=R(()=>o(m)?{xValues:[0],yValues:[o(m).yValues[0]]}:null),p=R(()=>{if(!o(m)||!o(s).outcomes||o(s).outcomes.status!=="done"||o(s).intSelected<0)return null;let E=1,N=0,j={};for(const P of o(l)){const z=o(s).outcomes[P].val.getcolumn(o(s).nComp).v[o(s).intSelected];E=Math.min(E,z),N=Math.max(N,z),j[P]={xValues:[o(d)-1,o(d)],yValues:[o(g).series[P][o(d)-1],z]}}return{series:j,min:E,max:N}}),w=R(()=>o(p)?o(p).series[e.params.fom]:null),M=R(()=>o(_)?{xValues:[o(d)-1,o(d)],yValues:[o(_).yValues[0],o(w).yValues[1]]}:null),y=R(()=>o(d)>0?o(w)?[-.5,o(d)+.5]:[-.5,o(d)-.5]:[0,1]),k=R(()=>{if(!o(g)||!e.params.zoom)return[0,1.1];const E=o(g).min,N=o(g).max;return o(p)?[Math.min(E,o(p).min)-.02,Math.max(N,o(p).max+.02)]:[E-.02,N+.02]});var S=ce(),T=Z(S);{var C=E=>{ss(E,{fileName:r,get limX(){return o(y)},get limY(){return o(k)},title:f,children:(N,j)=>{var P=Vv(),z=Z(P);{var D=K=>{var oe=qv(),se=Z(oe);Ge(se,17,()=>Object.keys(o(p).series),Ze,(Q,$)=>{var ne=Fv(),fe=Z(ne);sn(fe,Fe(()=>o(p).series[o($)],{lineColor:"#d0d0d0",lineType:3}));var _e=I(fe,2);Vt(_e,Fe(()=>o(p).series[o($)],{markerSize:.75,lineColor:"#d0d0d0",faceColor:"#e0e0e0"})),L(Q,ne)});var re=I(se,2);sn(re,Fe(()=>o(M),{get lineColor(){return o(c).selected},lineType:3}));var te=I(re,2);Vt(te,Fe(()=>o(w),{get lineColor(){return o(c).selected},get faceColor(){return o(c).selected},borderWidth:2})),L(K,oe)};Y(z,K=>{o(w)&&K(D)})}var F=I(z,2);{var A=K=>{var oe=Dv(),se=Z(oe);Ge(se,17,()=>Object.keys(o(g).series),Ze,(ne,fe)=>{var _e=Ov(),me=Z(_e);sn(me,{get xValues(){return o(h)},get yValues(){return o(g).series[o(fe)]},lineColor:"#d0d0d0"});var Ce=I(me,2);Vt(Ce,{get xValues(){return o(h)},get yValues(){return o(g).series[o(fe)]},markerSize:.75,lineColor:"#d0d0d0",faceColor:"#e0e0e0"}),L(ne,_e)});var re=I(se,2);sn(re,Fe(()=>o(m),{lineColor:"#808080",lineWidth:2}));var te=I(re,2);Vt(te,Fe(()=>o(m),{lineColor:"#808080",faceColor:"#fafafa"}));var Q=I(te,2);Vt(Q,Fe(()=>o(_),{get lineColor(){return o(c).best},lineWidth:2}));var $=I(Q,2);Vt($,Fe(()=>o(b),{get lineColor(){return o(c).global},lineWidth:2})),L(K,oe)};Y(F,K=>{o(m)&&K(A)})}var q=I(F,2);rs(q,{});var W=I(q,2);ts(W,{showGrid:!0,label:u,whole:!0});var G=I(W,2);ns(G,{showGrid:!0,get label(){return o(v)}}),L(N,P)}})};Y(T,E=>{o(g)&&E(C)})}L(t,S),ye()}var Yv=H("<!> <!> <!>",1),Wv=H("<!> <!> <!>",1),Uv=H("<!> <!> <!>",1),Gv=H("<!> <!> <!> <!> <!> <!> <!>",1);function Hv(t,e){we(e,!0);const r=R(()=>e.props.s),s=R(()=>e.props?e.props.fomKeys:null),l=R(()=>e.props?e.props.fomNames:null),a=R(()=>e.props?e.props.seriesColors:null),c="ddsimca-love-models",f="PCs",u="Variable selection outcomes",v=[0,1.1],d=R(()=>o(l)[e.params.fom]);function h(N,j){return{label:N,line:{lineColor:j.lineColor},point:{lineColor:j.lineColor,lineWidth:1.25,faceColor:"#fafafa",marker:1}}}function g(N,j,P){const z=[];return N&&z.push(h("global",N)),j&&z.push(h("current",j)),P&&z.push(h("selected ("+(o(r).intSelected+1)+")",P)),z}let m=R(()=>o(r).statsGlobal?o(r).statsGlobal[[o(s)[0]]].length:1),_=R(()=>[0,o(m)+1]),b=R(()=>o(r).statsGlobal&&e.params.fom?{xValues:he.seq(1,o(m)),yValues:new he(o(r).statsGlobal[e.params.fom]),lineColor:o(a).global}:null),p=R(()=>o(b)?{xValues:[o(r).nComp],yValues:[o(b).yValues.v[o(r).nComp-1]],lineColor:o(a).global}:null),w=R(()=>o(r).statsCurrent&&e.params.fom?{xValues:he.seq(1,o(r).statsCurrent[e.params.fom].length),yValues:new he(o(r).statsCurrent[e.params.fom]),lineColor:o(a).best}:null),M=R(()=>o(w)?{xValues:[o(r).nComp],yValues:[o(w).yValues.v[o(r).nComp-1]],lineColor:o(a).best}:null),y=R(()=>o(r).outcomes&&e.params.fom&&o(r).intSelected>=0?{xValues:he.seq(1,o(r).outcomes[e.params.fom].val.ncols),yValues:o(r).outcomes[e.params.fom].val.getrow(o(r).intSelected+1),lineColor:o(a).selected}:null),k=R(()=>o(y)?{xValues:[o(r).nComp],yValues:[o(y).yValues.v[o(r).nComp-1]],lineColor:o(a).selected}:null),S=R(()=>g(o(b),o(w),o(y)));var T=ce(),C=Z(T);{var E=N=>{ss(N,{fileName:c,get limX(){return o(_)},get limY(){return v},title:u,children:(j,P)=>{var z=Gv(),D=Z(z);{var F=te=>{var Q=Yv(),$=Z(Q);sn($,Fe(()=>o(b)));var ne=I($,2);Vt(ne,Fe(()=>o(b),{faceColor:"#fafafa"}));var fe=I(ne,2);Vt(fe,Fe(()=>o(p),{faceColor:"#fafafa",lineWidth:3})),L(te,Q)};Y(D,te=>{o(b)&&te(F)})}var A=I(D,2);{var q=te=>{var Q=Wv(),$=Z(Q);sn($,Fe(()=>o(w)));var ne=I($,2);Vt(ne,Fe(()=>o(w),{faceColor:"#fafafa"}));var fe=I(ne,2);Vt(fe,Fe(()=>o(M),{faceColor:"#fafafa",lineWidth:3})),L(te,Q)};Y(A,te=>{o(w)&&te(q)})}var W=I(A,2);{var G=te=>{var Q=Uv(),$=Z(Q);sn($,Fe(()=>o(y)));var ne=I($,2);Vt(ne,Fe(()=>o(y),{faceColor:"#fafafa"}));var fe=I(ne,2);Vt(fe,Fe(()=>o(k),{faceColor:"#fafafa",lineWidth:3})),L(te,Q)};Y(W,te=>{o(y)&&te(G)})}var K=I(W,2);_v(K,{get items(){return o(S)},position:"bottomright"});var oe=I(K,2);rs(oe,{});var se=I(oe,2);ts(se,{showGrid:!0,label:f,whole:!0});var re=I(se,2);ns(re,{showGrid:!0,get label(){return o(d)}}),L(j,z)}})};Y(C,N=>{e.params&&N(E)})}L(t,T),ye()}function Kv(t,e){we(e,!0);const r=R(()=>e.props.s);ke(()=>{e.selected>-1&&e.props.selectInt(e.selected)}),ke(()=>{o(r).intSelected<0&&e.callbacks.select(o(r).intSelected)});var s=ce(),l=Z(s);{var a=f=>{zv(f,{get props(){return e.props},get params(){return e.params},get callbacks(){return e.callbacks},get selected(){return e.selected}})},c=f=>{var u=ce(),v=Z(u);{var d=g=>{Bv(g,{get props(){return e.props},get params(){return e.params}})},h=g=>{var m=ce(),_=Z(m);{var b=w=>{Hv(w,{get props(){return e.props},get params(){return e.params}})},p=w=>{Sv(w,{get props(){return e.props},get params(){return e.params}})};Y(_,w=>{e.params.plot==="statistics"?w(b):w(p,!1)},!0)}L(g,m)};Y(v,g=>{e.params.plot==="progress"&&o(r).statsProgress?g(d):g(h,!1)},!0)}L(f,u)};Y(l,f=>{e.params.plot==="intervals"&&o(r).outcomes&&o(r).outcomes.status==="done"?f(a):f(c,!1)})}L(t,s),ye()}var Xv=H('<div class="msg-select"> </div>'),Zv=H('<div class="msg-select"> </div>'),Jv=H('<div class="msg-select"> </div>'),Qv=H('<div class="msg-select"> </div>'),$v=H('<div class="selected-buttons svelte-188sk7n"><!></div>'),ed=H('<div class="selected-buttons svelte-188sk7n"><!></div>'),td=H("<!> <!> <!>",1),nd=H("<button> </button>"),rd=H('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function sd(t,e){we(e,!0);let r=U(e,"selobjText",3,"Click to select an object..."),s=U(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=U(e,"clearText",3,"Click anywhere to remove selection..."),a=U(e,"params",15),c=We({objects:-1,variables:[]}),f=ie(We(Object.keys(e.plots)[0]));function u(N,j){c.objects=j?j[N]:N}function v(N){c.objects=-1}function d(N){c.variables=N}function h(N){c.variables=[]}let g={objects:{select:u,unselect:v},variables:{select:d,unselect:h},stats:{}},m=R(()=>o(f)?e.plots[o(f)]:null),_=R(()=>o(m)?o(m).component:null);var b=rd(),p=V(b),w=V(p),M=V(w);Ms(M,()=>o(_),(N,j)=>{j(N,{get params(){return a()[o(f)]},get callbacks(){return g[o(m).scope]},get selected(){return c[o(m).scope]},get props(){return e.props}})});var y=I(w,2),k=V(y);{var S=N=>{var j=ce(),P=Z(j);{var z=F=>{var A=Xv(),q=V(A);le(()=>ae(q,r())),L(F,A)},D=F=>{var A=Zv(),q=V(A);le(()=>ae(q,l())),L(F,A)};Y(P,F=>{c[o(m).scope]<0?F(z):F(D,!1)})}L(N,j)};Y(k,N=>{o(m).scope==="objects"&&a()[o(f)].plotType!=="l"&&r().length>0&&N(S)})}var T=I(k,2);{var C=N=>{var j=ce(),P=Z(j);{var z=F=>{var A=Jv(),q=V(A);le(()=>ae(q,s())),L(F,A)},D=F=>{var A=Qv(),q=V(A);le(()=>ae(q,l())),L(F,A)};Y(P,F=>{c[o(m).scope].length===0?F(z):F(D,!1)})}L(N,j)};Y(T,N=>{o(m).scope==="variables"&&a()[o(f)].plotType!=="l"&&s().length>0&&N(C)})}var E=I(p,2);Ge(E,21,()=>Object.keys(e.plots),Ze,(N,j)=>{var P=ce(),z=Z(P);{var D=A=>{var q=td(),W=Z(q);bu(W,{get title(){return o(m).label},labelWidth:12,get options(){return e.controls[o(f)]},get value(){return a()[o(f)]},set value(re){a(a()[o(f)]=re,!0)}});var G=I(W,2);{var K=re=>{var te=$v(),Q=V(te);Nn(Q,()=>o(m).buttons,()=>c.objects),L(re,te)};Y(G,re=>{o(m).scope==="objects"&&o(m).buttons&&c.objects>=0&&re(K)})}var oe=I(G,2);{var se=re=>{var te=ed(),Q=V(te);Nn(Q,()=>o(m).buttons,()=>c.variables),L(re,te)};Y(oe,re=>{o(m).scope==="variables"&&o(m).buttons&&c.variables.length>0&&re(se)})}L(A,q)},F=A=>{var q=nd();q.__keydown=()=>switchPlot(i),q.__click=()=>J(f,o(j),!0);var W=V(q);le(()=>{it(q,1,`plot-selector plot-selector-${o(j)??""}`,"svelte-188sk7n"),ae(W,e.plots[o(j)].label)}),L(A,q)};Y(z,A=>{o(m)&&o(f)===o(j)?A(D):A(F,!1)})}L(N,P)}),L(t,b),ye()}tt(["keydown","click"]);var od=H("<!> <!>",1);function ld(t,e){we(e,!0);const r=(_,b=kt)=>{var p=ce(),w=Z(p);{var M=y=>{{let k=R(()=>e.s.intSelected+1);pe(y,{get label(){return`Selected (${o(k)??""})`},children:(S,T)=>{var C=od(),E=Z(C);st(E,{get onclick(){return e.cancelSelection},text:"cancel"});var N=I(E,2);st(N,{onclick:()=>e.setExcluded(e.s.intSelected),text:"exclude"}),L(S,C)},$$slots:{default:!0}})}};Y(w,y=>{e.s.intSelected>=0&&y(M)})}L(_,p)};let s=ie(!0);const l={sens:"sensitivity",spec:"specificity",eff:"efficiency",sel:"selectivity"},a=Object.keys(l),c={global:"#404040",best:"#2679B2",selected:"#D22C2F"},f=["intervals","progress","statistics"],u=lr(e.s.altset)?["sens"]:["sens","spec","eff","sel"],v={txt:{el:Rt,hidden:!1,default:"Run selection",label:"Run selection"},plot:{el:Rt,name:"plot",hidden:!1,default:"intervals",label:"Show",props:{options:f}},fom:{el:Rt,name:"fom",hidden:!1,default:"sens",label:"Statistic",props:{options:u}},nComp:{el:Ul,name:"ncomp",hidden:!1,default:1,label:"# PCs",props:{min:1,max:1,step:1,decNum:0}},fomView:{el:Rt,name:"fomview",hidden:!1,default:"val",label:"Show",props:{options:["diff","val"]}},zoom:{el:Nr,name:"zoom",hidden:!1,default:!1,label:"Zoom",props:{options:["off","on"]}}},d=R(()=>({main:{label:"Outcomes",scope:"objects",component:Kv,buttons:r}})),h=We({main:v});let g=ie(We({main:ru(v)}));ke(()=>{e.s.outcomes&&e.s.outcomes.status==="done"&&(h.main.nComp.props.max=e.s.outcomes.ncomp)}),ke(()=>{e.s.outcomes&&e.s.outcomes.status==="running"?(J(s,!0),o(g).main.plot="intervals",h.main.txt.hidden=!1,h.main.plot.hidden=!0):(J(s,!1),h.main.txt.hidden=!0,h.main.plot.hidden=!1)}),ke(()=>{o(g).main.plot==="intervals"&&e.s.outcomes&&e.s.outcomes.status==="done"?h.main.fomView.hidden=!1:h.main.fomView.hidden=!0}),ke(()=>{o(g).main.plot==="intervals"&&e.s.outcomes&&e.s.outcomes.status==="done"||o(g).main.plot==="progress"||o(g).main.plot==="statistics"?h.main.fom.hidden=!1:h.main.fom.hidden=!0}),ke(()=>{o(g).main.plot!=="progress"?h.main.zoom.hidden=!0:h.main.zoom.hidden=o(s)}),ke(()=>{o(g).main.plot==="progress"||!e.s.outcomes||e.s.outcomes.status!=="done"?h.main.nComp.hidden=!0:h.main.nComp.hidden=o(s)}),ke(()=>{e.s.statsProgress?h.main.plot={label:"Show",hidden:!1,el:Rt,props:{options:["intervals","progress","statistics"]}}:(h.main.plot={label:"Show",hidden:!1,el:Rt,props:{options:["intervals","statistics"]}},o(g).plot==="progress"&&(o(g).plots="intervals"))}),ke(()=>{e.setNComp(o(g).main.nComp)});const m=R(()=>({s:e.s,seriesColors:c,fomKeys:a,fomNames:l,selectInt:e.selectInt}));sd(t,{get props(){return o(m)},get plots(){return o(d)},get controls(){return h},selobjText:"",",":!0,get params(){return o(g)},set params(_){J(g,_,!0)}}),ye()}var ad=H('<p class="title">Variable selection settings</p>'),id=H('<p style="padding: 0.25em; font-weight:bold;"> </p>'),cd=H('<p style="padding: 0.25em; font-weight:bold;"> </p>'),ud=H("<!> <!>",1),fd=H('<p style="padding: 0.25em; font-weight:bold;"> </p> <!>',1),vd=H('<p style="padding: 0.25em;font-weight:bold;">Calculation in progress...</p>'),dd=H('<p style="padding: 0.25em;font-weight:bold;">Select interval</p>'),hd=H('<p style="padding: 0.25em;color:crimson;font-weight:bold;">No intervals left for selection.</p>'),md=H("<!> <!> <!> <!>",1);function gd(t,e){we(e,!0);let r=U(e,"varselparams",15),s=U(e,"outcomes",15),l=U(e,"alpha",15);const a=[10,5,1,.1];let c=e.calset.values.ncols,f=ie(We(r()?r().nInt:c<50?c:10)),u=ie(We(e.curNInt)),v=e.calset.varvalues,d=e.calset.varlabels,h=Qc(c);async function g(E){const{center:N,scale:j,ncomp:P}=e.model,{nInt:z}=r(),D=e.calset.values,F=e.tarset.values,A=lr(e.altset)?null:e.altset.values,q=D.ncols-e.varsExcluded.length-r().intSize,W=P>q?q:P,G=ue.zeros(W,z),K=ue.zeros(W,z),oe=ue.zeros(W,z),se=ue.zeros(W,z),re=ue.zeros(W,z),te=ue.zeros(W,z),Q=ue.zeros(W,z),$=ue.zeros(W,z);for(let ne=0;ne<z;ne++){if(e.intExcluded.length>0&&e.intExcluded.includes(ne))continue;s({status:"running",curInt:ne});const fe=Xt(r().intLeftIndices[ne],r().intRightIndices[ne]),_e=r().intSize===1?[...e.varsExcluded,ne]:e.varsExcluded.concat(fe),me=await Zc(e.WASM,{varInd:_e,nComp:W,Xcal:D,Xtar:F,Xalt:A,center:N,scale:j,statsCurrent:e.statsCurrent,alpha:l()});G.v.set(me.sens.val,ne*W),K.v.set(me.spec.val,ne*W),oe.v.set(me.eff.val,ne*W),se.v.set(me.sel.val,ne*W),re.v.set(me.sens.diff,ne*W),te.v.set(me.spec.diff,ne*W),Q.v.set(me.eff.diff,ne*W),$.v.set(me.sel.diff,ne*W)}s({status:"done",ncomp:W,sens:{val:G.t(),diff:re.t()},spec:{val:K.t(),diff:te.t()},eff:{val:oe.t(),diff:Q.t()},sel:{val:se.t(),diff:$.t()}})}ke(()=>{o(u)!==o(f)&&(J(u,o(f),!0),s(null))}),ke(()=>{r(Jc(c,o(f),null,v,d))});var m=md(),_=Z(m);pe(_,{label:"",children:(E,N)=>{var j=ad();L(E,j)},$$slots:{default:!0}});var b=I(_,2);{var p=E=>{pe(E,{name:"alpha",label:"Alpha, %:",children:(N,j)=>{Rt(N,{id:"alpha",get options(){return a},get value(){return l()},set value(P){l(P)}})},$$slots:{default:!0}})},w=E=>{pe(E,{label:"Alpha, %:",children:(N,j)=>{var P=id(),z=V(P);le(()=>ae(z,l())),L(N,P)},$$slots:{default:!0}})};Y(b,E=>{e.intExcluded.length===0&&!s()?E(p):E(w,!1)})}var M=I(b,2);{var y=E=>{var N=ce(),j=Z(N);{var P=D=>{pe(D,{name:"nint",label:"N. of intervals:",children:(F,A)=>{Rt(F,{id:"nInt",get options(){return h},get value(){return o(f)},set value(q){J(f,q,!0)}})},$$slots:{default:!0}})},z=D=>{pe(D,{label:"N. of intervals:",children:(F,A)=>{var q=cd(),W=V(q);le(()=>ae(W,o(f))),L(F,q)},$$slots:{default:!0}})};Y(j,D=>{!s()||s().status!=="running"?D(P):D(z,!1)})}L(E,N)},k=E=>{pe(E,{label:"N. of intervals:",children:(N,j)=>{var P=fd(),z=Z(P),D=V(z),F=I(z,2);{var A=q=>{var W=ud(),G=Z(W);{var K=se=>{tu(se,{get onclick(){return e.undoExcluded}})};Y(G,se=>{e.intExcluded.length>=2&&se(K)})}var oe=I(G,2);ar(oe,{get onclick(){return e.resetExcluded}}),L(q,W)};Y(F,q=>{(!s()||s().status!=="running")&&q(A)})}le(()=>ae(D,`${o(f)??""} (${e.intExcluded.length??""} out, ${r().nInt-e.intExcluded.length} in)`)),L(N,P)},$$slots:{default:!0}})};Y(M,E=>{e.intExcluded.length===0||!r()?E(y):E(k,!1)})}var S=I(M,2);{var T=E=>{pe(E,{label:" ",children:(N,j)=>{var P=ce(),z=Z(P);{var D=A=>{var q=vd();L(A,q)},F=A=>{var q=dd();L(A,q)};Y(z,A=>{s().status==="running"?A(D):A(F,!1)})}L(N,P)},$$slots:{default:!0}})},C=E=>{var N=ce(),j=Z(N);{var P=z=>{pe(z,{label:" ",children:(D,F)=>{var A=ce(),q=Z(A);{var W=K=>{{let oe=R(()=>e.intExcluded.length>0?"new":"");st(K,{id:"run",onclick:()=>g(),get text(){return`Run ${o(oe)??""}`}})}},G=K=>{var oe=hd();L(K,oe)};Y(q,K=>{e.intExcluded.length<r().nInt-1&&e.varsExcluded.length<r().nVars-2?K(W):K(G,!1)})}L(D,A)},$$slots:{default:!0}})};Y(j,z=>{r()&&z(P)})}L(E,N)};Y(S,E=>{s()&&!(s().status==="done"&&e.intExcluded.length===0)?E(T):E(C,!1)})}L(t,m),ye()}var pd=H('<div class="model-calculator svelte-1xtvhtx"><!></div>'),bd=H("<!> <!>",1),_d=H("<h2>Upload target test set</h2>"),wd=H("<!> <!>",1),yd=H("<h2>Generate PV-set</h2>"),xd=H("<!> <!>",1),Ed=H('<div class="tarset-loader svelte-1xtvhtx"><!></div>'),kd=H("<!> <!>",1),Cd=H("<h2>Load alternative test set</h2>"),Sd=H("<!> <!>",1),Ad=H("<p>No alternative set (rigorous mode)</p> <!>",1),Nd=H('<div class="data-loader-alt svelte-1xtvhtx"><!> <!></div>'),Md=H('<div class="love-settings svelte-1xtvhtx"><!></div>'),jd=H('<div class="res-table svelte-1xtvhtx"><!></div>'),Pd=H('<div class="downloads-widget svelte-1xtvhtx"><!></div>'),Td=H(`<p class="svelte-1xtvhtx"><strong>Step 1. Load training set from a CSV file.</strong></p> <p class="svelte-1xtvhtx">The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1xtvhtx">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1xtvhtx">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1xtvhtx"><table class="svelte-1xtvhtx"><thead class="svelte-1xtvhtx"><tr class="svelte-1xtvhtx"><td class="svelte-1xtvhtx">Name</td><td class="svelte-1xtvhtx">Class</td><td class="svelte-1xtvhtx">x1</td><td class="svelte-1xtvhtx">x2</td><td class="svelte-1xtvhtx">x3</td></tr></thead><tbody><tr><td class="svelte-1xtvhtx">O1</td><td class="svelte-1xtvhtx">A</td><td class="svelte-1xtvhtx">3.8</td><td class="svelte-1xtvhtx">1.3</td><td class="svelte-1xtvhtx">13.6</td></tr><tr><td class="svelte-1xtvhtx">O2</td><td class="svelte-1xtvhtx">A</td><td class="svelte-1xtvhtx">11.1</td><td class="svelte-1xtvhtx">12.3</td><td class="svelte-1xtvhtx">3.3</td></tr><tr><td class="svelte-1xtvhtx">O3</td><td class="svelte-1xtvhtx">A</td><td class="svelte-1xtvhtx">1.2</td><td class="svelte-1xtvhtx">2.3</td><td class="svelte-1xtvhtx">4.2</td></tr></tbody></table></div> <p class="svelte-1xtvhtx"></p>`,1),Ld=H(`<p class="svelte-1xtvhtx"><strong>Step 2. Create a global PCA model</strong></p> <p class="svelte-1xtvhtx">Next step is to create a global PCA model for the calibration set, which will be the basis for the SIMCA model. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to set
               optimal number later.</p>`,1),Rd=H('<p class="svelte-1xtvhtx"><strong>Step 3. Compute PV-set</strong></p> <p class="svelte-1xtvhtx">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p>',1),Id=H('<p class="svelte-1xtvhtx"><strong>Step 4. Load or skip dataset with objects of alternative classes</strong></p> <p class="svelte-1xtvhtx">Finally you can either load test set with alternative classes members from a CSV file or skip it and work only with target class (rigorous mode). In case if you want to load the alternatvie dataset, the file should be organized in the same way as the training set.</p> <p class="svelte-1xtvhtx">After this step you will be able to start variable selection procedure.</p>',1),zd=H(`<div class="help-text svelte-1xtvhtx"><p class="svelte-1xtvhtx">In this app can apply DDSIMCA-LOVE &mdash; interactive method for variable selection for DD-SIMCA classifier. The method can work
               in <em>compliant</em> (with both target class objects and objects from alternative classes) or in rigorous (using only target class objects) mode. After selection is done, you can use the final model and/or rediced datasets in the main <a href="https://mda.tools/ddsimca/" class="svelte-1xtvhtx">DD-SIMCA app</a>.</p> <!> <!> <!> <!></div>`),Fd=H('<div class="app-container svelte-1xtvhtx"><div class="app-controls svelte-1xtvhtx"><div class="data-loader-train svelte-1xtvhtx"><!></div> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1xtvhtx"><!></div></div>');function qd(t,e){we(e,!0);const r=R(()=>e.session.train);let s=ie(!1);async function l(){if(o(r).intExcluded.length<2)return;o(r).intSelected=-1;const A=o(r).intExcluded[o(r).intExcluded.length-1];if(!(A>=0))return;o(r).statsProgress.pop();const q=o(r).varselparams.intLeftIndices[A],W=o(r).varselparams.intRightIndices[A],G=W===q?1:W-q+1;o(r).intExcluded.pop(),o(r).varsExcluded=o(r).varsExcluded.slice(0,o(r).varsExcluded.length-G);const K=o(r).statsProgress.length;o(r).nComp=o(r).statsProgress[K-1].ncomp,o(r).intSelected=-1,o(r).outcomes=null,J(s,!0),await Yl(e.WASM,o(r));const oe=o(r).currentRes.simca.ncomp,se=o(r).currentRes.tar.simca.stat.sensitivity,re=o(r).currentRes.alt.simca.stat.specificity,te=o(r).currentRes.alt.simca.stat.selectivity,Q=se.map(($,ne)=>Math.sqrt($*re[ne]));o(r).statsCurrent={ncomp:se.length,ncompBest:oe,sens:new Float64Array(se),spec:new Float64Array(re),eff:new Float64Array(Q),sel:new Float64Array(te)}}function a(){const A=o(r).intSelected;Number.isNaN(A)||A<0||A>=o(r).varselparams.nInt||o(r).intExcluded.length>0&&o(r).intExcluded.includes(A)||(o(r).intExcluded.length===0&&(o(r).statsGlobal.ncompBest=o(r).nComp),o(r).statsCurrent={ncomp:o(r).outcomes.nComp,ncompBest:o(r).nComp,sens:o(r).outcomes.sens.val.getrow(A+1).v,spec:o(r).outcomes.spec.val.getrow(A+1).v,eff:o(r).outcomes.eff.val.getrow(A+1).v,sel:o(r).outcomes.sel.val.getrow(A+1).v},o(r).statsProgress||(o(r).statsProgress=[{ncomp:o(r).nComp,int:A+1,sens:o(r).statsGlobal.sens[o(r).nComp-1],spec:o(r).statsGlobal.spec[o(r).nComp-1],eff:o(r).statsGlobal.eff[o(r).nComp-1],sel:o(r).statsGlobal.sel[o(r).nComp-1]}]),o(r).statsProgress.push({ncomp:o(r).nComp,int:A+1,sens:o(r).statsCurrent.sens[o(r).nComp-1],spec:o(r).statsCurrent.spec[o(r).nComp-1],eff:o(r).statsCurrent.eff[o(r).nComp-1],sel:o(r).statsCurrent.sel[o(r).nComp-1]}),o(r).intExcluded.push(A),o(r).varsExcluded=o(r).varsExcluded.concat(Xt(o(r).varselparams.intLeftIndices[A],o(r).varselparams.intRightIndices[A])),o(r).intSelected=-1,o(r).outcomes=null,Yl(e.WASM,o(r)))}function c(A){o(r).nComp=A}function f(A){o(r).intSelected=A}function u(){o(r).intExcluded=[],o(r).varsExcluded=[],o(r).statsCurrent=o(r).statsGlobal?{ncompBest:null,ncomp:o(r).statsGlobal.ncomp,sens:o(r).statsGlobal.sens,spec:o(r).statsGlobal.spec,eff:o(r).statsGlobal.eff,sel:o(r).statsGlobal.sel}:null,o(r).statsProgress=null,o(r).intSelected=-1,o(r).outcomes=null,o(r).statsGlobal&&(o(r).statsGlobal.ncompBest=null)}function v(){o(r).intSelected=-1}function d(){o(r).hasAlt=void 0,o(r).altres=null,o(r).altset=null}ke(()=>{o(r).calset===null&&(o(r).calres=null,o(r).model=null)}),ke(()=>{o(r).model===null&&(o(r).tarres=null,o(r).tarsetType=null,o(r).tarset=null)}),ke(()=>{o(r).tarset===null&&(o(r).tarres=null,o(r).tarsetType=null,o(r).altres=null,o(r).altset=null,o(r).hasAlt=void 0)}),ke(()=>{o(r).altset===null&&(o(r).intExcluded=[],o(r).varsExcluded=[],o(r).statsCurrent=null,o(r).statsGlobal=null,o(r).statsProgress=null,o(r).intSelected=-1,o(r).outcomes=null,o(r).altres=null,o(r).hasAlt=void 0)}),ke(()=>{if(o(r).tarres&&o(r).altres&&!o(r).statsGlobal){const A=Wl(o(r).model,o(r).tarres,o(r).altres,null,o(r).alpha);o(r).statsGlobal={ncomp:A.ncomp,ncompBest:null,sens:A.sens.val,spec:A.spec.val,eff:A.eff.val,sel:A.sel.val},o(r).statsCurrent={ncomp:o(r).statsGlobal.ncomp,ncompBest:null,sens:o(r).statsGlobal.sens,spec:o(r).statsGlobal.spec,eff:o(r).statsGlobal.eff,sel:o(r).statsGlobal.sel}}}),ke(()=>{o(r).outcomes&&o(r).outcomes.status!=="done"&&o(r).intSelected>=0&&(o(r).intSelected=-1)}),ke(()=>{o(r).hasAlt===!1&&(o(r).altset={},o(r).altres={})}),ke(()=>{if(o(r).outcomes&&o(r).outcomes.status==="done"){const A=nn(()=>JSON.stringify(e.session,Qr));e.backupSession(A)}else if(!o(r).outcomes){const A=nn(()=>JSON.stringify(e.session,Qr));e.backupSession(A,o(r).model,o(r).calset,o(r).tarres,o(r).altres,o(r).varsExcluded)}});var h=Fd(),g=V(h),m=V(g),_=V(m);eo(_,{get WASM(){return e.WASM},title:"Training set",classMandatory:!0,classUnique:!0,get dataset(){return o(r).calset},set dataset(A){o(r).calset=A}});var b=I(m,2);{var p=A=>{var q=pd(),W=V(q);Ou(W,{get WASM(){return e.WASM},get dataset(){return o(r).calset},get model(){return o(r).model},set model(G){o(r).model=G},get resobj(){return o(r).calres},set resobj(G){o(r).calres=G}}),L(A,q)};Y(b,A=>{o(r).calset&&A(p)})}var w=I(b,2);{var M=A=>{var q=Ed(),W=V(q);{var G=oe=>{pe(oe,{name:"select-tarset-type",label:"Target set",children:(se,re)=>{var te=bd(),Q=Z(te);st(Q,{onclick:()=>o(r).tarsetType="file",text:"From file"});var $=I(Q,2);st($,{onclick:()=>o(r).tarsetType="pv",text:"PV-set"}),L(se,te)},$$slots:{default:!0}})},K=oe=>{var se=ce(),re=Z(se);{var te=$=>{var ne=wd(),fe=Z(ne);{var _e=Ce=>{pe(Ce,{label:"",children:(Ee,Oe)=>{var $e=_d();L(Ee,$e)},$$slots:{default:!0}})};Y(fe,Ce=>{o(r).tarset||Ce(_e)})}var me=I(fe,2);eo(me,{get WASM(){return e.WASM},get model(){return o(r).model},title:"Target test set",get dataset(){return o(r).tarset},set dataset(Ce){o(r).tarset=Ce},get resobj(){return o(r).tarres},set resobj(Ce){o(r).tarres=Ce}}),L($,ne)},Q=$=>{var ne=ce(),fe=Z(ne);{var _e=me=>{var Ce=xd(),Ee=Z(Ce);{var Oe=et=>{pe(et,{label:"",children:(Pe,Se)=>{var Me=yd();L(Pe,Me)},$$slots:{default:!0}})};Y(Ee,et=>{o(r).tarset||et(Oe)})}var $e=I(Ee,2);Gu($e,{get WASM(){return e.WASM},get calset(){return o(r).calset},get calres(){return o(r).calres},get model(){return o(r).model},get pvres(){return o(r).tarres},set pvres(et){o(r).tarres=et},get pvset(){return o(r).tarset},set pvset(et){o(r).tarset=et}}),L(me,Ce)};Y(fe,me=>{o(r).tarsetType==="pv"&&me(_e)},!0)}L($,ne)};Y(re,$=>{o(r).tarsetType==="file"?$(te):$(Q,!1)},!0)}L(oe,se)};Y(W,oe=>{!o(r).tarsetType&&!o(r).tarset?oe(G):oe(K,!1)})}L(A,q)};Y(w,A=>{o(r).model&&o(r).calset&&o(r).calres&&A(M)})}var y=I(w,2);{var k=A=>{var q=Nd(),W=V(q);{var G=re=>{var te=ce(),Q=Z(te);{var $=ne=>{pe(ne,{className:"oops",label:"Alternative set",children:(fe,_e)=>{var me=kd(),Ce=Z(me);st(Ce,{text:"Skip",onclick:()=>o(r).hasAlt=!1});var Ee=I(Ce,2);st(Ee,{text:"From file",onclick:()=>o(r).hasAlt=!0}),L(fe,me)},$$slots:{default:!0}})};Y(Q,ne=>{o(r).hasAlt===void 0&&ne($)})}L(re,te)};Y(W,re=>{o(r).altset||re(G)})}var K=I(W,2);{var oe=re=>{var te=Sd(),Q=Z(te);{var $=fe=>{pe(fe,{label:"",children:(_e,me)=>{var Ce=Cd();L(_e,Ce)},$$slots:{default:!0}})};Y(Q,fe=>{o(r).altset||fe($)})}var ne=I(Q,2);eo(ne,{get WASM(){return e.WASM},title:"Alternative test set",get model(){return o(r).model},classMandatory:!0,classUnique:!1,get dataset(){return o(r).altset},set dataset(fe){o(r).altset=fe},get resobj(){return o(r).altres},set resobj(fe){o(r).altres=fe}}),L(re,te)},se=re=>{var te=ce(),Q=Z(te);{var $=ne=>{pe(ne,{label:"",children:(fe,_e)=>{var me=Ad(),Ce=I(Z(me),2);ar(Ce,{onclick:d}),L(fe,me)},$$slots:{default:!0}})};Y(Q,ne=>{o(r).hasAlt===!1&&o(r).altset!==null&&ne($)},!0)}L(re,te)};Y(K,re=>{o(r).hasAlt===!0?re(oe):re(se,!1)})}L(A,q)};Y(y,A=>{o(r).tarset&&o(r).tarres&&A(k)})}var S=I(y,2);{var T=A=>{var q=Md(),W=V(q);gd(W,{get WASM(){return e.WASM},get calset(){return o(r).calset},get tarset(){return o(r).tarset},get altset(){return o(r).altset},get model(){return o(r).model},get intExcluded(){return o(r).intExcluded},get varsExcluded(){return o(r).varsExcluded},get statsCurrent(){return o(r).statsCurrent},get curNInt(){return o(r).nInt},resetExcluded:u,undoExcluded:l,get varselparams(){return o(r).varselparams},set varselparams(G){o(r).varselparams=G},get outcomes(){return o(r).outcomes},set outcomes(G){o(r).outcomes=G},get alpha(){return o(r).alpha},set alpha(G){o(r).alpha=G}}),L(A,q)};Y(S,A=>{o(r).calset&&o(r).altset&&o(r).altres&&o(r).statsGlobal&&A(T)})}var C=I(S,2);{var E=A=>{var q=jd(),W=V(q);sf(W,{get s(){return o(r)}}),L(A,q)};Y(C,A=>{(o(r).statsGlobal||o(r).statsCurrent)&&A(E)})}var N=I(C,2);{var j=A=>{var q=Pd(),W=V(q);Ju(W,{get s(){return o(r)}}),L(A,q)};Y(N,A=>{o(r).intExcluded.length>0&&o(r).intSelected<0&&(!o(r).outcomes||o(r).outcomes.status!=="running")&&A(j)})}var P=I(g,2),z=V(P);{var D=A=>{var q=zd(),W=I(V(q),2);{var G=$=>{var ne=Td();L($,ne)};Y(W,$=>{o(r).calset||$(G)})}var K=I(W,2);{var oe=$=>{var ne=Ld();L($,ne)};Y(K,$=>{o(r).calset&&!o(r).model&&$(oe)})}var se=I(K,2);{var re=$=>{var ne=Rd();L($,ne)};Y(se,$=>{o(r).model&&!o(r).tarset&&$(re)})}var te=I(se,2);{var Q=$=>{var ne=Id();L($,ne)};Y(te,$=>{o(r).model&&o(r).tarset&&!o(r).altset&&$(Q)})}L(A,q)},F=A=>{var q=ce(),W=Z(q);{var G=K=>{var oe=ce(),se=Z(oe);As(se,()=>o(r).intExcluded,re=>{ld(re,{get s(){return o(r)},setExcluded:a,setNComp:c,selectInt:f,cancelSelection:v})}),L(K,oe)};Y(W,K=>{o(r).calset&&o(r).varselparams&&K(G)},!0)}L(A,q)};Y(z,A=>{!o(r).altres||!o(r).statsGlobal?A(D):A(F,!1)})}L(t,h),ye()}const Jd="modulepreload",Qd=function(t){return"/"+t},$d={},Od=function(e,r,s){let l=Promise.resolve();function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return l.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};async function Dd(t={}){var e,r=t,s=!!globalThis.window,l=!!globalThis.WorkerGlobalScope,a=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer";if(a){const{createRequire:B}=await Od(async()=>{const{createRequire:X}=await Promise.resolve().then(()=>Wd);return{createRequire:X}},void 0);var c=B(ln&&ln.tagName.toUpperCase()==="SCRIPT"&&ln.src||new URL("ddsimca-love.js",document.baseURI).href)}var f="./this.program",u=(B,X)=>{throw X},v=ln&&ln.tagName.toUpperCase()==="SCRIPT"&&ln.src||new URL("ddsimca-love.js",document.baseURI).href,d="",h,g;if(a){var m=c("fs");v.startsWith("file:")&&(d=c("path").dirname(c("url").fileURLToPath(v))+"/"),g=B=>(B=y(B)?new URL(B):B,m.readFileSync(B)),h=async B=>(B=y(B)?new URL(B):B,m.readFileSync(B,void 0)),1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),u=(B,X)=>{throw process.exitCode=B,X}}else if(s||l){try{d=new URL(".",v).href}catch{}l&&(g=B=>{var X=new XMLHttpRequest;return X.open("GET",B,!1),X.responseType="arraybuffer",X.send(null),new Uint8Array(X.response)}),h=async B=>{if(y(B))return new Promise((ee,ve)=>{var be=new XMLHttpRequest;be.open("GET",B,!0),be.responseType="arraybuffer",be.onload=()=>{be.status==200||be.status==0&&be.response?ee(be.response):ve(be.status)},be.onerror=ve,be.send(null)});var X=await fetch(B,{credentials:"same-origin"});if(X.ok)return X.arrayBuffer();throw Error(X.status+" : "+X.url)}}var _=console.log.bind(console),b=console.error.bind(console),p,w=!1,M,y=B=>B.startsWith("file://"),k,S,T,C,E,N=!1;function j(){var B=Xe.buffer;T=new Int8Array(B),C=new Uint8Array(B),r.HEAP32=new Int32Array(B),E=new Uint32Array(B),r.HEAPF64=new Float64Array(B),new BigInt64Array(B),new BigUint64Array(B)}function P(B){throw r.onAbort?.(B),B="Aborted("+B+")",b(B),w=!0,B=new WebAssembly.RuntimeError(B+". Build with -sASSERTIONS for more info."),S?.(B),B}var z;async function D(B){if(!p)try{var X=await h(B);return new Uint8Array(X)}catch{}if(B==z&&p)B=new Uint8Array(p);else if(g)B=g(B);else throw"both async and sync fetching of the wasm failed";return B}async function F(B,X){try{var ee=await D(B);return await WebAssembly.instantiate(ee,X)}catch(ve){b(`failed to asynchronously prepare wasm: ${ve}`),P(ve)}}async function A(B){var X=z;if(!p&&!y(X)&&!a)try{var ee=fetch(X,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(ee,B)}catch(ve){b(`wasm streaming compile failed: ${ve}`),b("falling back to ArrayBuffer instantiation")}return F(X,B)}class q{name="ExitStatus";constructor(X){this.message=`Program terminated with exit(${X})`,this.status=X}}var W=B=>{for(;0<B.length;)B.shift()(r)},G=[],K=[],oe=()=>{var B=r.preRun.shift();K.push(B)},se=!0,re=0,te={},Q=B=>{M=B,se||0<re||(r.onExit?.(B),w=!0),u(B,new q(B))},$=B=>{if(!w)try{if(B(),!(se||0<re))try{M=B=M,Q(B)}catch(X){X instanceof q||X=="unwind"||u(1,X)}}catch(X){X instanceof q||X=="unwind"||u(1,X)}},ne=globalThis.TextDecoder&&new TextDecoder,fe=(B,X=0)=>{for(var ee=X,ve=ee+void 0;B[ee]&&!(ee>=ve);)++ee;if(16<ee-X&&B.buffer&&ne)return ne.decode(B.subarray(X,ee));for(ve="";X<ee;){var be=B[X++];if(be&128){var Je=B[X++]&63;if((be&224)==192)ve+=String.fromCharCode((be&31)<<6|Je);else{var Be=B[X++]&63;be=(be&240)==224?(be&15)<<12|Je<<6|Be:(be&7)<<18|Je<<12|Be<<6|B[X++]&63,65536>be?ve+=String.fromCharCode(be):(be-=65536,ve+=String.fromCharCode(55296|be>>10,56320|be&1023))}}else ve+=String.fromCharCode(be)}return ve},_e={},me=()=>{if(!Ce){var B={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},X;for(X in _e)_e[X]===void 0?delete B[X]:B[X]=_e[X];var ee=[];for(X in B)ee.push(`${X}=${B[X]}`);Ce=ee}return Ce},Ce,Ee=(B,X,ee)=>{var ve=C;if(!(0<ee))return 0;var be=X;ee=X+ee-1;for(var Je=0;Je<B.length;++Je){var Be=B.codePointAt(Je);if(127>=Be){if(X>=ee)break;ve[X++]=Be}else if(2047>=Be){if(X+1>=ee)break;ve[X++]=192|Be>>6,ve[X++]=128|Be&63}else if(65535>=Be){if(X+2>=ee)break;ve[X++]=224|Be>>12,ve[X++]=128|Be>>6&63,ve[X++]=128|Be&63}else{if(X+3>=ee)break;ve[X++]=240|Be>>18,ve[X++]=128|Be>>12&63,ve[X++]=128|Be>>6&63,ve[X++]=128|Be&63,Je++}}return ve[X]=0,X-be},Oe=B=>{for(var X=0,ee=0;ee<B.length;++ee){var ve=B.charCodeAt(ee);127>=ve?X++:2047>=ve?X+=2:55296<=ve&&57343>=ve?(X+=4,++ee):X+=3}return X},$e=[null,[],[]],et=()=>{if(a){var B=c("crypto");return X=>B.randomFillSync(X)}return X=>crypto.getRandomValues(X)},Pe=B=>{(Pe=et())(B)};if(r.noExitRuntime&&(se=r.noExitRuntime),r.print&&(_=r.print),r.printErr&&(b=r.printErr),r.wasmBinary&&(p=r.wasmBinary),r.thisProgram&&(f=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.shift()();r.ccall=(B,X,ee,ve)=>{var be={string:lt=>{var vt=0;if(lt!=null&&lt!==0){vt=Oe(lt)+1;var Tn=ot(vt);Ee(lt,Tn,vt),vt=Tn}return vt},array:lt=>{var vt=ot(lt.length);return T.set(lt,vt),vt}};B=r["_"+B];var Je=[],Be=0;if(ve)for(var pt=0;pt<ve.length;pt++){var wn=be[ee[pt]];wn?(Be===0&&(Be=Le()),Je[pt]=wn(ve[pt])):Je[pt]=ve[pt]}return ee=B(...Je),ee=(function(lt){return Be!==0&&Me(Be),X==="string"?lt?fe(C,lt):"":X==="boolean"?!!lt:lt})(ee)};var Se,Me,ot,Le,Xe,rt={g:()=>P(""),j:()=>{se=!1,re=0},k:(B,X)=>{if(te[B]&&(clearTimeout(te[B].id),delete te[B]),!X)return 0;var ee=setTimeout(()=>{delete te[B],$(()=>Se(B,performance.now()))},X);return te[B]={id:ee,U:X},0},a:()=>Date.now(),c:B=>b(B?fe(C,B):""),b:()=>performance.now(),l:B=>{var X=C.length;if(B>>>=0,2147483648<B)return!1;for(var ee=1;4>=ee;ee*=2){var ve=X*(1+.2/ee);ve=Math.min(ve,B+100663296);e:{ve=(Math.min(2147483648,65536*Math.ceil(Math.max(B,ve)/65536))-Xe.buffer.byteLength+65535)/65536|0;try{Xe.grow(ve),j();var be=1;break e}catch{}be=void 0}if(be)return!0}return!1},e:(B,X)=>{var ee=0,ve=0,be;for(be of me()){var Je=X+ee;E[B+ve>>2]=Je,ee+=Ee(be,Je,1/0)+1,ve+=4}return 0},f:(B,X)=>{var ee=me();E[B>>2]=ee.length,B=0;for(var ve of ee)B+=Oe(ve)+1;return E[X>>2]=B,0},h:(B,X,ee,ve)=>{for(var be=0,Je=0;Je<ee;Je++){var Be=E[X>>2],pt=E[X+4>>2];X+=8;for(var wn=0;wn<pt;wn++){var lt=B,vt=C[Be+wn],Tn=$e[lt];vt===0||vt===10?((lt===1?_:b)(fe(Tn)),Tn.length=0):Tn.push(vt)}be+=pt}return E[ve>>2]=be,0},i:Q,d:(B,X)=>(Pe(C.subarray(B,B+X)),0)},Mt;return Mt=await(async function(){function B(ee){return ee=Mt=ee.exports,r._pcafit_wasm=ee.o,r._free=ee.p,r._malloc=ee.q,r._pcapredict_wasm=ee.r,r._pcvpca_wasm=ee.s,r._prepfit_wasm=ee.t,r._prepapply_wasm=ee.u,Se=ee.v,r._strdup=ee.w,r._strndup=ee.x,r.__ZdaPv=ee.y,r.__ZdaPvm=ee.z,r.__ZdlPv=ee.A,r.__ZdlPvm=ee.B,r.__Znaj=ee.C,r.__ZnajSt11align_val_t=ee.D,r.__Znwj=ee.E,r.__ZnwjSt11align_val_t=ee.F,r.___libc_calloc=ee.G,r.___libc_free=ee.H,r.___libc_malloc=ee.I,r.___libc_realloc=ee.J,r._emscripten_builtin_malloc=ee.K,r._emscripten_builtin_calloc=ee.L,r._emscripten_builtin_free=ee.M,r._emscripten_builtin_realloc=ee.N,r._malloc_size=ee.O,r._malloc_usable_size=ee.P,r._reallocf=ee.Q,Me=ee.R,ot=ee.S,Le=ee.T,Xe=ee.m,j(),Mt}var X={a:rt};return r.instantiateWasm?new Promise(ee=>{r.instantiateWasm(X,(ve,be)=>{ee(B(ve))})}):(z??=r.locateFile?r.locateFile?r.locateFile("pca_wasm.wasm",d):d+"pca_wasm.wasm":new URL("/ddsimca-love/ddsimca-love.wasm",ln&&ln.tagName.toUpperCase()==="SCRIPT"&&ln.src||new URL("ddsimca-love.js",document.baseURI).href).href,B((await A(X)).instance))})(),(function(){function B(){if(r.calledRun=!0,!w){if(N=!0,Mt.n(),k?.(r),r.onRuntimeInitialized?.(),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var X=r.postRun.shift();G.push(X)}W(G)}}if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)oe();W(K),r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),B()},1)):B()})(),N?e=r:e=new Promise((B,X)=>{k=B,S=X}),e}var Vd=H('<p>Current release: <span>1.2.4</span> &nbsp; Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=DDSIMCA-LOVE app">help@mda.tools</a> &nbsp; Learn: <a class="paper-link" href="https://dx.doi.org/10.1016/j.aca.2025.344302" download="">paper</a> | <a class="paper-link" href="/ddsimca-love/Wine.zip">dataset</a> | <a href="https://youtu.be/ZqKtHZAEEi4">video lesson</a></p>'),Bd=H(`<h2>DD-SIMCA variable selection</h2> <p>Authors: <em>Alexey Pomerantsev, Sergey Kucheryavskiy, Oxana Rodionova</em></p> <p>Interactive web-application for excluding least important variables in DD-SIMCA one class classifier.
      The method is an evolution of known wrapper methods, it provides a tool for interactive variable selection,
      based on careful analysis of the main and secondary performance indicators (sensitivity, specificity, efficiency,
      selectivity), as well as domain knowledge.</p> <p>Check our open access <a href="https://dx.doi.org/10.1016/j.aca.2025.344302">paper</a> for more details about the method.</p> <h3>v. 1.2.4</h3> <p class="release-info">released 20/01/2026</p> <ul><li>Small improvements and updates.</li></ul> <h3>v. 1.2.3</h3> <p class="release-info">released 14/09/2025</p> <ul><li>Small improvements to results downloader.</li></ul> <h3>v. 1.2.2</h3> <p class="release-info">released 08/09/2025</p> <ul><li>Fixed a bug related to wrong diff values after undo.</li> <li>Default value for gamma is set to 1% (to match the one in DDSIMCA app).</li> <li>Small code improvements.</li></ul>`,1);function Yd(t,e){we(e,!1);function r(a){const c=Object.keys(a);if(!["date","train","tab"].every(u=>c.includes(u)))return!1;const f=Object.keys(a.train);return["calset","calres","altset","tarset","testres","model"].every(u=>f.includes(u))?(a.train.outcomes&&a.train.outcomes.status==="running"&&(a.train.outcomes=null),a.train.tarsetType&&!a.train.tarset&&(a.train.tarsetType=null),a.train.model&&!a.train.calres&&(a.train.model=null),!0):!1}function s(){return{date:Js(new Date),tab:0,train:{calset:0,model:0,calres:0,tarsetType:0,tarset:0,hasAlt:void 0,altset:0,testres:0,intSelected:-1,intExcluded:[],varsExcluded:[],varselparams:0,currentRes:0,statsGlobal:0,statsCurrent:0,statsProgress:0,alpha:5,nComp:0,outcomes:0,oldInt:0,oldNInt:0}}}const l=[{name:"Train",label:"train",component:qd}];Bi(),Kc(t,{appID:"ddsimca-love",appTitle:"DD-SIMCA with LOVE",appShortTitle:"DD-SIMCA variable selection",appSlogan:"Variable selection for DD-SIMCA",get WASM(){return Dd},get tabs(){return l},initSession:s,checkSession:r,footer:f=>{var u=Vd();L(f,u)},info:f=>{var u=Bd();L(f,u)},$$slots:{footer:!0,info:!0}}),ye()}yi(Yd,{target:document.body});const Wd=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=ddsimca-love.js.map
