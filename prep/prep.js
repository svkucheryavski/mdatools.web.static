var hv=Object.defineProperty;var Fs=Oe=>{throw TypeError(Oe)};var gv=(Oe,Pe,nt)=>Pe in Oe?hv(Oe,Pe,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Oe[Pe]=nt;var Jt=(Oe,Pe,nt)=>gv(Oe,typeof Pe!="symbol"?Pe+"":Pe,nt),ma=(Oe,Pe,nt)=>Pe.has(Oe)||Fs("Cannot "+nt);var ve=(Oe,Pe,nt)=>(ma(Oe,Pe,"read from private field"),nt?nt.call(Oe):Pe.get(Oe)),ut=(Oe,Pe,nt)=>Pe.has(Oe)?Fs("Cannot add the same private member more than once"):Pe instanceof WeakSet?Pe.add(Oe):Pe.set(Oe,nt),zt=(Oe,Pe,nt,Er)=>(ma(Oe,Pe,"write to private field"),Er?Er.call(Oe,nt):Pe.set(Oe,nt),nt),kr=(Oe,Pe,nt)=>(ma(Oe,Pe,"access private method"),nt);(function(){"use strict";var vn,hn,_r,Pn,Nn,Ur,gn,Wr,yr,mn,Rn,Ln,Kt,js,wo,pa,xr,pn,Mn,ho,qs,Rs;var Oe=document.createElement("style");Oe.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1986c5z{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1986c5z:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1986c5z:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1986c5z:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1986c5z{display:none}.control-element.error.svelte-1986c5z{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1986c5z{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1986c5z>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1986c5z>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1986c5z>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1986c5z>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1986c5z .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1986c5z .range-value_left,.control-element.svelte-1986c5z .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1986c5z .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1986c5z .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1986c5z .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1986c5z .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1986c5z .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1986c5z .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1986c5z .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1986c5z .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1986c5z .textinput>input:active::placeholder,.control-element.svelte-1986c5z .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1986c5z .textinput>input:focus,.control-element.svelte-1986c5z .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .textinput.error>input,.control-element.svelte-1986c5z .textinput.error>input:focus,.control-element.svelte-1986c5z .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1986c5z .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1986c5z .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1986c5z .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-x8qn01{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-x8qn01{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-x8qn01{padding:0 .25em 0 .5em}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-x8qn01{width:100%;height:calc(100% - 15px)}@media (min-width:1100px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr 400px}}span.svelte-2gffce{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-2gffce:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-2gffce{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-15cx0gr{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-15cx0gr>.control-element:last-child .button-down,.selected-methods-list.svelte-15cx0gr>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-15cx0gr:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-15cx0gr{margin-top:1em;font-size:.9em}.methods-list.svelte-15cx0gr>div{background:#ebf0f0}.final.svelte-15cx0gr .button-up,.final.svelte-15cx0gr .button-down,.final.svelte-15cx0gr .button-cancel{visibility:hidden}.app-container.svelte-1jqwqd2{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1jqwqd2{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1jqwqd2{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1jqwqd2>div:where(.svelte-1jqwqd2){border-radius:.25rem}.help-text.svelte-1jqwqd2{margin-top:.25rem}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.downloads-block.svelte-1jqwqd2{margin-top:.85em}.downloads-block.svelte-1jqwqd2>div:hover,.downloads-block.svelte-1jqwqd2>div{background:#fff0c8}.downloads-block.svelte-1jqwqd2>div button{margin:0 .25em}.downloads-block.svelte-1jqwqd2>div .button:hover{background:#fffff8;border-color:#606570;color:#606570}@media (min-width:1300px){.app-container.svelte-1jqwqd2{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1jqwqd2{grid-template-columns:min(320px,30%) 1fr}}.info-details.svelte-1l1cvmx{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul{padding:0;margin:0;list-style:none}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul>li{padding:.25em 0}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-1l1cvmx:hover>span:where(.svelte-1l1cvmx){visibility:visible}.info{position:relative}.info-text.svelte-1dxrrpt{line-height:1.5em}.info-text.svelte-1dxrrpt>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1dxrrpt>.file-name:where(.svelte-1dxrrpt){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}.app-container.svelte-sqi2x7{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-sqi2x7{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-sqi2x7{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-sqi2x7>div:where(.svelte-sqi2x7){border-radius:.25rem}.help-text.svelte-sqi2x7{margin-top:.25rem}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-sqi2x7{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-sqi2x7{grid-template-columns:min(320px,30%) 1fr}}.drop.svelte-q7wo60{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-q7wo60{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-q7wo60{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-q7wo60{grid-area:header}.close-button.svelte-q7wo60{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-q7wo60:hover{background-color:#4e5052}.isdark.svelte-q7wo60,.isdark.svelte-q7wo60 .header:where(.svelte-q7wo60),.isdark.svelte-q7wo60 .body:where(.svelte-q7wo60){background-color:#606060}.isdark.svelte-q7wo60 .close-button:where(.svelte-q7wo60){color:#433201;background-color:#c2be9b}.isdark.svelte-q7wo60 .close-button:where(.svelte-q7wo60):hover{background-color:#f0f674}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Oe);var Pe=typeof document<"u"?document.currentScript:null;const nt=!1;var Er=Array.isArray,Bs=Array.prototype.indexOf,bo=Array.from,_o=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,wa=Object.getOwnPropertyDescriptors,ba=Object.prototype,Ds=Array.prototype,qn=Object.getPrototypeOf,_a=Object.isExtensible;function $r(t){return typeof t=="function"}const Et=()=>{};function Is(t){return typeof(t==null?void 0:t.then)=="function"}function Os(t){return t()}function Bn(t){for(var e=0;e<t.length;e++)t[e]()}function Vs(){var t,e,r=new Promise((n,a)=>{t=n,e=a});return{promise:r,resolve:t,reject:e}}function Dn(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const n of t)if(r.push(n),r.length===e)break;return r}const Tt=2,yo=4,In=8,en=16,ar=32,Sr=64,ya=128,Lt=256,On=512,gt=1024,Mt=2048,ur=4096,Ht=8192,Ar=16384,Vn=32768,tn=65536,xa=1<<17,Us=1<<18,xo=1<<19,ko=1<<20,Eo=1<<21,So=1<<22,Cr=1<<23,fr=Symbol("$state"),ka=Symbol("legacy props"),Ws=Symbol(""),Ao=new class extends Error{constructor(){super(...arguments);Jt(this,"name","StaleReactionError");Jt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Hs(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Ea(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ys(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Gs(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ks(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xs(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Js(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zs(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $s(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ei(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Un=1,Wn=2,Sa=4,ti=8,ri=16,ni=1,oi=2,ai=4,li=8,si=16,ii=1,ci=2,ui=4,Aa=1,fi=2,ot=Symbol(),di="http://www.w3.org/1999/xhtml";let vi=!1;function Ca(t){return t===this.v}function za(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function hi(t,e){return t!==e}function Ta(t){return!za(t,this.v)}let rn=!1,gi=!1;function mi(){rn=!0}const pi=[];function Pa(t,e=!1){return Hn(t,new Map,"",pi)}function Hn(t,e,r,n,a=null){if(typeof t=="object"&&t!==null){var l=e.get(t);if(l!==void 0)return l;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Er(t)){var s=Array(t.length);e.set(t,s),a!==null&&e.set(a,s);for(var i=0;i<t.length;i+=1){var c=t[i];i in t&&(s[i]=Hn(c,e,r,n))}return s}if(qn(t)===ba){s={},e.set(t,s),a!==null&&e.set(a,s);for(var u in t)s[u]=Hn(t[u],e,r,n);return s}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return Hn(t.toJSON(),e,r,n,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Ve=null;function nn(t){Ve=t}function Zt(t){return Na().get(t)}function wi(t,e){return Na().set(t,e),e}function ge(t,e=!1,r){Ve={p:Ve,c:null,e:null,s:t,x:null,l:rn&&!e?{s:null,u:null,$:[]}:null}}function me(t){var e=Ve,r=e.e;if(r!==null){e.e=null;for(var n of r)Ya(n)}return Ve=e.p,{}}function dr(){return!rn||Ve!==null&&Ve.l===null}function Na(t){return Ve===null&&Ea(),Ve.c??(Ve.c=new Map(bi(Ve)||void 0))}function bi(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}const _i=new WeakMap;function yi(t){var e=we;if(e===null)return ye.f|=Cr,t;if((e.f&Vn)===0){if((e.f&ya)===0)throw!e.parent&&t instanceof Error&&Ra(t),t;e.b.error(t)}else Co(t,e)}function Co(t,e){for(;e!==null;){if((e.f&ya)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t instanceof Error&&Ra(t),t}function Ra(t){const e=_i.get(t);e&&(_o(t,"message",{value:e.message}),_o(t,"stack",{value:e.stack}))}let wn=[],zo=[];function La(){var t=wn;wn=[],Bn(t)}function xi(){var t=zo;zo=[],Bn(t)}function bn(t){wn.length===0&&queueMicrotask(La),wn.push(t)}function ki(){wn.length>0&&La(),zo.length>0&&xi()}function Ei(){for(var t=we.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&Hs(),t}function _n(t){var e=Tt|Mt,r=ye!==null&&(ye.f&Tt)!==0?ye:null;return we===null||r!==null&&(r.f&Lt)!==0?e|=Lt:we.f|=xo,{ctx:Ve,deps:null,effects:null,equals:Ca,f:e,fn:t,reactions:null,rv:0,v:ot,wv:0,parent:r??we,ac:null}}function Si(t,e){let r=we;r===null&&Ys();var n=r.b,a=void 0,l=Nr(ot),s=null,i=!ye;return qi(()=>{try{var c=t()}catch(v){c=Promise.reject(v)}var u=()=>c;a=(s==null?void 0:s.then(u,u))??Promise.resolve(c),s=a;var f=Le,d=n.pending;i&&(n.update_pending_count(1),d||f.increment());const h=(v,g=void 0)=>{s=null,d||f.activate(),g?g!==Ao&&(l.f|=Cr,hr(l,g)):((l.f&Cr)!==0&&(l.f^=Cr),hr(l,v)),i&&(n.update_pending_count(-1),d||f.decrement()),ja()};if(a.then(h,v=>h(null,v||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(c=>{function u(f){function d(){f===a?c(l):u(a)}f.then(d,d)}u(a)})}function T(t){const e=_n(t);return rl(e),e}function To(t){const e=_n(t);return e.equals=Ta,e}function Ma(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)er(e[r])}}function Ai(t){for(var e=t.parent;e!==null;){if((e.f&Tt)===0)return e;e=e.parent}return null}function Po(t){var e,r=we;rr(Ai(t));try{Ma(t),e=sl(t)}finally{rr(r)}return e}function Fa(t){var e=Po(t);if(t.equals(e)||(t.v=e,t.wv=al()),!Rr)if(vr!==null)vr.set(t,t.v);else{var r=(pr||(t.f&Lt)!==0)&&t.deps!==null?ur:gt;St(t,r)}}function Ci(t,e,r){const n=dr()?_n:To;if(e.length===0){r(t.map(n));return}var a=Le,l=we,s=zi(),i=Ei();Promise.all(e.map(c=>Si(c))).then(c=>{a==null||a.activate(),s();try{r([...t.map(n),...c])}catch(u){(l.f&Ar)===0&&Co(u,l)}a==null||a.deactivate(),ja()}).catch(c=>{i.error(c)})}function zi(){var t=we,e=ye,r=Ve;return function(){rr(t),Ft(e),nn(r)}}function ja(){rr(null),Ft(null),nn(null)}const yn=new Set;let Le=null,Yn=null,vr=null,qa=new Set,Gn=[];function Ba(){const t=Gn.shift();Gn.length>0&&queueMicrotask(Ba),t()}let zr=[],Kn=null,No=!1,Xn=!1;const vo=class vo{constructor(){ut(this,Kt);Jt(this,"current",new Map);ut(this,vn,new Map);ut(this,hn,new Set);ut(this,_r,0);ut(this,Pn,null);ut(this,Nn,!1);ut(this,Ur,[]);ut(this,gn,[]);ut(this,Wr,[]);ut(this,yr,[]);ut(this,mn,[]);ut(this,Rn,[]);ut(this,Ln,[]);Jt(this,"skipped_effects",new Set)}process(e){var l;zr=[],Yn=null;var r=null;if(yn.size>1){r=new Map,vr=new Map;for(const[s,i]of this.current)r.set(s,{v:s.v,wv:s.wv}),s.v=i;for(const s of yn)if(s!==this)for(const[i,c]of ve(s,vn))r.has(i)||(r.set(i,{v:i.v,wv:i.wv}),i.v=c)}for(const s of e)kr(this,Kt,js).call(this,s);if(ve(this,Ur).length===0&&ve(this,_r)===0){kr(this,Kt,pa).call(this);var n=ve(this,Wr),a=ve(this,yr);zt(this,Wr,[]),zt(this,yr,[]),zt(this,mn,[]),Yn=Le,Le=null,Ia(n),Ia(a),Le===null?Le=this:yn.delete(this),(l=ve(this,Pn))==null||l.resolve()}else kr(this,Kt,wo).call(this,ve(this,Wr)),kr(this,Kt,wo).call(this,ve(this,yr)),kr(this,Kt,wo).call(this,ve(this,mn));if(r){for(const[s,{v:i,wv:c}]of r)s.wv<=c&&(s.v=i);vr=null}for(const s of ve(this,Ur))Sn(s);for(const s of ve(this,gn))Sn(s);zt(this,Ur,[]),zt(this,gn,[])}capture(e,r){ve(this,vn).has(e)||ve(this,vn).set(e,r),this.current.set(e,e.v)}activate(){Le=this}deactivate(){Le=null,Yn=null;for(const e of qa)if(qa.delete(e),e(),Le!==null)break}neuter(){zt(this,Nn,!0)}flush(){zr.length>0?Da():kr(this,Kt,pa).call(this),Le===this&&(ve(this,_r)===0&&yn.delete(this),this.deactivate())}increment(){zt(this,_r,ve(this,_r)+1)}decrement(){if(zt(this,_r,ve(this,_r)-1),ve(this,_r)===0){for(const e of ve(this,Rn))St(e,Mt),Tr(e);for(const e of ve(this,Ln))St(e,ur),Tr(e);zt(this,Wr,[]),zt(this,yr,[]),this.flush()}else this.deactivate()}add_callback(e){ve(this,hn).add(e)}settled(){return(ve(this,Pn)??zt(this,Pn,Vs())).promise}static ensure(){if(Le===null){const e=Le=new vo;yn.add(Le),Xn||vo.enqueue(()=>{Le===e&&e.flush()})}return Le}static enqueue(e){Gn.length===0&&queueMicrotask(Ba),Gn.unshift(e)}};vn=new WeakMap,hn=new WeakMap,_r=new WeakMap,Pn=new WeakMap,Nn=new WeakMap,Ur=new WeakMap,gn=new WeakMap,Wr=new WeakMap,yr=new WeakMap,mn=new WeakMap,Rn=new WeakMap,Ln=new WeakMap,Kt=new WeakSet,js=function(e){var f;e.f^=gt;for(var r=e.first;r!==null;){var n=r.f,a=(n&(ar|Sr))!==0,l=a&&(n&gt)!==0,s=l||(n&Ht)!==0||this.skipped_effects.has(r);if(!s&&r.fn!==null){if(a)r.f^=gt;else if((n&gt)===0)if((n&yo)!==0)ve(this,yr).push(r);else if((n&So)!==0){var i=(f=r.b)!=null&&f.pending?ve(this,gn):ve(this,Ur);i.push(r)}else Qn(r)&&((r.f&en)!==0&&ve(this,mn).push(r),Sn(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}},wo=function(e){for(const r of e)((r.f&Mt)!==0?ve(this,Rn):ve(this,Ln)).push(r),St(r,gt);e.length=0},pa=function(){if(!ve(this,Nn))for(const e of ve(this,hn))e();ve(this,hn).clear()};let xn=vo;function Ti(t){var e=Xn;Xn=!0;try{for(var r;;){if(ki(),zr.length===0&&(Le==null||Le.flush(),zr.length===0))return Kn=null,r;Da()}}finally{Xn=e}}function Da(){var t=an;No=!0;try{var e=0;for(el(!0);zr.length>0;){var r=xn.ensure();if(e++>1e3){var n,a;Pi()}r.process(zr),Pr.clear()}}finally{No=!1,el(t),Kn=null}}function Pi(){try{Js()}catch(t){Co(t,Kn)}}function Ia(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var n=t[r++];if((n.f&(Ar|Ht))===0&&Qn(n)){var a=Le?Le.current.size:0;if(Sn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Za(n):n.fn=null),Le!==null&&Le.current.size>a&&(n.f&ko)!==0)break}}for(;r<e;)Tr(t[r++])}}function Tr(t){for(var e=Kn=t;e.parent!==null;){e=e.parent;var r=e.f;if(No&&e===we&&(r&en)!==0)return;if((r&(Sr|ar))!==0){if((r&gt)===0)return;e.f^=gt}}zr.push(e)}const Pr=new Map;function Nr(t,e){var r={f:0,v:t,reactions:null,equals:Ca,rv:0,wv:0};return r}function Y(t,e){const r=Nr(t);return rl(r),r}function Ro(t,e=!1,r=!0){var a;const n=Nr(t);return e||(n.equals=Ta),rn&&r&&Ve!==null&&Ve.l!==null&&((a=Ve.l).s??(a.s=[])).push(n),n}function N(t,e,r=!1){ye!==null&&(!tr||(ye.f&xa)!==0)&&dr()&&(ye.f&(Tt|en|So|xa))!==0&&!(_t!=null&&_t.includes(t))&&ei();let n=r?Fe(e):e;return hr(t,n)}function hr(t,e){if(!t.equals(e)){var r=t.v;Rr?Pr.set(t,e):Pr.set(t,r),t.v=e;var n=xn.ensure();n.capture(t,r),(t.f&Tt)!==0&&((t.f&Mt)!==0&&Po(t),St(t,(t.f&Lt)===0?gt:ur)),t.wv=al(),Oa(t,Mt),dr()&&we!==null&&(we.f&gt)!==0&&(we.f&(ar|Sr))===0&&(jt===null?Di([t]):jt.push(t))}return e}function Lo(t){N(t,t.v+1)}function Oa(t,e){var r=t.reactions;if(r!==null)for(var n=dr(),a=r.length,l=0;l<a;l++){var s=r[l],i=s.f;if(!(!n&&s===we)){var c=(i&Mt)===0;c&&St(s,e),(i&Tt)!==0?Oa(s,ur):c&&Tr(s)}}}function Fe(t){if(typeof t!="object"||t===null||fr in t)return t;const e=qn(t);if(e!==ba&&e!==Ds)return t;var r=new Map,n=Er(t),a=Y(0),l=Lr,s=i=>{if(Lr===l)return i();var c=ye,u=Lr;Ft(null),ol(l);var f=i();return Ft(c),ol(u),f};return n&&r.set("length",Y(t.length)),new Proxy(t,{defineProperty(i,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Qs();var f=r.get(c);return f===void 0?f=s(()=>{var d=Y(u.value);return r.set(c,d),d}):N(f,u.value,!0),!0},deleteProperty(i,c){var u=r.get(c);if(u===void 0){if(c in i){const f=s(()=>Y(ot));r.set(c,f),Lo(a)}}else N(u,ot),Lo(a);return!0},get(i,c,u){var v;if(c===fr)return t;var f=r.get(c),d=c in i;if(f===void 0&&(!d||(v=cr(i,c))!=null&&v.writable)&&(f=s(()=>{var g=Fe(d?i[c]:ot),p=Y(g);return p}),r.set(c,f)),f!==void 0){var h=o(f);return h===ot?void 0:h}return Reflect.get(i,c,u)},getOwnPropertyDescriptor(i,c){var u=Reflect.getOwnPropertyDescriptor(i,c);if(u&&"value"in u){var f=r.get(c);f&&(u.value=o(f))}else if(u===void 0){var d=r.get(c),h=d==null?void 0:d.v;if(d!==void 0&&h!==ot)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(i,c){var h;if(c===fr)return!0;var u=r.get(c),f=u!==void 0&&u.v!==ot||Reflect.has(i,c);if(u!==void 0||we!==null&&(!f||(h=cr(i,c))!=null&&h.writable)){u===void 0&&(u=s(()=>{var v=f?Fe(i[c]):ot,g=Y(v);return g}),r.set(c,u));var d=o(u);if(d===ot)return!1}return f},set(i,c,u,f){var k;var d=r.get(c),h=c in i;if(n&&c==="length")for(var v=u;v<d.v;v+=1){var g=r.get(v+"");g!==void 0?N(g,ot):v in i&&(g=s(()=>Y(ot)),r.set(v+"",g))}if(d===void 0)(!h||(k=cr(i,c))!=null&&k.writable)&&(d=s(()=>Y(void 0)),N(d,Fe(u)),r.set(c,d));else{h=d.v!==ot;var p=s(()=>Fe(u));N(d,p)}var m=Reflect.getOwnPropertyDescriptor(i,c);if(m!=null&&m.set&&m.set.call(f,u),!h){if(n&&typeof c=="string"){var w=r.get("length"),_=Number(c);Number.isInteger(_)&&_>=w.v&&N(w,_+1)}Lo(a)}return!0},ownKeys(i){o(a);var c=Reflect.ownKeys(i).filter(d=>{var h=r.get(d);return h===void 0||h.v!==ot});for(var[u,f]of r)f.v!==ot&&!(u in i)&&c.push(u);return c},setPrototypeOf(){$s()}})}var Mo,Va,Ua,Wa;function Ni(){if(Mo===void 0){Mo=window,Va=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Ua=cr(e,"firstChild").get,Wa=cr(e,"nextSibling").get,_a(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),_a(r)&&(r.__t=void 0)}}function gr(t=""){return document.createTextNode(t)}function Pt(t){return Ua.call(t)}function Jn(t){return Wa.call(t)}function F(t,e){return Pt(t)}function V(t,e){{var r=Pt(t);return r instanceof Comment&&r.data===""?Jn(r):r}}function M(t,e=1,r=!1){let n=t;for(;e--;)n=Jn(n);return n}function Ri(t){t.textContent=""}function Zn(){return!1}function Ha(t){we===null&&ye===null&&Xs(),ye!==null&&(ye.f&Lt)!==0&&we===null&&Ks(),Rr&&Gs()}function Li(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Qt(t,e,r,n=!0){var a=we;a!==null&&(a.f&Ht)!==0&&(t|=Ht);var l={ctx:Ve,deps:null,nodes_start:null,nodes_end:null,f:t|Mt,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Sn(l),l.f|=Vn}catch(c){throw er(l),c}else e!==null&&Tr(l);var s=r&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&xo)===0;if(!s&&n&&(a!==null&&Li(l,a),ye!==null&&(ye.f&Tt)!==0&&(t&Sr)===0)){var i=ye;(i.effects??(i.effects=[])).push(l)}return l}function Mi(t){const e=Qt(In,null,!1);return St(e,gt),e.teardown=t,e}function se(t){Ha();var e=we.f,r=!ye&&(e&ar)!==0&&(e&Vn)===0;if(r){var n=Ve;(n.e??(n.e=[])).push(t)}else return Ya(t)}function Ya(t){return Qt(yo|ko,t,!1)}function Fi(t){return Ha(),Qt(In|ko,t,!0)}function ji(t){xn.ensure();const e=Qt(Sr,t,!0);return(r={})=>new Promise(n=>{r.outro?mr(e,()=>{er(e),n(void 0)}):(er(e),n(void 0))})}function Fo(t){return Qt(yo,t,!1)}function qi(t){return Qt(So|xo,t,!0)}function Ga(t,e=0){return Qt(In|e,t,!0)}function G(t,e=[],r=[]){Ci(e,r,n=>{Qt(In,()=>t(...n.map(o)),!0)})}function on(t,e=0){var r=Qt(en|e,t,!0);return r}function $t(t,e=!0){return Qt(ar,t,!0,e)}function Ka(t){var e=t.teardown;if(e!==null){const r=Rr,n=ye;tl(!0),Ft(null);try{e.call(null)}finally{tl(r),Ft(n)}}}function Xa(t,e=!1){var a;var r=t.first;for(t.first=t.last=null;r!==null;){(a=r.ac)==null||a.abort(Ao);var n=r.next;(r.f&Sr)!==0?r.parent=null:er(r,e),r=n}}function Bi(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&ar)===0&&er(e),e=r}}function er(t,e=!0){var r=!1;(e||(t.f&Us)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Ja(t.nodes_start,t.nodes_end),r=!0),Xa(t,e&&!r),$n(t,0),St(t,Ar);var n=t.transitions;if(n!==null)for(const l of n)l.stop();Ka(t);var a=t.parent;a!==null&&a.first!==null&&Za(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Ja(t,e){for(;t!==null;){var r=t===e?null:Jn(t);t.remove(),t=r}}function Za(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function mr(t,e){var r=[];jo(t,r,!0),Qa(r,()=>{er(t),e&&e()})}function Qa(t,e){var r=t.length;if(r>0){var n=()=>--r||e();for(var a of t)a.out(n)}else e()}function jo(t,e,r){if((t.f&Ht)===0){if(t.f^=Ht,t.transitions!==null)for(const s of t.transitions)(s.is_global||r)&&e.push(s);for(var n=t.first;n!==null;){var a=n.next,l=(n.f&tn)!==0||(n.f&ar)!==0;jo(n,e,l?r:!1),n=a}}}function kn(t){$a(t,!0)}function $a(t,e){if((t.f&Ht)!==0){t.f^=Ht,(t.f&gt)===0&&(St(t,Mt),Tr(t));for(var r=t.first;r!==null;){var n=r.next,a=(r.f&tn)!==0||(r.f&ar)!==0;$a(r,a?e:!1),r=n}if(t.transitions!==null)for(const l of t.transitions)(l.is_global||e)&&l.in()}}let an=!1;function el(t){an=t}let Rr=!1;function tl(t){Rr=t}let ye=null,tr=!1;function Ft(t){ye=t}let we=null;function rr(t){we=t}let _t=null;function rl(t){ye!==null&&(_t===null?_t=[t]:_t.push(t))}let yt=null,Nt=0,jt=null;function Di(t){jt=t}let nl=1,En=0,Lr=En;function ol(t){Lr=t}let pr=!1;function al(){return++nl}function Qn(t){var d;var e=t.f;if((e&Mt)!==0)return!0;if((e&ur)!==0){var r=t.deps,n=(e&Lt)!==0;if(r!==null){var a,l,s=(e&On)!==0,i=n&&we!==null&&!pr,c=r.length;if((s||i)&&(we===null||(we.f&Ar)===0)){var u=t,f=u.parent;for(a=0;a<c;a++)l=r[a],(s||!((d=l==null?void 0:l.reactions)!=null&&d.includes(u)))&&(l.reactions??(l.reactions=[])).push(u);s&&(u.f^=On),i&&f!==null&&(f.f&Lt)===0&&(u.f^=Lt)}for(a=0;a<c;a++)if(l=r[a],Qn(l)&&Fa(l),l.wv>t.wv)return!0}(!n||we!==null&&!pr)&&St(t,gt)}return!1}function ll(t,e,r=!0){var n=t.reactions;if(n!==null&&!(_t!=null&&_t.includes(t)))for(var a=0;a<n.length;a++){var l=n[a];(l.f&Tt)!==0?ll(l,e,!1):e===l&&(r?St(l,Mt):(l.f&gt)!==0&&St(l,ur),Tr(l))}}function sl(t){var g;var e=yt,r=Nt,n=jt,a=ye,l=pr,s=_t,i=Ve,c=tr,u=Lr,f=t.f;yt=null,Nt=0,jt=null,pr=(f&Lt)!==0&&(tr||!an||ye===null),ye=(f&(ar|Sr))===0?t:null,_t=null,nn(t.ctx),tr=!1,Lr=++En,t.ac!==null&&(t.ac.abort(Ao),t.ac=null);try{t.f|=Eo;var d=(0,t.fn)(),h=t.deps;if(yt!==null){var v;if($n(t,Nt),h!==null&&Nt>0)for(h.length=Nt+yt.length,v=0;v<yt.length;v++)h[Nt+v]=yt[v];else t.deps=h=yt;if(!pr||(f&Tt)!==0&&t.reactions!==null)for(v=Nt;v<h.length;v++)((g=h[v]).reactions??(g.reactions=[])).push(t)}else h!==null&&Nt<h.length&&($n(t,Nt),h.length=Nt);if(dr()&&jt!==null&&!tr&&h!==null&&(t.f&(Tt|ur|Mt))===0)for(v=0;v<jt.length;v++)ll(jt[v],t);return a!==null&&a!==t&&(En++,jt!==null&&(n===null?n=jt:n.push(...jt))),(t.f&Cr)!==0&&(t.f^=Cr),d}catch(p){return yi(p)}finally{t.f^=Eo,yt=e,Nt=r,jt=n,ye=a,pr=l,_t=s,nn(i),tr=c,Lr=u}}function Ii(t,e){let r=e.reactions;if(r!==null){var n=Bs.call(r,t);if(n!==-1){var a=r.length-1;a===0?r=e.reactions=null:(r[n]=r[a],r.pop())}}r===null&&(e.f&Tt)!==0&&(yt===null||!yt.includes(e))&&(St(e,ur),(e.f&(Lt|On))===0&&(e.f^=On),Ma(e),$n(e,0))}function $n(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)Ii(t,r[n])}function Sn(t){var e=t.f;if((e&Ar)===0){St(t,gt);var r=we,n=an;we=t,an=!0;try{(e&en)!==0?Bi(t):Xa(t),Ka(t);var a=sl(t);t.teardown=typeof a=="function"?a:null,t.wv=nl;var l;nt&&gi&&(t.f&Mt)!==0&&t.deps}finally{an=n,we=r}}}function o(t){var e=t.f,r=(e&Tt)!==0;if(ye!==null&&!tr){var n=we!==null&&(we.f&Ar)!==0;if(!n&&!(_t!=null&&_t.includes(t))){var a=ye.deps;if((ye.f&Eo)!==0)t.rv<En&&(t.rv=En,yt===null&&a!==null&&a[Nt]===t?Nt++:yt===null?yt=[t]:(!pr||!yt.includes(t))&&yt.push(t));else{(ye.deps??(ye.deps=[])).push(t);var l=t.reactions;l===null?t.reactions=[ye]:l.includes(ye)||l.push(ye)}}}else if(r&&t.deps===null&&t.effects===null){var s=t,i=s.parent;i!==null&&(i.f&Lt)===0&&(s.f^=Lt)}if(Rr){if(Pr.has(t))return Pr.get(t);if(r){s=t;var c=s.v;return((s.f&gt)===0&&s.reactions!==null||il(s))&&(c=Po(s)),Pr.set(s,c),c}}else if(r){if(s=t,vr!=null&&vr.has(s))return vr.get(s);Qn(s)&&Fa(s)}if((t.f&Cr)!==0)throw t.v;return t.v}function il(t){if(t.v===ot)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Pr.has(e)||(e.f&Tt)!==0&&il(e))return!0;return!1}function lr(t){var e=tr;try{return tr=!0,t()}finally{tr=e}}const Oi=-7169;function St(t,e){t.f=t.f&Oi|e}function Vi(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(fr in t)qo(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&fr in r&&qo(r)}}}function qo(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{qo(t[n],e)}catch{}const r=qn(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=wa(r);for(let a in n){const l=n[a].get;if(l)try{l.call(t)}catch{}}}}}const Ui=["touchstart","touchmove"];function Wi(t){return Ui.includes(t)}let cl=!1;function Hi(){cl||(cl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function eo(t){var e=ye,r=we;Ft(null),rr(null);try{return t()}finally{Ft(e),rr(r)}}function Yi(t,e,r,n=r){t.addEventListener(e,()=>eo(r));const a=t.__on_r;a?t.__on_r=()=>{a(),n(!0)}:t.__on_r=()=>n(!0),Hi()}const ul=new Set,Bo=new Set;function Gi(t,e,r,n={}){function a(l){if(n.capture||An.call(e,l),!l.cancelBubble)return eo(()=>r==null?void 0:r.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?bn(()=>{e.addEventListener(t,a,n)}):e.addEventListener(t,a,n),a}function Mr(t,e,r,n,a){var l={capture:n,passive:a},s=Gi(t,e,r,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Mi(()=>{e.removeEventListener(t,s,l)})}function at(t){for(var e=0;e<t.length;e++)ul.add(t[e]);for(var r of Bo)r(t)}function An(t){var _;var e=this,r=e.ownerDocument,n=t.type,a=((_=t.composedPath)==null?void 0:_.call(t))||[],l=a[0]||t.target,s=0,i=t.__root;if(i){var c=a.indexOf(i);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=a.indexOf(e);if(u===-1)return;c<=u&&(s=c)}if(l=a[s]||t.target,l!==e){_o(t,"currentTarget",{configurable:!0,get(){return l||r}});var f=ye,d=we;Ft(null),rr(null);try{for(var h,v=[];l!==null;){var g=l.assignedSlot||l.parentNode||l.host||null;try{var p=l["__"+n];if(p!=null&&(!l.disabled||t.target===l))if(Er(p)){var[m,...w]=p;m.apply(l,[t,...w])}else p.call(l,t)}catch(k){h?v.push(k):h=k}if(t.cancelBubble||g===e||g===null)break;l=g}if(h){for(let k of v)queueMicrotask(()=>{throw k});throw h}}finally{t.__root=e,delete t.currentTarget,Ft(f),rr(d)}}}function Do(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Fr(t,e){var r=we;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function I(t,e){var r=(e&Aa)!==0,n=(e&fi)!==0,a,l=!t.startsWith("<!>");return()=>{a===void 0&&(a=Do(l?t:"<!>"+t),r||(a=Pt(a)));var s=n||Va?document.importNode(a,!0):a.cloneNode(!0);if(r){var i=Pt(s),c=s.lastChild;Fr(i,c)}else Fr(s,s);return s}}function Ki(t,e,r="svg"){var n=!t.startsWith("<!>"),a=(e&Aa)!==0,l=`<${r}>${n?t:"<!>"+t}</${r}>`,s;return()=>{if(!s){var i=Do(l),c=Pt(i);if(a)for(s=document.createDocumentFragment();Pt(c);)s.appendChild(Pt(c));else s=Pt(c)}var u=s.cloneNode(!0);if(a){var f=Pt(u),d=u.lastChild;Fr(f,d)}else Fr(u,u);return u}}function pe(t,e){return Ki(t,e,"svg")}function Xi(t=""){{var e=gr(t+"");return Fr(e,e),e}}function Ee(){var t=document.createDocumentFragment(),e=document.createComment(""),r=gr();return t.append(e,r),Fr(e,r),t}function A(t,e){t!==null&&t.before(e)}let Io=!0;function qe(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Ji(t,e){return Zi(t,e)}const ln=new Map;function Zi(t,{target:e,anchor:r,props:n={},events:a,context:l,intro:s=!0}){Ni();var i=new Set,c=d=>{for(var h=0;h<d.length;h++){var v=d[h];if(!i.has(v)){i.add(v);var g=Wi(v);e.addEventListener(v,An,{passive:g});var p=ln.get(v);p===void 0?(document.addEventListener(v,An,{passive:g}),ln.set(v,1)):ln.set(v,p+1)}}};c(bo(ul)),Bo.add(c);var u=void 0,f=ji(()=>{var d=r??e.appendChild(gr());return $t(()=>{if(l){ge({});var h=Ve;h.c=l}a&&(n.$$events=a),Io=s,u=t(d,n)||{},Io=!0,l&&me()}),()=>{var g;for(var h of i){e.removeEventListener(h,An);var v=ln.get(h);--v===0?(document.removeEventListener(h,An),ln.delete(h)):ln.set(h,v)}Bo.delete(c),d!==r&&((g=d.parentNode)==null||g.removeChild(d))}});return Qi.set(u,f),u}let Qi=new WeakMap;const Oo=0,to=1,Vo=2;function $i(t,e,r,n,a){var l=t,s=dr(),i=Ve,c=ot,u,f,d,h=s?Nr(void 0):Ro(void 0,!1,!1),v=s?Nr(void 0):Ro(void 0,!1,!1),g=!1;function p(w,_){g=!0,_&&(rr(m),Ft(m),nn(i));try{w===Oo&&r&&(u?kn(u):u=$t(()=>r(l))),w===Vo&&a&&(d?kn(d):d=$t(()=>a(l,v))),w!==Oo&&u&&mr(u,()=>u=null),w!==to&&f&&mr(f,()=>f=null),w!==Vo&&d&&mr(d,()=>d=null)}finally{_&&(nn(null),Ft(null),rr(null),Ti())}}var m=on(()=>{if(c!==(c=e())){if(Is(c)){var w=c;g=!1,w.then(_=>{w===c&&(hr(h,_),p(to,!0))},_=>{if(w===c&&(hr(v,_),p(Vo,!0),!a))throw v.v}),bn(()=>{g||p(Oo,!0)})}else hr(h,c),p(to,!1);return()=>c=ot}})}function D(t,e,r=!1){var n=t,a=null,l=null,s=ot,i=r?tn:0,c=!1;const u=(v,g=!0)=>{c=!0,h(g,v)};var f=null;function d(){f!==null&&(f.lastChild.remove(),n.before(f),f=null);var v=s?a:l,g=s?l:a;v&&kn(v),g&&mr(g,()=>{s?l=null:a=null})}const h=(v,g)=>{if(s!==(s=v)){var p=Zn(),m=n;if(p&&(f=document.createDocumentFragment(),f.append(m=gr())),s?a??(a=g&&$t(()=>g(m))):l??(l=g&&$t(()=>g(m))),p){var w=Le,_=s?a:l,k=s?l:a;_&&w.skipped_effects.delete(_),k&&w.skipped_effects.add(k),w.add_callback(d)}else d()}};on(()=>{c=!1,e(u),c||h(null,null)},i)}function ro(t,e,r){var n=t,a=ot,l,s,i=null,c=dr()?hi:za;function u(){l&&mr(l),i!==null&&(i.lastChild.remove(),n.before(i),i=null),l=s}on(()=>{if(c(a,a=e())){var f=n,d=Zn();d&&(i=document.createDocumentFragment(),i.append(f=gr())),s=$t(()=>r(f)),d?Le.add_callback(u):u()}})}function mt(t,e){return e}function ec(t,e,r){for(var n=t.items,a=[],l=e.length,s=0;s<l;s++)jo(e[s].e,a,!0);var i=l>0&&a.length===0&&r!==null;if(i){var c=r.parentNode;Ri(c),c.append(r),n.clear(),nr(t,e[0].prev,e[l-1].next)}Qa(a,()=>{for(var u=0;u<l;u++){var f=e[u];i||(n.delete(f.k),nr(t,f.prev,f.next)),er(f.e,!i)}})}function ft(t,e,r,n,a,l=null){var s=t,i={flags:e,items:new Map,first:null},c=(e&Sa)!==0;if(c){var u=t;s=u.appendChild(gr())}var f=null,d=!1,h=new Map,v=To(()=>{var w=r();return Er(w)?w:w==null?[]:bo(w)}),g,p;function m(){tc(p,g,i,h,s,a,e,n,r),l!==null&&(g.length===0?f?kn(f):f=$t(()=>l(s)):f!==null&&mr(f,()=>{f=null}))}on(()=>{p??(p=we),g=o(v);var w=g.length;if(!(d&&w===0)){d=w===0;var _,k,y,C;if(Zn()){var b=new Set,z=Le;for(k=0;k<w;k+=1){y=g[k],C=n(y,k);var L=i.items.get(C)??h.get(C);L?(e&(Un|Wn))!==0&&fl(L,y,k,e):(_=dl(null,i,null,null,y,C,k,a,e,r,!0),h.set(C,_)),b.add(C)}for(const[j,U]of i.items)b.has(j)||z.skipped_effects.add(U.e);z.add_callback(m)}else m();o(v)}})}function tc(t,e,r,n,a,l,s,i,c){var X,ce,Ne,Be;var u=(s&ti)!==0,f=(s&(Un|Wn))!==0,d=e.length,h=r.items,v=r.first,g=v,p,m=null,w,_=[],k=[],y,C,b,z;if(u)for(z=0;z<d;z+=1)y=e[z],C=i(y,z),b=h.get(C),b!==void 0&&((X=b.a)==null||X.measure(),(w??(w=new Set)).add(b));for(z=0;z<d;z+=1){if(y=e[z],C=i(y,z),b=h.get(C),b===void 0){var L=n.get(C);if(L!==void 0){n.delete(C),h.set(C,L);var j=m?m.next:g;nr(r,m,L),nr(r,L,j),Uo(L,j,a),m=L}else{var U=g?g.e.nodes_start:a;m=dl(U,r,m,m===null?r.first:m.next,y,C,z,l,s,c)}h.set(C,m),_=[],k=[],g=m.next;continue}if(f&&fl(b,y,z,s),(b.e.f&Ht)!==0&&(kn(b.e),u&&((ce=b.a)==null||ce.unfix(),(w??(w=new Set)).delete(b))),b!==g){if(p!==void 0&&p.has(b)){if(_.length<k.length){var O=k[0],Q;m=O.prev;var ie=_[0],K=_[_.length-1];for(Q=0;Q<_.length;Q+=1)Uo(_[Q],O,a);for(Q=0;Q<k.length;Q+=1)p.delete(k[Q]);nr(r,ie.prev,K.next),nr(r,m,ie),nr(r,K,O),g=O,m=K,z-=1,_=[],k=[]}else p.delete(b),Uo(b,g,a),nr(r,b.prev,b.next),nr(r,b,m===null?r.first:m.next),nr(r,m,b),m=b;continue}for(_=[],k=[];g!==null&&g.k!==C;)(g.e.f&Ht)===0&&(p??(p=new Set)).add(g),k.push(g),g=g.next;if(g===null)continue;b=g}_.push(b),m=b,g=b.next}if(g!==null||p!==void 0){for(var q=p===void 0?[]:bo(p);g!==null;)(g.e.f&Ht)===0&&q.push(g),g=g.next;var ee=q.length;if(ee>0){var be=(s&Sa)!==0&&d===0?a:null;if(u){for(z=0;z<ee;z+=1)(Ne=q[z].a)==null||Ne.measure();for(z=0;z<ee;z+=1)(Be=q[z].a)==null||Be.fix()}ec(r,q,be)}}u&&bn(()=>{var he;if(w!==void 0)for(b of w)(he=b.a)==null||he.apply()}),t.first=r.first&&r.first.e,t.last=m&&m.e;for(var fe of n.values())er(fe.e);n.clear()}function fl(t,e,r,n){(n&Un)!==0&&hr(t.v,e),(n&Wn)!==0?hr(t.i,r):t.i=r}function dl(t,e,r,n,a,l,s,i,c,u,f){var d=(c&Un)!==0,h=(c&ri)===0,v=d?h?Ro(a,!1,!1):Nr(a):a,g=(c&Wn)===0?s:Nr(s),p={i:g,v,k:l,a:null,e:null,prev:r,next:n};try{if(t===null){var m=document.createDocumentFragment();m.append(t=gr())}return p.e=$t(()=>i(t,v,g,u),vi),p.e.prev=r&&r.e,p.e.next=n&&n.e,r===null?f||(e.first=p):(r.next=p,r.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function Uo(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,a=e?e.e.nodes_start:r,l=t.e.nodes_start;l!==null&&l!==n;){var s=Jn(l);a.before(l),l=s}}function nr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function pt(t,e,r=!1,n=!1,a=!1){var l=t,s="";G(()=>{var i=we;if(s!==(s=e()??"")&&(i.nodes_start!==null&&(Ja(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),s!=="")){var c=s+"";r?c=`<svg>${c}</svg>`:n&&(c=`<math>${c}</math>`);var u=Do(c);if((r||n)&&(u=Pt(u)),Fr(Pt(u),u.lastChild),r||n)for(;Pt(u);)l.before(Pt(u));else l.before(u)}})}function sn(t,e,...r){var n=t,a=Et,l;on(()=>{a!==(a=e())&&(l&&(er(l),l=null),l=$t(()=>a(n,...r)))},tn)}function Wo(t,e,r){var n=t,a,l,s=null,i=null;function c(){l&&(mr(l),l=null),s&&(s.lastChild.remove(),n.before(s),s=null),l=i,i=null}on(()=>{if(a!==(a=e())){var u=Zn();if(a){var f=n;u&&(s=document.createDocumentFragment(),s.append(f=gr())),i=$t(()=>r(f,a))}u?Le.add_callback(c):c()}},tn)}function vl(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=vl(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function rc(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=vl(t))&&(n&&(n+=" "),n+=e);return n}function nc(t){return typeof t=="object"?rc(t):t??""}const hl=[...`
\r\f \v\uFEFF`];function oc(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var a in r)if(r[a])n=n?n+" "+a:a;else if(n.length)for(var l=a.length,s=0;(s=n.indexOf(a,s))>=0;){var i=s+l;(s===0||hl.includes(n[s-1]))&&(i===n.length||hl.includes(n[i]))?n=(s===0?"":n.substring(0,s))+n.substring(i+1):s=i}}return n===""?null:n}function ac(t,e){return t==null?null:String(t)}function ct(t,e,r,n,a,l){var s=t.__className;if(s!==r||s===void 0){var i=oc(r,n,l);i==null?t.removeAttribute("class"):e?t.className=i:t.setAttribute("class",i),t.__className=r}else if(l&&a!==l)for(var c in l){var u=!!l[c];(a==null||u!==!!a[c])&&t.classList.toggle(c,u)}return l}function qt(t,e,r,n){var a=t.__style;if(a!==e){var l=ac(e);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}return n}const lc=Symbol("is custom element"),sc=Symbol("is html");function E(t,e,r,n){var a=ic(t);a[e]!==(a[e]=r)&&(e==="loading"&&(t[Ws]=r),r==null?t.removeAttribute(e):typeof r!="string"&&cc(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function ic(t){return t.__attributes??(t.__attributes={[lc]:t.nodeName.includes("-"),[sc]:t.namespaceURI===di})}var gl=new Map;function cc(t){var e=gl.get(t.nodeName);if(e)return e;gl.set(t.nodeName,e=[]);for(var r,n=t,a=Element.prototype;a!==n;){r=wa(n);for(var l in r)r[l].set&&e.push(l);n=qn(n)}return e}const uc=()=>performance.now(),sr={tick:t=>requestAnimationFrame(t),now:()=>uc(),tasks:new Set};function ml(){const t=sr.now();sr.tasks.forEach(e=>{e.c(t)||(sr.tasks.delete(e),e.f())}),sr.tasks.size!==0&&sr.tick(ml)}function fc(t){let e;return sr.tasks.size===0&&sr.tick(ml),{promise:new Promise(r=>{sr.tasks.add(e={c:t,f:r})}),abort(){sr.tasks.delete(e)}}}function no(t,e){eo(()=>{t.dispatchEvent(new CustomEvent(e))})}function dc(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function pl(t){const e={},r=t.split(";");for(const n of r){const[a,l]=n.split(":");if(!a||l===void 0)break;const s=dc(a.trim());e[s]=l.trim()}return e}const vc=t=>t;function wl(t,e,r,n){var a=(t&ii)!==0,l=(t&ci)!==0,s=a&&l,i=(t&ui)!==0,c=s?"both":a?"in":"out",u,f=e.inert,d=e.style.overflow,h,v;function g(){return eo(()=>u??(u=r()(e,(n==null?void 0:n())??{},{direction:c})))}var p={is_global:i,in(){var k;if(e.inert=f,!a){v==null||v.abort(),(k=v==null?void 0:v.reset)==null||k.call(v);return}l||h==null||h.abort(),no(e,"introstart"),h=Ho(e,g(),v,1,()=>{no(e,"introend"),h==null||h.abort(),h=u=void 0,e.style.overflow=d})},out(k){if(!l){k==null||k(),u=void 0;return}e.inert=!0,no(e,"outrostart"),v=Ho(e,g(),h,0,()=>{no(e,"outroend"),k==null||k()})},stop:()=>{h==null||h.abort(),v==null||v.abort()}},m=we;if((m.transitions??(m.transitions=[])).push(p),a&&Io){var w=i;if(!w){for(var _=m.parent;_&&(_.f&tn)!==0;)for(;(_=_.parent)&&(_.f&en)===0;);w=!_||(_.f&Vn)!==0}w&&Fo(()=>{lr(()=>p.in())})}}function Ho(t,e,r,n,a){var l=n===1;if($r(e)){var s,i=!1;return bn(()=>{if(!i){var m=e({direction:l?"in":"out"});s=Ho(t,m,r,n,a)}}),{abort:()=>{i=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return a(),{abort:Et,deactivate:Et,reset:Et,t:()=>n};const{delay:c=0,css:u,tick:f,easing:d=vc}=e;var h=[];if(l&&r===void 0&&(f&&f(0,1),u)){var v=pl(u(0,1));h.push(v,v)}var g=()=>1-n,p=t.animate(h,{duration:c,fill:"forwards"});return p.onfinish=()=>{p.cancel();var m=(r==null?void 0:r.t())??1-n;r==null||r.abort();var w=n-m,_=e.duration*Math.abs(w),k=[];if(_>0){var y=!1;if(u)for(var C=Math.ceil(_/16.666666666666668),b=0;b<=C;b+=1){var z=m+w*d(b/C),L=pl(u(z,1-z));k.push(L),y||(y=L.overflow==="hidden")}y&&(t.style.overflow="hidden"),g=()=>{var j=p.currentTime;return m+w*d(j/_)},f&&fc(()=>{if(p.playState!=="running")return!1;var j=g();return f(j,1-j),!0})}p=t.animate(k,{duration:_,fill:"forwards"}),p.onfinish=()=>{g=()=>n,f==null||f(n,1-n),a()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=Et)},deactivate:()=>{a=Et},reset:()=>{n===0&&(f==null||f(1,0))},t:()=>g()}}function bl(t,e,r=e){var n=dr(),a=new WeakSet;Yi(t,"input",l=>{var s=l?t.defaultValue:t.value;if(s=Yo(t)?Go(s):s,r(s),Le!==null&&a.add(Le),n&&s!==(s=e())){var i=t.selectionStart,c=t.selectionEnd;t.value=s??"",c!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(c,t.value.length))}}),lr(e)==null&&t.value&&(r(Yo(t)?Go(t.value):t.value),Le!==null&&a.add(Le)),Ga(()=>{var l=e();if(t===document.activeElement){var s=Yn??Le;if(a.has(s))return}Yo(t)&&l===Go(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}function Yo(t){var e=t.type;return e==="number"||e==="range"}function Go(t){return t===""?null:+t}const go=class go{constructor(e){ut(this,ho);ut(this,xr,new WeakMap);ut(this,pn);ut(this,Mn);zt(this,Mn,e)}observe(e,r){var n=ve(this,xr).get(e)||new Set;return n.add(r),ve(this,xr).set(e,n),kr(this,ho,qs).call(this).observe(e,ve(this,Mn)),()=>{var a=ve(this,xr).get(e);a.delete(r),a.size===0&&(ve(this,xr).delete(e),ve(this,pn).unobserve(e))}}};xr=new WeakMap,pn=new WeakMap,Mn=new WeakMap,ho=new WeakSet,qs=function(){return ve(this,pn)??zt(this,pn,new ResizeObserver(e=>{for(var r of e){go.entries.set(r.target,r);for(var n of ve(this,xr).get(r.target)||[])n(r)}}))},Jt(go,"entries",new WeakMap);let Ko=go;var hc=new Ko({box:"border-box"});function _l(t,e,r){var n=hc.observe(t,()=>r(t[e]));Fo(()=>(lr(()=>r(t[e])),n))}function yl(t,e){return t===e||(t==null?void 0:t[fr])===e}function jr(t={},e,r,n){return Fo(()=>{var a,l;return Ga(()=>{a=l,l=[],lr(()=>{t!==r(...l)&&(e(t,...l),a&&yl(r(...a),t)&&e(null,...a))})}),()=>{bn(()=>{l&&yl(r(...l),t)&&e(null,...l)})}}),t}function gc(t=!1){const e=Ve,r=e.l.u;if(!r)return;let n=()=>Vi(e.s);if(t){let a=0,l={};const s=_n(()=>{let i=!1;const c=e.s;for(const u in c)c[u]!==l[u]&&(l[u]=c[u],i=!0);return i&&a++,a});n=()=>o(s)}r.b.length&&Fi(()=>{xl(e,n),Bn(r.b)}),se(()=>{const a=lr(()=>r.m.map(Os));return()=>{for(const l of a)typeof l=="function"&&l()}}),r.a.length&&se(()=>{xl(e,n),Bn(r.a)})}function xl(t,e){if(t.l.s)for(const r of t.l.s)o(r);e()}let oo=!1;function mc(t){var e=oo;try{return oo=!1,[t(),oo]}finally{oo=e}}const pc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function cn(t,e,r){return new Proxy({props:t,exclude:e},pc)}const wc={get(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if($r(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(t,e,r){let n=t.props.length;for(;n--;){let a=t.props[n];$r(a)&&(a=a());const l=cr(a,e);if(l&&l.set)return l.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if($r(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const a=cr(n,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(t,e){if(e===fr||e===ka)return!1;for(let r of t.props)if($r(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if($r(r)&&(r=r()),!!r){for(const n in r)e.includes(n)||e.push(n);for(const n of Object.getOwnPropertySymbols(r))e.includes(n)||e.push(n)}return e}};function un(...t){return new Proxy({props:t},wc)}function P(t,e,r,n){var k;var a=!rn||(r&oi)!==0,l=(r&li)!==0,s=(r&si)!==0,i=n,c=!0,u=()=>(c&&(c=!1,i=s?lr(n):n),i),f;if(l){var d=fr in t||ka in t;f=((k=cr(t,e))==null?void 0:k.set)??(d&&e in t?y=>t[e]=y:void 0)}var h,v=!1;l?[h,v]=mc(()=>t[e]):h=t[e],h===void 0&&n!==void 0&&(h=u(),f&&(a&&Zs(),f(h)));var g;if(a?g=()=>{var y=t[e];return y===void 0?u():(c=!0,y)}:g=()=>{var y=t[e];return y!==void 0&&(i=void 0),y===void 0?i:y},a&&(r&ai)===0)return g;if(f){var p=t.$$legacy;return function(y,C){return arguments.length>0?((!a||!C||p||v)&&f(C?g():y),y):g()}}var m=!1,w=((r&ni)!==0?_n:To)(()=>(m=!1,g()));l&&o(w);var _=we;return function(y,C){if(arguments.length>0){const b=C?o(w):a&&l?Fe(y):y;return N(w,b),m=!0,i!==void 0&&(i=b),y}return Rr&&m||(_.f&Ar)!==0?w.v:o(w)}}function bc(t){Ve===null&&Ea(),rn&&Ve.l!==null?_c(Ve).m.push(t):se(()=>{const e=lr(t);if(typeof e=="function")return e})}function _c(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const yc="5";typeof window<"u"&&((Rs=window.__svelte??(window.__svelte={})).v??(Rs.v=new Set)).add(yc),mi();function kl(t,e){Ue(t)&&kl(t.v,e);const r=Jo(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const n=(r[1]-r[0])/e;return Qe.seq(r[0],r[1],n)}function El(t){if(Ue(t))return El(t.v);const e=new Qe.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Qe(e)}function Xo(t,e){if(Ue(t))return Xo(t.v,e);e===void 0&&(e=.1);const r=Jo(t),n=(r[1]-r[0])*e;return[r[0]-n,r[1]+n]}function Jo(t){if(Ue(t))return Jo(t.v);let e=t[0],r=t[0];for(let n=1;n<t.length;n++)t[n]<e&&(e=t[n]),t[n]>r&&(r=t[n]);return[e,r]}function Sl(t,e){return Ue(t)?Sl(t.v,e):Math.sqrt(Al(t,e))}function Al(t,e){if(e===void 0&&(e=!1),Ue(t))return Al(t.v);const r=Zo(t);let n=0;for(let a=0;a<t.length;a++){const l=t[a]-r;n=n+l*l}return n/(e?t.length:t.length-1)}function Zo(t){return Ue(t)?Zo(t.v):Cl(t)/t.length}function Cl(t){if(Ue(t))return Cl(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function zl(t){if(Ue(t))return zl(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function fn(t){return Ue(t)||Yt(t)?t.v[Qo(t.v)-1]:t[Qo(t)-1]}function Qo(t){if(Ue(t)||Yt(t))return Qo(t.v);let e=1,r=t[0];for(let n=2;n<=t.length;n++)t[n-1]<r&&(e=n,r=t[n-1]);return e}function qr(t){return Ue(t)||Yt(t)?t.v[$o(t.v)-1]:t[$o(t)-1]}function $o(t){if(Ue(t)||Yt(t))return $o(t.v);let e=1,r=t[0];for(let n=2;n<=t.length;n++)t[n-1]>r&&(e=n,r=t[n-1]);return e}function Tl(t,e=0,r=1){let n=Qe.zeros(t);for(let a=0;a<t;a++)n.v[a]=e+Math.random()*(r-e);return n}function Pl(t,e=0,r=1){let n=Qe.zeros(t);for(let a=0;a<t;a++){const l=Math.sqrt(-2*Math.log(Math.random())),s=2*Math.PI*Math.random();n.v[a]=l*Math.sin(s)*r+e}return n}function Nl(t){const e=t.nrows,r=t.ncols;if(e<r){const s=Nl(t.subset([],wt.seq(1,e)));return{Q:s.Q,R:kc(s.Q,t)}}let n=Bt.eye(e),a=t.t();for(let s=1;s<=r;s++)for(let i=e;i>=s+1;i--){const c=a.v.subarray((i-2)*r,i*r),u=n.v.subarray((i-2)*e,i*e),f=c.slice(),d=u.slice(),[h,v,g]=xc(f[s-1],f[s-1+r]);for(let p=0;p<r;p++)c[p]=f[p]*h+f[p+r]*v,c[p+r]=f[p]*-v+f[p+r]*h,u[p]=d[p]*h+d[p+e]*v,u[p+e]=d[p]*-v+d[p+e]*h;for(let p=r;p<e;p++)u[p]=d[p]*h+d[p+e]*v,u[p+e]=d[p]*-v+d[p+e]*h}const l=wt.seq(1,r);return{Q:e===r?n:n.subset([],l),R:e===r?a.t():a.subset([],l).t()}}function xc(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const l=e/t,s=Math.sqrt(1+l*l),i=1/s;return[i,l*i,t*s]}const r=t/e,n=Math.sqrt(1+r*r),a=1/n;return[r*a,a,e*n]}function Rl(t){return typeof t=="number"}function kc(t,e){if(e===void 0&&(e=t),!wr(t)||!wr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,n=t.ncols,a=e.nrows,l=e.ncols,s=n,i=l,c=r,u=new Float64Array(s*i);for(let f=0;f<i;f++){const d=e.v.subarray(f*a,(f+1)*a),h=u.subarray(f*s,(f+1)*s);for(let v=0;v<s;v++){const g=t.v.subarray(v*r,(v+1)*r);let p=0;for(let m=0;m<c;m++)p+=g[m]*d[m];h[v]=p}}return new Bt(u,s,i)}function Ll(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Qe(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new Bt(t.v,e,r)}function wr(t){return t&&t.constructor===Bt}function Ec(t,e,r){return new Bt(new Float64Array(t),e,r)}const de=class de{constructor(e,r,n){if(!ArrayBuffer.isView(e)||e.constructor!==de.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||n===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*n)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=n}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return de.diagm(this.diag().apply(c=>Math.abs(c)>Number.EPSILON?1/c:x));const n=de.eye(e),a=de.eye(e),l=this.t(),s=l.v[(e-1)*e+(e-1)],i=e-1;for(let c=0;c<e;c++)a.v[i*e+c]=n.v[i*e+c]/s;for(let c=e-2;c>=0;c--){let u=n.getcolumn(c+1);const f=l.getcolref(c+1);for(let d=c+1;d<e;d++){const h=a.getcolumn(d+1);u=u.subtract(h.mult(f[d]))}a.v.set(u.divide(f[c]).v,c*e)}return a.t()}if(this.islowertriangular()){const n=this.diag();if(zl(n)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const a=de.eye(e),l=de.eye(e),s=this.t(),i=0,c=s.v[0];for(let u=0;u<e;u++)l.v[i*e+u]=a.v[i*e+u]/c;for(let u=1;u<e;u++){let f=a.getcolumn(u+1);const d=s.getcolref(u+1);for(let h=0;h<u;h++){const v=l.getcolumn(h+1);f=f.subtract(v.mult(d[h]))}l.v.set(f.divide(d[u]).v,u*e)}return l.t()}const r=Nl(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>de.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>de.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let n=0;n<e;n++)r[n]=this.getcolref(n+1)[n];return new Qe(r)}t(){const e=this.nrows,r=this.ncols,n=new de.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let a=0;a<this.ncols;a++){const l=this.v.subarray(a*this.nrows,(a+1)*this.nrows);for(let s=0;s<this.nrows;s++)n[s*r+a]=l[s]}return new de(n,r,e)}for(let a=0;a<this.nrows;a++){const l=n.subarray(a*r,(a+1)*r);for(let s=0;s<this.ncols;s++)l[s]=this.v[s*this.nrows+a]}return new de(n,r,e)}dot(e){if(Ue(e))return new de(ra(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(wr(e))return new de(ra(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,n){if(wr(e))return new de(ea(this.v,e.v,r),this.nrows,this.ncols);if(Rl(e))return new de(ta(this.v,e,r),this.nrows,this.ncols);if(!Ue(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(n===void 0&&(n=e.length===this.ncols?2:1),n===2&&e.length===this.ncols){const a=new de.valuesConstructor(this.v.length);for(let l=0;l<this.ncols;l++)a.set(ta(this.getcolref(l+1),e.v[l],r),l*this.nrows);return new de(a,this.nrows,this.ncols)}if(n===1&&e.length===this.nrows){const a=new de.valuesConstructor(this.v.length);for(let l=0;l<this.ncols;l++)a.set(ea(this.getcolref(l+1),e.v,r),l*this.nrows);return new de(a,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,n)=>r+n)}subtract(e){return this.op(e,(r,n)=>r-n)}mult(e){return this.op(e,(r,n)=>r*n)}divide(e){return this.op(e,(r,n)=>r/n)}apply(e,r){if(r===void 0&&(r=2),r==2){const n=this.ncols,a=new de.valuesConstructor(n);for(let l=0;l<n;l++)a[l]=e(this.getcolref(l+1));return new Qe(a)}if(r==1)return this.t().apply(e,2);if(r==0){const n=this.v.length,a=new de.valuesConstructor(n);for(let l=0;l<n;l++)a[l]=e(this.v[l]);return new de(a,this.nrows,this.ncols)}}replace(e,r,n){typeof r=="number"&&(r=[r]),r.length===0&&(r=wt.seq(1,this.nrows)),Yt(r)||(r=Gt(r)),typeof n=="number"&&(n=[n]),n.length===0&&(n=wt.seq(1,this.ncols)),Yt(n)||(n=Gt(n));const a=r.length,l=n.length;if(fn(r)<1||qr(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(fn(n)<1||qr(n)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==a||e.ncols!==l)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let s=0;s<n.length;s++){const i=e.getcolref(s+1),c=(n.v[s]-1)*this.nrows;for(let u=0;u<r.length;u++){const f=r.v[u];this.v[c+f-1]=i[u]}}return this}copy(){return new de(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Qe.valuesConstructor(this.ncols);for(let n=0;n<this.ncols;n++)r[n]=this.getcolref(n+1)[e-1];return new Qe(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Qe(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Gt([e])),typeof r=="number"&&(r=Gt([r])),Array.isArray(e)&&(e=e.length===0?null:Gt(e)),Array.isArray(r)&&(r=r.length===0?null:Gt(r)),e!==null&&!Yt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Yt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(fn(e)<1||qr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(fn(r)<1||qr(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const i=r.length,c=this.nrows,u=new de.valuesConstructor(c*i);for(let f=0;f<r.length;f++)u.set(this.v.slice((r.v[f]-1)*this.nrows,r.v[f]*this.nrows),f*this.nrows);return new de(u,c,i)}if(r==null)return this.t().subset(r,e).t();const n=e.length,a=r.length,l=new de.valuesConstructor(n*a);let s=new de.valuesConstructor(n);for(let i=0;i<a;i++){const c=this.v.subarray((r.v[i]-1)*this.nrows,r.v[i]*this.nrows);for(let u=0;u<n;u++)s[u]=c[e.v[u]-1];l.set(s,i*n)}return new de(l,n,a)}toString(e){function r(s,i){return" ".repeat(i-s.length)+s}e===void 0&&(e=2),this.ncols;const n=Math.round(Math.abs(Math.log10(qr(this.v))))+e+3;let a="";const l=this.t();for(let s=1;s<=l.ncols;s++)a+=Array.from(l.getcolref(s)).map(i=>r(i.toFixed(e),n)).join(" ")+`
`;return a}toCSV(e,r,n,a){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const l=a!=null&&a.length>0,s=n!=null&&n.length>0;if(l&&a.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(s&&n.length!==this.ncols+(l?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const i=this.t();let c=s?n.join(e)+`
`:"";for(let u=1;u<=i.ncols;u++)c=c+(l?a[u-1]+e:"")+i.getcolref(u).join(e)+`
`;return c=c.replace(/\./g,r),c}static randn(e,r,n,a){return Ll(Pl(e*r,n,a),e,r)}static rand(e,r,n,a){return Ll(Tl(e*r,n,a),e,r)}static eye(e,r){r===void 0&&(r=e);const n=new Float64Array(e*r);for(let a=0;a<Math.min(e,r);a++)n[a*e+a]=1;return new de(n,e,r)}static diagm(e){if(!Ue(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,n=new Float64Array(r*r);for(let a=0;a<r;a++)n[a*r+a]=e.v[a];return new de(n,r,r)}static zeros(e,r){return r===void 0&&(r=e),new de(new Float64Array(e*r),e,r)}static ones(e,r){return de.fill(1,e,r)}static fill(e,r,n){n===void 0&&(n=r);const a=new Float64Array(r*n);for(let l=0;l<a.length;l++)a[l]=e;return new de(a,r,n)}static outer(e,r,n){if(Array.isArray(e)&&(e=xt(e)),Array.isArray(r)&&(r=xt(r)),!Ue(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ue(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const a=de.zeros(e.length,r.length);for(let l=0;l<r.length;l++){const s=r.v[l],i=a.getcolref(l+1);for(let c=0;c<e.length;c++)i[c]=n(e.v[c],s)}return a}static parseCSV(e,r,n,a){function l(m){return m.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const s=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let i=e.split(/\n/),c=[],u=0;const f=i[0].split(r);(n||n===void 0&&l(f))&&(c=f,u=1),i=i.filter(m=>m.trim().length>1);let d=[],h=0;a&&(h=1);const v=i.length-u,g=f.length-h;if(v<1)throw Error("Data file should contain at least 1 row with values.");if(g<1)throw Error("Data file should contain at least 1 column with values.");const p=de.zeros(g,v);for(let m=u;m<v+u;m++){const w=i[m].split(r);let _;if(a?(d[m-u]=w[0],_=w.slice(1).map(k=>Number.parseFloat(k.trim().replace(s,".")))):_=w.map(k=>Number.parseFloat(k.trim().replace(s,"."))),_.some(k=>Number.isNaN(k)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(_.length!=g)throw Error("Wrong number of values in row #"+m);p.v.set(new Float64Array(_),(m-u)*g)}return{values:p.t(),header:c,labels:d,sep:r,dec:s}}};Jt(de,"valuesConstructor",Float64Array),Jt(de,"TOLERANCE",Math.pow(10,-9));let Bt=de;function Ue(t){return t&&t.constructor===Qe}function xt(t){return new Qe(new Float64Array(t))}const et=class et{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new wt.valuesConstructor(this.length);let n=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[n]=a+1,n=n+1);return new wt(r.subarray(0,n))}filter(e){const r=new et.valuesConstructor(this.length);let n=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[n]=this.v[a],n=n+1);return new et(r.subarray(0,n))}shuffle(){return new et(ql(this.v))}sort(e){return new et(Bl(this.v,e))}sortind(e){return new wt(Dl(this.v,e))}rep(e){return Fl(this,e)}repeach(e){return jl(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=wt.seq(1,this.length)),Yt(r)||(r=Gt(r));const n=r.length;if(fn(r)<1||qr(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==n)throw Error('Vector.replace: length of "x" does not match the indices.');for(let a=0;a<r.length;a++){const l=r.v[a];this.v[l-1]=e.v[a]}return this}subset(e){if(typeof e=="number"&&(e=Gt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?wt.bool2ind(e):Gt(e)),!Yt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,n=et.zeros(r);for(let a=0;a<r;a++){if(e.v[a]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[a]>this.length)throw Error("subset: index exceeds the length of the vector.");n.v[a]=this.v[e.v[a]-1]}return n}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new et(this.v.slice(e-1,r))}copy(){return new et(this.v.slice())}dot(e){return e===void 0&&(e=this),ra(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Ue(e))return new et(ea(this.v,e.v,r));if(Rl(e))return new et(ta(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,n)=>r+n)}subtract(e){return this.op(e,(r,n)=>r-n)}mult(e){return this.op(e,(r,n)=>r*n)}divide(e){return this.op(e,(r,n)=>r/n)}apply(e){const r=this.v.length,n=et.zeros(r);for(let a=0;a<r;a++)n.v[a]=e(this.v[a]);return n}static c(...e){if(e.length===1)return e[0];const r=e.reduce((l,s)=>l+(typeof s=="number"?1:s.length),0),n=new et.valuesConstructor(r);let a=0;for(const l of e)typeof l=="number"?(n[a]=l,a+=1):(n.set(Ue(l)?l.v:new et.valuesConstructor(l),a),a+=typeof l=="number"?1:l.length);return new et(n)}static seq(e,r,n){return Ml(e,r,n,et)}static randn(e,r,n){return Pl(e,r,n)}static rand(e,r,n){return Tl(e,r,n)}static zeros(e){return new et(new et.valuesConstructor(e))}static ones(e){return et.fill(1,e)}static fill(e,r){const n=new et.valuesConstructor(r);for(let a=0;a<n.length;a++)n[a]=e;return new et(n)}};Jt(et,"valuesConstructor",Float64Array);let Qe=et;function Yt(t){return t.constructor===wt}function Gt(t){return new wt(new Int32Array(t))}const it=class it{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new it.valuesConstructor(this.length);let n=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[n]=a+1,n=n+1);return new it(r.subarray(0,n))}filter(e){const r=new it.valuesConstructor(this.length);let n=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[n]=this.v[a],n=n+1);return new it(r.subarray(0,n))}shuffle(){return new it(ql(this.v))}sort(e){return new it(Bl(this.v,e))}sortind(e){return new it(Dl(this.v,e))}rep(e){return Fl(this,e)}repeach(e){return jl(this,e)}subset(e){if(typeof e=="number"&&(e=Gt([e])),Array.isArray(e)&&(e=Gt(e)),!Yt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,n=new it.valuesConstructor(r);for(let a=0;a<r;a++){if(e.v[a]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[a]>this.length)throw Error("subset: index exceeds the length of the vector.");n[a]=this.v[e.v[a]-1]}return new it(n)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new it(this.v.slice(e-1,r))}static seq(e,r,n){return Ml(e,r,n,it)}static ones(e){return it.fill(1,e)}static fill(e,r){const n=new it.valuesConstructor(r);for(let a=0;a<n.length;a++)n[a]=e;return new it(n)}static bool2ind(e){let r=0;const n=new it.valuesConstructor(e.length);for(let a=0;a<e.length;a++)e[a]&&(n[r]=a+1,r=r+1);return new it(n.subarray(0,r))}};Jt(it,"valuesConstructor",Int32Array);let wt=it;function Ml(t,e,r,n){r===void 0&&(r=t<=e?1:-1);const a=Math.floor((e-t)/r)+1;if(a<1)throw Error("seq: wrong combination of parameters.");const l=new n.valuesConstructor(a);for(let s=0;s<a;s++)l[s]=t+s*r;return new n(l)}function Fl(t,e){const r=t.length*e,n=new t.constructor.valuesConstructor(r);for(let a=1;a<=e;a++)for(let l=0;l<t.length;l++)n[(a-1)*t.length+l]=t.v[l];return new t.constructor(n)}function jl(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,n=new t.constructor.valuesConstructor(r);for(let a=0;a<t.length;a++)for(let l=0;l<e;l++)n[a*e+l]=t.v[a];return new t.constructor(n)}function ea(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const n=new t.constructor(t.length);for(let a=0;a<t.length;a++)n[a]=r(t[a],e[a]);return n}function ta(t,e,r){const n=new t.constructor(t.length);for(let a=0;a<t.length;a++)n[a]=r(t[a],e);return n}function ra(t,e,r,n,a,l){if(n!==a)throw Error("_dot: matrix dimensions do not much.");const s=r,i=l,c=n,u=new t.constructor(s*i);for(let f=0;f<i;f++){const d=e.subarray(f*a,(f+1)*a),h=u.subarray(f*s,(f+1)*s);for(let v=0;v<c;v++){const g=d[v],p=t.subarray(v*r,(v+1)*r);for(let m=0;m<s;m++)h[m]+=p[m]*g}}return u}function ql(t){let e=t.slice(),r=e.length,n,a;for(;r;)a=Math.floor(Math.random()*r--),n=e[r],e[r]=e[a],e[a]=n;return e}function Bl(t,e=!1){return e?t.slice().sort((r,n)=>n-r):t.slice().sort((r,n)=>r-n)}function Dl(t,e=!1){const r=wt.seq(1,t.length).v;return e?r.sort((n,a)=>t[a-1]-t[n-1]):r.sort((n,a)=>t[n-1]-t[a-1])}function Sc(t,e){if(e[0]===0){const r=e[1]+2;return 2+r+t*r+2*t+r}return 3+t}const ir=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:Sc,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function Ac(t){const e=ir.findIndex(a=>a.id==="trim"),r=t.ml.findLastIndex(a=>a===e);if(r<0)return[0,0];const n=t.mpl.slice(0,r).reduce((a,l)=>a+l,0);return[t.mp[n],t.mp[n+1]]}function Cc(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const n=ir[t.ml[r]].title;e=e+"<li>"+n+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function Il(t,e,r){const n=ir.findIndex(d=>d.id==="trim");let a=0,l=t.ncols-e,s=0;for(let d=0;d<r.ml.length;d++){if(r.ml[d]!==n){s+=r.mpl_new[d];continue}a=Math.max(a,r.mp_new[s]),l=Math.min(l,r.mp_new[s+1]),s+=r.mpl_new[d]}const i=t.nrows,u=l-a+e,f=Bt.zeros(i,u);return s=0,e>0&&(f.v.set(t.v.slice(0,e*i),s),s+=e*i),f.v.set(t.v.slice((e+a)*i,(e+l)*i),s),[a,l,f]}function Ol(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=ir.findIndex(i=>i.id==="trim");if(e.ml.findIndex(i=>i===r)<0)return t;const[a,l,s]=Il(t.values,t.nresp,e);return t.values=s,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+a,t.nresp+l)):t.varlabels.slice(a,l),t.varindices=t.nresp>0?Br(0,t.nresp-1).concat(Br(0,l-a-1)):Br(0,l-a-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+a,t.nresp+l)):t.varvalues.slice(a,l),t}function Vl(t,e,r,n,a=!0,l=[]){if(!wr(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(n)||n.length<1)throw new Error("prep_fit: list with methods is not correct.");let s,i;a?(s=e.ncols,i=e.nrows-r):(s=e.nrows,i=e.ncols-r);const c=n.length;if(c<1)throw new Error("prep_fit: no preprocessing methods are provided.");const u=new Int32Array(c),f=new Int32Array(c),d=new Int32Array(c);let h=0,v=0;for(let Q=0;Q<n.length;Q++){const ie=n[Q].id,K=n[Q].params,q=ir.findIndex(be=>be.id==ie);if(q<0)throw new Error("prep_fit: wrong method name: "+ie+".");const ee=ir[q];if(K.length!==ee.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+ie+".");u[Q]=q,f[Q]=ee.mpl,d[Q]=ee.get_mpl_new(i,K),h=h+f[Q],v=v+d[Q]}const g=new Float64Array(h);let p=0;for(let Q=0;Q<n.length;Q++){const ie=n[Q].id,K=n[Q].params;ir.findIndex(q=>q.id==ie),g.set(K,p),p=p+f[Q]}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const w=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,w/u.BYTES_PER_ELEMENT);const _=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAP32.set(f,_/f.BYTES_PER_ELEMENT);const k=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,k/d.BYTES_PER_ELEMENT);const y=t._malloc(g.length*g.BYTES_PER_ELEMENT);t.HEAPF64.set(g,y/g.BYTES_PER_ELEMENT);const C=t._malloc(v*g.BYTES_PER_ELEMENT),b=new Int32Array(l),z=b.length,L=t._malloc(z*b.BYTES_PER_ELEMENT);if(t.HEAP32.set(b,L/b.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[m,s,i,r,c,w,_,y,k,C,a,L,z])!==1)throw new Error("prep_fit: unexpected error.");const U=t.HEAPF64.slice(C/g.BYTES_PER_ELEMENT,C/g.BYTES_PER_ELEMENT+v);return t._free(m),t._free(w),t._free(y),t._free(_),t._free(L),t._free(C),t._free(k),{ml:u,mpl:f,mp:g,mpl_new:d,mp_new:U,npred:i,class:["prepmodel"]}}function na(t,e,r,n,a=!0,l=!1){if(!wr(e))throw new Error("prep_apply: D must be a matrix.");let s,i;if(a?(s=e.ncols,i=e.nrows-r):(s=e.nrows,i=e.ncols-r),i!==n.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+n.npred+" got "+i+").");const c=n.ml,u=n.mpl_new,f=n.mp_new,d=u.reduce((C,b)=>C+b,0);if(!c||c.length<1||!u||u.length!==c.length||f.length!==d)throw new Error("prep_apply: wrong structure of the model object.");const h=c.length,v=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,v/e.v.BYTES_PER_ELEMENT);const g=t._malloc(c.length*c.BYTES_PER_ELEMENT);t.HEAP32.set(c,g/c.BYTES_PER_ELEMENT);const p=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,p/u.BYTES_PER_ELEMENT);const m=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAPF64.set(f,m/f.BYTES_PER_ELEMENT);const w=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[v,s,i,r,h,g,p,m,w,a])!==1)throw new Error("prep_apply: unexpected error.");const k=t.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(v),t._free(g),t._free(p),t._free(m),t._free(w);const y=new Bt(k,e.nrows,e.ncols);if(l){const[C,b,z]=Il(y,r,n);return z}return y}function Br(t,e,r=1){const n=Math.round((e-t+1)/r),a=Array(n);for(let l=0;l<n;l++)a[l]=t+l*r;return a}function zc(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function Cn(t){return t.some(e=>Number.isNaN(e))}function Dr(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ul(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Tc(t,e,r,n,a,l,s,i=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const c=e===";"?",":".";let u=Ul(t);if(u.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");u=u.filter(q=>q.replaceAll(e,"").trim().length>0);const f=u[0].split(e);if(f.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let d=0,h;const v=r!=="no";(v||v===void 0&&Cn(firstRow))&&(h=f,d=1);const g=u.length-d;if(g<1)throw new Error("Data file should contain at least 1 row with values.");let p,m,w,_=Array(g);n?(p=v?Dr(h[0]):"",w=Array(g),m=1):(p="",w=[],m=0);let k,y=[],C;a?(k=v?Dr(h[m]):"",C=Array(g),m=m+1):(k="",C=[]);const b=f.length-m;if(b<1)throw new Error("Data file should contain at least 1 column with values.");const z=Bt.zeros(b,g);for(let q=d;q<g+d;q++){const ee=q-d;_[ee]=ee;let be=u[q].split(e);if(n&&(w[ee]=be[0],be.shift()),a){const X=be[0];C[ee]=X,be.shift(),(y.length===0||y.indexOf(X)<0)&&y.push(X)}const fe=c==="."?be.map((X,ce)=>Number.parseFloat(X.trim())):be.map((X,ce)=>Number.parseFloat(X.trim().replace(c,".")));if(fe.some(X=>Number.isNaN(X)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(fe.length!=b)throw new Error("Wrong number of values in row #"+q);z.v.set(new Float64Array(fe),(q-d)*b)}if(!n||w.length!==g){w=Array(g);for(let q=0;q<g;q++)w[q]="O"+(q+1)}w=w.map(q=>Dr(q)),C=C.map(q=>Dr(q)),y=y.map(q=>Dr(q));let L,j=Array(b),U=Array(b);if(h&&h.length===b+m){L=h.map(q=>Dr(q)).slice(m);for(let q=0;q<b;q++)j[q]=q>=i?q-i:q,U[q]=q>=i?q-i+1:q+1}else{L=Array(b);for(let q=0;q<b;q++)j[q]=q>=i?q-i:q,L[q]=q>=i?"V"+(q-i+1):"Y"+(q+1),U[q]=q>=i?q-i+1:q+1}let O;if(r==="values"){if(O=c==="."?L.map((q,ee)=>ee<i?ee:Number.parseFloat(q.trim())):L.map((q,ee)=>ee<i?ee:Number.parseFloat(q.trim().replace(c,"."))),O.some(q=>Number.isNaN(q)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else O=U;Array.isArray(O)||(O=[]),l||(l=""),s||(s=""),l=O.length>0&&l.length>0?l:"Variables",s=O.length>0&&s.length>0?s:"";const Q=l+(s.length>0?", "+s:""),ie=O[1]<O[0];return{values:z.t(),nresp:i,header:r,hasLabels:n,hasClassNames:a,labelsVarname:p,classLabelsVarname:k,objlabels:w,objindices:_,varlabels:L,varvalues:O,varindices:j,varrev:ie,classes:C,classNames:y,sep:e,dec:c,varvaluesName:l,varvaluesUnits:s,varAxisTitle:Q}}function Pc(t){if(Cn(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let n=2;n<e;n++){let a=[];for(let u=1;u<t.length;u++)a.push(t[u][n]);const l=t[0][n],s=Zo(a),i=Sl(a),c=Math.abs((l-s)/i);r.push(c)}return r.every(n=>n>5)}function Nc(t){const r=t[0].split(","),n=t[1].split(","),a=r.length,l=n.length,s=";",i=t[0].split(s),c=t[1].split(s),u=i.length,f=c.length;let d,h;if(a>1&&l>1&&a===l&&a>u)h=",",d=a;else if(u>1&&f>1&&u===f)h=s,d=u;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",d]}function Rc(t,e=0){const r=Ul(t),n=r.length;if(n<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[a,l,s]=Nc(r),i=Math.min(s,5),c=Math.min(n,5);let u=r[0].split(a).length,f=r.slice(0,c).map(j=>j.split(a).slice(0,i));f=f.map(j=>j.map(U=>Dr(U)));const d=f.map(j=>zc(j.slice(),l));for(let j=1;j<c;j++)if(Cn(d[j].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const h=Pc(d);let v=0;const g=h?1:0,p=g+1,m=f[g][0],w=f[p][0],_=d[g][0],k=d[p][0],y=d[g][1],C=d[p][1];let b=!1,z=!1;if(Number.isNaN(_)&&Number.isNaN(k)&&m!==w?(b=!0,v=v+1):Number.isNaN(y)&&Number.isNaN(C)&&m!==w&&(b=!0,z=!0,v=v+2),!z){const j=b?1:0,U=d[g][j],O=d[p][j];z=Cn([U,O]),v=v+z}let L="no";if(h){v>0?f[0].slice(v+e):f[e];const j=v>0?d[0].slice(v+e):d[e];L=Cn(j)?"labels":"values"}return[a,b,z,L,u]}function Lc(t){const e=t.values.t(),r=t.sep,n=t.dec;let a=null;t.header!=="no"&&(a=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),a&&t.hasClassNames&&(a=[t.classLabelsVarname,...a]),a&&t.hasLabels&&(a=[t.labelsVarname,...a]);const l=t.classes&&t.classes.length===e.ncols,s=t.objlabels&&t.objlabels.length===e.ncols;let i=a?a.join(r):"";for(let c=0;c<e.ncols;c++){let u=e.getcolref(c+1).join(r);n!=="."&&(u=u.replace(".",n)),l&&(u=t.classes[c]+t.sep+u),s&&(u=t.objlabels[c]+t.sep+u),i=i+`
`+u}return i=i+`
`,n!=="."&&(i=i.replace(/\./g,n)),i}function Mc(t,e){const r=Lc(t),n=new Blob([r],{type:"text/csv"}),a=window.URL.createObjectURL(n),l=document.createElement("a");l.setAttribute("href",a),l.setAttribute("download",`${e}.csv`),l.click()}function Fc(t,e){const r=new Blob([JSON.stringify(t,ao)],{type:"application/json"}),n=window.URL.createObjectURL(r),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),a.click()}function ao(t,e){return wr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ue(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function Wl(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Ec(e.v,e.nrows,e.ncols);if(e.__type==="vector")return xt(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function oa(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${n}${a}${l}${s}`}function Hl(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function lo(t,e,r){let n="";for(let a=0;a<e;a++){const l=t.getUint8(r++);if(l===0)break;n+=String.fromCharCode(l)}return n}function jc(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],n=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],a=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let l=0;const s=t.getUint8(l);l+=1;const i=t.getUint8(l);if(l+=1,i===77)throw new Error("SPC file has old format which is not supported.");const c=i===75,u=t.getUint8(l);l+=1;const f=t.getInt8(l);l+=1;const d=t.getUint32(l,c);l+=4;const h=t.getFloat64(l,c);l+=8;const v=t.getFloat64(l,c);l+=8;const g=t.getUint32(l,c);l+=4;const p=t.getUint8(l);l+=1;const m=t.getUint8(l);l+=1;const w=t.getUint8(l);l+=1;const _=t.getUint8(l);l+=1;const k=t.getUint32(l,c);l+=4;const y=lo(t,9,l);l+=9;const C=lo(t,9,l);l+=9;const b=t.getUint16(l,c);l+=2;const z=Array.from({length:8},()=>{const Be=t.getFloat32(l,c);return l+=4,Be}),L=lo(t,130,l);l+=130;const j=lo(t,30,l);l+=30;const U=t.getUint32(l,c);l+=4;const[O,Q,ie,K,q,ee,be,fe]=Hl(s),X=p===255?r[31]:r[p],ce=p===255?e[31]:e[p],Ne=m<=26?n[m]:m>=128&&m<=131?a[m]:"Unknown";return{ftflgsv:s,ftflgs:{TSPREC:O,TCGRAM:Q,TMULTI:ie,TRANDM:K,TORDRD:q,TALABS:ee,TXYXYS:be,TXVALS:fe},fexper:u,fexp:f,fnpts:d,ffirst:h,flast:v,fnsub:g,fxtype:p,fytype:m,fztype:w,fpost:_,fdate:k,fres:y,fsource:C,fpeakpt:b,fspare:z,fcmnt:L,fcatxt:j,flogoff:U,xaxisName:X,xaxisUnit:ce,yaxisName:Ne}}function qc(t,e){const r=Hl(t.getUint8(e));e+=1;const n=t.getInt8(e);e+=1;const a=t.getUint16(e,!0);e+=2;const l=t.getFloat32(e,!0);e+=4;const s=t.getFloat32(e,!0);e+=4;const i=t.getFloat32(e,!0);e+=4;const c=t.getInt32(e,!0);e+=4;const u=t.getInt32(e,!0);e+=4;const f=t.getFloat32(e,!0);return e+=4,{flags:r,exp:n,index:a,time:l,next:s,noise:i,nPoints:c,nScans:u,wAxis:f}}async function Yl(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),n=await t.arrayBuffer(),a=new DataView(n);let l=0;const s=jc(a);l+=512;const i=s.fnpts;if(i<2)throw new Error(`Error reading SPC file (${t.name}).`);let c=new Array(i);if(s.ftflgs.TXVALS)for(let d=0;d<i;d++){const h=a.getFloat32(l,!0);l=l+4,c[d]=h}else{(s.flast-s.ffirst)/(i-1);for(let d=0;d<i;d++)c[d]=s.ffirst+d*s.flast}const u=new Float64Array(i*s.fnsub);for(let d=0;d<s.fnsub;d++){qc(a,l),l=l+32;for(let h=0;h<i;h++){const v=a.getFloat32(l,!0);l=l+4,u[d*i+h]=v}}const f=[];return s.fnsub>1?Br(1,s.fnsub).forEach(h=>{f.push(r+"_"+h)}):f.push(r),{hdr:s,xvalues:c,yvalues:u,objlabels:f}}async function Bc(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let n=[],a=[];const l=await Yl(t[0]),s=l.xvalues.length;if(r.push(l.yvalues),n=n.concat(l.objlabels),a.push(l.hdr.fnsub),e>1)for(let g=1;g<e;g++){const p=await Yl(t[g]);if(p.xvalues.length!==s)throw new Error("Number of spectral values in SPC files is different.");r.push(p.yvalues),n=n.concat(p.objlabels),a.push(p.hdr.fnsub)}const i=a.reduce((g,p)=>g+p,0),c=new Float64Array(i*s);let u=0;for(let g=0;g<r.length;g++)c.set(r[g].slice(),u),u+=a[g]*s;const f=new Bt(c,s,i),d=Br(0,s-1),h=Br(0,i-1),v=l.xvalues.map(g=>g.toFixed(1));return{values:f.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:n,objindices:h,varlabels:v,varvalues:l.xvalues,varindices:d,varev:l.xvalues[1]<l.xvalues[0],sep:",",dec:".",varvaluesName:l.hdr.xaxisName,varvaluesUnits:l.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var Dc=I('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function br(t,e){let r=P(e,"text",3,"button");var n=Dc();n.__click=function(...l){var s;(s=e.onclick)==null||s.apply(this,l)};var a=F(n);G(()=>qe(a,r())),A(t,n)}at(["click"]);var Ic=I('<button tabindex="0"></button>');function zn(t,e){P(e,"disable",3,!1);var r=Ic();r.__click=function(...n){var a;(a=e.onclick)==null||a.apply(this,n)},G(()=>{E(r,"title",e.title),E(r,"aria-label",e.title),E(r,"alt",e.title),ct(r,1,`button ${e.className??""}`,"svelte-bx9fh5")}),A(t,r)}at(["click"]);function so(t,e){let r=P(e,"title",3,"Reset");zn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function Oc(t,e){let r=P(e,"title",3,"Add");zn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function Vc(t,e){let r=P(e,"title",3,"Settings");zn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function Uc(t,e){let r=P(e,"title",3,"Move up");zn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function Wc(t,e){let r=P(e,"title",3,"Move down");zn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}var Hc=I('<span class="label svelte-1986c5z"> </span>'),Yc=I("<div><!> <!></div>");function ne(t,e){let r=P(e,"label",3,null),n=P(e,"name",3,""),a=P(e,"status",3,""),l=P(e,"colors",3,""),s=P(e,"labelWidth",3,12);var i=Yc(),c=F(i);{var u=d=>{var h=Hc(),v=F(h);G(()=>{qt(h,`flex-basis:${s()??""}ch;`),qe(v,r())}),A(d,h)};D(c,d=>{r()&&d(u)})}var f=M(c,2);sn(f,()=>e.children??Et),G(()=>{ct(i,1,`control-element ${n()??""} ${a()??""}`,"svelte-1986c5z"),qt(i,l())}),A(t,i)}const Gl=(t,e,r,n)=>{const a=e(t);a<0||a>1||N(r,a*100>o(n)-5&&a*100<o(n)+5,!0)},Kl=(t,e,r,n,a,l)=>{N(e,!1);const s=r(t);s<0||s>1||(n(a(s)),l()&&l()(n()))},Xl=(t,e,r,n,a,l)=>{if(!o(e))return;const s=r(t);s<0||s>1||(n(a(s)),l()&&l()(n()))},Gc=(t,e,r,n,a,l)=>{if(t.key==="ArrowLeft"){e(e()-r()<n()?n():e()-r()),a()&&a()(e());return}if(t.key==="ArrowRight"){e(e()+r()>l()?l():e()+r()),a()&&a()(e());return}};var Kc=I('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function io(t,e){ge(e,!0);let r=P(e,"min",7,0),n=P(e,"max",3,100),a=P(e,"value",31,()=>Fe(r())),l=P(e,"decNum",3,1),s=P(e,"step",19,()=>+((n()-r())/100).toFixed(4)),i=P(e,"onchange",3,null);se(()=>{a()<r()&&(a(r()),i()&&i()(a())),a()>n()&&(a(n()),i()&&i()(a())),r()>n()&&r(n())});let c=Y(void 0),u=Y(void 0),f=Y(!1);const d=b=>{const z=r()+b*(n()-r());return+(Math.round(z/s())*s()).toFixed(4)},h=b=>{const z=o(c).getBoundingClientRect(),L=o(u).getBoundingClientRect(),j=z.x,U=L.x+L.width;return(b.clientX-j)/(U-j)},v=b=>{N(f,!1)},g=b=>{let z=a()+s()*b.deltaY*.5;z<r()&&(z=r()),z>n()&&(z=n()),a(+(Math.round(z/s())*s()).toFixed(4)),b.preventDefault(),i()&&i()(a())},p=T(()=>r()===n()?100:(a()-r())/(n()-r())*100);var m=Kc();m.__keydown=[Gc,a,s,r,i,n],m.__mousemove=[Xl,f,h,a,d,i],m.__mousedown=[Gl,h,f,p],m.__mouseup=[Kl,f,h,a,d,i],m.__touchmove=[Xl,f,h,a,d,i],m.__touchstart=[Gl,h,f,p],m.__touchend=[Kl,f,h,a,d,i];var w=F(m);let _;var k=F(w);let y;var C=F(k);jr(w,b=>N(c,b),()=>o(c)),jr(m,b=>N(u,b),()=>o(u)),G((b,z,L)=>{E(m,"aria-valuenow",a()),E(m,"aria-valuemin",r()),E(m,"aria-valuemax",n()),_=ct(w,1,"range-slider svelte-vhx0r0",null,_,b),qt(w,`width:${o(p)??""}%`),y=ct(k,1,"range-value svelte-vhx0r0",null,y,z),qe(C,L)},[()=>({"range-slider_right":o(p)<50}),()=>({"range-value_right":o(p)<50}),()=>a().toFixed(l())]),Mr("mousewheel",m,g),Mr("mouseleave",m,v),Mr("touchcancel",m,v),A(t,m),me()}at(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Jl=(t,e,r,n,a)=>{const l=e(t);l<0||l>1||N(r,l>o(n)&&l<o(a)+o(n),!0)},Zl=(t,e,r,n,a)=>{N(e,!1);const l=r(t);if(l<0||l>1)return;const s=n(l);a()!==s&&a(s)},Ql=(t,e,r,n,a)=>{if(!o(e))return;const l=r(t);if(l<0||l>1)return;const s=n(l);s!=a()&&a(s)},Xc=(t,e,r,n,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<n()?n():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r());return}};var Jc=I('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function Tn(t,e){ge(e,!0);let r=P(e,"min",3,0),n=P(e,"max",3,10),a=P(e,"value",31,()=>Fe(r())),l=P(e,"step",3,1);a()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),a(r())),a()>n()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),a(n())),r()>n()&&console.error("The min and max values must be distinct.");let s=Y(void 0),i=Y(void 0),c=Y(!1);const u=T(()=>r()===n()?0:(a()-r())/(n()-r()+l())),f=T(()=>l()/(n()-r()+l())),d=T(()=>n()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${o(f)*100}%, var(--bg-color-light2, #e8e8e8) ${o(f)*100}%, var(--bg-color-light2, #e8e8e8) ${200*o(f)}%)`:"background: #f0f0f0"),h=b=>{if(b<0||b>1)return a();let z=a();return Math.round(o(f)/b),b<o(u)&&o(u)>0&&(z=a()-l()*Math.ceil((o(u)-b)/o(f))),b>o(u)+o(f)&&o(u)+o(f)<1&&(z=a()+l()*Math.ceil((b-(o(u)+o(f)))/o(f))),z<r()&&(z=r()),z>n()&&(z=n()),z},v=b=>{const z=o(i).getBoundingClientRect(),L=z.x,j=z.x+z.width;return(b.clientX-L)/(j-L)},g=b=>{N(c,!1)},p=b=>{let z=a()+Math.round(b.deltaY*.5)*l();z<r()&&(z=r()),z>n()&&(z=n()),a(z),b.preventDefault()};var m=Jc();m.__keydown=[Xc,a,l,r,n],m.__mousemove=[Ql,c,v,h,a],m.__mousedown=[Jl,v,c,u,f],m.__mouseup=[Zl,c,v,h,a],m.__touchmove=[Ql,c,v,h,a],m.__touchstart=[Jl,v,c,u,f],m.__touchend=[Zl,c,v,h,a];var w=F(m);let _;var k=F(w);let y;var C=F(k);jr(w,b=>N(s,b),()=>o(s)),jr(m,b=>N(i,b),()=>o(i)),G((b,z,L)=>{E(m,"aria-valuenow",a()),E(m,"aria-valuemin",r()),E(m,"aria-valuemax",n()),qt(m,o(d)),_=ct(w,1,"range-slider svelte-xdlm7u",null,_,b),qt(w,`width: max(2px, ${o(f)*100}%);left:${o(u)*100}%;`),y=ct(k,1,"range-value svelte-xdlm7u",null,y,z),qe(C,L)},[()=>({"range-slider_left":o(f)<.1&&o(u)<.5,"range-slider_right":o(f)<.1&&o(u)>=.5}),()=>({"range-value_right":o(f)<.1&&o(u)>.5,"range-value_left":o(f)<.1&&o(u)<=.5}),()=>a().toFixed(0)]),Mr("mousewheel",m,p),Mr("mouseleave",m,g),Mr("touchcancel",m,g),A(t,m),me()}at(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Zc=(t,e,r)=>{if(t.key==="ArrowLeft"){const n=e.options.findIndex(a=>a===r());n>0&&r(e.options[n-1]);return}if(t.key==="ArrowRight"){const n=e.options.findIndex(a=>a===r());n<e.options.length-1&&r(e.options[n+1]);return}};var Qc=(t,e,r)=>e(r),$c=I('<button tabindex="-1"><!></button>'),eu=I('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox"/>',1);function Dt(t,e){ge(e,!0);let r=P(e,"value",31,()=>Fe(e.options[0])),n=P(e,"className",3,"");var a=eu(),l=V(a);l.__keydown=[Zc,e,r],ft(l,20,()=>e.options,i=>i,(i,c)=>{var u=$c();u.__click=[Qc,r,c];let f;var d=F(u);pt(d,()=>c),G((h,v)=>f=ct(u,1,`option option_${h??""}`,"svelte-1i17tox",f,v),[()=>c.toString().replace(".","_"),()=>({selected:c==r()})]),A(i,u)});var s=M(l,2);G(()=>ct(l,1,`selector ${n()??""}`,"svelte-1i17tox")),bl(s,r),A(t,a),me()}at(["keydown","click"]);function aa(t,e){ge(e,!0);let r=P(e,"options",19,()=>["no","yes"]),n=P(e,"value",15,!1),a=Y(!0);const l=T(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());se(()=>N(a,n()?r()[1]:r()[0],!0)),se(()=>n(o(a)===r()[1]));var s=Ee(),i=V(s);{var c=u=>{Dt(u,{get options(){return o(l)},get value(){return o(a)},set value(f){N(a,f,!0)}})};D(i,u=>{o(l)&&u(c)})}A(t,s),me()}function $l(t,e,r){o(e)&&o(e).files.length>0?r(o(e).files.length===1?o(e).files[0]:o(e).files):r(null)}function es(t,e){(t.type==="click"||t.type==="keydown"&&(t.code==="Space"||t.code==="Enter"))&&o(e).click()}var tu=I('<input type="file" multiple class="svelte-1k0x7uv"/>'),ru=I('<input type="file" class="svelte-1k0x7uv"/>'),nu=I('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function ts(t,e){ge(e,!0);let r=P(e,"file",15),n=P(e,"message",3,"Select CSV file with dataset"),a=P(e,"acceptType",3,".csv"),l=P(e,"multiple",3,!1),s=Y(void 0);function i(w){o(s).value=null,r(null)}var c=nu(),u=V(c);u.__keydown=[es,s],u.__click=[es,s];let f;var d=F(u),h=M(d);{var v=w=>{var _=tu();_.__change=[$l,s,r],jr(_,k=>N(s,k),()=>o(s)),G(()=>E(_,"accept",a())),A(w,_)},g=w=>{var _=ru();_.__change=[$l,s,r],jr(_,k=>N(s,k),()=>o(s)),G(()=>E(_,"accept",a())),A(w,_)};D(h,w=>{l()?w(v):w(g,!1)})}var p=M(u,2);{var m=w=>{so(w,{onclick:i})};D(p,w=>{r()&&w(m)})}G(w=>{f=ct(u,1,"file-selector svelte-1k0x7uv",null,f,w),qe(d,`${(r()?r().name:n())??""} `)},[()=>({selected:r()})]),A(t,c),me()}at(["keydown","click","change"]);function ou(t,e,r,n){e()&&N(r,e()(n()),!0)}var au=I('<div class="error-message svelte-1qtiwcs"> </div>'),lu=I('<div><input type="text" class="svelte-1qtiwcs"/> <!></div>');function rs(t,e){ge(e,!0);let r=P(e,"value",15,""),n=P(e,"className",3,""),a=P(e,"placeholder",3,""),l=P(e,"maxLength",3,25),s=P(e,"validator",3,null),i=Y("");var c=lu();let u;var f=F(c);f.__input=[ou,s,i,r];var d=M(f,2);{var h=v=>{var g=au(),p=F(g);G(()=>qe(p,o(i))),A(v,g)};D(d,v=>{o(i)&&o(i).length>0&&v(h)})}G(v=>{u=ct(c,1,`textinput ${n()??""}`,"svelte-1qtiwcs",u,v),E(f,"placeholder",a()),E(f,"maxlength",l())},[()=>({error:o(i)&&o(i).length>0})]),bl(f,r),A(t,c),me()}at(["input"]);var su=I('<div class="spinner svelte-n48urb"></div>');function iu(t){var e=su();A(t,e)}at(["keydown","click"]),at(["keydown","click"]);function la(t,e){let r=0,n=0;t.nresp>0&&(r=new Qe(t.values.v.slice(0,t.values.nrows)),n=1);const a=new Bt(t.values.v.slice(n*t.values.nrows),t.values.nrows,t.values.ncols-n).t(),l=a.ncols<e?1:Math.round(a.ncols/e),s=wt.seq(1,a.ncols,l),i=a.subset(null,s),c=r?r.subset(s):null,u=t.classes?t.classes.filter((f,d)=>s.v.includes(d)):null;return{classNames:t.classNames,classes:u,resp:c,values:i,varvalues:t.varvalues.filter((f,d)=>d>=n),varindices:t.varindices.filter((f,d)=>d>=n),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function sa(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function ns(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}function os(t,e,r){const n=t.fileName+"-preprocessed";Mc(t,n)}function cu(t){Fc(t,"preprocessing-model")}var uu=I('<span style="font-weight:bold"> </span><br/>',1),fu=I('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),du=I('<span class="file-size svelte-gdjwex"> </span>'),vu=I('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br/> <span>Size:</span> <!></p> <!>',1);function hu(t,e){ge(e,!0);let r=P(e,"title",3,"");var n=Ee(),a=V(n);{var l=s=>{ne(s,{children:(i,c)=>{var u=vu(),f=V(u),d=F(f);{var h=k=>{var y=uu(),C=V(y),b=F(C);G(()=>qe(b,r())),A(k,y)};D(d,k=>{r()&&r()!==""&&k(h)})}var v=M(d,4),g=F(v),p=M(v,5);{var m=k=>{var y=fu(),C=V(y),b=F(C),z=M(C,4),L=F(z);G(()=>{qe(b,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),qe(L,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),A(k,y)},w=k=>{var y=du(),C=F(y);G(()=>qe(C,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),A(k,y)};D(p,k=>{e.dataset.nresp&&e.dataset.nresp>0?k(m):k(w,!1)})}var _=M(f,2);so(_,{get onclick(){return e.reset}}),G(()=>{E(v,"title",e.dataset.fileName),qe(g,e.dataset.fileName)}),A(i,u)},$$slots:{default:!0}})};D(a,s=>{e.dataset&&s(l)})}A(t,n),me()}var gu=I("<!> <!>",1),mu=I("<!> <!> <!> <!> <!> <!>",1),pu=I("<!> <!>",1),wu=I("<p> </p>"),bu=I("<!> <p>Loading data...</p>",1),_u=I("<p> </p>"),yu=I("<!> <!> <!> <!>",1);function as(t,e){ge(e,!0);let r=P(e,"WASM",3,null),n=P(e,"model",3,null),a=P(e,"rawdata",15,null),l=P(e,"prepdata",15,null),s=P(e,"title",3,"Raw data"),i=P(e,"left",3,null),c=P(e,"right",3,null);P(e,"multiple",3,!0);const u=[",",";"],f=["no","labels","values"];let d=Y(void 0),h=Y(""),v=Y(""),g=Y("data"),p=Y(","),m=Y("no"),w=Y(!1),_=Y(!1),k=Y(null),y=Y("neutral"),C=Y("");function b(Z){N(y,"error"),N(C,Z,!0),a(null),console.error(Z)}function z(){N(y,"neural"),N(C,"")}function L(){N(y,"success"),N(C,"")}function j(){N(d,""),a(null),l(null),N(h,""),N(v,""),N(C,""),z()}function U(){if(!(!a()||!n())){if(a().values.ncols-a().nresp!==n().npred){b(`Number of variables in the dataset (${a().values.ncols}) does not match the expected number (${n().npred}).`);return}N(k,r()().then(Z=>{N(y,"applying");const le=na(Z,a().values,a().nresp,n(),!1,!1),Ge=ns(Pa(a()),le);l(Ol(Ge,n())),L()}).catch(Z=>{l(null),b(Z)}),!0)}}function O(Z){if(!Z||Z.size<10)return;const Ge=Z.slice(0,1e5),We=new FileReader;We.onload=()=>{const Se=We.result;!Se||Se.length<0||((xe=>{var _e=Dn(xe,4);N(p,_e[0],!0),N(w,_e[1],!0),N(_,_e[2],!0),N(m,_e[3],!0)})(Rc(Se)),o(_)&&N(g,"groups"))},We.onerror=function(Se){csvString=null,b(Se)},We.readAsText(Ge)}function Q(Z){try{const le=Tc(Z,o(p),o(m),o(w),o(g)==="groups",o(h),o(v),o(g)==="response"?1:0);if(le.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(le.classNames.length>le.values.nrows/2)throw new Error("Dataset has too many unique "+className.toLowerCase()+" labels ("+le.classNames.length+"), check your CSV file.");const Ge=le.values.ncols-le.nresp;if(n()&&Ge!==n().npred)throw new Error("Number of predictors in dataset ("+Ge+") does not match what model expects ("+n().npred+")");le.fileName=o(d).name.replace(/\.[^/.]+$/,""),a(le),L()}catch(le){b(le)}}function ie(Z){const le=new FileReader;le.onload=()=>{Q(le.result)},le.readAsText(o(d))}async function K(Z){try{const le=o(d)instanceof FileList?o(d):[o(d)];a(await Bc(le)),L()}catch(le){b("Failed to read SPC file: "+le)}}se(()=>{if(o(d)!==void 0){if(o(d)===null||o(d)===""){j();return}if(Array.isArray(o(d))){if(o(d).filter(Z=>Z.slice(-4)===".spc").length!==o(d).length){b("Multiple file selection is allowed only for SPC files.");return}K(o(d));return}o(d)&&(o(d).type==="text/csv"||o(d).type==="application/vnd.ms-excel")?(O(o(d)),z()):K([o(d)])}}),se(()=>{o(p)&&(N(y,"neutral"),N(C,""))}),se(()=>{a()!==null&&n()!==null&&!l()&&o(C)===""&&U()}),se(()=>{(a()===null||a()===0)&&N(d,"")});var q=yu(),ee=V(q);{var be=Z=>{var le=pu(),Ge=V(le);ro(Ge,()=>o(d)===void 0,xe=>{ne(xe,{children:(_e,De)=>{ts(_e,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return o(d)},set file(He){N(d,He,!0)}})},$$slots:{default:!0}})});var We=M(Ge,2);{var Se=xe=>{var _e=mu(),De=V(_e);ne(De,{label:"Delimiter",children:(J,ke)=>{Dt(J,{id:"sep",get options(){return u},get value(){return o(p)},set value(Ae){N(p,Ae,!0)}})},$$slots:{default:!0}});var He=M(De,2);ne(He,{label:"Row labels",children:(J,ke)=>{aa(J,{id:"hasLabels",options:["no","yes"],get value(){return o(w)},set value(Ae){N(w,Ae,!0)}})},$$slots:{default:!0}});var B=M(He,2);ne(B,{label:"First column",children:(J,ke)=>{Dt(J,{id:"sep",options:["data","groups","response"],get value(){return o(g)},set value(Ae){N(g,Ae,!0)}})},$$slots:{default:!0}});var te=M(B,2);ne(te,{label:"Header",children:(J,ke)=>{Dt(J,{id:"header",get options(){return f},get value(){return o(m)},set value(Ae){N(m,Ae,!0)}})},$$slots:{default:!0}});var H=M(te,2);{var oe=J=>{var ke=gu(),Ae=V(ke);ne(Ae,{label:"Header name",children:(Ie,At)=>{rs(Ie,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return o(h)},set value(dt){N(h,dt,!0)}})},$$slots:{default:!0}});var $e=M(Ae,2);ne($e,{label:"Header units",children:(Ie,At)=>{rs(Ie,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return o(v)},set value(dt){N(v,dt,!0)}})},$$slots:{default:!0}}),A(J,ke)};D(H,J=>{o(m)==="values"&&J(oe)})}var ae=M(H,2);ne(ae,{label:" ",children:(J,ke)=>{br(J,{text:"Load",onclick:ie})},$$slots:{default:!0}}),A(xe,_e)};D(We,xe=>{o(d)&&!Array.isArray(o(d))&&(o(d).type==="text/csv"||o(d).type==="application/vnd.ms-excel")&&xe(Se)})}A(Z,le)},fe=Z=>{var le=Ee(),Ge=V(le);{var We=Se=>{var xe=Ee(),_e=V(xe);$i(_e,()=>o(k),De=>{ne(De,{children:(He,B)=>{var te=bu(),H=V(te);iu(H),A(He,te)},$$slots:{default:!0}})},void 0,(De,He)=>{ne(De,{status:"error",children:(B,te)=>{var H=wu(),oe=F(H);G(()=>qe(oe,o(He))),A(B,H)},$$slots:{default:!0}})}),A(Se,xe)};D(Ge,Se=>{o(k)&&Se(We)})}A(Z,le)};D(ee,Z=>{a()?Z(fe,!1):Z(be)})}var X=M(ee,2);{var ce=Z=>{hu(Z,{get dataset(){return a()},reset:j,get title(){return s()}})};D(X,Z=>{a()&&Z(ce)})}var Ne=M(X,2);{var Be=Z=>{ne(Z,{label:"Download",children:(le,Ge)=>{br(le,{text:"Preprocessed data",onclick:()=>os(l(),i(),c())})},$$slots:{default:!0}})};D(Ne,Z=>{l()&&n()&&Z(Be)})}var he=M(Ne,2);{var ue=Z=>{ne(Z,{status:"error",children:(le,Ge)=>{var We=_u(),Se=F(We);G(()=>qe(Se,o(C))),A(le,We)},$$slots:{default:!0}})};D(he,Z=>{(o(y)==="error"||o(C))&&Z(ue)})}A(t,q),me()}const xu={small:30,medium:40,large:50,xlarge:60},ku={small:5,medium:8,large:12,xlarge:15},Eu={small:6,medium:10,large:14,xlarge:18},ia={small:4,medium:6,large:8,xlarge:10},Su={small:12,medium:15,large:19,xlarge:21},ls={small:11,medium:15,large:17,xlarge:19},co={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Au=["●","◼","▲","▼","⬥","＋","✳","✕"],Cu=.8,ss=.5,zu={small:5,medium:8,large:12,xlarge:15},It={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function is(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function cs(t,e){if(t!=null&&(Array.isArray(t)&&(t=xt(t)),!(!Ue(t)||t.length<1)))return t.apply(r=>fa((r-e[1])*e[0]+e[2])).v}function Ot(t,e){return cs(t,e.coords)}function us(t,e){return cs(t,e.objects)}function fs(t,e){if(t!=null&&(Array.isArray(t)&&(t=xt(t)),!(!Ue(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function ds(t,e){return fs(t,e.coords)}function vs(t,e){return fs(t,e.objects)}function ca(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Ir(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function ua(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Ir(Math.abs(fn(El(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(l=>l.toFixed(0))]:(r=Math.ceil(Ir(Math.log10(e)))-2,[r,Array.from(t).map(l=>(l/Math.pow(10,r)).toFixed(0))]);let n=Math.ceil(-Ir(Math.log10(e)));return n<=2?[0,Array.from(t).map(a=>a.toFixed(n))]:(r=n-2,n=2,Ir(Math.abs(qr(t)))<=10?[-r,Array.from(t).map(a=>(a*Math.pow(10,r)).toFixed(n))]:[-r,Array.from(t).map(a=>(a/Math.pow(10,r)).toString())])}function Or(t,e,r){return Array.isArray(t)&&(t=xt(t)),Ue(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function hs(t,e,r,n){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const a=r.coords,l=n.coords;let s="";for(let i=0;i<t.length;i++){const c=fa((t.v[i]-a[1])*a[0]+a[2]),u=fa((e.v[i]-l[1])*l[0]+l[2]);s+=c+","+u+" "}return s}function gs(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Vr(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function ms(t,e){if(Array.isArray(t)&&(t=xt(t)),!Ue(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(s=>isNaN(s)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const n=e[0]<e[1]?e[0]:e[1],a=e[0]<e[1]?e[1]:e[0],l=t.filter(s=>s>=n&s<=a);return l.length!==t.length?[null,"some of ticks values are outside axis limits."]:[l,""]}function ps(t,e,r,n,a,l){a==null&&(a=!1),l===void 0&&(l=1e-4);const s=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof s!="object"||s[0]===void 0||s[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const i=Math.abs(s[1]-s[0])*l,c=s[1]-s[0]-2*i,u=Math.floor(Math.log10(c)),f=1/Math.pow(10,u-1),d=Math.round(c*f)/f;let h=Tu(d/r);a&&(Math.abs(s[1]-s[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let v=Math.ceil((s[0]+i)/h)*h,g=Math.floor((s[1]-i)/h)*h;Math.abs(s[0]-v)<h/10&&(v=v+h),Math.abs(s[1]-g)<h/10&&(g=g-h),r=Math.ceil(Ir((g-v)/h))+1,t=Qe.zeros(r);for(let p=0;p<r;p++)t.v[p]=v+h*p;if(Math.abs(h)<1){const p=Math.pow(10,1+Math.round(-Math.log10(h)));t=t.apply(m=>Math.round((m+Number.EPSILON)*p)/p)}return t.filter(p=>p>=s[0]&p<=s[1])}function Tu(t,e){const r=Math.floor(Math.log10(t)),n=t/Math.pow(10,r);let a;return n<=1?a=1:n<=2?a=2:n<=5?a=5:a=10,a*Math.pow(10,r)}function fa(t){return Math.round(t*10)/10}function Pu(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function ws(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Nu(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Ru(t){let e=-1,r=Nu();for(let n=0;n<t.length;n++)e=r[(e^t[n])&255]^e>>>8;return e^-1}function Lu(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const n=Ru(r),a=new Uint8Array(4);a[0]=n>>>24,a[1]=n>>>16,a[2]=n>>>8,a[3]=n&255;const l=new Uint8Array(4);l[0]=0,l[1]=0,l[2]=0,l[3]=9;const s=new Uint8Array(54);return s.set(t,0),s.set(l,33),s.set(r,37),s.set(a,50),s}function Mu(t,e){const r=t.split(","),n=r[0],a=r[1],l=33/3*4,s=a.substring(0,l),i=a.substring(l),c=atob(s),u=new Uint8Array(c.length);for(let h=0;h<u.length;h++)u[h]=c.charCodeAt(h);const f=Lu(u,e),d=btoa(String.fromCharCode(...f));return[n,",",d,i].join("")}function Fu(t,e,r,n,a){if(r||(r=10),n||(n=10),a||(a=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(n<1||n>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(a<50||a>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const l=r/2.54*a,s=n/2.54*a;setTimeout(()=>{const i=t.clientHeight,c=t.clientWidth;let u=Math.max(l/c,s/i),f=1;u<1&&(f=u,u=1);const d=document.createElement("canvas"),h=d.getContext("2d");d.width=c*(f<1?f:u),d.height=i*(f<1?f:u),t.setAttribute("width",c*u),t.setAttribute("height",i*u),h.fillStyle="white",h.fillRect(0,0,d.width,d.height),h.scale(u,u);const v=new XMLSerializer().serializeToString(t),g=new Blob([v],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(g),m=new Image;m.onload=function(){f<0&&(m.width=m.width*f,m.height=m.height*f),h.drawImage(m,0,0,d.width,d.height);const w=d.toDataURL("image/png"),_=Mu(w,a),k=document.createElement("a");k.href=_,k.download=`${e}.png`,k.click()},m.src=p},20)}function ju(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,n=t.clientWidth;t.setAttribute("width",n+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${n} ${r}`);const a=new Blob([t.outerHTML],{type:"image/svg+xml"}),l=window.URL.createObjectURL(a),s=document.createElement("a");s.setAttribute("href",l),s.setAttribute("download",`${e}.svg`),s.click()}function qu(t,e,r,n){const a=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Bu(e,r,n)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=a},500)},l=>{console.error(l),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=a},500)}).catch(l=>console.error(l))}async function Bu(t,e,r){const n=t.clientHeight,a=t.clientWidth,l=Math.max(e/a,r/n),s=document.createElement("canvas"),i=s.getContext("2d");return s.width=a*l,s.height=n*l,i.scale(l,l),t.setAttribute("width",s.width),t.setAttribute("height",s.height),await new Promise((u,f)=>{const d=new XMLSerializer().serializeToString(t),h=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),v=window.URL||window.webkitURL||window,g=v.createObjectURL(h),p=new Image;p.onload=function(){i.drawImage(p,0,0,s.width,s.height),v.revokeObjectURL(g),s.toBlob(function(m){m?u(m):f(new Error("Failed to create blob"))},"image/png")},p.onerror=function(m){f(m)},p.src=g})}function bs(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function Du(t,e,r,n,a){let l=a.ticks,s=a.tickLabels,i=0;const c=ps(l,t,ku[r.x],!0,a.whole),u=c.length,f=vs([ia[r.plot]],n)[0],d=Qe.fill(e[0],u),h=d.add(f),v=Qe.fill(e[1],u);if(s||(l?(i=0,s=l.v.map(L=>Ir(L).toString())):[i,s]=ua(c.v)),!s||s.length!==c.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const g=[[c,d],[c,v]],p=[[xt([t[0]]),xt([e[0]])],[xt([t[1]]),xt([e[0]])]],m=[[c,h],[c,d]],w=(t[1]-t[0])*.01,_=[[null,null],[[t[1]-(i>9?1:0)*w],[d.v[u-1]]]],k=ca(i),y=s.length,C=Math.abs(t[1]>t[0]?t[1]-c.v[y-1]:t[1]-c.v[0]),b=Math.abs(t[1]-t[0]),z=Math.abs(c.v[1]-c.v[0]);if(k.length>0&&C<b*.1&&C<z*.5){const L=t[1]>t[0]?y-1:0;s[L]=" "}return{grid:g,axisLine:p,tickCoords:m,tfCoords:_,ticks:l,tickLabels:s,tickFactor:i,tfLabel:k}}function Iu(t,e,r,n,a){let l=a.ticks,s=a.tickLabels,i=0;const c=ps(a.ticks,e,Eu[r.y],!0,a.whole),u=c.length,f=vs([ia[r.plot]],n)[0],d=Qe.fill(t[0],u),h=d.add(f),v=Qe.fill(t[1],u);if(s||(l?(i=0,s=l.v.map(z=>Ir(z).toString())):[i,s]=ua(c.v)),s.length!==c.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const g=[[d,c],[v,c]],p=[[xt([t[0]]),xt([e[0]])],[xt([t[0]]),xt([e[1]])]],m=[[d,c],[h,c]],w=[[[],[]],[[h.v[u-1]+(Math.abs(i)>9?3:2)*f],[e[1]]]],_=ca(i),k=s.length,y=Math.abs(e[1]>e[0]?e[1]-c.v[k-1]:e[1]-c.v[0]),C=Math.abs(e[1]-e[0]),b=Math.abs(c.v[1]-c.v[0]);if(_.length>0&&y<C*.1&&y<b*.5){const z=e[1]>e[0]?k-1:0;s[z]=" "}return{grid:g,axisLine:p,tickCoords:m,tfCoords:w,ticks:l,tickLabels:s,tickFactor:i,tfLabel:_}}function Ou(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ue(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let n,a;if(t.labels?(n=t.labels,a=0):[a,n]=ua(e),!(n.length===e.length-1||n.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const l=n.length===r.length;return{colmap:r,breaks:e,labels:n,isCentered:l,labelsFactor:a,fontSize:t.fontSize,labelColor:t.labelColor}}function Vu(t,e,r,n){const a=t.colmap.length,l=e*Cu,s=l/a,i=r[1]+(e-l)*.5,c=zu[n.y],u=r[2]+c*ss,f=u+c*(1+ss),d=t.isCentered?s/2:0;return{start:i,top:u,height:c,width:s,dxl:d,ltop:f}}function uo(t,e,r){if(!t||!e||!r||typeof r!="function")return;const n=t.target;if(n.tagName===e){const a=Array.prototype.indexOf.call(n.parentNode.children,n);if(a<0)return;r(a),t.stopPropagation()}}function Uu(t,e){const n=document.createElement("canvas").getContext("2d");return n.font=e,n.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function Wu(t,e){const r="Arial",n=e/8,a=e*1.5,l=Array(t.length),s=Array(t.length);let i=0,c=0,u=0;for(let d=0;d<t.length;d++){const h=Uu("  "+t[d].label+"  ",e+"px "+r);u=h>u?h:u;const v=e*t[d].labelHeight+2*n;l[d]=v,s[d]=i,i=i+v,c=c+v}const f=a+2*n+u;return[s,l,a,n,c,f]}function Hu(t,e,r,n,a){const[l,s,i,c,u,f]=Wu(t.items,n*t.fontSize),d=t.position.includes("left")?e[0]+a:t.position.includes("right")?e[1]-f-a:(e[1]+e[0]-f)*.5,h=t.position.includes("top")?r[1]+a:t.position.includes("bottom")?r[0]-u-a:(r[1]+r[0]-u)*.5;return{lgl:d,lgt:h,lgw:f,lgh:u,ely:l,elh:s,elw:i,elp:c}}function Vr(t){if(!t||t.length<1)return t;function e(l){return'<tspan font-size="0.75em" dy="-0.5em">'+l+'</tspan><tspan dy="0.4em"> </tspan>'}function r(l){return'<tspan font-size="0.75em" dy="0.5em">'+l+'</tspan><tspan dy="-0.4em"> </tspan>'}let n=0,a="";for(;n<t.length;){const l=t[n];if((l==="^"||l==="_")&&n<t.length-1){const s=l==="^";if(n++,t[n]==="("){let i=n+1;for(;i<t.length&&t[i]!==")";)i++;const c=t.slice(n+1,i);a+=s?e(c):r(c),n=i+1}else if(t[n]==="-"||t[n]==="–"){const i=t.slice(n,n+2);a+=s?e(i):r(i),n=n+2}else a+=s?e(t[n]):r(t[n]),n++}else a+=l,n++}return a}var Yu=pe('<line vector-effect="non-scaling-stroke"></line>'),Gu=pe("<g></g>");function da(t,e){ge(e,!0);let r=P(e,"lineCoords",19,()=>[]),n=P(e,"lineColor",19,()=>It.DARKGRAY),a=P(e,"lineType",3,1),l=P(e,"lineWidth",3,1),s=P(e,"className",3,"");const i=Zt("axes");let c=T(()=>Ot(r()[0][0],i.tX())),u=T(()=>Ot(r()[1][0],i.tX())),f=T(()=>Ot(r()[0][1],i.tY())),d=T(()=>Ot(r()[1][1],i.tY())),h=T(()=>`stroke:${n()};stroke-width: ${l()}px;stroke-dasharray:${co[i.scales().plot][a()-1]}`);var v=Ee(),g=V(v);{var p=m=>{var w=Gu();ft(w,21,()=>o(c),mt,(_,k,y)=>{var C=Yu();G(()=>{E(C,"x1",o(c)[y]),E(C,"x2",o(u)[y]),E(C,"y1",o(f)[y]),E(C,"y2",o(d)[y]),qt(C,o(h))}),A(_,C)}),G(()=>ct(w,0,nc(s()))),A(m,w)};D(g,m=>{o(c)&&o(f)&&o(u)&&m(p)})}A(t,v),me()}var Ku=pe('<text text-anchor="middle"><!></text>'),Xu=pe("<text><!></text>"),Ju=pe("<text><!></text>"),Zu=pe('<g class="tick-labels"><!></g>');function _s(t,e){ge(e,!0);let r=P(e,"pos",3,1),n=P(e,"las",3,1),a=T(()=>["middle","middle","start","middle","end"][r()]),l=T(()=>`fill:${e.textColor};`);const s=Zt("axes");let i=T(()=>Ot(e.tickCoords[1][0],s.tX())),c=T(()=>Ot(e.tickCoords[1][1],s.tY())),u=T(()=>ls[s.scales().plot]),f=T(()=>[0,0,o(u),0,-o(u)][r()]),d=T(()=>[0,o(u),0,-o(u),0][r()]);var h=Zu(),v=F(h);{var g=m=>{var w=Ee(),_=V(w);ft(_,17,()=>o(i),mt,(k,y,C)=>{var b=Ku();E(b,"data-id",C),E(b,"dx",0);var z=F(b);pt(z,()=>e.tickLabels[C],!0),G(()=>{E(b,"x",o(i)[C]),E(b,"y",o(c)[C]),E(b,"dy",o(f)*1.25),E(b,"transform",`rotate(-90, ${o(i)[C]}, ${o(c)[C]})`)}),A(k,b)}),A(m,w)},p=m=>{var w=Ee(),_=V(w);{var k=C=>{var b=Ee(),z=V(b);ft(z,17,()=>o(i),mt,(L,j,U)=>{var O=Xu();E(O,"data-id",U),E(O,"dy",0),E(O,"text-anchor","end");var Q=F(O);pt(Q,()=>e.tickLabels[U],!0),G(()=>{E(O,"x",o(i)[U]),E(O,"y",o(c)[U]),E(O,"dx",-o(d)/2),E(O,"transform",`rotate(-90, ${o(i)[U]}, ${o(c)[U]})`)}),A(L,O)}),A(C,b)},y=C=>{var b=Ee(),z=V(b);ft(z,17,()=>o(i),mt,(L,j,U)=>{var O=Ju();E(O,"data-id",U);var Q=F(O);pt(Q,()=>e.tickLabels[U],!0),G(()=>{E(O,"x",o(i)[U]),E(O,"y",o(c)[U]),E(O,"dx",o(f)),E(O,"dy",o(d)),E(O,"text-anchor",o(a))}),A(L,O)}),A(C,b)};D(_,C=>{n()===2&&r()===1?C(k):C(y,!1)},!0)}A(m,w)};D(v,m=>{n()===2&&r()===4?m(g):m(p,!1)})}G(()=>qt(h,o(l))),A(t,h),me()}const Qu=(t,e=Et,r=Et)=>{var n=af();const a=T(()=>e().colmap.length);var l=V(n);ft(l,17,()=>e().colmap,mt,(f,d,h)=>{var v=rf();const g=T(()=>r().start+h*r().width);var p=V(v),m=M(p);E(m,"dy",0);var w=F(m);pt(w,()=>e().labels[h],!0),G(()=>{E(p,"x",o(g)),E(p,"y",r().top),E(p,"width",r().width),E(p,"height",r().height),E(p,"fill",o(d)),E(m,"x",o(g)),E(m,"y",r().ltop),E(m,"dx",r().dxl),E(m,"fill",e().labelColor),E(m,"font-size",e().fontSize+"em")}),A(f,v)});var s=M(l);{var i=f=>{var d=nf();const h=T(()=>r().start+o(a)*r().width);E(d,"dx",0),E(d,"dy",0);var v=F(d);pt(v,()=>e().labels[o(a)],!0),G(()=>{E(d,"x",o(h)),E(d,"y",r().ltop),E(d,"fill",e().labelColor),E(d,"font-size",`${e().fontSize??""}em`)}),A(f,d)};D(s,f=>{e().isCentered||f(i)})}var c=M(s);{var u=f=>{var d=of();const h=T(()=>r().start+o(a)*r().width);var v=F(d);pt(v,()=>ca(e().labelsFactor),!0),G(()=>{E(d,"x",o(h)),E(d,"y",r().ltop),E(d,"fill",e().labelColor),E(d,"font-size",`${e().fontSize??""}em`)}),A(f,d)};D(c,f=>{e().labelsFactor!==0&&f(u)})}A(t,n)};function ys(t,e,r){t.preventDefault(),e(t,r())}function xs(t,e,r){t.preventDefault(),e(t,r())}function ks(t,e,r){t.preventDefault(),e(t,r())}function fo(t,e,r){t.preventDefault(),e(t,r())}async function Es(t,e,r,n){qu(t.target,o(e),r(),n())}function Ss(t,e,r){ju(o(e),r())}function As(t,e,r,n,a,l){Fu(o(e),r(),n(),a(),l())}var $u=pe('<text fill="crimson" text-anchor="middle"> </text>'),ef=pe('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),tf=pe("<!><!><!><!><!>",1),rf=pe('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),nf=pe('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),of=pe('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),af=pe("<!><!><!>",1),lf=pe("<line></line>"),sf=pe('<text dominant-baseline="middle" text-anchor="middle"> </text>'),cf=pe('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),uf=pe('<svg><rect height="100%" width="100%"></rect><!></svg>'),ff=pe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),df=pe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),vf=pe('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),hf=pe('<g class="plot-labels"><!><!><!></g>'),gf=pe('<g class="axis x-axis"><!></g>'),mf=pe('<g class="axis y-axis"><!></g>'),pf=pe('<rect fill="transparent" id="axes-box"></rect>'),wf=pe('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),bf=pe('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),_f=pe('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),yf=pe('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),xf=I('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),kf=I('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Ef=I(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Sf(t,e){ge(e,!0);const r=($,ze=Et,Ce=Et)=>{var tt=Ee(),bt=V(tt);{var Ut=kt=>{var Ye=Ee(),Re=V(Ye);{var vt=rt=>{var Je=$u(),Wt=F(Je);G(()=>{E(Je,"x",o(ue)[0]-10),E(Je,"y",o(Be)),E(Je,"transform",`rotate(-90, ${o(ue)[0]-10}, ${o(Be)})`),qe(Wt,Ce().error)}),A(rt,Je)},lt=rt=>{var Je=ef(),Wt=F(Je);G(()=>{E(Je,"x",o(he)),E(Je,"y",o(Z)[0]),qe(Wt,Ce().error)}),A(rt,Je)};D(Re,rt=>{Ce().pos===4?rt(vt):rt(lt,!1)})}A(kt,Ye)},Ct=kt=>{var Ye=tf(),Re=V(Ye);{var vt=re=>{da(re,{get lineCoords(){return ze().grid},get lineColor(){return It.MIDDLEGRAY},lineType:3})};D(Re,re=>{Ce().showGrid&&re(vt)})}var lt=M(Re);da(lt,{get lineCoords(){return ze().axisLine},get lineColor(){return It.DARKGRAY},lineType:1});var rt=M(lt);da(rt,{get lineCoords(){return ze().tickCoords},get lineColor(){return It.DARKGRAY},lineType:1});var Je=M(rt);{var Wt=re=>{_s(re,{get las(){return Ce().las},get pos(){return Ce().pos},get tickCoords(){return ze().tickCoords},get tickLabels(){return ze().tickLabels},get tickColor(){return It.DARKGRAY},get hideLast(){return Ce().hideLast}})};D(Je,re=>{ze().tickCoords.length===2&&ze().tickLabels.length===ze().tickCoords[1][0].length&&re(Wt)})}var Jr=M(Je);{var je=re=>{{let ht=T(()=>[ze().tfLabel]);_s(re,{get pos(){return Ce().pos},get tickCoords(){return ze().tfCoords},get tickLabels(){return o(ht)},get textColor(){return It.DARKGRAY}})}};D(Jr,re=>{ze().tickFactor!==0&&re(je)})}A(kt,Ye)};D(bt,kt=>{Ce().error?kt(Ut):kt(Ct,!1)})}A($,tt)},n=($,ze=Et,Ce=Et)=>{var tt=uf();const bt=T(()=>Ce().elw+2*Ce().elp),Ut=T(()=>Ce().elp),Ct=T(()=>Ce().elh),kt=T(()=>Ce().ely);var Ye=F(tt),Re=M(Ye);ft(Re,17,()=>ze().items,mt,(vt,lt,rt)=>{var Je=cf();E(Je,"x",0);var Wt=F(Je);{var Jr=or=>{var st=lf();G(()=>{E(st,"x1",o(Ut)),E(st,"x2",o(bt)-o(Ut)),E(st,"y1",o(Ct)[rt]/2),E(st,"y2",o(Ct)[rt]/2),E(st,"stroke",o(lt).line.lineColor),E(st,"stroke-width",o(lt).line.lineWidth),E(st,"stroke-dasharray",o(O)[o(lt).line.lineType-1])}),A(or,st)};D(Wt,or=>{o(lt).line&&or(Jr)})}var je=M(Wt);{var re=or=>{var st=sf(),po=F(st);G(()=>{E(st,"x",o(bt)/2),E(st,"y",o(Ct)[rt]/2),E(st,"fill",o(lt).point.faceColor),E(st,"stroke-width",o(lt).point.lineWidth),E(st,"stroke",o(lt).point.lineColor),E(st,"font-size",`${o(lt).point.markerSize??""}em`),qe(po,Au[o(lt).point.marker-1])}),A(or,st)};D(je,or=>{o(lt).point&&or(re)})}var ht=M(je),mo=F(ht);pt(mo,()=>o(lt).label,!0),G(()=>{E(Je,"y",o(kt)[rt]),E(Je,"width",Ce().lgw),E(Je,"height",o(Ct)[rt]),E(ht,"x",o(bt)+o(Ut)),E(ht,"y",o(Ct)[rt]/2),E(ht,"fill",It.LEGEND),E(ht,"font-size",`${ze().fontSize??""}em`)}),A(vt,Je)}),G(()=>{E(tt,"x",Ce().lgl),E(tt,"y",Ce().lgt),E(tt,"height",Ce().lgh),E(tt,"width",Ce().lgw),E(Ye,"fill",ze().faceColor),E(Ye,"stroke",ze().lineColor),E(Ye,"stroke-width",ze().lineWidth)}),A($,tt)};let a=P(e,"limX",19,()=>[0,1]),l=P(e,"limY",19,()=>[0,1]),s=P(e,"margins",19,()=>[1,1.1,.55,.6]),i=P(e,"downloadLinks",3,"none"),c=P(e,"fileName",3,"plot"),u=P(e,"pngWidth",3,8),f=P(e,"pngHeight",3,8),d=P(e,"pngRes",3,300),h=P(e,"clipboardWidth",3,1200),v=P(e,"clipboardHeight",3,800),g=P(e,"onclick",3,null),p=P(e,"onmousemove",3,null),m=P(e,"onmousedown",3,null),w=P(e,"onmouseup",3,null);function _($,ze){if(ze&&$.target.id=="axes-box"){const Ce=ds([$.offsetX-o(ie)],o(ce))[0],tt=ds([$.offsetY-o(K)],o(Ne))[0];ze(Ce,tt)}}const k="plottingArea"+Math.round(Math.random()*1e4);let y=Y(0),C=Y(0),b=Y(0);const z=T(()=>({plot:Pu(o(C),o(b)),x:ws(o(C)),y:ws(o(b))})),L=T(()=>s().map($=>$*xu[o(z).plot])),j=T(()=>Su[o(z).plot]),U=T(()=>ia[o(z).plot]),O=T(()=>co[o(z).plot]),Q=T(()=>o(Se).show&&o(Se).label!==""?o(j)*1.5:0),ie=T(()=>o(xe).show&&o(xe).label!==""?o(j)*1.5:0),K=T(()=>e.title&&e.title!==""?o(j)*1.5:0),q=T(()=>o(C)>o(ie)?o(C)-o(ie):0),ee=T(()=>o(b)>o(Q)+o(K)?o(b)-o(Q)-o(K):0),be=T(()=>o(ee)-o(L)[0]-o(L)[2]),fe=T(()=>o(q)-o(L)[1]-o(L)[3]),X=T(()=>is(a(),2)&&is(l(),2)&&o(q)>o(L)[1]+o(L)[3]&&o(ee)>o(L)[0]+o(L)[2]),ce=T(()=>o(X)?{coords:[o(fe)/(a()[1]-a()[0]),a()[0],o(L)[1]],objects:[o(fe)/(a()[1]-a()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Ne=T(()=>o(X)?{coords:[-o(be)/(l()[1]-l()[0]),l()[1],o(L)[2]],objects:[o(be)/(l()[1]-l()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Be=T(()=>o(be)*.5+o(K)+o(L)[2]),he=T(()=>o(fe)*.5+o(ie)+o(L)[1]),ue=T(()=>o(X)?Ot(a(),o(ce)):[0,1]),Z=T(()=>o(X)?Ot(l(),o(Ne)):[1,0]),le=T(()=>Vr(e.title)),Ge=T(()=>o(le)?o(le).length===e.title.left?1:1.4:0);let We=Y(Fe({show:!1})),Se=Y(Fe({show:!1,error:""})),xe=Y(Fe({show:!1,error:""})),_e=Y(Fe({show:!1,colmap:null,breaks:null})),De=Y(Fe({show:!1,items:null,position:null}));const He=T(()=>o(X)&&o(_e)&&o(_e).show?Ou(o(_e)):null),B=T(()=>o(X)&&o(Se).show?Du(a(),l(),o(z),o(Ne),o(Se)):null),te=T(()=>o(X)&&o(xe).show?Iu(a(),l(),o(z),o(ce),o(xe)):null),H=T(()=>o(X)&&o(He)?Vu(o(He),o(fe),o(L),o(z)):null),oe=T(()=>o(X)&&o(De)&&o(De).show&&o(ue)?Hu(o(De),o(ue),o(Z),o(j),o(U)):null);wi("axes",{setBox:$=>N(We,$,!0),setXAxis:$=>N(Se,$,!0),setYAxis:$=>N(xe,$,!0),setColmapLegend:$=>N(_e,$,!0),setGroupLegend:$=>N(De,$,!0),scales:()=>o(z),tX:()=>o(ce),tY:()=>o(Ne),limX:()=>a(),limY:()=>l()});var ae=Ef();let J;var ke=F(ae),Ae=M(F(ke));{var $e=$=>{var ze=hf(),Ce=F(ze);{var tt=Ye=>{var Re=ff();E(Re,"dx",0),E(Re,"dy",0);var vt=F(Re);pt(vt,()=>o(Se).label,!0),G(()=>{E(Re,"x",o(he)),E(Re,"y",o(ee)+o(K))}),A(Ye,Re)};D(Ce,Ye=>{o(Se).show&&o(Se).label&&o(Se).label!==""&&Ye(tt)})}var bt=M(Ce);{var Ut=Ye=>{var Re=df();E(Re,"dx",0),E(Re,"dy",0);var vt=F(Re);pt(vt,()=>o(xe).label,!0),G(()=>{E(Re,"x",o(j)/1.1*o(xe).labelHeight),E(Re,"y",o(Be)),E(Re,"transform",`rotate(-90, ${o(j)*o(xe).labelHeight/1.1}, ${o(Be)})`)}),A(Ye,Re)};D(bt,Ye=>{o(xe).show&&o(xe).label&&o(xe).label!==""&&Ye(Ut)})}var Ct=M(bt);{var kt=Ye=>{var Re=vf();E(Re,"dx",0),E(Re,"dy",0);var vt=F(Re);pt(vt,()=>o(le),!0),G(()=>{E(Re,"x",o(he)),E(Re,"y",o(j)*o(Ge))}),A(Ye,Re)};D(Ct,Ye=>{o(le)&&o(le)!==""&&Ye(kt)})}A($,ze)};D(Ae,$=>{o(X)&&$($e)})}var Ie=M(Ae),At=F(Ie),dt=F(At),Vt=F(dt),Hr=M(At);{var Yr=$=>{var ze=yf(),Ce=V(ze);{var tt=je=>{var re=gf(),ht=F(re);r(ht,()=>o(B),()=>o(Se)),A(je,re)};D(Ce,je=>{o(Se).show&&o(B)&&je(tt)})}var bt=M(Ce);{var Ut=je=>{var re=mf(),ht=F(re);r(ht,()=>o(te),()=>o(xe)),A(je,re)};D(bt,je=>{o(xe).show&&o(te)&&je(Ut)})}var Ct=M(bt),kt=F(Ct);{var Ye=je=>{var re=pf();re.__keydown=[fo,_,g],re.__click=[fo,_,g],re.__mousemove=[ks,_,p],re.__mousedown=[ys,_,m],re.__mouseup=[xs,_,w],G(()=>{E(re,"stroke",o(We).lineColor),E(re,"stroke-width",`${o(We).lineWidth??""}px`),E(re,"x",o(ue)[0]),E(re,"y",o(Z)[1]),E(re,"width",o(ue)[1]-o(ue)[0]),E(re,"height",o(Z)[0]-o(Z)[1])}),A(je,re)},Re=je=>{var re=wf();re.__keydown=[fo,_,g],re.__click=[fo,_,g],re.__mousemove=[ks,_,p],re.__mousedown=[ys,_,m],re.__mouseup=[xs,_,w],G(()=>{E(re,"x",o(ue)[0]),E(re,"y",o(Z)[1]),E(re,"width",o(ue)[1]-o(ue)[0]),E(re,"height",o(Z)[0]-o(Z)[1])}),A(je,re)};D(kt,je=>{o(We).show?je(Ye):je(Re,!1)})}var vt=M(Ct),lt=F(vt);sn(lt,()=>e.children??Et);var rt=M(vt);{var Je=je=>{var re=bf(),ht=F(re);Qu(ht,()=>o(He),()=>o(H)),A(je,re)};D(rt,je=>{o(H)&&je(Je)})}var Wt=M(rt);{var Jr=je=>{var re=_f(),ht=F(re);n(ht,()=>o(De),()=>o(oe)),A(je,re)};D(Wt,je=>{o(oe)&&je(Jr)})}G(()=>E(vt,"clip-path",`url(#${k})`)),A($,ze)};D(Hr,$=>{o(X)&&$(Yr)})}jr(ke,$=>N(y,$),()=>o(y));var Gr=M(ke,2);{var Kr=$=>{var ze=xf();A($,ze)},Xr=$=>{var ze=kf(),Ce=F(ze);Ce.__click=[Ss,y,c],Ce.__keydown=[Ss,y,c];var tt=M(Ce,2);tt.__click=[As,y,c,u,f,d],tt.__keydown=[As,y,c,u,f,d];var bt=M(tt,2);bt.__click=[Es,y,h,v],bt.__keydown=[Es,y,h,v],A($,ze)};D(Gr,$=>{o(X)?$(Xr,!1):$(Kr)})}G($=>{J=ct(ae,1,`plot-container show-download-links-${i()??""}`,"svelte-1jtdxd0",J,$),qt(ke,`font-size:${o(j)??""}px`),E(Ie,"x",o(ie)),E(Ie,"y",o(K)),E(Ie,"width",o(q)),E(Ie,"height",o(ee)),E(dt,"id",k),E(Vt,"x",o(ue)[0]),E(Vt,"y",o(Z)[1]),E(Vt,"width",o(ue)[1]-o(ue)[0]),E(Vt,"height",o(Z)[0]-o(Z)[1])},[()=>({"plot-error":!o(X)})]),_l(ke,"clientWidth",$=>N(C,$)),_l(ke,"clientHeight",$=>N(b,$)),A(t,ae),me()}at(["keydown","click","mousemove","mousedown","mouseup"]);function Af(t,e){ge(e,!0);let r=P(e,"tickLabels",7),n=P(e,"las",3,1),a=P(e,"whole",3,!1),l=P(e,"show",3,!0),s=P(e,"showGrid",3,!1);const i=Zt("axes");se(()=>{const c=Vr(e.label),u=c?c.length===e.label.length?1:1.4:0;let f,d="";e.ticks&&([f,d]=ms(e.ticks,i.limX())),!d&&r()&&(h=>{var v=Dn(h,2);r(v[0]),d=v[1]})(gs(r(),f)),i.setXAxis({show:l(),error:d,label:c,ticks:f,labelHeight:u,showGrid:s(),las:n(),whole:a(),tickLabels:r()})}),me()}function Cf(t,e){ge(e,!0);let r=P(e,"tickLabels",7),n=P(e,"las",3,1),a=P(e,"whole",3,!1),l=P(e,"show",3,!0),s=P(e,"showGrid",3,!1);const i=Zt("axes");se(()=>{const c=Vr(e.label),u=c?c.length===e.label.length?1:1.4:0;let f,d="";e.ticks&&([f,d]=ms(e.ticks,i.limY())),!d&&r()&&(h=>{var v=Dn(h,2);r(v[0]),d=v[1]})(gs(r(),f)),i.setYAxis({show:l(),error:d,label:c,ticks:f,labelHeight:u,showGrid:s(),las:n(),whole:a(),tickLabels:r(),pos:4})}),me()}function zf(t,e){ge(e,!0);let r=P(e,"lineWidth",3,1),n=P(e,"lineColor",3,"#606060");const a=Zt("axes");se(()=>{a.setBox({show:!0,lineWidth:r(),lineColor:n()})}),me()}var Tf=(t,e)=>uo(t,"rect",e.onclick),Pf=pe("<rect></rect>"),Nf=pe("<g></g>");function Cs(t,e){ge(e,!0);let r=P(e,"faceColor",19,()=>It.PRIMARY),n=P(e,"lineColor",19,r),a=P(e,"lineWidth",3,1),l=P(e,"className",3,"series-rect");const s=T(()=>Or(e.left,"Rectangles (left)")),i=T(()=>o(s)?Or(e.top,"Rectangles (top)",o(s).length):null),c=T(()=>o(i)?typeof e.width!="object"?Qe.fill(e.width,o(s).length):e.width:null),u=T(()=>o(i)?typeof e.height!="object"?Qe.fill(e.height,o(s).length):e.height:null),f=Zt("axes"),d=T(()=>o(s)?Ot(o(s),f.tX()):null),h=T(()=>o(i)?Ot(o(i),f.tY()):null),v=T(()=>o(c)?us(o(c),f.tX()):null),g=T(()=>o(u)?us(o(u),f.tY()):null),p=T(()=>`fill:${r()};stroke:${n()};stroke-width:${a()}px;`),m=T(()=>o(d)&&o(h)&&o(v)&&o(g)&&o(v).length===o(d).length&&o(g).length===o(d).length);var w=Ee(),_=V(w);{var k=y=>{var C=Nf();C.__click=[Tf,e],ft(C,21,()=>e.left,mt,(b,z,L)=>{var j=Pf();G(()=>{E(j,"x",o(d)[L]),E(j,"y",o(h)[L]),E(j,"width",o(v)[L]),E(j,"height",o(g)[L])}),A(b,j)}),G(()=>{ct(C,0,`series ${l()??""}`),qt(C,o(p))}),A(y,C)};D(_,y=>{o(m)&&y(k)})}A(t,w),me()}at(["click"]),at(["click"]);var Rf=(t,e)=>uo(t,"text",e.onclick),Lf=pe("<text><!></text>"),Mf=pe("<text><!></text>"),Ff=pe("<text><!></text>"),jf=pe('<g class="series series-textlabels"><!></g>');function va(t,e){ge(e,!0);let r=P(e,"pos",3,0),n=P(e,"faceColor",19,()=>It.PRIMARY_TEXT),a=P(e,"lineColor",3,"transparent"),l=P(e,"lineWidth",3,0),s=P(e,"textSize",3,1),i=P(e,"rotateAngle",3,0);const c=["middle","middle","start","middle","end"],u=T(()=>Or(e.xValues,"TextLabels")),f=T(()=>o(u)?Or(e.yValues,"TextLabels",o(u).length):null),d=T(()=>o(f)?Array.isArray(e.labels)&&e.labels.length!==o(f).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=T(()=>o(d)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),v=Zt("axes"),g=T(()=>o(u)&&o(h)!==null?Ot(o(u),v.tX()):null),p=T(()=>o(f)&&o(g)?Ot(o(f),v.tY()):null),m=T(()=>ls[v.scales().plot]),w=T(()=>[0,0,-o(m),0,o(m),o(m)]),_=T(()=>[0,o(m),0,-o(m),0,o(m)]),k=T(()=>`fill:${n()};stroke-width:${l()}px;stroke:${a()};font-size:${s()}em;`),y=T(()=>o(g)&&o(p)&&o(h)!==null&&o(d)&&o(g).length===o(p).length);var C=Ee(),b=V(C);{var z=L=>{var j=jf();j.__click=[Rf,e];var U=F(j);{var O=ie=>{var K=Ee(),q=V(K);ft(q,17,()=>o(g),mt,(ee,be,fe)=>{var X=Lf();E(X,"data-id",fe);var ce=F(X);pt(ce,()=>e.labels,!0),G(()=>{E(X,"x",o(g)[fe]),E(X,"y",o(p)[fe]),E(X,"dx",o(w)[r()]),E(X,"dy",o(_)[r()]),E(X,"transform",i()!==void 0?`rotate(${i()}, ${o(g)[fe]+o(w)[r()]}, ${o(p)[fe]+o(_)[r()]})`:""),E(X,"text-anchor",c[r()[fe]])}),A(ee,X)}),A(ie,K)},Q=ie=>{var K=Ee(),q=V(K);{var ee=fe=>{var X=Ee(),ce=V(X);ft(ce,17,()=>o(g),mt,(Ne,Be,he)=>{var ue=Mf();E(ue,"data-id",he);var Z=F(ue);pt(Z,()=>e.labels[he],!0),G(()=>{E(ue,"x",o(g)[he]),E(ue,"y",o(p)[he]),E(ue,"dx",o(w)[r()[he]]),E(ue,"dy",o(_)[r()[he]]),E(ue,"transform",i()!==void 0?`rotate(${i()}, ${o(g)[he]+o(w)[r()]}, ${o(p)[he]+o(_)[r()]})`:""),E(ue,"text-anchor",c[r()[he]])}),A(Ne,ue)}),A(fe,X)},be=fe=>{var X=Ee(),ce=V(X);ft(ce,17,()=>o(g),mt,(Ne,Be,he)=>{var ue=Ff();E(ue,"data-id",he);var Z=F(ue);pt(Z,()=>e.labels[he],!0),G(()=>{E(ue,"x",o(g)[he]),E(ue,"y",o(p)[he]),E(ue,"dx",o(w)[r()]),E(ue,"dy",o(_)[r()]),E(ue,"transform",i()!==void 0?`rotate(${i()}, ${o(g)[he]+o(w)[r()]}, ${o(p)[he]+o(_)[r()]})`:""),E(ue,"text-anchor",c[r()])}),A(Ne,ue)}),A(fe,X)};D(q,fe=>{Array.isArray(r())||ArrayBuffer.isView(r())?fe(ee):fe(be,!1)},!0)}A(ie,K)};D(U,ie=>{typeof e.labels=="string"?ie(O):ie(Q,!1)})}G(()=>qt(j,o(k))),A(L,j)};D(b,L=>{o(y)&&L(z)})}A(t,C),me()}at(["click"]),at(["click"]),at(["click"]);var qf=(t,e)=>uo(t,"polyline",e.onclick),Bf=pe('<g class="series series-line"><polyline class="line"></polyline></g>');function zs(t,e){ge(e,!0);let r=P(e,"lineColor",19,()=>It.PRIMARY),n=P(e,"lineType",3,1),a=P(e,"lineWidth",3,1);const l=T(()=>Or(e.xValues,"Lines")),s=T(()=>o(l)?Or(e.yValues,"Lines",o(l).length):null),i=Zt("axes"),c=T(()=>o(l)&&o(s)?hs(o(l),o(s),i.tX(),i.tY()):null),u=T(()=>`fill:transparent;stroke:${r()};stroke-width: ${a()}px; stroke-dasharray:${co[i.scales().plot][n()-1]}`);var f=Ee(),d=V(f);{var h=v=>{var g=Bf();g.__click=[qf,e];var p=F(g);G(()=>{qt(g,o(u)),E(p,"points",o(c))}),A(v,g)};D(d,v=>{o(c)&&v(h)})}A(t,f),me()}at(["click"]);var Df=(t,e)=>uo(t,"polyline",e.onclick),If=pe('<polyline class="line"></polyline>'),Of=pe('<g class="series series-multiline"></g>');function Vf(t,e){ge(e,!0);let r=P(e,"lineColor",19,()=>It.PRIMARY),n=P(e,"lineType",3,1),a=P(e,"lineWidth",3,1);const l=T(()=>Or(e.xValues,"Multilines")),s=T(()=>o(l)?wr(e.yValues)?(o(l).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),i=Zt("axes"),c=T(()=>{if(!o(l)||!o(s))return null;const v=new Array(o(s).ncols);for(let g=0;g<v.length;g++)v[g]=hs(o(l),o(s).getcolumn(g+1),i.tX(),i.tY());return v}),u=T(()=>`fill:transparent;stroke:${r()};stroke-width: ${a()}px; stroke-dasharray:${co[i.scales().plot][n()-1]}`);var f=Ee(),d=V(f);{var h=v=>{var g=Of();g.__click=[Df,e],ft(g,21,()=>o(c),mt,(p,m)=>{var w=If();G(()=>E(w,"points",o(m))),A(p,w)}),G(()=>qt(g,o(u))),A(v,g)};D(d,v=>{o(c)&&o(c).length>0&&v(h)})}A(t,f),me()}at(["click"]);function Uf(t,e){ge(e,!0);let r=P(e,"show",3,!0),n=P(e,"labels",3,null),a=P(e,"labelColor",19,()=>It.CLEGEND_LABELS),l=P(e,"fontSize",3,.85);const s=Zt("axes");se(()=>{s.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:n(),labelColor:a(),fontSize:l()})}),me()}function Wf(t,e,r){const n=e.length,a=new Array(t.length),l=e[1]-e[0];for(let s=0;s<t.length;s++)for(let i=0;i<n-1;i++){const c=t[s]>=e[i],u=i===n-2?t[s]<e[i+1]+l:t[s]<e[i+1];if(c&&u){a[s]=r[i];break}}return a}var Hf=I("<!> <!>",1),Yf=I("<!> <!>",1),Gf=I("<!> <!>",1),Kf=I("<!> <!> <!> <!> <!> <!> <!> <!>",1),Xf=I("<h2>Plot settings</h2>"),Jf=I('<div class="plot-area svelte-x8qn01"><div class="plot svelte-x8qn01"><!></div></div> <div class="plot-controls-area svelte-x8qn01"><!> <!> <!> <!></div>',1),Zf=I('<div class="plot-panel svelte-x8qn01"><!></div>');function Ts(t,e){ge(e,!0);let r=Y(!0),n=Y("none"),a=Y(!1);const l=T(()=>(o(r)?"Preprocessed":"Raw")+" data (selected rows)"),s=T(()=>o(r)&&e.prepdata?e.prepdata:e.rawdata),i=T(()=>o(s)?o(s).varaxisLabel:"Variables"),c=T(()=>e.rawdata.varaxisUnits),u=T(()=>e.left>=0||e.right>0&&e.right<o(s).values.nrows),f=T(()=>e.left>=0?e.left+1:1),d=T(()=>e.right>0&&e.right<o(s).values.nrows?e.right:o(s).values.nrows),h=T(()=>o(r)&&o(s)&&o(u)?wt.seq(o(f),o(d)):null),v=T(()=>o(h)?o(s).varvalues.filter((L,j)=>j>=o(f)-1&&j<o(d)):o(s).varvalues),g=T(()=>o(h)?o(s).values.subset(o(h),null):o(s).values),p=T(()=>o(g)?Xo(o(g).v):null),m=T(()=>o(p)?(o(p)[1]-o(p)[0])*.05:null),w=T(()=>o(p)?[o(p)[0],o(p)[1]+(o(n)!=="none")*o(m)]:[0,1]),_=T(()=>o(s)?Xo(o(s).varvalues,o(a)?.005:.1):[0,1]),k=T(()=>o(a)&&o(u)?[o(s).varvalues[o(f)-1],o(s).varvalues[o(d)-1]]:o(_)),y=T(()=>{if(!e.rawdata)return null;const L={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const j=bs(e.rawdata.classNames.length);L.groups={colors:e.rawdata.classes.map(U=>j[e.rawdata.classNames.findIndex(O=>O===U)]),breaks:Br(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:j}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const j=kl(e.rawdata.resp,8),U=bs(j.length-1);L.response={colors:Wf(e.rawdata.resp.v,j.v,U),labels:null,breaks:j,map:U}}return L});se(()=>{(e.left<1||e.right<1||e.right>=e.left)&&N(a,!1)});var C=Zf(),b=F(C);{var z=L=>{var j=Jf(),U=V(j),O=F(U),Q=F(O);Sf(Q,{get title(){return o(l)},get limY(){return o(w)},get limX(){return o(k)},fileName:"plot-preprocessed",children:(ce,Ne)=>{var Be=Kf(),he=V(Be);{var ue=H=>{Vf(H,{get xValues(){return o(v)},get yValues(){return o(g)}})},Z=H=>{var oe=Ee(),ae=V(oe);ft(ae,17,()=>o(y)[o(n)].colors,mt,(J,ke,Ae)=>{{let $e=T(()=>o(g).getcolumn(Ae+1));zs(J,{get xValues(){return o(v)},get yValues(){return o($e)},get lineColor(){return o(ke)}})}}),A(H,oe)};D(he,H=>{o(n)==="none"?H(ue):H(Z,!1)})}var le=M(he,2);{var Ge=H=>{var oe=Hf();const ae=T(()=>o(s).varvalues[e.varind[0]]);var J=V(oe);{let Ae=T(()=>[o(ae),o(ae)]);zs(J,{get xValues(){return o(Ae)},get yValues(){return o(w)},lineColor:"#00000060"})}var ke=M(J,2);{let Ae=T(()=>[o(ae)]),$e=T(()=>[o(w)[1]-o(m)*(o(n)==="none"?1:2)]),Ie=T(()=>Vr(o(ae).toFixed(2)+" "+o(c)));va(ke,{get xValues(){return o(Ae)},get yValues(){return o($e)},get labels(){return o(Ie)},textColor:"#a0a0a0",textSize:.8,pos:2})}A(H,oe)};D(le,H=>{e.varind&&e.varind[0]>0&&H(Ge)})}var We=M(le,2);{var Se=H=>{var oe=Yf();const ae=T(()=>o(s).varvalues[e.varind[1]]);var J=V(oe);{let Ae=T(()=>[o(k)[0]]),$e=T(()=>[o(s).varvalues[e.varind[1]]-o(k)[0]]),Ie=T(()=>[o(w)[1]]),At=T(()=>[o(w)[1]-o(w)[0]]);Cs(J,{get left(){return o(Ae)},get width(){return o($e)},get top(){return o(Ie)},get height(){return o(At)},lineColor:"transparent",faceColor:"#00000040"})}var ke=M(J,2);{let Ae=T(()=>[o(ae)]),$e=T(()=>[o(w)[1]-o(m)*(o(n)==="none"?1:2)]),Ie=T(()=>Vr(o(ae).toFixed(2)+" "+o(c)));va(ke,{get xValues(){return o(Ae)},get yValues(){return o($e)},get labels(){return o(Ie)},textColor:"#a0a0a0",textSize:.8,pos:2})}A(H,oe)};D(We,H=>{e.varind&&e.varind[1]>0&&H(Se)})}var xe=M(We,2);{var _e=H=>{var oe=Gf();const ae=T(()=>o(s).varvalues[e.varind[2]-1]);var J=V(oe);{let Ae=T(()=>[o(s).varvalues[e.varind[2]-1]]),$e=T(()=>[o(k)[1]-o(s).varvalues[e.varind[2]-1]]),Ie=T(()=>[o(w)[1]]),At=T(()=>[o(w)[1]-o(w)[0]]);Cs(J,{get left(){return o(Ae)},get width(){return o($e)},get top(){return o(Ie)},get height(){return o(At)},lineColor:"transparent",faceColor:"#00000040"})}var ke=M(J,2);{let Ae=T(()=>[o(ae)]),$e=T(()=>[o(w)[1]-o(m)*(o(n)==="none"?1:2)]),Ie=T(()=>Vr(o(ae).toFixed(2)+" "+o(c)));va(ke,{get xValues(){return o(Ae)},get yValues(){return o($e)},get labels(){return o(Ie)},textColor:"#a0a0a0",textSize:.8,pos:2})}A(H,oe)};D(xe,H=>{e.varind&&e.varind[2]<o(s).varvalues.length&&e.varind[2]>0&&H(_e)})}var De=M(xe,2);{let H=T(()=>o(n)!=="none");Uf(De,{get show(){return o(H)},get labels(){return o(y)[o(n)].labels},get breaks(){return o(y)[o(n)].breaks},get colmap(){return o(y)[o(n)].map}})}var He=M(De,2);Af(He,{get label(){return o(i)},showGrid:!0});var B=M(He,2);Cf(B,{showGrid:!0});var te=M(B,2);zf(te,{}),A(ce,Be)},$$slots:{default:!0}});var ie=M(U,2),K=F(ie);ne(K,{label:"",children:(ce,Ne)=>{var Be=Xf();A(ce,Be)},$$slots:{default:!0}});var q=M(K,2);ne(q,{label:"Show",children:(ce,Ne)=>{aa(ce,{options:["raw","preprocessed"],get value(){return o(r)},set value(Be){N(r,Be,!0)}})},$$slots:{default:!0}});var ee=M(q,2);{var be=ce=>{ne(ce,{label:"Color by",children:(Ne,Be)=>{{let he=T(()=>Object.keys(o(y)));Dt(Ne,{get options(){return o(he)},get value(){return o(n)},set value(ue){N(n,ue,!0)}})}},$$slots:{default:!0}})};D(ee,ce=>{Object.keys(o(y)).length>1&&ce(be)})}var fe=M(ee,2);{var X=ce=>{ne(ce,{label:"Zoom (x-axis)",children:(Ne,Be)=>{aa(Ne,{options:["off","on"],get value(){return o(a)},set value(he){N(a,he,!0)}})},$$slots:{default:!0}})};D(fe,ce=>{e.left>0&&e.right>e.left&&ce(X)})}A(L,j)};D(b,L=>{o(v)&&o(g)&&L(z)})}A(t,C),me()}const Qf=t=>t;function Ps(t,{delay:e=0,duration:r=400,easing:n=Qf}={}){const a=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:l=>`opacity: ${l*a}`}}var $f=I('<p class="title"> </p>'),ed=I("<!>&nbsp;",1),td=I("<!> <!>",1),rd=I('<div class="method-open svelte-2gffce"><!> <!> <!></div>'),nd=(t,e)=>e.open(e.pos),od=I('<p> <span title="Edit" class="svelte-2gffce"> </span></p> <!> <!> <!>',1);function dn(t,e){ge(e,!0);let r=P(e,"cancel",3,null);var n=Ee(),a=V(n);{var l=i=>{var c=rd(),u=F(c);ne(u,{children:(h,v)=>{var g=$f(),p=F(g);G(()=>qe(p,e.title)),A(h,g)},$$slots:{default:!0}});var f=M(u,2);sn(f,()=>e.children);var d=M(f,2);ne(d,{label:" ",children:(h,v)=>{var g=td(),p=V(g);{var m=_=>{var k=ed(),y=V(k);br(y,{text:"Cancel",get onclick(){return r()}}),A(_,k)};D(p,_=>{r()&&_(m)})}var w=M(p,2);br(w,{text:"Save",get onclick(){return e.apply}}),A(h,g)},$$slots:{default:!0}}),wl(3,c,()=>Ps,()=>({duration:10})),A(i,c)},s=i=>{ne(i,{children:(c,u)=>{var f=od(),d=V(f),h=F(d),v=M(h);v.__click=[nd,e];var g=F(v),p=M(d,2);Uc(p,{onclick:()=>e.moveUp(e.pos)});var m=M(p,2);Wc(m,{onclick:()=>e.moveDown(e.pos)});var w=M(m,2);so(w,{onclick:()=>e.remove(e.pos)}),G(()=>{qe(h,`${e.title??""} `),qe(g,e.settings)}),A(c,f)},$$slots:{default:!0}})};D(a,i=>{e.isOpen?i(l):i(s,!1)})}A(t,n),me()}at(["click"]);var ad=I("<!> <!>",1);function ld(t,e){ge(e,!0);let r=P(e,"params",31,()=>Fe([0,0])),n=P(e,"varind",15),a=P(e,"settings",15),l=P(e,"nvars",3,0),s=cn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const i={snv:0,area:1,length:2,var:3},c=Object.keys(i);let u=Y(Fe(c[r()[0]])),f=Y(r()[1]+1);const d="Normalization";se(()=>{a(o(u)+(o(u)==="var"?" #"+o(f):""))}),se(()=>{o(u)==="var"?n(n()[0]=r()[1]>0?r()[1]:1,!0):n(n()[0]=-1,!0)}),se(()=>{o(u)==="var"&&e.isOpen?n(n()[0]=r()[1],!0):n(n()[0]=-1,!0)}),se(()=>{o(u)&&r(r()[0]=i[o(u)],!0)}),se(()=>{o(f)&&r(r()[1]=o(f)-1,!0)}),dn(t,un({id:"norm",title:d,get settings(){return a()},get isOpen(){return e.isOpen}},()=>s,{children:(h,v)=>{var g=ad(),p=V(g);ne(p,{label:"Type",children:(_,k)=>{Dt(_,{get options(){return c},get value(){return o(u)},set value(y){N(u,y,!0)}})},$$slots:{default:!0}});var m=M(p,2);{var w=_=>{ne(_,{label:"Variable index",children:(k,y)=>{Tn(k,{min:1,get max(){return l()},step:1,get value(){return o(f)},set value(C){N(f,C,!0)}})},$$slots:{default:!0}})};D(m,_=>{o(u)==="var"&&_(w)})}A(h,g)},$$slots:{default:!0}})),me()}var sd=I("<!> <!> <!>",1);function id(t,e){ge(e,!0);let r=P(e,"params",31,()=>Fe([3,1,0])),n=P(e,"settings",15),a=cn(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const l=T(()=>{if(!e.nvars)return 3;const u=Math.round(e.nvars*.25);return u>39?39:u%2<1?u+1:u}),s=T(()=>r()[1]<2?[0,1]:[0,1,2]),i=T(()=>r()[0]<5?[1,2]:[1,2,3]);se(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),se(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),se(()=>{n(r()[0]+", "+r()[1]+", "+r()[2])}),dn(t,un({id:"savgol",title:"Savitzkiy-Golay",get settings(){return n()}},()=>a,{children:(u,f)=>{var d=sd(),h=V(d);ne(h,{label:"Width",children:(p,m)=>{Tn(p,{min:3,get max(){return o(l)},step:2,get value(){return r()[0]},set value(w){r(r()[0]=w,!0)}})},$$slots:{default:!0}});var v=M(h,2);ne(v,{label:"Polynomial",children:(p,m)=>{Dt(p,{get options(){return o(i)},get value(){return r()[1]},set value(w){r(r()[1]=w,!0)}})},$$slots:{default:!0}});var g=M(v,2);ne(g,{label:"Derivative",children:(p,m)=>{Dt(p,{get options(){return o(s)},get value(){return r()[2]},set value(w){r(r()[2]=w,!0)}})},$$slots:{default:!0}}),A(u,d)},$$slots:{default:!0}})),me()}var cd=I("<!> <!>",1);function ud(t,e){ge(e,!0);let r=P(e,"params",31,()=>Fe([1,0]));P(e,"varind",27,()=>-1);let n=P(e,"settings",15);P(e,"nvars",3,0);let a=cn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l={no:0,mean:1,median:2},s={no:0,sd:1,iqr:2,range:3,pareto:4},i=Object.keys(l),c=Object.keys(s);let u=Y(Fe(i[r()[0]])),f=Y(Fe(c[r()[1]]));const d="Scaling";se(()=>{n(o(u)+"/"+o(f))}),se(()=>{o(u)&&r(r()[0]=l[o(u)],!0)}),se(()=>{o(f)&&r(r()[1]=s[o(f)],!0)}),dn(t,un({id:"scale",title:d,get settings(){return n()}},()=>a,{children:(h,v)=>{var g=cd(),p=V(g);ne(p,{label:"Center",children:(w,_)=>{Dt(w,{get options(){return i},get value(){return o(u)},set value(k){N(u,k,!0)}})},$$slots:{default:!0}});var m=M(p,2);ne(m,{label:"Scale",children:(w,_)=>{Dt(w,{get options(){return c},get value(){return o(f)},set value(k){N(f,k,!0)}})},$$slots:{default:!0}}),A(h,g)},$$slots:{default:!0}})),me()}var fd=I("<!> <!> <!>",1),dd=I("<!> <!> <!>",1);function vd(t,e){ge(e,!0);let r=P(e,"params",31,()=>Fe([0,1,.1]));P(e,"varind",27,()=>-1);let n=P(e,"settings",15,"");P(e,"nvars",3,0);let a=cn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l="Baseline correction",s={emsc:0,als:1},i=Object.keys(s);function c(g){const p=Math.ceil(Math.log10(g));return Math.pow(10,p)}let u=Y(Fe(i[r()[0]])),f=Y(Fe(r()[2]>0?c(r()[2]).toString():"0.1")),d=T(()=>parseFloat(o(f))),h=T(()=>o(d)/10),v=T(()=>Math.ceil(-Math.log10(o(d)))+1);se(()=>{if(o(u)!=="als")return;const g=parseFloat(o(f));(r()[2]<o(h)||r()[2]>g-o(h))&&r(r()[2]=o(h),!0)}),se(()=>{n(o(u)+" ("+(o(u)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),se(()=>{o(u)&&r(r()[0]=s[o(u)],!0)}),dn(t,un({id:"scale",title:l,get settings(){return n()}},()=>a,{children:(g,p)=>{var m=dd(),w=V(m);ne(w,{label:"Type",children:(b,z)=>{Dt(b,{get options(){return i},get value(){return o(u)},set value(L){N(u,L,!0)}})},$$slots:{default:!0}});var _=M(w,2);{var k=b=>{var z=fd(),L=V(z);ne(L,{label:"Lambda",children:(O,Q)=>{io(O,{min:1,max:7,step:.1,get value(){return r()[1]},set value(ie){r(r()[1]=ie,!0)}})},$$slots:{default:!0}});var j=M(L,2);ne(j,{label:"Penalty range",children:(O,Q)=>{Dt(O,{options:["1","0.1","0.01"],get value(){return o(f)},set value(ie){N(f,ie,!0)}})},$$slots:{default:!0}});var U=M(j,2);ne(U,{label:"Penalty",children:(O,Q)=>{{let ie=T(()=>o(d)-o(h));io(O,{get min(){return o(h)},get max(){return o(ie)},get step(){return o(h)},get decNum(){return o(v)},get value(){return r()[2]},set value(K){r(r()[2]=K,!0)}})}},$$slots:{default:!0}}),A(b,z)};D(_,b=>{o(u)==="als"&&b(k)})}var y=M(_,2);{var C=b=>{ne(b,{label:"Polynomial",children:(z,L)=>{Tn(z,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(j){r(r()[1]=j,!0)}})},$$slots:{default:!0}})};D(y,b=>{o(u)==="emsc"&&b(C)})}A(g,m)},$$slots:{default:!0}})),me()}var hd=I("<!> <!>",1);function gd(t,e){ge(e,!0);let r=P(e,"params",15),n=P(e,"varind",15),a=P(e,"settings",15),l=cn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const s="Trim tails";let i=Y(!1);const c=T(()=>e.nvars?Math.round(e.nvars*.1):1);se(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-o(c))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+o(c))&&r(r()[1]=e.right,!0),n(n()[1]=r()[0],!0),n(n()[2]=r()[1],!0),N(i,!0)):(n(n()[1]=-1,!0),n(n()[2]=-1,!0),N(i,!1))}),se(()=>{a("left: "+r()[0]+" right: "+r()[1])}),dn(t,un({id:"norm",title:s,get settings(){return a()},get isOpen(){return e.isOpen}},()=>l,{children:(u,f)=>{var d=Ee(),h=V(d);{var v=g=>{var p=hd(),m=V(p);ne(m,{label:"Left",children:(_,k)=>{{let y=T(()=>e.right-o(c));io(_,{get min(){return e.left},get max(){return o(y)},step:1,decNum:0,get value(){return r()[0]},set value(C){r(r()[0]=C,!0)}})}},$$slots:{default:!0}});var w=M(m,2);ne(w,{label:"Right",children:(_,k)=>{{let y=T(()=>e.left+o(c));io(_,{get min(){return o(y)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(C){r(r()[1]=C,!0)}})}},$$slots:{default:!0}}),A(g,p)};D(h,g=>{o(i)&&g(v)})}A(u,d)},$$slots:{default:!0}})),me()}var md=I("<!> <!>",1);function pd(t,e){ge(e,!0);let r=P(e,"params",31,()=>Fe([3,5]));P(e,"varind",27,()=>-1);let n=P(e,"settings",15);P(e,"nvars",3,0);let a=cn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l="Spike removal";se(()=>{n(r()[0]+"/"+r()[1])}),dn(t,un({id:"scale",title:l,get settings(){return n()}},()=>a,{children:(s,i)=>{var c=md(),u=V(c);ne(u,{label:"Window",children:(d,h)=>{Tn(d,{min:3,max:15,step:2,get value(){return r()[0]},set value(v){r(r()[0]=v,!0)}})},$$slots:{default:!0}});var f=M(u,2);ne(f,{label:"Threshold",children:(d,h)=>{Tn(d,{min:3,max:50,get value(){return r()[1]},set value(v){r(r()[1]=v,!0)}})},$$slots:{default:!0}}),A(s,c)},$$slots:{default:!0}})),me()}var wd=I("<h2>Selected methods</h2> <!>",1),bd=I("<p>No methods selected</p>"),_d=I("<p> </p>"),yd=I("<h2>Available methods</h2>"),xd=I("<p>Maximum number of methods is selected.</p>"),kd=I("<p> </p> <!>",1),Ed=I('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-15cx0gr"><!> <!></div>',1);function Sd(t,e){ge(e,!0);let r=P(e,"prepobj",31,()=>Fe([])),n=P(e,"meta",15),a=P(e,"varind",31,()=>-1),l=P(e,"rawdataShort",15),s=P(e,"prepdataShort",15),i=P(e,"prepmodel",3,null),c=P(e,"reset",3,null),u=P(e,"finalize",3,null);const f=30,d=8,h={savgol:id,norm:ld,scale:ud,baseline:vd,trim:gd,spikes:pd};let v=Y("neutral"),g=Y(""),p=Y(void 0),m=Y(""),w=Y(Fe([])),_=Y(!1),k=Y(Fe([])),y=Y(Fe([]));n(new Array(d).fill(""));const C=T(()=>e.rawdata.values.ncols-e.rawdata.nresp);let b=Fe(e.rawdata.values.nrows<3?Object.keys(h).filter(B=>B!=="scale"):Object.keys(h));L(),r().length!==0&&z();async function z(){r().length!==0&&N(p,e.WASM().then(B=>{N(v,"applying");const te=Vl(B,l().values,0,r(),!0,[]),H=na(B,l().values,0,te,!0);s(sa(l(),H)),N(v,"success")}).catch(B=>{s(sa(l())),console.error(B),N(v,"error"),N(g,B,!0)}),!0)}function L(){const B=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(B),N(k,[],!0),N(y,[],!0);return}let te=[],H=[],oe=0,ae=B;for(let J of r())J.id==="trim"?(te.push(oe),H.push(ae),J.params[0]<oe&&(J.params[0]=oe),J.params[1]>ae&&(J.params[1]=ae),oe=J.params[0]>oe?J.params[0]:oe,ae=J.params[1]>0&&J.params[1]<ae?J.params[1]:ae):(te.push(oe),H.push(ae));N(k,te,!0),N(y,H,!0),e.setLeft(oe),e.setRight(ae)}function j(B){const te=ir.find(H=>H.id===B);te&&(o(k).push(e.left),o(y).push(e.right),r().push({id:te.id,params:te.mp}),N(_,!0),N(m,r().length-1))}function U(){r().length<1||(o(k).pop(),o(y).pop(),r().pop(),N(_,!1),N(m,-1))}function O(B){if(B<=0)return;const te=r()[B],H=r()[B-1];r(r()[B-1]=te,!0),r(r()[B]=H,!0),ee()}function Q(B){if(B<0||B===r().length-1)return;const te=r()[B],H=r()[B+1];r(r()[B+1]=te,!0),r(r()[B]=H,!0),ee()}function ie(B){B<0||B>=r().length||(r(r().filter((te,H)=>H!==B)),ee())}function K(B){N(m,B,!0)}function q(){N(m,null)}function ee(){N(v,"neutral"),N(g,""),N(_,!1),N(m,null),L(),z(),a(a()[1]=-1,!0),a(a()[2]=-1,!0)}se(()=>{e.rawdata&&!l()&&l(la(e.rawdata,f))}),se(()=>{l()&&!s()&&s(sa(l()))}),se(()=>{(!r()||r().length===0)&&(N(w,[],!0),s(null),N(k,[],!0),N(y,[],!0),N(m,""),n(new Array(d).fill("")))});var be=Ed(),fe=V(be);let X;var ce=F(fe);ne(ce,{label:"",children:(B,te)=>{var H=wd(),oe=M(V(H),2);{var ae=J=>{Vc(J,{text:"edit",get onclick(){return c()}})};D(oe,J=>{i()&&c()&&J(ae)})}A(B,H)},$$slots:{default:!0}});var Ne=M(ce,2);{var Be=B=>{ne(B,{label:"",children:(te,H)=>{var oe=bd();A(te,oe)},$$slots:{default:!0}})},he=B=>{var te=Ee(),H=V(te);ft(H,17,r,mt,(oe,ae,J)=>{var ke=Ee();const Ae=T(()=>h[o(ae).id]);var $e=V(ke);{var Ie=dt=>{var Vt=Ee(),Hr=V(Vt);{let Yr=T(()=>J===o(m)),Gr=T(()=>o(_)?U:null);Wo(Hr,()=>o(Ae),(Kr,Xr)=>{Xr(Kr,{get isOpen(){return o(Yr)},get left(){return o(k)[J]},get right(){return o(y)[J]},pos:J,get nvars(){return o(C)},moveUp:O,moveDown:Q,apply:ee,open:K,close:q,remove:ie,get cancel(){return o(Gr)},get params(){return o(ae).params},set params($){o(ae).params=$},get varind(){return a()},set varind($){a($)},get settings(){return n()[J]},set settings($){n(n()[J]=$,!0)}})})}A(dt,Vt)},At=dt=>{var Vt=Ee(),Hr=V(Vt);{let Yr=T(()=>J===o(m)),Gr=T(()=>o(_)?U:null);Wo(Hr,()=>o(Ae),(Kr,Xr)=>{Xr(Kr,{pos:J,get isOpen(){return o(Yr)},get left(){return o(k)[J]},get right(){return o(y)[J]},get nvars(){return o(C)},moveUp:O,moveDown:Q,apply:ee,open:K,close:q,remove:ie,get cancel(){return o(Gr)},get params(){return o(ae).params},set params($){o(ae).params=$},get settings(){return n()[J]},set settings($){n(n()[J]=$,!0)}})})}A(dt,Vt)};D($e,dt=>{o(ae).id==="norm"||o(ae).id==="trim"?dt(Ie):dt(At,!1)})}A(oe,ke)}),A(B,te)};D(Ne,B=>{r().length===0?B(Be):B(he,!1)})}var ue=M(Ne,2);{var Z=B=>{ne(B,{status:"error",children:(te,H)=>{var oe=_d(),ae=F(oe);G(()=>qe(ae,o(g))),A(te,oe)},$$slots:{default:!0}})};D(ue,B=>{(o(v)==="error"||o(g))&&B(Z)})}var le=M(fe,2),Ge=F(le);{var We=B=>{ne(B,{label:" ",children:(te,H)=>{br(te,{get onclick(){return u()},text:"Finalize"})},$$slots:{default:!0}})};D(Ge,B=>{!i()&&!o(m)&&r().length>0&&B(We)})}var Se=M(le,2),xe=F(Se);ne(xe,{label:"",children:(B,te)=>{var H=yd();A(B,H)},$$slots:{default:!0}});var _e=M(xe,2);{var De=B=>{ne(B,{label:"",children:(te,H)=>{var oe=xd();A(te,oe)},$$slots:{default:!0}})},He=B=>{var te=Ee(),H=V(te);ft(H,17,()=>b,mt,(oe,ae)=>{const J=T(()=>ir.find(ke=>ke.id===o(ae)));ne(oe,{children:(ke,Ae)=>{var $e=kd(),Ie=V($e),At=F(Ie),dt=M(Ie,2);Oc(dt,{onclick:()=>j(o(J).id)}),G(()=>qe(At,o(J).title)),A(ke,$e)},$$slots:{default:!0}})}),A(B,te)};D(_e,B=>{r().length>=d?B(De):B(He,!1)})}G(B=>X=ct(fe,1,"selected-methods-list svelte-15cx0gr",null,X,B),[()=>({final:i()!==null&&i()!==void 0})]),A(t,be),me()}var Ad=I("<p> </p>"),Cd=I("<!> <!>",1),zd=I('<div class="downloads-block svelte-1jqwqd2"><!></div>'),Td=I('<div class="prep-creator svelte-1jqwqd2"><!></div> <!> <!>',1),Pd=I(`<div class="help-text svelte-1jqwqd2"><p class="svelte-1jqwqd2">In this tab you can create a chain of preprocessing methods (<em>preprocessing model</em>), tune their order and parameters, and check how your data look like before and after preprocessing. When you done you can dowload the model and the preprocessed data to be used in other apps. All you need is just to load your data from a single CSV file or from one or several SPC files.</p> <p class="svelte-1jqwqd2"><strong>CSV file</strong><br/> CSV file should contain data as numeric values delimited by comma (with dot as decimal separator) or
               by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1jqwqd2">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. In this case, select <em>values</em> option for the header and you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1jqwqd2">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file.</p> <p class="svelte-1jqwqd2">If your CSV file contains a column, which is not a part of the main datawith, e.g. with <strong>group labels</strong> (classes, subsets, etc.) or <strong>response values</strong>, you need to set corresponding option in the dialog box. It is assumed that this column is next to the column with row labels or is the first column of row labels are absent.</p> <p class="svelte-1jqwqd2"><strong>SPC files</strong><br/> You can also load spectral data directly from Galactic Industries SPC data files. The app supports both single spectrum in a file and files with multiple spectra, however only 2-way datasets can be loaded. You can select several SPC files to load (hold Ctrl or Shift when selecting), in this case they will be combined together into the same dataset.</p> <p class="svelte-1jqwqd2">After the data is loaded you will be able to create and tune the sequence of preprocessing methods. The result will be shown on a plot for 30 randomly selected rows. To apply the methods to whole data and then dowload the preprocessed values and the model, just click <em>Finalize</em> button.</p></div>`),Nd=I('<div class="app-container svelte-1jqwqd2"><div class="app-controls svelte-1jqwqd2"><div class="data-loader svelte-1jqwqd2"><!></div> <!></div> <div class="app-content svelte-1jqwqd2"><!></div></div>');function Rd(t,e){ge(e,!0);const r=T(()=>e.session.create);let n=Y(Fe([-1,0,0])),a=Y("neutral"),l=Y(""),s=Y(void 0);async function i(b,z,L){!z||!b||z.length===0||N(s,e.WASM().then(j=>{N(a,"applying");const U=Vl(j,b.values,b.nresp,z,!1,L),O=na(j,b.values,b.nresp,U,!1,!1),Q=ns(Pa(b),O);U.info=o(r).prepmeta,o(r).prepmodel=U,o(r).prepdata=Ol(Q,o(r).prepmodel)}).catch(j=>{o(r).prepmodel=null,o(r).prepdata=null,console.error(j),N(a,"error"),N(l,j,!0)}),!0)}function c(b){const z=o(r).rawdata.values.ncols-o(r).rawdata.nresp;o(r).rawdata&&b>=0&&b<z&&b<o(r).right&&(o(r).left=b)}function u(b){const z=o(r).rawdata.values.ncols-o(r).rawdata.nresp;o(r).rawdata&&b<=z&&b>o(r).left&&(o(r).right=b)}function f(){i(o(r).rawdata,o(r).prepobj,[])}function d(){o(r).prepmodel=null,o(r).prepdata=null}se(()=>{o(r).rawdata===null&&(o(r).left=0,o(r).right=0,o(r).prepdata=null,o(r).rawdataShort=null,o(r).prepdataShort=null,o(r).prepmodel=null,o(r).prepobj=[],N(n,[-1,-1,-1],!0))}),se(()=>{(!o(r).prepobj||o(r).prepobj.length===0)&&(o(r).prepdata=null,o(r).prepdataShort=null,N(n,[-1,-1,-1],!0))}),se(()=>{const b=lr(()=>JSON.stringify(e.session,ao));e.backupSession(b,o(r).rawdata,o(r).prepdata,o(r).prepdataShort)});var h=Nd(),v=F(h),g=F(v),p=F(g);as(p,{setLeft:c,setRight:u,get rawdata(){return o(r).rawdata},set rawdata(b){o(r).rawdata=b}});var m=M(g,2);{var w=b=>{var z=Td(),L=V(z),j=F(L);Sd(j,{get WASM(){return e.WASM},get rawdata(){return o(r).rawdata},get left(){return o(r).left},get right(){return o(r).right},setLeft:c,",":!0,setRight:u,reset:d,finalize:f,get prepmodel(){return o(r).prepmodel},set prepmodel(K){o(r).prepmodel=K},get prepdata(){return o(r).prepdata},set prepdata(K){o(r).prepdata=K},get prepdataShort(){return o(r).prepdataShort},set prepdataShort(K){o(r).prepdataShort=K},get rawdataShort(){return o(r).rawdataShort},set rawdataShort(K){o(r).rawdataShort=K},get varind(){return o(n)},set varind(K){N(n,K,!0)},get prepobj(){return o(r).prepobj},set prepobj(K){o(r).prepobj=K},get meta(){return o(r).prepmeta},set meta(K){o(r).prepmeta=K}});var U=M(L,2);{var O=K=>{ne(K,{status:"error",children:(q,ee)=>{var be=Ad(),fe=F(be);G(()=>qe(fe,o(l))),A(q,be)},$$slots:{default:!0}})};D(U,K=>{(o(a)==="error"||o(l))&&K(O)})}var Q=M(U,2);{var ie=K=>{var q=zd(),ee=F(q);ne(ee,{label:"Download",children:(be,fe)=>{var X=Cd(),ce=V(X);br(ce,{text:"Data",onclick:()=>os(o(r).prepdata,o(r).left,o(r).right)});var Ne=M(ce,2);br(Ne,{text:"Model",onclick:()=>cu(o(r).prepmodel)}),A(be,X)},$$slots:{default:!0}}),A(K,q)};D(Q,K=>{o(r).prepmodel&&o(r).prepdata&&K(ie)})}A(b,z)};D(m,b=>{o(r).rawdata&&b(w)})}var _=M(v,2),k=F(_);{var y=b=>{var z=Pd();A(b,z)},C=b=>{var z=Ee(),L=V(z);{var j=U=>{var O=Ee(),Q=V(O);ro(Q,()=>o(r).rawdata,ie=>{Ts(ie,{get rawdata(){return o(r).rawdataShort},get prepdata(){return o(r).prepdataShort},get left(){return o(r).left},get right(){return o(r).right},get varind(){return o(n)}})}),A(U,O)};D(L,U=>{o(r).rawdataShort&&o(r).prepdataShort&&U(j)},!0)}A(b,z)};D(k,b=>{o(r).rawdata?b(C,!1):b(y)})}A(t,h),me()}var Ld=I('<span class="info-details svelte-1l1cvmx"> <span class="svelte-1l1cvmx"><!></span></span>');function Md(t,e){ge(e,!0);var r=Ee(),n=V(r);{var a=s=>{var i=Ld(),c=F(i),u=M(c),f=F(u);pt(f,()=>Cc(e.prepmodel)),G(()=>qe(c,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),A(s,i)},l=s=>{var i=Xi("skipped");A(s,i)};D(n,s=>{e.prepmodel.ml?s(a):s(l,!1)})}A(t,r),me()}var Fd=I('<span>file:</span> <span class="file-name svelte-1dxrrpt"> </span><br/>',1),jd=I('<p class="info-text svelte-1dxrrpt"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function qd(t,e){ge(e,!0);var r=Ee(),n=V(r);{var a=l=>{ne(l,{name:"info",children:(s,i)=>{var c=jd(),u=V(c),f=M(F(u),3);{var d=m=>{var w=Fd(),_=M(V(w),2),k=F(_);G(()=>{E(_,"title",e.model.fileName),qe(k,e.model.fileName)}),A(m,w)};D(f,m=>{e.model.fileName&&m(d)})}var h=M(f),v=M(h,3);Md(v,{get prepmodel(){return e.model}});var g=M(u,2);{var p=m=>{so(m,{get onclick(){return e.reset}})};D(g,m=>{e.reset&&m(p)})}G(()=>qe(h,` ${e.model.npred??""} `)),A(s,c)},$$slots:{default:!0}})};D(n,l=>{e.model&&l(a)})}A(t,r),me()}var Bd=I("<!> <!>",1),Dd=I("<p><!></p>"),Id=I("<!> <!>",1);function Od(t,e){ge(e,!0);let r=P(e,"model",15),n=Y(""),a=Y("neutral"),l=Y("");function s(m){try{const w=JSON.parse(m,Wl);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");w.fileName=o(u),r(w),N(a,"success"),N(l,"")}catch(w){console.log(w),r(null),N(a,"error"),N(l,w,!0)}}function i(m){const w=new FileReader;w.onload=()=>{s(w.result)},w.readAsText(o(n))}function c(){N(n,""),r(null),N(a,"neutral"),N(l,"")}se(()=>{o(n)===null?(r(null),N(a,"neutral"),N(l,"")):(N(a,"neutral"),N(l,""))}),se(()=>{(r()===null||r()===0)&&N(n,"")});let u=T(()=>o(n)?o(n).name.replace(/\.[^/.]+$/,""):"");var f=Id(),d=V(f);{var h=m=>{var w=Bd(),_=V(w);ro(_,()=>o(n),C=>{ne(C,{name:"file-selector",children:(b,z)=>{ts(b,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return o(n)},set file(L){N(n,L,!0)}})},$$slots:{default:!0}})});var k=M(_,2);{var y=C=>{ne(C,{name:"load-button",label:" ",children:(b,z)=>{br(b,{onclick:i,text:"Load"})},$$slots:{default:!0}})};D(k,C=>{o(n)&&C(y)})}A(m,w)},v=m=>{qd(m,{get model(){return r()},reset:c})};D(d,m=>{r()?m(v,!1):m(h)})}var g=M(d,2);{var p=m=>{ne(m,{name:"error",status:"error",children:(w,_)=>{var k=Dd(),y=F(k);pt(y,()=>o(l)),A(w,k)},$$slots:{default:!0}})};D(g,m=>{(o(a)==="error"||o(l))&&m(p)})}A(t,f),me()}var Vd=I('<div class="data-loader svelte-sqi2x7"><!></div>'),Ud=I('<p class="svelte-sqi2x7"><strong>Step 1.</strong></p> <p class="svelte-sqi2x7">Load JSON file with a model you saved from <em>Create</em> tab.</p>',1),Wd=I('<p class="svelte-sqi2x7"><strong>Step 2.</strong></p> <p class="svelte-sqi2x7">Load your data from single CSV file or single/multiple SPC files. See details about data file in the <em>Create</em> tab.</p>',1),Hd=I('<div class="help-text svelte-sqi2x7"><p class="svelte-sqi2x7">In this tab you can apply preprocessing model, developed in <em>Create</em> tab to a new dataset.</p> <!></div>'),Yd=I('<div class="app-container svelte-sqi2x7"><div class="app-controls svelte-sqi2x7"><div class="model-loader svelte-sqi2x7"><!></div> <!></div> <div class="app-content svelte-sqi2x7"><!></div></div>');function Gd(t,e){ge(e,!0);const r=T(()=>e.session.apply);se(()=>{o(r).model===null&&(o(r).rawdata=null,o(r).rawdataShort=null,o(r).prepdata=null)}),se(()=>{o(r).model&&(v=>{var g=Dn(v,2);o(r).left=g[0],o(r).right=g[1]})(Ac(o(r).model))}),se(()=>{o(r).rawdata===null&&(o(r).prepdata=null,o(r).prepdataShort=null)}),se(()=>{o(r).rawdataShort=o(r).rawdata?la(o(r).rawdata,30):null}),se(()=>{o(r).prepdataShort=o(r).prepdata?la(o(r).prepdata,30):null}),se(()=>{const v=lr(()=>JSON.stringify(e.session,ao));e.backupSession(v,o(r).rawdata,o(r).prepdata,o(r).model)});var n=Yd(),a=F(n),l=F(a),s=F(l);Od(s,{get model(){return o(r).model},set model(v){o(r).model=v},get left(){return o(r).left},set left(v){o(r).left=v},get right(){return o(r).right},set right(v){o(r).right=v}});var i=M(l,2);{var c=v=>{var g=Vd(),p=F(g);as(p,{get WASM(){return e.WASM},get model(){return o(r).model},get left(){return o(r).left},get right(){return o(r).right},get rawdata(){return o(r).rawdata},set rawdata(m){o(r).rawdata=m},get prepdata(){return o(r).prepdata},set prepdata(m){o(r).prepdata=m}}),A(v,g)};D(i,v=>{o(r).model&&v(c)})}var u=M(a,2),f=F(u);{var d=v=>{var g=Hd(),p=M(F(g),2);{var m=_=>{var k=Ud();A(_,k)},w=_=>{var k=Wd();A(_,k)};D(p,_=>{o(r).model?_(w,!1):_(m)})}A(v,g)},h=v=>{var g=Ee(),p=V(g);{var m=w=>{var _=Ee(),k=V(_);ro(k,()=>o(r).rawdataShort,y=>{Ts(y,{get rawdata(){return o(r).rawdataShort},get prepdata(){return o(r).prepdataShort},get left(){return o(r).left},get right(){return o(r).right}})}),A(w,_)};D(p,w=>{o(r).rawdataShort&&o(r).prepdataShort&&w(m)},!0)}A(v,g)};D(f,v=>{o(r).rawdata?v(h,!1):v(d)})}A(t,n),me()}var Kd=I('<div><div class="modal svelte-q7wo60"><div class="header svelte-q7wo60"><button class="close-button svelte-q7wo60">✕</button></div> <div class="body svelte-q7wo60"><!></div></div></div>');function Xd(t,e){ge(e,!0);let r=P(e,"isDark",3,!1);function n(d){d.key==="Escape"&&e.closeModal()}var a=Kd();Mr("keydown",Mo,n);let l;var s=F(a),i=F(s),c=F(i);c.__click=function(...d){var h;(h=e.closeModal)==null||h.apply(this,d)};var u=M(i,2),f=F(u);sn(f,()=>e.children),G(d=>l=ct(a,1,"drop svelte-q7wo60",null,l,d),[()=>({isdark:r()})]),wl(7,a,()=>Ps),A(t,a),me()}at(["click"]);function Ns(t,e){N(e,!0)}function Jd(t,e,r){const n=oa(new Date),a=e.appID+"-session-"+n+".json";o(r).date=n;const l=JSON.stringify(o(r),ao),s=new Blob([l],{type:"text/json"}),i=window.URL.createObjectURL(s),c=document.createElement("a");c.setAttribute("href",i),c.setAttribute("download",a),c.click()}function Zd(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var Qd=I('<sup style="color:red">β</sup>'),$d=I('<li><button class="svelte-1cyr8za"> </button></li>'),ev=I("<div><!></div>"),tv=I('<div class="info-container svelte-1cyr8za"><!></div>'),rv=I('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"/> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function nv(t,e){ge(e,!0);let r=P(e,"tabs",19,()=>[]),n=P(e,"isBeta",3,!1);const a="mdatools-"+e.appID;let l=Y(!1),s=Y(void 0),i=Y("Current session "),c=Y(!1);function u(y){N(i,y,!0),N(c,!0),setTimeout(()=>{N(i,"Current session "),N(c,!1)},1e3)}function f(){N(l,!1)}function d(y){o(s).tab=y}function h(){const y=indexedDB.open(a,1);y.onsuccess=C=>{const z=C.target.result.transaction(e.appID,"readwrite");z.objectStore(e.appID).delete("session"),z.oncomplete=()=>{N(s,e.initSession(),!0),u("Session was reinitialzed.")},z.onerror=()=>console.error("Failed to session from DB.")}}function v(y,C){window.localStorage.removeItem(e.appID+"-blocked");const b=indexedDB.open(a,1);b.onsuccess=z=>{const U=z.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);U.put(y,"session"),U.put(oa(new Date),"session-update")}}function g(){new Promise((y,C)=>{const b=indexedDB.open(a,1);b.onsuccess=z=>{const O=z.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");O.onsuccess=()=>y(O.result),O.onerror=()=>C(O.error)}}).then(y=>{p(y),N(i,"Last session is restored "),N(c,!0),setTimeout(()=>{N(i,"Current session "),N(c,!1)},1500)}).catch(y=>{console.error(y),N(s,e.initSession(),!0)})}function p(y){if(!y||y==="undefined"){N(s,e.initSession(),!0);return}const C=JSON.parse(y,Wl);N(s,e.checkSession(C)?C:e.initSession(e.appID),!0)}function m(y){e.resetSession(o(s));const C=new FileReader;C.onload=()=>{p(C.result),y.target.value=""},C.readAsText(y.target.files[0])}bc(()=>{const y=e.appID,C=indexedDB.open(a,1);C.onupgradeneeded=b=>{const z=b.target.result;z.objectStoreNames.contains(y)||z.createObjectStore(y)},C.onsuccess=b=>{g()}});var w=Ee(),_=V(w);{var k=y=>{var C=rv(),b=F(C),z=F(b),L=F(z),j=M(L,2),U=F(j),O=M(U);{var Q=_e=>{var De=Qd();A(_e,De)};D(O,_e=>{n()&&_e(Q)})}var ie=M(j,2),K=F(ie),q=M(z,2);ft(q,21,r,mt,(_e,De,He)=>{var B=$d();let te;var H=F(B);H.__click=()=>d(He),H.__keydown=()=>d(He);var oe=F(H);G(ae=>{te=ct(B,1,"nav-item svelte-1cyr8za",null,te,ae),qe(oe,o(De).name)},[()=>({selected:o(s).tab===He})]),A(_e,B)});var ee=M(b,2);ft(ee,21,r,mt,(_e,De,He)=>{var B=ev();let te;var H=F(B);Wo(H,()=>o(De).component,(oe,ae)=>{ae(oe,{get WASM(){return e.WASM},get session(){return o(s)},backupSession:v})}),G(oe=>te=ct(B,1,"tab-content svelte-1cyr8za",null,te,oe),[()=>({hidden:o(s).tab!==He})]),A(_e,B)});var be=M(ee,2),fe=F(be);let X;var ce=F(fe),Ne=F(ce),Be=M(ce,2),he=F(Be);he.__change=m;var ue=M(Be,2);ue.__click=[Jd,e,s];var Z=M(ue,2);Z.__click=[Zd,h];var le=M(fe,2),Ge=F(le);Ge.__click=[Ns,l],Ge.__keydown=[Ns,l];var We=M(Ge,2);sn(We,()=>e.footer);var Se=M(be,2);{var xe=_e=>{Xd(_e,{closeModal:f,children:(De,He)=>{var B=tv(),te=F(B);sn(te,()=>e.info),A(De,B)},$$slots:{default:!0}})};D(Se,_e=>{o(l)&&_e(xe)})}G(_e=>{E(L,"alt",e.appShortTitle),qe(U,e.appTitle),qe(K,e.appSlogan),X=ct(fe,1,"session svelte-1cyr8za",null,X,_e),qe(Ne,o(i))},[()=>({"no-buttons":o(c)})]),A(y,C)};D(_,y=>{o(s)&&y(k)})}A(t,w),me()}at(["click","keydown","change"]);const mv="modulepreload",pv=function(t){return"/"+t},wv={},ov=function(e,r,n){let a=Promise.resolve();function l(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return a.then(s=>{for(const i of s||[])i.status==="rejected"&&l(i.reason);return e().catch(l)})};async function av(t={}){var Ls;var e,r=t,n=typeof window=="object",a=typeof WorkerGlobalScope<"u",l=typeof process=="object"&&((Ls=process.versions)==null?void 0:Ls.node)&&process.type!="renderer";if(l){const{createRequire:S}=await ov(()=>Promise.resolve().then(()=>cv),void 0);var s=S(Pe&&Pe.tagName.toUpperCase()==="SCRIPT"&&Pe.src||new URL("prep.js",document.baseURI).href)}var i=(S,R)=>{throw R},c=Pe&&Pe.tagName.toUpperCase()==="SCRIPT"&&Pe.src||new URL("prep.js",document.baseURI).href,u="";function f(S){return r.locateFile?r.locateFile(S,u):u+S}var d,h;if(l){var v=s("fs");c.startsWith("file:")&&(u=s("path").dirname(s("url").fileURLToPath(c))+"/"),h=S=>{S=k(S)?new URL(S):S;var R=v.readFileSync(S);return R},d=async(S,R=!0)=>{S=k(S)?new URL(S):S;var W=v.readFileSync(S,R?void 0:"utf8");return W},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),i=(S,R)=>{throw process.exitCode=S,R}}else if(n||a){try{u=new URL(".",c).href}catch{}a&&(h=S=>{var R=new XMLHttpRequest;return R.open("GET",S,!1),R.responseType="arraybuffer",R.send(null),new Uint8Array(R.response)}),d=async S=>{if(k(S))return new Promise((W,Me)=>{var Te=new XMLHttpRequest;Te.open("GET",S,!0),Te.responseType="arraybuffer",Te.onload=()=>{if(Te.status==200||Te.status==0&&Te.response){W(Te.response);return}Me(Te.status)},Te.onerror=Me,Te.send(null)});var R=await fetch(S,{credentials:"same-origin"});if(R.ok)return R.arrayBuffer();throw new Error(R.status+" : "+R.url)}}var g=console.log.bind(console),p=console.error.bind(console),m,w=!1,_,k=S=>S.startsWith("file://"),y,C,b,z,L,j,U=!1;function O(){var S=b.buffer;z=new Int8Array(S),L=new Uint8Array(S),r.HEAP32=new Int32Array(S),j=new Uint32Array(S),r.HEAPF64=new Float64Array(S),new BigInt64Array(S),new BigUint64Array(S)}function Q(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)He(r.preRun.shift());Se(De)}function ie(){U=!0,Fn.j()}function K(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)_e(r.postRun.shift());Se(xe)}var q=0,ee=null;function be(S){var R;q++,(R=r.monitorRunDependencies)==null||R.call(r,q)}function fe(S){var W;if(q--,(W=r.monitorRunDependencies)==null||W.call(r,q),q==0&&ee){var R=ee;ee=null,R()}}function X(S){var W;(W=r.onAbort)==null||W.call(r,S),S="Aborted("+S+")",p(S),w=!0,S+=". Build with -sASSERTIONS for more info.";var R=new WebAssembly.RuntimeError(S);throw C==null||C(R),R}var ce;function Ne(){return r.locateFile?f("prep_wasm.wasm"):new URL("/prep/prep.wasm",Pe&&Pe.tagName.toUpperCase()==="SCRIPT"&&Pe.src||new URL("prep.js",document.baseURI).href).href}function Be(S){if(S==ce&&m)return new Uint8Array(m);if(h)return h(S);throw"both async and sync fetching of the wasm failed"}async function he(S){if(!m)try{var R=await d(S);return new Uint8Array(R)}catch{}return Be(S)}async function ue(S,R){try{var W=await he(S),Me=await WebAssembly.instantiate(W,R);return Me}catch(Te){p(`failed to asynchronously prepare wasm: ${Te}`),X(Te)}}async function Z(S,R,W){if(!S&&typeof WebAssembly.instantiateStreaming=="function"&&!k(R)&&!l)try{var Me=fetch(R,{credentials:"same-origin"}),Te=await WebAssembly.instantiateStreaming(Me,W);return Te}catch(Ke){p(`wasm streaming compile failed: ${Ke}`),p("falling back to ArrayBuffer instantiation")}return ue(R,W)}function le(){return{a:fv}}async function Ge(){function S(Ke,Xe){return Fn=Ke.exports,b=Fn.i,O(),uv(Fn),fe(),Fn}be();function R(Ke){return S(Ke.instance)}var W=le();if(r.instantiateWasm)return new Promise((Ke,Xe)=>{r.instantiateWasm(W,(Ze,Xt)=>{Ke(S(Ze))})});ce??(ce=Ne());var Me=await Z(m,ce,W),Te=R(Me);return Te}class We{constructor(R){Jt(this,"name","ExitStatus");this.message=`Program terminated with exit(${R})`,this.status=R}}var Se=S=>{for(;S.length>0;)S.shift()(r)},xe=[],_e=S=>xe.push(S),De=[],He=S=>De.push(S),B=!0,te=S=>or(S),H=()=>po(),oe=()=>X(""),ae=0,J=()=>{B=!1,ae=0},ke={},Ae=S=>{if(S instanceof We||S=="unwind")return _;i(1,S)},$e=()=>B||ae>0,Ie=S=>{var R;_=S,$e()||((R=r.onExit)==null||R.call(r,S),w=!0),i(S,new We(S))},At=(S,R)=>{_=S,Ie(S)},dt=At,Vt=()=>{if(!$e())try{dt(_)}catch(S){Ae(S)}},Hr=S=>{if(!w)try{S(),Vt()}catch(R){Ae(R)}},Yr=()=>performance.now(),Gr=(S,R)=>{if(ke[S]&&(clearTimeout(ke[S].id),delete ke[S]),!R)return 0;var W=setTimeout(()=>{delete ke[S],Hr(()=>mo(S,Yr()))},R);return ke[S]={id:W,timeout_ms:R},0},Kr=()=>2147483648,Xr=(S,R)=>Math.ceil(S/R)*R,$=S=>{var R=b.buffer.byteLength,W=(S-R+65535)/65536|0;try{return b.grow(W),O(),1}catch{}},ze=S=>{var R=L.length;S>>>=0;var W=Kr();if(S>W)return!1;for(var Me=1;Me<=4;Me*=2){var Te=R*(1+.2/Me);Te=Math.min(Te,S+100663296);var Ke=Math.min(W,Xr(Math.max(S,Te),65536)),Xe=$(Ke);if(Xe)return!0}return!1},Ce=S=>52;function tt(S,R,W,Me){return 70}var bt=[null,[],[]],Ut=typeof TextDecoder<"u"?new TextDecoder:void 0,Ct=(S,R,W,Me)=>{for(var Te=R+W;S[R]&&!(R>=Te);)++R;return R},kt=(S,R=0,W,Me)=>{var Te=Ct(S,R,W);if(Te-R>16&&S.buffer&&Ut)return Ut.decode(S.subarray(R,Te));for(var Ke="";R<Te;){var Xe=S[R++];if(!(Xe&128)){Ke+=String.fromCharCode(Xe);continue}var Ze=S[R++]&63;if((Xe&224)==192){Ke+=String.fromCharCode((Xe&31)<<6|Ze);continue}var Xt=S[R++]&63;if((Xe&240)==224?Xe=(Xe&15)<<12|Ze<<6|Xt:Xe=(Xe&7)<<18|Ze<<12|Xt<<6|S[R++]&63,Xe<65536)Ke+=String.fromCharCode(Xe);else{var Zr=Xe-65536;Ke+=String.fromCharCode(55296|Zr>>10,56320|Zr&1023)}}return Ke},Ye=(S,R)=>{var W=bt[S];R===0||R===10?((S===1?g:p)(kt(W)),W.length=0):W.push(R)},Re=(S,R,W)=>S?kt(L,S,R):"",vt=(S,R,W,Me)=>{for(var Te=0,Ke=0;Ke<W;Ke++){var Xe=j[R>>2],Ze=j[R+4>>2];R+=8;for(var Xt=0;Xt<Ze;Xt++)Ye(S,L[Xe+Xt]);Te+=Ze}return j[Me>>2]=Te,0},lt=S=>{var R=r["_"+S];return R},rt=(S,R)=>{z.set(S,R)},Je=S=>{for(var R=0,W=0;W<S.length;++W){var Me=S.charCodeAt(W);Me<=127?R++:Me<=2047?R+=2:Me>=55296&&Me<=57343?(R+=4,++W):R+=3}return R},Wt=(S,R,W,Me)=>{if(!(Me>0))return 0;for(var Te=W,Ke=W+Me-1,Xe=0;Xe<S.length;++Xe){var Ze=S.codePointAt(Xe);if(Ze<=127){if(W>=Ke)break;R[W++]=Ze}else if(Ze<=2047){if(W+1>=Ke)break;R[W++]=192|Ze>>6,R[W++]=128|Ze&63}else if(Ze<=65535){if(W+2>=Ke)break;R[W++]=224|Ze>>12,R[W++]=128|Ze>>6&63,R[W++]=128|Ze&63}else{if(W+3>=Ke)break;R[W++]=240|Ze>>18,R[W++]=128|Ze>>12&63,R[W++]=128|Ze>>6&63,R[W++]=128|Ze&63,Xe++}}return R[W]=0,W-Te},Jr=(S,R,W)=>Wt(S,L,R,W),je=S=>st(S),re=S=>{var R=Je(S)+1,W=je(R);return Jr(S,W,R),W},ht=(S,R,W,Me,Te)=>{var Ke={string:Rt=>{var jn=0;return Rt!=null&&Rt!==0&&(jn=re(Rt)),jn},array:Rt=>{var jn=je(Rt.length);return rt(Rt,jn),jn}};function Xe(Rt){return R==="string"?Re(Rt):R==="boolean"?!!Rt:Rt}var Ze=lt(S),Xt=[],Zr=0;if(Me)for(var Qr=0;Qr<Me.length;Qr++){var Ms=Ke[W[Qr]];Ms?(Zr===0&&(Zr=H()),Xt[Qr]=Ms(Me[Qr])):Xt[Qr]=Me[Qr]}var ga=Ze(...Xt);function vv(Rt){return Zr!==0&&te(Zr),Xe(Rt)}return ga=vv(ga),ga};r.noExitRuntime&&(B=r.noExitRuntime),r.print&&(g=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(m=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=ht;var mo,or,st,po;function uv(S){r._malloc=S.k,r._free=S.l,r._prepfit_wasm=S.m,r._prepapply_wasm=S.n,mo=S.o,or=S.p,st=S.q,po=S.r}var fv={c:oe,b:J,d:Gr,e:ze,h:Ce,f:tt,g:vt,a:Ie},Fn=await Ge();function ha(){if(q>0){ee=ha;return}if(Q(),q>0){ee=ha;return}function S(){var R;r.calledRun=!0,!w&&(ie(),y==null||y(r),(R=r.onRuntimeInitialized)==null||R.call(r),K())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),S()},1)):S()}function dv(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return dv(),ha(),U?e=r:e=new Promise((S,R)=>{y=S,C=R}),e}var lv=I('<p>Current release: <span>1.1.6</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=Preprocessing app">help@mda.tools</a> | <a class="paper-link" href="/prep/references.pdf" download="">references</a> | <a href="">video lessons</a></p>'),sv=I(`<h2>Data preprocessing</h2> <p>Interactive web-application for data preprocessing. Most of the methods it contains are
      applicable for different kinds of spectra. The selected chain of methods and their parameters can be saved as preprocessing model
      and be applied later to another dataset or incorporated to other methods (PCA, PLS, etc.).</p> <h3>v. 1.1.6</h3> <p class="release-info">released 14/08/2025</p> <ul><li>Fixed small bug related to trimming.</li></ul> <h3>v. 1.1.5</h3> <p class="release-info">released 13/08/2025</p> <ul><li>Fixed small issues with zooming and session reset.</li> <li>Added link to PDF file with references.</li></ul> <h3>v. 1.1.4</h3> <p class="release-info">released 12/08/2025</p> <ul><li>Fixed small issue with cancel button.</li></ul>`,1);function iv(t,e){ge(e,!1);function r(s){s.apply.model=null,s.create.rawdata=null}function n(s){const i=Object.keys(s);if(!["date","tab","create","apply"].every(u=>i.includes(u)))return!1;const c=Object.keys(s.create);return!!["rawdata","prepdata","rawdataShort","prepdataShort","prepmodel","left","right","varind"].every(u=>c.includes(u))}function a(){return{date:oa(new Date),tab:0,create:{rawdata:0,prepdata:0,rawdataShort:0,prepdataShort:0,prepmodel:0,prepobj:[],prepmeta:0,left:0,right:0,varind:[-1,-1,-1]},apply:{rawdata:0,prepdata:0,model:0,left:0,right:0,varind:[-1,-1,-1]}}}const l=[{name:"Create",label:"create",component:Rd},{name:"Apply",label:"apply",component:Gd}];gc(),nv(t,{appID:"prep",appTitle:"Preprocessing",appShortTitle:"Preprocessing",appSlogan:"Make your data great again",get WASM(){return av},get tabs(){return l},initSession:a,checkSession:n,resetSession:r,footer:c=>{var u=lv();A(c,u)},info:c=>{var u=sv();A(c,u)},$$slots:{footer:!0,info:!0}}),me()}Ji(iv,{target:document.body});const cv=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=prep.js.map
