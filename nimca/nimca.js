var L0=Object.defineProperty;var ic=et=>{throw TypeError(et)};var z0=(et,We,vt)=>We in et?L0(et,We,{enumerable:!0,configurable:!0,writable:!0,value:vt}):et[We]=vt;var Dt=(et,We,vt)=>z0(et,typeof We!="symbol"?We+"":We,vt),Yo=(et,We,vt)=>We.has(et)||ic("Cannot "+vt);var H=(et,We,vt)=>(Yo(et,We,"read from private field"),vt?vt.call(et):We.get(et)),Ne=(et,We,vt)=>We.has(et)?ic("Cannot add the same private member more than once"):We instanceof WeakSet?We.add(et):We.set(et,vt),xe=(et,We,vt,Vn)=>(Yo(et,We,"write to private field"),Vn?Vn.call(et,vt):We.set(et,vt),vt),ot=(et,We,vt)=>(Yo(et,We,"access private method"),vt);(function(){"use strict";var ss,ls,zn,Rn,qs,os,as,yt,Wo,Bn,Uo,cc,uc,cr,ur,Bo,Nr,In,Mr,fr,Jt,jr,Hr,an,Fn,cn,qn,un,pl,St,R0,I0,Ho,yl,xl,Go,wr,Tr,rr,On,Os,Ds,bl,fn,is,Bs,wl,fc,ac,cs,us,fs,ds,vs,hs,ms,gs,ps,bs;var et=document.createElement("style");et.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1fhdfcc{width:100%;border-collapse:collapse}tr.svelte-1fhdfcc{width:100%}th.svelte-1fhdfcc{border-bottom:1px solid #a0a0a0}th.svelte-1fhdfcc,td.svelte-1fhdfcc{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1fhdfcc{text-align:left;padding:.1em .5em}table.svelte-1bca91p{width:100%;border-collapse:collapse}tr.svelte-1bca91p{width:100%}th.svelte-1bca91p{border-bottom:1px solid #a0a0a0}th.svelte-1bca91p,td.svelte-1bca91p{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1bca91p{text-align:left;padding:.1em .5em}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.plot-container.svelte-1838sos{width:100%;height:100%}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(325px,30%) 1fr}}.model-info.svelte-7h7avz{line-height:1.5em}.model-info.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-k5uafz{width:100%;border-collapse:collapse}tr.svelte-k5uafz{width:100%}th.svelte-k5uafz{border-bottom:1px solid #a0a0a0}tr.section.svelte-k5uafz>td:where(.svelte-k5uafz){border-top:1px solid #a0a0a0}th.svelte-k5uafz,td.svelte-k5uafz{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-k5uafz{text-align:left;padding:.1em .5em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(325px,30%) 1fr}}table.svelte-vm8g95{width:100%;border-collapse:collapse}tr.svelte-vm8g95{width:100%}th.svelte-vm8g95{border-bottom:1px solid #a0a0a0}th.svelte-vm8g95,td.svelte-vm8g95{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-vm8g95{text-align:left;padding:.1em .5em}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){background:#e8e8e8}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(325px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(et);var We=typeof document<"u"?document.currentScript:null;const vt=!1;var Vn=Array.isArray,dc=Array.prototype.indexOf,kl=Array.from,vc=Object.defineProperty,Gr=Object.getOwnPropertyDescriptor,Xo=Object.getOwnPropertyDescriptors,Ko=Object.prototype,hc=Array.prototype,Ys=Object.getPrototypeOf,Jo=Object.isExtensible;function Yn(t){return typeof t=="function"}const Rt=()=>{};function mc(t){return typeof(t==null?void 0:t.then)=="function"}function gc(t){return t()}function El(t){for(var e=0;e<t.length;e++)t[e]()}function Zo(){var t,e,r=new Promise((s,o)=>{t=s,e=o});return{promise:r,resolve:t,reject:e}}function Al(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const Nt=2,Sl=4,Ws=8,yr=16,zr=32,vn=64,Us=128,dr=512,It=1024,Ht=2048,Rr=4096,Qt=8192,Ir=16384,Hs=32768,Fr=65536,Qo=1<<17,$o=1<<18,Wn=1<<19,ea=1<<20,hn=32768,Cl=1<<21,Nl=1<<22,Xr=1<<23,Kr=Symbol("$state"),ta=Symbol("legacy props"),pc=Symbol(""),Un=new class extends Error{constructor(){super(...arguments);Dt(this,"name","StaleReactionError");Dt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ra(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function bc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function wc(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _c(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function yc(t){throw new Error("https://svelte.dev/e/effect_orphan")}function xc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function kc(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ec(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ac(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Sc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Cc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const na=1,sa=2,la=4,Nc=8,Mc=16,jc=1,Tc=2,Pc=4,Lc=8,zc=16,Rc=1,Ic=2,Fc=4,oa=1,qc=2,Mt=Symbol(),Oc="http://www.w3.org/1999/xhtml";function Dc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function aa(t){return t===this.v}function Bc(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ia(t){return!Bc(t,this.v)}let Hn=!1,Vc=!1;function Yc(){Hn=!0}const Wc=[];function Ml(t,e=!1,r=!1){return Gs(t,new Map,"",Wc,null,r)}function Gs(t,e,r,s,o=null,a=!1){if(typeof t=="object"&&t!==null){var c=e.get(t);if(c!==void 0)return c;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Vn(t)){var f=Array(t.length);e.set(t,f),o!==null&&e.set(o,f);for(var u=0;u<t.length;u+=1){var d=t[u];u in t&&(f[u]=Gs(d,e,r,s,null,a))}return f}if(Ys(t)===Ko){f={},e.set(t,f),o!==null&&e.set(o,f);for(var v in t)f[v]=Gs(t[v],e,r,s,null,a);return f}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!a)return Gs(t.toJSON(),e,r,s,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let tt=null;function Gn(t){tt=t}function Gt(t){return ca().get(t)}function Uc(t,e){return ca().set(t,e),e}function we(t,e=!1,r){tt={p:tt,i:!1,c:null,e:null,s:t,x:null,l:Hn&&!e?{s:null,u:null,$:[]}:null}}function _e(t){var e=tt,r=e.e;if(r!==null){e.e=null;for(var s of r)Ma(s)}return e.i=!0,tt=e.p,{}}function mn(){return!Hn||tt!==null&&tt.l===null}function ca(t){return tt===null&&ra(),tt.c??(tt.c=new Map(Hc(tt)||void 0))}function Hc(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let gn=[];function ua(){var t=gn;gn=[],El(t)}function Jr(t){if(gn.length===0&&!Kn){var e=gn;queueMicrotask(()=>{e===gn&&ua()})}gn.push(t)}function Gc(){for(;gn.length>0;)ua()}function fa(t){var e=Ue;if(e===null)return Oe.f|=Xr,t;if((e.f&Hs)===0){if((e.f&Us)===0)throw t;e.b.error(t)}else Xn(t,e)}function Xn(t,e){for(;e!==null;){if((e.f&Us)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t}const Xs=new Set;let Ge=null,Ks=null,pt=null,nr=[],Js=null,jl=!1,Kn=!1;const gl=class gl{constructor(){Ne(this,yt);Dt(this,"committed",!1);Dt(this,"current",new Map);Dt(this,"previous",new Map);Ne(this,ss,new Set);Ne(this,ls,new Set);Ne(this,zn,0);Ne(this,Rn,0);Ne(this,qs,null);Ne(this,os,[]);Ne(this,as,[]);Dt(this,"skipped_effects",new Set);Dt(this,"is_fork",!1)}is_deferred(){return this.is_fork||H(this,Rn)>0}process(e){var s;nr=[],Ks=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of e)ot(this,yt,Wo).call(this,o,r);this.is_fork||ot(this,yt,cc).call(this),this.is_deferred()?(ot(this,yt,Bn).call(this,r.effects),ot(this,yt,Bn).call(this,r.render_effects),ot(this,yt,Bn).call(this,r.block_effects)):(Ks=this,Ge=null,ha(r.render_effects),ha(r.effects),Ks=null,(s=H(this,qs))==null||s.resolve()),pt=null}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&Xr)===0&&(this.current.set(e,e.v),pt==null||pt.set(e,e.v))}activate(){Ge=this,this.apply()}deactivate(){Ge===this&&(Ge=null,pt=null)}flush(){if(this.activate(),nr.length>0){if(va(),Ge!==null&&Ge!==this)return}else H(this,zn)===0&&this.process([]);this.deactivate()}discard(){for(const e of H(this,ls))e(this);H(this,ls).clear()}increment(e){xe(this,zn,H(this,zn)+1),e&&xe(this,Rn,H(this,Rn)+1)}decrement(e){xe(this,zn,H(this,zn)-1),e&&xe(this,Rn,H(this,Rn)-1),this.revive()}revive(){for(const e of H(this,os))Ft(e,Ht),pn(e);for(const e of H(this,as))Ft(e,Rr),pn(e);xe(this,os,[]),xe(this,as,[]),this.flush()}oncommit(e){H(this,ss).add(e)}ondiscard(e){H(this,ls).add(e)}settled(){return(H(this,qs)??xe(this,qs,Zo())).promise}static ensure(){if(Ge===null){const e=Ge=new gl;Xs.add(Ge),Kn||gl.enqueue(()=>{Ge===e&&e.flush()})}return Ge}static enqueue(e){Jr(e)}apply(){}};ss=new WeakMap,ls=new WeakMap,zn=new WeakMap,Rn=new WeakMap,qs=new WeakMap,os=new WeakMap,as=new WeakMap,yt=new WeakSet,Wo=function(e,r){var v;e.f^=It;for(var s=e.first;s!==null;){var o=s.f,a=(o&(zr|vn))!==0,c=a&&(o&It)!==0,f=c||(o&Qt)!==0||this.skipped_effects.has(s);if((s.f&Us)!==0&&((v=s.b)!=null&&v.is_pending())&&(r={parent:r,effect:s,effects:[],render_effects:[],block_effects:[]}),!f&&s.fn!==null){a?s.f^=It:(o&Sl)!==0?r.effects.push(s):As(s)&&((s.f&yr)!==0&&r.block_effects.push(s),Ss(s));var u=s.first;if(u!==null){s=u;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===r.effect&&(ot(this,yt,Bn).call(this,r.effects),ot(this,yt,Bn).call(this,r.render_effects),ot(this,yt,Bn).call(this,r.block_effects),r=r.parent),s=d.next,d=d.parent}},Bn=function(e){for(const r of e)((r.f&Ht)!==0?H(this,os):H(this,as)).push(r),ot(this,yt,Uo).call(this,r.deps),Ft(r,It)},Uo=function(e){if(e!==null)for(const r of e)(r.f&Nt)===0||(r.f&hn)===0||(r.f^=hn,ot(this,yt,Uo).call(this,r.deps))},cc=function(){if(H(this,Rn)===0){for(const e of H(this,ss))e();H(this,ss).clear()}H(this,zn)===0&&ot(this,yt,uc).call(this)},uc=function(){var a;if(Xs.size>1){this.previous.clear();var e=pt,r=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of Xs){if(c===this){r=!1;continue}const f=[];for(const[d,v]of this.current){if(c.current.has(d))if(r&&v!==c.current.get(d))c.current.set(d,v);else continue;f.push(d)}if(f.length===0)continue;const u=[...c.current.keys()].filter(d=>!this.current.has(d));if(u.length>0){var o=nr;nr=[];const d=new Set,v=new Map;for(const m of f)ma(m,u,d,v);if(nr.length>0){Ge=c,c.apply();for(const m of nr)ot(a=c,yt,Wo).call(a,m,s);c.deactivate()}nr=o}}Ge=null,pt=e}this.committed=!0,Xs.delete(this)};let xr=gl;function da(t){var e=Kn;Kn=!0;try{for(var r;;){if(Gc(),nr.length===0&&(Ge==null||Ge.flush(),nr.length===0))return Js=null,r;va()}}finally{Kn=e}}function va(){var t=Qr;jl=!0;var e=null;try{var r=0;for($s(!0);nr.length>0;){var s=xr.ensure();if(r++>1e3){var o,a;Xc()}s.process(nr),Zr.clear()}}finally{jl=!1,$s(t),Js=null}}function Xc(){try{xc()}catch(t){Xn(t,Js)}}let vr=null;function ha(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var s=t[r++];if((s.f&(Ir|Qt))===0&&As(s)&&(vr=new Set,Ss(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?La(s):s.fn=null),(vr==null?void 0:vr.size)>0)){Zr.clear();for(const o of vr){if((o.f&(Ir|Qt))!==0)continue;const a=[o];let c=o.parent;for(;c!==null;)vr.has(c)&&(vr.delete(c),a.push(c)),c=c.parent;for(let f=a.length-1;f>=0;f--){const u=a[f];(u.f&(Ir|Qt))===0&&Ss(u)}}vr.clear()}}vr=null}}function ma(t,e,r,s){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const o of t.reactions){const a=o.f;(a&Nt)!==0?ma(o,e,r,s):(a&(Nl|yr))!==0&&(a&Ht)===0&&ga(o,e,s)&&(Ft(o,Ht),pn(o))}}function ga(t,e,r){const s=r.get(t);if(s!==void 0)return s;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Nt)!==0&&ga(o,e,r))return r.set(o,!0),!0}return r.set(t,!1),!1}function pn(t){for(var e=Js=t;e.parent!==null;){e=e.parent;var r=e.f;if(jl&&e===Ue&&(r&yr)!==0&&(r&$o)===0)return;if((r&(vn|zr))!==0){if((r&It)===0)return;e.f^=It}}nr.push(e)}function Kc(t){let e=0,r=qr(0),s;return()=>{Zs()&&(l(r),ql(()=>(e===0&&(s=hr(()=>t(()=>xs(r)))),e+=1,()=>{Jr(()=>{e-=1,e===0&&(s==null||s(),s=void 0,xs(r))})})))}}var Jc=Fr|Wn|Us;function Zc(t,e,r){new Qc(t,e,r)}class Qc{constructor(e,r,s){Ne(this,St);Dt(this,"parent");Ne(this,cr,!1);Ne(this,ur);Ne(this,Bo,null);Ne(this,Nr);Ne(this,In);Ne(this,Mr);Ne(this,fr,null);Ne(this,Jt,null);Ne(this,jr,null);Ne(this,Hr,null);Ne(this,an,null);Ne(this,Fn,0);Ne(this,cn,0);Ne(this,qn,!1);Ne(this,un,null);Ne(this,pl,Kc(()=>(xe(this,un,qr(H(this,Fn))),()=>{xe(this,un,null)})));xe(this,ur,e),xe(this,Nr,r),xe(this,In,s),this.parent=Ue.b,xe(this,cr,!!H(this,Nr).pending),xe(this,Mr,bn(()=>{Ue.b=this;{var o=ot(this,St,Ho).call(this);try{xe(this,fr,sr(()=>s(o)))}catch(a){this.error(a)}H(this,cn)>0?ot(this,St,xl).call(this):xe(this,cr,!1)}return()=>{var a;(a=H(this,an))==null||a.remove()}},Jc))}is_pending(){return H(this,cr)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!H(this,Nr).pending}update_pending_count(e){ot(this,St,Go).call(this,e),xe(this,Fn,H(this,Fn)+e),H(this,un)&&Or(H(this,un),H(this,Fn))}get_effect_pending(){return H(this,pl).call(this),l(H(this,un))}error(e){var r=H(this,Nr).onerror;let s=H(this,Nr).failed;if(H(this,qn)||!r&&!s)throw e;H(this,fr)&&(Xt(H(this,fr)),xe(this,fr,null)),H(this,Jt)&&(Xt(H(this,Jt)),xe(this,Jt,null)),H(this,jr)&&(Xt(H(this,jr)),xe(this,jr,null));var o=!1,a=!1;const c=()=>{if(o){Dc();return}o=!0,a&&Cc(),xr.ensure(),xe(this,Fn,0),H(this,jr)!==null&&Zn(H(this,jr),()=>{xe(this,jr,null)}),xe(this,cr,this.has_pending_snippet()),xe(this,fr,ot(this,St,yl).call(this,()=>(xe(this,qn,!1),sr(()=>H(this,In).call(this,H(this,ur)))))),H(this,cn)>0?ot(this,St,xl).call(this):xe(this,cr,!1)};var f=Oe;try{Kt(null),a=!0,r==null||r(e,c),a=!1}catch(u){Xn(u,H(this,Mr)&&H(this,Mr).parent)}finally{Kt(f)}s&&Jr(()=>{xe(this,jr,ot(this,St,yl).call(this,()=>{xr.ensure(),xe(this,qn,!0);try{return sr(()=>{s(H(this,ur),()=>e,()=>c)})}catch(u){return Xn(u,H(this,Mr).parent),null}finally{xe(this,qn,!1)}}))})}}cr=new WeakMap,ur=new WeakMap,Bo=new WeakMap,Nr=new WeakMap,In=new WeakMap,Mr=new WeakMap,fr=new WeakMap,Jt=new WeakMap,jr=new WeakMap,Hr=new WeakMap,an=new WeakMap,Fn=new WeakMap,cn=new WeakMap,qn=new WeakMap,un=new WeakMap,pl=new WeakMap,St=new WeakSet,R0=function(){try{xe(this,fr,sr(()=>H(this,In).call(this,H(this,ur))))}catch(e){this.error(e)}xe(this,cr,!1)},I0=function(){const e=H(this,Nr).pending;e&&(xe(this,Jt,sr(()=>e(H(this,ur)))),xr.enqueue(()=>{var r=ot(this,St,Ho).call(this);xe(this,fr,ot(this,St,yl).call(this,()=>(xr.ensure(),sr(()=>H(this,In).call(this,r))))),H(this,cn)>0?ot(this,St,xl).call(this):(Zn(H(this,Jt),()=>{xe(this,Jt,null)}),xe(this,cr,!1))}))},Ho=function(){var e=H(this,ur);return H(this,cr)&&(xe(this,an,Dr()),H(this,ur).before(H(this,an)),e=H(this,an)),e},yl=function(e){var r=Ue,s=Oe,o=tt;Sr(H(this,Mr)),Kt(H(this,Mr)),Gn(H(this,Mr).ctx);try{return e()}catch(a){return fa(a),null}finally{Sr(r),Kt(s),Gn(o)}},xl=function(){const e=H(this,Nr).pending;H(this,fr)!==null&&(xe(this,Hr,document.createDocumentFragment()),H(this,Hr).append(H(this,an)),Ia(H(this,fr),H(this,Hr))),H(this,Jt)===null&&xe(this,Jt,sr(()=>e(H(this,ur))))},Go=function(e){var r;if(!this.has_pending_snippet()){this.parent&&ot(r=this.parent,St,Go).call(r,e);return}xe(this,cn,H(this,cn)+e),H(this,cn)===0&&(xe(this,cr,!1),H(this,Jt)&&Zn(H(this,Jt),()=>{xe(this,Jt,null)}),H(this,Hr)&&(H(this,ur).before(H(this,Hr)),xe(this,Hr,null)))};function rt(t,e){return e}function $c(t,e,r){for(var s=[],o=e.length,a=0;a<o;a++)Ol(e[a].e,s,!0);za(s,()=>{var c=s.length===0&&r!==null;if(c){var f=r,u=f.parentNode;au(u),u.append(f),t.items.clear(),kr(t,e[0].prev,e[o-1].next)}for(var d=0;d<o;d++){var v=e[d];c||(t.items.delete(v.k),kr(t,v.prev,v.next)),Xt(v.e,!c)}t.first===e[0]&&(t.first=e[0].prev)})}function Qe(t,e,r,s,o,a=null){var c=t,f=new Map,u=null,d=(e&la)!==0,v=(e&na)!==0,m=(e&sa)!==0;if(d){var h=t;c=h.appendChild(Dr())}var g=null,p=Pl(()=>{var k=r();return Vn(k)?k:k==null?[]:kl(k)}),w,b=!0;function _(){eu(E,w,c,e,s),g!==null&&(w.length===0?(g.fragment?(c.before(g.fragment),g.fragment=null):Dl(g.effect),A.first=g.effect):Zn(g.effect,()=>{g=null}))}var A=bn(()=>{w=l(p);for(var k=w.length,S=new Set,M=Ge,L=null,q=Aa(),T=0;T<k;T+=1){var j=w[T],y=s(j,T),z=b?null:f.get(y);z?(v&&Or(z.v,j),m?Or(z.i,T):z.i=T,q&&M.skipped_effects.delete(z.e)):(z=tu(b?c:null,L,j,y,T,o,e,r),b&&(z.o=!0,L===null?u=z:L.next=z,L=z),f.set(y,z)),S.add(y)}if(k===0&&a&&!g)if(b)g={fragment:null,effect:sr(()=>a(c))};else{var V=document.createDocumentFragment(),B=Dr();V.append(B),g={fragment:V,effect:sr(()=>a(B))}}if(!b)if(q){for(const[I,W]of f)S.has(I)||M.skipped_effects.add(W.e);M.oncommit(_),M.ondiscard(()=>{})}else _();l(p)}),E={effect:A,items:f,first:u};b=!1}function eu(t,e,r,s,o){var j,y,z,V;var a=(s&Nc)!==0,c=e.length,f=t.items,u=t.first,d,v=null,m,h=[],g=[],p,w,b,_;if(a)for(_=0;_<c;_+=1)p=e[_],w=o(p,_),b=f.get(w),(j=b.a)==null||j.measure(),(m??(m=new Set)).add(b);for(_=0;_<c;_+=1){if(p=e[_],w=o(p,_),b=f.get(w),t.first??(t.first=b),!b.o){b.o=!0;var A=v?v.next:u;kr(t,v,b),kr(t,b,A),Tl(b,A,r),v=b,h=[],g=[],u=v.next;continue}if((b.e.f&Qt)!==0&&(Dl(b.e),a&&((y=b.a)==null||y.unfix(),(m??(m=new Set)).delete(b))),b!==u){if(d!==void 0&&d.has(b)){if(h.length<g.length){var E=g[0],k;v=E.prev;var S=h[0],M=h[h.length-1];for(k=0;k<h.length;k+=1)Tl(h[k],E,r);for(k=0;k<g.length;k+=1)d.delete(g[k]);kr(t,S.prev,M.next),kr(t,v,S),kr(t,M,E),u=E,v=M,_-=1,h=[],g=[]}else d.delete(b),Tl(b,u,r),kr(t,b.prev,b.next),kr(t,b,v===null?t.first:v.next),kr(t,v,b),v=b;continue}for(h=[],g=[];u!==null&&u.k!==w;)(u.e.f&Qt)===0&&(d??(d=new Set)).add(u),g.push(u),u=u.next;if(u===null)continue;b=u}h.push(b),v=b,u=b.next}if(u!==null||d!==void 0){for(var L=d===void 0?[]:kl(d);u!==null;)(u.e.f&Qt)===0&&L.push(u),u=u.next;var q=L.length;if(q>0){var T=(s&la)!==0&&c===0?r:null;if(a){for(_=0;_<q;_+=1)(z=L[_].a)==null||z.measure();for(_=0;_<q;_+=1)(V=L[_].a)==null||V.fix()}$c(t,L,T)}}a&&Jr(()=>{var B;if(m!==void 0)for(b of m)(B=b.a)==null||B.apply()})}function tu(t,e,r,s,o,a,c,f){var u=(c&na)!==0,d=(c&Mc)===0,v=u?d?Rl(r,!1,!1):qr(r):r,m=(c&sa)===0?o:qr(o),h={i:m,v,k:s,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var g=document.createDocumentFragment();g.append(t=Dr())}return h.e=sr(()=>a(t,v,m,f)),e!==null&&(e.next=h),h}finally{}}function Tl(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==null&&a!==s;){var c=ks(a);o.before(a),a=c}}function kr(t,e,r){e===null?(t.first=r,t.effect.first=r&&r.e):(e.e.next&&(e.e.next.prev=null),e.next=r,e.e.next=r&&r.e),r===null?t.effect.last=e&&e.e:(r.e.prev&&(r.e.prev.next=null),r.prev=e,r.e.prev=e&&e.e)}function ru(t,e,r,s){const o=mn()?ys:Pl;if(r.length===0&&t.length===0){s(e.map(o));return}var a=Ge,c=Ue,f=pa();function u(){Promise.all(r.map(d=>nu(d))).then(d=>{f();try{s([...e.map(o),...d])}catch(v){(c.f&Ir)===0&&Xn(v,c)}a==null||a.deactivate(),_s()}).catch(d=>{Xn(d,c)})}t.length>0?Promise.all(t).then(()=>{f();try{return u()}finally{a==null||a.deactivate(),_s()}}):u()}function pa(){var t=Ue,e=Oe,r=tt,s=Ge;return function(a=!0){Sr(t),Kt(e),Gn(r),a&&(s==null||s.activate())}}function _s(){Sr(null),Kt(null),Gn(null)}function ys(t){var e=Nt|Ht,r=Oe!==null&&(Oe.f&Nt)!==0?Oe:null;return Ue!==null&&(Ue.f|=Wn),{ctx:tt,deps:null,effects:null,equals:aa,f:e,fn:t,reactions:null,rv:0,v:Mt,wv:0,parent:r??Ue,ac:null}}function nu(t,e){let r=Ue;r===null&&bc();var s=r.b,o=void 0,a=qr(Mt),c=!Oe,f=new Map;return du(()=>{var h;var u=Zo();o=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{d===Ge&&d.committed&&d.deactivate(),_s()})}catch(g){u.reject(g),_s()}var d=Ge;if(c){var v=!s.is_pending();s.update_pending_count(1),d.increment(v),(h=f.get(d))==null||h.reject(Un),f.delete(d),f.set(d,u)}const m=(g,p=void 0)=>{if(d.activate(),p)p!==Un&&(a.f|=Xr,Or(a,p));else{(a.f&Xr)!==0&&(a.f^=Xr),Or(a,g);for(const[w,b]of f){if(f.delete(w),w===d)break;b.reject(Un)}}c&&(s.update_pending_count(-1),d.decrement(v))};u.promise.then(m,g=>m(null,g||"unknown"))}),Na(()=>{for(const u of f.values())u.reject(Un)}),new Promise(u=>{function d(v){function m(){v===o?u(a):d(o)}v.then(m,m)}d(o)})}function C(t){const e=ys(t);return qa(e),e}function Pl(t){const e=ys(t);return e.equals=ia,e}function ba(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Xt(e[r])}}function su(t){for(var e=t.parent;e!==null;){if((e.f&Nt)===0)return(e.f&Ir)===0?e:null;e=e.parent}return null}function Ll(t){var e,r=Ue;Sr(su(t));try{t.f&=~hn,ba(t),e=Ya(t)}finally{Sr(r)}return e}function wa(t){var e=Ll(t);if(t.equals(e)||(Ge!=null&&Ge.is_fork||(t.v=e),t.wv=Ba()),!wn)if(pt!==null)Zs()&&pt.set(t,e);else{var r=(t.f&dr)===0?Rr:It;Ft(t,r)}}let zl=new Set;const Zr=new Map;let _a=!1;function qr(t,e){var r={f:0,v:t,reactions:null,equals:aa,rv:0,wv:0};return r}function re(t,e){const r=qr(t);return qa(r),r}function Rl(t,e=!1,r=!0){var o;const s=qr(t);return e||(s.equals=ia),Hn&&r&&tt!==null&&tt.l!==null&&((o=tt.l).s??(o.s=[])).push(s),s}function O(t,e,r=!1){Oe!==null&&(!Ar||(Oe.f&Qo)!==0)&&mn()&&(Oe.f&(Nt|yr|Nl|Qo))!==0&&!(Bt!=null&&Bt.includes(t))&&Sc();let s=r?Me(e):e;return Or(t,s)}function Or(t,e){if(!t.equals(e)){var r=t.v;wn?Zr.set(t,e):Zr.set(t,r),t.v=e;var s=xr.ensure();s.capture(t,r),(t.f&Nt)!==0&&((t.f&Ht)!==0&&Ll(t),Ft(t,(t.f&dr)!==0?It:Rr)),t.wv=Ba(),ya(t,Ht),mn()&&Ue!==null&&(Ue.f&It)!==0&&(Ue.f&(zr|vn))===0&&(lr===null?hu([t]):lr.push(t)),!s.is_fork&&zl.size>0&&!_a&&lu()}return e}function lu(){_a=!1;var t=Qr;$s(!0);const e=Array.from(zl);try{for(const r of e)(r.f&It)!==0&&Ft(r,Rr),As(r)&&Ss(r)}finally{$s(t)}zl.clear()}function xs(t){O(t,t.v+1)}function ya(t,e){var r=t.reactions;if(r!==null)for(var s=mn(),o=r.length,a=0;a<o;a++){var c=r[a],f=c.f;if(!(!s&&c===Ue)){var u=(f&Ht)===0;if(u&&Ft(c,e),(f&Nt)!==0){var d=c;pt==null||pt.delete(d),(f&hn)===0&&(f&dr&&(c.f|=hn),ya(d,Rr))}else u&&((f&yr)!==0&&vr!==null&&vr.add(c),pn(c))}}}function Me(t){if(typeof t!="object"||t===null||Kr in t)return t;const e=Ys(t);if(e!==Ko&&e!==hc)return t;var r=new Map,s=Vn(t),o=re(0),a=_n,c=f=>{if(_n===a)return f();var u=Oe,d=_n;Kt(null),Da(a);var v=f();return Kt(u),Da(d),v};return s&&r.set("length",re(t.length)),new Proxy(t,{defineProperty(f,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ec();var v=r.get(u);return v===void 0?v=c(()=>{var m=re(d.value);return r.set(u,m),m}):O(v,d.value,!0),!0},deleteProperty(f,u){var d=r.get(u);if(d===void 0){if(u in f){const v=c(()=>re(Mt));r.set(u,v),xs(o)}}else O(d,Mt),xs(o);return!0},get(f,u,d){var g;if(u===Kr)return t;var v=r.get(u),m=u in f;if(v===void 0&&(!m||(g=Gr(f,u))!=null&&g.writable)&&(v=c(()=>{var p=Me(m?f[u]:Mt),w=re(p);return w}),r.set(u,v)),v!==void 0){var h=l(v);return h===Mt?void 0:h}return Reflect.get(f,u,d)},getOwnPropertyDescriptor(f,u){var d=Reflect.getOwnPropertyDescriptor(f,u);if(d&&"value"in d){var v=r.get(u);v&&(d.value=l(v))}else if(d===void 0){var m=r.get(u),h=m==null?void 0:m.v;if(m!==void 0&&h!==Mt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return d},has(f,u){var h;if(u===Kr)return!0;var d=r.get(u),v=d!==void 0&&d.v!==Mt||Reflect.has(f,u);if(d!==void 0||Ue!==null&&(!v||(h=Gr(f,u))!=null&&h.writable)){d===void 0&&(d=c(()=>{var g=v?Me(f[u]):Mt,p=re(g);return p}),r.set(u,d));var m=l(d);if(m===Mt)return!1}return v},set(f,u,d,v){var E;var m=r.get(u),h=u in f;if(s&&u==="length")for(var g=d;g<m.v;g+=1){var p=r.get(g+"");p!==void 0?O(p,Mt):g in f&&(p=c(()=>re(Mt)),r.set(g+"",p))}if(m===void 0)(!h||(E=Gr(f,u))!=null&&E.writable)&&(m=c(()=>re(void 0)),O(m,Me(d)),r.set(u,m));else{h=m.v!==Mt;var w=c(()=>Me(d));O(m,w)}var b=Reflect.getOwnPropertyDescriptor(f,u);if(b!=null&&b.set&&b.set.call(v,d),!h){if(s&&typeof u=="string"){var _=r.get("length"),A=Number(u);Number.isInteger(A)&&A>=_.v&&O(_,A+1)}xs(o)}return!0},ownKeys(f){l(o);var u=Reflect.ownKeys(f).filter(m=>{var h=r.get(m);return h===void 0||h.v!==Mt});for(var[d,v]of r)v.v!==Mt&&!(d in f)&&u.push(d);return u},setPrototypeOf(){Ac()}})}var Il,xa,ka,Ea;function ou(){if(Il===void 0){Il=window,xa=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;ka=Gr(e,"firstChild").get,Ea=Gr(e,"nextSibling").get,Jo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Jo(r)&&(r.__t=void 0)}}function Dr(t=""){return document.createTextNode(t)}function $t(t){return ka.call(t)}function ks(t){return Ea.call(t)}function R(t,e){return $t(t)}function K(t,e=!1){{var r=$t(t);return r instanceof Comment&&r.data===""?ks(r):r}}function P(t,e=1,r=!1){let s=t;for(;e--;)s=ks(s);return s}function au(t){t.textContent=""}function Aa(){return!1}let Sa=!1;function iu(){Sa||(Sa=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Jn(t){var e=Oe,r=Ue;Kt(null),Sr(null);try{return t()}finally{Kt(e),Sr(r)}}function cu(t,e,r,s=r){t.addEventListener(e,()=>Jn(r));const o=t.__on_r;o?t.__on_r=()=>{o(),s(!0)}:t.__on_r=()=>s(!0),iu()}function Ca(t){Ue===null&&(Oe===null&&yc(),_c()),wn&&wc()}function uu(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Er(t,e,r){var s=Ue;s!==null&&(s.f&Qt)!==0&&(t|=Qt);var o={ctx:tt,deps:null,nodes_start:null,nodes_end:null,f:t|Ht|dr,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Ss(o),o.f|=Hs}catch(f){throw Xt(o),f}else e!==null&&pn(o);var a=o;if(r&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Wn)===0&&(a=a.first,(t&yr)!==0&&(t&Fr)!==0&&a!==null&&(a.f|=Fr)),a!==null&&(a.parent=s,s!==null&&uu(a,s),Oe!==null&&(Oe.f&Nt)!==0&&(t&vn)===0)){var c=Oe;(c.effects??(c.effects=[])).push(a)}return o}function Zs(){return Oe!==null&&!Ar}function Na(t){const e=Er(Ws,null,!1);return Ft(e,It),e.teardown=t,e}function ge(t){Ca();var e=Ue.f,r=!Oe&&(e&zr)!==0&&(e&Hs)===0;if(r){var s=tt;(s.e??(s.e=[])).push(t)}else return Ma(t)}function Ma(t){return Er(Sl|ea,t,!1)}function Qs(t){return Ca(),Er(Ws|ea,t,!0)}function fu(t){xr.ensure();const e=Er(vn|Wn,t,!0);return(r={})=>new Promise(s=>{r.outro?Zn(e,()=>{Xt(e),s(void 0)}):(Xt(e),s(void 0))})}function Fl(t){return Er(Sl,t,!1)}function du(t){return Er(Nl|Wn,t,!0)}function ql(t,e=0){return Er(Ws|e,t,!0)}function Q(t,e=[],r=[],s=[]){ru(s,e,r,o=>{Er(Ws,()=>t(...o.map(l)),!0)})}function bn(t,e=0){var r=Er(yr|e,t,!0);return r}function sr(t){return Er(zr|Wn,t,!0)}function ja(t){var e=t.teardown;if(e!==null){const r=wn,s=Oe;Fa(!0),Kt(null);try{e.call(null)}finally{Fa(r),Kt(s)}}}function Ta(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const o=r.ac;o!==null&&Jn(()=>{o.abort(Un)});var s=r.next;(r.f&vn)!==0?r.parent=null:Xt(r,e),r=s}}function vu(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&zr)===0&&Xt(e),e=r}}function Xt(t,e=!0){var r=!1;(e||(t.f&$o)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Pa(t.nodes_start,t.nodes_end),r=!0),Ta(t,e&&!r),el(t,0),Ft(t,Ir);var s=t.transitions;if(s!==null)for(const a of s)a.stop();ja(t);var o=t.parent;o!==null&&o.first!==null&&La(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Pa(t,e){for(;t!==null;){var r=t===e?null:ks(t);t.remove(),t=r}}function La(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function Zn(t,e,r=!0){var s=[];Ol(t,s,!0),za(s,()=>{r&&Xt(t),e&&e()})}function za(t,e){var r=t.length;if(r>0){var s=()=>--r||e();for(var o of t)o.out(s)}else e()}function Ol(t,e,r){if((t.f&Qt)===0){if(t.f^=Qt,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var s=t.first;s!==null;){var o=s.next,a=(s.f&Fr)!==0||(s.f&zr)!==0&&(t.f&yr)!==0;Ol(s,e,a?r:!1),s=o}}}function Dl(t){Ra(t,!0)}function Ra(t,e){if((t.f&Qt)!==0){t.f^=Qt,(t.f&It)===0&&(Ft(t,Ht),pn(t));for(var r=t.first;r!==null;){var s=r.next,o=(r.f&Fr)!==0||(r.f&zr)!==0;Ra(r,o?e:!1),r=s}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}function Ia(t,e){for(var r=t.nodes_start,s=t.nodes_end;r!==null;){var o=r===s?null:ks(r);e.append(r),r=o}}let Qr=!1;function $s(t){Qr=t}let wn=!1;function Fa(t){wn=t}let Oe=null,Ar=!1;function Kt(t){Oe=t}let Ue=null;function Sr(t){Ue=t}let Bt=null;function qa(t){Oe!==null&&(Bt===null?Bt=[t]:Bt.push(t))}let Vt=null,er=0,lr=null;function hu(t){lr=t}let Oa=1,Es=0,_n=Es;function Da(t){_n=t}function Ba(){return++Oa}function As(t){var e=t.f;if((e&Ht)!==0)return!0;if(e&Nt&&(t.f&=~hn),(e&Rr)!==0){var r=t.deps;if(r!==null)for(var s=r.length,o=0;o<s;o++){var a=r[o];if(As(a)&&wa(a),a.wv>t.wv)return!0}(e&dr)!==0&&pt===null&&Ft(t,It)}return!1}function Va(t,e,r=!0){var s=t.reactions;if(s!==null&&!(Bt!=null&&Bt.includes(t)))for(var o=0;o<s.length;o++){var a=s[o];(a.f&Nt)!==0?Va(a,e,!1):e===a&&(r?Ft(a,Ht):(a.f&It)!==0&&Ft(a,Rr),pn(a))}}function Ya(t){var p;var e=Vt,r=er,s=lr,o=Oe,a=Bt,c=tt,f=Ar,u=_n,d=t.f;Vt=null,er=0,lr=null,Oe=(d&(zr|vn))===0?t:null,Bt=null,Gn(t.ctx),Ar=!1,_n=++Es,t.ac!==null&&(Jn(()=>{t.ac.abort(Un)}),t.ac=null);try{t.f|=Cl;var v=t.fn,m=v(),h=t.deps;if(Vt!==null){var g;if(el(t,er),h!==null&&er>0)for(h.length=er+Vt.length,g=0;g<Vt.length;g++)h[er+g]=Vt[g];else t.deps=h=Vt;if(Qr&&Zs()&&(t.f&dr)!==0)for(g=er;g<h.length;g++)((p=h[g]).reactions??(p.reactions=[])).push(t)}else h!==null&&er<h.length&&(el(t,er),h.length=er);if(mn()&&lr!==null&&!Ar&&h!==null&&(t.f&(Nt|Rr|Ht))===0)for(g=0;g<lr.length;g++)Va(lr[g],t);return o!==null&&o!==t&&(Es++,lr!==null&&(s===null?s=lr:s.push(...lr))),(t.f&Xr)!==0&&(t.f^=Xr),m}catch(w){return fa(w)}finally{t.f^=Cl,Vt=e,er=r,lr=s,Oe=o,Bt=a,Gn(c),Ar=f,_n=u}}function mu(t,e){let r=e.reactions;if(r!==null){var s=dc.call(r,t);if(s!==-1){var o=r.length-1;o===0?r=e.reactions=null:(r[s]=r[o],r.pop())}}r===null&&(e.f&Nt)!==0&&(Vt===null||!Vt.includes(e))&&(Ft(e,Rr),(e.f&dr)!==0&&(e.f^=dr,e.f&=~hn),ba(e),el(e,0))}function el(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)mu(t,r[s])}function Ss(t){var e=t.f;if((e&Ir)===0){Ft(t,It);var r=Ue,s=Qr;Ue=t,Qr=!0;try{(e&yr)!==0?vu(t):Ta(t),ja(t);var o=Ya(t);t.teardown=typeof o=="function"?o:null,t.wv=Oa;var a;vt&&Vc&&(t.f&Ht)!==0&&t.deps}finally{Qr=s,Ue=r}}}async function gu(){await Promise.resolve(),da()}function l(t){var e=t.f,r=(e&Nt)!==0;if(Oe!==null&&!Ar){var s=Ue!==null&&(Ue.f&Ir)!==0;if(!s&&!(Bt!=null&&Bt.includes(t))){var o=Oe.deps;if((Oe.f&Cl)!==0)t.rv<Es&&(t.rv=Es,Vt===null&&o!==null&&o[er]===t?er++:Vt===null?Vt=[t]:Vt.includes(t)||Vt.push(t));else{(Oe.deps??(Oe.deps=[])).push(t);var a=t.reactions;a===null?t.reactions=[Oe]:a.includes(Oe)||a.push(Oe)}}}if(wn){if(Zr.has(t))return Zr.get(t);if(r){var c=t,f=c.v;return((c.f&It)===0&&c.reactions!==null||Ua(c))&&(f=Ll(c)),Zr.set(c,f),f}}else r&&!(pt!=null&&pt.has(t))&&(c=t,As(c)&&wa(c),Qr&&Zs()&&(c.f&dr)===0&&Wa(c));if(pt!=null&&pt.has(t))return pt.get(t);if((t.f&Xr)!==0)throw t.v;return t.v}function Wa(t){if(t.deps!==null){t.f^=dr;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Nt)!==0&&(e.f&dr)===0&&Wa(e)}}function Ua(t){if(t.v===Mt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Zr.has(e)||(e.f&Nt)!==0&&Ua(e))return!0;return!1}function hr(t){var e=Ar;try{return Ar=!0,t()}finally{Ar=e}}const pu=-7169;function Ft(t,e){t.f=t.f&pu|e}function bu(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Kr in t)Bl(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Kr in r&&Bl(r)}}}function Bl(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{Bl(t[s],e)}catch{}const r=Ys(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=Xo(r);for(let o in s){const a=s[o].get;if(a)try{a.call(t)}catch{}}}}}const wu=["touchstart","touchmove"];function _u(t){return wu.includes(t)}const Ha=new Set,Vl=new Set;function yu(t,e,r,s={}){function o(a){if(s.capture||Cs.call(e,a),!a.cancelBubble)return Jn(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Jr(()=>{e.addEventListener(t,o,s)}):e.addEventListener(t,o,s),o}function yn(t,e,r,s,o){var a={capture:s,passive:o},c=yu(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Na(()=>{e.removeEventListener(t,c,a)})}function at(t){for(var e=0;e<t.length;e++)Ha.add(t[e]);for(var r of Vl)r(t)}let Ga=null;function Cs(t){var b;var e=this,r=e.ownerDocument,s=t.type,o=((b=t.composedPath)==null?void 0:b.call(t))||[],a=o[0]||t.target;Ga=t;var c=0,f=Ga===t&&t.__root;if(f){var u=o.indexOf(f);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var d=o.indexOf(e);if(d===-1)return;u<=d&&(c=u)}if(a=o[c]||t.target,a!==e){vc(t,"currentTarget",{configurable:!0,get(){return a||r}});var v=Oe,m=Ue;Kt(null),Sr(null);try{for(var h,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var w=a["__"+s];w!=null&&(!a.disabled||t.target===a)&&w.call(a,t)}catch(_){h?g.push(_):h=_}if(t.cancelBubble||p===e||p===null)break;a=p}if(h){for(let _ of g)queueMicrotask(()=>{throw _});throw h}}finally{t.__root=e,delete t.currentTarget,Kt(v),Sr(m)}}}function Yl(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function xn(t,e){var r=Ue;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function X(t,e){var r=(e&oa)!==0,s=(e&qc)!==0,o,a=!t.startsWith("<!>");return()=>{o===void 0&&(o=Yl(a?t:"<!>"+t),r||(o=$t(o)));var c=s||xa?document.importNode(o,!0):o.cloneNode(!0);if(r){var f=$t(c),u=c.lastChild;xn(f,u)}else xn(c,c);return c}}function xu(t,e,r="svg"){var s=!t.startsWith("<!>"),o=(e&oa)!==0,a=`<${r}>${s?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var f=Yl(a),u=$t(f);if(o)for(c=document.createDocumentFragment();$t(u);)c.appendChild($t(u));else c=$t(u)}var d=c.cloneNode(!0);if(o){var v=$t(d),m=d.lastChild;xn(v,m)}else xn(d,d);return d}}function Ee(t,e){return xu(t,e,"svg")}function ku(t=""){{var e=Dr(t+"");return xn(e,e),e}}function be(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Dr();return t.append(e,r),xn(e,r),t}function N(t,e){t!==null&&t.before(e)}let Wl=!0;function pe(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Eu(t,e){return Au(t,e)}const Qn=new Map;function Au(t,{target:e,anchor:r,props:s={},events:o,context:a,intro:c=!0}){ou();var f=new Set,u=m=>{for(var h=0;h<m.length;h++){var g=m[h];if(!f.has(g)){f.add(g);var p=_u(g);e.addEventListener(g,Cs,{passive:p});var w=Qn.get(g);w===void 0?(document.addEventListener(g,Cs,{passive:p}),Qn.set(g,1)):Qn.set(g,w+1)}}};u(kl(Ha)),Vl.add(u);var d=void 0,v=fu(()=>{var m=r??e.appendChild(Dr());return Zc(m,{pending:()=>{}},h=>{if(a){we({});var g=tt;g.c=a}o&&(s.$$events=o),Wl=c,d=t(h,s)||{},Wl=!0,a&&_e()}),()=>{var p;for(var h of f){e.removeEventListener(h,Cs);var g=Qn.get(h);--g===0?(document.removeEventListener(h,Cs),Qn.delete(h)):Qn.set(h,g)}Vl.delete(u),m!==r&&((p=m.parentNode)==null||p.removeChild(m))}});return Su.set(d,v),d}let Su=new WeakMap;class Ns{constructor(e,r=!0){Dt(this,"anchor");Ne(this,wr,new Map);Ne(this,Tr,new Map);Ne(this,rr,new Map);Ne(this,On,new Set);Ne(this,Os,!0);Ne(this,Ds,()=>{var e=Ge;if(H(this,wr).has(e)){var r=H(this,wr).get(e),s=H(this,Tr).get(r);if(s)Dl(s),H(this,On).delete(r);else{var o=H(this,rr).get(r);o&&(H(this,Tr).set(r,o.effect),H(this,rr).delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),s=o.effect)}for(const[a,c]of H(this,wr)){if(H(this,wr).delete(a),a===e)break;const f=H(this,rr).get(c);f&&(Xt(f.effect),H(this,rr).delete(c))}for(const[a,c]of H(this,Tr)){if(a===r||H(this,On).has(a))continue;const f=()=>{if(Array.from(H(this,wr).values()).includes(a)){var d=document.createDocumentFragment();Ia(c,d),d.append(Dr()),H(this,rr).set(a,{effect:c,fragment:d})}else Xt(c);H(this,On).delete(a),H(this,Tr).delete(a)};H(this,Os)||!s?(H(this,On).add(a),Zn(c,f,!1)):f()}}});Ne(this,bl,e=>{H(this,wr).delete(e);const r=Array.from(H(this,wr).values());for(const[s,o]of H(this,rr))r.includes(s)||(Xt(o.effect),H(this,rr).delete(s))});this.anchor=e,xe(this,Os,r)}ensure(e,r){var s=Ge,o=Aa();if(r&&!H(this,Tr).has(e)&&!H(this,rr).has(e))if(o){var a=document.createDocumentFragment(),c=Dr();a.append(c),H(this,rr).set(e,{effect:sr(()=>r(c)),fragment:a})}else H(this,Tr).set(e,sr(()=>r(this.anchor)));if(H(this,wr).set(s,e),o){for(const[f,u]of H(this,Tr))f===e?s.skipped_effects.delete(u):s.skipped_effects.add(u);for(const[f,u]of H(this,rr))f===e?s.skipped_effects.delete(u.effect):s.skipped_effects.add(u.effect);s.oncommit(H(this,Ds)),s.ondiscard(H(this,bl))}else H(this,Ds).call(this)}}wr=new WeakMap,Tr=new WeakMap,rr=new WeakMap,On=new WeakMap,Os=new WeakMap,Ds=new WeakMap,bl=new WeakMap;const Cu=0,Ul=1;function Nu(t,e,r,s,o){var a=mn(),c=Mt,f=a?qr(c):Rl(c,!1,!1),u=a?qr(c):Rl(c,!1,!1),d=new Ns(t);bn(()=>{var v=e(),m=!1;if(mc(v)){var h=pa(),g=!1;const p=w=>{if(!m){g=!0,h(!1),xr.ensure();try{w()}finally{_s(),Kn||da()}}};v.then(w=>{p(()=>{Or(f,w),d.ensure(Ul,s&&(b=>s(b,f)))})},w=>{p(()=>{if(Or(u,w),d.ensure(Ul,o&&(b=>o(b,u))),!o)throw u.v})}),Jr(()=>{g||p(()=>{d.ensure(Cu,r)})})}else Or(f,v),d.ensure(Ul,s);return()=>{m=!0}})}function Y(t,e,r=!1){var s=new Ns(t),o=r?Fr:0;function a(c,f){s.ensure(c,f)}bn(()=>{var c=!1;e((f,u=!0)=>{c=!0,a(u,f)}),c||a(!1,null)},o)}function kn(t,e,r){var s=new Ns(t),o=!mn();bn(()=>{var a=e();o&&a!==null&&typeof a=="object"&&(a={}),s.ensure(a,r)})}function jt(t,e,r=!1,s=!1,o=!1){var a=t,c="";Q(()=>{var f=Ue;if(c!==(c=e()??"")&&(f.nodes_start!==null&&(Pa(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),c!=="")){var u=c+"";r?u=`<svg>${u}</svg>`:s&&(u=`<math>${u}</math>`);var d=Yl(u);if((r||s)&&(d=$t(d)),xn($t(d),d.lastChild),r||s)for(;$t(d);)a.before($t(d));else a.before(d)}})}function Br(t,e,...r){var s=new Ns(t);bn(()=>{const o=e()??null;s.ensure(o,o&&(a=>o(a,...r)))},Fr)}function Ms(t,e,r){var s=new Ns(t);bn(()=>{var o=e()??null;s.ensure(o,o&&(a=>r(a,o)))},Fr)}function Xa(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=Xa(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Mu(){for(var t,e,r=0,s="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=Xa(t))&&(s&&(s+=" "),s+=e);return s}function ju(t){return typeof t=="object"?Mu(t):t??""}const Ka=[...`
\r\f \v\uFEFF`];function Tu(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var o in r)if(r[o])s=s?s+" "+o:o;else if(s.length)for(var a=o.length,c=0;(c=s.indexOf(o,c))>=0;){var f=c+a;(c===0||Ka.includes(s[c-1]))&&(f===s.length||Ka.includes(s[f]))?s=(c===0?"":s.substring(0,c))+s.substring(f+1):c=f}}return s===""?null:s}function Pu(t,e){return t==null?null:String(t)}function bt(t,e,r,s,o,a){var c=t.__className;if(c!==r||c===void 0){var f=Tu(r,s,a);f==null?t.removeAttribute("class"):e?t.className=f:t.setAttribute("class",f),t.__className=r}else if(a&&o!==a)for(var u in a){var d=!!a[u];(o==null||d!==!!o[u])&&t.classList.toggle(u,d)}return a}function ht(t,e,r,s){var o=t.__style;if(o!==e){var a=Pu(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return s}const Lu=Symbol("is custom element"),zu=Symbol("is html");function F(t,e,r,s){var o=Ru(t);o[e]!==(o[e]=r)&&(e==="loading"&&(t[pc]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Iu(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Ru(t){return t.__attributes??(t.__attributes={[Lu]:t.nodeName.includes("-"),[zu]:t.namespaceURI===Oc})}var Ja=new Map;function Iu(t){var e=t.getAttribute("is")||t.nodeName,r=Ja.get(e);if(r)return r;Ja.set(e,r=[]);for(var s,o=t,a=Element.prototype;a!==o;){s=Xo(o);for(var c in s)s[c].set&&r.push(c);o=Ys(o)}return r}const Fu=()=>performance.now(),Vr={tick:t=>requestAnimationFrame(t),now:()=>Fu(),tasks:new Set};function Za(){const t=Vr.now();Vr.tasks.forEach(e=>{e.c(t)||(Vr.tasks.delete(e),e.f())}),Vr.tasks.size!==0&&Vr.tick(Za)}function qu(t){let e;return Vr.tasks.size===0&&Vr.tick(Za),{promise:new Promise(r=>{Vr.tasks.add(e={c:t,f:r})}),abort(){Vr.tasks.delete(e)}}}function tl(t,e){Jn(()=>{t.dispatchEvent(new CustomEvent(e))})}function Ou(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Qa(t){const e={},r=t.split(";");for(const s of r){const[o,a]=s.split(":");if(!o||a===void 0)break;const c=Ou(o.trim());e[c]=a.trim()}return e}const Du=t=>t;function $a(t,e,r,s){var o=(t&Rc)!==0,a=(t&Ic)!==0,c=o&&a,f=(t&Fc)!==0,u=c?"both":o?"in":"out",d,v=e.inert,m=e.style.overflow,h,g;function p(){return Jn(()=>d??(d=r()(e,(s==null?void 0:s())??{},{direction:u})))}var w={is_global:f,in(){var E;if(e.inert=v,!o){g==null||g.abort(),(E=g==null?void 0:g.reset)==null||E.call(g);return}a||h==null||h.abort(),tl(e,"introstart"),h=Hl(e,p(),g,1,()=>{tl(e,"introend"),h==null||h.abort(),h=d=void 0,e.style.overflow=m})},out(E){if(!a){E==null||E(),d=void 0;return}e.inert=!0,tl(e,"outrostart"),g=Hl(e,p(),h,0,()=>{tl(e,"outroend"),E==null||E()})},stop:()=>{h==null||h.abort(),g==null||g.abort()}},b=Ue;if((b.transitions??(b.transitions=[])).push(w),o&&Wl){var _=f;if(!_){for(var A=b.parent;A&&(A.f&Fr)!==0;)for(;(A=A.parent)&&(A.f&yr)===0;);_=!A||(A.f&Hs)!==0}_&&Fl(()=>{hr(()=>w.in())})}}function Hl(t,e,r,s,o){var a=s===1;if(Yn(e)){var c,f=!1;return Jr(()=>{if(!f){var b=e({direction:a?"in":"out"});c=Hl(t,b,r,s,o)}}),{abort:()=>{f=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return o(),{abort:Rt,deactivate:Rt,reset:Rt,t:()=>s};const{delay:u=0,css:d,tick:v,easing:m=Du}=e;var h=[];if(a&&r===void 0&&(v&&v(0,1),d)){var g=Qa(d(0,1));h.push(g,g)}var p=()=>1-s,w=t.animate(h,{duration:u,fill:"forwards"});return w.onfinish=()=>{w.cancel();var b=(r==null?void 0:r.t())??1-s;r==null||r.abort();var _=s-b,A=e.duration*Math.abs(_),E=[];if(A>0){var k=!1;if(d)for(var S=Math.ceil(A/16.666666666666668),M=0;M<=S;M+=1){var L=b+_*m(M/S),q=Qa(d(L,1-L));E.push(q),k||(k=q.overflow==="hidden")}k&&(t.style.overflow="hidden"),p=()=>{var T=w.currentTime;return b+_*m(T/A)},v&&qu(()=>{if(w.playState!=="running")return!1;var T=p();return v(T,1-T),!0})}w=t.animate(E,{duration:A,fill:"forwards"}),w.onfinish=()=>{p=()=>s,v==null||v(s,1-s),o()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=Rt)},deactivate:()=>{o=Rt},reset:()=>{s===0&&(v==null||v(1,0))},t:()=>p()}}function ei(t,e,r=e){var s=new WeakSet;cu(t,"input",async o=>{var a=o?t.defaultValue:t.value;if(a=Gl(t)?Xl(a):a,r(a),Ge!==null&&s.add(Ge),await gu(),a!==(a=e())){var c=t.selectionStart,f=t.selectionEnd,u=t.value.length;if(t.value=a??"",f!==null){var d=t.value.length;c===f&&f===u&&d>u?(t.selectionStart=d,t.selectionEnd=d):(t.selectionStart=c,t.selectionEnd=Math.min(f,d))}}}),hr(e)==null&&t.value&&(r(Gl(t)?Xl(t.value):t.value),Ge!==null&&s.add(Ge)),ql(()=>{var o=e();if(t===document.activeElement){var a=Ks??Ge;if(s.has(a))return}Gl(t)&&o===Xl(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Gl(t){var e=t.type;return e==="number"||e==="range"}function Xl(t){return t===""?null:+t}const _l=class _l{constructor(e){Ne(this,wl);Ne(this,fn,new WeakMap);Ne(this,is);Ne(this,Bs);xe(this,Bs,e)}observe(e,r){var s=H(this,fn).get(e)||new Set;return s.add(r),H(this,fn).set(e,s),ot(this,wl,fc).call(this).observe(e,H(this,Bs)),()=>{var o=H(this,fn).get(e);o.delete(r),o.size===0&&(H(this,fn).delete(e),H(this,is).unobserve(e))}}};fn=new WeakMap,is=new WeakMap,Bs=new WeakMap,wl=new WeakSet,fc=function(){return H(this,is)??xe(this,is,new ResizeObserver(e=>{for(var r of e){_l.entries.set(r.target,r);for(var s of H(this,fn).get(r.target)||[])s(r)}}))},Dt(_l,"entries",new WeakMap);let Kl=_l;var Bu=new Kl({box:"border-box"});function ti(t,e,r){var s=Bu.observe(t,()=>r(t[e]));Fl(()=>(hr(()=>r(t[e])),s))}function ri(t,e){return t===e||(t==null?void 0:t[Kr])===e}function En(t={},e,r,s){return Fl(()=>{var o,a;return ql(()=>{o=a,a=[],hr(()=>{t!==r(...a)&&(e(t,...a),o&&ri(r(...o),t)&&e(null,...o))})}),()=>{Jr(()=>{a&&ri(r(...a),t)&&e(null,...a)})}}),t}function Vu(t=!1){const e=tt,r=e.l.u;if(!r)return;let s=()=>bu(e.s);if(t){let o=0,a={};const c=ys(()=>{let f=!1;const u=e.s;for(const d in u)u[d]!==a[d]&&(a[d]=u[d],f=!0);return f&&o++,o});s=()=>l(c)}r.b.length&&Qs(()=>{ni(e,s),El(r.b)}),ge(()=>{const o=hr(()=>r.m.map(gc));return()=>{for(const a of o)typeof a=="function"&&a()}}),r.a.length&&ge(()=>{ni(e,s),El(r.a)})}function ni(t,e){if(t.l.s)for(const r of t.l.s)l(r);e()}let rl=!1;function Yu(t){var e=rl;try{return rl=!1,[t(),rl]}finally{rl=e}}const Wu={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function An(t,e,r){return new Proxy({props:t,exclude:e},Wu)}const Uu={get(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Yn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,r){let s=t.props.length;for(;s--;){let o=t.props[s];Yn(o)&&(o=o());const a=Gr(o,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Yn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const o=Gr(s,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Kr||e===ta)return!1;for(let r of t.props)if(Yn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Yn(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function or(...t){return new Proxy({props:t},Uu)}function D(t,e,r,s){var E;var o=!Hn||(r&Tc)!==0,a=(r&Lc)!==0,c=(r&zc)!==0,f=s,u=!0,d=()=>(u&&(u=!1,f=c?hr(s):s),f),v;if(a){var m=Kr in t||ta in t;v=((E=Gr(t,e))==null?void 0:E.set)??(m&&e in t?k=>t[e]=k:void 0)}var h,g=!1;a?[h,g]=Yu(()=>t[e]):h=t[e],h===void 0&&s!==void 0&&(h=d(),v&&(o&&kc(),v(h)));var p;if(o?p=()=>{var k=t[e];return k===void 0?d():(u=!0,k)}:p=()=>{var k=t[e];return k!==void 0&&(f=void 0),k===void 0?f:k},o&&(r&Pc)===0)return p;if(v){var w=t.$$legacy;return(function(k,S){return arguments.length>0?((!o||!S||w||g)&&v(S?p():k),k):p()})}var b=!1,_=((r&jc)!==0?ys:Pl)(()=>(b=!1,p()));a&&l(_);var A=Ue;return(function(k,S){if(arguments.length>0){const M=S?l(_):o&&a?Me(k):k;return O(_,M),b=!0,f!==void 0&&(f=M),k}return wn&&b||(A.f&Ir)!==0?_.v:l(_)})}function Hu(t){tt===null&&ra(),Hn&&tt.l!==null?Gu(tt).m.push(t):ge(()=>{const e=hr(t);if(typeof e=="function")return e})}function Gu(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Xu="5";typeof window<"u"&&((ac=window.__svelte??(window.__svelte={})).v??(ac.v=new Set)).add(Xu),Yc();function Ku(t){return js(t,.5)}function Ju(t){return js(t,.75)-js(t,.25)}function js(t,e){if(Re(t))return js(t.v,e);if(Re(e))return js(t,e.v);const r=t.length;if(Array.isArray(e)||(e=[e]),!oo(e[0])||Yr(e)<0||Cr(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(c,f){const u=(r-1)*f+1,d=Math.floor(u),v=Math.ceil(u);return c[d-1]+(c[v-1]-c[d-1])*(u-Math.floor(u))}const o=uo(t),a=e.map(c=>s(o,c));return e.length==1?a[0]:ct(a)}function si(t,e){Re(t)&&si(t.v,e);const r=$r(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const s=(r[1]-r[0])/e;return Be.seq(r[0],r[1],s)}function li(t){if(Re(t))return li(t.v);const e=new Be.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Be(e)}function Jl(t,e){if(Re(t))return Jl(t.v,e);e===void 0&&(e=.1);const r=$r(t),s=(r[1]-r[0])*e;return[r[0]-s,r[1]+s]}function $r(t){if(Re(t))return $r(t.v);let e=t[0],r=t[0];for(let s=1;s<t.length;s++)t[s]<e&&(e=t[s]),t[s]>r&&(r=t[s]);return[e,r]}function nl(t,e){return Re(t)?nl(t.v,e):Math.sqrt(sl(t,e))}function sl(t,e){if(e===void 0&&(e=!1),Re(t))return sl(t.v);const r=Sn(t);let s=0;for(let o=0;o<t.length;o++){const a=t[o]-r;s=s+a*a}return s/(e?t.length:t.length-1)}function Sn(t){return Re(t)?Sn(t.v):oi(t)/t.length}function oi(t){if(Re(t))return oi(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function ai(t){if(Re(t))return ai(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Yr(t){return Re(t)||pr(t)?t.v[Zl(t.v)-1]:t[Zl(t)-1]}function Zl(t){if(Re(t)||pr(t))return Zl(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]<r&&(e=s,r=t[s-1]);return e}function Cr(t){return Re(t)||pr(t)?t.v[Ql(t.v)-1]:t[Ql(t)-1]}function Ql(t){if(Re(t)||pr(t))return Ql(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]>r&&(e=s,r=t[s-1]);return e}const $l=30,Zu=1e-7,Qu=1e-7,ii=1e-13,ci=1e3,$u=100;function ui(t,e,r,s,o){s===void 0&&(s=ci),r===void 0&&(r=ii),o===void 0&&(o=$u);let a=r,c=s,f=(c-a)/o;for(let u=0;u<o;u++){let d,v;for(let g=0;g<o;g++){d=a+g*f,v=a+(g+1)*f;const p=e(d),w=e(v);if(p<=t&&w>=t)break}const m=(d+v)/2,h=e(m);if(Math.abs(h-t)<Zu||(a=d,c=v,f=(c-a)/o,f/c<Qu))return m}return(a+c)/2}function fi(t,e=0,r=1){let s=Be.zeros(t);for(let o=0;o<t;o++)s.v[o]=e+Math.random()*(r-e);return s}function di(t,e=0,r=1){let s=Be.zeros(t);for(let o=0;o<t;o++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[o]=a*Math.sin(c)*r+e}return s}function eo(t,e=0,r=1){if(Re(t))return t.apply(o=>eo(o,e,r));const s=1/(Math.sqrt(2)*r);return .5*(1+tf((t-e)*s))}function to(t,e=0,r=1){if(Re(t))return t.apply(V=>to(V,e,r));if(e!==0||r!==1)return to(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const s=.425,o=5,a=.180625,c=1.6,f=3.3871327179,u=5.0434271938*10,d=1.5929113202*100,v=5.910937472*10,m=1.7895169469*10,h=7.8757757664*10,g=6.71875636*10,p=1.4234372777,w=2.75681539,b=1.3067284816,_=1.7023821103*.1,A=7.370016425*.1,E=1.2021132975*.1,k=6.657905115,S=3.081226386,M=4.2868294337*.1,L=1.7337203997*.01,q=2.4197894225*.1,T=1.2258202635*.01,j=t-.5;let y;if(Math.abs(j)<=s)return y=a-j*j,j*(((v*y+d)*y+u)*y+f)/(((g*y+h)*y+m)*y+1);y=j<0?t:1-t,y=Math.sqrt(-Math.log(y));let z;return y<=o?(y=y-c,z=(((_*y+b)*y+w)*y+p)/((E*y+A)*y+1)):(y=y-o,z=((L*y+M)*y+S+k)/((T*y+q)*y+1)),j<0?-z:z}function ro(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return ro(ct(t),e,r);if(Re(t))return t.apply(s=>ro(s,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return ll(t*e,e)}return e==Number.POSITIVE_INFINITY?1-ll(r/t,r):e*t>r?1-ol(r/(r+e*t),r/2,e/2):ol(e*t/(r+e*t),e/2,r/2)}function vi(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let s=ci,o=ii;if(t>.9997&&r===1?(s=1e7,o=6e5,t=.9997):t>.9992&&r===1?(s=1e7,o=6e5):t>.997&&r===1?(s=1e6,o=45e3):t>.992&&r===1?(s=1e5,o=5e3):t>.97&&r===1&&(s=1e4,o=400),Array.isArray(t))return vi(ct(t),e,r);const a=f=>ro(f,e,r);function c(f,u,d){return f===0?0:f===1?Inf:u===0?NaN:d===0?NaN:ui(f,a,o,s)}return Re(t)?t.apply(c,e,r):c(t,e,r)}function ll(t,e){if(Array.isArray(t))return ll(ct(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(s);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const d=u/e,v=Math.pow(d,1/6)-.5*Math.pow(d,1/3)+1/3*Math.pow(d,1/2);return eo(v,r,o)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:ef(u/2,e/2)/Ts(e/2)}const f=e>$l?a:c;return Re(t)?t.apply(f):f(t)}function Cn(t,e){if(Array.isArray(t))return Cn(ct(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(s);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const d=to(u,r,o),v=Math.pow(Math.sqrt(36*d*d-30*d+13)/4+(3*d-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:ui(u,v=>ll(v,e),0,$l*10)}const f=e>$l?a:c;return Re(t)?t.apply(f):f(t)}function ol(t,e,r){if(Array.isArray(t))return ol(ct(t),e,r);if(Re(t))return t.apply(o=>ol(o,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const s=.5-t+.5;return hf(e,r,t,s)}function Ts(t){if(Re(t))return t.apply(Ts);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+Ts(1-t));t=t-1;let r=.9999999999998099;for(let o=0;o<e.length;o++)r=r+e[o]/(t+o+1);const s=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*r}function ef(t,e){let o=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/Ts(e+a+1);if(isNaN(c)||c<1e-18)break;o+=c}return Math.pow(t,e)*Ts(e)*Math.exp(-t)*o}function tf(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,s=-.284496736,o=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*t),d=1-((((c*u+a)*u+o)*u+s)*u+r)*u*Math.exp(-t*t);return e*d}function hi(t,e){const r=.564189583547756,s=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],f=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let d,v,m,h,g=Math.abs(e);if(g<=.5)return v=e*e,h=(((s[0]*v+s[1])*v+s[2])*v+s[3])*v+s[4]+1,m=((o[0]*v+o[1])*v+o[2])*v+1,d=.5-e*(h/m)+.5,d=Math.exp(v)*d,d;if(g<=4)h=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],m=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],d=h/m;else{if(e<=-5.6)return d=2,d=Math.exp(e*e)*2,d;v=1/(e*e),h=(((f[0]*v+f[1])*v+f[2])*v+f[3])*v+f[4],m=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+1,d=(r-v*h/m)/g}return e<0&&(d=Math.exp(e*e)*2-d),d}function mi(t,e){let r=t+e-2;return r<=.25?ar(r+1):r<=1.25?ar(r)+tn(r):ar(r-1)+Math.log(r*(r+1))}function al(t,e){const r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,d,v,m,h,g,p,w,b,_,A,E,k,S,M;return v=Math.min(t,e),m=Math.max(t,e),g=v/m,h=g/(g+1),b=1/(g+1),E=b*b,_=b+E+1,A=b+E*_+1,k=b+E*A+1,S=b+E*k+1,M=b+E*S+1,d=1/m,p=d*d,w=((((f*M*p+c*S)*p+a*k)*p+o*A)*p+s*_)*p+r,w*=h/m,d=1/v,p=d*d,u=(((((f*p+c)*p+a)*p+o)*p+s)*p+r)/v+w,u}function it(t){let e,r,s,o,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],f=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(u*r+f)*r+1,s=a/o,e>0?r*s/t:t*(s+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],f=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(((f[4]*r+f[3])*r+f[2])*r+f[1])*r+1,s=a/o,e>0?r/t*(s-.5-.5):t*s}}}function rf(t,e,r){let s,o,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=o=0,s=0;for(let f=1;f<=r;f++)a=o,o=s,s=c*o-a+e[r-f];return(s-a)*.5}function gi(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,s=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*rf(t/.375,e,r));if(t<s)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function en(t,e){const r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,d,v,m,h,g,p,w,b,_,A,E,k,S;return t>e?(v=e/t,u=1/(v+1),w=v/(v+1),d=t+(e-.5)):(v=t/e,u=v/(v+1),w=1/(v+1),d=e+(t-.5)),A=w*w,b=w+A+1,_=w+A*b+1,E=w+A*_+1,k=w+A*E+1,S=w+A*k+1,m=1/(e*e),p=((((f*S*m+c*k)*m+a*E)*m+o*_)*m+s*b)*m+r,p*=u/e,h=d*tn(t/e),g=t*(Math.log(e)-1),h>g?p-g-h:p-h-g}function ar(t){if(t<.6){const p=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*p}else{const e=.422784335098467,r=.848044614534529,s=.565221050691933,o=.156513060486551,a=.017050248402265,c=.000497958207639485,f=1.24313399877507,u=.548042109832463,d=.10155218743983,v=.00713309612391,m=.000116165475989616,h=t-.5-.5,g=(((((c*h+a)*h+o)*h+s)*h+r)*h+e)/(((((m*h+v)*h+d)*h+u)*h+f)*h+1);return h*g}}function mr(t){const e=.418938533204673,r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;if(t<=.8)return ar(t)-Math.log(t);if(t<=2.25)return ar(t-.5-.5);if(t<10){let v=Math.round(t-1.25),m=t,h=1;for(let g=1;g<=v;++g)m+=-1,h*=m;return ar(m-1)+Math.log(h)}let u=1/(t*t),d=(((((f*u+c)*u+a)*u+o)*u+s)*u+r)/t;return e+d+(t-.5)*(Math.log(t)-1)}function no(t,e){const r=.918938533204673;let s=Math.min(t,e),o=Math.max(t,e);function a(c,f,u){let d=Math.round(u-1),v=1;for(let m=1;m<=d;++m)u+=-1,v*=u/(f+u);return c+Math.log(v)+(mr(f)+(mr(u)-mi(f,u)))}if(s<8){if(s<1)return o<8?mr(s)+(mr(o)-mr(s+o)):mr(s)+en(s,o);let c;if(s<2)return o<=2?mr(s)+mr(o)-mi(s,o):o<8?(c=0,a(c,s,o)):mr(s)+en(s,o);if(o<=1e3){let f=Math.round(s-1);c=1;for(let u=1;u<=f;++u){s+=-1;let d=s/o;c*=d/(d+1)}return c=Math.log(c),o>=8?c+mr(s)+en(s,o):a(c,s,o)}else{let f=Math.round(s-1);c=1;for(let u=1;u<=f;++u)s+=-1,c*=s/(s/o+1);return log(c)-f*log(o)+(mr(s)+en(s,o))}}else{let c=al(s,o),f=s/o,u=-(s-.5)*Math.log(f/(f+1)),d=o*tn(f);return u>d?Math.log(o)*-.5+r+c-d-u:Math.log(o)*-.5+r+c-u-d}}function pi(t){return(t==0?1024:-300)*.69314718055995*.99999}function $n(t){const e=.0566749439387324,r=.0456512608815524,s=.333333333333333,o=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,f=.354508718369557;let u,d,v,m,h;return t<-.39||t>.57?(m=t+.5+.5,t-Math.log(m)):(t<-.18?(u=t+.3,u/=.7,h=e-u*.3):t>.18?(u=t*.75-.25,h=r+u/3):(u=t,h=0),d=u/(u+2),v=d*d,m=((a*v+o)*v+s)/((f*v+c)*v+1),v*2*(1/(1-d)-d*m)+h)}function tn(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,s=-.0178874546012214,o=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let f=t/(t+2),u=f*f,d=(((s*u+r)*u+e)*u+1)/(((c*u+a)*u+o)*u+1);return f*2*d}function nf(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,d,v,m,h;if(v=Math.abs(t),v<=.5)return u=t*t,h=(((r[0]*u+r[1])*u+r[2])*u+r[3])*u+r[4]+1,m=((s[0]*u+s[1])*u+s[2])*u+1,t*(h/m);if(v<=4){h=((((((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4])*v+o[5])*v+o[6])*v+o[7],m=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7];let p=.5-Math.exp(-t*t)*h/m+.5;return t<0?-p:p}if(v>=5.8)return t>0?1:-1;d=t*t,u=1/d,h=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],m=(((f[0]*u+f[1])*u+f[2])*u+f[3])*u+1,u=(e-h/(d*m))/v;let g=.5-Math.exp(-d)*u+.5;return t<0?-g:g}function sf(t){const e=914041914819518e-24,r=.0238082361044469,s=-.499999999085958,o=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+o)*t+s)*t+1));{let f=Math.exp(t);return t>0?f*(.5-1/f+.5):f-.5-.5}}function Ps(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function lf(t){const e=.785398163397448,r=1.4616321449683622,s=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],o=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let f,u,d,v,m,h,g,p,w,b,_,A,E;if(_=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),_>v&&(_=v),E=1e-9,p=0,t<.5){if(fabs(t)<=E){if(t==0)return 0;p=-1/t}else{if(m=-t,w=e,m<=0&&(m=-m,w=-w),m>=_)return 0;if(d=Math.round(m),m-=d,d=Math.round(m*4),m=(m-d*.25)*4,u=d/2,u+u!=d&&(m=1-m),h=e*m,f=u/2,f+f!=u&&(w=-w),u=(d+1)/2,f=u/2,f+=f,f==u){if(h==0)return 0;p=w*(cos(h)/sin(h)*4)}else p=w*(sin(h)/cos(h)*4)}t=1-t}if(t<=3){g=t,A=s[0]*t;for(let k=1;k<=5;++k)g=(g+o[k-1])*t,A=(A+s[k])*t;return g=(A+s[6])/(g+o[5]),b=t-r,g*b+p}if(t<_){m=1/(t*t),g=m,A=a[0]*m;for(let k=1;k<=3;++k)g=(g+c[k-1])*m,A=(A+a[k])*m;p=A/(g+c[3])-.5/t+p}return p+log(t)}function of(t,e,r,s){let o,a,c,f,u,d;if(t>s*.001){if(f=t*Math.log(r),f<Math.exparg(1))return 0;o=Math.exp(f)}else o=1;for(o*=e/t,d=s/t,u=t+1,f=r,c=f/u,u+=1,f=r*f,a=f/u,c+=a;Math.abs(r)>d;)u+=1,f=r*f,a=f/u,c+=a;return o*=t*c+1,o}function af(t,e,r,s){const o=.577215664901533;let a,c,f,u,d,v,m=e*r;for(d=r-m,c=e*s<=.02?Math.log(r)+lf(e)+o+d:Math.log(m)+o+d,a=s*5*Math.abs(c),f=1,u=0,f+=1,d*=r-m/f,v=d/f,u+=v;Math.abs(v)>a;)f+=1,d*=r-m/f,v=d/f,u+=v;return-t*(c+u)}function so(t,e,r,s){let o,a,c,f,u,d,v,m,h;if(r==0)return 0;if(v=Math.min(t,e),v>=1)d=t*Math.log(r)-no(t,e),a=Math.exp(d)/t;else if(m=Math.max(t,e),m<8)if(m<=1){if(a=Math.pow(r,t),a==0)return a;h=t+e,h>1?(u=t+e-1,d=(it(u)+1)/h):d=it(h)+1,c=(it(t)+1)*(it(e)+1)/d,a*=c*(e/h)}else{if(u=ar(v),o=Math.round(m-1),o>=1){c=1;for(let _=1;_<=o;++_)m+=-1,c*=m/(v+m);u+=Math.log(c)}d=t*Math.log(r)-u,m+=-1,h=v+m,h>1?(u=v+m-1,f=(it(u)+1)/h):f=it(h)+1,a=Math.exp(d)*(v/t)*(it(m)+1)/f}else u=ar(v)+en(v,m),d=t*Math.log(r)-u,a=v/t*Math.exp(d);if(a==0||t<=s*.1)return a;let g=s/t,p=0,w=0,b;for(c=1,p+=1,c*=(.5-e/p+.5)*r,b=c/(t+p),w+=b;p<1e7&&Math.abs(b)>g;)p+=1,c*=(.5-e/p+.5)*r,b=c/(t+p),w+=b;return t*w>-1?a*=t*w+1:a=0,a}function il(t,e,r,s,o,a){let c,f,u,d,v,m=t+e,h=t+1;if(o>1&&t>=1&&m>=h*1.1?(u=Math.round(Math.abs(pi(1))),f=Math.round(pi(0)),u>f&&(u=f),d=Math.exp(-u)):(u=0,d=1),c=ff(u,t,e,r,s)/t,o==1||c==0)return c;let g=o-1,p=d;if(f=0,e>1){if(s>1e-4){let w=(e-1)*r/s-t;w>=1&&(f=w<g?Math.round(w):g)}else f=g;for(let w=0;w<f;++w)v=w,d*=(m+v)/(h+v)*r,p+=d}for(let w=f;w<g&&(v=w,d*=(m+v)/(h+v)*r,p+=d,!(d<=a*p));++w);return c*=p,c}function cf(t,e,r,s,o,a){let c,f,u,d,v,m,h,g,p,w,b,_,A,E,k,S,M,L,q;if(!Number.isFinite(o)||(q=uf(t,e,r,s),Number.isNaN(q)))return Number.NaN;if(q==0)return 0;for(c=o+1,p=e/t,w=1/t+1,E=s+1,u=0,d=1,m=t+1,_=0,A=1,k=1,S=c/w,v=w/c,u+=1,h=u/t,g=u*(e-u)*r,f=t/m,L=d*(d+p)*f*f*(g*r),f=(h+1)/(w+h+h),M=u+g/m+f*(c+u*E),d=h+1,m+=2,h=L*_+M*k,_=k,k=h,h=L*A+M*S,A=S,S=h,b=v,v=k/S,_/=S,A/=S,k=v,S=1;u<1e4&&(u+=1,h=u/t,g=u*(e-u)*r,f=t/m,L=d*(d+p)*f*f*(g*r),f=(h+1)/(w+h+h),M=u+g/m+f*(c+u*E),d=h+1,m+=2,h=L*_+M*k,_=k,k=h,h=L*A+M*S,A=S,S=h,b=v,v=k/S,!(Math.abs(v-b)<=a*v));)_/=S,A/=S,k=v,S=1;return q*v}function uf(t,e,r,s){const o=.398942280401433;let a,c,f,u,d,v,m,h,g;if(r==0||s==0)return 0;if(m=Math.min(t,e),m<8){let p,w;if(r<=.375?(p=Math.log(r),w=tn(-r)):s>.375?(p=Math.log(r),w=Math.log(s)):(p=tn(-s),w=Math.log(s)),v=t*p+e*w,m>=1)return v-=no(t,e),Math.exp(v);if(h=Math.max(t,e),h>=8)return u=ar(m)+en(m,h),m*Math.exp(v-u);if(h<=1){let _=Math.exp(v);return _==0?0:(g=t+e,g>1?(u=t+e-1,v=(it(u)+1)/g):v=it(g)+1,c=(it(t)+1)*(it(e)+1)/v,_*(m*c)/(m/h+1))}if(u=ar(m),a=Math.round(h-1),a>=1){c=1;for(let _=1;_<=a;++_)h+=-1,c*=h/(m+h);u=Math.log(c)+u}v-=u,h+=-1,g=m+h;let b;return g>1?(u=m+h-1,b=(it(u)+1)/g):b=it(g)+1,m*Math.exp(v)*(it(h)+1)/b}else{let p,w,b,_;return t<=e?(p=t/e,w=p/(p+1),b=1/(p+1),_=t-(t+e)*r):(p=e/t,w=1/(p+1),b=p/(p+1),_=(t+e)*s-e),f=-_/t,u=Math.abs(f)>.6?f-Math.log(r/w):$n(f),f=_/e,d=Math.abs(f)<=.6?$n(f):f-Math.log(s/b),v=Math.exp(-(t*u+e*d)),o*Math.sqrt(e*w)*v*Math.exp(-al(t,e))}}function ff(t,e,r,s,o){const a=.398942280401433;let c,f,u,d,v,m,h,g;if(m=Math.min(e,r),m<8){let p,w;if(s<=.375?(p=Math.log(s),w=tn(-s)):o>.375?(p=Math.log(s),w=Math.log(o)):(p=tn(-o),w=Math.log(o)),v=e*p+r*w,m>=1)return v-=no(e,r),Ps(t,v);if(h=Math.max(e,r),h>=8)return u=ar(m)+en(m,h),m*Ps(t,v-u);if(h<=1){let _=Ps(t,v);return _==0?_:(g=e+r,g>1?(u=e+r-1,v=(it(u)+1)/g):v=it(g)+1,c=(it(e)+1)*(it(r)+1)/v,_*(m*c)/(m/h+1))}u=ar(m);let b=Math.round(h-1);if(b>=1){c=1;for(let _=1;_<=b;++_)h+=-1,c*=h/(m+h);u+=Math.log(c)}return v-=u,h+=-1,g=m+h,f=g>1?(it(g-1)+1)/g:it(g)+1,m*Ps(t,v)*(it(h)+1)/f}else{let p,w,b,_;e>r?(p=r/e,w=1/(p+1),b=p/(p+1),_=(e+r)*o-r):(p=e/r,w=p/(p+1),b=1/(p+1),_=e-(e+r)*s),-gi(r/e);let A=-_/e;return u=Math.abs(A)>.6?A-Math.log(s/w):$n(A),A=_/r,d=Math.abs(A)>.6?A-Math.log(o/b):$n(A),v=Ps(t,-(e*u+r*d)),a*Math.sqrt(r*w)*v*Math.exp(-al(e,r))}}function lo(t,e,r,s,o,a){let f=Array(30),u=Array(30),d=e-.5-.5,v=t+d*.5,m=s>.375?Math.log(r):tn(-s),h=-v*m;if(e*h==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+gi(it(e))+e*Math.log(h)+v*m,p=g-(en(e,t)+e*Math.log(v)),w=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let b=w==0,_=o==0?0:Math.exp(Math.log(o)-p),A=df(e,h,g,a),E=.25/(v*v),k=m*.25*m,S=A,M=S,L=1,q=1,T=0;for(let j=1;j<=30;++j){let y=e+T;S=(y*(y+1)*S+(h+y+1)*L)*E,T+=2,L*=k,q/=T*(T+1);let z=j-1;f[z]=q;let V=0;if(j>1){let I=e-j;for(let W=1;W<=z;++W)V+=I*f[W-1]*u[z-W],I+=e}u[z]=d*q+V/j;let B=u[z]*S;if(M+=B,M<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(B)<=a*(M+_))break}return o+=b?Math.exp(p+Math.log(M)):w*M,o}function df(t,e,r,s){const o=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-nf(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return hi(1,a)/a*o}}else if(e<1.1){let a=3,c=e,f=e/(t+3),u=s*.1/(t+1),d;for(a+=1,c*=-(e/a),d=c/(t+a),f+=d;Math.abs(d)>u;)a+=1,c*=-(e/a),d=c/(t+a),f+=d;let v=t*e*((f/6-.5/(t+2))*e+1/(t+1)),m=t*Math.log(e),h=it(t),g=h+1;if(e>=.25&&t<e/2.59||m>-.13394){let p=sf(m),w=((p+.5+.5)*v-p)*g-h;return w<=0?0:w*Math.exp(-r)}else return(.5-Math.exp(m)*g*(.5-v+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,f=e,u=e+(1-t),d=1,v,m;a=e*c+d*a,f=e*u+d*f,v=a/f,d+=1;let h=d-t;for(c=a+h*c,u=f+h*u,m=c/u;Math.abs(m-v)>=s*m;)a=e*c+d*a,f=e*u+d*f,v=a/f,d+=1,h=d-t,c=a+h*c,u=f+h*u,m=c/u;return m}}function vf(t,e,r,s){const a=1.12837916709551,c=.353553390593274,f=Array(21),u=Array(21),d=Array(21),v=Array(21);let m=t*$n(-r/t)+e*$n(r/e),h;if(h=Math.exp(-m),h==0)return 0;let g=Math.sqrt(m),p=g/c*.5,w=m+m,b,_,A,E;t<e?(b=t/e,_=1/(b+1),A=(e-t)/e,E=1/Math.sqrt(t*(b+1))):(b=e/t,_=1/(b+1),A=(e-t)/t,E=1/Math.sqrt(e*(b+1))),f[0]=A*.6666666666666666,d[0]=f[0]*-.5,v[0]=-d[0];let k=.5/a*hi(1,g),S=c,M=k+v[0]*E*S,L=1,q=b*b,T=1,j=E,y=p,z=w;for(let B=2;B<=20;B+=2){T*=q,f[B-1]=_*2*(b*T+1)/(B+2);let I=B+1;L+=T,f[I-1]=A*2*L/(B+3);for(let te=B;te<=I;++te){let Z=(te+1)*-.5;u[0]=Z*f[0];for(let se=2;se<=te;++se){let he=0;for(let fe=1;fe<=se-1;++fe){let ee=se-fe;he+=(fe*Z-ee)*f[fe-1]*u[ee-1]}u[se-1]=Z*f[se-1]+he/se}d[te-1]=u[te-1]/(te+1);let ne=0;for(let se=1;se<=te-1;++se)ne+=v[te-se-1]*d[se-1];v[te-1]=-(ne+d[te-1])}k=c*y+(B-1)*k,S=c*z+B*S,y=w*y,z=w*z,j*=E;let W=v[B-1]*j*k;j*=E;let oe=v[I-1]*j*S;if(M+=W+oe,Math.abs(W)+Math.abs(oe)<=s*M)break}let V=Math.exp(-al(t,e));return a*h*V*M}function hf(t,e,r,s){let a=0,c=0;function f(b,_,A,E){const k=so(b,_,A,1e-15);return E?.5-k+.5:k}function u(b,_,A,E){const k=so(_,b,A,1e-15);return E?k:.5-k+.5}function d(b,_,A,E,k,S){const M=cf(b,_,A,E,k,15000000000000002e-30);return S?.5-M+.5:M}function v(b,_,A,E,k){let S=Math.round(_);_=_-S,_===0&&(S=S-1,_=1);let M=il(_,b,E,A,S,1e-15);return A<=.7?(M=M+so(b,_,A,1e-15),k?.5-M+.5:M):(b<=15&&(S=20,M=M+il(b,_,A,E,S,1e-15),b=b+S),M=lo(b,_,A,E,M,15*1e-15),k?.5-M+.5:M)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let m,h,g,p,w;if(t<=1||e<=1){if(r>.5?(w=!0,m=e,g=s,h=t,p=r):(w=!1,m=t,g=r,h=e,p=s),h<Math.min(1e-15,1e-15*m))return a=of(m,h,g,1e-15),w?.5-a+.5:a;if(m<Math.min(1e-15,1e-15*h)&&h*g<=1)return c=af(m,h,g,1e-15),w?c:.5-c+.5;if(Math.max(m,h)>1){if(h<=1)return f(m,h,g,w);if(g>=.29)return u(m,h,p,w);if(g<.1&&Math.pow(g*h,m)<=.7)return f(m,h,g,w)}else{if(m>=Math.min(.2,h)||Math.pow(g,m)<=.9)return f(m,h,g,w);if(g>=.3)return u(m,h,p,w)}let b=!1;return Math.max(m,h)>1&&h>15?c=0:(b=!0,c=il(h,m,p,g,20,1e-15),h+=20),c=lo(h,m,p,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(b?c=il(h-n,m,p,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=lo(h,m,p,g,c,15*1e-15),a=-expm1(c),w?.5-a+.5:a):(a=.5-c+.5,w?.5-a+.5:a)}else{let b=Number.isFinite(t+e)?t>e?(t+e)*s-e:t-(t+e)*r:t*s-e*r;const _=b<0;let A,E,k,S;if(_?(b=-b,A=e,k=s,E=t,S=r):(A=t,k=r,E=e,S=s),E<40)return E*k<=.7?f(A,E,k,_):v(A,E,k,S,_);if(A>E){if(E<=100||b>E*.03)return d(A,E,k,S,b,_)}else{if(A<=100)return d(A,E,k,S,b,_);if(b>A*.03)return d(A,E,k,S,b,_)}return a=vf(A,E,b,1e-15*100),_?.5-a+.5:a}}function bi(t){const e=t.nrows,r=t.ncols;if(e<r){const c=bi(t.subset([],qt.seq(1,e)));return{Q:c.Q,R:gf(c.Q,t)}}let s=tr.eye(e),o=t.t();for(let c=1;c<=r;c++)for(let f=e;f>=c+1;f--){const u=o.v.subarray((f-2)*r,f*r),d=s.v.subarray((f-2)*e,f*e),v=u.slice(),m=d.slice(),[h,g,p]=mf(v[c-1],v[c-1+r]);for(let w=0;w<r;w++)u[w]=v[w]*h+v[w+r]*g,u[w+r]=v[w]*-g+v[w+r]*h,d[w]=m[w]*h+m[w+e]*g,d[w+e]=m[w]*-g+m[w+e]*h;for(let w=r;w<e;w++)d[w]=m[w]*h+m[w+e]*g,d[w+e]=m[w]*-g+m[w+e]*h}const a=qt.seq(1,r);return{Q:e===r?s:s.subset([],a),R:e===r?o.t():o.subset([],a).t()}}function mf(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),f=1/c;return[f,a*f,t*c]}const r=t/e,s=Math.sqrt(1+r*r),o=1/s;return[r*o,o,e*s]}function oo(t){return typeof t=="number"}function gf(t,e){if(e===void 0&&(e=t),!gr(t)||!gr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,s=t.ncols,o=e.nrows,a=e.ncols,c=s,f=a,u=r,d=new Float64Array(c*f);for(let v=0;v<f;v++){const m=e.v.subarray(v*o,(v+1)*o),h=d.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const p=t.v.subarray(g*r,(g+1)*r);let w=0;for(let b=0;b<u;b++)w+=p[b]*m[b];h[g]=w}}return new tr(d,c,f)}function wi(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Be(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new tr(t.v,e,r)}function gr(t){return t&&t.constructor===tr}function pf(t,e,r){return new tr(new Float64Array(t),e,r)}const ze=class ze{constructor(e,r,s){if(!ArrayBuffer.isView(e)||e.constructor!==ze.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return ze.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=ze.eye(e),o=ze.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],f=e-1;for(let u=0;u<e;u++)o.v[f*e+u]=s.v[f*e+u]/c;for(let u=e-2;u>=0;u--){let d=s.getcolumn(u+1);const v=a.getcolref(u+1);for(let m=u+1;m<e;m++){const h=o.getcolumn(m+1);d=d.subtract(h.mult(v[m]))}o.v.set(d.divide(v[u]).v,u*e)}return o.t()}if(this.islowertriangular()){const s=this.diag();if(ai(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=ze.eye(e),a=ze.eye(e),c=this.t(),f=0,u=c.v[0];for(let d=0;d<e;d++)a.v[f*e+d]=o.v[f*e+d]/u;for(let d=1;d<e;d++){let v=o.getcolumn(d+1);const m=c.getcolref(d+1);for(let h=0;h<d;h++){const g=a.getcolumn(h+1);v=v.subtract(g.mult(m[h]))}a.v.set(v.divide(m[d]).v,d*e)}return a.t()}const r=bi(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>ze.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>ze.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let s=0;s<e;s++)r[s]=this.getcolref(s+1)[s];return new Be(r)}t(){const e=this.nrows,r=this.ncols,s=new ze.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const a=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*r+o]=a[c]}return new ze(s,r,e)}for(let o=0;o<this.nrows;o++){const a=s.subarray(o*r,(o+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+o]}return new ze(s,r,e)}dot(e){if(Re(e))return new ze(co(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(gr(e))return new ze(co(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,s){if(gr(e))return new ze(ao(this.v,e.v,r),this.nrows,this.ncols);if(oo(e))return new ze(io(this.v,e,r),this.nrows,this.ncols);if(!Re(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const o=new ze.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(io(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new ze(o,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const o=new ze.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(ao(this.getcolref(a+1),e.v,r),a*this.nrows);return new ze(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e,r){if(r===void 0&&(r=2),r==2){const s=this.ncols,o=new ze.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=e(this.getcolref(a+1));return new Be(o)}if(r==1)return this.t().apply(e,2);if(r==0){const s=this.v.length,o=new ze.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=e(this.v[a]);return new ze(o,this.nrows,this.ncols)}}replace(e,r,s){typeof r=="number"&&(r=[r]),r.length===0&&(r=qt.seq(1,this.nrows)),pr(r)||(r=br(r)),typeof s=="number"&&(s=[s]),s.length===0&&(s=qt.seq(1,this.ncols)),pr(s)||(s=br(s));const o=r.length,a=s.length;if(Yr(r)<1||Cr(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Yr(s)<1||Cr(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const f=e.getcolref(c+1),u=(s.v[c]-1)*this.nrows;for(let d=0;d<r.length;d++){const v=r.v[d];this.v[u+v-1]=f[d]}}return this}copy(){return new ze(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Be.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)r[s]=this.getcolref(s+1)[e-1];return new Be(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Be(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=br([e])),typeof r=="number"&&(r=br([r])),Array.isArray(e)&&(e=e.length===0?null:br(e)),Array.isArray(r)&&(r=r.length===0?null:br(r)),e!==null&&!pr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!pr(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Yr(e)<1||Cr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Yr(r)<1||Cr(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const f=r.length,u=this.nrows,d=new ze.valuesConstructor(u*f);for(let v=0;v<r.length;v++)d.set(this.v.slice((r.v[v]-1)*this.nrows,r.v[v]*this.nrows),v*this.nrows);return new ze(d,u,f)}if(r==null)return this.t().subset(r,e).t();const s=e.length,o=r.length,a=new ze.valuesConstructor(s*o);let c=new ze.valuesConstructor(s);for(let f=0;f<o;f++){const u=this.v.subarray((r.v[f]-1)*this.nrows,r.v[f]*this.nrows);for(let d=0;d<s;d++)c[d]=u[e.v[d]-1];a.set(c,f*s)}return new ze(a,s,o)}toString(e){function r(c,f){return" ".repeat(f-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Cr(this.v))))+e+3;let o="";const a=this.t();for(let c=1;c<=a.ncols;c++)o+=Array.from(a.getcolref(c)).map(f=>r(f.toFixed(e),s)).join(" ")+`
`;return o}toCSV(e,r,s,o){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=o!=null&&o.length>0,c=s!=null&&s.length>0;if(a&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const f=this.t();let u=c?s.join(e)+`
`:"";for(let d=1;d<=f.ncols;d++)u=u+(a?o[d-1]+e:"")+f.getcolref(d).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,s,o){return wi(di(e*r,s,o),e,r)}static rand(e,r,s,o){return wi(fi(e*r,s,o),e,r)}static eye(e,r){r===void 0&&(r=e);const s=new Float64Array(e*r);for(let o=0;o<Math.min(e,r);o++)s[o*e+o]=1;return new ze(s,e,r)}static diagm(e){if(!Re(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,s=new Float64Array(r*r);for(let o=0;o<r;o++)s[o*r+o]=e.v[o];return new ze(s,r,r)}static zeros(e,r){return r===void 0&&(r=e),new ze(new Float64Array(e*r),e,r)}static ones(e,r){return ze.fill(1,e,r)}static fill(e,r,s){s===void 0&&(s=r);const o=new Float64Array(r*s);for(let a=0;a<o.length;a++)o[a]=e;return new ze(o,r,s)}static outer(e,r,s){if(Array.isArray(e)&&(e=ct(e)),Array.isArray(r)&&(r=ct(r)),!Re(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Re(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=ze.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],f=o.getcolref(a+1);for(let u=0;u<e.length;u++)f[u]=s(e.v[u],c)}return o}static parseCSV(e,r,s,o){function a(b){return b.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let f=e.split(/\n/),u=[],d=0;const v=f[0].split(r);(s||s===void 0&&a(v))&&(u=v,d=1),f=f.filter(b=>b.trim().length>1);let m=[],h=0;o&&(h=1);const g=f.length-d,p=v.length-h;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const w=ze.zeros(p,g);for(let b=d;b<g+d;b++){const _=f[b].split(r);let A;if(o?(m[b-d]=_[0],A=_.slice(1).map(E=>Number.parseFloat(E.trim().replace(c,".")))):A=_.map(E=>Number.parseFloat(E.trim().replace(c,"."))),A.some(E=>Number.isNaN(E)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=p)throw Error("Wrong number of values in row #"+b);w.v.set(new Float64Array(A),(b-d)*p)}return{values:w.t(),header:u,labels:m,sep:r,dec:c}}};Dt(ze,"valuesConstructor",Float64Array),Dt(ze,"TOLERANCE",Math.pow(10,-9));let tr=ze;function Re(t){return t&&t.constructor===Be}function ct(t){return new Be(new Float64Array(t))}const ft=class ft{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new qt.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=o+1,s=s+1);return new qt(r.subarray(0,s))}filter(e){const r=new ft.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=this.v[o],s=s+1);return new ft(r.subarray(0,s))}shuffle(){return new ft(ki(this.v))}sort(e){return new ft(uo(this.v,e))}sortind(e){return new qt(Ei(this.v,e))}rep(e){return yi(this,e)}repeach(e){return xi(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=qt.seq(1,this.length)),pr(r)||(r=br(r));const s=r.length;if(Yr(r)<1||Cr(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<r.length;o++){const a=r.v[o];this.v[a-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=br([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?qt.bool2ind(e):br(e)),!pr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=ft.zeros(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[o]=this.v[e.v[o]-1]}return s}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new ft(this.v.slice(e-1,r))}copy(){return new ft(this.v.slice())}dot(e){return e===void 0&&(e=this),co(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Re(e))return new ft(ao(this.v,e.v,r));if(oo(e))return new ft(io(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e){const r=this.v.length,s=ft.zeros(r);for(let o=0;o<r;o++)s.v[o]=e(this.v[o]);return s}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new ft.valuesConstructor(r);let o=0;for(const a of e)typeof a=="number"?(s[o]=a,o+=1):(s.set(Re(a)?a.v:new ft.valuesConstructor(a),o),o+=typeof a=="number"?1:a.length);return new ft(s)}static seq(e,r,s){return _i(e,r,s,ft)}static randn(e,r,s){return di(e,r,s)}static rand(e,r,s){return fi(e,r,s)}static zeros(e){return new ft(new ft.valuesConstructor(e))}static ones(e){return ft.fill(1,e)}static fill(e,r){const s=new ft.valuesConstructor(r);for(let o=0;o<s.length;o++)s[o]=e;return new ft(s)}};Dt(ft,"valuesConstructor",Float64Array);let Be=ft;function pr(t){return t.constructor===qt}function br(t){return new qt(new Int32Array(t))}const xt=class xt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new xt.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=o+1,s=s+1);return new xt(r.subarray(0,s))}filter(e){const r=new xt.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=this.v[o],s=s+1);return new xt(r.subarray(0,s))}shuffle(){return new xt(ki(this.v))}sort(e){return new xt(uo(this.v,e))}sortind(e){return new xt(Ei(this.v,e))}rep(e){return yi(this,e)}repeach(e){return xi(this,e)}subset(e){if(typeof e=="number"&&(e=br([e])),Array.isArray(e)&&(e=br(e)),!pr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=new xt.valuesConstructor(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");s[o]=this.v[e.v[o]-1]}return new xt(s)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new xt(this.v.slice(e-1,r))}static seq(e,r,s){return _i(e,r,s,xt)}static ones(e){return xt.fill(1,e)}static fill(e,r){const s=new xt.valuesConstructor(r);for(let o=0;o<s.length;o++)s[o]=e;return new xt(s)}static bool2ind(e){let r=0;const s=new xt.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(s[r]=o+1,r=r+1);return new xt(s.subarray(0,r))}};Dt(xt,"valuesConstructor",Int32Array);let qt=xt;function _i(t,e,r,s){r===void 0&&(r=t<=e?1:-1);const o=Math.floor((e-t)/r)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(o);for(let c=0;c<o;c++)a[c]=t+c*r;return new s(a)}function yi(t,e){const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let o=1;o<=e;o++)for(let a=0;a<t.length;a++)s[(o-1)*t.length+a]=t.v[a];return new t.constructor(s)}function xi(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)s[o*e+a]=t.v[o];return new t.constructor(s)}function ao(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new t.constructor(t.length);for(let o=0;o<t.length;o++)s[o]=r(t[o],e[o]);return s}function io(t,e,r){const s=new t.constructor(t.length);for(let o=0;o<t.length;o++)s[o]=r(t[o],e);return s}function co(t,e,r,s,o,a){if(s!==o)throw Error("_dot: matrix dimensions do not much.");const c=r,f=a,u=s,d=new t.constructor(c*f);for(let v=0;v<f;v++){const m=e.subarray(v*o,(v+1)*o),h=d.subarray(v*c,(v+1)*c);for(let g=0;g<u;g++){const p=m[g],w=t.subarray(g*r,(g+1)*r);for(let b=0;b<c;b++)h[b]+=w[b]*p}}return d}function ki(t){let e=t.slice(),r=e.length,s,o;for(;r;)o=Math.floor(Math.random()*r--),s=e[r],e[r]=e[o],e[o]=s;return e}function uo(t,e=!1){return e?t.slice().sort((r,s)=>s-r):t.slice().sort((r,s)=>r-s)}function Ei(t,e=!1){const r=qt.seq(1,t.length).v;return e?r.sort((s,o)=>t[o-1]-t[s-1]):r.sort((s,o)=>t[s-1]-t[o-1])}function bf(t,e,r){return 5*t*e+e+4*r*e+t*r}function Wr(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=t.ncols,o=t.ncomp;let a,c;switch(e){case"mX":a=2,c=s;break;case"sX":a=2+s,c=s;break;case"loadings":case"xloadings":a=2+2*s+(r-1)*s,c=s;break;case"P":a=2+2*s,c=o*s;break;case"eigenvals":case"xeigenvals":a=2+2*s+s*o,c=o;break;case"cq0":a=2+2*s+s*o+o,c=o;break;case"cNq":a=2+2*s+s*o+2*o,c=o;break;case"rq0":a=2+2*s+s*o+3*o,c=o;break;case"rNq":a=2+2*s+s*o+4*o,c=o;break;case"ch0":a=2+2*s+s*o+5*o,c=o;break;case"cNh":a=2+2*s+s*o+6*o,c=o;break;case"rh0":a=2+2*s+s*o+7*o,c=o;break;case"rNh":a=2+2*s+s*o+8*o,c=o;break;case"cr0":a=2+2*s+s*o+9*o,c=o;break;case"cNr":a=2+2*s+s*o+10*o,c=o;break;case"rr0":a=2+2*s+s*o+11*o,c=o;break;case"rNr":a=2+2*s+s*o+12*o,c=o;break;case"cg0":a=2+2*s+s*o+13*o,c=o;break;case"cNg":a=2+2*s+s*o+14*o,c=o;break;case"rg0":a=2+2*s+s*o+15*o,c=o;break;case"rNg":a=2+2*s+s*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function wf(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=t.ncols,o=t.nrows,a=t.ncomp;let c,f;switch(e){case"scores":case"xscores":c=(r-1)*o,f=o;break;case"T":c=0,f=o*a;break;case"hdist":c=o*a+(r-1)*o,f=o;break;case"qdist":c=2*o*a+(r-1)*o,f=o;break;case"xcumexpvar":case"cumexpvar":c=3*o*a,f=a;break;case"fdistc":c=3*o*a+a+(r-1)*o,f=o;break;case"fdistr":c=4*o*a+a+(r-1)*o,f=o;break;case"gdist":c=5*o*a+a+(r-1)*s,f=s;break;case"rdist":c=5*o*a+a+s*a+(r-1)*s,f=s;break;case"idistc":c=5*o*a+a+2*s*a+(r-1)*s,f=s;break;case"idistr":c=5*o*a+a+3*s*a+(r-1)*s,f=s;break;case"E":c=5*o*a+a+3*s*a+a*s,f=o*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+f)}function _f(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let s=0;s<t.length;s++){const o=t[s];if(o<e||o>r)return!1}return!0}function yf(t,e,r,s){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!gr(r))throw new Error("pca_predict: X must be a matrix.");s||(s=[]);const o=s&&Array.isArray(s)?s.length:0;if(!_f(s,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=r.nrows-o;let c=e.exclvars;r.ncols===e.ncols&&(c=[]);const f=c.length,u=r.ncols-f;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const d=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,d/r.v.BYTES_PER_ELEMENT);let v=null;if(o>0){const T=new Int32Array(s);v=t._malloc(T.length*T.BYTES_PER_ELEMENT),t.HEAP32.set(T,v/T.BYTES_PER_ELEMENT)}let m=null;if(f>0){const T=new Int32Array(c);m=t._malloc(T.length*T.BYTES_PER_ELEMENT),t.HEAP32.set(T,m/T.BYTES_PER_ELEMENT)}const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const g=bf(a,e.ncomp,u),p=Float64Array,w=t._malloc(g*p.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[d,r.nrows,r.ncols,h,w,v,o,m,f])!==1)throw new Error("pca_predict: PCA prediction failed.");const _=t.HEAPF64.slice(w/p.BYTES_PER_ELEMENT,w/p.BYTES_PER_ELEMENT+g);t._free(d),t._free(h),t._free(w),v&&t._free(v),m&&t._free(m);const A={class:["pcares"],v:_,ncomp:e.ncomp,nrows:a,ncols:u,npred:u,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},E=new Array(e.ncomp),k=new Array(e.ncomp),S=new Array(e.ncomp),M=new Array(e.ncomp),L=new Array(e.ncomp),q=wf(A,"xcumexpvar");L[0]=1,M[0]=q[0],S[0]=1-q[0],E[0]=q[0],k[0]=1-q[0];for(let T=1;T<e.ncomp;T++)L[T]=T+1,M[T]=q[T],S[T]=1-q[T],E[T]=q[T]-q[T-1],k[T]=1-E[T];return A.stat={components:L,resvar:k,expvar:E,cumexpvar:M,cumresvar:S},A}function xf(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const rn=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:xf,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function kf(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const s=rn[t.ml[r]].title;e=e+"<li>"+s+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function Ai(t,e,r){const s=rn.findIndex(m=>m.id==="trim");let o=0,a=t.ncols-e,c=0;for(let m=0;m<r.ml.length;m++){if(r.ml[m]!==s){c+=r.mpl_new[m];continue}o=Math.max(o,r.mp_new[c]),a=Math.min(a,r.mp_new[c+1]),c+=r.mpl_new[m]}const f=t.nrows,d=a-o+e,v=tr.zeros(f,d);return c=0,e>0&&(v.v.set(t.v.slice(0,e*f),c),c+=e*f),v.v.set(t.v.slice((e+o)*f,(e+a)*f),c),[o,a,v]}function fo(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=rn.findIndex(f=>f.id==="trim");if(e.ml.findIndex(f=>f===r)<0)return t;const[o,a,c]=Ai(t.values,t.nresp,e);return t.values=c,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+o,t.nresp+a)):t.varlabels.slice(o,a),t.varindices=t.nresp>0?Ur(0,t.nresp-1).concat(Ur(0,a-o-1)):Ur(0,a-o-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+o,t.nresp+a)):t.varvalues.slice(o,a),t}function Si(t,e,r,s,o=!0,a=[]){if(!gr(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,f;o?(c=e.ncols,f=e.nrows-r):(c=e.nrows,f=e.ncols-r);const u=s.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const d=new Int32Array(u),v=new Int32Array(u),m=new Int32Array(u);let h=0,g=0;for(let z=0;z<s.length;z++){const V=s[z].id,B=s[z].params,I=rn.findIndex(oe=>oe.id==V);if(I<0)throw new Error("prep_fit: wrong method name: "+V+".");const W=rn[I];if(B.length!==W.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+V+".");d[z]=I,v[z]=W.mpl,m[z]=W.get_mpl_new(f,B),h=h+v[z],g=g+m[z]}const p=new Float64Array(h);let w=0;for(let z=0;z<s.length;z++){const V=s[z].id,B=s[z].params;rn.findIndex(I=>I.id==V),p.set(B,w),w=w+v[z]}const b=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,b/e.v.BYTES_PER_ELEMENT);const _=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,_/d.BYTES_PER_ELEMENT);const A=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,A/v.BYTES_PER_ELEMENT);const E=t._malloc(m.length*m.BYTES_PER_ELEMENT);t.HEAP32.set(m,E/m.BYTES_PER_ELEMENT);const k=t._malloc(p.length*p.BYTES_PER_ELEMENT);t.HEAPF64.set(p,k/p.BYTES_PER_ELEMENT);const S=t._malloc(g*p.BYTES_PER_ELEMENT),M=new Int32Array(a),L=M.length,q=t._malloc(L*M.BYTES_PER_ELEMENT);if(t.HEAP32.set(M,q/M.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[b,c,f,r,u,_,A,k,E,S,o,q,L])!==1)throw new Error("prep_fit: unexpected error.");const j=t.HEAPF64.slice(S/p.BYTES_PER_ELEMENT,S/p.BYTES_PER_ELEMENT+g);return t._free(b),t._free(_),t._free(k),t._free(A),t._free(q),t._free(S),t._free(E),{ml:d,mpl:v,mp:p,mpl_new:m,mp_new:j,npred:f,class:["prepmodel"]}}function Ls(t,e,r,s,o=!0,a=!1){if(!gr(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let c,f;if(o?(c=e.ncols,f=e.nrows-r):(c=e.nrows,f=e.ncols-r),f!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+f+").");const u=s.ml,d=s.mpl_new,v=s.mp_new,m=d.reduce((S,M)=>S+M,0);if(!u||u.length<1||!d||d.length!==u.length||v.length!==m)throw new Error("prep_apply: wrong structure of the model object.");const h=u.length,g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const p=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,p/u.BYTES_PER_ELEMENT);const w=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,w/d.BYTES_PER_ELEMENT);const b=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAPF64.set(v,b/v.BYTES_PER_ELEMENT);const _=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[g,c,f,r,h,p,w,b,_,o])!==1)throw new Error("prep_apply: unexpected error.");const E=t.HEAPF64.slice(_/e.v.BYTES_PER_ELEMENT,_/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(g),t._free(p),t._free(w),t._free(b),t._free(_);const k=new tr(E,e.nrows,e.ncols);if(a){const[S,M,L]=Ai(k,r,s);return L}return k}function Ci(t,e,r,s){e===void 0&&(e=!0),r===void 0&&(r=!1),s===void 0&&(s=!1);function o(u,d,v,m){if(typeof d=="boolean")return d?u.apply(v,2):ct([m]).rep(u.ncols);if(!Re(d))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(d.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return d}const a=o(t,e,Sn,0),c=o(t,r,nl,1),f=tr.zeros(t.nrows,t.ncols);for(let u=1;u<=t.ncols;u++){const d=t.getcolref(u),v=f.getcolref(u),m=a.v[u-1],h=1/c.v[u-1];for(let g=0;g<t.nrows;g++)v[g]=(d[g]-m)*h}return s?[f,a,c]:f}function Ni(t,e,r){return t<e?["regular","in"]:t>r?["outlier","out"]:["extreme","out"]}function Ef(t,e,r,s,o,a,c,f){if(!f||f.length===0)return[0,0];let u=0,d=0;for(let v of f){const m=t[v],[h,g]=Ni(m,e,r);a[h]+=1,c[g]+=1,s[v]=h,o[v]=g,u=u+(g==="in"),d=d+(g!=="in")}return[u,d]}function Mi(t,e,r,s,o,a,c,f,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let d=0,v=0;for(let V of u){const B=t[V],[I,W]=Ni(B,r,s);f[W]+=1,o[V]="alien",c.alien+=1,a[V]=W,d=d+(W!=="in"),v=v+(W==="in")}const m=u.slice();m.sort((V,B)=>t[V]-t[B]);let h=m.length;const g=m.map(V=>t[V]);let p=-1,w=0,b=0,_=0,A=0;for(;p<0;)w>0&&(o[m[h-1]]="external",c.alien=c.alien-1,c.external=c.external+1,h=h-1,m.pop(),g.pop()),b=Sn(g),_=sl(g),A=_/(b*b),p=4-2*e*A,w=w+1;const E=(2+Math.sqrt(p))/A,k=E-e,S=b/E,M=r/S,L=1-2*(e+k)*(e+3*k)/(3*(e+2*k)**2),q=(L-1)*(1-3*L),T=(e+2*k)/(e+k)**2,j=1+L*T*(L-1-.5*(2-L)*q*T),y=L*Math.sqrt(2*T)*(1+.5*q*T),z=eo((Math.pow(M/(e+k),L)-j)/y);return[d,v,z,k,S,L,j,y,e,b]}function vo(t,e,r,s,o){(!o||!Array.isArray(o))&&(o=[]);let a=t.exclvars;(!a||!Array.isArray(a))&&(a=[]);const c=r.values.nrows,f=o.length,u=c-f,d=r.sep,v=e.classes&&e.classes.length===u,m=v?["","","","",""]:["","","",""];let h="";if(h+=["Reference classes:",v?"provided":"not provided",...m].join(d)+`
`,h+=["Center:",t.center?"yes":"no",...m].join(d)+`
`,h+=["Scale:",t.scale?"yes":"no",...m].join(d)+`
`,h+=["Alpha:",(t.alpha/100).toFixed(3),...m].join(d)+`
`,h+=["Limits estimator:",t.limType,...m].join(d)+`
`,h+=`
`,h+=["Nf:",e.Nf,...m].join(d)+`
`,h+=`
`,h+=["F crit (extremes):",t.eCrit,...m].join(d)+`
`,h+=["F crit (outliers):",t.oCrit,...m].join(d)+`
`,h+=`
`,a.length>0&&(h+=["Number of excluded variables:",a.length,...m].join(d)+`
`,h+=["Indices of excluded variables:",Tf(a),...m].join(d)+`
`,h+=`
`),h+=["Objects:",c,...m].join(d)+`
`,h+=["In:",e.outcomes.decsNum.in,...m].join(d)+`
`,h+=["Out:",e.outcomes.decsNum.out,...m].join(d)+`
`,h+=["Excluded:",f,...m].join(d)+`
`,e.nMembers>0&&(h+=`
`,h+=["Members:",e.nMembers,...m].join(d)+`
`,h+=["Regular:",e.outcomes.rolsNum.regular,...m].join(d)+`
`,h+=["Extreme:",e.outcomes.rolsNum.extreme,...m].join(d)+`
`,h+=["Outliers:",e.outcomes.rolsNum.outlier,...m].join(d)+`
`,h+=["Sensitivity:",e.outcomes.stat.sensitivity,...m].join(d)+`
`),e.nStrangers>0&&(h+=`
`,h+=["Strangers:",e.nStrangers,...m].join(d)+`
`,h+=["In:",e.outcomes.decsNum.in-e.outcomes.rolsNum.regular,...m].join(d)+`
`,h+=["Aliens:",e.outcomes.rolsNum.alien,...m].join(d)+`
`,h+=["External:",e.outcomes.rolsNum.external,...m].join(d)+`
`,h+=["Specificity:",e.outcomes.stat.specificity,...m].join(d)+`
`,h+=["Selectivity:",e.outcomes.stat.selectivity,...m].join(d)+`
`,h+=`
`,h+=["Beta:",e.beta,...m].join(d)+`
`,h+=["Non-centrality (s):",e.s,...m].join(d)+`
`,h+=["Scaling (f0):",e.f0,...m].join(d)+`
`,e.nMembers>0)){const A=e.outcomes.TP/(e.outcomes.TP+e.outcomes.FP),E=e.outcomes.stat.sensitivity,k=1-e.outcomes.stat.specificity,S=2*A*E/(A+E),M=E/k,L=(1-E)/(1-k);h+=`
`,h+=["Efficiency:",e.outcomes.stat.efficiency,...m].join(d)+`
`,h+=["Accuracy:",e.outcomes.stat.accuracy,...m].join(d)+`
`,h+=["Precision:",A,...m].join(d)+`
`,h+=["F1-score:",S,...m].join(d)+`
`,h+=["PLR:",M,...m].join(d)+`
`,h+=["NLR:",L,...m].join(d)+`
`}h+=`
`,h+=["","object","class","role","decision","f"].join(d)+`
`;let g=0;for(let A=0;A<c;A++){if(f>0&&o.includes(A)){h+=["",r.objlabels[A],"-","removed","-","-"].join(d)+`
`;continue}h+=["",r.objlabels[A],e.classes[g],e.outcomes.rols[g],e.outcomes.decs[g],e.outcomes.f[g]].join(d)+`
`,g=g+1}h+=`
`,r.dec!=="."&&(h=h.replace(/\./g,r.dec)),h=["Target class:",t.className,...m].join(d)+`
`+h,h=["Data filename:",r.fileName,...m].join(d)+`
`+h;let p=["NIMCA results ("+s+")","https://mda.tools/nimca/",...m].join(d)+`

`;const w=new Blob([p+h],{type:"text/csv"}),b=window.URL.createObjectURL(w),_=document.createElement("a");_.setAttribute("href",b),_.setAttribute("download",`nimca-results-${s}.csv`),_.click()}function ho(t,e){const r={nimca:t.asJSON(),prep:e},s=new Blob([JSON.stringify(r,Rs)],{type:"application/json"}),o=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download","nimca-model.json"),a.click()}const Vo=class Vo{constructor(e,r,s,o,a,c,f){Ne(this,cs);this.d=e,this.ind=r,this.objlabels=s,this.objindices=o,this.classes=a,this.classNames=c,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,xe(this,cs,C(()=>f.oCrit&&f.eCrit?this.getOutcomes(f):null))}get outcomes(){return l(H(this,cs))}set outcomes(e){O(H(this,cs),e)}getOutcomes(e){const r=this.d.apply(T=>T/e.f0*e.Nf).v,s=new Array(this.nrows),o=new Array(this.nrows),a={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[f,u]=Ef(r,e.eCrit,e.oCrit,o,s,a,c,this.ind.members),[d,v,m,h,g,p,w,b,_,A]=Mi(r,e.Nf,e.eCrit,e.oCrit,o,s,a,c,this.ind.strangers);this.nUnknown>0&&Mi(r,e.Nf,e.eCrit,e.oCrit,o,s,a,c,this.ind.unknown);const E=f>0?f/(f+u):0,k=d>0?d/(d+v):0,S=1-m,M=Math.sqrt(E*k),L=f>0&&d>0?(f+d)/(f+d+v+u):0,q={sensitivity:E,specificity:k,selectivity:S,efficiency:M,accuracy:L};return{Nf:e.Nf,f:r,decs:s,rols:o,decsNum:c,rolsNum:a,TP:f,FN:u,TN:d,FP:v,beta:m,s:h,f0:g,hz:p,Mz:w,Sz:b,k:_,m:A,stat:q}}toJSON(){return null}static fromJSON(e){return new Vo(...e)}};cs=new WeakMap;let mo=Vo;const ws=class ws{constructor(e,r,s,o,a,c,f,u,d,v,m,h,g,p,w,b="nimca-model"){Ne(this,us);Ne(this,fs);Ne(this,ds);Ne(this,vs);Ne(this,hs);Ne(this,ms);Ne(this,gs);Ne(this,ps);Ne(this,bs);this.mX=r,this.sX=s,this.nrows=o,this.ncols=a,this.className=e,this.Nfc=c,this.Nfr=f,this.f0c=u,this.f0r=d,this.hash=v,this.class=["nimcamodel"],this.fileName=b,this.center=p,this.scale=w,xe(this,us,re(Me(m))),xe(this,fs,re(Me(h))),xe(this,ds,re(Me(g))),xe(this,vs,C(()=>this.limType==="classic"?this.Nfc:this.Nfr)),xe(this,hs,C(()=>this.limType==="classic"?this.f0c:this.f0r)),xe(this,ms,C(()=>1-Number.parseFloat(this.alpha)/100)),xe(this,gs,C(()=>Math.pow(1-this.gamma/100,1/o))),xe(this,ps,C(()=>Cn(this.eConfLim,this.Nf))),xe(this,bs,C(()=>Cn(this.oConfLim,this.Nf)))}get alpha(){return l(H(this,us))}set alpha(e){O(H(this,us),e,!0)}get gamma(){return l(H(this,fs))}set gamma(e){O(H(this,fs),e,!0)}get limType(){return l(H(this,ds))}set limType(e){O(H(this,ds),e,!0)}get Nf(){return l(H(this,vs))}set Nf(e){O(H(this,vs),e)}get f0(){return l(H(this,hs))}set f0(e){O(H(this,hs),e)}get eConfLim(){return l(H(this,ms))}set eConfLim(e){O(H(this,ms),e)}get oConfLim(){return l(H(this,gs))}set oConfLim(e){O(H(this,gs),e)}get eCrit(){return l(H(this,ps))}set eCrit(e){O(H(this,ps),e)}get oCrit(){return l(H(this,bs))}set oCrit(e){O(H(this,bs),e)}predict(e){if(!e.values||!gr(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=ws.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let o=0;o<e.classes.length;o++)e.classes[o]===this.className?s.members.push(o):s.strangers.push(o);else s.unknown=Ur(0,e.values.nrows-1);return new mo(r,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r,s,o={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let a=e.values;const c=e.classNames[0];if(!gr(a))throw new Error("nimca.fit: X must be a matrix.");const f=r?a.apply(Sn,2):Be.zeros(a.ncols),u=s?a.apply(nl,2):Be.ones(a.ncols),d=ws.getDistance(a,f,u),v=Sn(d),m=sl(d);let h=Math.round(2*v*v/m);h<1&&(h=1),h>250&&(h=250);const g=Ku(d),p=Ju(d),w=p/g;let b;w>2.685592117?b=1:w<.194565995?b=100:b=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/w),1.185785)));const _=.5*b*(g/Cn(.5,b)+p/(Cn(.75,b)-Cn(.25,b)));return new ws(c,f,u,a.nrows,a.ncols,h,b,v,_,Ti(),o.alpha,o.gamma,o.limType,r,s)}static fromJSON(e){const{__type:r,mX:s,sX:o,nrows:a,ncols:c,className:f,Nfc:u,Nfr:d,f0c:v,f0r:m,hash:h,alpha:g,gamma:p,limType:w,fileName:b,center:_,scale:A}=e;return new ws(f,s,o,a,c,u,d,v,m,h,g,p,w,_,A,b)}static getDistance(e,r,s){const o=Ci(e,r,s),a=o.nrows,c=o.ncols,f=Be.zeros(a);for(let u=0;u<c;u++){const d=o.getcolref(u+1);for(let v=0;v<a;v++)f.v[v]+=d[v]**2}return f}};us=new WeakMap,fs=new WeakMap,ds=new WeakMap,vs=new WeakMap,hs=new WeakMap,ms=new WeakMap,gs=new WeakMap,ps=new WeakMap,bs=new WeakMap;let ir=ws;function Ur(t,e,r=1){const s=Math.round((e-t+1)/r),o=Array(s);for(let a=0;a<s;a++)o[a]=t+a*r;return o}function ji(t,e){let r,s,o,a=[];if(e.length>0){const c=t.values.nrows,f=t.objindices,u=c-e.length;r=Array(u),s=Array(u),o=Array(u);let d=0;for(let v=0;v<c;v++)e.includes(v)||(r[d]=f[v],s[d]=t.classes[v],o[d]=t.objlabels[v],(a.length===0||!a.includes(s[d]))&&a.push(s[d]),d=d+1)}else r=t.objindices,o=t.objlabels,s=t.classes,a=t.classNames;return[r,o,s,a]}function Ti(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Af(t,e,r,s,o=!1){const[a,c,f]=ji(r,s),u=o&&e.prep&&e.prep.ml&&e.prep.ml.length>0?Ls(t,r.values,0,e.prep,!1,!0):r.values,d=yf(t,e,u,s);d.hash=Ti(),d.objindices=a,d.objlabels=c,d.classes=f,d.classNames=r.classNames,d.varlabels=r.varlabels,d.eigenvals=Wr(e,"eigenvals"),d.cNh=Wr(e,"cNh"),d.cNq=Wr(e,"cNq"),d.ch0=Wr(e,"ch0"),d.cq0=Wr(e,"cq0"),d.rNh=Wr(e,"rNh"),d.rNq=Wr(e,"rNq"),d.rh0=Wr(e,"rh0"),d.rq0=Wr(e,"rq0");const v=e.nrows;return d.T2lim=2*(v-1)/(v-2)*vi(.95,2,v-2),d}function Sf(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function zs(t){return t.some(e=>Number.isNaN(e))}function Nn(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Pi(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Cf(t,e,r,s,o,a,c,f=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let d=Pi(t);if(d.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");d=d.filter(I=>I.replaceAll(e,"").trim().length>0);const v=d[0].split(e);if(v.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let m=0,h;const g=r!=="no";(g||g===void 0&&zs(firstRow))&&(h=v,m=1);const p=d.length-m;if(p<1)throw new Error("Data file should contain at least 1 row with values.");f===-1&&(f=p);let w,b,_,A=Array(p);s?(w=g?Nn(h[0]):"",_=Array(p),b=1):(w="",_=[],b=0);let E,k=[],S;o?(E=g?Nn(h[b]):"",S=Array(p),b=b+1):(E="",S=[]);const M=v.length-b;if(M<1)throw new Error("Data file should contain at least 1 column with values.");const L=tr.zeros(M,p);for(let I=m;I<p+m;I++){const W=I-m;A[W]=W;let oe=d[I].split(e);if(s&&(_[W]=oe[0],oe.shift()),o){const Z=oe[0];S[W]=Z,oe.shift(),(k.length===0||k.indexOf(Z)<0)&&k.push(Z)}const te=u==="."?oe.map((Z,ne)=>Number.parseFloat(Z.trim())):oe.map((Z,ne)=>Number.parseFloat(Z.trim().replace(u,".")));if(te.some(Z=>Number.isNaN(Z)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(te.length!=M)throw new Error("Wrong number of values in row #"+I);L.v.set(new Float64Array(te),(I-m)*M)}if(!s||_.length!==p){_=Array(p);for(let I=0;I<p;I++)_[I]="O"+(I+1)}_=_.map(I=>Nn(I)),S=S.map(I=>Nn(I)),k=k.map(I=>Nn(I));let q,T=Array(M),j=Array(M);if(h&&h.length===M+b){q=h.map(I=>Nn(I)).slice(b);for(let I=0;I<M;I++)T[I]=I>=f?I-f:I,j[I]=I>=f?I-f+1:I+1}else{q=Array(M);for(let I=0;I<M;I++)T[I]=I>=f?I-f:I,q[I]=I>=f?"V"+(I-f+1):"Y"+(I+1),j[I]=I>=f?I-f+1:I+1}let y;if(r==="values"){if(y=u==="."?q.map((I,W)=>W<f?W:Number.parseFloat(I.trim())):q.map((I,W)=>W<f?W:Number.parseFloat(I.trim().replace(u,"."))),y.some(I=>Number.isNaN(I)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else y=j;Array.isArray(y)||(y=[]),a||(a=""),c||(c=""),a=y.length>0&&a.length>0?a:"Variables",c=y.length>0&&c.length>0?c:"";const z=a+(c.length>0?", "+c:""),V=y[1]<y[0];return{values:L.t(),nresp:f,header:r,hasLabels:s,hasClassNames:o,labelsVarname:w,classLabelsVarname:E,objlabels:_,objindices:A,varlabels:q,varvalues:y,varindices:T,varrev:V,classes:S,classNames:k,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:z}}function Nf(t){if(zs(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let s=2;s<e;s++){let o=[];for(let d=1;d<t.length;d++)o.push(t[d][s]);const a=t[0][s],c=Sn(o),f=nl(o),u=Math.abs((a-c)/f);r.push(u)}return r.every(s=>s>5)}function Mf(t){const r=t[0].split(","),s=t[1].split(","),o=r.length,a=s.length,c=";",f=t[0].split(c),u=t[1].split(c),d=f.length,v=u.length;let m,h;if(o>1&&a>1&&o===a&&o>d)h=",",m=o;else if(d>1&&v>1&&d===v)h=c,m=d;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",m]}function jf(t,e=0){const r=Pi(t),s=r.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,a,c]=Mf(r),f=Math.min(c,5),u=Math.min(s,5);let d=r[0].split(o).length,v=r.slice(0,u).map(T=>T.split(o).slice(0,f));v=v.map(T=>T.map(j=>Nn(j)));const m=v.map(T=>Sf(T.slice(),a));for(let T=1;T<u;T++)if(zs(m[T].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const h=Nf(m);let g=0;const p=h?1:0,w=p+1,b=v[p][0],_=v[w][0],A=m[p][0],E=m[w][0],k=m[p][1],S=m[w][1];let M=!1,L=!1;if(Number.isNaN(A)&&Number.isNaN(E)&&b!==_?(M=!0,g=g+1):Number.isNaN(k)&&Number.isNaN(S)&&b!==_&&(M=!0,L=!0,g=g+2),!L){const T=M?1:0,j=m[p][T],y=m[w][T];L=zs([j,y]),g=g+L}let q="no";if(h){g>0?v[0].slice(g+e):v[e];const T=g>0?m[0].slice(g+e):m[e];q=zs(T)?"labels":"values"}return[o,M,L,q,d]}function es(t,e){if(!e||e.length===0)return t;const[r,s,o,a]=ji(t,e);return{values:t.values.subset(r.map(f=>f+1),[]),objlabels:s,objindices:r,classes:o,classNames:a,header:t.header,hasLabels:t.hasLabels,hasClassNames:t.hasClassNames,classNames:t.classNames,labelsVarname:t.labelsVarname,classLabelsVarname:t.classLabelsVarname,varlabels:t.varlabels,varvalues:t.varvalues,varindices:t.varindices,varrev:t.varrev,responses:t.responses,sep:t.sep,dec:t.dec,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits,varAxisTitle:t.varAxisTitle,fileName:t.fileName,nresp:t.nresp}}function Tf(t){if(!t.length)return"";t.sort((o,a)=>o-a);let e=[],r=t[0],s=r;for(let o=1;o<t.length;o++)t[o]===s+1?s=t[o]:(r===s?e.push(`${r}`):e.push(`${r}-${s}`),r=t[o],s=r);return r===s?e.push(`${r}`):e.push(`${r}-${s}`),e.join(" ")}function Rs(t,e){return gr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Re(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof ir?e.asJSON():e}function go(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return pf(e.v,e.nrows,e.ncols);if(e.__type==="vector")return ct(e.v);if(e.__type==="NIMCA")return ir.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function po(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${s}${o}${a}${c}`}function Li(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function cl(t,e,r){let s="";for(let o=0;o<e;o++){const a=t.getUint8(r++);if(a===0)break;s+=String.fromCharCode(a)}return s}function Pf(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],o=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=t.getUint8(a);a+=1;const f=t.getUint8(a);if(a+=1,f===77)throw new Error("SPC file has old format which is not supported.");const u=f===75,d=t.getUint8(a);a+=1;const v=t.getInt8(a);a+=1;const m=t.getUint32(a,u);a+=4;const h=t.getFloat64(a,u);a+=8;const g=t.getFloat64(a,u);a+=8;const p=t.getUint32(a,u);a+=4;const w=t.getUint8(a);a+=1;const b=t.getUint8(a);a+=1;const _=t.getUint8(a);a+=1;const A=t.getUint8(a);a+=1;const E=t.getUint32(a,u);a+=4;const k=cl(t,9,a);a+=9;const S=cl(t,9,a);a+=9;const M=t.getUint16(a,u);a+=2;const L=Array.from({length:8},()=>{const he=t.getFloat32(a,u);return a+=4,he}),q=cl(t,130,a);a+=130;const T=cl(t,30,a);a+=30;const j=t.getUint32(a,u);a+=4;const[y,z,V,B,I,W,oe,te]=Li(c),Z=w===255?r[31]:r[w],ne=w===255?e[31]:e[w],se=b<=26?s[b]:b>=128&&b<=131?o[b]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:y,TCGRAM:z,TMULTI:V,TRANDM:B,TORDRD:I,TALABS:W,TXYXYS:oe,TXVALS:te},fexper:d,fexp:v,fnpts:m,ffirst:h,flast:g,fnsub:p,fxtype:w,fytype:b,fztype:_,fpost:A,fdate:E,fres:k,fsource:S,fpeakpt:M,fspare:L,fcmnt:q,fcatxt:T,flogoff:j,xaxisName:Z,xaxisUnit:ne,yaxisName:se}}function Lf(t,e){const r=Li(t.getUint8(e));e+=1;const s=t.getInt8(e);e+=1;const o=t.getUint16(e,!0);e+=2;const a=t.getFloat32(e,!0);e+=4;const c=t.getFloat32(e,!0);e+=4;const f=t.getFloat32(e,!0);e+=4;const u=t.getInt32(e,!0);e+=4;const d=t.getInt32(e,!0);e+=4;const v=t.getFloat32(e,!0);return e+=4,{flags:r,exp:s,index:o,time:a,next:c,noise:f,nPoints:u,nScans:d,wAxis:v}}async function zi(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),s=await t.arrayBuffer(),o=new DataView(s);let a=0;const c=Pf(o);a+=512;const f=c.fnpts;if(f<2)throw new Error(`Error reading SPC file (${t.name}).`);let u=new Array(f);if(c.ftflgs.TXVALS)for(let m=0;m<f;m++){const h=o.getFloat32(a,!0);a=a+4,u[m]=h}else{(c.flast-c.ffirst)/(f-1);for(let m=0;m<f;m++)u[m]=c.ffirst+m*c.flast}const d=new Float64Array(f*c.fnsub);for(let m=0;m<c.fnsub;m++){Lf(o,a),a=a+32;for(let h=0;h<f;h++){const g=o.getFloat32(a,!0);a=a+4,d[m*f+h]=g}}const v=[];return c.fnsub>1?Ur(1,c.fnsub).forEach(h=>{v.push(r+"_"+h)}):v.push(r),{hdr:c,xvalues:u,yvalues:d,objlabels:v}}async function zf(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let s=[],o=[];const a=await zi(t[0]),c=a.xvalues.length;if(r.push(a.yvalues),s=s.concat(a.objlabels),o.push(a.hdr.fnsub),e>1)for(let p=1;p<e;p++){const w=await zi(t[p]);if(w.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");r.push(w.yvalues),s=s.concat(w.objlabels),o.push(w.hdr.fnsub)}const f=o.reduce((p,w)=>p+w,0),u=new Float64Array(f*c);let d=0;for(let p=0;p<r.length;p++)u.set(r[p].slice(),d),d+=o[p]*c;const v=new tr(u,c,f),m=Ur(0,c-1),h=Ur(0,f-1),g=a.xvalues.map(p=>p.toFixed(1));return{values:v.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:h,varlabels:g,varvalues:a.xvalues,varindices:m,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var Rf=X('<button tabindex="0" class="button svelte-1to1iow"> </button>');function At(t,e){let r=D(e,"text",3,"button");var s=Rf();s.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var o=R(s);Q(()=>pe(o,r())),N(t,s)}at(["click"]);var If=X('<button tabindex="0"></button>');function ts(t,e){D(e,"disable",3,!1);var r=If();r.__click=function(...s){var o;(o=e.onclick)==null||o.apply(this,s)},Q(()=>{F(r,"title",e.title),F(r,"aria-label",e.title),F(r,"alt",e.title),bt(r,1,`button ${e.className??""}`,"svelte-qbt64")}),N(t,r)}at(["click"]);function nn(t,e){let r=D(e,"title",3,"Reset");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function Ff(t,e){let r=D(e,"title",3,"Undo");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function qf(t,e){let r=D(e,"title",3,"Add");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function Ri(t,e){let r=D(e,"title",3,"Settings");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function Of(t,e){let r=D(e,"title",3,"Move up");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function Df(t,e){let r=D(e,"title",3,"Move down");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}function Mn(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var Bf=X('<span class="label svelte-1bhp5bp"> </span>'),Vf=X("<div><!> <!></div>");function ue(t,e){let r=D(e,"label",3,null),s=D(e,"name",3,""),o=D(e,"status",3,""),a=D(e,"colors",3,""),c=D(e,"labelWidth",3,12);var f=Vf(),u=R(f);{var d=m=>{var h=Bf(),g=R(h);Q(()=>{ht(h,`flex-basis:${c()??""}ch;`),pe(g,r())}),N(m,h)};Y(u,m=>{r()&&m(d)})}var v=P(u,2);Br(v,()=>e.children??Rt),Q(()=>{bt(f,1,`control-element ${s()??""} ${o()??""}`,"svelte-1bhp5bp"),ht(f,a())}),N(t,f)}var Yf=X('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function ul(t,e){we(e,!0);let r=D(e,"min",7,0),s=D(e,"max",3,100),o=D(e,"value",31,()=>Me(r())),a=D(e,"decNum",3,1),c=D(e,"step",19,()=>+((s()-r())/100).toFixed(4)),f=D(e,"onchange",3,null);ge(()=>{o()<r()&&(o(r()),f()&&f()(o())),o()>s()&&(o(s()),f()&&f()(o())),r()>s()&&r(s())});let u=re(void 0),d=re(void 0),v=re(!1);const m=j=>{const y=r()+j*(s()-r());return+(Math.round(y/c())*c()).toFixed(4)},h=j=>{const y=l(u).getBoundingClientRect(),z=l(d).getBoundingClientRect(),V=y.x,B=z.x+z.width;return(j.clientX-V)/(B-V)},g=j=>{const y=h(j);y<0||y>1||O(v,y*100>l(E)-5&&y*100<l(E)+5,!0)},p=j=>{O(v,!1)},w=j=>{O(v,!1);const y=h(j);y<0||y>1||(o(m(y)),f()&&f()(o()))},b=j=>{let y=o()+c()*j.deltaY*.5;y<r()&&(y=r()),y>s()&&(y=s()),o(+(Math.round(y/c())*c()).toFixed(4)),j.preventDefault(),f()&&f()(o())},_=j=>{if(!l(v))return;const y=h(j);y<0||y>1||(o(m(y)),f()&&f()(o()))},A=j=>{if(j.key==="ArrowLeft"){o(o()-c()<r()?r():o()-c()),f()&&f()(o());return}if(j.key==="ArrowRight"){o(o()+c()>s()?s():o()+c()),f()&&f()(o());return}},E=C(()=>r()===s()?100:(o()-r())/(s()-r())*100);var k=Yf();k.__keydown=A,k.__mousemove=_,k.__mousedown=g,k.__mouseup=w,k.__touchmove=_,k.__touchstart=g,k.__touchend=w;var S=R(k);let M;var L=R(S);let q;var T=R(L);En(S,j=>O(u,j),()=>l(u)),En(k,j=>O(d,j),()=>l(d)),Q(j=>{F(k,"aria-valuenow",o()),F(k,"aria-valuemin",r()),F(k,"aria-valuemax",s()),M=bt(S,1,"range-slider svelte-7wycr",null,M,{"range-slider_right":l(E)<50}),ht(S,`width:${l(E)??""}%`),q=bt(L,1,"range-value svelte-7wycr",null,q,{"range-value_right":l(E)<50}),pe(T,j)},[()=>o().toFixed(a())]),yn("mousewheel",k,b),yn("mouseleave",k,p),yn("touchcancel",k,p),N(t,k),_e()}at(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var Wf=X('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function Is(t,e){we(e,!0);let r=D(e,"min",3,0),s=D(e,"max",3,10),o=D(e,"value",31,()=>Me(r())),a=D(e,"step",3,1);o()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(r())),o()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(s())),r()>s()&&console.error("The min and max values must be distinct.");let c=re(void 0),f=re(void 0),u=re(!1);const d=C(()=>r()===s()?0:(o()-r())/(s()-r()+a())),v=C(()=>a()/(s()-r()+a())),m=C(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*l(v)}%)`:"background: #f0f0f0"),h=j=>{if(j<0||j>1)return o();let y=o();return Math.round(l(v)/j),j<l(d)&&l(d)>0&&(y=o()-a()*Math.ceil((l(d)-j)/l(v))),j>l(d)+l(v)&&l(d)+l(v)<1&&(y=o()+a()*Math.ceil((j-(l(d)+l(v)))/l(v))),y<r()&&(y=r()),y>s()&&(y=s()),y},g=j=>{const y=l(f).getBoundingClientRect(),z=y.x,V=y.x+y.width;return(j.clientX-z)/(V-z)},p=j=>{const y=g(j);y<0||y>1||O(u,y>l(d)&&y<l(v)+l(d),!0)},w=j=>{O(u,!1)},b=j=>{O(u,!1);const y=g(j);if(y<0||y>1)return;const z=h(y);o()!==z&&o(z)},_=j=>{let y=o()+Math.round(j.deltaY*.5)*a();y<r()&&(y=r()),y>s()&&(y=s()),o(y),j.preventDefault()},A=j=>{if(!l(u))return;const y=g(j);if(y<0||y>1)return;const z=h(y);z!=o()&&o(z)},E=j=>{if(j.key==="ArrowLeft"){o(o()-a()<r()?r():o()-a());return}if(j.key==="ArrowRight"){o(o()+a()>s()?s():o()+a());return}};var k=Wf();k.__keydown=E,k.__mousemove=A,k.__mousedown=p,k.__mouseup=b,k.__touchmove=A,k.__touchstart=p,k.__touchend=b;var S=R(k);let M;var L=R(S);let q;var T=R(L);En(S,j=>O(c,j),()=>l(c)),En(k,j=>O(f,j),()=>l(f)),Q(j=>{F(k,"aria-valuenow",o()),F(k,"aria-valuemin",r()),F(k,"aria-valuemax",s()),ht(k,l(m)),M=bt(S,1,"range-slider svelte-1lbks0y",null,M,{"range-slider_left":l(v)<.1&&l(d)<.5,"range-slider_right":l(v)<.1&&l(d)>=.5}),ht(S,`width: max(2px, ${l(v)*100}%);left:${l(d)*100}%;`),q=bt(L,1,"range-value svelte-1lbks0y",null,q,{"range-value_right":l(v)<.1&&l(d)>.5,"range-value_left":l(v)<.1&&l(d)<=.5}),pe(T,j)},[()=>o().toFixed(0)]),yn("mousewheel",k,_),yn("mouseleave",k,w),yn("touchcancel",k,w),N(t,k),_e()}at(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var Uf=X('<button tabindex="-1"><!></button>'),Hf=X('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function _t(t,e){we(e,!0);let r=D(e,"value",31,()=>Me(e.options[0])),s=D(e,"className",3,"");const o=u=>{if(u.key==="ArrowLeft"){const d=e.options.findIndex(v=>v===r());d>0&&r(e.options[d-1]);return}if(u.key==="ArrowRight"){const d=e.options.findIndex(v=>v===r());d<e.options.length-1&&r(e.options[d+1]);return}};var a=Hf(),c=K(a);c.__keydown=o,Qe(c,20,()=>e.options,u=>u,(u,d)=>{var v=Uf();v.__click=()=>r(d);let m;var h=R(v);jt(h,()=>d),Q(g=>m=bt(v,1,`option option_${g??""}`,"svelte-bifhtc",m,{selected:d==r()}),[()=>d.toString().replace(".","_")]),N(u,v)});var f=P(c,2);Q(()=>bt(c,1,`selector ${s()??""}`,"svelte-bifhtc")),ei(f,r),N(t,a),_e()}at(["keydown","click"]);function jn(t,e){we(e,!0);let r=D(e,"options",19,()=>["no","yes"]),s=D(e,"value",15,!1),o=re(!0);const a=C(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());ge(()=>O(o,s()?r()[1]:r()[0],!0)),ge(()=>s(l(o)===r()[1]));var c=be(),f=K(c);{var u=d=>{_t(d,{get options(){return l(a)},get value(){return l(o)},set value(v){O(o,v,!0)}})};Y(f,d=>{l(a)&&d(u)})}N(t,c),_e()}var Gf=X('<input type="file" multiple class="svelte-xoa0sf"/>'),Xf=X('<input type="file" class="svelte-xoa0sf"/>'),Kf=X('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function fl(t,e){we(e,!0);let r=D(e,"file",15),s=D(e,"message",3,"Select CSV file with dataset"),o=D(e,"acceptType",3,".csv"),a=D(e,"multiple",3,!1),c=re(void 0);function f(E){l(c)&&l(c).files.length>0?r(l(c).files.length===1?l(c).files[0]:l(c).files):r(null)}function u(E){(E.type==="click"||E.type==="keydown"&&(E.code==="Space"||E.code==="Enter"))&&l(c).click()}function d(E){l(c).value=null,r(null)}var v=Kf(),m=K(v);m.__keydown=u,m.__click=u;let h;var g=R(m),p=P(g);{var w=E=>{var k=Gf();k.__change=f,En(k,S=>O(c,S),()=>l(c)),Q(()=>F(k,"accept",o())),N(E,k)},b=E=>{var k=Xf();k.__change=f,En(k,S=>O(c,S),()=>l(c)),Q(()=>F(k,"accept",o())),N(E,k)};Y(p,E=>{a()?E(w):E(b,!1)})}var _=P(m,2);{var A=E=>{nn(E,{onclick:d})};Y(_,E=>{r()&&E(A)})}Q(()=>{h=bt(m,1,"file-selector svelte-xoa0sf",null,h,{selected:r()}),pe(g,`${(r()?r().length>1?`Selected ${r().length} files`:r().name:s())??""} `)}),N(t,v),_e()}at(["keydown","click","change"]);var Jf=X('<div class="error-message svelte-11e14eb"> </div>'),Zf=X('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function Ii(t,e){we(e,!0);let r=D(e,"value",15,""),s=D(e,"className",3,""),o=D(e,"placeholder",3,""),a=D(e,"maxLength",3,25),c=D(e,"validator",3,null),f=re("");function u(){c()&&O(f,c()(r()),!0)}var d=Zf();let v;var m=R(d);m.__input=u;var h=P(m,2);{var g=p=>{var w=Jf(),b=R(w);Q(()=>pe(b,l(f))),N(p,w)};Y(h,p=>{l(f)&&l(f).length>0&&p(g)})}Q(()=>{v=bt(d,1,`textinput ${s()??""}`,"svelte-11e14eb",v,{error:l(f)&&l(f).length>0}),F(m,"placeholder",o()),F(m,"maxlength",a())}),ei(m,r),N(t,d),_e()}at(["input"]);var Qf=X('<div class="spinner svelte-wlgijz"></div>');function $f(t){var e=Qf();N(t,e)}at(["keydown","click"]),at(["keydown","click"]);var ed=X("<h2> </h2>"),td=X("<!> <!>",1),rd=X('<div class="widget"><!></div>');function nd(t,e){we(e,!0);let r=D(e,"title",3,""),s=D(e,"value",15),o=D(e,"labelWidth",3,13);function a(d){const v={};for(const m of Object.keys(d))v[m]=d[m].default;return v}ge(()=>{!s()&&e.options&&s(a(e.options))});var c=rd(),f=R(c);{var u=d=>{var v=td(),m=K(v);{var h=p=>{ue(p,{children:(w,b)=>{var _=ed(),A=R(_);Q(()=>pe(A,r())),N(w,_)},$$slots:{default:!0}})};Y(m,p=>{r()&&p(h)})}var g=P(m,2);Qe(g,17,()=>Object.keys(e.options),rt,(p,w)=>{const b=C(()=>e.options[l(w)]);var _=be(),A=K(_);{var E=k=>{ue(k,{get name(){return l(b).name},get label(){return l(b).label},get labelWidth(){return o()},children:(S,M)=>{var L=be(),q=K(L);Ms(q,()=>l(b).el,(T,j)=>{j(T,or(()=>l(b).props,{get value(){return s()[l(w)]},set value(y){s(s()[l(w)]=y,!0)}}))}),N(S,L)},$$slots:{default:!0}})};Y(A,k=>{l(b).hidden||k(E)})}N(p,_)}),N(d,v)};Y(f,d=>{s()&&d(u)})}N(t,c),_e()}var sd=X('<span class="item svelte-igakmm"> </span>'),ld=X('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function bo(t,e){we(e,!0);var r=be(),s=K(r);{var o=a=>{ue(a,{children:(c,f)=>{var u=ld(),d=K(u),v=P(R(d),2);Qe(v,17,()=>e.outliers,rt,(p,w)=>{var b=sd(),_=R(b);Q(()=>pe(_,e.dataset.objlabels[l(w)])),N(p,b)});var m=P(d,2);{var h=p=>{Ff(p,{get onclick(){return e.undoOutliers}})};Y(m,p=>{e.outliers.length>1&&p(h)})}var g=P(m,2);nn(g,{get onclick(){return e.resetOutliers}}),N(c,u)},$$slots:{default:!0}})};Y(s,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(o)})}N(t,r),_e()}function od(t,e){let r=0,s=0;t.nresp>0&&(r=new Be(t.values.v.slice(0,t.nresp*t.values.nrows-1)),s=t.nresp);const o=new tr(t.values.v.slice(s*t.values.nrows),t.values.nrows,t.values.ncols-s).t(),a=o.ncols<e?1:Math.round(o.ncols/e),c=qt.seq(1,o.ncols,a),f=o.subset(null,c),u=r?r.subset(c):null,d=t.classes?t.classes.filter((v,m)=>c.v.includes(m)):null;return{classNames:t.classNames,classes:d,resp:u,values:f,varvalues:t.varvalues.filter((v,m)=>m>=s),varindices:t.varindices.filter((v,m)=>m>=s),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function wo(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function _o(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}const ad=t=>t;function Fi(t,{delay:e=0,duration:r=400,easing:s=ad}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:a=>`opacity: ${a*o}`}}var id=X('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function qi(t,e){we(e,!0);let r=D(e,"isDark",3,!1);function s(m){m.key==="Escape"&&e.closeModal()}var o=id();yn("keydown",Il,s);let a;var c=R(o),f=R(c),u=R(f);u.__click=function(...m){var h;(h=e.closeModal)==null||h.apply(this,m)};var d=P(f,2),v=R(d);Br(v,()=>e.children),Q(()=>a=bt(o,1,"drop svelte-oie633",null,a,{isdark:r()})),$a(7,o,()=>Fi),N(t,o),_e()}at(["click"]);var cd=X('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function yo(t,e){we(e,!0);var r=be(),s=K(r);{var o=c=>{var f=cd(),u=R(f),d=P(u),v=R(d);jt(v,()=>kf(e.prepmodel)),Q(()=>pe(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),N(c,f)},a=c=>{var f=ku("skipped");N(c,f)};Y(s,c=>{e.prepmodel.ml?c(o):c(a,!1)})}N(t,r),_e()}var ud=X('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),fd=X('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function dd(t,e){we(e,!0);var r=be(),s=K(r);{var o=a=>{ue(a,{name:"info",children:(c,f)=>{var u=fd(),d=K(u),v=P(R(d),3);{var m=b=>{var _=ud(),A=P(K(_),2),E=R(A);Q(()=>{F(A,"title",e.model.fileName),pe(E,e.model.fileName)}),N(b,_)};Y(v,b=>{e.model.fileName&&b(m)})}var h=P(v),g=P(h,3);yo(g,{get prepmodel(){return e.model}});var p=P(d,2);{var w=b=>{nn(b,{get onclick(){return e.reset}})};Y(p,b=>{e.reset&&b(w)})}Q(()=>pe(h,` ${e.model.npred??""} `)),N(c,u)},$$slots:{default:!0}})};Y(s,a=>{e.model&&a(o)})}N(t,r),_e()}var vd=X("<!> <!>",1),hd=X("<p><!></p>"),md=X("<!> <!>",1);function gd(t,e){we(e,!0);let r=D(e,"model",15),s=re(""),o=re("neutral"),a=re("");function c(b){try{const _=JSON.parse(b,go);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),!Object.keys(_).includes("class")||_.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");_.fileName=l(d),r(_),O(o,"success"),O(a,"")}catch(_){console.log(_),r(null),O(o,"error"),O(a,_,!0)}}function f(b){const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsText(l(s))}function u(){O(s,""),r(null),O(o,"neutral"),O(a,"")}ge(()=>{l(s)===null?(r(null),O(o,"neutral"),O(a,"")):(O(o,"neutral"),O(a,""))}),ge(()=>{(r()===null||r()===0)&&O(s,"")});let d=C(()=>l(s)?l(s).name.replace(/\.[^/.]+$/,""):"");var v=md(),m=K(v);{var h=b=>{var _=vd(),A=K(_);kn(A,()=>l(s),S=>{ue(S,{name:"file-selector",children:(M,L)=>{fl(M,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(s)},set file(q){O(s,q,!0)}})},$$slots:{default:!0}})});var E=P(A,2);{var k=S=>{ue(S,{name:"load-button",label:" ",children:(M,L)=>{At(M,{onclick:f,text:"Load"})},$$slots:{default:!0}})};Y(E,S=>{l(s)&&S(k)})}N(b,_)},g=b=>{dd(b,{get model(){return r()},reset:u})};Y(m,b=>{r()?b(g,!1):b(h)})}var p=P(m,2);{var w=b=>{ue(b,{name:"error",status:"error",children:(_,A)=>{var E=hd(),k=R(E);jt(k,()=>l(a)),N(_,E)},$$slots:{default:!0}})};Y(p,b=>{(l(o)==="error"||l(a))&&b(w)})}N(t,v),_e()}var pd=X('<p class="title"> </p>'),bd=X("<!>&nbsp;",1),wd=X("<!> <!>",1),_d=X('<div class="method-open svelte-10os93"><!> <!> <!></div>'),yd=X('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function rs(t,e){we(e,!0);let r=D(e,"cancel",3,null);var s=be(),o=K(s);{var a=f=>{var u=_d(),d=R(u);ue(d,{children:(h,g)=>{var p=pd(),w=R(p);Q(()=>pe(w,e.title)),N(h,p)},$$slots:{default:!0}});var v=P(d,2);Br(v,()=>e.children);var m=P(v,2);ue(m,{label:" ",children:(h,g)=>{var p=wd(),w=K(p);{var b=A=>{var E=bd(),k=K(E);At(k,{text:"Cancel",get onclick(){return r()}}),N(A,E)};Y(w,A=>{r()&&A(b)})}var _=P(w,2);At(_,{text:"Save",get onclick(){return e.apply}}),N(h,p)},$$slots:{default:!0}}),$a(3,u,()=>Fi,()=>({duration:10})),N(f,u)},c=f=>{ue(f,{children:(u,d)=>{var v=yd(),m=K(v),h=R(m),g=P(h);g.__click=()=>e.open(e.pos);var p=R(g),w=P(m,2);Of(w,{onclick:()=>e.moveUp(e.pos)});var b=P(w,2);Df(b,{onclick:()=>e.moveDown(e.pos)});var _=P(b,2);nn(_,{onclick:()=>e.remove(e.pos)}),Q(()=>{pe(h,`${e.title??""} `),pe(p,e.settings)}),N(u,v)},$$slots:{default:!0}})};Y(o,f=>{e.isOpen?f(a):f(c,!1)})}N(t,s),_e()}at(["click"]);var xd=X("<!> <!>",1);function kd(t,e){we(e,!0);let r=D(e,"params",31,()=>Me([0,0])),s=D(e,"varind",15),o=D(e,"settings",15),a=D(e,"nvars",3,0),c=An(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const f={snv:0,area:1,length:2,var:3},u=Object.keys(f);let d=re(Me(u[r()[0]])),v=re(r()[1]+1);const m="Normalization";ge(()=>{o(l(d)+(l(d)==="var"?" #"+l(v):""))}),ge(()=>{l(d)==="var"?s(s()[0]=r()[1]>0?r()[1]:1,!0):s(s()[0]=-1,!0)}),ge(()=>{l(d)==="var"&&e.isOpen?s(s()[0]=r()[1],!0):s(s()[0]=-1,!0)}),ge(()=>{l(d)&&r(r()[0]=f[l(d)],!0)}),ge(()=>{l(v)&&r(r()[1]=l(v)-1,!0)}),rs(t,or({id:"norm",title:m,get settings(){return o()},get isOpen(){return e.isOpen}},()=>c,{children:(h,g)=>{var p=xd(),w=K(p);ue(w,{label:"Type",children:(A,E)=>{_t(A,{get options(){return u},get value(){return l(d)},set value(k){O(d,k,!0)}})},$$slots:{default:!0}});var b=P(w,2);{var _=A=>{ue(A,{label:"Variable index",children:(E,k)=>{Is(E,{min:1,get max(){return a()},step:1,get value(){return l(v)},set value(S){O(v,S,!0)}})},$$slots:{default:!0}})};Y(b,A=>{l(d)==="var"&&A(_)})}N(h,p)},$$slots:{default:!0}})),_e()}var Ed=X("<!> <!> <!>",1);function Ad(t,e){we(e,!0);let r=D(e,"params",31,()=>Me([3,1,0])),s=D(e,"settings",15),o=An(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const a=C(()=>{if(!e.nvars)return 3;const d=Math.round(e.nvars*.25);return d>39?39:d%2<1?d+1:d}),c=C(()=>r()[1]<2?[0,1]:[0,1,2]),f=C(()=>r()[0]<5?[1,2]:[1,2,3]);ge(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),ge(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),ge(()=>{s(r()[0]+", "+r()[1]+", "+r()[2])}),rs(t,or({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>o,{children:(d,v)=>{var m=Ed(),h=K(m);ue(h,{label:"Width",children:(w,b)=>{Is(w,{min:3,get max(){return l(a)},step:2,get value(){return r()[0]},set value(_){r(r()[0]=_,!0)}})},$$slots:{default:!0}});var g=P(h,2);ue(g,{label:"Polynomial",children:(w,b)=>{_t(w,{get options(){return l(f)},get value(){return r()[1]},set value(_){r(r()[1]=_,!0)}})},$$slots:{default:!0}});var p=P(g,2);ue(p,{label:"Derivative",children:(w,b)=>{_t(w,{get options(){return l(c)},get value(){return r()[2]},set value(_){r(r()[2]=_,!0)}})},$$slots:{default:!0}}),N(d,m)},$$slots:{default:!0}})),_e()}var Sd=X("<!> <!>",1);function Cd(t,e){we(e,!0);let r=D(e,"params",31,()=>Me([1,0]));D(e,"varind",27,()=>-1);let s=D(e,"settings",15);D(e,"nvars",3,0);let o=An(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},f=Object.keys(a),u=Object.keys(c);let d=re(Me(f[r()[0]])),v=re(Me(u[r()[1]]));const m="Scaling";ge(()=>{s(l(d)+"/"+l(v))}),ge(()=>{l(d)&&r(r()[0]=a[l(d)],!0)}),ge(()=>{l(v)&&r(r()[1]=c[l(v)],!0)}),rs(t,or({id:"scale",title:m,get settings(){return s()}},()=>o,{children:(h,g)=>{var p=Sd(),w=K(p);ue(w,{label:"Center",children:(_,A)=>{_t(_,{get options(){return f},get value(){return l(d)},set value(E){O(d,E,!0)}})},$$slots:{default:!0}});var b=P(w,2);ue(b,{label:"Scale",children:(_,A)=>{_t(_,{get options(){return u},get value(){return l(v)},set value(E){O(v,E,!0)}})},$$slots:{default:!0}}),N(h,p)},$$slots:{default:!0}})),_e()}var Nd=X("<!> <!> <!>",1),Md=X("<!> <!> <!>",1);function jd(t,e){we(e,!0);let r=D(e,"params",31,()=>Me([0,1,.1]));D(e,"varind",27,()=>-1);let s=D(e,"settings",15,"");D(e,"nvars",3,0);let o=An(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Baseline correction",c={emsc:0,als:1},f=Object.keys(c);function u(p){const w=Math.ceil(Math.log10(p));return Math.pow(10,w)}let d=re(Me(f[r()[0]])),v=re(Me(r()[2]>0?u(r()[2]).toString():"0.1")),m=C(()=>parseFloat(l(v))),h=C(()=>l(m)/10),g=C(()=>Math.ceil(-Math.log10(l(m)))+1);ge(()=>{if(l(d)!=="als")return;const p=parseFloat(l(v));(r()[2]<l(h)||r()[2]>p-l(h))&&r(r()[2]=l(h),!0)}),ge(()=>{s(l(d)+" ("+(l(d)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),ge(()=>{l(d)&&r(r()[0]=c[l(d)],!0)}),rs(t,or({id:"scale",title:a,get settings(){return s()}},()=>o,{children:(p,w)=>{var b=Md(),_=K(b);ue(_,{label:"Type",children:(M,L)=>{_t(M,{get options(){return f},get value(){return l(d)},set value(q){O(d,q,!0)}})},$$slots:{default:!0}});var A=P(_,2);{var E=M=>{var L=Nd(),q=K(L);ue(q,{label:"Lambda",children:(y,z)=>{ul(y,{min:1,max:7,step:.1,get value(){return r()[1]},set value(V){r(r()[1]=V,!0)}})},$$slots:{default:!0}});var T=P(q,2);ue(T,{label:"Penalty range",children:(y,z)=>{_t(y,{options:["1","0.1","0.01"],get value(){return l(v)},set value(V){O(v,V,!0)}})},$$slots:{default:!0}});var j=P(T,2);ue(j,{label:"Penalty",children:(y,z)=>{{let V=C(()=>l(m)-l(h));ul(y,{get min(){return l(h)},get max(){return l(V)},get step(){return l(h)},get decNum(){return l(g)},get value(){return r()[2]},set value(B){r(r()[2]=B,!0)}})}},$$slots:{default:!0}}),N(M,L)};Y(A,M=>{l(d)==="als"&&M(E)})}var k=P(A,2);{var S=M=>{ue(M,{label:"Polynomial",children:(L,q)=>{Is(L,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(T){r(r()[1]=T,!0)}})},$$slots:{default:!0}})};Y(k,M=>{l(d)==="emsc"&&M(S)})}N(p,b)},$$slots:{default:!0}})),_e()}var Td=X("<!> <!>",1);function Pd(t,e){we(e,!0);let r=D(e,"params",15),s=D(e,"varind",15),o=D(e,"settings",15),a=An(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let f=re(!1);const u=C(()=>e.nvars?Math.round(e.nvars*.1):1);ge(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-l(u))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+l(u))&&r(r()[1]=e.right,!0),s(s()[1]=r()[0],!0),s(s()[2]=r()[1],!0),O(f,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),O(f,!1))}),ge(()=>{o("left: "+r()[0]+" right: "+r()[1])}),rs(t,or({id:"norm",title:c,get settings(){return o()},get isOpen(){return e.isOpen}},()=>a,{children:(d,v)=>{var m=be(),h=K(m);{var g=p=>{var w=Td(),b=K(w);ue(b,{label:"Left",children:(A,E)=>{{let k=C(()=>e.right-l(u));ul(A,{get min(){return e.left},get max(){return l(k)},step:1,decNum:0,get value(){return r()[0]},set value(S){r(r()[0]=S,!0)}})}},$$slots:{default:!0}});var _=P(b,2);ue(_,{label:"Right",children:(A,E)=>{{let k=C(()=>e.left+l(u));ul(A,{get min(){return l(k)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(S){r(r()[1]=S,!0)}})}},$$slots:{default:!0}}),N(p,w)};Y(h,p=>{l(f)&&p(g)})}N(d,m)},$$slots:{default:!0}})),_e()}var Ld=X("<!> <!>",1);function zd(t,e){we(e,!0);let r=D(e,"params",31,()=>Me([3,5]));D(e,"varind",27,()=>-1);let s=D(e,"settings",15);D(e,"nvars",3,0);let o=An(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Spike removal";ge(()=>{s(r()[0]+"/"+r()[1])}),rs(t,or({id:"scale",title:a,get settings(){return s()}},()=>o,{children:(c,f)=>{var u=Ld(),d=K(u);ue(d,{label:"Window",children:(m,h)=>{Is(m,{min:3,max:15,step:2,get value(){return r()[0]},set value(g){r(r()[0]=g,!0)}})},$$slots:{default:!0}});var v=P(d,2);ue(v,{label:"Threshold",children:(m,h)=>{Is(m,{min:3,max:50,get value(){return r()[1]},set value(g){r(r()[1]=g,!0)}})},$$slots:{default:!0}}),N(c,u)},$$slots:{default:!0}})),_e()}var Rd=X("<h2>Selected methods</h2> <!>",1),Id=X("<p>No methods selected</p>"),Fd=X("<p> </p>"),qd=X("<h2>Available methods</h2>"),Od=X("<p>Maximum number of methods is selected.</p>"),Dd=X("<p> </p> <!>",1),Bd=X('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function Vd(t,e){we(e,!0);let r=D(e,"prepobj",31,()=>Me([])),s=D(e,"meta",15),o=D(e,"varind",31,()=>-1),a=D(e,"rawdataShort",15),c=D(e,"prepdataShort",15),f=D(e,"prepmodel",3,null),u=D(e,"reset",3,null),d=D(e,"finalize",3,null);const v=30,m=8,h={savgol:Ad,norm:kd,scale:Cd,baseline:jd,trim:Pd,spikes:zd};let g=re("neutral"),p=re(""),w=re(void 0),b=re(""),_=re(Me([])),A=re(!1),E=re(Me([])),k=re(Me([]));s(new Array(m).fill(""));const S=C(()=>e.rawdata.values.ncols-e.rawdata.nresp);let M=Me(e.rawdata.values.nrows<3?Object.keys(h).filter(ie=>ie!=="scale"):Object.keys(h));q(),r().length!==0&&L();async function L(){r().length!==0&&O(w,e.WASM().then(ie=>{O(g,"applying");const ae=Si(ie,a().values,0,r(),!0,[]),$=Ls(ie,a().values,0,ae,!0);c(wo(a(),$)),O(g,"success")}).catch(ie=>{c(wo(a())),console.error(ie),O(g,"error"),O(p,ie,!0)}),!0)}function q(){const ie=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(ie),O(E,[],!0),O(k,[],!0);return}let ae=[],$=[],de=0,ke=ie;for(let ce of r())ce.id==="trim"?(ae.push(de),$.push(ke),ce.params[0]<de&&(ce.params[0]=de),ce.params[1]>ke&&(ce.params[1]=ke),de=ce.params[0]>de?ce.params[0]:de,ke=ce.params[1]>0&&ce.params[1]<ke?ce.params[1]:ke):(ae.push(de),$.push(ke));O(E,ae,!0),O(k,$,!0),e.setLeft(de),e.setRight(ke)}function T(ie){const ae=rn.find($=>$.id===ie);ae&&(l(E).push(e.left),l(k).push(e.right),r().push({id:ae.id,params:ae.mp}),O(A,!0),O(b,r().length-1))}function j(){r().length<1||(l(E).pop(),l(k).pop(),r().pop(),O(A,!1),O(b,-1))}function y(ie){if(ie<=0)return;const ae=r()[ie],$=r()[ie-1];r(r()[ie-1]=ae,!0),r(r()[ie]=$,!0),W()}function z(ie){if(ie<0||ie===r().length-1)return;const ae=r()[ie],$=r()[ie+1];r(r()[ie+1]=ae,!0),r(r()[ie]=$,!0),W()}function V(ie){ie<0||ie>=r().length||(r(r().filter((ae,$)=>$!==ie)),W())}function B(ie){O(b,ie,!0)}function I(){O(b,null)}function W(){O(g,"neutral"),O(p,""),O(A,!1),O(b,null),f()&&u()(),q(),L(),o(o()[1]=-1,!0),o(o()[2]=-1,!0)}ge(()=>{e.rawdata&&!a()&&a(od(e.rawdata,v))}),ge(()=>{a()&&!c()&&c(wo(a()))}),ge(()=>{(!r()||r().length===0)&&(O(_,[],!0),c(null),O(E,[],!0),O(k,[],!0),O(b,""),s(new Array(m).fill("")))});var oe=Bd(),te=K(oe);let Z;var ne=R(te);ue(ne,{label:"",children:(ie,ae)=>{var $=Rd(),de=P(K($),2);{var ke=ce=>{Ri(ce,{text:"edit",get onclick(){return u()}})};Y(de,ce=>{f()&&u()&&ce(ke)})}N(ie,$)},$$slots:{default:!0}});var se=P(ne,2);{var he=ie=>{ue(ie,{label:"",children:(ae,$)=>{var de=Id();N(ae,de)},$$slots:{default:!0}})},fe=ie=>{var ae=be(),$=K(ae);Qe($,17,r,rt,(de,ke,ce)=>{const Le=C(()=>h[l(ke).id]);var Pe=be(),Ye=K(Pe);{var Je=ut=>{var G=be(),U=K(G);{let J=C(()=>ce===l(b)),ve=C(()=>l(A)?j:null);Ms(U,()=>l(Le),(me,Se)=>{Se(me,{get isOpen(){return l(J)},get left(){return l(E)[ce]},get right(){return l(k)[ce]},pos:ce,get nvars(){return l(S)},moveUp:y,moveDown:z,apply:W,open:B,close:I,remove:V,get cancel(){return l(ve)},get params(){return l(ke).params},set params(je){l(ke).params=je},get varind(){return o()},set varind(je){o(je)},get settings(){return s()[ce]},set settings(je){s(s()[ce]=je,!0)}})})}N(ut,G)},kt=ut=>{var G=be(),U=K(G);{let J=C(()=>ce===l(b)),ve=C(()=>l(A)?j:null);Ms(U,()=>l(Le),(me,Se)=>{Se(me,{pos:ce,get isOpen(){return l(J)},get left(){return l(E)[ce]},get right(){return l(k)[ce]},get nvars(){return l(S)},moveUp:y,moveDown:z,apply:W,open:B,close:I,remove:V,get cancel(){return l(ve)},get params(){return l(ke).params},set params(je){l(ke).params=je},get settings(){return s()[ce]},set settings(je){s(s()[ce]=je,!0)}})})}N(ut,G)};Y(Ye,ut=>{l(ke).id==="norm"||l(ke).id==="trim"?ut(Je):ut(kt,!1)})}N(de,Pe)}),N(ie,ae)};Y(se,ie=>{r().length===0?ie(he):ie(fe,!1)})}var ee=P(se,2);{var le=ie=>{ue(ie,{status:"error",children:(ae,$)=>{var de=Fd(),ke=R(de);Q(()=>pe(ke,l(p))),N(ae,de)},$$slots:{default:!0}})};Y(ee,ie=>{(l(g)==="error"||l(p))&&ie(le)})}var Ae=P(te,2),De=R(Ae);{var Ie=ie=>{ue(ie,{label:" ",children:(ae,$)=>{At(ae,{get onclick(){return d()},text:"Finalize"})},$$slots:{default:!0}})};Y(De,ie=>{!f()&&!l(b)&&r().length>0&&ie(Ie)})}var Ve=P(Ae,2),Fe=R(Ve);ue(Fe,{label:"",children:(ie,ae)=>{var $=qd();N(ie,$)},$$slots:{default:!0}});var Te=P(Fe,2);{var qe=ie=>{ue(ie,{label:"",children:(ae,$)=>{var de=Od();N(ae,de)},$$slots:{default:!0}})},st=ie=>{var ae=be(),$=K(ae);Qe($,17,()=>M,rt,(de,ke)=>{const ce=C(()=>rn.find(Le=>Le.id===l(ke)));ue(de,{children:(Le,Pe)=>{var Ye=Dd(),Je=K(Ye),kt=R(Je),ut=P(Je,2);qf(ut,{onclick:()=>T(l(ce).id)}),Q(()=>pe(kt,l(ce).title)),N(Le,Ye)},$$slots:{default:!0}})}),N(ie,ae)};Y(Te,ie=>{r().length>=m?ie(qe):ie(st,!1)})}Q(()=>Z=bt(te,1,"selected-methods-list svelte-9cg1zq",null,Z,{final:f()!==null&&f()!==void 0})),N(t,oe),_e()}const Yd={small:30,medium:40,large:50,xlarge:60},Wd={small:5,medium:8,large:12,xlarge:15},Ud={small:6,medium:10,large:14,xlarge:18},xo={small:4,medium:6,large:8,xlarge:10},Hd={small:12,medium:15,large:19,xlarge:21},ko={small:11,medium:15,large:17,xlarge:19},Fs={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},ns=["●","◼","▲","▼","⬥","＋","✳","✕"],Gd=.8,Oi=.5,Xd={small:5,medium:8,large:12,xlarge:15},Tt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Di(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function Bi(t,e){if(t!=null&&(Array.isArray(t)&&(t=ct(t)),!(!Re(t)||t.length<1)))return t.apply(r=>Mo((r-e[1])*e[0]+e[2])).v}function mt(t,e){return Bi(t,e.coords)}function Eo(t,e){return Bi(t,e.objects)}function Vi(t,e){if(t!=null&&(Array.isArray(t)&&(t=ct(t)),!(!Re(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function Yi(t,e){return Vi(t,e.coords)}function Wi(t,e){return Vi(t,e.objects)}function Ao(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Tn(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function So(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Tn(Math.abs(Yr(li(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Tn(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let s=Math.ceil(-Tn(Math.log10(e)));return s<=2?[0,Array.from(t).map(o=>o.toFixed(s))]:(r=s-2,s=2,Tn(Math.abs(Cr(t)))<=10?[-r,Array.from(t).map(o=>(o*Math.pow(10,r)).toFixed(s))]:[-r,Array.from(t).map(o=>(o/Math.pow(10,r)).toString())])}function Yt(t,e,r){return Array.isArray(t)&&(t=ct(t)),Re(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Co(t,e,r,s){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=r.coords,a=s.coords;let c="";for(let f=0;f<t.length;f++){const u=Mo((t.v[f]-o[1])*o[0]+o[2]),d=Mo((e.v[f]-a[1])*a[0]+a[2]);c+=u+","+d+" "}return c}function Ui(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>sn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Hi(t,e){if(Array.isArray(t)&&(t=ct(t)),!Re(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=s&c<=o);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function No(t,e,r,s,o,a){o==null&&(o=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const f=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*f,d=Math.floor(Math.log10(u)),v=1/Math.pow(10,d-1),m=Math.round(u*v)/v;let h=Kd(m/r);o&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let g=Math.ceil((c[0]+f)/h)*h,p=Math.floor((c[1]-f)/h)*h;Math.abs(c[0]-g)<h/10&&(g=g+h),Math.abs(c[1]-p)<h/10&&(p=p-h),r=Math.ceil(Tn((p-g)/h))+1,t=Be.zeros(r);for(let w=0;w<r;w++)t.v[w]=g+h*w;if(Math.abs(h)<1){const w=Math.pow(10,1+Math.round(-Math.log10(h)));t=t.apply(b=>Math.round((b+Number.EPSILON)*w)/w)}return t.filter(w=>w>=c[0]&w<=c[1])}function Kd(t,e){const r=Math.floor(Math.log10(t)),s=t/Math.pow(10,r);let o;return s<=1?o=1:s<=2?o=2:s<=5?o=5:o=10,o*Math.pow(10,r)}function Mo(t){return Math.round(t*10)/10}function Jd(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function Gi(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Zd(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Qd(t){let e=-1,r=Zd();for(let s=0;s<t.length;s++)e=r[(e^t[s])&255]^e>>>8;return e^-1}function $d(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const s=Qd(r),o=new Uint8Array(4);o[0]=s>>>24,o[1]=s>>>16,o[2]=s>>>8,o[3]=s&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(o,50),c}function ev(t,e){const r=t.split(","),s=r[0],o=r[1],a=33/3*4,c=o.substring(0,a),f=o.substring(a),u=atob(c),d=new Uint8Array(u.length);for(let h=0;h<d.length;h++)d[h]=u.charCodeAt(h);const v=$d(d,e),m=btoa(String.fromCharCode(...v));return[s,",",m,f].join("")}function tv(t,e,r,s,o){if(r||(r=10),s||(s=10),o||(o=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*o,c=s/2.54*o;setTimeout(()=>{const f=t.clientHeight,u=t.clientWidth;let d=Math.max(a/u,c/f),v=1;d<1&&(v=d,d=1);const m=document.createElement("canvas"),h=m.getContext("2d");m.width=u*(v<1?v:d),m.height=f*(v<1?v:d),t.setAttribute("width",u*d),t.setAttribute("height",f*d),h.fillStyle="white",h.fillRect(0,0,m.width,m.height),h.scale(d,d);const g=new XMLSerializer().serializeToString(t),p=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),w=URL.createObjectURL(p),b=new Image;b.onload=function(){v<0&&(b.width=b.width*v,b.height=b.height*v),h.drawImage(b,0,0,m.width,m.height);const _=m.toDataURL("image/png"),A=ev(_,o),E=document.createElement("a");E.href=A,E.download=`${e}.png`,E.click()},b.src=w},20)}function rv(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,s=t.clientWidth;t.setAttribute("width",s+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${s} ${r}`);const o=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(o),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function nv(t,e,r,s){const o=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":sv(e,r,s)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=o},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=o},500)}).catch(a=>console.error(a))}async function sv(t,e,r){const s=t.clientHeight,o=t.clientWidth,a=Math.max(e/o,r/s),c=document.createElement("canvas"),f=c.getContext("2d");return c.width=o*a,c.height=s*a,f.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((d,v)=>{const m=new XMLSerializer().serializeToString(t),h=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,p=g.createObjectURL(h),w=new Image;w.onload=function(){f.drawImage(w,0,0,c.width,c.height),g.revokeObjectURL(p),c.toBlob(function(b){b?d(b):v(new Error("Failed to create blob"))},"image/png")},w.onerror=function(b){v(b)},w.src=p})}function dl(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function lv(t,e,r,s,o){let a=o.ticks,c=o.tickLabels,f=0;const u=No(a,t,Wd[r.x],!0,o.whole),d=u.length,v=Wi([xo[r.plot]],s)[0],m=Be.fill(e[0],d),h=m.add(v),g=Be.fill(e[1],d);if(c||(a?(f=0,c=a.v.map(q=>Tn(q).toString())):[f,c]=So(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[u,m],[u,g]],w=[[ct([t[0]]),ct([e[0]])],[ct([t[1]]),ct([e[0]])]],b=[[u,h],[u,m]],_=(t[1]-t[0])*.01,A=[[null,null],[[t[1]-(f>9?1:0)*_],[m.v[d-1]]]],E=Ao(f),k=c.length,S=Math.abs(t[1]>t[0]?t[1]-u.v[k-1]:t[1]-u.v[0]),M=Math.abs(t[1]-t[0]),L=Math.abs(u.v[1]-u.v[0]);if(E.length>0&&S<M*.1&&S<L*.5){const q=t[1]>t[0]?k-1:0;c[q]=" "}return{grid:p,axisLine:w,tickCoords:b,tfCoords:A,ticks:a,tickLabels:c,tickFactor:f,tfLabel:E}}function ov(t,e,r,s,o){let a=o.ticks,c=o.tickLabels,f=0;const u=No(o.ticks,e,Ud[r.y],!0,o.whole),d=u.length,v=Wi([xo[r.plot]],s)[0],m=Be.fill(t[0],d),h=m.add(v),g=Be.fill(t[1],d);if(c||(a?(f=0,c=a.v.map(L=>Tn(L).toString())):[f,c]=So(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[m,u],[g,u]],w=[[ct([t[0]]),ct([e[0]])],[ct([t[0]]),ct([e[1]])]],b=[[m,u],[h,u]],_=[[[],[]],[[h.v[d-1]+(Math.abs(f)>9?3:2)*v],[e[1]]]],A=Ao(f),E=c.length,k=Math.abs(e[1]>e[0]?e[1]-u.v[E-1]:e[1]-u.v[0]),S=Math.abs(e[1]-e[0]),M=Math.abs(u.v[1]-u.v[0]);if(A.length>0&&k<S*.1&&k<M*.5){const L=e[1]>e[0]?E-1:0;c[L]=" "}return{grid:p,axisLine:w,tickCoords:b,tfCoords:_,ticks:a,tickLabels:c,tickFactor:f,tfLabel:A}}function av(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Re(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let s,o;if(t.labels?(s=t.labels,o=0):[o,s]=So(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=s.length===r.length;return{colmap:r,breaks:e,labels:s,isCentered:a,labelsFactor:o,fontSize:t.fontSize,labelColor:t.labelColor}}function iv(t,e,r,s){const o=t.colmap.length,a=e*Gd,c=a/o,f=r[1]+(e-a)*.5,u=Xd[s.y],d=r[2]+u*Oi,v=d+u*(1+Oi),m=t.isCentered?c/2:0;return{start:f,top:d,height:u,width:c,dxl:m,ltop:v}}function Pn(t,e,r){if(!t||!e||!r||typeof r!="function")return;const s=t.target;if(s.tagName===e){const o=Array.prototype.indexOf.call(s.parentNode.children,s);if(o<0)return;r(o),t.stopPropagation()}}function cv(t,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function uv(t,e){const r="Arial",s=e/8,o=e*1.5,a=Array(t.length),c=Array(t.length);let f=0,u=0,d=0;for(let m=0;m<t.length;m++){const h=cv("  "+t[m].label+"  ",e+"px "+r);d=h>d?h:d;const g=e*t[m].labelHeight+2*s;a[m]=g,c[m]=f,f=f+g,u=u+g}const v=o+2*s+d;return[c,a,o,s,u,v]}function fv(t,e,r,s,o){const[a,c,f,u,d,v]=uv(t.items,s*t.fontSize),m=t.position.includes("left")?e[0]+o:t.position.includes("right")?e[1]-v-o:(e[1]+e[0]-v)*.5,h=t.position.includes("top")?r[1]+o:t.position.includes("bottom")?r[0]-d-o:(r[1]+r[0]-d)*.5;return{lgl:m,lgt:h,lgw:v,lgh:d,ely:a,elh:c,elw:f,elp:u}}function sn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,o="";for(;s<t.length;){const a=t[s];if((a==="^"||a==="_")&&s<t.length-1){const c=a==="^";if(s++,t[s]==="("){let f=s+1;for(;f<t.length&&t[f]!==")";)f++;const u=t.slice(s+1,f);o+=c?e(u):r(u),s=f+1}else if(t[s]==="-"||t[s]==="–"){const f=t.slice(s,s+2);o+=c?e(f):r(f),s=s+2}else o+=c?e(t[s]):r(t[s]),s++}else o+=a,s++}return o}var dv=Ee('<line vector-effect="non-scaling-stroke"></line>'),vv=Ee("<g></g>");function jo(t,e){we(e,!0);let r=D(e,"lineCoords",19,()=>[]),s=D(e,"lineColor",19,()=>Tt.DARKGRAY),o=D(e,"lineType",3,1),a=D(e,"lineWidth",3,1),c=D(e,"className",3,"");const f=Gt("axes");let u=C(()=>mt(r()[0][0],f.tX())),d=C(()=>mt(r()[1][0],f.tX())),v=C(()=>mt(r()[0][1],f.tY())),m=C(()=>mt(r()[1][1],f.tY())),h=C(()=>`stroke:${s()};stroke-width: ${a()}px;stroke-dasharray:${Fs[f.scales().plot][o()-1]}`);var g=be(),p=K(g);{var w=b=>{var _=vv();Qe(_,21,()=>l(u),rt,(A,E,k)=>{var S=dv();Q(()=>{F(S,"x1",l(u)[k]),F(S,"x2",l(d)[k]),F(S,"y1",l(v)[k]),F(S,"y2",l(m)[k]),ht(S,l(h))}),N(A,S)}),Q(()=>bt(_,0,ju(c()))),N(b,_)};Y(p,b=>{l(u)&&l(v)&&l(d)&&b(w)})}N(t,g),_e()}var hv=Ee('<text text-anchor="middle"><!></text>'),mv=Ee("<text><!></text>"),gv=Ee("<text><!></text>"),pv=Ee('<g class="tick-labels"><!></g>');function Xi(t,e){we(e,!0);let r=D(e,"pos",3,1),s=D(e,"las",3,1),o=C(()=>["middle","middle","start","middle","end"][r()]),a=C(()=>`fill:${e.textColor};`);const c=Gt("axes");let f=C(()=>mt(e.tickCoords[1][0],c.tX())),u=C(()=>mt(e.tickCoords[1][1],c.tY())),d=C(()=>ko[c.scales().plot]),v=C(()=>[0,0,l(d),0,-l(d)][r()]),m=C(()=>[0,l(d),0,-l(d),0][r()]);var h=pv(),g=R(h);{var p=b=>{var _=be(),A=K(_);Qe(A,17,()=>l(f),rt,(E,k,S)=>{var M=hv();F(M,"data-id",S),F(M,"dx",0);var L=R(M);jt(L,()=>e.tickLabels[S],!0),Q(()=>{F(M,"x",l(f)[S]),F(M,"y",l(u)[S]),F(M,"dy",l(v)*1.25),F(M,"transform",`rotate(-90, ${l(f)[S]}, ${l(u)[S]})`)}),N(E,M)}),N(b,_)},w=b=>{var _=be(),A=K(_);{var E=S=>{var M=be(),L=K(M);Qe(L,17,()=>l(f),rt,(q,T,j)=>{var y=mv();F(y,"data-id",j),F(y,"dy",0),F(y,"text-anchor","end");var z=R(y);jt(z,()=>e.tickLabels[j],!0),Q(()=>{F(y,"x",l(f)[j]),F(y,"y",l(u)[j]),F(y,"dx",-l(m)/2),F(y,"transform",`rotate(-90, ${l(f)[j]}, ${l(u)[j]})`)}),N(q,y)}),N(S,M)},k=S=>{var M=be(),L=K(M);Qe(L,17,()=>l(f),rt,(q,T,j)=>{var y=gv();F(y,"data-id",j);var z=R(y);jt(z,()=>e.tickLabels[j],!0),Q(()=>{F(y,"x",l(f)[j]),F(y,"y",l(u)[j]),F(y,"dx",l(v)),F(y,"dy",l(m)),F(y,"text-anchor",l(o))}),N(q,y)}),N(S,M)};Y(A,S=>{s()===2&&r()===1?S(E):S(k,!1)},!0)}N(b,_)};Y(g,b=>{s()===2&&r()===4?b(p):b(w,!1)})}Q(()=>ht(h,l(a))),N(t,h),_e()}const bv=(t,e=Rt,r=Rt)=>{const s=C(()=>e().colmap.length);var o=Av(),a=K(o);Qe(a,17,()=>e().colmap,rt,(v,m,h)=>{const g=C(()=>r().start+h*r().width);var p=xv(),w=K(p),b=P(w);F(b,"dy",0);var _=R(b);jt(_,()=>e().labels[h],!0),Q(()=>{F(w,"x",l(g)),F(w,"y",r().top),F(w,"width",r().width),F(w,"height",r().height),F(w,"fill",l(m)),F(b,"x",l(g)),F(b,"y",r().ltop),F(b,"dx",r().dxl),F(b,"fill",e().labelColor),F(b,"font-size",e().fontSize+"em")}),N(v,p)});var c=P(a);{var f=v=>{const m=C(()=>r().start+l(s)*r().width);var h=kv();F(h,"dx",0),F(h,"dy",0);var g=R(h);jt(g,()=>e().labels[l(s)],!0),Q(()=>{F(h,"x",l(m)),F(h,"y",r().ltop),F(h,"fill",e().labelColor),F(h,"font-size",`${e().fontSize??""}em`)}),N(v,h)};Y(c,v=>{e().isCentered||v(f)})}var u=P(c);{var d=v=>{const m=C(()=>r().start+l(s)*r().width);var h=Ev(),g=R(h);jt(g,()=>Ao(e().labelsFactor),!0),Q(()=>{F(h,"x",l(m)),F(h,"y",r().ltop),F(h,"fill",e().labelColor),F(h,"font-size",`${e().fontSize??""}em`)}),N(v,h)};Y(u,v=>{e().labelsFactor!==0&&v(d)})}N(t,o)};var wv=Ee('<text fill="crimson" text-anchor="middle"> </text>'),_v=Ee('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),yv=Ee("<!><!><!><!><!>",1),xv=Ee('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),kv=Ee('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Ev=Ee('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Av=Ee("<!><!><!>",1),Sv=Ee("<line></line>"),Cv=Ee('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Nv=Ee('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Mv=Ee('<svg><rect height="100%" width="100%"></rect><!></svg>'),jv=Ee('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Tv=Ee('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Pv=Ee('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Lv=Ee('<g class="plot-labels"><!><!><!></g>'),zv=Ee('<g class="axis x-axis"><!></g>'),Rv=Ee('<g class="axis y-axis"><!></g>'),Iv=Ee('<rect fill="transparent" id="axes-box"></rect>'),Fv=Ee('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),qv=Ee('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Ov=Ee('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Dv=Ee('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),Bv=X('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),Vv=X('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),Yv=X(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Ki(t,e){we(e,!0);const r=(ye,Xe=Rt,He=Rt)=>{var Ot=be(),Zt=K(Ot);{var _r=Lt=>{var lt=be(),Ke=K(lt);{var Wt=Et=>{var dt=wv(),Lr=R(dt);Q(()=>{F(dt,"x",l(Te)[0]-10),F(dt,"y",l(Ve)),F(dt,"transform",`rotate(-90, ${l(Te)[0]-10}, ${l(Ve)})`),pe(Lr,He().error)}),N(Et,dt)},Ct=Et=>{var dt=_v(),Lr=R(dt);Q(()=>{F(dt,"x",l(Fe)),F(dt,"y",l(qe)[0]),pe(Lr,He().error)}),N(Et,dt)};Y(Ke,Et=>{He().pos===4?Et(Wt):Et(Ct,!1)})}N(Lt,lt)},dn=Lt=>{var lt=yv(),Ke=K(lt);{var Wt=Ce=>{jo(Ce,{get lineCoords(){return Xe().grid},get lineColor(){return Tt.MIDDLEGRAY},lineType:3})};Y(Ke,Ce=>{He().showGrid&&Ce(Wt)})}var Ct=P(Ke);jo(Ct,{get lineCoords(){return Xe().axisLine},get lineColor(){return Tt.DARKGRAY},lineType:1});var Et=P(Ct);jo(Et,{get lineCoords(){return Xe().tickCoords},get lineColor(){return Tt.DARKGRAY},lineType:1});var dt=P(Et);{var Lr=Ce=>{Xi(Ce,{get las(){return He().las},get pos(){return He().pos},get tickCoords(){return Xe().tickCoords},get tickLabels(){return Xe().tickLabels},get tickColor(){return Tt.DARKGRAY},get hideLast(){return He().hideLast}})};Y(dt,Ce=>{Xe().tickCoords.length===2&&Xe().tickLabels.length===Xe().tickCoords[1][0].length&&Ce(Lr)})}var Vs=P(dt);{var $e=Ce=>{{let Ut=C(()=>[Xe().tfLabel]);Xi(Ce,{get pos(){return He().pos},get tickCoords(){return Xe().tfCoords},get tickLabels(){return l(Ut)},get textColor(){return Tt.DARKGRAY}})}};Y(Vs,Ce=>{Xe().tickFactor!==0&&Ce($e)})}N(Lt,lt)};Y(Zt,Lt=>{He().error?Lt(_r):Lt(dn,!1)})}N(ye,Ot)},s=(ye,Xe=Rt,He=Rt)=>{const Ot=C(()=>He().elw+2*He().elp),Zt=C(()=>He().elp),_r=C(()=>He().elh),dn=C(()=>He().ely);var Lt=Mv(),lt=R(Lt),Ke=P(lt);Qe(Ke,17,()=>Xe().items,rt,(Wt,Ct,Et)=>{var dt=Nv();F(dt,"x",0);var Lr=R(dt);{var Vs=Dn=>{var zt=Sv();Q(()=>{F(zt,"x1",l(Zt)),F(zt,"x2",l(Ot)-l(Zt)),F(zt,"y1",l(_r)[Et]/2),F(zt,"y2",l(_r)[Et]/2),F(zt,"stroke",l(Ct).line.lineColor),F(zt,"stroke-width",l(Ct).line.lineWidth),F(zt,"stroke-dasharray",l(te)[l(Ct).line.lineType-1])}),N(Dn,zt)};Y(Lr,Dn=>{l(Ct).line&&Dn(Vs)})}var $e=P(Lr);{var Ce=Dn=>{var zt=Cv(),P0=R(zt);Q(()=>{F(zt,"x",l(Ot)/2),F(zt,"y",l(_r)[Et]/2),F(zt,"fill",l(Ct).point.faceColor),F(zt,"stroke-width",l(Ct).point.lineWidth),F(zt,"stroke",l(Ct).point.lineColor),F(zt,"font-size",`${l(Ct).point.markerSize??""}em`),pe(P0,ns[l(Ct).point.marker-1])}),N(Dn,zt)};Y($e,Dn=>{l(Ct).point&&Dn(Ce)})}var Ut=P($e),T0=R(Ut);jt(T0,()=>l(Ct).label,!0),Q(()=>{F(dt,"y",l(dn)[Et]),F(dt,"width",He().lgw),F(dt,"height",l(_r)[Et]),F(Ut,"x",l(Ot)+l(Zt)),F(Ut,"y",l(_r)[Et]/2),F(Ut,"fill",Tt.LEGEND),F(Ut,"font-size",`${Xe().fontSize??""}em`)}),N(Wt,dt)}),Q(()=>{F(Lt,"x",He().lgl),F(Lt,"y",He().lgt),F(Lt,"height",He().lgh),F(Lt,"width",He().lgw),F(lt,"fill",Xe().faceColor),F(lt,"stroke",Xe().lineColor),F(lt,"stroke-width",Xe().lineWidth)}),N(ye,Lt)};let o=D(e,"limX",19,()=>[0,1]),a=D(e,"limY",19,()=>[0,1]),c=D(e,"margins",19,()=>[1,1.1,.55,.6]),f=D(e,"downloadLinks",3,"none"),u=D(e,"fileName",3,"plot"),d=D(e,"pngWidth",3,8),v=D(e,"pngHeight",3,8),m=D(e,"pngRes",3,300),h=D(e,"clipboardWidth",3,1200),g=D(e,"clipboardHeight",3,800),p=D(e,"onclick",3,null),w=D(e,"onmousemove",3,null),b=D(e,"onmousedown",3,null),_=D(e,"onmouseup",3,null);function A(ye,Xe){if(Xe&&ye.target.id=="axes-box"){const He=Yi([ye.offsetX-l(ne)],l(De))[0],Ot=Yi([ye.offsetY-l(se)],l(Ie))[0];Xe(He,Ot)}}function E(ye){ye.preventDefault(),A(ye,b())}function k(ye){ye.preventDefault(),A(ye,_())}function S(ye){ye.preventDefault(),A(ye,w())}function M(ye){ye.preventDefault(),A(ye,p())}async function L(ye){nv(ye.target,l(y),h(),g())}function q(){rv(l(y),u())}function T(){tv(l(y),u(),d(),v(),m())}const j="plottingArea"+Math.round(Math.random()*1e4);let y=re(0),z=re(0),V=re(0);const B=C(()=>({plot:Jd(l(z),l(V)),x:Gi(l(z)),y:Gi(l(V))})),I=C(()=>c().map(ye=>ye*Yd[l(B).plot])),W=C(()=>Hd[l(B).plot]),oe=C(()=>xo[l(B).plot]),te=C(()=>Fs[l(B).plot]),Z=C(()=>l($).show&&l($).label!==""?l(W)*1.5:0),ne=C(()=>l(de).show&&l(de).label!==""?l(W)*1.5:0),se=C(()=>e.title&&e.title!==""?l(W)*1.5:0),he=C(()=>l(z)>l(ne)?l(z)-l(ne):0),fe=C(()=>l(V)>l(Z)+l(se)?l(V)-l(Z)-l(se):0),ee=C(()=>l(fe)-l(I)[0]-l(I)[2]),le=C(()=>l(he)-l(I)[1]-l(I)[3]),Ae=C(()=>Di(o(),2)&&Di(a(),2)&&l(he)>l(I)[1]+l(I)[3]&&l(fe)>l(I)[0]+l(I)[2]),De=C(()=>l(Ae)?{coords:[l(le)/(o()[1]-o()[0]),o()[0],l(I)[1]],objects:[l(le)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Ie=C(()=>l(Ae)?{coords:[-l(ee)/(a()[1]-a()[0]),a()[1],l(I)[2]],objects:[l(ee)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Ve=C(()=>l(ee)*.5+l(se)+l(I)[2]),Fe=C(()=>l(le)*.5+l(ne)+l(I)[1]),Te=C(()=>l(Ae)?mt(o(),l(De)):[0,1]),qe=C(()=>l(Ae)?mt(a(),l(Ie)):[1,0]),st=C(()=>sn(e.title)),ie=C(()=>l(st)?l(st).length===e.title.left?1:1.4:0);let ae=re(Me({show:!1})),$=re(Me({show:!1,error:""})),de=re(Me({show:!1,error:""})),ke=re(Me({show:!1,colmap:null,breaks:null})),ce=re(Me({show:!1,items:null,position:null}));const Le=C(()=>l(Ae)&&l(ke)&&l(ke).show?av(l(ke)):null),Pe=C(()=>l(Ae)&&l($).show?lv(o(),a(),l(B),l(Ie),l($)):null),Ye=C(()=>l(Ae)&&l(de).show?ov(o(),a(),l(B),l(De),l(de)):null),Je=C(()=>l(Ae)&&l(Le)?iv(l(Le),l(le),l(I),l(B)):null),kt=C(()=>l(Ae)&&l(ce)&&l(ce).show&&l(Te)?fv(l(ce),l(Te),l(qe),l(W),l(oe)):null);Uc("axes",{setBox:ye=>O(ae,ye,!0),setXAxis:ye=>O($,ye,!0),setYAxis:ye=>O(de,ye,!0),setColmapLegend:ye=>O(ke,ye,!0),setGroupLegend:ye=>O(ce,ye,!0),scales:()=>l(B),tX:()=>l(De),tY:()=>l(Ie),limX:()=>o(),limY:()=>a()});var ut=Yv();let G;var U=R(ut),J=P(R(U));{var ve=ye=>{var Xe=Lv(),He=R(Xe);{var Ot=lt=>{var Ke=jv();F(Ke,"dx",0),F(Ke,"dy",0);var Wt=R(Ke);jt(Wt,()=>l($).label,!0),Q(()=>{F(Ke,"x",l(Fe)),F(Ke,"y",l(fe)+l(se))}),N(lt,Ke)};Y(He,lt=>{l($).show&&l($).label&&l($).label!==""&&lt(Ot)})}var Zt=P(He);{var _r=lt=>{var Ke=Tv();F(Ke,"dx",0),F(Ke,"dy",0);var Wt=R(Ke);jt(Wt,()=>l(de).label,!0),Q(()=>{F(Ke,"x",l(W)/1.1*l(de).labelHeight),F(Ke,"y",l(Ve)),F(Ke,"transform",`rotate(-90, ${l(W)*l(de).labelHeight/1.1}, ${l(Ve)})`)}),N(lt,Ke)};Y(Zt,lt=>{l(de).show&&l(de).label&&l(de).label!==""&&lt(_r)})}var dn=P(Zt);{var Lt=lt=>{var Ke=Pv();F(Ke,"dx",0),F(Ke,"dy",0);var Wt=R(Ke);jt(Wt,()=>l(st),!0),Q(()=>{F(Ke,"x",l(Fe)),F(Ke,"y",l(W)*l(ie))}),N(lt,Ke)};Y(dn,lt=>{l(st)&&l(st)!==""&&lt(Lt)})}N(ye,Xe)};Y(J,ye=>{l(Ae)&&ye(ve)})}var me=P(J),Se=R(me),je=R(Se),Pt=R(je),Pr=P(Se);{var wt=ye=>{var Xe=Dv(),He=K(Xe);{var Ot=$e=>{var Ce=zv(),Ut=R(Ce);r(Ut,()=>l(Pe),()=>l($)),N($e,Ce)};Y(He,$e=>{l($).show&&l(Pe)&&$e(Ot)})}var Zt=P(He);{var _r=$e=>{var Ce=Rv(),Ut=R(Ce);r(Ut,()=>l(Ye),()=>l(de)),N($e,Ce)};Y(Zt,$e=>{l(de).show&&l(Ye)&&$e(_r)})}var dn=P(Zt),Lt=R(dn);{var lt=$e=>{var Ce=Iv();Ce.__keydown=M,Ce.__click=M,Ce.__mousemove=S,Ce.__mousedown=E,Ce.__mouseup=k,Q(()=>{F(Ce,"stroke",l(ae).lineColor),F(Ce,"stroke-width",`${l(ae).lineWidth??""}px`),F(Ce,"x",l(Te)[0]),F(Ce,"y",l(qe)[1]),F(Ce,"width",l(Te)[1]-l(Te)[0]),F(Ce,"height",l(qe)[0]-l(qe)[1])}),N($e,Ce)},Ke=$e=>{var Ce=Fv();Ce.__keydown=M,Ce.__click=M,Ce.__mousemove=S,Ce.__mousedown=E,Ce.__mouseup=k,Q(()=>{F(Ce,"x",l(Te)[0]),F(Ce,"y",l(qe)[1]),F(Ce,"width",l(Te)[1]-l(Te)[0]),F(Ce,"height",l(qe)[0]-l(qe)[1])}),N($e,Ce)};Y(Lt,$e=>{l(ae).show?$e(lt):$e(Ke,!1)})}var Wt=P(dn),Ct=R(Wt);Br(Ct,()=>e.children??Rt);var Et=P(Wt);{var dt=$e=>{var Ce=qv(),Ut=R(Ce);bv(Ut,()=>l(Le),()=>l(Je)),N($e,Ce)};Y(Et,$e=>{l(Je)&&$e(dt)})}var Lr=P(Et);{var Vs=$e=>{var Ce=Ov(),Ut=R(Ce);s(Ut,()=>l(ce),()=>l(kt)),N($e,Ce)};Y(Lr,$e=>{l(kt)&&$e(Vs)})}Q(()=>F(Wt,"clip-path",`url(#${j})`)),N(ye,Xe)};Y(Pr,ye=>{l(Ae)&&ye(wt)})}En(U,ye=>O(y,ye),()=>l(y));var Ze=P(U,2);{var nt=ye=>{var Xe=Bv();N(ye,Xe)},gt=ye=>{var Xe=Vv(),He=R(Xe);He.__click=q,He.__keydown=q;var Ot=P(He,2);Ot.__click=T,Ot.__keydown=T;var Zt=P(Ot,2);Zt.__click=L,Zt.__keydown=L,N(ye,Xe)};Y(Ze,ye=>{l(Ae)?ye(gt,!1):ye(nt)})}Q(()=>{G=bt(ut,1,`plot-container show-download-links-${f()??""}`,"svelte-1t5q9z1",G,{"plot-error":!l(Ae)}),ht(U,`font-size:${l(W)??""}px`),F(me,"x",l(ne)),F(me,"y",l(se)),F(me,"width",l(he)),F(me,"height",l(fe)),F(je,"id",j),F(Pt,"x",l(Te)[0]),F(Pt,"y",l(qe)[1]),F(Pt,"width",l(Te)[1]-l(Te)[0]),F(Pt,"height",l(qe)[0]-l(qe)[1])}),ti(U,"clientWidth",ye=>O(z,ye)),ti(U,"clientHeight",ye=>O(V,ye)),N(t,ut),_e()}at(["keydown","click","mousemove","mousedown","mouseup"]);function Ji(t,e){we(e,!0);let r=D(e,"tickLabels",7),s=D(e,"las",3,1),o=D(e,"whole",3,!1),a=D(e,"show",3,!0),c=D(e,"showGrid",3,!1);const f=Gt("axes");ge(()=>{const u=sn(e.label),d=u?u.length===e.label.length?1:1.4:0;let v,m="";e.ticks&&([v,m]=Hi(e.ticks,f.limX())),!m&&r()&&(h=>{var g=Al(h,2);r(g[0]),m=g[1]})(Ui(r(),v)),f.setXAxis({show:a(),error:m,label:u,ticks:v,labelHeight:d,showGrid:c(),las:s(),whole:o(),tickLabels:r()})}),_e()}function Zi(t,e){we(e,!0);let r=D(e,"tickLabels",7),s=D(e,"las",3,1),o=D(e,"whole",3,!1),a=D(e,"show",3,!0),c=D(e,"showGrid",3,!1);const f=Gt("axes");ge(()=>{const u=sn(e.label),d=u?u.length===e.label.length?1:1.4:0;let v,m="";e.ticks&&([v,m]=Hi(e.ticks,f.limY())),!m&&r()&&(h=>{var g=Al(h,2);r(g[0]),m=g[1]})(Ui(r(),v)),f.setYAxis({show:a(),error:m,label:u,ticks:v,labelHeight:d,showGrid:c(),las:s(),whole:o(),tickLabels:r(),pos:4})}),_e()}function Qi(t,e){we(e,!0);let r=D(e,"lineWidth",3,1),s=D(e,"lineColor",3,"#606060");const o=Gt("axes");ge(()=>{o.setBox({show:!0,lineWidth:r(),lineColor:s()})}),_e()}var Wv=Ee("<rect></rect>"),Uv=Ee("<g></g>");function vl(t,e){we(e,!0);let r=D(e,"faceColor",19,()=>Tt.PRIMARY),s=D(e,"lineColor",19,r),o=D(e,"lineWidth",3,1),a=D(e,"className",3,"series-rect");const c=C(()=>Yt(e.left,"Rectangles (left)")),f=C(()=>l(c)?Yt(e.top,"Rectangles (top)",l(c).length):null),u=C(()=>l(f)?typeof e.width!="object"?Be.fill(e.width,l(c).length):e.width:null),d=C(()=>l(f)?typeof e.height!="object"?Be.fill(e.height,l(c).length):e.height:null),v=Gt("axes"),m=C(()=>l(c)?mt(l(c),v.tX()):null),h=C(()=>l(f)?mt(l(f),v.tY()):null),g=C(()=>l(u)?Eo(l(u),v.tX()):null),p=C(()=>l(d)?Eo(l(d),v.tY()):null),w=C(()=>`fill:${r()};stroke:${s()};stroke-width:${o()}px;`),b=C(()=>l(m)&&l(h)&&l(g)&&l(p)&&l(g).length===l(m).length&&l(p).length===l(m).length);var _=be(),A=K(_);{var E=k=>{var S=Uv();S.__click=M=>Pn(M,"rect",e.onclick),Qe(S,21,()=>e.left,rt,(M,L,q)=>{var T=Wv();Q(()=>{F(T,"x",l(m)[q]),F(T,"y",l(h)[q]),F(T,"width",l(g)[q]),F(T,"height",l(p)[q])}),N(M,T)}),Q(()=>{bt(S,0,`series ${a()??""}`),ht(S,l(w))}),N(k,S)};Y(A,k=>{l(b)&&k(E)})}N(t,_),_e()}at(["click"]);var Hv=Ee("<line></line>"),Gv=Ee('<g class="series series-segment"></g>');function Xv(t,e){we(e,!0);let r=D(e,"lineColor",19,()=>Tt.PRIMARY),s=D(e,"lineType",3,1),o=D(e,"lineWidth",3,1);const a=C(()=>Yt(e.xStart,"Segments")),c=C(()=>l(a)?Yt(e.yStart,"Segments",l(a).length):null),f=C(()=>l(c)?Yt(e.xEnd,"Segments",l(a).length):null),u=C(()=>l(f)?Yt(e.yEnd,"Segments",l(a).length):null),d=Gt("axes"),v=C(()=>l(a)?mt(l(a),d.tX()):null),m=C(()=>l(f)?mt(l(f),d.tX()):null),h=C(()=>l(c)?mt(l(c),d.tY()):null),g=C(()=>l(u)?mt(l(u),d.tY()):null),p=C(()=>`stroke:${r()};stroke-width: ${o()}px;stroke-dasharray:${Fs[d.scales().plot][s()-1]}`),w=C(()=>l(v)&&l(m)&&l(h)&&l(g));var b=be(),_=K(b);{var A=E=>{var k=Gv();k.__click=S=>Pn(S,"line",e.onclick),Qe(k,21,()=>l(v),rt,(S,M,L)=>{var q=Hv();Q(()=>{F(q,"x1",l(v)[L]),F(q,"x2",l(m)[L]),F(q,"y1",l(h)[L]),F(q,"y2",l(g)[L])}),N(S,q)}),Q(()=>ht(k,l(p))),N(E,k)};Y(_,E=>{l(w)&&E(A)})}N(t,b),_e()}at(["click"]);var Kv=Ee("<text><!></text>"),Jv=Ee("<text><!></text>"),Zv=Ee("<text><!></text>"),Qv=Ee('<g class="series series-textlabels"><!></g>');function hl(t,e){we(e,!0);let r=D(e,"pos",3,0),s=D(e,"faceColor",19,()=>Tt.PRIMARY_TEXT),o=D(e,"lineColor",3,"transparent"),a=D(e,"lineWidth",3,0),c=D(e,"textSize",3,1),f=D(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],d=C(()=>Yt(e.xValues,"TextLabels")),v=C(()=>l(d)?Yt(e.yValues,"TextLabels",l(d).length):null),m=C(()=>l(v)?Array.isArray(e.labels)&&e.labels.length!==l(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=C(()=>l(m)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Gt("axes"),p=C(()=>l(d)&&l(h)!==null?mt(l(d),g.tX()):null),w=C(()=>l(v)&&l(p)?mt(l(v),g.tY()):null),b=C(()=>ko[g.scales().plot]),_=C(()=>[0,0,-l(b),0,l(b),l(b)]),A=C(()=>[0,l(b),0,-l(b),0,l(b)]),E=C(()=>`fill:${s()};stroke-width:${a()}px;stroke:${o()};font-size:${c()}em;`),k=C(()=>l(p)&&l(w)&&l(h)!==null&&l(m)&&l(p).length===l(w).length);var S=be(),M=K(S);{var L=q=>{var T=Qv();T.__click=V=>Pn(V,"text",e.onclick);var j=R(T);{var y=V=>{var B=be(),I=K(B);Qe(I,17,()=>l(p),rt,(W,oe,te)=>{var Z=Kv();F(Z,"data-id",te);var ne=R(Z);jt(ne,()=>e.labels,!0),Q(()=>{F(Z,"x",l(p)[te]),F(Z,"y",l(w)[te]),F(Z,"dx",l(_)[r()]),F(Z,"dy",l(A)[r()]),F(Z,"transform",f()!==void 0?`rotate(${f()}, ${l(p)[te]+l(_)[r()]}, ${l(w)[te]+l(A)[r()]})`:""),F(Z,"text-anchor",u[r()[te]])}),N(W,Z)}),N(V,B)},z=V=>{var B=be(),I=K(B);{var W=te=>{var Z=be(),ne=K(Z);Qe(ne,17,()=>l(p),rt,(se,he,fe)=>{var ee=Jv();F(ee,"data-id",fe);var le=R(ee);jt(le,()=>e.labels[fe],!0),Q(()=>{F(ee,"x",l(p)[fe]),F(ee,"y",l(w)[fe]),F(ee,"dx",l(_)[r()[fe]]),F(ee,"dy",l(A)[r()[fe]]),F(ee,"transform",f()!==void 0?`rotate(${f()}, ${l(p)[fe]+l(_)[r()]}, ${l(w)[fe]+l(A)[r()]})`:""),F(ee,"text-anchor",u[r()[fe]])}),N(se,ee)}),N(te,Z)},oe=te=>{var Z=be(),ne=K(Z);Qe(ne,17,()=>l(p),rt,(se,he,fe)=>{var ee=Zv();F(ee,"data-id",fe);var le=R(ee);jt(le,()=>e.labels[fe],!0),Q(()=>{F(ee,"x",l(p)[fe]),F(ee,"y",l(w)[fe]),F(ee,"dx",l(_)[r()]),F(ee,"dy",l(A)[r()]),F(ee,"transform",f()!==void 0?`rotate(${f()}, ${l(p)[fe]+l(_)[r()]}, ${l(w)[fe]+l(A)[r()]})`:""),F(ee,"text-anchor",u[r()])}),N(se,ee)}),N(te,Z)};Y(I,te=>{Array.isArray(r())||ArrayBuffer.isView(r())?te(W):te(oe,!1)},!0)}N(V,B)};Y(j,V=>{typeof e.labels=="string"?V(y):V(z,!1)})}Q(()=>ht(T,l(E))),N(q,T)};Y(M,q=>{l(k)&&q(L)})}N(t,S),_e()}at(["click"]),at(["click"]);var $v=Ee("<text> </text>"),e1=Ee('<g text-anchor="middle"></g>');function t1(t,e){we(e,!0);let r=D(e,"marker",3,1),s=D(e,"faceColor",3,"transparent"),o=D(e,"lineColor",19,()=>Tt.PRIMARY),a=D(e,"lineWidth",3,1),c=D(e,"markerSize",3,1);const f=C(()=>typeof r()!="number"||r()<1||r()>ns.length?(console.error('Points: parameter "marker" must be a number from 1 to '+ns.length+"."),null):ns[r()-1]),u=C(()=>Yt(e.xValues,"Points")),d=C(()=>l(u)?Yt(e.yValues,"Points",l(u).length):null),v=Gt("axes"),m=C(()=>l(u)?mt(l(u),v.tX()):null),h=C(()=>l(m)&&l(d)?mt(l(d),v.tY()):null),g=C(()=>["＋","✳","✕"].includes(l(f))?`fill:${o()&&o()!=="transparent"?o():s()};stroke-width:0px;font-size:${c()}em;`:`fill:${s()};stroke-width:${a()}px;stroke:${o()}; font-size:${c()}em;`),p=C(()=>["◼","⬥","＋","✳","✕"].includes(l(f))?"series-points2":"series-points1"),w=C(()=>l(m)&&l(h)&&l(m).length===l(h).length);var b=be(),_=K(b);{var A=E=>{var k=e1();k.__click=S=>Pn(S,"text",e.onclick),Qe(k,21,()=>l(m),rt,(S,M,L)=>{var q=$v(),T=R(q);Q(()=>{F(q,"x",l(m)[L]),F(q,"y",l(h)[L]),pe(T,l(f))}),N(S,q)}),Q(()=>{bt(k,0,`series series-points ${l(p)??""}`),ht(k,l(g))}),N(E,k)};Y(_,E=>{l(w)&&E(A)})}N(t,b),_e()}at(["click"]);var r1=Ee('<g class="series series-line"><polyline class="line"></polyline></g>');function ln(t,e){we(e,!0);let r=D(e,"lineColor",19,()=>Tt.PRIMARY),s=D(e,"lineType",3,1),o=D(e,"lineWidth",3,1);const a=C(()=>Yt(e.xValues,"Lines")),c=C(()=>l(a)?Yt(e.yValues,"Lines",l(a).length):null),f=Gt("axes"),u=C(()=>l(a)&&l(c)?Co(l(a),l(c),f.tX(),f.tY()):null),d=C(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Fs[f.scales().plot][s()-1]}`);var v=be(),m=K(v);{var h=g=>{var p=r1();p.__click=b=>Pn(b,"polyline",e.onclick);var w=R(p);Q(()=>{ht(p,l(d)),F(w,"points",l(u))}),N(g,p)};Y(m,g=>{l(u)&&g(h)})}N(t,v),_e()}at(["click"]);var n1=Ee('<polyline class="line"></polyline>'),s1=Ee('<g class="series series-multiline"></g>');function $i(t,e){we(e,!0);let r=D(e,"lineColor",19,()=>Tt.PRIMARY),s=D(e,"lineType",3,1),o=D(e,"lineWidth",3,1);const a=C(()=>Yt(e.xValues,"Multilines")),c=C(()=>l(a)?gr(e.yValues)?(l(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),f=Gt("axes"),u=C(()=>{if(!l(a)||!l(c))return null;const g=new Array(l(c).ncols);for(let p=0;p<g.length;p++)g[p]=Co(l(a),l(c).getcolumn(p+1),f.tX(),f.tY());return g}),d=C(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Fs[f.scales().plot][s()-1]}`);var v=be(),m=K(v);{var h=g=>{var p=s1();p.__click=w=>Pn(w,"polyline",e.onclick),Qe(p,21,()=>l(u),rt,(w,b)=>{var _=n1();Q(()=>F(_,"points",l(b))),N(w,_)}),Q(()=>ht(p,l(d))),N(g,p)};Y(m,g=>{l(u)&&l(u).length>0&&g(h)})}N(t,v),_e()}at(["click"]);function l1(t,e){we(e,!0);let r=D(e,"show",3,!0),s=D(e,"position",3,"topleft"),o=D(e,"lineColor",19,()=>Tt.LEGEND),a=D(e,"lineWidth",3,1),c=D(e,"faceColor",3,"#fff"),f=D(e,"fontSize",3,.85);function u(m){return typeof m!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(m)?m:(console.error('Legend: wrong value of "position" property'),null)}function d(m){if(!m||!Array.isArray(m)||m.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let h=0;h<m.length;h++){const g=m[h];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=sn(g.label),w=p.length===g.label?1:1.4;g.label=p,g.labelHeight=w,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(h+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:Tt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=ns.length||console.error('Legend: parameter "marker" for legend item '+(h+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.markerSize=g.point.markerSize?g.point.markerSize:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:Tt.PRIMARY)}return m}const v=Gt("axes");ge(()=>{const m=d(e.items),h=u(s());v.setGroupLegend(m&&h?{show:r(),position:s(),items:e.items,lineColor:o(),faceColor:c(),lineWidth:a(),fontSize:f()}:{show:!1,position:null,items:null})}),_e()}function ec(t,e){we(e,!0);let r=D(e,"show",3,!0),s=D(e,"labels",3,null),o=D(e,"labelColor",19,()=>Tt.CLEGEND_LABELS),a=D(e,"fontSize",3,.85);const c=Gt("axes");ge(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:o(),fontSize:a()})}),_e()}const o1=[1,1.1,.45,.4],on={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",alien:"#2679B2",external:"#D22C2F"},To={cal:1,pv:2,test:2,new:2},Ln={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},a1={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Po={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},tc="#a0a0a0",rc="#909090",nc=8,i1=8,c1=8,u1=600;function f1(t,e){if(t.length===e.length)return t;const r=e.length,s=new t.constructor(r);for(let o in e)s[o]=t[e[o]];return s}function d1(t,e){let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)s=Math.min(s,t[c]),r=Math.max(r,t[c]);let o=No(void 0,[s,r],e-1,!0,!1,0).v;const a=o[1]-o[0];if(o[0]>s){const c=o[0]-a;o=[c<s?c:s,...o]}if(o[o.length-1]<r){const c=o[o.length-1]+a;o=[...o,c>r?c:r]}return o}function v1(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=dl(e);return t.reduce((o,a,c)=>(o[a]=r[c],o),{})}function sc(t,e,r){const s=e.length,o=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let f=0;f<s-1;f++){const u=t[c]>=e[f],d=f===s-2?t[c]<e[f+1]+a:t[c]<e[f+1];if(u&&d){o[c]=r[f];break}}return o}function h1(t,e,r,s,o="cal",a){if(!e)return null;let c,f,u,d,v,m,h=!0;if((r==="groups"||r==="classes")&&e.classNames){const g=v1(e.classNames);f=Object.keys(g).map(p=>g[p]),c=e.classNames,d=e.classes.map(p=>g[p]),u=new Array(c.length+1).map((p,w)=>w-.5),v=null}else if(r==="variable"){const g=f1(t.values.getcolref(s),e.objindices);v=t.varlabels[s-1],v.length>30&&(v=v.substring(0,29)+"..."),u=d1(g,10),f=dl(u.length-1),d=sc(g,u,f)}else if(a){const g=a.values;c=a.labels;const p=a.classColmap;f=Object.keys(p).map(w=>p[w]),d=g.map(w=>p[w]),u=new Array(c.length+1).map((w,b)=>b-.5),v=null,a.filled&&a.filled.length===g.length&&(m=a.filled),a.showBar!==void 0&&(h=a.showBar)}else c=null,u=null,f=null,d=Array(e.nrows).fill(Ln[o]);return{labels:c,map:f,breaks:u,colors:d,varname:v,filled:m,showBar:h,mainColor:Ln[o],faceColor:a1[o],faceTColor:Po[o]}}function m1(t,e,r,s){if(!t)return null;const o=t.length;let a=Be.zeros(o),c=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(s==="log")for(let u=0;u<o;u++){const d=Math.log(1+t[u]/r);a.v[u]=d,c=Math.max(c,d),f=Math.min(f,d)}else for(let u=0;u<o;u++){const d=t[u]/r;a.v[u]=d,c=Math.max(c,d),f=Math.min(f,d)}return{values:a,min:f,max:c}}var g1=X("<!> <!>",1),p1=X("<!> <!>",1),b1=X("<!> <!>",1),w1=X("<!> <!> <!> <!> <!> <!> <!> <!>",1),_1=X("<h2>Plot settings</h2>"),y1=X('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),x1=X('<div class="plot-panel svelte-5p9gcx"><!></div>');function k1(t,e){we(e,!0);let r=re(!0),s=re("none"),o=re(!1);const a=C(()=>(l(r)?"Preprocessed":"Raw")+" data (selected rows)"),c=C(()=>l(r)&&e.prepdata?e.prepdata:e.rawdata),f=C(()=>l(c)?l(c).varaxisLabel:"Variables"),u=C(()=>e.rawdata.varaxisUnits),d=C(()=>e.left>=0||e.right>0&&e.right<l(c).values.nrows),v=C(()=>e.left>=0?e.left+1:1),m=C(()=>e.right>0&&e.right<l(c).values.nrows?e.right:l(c).values.nrows),h=C(()=>l(r)&&l(c)&&l(d)?qt.seq(l(v),l(m)):null),g=C(()=>l(h)?l(c).varvalues.filter((q,T)=>T>=l(v)-1&&T<l(m)):l(c).varvalues),p=C(()=>l(h)?l(c).values.subset(l(h),null):l(c).values),w=C(()=>l(p)?Jl(l(p).v):null),b=C(()=>l(w)?(l(w)[1]-l(w)[0])*.05:null),_=C(()=>l(w)?[l(w)[0],l(w)[1]+(l(s)!=="none")*l(b)]:[0,1]),A=C(()=>l(c)?Jl(l(c).varvalues,l(o)?.005:.1):[0,1]),E=C(()=>l(o)&&l(d)?[l(c).varvalues[l(v)-1],l(c).varvalues[l(m)-1]]:l(A)),k=C(()=>{if(!e.rawdata)return null;const q={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const T=dl(e.rawdata.classNames.length);q.groups={colors:e.rawdata.classes.map(j=>T[e.rawdata.classNames.findIndex(y=>y===j)]),breaks:Ur(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:T}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const T=si(e.rawdata.resp,8),j=dl(T.length-1);q.response={colors:sc(e.rawdata.resp.v,T.v,j),labels:null,breaks:T,map:j}}return q});ge(()=>{(e.left<1||e.right<1||e.right>=e.left)&&O(o,!1)});var S=x1(),M=R(S);{var L=q=>{var T=y1(),j=K(T),y=R(j),z=R(y);Ki(z,{get title(){return l(a)},get limY(){return l(_)},get limX(){return l(E)},fileName:"plot-preprocessed",children:(ne,se)=>{var he=w1(),fe=K(he);{var ee=$=>{$i($,{get xValues(){return l(g)},get yValues(){return l(p)}})},le=$=>{var de=be(),ke=K(de);Qe(ke,17,()=>l(k)[l(s)].colors,rt,(ce,Le,Pe)=>{{let Ye=C(()=>l(p).getcolumn(Pe+1));ln(ce,{get xValues(){return l(g)},get yValues(){return l(Ye)},get lineColor(){return l(Le)}})}}),N($,de)};Y(fe,$=>{l(s)==="none"?$(ee):$(le,!1)})}var Ae=P(fe,2);{var De=$=>{const de=C(()=>l(c).varvalues[e.varind[0]]);var ke=g1(),ce=K(ke);{let Pe=C(()=>[l(de),l(de)]);ln(ce,{get xValues(){return l(Pe)},get yValues(){return l(_)},lineColor:"#00000060"})}var Le=P(ce,2);{let Pe=C(()=>[l(de)]),Ye=C(()=>[l(_)[1]-l(b)*(l(s)==="none"?1:2)]),Je=C(()=>sn(l(de).toFixed(2)+" "+l(u)));hl(Le,{get xValues(){return l(Pe)},get yValues(){return l(Ye)},get labels(){return l(Je)},textColor:"#a0a0a0",textSize:.8,pos:2})}N($,ke)};Y(Ae,$=>{e.varind&&e.varind[0]>0&&$(De)})}var Ie=P(Ae,2);{var Ve=$=>{const de=C(()=>l(c).varvalues[e.varind[1]]);var ke=p1(),ce=K(ke);{let Pe=C(()=>[l(E)[0]]),Ye=C(()=>[l(c).varvalues[e.varind[1]]-l(E)[0]]),Je=C(()=>[l(_)[1]]),kt=C(()=>[l(_)[1]-l(_)[0]]);vl(ce,{get left(){return l(Pe)},get width(){return l(Ye)},get top(){return l(Je)},get height(){return l(kt)},lineColor:"transparent",faceColor:"#00000040"})}var Le=P(ce,2);{let Pe=C(()=>[l(de)]),Ye=C(()=>[l(_)[1]-l(b)*(l(s)==="none"?1:2)]),Je=C(()=>sn(l(de).toFixed(2)+" "+l(u)));hl(Le,{get xValues(){return l(Pe)},get yValues(){return l(Ye)},get labels(){return l(Je)},textColor:"#a0a0a0",textSize:.8,pos:2})}N($,ke)};Y(Ie,$=>{e.varind&&e.varind[1]>0&&$(Ve)})}var Fe=P(Ie,2);{var Te=$=>{const de=C(()=>l(c).varvalues[e.varind[2]-1]);var ke=b1(),ce=K(ke);{let Pe=C(()=>[l(c).varvalues[e.varind[2]-1]]),Ye=C(()=>[l(E)[1]-l(c).varvalues[e.varind[2]-1]]),Je=C(()=>[l(_)[1]]),kt=C(()=>[l(_)[1]-l(_)[0]]);vl(ce,{get left(){return l(Pe)},get width(){return l(Ye)},get top(){return l(Je)},get height(){return l(kt)},lineColor:"transparent",faceColor:"#00000040"})}var Le=P(ce,2);{let Pe=C(()=>[l(de)]),Ye=C(()=>[l(_)[1]-l(b)*(l(s)==="none"?1:2)]),Je=C(()=>sn(l(de).toFixed(2)+" "+l(u)));hl(Le,{get xValues(){return l(Pe)},get yValues(){return l(Ye)},get labels(){return l(Je)},textColor:"#a0a0a0",textSize:.8,pos:2})}N($,ke)};Y(Fe,$=>{e.varind&&e.varind[2]<l(c).varvalues.length&&e.varind[2]>0&&$(Te)})}var qe=P(Fe,2);{let $=C(()=>l(s)!=="none");ec(qe,{get show(){return l($)},get labels(){return l(k)[l(s)].labels},get breaks(){return l(k)[l(s)].breaks},get colmap(){return l(k)[l(s)].map}})}var st=P(qe,2);Ji(st,{get label(){return l(f)},showGrid:!0});var ie=P(st,2);Zi(ie,{showGrid:!0});var ae=P(ie,2);Qi(ae,{}),N(ne,he)},$$slots:{default:!0}});var V=P(j,2),B=R(V);ue(B,{label:"",children:(ne,se)=>{var he=_1();N(ne,he)},$$slots:{default:!0}});var I=P(B,2);ue(I,{label:"Show",children:(ne,se)=>{jn(ne,{options:["raw","preprocessed"],get value(){return l(r)},set value(he){O(r,he,!0)}})},$$slots:{default:!0}});var W=P(I,2);{var oe=ne=>{ue(ne,{label:"Color by",children:(se,he)=>{{let fe=C(()=>Object.keys(l(k)));_t(se,{get options(){return l(fe)},get value(){return l(s)},set value(ee){O(s,ee,!0)}})}},$$slots:{default:!0}})};Y(W,ne=>{Object.keys(l(k)).length>1&&ne(oe)})}var te=P(W,2);{var Z=ne=>{ue(ne,{label:"Zoom (x-axis)",children:(se,he)=>{jn(se,{options:["off","on"],get value(){return l(o)},set value(fe){O(o,fe,!0)}})},$$slots:{default:!0}})};Y(te,ne=>{e.left>0&&e.right>e.left&&ne(Z)})}N(q,T)};Y(M,q=>{l(g)&&l(p)&&q(L)})}N(t,S),_e()}var E1=X('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function A1(t,e){we(e,!0);let r=D(e,"left",15),s=D(e,"right",15),o=D(e,"prepobj",15),a=D(e,"meta",15),c=D(e,"finalize",3,null),f=re(Me([-1,0,0])),u=re(null),d=re(null);function v(E){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E>=0&&E<k&&E<s()&&r(E)}function m(E){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E<=k&&E>r()&&s(E)}var h=E1(),g=R(h),p=R(g),w=R(p);Vd(w,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return r()},get right(){return s()},setLeft:v,",":!0,setRight:m,get finalize(){return c()},get varind(){return l(f)},set varind(E){O(f,E,!0)},get prepobj(){return o()},set prepobj(E){o(E)},get rawdataShort(){return l(u)},set rawdataShort(E){O(u,E,!0)},get prepdataShort(){return l(d)},set prepdataShort(E){O(d,E,!0)},get meta(){return a()},set meta(E){a(E)}});var b=P(g,2),_=R(b);{var A=E=>{k1(E,{get rawdata(){return l(u)},get prepdata(){return l(d)},get left(){return r()},get right(){return s()},get varind(){return l(f)}})};Y(_,E=>{l(u)&&E(A)})}N(t,h),_e()}var S1=X('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),C1=X("<!> <!> <!>",1),N1=X('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),M1=X("<!> <!> <!>",1),j1=X("<p><strong>Preprocessing model</strong></p>"),T1=X("<!> <!>",1),P1=X("<p> </p>"),L1=X('<div class="prep-widget"><!></div> <!> <!>',1);function z1(t,e){we(e,!0);let r=D(e,"prepType",15),s=D(e,"prepobj",15),o=D(e,"prepdata",15),a=D(e,"prepmodel",15),c=D(e,"prepmeta",15),f=re(!1),u=re(0),d=re(Me(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),v=re("neutral"),m=re(""),h=re(void 0);async function g(z,V,B){!V||!z||V.length===0||O(h,e.WASM().then(I=>{O(v,"applying");const W=Si(I,z.values,z.nresp,V,!1,B);W.info=c(),a(W)}).catch(I=>{a(null),console.error(I),O(v,"error"),O(m,I,!0)}),!0)}async function p(z,V){if(!V||typeof V!="object"){o(null);return}if(Object.keys(V).length===0){o(z);return}O(h,e.WASM().then(B=>{O(v,"applying");const I=Ls(B,z.values,z.nresp,V,!1,!1),W=_o(Ml(z),I);o(fo(W,V))}).catch(B=>{o(null),console.error(B),O(v,"error"),O(m,B,!0)}),!0)}function w(){r(null),o(null),a(null),s([]),O(u,0),O(d,e.rawdata.values.ncols-e.rawdata.nresp)}function b(){s()&&s().length>0?g(e.rawdata,s(),e.outliers):(r(null),a(null)),O(f,!1)}function _(){r("create"),o(null),a(null),O(f,!0)}function A(){r("skip"),a({})}ge(()=>{a(),e.rawdata&&p(e.rawdata,a())}),ge(()=>{r()==="create"&&s()&&!a()&&g(e.rawdata,s(),e.outliers)}),ge(()=>{r()==="skip"&&o()===null&&(a({}),s([]),o(e.rawdata))});var E=L1(),k=K(E),S=R(k);{var M=z=>{ue(z,{name:"info",children:(V,B)=>{var I=C1(),W=K(I);{var oe=se=>{var he=S1(),fe=P(R(he),2);yo(fe,{get prepmodel(){return a()}}),N(se,he)};Y(W,se=>{l(f)||se(oe)})}var te=P(W,2);{var Z=se=>{Ri(se,{onclick:_})};Y(te,se=>{r()==="create"&&se(Z)})}var ne=P(te,2);nn(ne,{onclick:w}),N(V,I)},$$slots:{default:!0}})},L=z=>{var V=be(),B=K(V);{var I=oe=>{ue(oe,{name:"prep-info",children:(te,Z)=>{var ne=N1(),se=P(K(ne),2),he=R(se);nn(he,{onclick:w}),N(te,ne)},$$slots:{default:!0}})},W=oe=>{var te=be(),Z=K(te);{var ne=he=>{ue(he,{label:"Preprocessing",name:"prep-container",children:(fe,ee)=>{var le=M1(),Ae=K(le);At(Ae,{text:"Skip",onclick:A});var De=P(Ae,2);At(De,{text:"Load",onclick:()=>r("file")});var Ie=P(De,2);At(Ie,{text:"Create",onclick:_}),N(fe,le)},$$slots:{default:!0}})},se=he=>{var fe=be(),ee=K(fe);{var le=Ae=>{var De=T1(),Ie=K(De);ue(Ie,{children:(Fe,Te)=>{var qe=j1();N(Fe,qe)},$$slots:{default:!0}});var Ve=P(Ie,2);gd(Ve,{get model(){return a()},set model(Fe){a(Fe)},get prepobj(){return s()},set prepobj(Fe){s(Fe)},get left(){return l(u)},set left(Fe){O(u,Fe,!0)},get right(){return l(d)},set right(Fe){O(d,Fe,!0)}}),N(Ae,De)};Y(ee,Ae=>{r()==="file"&&Ae(le)},!0)}N(he,fe)};Y(Z,he=>{r()?he(se,!1):he(ne)},!0)}N(oe,te)};Y(B,oe=>{r()==="skip"?oe(I):oe(W,!1)},!0)}N(z,V)};Y(S,z=>{a()&&o()&&a().ml?z(M):z(L,!1)})}var q=P(k,2);{var T=z=>{qi(z,{closeModal:b,isDark:!0,children:(V,B)=>{A1(V,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:b,get prepobj(){return s()},set prepobj(I){s(I)},get left(){return l(u)},set left(I){O(u,I,!0)},get right(){return l(d)},set right(I){O(d,I,!0)},get meta(){return c()},set meta(I){c(I)}})},$$slots:{default:!0}})};Y(q,z=>{l(f)&&z(T)})}var j=P(q,2);{var y=z=>{ue(z,{status:"error",children:(V,B)=>{var I=P1(),W=R(I);Q(()=>pe(W,l(m))),N(V,I)},$$slots:{default:!0}})};Y(j,z=>{(l(v)==="error"||l(m))&&z(y)})}N(t,E),_e()}var R1=X('<span style="font-weight:bold"> </span><br/>',1),I1=X('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),F1=X('<span class="file-size svelte-1uxd0r7"> </span>'),q1=X('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function O1(t,e){we(e,!0);let r=D(e,"title",3,"");var s=be(),o=K(s);{var a=c=>{ue(c,{children:(f,u)=>{var d=q1(),v=K(d),m=R(v);{var h=E=>{var k=R1(),S=K(k),M=R(S);Q(()=>pe(M,r())),N(E,k)};Y(m,E=>{r()&&r()!==""&&E(h)})}var g=P(m,4),p=R(g),w=P(g,5);{var b=E=>{var k=I1(),S=K(k),M=R(S),L=P(S,4),q=R(L);Q(()=>{pe(M,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),pe(q,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),N(E,k)},_=E=>{var k=F1(),S=R(k);Q(()=>pe(S,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),N(E,k)};Y(w,E=>{e.dataset.nresp&&e.dataset.nresp>0?E(b):E(_,!1)})}var A=P(v,2);nn(A,{get onclick(){return e.reset}}),Q(()=>{F(g,"title",e.dataset.fileName),pe(p,e.dataset.fileName)}),N(f,d)},$$slots:{default:!0}})};Y(o,c=>{e.dataset&&c(a)})}N(t,s),_e()}var D1=X("<!> <!>",1),B1=X("<!> <!> <!> <!> <!> <!>",1),V1=X("<!> <!>",1),Y1=X("<p> </p>"),W1=X("<!> <p> </p>",1),U1=X("<p> </p>"),H1=X("<!> <!> <!>",1);function Lo(t,e){we(e,!0);let r=D(e,"model",3,null),s=D(e,"outliers",19,()=>[]),o=D(e,"className",3,"Class"),a=D(e,"classMandatory",3,!1),c=D(e,"classUnique",3,!1),f=D(e,"title",3,""),u=D(e,"dataset",15),d=D(e,"resobj",15),v=D(e,"csvOnly",3,!0);const m=[",",";"],h=C(()=>r()?["no","yes"]:["no","labels","values"]);let g=re(void 0),p=re(""),w=re(""),b=re(","),_=re("no"),A=re(!1),E=re(!1),k=re(null),S=re("neutral"),M=re("");function L(ee){O(S,"error"),O(M,ee,!0),console.error(ee)}function q(){O(S,"neural"),O(M,"")}function T(){O(S,"success"),O(M,"")}function j(ee,le,Ae){O(k,e.WASM().then(De=>{d(Af(De,ee,le,Ae,!0)),T()}).catch(De=>{d(null),L(De)}),!0)}function y(ee,le){if(!ee||ee.size<10)return;const De=ee.slice(0,1e5),Ie=new FileReader;Ie.onload=()=>{const Ve=Ie.result;!Ve||Ve.length<0||((Fe=>{var Te=Al(Fe,4);O(b,Te[0],!0),O(A,Te[1],!0),O(E,Te[2],!0),O(_,Te[3],!0)})(jf(Ve)),O(E,a()||l(E),!0),le&&l(_)!=="no"&&O(_,"yes"))},Ie.onerror=function(Ve){csvString=null,O(S,"error"),O(M,Ve,!0),console.error("Error reading CSV file.",Ve)},Ie.readAsText(De)}function z(ee){try{const le=Cf(ee,l(b),l(_)==="yes"?"labels":l(_),l(A),l(E),l(p),l(w));if(le.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const Ae=r()?r().prep&&Object.keys(r().prep).length>0?r().prep.npred:r().ncols+r().exclvars.length:0;if(r()&&le.values.ncols!==Ae)throw new Error("Dataset has different number of columns than the training set.");if(le.classNames.length>le.values.nrows/2)throw new Error("Dataset has too many unique "+o().toLowerCase()+" labels ("+le.classNames.length+"), check your CSV file.");if(a()&&le.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&le.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");le.fileName=l(g).name.replace(/\.[^/.]+$/,""),r()&&(le.varrev=r().varrev,le.header=r().header,le.varlabels=r().varlabels,le.varvalues=r().varvalues,le.varvaluesName=r().varvaluesName,le.varvaluesUnits=r().varvaluesUnits),u(le),T()}catch(le){u(null),L(le)}}function V(ee){const le=new FileReader;le.onload=()=>{z(le.result)},le.readAsText(l(g))}async function B(ee){try{const le=l(g)instanceof FileList?l(g):[l(g)];u(await zf(le)),T()}catch(le){L("Failed to read SPC file: "+le)}}function I(){O(g,""),u(null),d(null),O(p,""),O(w,""),q()}ge(()=>{if(!(l(g)===0||l(g)===void 0||u())){if(l(g)===null||l(g)===""){I();return}if(Array.isArray(l(g))){if(l(g).filter(ee=>ee.slice(-4)===".spc").length!==l(g).length){L("Multiple file selection is allowed only for SPC files.");return}B(l(g));return}l(g)&&(l(g).type==="text/csv"||l(g).type==="application/vnd.ms-excel")?(y(l(g),r()),q()):B([l(g)])}}),ge(()=>{l(b)&&q()}),ge(()=>{if(u()&&r()&&!d()&&!l(M))try{d(j(r(),u(),s())),T()}catch(ee){u(null),d(null),L(ee)}});var W=H1(),oe=K(W);{var te=ee=>{var le=V1(),Ae=K(le);kn(Ae,()=>l(g)===void 0,Ve=>{ue(Ve,{children:(Fe,Te)=>{var qe=be(),st=K(qe);{var ie=$=>{fl($,{id:"dataFile",message:"Select CSV file with dataset",get file(){return l(g)},set file(de){O(g,de,!0)}})},ae=$=>{fl($,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return l(g)},set file(de){O(g,de,!0)}})};Y(st,$=>{v()?$(ie):$(ae,!1)})}N(Fe,qe)},$$slots:{default:!0}})});var De=P(Ae,2);{var Ie=Ve=>{var Fe=B1(),Te=K(Fe);ue(Te,{label:"Delimiter",children:(ce,Le)=>{_t(ce,{id:"sep",get options(){return m},get value(){return l(b)},set value(Pe){O(b,Pe,!0)}})},$$slots:{default:!0}});var qe=P(Te,2);ue(qe,{label:"Row labels",children:(ce,Le)=>{jn(ce,{id:"hasLabels",options:["no","yes"],get value(){return l(A)},set value(Pe){O(A,Pe,!0)}})},$$slots:{default:!0}});var st=P(qe,2);{var ie=ce=>{ue(ce,{get label(){return`${o()??""} labels`},children:(Le,Pe)=>{jn(Le,{id:"hasLabels",options:["no","yes"],get value(){return l(E)},set value(Ye){O(E,Ye,!0)}})},$$slots:{default:!0}})};Y(st,ce=>{a()||ce(ie)})}var ae=P(st,2);ue(ae,{label:"Header",children:(ce,Le)=>{_t(ce,{id:"header",get options(){return l(h)},get value(){return l(_)},set value(Pe){O(_,Pe,!0)}})},$$slots:{default:!0}});var $=P(ae,2);{var de=ce=>{var Le=D1(),Pe=K(Le);ue(Pe,{label:"Header name",children:(Je,kt)=>{Ii(Je,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return l(p)},set value(ut){O(p,ut,!0)}})},$$slots:{default:!0}});var Ye=P(Pe,2);ue(Ye,{label:"Header units",children:(Je,kt)=>{Ii(Je,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return l(w)},set value(ut){O(w,ut,!0)}})},$$slots:{default:!0}}),N(ce,Le)};Y($,ce=>{l(_)==="values"&&ce(de)})}var ke=P($,2);ue(ke,{label:" ",children:(ce,Le)=>{At(ce,{text:"Load",onclick:V})},$$slots:{default:!0}}),N(Ve,Fe)};Y(De,Ve=>{l(g)&&!Array.isArray(l(g))&&(l(g).type==="text/csv"||l(g).type==="application/vnd.ms-excel")&&Ve(Ie)})}N(ee,le)},Z=ee=>{var le=be(),Ae=K(le);{var De=Ie=>{var Ve=be(),Fe=K(Ve);Nu(Fe,()=>l(k),Te=>{ue(Te,{children:(qe,st)=>{var ie=W1(),ae=K(ie);$f(ae);var $=P(ae,2),de=R($);Q(()=>pe(de,r()?"Loading data and apply model...":"Loading data...")),N(qe,ie)},$$slots:{default:!0}})},void 0,(Te,qe)=>{ue(Te,{status:"error",children:(st,ie)=>{var ae=Y1(),$=R(ae);Q(()=>pe($,l(qe))),N(st,ae)},$$slots:{default:!0}})}),N(Ie,Ve)};Y(Ae,Ie=>{l(k)&&Ie(De)})}N(ee,le)};Y(oe,ee=>{u()?ee(Z,!1):ee(te)})}var ne=P(oe,2);{var se=ee=>{O1(ee,{get dataset(){return u()},reset:I,get title(){return f()}})};Y(ne,ee=>{u()&&ee(se)})}var he=P(ne,2);{var fe=ee=>{ue(ee,{status:"error",children:(le,Ae)=>{var De=U1(),Ie=R(De);Q(()=>pe(Ie,l(M))),N(le,De)},$$slots:{default:!0}})};Y(he,ee=>{(l(S)==="error"||l(M))&&ee(fe)})}N(t,W),_e()}var G1=X('<tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (outliers)</td><td class="svelte-1fhdfcc"> </td></tr>'),X1=X('<table class="svelte-1fhdfcc"><thead><tr class="svelte-1fhdfcc"><th class="svelte-1fhdfcc"></th><th class="svelte-1fhdfcc">f</th></tr></thead><tbody><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">DoF (Nf)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Mean (f0)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (extreme)</td><td class="svelte-1fhdfcc"> </td></tr><!></tbody></table>');function zo(t,e){we(e,!0);let r=D(e,"isAlt",3,!1);var s=be(),o=K(s);{var a=c=>{var f=X1(),u=P(R(f)),d=R(u),v=P(R(d)),m=R(v),h=P(d),g=P(R(h)),p=R(g),w=P(h),b=P(R(w)),_=R(b),A=P(w);{var E=k=>{var S=G1(),M=P(R(S)),L=R(M);Q(q=>pe(L,q),[()=>e.nimca.oCrit.toFixed(1)]),N(k,S)};Y(A,k=>{r()||k(E)})}Q((k,S)=>{pe(m,e.nimca.Nf),pe(p,k),pe(_,S)},[()=>e.nimca.f0.toFixed(3),()=>e.nimca.eCrit.toFixed(1)]),N(c,f)};Y(o,c=>{e.nimca&&c(a)})}N(t,s),_e()}var K1=X('<p class="title"> </p>'),J1=X("<!> <!>",1),Z1=X("<!> <!> <!> <!> <!>",1);function Ro(t,e){we(e,!0);let r=D(e,"isAlt",3,!1),s=D(e,"fit",3,!0),o=D(e,"nimca",15);const a=[10,5,1,.1],c=[5,1,.1,.01];let f=re(Me(o()?o().center:!0)),u=re(Me(o()?o().scale:!1));ge(()=>{s()&&e.calset&&o(ir.fit(e.calset,l(f),l(u)))});var d=be(),v=K(d);{var m=h=>{var g=Z1(),p=K(g);ue(p,{name:"target-class",label:"",children:(S,M)=>{var L=K1(),q=R(L);Q(()=>pe(q,`Target class: ${o().className??""}`)),N(S,L)},$$slots:{default:!0}});var w=P(p,2);{var b=S=>{var M=J1(),L=K(M);ue(L,{name:"center",label:"Center",children:(T,j)=>{jn(T,{id:"center",options:["no","yes"],get value(){return l(f)},set value(y){O(f,y,!0)}})},$$slots:{default:!0}});var q=P(L,2);ue(q,{name:"scale",label:"Scale",children:(T,j)=>{jn(T,{id:"scale",options:["no","yes"],get value(){return l(u)},set value(y){O(u,y,!0)}})},$$slots:{default:!0}}),N(S,M)};Y(w,S=>{s()&&S(b)})}var _=P(w,2);ue(_,{name:"alpha",label:"Alpha, %:",children:(S,M)=>{_t(S,{get options(){return a},get value(){return o().alpha},set value(L){o(o().alpha=L,!0)}})},$$slots:{default:!0}});var A=P(_,2);{var E=S=>{ue(S,{name:"gamma",label:"Gamma, %:",children:(M,L)=>{_t(M,{get options(){return c},get value(){return o().gamma},set value(q){o(o().gamma=q,!0)}})},$$slots:{default:!0}})};Y(A,S=>{r()||S(E)})}var k=P(A,2);ue(k,{name:"limits",label:"Limits:",children:(S,M)=>{_t(S,{options:["classic","robust"],get value(){return o().limType},set value(L){o(o().limType=L,!0)}})},$$slots:{default:!0}}),N(h,g)};Y(v,h=>{o()&&o().className&&h(m)})}N(t,d),_e()}var Q1=X('<table class="svelte-1bca91p"><thead><tr class="svelte-1bca91p"><th class="svelte-1bca91p"></th><th class="svelte-1bca91p">Cal</th></tr></thead><tbody><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Objects</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Extremes</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Outliers</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Sensitivity</td><td class="svelte-1bca91p"> </td></tr></tbody></table>');function $1(t,e){we(e,!0);let r=C(()=>e.calres?e.calres.nrows:0);var s=be(),o=K(s);{var a=c=>{var f=Q1(),u=P(R(f)),d=R(u),v=P(R(d)),m=R(v),h=P(d),g=P(R(h)),p=R(g),w=P(h),b=P(R(w)),_=R(b),A=P(w),E=P(R(A)),k=R(E);Q(S=>{pe(m,l(r)),pe(p,e.calres.outcomes.rolsNum.extreme),pe(_,e.calres.outcomes.rolsNum.outlier),pe(k,S)},[()=>e.calres.outcomes.stat.sensitivity.toFixed(3)]),N(c,f)};Y(o,c=>{e.calres&&c(a)})}N(t,s),_e()}var eh=X('<div class="msg-select"> </div>'),th=X('<div class="msg-select"> </div>'),rh=X('<div class="msg-select"> </div>'),nh=X('<div class="msg-select"> </div>'),sh=X('<div class="selected-buttons svelte-188sk7n"><!></div>'),lh=X('<div class="selected-buttons svelte-188sk7n"><!></div>'),oh=X("<!> <!> <!>",1),ah=X("<button> </button>"),ih=X('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Io(t,e){we(e,!0);let r=D(e,"selobjText",3,"Click to select an object..."),s=D(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),o=D(e,"clearText",3,"Click anywhere to remove selection..."),a=D(e,"params",15),c=Me({objects:-1,variables:[]}),f=re(Me(Object.keys(e.plots)[0]));function u(T,j){c.objects=j?j[T]:T}function d(T){c.objects=-1}function v(T){c.variables=T}function m(T){c.variables=[]}let h={objects:{select:u,unselect:d},variables:{select:v,unselect:m},stats:{}},g=C(()=>l(f)?e.plots[l(f)]:null),p=C(()=>l(g)?l(g).component:null);var w=ih(),b=R(w),_=R(b),A=R(_);Ms(A,()=>l(p),(T,j)=>{j(T,{get params(){return a()[l(f)]},get callbacks(){return h[l(g).scope]},get selected(){return c[l(g).scope]},get props(){return e.props}})});var E=P(_,2),k=R(E);{var S=T=>{var j=be(),y=K(j);{var z=B=>{var I=eh(),W=R(I);Q(()=>pe(W,r())),N(B,I)},V=B=>{var I=th(),W=R(I);Q(()=>pe(W,o())),N(B,I)};Y(y,B=>{c[l(g).scope]<0?B(z):B(V,!1)})}N(T,j)};Y(k,T=>{l(g).scope==="objects"&&a()[l(f)].plotType!=="l"&&r().length>0&&T(S)})}var M=P(k,2);{var L=T=>{var j=be(),y=K(j);{var z=B=>{var I=rh(),W=R(I);Q(()=>pe(W,s())),N(B,I)},V=B=>{var I=nh(),W=R(I);Q(()=>pe(W,o())),N(B,I)};Y(y,B=>{c[l(g).scope].length===0?B(z):B(V,!1)})}N(T,j)};Y(M,T=>{l(g).scope==="variables"&&a()[l(f)].plotType!=="l"&&s().length>0&&T(L)})}var q=P(b,2);Qe(q,21,()=>Object.keys(e.plots),rt,(T,j)=>{var y=be(),z=K(y);{var V=I=>{var W=oh(),oe=K(W);nd(oe,{get title(){return l(g).label},labelWidth:12,get options(){return e.controls[l(f)]},get value(){return a()[l(f)]},set value(he){a(a()[l(f)]=he,!0)}});var te=P(oe,2);{var Z=he=>{var fe=sh(),ee=R(fe);Br(ee,()=>l(g).buttons,()=>c.objects),N(he,fe)};Y(te,he=>{l(g).scope==="objects"&&l(g).buttons&&c.objects>=0&&he(Z)})}var ne=P(te,2);{var se=he=>{var fe=lh(),ee=R(fe);Br(ee,()=>l(g).buttons,()=>c.variables),N(he,fe)};Y(ne,he=>{l(g).scope==="variables"&&l(g).buttons&&c.variables.length>0&&he(se)})}N(I,W)},B=I=>{var W=ah();W.__keydown=()=>switchPlot(i),W.__click=()=>O(f,l(j),!0);var oe=R(W);Q(()=>{bt(W,1,`plot-selector plot-selector-${l(j)??""}`,"svelte-188sk7n"),pe(oe,e.plots[l(j)].label)}),N(I,W)};Y(z,I=>{l(g)&&l(f)===l(j)?I(V):I(B,!1)})}N(T,y)}),N(t,w),_e()}at(["keydown","click"]);var ch=Ee("<text> </text>"),uh=Ee('<g class="series series-textlabels"></g>'),fh=Ee('<g class="series series-line"><polyline class="line"></polyline></g>'),dh=Ee("<rect></rect>"),vh=Ee('<g class="series series-bar"></g>'),hh=Ee("<text> </text>"),mh=Ee('<g class="series series-points series-points1"></g>'),gh=Ee('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),ph=Ee('<g class="series series-points series-points1"><text> </text></g>'),bh=Ee('<g class="series series-bar"><rect></rect></g>'),wh=Ee('<g class="series series-text"><text> </text></g>'),_h=Ee("<!><!><!>",1),yh=Ee("<!><!><!><!><!>",1);function lc(t,e){we(e,!0);let r=D(e,"shortenLabels",3,!0),s=D(e,"lineWidth",3,1),o=D(e,"nBars",3,1),a=D(e,"barNum",3,1),c=D(e,"markerSize",3,null),f=D(e,"markerWidth",3,2),u=D(e,"marker",3,1),d=D(e,"colors",3,void 0),v=D(e,"filled",3,void 0),m=D(e,"mainColor",19,()=>Ln.cal),h=D(e,"faceColor",3,null),g=D(e,"lineColor",19,m),p=D(e,"selected",19,()=>-1),w=D(e,"maskSelected",3,!0),b=D(e,"xRange",15),_=D(e,"yRange",15),A=D(e,"ind",3,null);function E(ae){!e.callbacks||!e.callbacks.select||Pn(ae,ae.target.tagName,$=>e.callbacks.select($,A()))}function k(ae){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const S=Gt("axes"),M=C(()=>Yt(e.xValues,"PlotSeries")),L=C(()=>l(M)?Yt(e.yValues,"PlotSeries",l(M).length):null);ge(()=>{if(A()){const ae=A().map($=>$+1);b(l(M)?$r(l(M).subset(ae)):null),_(l(L)?$r(l(L).subset(ae)):null)}else b(l(M)?$r(l(M)):null),_(l(L)?$r(l(L)):null)});const q=C(()=>h()===null?e.plotType==="p"?"transparent":"white":h()),T=[1,.8,.8,.8,.8,.8,.8,.8],j=[.85,.65,.65,.65,.65,.65,.65,.65],y=C(()=>c()?c():e.plotType==="p"?T[u()-1]:j[u()-1]),z=C(()=>ns[u()-1]),V=C(()=>ko[S.scales().plot]),B=C(()=>mt([0],S.tY())[0]),I=C(()=>Eo([.8],S.tX())[0]),W=C(()=>e.plotType==="h"?l(I)/o():0),oe=C(()=>e.plotType==="h"?l(I)/2-(a()-1)*l(W):0),te=C(()=>l(V));let Z=C(()=>e.plotType==="l"||e.plotType==="b"?Co(l(M),l(L),S.tX(),S.tY()):null),ne=C(()=>l(M)?mt(l(M),S.tX()):null),se=C(()=>l(L)?mt(l(L),S.tY()):null),he=C(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(ae=>ae.slice(0,nc)):e.labels:null);const fe=C(()=>A()?A():Ur(0,l(ne).length-1));let ee=C(()=>d()&&d().length===l(M).length?d():Array(l(M).length).fill(m())),le=C(()=>v()&&v().length===l(M).length?v().map(ae=>ae?"ff":"30"):Array(l(M).length).fill("30")),Ae=C(()=>d()&&d().length===l(M).length?d().map((ae,$)=>ae+l(le)[$]):Array(l(M).length).fill(h()));const De=C(()=>`font-size:${l(y)}em;fill:${l(q)};cursor:default;text-anchor:middle;stroke-width:${f()}px;user-select:none;`),Ie=`font-size:0.85em;fill:${tc};cursor:default;text-anchor:middle;stroke:${tc};stroke-width:0.1px;user-select:none;`,Ve=C(()=>`font-size:${l(y)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),Fe=`fill:transparent;stroke-width:${s()}px;`,Te=`stroke-width:${s()}px;stroke:${g()}`;ge(()=>{p()&&A()&&A().indexOf(p())<0&&e.callbacks.unselect()});var qe=be(),st=K(qe);{var ie=ae=>{var $=yh(),de=K($);{var ke=U=>{var J=uh();Qe(J,21,()=>l(fe),rt,(ve,me)=>{var Se=ch(),je=R(Se);Q(()=>{F(Se,"opacity",l(me)===p()),F(Se,"x",l(ne)[l(me)]-l(oe)+l(W)/2),F(Se,"y",l(se)[l(me)]),F(Se,"dy",l(L).v[l(me)]<0?l(te):-l(te)),pe(je,l(he)[l(me)])}),N(ve,Se)}),Q(()=>ht(J,Ie+(p()>=0?"opacity:0.2;":""))),N(U,J)};Y(de,U=>{e.showLabels&&l(he)&&U(ke)})}var ce=P(de);{var Le=U=>{var J=fh(),ve=R(J);Q(()=>{ht(J,Fe),F(ve,"points",l(Z)),F(ve,"stroke",m())}),N(U,J)};Y(ce,U=>{(e.plotType==="l"||e.plotType==="b")&&U(Le)})}var Pe=P(ce);{var Ye=U=>{var J=vh();J.__click=E,Qe(J,21,()=>l(fe),rt,(ve,me)=>{var Se=dh();Q(()=>{F(Se,"x",l(ne)[l(me)]-l(oe)),F(Se,"y",l(L).v[l(me)]<0?l(B):l(se)[l(me)]),F(Se,"fill",l(ee)[l(me)]),F(Se,"width",l(W)),F(Se,"height",l(L).v[l(me)]<0?l(se)[l(me)]-l(B):l(B)-l(se)[l(me)])}),N(ve,Se)}),Q(()=>ht(J,Te+(p()>=0?"opacity:0.2;":""))),N(U,J)};Y(Pe,U=>{e.plotType==="h"&&U(Ye)})}var Je=P(Pe);{var kt=U=>{var J=mh();J.__click=E,Qe(J,21,()=>l(fe),rt,(ve,me)=>{var Se=hh(),je=R(Se);Q(()=>{F(Se,"x",l(ne)[l(me)]),F(Se,"y",l(se)[l(me)]),F(Se,"fill",l(Ae)[l(me)]),F(Se,"stroke",l(ee)[l(me)]),pe(je,l(z))}),N(ve,Se)}),Q(()=>ht(J,l(De)+(p()>=0?"opacity:0.2;":""))),N(U,J)};Y(Je,U=>{(e.plotType==="p"||e.plotType==="b")&&U(kt)})}var ut=P(Je);{var G=U=>{var J=_h(),ve=K(J);{var me=Ze=>{var nt=gh();F(nt,"x",0),F(nt,"y",0),nt.__click=k,N(Ze,nt)};Y(ve,Ze=>{w()&&Ze(me)})}var Se=P(ve);{var je=Ze=>{var nt=ph(),gt=R(nt),ye=R(gt);Q(()=>{ht(nt,l(Ve)),F(gt,"x",l(ne)[p()]),F(gt,"y",l(se)[p()]),F(gt,"stroke",l(ee)[p()]),F(gt,"fill",l(Ae)[p()]),pe(ye,l(z))}),N(Ze,nt)},Pt=Ze=>{var nt=bh(),gt=R(nt);Q(()=>{ht(nt,Te),F(gt,"stroke",l(ee)[p()]),F(gt,"fill",l(ee)[p()]),F(gt,"x",l(ne)[p()]-l(oe)),F(gt,"y",l(L).v[p()]<0?l(B):l(se)[p()]),F(gt,"width",l(W)),F(gt,"height",l(L).v[p()]<0?l(se)[p()]-l(B):l(B)-l(se)[p()])}),N(Ze,nt)};Y(Se,Ze=>{e.plotType!=="h"?Ze(je):Ze(Pt,!1)})}var Pr=P(Se);{var wt=Ze=>{var nt=wh(),gt=R(nt),ye=R(gt);Q(()=>{ht(nt,Ie),F(gt,"stroke",rc),F(gt,"fill",rc),F(gt,"x",l(ne)[p()]),F(gt,"y",l(se)[p()]),F(gt,"dy",l(L).v[p()]<0?l(te):-l(te)),pe(ye,l(he)[p()])}),N(Ze,nt)};Y(Pr,Ze=>{e.showLabels&&l(he)&&l(he).length>0&&Ze(wt)})}N(U,J)};Y(ut,U=>{p()>=0&&U(G)})}N(ae,$)};Y(st,ae=>{l(ne)&&l(se)&&ae(ie)})}N(t,qe),_e()}at(["click"]);var xh=X("<!> <!> <!> <!>",1);function Fo(t,e){let r=D(e,"whole",3,!1),s=An(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Ki(t,or({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return o1},get pngWidth(){return i1},get pngHeight(){return c1},get pngRes(){return u1}},()=>s,{children:(o,a)=>{var c=xh(),f=K(c);Br(f,()=>e.children);var u=P(f,2);Ji(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var d=P(u,2);Zi(d,{showGrid:!0,get label(){return e.yLabel}});var v=P(d,2);Qi(v,{}),N(o,c)},$$slots:{default:!0}}))}var kh=X("<!> <!> <!> <!>",1);function qo(t,e){we(e,!0);const r=C(()=>e.props&&e.props.data?e.props.data:null),s=C(()=>e.props&&e.props.res?e.props.res:null),o=C(()=>l(s)&&e.params.resID?l(s)[e.params.resID]:null),a=C(()=>l(s)&&e.params.resID?l(r)[e.params.resID]:null),c=C(()=>e.props&&e.props.model?e.props.model:null),f="#909090";let u=C(()=>l(c)&&l(c).oCrit?l(c).oCrit:0),d=C(()=>l(c)&&l(c).eCrit?l(c).eCrit:0),v=C(()=>l(o).objindices.map(B=>B+1)),m=C(()=>m1(l(o).outcomes.f,1,1,e.params.transType)),h=C(()=>l(o).objlabels.map(B=>B.slice(0,nc))),g="Full dustance",p="Objects",w=C(()=>e.params.transType==="log"?"Full distance, log(1 + f)":"Full distance, f"),b=re(void 0),_=re(void 0),A=C(()=>h1(l(a),l(o),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),E=C(()=>e.params.colorByObj?e.params.colorByObj.ind:null),k=C(()=>l(E)?Cr(l(E))+1:Cr(l(o).objindices)+1),S=C(()=>l(E)?Yr(l(E)):Yr(l(o).objindices)),M=C(()=>(l(k)-l(S))*.025),L=C(()=>[l(S)-l(M),l(k)+l(M)]),q=C(()=>({x:l(L),y:e.params.transType==="log"?[Math.log(1+l(u)),Math.log(1+l(u))]:[l(u),l(u)]})),T=C(()=>({x:l(L),y:e.params.transType==="log"?[Math.log(1+l(d)),Math.log(1+l(d))]:[l(d),l(d)]})),j=C(()=>{if(!l(q)||!l(_))return[0,1];const B=Math.max(l(_)[1],l(q).y[0]);return[-.02*(B-l(_)[0]),(1.05+.1*(e.params.colorBy!=="none")+.05*e.params.showLabels)*B]});var y=be(),z=K(y);{var V=B=>{Fo(B,{title:g,get limX(){return l(L)},get limY(){return l(j)},xLabel:p,get yLabel(){return l(w)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(I,W)=>{var oe=kh(),te=K(oe);{var Z=le=>{ln(le,{get xValues(){return l(T).x},get yValues(){return l(T).y},lineColor:f,lineType:2})};Y(te,le=>{l(T)&&le(Z)})}var ne=P(te,2);{var se=le=>{ln(le,{get xValues(){return l(q).x},get yValues(){return l(q).y},lineColor:f,lineType:3})};Y(ne,le=>{l(q)&&(e.params.resID!=="test"||e.params.subset&&e.params.subset==="members")&&e.params.resID&&e.params.resID!=="new"&&le(se)})}var he=P(ne,2);lc(he,{get labels(){return l(h)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(v)},get yValues(){return l(m).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return To[e.params.resID]},get colors(){return l(A).colors},get filled(){return l(A).filled},get ind(){return l(E)},get xRange(){return l(b)},set xRange(le){O(b,le,!0)},get yRange(){return l(_)},set yRange(le){O(_,le,!0)}});var fe=P(he,2);{var ee=le=>{{let Ae=C(()=>l(A).breaks!==null);ec(le,{get show(){return l(Ae)},get colmap(){return l(A).map},get breaks(){return l(A).breaks},get labels(){return l(A).labels}})}};Y(fe,le=>{l(A)&&l(A).showBar&&le(ee)})}N(I,oe)},$$slots:{default:!0}})};Y(z,B=>{l(v)&&l(m)&&B(V)})}N(t,y),_e()}var Eh=X("<!> <!> <!>",1),Ah=X("<!> <!> <!>",1);function Sh(t,e){we(e,!0);const r="#e0e0e0",s="Number of extremes (expected)",o="Number of extremes (observed)",a="plot-extremes";function c(T){const j=Be.zeros(T+1),y=Be.zeros(T+1),z=Be.zeros(T+1),V=Be.zeros(T+1);for(let B=1;B<T;B++){const I=B/T,W=2*Math.sqrt(B*(1-I));j.v[B]=B,z.v[B]=B,y.v[B]=B-W,V.v[B]=B+W}return j.v[T]=T,z.v[T]=T,y.v[T]=T,V.v[T]=T,{xStart:j,xEnd:z,yStart:y,yEnd:V}}function f(T,j,y){const z=j.f,V=T.nMembers,B=Be.zeros(V);for(let I=1;I<=V;I++){const W=I/V,oe=Cn(1-W,y);let te=0;for(let Z=0;Z<V;Z++)z[T.ind.members[Z]]>oe&&(te+=1);B.v[I-1]=te}return B}let u=C(()=>e.props&&e.props.res?e.props.res:null),d=C(()=>e.props&&e.props.model?e.props.model:null),v=C(()=>l(d)&&l(d).Nf?l(d).Nf:0),m=C(()=>Object.keys(l(u))),h=C(()=>e.params.resID!=="both"?[e.params.resID]:l(m)),g=C(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),p=C(()=>l(h)?l(h).map(T=>({id:T,label:T,point:{marker:1,lineColor:Ln[T],faceColor:Po[T],marker:To[T],markerSize:.85,lineWidth:1.5}})):null),w=C(()=>l(u)&&l(h)?l(h).reduce((T,j)=>(T[j]=Be.seq(1,l(u)[j].nMembers),T),{}):null),b=C(()=>l(u)&&l(m)?l(m).reduce((T,j)=>(T[j]=f(l(u)[j],l(u)[j].outcomes,l(v)),T),{}):null),_=C(()=>l(h)?l(h).reduce((T,j)=>Math.max(T,l(w)[j].length),0):1),A=C(()=>l(_)>1?c(l(_)):null),E=C(()=>l(w)?[-1,l(_)+2]:[0,1]),k=C(()=>l(w)?[-1,l(_)+2]:[0,1]),S="Extremes";var M=be(),L=K(M);{var q=T=>{Fo(T,{title:S,xLabel:s,yLabel:o,get limX(){return l(E)},get limY(){return l(k)},fileName:a,whole:!0,children:(j,y)=>{var z=Ah(),V=K(z);{var B=te=>{var Z=Eh(),ne=K(Z);Xv(ne,or(()=>l(A),{lineColor:r}));var se=P(ne,2);ln(se,{get xValues(){return l(A).xStart},get yValues(){return l(A).yStart},lineColor:r});var he=P(se,2);ln(he,{get xValues(){return l(A).xEnd},get yValues(){return l(A).yEnd},lineColor:r}),N(te,Z)};Y(V,te=>{l(A)&&te(B)})}var I=P(V,2);Qe(I,17,()=>l(h),rt,(te,Z)=>{lc(te,{get xValues(){return l(w)[l(Z)]},get yValues(){return l(b)[l(Z)]},plotType:"p",showLabels:!1,get faceColor(){return Po[l(Z)]},get mainColor(){return Ln[l(Z)]},get marker(){return To[l(Z)]},lineWidth:1.5})});var W=P(I,2);{var oe=te=>{l1(te,{get items(){return l(p)},get position(){return l(g)}})};Y(W,te=>{l(p)&&l(p).length>0&&te(oe)})}N(j,z)},$$slots:{default:!0}})};Y(L,T=>{l(u)&&T(q)})}N(t,M),_e()}var Ch=X("<!> <!> <!>",1),Nh=X("<!> <!> <!> <!> <!>",1),Mh=X('<div class="plot-container svelte-1838sos" role="tooltip"><!></div>');function Oo(t,e){we(e,!0);let r=D(e,"outliers",19,()=>[]);const s=C(()=>e.props&&e.props.data?e.props.data:null),o=C(()=>l(s)&&e.params.resID?l(s)[e.params.resID]:null);let a=re(-1);function c(S){if(S.target.tagName!=="rect"){O(a,-1);return}const M=Array.from(S.target.parentNode.children).indexOf(S.target);if(M<0){O(a,-1);return}l(a)!==M&&O(a,M,!0)}const f=C(()=>{const S=ct(l(o).varvalues),M=S.length,L=(S.v[1]-S.v[0])/2,q=(S.v[M-1]-S.v[M-2])/2,T=[S.v[0],S.v[M-1]],j=[T[0]-L,T[1]+q],y=(T[1]-T[0])/M;return{values:S,lim:j,width:y,hwidth:y*.5}}),u=C(()=>l(f)?l(f).values.apply(S=>S-l(f).hwidth):null),d=C(()=>l(o)&&e.props&&e.props.model?Ci(l(o).values,e.props.model.mX,e.props.model.sX):null),v=C(()=>l(d)?l(d).t():null);let m=C(()=>l(v)?l(v).getcolumn(e.selected>=0?e.selected+1:1):null),h=C(()=>{const S={all:l(v),sel:l(m),label:"Preprocessed data, X"},M=$r(S.all.v),L=M[1]-M[0],q=[M[0]-L/50,M[1]+L/12],T=Be.fill(M[1],S.sel.length);return S.lim=q,S.top=T,S.height=L,S});const g=C(()=>l(f)&&l(a)>=0?l(f).values.v[l(a)]:null),p=C(()=>l(h)&&l(a)>=0?l(h).sel.v[l(a)]:null),w=C(()=>l(o)&&l(a)>=0?l(o).varlabels[l(a)]:null),b=C(()=>l(o)&&e.selected>=0?`Object ${l(o).objlabels[e.selected].replace("_","-")}`:null),_=C(()=>l(o)?l(o).varvaluesName+(l(o).varvaluesUnits?", "+l(o).varvaluesUnits:""):null);var A=be(),E=K(A);{var k=S=>{var M=Mh();M.__click=c;var L=R(M);Fo(L,{get title(){return l(b)},get yLabel(){return l(h).label},get xLabel(){return l(_)},get limY(){return l(h).lim},get limX(){return l(f).lim},fileName:"plot-contributions",children:(q,T)=>{var j=Nh(),y=K(j);{let Z=C(()=>e.selected>=0?"#e0e0e0":"#a0a0a0");$i(y,{get xValues(){return l(f).values},get yValues(){return l(h).all},get lineColor(){return l(Z)}})}var z=P(y,2);{var V=Z=>{var ne=be(),se=K(ne);Qe(se,17,r,rt,(he,fe)=>{{let ee=C(()=>l(h).all.getcolumn(l(fe)+1));ln(he,{get xValues(){return l(f).values},get yValues(){return l(ee)},lineColor:"#ffdd88"})}}),N(Z,ne)};Y(z,Z=>{r().length>0&&Z(V)})}var B=P(z,2);{var I=Z=>{ln(Z,{get xValues(){return l(f).values},get yValues(){return l(h).sel},lineColor:"crimson"})};Y(B,Z=>{e.selected>=0&&Z(I)})}var W=P(B,2);vl(W,{get left(){return l(u)},get top(){return l(h).top},get height(){return l(h).height},get width(){return l(f).width},faceColor:"transparent",borderColor:"transparent"});var oe=P(W,2);{var te=Z=>{var ne=Ch(),se=K(ne);{let ee=C(()=>[l(g)]),le=C(()=>[l(h).top.v[0]]),Ae=C(()=>[l(w)]);hl(se,{get xValues(){return l(ee)},get yValues(){return l(le)},get labels(){return l(Ae)},pos:3,textSize:.85})}var he=P(se,2);{let ee=C(()=>[l(g)]),le=C(()=>[l(p)]);t1(he,{get xValues(){return l(ee)},get yValues(){return l(le)},faceColor:"crimson",lineColor:"crimson"})}var fe=P(he,2);{let ee=C(()=>[l(u).v[l(a)]]),le=C(()=>[l(h).top.v[l(a)]]);vl(fe,{get left(){return l(ee)},get top(){return l(le)},get height(){return l(h).height},get width(){return l(f).width},faceColor:"#ff000015"})}N(Z,ne)};Y(oe,Z=>{l(a)>=0&&Z(te)})}N(q,j)},$$slots:{default:!0}}),N(S,M)};Y(E,S=>{l(f)&&l(h)&&S(k)})}N(t,A),_e()}at(["click"]);function Do(t){const e=Object.keys(t),r=t[e[0]],s=r.nMembers>0&&r.nStrangers>0,o=e[0]==="new",a=r.nMembers>0?"members":r.nStrangers>0?"strangers":"all",c={resID:{el:_t,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},subset:{el:_t,hidden:!s||o,default:a,label:"Show",props:{options:["members","strangers","all"]}},transType:{el:_t,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:jn,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}};return r.nStrangers>0&&r.nStrangers==0&&r.classNames&&r.classNames.length>1&&(c.colorBy={el:_t,hidden:!1,default:"roles",label:"Color by",props:{options:["roles","classes"]}}),c}function ml(t){return{resID:{el:_t,hidden:t.length==1,default:t[0],label:"Results",props:{options:t}}}}function jh(t,e){we(e,!0);const r=(v,m=Rt)=>{ue(v,{label:"Selected",children:(h,g)=>{At(h,{onclick:()=>e.markOutlier(m()),text:"remove"})},$$slots:{default:!0}})},s={cal:e.calsetp},o=C(()=>({cal:e.calres})),a={regular:on.regular,extreme:on.extreme,outlier:on.outlier};ge(()=>{if(e.nimca.limType){const v=l(o)[l(u).acceptance.resID].outcomes;l(u).acceptance.colorByObj={classColmap:a,labels:[`regular: ${v.rolsNum.regular}`,`extreme: ${v.rolsNum.extreme}`,`outliers: ${v.rolsNum.outlier}`],values:v.rols}}});const c=C(()=>({acceptance:{label:"Acceptance",scope:"objects",component:qo,buttons:r},extremes:{label:"Extremes",scope:"stats",component:Sh},dataset:{label:"Datasets",scope:"objects",component:Oo,buttons:r}})),f=Me({acceptance:Do(l(o)),extremes:ml(["cal"]),dataset:ml(["cal"])});let u=re(Me({acceptance:Mn(f.acceptance),extremes:Mn(f.extremes),dataset:Mn(f.extremes)}));const d=C(()=>({res:l(o),model:e.nimca,data:s}));Io(t,{get plots(){return l(c)},get controls(){return f},get props(){return l(d)},get params(){return l(u)},set params(v){O(u,v,!0)}}),_e()}var Th=X('<div class="outliers-pane svelte-1mp4dba"><!></div>'),Ph=X('<div class="buttons"><!> <!></div>'),Lh=X('<div class="model-stats svelte-1mp4dba"><!></div> <div class="result-stats svelte-1mp4dba"><!></div>',1),zh=X(`<p class="svelte-1mp4dba">In this tab you can train a Naïve DD-SIMCA (NIMCA) model. After creating the model you can save it to a file and use it in other tabs. For example, validate it using test set (tab <strong>Test</strong>) or apply it to a dataset with unknown class membership (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1mp4dba">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1mp4dba">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),Rh=X(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to apply proper preprocessing methods. You can create a chain of the methods directly in the app
               (button <strong>Create</strong>), load previously created preprocessing model (<strong>Load</strong>), or just skip this step. In this case the data will be only mean centered for computing the distances.</p>`,1),Ih=X('<div class="help-text svelte-1mp4dba"><!></div>'),Fh=X('<div class="app-container svelte-1mp4dba"><div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <div class="nimca-settings svelte-1mp4dba"><!> <!></div> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function qh(t,e){we(e,!0);const r=C(()=>e.session.train);ge(()=>{l(r).nimca&&!(l(r).nimca instanceof ir)&&(l(r).nimca=ir.fromJSON(l(r).nimca))});function s(){l(r).nimca=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null}function o(j){if(j<0||j>l(r).calres.nrows-1)return;const y=l(r).calseto.objindices[j];y>=0&&!l(r).outliers.includes(y)&&(l(r).nimca=null,l(r).outliers.push(y),l(r).calseto=es(l(r).calset,l(r).outliers),s())}function a(){l(r).nimca=null,l(r).outliers=[],l(r).calseto=l(r).calset,s()}function c(){l(r).nimca=null,l(r).outliers.pop(),l(r).calseto=es(l(r).calset,l(r).outliers),s()}Qs(()=>{l(r).calset===null?(l(r).outliers=[],l(r).calsetp=null,l(r).calseto=null,l(r).className=null,l(r).prepmodel=null,l(r).prepobj=[],l(r).prepType=null,l(r).nimca=null):l(r).calset&&!l(r).className&&(l(r).className=l(r).calset.classNames[0],l(r).calseto=l(r).calset)}),ge(()=>{l(r).calset===null&&(l(r).nimca=null,l(r).calseto=null,l(r).calsetp=null)}),ge(()=>{l(r).calsetp===null&&(l(r).nimca=null,l(r).calres=null)}),ge(()=>{l(r).calsetp&&l(r).nimca&&(l(r).calres=l(r).nimca.predict(l(r).calsetp))}),ge(()=>{const j=hr(()=>JSON.stringify(e.session,Rs));l(r).nimca?e.backupSession(j,l(r).calset,l(r).nimca):e.backupSession(j,l(r).calset)});var f=Fh(),u=R(f),d=R(u),v=R(d);Lo(v,{className:"Class",classMandatory:!0,classUnique:!0,get dataset(){return l(r).calset},set dataset(j){l(r).calset=j}});var m=P(d,2);{var h=j=>{var y=Th(),z=R(y);bo(z,{get outliers(){return l(r).outliers},get dataset(){return l(r).calset},resetOutliers:a,undoOutliers:c}),N(j,y)};Y(m,j=>{l(r).outliers&&l(r).outliers.length>0&&j(h)})}var g=P(m,2);{var p=j=>{z1(j,{get WASM(){return e.WASM},get rawdata(){return l(r).calseto},get prepType(){return l(r).prepType},set prepType(y){l(r).prepType=y},get prepobj(){return l(r).prepobj},set prepobj(y){l(r).prepobj=y},get prepdata(){return l(r).calsetp},set prepdata(y){l(r).calsetp=y},get prepmeta(){return l(r).prepmeta},set prepmeta(y){l(r).prepmeta=y},get prepmodel(){return l(r).prepmodel},set prepmodel(y){l(r).prepmodel=y}})};Y(g,j=>{l(r).calseto&&j(p)})}var w=P(g,2),b=R(w);{var _=j=>{Ro(j,{get className(){return l(r).className},get calset(){return l(r).calsetp},get nimca(){return l(r).nimca},set nimca(y){l(r).nimca=y}})};Y(b,j=>{l(r).calsetp&&j(_)})}var A=P(b,2);{var E=j=>{ue(j,{label:"Download",children:(y,z)=>{var V=Ph(),B=R(V);At(B,{onclick:()=>vo(l(r).nimca,l(r).calres,l(r).calset,"train",l(r).outliers),text:"Res (cal)"});var I=P(B,2);At(I,{onclick:()=>ho(l(r).nimca,l(r).prepmodel),text:"Model"}),N(y,V)},$$slots:{default:!0}})};Y(A,j=>{l(r).nimca&&l(r).calres&&j(E)})}var k=P(w,2);{var S=j=>{var y=Lh(),z=K(y),V=R(z);zo(V,{get nimca(){return l(r).nimca}});var B=P(z,2),I=R(B);$1(I,{get calres(){return l(r).calres}}),N(j,y)};Y(k,j=>{l(r).nimca&&l(r).calres&&j(S)})}var M=P(u,2),L=R(M);{var q=j=>{var y=Ih(),z=R(y);{var V=I=>{var W=zh();N(I,W)},B=I=>{var W=be(),oe=K(W);{var te=Z=>{var ne=Rh();N(Z,ne)};Y(oe,Z=>{l(r).calsetp||Z(te)})}N(I,W)};Y(z,I=>{l(r).calset?I(B,!1):I(V)})}N(j,y)},T=j=>{var y=be(),z=K(y);{var V=B=>{var I=be(),W=K(I);kn(W,()=>l(r).calres,oe=>{jh(oe,or({markOutlier:o},()=>l(r)))}),N(B,I)};Y(z,B=>{l(r).nimca&&l(r).calres&&B(V)},!0)}N(j,y)};Y(L,j=>{!l(r).nimca||!l(r).calres?j(q):j(T,!1)})}N(t,f),_e()}var Oh=X("<!> <!>",1),Dh=X('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),Bh=X('<p class="model-info svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model:</span> <!></p> <!>',1),Vh=X("<p><!></p>"),Yh=X("<!> <!>",1);function oc(t,e){we(e,!0);let r=D(e,"prep",15),s=D(e,"nimca",15),o=re(""),a=re("neutral"),c=re("");function f(_){try{const A=JSON.parse(_,go);if(!Object.keys(A).includes("nimca")||!Object.keys(A).includes("prep")||A.nimca.class[0]!=="nimcamodel")throw new Error("The JSON file you selected does not contain NIMCA mdel.");A.nimca.fileName=l(v),r(A.prep),s(ir.fromJSON(A.nimca)),O(a,"success"),O(c,"")}catch(A){s(null),r(null),O(a,"error"),O(c,A,!0)}}function u(_){const A=new FileReader;A.onload=()=>{f(A.result)},A.readAsText(l(o))}function d(){O(o,""),s(null),r(null),O(a,"neutral"),O(c,"")}ge(()=>{l(o)===null?(s(null),r(null),O(a,"neutral"),O(c,"")):(O(a,"neutral"),O(c,""))});let v=C(()=>l(o)?l(o).name.replace(/\.[^/.]+$/,""):"");var m=Yh(),h=K(m);{var g=_=>{var A=Oh(),E=K(A);kn(E,()=>l(o),M=>{ue(M,{children:(L,q)=>{fl(L,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(o)},set file(T){O(o,T,!0)}})},$$slots:{default:!0}})});var k=P(E,2);{var S=M=>{ue(M,{label:" ",children:(L,q)=>{At(L,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(k,M=>{l(o)&&M(S)})}N(_,A)},p=_=>{ue(_,{name:"info",children:(A,E)=>{var k=Bh(),S=K(k),M=P(R(S),2),L=R(M),q=P(M,4),T=P(q);{var j=z=>{var V=Dh(),B=P(K(V),3);yo(B,{get prepmodel(){return r()}}),N(z,V)};Y(T,z=>{r()&&z(j)})}var y=P(S,2);nn(y,{onclick:d}),Q(()=>{F(M,"title",s().fileName),pe(L,s().fileName),pe(q,` ${s().ncols??""} predictors${s().center?", centered":""}${s().scale?", scaled":""} `)}),N(A,k)},$$slots:{default:!0}})};Y(h,_=>{s()?_(p,!1):_(g)})}var w=P(h,2);{var b=_=>{ue(_,{status:"error",children:(A,E)=>{var k=Vh(),S=R(k);jt(S,()=>l(c)),N(A,k)},$$slots:{default:!0}})};Y(w,_=>{(l(a)==="error"||l(c))&&_(b)})}N(t,m),_e()}var Wh=X('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Out</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Sensitivity</td><td class="svelte-k5uafz"> </td></tr>',1),Uh=X('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">In</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Specificity</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Selectivity</td><td class="svelte-k5uafz"> </td></tr>',1),Hh=X('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Efficiency</td><td class="svelte-k5uafz"> </td></tr>'),Gh=X('<table class="svelte-k5uafz"><thead><tr class="svelte-k5uafz"><th class="svelte-k5uafz"></th><th class="svelte-k5uafz">Test</th></tr></thead><tbody><tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Members</td><td class="svelte-k5uafz"> </td></tr><!><tr class="section svelte-k5uafz"><td class="label svelte-k5uafz">Strangers</td><td class="svelte-k5uafz"> </td></tr><!><!></tbody></table>');function Xh(t,e){we(e,!0);var r=be(),s=K(r);{var o=a=>{var c=Gh(),f=P(R(c)),u=R(f),d=P(R(u)),v=R(d),m=P(u);{var h=k=>{var S=Wh(),M=K(S),L=P(R(M)),q=R(L),T=P(M,2),j=P(R(T)),y=R(j);Q(z=>{pe(q,e.res.outcomes.rolsNum.outlier+e.res.outcomes.rolsNum.extreme),pe(y,z)},[()=>e.res.outcomes.stat.sensitivity.toFixed(3)]),N(k,S)};Y(m,k=>{e.res.nMembers>0&&k(h)})}var g=P(m),p=P(R(g)),w=R(p),b=P(g);{var _=k=>{var S=Uh(),M=K(S),L=P(R(M)),q=R(L),T=P(M,2),j=P(R(T)),y=R(j),z=P(T,2),V=P(R(z)),B=R(V);Q((I,W)=>{pe(q,e.res.outcomes.decsNum.in-e.res.outcomes.rolsNum.regular),pe(y,I),pe(B,W)},[()=>e.res.outcomes.stat.specificity.toFixed(3),()=>e.res.outcomes.stat.selectivity.toFixed(3)]),N(k,S)};Y(b,k=>{e.res.nStrangers>0&&k(_)})}var A=P(b);{var E=k=>{var S=Hh(),M=P(R(S)),L=R(M);Q(q=>pe(L,q),[()=>e.res.outcomes.stat.efficiency.toFixed(3)]),N(k,S)};Y(A,k=>{e.res.nStrangers>0&&e.res.nMembers>0&&k(E)})}Q(()=>{pe(v,e.res.nMembers),pe(w,e.res.nStrangers)}),N(a,c)};Y(s,a=>{e.res&&a(o)})}N(t,r),_e()}function Kh(t,e){we(e,!0);const r=(h,g=Rt)=>{ue(h,{label:"Selected",children:(p,w)=>{At(p,{onclick:()=>e.markOutlier(g()),text:"remove"})},$$slots:{default:!0}})},s={test:e.testsetp},o=C(()=>({test:e.testres})),a={regular:on.regular,extreme:on.extreme,outlier:on.outlier},c={alien:on.alien,external:on.external},f=C(()=>{const h=e.testres.outcomes;return{members:{classColmap:a,labels:[`regular: ${h.rolsNum.regular}`,`extreme: ${h.rolsNum.extreme}`,`outliers: ${h.rolsNum.outlier}`],values:h.rols,ind:e.testres.ind.members},strangers:{classColmap:c,labels:[`aliens: ${h.rolsNum.alien}`,`external: ${h.rolsNum.external}`],values:h.rols,ind:e.testres.ind.strangers}}}),u=C(()=>({acceptance:{label:"Acceptance",scope:"objects",component:qo,buttons:r},dataset:{label:"Datasets",scope:"objects",component:Oo,buttons:r}})),d=Me({acceptance:Do(l(o)),dataset:ml(["test"])});let v=re(Me({acceptance:Mn(d.acceptance),dataset:Mn(d.dataset)}));ge(()=>{l(f)&&l(v).acceptance.subset&&(l(v).acceptance.colorByObj=l(v).acceptance.subset!=="all"?l(f)[l(v).acceptance.subset]:null)}),ge(()=>{l(v).acceptance.colorBy=l(v).acceptance.subset!=="all"?"roles":"classes"});const m=C(()=>({res:l(o),model:e.nimca,data:s}));Io(t,{get plots(){return l(u)},get controls(){return d},get props(){return l(m)},get params(){return l(v)},set params(h){O(v,h,!0)}}),_e()}var Jh=X("<p> </p>"),Zh=X('<div class="data-loader svelte-1w77c1q"><!> <!></div>'),Qh=X('<div class="outliers-pane svelte-1w77c1q"><!></div>'),$h=X('<div class="buttons"><!> <!></div>'),e0=X('<div class="model-stats svelte-1w77c1q"><!></div> <div class="result-stats svelte-1w77c1q"><!></div>',1),t0=X('<p class="svelte-1w77c1q"><strong>Step 1</strong></p> <p class="svelte-1w77c1q">Load previously trained NIMCA model from file.</p>',1),r0=X(`<p class="svelte-1w77c1q"><strong>Step 2</strong></p> <p class="svelte-1w77c1q">Load test set set from CSV file. The requirements to the file are the same as for the training set (column with
               class labels is mandatory), but test set may contain class labels both for target class (members) as well as for
               alternative classes (strangers).</p>`,1),n0=X(`<div class="help-text svelte-1w77c1q"><p class="svelte-1w77c1q">In this tab you can apply previously trained NIMCA model to a test set. The test set can include target class members,
            objects belonging to alternative classes or both. You can use them for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),s0=X('<div class="app-container svelte-1w77c1q"><div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!> <!> <div class="nimca-settings svelte-1w77c1q"><!> <!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function l0(t,e){we(e,!0);let r=re("");const s=C(()=>e.session.test);ge(()=>{l(s).nimca&&!(l(s).nimca instanceof ir)&&(l(s).nimca=ir.fromJSON(l(s).nimca))});function o(y){if(y<0||y>l(s).testres.nrows-1)return;const z=l(s).testseto.objindices[y];z>=0&&!l(s).outliers.includes(z)&&(l(s).outliers.push(z),l(s).testseto=es(l(s).testset,l(s).outliers),l(s).testsetp=null,l(s).testres=null)}function a(){l(s).outliers=[],l(s).testseto=l(s).testset,l(s).testsetp=null,l(s).testres=null}function c(){l(s).outliers.pop(),l(s).testseto=es(l(s).testset,l(s).outliers),l(s).testsetp=null,l(s).testres=null}async function f(y,z){if(O(r,""),!y)return null;if(!z||Object.keys(z).length===0){l(s).testsetp=y;return}e.WASM().then(V=>{const B=Ls(V,y.values,y.nresp,z,!1,!1),I=_o(Ml(y),B);l(s).testsetp=fo(I,z)}).catch(V=>{l(s).testsetp=null,console.error(V),O(r,V,!0)})}Qs(()=>{l(s).testset===null&&(O(r,""),l(s).outliers=[],l(s).testsetp=null,l(s).testseto=null,l(s).testres=null),l(s).nimca===null&&(O(r,""),l(s).outliers=[],l(s).testset=null,l(s).testsetp=null,l(s).testseto=null,l(s).testres=null)}),ge(()=>{l(s).nimca===null&&(O(r,""),l(s).outliers=[],l(s).testset=null,l(s).testsetp=null,l(s).testseto=null,l(s).testres=null)}),ge(()=>{l(s).teset===null&&(O(r,""),l(s).outliers=[],l(s).testsetp=null,l(s).testseto=null,l(s).testres=null)}),ge(()=>{if(l(s).testset&&!l(s).testseto){if(O(r,""),l(s).testset.values.ncols!==l(s).nimca.ncols){O(r,`Wrong number of predictors (expected ${l(s).nimca.ncols}, got ${l(s).testset.values.ncols}), check settings and try to load again.`);return}l(s).testseto=l(s).testset}}),ge(()=>{l(s).testseto&&!l(s).testsetp&&(O(r,""),f(l(s).testseto,l(s).prep))}),ge(()=>{l(s).testsetp&&l(s).nimca&&(l(s).testres=l(s).nimca.predict(l(s).testsetp))}),ge(()=>{const y=hr(()=>JSON.stringify(e.session,Rs));e.backupSession(y,l(s).testset,l(s).testres,l(s).nimca)});var u=s0(),d=R(u),v=R(d),m=R(v);oc(m,{get nimca(){return l(s).nimca},set nimca(y){l(s).nimca=y},get prep(){return l(s).prep},set prep(y){l(s).prep=y}});var h=P(v,2);{var g=y=>{var z=Zh(),V=R(z);Lo(V,{className:"Class",classMandatory:!0,get dataset(){return l(s).testset},set dataset(W){l(s).testset=W}});var B=P(V,2);{var I=W=>{ue(W,{status:"error",children:(oe,te)=>{var Z=Jh(),ne=R(Z);Q(()=>pe(ne,l(r))),N(oe,Z)},$$slots:{default:!0}})};Y(B,W=>{l(r)&&W(I)})}N(y,z)};Y(h,y=>{l(s).nimca&&y(g)})}var p=P(h,2);{var w=y=>{var z=Qh(),V=R(z);bo(V,{get outliers(){return l(s).outliers},get dataset(){return l(s).testset},resetOutliers:a,undoOutliers:c}),N(y,z)};Y(p,y=>{l(s).outliers&&l(s).outliers.length>0&&y(w)})}var b=P(p,2),_=R(b);{var A=y=>{Ro(y,{get className(){return l(s).className},fit:!1,get nimca(){return l(s).nimca},set nimca(z){l(s).nimca=z}})};Y(_,y=>{l(s).nimca&&l(s).testsetp&&y(A)})}var E=P(_,2);{var k=y=>{ue(y,{label:"Download",children:(z,V)=>{var B=$h(),I=R(B);At(I,{onclick:()=>vo(l(s).nimca,l(s).testres,l(s).testset,"test",l(s).outliers),text:"Res (test)"});var W=P(I,2);At(W,{onclick:()=>ho(l(s).nimca,l(s).prep),text:"Model"}),N(z,B)},$$slots:{default:!0}})};Y(E,y=>{l(s).nimca&&l(s).testres&&y(k)})}var S=P(b,2);{var M=y=>{var z=e0(),V=K(z),B=R(V);zo(B,{get nimca(){return l(s).nimca}});var I=P(V,2),W=R(I);Xh(W,{get res(){return l(s).testres}}),N(y,z)};Y(S,y=>{l(s).nimca&&l(s).testres&&y(M)})}var L=P(d,2),q=R(L);{var T=y=>{var z=n0(),V=P(R(z),2);{var B=W=>{var oe=t0();N(W,oe)},I=W=>{var oe=be(),te=K(oe);{var Z=ne=>{var se=r0();N(ne,se)};Y(te,ne=>{l(s).testset||ne(Z)},!0)}N(W,oe)};Y(V,W=>{l(s).nimca?W(I,!1):W(B)})}N(y,z)},j=y=>{var z=be(),V=K(z);{var B=I=>{var W=be(),oe=K(W);kn(oe,()=>l(s).testres,te=>{Kh(te,or({markOutlier:o},()=>l(s)))}),N(I,W)};Y(V,I=>{l(s).nimca&&l(s).testres&&I(B)},!0)}N(y,z)};Y(q,y=>{!l(s).nimca||!l(s).testres?y(T):y(j,!1)})}N(t,u),_e()}var o0=X('<table class="svelte-vm8g95"><thead><tr class="svelte-vm8g95"><th class="svelte-vm8g95"></th><th class="svelte-vm8g95">New</th></tr></thead><tbody><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Objects</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">In</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Out</td><td class="svelte-vm8g95"> </td></tr></tbody></table>');function a0(t,e){we(e,!0);var r=be(),s=K(r);{var o=a=>{var c=o0(),f=P(R(c)),u=R(f),d=P(R(u)),v=R(d),m=P(u),h=P(R(m)),g=R(h),p=P(m),w=P(R(p)),b=R(w);Q(()=>{pe(v,e.res.outcomes.decs.length),pe(g,e.res.outcomes.decsNum.in),pe(b,e.res.outcomes.decsNum.out)}),N(a,c)};Y(s,a=>{e.res&&a(o)})}N(t,r),_e()}function i0(t,e){we(e,!0);const r=(d,v=Rt)=>{ue(d,{label:"Selected",children:(m,h)=>{At(m,{onclick:()=>e.markOutlier(v()),text:"remove"})},$$slots:{default:!0}})},s={new:e.newsetp},o=C(()=>({new:e.newres})),a=C(()=>({acceptance:{label:"Acceptance",scope:"objects",component:qo,buttons:r},dataset:{label:"Datasets",scope:"objects",component:Oo,buttons:r}})),c=Me({acceptance:Do(l(o)),dataset:ml(["new"])});let f=re(Me({acceptance:Mn(c.acceptance),dataset:Mn(c.dataset)}));ge(()=>{l(f).acceptance.colorByObj={values:e.newres.outcomes.decs,classColmap:{in:Ln.new,out:Ln.new},labels:["in","out"],filled:e.newres.outcomes.decs.map(d=>d==="in"),showBar:!1}});const u=C(()=>({res:l(o),model:e.nimca,data:s}));Io(t,{get plots(){return l(a)},get controls(){return c},get props(){return l(u)},get params(){return l(f)},set params(d){O(f,d,!0)}}),_e()}var c0=X("<p> </p>"),u0=X('<div class="data-loader svelte-1rjc99q"><!> <!></div>'),f0=X('<div class="outliers-pane svelte-1rjc99q"><!></div>'),d0=X('<div class="buttons"><!> <!></div>'),v0=X('<div class="model-stats svelte-1rjc99q"><!></div> <div class="result-stats svelte-1rjc99q"><!></div>',1),h0=X('<p class="svelte-1rjc99q"><strong>Step 1</strong></p> <p class="svelte-1rjc99q">Load previously trained NIMCA model from file.</p>',1),m0=X(`<p class="svelte-1rjc99q"><strong>Step 2</strong></p> <p class="svelte-1rjc99q">Load data set from CSV file (or SPC files). The requirements to the file are the same as for the
               training set but no columns with reference classes is expected. If you have reference classes, use <em>Test</em> tab.</p>`,1),g0=X(`<div class="help-text svelte-1rjc99q"><p class="svelte-1rjc99q">In this tab you can apply previously trained NIMCA model to a new dataset with objects whose class is unknown (hence the app
            does not expect column with target classes).</p> <!></div>`),p0=X('<div class="app-container svelte-1rjc99q"><div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <div class="nimca-settings svelte-1rjc99q"><!> <!></div> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function b0(t,e){we(e,!0);let r=re("");const s=C(()=>e.session.new);ge(()=>{l(s).nimca&&!(l(s).nimca instanceof ir)&&(l(s).nimca=ir.fromJSON(l(s).nimca))});function o(y){if(y<0||y>l(s).newres.nrows-1)return;const z=l(s).newseto.objindices[y];z>=0&&!l(s).outliers.includes(z)&&(l(s).outliers.push(z),l(s).newseto=es(l(s).newset,l(s).outliers),l(s).newsetp=null,l(s).newres=null)}function a(){l(s).outliers=[],l(s).newseto=l(s).newset,l(s).newsetp=null,l(s).newres=null}function c(){l(s).outliers.pop(),l(s).newseto=es(l(s).newset,l(s).outliers),l(s).newsetp=null,l(s).newres=null}async function f(y,z){if(O(r,""),!y)return null;if(!z||Object.keys(z).length===0){l(s).newsetp=y;return}e.WASM().then(V=>{const B=Ls(V,y.values,y.nresp,z,!1,!1),I=_o(Ml(y),B);l(s).newsetp=fo(I,z)}).catch(V=>{l(s).newsetp=null,console.error(V),O(r,V,!0)})}Qs(()=>{l(s).newset===null&&(O(r,""),l(s).outliers=[],l(s).newsetp=null,l(s).newseto=null,l(s).newres=null),l(s).nimca===null&&(O(r,""),l(s).outliers=[],l(s).newset=null,l(s).newsetp=null,l(s).newseto=null,l(s).newres=null)}),ge(()=>{l(s).nimca===null&&(O(r,""),l(s).outliers=[],l(s).newset=null,l(s).newsetp=null,l(s).newseto=null,l(s).newres=null)}),ge(()=>{l(s).newset===null&&(O(r,""),l(s).outliers=[],l(s).newsetp=null,l(s).newseto=null,l(s).newres=null)}),ge(()=>{if(l(s).newset&&!l(s).newseto){if(O(r,""),l(s).newset.values.ncols!==l(s).nimca.ncols){O(r,`Wrong number of predictors (expected ${l(s).nimca.ncols}, got ${l(s).newset.values.ncols}), check settings and try to load again.`);return}l(s).newseto=l(s).newset}}),ge(()=>{l(s).newseto&&!l(s).newsetp&&(O(r,""),f(l(s).newseto,l(s).prep))}),ge(()=>{l(s).newsetp&&l(s).nimca&&(l(s).newres=l(s).nimca.predict(l(s).newsetp))}),ge(()=>{const y=hr(()=>JSON.stringify(e.session,Rs));e.backupSession(y,l(s).newset,l(s).newres,l(s).nimca)});var u=p0(),d=R(u),v=R(d),m=R(v);oc(m,{get nimca(){return l(s).nimca},set nimca(y){l(s).nimca=y},get prep(){return l(s).prep},set prep(y){l(s).prep=y}});var h=P(v,2);{var g=y=>{var z=u0(),V=R(z);Lo(V,{className:"Class",classMandatory:!1,csvOnly:!1,get dataset(){return l(s).newset},set dataset(W){l(s).newset=W}});var B=P(V,2);{var I=W=>{ue(W,{status:"error",children:(oe,te)=>{var Z=c0(),ne=R(Z);Q(()=>pe(ne,l(r))),N(oe,Z)},$$slots:{default:!0}})};Y(B,W=>{l(r)&&W(I)})}N(y,z)};Y(h,y=>{l(s).nimca&&y(g)})}var p=P(h,2);{var w=y=>{var z=f0(),V=R(z);bo(V,{get outliers(){return l(s).outliers},get dataset(){return l(s).newset},resetOutliers:a,undoOutliers:c}),N(y,z)};Y(p,y=>{l(s).outliers&&l(s).outliers.length>0&&y(w)})}var b=P(p,2),_=R(b);{var A=y=>{Ro(y,{get className(){return l(s).className},isAlt:!0,fit:!1,get nimca(){return l(s).nimca},set nimca(z){l(s).nimca=z}})};Y(_,y=>{l(s).nimca&&l(s).newsetp&&y(A)})}var E=P(_,2);{var k=y=>{ue(y,{label:"Download",children:(z,V)=>{var B=d0(),I=R(B);At(I,{onclick:()=>vo(l(s).nimca,l(s).newres,l(s).newset,"new",l(s).outliers),text:"Res (new)"});var W=P(I,2);At(W,{onclick:()=>ho(l(s).nimca,l(s).prep),text:"Model"}),N(z,B)},$$slots:{default:!0}})};Y(E,y=>{l(s).nimca&&l(s).newres&&y(k)})}var S=P(b,2);{var M=y=>{var z=v0(),V=K(z),B=R(V);zo(B,{get nimca(){return l(s).nimca}});var I=P(V,2),W=R(I);a0(W,{get res(){return l(s).newres}}),N(y,z)};Y(S,y=>{l(s).nimca&&l(s).newres&&y(M)})}var L=P(d,2),q=R(L);{var T=y=>{var z=g0(),V=P(R(z),2);{var B=W=>{var oe=h0();N(W,oe)},I=W=>{var oe=be(),te=K(oe);{var Z=ne=>{var se=m0();N(ne,se)};Y(te,ne=>{l(s).newset||ne(Z)})}N(W,oe)};Y(V,W=>{l(s).nimca?W(I,!1):W(B)})}N(y,z)},j=y=>{var z=be(),V=K(z);{var B=I=>{var W=be(),oe=K(W);kn(oe,()=>l(s).newres,te=>{i0(te,or({markOutlier:o},()=>l(s)))}),N(I,W)};Y(V,I=>{l(s).nimca&&l(s).newres&&I(B)},!0)}N(y,z)};Y(q,y=>{!l(s).nimca||!l(s).newres?y(T):y(j,!1)})}N(t,u),_e()}var w0=X('<sup style="color:red">β</sup>'),_0=X('<li><button class="svelte-1josccy"> </button></li>'),y0=X("<div><!></div>"),x0=X('<div class="info-container svelte-1josccy"><!></div>'),k0=X('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function E0(t,e){we(e,!0);let r=D(e,"tabs",19,()=>[]),s=D(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let a=re(!1),c=re(void 0),f=re("Current session "),u=re(!1);function d(L){O(f,L,!0),O(u,!0),setTimeout(()=>{O(f,"Current session "),O(u,!1)},1e3)}function v(){O(a,!0)}function m(){O(a,!1)}function h(L){l(c).tab=L}function g(){const L=indexedDB.open(o,1);L.onsuccess=q=>{const j=q.target.result.transaction(e.appID,"readwrite");j.objectStore(e.appID).delete("session"),j.oncomplete=()=>{O(c,e.initSession(),!0),d("Session was reinitialzed.")},j.onerror=()=>console.error("Failed to session from DB.")}}function p(L,q){window.localStorage.removeItem(e.appID+"-blocked");const T=indexedDB.open(o,1);T.onsuccess=j=>{const V=j.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);V.put(L,"session"),V.put(po(new Date),"session-update")}}function w(){new Promise((L,q)=>{const T=indexedDB.open(o,1);T.onsuccess=j=>{const B=j.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");B.onsuccess=()=>L(B.result),B.onerror=()=>q(B.error)}}).then(L=>{b(L),O(f,"Last session is restored "),O(u,!0),setTimeout(()=>{O(f,"Current session "),O(u,!1)},1500)}).catch(L=>{console.error(L),O(c,e.initSession(),!0)})}function b(L){if(!L||L==="undefined"){O(c,e.initSession(),!0);return}const q=JSON.parse(L,go);O(c,e.checkSession(q)?q:e.initSession(e.appID),!0)}function _(){const L=po(new Date),q=e.appID+"-session-"+L+".json";l(c).date=L;const T=JSON.stringify(l(c),Rs),j=new Blob([T],{type:"text/json"}),y=window.URL.createObjectURL(j),z=document.createElement("a");z.setAttribute("href",y),z.setAttribute("download",q),z.click()}function A(L){const q=new FileReader;q.onload=()=>{b(q.result),L.target.value=""},q.readAsText(L.target.files[0])}function E(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&g()}Hu(()=>{const L=e.appID,q=indexedDB.open(o,1);q.onupgradeneeded=T=>{const j=T.target.result;j.objectStoreNames.contains(L)||j.createObjectStore(L)},q.onsuccess=T=>{w()}});var k=be(),S=K(k);{var M=L=>{var q=k0(),T=R(q),j=R(T),y=R(j),z=P(y,2),V=R(z),B=P(V);{var I=ae=>{var $=w0();N(ae,$)};Y(B,ae=>{s()&&ae(I)})}var W=P(z,2),oe=R(W),te=P(j,2);Qe(te,21,r,rt,(ae,$,de)=>{var ke=_0();let ce;var Le=R(ke);Le.__click=()=>h(de),Le.__keydown=()=>h(de);var Pe=R(Le);Q(()=>{ce=bt(ke,1,"nav-item svelte-1josccy",null,ce,{selected:l(c).tab===de}),pe(Pe,l($).name)}),N(ae,ke)});var Z=P(T,2),ne=R(Z);kn(ne,()=>l(c).date,ae=>{var $=be(),de=K($);Qe(de,17,r,rt,(ke,ce,Le)=>{var Pe=y0();let Ye;var Je=R(Pe);Ms(Je,()=>l(ce).component,(kt,ut)=>{ut(kt,{get WASM(){return e.WASM},get session(){return l(c)},backupSession:p})}),Q(()=>Ye=bt(Pe,1,"tab-content svelte-1josccy",null,Ye,{hidden:l(c).tab!==Le})),N(ke,Pe)}),N(ae,$)});var se=P(Z,2),he=R(se);let fe;var ee=R(he),le=R(ee),Ae=P(ee,2),De=R(Ae);De.__change=A;var Ie=P(Ae,2);Ie.__click=_;var Ve=P(Ie,2);Ve.__click=E;var Fe=P(he,2),Te=R(Fe);Te.__click=v,Te.__keydown=v;var qe=P(Te,2);Br(qe,()=>e.footer);var st=P(se,2);{var ie=ae=>{qi(ae,{closeModal:m,children:($,de)=>{var ke=x0(),ce=R(ke);Br(ce,()=>e.info),N($,ke)},$$slots:{default:!0}})};Y(st,ae=>{l(a)&&ae(ie)})}Q(()=>{F(y,"alt",e.appShortTitle),pe(V,e.appTitle),pe(oe,e.appSlogan),fe=bt(he,1,"session svelte-1josccy",null,fe,{"no-buttons":l(u)}),pe(le,l(f))}),N(L,q)};Y(S,L=>{l(c)&&L(M)})}N(t,k),_e()}at(["click","keydown","change"]);const F0="modulepreload",q0=function(t){return"/"+t},O0={},A0=function(e,r,s){let o=Promise.resolve();function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return o.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};async function S0(t={}){var Je,kt,ut;var e,r=t,s=!!globalThis.window,o=!!globalThis.WorkerGlobalScope,a=((kt=(Je=globalThis.process)==null?void 0:Je.versions)==null?void 0:kt.node)&&((ut=globalThis.process)==null?void 0:ut.type)!="renderer";if(a){const{createRequire:G}=await A0(async()=>{const{createRequire:U}=await Promise.resolve().then(()=>j0);return{createRequire:U}},void 0);var c=G(We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href)}var f="./this.program",u=(G,U)=>{throw U},d=We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href,v="",m,h;if(a){var g=c("fs");d.startsWith("file:")&&(v=c("path").dirname(c("url").fileURLToPath(d))+"/"),h=G=>(G=E(G)?new URL(G):G,g.readFileSync(G)),m=async G=>(G=E(G)?new URL(G):G,g.readFileSync(G,void 0)),1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),u=(G,U)=>{throw process.exitCode=G,U}}else if(s||o){try{v=new URL(".",d).href}catch{}o&&(h=G=>{var U=new XMLHttpRequest;return U.open("GET",G,!1),U.responseType="arraybuffer",U.send(null),new Uint8Array(U.response)}),m=async G=>{if(E(G))return new Promise((J,ve)=>{var me=new XMLHttpRequest;me.open("GET",G,!0),me.responseType="arraybuffer",me.onload=()=>{me.status==200||me.status==0&&me.response?J(me.response):ve(me.status)},me.onerror=ve,me.send(null)});var U=await fetch(G,{credentials:"same-origin"});if(U.ok)return U.arrayBuffer();throw Error(U.status+" : "+U.url)}}var p=console.log.bind(console),w=console.error.bind(console),b,_=!1,A,E=G=>G.startsWith("file://"),k,S,M,L,q,T=!1;function j(){var G=Le.buffer;M=new Int8Array(G),L=new Uint8Array(G),r.HEAP32=new Int32Array(G),q=new Uint32Array(G),r.HEAPF64=new Float64Array(G),new BigInt64Array(G),new BigUint64Array(G)}function y(G){var U;throw(U=r.onAbort)==null||U.call(r,G),G="Aborted("+G+")",w(G),_=!0,G=new WebAssembly.RuntimeError(G+". Build with -sASSERTIONS for more info."),S==null||S(G),G}var z;async function V(G){if(!b)try{var U=await m(G);return new Uint8Array(U)}catch{}if(G==z&&b)G=new Uint8Array(b);else if(h)G=h(G);else throw"both async and sync fetching of the wasm failed";return G}async function B(G,U){try{var J=await V(G);return await WebAssembly.instantiate(J,U)}catch(ve){w(`failed to asynchronously prepare wasm: ${ve}`),y(ve)}}async function I(G){var U=z;if(!b&&!E(U)&&!a)try{var J=fetch(U,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(J,G)}catch(ve){w(`wasm streaming compile failed: ${ve}`),w("falling back to ArrayBuffer instantiation")}return B(U,G)}class W{constructor(U){Dt(this,"name","ExitStatus");this.message=`Program terminated with exit(${U})`,this.status=U}}var oe=G=>{for(;0<G.length;)G.shift()(r)},te=[],Z=[],ne=()=>{var G=r.preRun.shift();Z.push(G)},se=!0,he=0,fe={},ee=G=>{var U;A=G,se||0<he||((U=r.onExit)==null||U.call(r,G),_=!0),u(G,new W(G))},le=G=>{if(!_)try{if(G(),!(se||0<he))try{A=G=A,ee(G)}catch(U){U instanceof W||U=="unwind"||u(1,U)}}catch(U){U instanceof W||U=="unwind"||u(1,U)}},Ae=globalThis.TextDecoder&&new TextDecoder,De=(G,U=0)=>{for(var J=U,ve=J+void 0;G[J]&&!(J>=ve);)++J;if(16<J-U&&G.buffer&&Ae)return Ae.decode(G.subarray(U,J));for(ve="";U<J;){var me=G[U++];if(me&128){var Se=G[U++]&63;if((me&224)==192)ve+=String.fromCharCode((me&31)<<6|Se);else{var je=G[U++]&63;me=(me&240)==224?(me&15)<<12|Se<<6|je:(me&7)<<18|Se<<12|je<<6|G[U++]&63,65536>me?ve+=String.fromCharCode(me):(me-=65536,ve+=String.fromCharCode(55296|me>>10,56320|me&1023))}}else ve+=String.fromCharCode(me)}return ve},Ie={},Ve=()=>{if(!Fe){var G={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},U;for(U in Ie)Ie[U]===void 0?delete G[U]:G[U]=Ie[U];var J=[];for(U in G)J.push(`${U}=${G[U]}`);Fe=J}return Fe},Fe,Te=(G,U,J)=>{var ve=L;if(!(0<J))return 0;var me=U;J=U+J-1;for(var Se=0;Se<G.length;++Se){var je=G.codePointAt(Se);if(127>=je){if(U>=J)break;ve[U++]=je}else if(2047>=je){if(U+1>=J)break;ve[U++]=192|je>>6,ve[U++]=128|je&63}else if(65535>=je){if(U+2>=J)break;ve[U++]=224|je>>12,ve[U++]=128|je>>6&63,ve[U++]=128|je&63}else{if(U+3>=J)break;ve[U++]=240|je>>18,ve[U++]=128|je>>12&63,ve[U++]=128|je>>6&63,ve[U++]=128|je&63,Se++}}return ve[U]=0,U-me},qe=G=>{for(var U=0,J=0;J<G.length;++J){var ve=G.charCodeAt(J);127>=ve?U++:2047>=ve?U+=2:55296<=ve&&57343>=ve?(U+=4,++J):U+=3}return U},st=[null,[],[]],ie=()=>{if(a){var G=c("crypto");return U=>G.randomFillSync(U)}return U=>crypto.getRandomValues(U)},ae=G=>{(ae=ie())(G)};if(r.noExitRuntime&&(se=r.noExitRuntime),r.print&&(p=r.print),r.printErr&&(w=r.printErr),r.wasmBinary&&(b=r.wasmBinary),r.thisProgram&&(f=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.shift()();r.ccall=(G,U,J,ve)=>{var me={string:wt=>{var Ze=0;if(wt!=null&&wt!==0){Ze=qe(wt)+1;var nt=ke(Ze);Te(wt,nt,Ze),Ze=nt}return Ze},array:wt=>{var Ze=ke(wt.length);return M.set(wt,Ze),Ze}};G=r["_"+G];var Se=[],je=0;if(ve)for(var Pt=0;Pt<ve.length;Pt++){var Pr=me[J[Pt]];Pr?(je===0&&(je=ce()),Se[Pt]=Pr(ve[Pt])):Se[Pt]=ve[Pt]}return J=G(...Se),J=(function(wt){return je!==0&&de(je),U==="string"?wt?De(L,wt):"":U==="boolean"?!!wt:wt})(J)};var $,de,ke,ce,Le,Pe={g:()=>y(""),j:()=>{se=!1,he=0},k:(G,U)=>{if(fe[G]&&(clearTimeout(fe[G].id),delete fe[G]),!U)return 0;var J=setTimeout(()=>{delete fe[G],le(()=>$(G,performance.now()))},U);return fe[G]={id:J,U},0},a:()=>Date.now(),c:G=>w(G?De(L,G):""),b:()=>performance.now(),l:G=>{var U=L.length;if(G>>>=0,2147483648<G)return!1;for(var J=1;4>=J;J*=2){var ve=U*(1+.2/J);ve=Math.min(ve,G+100663296);e:{ve=(Math.min(2147483648,65536*Math.ceil(Math.max(G,ve)/65536))-Le.buffer.byteLength+65535)/65536|0;try{Le.grow(ve),j();var me=1;break e}catch{}me=void 0}if(me)return!0}return!1},e:(G,U)=>{var J=0,ve=0,me;for(me of Ve()){var Se=U+J;q[G+ve>>2]=Se,J+=Te(me,Se,1/0)+1,ve+=4}return 0},f:(G,U)=>{var J=Ve();q[G>>2]=J.length,G=0;for(var ve of J)G+=qe(ve)+1;return q[U>>2]=G,0},h:(G,U,J,ve)=>{for(var me=0,Se=0;Se<J;Se++){var je=q[U>>2],Pt=q[U+4>>2];U+=8;for(var Pr=0;Pr<Pt;Pr++){var wt=G,Ze=L[je+Pr],nt=st[wt];Ze===0||Ze===10?((wt===1?p:w)(De(nt)),nt.length=0):nt.push(Ze)}me+=Pt}return q[ve>>2]=me,0},i:ee,d:(G,U)=>(ae(L.subarray(G,G+U)),0)},Ye;return Ye=await(async function(){function G(J){return J=Ye=J.exports,r._pcafit_wasm=J.o,r._free=J.p,r._malloc=J.q,r._pcapredict_wasm=J.r,r._pcvpca_wasm=J.s,r._prepfit_wasm=J.t,r._prepapply_wasm=J.u,$=J.v,r._strdup=J.w,r._strndup=J.x,r.__ZdaPv=J.y,r.__ZdaPvm=J.z,r.__ZdlPv=J.A,r.__ZdlPvm=J.B,r.__Znaj=J.C,r.__ZnajSt11align_val_t=J.D,r.__Znwj=J.E,r.__ZnwjSt11align_val_t=J.F,r.___libc_calloc=J.G,r.___libc_free=J.H,r.___libc_malloc=J.I,r.___libc_realloc=J.J,r._emscripten_builtin_malloc=J.K,r._emscripten_builtin_calloc=J.L,r._emscripten_builtin_free=J.M,r._emscripten_builtin_realloc=J.N,r._malloc_size=J.O,r._malloc_usable_size=J.P,r._reallocf=J.Q,de=J.R,ke=J.S,ce=J.T,Le=J.m,j(),Ye}var U={a:Pe};return r.instantiateWasm?new Promise(J=>{r.instantiateWasm(U,(ve,me)=>{J(G(ve))})}):(z??(z=r.locateFile?r.locateFile?r.locateFile("pca_wasm.wasm",v):v+"pca_wasm.wasm":new URL("/nimca/nimca.wasm",We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href).href),G((await I(U)).instance))})(),(function(){function G(){var J;if(r.calledRun=!0,!_){if(T=!0,Ye.n(),k==null||k(r),(J=r.onRuntimeInitialized)==null||J.call(r),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var U=r.postRun.shift();te.push(U)}oe(te)}}if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne();oe(Z),r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),G()},1)):G()})(),T?e=r:e=new Promise((G,U)=>{k=G,S=U}),e}var C0=X('<p>Current release: <span>1.2.0</span> &nbsp;Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=NIMCA app">help@mda.tools</a></p>'),N0=X(`<h2>NIMCA</h2> <p>Authors: <em>Oxana Rodionova, Alexey Pomerantsev, Sergey Kucheryavskiy</em></p> <p>Interactive web-application for creating and using Naïve DD-SIMCA (NIMCA) one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check <a href="">paper</a></p> <h3>v. 1.2.0</h3> <p class="release-info">released 24/11/2025</p> <ul><li>Corrected help text in Train tab.</li> <li>Dataset plot now show centered/scaled values.</li></ul>`,1);function M0(t,e){we(e,!1);function r(a){const c=Object.keys(a);if(!["date","tab","train","test","new"].every(v=>c.includes(v)))return!1;const f=Object.keys(a.train);if(!["nimca","calset","calres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(v=>f.includes(v)))return!1;const u=Object.keys(a.test);if(!["nimca","prep","testset","testres","outliers"].every(v=>u.includes(v)))return!1;const d=Object.keys(a.new);return!!["nimca","prep","newset","newres","outliers"].every(v=>d.includes(v))}function s(){return{date:po(new Date),tab:0,train:{nimca:0,calset:0,calseto:0,calsetp:0,calres:0,outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{nimca:0,prep:0,testset:0,testseto:0,testres:0,outliers:[],ind:null},new:{nimca:0,prep:0,newset:0,newres:0,outliers:[]}}}const o=[{name:"Train",label:"train",component:qh},{name:"Test",label:"test",component:l0},{name:"Predict",label:"new",component:b0}];Vu(),E0(t,{appID:"nimca",appTitle:"NIMCA",appShortTitle:"NIMCA",appSlogan:"Naïve DD-SIMCA classifier",get WASM(){return S0},get tabs(){return o},initSession:s,checkSession:r,footer:f=>{var u=C0();N(f,u)},info:f=>{var u=N0();N(f,u)},$$slots:{footer:!0,info:!0}}),_e()}Eu(M0,{target:document.body});const j0=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=nimca.js.map
