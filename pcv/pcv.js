(function(){"use strict";var gt=document.createElement("style");gt.textContent=`input.svelte-7uwoge{display:none}label.svelte-7uwoge{display:inline-block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0}label.svelte-7uwoge:before{display:inline-block;content:"\\21ea";font-size:1.2em;margin:0 .5em 0 0}label.selected.svelte-7uwoge{color:#909090}label.selected.svelte-7uwoge:before{content:"\\28ff\\28ff";letter-spacing:-.25em;color:#6eb8ff;font-weight:700}input.svelte-rv53wk{display:none}.selector.svelte-rv53wk{position:relative;box-sizing:border-box;display:inline-block;flex:0 0 auto;font-size:1em;height:1.5em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;flex-grow:1;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-rv53wk{cursor:default;padding:0 .5em;margin:0 .2em;color:#606060;background:#f0f0f0;border:1px solid transparent;border-radius:.3em}.option.selected.svelte-rv53wk{background-color:#6eb8ff;color:#fefefe}.option.svelte-rv53wk:not(.selected):hover{border:1px solid #6eb8ff;background:#6eb8ff20;color:#5086b9}.control-element.svelte-1wmdjl3{font-size:.9rem;background:#fff;padding:.75em;margin:0 1em 1px;border-radius:0;display:flex;justify-items:center;justify-content:center;align-items:center}.control-element.svelte-1wmdjl3:first-of-type{margin-top:.5em;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1wmdjl3:last-of-type{margin-bottom:.5em;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1wmdjl3{display:none}.control-element.error.svelte-1wmdjl3{background:crimson;color:#fefefe}.label.svelte-1wmdjl3{padding-right:1em;flex-basis:12ch;flex-grow:0;flex-shrink:0}.control-element.svelte-1wmdjl3>.wrapper{flex:1 1}.control-element.svelte-1wmdjl3>p{text-align:left;flex-grow:1;padding:0 .25em;margin:0;font-size:.9em}.control-element.svelte-1wmdjl3>.title{font-size:1.05em;font-weight:700;flex-grow:1;padding:0 .25em 0 0;margin:0}button.svelte-7tjdzh{background:#606060;display:inline-block;color:#fefefe;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin-left:1.5em;text-align:center;padding:0;background-image:url('data:image/svg+xml;utf8,<svg class="svg-icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="-300 -300 1624 1624" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="%23FAFAFA" d="M810.65984 170.65984q18.3296 0 30.49472 12.16512t12.16512 30.49472q0 18.00192-12.32896 30.33088l-268.67712 268.32896 268.67712 268.32896q12.32896 12.32896 12.32896 30.33088 0 18.3296-12.16512 30.49472t-30.49472 12.16512q-18.00192 0-30.33088-12.32896l-268.32896-268.67712-268.32896 268.67712q-12.32896 12.32896-30.33088 12.32896-18.3296 0-30.49472-12.16512t-12.16512-30.49472q0-18.00192 12.32896-30.33088l268.67712-268.32896-268.67712-268.32896q-12.32896-12.32896-12.32896-30.33088 0-18.3296 12.16512-30.49472t30.49472-12.16512q18.00192 0 30.33088 12.32896l268.32896 268.67712 268.32896-268.67712q12.32896-12.32896 30.33088-12.32896z"/></svg>')}button.svelte-7tjdzh:hover{background-color:#dc143c}button.svelte-9hh3gm{background:#606060;display:inline-block;color:#fefefe;font-size:.9em;padding:.2em .5em;line-height:1.5em;border:none;border-radius:.25em;box-shadow:none;text-align:center;border:1px solid transparent}button.svelte-9hh3gm:hover{border-color:#6eb8ff;background:#6eb8ff20;color:#5086b9}.spinner.svelte-iilwii{display:inline-block;width:1em;height:1em;margin-right:1em}.spinner.svelte-iilwii:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid #a0a0a0;border-color:#a0a0a0 transparent #a0a0a0 transparent;animation:svelte-iilwii-spinner 1.2s linear infinite}@keyframes svelte-iilwii-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.plot.svelte-1ukmxl7{font-family:Arial,Helvetica,sans-serif;display:grid;grid-template-columns:min-content auto;grid-template-rows:min-content auto min-content;grid-template-areas:". title" "ylab axes" ". xlab";box-sizing:border-box;background:#fefefe;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0}.plot_small{font-size:11px}.plot_medium{font-size:13px}.plot_large{font-size:16px}.plot_error{display:flex}.plot_error>.axes-wrapper{display:none}.message_error{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.axes-wrapper.svelte-1ukmxl7{grid-area:axes;position:relative;box-sizing:border-box;display:flex;width:100%;height:100%;padding:0;margin:0}.axes{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.axes-content{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.axes__xlabel{grid-area:xlab;font-size:1em;font-weight:600;padding:.25em;text-align:center}.axes__ylabel{grid-area:ylab;font-size:1em;font-weight:600;padding:.25em;text-align:center;vertical-align:middle;display:flex}.axes__ylabel>span{width:1.5em;line-height:1.5em;display:inline-block;writing-mode:vertical-rl;transform:rotate(180deg)}.axes__title{background:transparent;grid-area:title;font-size:1.3em;font-weight:700;line-height:1.2em;padding:.5em 0;text-align:center}.axis-labels{fill:#303030;font-size:.95em}.labels{fill:#606060;font-size:.9em}.labels{visibility:hidden;transition:visibility .25s linear,opacity .25s linear;opacity:0}text.svelte-131ks7u,text.svelte-131ks7u>tspan{cursor:default;user-select:none;dominant-baseline:middle}.range-slider-container.svelte-5tv9oe{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;background:#f0f0f0;height:1.5em;margin:0;padding:1px 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider.svelte-5tv9oe{position:relative;display:inline-block;box-sizing:border-box;background:#6EB8FF;border-radius:2px;text-align:right;color:#fafafa;margin:0;padding:0;height:100%;cursor:default;border-right:5px solid #528abe;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value.svelte-5tv9oe{display:inline-block;right:0;top:0;font-size:.85em;padding:1px 0 1px .5em;color:#606060;line-height:1.6em;user-select:none;-webkit-user-select:none;-moz-user-select:none}input.svelte-5tv9oe{display:none;width:100%}.control-block.svelte-1o48kay{margin-top:1em}.control-block.svelte-1o48kay .control-element{background:#fffef4;color:#807060}.control-block.svelte-1o48kay .control-element .range-slider-container{background:#fff8e0}.control-block.svelte-1o48kay .control-element .range-slider{background:#efd0a0;border-color:#e0c090}.app-container.svelte-1yi92du.svelte-1yi92du{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;height:100%;max-height:670px;min-height:400px;width:auto;display:flex;aspect-ratio:16/10}.app-controls.svelte-1yi92du.svelte-1yi92du{box-sizing:border-box;flex-basis:35%;flex-grow:0;flex-shrink:1;max-width:35%;background:#e8e8e8}.app-content.svelte-1yi92du.svelte-1yi92du{box-sizing:border-box;flex-basis:65%;flex:1 1;background:#f0f0f0;border-radius:.25rem;margin-top:.5rem;padding:2em}.app-content.svelte-1yi92du>p.svelte-1yi92du{background:#fafafa;padding:1em;border:solid 1px #e0e0e0;color:#606060;line-height:1.5em;border-radius:.5em}.app-content.svelte-1yi92du hgroup.svelte-1yi92du{margin-bottom:1em;padding-left:1em}.app-content.svelte-1yi92du hgroup h1.svelte-1yi92du{margin:0;padding:0 0 .25em;font-size:1.6em;color:#404040}.app-content.svelte-1yi92du hgroup p.svelte-1yi92du{margin:0;padding:0;font-size:.9em;color:#606060}
`,document.head.appendChild(gt);function X(){}function In(t,e){for(const n in e)t[n]=e[n];return t}function Hn(t){return t&&typeof t=="object"&&typeof t.then=="function"}function pt(t){return t()}function bt(){return Object.create(null)}function we(t){t.forEach(pt)}function yt(t){return typeof t=="function"}function ee(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Yn(t){return Object.keys(t).length===0}function qn(t,...e){if(t==null)return X;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function J(t,e,n){t.$$.on_destroy.push(qn(e,n))}function Le(t,e,n,l){if(t){const r=wt(t,e,n,l);return t[0](r)}}function wt(t,e,n,l){return t[1]&&l?In(n.ctx.slice(),t[1](l(e))):n.ctx}function Se(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],i=Math.max(e.dirty.length,r.length);for(let s=0;s<i;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function Ee(t,e,n,l,r,o){if(r){const i=wt(e,n,l,o);t.p(i,r)}}function Ne(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function F(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function Ve(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function B(t){return document.createElement(t)}function te(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function Q(){return x(" ")}function oe(){return x("")}function ce(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Bn(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Gn(t){return t===""?null:+t}function Dn(t){return Array.from(t.childNodes)}function ae(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function We(t,e){t.value=e==null?"":e}function He(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function ze(t,e,n){t.classList[n?"add":"remove"](e)}function Wn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,l,e),r}let Ye;function ge(t){Ye=t}function Re(){if(!Ye)throw new Error("Function called outside component initialization");return Ye}function On(t){Re().$$.on_mount.push(t)}function Un(t){Re().$$.on_destroy.push(t)}function kt(){const t=Re();return(e,n,{cancelable:l=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Wn(e,n,{cancelable:l});return r.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}function Xn(t,e){return Re().$$.context.set(t,e),e}function Te(t){return Re().$$.context.get(t)}function vt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const qe=[],ie=[],Oe=[],tt=[],Qn=Promise.resolve();let nt=!1;function Kn(){nt||(nt=!0,Qn.then(ot))}function lt(t){Oe.push(t)}function de(t){tt.push(t)}const rt=new Set;let Ue=0;function ot(){const t=Ye;do{for(;Ue<qe.length;){const e=qe[Ue];Ue++,ge(e),Zn(e.$$)}for(ge(null),qe.length=0,Ue=0;ie.length;)ie.pop()();for(let e=0;e<Oe.length;e+=1){const n=Oe[e];rt.has(n)||(rt.add(n),n())}Oe.length=0}while(qe.length);for(;tt.length;)tt.pop()();nt=!1,rt.clear(),ge(t)}function Zn(t){if(t.fragment!==null){t.update(),we(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(lt)}}const Xe=new Set;let Me;function ue(){Me={r:0,c:[],p:Me}}function fe(){Me.r||we(Me.c),Me=Me.p}function w(t,e){t&&t.i&&(Xe.delete(t),t.i(e))}function M(t,e,n,l){if(t&&t.o){if(Xe.has(t))return;Xe.add(t),Me.c.push(()=>{Xe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Qe(t,e){const n=e.token={};function l(r,o,i,s){if(e.token!==n)return;e.resolved=s;let u=e.ctx;i!==void 0&&(u=u.slice(),u[i]=s);const f=r&&(e.current=r)(u);let a=!1;e.block&&(e.blocks?e.blocks.forEach((c,m)=>{m!==o&&c&&(ue(),M(c,1,1,()=>{e.blocks[m]===c&&(e.blocks[m]=null)}),fe())}):e.block.d(1),f.c(),w(f,1),f.m(e.mount(),e.anchor),a=!0),e.block=f,e.blocks&&(e.blocks[o]=f),a&&ot()}if(Hn(t)){const r=Re();if(t.then(o=>{ge(r),l(e.then,1,e.value,o),ge(null)},o=>{if(ge(r),l(e.catch,2,e.error,o),ge(null),!e.hasCatch)throw o}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function At(t,e,n){const l=e.slice(),{resolved:r}=t;t.current===t.then&&(l[t.value]=r),t.current===t.catch&&(l[t.error]=r),t.block.p(l,n)}function Jn(t,e){t.d(1),e.delete(t.key)}function xn(t,e,n,l,r,o,i,s,u,f,a,c){let m=t.length,g=o.length,_=m;const h={};for(;_--;)h[t[_].key]=_;const p=[],y=new Map,k=new Map;for(_=g;_--;){const N=c(r,o,_),S=n(N);let E=i.get(S);E?l&&E.p(N,e):(E=f(S,N),E.c()),y.set(S,p[_]=E),S in h&&k.set(S,Math.abs(_-h[S]))}const P=new Set,V=new Set;function H(N){w(N,1),N.m(s,a),i.set(N.key,N),a=N.first,g--}for(;m&&g;){const N=p[g-1],S=t[m-1],E=N.key,T=S.key;N===S?(a=N.first,m--,g--):y.has(T)?!i.has(E)||P.has(E)?H(N):V.has(T)?m--:k.get(E)>k.get(T)?(V.add(E),H(N)):(P.add(T),m--):(u(S,i),m--)}for(;m--;){const N=t[m];y.has(N.key)||u(N,i)}for(;g;)H(p[g-1]);return p}function _e(t,e,n,l){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,l===void 0&&n(t.$$.ctx[r]))}function Y(t){t&&t.c()}function j(t,e,n,l){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),l||lt(()=>{const i=t.$$.on_mount.map(pt).filter(yt);t.$$.on_destroy?t.$$.on_destroy.push(...i):we(i),t.$$.on_mount=[]}),o.forEach(lt)}function I(t,e){const n=t.$$;n.fragment!==null&&(we(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $n(t,e){t.$$.dirty[0]===-1&&(qe.push(t),Kn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function le(t,e,n,l,r,o,i,s=[-1]){const u=Ye;ge(t);const f=t.$$={fragment:null,ctx:[],props:o,update:X,not_equal:r,bound:bt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:bt(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};i&&i(f.root);let a=!1;if(f.ctx=n?n(t,e.props||{},(c,m,...g)=>{const _=g.length?g[0]:m;return f.ctx&&r(f.ctx[c],f.ctx[c]=_)&&(!f.skip_bound&&f.bound[c]&&f.bound[c](_),a&&$n(t,c)),m}):[],f.update(),a=!0,we(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const c=Dn(e.target);f.fragment&&f.fragment.l(c),c.forEach(v)}else f.fragment&&f.fragment.c();e.intro&&w(t.$$.fragment),j(t,e.target,e.anchor,e.customElement),ot()}ge(u)}class re{$destroy(){I(this,1),this.$destroy=X}$on(e,n){if(!yt(n))return X;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!Yn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function el(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n]*t[n];return e}function Be(t){return Math.sqrt(el(t))}function se(t,e,n){n===void 0&&(n=t<=e?1:-1);const l=Math.floor((e-t)/n)+1;if(l<1)throw Error("seqind: wrong combination of parameters.");const r=new Int32Array(l);for(let o=0;o<l;o++)r[o]=t+o*n;return r}function it(t,e){if(e<1)throw Error('rep: parameter "n" must be an integer number > 1.');if(typeof t=="number"){const r=new Float64Array(e);for(let o=1;o<=e;o++)r[o-1]=t;return r}if(t.length===void 0||t.length<1)throw Error('rep: parameter "x" must be a number or a vector with numbers.');const n=t.length*e,l=new t.constructor(n);for(let r=1;r<=e;r++)for(let o=0;o<t.length;o++)l[(r-1)*t.length+o]=t[o];return l}function he(t,e,n){return e===void 0&&(e=1),n===void 0&&(n=t.length-(e-1)),t.slice(e-1,e+n-1)}function tl(t){return Math.sqrt(nl(t))}function nl(t){const e=Ke(t);let n=0;for(let l=0;l<t.length;l++){const r=t[l]-e;n=n+r*r}return n/(t.length-1)}function Ke(t){return st(t)/t.length}function st(t){let e=0;for(let n=0;n<t.length;n++)e=e+t[n];return e}function Mt(t){return t[ll(t)-1]}function ll(t){let e=1,n=t[0];for(let l=2;l<=t.length;l++)t[l-1]<n&&(e=l,n=t[l-1]);return e}function Ze(t){return t[rl(t)-1]}function rl(t){let e=1,n=t[0];for(let l=2;l<=t.length;l++)t[l-1]>n&&(e=l,n=t[l-1]);return e}function Je(t,e){return e===void 0&&(e=t),me(t,e.t())}function ut(t,e){return e===void 0&&(e=t),me(t.t(),e)}function Ct(t,e,n,l,r,o){if(l!==r)throw Error("Matrix dimensions do not much.");t.buffer,e.buffer;const i=n*t.BYTES_PER_ELEMENT;r*e.BYTES_PER_ELEMENT;const s=n,u=o,f=l,a=new Float64Array(s*u),c=a.buffer;for(let m=0;m<u;m++){const g=e.subarray(m*r,(m+1)*r),_=new Float64Array(c,m*i,s);for(let h=0;h<f;h++){const p=g[h],y=t.subarray(h*n,(h+1)*n);for(let k=0;k<s;k++)_[k]+=y[k]*p}}return a}function Lt(t,e){return new K(Ct(t.v,e,D(t),U(t),e.length,1),D(t),1)}function me(t,e){return new K(Ct(t.v,e.v,D(t),U(t),D(e),U(e)),D(t),U(e))}function ol(t){return t.apply(st,2)}function St(t){return t.apply(st,1)}function D(t){return t.dim[0]}function U(t){return t.dim[1]}function Et(t){const e=t.length,n=new Float64Array(e*e);for(let l=1;l<=e;l++)n[(l-1)*e+l-1]=t[l-1];return new K(n,e,e)}function Nt(t,e,n){n===void 0&&(n=[0,1]);const l=n[1]-n[0],r=n[0];let o=new Float64Array(t*e);for(let i=1;i<=t*e;i++)o[i-1]=Math.random()*l+r;return new K(o,t,e)}function ke(t,e){e===void 0&&(e=t);const n=new Float64Array(t*e);for(let l=1;l<=Math.min(t,e);l++)n[(l-1)*t+l-1]=1;return new K(n,t,e)}function pe(t,e){return e===void 0&&(e=t),new K(new Float64Array(t*e),t,e)}function K(t,e,n){if(!ArrayBuffer.isView(t)||t.constructor!==Float64Array)throw Error('Matrix: parameter "values" must be Float64Array.');if(t.length!=e*n)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=t,this.dim=[e,n]}K.prototype.apply=function(t,e){if(e===void 0&&(e=2),e==2){const n=U(this),l=new Float64Array(n);for(let r=1;r<=n;r++)l[r-1]=t(this.getcolumn(r));return l}if(e==1)return this.t().apply(t,2);if(e==0){const n=this.v.length,l=new Float64Array(n);for(let r=0;r<n;r++)l[r]=t(this.v[r]);return new K(l,D(this),U(this))}},K.prototype.opv=function(t,e,n){const l=D(this),r=U(this),o=l*r;if(n===1||n===void 0&&t.length===l){if(t.length!==l)throw Error("Matrix.opv: length of vector does not equal to number of rows in the matrix.");const s=pe(l,r);for(let u=1;u<=r;u++){const f=this.getcolumn(u),a=s.getcolumn(u);for(let c=1;c<=l;c++)a[c-1]=e(f[c-1],t[c-1])}return s}if(n===2||n===void 0&&t.length===r){if(t.length!==r)throw Error("Matrix.opv: length of vector does not equal to number of columns in the matrix.");const s=pe(l,r);for(let u=1;u<=r;u++){const f=this.getcolumn(u),a=s.getcolumn(u);for(let c=1;c<=l;c++)a[c-1]=e(f[c-1],t[u-1])}return s}if(t.length!==o)throw Error("Matrix.opv: vector length should match number of rows, number of columns or number of elements in matrix.");const i=new Float64Array(o);for(let s=0;s<o;s++)i[s]=e(this.v[s],t[s]);return new K(i,l,r)},K.prototype.opn=function(t,e){const n=D(this)*U(this),l=new Float64Array(n);for(let r=0;r<n;r++)l[r]=e(this.v[r],t);return new K(l,D(this),U(this))},K.prototype.op=function(t,e,n){if(typeof t=="number")return this.opn(t,e);if(t.constructor===K)return this.opv(t.v,e);if(ArrayBuffer.isView(t)&&t.constructor===Float64Array)return this.opv(t,e,n);throw Error('Matrix: parameter "values" must be Float64Array.')},K.prototype.add=function(t,e){return this.op(t,(n,l)=>n+l,e)},K.prototype.subtract=function(t,e){return this.op(t,(n,l)=>n-l,e)},K.prototype.mult=function(t,e){return this.op(t,(n,l)=>n*l,e)},K.prototype.divide=function(t,e){return this.op(t,(n,l)=>n/l,e)},K.prototype.replace=function(t,e,n){typeof e=="number"&&(e=[e]),e.length===0&&(e=se(1,D(this))),typeof n=="number"&&(n=[n]),n.length===0&&(n=se(1,U(this)));const l=e.length,r=n.length,o=D(this),i=U(this);if(Mt(e)<1||Ze(e)>o)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Mt(n)<1||Ze(n)>i)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(D(t)!==l||U(t)!==r)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let s=0;s<n.length;s++){const u=t.getcolumn(s+1),f=(n[s]-1)*o;for(let a=0;a<e.length;a++){const c=e[a];this.v[f+c-1]=u[a]}}return this},K.prototype.t=function(){const t=D(this),n=U(this),l=t,r=this.v,o=new Float64Array(r.length),i=Math.min(l,n);for(let s=0;s<i;s++){o[s*n+s]=r[s*t+s];for(let u=s+1;u<n;u++)o[s*n+u]=r[u*t+s];for(let u=s+1;u<l;u++)o[u*n+s]=r[s*t+u]}return new K(o,n,l)},K.prototype.copy=function(){return new K(this.v.slice(),this.dim[0],this.dim[1])},K.prototype.subset=function(t,e){typeof t=="number"&&(t=[t]),t.length===0&&(t=se(1,D(this))),typeof e=="number"&&(e=[e]),e.length===0&&(e=se(1,U(this)));const n=t.length,l=e.length,r=new Float64Array(n*l);for(let o=0;o<e.length;o++){const i=this.getcolumn(e[o]);for(let s=0;s<t.length;s++)r[o*n+s]=i[t[s]-1]}return new K(r,n,l)},K.prototype.getcolumn=function(t){return this.v.subarray((t-1)*D(this),t*D(this))},K.prototype.getrow=function(t){const e=U(this),n=D(this),l=new Float64Array(e);for(let r=0;r<e;r++)l[r]=this.v[r*n+(t-1)];return l},K.prototype.toString=function(t){t===void 0&&(t=2),U(this),Math.round(Math.log10(Ze(this.v)))+t+3;let e="";const n=this.t();for(let l=1;l<=U(n);l++)e+=n.getcolumn(l).map(r=>r.toFixed(t)).join("	")+`
`;return e},K.prototype.toCSV=function(t,e,n){n===void 0&&(n=[]),t===void 0&&(t=","),e===void 0&&(e=t===";"?",":".");const l=this.t();if(n.length>0&&n.length!==U(this))throw Error("Number of elements in header must match number of columns in matrix.");let r=n.length>0?n.join(t)+`
`:"";for(let o=1;o<=U(l);o++)r=r+l.getcolumn(o).join(t)+`
`;return e!=="."&&e!==t&&(r=r.replace(/\./g,e)),r},K.parseCSV=function(t,e,n){function l(m){return m.some(g=>Number.isNaN(Number.parseFloat(g.trim())))}e===void 0&&(e=",");const r=e===";"?",":".";t=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),t=t.replace(/\r/gm,"");let o=t.split(/\n/),i=[],s=0;const u=o[0].split(e);(n||n===void 0&&l(u))&&(i=u,s=1),o=o.filter(m=>m.trim().length>1);const f=o.length-s,a=u.length;if(f<2)throw Error("Data file should contain at least 2 rows with values.");const c=pe(a,f);for(let m=s;m<f+s;m++){const g=o[m].split(e).map(_=>Number.parseFloat(_.trim().replace(r,".")));if(g.some(_=>Number.isNaN(_)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(g.length!=a)throw Error("Wrong number of values in row #"+m);c.v.set(new Float64Array(g),(m-s)*a)}return{values:c.t(),header:i,sep:e,dec:r}};function ft(t,e){const n=D(t),l=U(t);if(e===void 0&&(e=Math.min(n,l)),n<l){const f=ft(t.t(),e);return{s:f.s,V:f.U,U:f.V}}const r=3,o=2*e+2;let i=me(t,Nt(l,o,[-1,1])),s=xe(i).Q;for(let f=1;f<=r;f++)i=ut(t,s),s=xe(i).Q,i=me(t,s),s=xe(i).Q;const u=Vt(ut(s,t),e);return{s:u.s,V:u.V,U:me(s,u.U)}}function xe(t){const e=D(t),n=U(t);if(e<n){const o=xe(t.subset([],se(1,e)));return{Q:o.Q,R:ut(o.Q,t)}}let l=ke(e),r=t.t();for(let o=1;o<=n;o++)for(let i=e;i>=o+1;i--){const s=r.getcolumn(i-1),u=r.getcolumn(i),f=l.getcolumn(i-1),a=l.getcolumn(i),c=he(s),m=he(u),g=he(f),_=he(a),[h,p,y]=ct(c[o-1],m[o-1]);for(let k=0;k<n;k++)s[k]=c[k]*h+m[k]*p,u[k]=c[k]*-p+m[k]*h,f[k]=g[k]*h+_[k]*p,a[k]=g[k]*-p+_[k]*h;for(let k=n;k<e;k++)f[k]=g[k]*h+_[k]*p,a[k]=g[k]*-p+_[k]*h}return{Q:e===n?l:l.subset([],se(1,n)),R:e===n?r.t():r.t().subset(se(1,n),[])}}function Vt(t,e){if(D(t)<U(t)){const g=Vt(t.t(),e);return{s:g.s,V:g.U,U:g.V}}const n=D(t),l=U(t);e||(e=Math.min(n,l));let[r,o,i]=sl(t),s=new Float64Array(l),u=new Float64Array(l-1);for(let g=0;g<l-1;g++)s[g]=r.v[g*l+g],u[g]=r.v[(g+1)*l+g];s[l-1]=r.v[(l-1)*l+l-1];const f=500*l**2,a=Math.pow(10,-16);let c=ke(l),m=ke(l);for(let g=0;g<f;g++){let _=0;for(let S=l-1;S>=1;S--)if(Math.abs(u[S-1])>a){_=S;break}let h=_+1;for(let S=1;S<=l-1;S++)if(Math.abs(u[S-1])>a){h=S;break}if(_==h&&Math.abs(u[_-1])<=a||_<h){const S=s.subarray(0,e),E=Et(S.map(T=>Math.sign(T)));return{s:S.map(T=>Math.abs(T)),U:me(me(i,m).subset([],se(1,e)),E),V:me(o,c).subset([],se(1,e))}}const[p,y,k,P]=il(s.subarray(h-1,_+1),u.subarray(h-1,_));s.set(p,h-1),u.set(y,h-1);const V=_-h+2,H=pe(l,V),N=pe(l,V);for(let S=h;S<=_+1;S++)H.v.set(c.v.subarray((S-1)*l,S*l),(S-h)*l),N.v.set(m.v.subarray((S-1)*l,S*l),(S-h)*l);for(let S=1;S<=V;S++){const E=Lt(H,k.getcolumn(S)),T=Lt(N,P.getcolumn(S));c.v.set(E.v,(S-1+h-1)*l),m.v.set(T.v,(S-1+h-1)*l)}}throw Error("svd: can not converge.")}function il(t,e){const n=t.length;let l=1,r=1,o=1,i=0,s=0,u=ke(n),f=ke(n);for(let c=1;c<=n-1;c++){[o,i,s]=ct(o*t[c-1],e[c-1]);const m=u.getcolumn(c),g=m.slice(),_=u.getcolumn(c+1),h=_.slice();for(let V=0;V<n;V++)m[V]=g[V]*o+h[V]*i,_[V]=-g[V]*i+h[V]*o;c!=1&&(e[c-2]=s*r),[l,r,s]=ct(l*s,t[c]*i),t[c-1]=s;const p=f.getcolumn(c),y=he(p),k=f.getcolumn(c+1),P=he(k);for(let V=0;V<n;V++)p[V]=y[V]*l+P[V]*r,k[V]=-y[V]*r+P[V]*l}const a=o*t[n-1];return e[n-2]=a*r,t[n-1]=a*l,[t,e,u,f]}function ct(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const o=e/t,i=Math.sqrt(1+o*o),s=1/i;return[s,o*s,t*i]}const n=t/e,l=Math.sqrt(1+n*n),r=1/l;return[n*r,1/l,e*l]}function sl(t){const e=D(t),n=U(t);if(e<n)throw Error("bidiag: number of rows in A must not be smaller number of columns.");let l=ke(e),r=ke(n),o=t.copy();for(let i=1;i<=(e>n?n:n-1);i++){const s=e-i+1,u=zt(o.getcolumn(i),i);for(let f=1;f<=n;f++){const a=o.getcolumn(f),c=he(a),m=l.getcolumn(f),g=he(m);for(let _=i;_<=e;_++){const h=u.getcolumn(_-i+1);let p=0,y=0;for(let k=0;k<s;k++)p+=h[k]*c[i+k-1],y+=h[k]*g[i+k-1];a[_-1]=p,m[_-1]=y}}for(let f=n+1;f<=e;f++){const a=l.getcolumn(f),c=he(a);for(let m=i;m<=e;m++){const g=u.getcolumn(m-i+1);let _=0;for(let h=0;h<s;h++)_+=g[h]*c[i+h-1];a[m-1]=_}}if(i<n-1){const f=zt(o.getrow(i),i+1);for(let a=1;a<=n;a++){const c=o.getrow(a),m=r.getrow(a);for(let g=i+1;g<=n;g++){const _=f.getcolumn(g-i);let h=0,p=0;for(let y=0;y<D(f);y++)h+=c[i+y]*_[y],p+=m[i+y]*_[y];o.v[(g-1)*e+(a-1)]=h,r.v[(g-1)*n+(a-1)]=p}}for(let a=n+1;a<=e;a++){const c=o.getrow(a);for(let m=i+1;m<=n;m++){const g=f.getcolumn(m-i);let _=0;for(let h=0;h<D(f);h++)_+=c[h+i]*g[h];o.v[(m-1)*e+(a-1)]=_}}}}return[o.subset(se(1,n),[]),r,new K(l.t().v.subarray(0,n*e),e,n)]}function zt(t,e){const n=ul(t,e),l=n.length,r=pe(l);for(let o=0;o<l;o++)for(let i=0;i<l;i++)r.v[o*l+i]=1*(i==o)-2*n[i]*n[o];return r}function ul(t,e){t.constructor!==Float64Array&&(t=new Float64Array(t));const n=t.length;if(e>=n)throw Error("householder: parameter 'k' must be smaller than length of vector 'b'.");const l=n-e+1,r=he(t,e,l);r[0]=r[0]-Math.sign(r[0])*Be(r);const o=Be(r);for(let i=0;i<l;i++)r[i]=r[i]/o;return r}function fl(t,e,n,l){n===void 0&&(n=!0),l===void 0&&(l=!1),e||(e=Math.min(U(t),D(t)-1));const r=n?t.apply(Ke,2):it(0,U(t)),o=l?t.apply(tl,2):it(1,U(t)),i=t.subtract(r,2).divide(o,2),s=ft(i,e),u=s.s.map(m=>m*m/(D(t)-1)),f=Rt(i,s.V,u),a=f.H.apply(Ke,2),c=f.Q.apply(Ke,2);return{P:s.V,eigenvals:u,center:n,scale:l,mX:r,sX:o,q0:c,h0:a,ncomp:e}}function Rt(t,e,n){const l=U(e),r=me(t,e),o=r.apply(a=>a*a,0).divide(n,2);let i=pe(D(t),l),s=pe(D(t),l),u=new Float64Array(l),f=0;for(let a=0;a<t.length;a++)f+=t.v[a]*t.v[a];for(let a=1;a<=l;a++){const c=Je(r.subset([],se(1,a)),e.subset([],se(1,a))),m=t.subtract(c).apply(_=>_*_,0);i.v.set(St(o.subset([],se(1,a))),(a-1)*D(t)),s.v.set(St(m),(a-1)*D(t));let g=0;for(let _=0;_<t.length;_++)g+=m.v[_]*m.v[_];u[a-1]=1-g/f}return{T:r,H:i,Q:s,expvar:u}}function Tt(t,e,n){const l=e.subtract(t.mX).divide(t.sX);let r=Rt(l,t.P,t.eigenvals);return r.name=n,r}const yo="";function cl(t){let e,n=(t[0]?t[0].name:"Select CSV file with dataset")+"",l,r,o,i,s;return{c(){e=B("label"),l=x(n),r=Q(),o=B("input"),d(o,"name",t[1]),d(o,"type","file"),d(o,"accept",".csv"),d(o,"class","svelte-7uwoge"),d(e,"class","svelte-7uwoge"),ze(e,"selected",t[0]!==null)},m(u,f){A(u,e,f),F(e,l),F(e,r),F(e,o),t[4](o),i||(s=ce(o,"change",t[3]),i=!0)},p(u,[f]){f&1&&n!==(n=(u[0]?u[0].name:"Select CSV file with dataset")+"")&&ae(l,n),f&2&&d(o,"name",u[1]),f&1&&ze(e,"selected",u[0]!==null)},i:X,o:X,d(u){u&&v(e),t[4](null),i=!1,s()}}}function al(t,e,n){let{id:l}=e,{file:r=null}=e,o;function i(u){o.files.length>0&&n(0,r=o.files[0])}function s(u){ie[u?"unshift":"push"](()=>{o=u,n(2,o)})}return t.$$set=u=>{"id"in u&&n(1,l=u.id),"file"in u&&n(0,r=u.file)},[r,l,o,i,s]}class ml extends re{constructor(e){super(),le(this,e,al,cl,ee,{id:1,file:0})}}const wo="";function Ft(t,e,n){const l=t.slice();return l[6]=e[n],l}function Pt(t,e){let n,l=e[6]+"",r,o;function i(){return e[3](e[6])}function s(){return e[4](e[6])}return{key:t,first:null,c(){n=B("div"),d(n,"class","option svelte-rv53wk"),ze(n,"selected",e[6]==e[0]),this.first=n},m(u,f){A(u,n,f),n.innerHTML=l,r||(o=[ce(n,"click",i),ce(n,"keydown",s)],r=!0)},p(u,f){e=u,f&4&&l!==(l=e[6]+"")&&(n.innerHTML=l),f&5&&ze(n,"selected",e[6]==e[0])},d(u){u&&v(n),r=!1,we(o)}}}function dl(t){let e,n=[],l=new Map,r,o,i,s,u=t[2];const f=a=>a[6];for(let a=0;a<u.length;a+=1){let c=Ft(t,u,a),m=f(c);l.set(m,n[a]=Pt(m,c))}return{c(){e=B("div");for(let a=0;a<n.length;a+=1)n[a].c();r=Q(),o=B("input"),d(e,"class","selector svelte-rv53wk"),d(o,"name",t[1]),d(o,"class","svelte-rv53wk")},m(a,c){A(a,e,c);for(let m=0;m<n.length;m+=1)n[m].m(e,null);A(a,r,c),A(a,o,c),We(o,t[0]),i||(s=ce(o,"input",t[5]),i=!0)},p(a,[c]){c&5&&(u=a[2],n=xn(n,c,f,1,a,u,l,e,Jn,Pt,null,Ft)),c&2&&d(o,"name",a[1]),c&1&&o.value!==a[0]&&We(o,a[0])},i:X,o:X,d(a){a&&v(e);for(let c=0;c<n.length;c+=1)n[c].d();a&&v(r),a&&v(o),i=!1,s()}}}function _l(t,e,n){let{id:l}=e,{options:r}=e,{value:o=r[0]}=e;const i=f=>n(0,o=f),s=f=>n(0,o=f);function u(){o=this.value,n(0,o)}return t.$$set=f=>{"id"in f&&n(1,l=f.id),"options"in f&&n(2,r=f.options),"value"in f&&n(0,o=f.value)},[o,l,r,i,s,u]}class Ge extends re{constructor(e){super(),le(this,e,_l,dl,ee,{id:1,options:2,value:0})}}const ko="";function jt(t){let e,n;return{c(){e=B("span"),n=x(t[0]),d(e,"class","label svelte-1wmdjl3")},m(l,r){A(l,e,r),F(e,n)},p(l,r){r&1&&ae(n,l[0])},d(l){l&&v(e)}}}function hl(t){let e,n,l,r,o=t[0]&&jt(t);const i=t[3].default,s=Le(i,t,t[2],null);return{c(){e=B("div"),o&&o.c(),n=Q(),s&&s.c(),d(e,"class",l="control-element "+t[1]+" svelte-1wmdjl3")},m(u,f){A(u,e,f),o&&o.m(e,null),F(e,n),s&&s.m(e,null),r=!0},p(u,[f]){u[0]?o?o.p(u,f):(o=jt(u),o.c(),o.m(e,n)):o&&(o.d(1),o=null),s&&s.p&&(!r||f&4)&&Ee(s,i,u,u[2],r?Se(i,u[2],f,null):Ne(u[2]),null),(!r||f&2&&l!==(l="control-element "+u[1]+" svelte-1wmdjl3"))&&d(e,"class",l)},i(u){r||(w(s,u),r=!0)},o(u){M(s,u),r=!1},d(u){u&&v(e),o&&o.d(),s&&s.d(u)}}}function gl(t,e,n){let{$$slots:l={},$$scope:r}=e,{label:o=null}=e,{status:i=""}=e;return t.$$set=s=>{"label"in s&&n(0,o=s.label),"status"in s&&n(1,i=s.status),"$$scope"in s&&n(2,r=s.$$scope)},[o,i,r,l]}class ne extends re{constructor(e){super(),le(this,e,gl,hl,ee,{label:0,status:1})}}const vo="";function pl(t){let e,n,l;return{c(){e=B("button"),d(e,"alt",t[0]),d(e,"title",t[0]),d(e,"class","svelte-7tjdzh")},m(r,o){A(r,e,o),n||(l=ce(e,"click",t[1]),n=!0)},p(r,[o]){o&1&&d(e,"alt",r[0]),o&1&&d(e,"title",r[0])},i:X,o:X,d(r){r&&v(e),n=!1,l()}}}function bl(t,e,n){let{title:l="Reset"}=e;function r(o){vt.call(this,t,o)}return t.$$set=o=>{"title"in o&&n(0,l=o.title)},[l,r]}class at extends re{constructor(e){super(),le(this,e,bl,pl,ee,{title:0})}}const Ao="";function yl(t){let e,n,l,r,o;const i=t[1].default,s=Le(i,t,t[0],null);return{c(){e=B("span"),n=B("button"),s&&s.c(),d(n,"class","button-rect svelte-9hh3gm"),d(e,"class","wrapper")},m(u,f){A(u,e,f),F(e,n),s&&s.m(n,null),l=!0,r||(o=ce(n,"click",t[2]),r=!0)},p(u,[f]){s&&s.p&&(!l||f&1)&&Ee(s,i,u,u[0],l?Se(i,u[0],f,null):Ne(u[0]),null)},i(u){l||(w(s,u),l=!0)},o(u){M(s,u),l=!1},d(u){u&&v(e),s&&s.d(u),r=!1,o()}}}function wl(t,e,n){let{$$slots:l={},$$scope:r}=e;function o(i){vt.call(this,t,i)}return t.$$set=i=>{"$$scope"in i&&n(0,r=i.$$scope)},[r,l,o]}class $e extends re{constructor(e){super(),le(this,e,wl,yl,ee,{})}}function kl(t){let e,n;return e=new ne({props:{$$slots:{default:[Al]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&2049&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function vl(t){let e=t[1],n,l,r,o=It(t),i=t[1]&&Ht(t);return{c(){o.c(),n=Q(),i&&i.c(),l=oe()},m(s,u){o.m(s,u),A(s,n,u),i&&i.m(s,u),A(s,l,u),r=!0},p(s,u){u&2&&ee(e,e=s[1])?(ue(),M(o,1,1,X),fe(),o=It(s),o.c(),w(o,1),o.m(n.parentNode,n)):o.p(s,u),s[1]?i?(i.p(s,u),u&2&&w(i,1)):(i=Ht(s),i.c(),w(i,1),i.m(l.parentNode,l)):i&&(ue(),M(i,1,1,()=>{i=null}),fe())},i(s){r||(w(o),w(i),r=!0)},o(s){M(o),M(i),r=!1},d(s){o.d(s),s&&v(n),i&&i.d(s),s&&v(l)}}}function Al(t){let e,n,l=D(t[0].values)+"",r,o,i=U(t[0].values)+"",s,u,f=t[0].header.length===0?"no header":"with header",a,c,m,g;return m=new at({}),m.$on("click",t[7]),{c(){e=B("p"),n=x("Dataset is loaded: "),r=x(l),o=x(" \xD7 "),s=x(i),u=x(`,
   `),a=x(f),c=Q(),Y(m.$$.fragment)},m(_,h){A(_,e,h),F(e,n),F(e,r),F(e,o),F(e,s),F(e,u),F(e,a),A(_,c,h),j(m,_,h),g=!0},p(_,h){(!g||h&1)&&l!==(l=D(_[0].values)+"")&&ae(r,l),(!g||h&1)&&i!==(i=U(_[0].values)+"")&&ae(s,i),(!g||h&1)&&f!==(f=_[0].header.length===0?"no header":"with header")&&ae(a,f)},i(_){g||(w(m.$$.fragment,_),g=!0)},o(_){M(m.$$.fragment,_),g=!1},d(_){_&&v(e),_&&v(c),I(m,_)}}}function Ml(t){let e,n,l;function r(i){t[8](i)}let o={id:"dataFile"};return t[1]!==void 0&&(o.file=t[1]),e=new ml({props:o}),ie.push(()=>_e(e,"file",r,t[1])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};!n&&s&2&&(n=!0,u.file=i[1],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function It(t){let e,n;return e=new ne({props:{$$slots:{default:[Ml]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&2050&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Ht(t){let e,n,l,r;return e=new ne({props:{label:"Delimiter:",$$slots:{default:[Cl]},$$scope:{ctx:t}}}),l=new ne({props:{label:"\xA0",$$slots:{default:[Sl]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=Q(),Y(l.$$.fragment)},m(o,i){j(e,o,i),A(o,n,i),j(l,o,i),r=!0},p(o,i){const s={};i&2052&&(s.$$scope={dirty:i,ctx:o}),e.$set(s);const u={};i&2048&&(u.$$scope={dirty:i,ctx:o}),l.$set(u)},i(o){r||(w(e.$$.fragment,o),w(l.$$.fragment,o),r=!0)},o(o){M(e.$$.fragment,o),M(l.$$.fragment,o),r=!1},d(o){I(e,o),o&&v(n),I(l,o)}}}function Cl(t){let e,n,l;function r(i){t[9](i)}let o={id:"sep",options:t[5]};return t[2]!==void 0&&(o.value=t[2]),e=new Ge({props:o}),ie.push(()=>_e(e,"value",r,t[2])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};!n&&s&4&&(n=!0,u.value=i[2],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function Ll(t){let e;return{c(){e=x("Load")},m(n,l){A(n,e,l)},d(n){n&&v(e)}}}function Sl(t){let e,n;return e=new $e({props:{$$slots:{default:[Ll]},$$scope:{ctx:t}}}),e.$on("click",t[6]),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&2048&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Yt(t){let e,n;return e=new ne({props:{status:"error",$$slots:{default:[El]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&2064&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function El(t){let e,n;return{c(){e=B("p"),n=x(t[4])},m(l,r){A(l,e,r),F(e,n)},p(l,r){r&16&&ae(n,l[4])},d(l){l&&v(e)}}}function Nl(t){let e,n,l,r,o;const i=[vl,kl],s=[];function u(a,c){return a[0]===null?0:1}e=u(t),n=s[e]=i[e](t);let f=(t[3]==="error"||t[4])&&Yt(t);return{c(){n.c(),l=Q(),f&&f.c(),r=oe()},m(a,c){s[e].m(a,c),A(a,l,c),f&&f.m(a,c),A(a,r,c),o=!0},p(a,[c]){let m=e;e=u(a),e===m?s[e].p(a,c):(ue(),M(s[m],1,1,()=>{s[m]=null}),fe(),n=s[e],n?n.p(a,c):(n=s[e]=i[e](a),n.c()),w(n,1),n.m(l.parentNode,l)),a[3]==="error"||a[4]?f?(f.p(a,c),c&24&&w(f,1)):(f=Yt(a),f.c(),w(f,1),f.m(r.parentNode,r)):f&&(ue(),M(f,1,1,()=>{f=null}),fe())},i(a){o||(w(n),w(f),o=!0)},o(a){M(n),M(f),o=!1},d(a){s[e].d(a),a&&v(l),f&&f.d(a),a&&v(r)}}}function Vl(t,e,n){let{dataset:l=null}=e,r,o=",",i="neutral",s="";const u=[",",";"];function f(_){try{n(0,l=K.parseCSV(_,o)),n(4,s=""),n(3,i="success")}catch(h){n(0,l=null),n(3,i="error"),n(4,s=h)}}function a(_){const h=new FileReader;h.onload=()=>f(h.result),h.readAsBinaryString(r)}function c(){n(0,l=null),n(1,r=null)}function m(_){r=_,n(1,r)}function g(_){o=_,n(2,o)}return t.$$set=_=>{"dataset"in _&&n(0,l=_.dataset)},t.$$.update=()=>{t.$$.dirty&2&&(r===null?c():(n(3,i="neutral"),n(4,s=""))),t.$$.dirty&4&&o&&(n(3,i="neutral"),n(4,s=""))},[l,r,o,i,s,u,a,c,m,g]}class zl extends re{constructor(e){super(),le(this,e,Vl,Nl,ee,{dataset:0})}}function Rl(t,e,n,l){const r=D(t),o=U(t),i=l===void 0?4:l.nseg,s=l===void 0?"ven":l.type,u=qt(s,i,r),f=Ze(u);n!==void 0&&(n=e.ncomp);const a=Math.min(e.ncomp,r-Math.ceil(r/i)-1,o);n>a&&(n=a);const c=t.subtract(e.mX).divide(e.sX),m=e.P.subset([],se(1,n)),g=ke(o).subtract(Je(m)),_=pe(r,o);for(let h=1;h<=f;h++){const[p,y]=Pl(u,h);_.replace(Tl(c,p,y,m,g),y,[])}return _.mult(e.sX).add(e.mX)}function Tl(t,e,n,l,r){const o=U(l);D(l);const i=t.subset(e,[]),s=t.subset(n,[]),u=ft(i,o).V,f=ol(l.mult(u)).map(h=>(Math.acos(h)<Math.PI/2)*2-1),a=me(u,Et(f)),c=me(s,a),g=s.subtract(Je(c,a)).apply(Be,1),_=Je(c,l);return D(l)>U(l)?_.add(Fl(g,s,r)):_}function Fl(t,e,n){const l=t.length,r=Nt(l,l,[-1,1]),o=me(r,e);for(let u=1;u<=U(o);u++){const f=o.getcolumn(u),a=Be(f);for(let c=1;c<=l;c++)f[c-1]=a==0?f[c-1]:f[c-1]/a}const i=me(o,n),s=i.apply(Be,1);for(let u=1;u<=U(o);u++){const f=i.getcolumn(u);for(let a=1;a<=l;a++)f[a-1]=s==0?f[a-1]:f[a-1]*t[a-1]/s[a-1]}return i}function Pl(t,e){const n=se(1,t.length);return[n.filter(l=>t[l-1]!=e),n.filter(l=>t[l-1]==e)]}function qt(t,e,n){if(t=="loo")return se(1,n);if(t=="ven"){const l=Math.ceil(n/e);return it(se(1,e),l).subarray(0,n)}if(t=="rand")return jl(qt("ven",e,n))}function jl(t){let e=t.slice(),n=e.length,l,r;for(;n;)r=Math.floor(Math.random()*n--),l=e[n],e[n]=e[r],e[r]=l;return e}const Mo="";function Il(t){let e,n,l;return{c(){e=B("code"),n=Q(),l=B("div"),d(l,"class","spinner svelte-iilwii")},m(r,o){A(r,e,o),A(r,n,o),A(r,l,o)},p:X,i:X,o:X,d(r){r&&v(e),r&&v(n),r&&v(l)}}}class Bt extends re{constructor(e){super(),le(this,e,null,Il,ee,{})}}function Hl(t){let e,n,l,r,o;e=new ne({props:{label:"CV split type:",$$slots:{default:[ql]},$$scope:{ctx:t}}});let i=t[3]!=="loo"&&Gt(t);return r=new ne({props:{label:" ",$$slots:{default:[Dl]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=Q(),i&&i.c(),l=Q(),Y(r.$$.fragment)},m(s,u){j(e,s,u),A(s,n,u),i&&i.m(s,u),A(s,l,u),j(r,s,u),o=!0},p(s,u){const f={};u&262152&&(f.$$scope={dirty:u,ctx:s}),e.$set(f),s[3]!=="loo"?i?(i.p(s,u),u&8&&w(i,1)):(i=Gt(s),i.c(),w(i,1),i.m(l.parentNode,l)):i&&(ue(),M(i,1,1,()=>{i=null}),fe());const a={};u&262144&&(a.$$scope={dirty:u,ctx:s}),r.$set(a)},i(s){o||(w(e.$$.fragment,s),w(i),w(r.$$.fragment,s),o=!0)},o(s){M(e.$$.fragment,s),M(i),M(r.$$.fragment,s),o=!1},d(s){I(e,s),s&&v(n),i&&i.d(s),s&&v(l),I(r,s)}}}function Yl(t){let e,n,l,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Zl,then:Ul,catch:Wl,value:16,error:17,blocks:[,,,]};return Qe(n=t[4],r),{c(){e=oe(),r.block.c()},m(o,i){A(o,e,i),r.block.m(o,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,l=!0},p(o,i){t=o,r.ctx=t,i&16&&n!==(n=t[4])&&Qe(n,r)||At(r,t,i)},i(o){l||(w(r.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const s=r.blocks[i];M(s)}l=!1},d(o){o&&v(e),r.block.d(o),r.token=null,r=null}}}function ql(t){let e,n,l;function r(i){t[11](i)}let o={id:"cvType",options:t[6]};return t[3]!==void 0&&(o.value=t[3]),e=new Ge({props:o}),ie.push(()=>_e(e,"value",r,t[3])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};!n&&s&8&&(n=!0,u.value=i[3],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function Gt(t){let e,n;return e=new ne({props:{label:"CV segments:",$$slots:{default:[Bl]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&262180&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Bl(t){let e,n,l;function r(i){t[12](i)}let o={id:"nseg",options:t[5]};return t[2]!==void 0&&(o.value=t[2]),e=new Ge({props:o}),ie.push(()=>_e(e,"value",r,t[2])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};s&32&&(u.options=i[5]),!n&&s&4&&(n=!0,u.value=i[2],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function Gl(t){let e;return{c(){e=x("Compute PV-set")},m(n,l){A(n,e,l)},d(n){n&&v(e)}}}function Dl(t){let e,n;return e=new $e({props:{$$slots:{default:[Gl]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Wl(t){let e,n;return e=new ne({props:{status:"error",$$slots:{default:[Ol]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&262160&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Ol(t){let e,n=t[17]+"",l;return{c(){e=B("p"),l=x(n)},m(r,o){A(r,e,o),F(e,l)},p(r,o){o&16&&n!==(n=r[17]+"")&&ae(l,n)},d(r){r&&v(e)}}}function Ul(t){let e,n,l=t[0]!==null&&Dt(t);return{c(){l&&l.c(),e=oe()},m(r,o){l&&l.m(r,o),A(r,e,o),n=!0},p(r,o){r[0]!==null?l?(l.p(r,o),o&1&&w(l,1)):(l=Dt(r),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(ue(),M(l,1,1,()=>{l=null}),fe())},i(r){n||(w(l),n=!0)},o(r){M(l),n=!1},d(r){l&&l.d(r),r&&v(e)}}}function Dt(t){let e,n,l,r;return e=new ne({props:{$$slots:{default:[Xl]},$$scope:{ctx:t}}}),l=new ne({props:{label:" ",$$slots:{default:[Kl]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=Q(),Y(l.$$.fragment)},m(o,i){j(e,o,i),A(o,n,i),j(l,o,i),r=!0},p(o,i){const s={};i&262145&&(s.$$scope={dirty:i,ctx:o}),e.$set(s);const u={};i&262144&&(u.$$scope={dirty:i,ctx:o}),l.$set(u)},i(o){r||(w(e.$$.fragment,o),w(l.$$.fragment,o),r=!0)},o(o){M(e.$$.fragment,o),M(l.$$.fragment,o),r=!1},d(o){I(e,o),o&&v(n),I(l,o)}}}function Xl(t){let e,n,l=D(t[0])+"",r,o,i=U(t[0])+"",s,u,f,a;return f=new at({}),f.$on("click",t[9]),{c(){e=B("p"),n=x("PV-set is computed: "),r=x(l),o=x(" \xD7 "),s=x(i),u=Q(),Y(f.$$.fragment)},m(c,m){A(c,e,m),F(e,n),F(e,r),F(e,o),F(e,s),A(c,u,m),j(f,c,m),a=!0},p(c,m){(!a||m&1)&&l!==(l=D(c[0])+"")&&ae(r,l),(!a||m&1)&&i!==(i=U(c[0])+"")&&ae(s,i)},i(c){a||(w(f.$$.fragment,c),a=!0)},o(c){M(f.$$.fragment,c),a=!1},d(c){c&&v(e),c&&v(u),I(f,c)}}}function Ql(t){let e;return{c(){e=x("Download")},m(n,l){A(n,e,l)},d(n){n&&v(e)}}}function Kl(t){let e,n;return e=new $e({props:{$$slots:{default:[Ql]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Zl(t){let e,n;return e=new ne({props:{$$slots:{default:[Jl]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Jl(t){let e,n,l,r;return e=new Bt({}),{c(){Y(e.$$.fragment),n=Q(),l=B("p"),l.textContent="Computing PV-set..."},m(o,i){j(e,o,i),A(o,n,i),A(o,l,i),r=!0},p:X,i(o){r||(w(e.$$.fragment,o),r=!0)},o(o){M(e.$$.fragment,o),r=!1},d(o){I(e,o),o&&v(n),o&&v(l)}}}function xl(t){let e,n,l,r;const o=[Yl,Hl],i=[];function s(u,f){return u[4]?0:u[1]&&!u[0]?1:-1}return~(e=s(t))&&(n=i[e]=o[e](t)),{c(){n&&n.c(),l=oe()},m(u,f){~e&&i[e].m(u,f),A(u,l,f),r=!0},p(u,[f]){let a=e;e=s(u),e===a?~e&&i[e].p(u,f):(n&&(ue(),M(i[a],1,1,()=>{i[a]=null}),fe()),~e?(n=i[e],n?n.p(u,f):(n=i[e]=o[e](u),n.c()),w(n,1),n.m(l.parentNode,l)):n=null)},i(u){r||(w(n),r=!0)},o(u){M(n),r=!1},d(u){~e&&i[e].d(u),u&&v(l)}}}function $l(t,e,n){let l,{dataset:r}=e,{pcamodel:o}=e,{pvset:i=null}=e,s=4,u="ven",f;const a=["ven","rand","loo"];function c(k){const P=new Blob([i.toCSV(r.sep,r.dec,r.header)],{type:"text/csv"}),V=window.URL.createObjectURL(P),H=document.createElement("a");H.setAttribute("href",V),H.setAttribute("download","pvset.csv"),H.click()}function m(k,P,V){return new Promise((H,N)=>{setTimeout(()=>{H(Rl(k,P,P.ncomp,V))},100)})}async function g(k,P,V){n(4,f=m(k,P,V).then(H=>{n(0,i=H)}))}function _(k){g(r.values,o,{type:u,nseg:s})}function h(){n(4,f=null),n(0,i=null)}function p(k){u=k,n(3,u)}function y(k){s=k,n(2,s)}return t.$$set=k=>{"dataset"in k&&n(10,r=k.dataset),"pcamodel"in k&&n(1,o=k.pcamodel),"pvset"in k&&n(0,i=k.pvset)},t.$$.update=()=>{t.$$.dirty&2&&o===null&&h(),t.$$.dirty&1024&&n(5,l=r&&D(r.values)>0?[2,3,4,5,10,20].filter(k=>k<=D(r.values)/2):[])},[i,o,s,u,f,l,a,c,_,h,r,p,y]}class er extends re{constructor(e){super(),le(this,e,$l,xl,ee,{dataset:10,pcamodel:1,pvset:0})}}const Fe=[];function Pe(t,e=X){let n;const l=new Set;function r(s){if(ee(t,s)&&(t=s,n)){const u=!Fe.length;for(const f of l)f[1](),Fe.push(f,t);if(u){for(let f=0;f<Fe.length;f+=2)Fe[f][0](Fe[f+1]);Fe.length=0}}}function o(s){r(s(t))}function i(s,u=X){const f=[s,u];return l.add(f),l.size===1&&(n=e(r)||X),s(t),()=>{l.delete(f),l.size===0&&(n(),n=null)}}return{set:r,update:o,subscribe:i}}const Co="",tr=t=>({}),Wt=t=>({}),nr=t=>({}),Ot=t=>({}),lr=t=>({}),Ut=t=>({});function Xt(t){let e;return{c(){e=B("div"),d(e,"class","axes__title")},m(n,l){A(n,e,l),e.innerHTML=t[0]},p(n,l){l[0]&1&&(e.innerHTML=n[0])},d(n){n&&v(e)}}}function Qt(t){let e,n;return{c(){e=B("div"),n=B("span"),d(e,"class","axes__ylabel")},m(l,r){A(l,e,r),F(e,n),n.innerHTML=t[2]},p(l,r){r[0]&4&&(n.innerHTML=l[2])},d(l){l&&v(e)}}}function Kt(t){let e,n;return{c(){e=B("div"),n=B("span"),d(e,"class","axes__xlabel")},m(l,r){A(l,e,r),F(e,n),n.innerHTML=t[1]},p(l,r){r[0]&2&&(n.innerHTML=l[1])},d(l){l&&v(e)}}}function Zt(t){let e;return{c(){e=B("p"),e.innerHTML=`Axes component was not properly initialized. <br/>
      Add plot series (check that coordinates are numeric) or define axes limits manually.`,d(e,"class","message_error")},m(n,l){A(n,e,l)},d(n){n&&v(e)}}}function rr(t){let e,n,l,r,o,i,s,u,f,a,c,m,g,_,h,p,y,k,P,V=t[0]!==""&&Xt(t),H=t[2]!==""&&Qt(t),N=t[1]!==""&&Kt(t);const S=t[27].xaxis,E=Le(S,t,t[26],Ut),T=t[27].yaxis,z=Le(T,t,t[26],Ot),W=t[27].default,L=Le(W,t,t[26],null),R=t[27].box,Z=Le(R,t,t[26],Wt);let G=!t[3]&&Zt();return{c(){e=B("div"),V&&V.c(),n=Q(),H&&H.c(),l=Q(),N&&N.c(),r=Q(),o=B("div"),i=te("svg"),s=te("defs"),u=te("clipPath"),f=te("rect"),E&&E.c(),z&&z.c(),_=te("g"),L&&L.c(),Z&&Z.c(),h=Q(),G&&G.c(),He(f,"pointer-events","none"),d(f,"x",a=t[8][0]),d(f,"y",c=t[7][1]),d(f,"width",m=t[8][1]-t[8][0]),d(f,"height",g=t[7][0]-t[7][1]),d(u,"id",t[9]),d(_,"class","axes-content"),d(_,"clip-path","url(#"+t[9]+")"),d(i,"preserveAspectRatio","none"),d(i,"class","axes"),d(o,"class","axes-wrapper svelte-1ukmxl7"),d(e,"class",p="plot "+("plot_"+t[4])+" svelte-1ukmxl7"),ze(e,"plot_error",!t[3])},m(b,O){A(b,e,O),V&&V.m(e,null),F(e,n),H&&H.m(e,null),F(e,l),N&&N.m(e,null),F(e,r),F(e,o),F(o,i),F(i,s),F(s,u),F(u,f),E&&E.m(i,null),z&&z.m(i,null),F(i,_),L&&L.m(_,null),Z&&Z.m(i,null),F(o,h),G&&G.m(o,null),t[28](o),t[29](e),y=!0,k||(P=[ce(i,"click",t[16]),ce(i,"keydown",t[16])],k=!0)},p(b,O){b[0]!==""?V?V.p(b,O):(V=Xt(b),V.c(),V.m(e,n)):V&&(V.d(1),V=null),b[2]!==""?H?H.p(b,O):(H=Qt(b),H.c(),H.m(e,l)):H&&(H.d(1),H=null),b[1]!==""?N?N.p(b,O):(N=Kt(b),N.c(),N.m(e,r)):N&&(N.d(1),N=null),(!y||O[0]&256&&a!==(a=b[8][0]))&&d(f,"x",a),(!y||O[0]&128&&c!==(c=b[7][1]))&&d(f,"y",c),(!y||O[0]&256&&m!==(m=b[8][1]-b[8][0]))&&d(f,"width",m),(!y||O[0]&128&&g!==(g=b[7][0]-b[7][1]))&&d(f,"height",g),E&&E.p&&(!y||O[0]&67108864)&&Ee(E,S,b,b[26],y?Se(S,b[26],O,lr):Ne(b[26]),Ut),z&&z.p&&(!y||O[0]&67108864)&&Ee(z,T,b,b[26],y?Se(T,b[26],O,nr):Ne(b[26]),Ot),L&&L.p&&(!y||O[0]&67108864)&&Ee(L,W,b,b[26],y?Se(W,b[26],O,null):Ne(b[26]),null),Z&&Z.p&&(!y||O[0]&67108864)&&Ee(Z,R,b,b[26],y?Se(R,b[26],O,tr):Ne(b[26]),Wt),b[3]?G&&(G.d(1),G=null):G||(G=Zt(),G.c(),G.m(o,null)),(!y||O[0]&16&&p!==(p="plot "+("plot_"+b[4])+" svelte-1ukmxl7"))&&d(e,"class",p),(!y||O[0]&24)&&ze(e,"plot_error",!b[3])},i(b){y||(w(E,b),w(z,b),w(L,b),w(Z,b),y=!0)},o(b){M(E,b),M(z,b),M(L,b),M(Z,b),y=!1},d(b){b&&v(e),V&&V.d(),H&&H.d(),N&&N.d(),E&&E.d(b),z&&z.d(b),L&&L.d(b),Z&&Z.d(b),G&&G.d(),t[28](null),t[29](null),k=!1,we(P)}}}function Jt(t,e){const n=Math.floor(Math.log10(t)),l=t/Math.pow(10,n);let r;return e?l<1.5?r=1:l<3?r=2:l<7?r=5:r=10:l<=1?r=1:l<=2?r=2:l<=5?r=5:r=10,r*Math.pow(10,n)}function or(t,e){return e<300.2||t<300.2?"small":e<600.2||t<600.2?"medium":"large"}function ir(t,e,n){let l,r,o,i,s,u,f,a,c,{$$slots:m={},$$scope:g}=e,{limX:_=[void 0,void 0]}=e,{limY:h=[void 0,void 0]}=e,{title:p=""}=e,{xLabel:y=""}=e,{yLabel:k=""}=e,{multiSeries:P=!0}=e;const V=kt(),H={small:30,medium:40,large:50},N={small:5,medium:8,large:12},S={small:10,medium:15,large:20},E={small:["0","3,3","1,1","3,1"],medium:["0","5,5","2,2","5,2"],large:["0","7,7","3,3","7,3"]},T="plottingArea"+Math.round(Math.random()*1e4);let z,W,L=[.034,.034,.034,.034];const R=Pe(100);J(t,R,C=>n(24,f=C));const Z=Pe(100);J(t,Z,C=>n(22,i=C));const G=Pe([void 0,void 0]);J(t,G,C=>n(25,a=C));const b=Pe([void 0,void 0]);J(t,b,C=>n(23,s=C));const O=Pe("medium");J(t,O,C=>n(4,c=C));const Ce=Pe(!1);J(t,Ce,C=>n(3,u=C));const De=function(){n(20,L[0]=1,L),n(20,L[2]=.5,L),n(20,L[1]=L[1]>.5?L[1]:.5,L),n(20,L[3]=L[3]>.5?L[3]:.5,L)},je=function(){n(20,L[1]=1,L),n(20,L[3]=.5,L),n(20,L[0]=L[0]>.5?L[0]:.5,L),n(20,L[2]=L[2]>.5?L[2]:.5,L)},mo=function(C){!_.some(q=>q===void 0)||G.update(q=>Vn(q,C))},_o=function(C){!h.some(q=>q===void 0)||b.update(q=>Vn(q,C))},Vn=function(C,q){let $=[C[0]!==void 0&&P===!0&&C[0]<q[0]?C[0]:q[0],C[1]!==void 0&&P===!0&&C[1]>q[1]?C[1]:q[1]];return $[0]===0&&$[1]===0&&($=[-.1,.1]),$[0]===$[1]&&($=[$[0]*.95,$[0]*1.05]),$},et=function(C){return Math.round(C*10)/10},zn=function(C,q,$,be=!1){if(!(!u||C===void 0||!Array.isArray(C)))return be?C.map(ye=>et(ye/(q[1]-q[0])*($-l[1]-l[3]))):C.map(ye=>et((ye-q[0])/(q[1]-q[0])*($-l[1]-l[3])+l[1]))},Rn=function(C,q,$,be=!1){if(!(!u||C===void 0||!Array.isArray(C)))return be?C.map(ye=>et(ye/(q[1]-q[0])*($-l[0]-l[2]))):C.map(ye=>et((q[1]-ye)/(q[1]-q[0])*($-l[0]-l[2])+l[2]))};Xn("axes",{addXAxisMargins:De,addYAxisMargins:je,adjustXAxisLimits:mo,adjustYAxisLimits:_o,getAxisTicks:function(C,q,$,be=!0){if(C!==void 0)return C;if(!Array.isArray(q)||q[0]===void 0||q[1]===void 0)return;const ye=Jt(q[1]-q[0],be),Ae=Jt(ye/($-1),be),jn=Math.ceil(q[0]/Ae)*Ae,bo=Math.floor(q[1]/Ae)*Ae;if($=Math.round((bo-jn+1)/Ae)+1,C=[...Array($)].map((Ie,ht)=>jn+ht*Ae),Math.abs(Ae)<1){const Ie=Math.pow(10,1+Math.round(-Math.log10(Ae)));C=C.map(ht=>Math.round((ht+Number.EPSILON)*Ie)/Ie)}return C.filter(Ie=>Ie>=q[0]&Ie<=q[1])},scaleX:zn,scaleY:Rn,isOk:Ce,scale:O,width:R,height:Z,xLim:G,yLim:b,LINE_STYLES:E,LABELS_MARGIN:S,TICK_NUM:N});function Tn(C,q){V(C,{seriesTitle:q.parentNode.getAttribute("title"),elementID:q.dataset.id})}function ho(C){if(C.target.tagName==="text"&&C.target.parentNode.classList.contains("series_scatter")){Tn("markerclick",C.target);return}if(C.target.tagName==="rect"&&C.target.parentNode.classList.contains("series_bar")){Tn("barclick",C.target);return}V("axesclick")}const Fn=new ResizeObserver(C=>{for(let q of C){const $=W.getBoundingClientRect();R.update(be=>$.width),Z.update(be=>$.height)}}),Pn=new ResizeObserver(C=>{for(let q of C){const $=z.getBoundingClientRect();O.update(be=>or($.width,$.height))}});On(()=>{Pn.observe(z),Fn.observe(W)}),Un(()=>{Pn.unobserve(z),Fn.unobserve(W)});function go(C){ie[C?"unshift":"push"](()=>{W=C,n(6,W)})}function po(C){ie[C?"unshift":"push"](()=>{z=C,n(5,z)})}return t.$$set=C=>{"limX"in C&&n(17,_=C.limX),"limY"in C&&n(18,h=C.limY),"title"in C&&n(0,p=C.title),"xLabel"in C&&n(1,y=C.xLabel),"yLabel"in C&&n(2,k=C.yLabel),"multiSeries"in C&&n(19,P=C.multiSeries),"$$scope"in C&&n(26,g=C.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&131072&&(_.some(C=>C===void 0)||G.update(C=>_)),t.$$.dirty[0]&262144&&(h.some(C=>C===void 0)||b.update(C=>h)),t.$$.dirty[0]&1048592&&n(21,l=L.map(C=>C*H[c])),t.$$.dirty[0]&65011712&&Ce.update(C=>Array.isArray(s)&&Array.isArray(a)&&a.length===2&&s.length===2&&!s.some(q=>q===void 0)&&!a.some(q=>q===void 0)&&!s.some(q=>isNaN(q))&&!a.some(q=>isNaN(q))&&a[1]!==a[0]&&s[1]!==s[0]&&f>l[1]+l[3]&&i>l[0]+l[2]),t.$$.dirty[0]&50331656&&n(8,r=u?zn(a,a,f):[0,1]),t.$$.dirty[0]&12582920&&n(7,o=u?Rn(s,s,i):[1,0])},[p,y,k,u,c,z,W,o,r,T,R,Z,G,b,O,Ce,ho,_,h,P,L,l,i,s,f,a,g,m,go,po]}class sr extends re{constructor(e){super(),le(this,e,ir,rr,ee,{limX:17,limY:18,title:0,xLabel:1,yLabel:2,multiSeries:19},null,[-1,-1])}}const ve={AXIS_LINE:"#303030",AXIS_TICK:"#606060",WHITE:"#fff",BLACK:"#000",GRAY:"#909090",MIDDLEGRAY:"#dadada",LIGHTGRAY:"#f0f0f0",DARKGRAY:"#606060",PRIMARY:"#2266ff",PRIMARY_TEXT:"#333"};function xt(t,e,n){const l=t.slice();return l[26]=e[n],l[28]=n,l}function $t(t){let e,n,l,r,o,i,s=t[4],u=[];for(let f=0;f<s.length;f+=1)u[f]=en(xt(t,s,f));return{c(){e=te("g");for(let f=0;f<u.length;f+=1)u[f].c();n=te("line"),d(n,"x1",l=t[5][0]),d(n,"x2",r=t[5][1]),d(n,"y1",o=t[2][0]),d(n,"y2",i=t[2][0]),d(n,"style",t[7]),d(e,"class","mdaplot__axis mdaplot__xaxis")},m(f,a){A(f,e,a);for(let c=0;c<u.length;c+=1)u[c].m(e,null);F(e,n)},p(f,a){if(a&415){s=f[4];let c;for(c=0;c<s.length;c+=1){const m=xt(f,s,c);u[c]?u[c].p(m,a):(u[c]=en(m),u[c].c(),u[c].m(e,n))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}a&32&&l!==(l=f[5][0])&&d(n,"x1",l),a&32&&r!==(r=f[5][1])&&d(n,"x2",r),a&4&&o!==(o=f[2][0])&&d(n,"y1",o),a&4&&i!==(i=f[2][0])&&d(n,"y2",i)},d(f){f&&v(e),Ve(u,f)}}}function en(t){let e,n,l,r,o,i,s,u,f,a,c,m=t[0][t[28]]+"",g,_,h;return{c(){e=te("line"),i=te("line"),c=te("text"),g=x(m),d(e,"x1",n=t[26]),d(e,"x2",l=t[26]),d(e,"y1",r=t[2][0]),d(e,"y2",o=t[2][1]),d(e,"style",t[8]),d(i,"x1",s=t[26]),d(i,"x2",u=t[26]),d(i,"y1",f=t[3][0]),d(i,"y2",a=t[3][1]),d(i,"style",t[7]),d(c,"x",_=t[26]),d(c,"y",h=t[3][1]),d(c,"dx","0"),d(c,"dy",t[1]),d(c,"class","mdaplot__axis-labels"),d(c,"dominant-baseline","middle"),d(c,"text-anchor","middle")},m(p,y){A(p,e,y),A(p,i,y),A(p,c,y),F(c,g)},p(p,y){y&16&&n!==(n=p[26])&&d(e,"x1",n),y&16&&l!==(l=p[26])&&d(e,"x2",l),y&4&&r!==(r=p[2][0])&&d(e,"y1",r),y&4&&o!==(o=p[2][1])&&d(e,"y2",o),y&16&&s!==(s=p[26])&&d(i,"x1",s),y&16&&u!==(u=p[26])&&d(i,"x2",u),y&8&&f!==(f=p[3][0])&&d(i,"y1",f),y&8&&a!==(a=p[3][1])&&d(i,"y2",a),y&1&&m!==(m=p[0][p[28]]+"")&&ae(g,m),y&16&&_!==(_=p[26])&&d(c,"x",_),y&8&&h!==(h=p[3][1])&&d(c,"y",h),y&2&&d(c,"dy",p[1])},d(p){p&&v(e),p&&v(i),p&&v(c)}}}function ur(t){let e,n=t[6]&&t[5]!==void 0&&t[2]!==void 0&&$t(t);return{c(){n&&n.c(),e=oe()},m(l,r){n&&n.m(l,r),A(l,e,r)},p(l,[r]){l[6]&&l[5]!==void 0&&l[2]!==void 0?n?n.p(l,r):(n=$t(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:X,o:X,d(l){n&&n.d(l),l&&v(e)}}}function fr(t,e,n){let l,r,o,i,s,u,f,a,c,m,g,_,{slot:h="xaxis"}=e,{ticks:p=void 0}=e,{tickLabels:y=p}=e,{showGrid:k=!1}=e;const P=p===void 0?"auto":"manual";if(h!=="xaxis")throw`Component XAxis must have "slot='xaxis'" attribute.`;if(p!==void 0&&!Array.isArray(p))throw"XAxis: 'ticks' must be a vector of numbers.";if(p!==void 0&&!(Array.isArray(y)&&y.length==p.length))throw"XAxis: 'tickLabels' must be a vector of the same size as ticks.";const V=`stroke:${ve.DARKGRAY};line-width:1px;`,H=`stroke:${ve.MIDDLEGRAY};stroke-opacity:${k?1:0};stroke-dasharray:2px;`,N=Te("axes");N.addXAxisMargins();const S=N.xLim;J(t,S,R=>n(20,a=R));const E=N.yLim;J(t,E,R=>n(23,g=R));const T=N.width;J(t,T,R=>n(19,f=R));const z=N.height;J(t,z,R=>n(22,m=R));const W=N.scale;J(t,W,R=>n(21,c=R));const L=N.isOk;return J(t,L,R=>n(6,_=R)),t.$$set=R=>{"slot"in R&&n(16,h=R.slot),"ticks"in R&&n(15,p=R.ticks),"tickLabels"in R&&n(0,y=R.tickLabels),"showGrid"in R&&n(17,k=R.showGrid)},t.$$.update=()=>{t.$$.dirty&1572864&&n(5,l=N.scaleX(a,a,f)),t.$$.dirty&12582912&&n(2,r=N.scaleY(g,g,m)),t.$$.dirty&2097152&&n(1,o=c==="small"?7:10),t.$$.dirty&2097152&&n(18,i=N.TICK_NUM[c]),t.$$.dirty&1343488&&n(15,p=P==="auto"?N.getAxisTicks(void 0,a,i,!0):p),t.$$.dirty&32769&&n(0,y=P==="auto"?p:y),t.$$.dirty&1605632&&n(4,s=N.scaleX(p,a,f)),t.$$.dirty&6&&n(3,u=r===void 0?void 0:[r[0],r[0]+o])},[y,o,r,u,s,l,_,V,H,S,E,T,z,W,L,p,h,k,i,f,a,c,m,g]}class cr extends re{constructor(e){super(),le(this,e,fr,ur,ee,{slot:16,ticks:15,tickLabels:0,showGrid:17})}}function tn(t,e,n){const l=t.slice();return l[26]=e[n],l[28]=n,l}function nn(t){let e,n,l,r,o,i,s=t[4],u=[];for(let f=0;f<s.length;f+=1)u[f]=ln(tn(t,s,f));return{c(){e=te("g");for(let f=0;f<u.length;f+=1)u[f].c();n=te("line"),d(n,"x1",l=t[1][0]),d(n,"x2",r=t[1][0]),d(n,"y1",o=t[5][0]),d(n,"y2",i=t[5][1]),d(n,"style",t[7]),d(e,"class","mdaplot__axis mdaplot__yaxis")},m(f,a){A(f,e,a);for(let c=0;c<u.length;c+=1)u[c].m(e,null);F(e,n)},p(f,a){if(a&479){s=f[4];let c;for(c=0;c<s.length;c+=1){const m=tn(f,s,c);u[c]?u[c].p(m,a):(u[c]=ln(m),u[c].c(),u[c].m(e,n))}for(;c<u.length;c+=1)u[c].d(1);u.length=s.length}a&2&&l!==(l=f[1][0])&&d(n,"x1",l),a&2&&r!==(r=f[1][0])&&d(n,"x2",r),a&32&&o!==(o=f[5][0])&&d(n,"y1",o),a&32&&i!==(i=f[5][1])&&d(n,"y2",i)},d(f){f&&v(e),Ve(u,f)}}}function ln(t){let e,n,l,r,o,i,s,u,f,a,c,m=t[0][t[28]]+"",g,_,h;return{c(){e=te("line"),i=te("line"),c=te("text"),g=x(m),d(e,"x1",n=t[1][0]),d(e,"x2",l=t[1][1]),d(e,"y1",r=t[26]),d(e,"y2",o=t[26]),d(e,"style",t[8]),d(i,"x1",s=t[3][0]),d(i,"x2",u=t[3][1]),d(i,"y1",f=t[26]),d(i,"y2",a=t[26]),d(i,"style",t[7]),d(c,"x",_=t[3][0]),d(c,"y",h=t[26]),d(c,"dx",t[2]),d(c,"dy",0),d(c,"transform",t[6]),He(c,"background","red"),d(c,"class","mdaplot__axis-labels"),d(c,"dominant-baseline","middle"),d(c,"text-anchor","end")},m(p,y){A(p,e,y),A(p,i,y),A(p,c,y),F(c,g)},p(p,y){y&2&&n!==(n=p[1][0])&&d(e,"x1",n),y&2&&l!==(l=p[1][1])&&d(e,"x2",l),y&16&&r!==(r=p[26])&&d(e,"y1",r),y&16&&o!==(o=p[26])&&d(e,"y2",o),y&8&&s!==(s=p[3][0])&&d(i,"x1",s),y&8&&u!==(u=p[3][1])&&d(i,"x2",u),y&16&&f!==(f=p[26])&&d(i,"y1",f),y&16&&a!==(a=p[26])&&d(i,"y2",a),y&1&&m!==(m=p[0][p[28]]+"")&&ae(g,m),y&8&&_!==(_=p[3][0])&&d(c,"x",_),y&16&&h!==(h=p[26])&&d(c,"y",h),y&4&&d(c,"dx",p[2])},d(p){p&&v(e),p&&v(i),p&&v(c)}}}function ar(t){let e,n=t[1]!==void 0&&t[5]!==void 0&&nn(t);return{c(){n&&n.c(),e=oe()},m(l,r){n&&n.m(l,r),A(l,e,r)},p(l,[r]){l[1]!==void 0&&l[5]!==void 0?n?n.p(l,r):(n=nn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:X,o:X,d(l){n&&n.d(l),l&&v(e)}}}function mr(t,e,n){let l,r,o,i,s,u,f,a,c,m,g,{slot:_="yaxis"}=e,{ticks:h=void 0}=e,{tickLabels:p=h}=e,{showGrid:y=!1}=e,{las:k=1}=e;const P=h===void 0?"auto":"manual",V=(k>1,"");if(_!=="yaxis")throw`Component YAxis must have "slot='yaxis'" attribute.`;if(h!==void 0&&!Array.isArray(h))throw"YAxis: 'ticks' must be a vector of numbers.";if(h!==void 0&&!(Array.isArray(p)&&p.length==h.length))throw"YAxis: 'tickLabels' must be a vector of the same size as ticks.";const H=`stroke:${ve.DARKGRAY};line-width:1px;`,N=`stroke:${ve.MIDDLEGRAY};stroke-opacity:${y?1:0};stroke-dasharray:2px;`,S=Te("axes");S.addYAxisMargins();const E=S.xLim;J(t,E,R=>n(23,g=R));const T=S.yLim;J(t,T,R=>n(20,a=R));const z=S.width;J(t,z,R=>n(22,m=R));const W=S.height;J(t,W,R=>n(19,f=R));const L=S.scale;return J(t,L,R=>n(21,c=R)),t.$$set=R=>{"slot"in R&&n(15,_=R.slot),"ticks"in R&&n(14,h=R.ticks),"tickLabels"in R&&n(0,p=R.tickLabels),"showGrid"in R&&n(16,y=R.showGrid),"las"in R&&n(17,k=R.las)},t.$$.update=()=>{t.$$.dirty&12582912&&n(1,l=S.scaleX(g,g,m)),t.$$.dirty&1572864&&n(5,r=S.scaleY(a,a,f)),t.$$.dirty&2097152&&n(2,o=c==="small"?-4:-6),t.$$.dirty&2097152&&n(18,i=S.TICK_NUM[c]),t.$$.dirty&1327104&&n(14,h=P==="auto"?S.getAxisTicks(void 0,a,i,!0):h),t.$$.dirty&16385&&n(0,p=P==="auto"?h:p),t.$$.dirty&1589248&&n(4,s=S.scaleY(h,a,f)),t.$$.dirty&6&&n(3,u=l===void 0?void 0:[l[0]+o,l[0]])},[p,l,o,u,s,r,V,H,N,E,T,z,W,L,h,_,y,k,i,f,a,c,m,g]}class dr extends re{constructor(e){super(),le(this,e,mr,ar,ee,{slot:15,ticks:14,tickLabels:0,showGrid:16,las:17})}}function rn(t,e,n){const l=t.slice();return l[25]=e[n],l[27]=n,l}function on(t){let e,n,l=t[0],r=[];for(let o=0;o<l.length;o+=1)r[o]=sn(rn(t,l,o));return{c(){e=te("g");for(let o=0;o<r.length;o+=1)r[o].c();d(e,"class",n="series "+t[2]),d(e,"title",t[1]),d(e,"style",t[3])},m(o,i){A(o,e,i);for(let s=0;s<r.length;s+=1)r[s].m(e,null)},p(o,i){if(i&241){l=o[0];let s;for(s=0;s<l.length;s+=1){const u=rn(o,l,s);r[s]?r[s].p(u,i):(r[s]=sn(u),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=l.length}i&4&&n!==(n="series "+o[2])&&d(e,"class",n),i&2&&d(e,"title",o[1]),i&8&&d(e,"style",o[3])},d(o){o&&v(e),Ve(r,o)}}}function sn(t){let e,n,l,r,o;return{c(){e=te("rect"),d(e,"x",n=t[7][t[27]]),d(e,"y",l=t[6][t[27]]),d(e,"width",r=t[5][t[27]]),d(e,"height",o=t[4][t[27]])},m(i,s){A(i,e,s)},p(i,s){s&128&&n!==(n=i[7][i[27]])&&d(e,"x",n),s&64&&l!==(l=i[6][i[27]])&&d(e,"y",l),s&32&&r!==(r=i[5][i[27]])&&d(e,"width",r),s&16&&o!==(o=i[4][i[27]])&&d(e,"height",o)},d(i){i&&v(e)}}}function _r(t){let e,n=t[7]!==void 0&&t[6]!==void 0&&on(t);return{c(){n&&n.c(),e=oe()},m(l,r){n&&n.m(l,r),A(l,e,r)},p(l,[r]){l[7]!==void 0&&l[6]!==void 0?n?n.p(l,r):(n=on(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:X,o:X,d(l){n&&n.d(l),l&&v(e)}}}function hr(t,e,n){let l,r,o,i,s,u,f,a,c,{left:m}=e,{top:g}=e,{width:_}=e,{height:h}=e,{labels:p=void 0}=e,{faceColor:y=ve.PRIMARY}=e,{borderColor:k=y}=e,{lineWidth:P=1}=e,{title:V=""}=e,{style:H="series_rect"}=e;if(!Array.isArray(m)||!Array.isArray(g)||m.length<1||m.length!=g.length)throw"Rectangles: parameters 'left' and 'top' must be vectors of the same size.";const N=m.length;if(Array.isArray(h)||(h=Array(N).fill(h)),Array.isArray(_)||(_=Array(N).fill(_)),g.length!==N||_.length!==N||h.length!==N)throw"Rectangles: x, y, w and h should have the same length (w and h can be single values).";if(p!==void 0&&(!Array.isArray(p)||p.length!==N))throw"Rectangles: vector with labels should have the same length as vectors with x and y coordinates.";const S=Te("axes"),E=S.xLim;J(t,E,L=>n(22,c=L));const T=S.yLim;J(t,T,L=>n(20,f=L));const z=S.width;J(t,z,L=>n(21,a=L));const W=S.height;return J(t,W,L=>n(19,u=L)),t.$$set=L=>{"left"in L&&n(0,m=L.left),"top"in L&&n(14,g=L.top),"width"in L&&n(12,_=L.width),"height"in L&&n(13,h=L.height),"labels"in L&&n(15,p=L.labels),"faceColor"in L&&n(16,y=L.faceColor),"borderColor"in L&&n(17,k=L.borderColor),"lineWidth"in L&&n(18,P=L.lineWidth),"title"in L&&n(1,V=L.title),"style"in L&&n(2,H=L.style)},t.$$.update=()=>{t.$$.dirty&6291457&&n(7,l=S.scaleX(m,c,a)),t.$$.dirty&1589248&&n(6,r=S.scaleY(g,f,u)),t.$$.dirty&6295552&&n(5,o=S.scaleX(_,c,a,!0)),t.$$.dirty&1581056&&n(4,i=S.scaleY(h,f,u,!0)),t.$$.dirty&458752&&n(3,s=`fill:${y};stroke:${k};stroke-width:${P}px;`)},[m,V,H,s,i,o,r,l,E,T,z,W,_,h,g,p,y,k,P,u,f,a,c]}class gr extends re{constructor(e){super(),le(this,e,hr,_r,ee,{left:0,top:14,width:12,height:13,labels:15,faceColor:16,borderColor:17,lineWidth:18,title:1,style:2})}}function un(t){let e,n,l;return n=new gr({props:{left:t[3],top:t[2],width:t[1],height:t[0],borderColor:ve.DARKGRAY,faceColor:"transparent"}}),{c(){e=te("g"),Y(n.$$.fragment),He(e,"pointer-events","none"),d(e,"class","mdaplot__axes-box")},m(r,o){A(r,e,o),j(n,e,null),l=!0},p(r,o){const i={};o&8&&(i.left=r[3]),o&4&&(i.top=r[2]),o&2&&(i.width=r[1]),o&1&&(i.height=r[0]),n.$set(i)},i(r){l||(w(n.$$.fragment,r),l=!0)},o(r){M(n.$$.fragment,r),l=!1},d(r){r&&v(e),I(n)}}}function pr(t){let e,n,l=t[4]&&un(t);return{c(){l&&l.c(),e=oe()},m(r,o){l&&l.m(r,o),A(r,e,o),n=!0},p(r,[o]){r[4]?l?(l.p(r,o),o&16&&w(l,1)):(l=un(r),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(ue(),M(l,1,1,()=>{l=null}),fe())},i(r){n||(w(l),n=!0)},o(r){M(l),n=!1},d(r){l&&l.d(r),r&&v(e)}}}function br(t,e,n){let l,r,o,i,s,u,f,{slot:a}=e;if(a!=="box")throw`Component Box must have "slot='box'" attribute.`;const c=Te("axes"),m=c.xLim;J(t,m,h=>n(10,u=h));const g=c.yLim;J(t,g,h=>n(9,s=h));const _=c.isOk;return J(t,_,h=>n(4,f=h)),t.$$set=h=>{"slot"in h&&n(8,a=h.slot)},t.$$.update=()=>{t.$$.dirty&1024&&n(3,l=[u[0]]),t.$$.dirty&512&&n(2,r=[s[1]]),t.$$.dirty&1024&&n(1,o=[u[1]-u[0]]),t.$$.dirty&512&&n(0,i=[s[1]-s[0]])},[i,o,r,l,f,m,g,_,a,s,u]}class yr extends re{constructor(e){super(),le(this,e,br,pr,ee,{slot:8})}}function fn(t){let e=t.length,n=Number.POSITIVE_INFINITY;for(;e--;)n=t[e]<n?t[e]:n;return n}function mt(t){let e=t.length,n=Number.NEGATIVE_INFINITY;for(;e--;)n=t[e]>n?t[e]:n;return n}function cn(t,e=.05){const n=fn(t),r=mt(t)-n;return[n-r*e,mt(t)+r*e]}function dt(t,e){if(Array.isArray(e)){if(t.length!=e.length)throw new Error("Parameter 'n' should be a single value or a vector of the same length as x.");let l=[];for(let r=0;r<e.length;r++)l.push(...dt([t[r]],e[r]));return l}if(Array.isArray(t)||(t=[t]),e<=1)return t;const n=t.length;t.length=n*e;for(let l=0;l<e-1;l++)for(let r=0;r<n;r++)t[n*(l+1)+r]=t[r];return t}function _t(t,e,n){if(Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]),e.length===0)return[...t];if(mt(e)>t.length||fn(e)<1)throw new Error("Parameter 'indices' must have values between 1 and 'x.length'.");const l=e.length;if(!n||n==="select"){let r=Array(l);for(let o=0;o<l;o++)r[o]=t[e[o]-1];return r}if(n==="remove")return[...t].filter((o,i)=>!e.includes(i+1));throw Error("Wrong value for argument 'method'.")}const wr=(t,e)=>t*e;function an(t,e){return kr(t,e,wr)}function kr(t,e,n){const l=t.length|e.length;if(l<1)throw Error("One of the arguments must be a vector.");if(mn(e)||(e=dt(e,l)),mn(t)||(t=dt(t,l)),t.length!==e.length)throw Error("Dimensions of 'x' and 'y' mismatch.");let r=Array(l).fill(0);for(let o=0;o<l;o++)r[o]=n(t[o],e[o]);return r}function mn(t){return!(!vr(t)||Array.isArray(t[0]))}function vr(t){return Array.isArray(t)&&t.length>0}const Lo="";function dn(t,e,n){const l=t.slice();return l[29]=e[n],l[31]=n,l}function _n(t,e,n){const l=t.slice();return l[29]=e[n],l[31]=n,l}function hn(t){let e,n;function l(i,s){return i[0]===0?Mr:Ar}let r=l(t),o=r(t);return{c(){e=te("g"),o.c(),d(e,"class",n="series "+t[1]),d(e,"title",t[2]),d(e,"style",t[3])},m(i,s){A(i,e,s),o.m(e,null)},p(i,s){r===(r=l(i))&&o?o.p(i,s):(o.d(1),o=r(i),o&&(o.c(),o.m(e,null))),s[0]&2&&n!==(n="series "+i[1])&&d(e,"class",n),s[0]&4&&d(e,"title",i[2]),s[0]&8&&d(e,"style",i[3])},d(i){i&&v(e),o.d()}}}function Ar(t){let e,n=t[8],l=[];for(let r=0;r<n.length;r+=1)l[r]=gn(dn(t,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=oe()},m(r,o){for(let i=0;i<l.length;i+=1)l[i].m(r,o);A(r,e,o)},p(r,o){if(o[0]&1008){n=r[8];let i;for(i=0;i<n.length;i+=1){const s=dn(r,n,i);l[i]?l[i].p(s,o):(l[i]=gn(s),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(r){Ve(l,r),r&&v(e)}}}function Mr(t){let e,n=t[8],l=[];for(let r=0;r<n.length;r+=1)l[r]=pn(_n(t,n,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=oe()},m(r,o){for(let i=0;i<l.length;i+=1)l[i].m(r,o);A(r,e,o)},p(r,o){if(o[0]&896){n=r[8];let i;for(i=0;i<n.length;i+=1){const s=_n(r,n,i);l[i]?l[i].p(s,o):(l[i]=pn(s),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(r){Ve(l,r),r&&v(e)}}}function gn(t){let e,n=t[9][t[31]]+"",l,r,o,i,s;return{c(){e=te("text"),d(e,"data-id",t[31]),d(e,"x",l=t[8][t[31]]),d(e,"y",r=t[7][t[31]]),d(e,"dx",o=t[6][t[31]]),d(e,"dy",i=t[5][t[31]]),d(e,"text-anchor",s=t[4][t[31]]),d(e,"class","svelte-131ks7u")},m(u,f){A(u,e,f),e.innerHTML=n},p(u,f){f[0]&512&&n!==(n=u[9][u[31]]+"")&&(e.innerHTML=n),f[0]&256&&l!==(l=u[8][u[31]])&&d(e,"x",l),f[0]&128&&r!==(r=u[7][u[31]])&&d(e,"y",r),f[0]&64&&o!==(o=u[6][u[31]])&&d(e,"dx",o),f[0]&32&&i!==(i=u[5][u[31]])&&d(e,"dy",i),f[0]&16&&s!==(s=u[4][u[31]])&&d(e,"text-anchor",s)},d(u){u&&v(e)}}}function pn(t){let e,n=t[9][t[31]]+"",l,r;return{c(){e=te("text"),d(e,"data-id",t[31]),d(e,"x",l=t[8][t[31]]),d(e,"y",r=t[7][t[31]]),d(e,"class","svelte-131ks7u")},m(o,i){A(o,e,i),e.innerHTML=n},p(o,i){i[0]&512&&n!==(n=o[9][o[31]]+"")&&(e.innerHTML=n),i[0]&256&&l!==(l=o[8][o[31]])&&d(e,"x",l),i[0]&128&&r!==(r=o[7][o[31]])&&d(e,"y",r)},d(o){o&&v(e)}}}function Cr(t){let e,n=t[8]!==void 0&&t[7]!==void 0&&hn(t);return{c(){n&&n.c(),e=oe()},m(l,r){n&&n.m(l,r),A(l,e,r)},p(l,r){l[8]!==void 0&&l[7]!==void 0?n?n.p(l,r):(n=hn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:X,o:X,d(l){n&&n.d(l),l&&v(e)}}}function bn(t,e,n){if(!Array.isArray(t))return Array(e).fill(t);if(t.length!==e)throw`TextLabels: parameter ${n} must be a single number or a vector of the same size as 'x' and 'y'.`;return t}function Lr(t,e,n){let l,r,o,i,s,u,f,a,c,m,g,_,h,{xValues:p}=e,{yValues:y}=e,{labels:k}=e,{pos:P=0}=e,{faceColor:V=ve.PRIMARY_TEXT}=e,{borderColor:H="transparent"}=e,{borderWidth:N=0}=e,{textSize:S=1}=e,{style:E=""}=e,{title:T="series_text"}=e;if(!Array.isArray(p)||!Array.isArray(y)||p.length!==y.length)throw"TextLabels: parameters 'xValues' and 'yValues' must be vectors of the same length.";const z=Te("axes"),W=z.xLim;J(t,W,b=>n(27,h=b));const L=z.yLim;J(t,L,b=>n(25,g=b));const R=z.width;J(t,R,b=>n(26,_=b));const Z=z.height;J(t,Z,b=>n(24,m=b));const G=z.scale;return J(t,G,b=>n(23,c=b)),t.$$set=b=>{"xValues"in b&&n(15,p=b.xValues),"yValues"in b&&n(16,y=b.yValues),"labels"in b&&n(17,k=b.labels),"pos"in b&&n(0,P=b.pos),"faceColor"in b&&n(18,V=b.faceColor),"borderColor"in b&&n(19,H=b.borderColor),"borderWidth"in b&&n(20,N=b.borderWidth),"textSize"in b&&n(21,S=b.textSize),"style"in b&&n(1,E=b.style),"title"in b&&n(2,T=b.title)},t.$$.update=()=>{t.$$.dirty[0]&163840&&n(9,l=bn(k,p.length)),t.$$.dirty[0]&32769&&n(22,r=P===0?P:bn(P,p.length)),t.$$.dirty[0]&201359360&&n(8,o=z.scaleX(p,h,_)),t.$$.dirty[0]&50397184&&n(7,i=z.scaleY(y,g,m)),t.$$.dirty[0]&12582913&&n(6,s=P===0?0:_t(an([0,1,0,-1],z.LABELS_MARGIN[c]),r)),t.$$.dirty[0]&12582913&&n(5,u=P===0?0:_t(an([1,0,-1,0],z.LABELS_MARGIN[c]),r)),t.$$.dirty[0]&4194305&&n(4,f=P===0?"middle":_t(["middle","start","middle","end"],r)),t.$$.dirty[0]&3932160&&n(3,a=`dominant-baseline:middle;fill:${V};stroke-width:${N}px;stroke:${H};
      font-size:${S}em; text-anchor:middle;`)},[P,E,T,a,f,u,s,i,o,l,W,L,R,Z,G,p,y,k,V,H,N,S,r,c,m,g,_,h]}class Sr extends re{constructor(e){super(),le(this,e,Lr,Cr,ee,{xValues:15,yValues:16,labels:17,pos:0,faceColor:18,borderColor:19,borderWidth:20,textSize:21,style:1,title:2},null,[-1,-1])}}function Er(t){let e,n;return e=new Sr({props:{xValues:t[0],yValues:t[1],faceColor:t[3],borderColor:t[4],borderWidth:t[5],title:t[2],style:"series_scatter",labels:t[7],textSize:t[6]}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,[r]){const o={};r&1&&(o.xValues=l[0]),r&2&&(o.yValues=l[1]),r&8&&(o.faceColor=l[3]),r&16&&(o.borderColor=l[4]),r&32&&(o.borderWidth=l[5]),r&4&&(o.title=l[2]),r&128&&(o.labels=l[7]),r&64&&(o.textSize=l[6]),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Nr(t,e,n){let{xValues:l}=e,{yValues:r}=e,{marker:o=1}=e,{title:i=""}=e,{faceColor:s="transparent"}=e,{borderColor:u=ve.PRIMARY}=e,{borderWidth:f=1}=e,{markerSize:a=1}=e;const c=["\u25CF","\u25FC","\u25B2","\u25BC","\u2B25","+","*","\u2A2F"];let m;if(typeof o!="number"||o<1||o>c.length)throw`ScatterSeries: parameter 'marker' must be a number from 1 to ${c.length}."`;const g=Te("axes");return t.$$set=_=>{"xValues"in _&&n(0,l=_.xValues),"yValues"in _&&n(1,r=_.yValues),"marker"in _&&n(8,o=_.marker),"title"in _&&n(2,i=_.title),"faceColor"in _&&n(3,s=_.faceColor),"borderColor"in _&&n(4,u=_.borderColor),"borderWidth"in _&&n(5,f=_.borderWidth),"markerSize"in _&&n(6,a=_.markerSize)},t.$$.update=()=>{if(t.$$.dirty&257){if(!Array.isArray(l))throw"ScatterSeries: parameter 'xValues' must be a numeric vector.";const _=cn(l,.05);g.adjustXAxisLimits(_),n(7,m=""),n(7,m=c[o-1])}if(t.$$.dirty&3){if(!Array.isArray(r)||l.length!=r.length)throw"BarSeries: parameter 'yValues' must be a numeric vector of the same length as 'xValues'.";const _=cn(r,.05);g.adjustYAxisLimits(_)}},[l,r,i,s,u,f,a,m,o]}class Vr extends re{constructor(e){super(),le(this,e,Nr,Er,ee,{xValues:0,yValues:1,marker:8,title:2,faceColor:3,borderColor:4,borderWidth:5,markerSize:6})}}function yn(t,e,n){const l=t.slice();return l[8]=e[n],l[10]=n,l}function wn(t){let e,n;return e=new sr({props:{title:`Distance plot (A = ${t[2]})`,xLabel:"Score distance, h/h0",yLabel:"Orthogonal distance, q/q0",$$slots:{box:[Fr],yaxis:[Tr],xaxis:[Rr],default:[zr]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&4&&(o.title=`Distance plot (A = ${l[2]})`),r&2055&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function kn(t){let e,n;return e=new Vr({props:{xValues:Array.from(t[8].H.getcolumn(t[2]).map(t[6])),yValues:Array.from(t[8].Q.getcolumn(t[2]).map(t[7])),faceColor:"transparent",marker:t[4][t[10]],borderColor:t[3][t[10]]}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&7&&(o.xValues=Array.from(l[8].H.getcolumn(l[2]).map(l[6]))),r&7&&(o.yValues=Array.from(l[8].Q.getcolumn(l[2]).map(l[7]))),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function zr(t){let e,n,l=t[1],r=[];for(let i=0;i<l.length;i+=1)r[i]=kn(yn(t,l,i));const o=i=>M(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=oe()},m(i,s){for(let u=0;u<r.length;u+=1)r[u].m(i,s);A(i,e,s),n=!0},p(i,s){if(s&31){l=i[1];let u;for(u=0;u<l.length;u+=1){const f=yn(i,l,u);r[u]?(r[u].p(f,s),w(r[u],1)):(r[u]=kn(f),r[u].c(),w(r[u],1),r[u].m(e.parentNode,e))}for(ue(),u=l.length;u<r.length;u+=1)o(u);fe()}},i(i){if(!n){for(let s=0;s<l.length;s+=1)w(r[s]);n=!0}},o(i){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)M(r[s]);n=!1},d(i){Ve(r,i),i&&v(e)}}}function Rr(t){let e,n;return e=new cr({props:{slot:"xaxis",showGrid:!0}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p:X,i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Tr(t){let e,n;return e=new dr({props:{slot:"yaxis",showGrid:!0}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p:X,i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Fr(t){let e,n;return e=new yr({props:{slot:"box"}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p:X,i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Pr(t){let e,n,l=t[0]!==null&&t[1]!==null&&wn(t);return{c(){l&&l.c(),e=oe()},m(r,o){l&&l.m(r,o),A(r,e,o),n=!0},p(r,[o]){r[0]!==null&&r[1]!==null?l?(l.p(r,o),o&3&&w(l,1)):(l=wn(r),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(ue(),M(l,1,1,()=>{l=null}),fe())},i(r){n||(w(l),n=!0)},o(r){M(l),n=!1},d(r){l&&l.d(r),r&&v(e)}}}function jr(t,e,n){let l,{settings:r}=e,{model:o}=e,{results:i}=e;const s=["#2679B2","#D22C2F"],u=[1,2],f=c=>c/o.h0[l-1],a=c=>c/o.q0[l-1];return t.$$set=c=>{"settings"in c&&n(5,r=c.settings),"model"in c&&n(0,o=c.model),"results"in c&&n(1,i=c.results)},t.$$.update=()=>{t.$$.dirty&32&&console.log(r),t.$$.dirty&32&&n(2,l=r?r.ncomp:1)},[o,i,l,s,u,r,f,a]}class Ir extends re{constructor(e){super(),le(this,e,jr,Pr,ee,{settings:5,model:0,results:1})}}const So="";function Hr(t){let e,n,l,r,o=t[0].toFixed(t[4])+"",i,s,u,f,a;return{c(){e=B("div"),n=B("div"),l=Q(),r=B("span"),i=x(o),s=Q(),u=B("input"),d(n,"class","range-slider svelte-5tv9oe"),He(n,"width",t[8]+"%"),d(e,"class","range-slider-container svelte-5tv9oe"),d(r,"class","range-value svelte-5tv9oe"),d(u,"type","range"),d(u,"name",t[1]),d(u,"step",t[5]),d(u,"min",t[2]),d(u,"max",t[3]),d(u,"class","svelte-5tv9oe")},m(c,m){A(c,e,m),F(e,n),t[14](n),t[15](e),A(c,l,m),A(c,r,m),F(r,i),A(c,s,m),A(c,u,m),We(u,t[0]),f||(a=[ce(e,"mousewheel",Bn(t[12])),ce(e,"mousemove",t[13]),ce(e,"mousedown",t[9]),ce(e,"mouseleave",t[10]),ce(e,"mouseup",t[11]),ce(u,"change",t[16]),ce(u,"input",t[16])],f=!0)},p(c,[m]){m&256&&He(n,"width",c[8]+"%"),m&17&&o!==(o=c[0].toFixed(c[4])+"")&&ae(i,o),m&2&&d(u,"name",c[1]),m&32&&d(u,"step",c[5]),m&4&&d(u,"min",c[2]),m&8&&d(u,"max",c[3]),m&1&&We(u,c[0])},i:X,o:X,d(c){c&&v(e),t[14](null),t[15](null),c&&v(l),c&&v(r),c&&v(s),c&&v(u),f=!1,we(a)}}}function Yr(t,e,n){let l,{id:r}=e,{value:o}=e,{min:i}=e,{max:s}=e,{decNum:u=1}=e,{step:f=+((s-i)/100).toFixed(4)}=e;if(o<i||o>s)throw"The value is outside of the provided range.";const a=kt();let c,m,g=!1;const _=E=>{const T=i+E*(s-i);return+(Math.round(T/f)*f).toFixed(4)},h=E=>{const T=c.getBoundingClientRect(),z=m.getBoundingClientRect(),W=T.x,L=z.x+z.width;return(E.clientX-W)/(L-W)},p=E=>{const T=h(E);T<0||T>1||(g=T*100>l-5&&T*100<l+5)},y=E=>{},k=E=>{g=!1;const T=h(E);T<0||T>1||n(0,o=_(T))},P=E=>{let T=o+f*E.deltaY*.5;T<i&&(T=i),T>s&&(T=s),n(0,o=+(Math.round(T/f)*f).toFixed(4))},V=E=>{if(!g)return;const T=h(E);T<0||T>1||n(0,o=_(T))};function H(E){ie[E?"unshift":"push"](()=>{c=E,n(6,c)})}function N(E){ie[E?"unshift":"push"](()=>{m=E,n(7,m)})}function S(){o=Gn(this.value),n(0,o)}return t.$$set=E=>{"id"in E&&n(1,r=E.id),"value"in E&&n(0,o=E.value),"min"in E&&n(2,i=E.min),"max"in E&&n(3,s=E.max),"decNum"in E&&n(4,u=E.decNum),"step"in E&&n(5,f=E.step)},t.$$.update=()=>{t.$$.dirty&13&&n(8,l=(o-i)/(s-i)*100),t.$$.dirty&1&&a("change",o)},[o,r,i,s,u,f,c,m,l,p,y,k,P,V,H,N,S]}class vn extends re{constructor(e){super(),le(this,e,Yr,Hr,ee,{id:1,value:0,min:2,max:3,decNum:4,step:5})}}function qr(t){let e,n,l,r,o,i,s,u;return e=new ne({props:{label:"# of PCs",$$slots:{default:[Gr]},$$scope:{ctx:t}}}),l=new ne({props:{label:"Center",$$slots:{default:[Dr]},$$scope:{ctx:t}}}),o=new ne({props:{label:"Scale",$$slots:{default:[Wr]},$$scope:{ctx:t}}}),s=new ne({props:{label:" ",$$slots:{default:[Ur]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=Q(),Y(l.$$.fragment),r=Q(),Y(o.$$.fragment),i=Q(),Y(s.$$.fragment)},m(f,a){j(e,f,a),A(f,n,a),j(l,f,a),A(f,r,a),j(o,f,a),A(f,i,a),j(s,f,a),u=!0},p(f,a){const c={};a&65556&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m={};a&65568&&(m.$$scope={dirty:a,ctx:f}),l.$set(m);const g={};a&65600&&(g.$$scope={dirty:a,ctx:f}),o.$set(g);const _={};a&65536&&(_.$$scope={dirty:a,ctx:f}),s.$set(_)},i(f){u||(w(e.$$.fragment,f),w(l.$$.fragment,f),w(o.$$.fragment,f),w(s.$$.fragment,f),u=!0)},o(f){M(e.$$.fragment,f),M(l.$$.fragment,f),M(o.$$.fragment,f),M(s.$$.fragment,f),u=!1},d(f){I(e,f),f&&v(n),I(l,f),f&&v(r),I(o,f),f&&v(i),I(s,f)}}}function Br(t){let e,n,l,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Jr,then:Kr,catch:Xr,value:14,error:15,blocks:[,,,]};return Qe(n=t[3],r),{c(){e=oe(),r.block.c()},m(o,i){A(o,e,i),r.block.m(o,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,l=!0},p(o,i){t=o,r.ctx=t,i&8&&n!==(n=t[3])&&Qe(n,r)||At(r,t,i)},i(o){l||(w(r.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const s=r.blocks[i];M(s)}l=!1},d(o){o&&v(e),r.block.d(o),r.token=null,r=null}}}function Gr(t){let e,n,l;function r(i){t[9](i)}let o={id:"ncomp",min:1,max:t[2],step:1,decNum:0};return t[4]!==void 0&&(o.value=t[4]),e=new vn({props:o}),ie.push(()=>_e(e,"value",r,t[4])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};s&4&&(u.max=i[2]),!n&&s&16&&(n=!0,u.value=i[4],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function Dr(t){let e,n,l;function r(i){t[10](i)}let o={id:"center",options:["yes","no"]};return t[5]!==void 0&&(o.value=t[5]),e=new Ge({props:o}),ie.push(()=>_e(e,"value",r,t[5])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};!n&&s&32&&(n=!0,u.value=i[5],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function Wr(t){let e,n,l;function r(i){t[11](i)}let o={id:"ncom",options:["yes","no"]};return t[6]!==void 0&&(o.value=t[6]),e=new Ge({props:o}),ie.push(()=>_e(e,"value",r,t[6])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};!n&&s&64&&(n=!0,u.value=i[6],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function Or(t){let e;return{c(){e=x("Create PCA model")},m(n,l){A(n,e,l)},d(n){n&&v(e)}}}function Ur(t){let e,n;return e=new $e({props:{$$slots:{default:[Or]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&65536&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Xr(t){let e,n;return e=new ne({props:{status:"error",$$slots:{default:[Qr]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&65544&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Qr(t){let e,n=t[15]+"",l;return{c(){e=B("p"),l=x(n)},m(r,o){A(r,e,o),F(e,l)},p(r,o){o&8&&n!==(n=r[15]+"")&&ae(l,n)},d(r){r&&v(e)}}}function Kr(t){let e,n,l=t[0]!==null&&An(t);return{c(){l&&l.c(),e=oe()},m(r,o){l&&l.m(r,o),A(r,e,o),n=!0},p(r,o){r[0]!==null?l?(l.p(r,o),o&1&&w(l,1)):(l=An(r),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(ue(),M(l,1,1,()=>{l=null}),fe())},i(r){n||(w(l),n=!0)},o(r){M(l),n=!1},d(r){l&&l.d(r),r&&v(e)}}}function An(t){let e,n;return e=new ne({props:{$$slots:{default:[Zr]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&65537&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function Zr(t){let e,n,l=t[0].ncomp+"",r,o,i,s,u;return s=new at({}),s.$on("click",t[8]),{c(){e=B("p"),n=x("Global model is computed: "),r=x(l),o=x(" PCs"),i=Q(),Y(s.$$.fragment)},m(f,a){A(f,e,a),F(e,n),F(e,r),F(e,o),A(f,i,a),j(s,f,a),u=!0},p(f,a){(!u||a&1)&&l!==(l=f[0].ncomp+"")&&ae(r,l)},i(f){u||(w(s.$$.fragment,f),u=!0)},o(f){M(s.$$.fragment,f),u=!1},d(f){f&&v(e),f&&v(i),I(s,f)}}}function Jr(t){let e,n;return e=new ne({props:{$$slots:{default:[xr]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&65536&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function xr(t){let e,n,l,r;return e=new Bt({}),{c(){Y(e.$$.fragment),n=Q(),l=B("p"),l.textContent="Computing PCA model..."},m(o,i){j(e,o,i),A(o,n,i),A(o,l,i),r=!0},p:X,i(o){r||(w(e.$$.fragment,o),r=!0)},o(o){M(e.$$.fragment,o),r=!1},d(o){I(e,o),o&&v(n),o&&v(l)}}}function $r(t){let e,n,l,r;const o=[Br,qr],i=[];function s(u,f){return u[3]?0:u[1]&&!u[0]?1:-1}return~(e=s(t))&&(n=i[e]=o[e](t)),{c(){n&&n.c(),l=oe()},m(u,f){~e&&i[e].m(u,f),A(u,l,f),r=!0},p(u,[f]){let a=e;e=s(u),e===a?~e&&i[e].p(u,f):(n&&(ue(),M(i[a],1,1,()=>{i[a]=null}),fe()),~e?(n=i[e],n?n.p(u,f):(n=i[e]=o[e](u),n.c()),w(n,1),n.m(l.parentNode,l)):n=null)},i(u){r||(w(n),r=!0)},o(u){M(n),r=!1},d(u){~e&&i[e].d(u),u&&v(l)}}}function eo(t,e,n){let l,{dataset:r=null}=e,{pcamodel:o=null}=e,i,s,u="yes",f="no";function a(y,k,P,V){return new Promise((H,N)=>{setTimeout(()=>{H(fl(y,k,P,V))},100)})}async function c(y,k,P,V){n(3,i=a(y,k,P,V).then(H=>{n(0,o=H)}))}function m(y){c(r.values,s,u==="yes",f==="yes")}function g(){n(3,i=null),n(0,o=null)}function _(y){s=y,n(4,s),n(2,l),n(1,r)}function h(y){u=y,n(5,u)}function p(y){f=y,n(6,f)}return t.$$set=y=>{"dataset"in y&&n(1,r=y.dataset),"pcamodel"in y&&n(0,o=y.pcamodel)},t.$$.update=()=>{t.$$.dirty&2&&r===null&&g(),t.$$.dirty&2&&n(2,l=r?Math.min(D(r.values)-1,U(r.values)):null),t.$$.dirty&4&&n(4,s=l?Math.min(l,20):null)},[o,r,l,i,s,u,f,m,g,_,h,p]}class to extends re{constructor(e){super(),le(this,e,eo,$r,ee,{dataset:1,pcamodel:0})}}const Eo="";function no(t){let e;return{c(){e=B("p"),e.textContent="Distance plot",d(e,"class","title")},m(n,l){A(n,e,l)},p:X,d(n){n&&v(e)}}}function lo(t){let e,n,l;function r(i){t[4](i)}let o={id:"ncomp",min:1,max:t[1],step:1,decNum:0};return t[0]!==void 0&&(o.value=t[0]),e=new vn({props:o}),ie.push(()=>_e(e,"value",r,t[0])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};s&2&&(u.max=i[1]),!n&&s&1&&(n=!0,u.value=i[0],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function ro(t){let e,n,l,r,o;return n=new ne({props:{label:"",$$slots:{default:[no]},$$scope:{ctx:t}}}),r=new ne({props:{label:"# of PCs",$$slots:{default:[lo]},$$scope:{ctx:t}}}),{c(){e=B("div"),Y(n.$$.fragment),l=Q(),Y(r.$$.fragment),d(e,"class","control-block svelte-1o48kay")},m(i,s){A(i,e,s),j(n,e,null),F(e,l),j(r,e,null),o=!0},p(i,[s]){const u={};s&32&&(u.$$scope={dirty:s,ctx:i}),n.$set(u);const f={};s&35&&(f.$$scope={dirty:s,ctx:i}),r.$set(f)},i(i){o||(w(n.$$.fragment,i),w(r.$$.fragment,i),o=!0)},o(i){M(n.$$.fragment,i),M(r.$$.fragment,i),o=!1},d(i){i&&v(e),I(n),I(r)}}}function oo(t,e,n){let l,{settings:r}=e,{model:o}=e,i=1;function s(u){i=u,n(0,i)}return t.$$set=u=>{"settings"in u&&n(2,r=u.settings),"model"in u&&n(3,o=u.model)},t.$$.update=()=>{t.$$.dirty&8&&n(1,l=o?o.ncomp:1),t.$$.dirty&1&&n(2,r={ncomp:i})},[i,l,r,o,s]}class io extends re{constructor(e){super(),le(this,e,oo,ro,ee,{settings:2,model:3})}}const No="";function Mn(t){let e,n,l;function r(i){t[8](i)}let o={model:t[2]};return t[3]!==void 0&&(o.settings=t[3]),e=new io({props:o}),ie.push(()=>_e(e,"settings",r,t[3])),{c(){Y(e.$$.fragment)},m(i,s){j(e,i,s),l=!0},p(i,s){const u={};s&4&&(u.model=i[2]),!n&&s&8&&(n=!0,u.settings=i[3],de(()=>n=!1)),e.$set(u)},i(i){l||(w(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){I(e,i)}}}function Cn(t){let e;return{c(){e=B("hgroup"),e.innerHTML=`<h1 class="svelte-1yi92du">Procrustes cross-validation</h1> 
         <p class="svelte-1yi92du">create a validation set based on your calibration data.</p>`,d(e,"class","svelte-1yi92du")},m(n,l){A(n,e,l)},d(n){n&&v(e)}}}function so(t){let e,n,l=t[2]===null&&Ln(),r=t[2]!==null&&t[1]===null&&Sn();return{c(){l&&l.c(),e=Q(),r&&r.c(),n=oe()},m(o,i){l&&l.m(o,i),A(o,e,i),r&&r.m(o,i),A(o,n,i)},p(o,i){o[2]===null?l||(l=Ln(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),o[2]!==null&&o[1]===null?r||(r=Sn(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(o){l&&l.d(o),o&&v(e),r&&r.d(o),o&&v(n)}}}function uo(t){let e;return{c(){e=B("p"),e.innerHTML=`<strong>Step 1.</strong><br/>
         Load your calibration set from a CSV file. The file should contain numeric values delimited
         by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns \u2014 to variables. First row can content variable names (header) \u2014\xA0app will detect this automatically.`,d(e,"class","svelte-1yi92du")},m(n,l){A(n,e,l)},p:X,d(n){n&&v(e)}}}function Ln(t){let e;return{c(){e=B("p"),e.innerHTML=`<strong>Step 2</strong><br/>
            Next step is to create a global PCA model for the training set. Use as many components as you need, there is no overfitting in PCV.`,d(e,"class","svelte-1yi92du")},m(n,l){A(n,e,l)},d(n){n&&v(e)}}}function Sn(t){let e;return{c(){e=B("p"),e.innerHTML=`<strong>Step 3</strong><br/>
            Now set necessary parameters for Procrustes cross-validation method and click button to compute the PV-set. It is recommended to use fewer number of segments (e.g. 3 or 4). The more segment you use the more time it will take to compute the PV-set.`,d(e,"class","svelte-1yi92du")},m(n,l){A(n,e,l)},d(n){n&&v(e)}}}function En(t){let e=t[4],n,l,r=Nn(t);return{c(){r.c(),n=oe()},m(o,i){r.m(o,i),A(o,n,i),l=!0},p(o,i){i&16&&ee(e,e=o[4])?(ue(),M(r,1,1,X),fe(),r=Nn(o),r.c(),w(r,1),r.m(n.parentNode,n)):r.p(o,i)},i(o){l||(w(r),l=!0)},o(o){M(r),l=!1},d(o){o&&v(n),r.d(o)}}}function Nn(t){let e,n;return e=new Ir({props:{model:t[2],results:t[4],settings:t[3]}}),{c(){Y(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const o={};r&4&&(o.model=l[2]),r&16&&(o.results=l[4]),r&8&&(o.settings=l[3]),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){I(e,l)}}}function fo(t){let e,n,l,r,o,i,s,u,f,a,c,m,g,_,h,p,y,k,P;function V(b){t[5](b)}let H={};t[0]!==void 0&&(H.dataset=t[0]),r=new zl({props:H}),ie.push(()=>_e(r,"dataset",V,t[0]));function N(b){t[6](b)}let S={dataset:t[0]};t[2]!==void 0&&(S.pcamodel=t[2]),u=new to({props:S}),ie.push(()=>_e(u,"pcamodel",N,t[2]));function E(b){t[7](b)}let T={dataset:t[0],pcamodel:t[2]};t[1]!==void 0&&(T.pvset=t[1]),m=new er({props:T}),ie.push(()=>_e(m,"pvset",E,t[1]));let z=t[2]&&t[1]&&Mn(t),W=t[1]===null&&Cn();function L(b,O){return b[0]===null?uo:so}let R=L(t),Z=R(t),G=t[1]&&t[4]&&En(t);return{c(){e=B("div"),n=B("div"),l=B("div"),Y(r.$$.fragment),i=Q(),s=B("div"),Y(u.$$.fragment),a=Q(),c=B("div"),Y(m.$$.fragment),_=Q(),z&&z.c(),h=Q(),p=B("div"),W&&W.c(),y=Q(),Z.c(),k=Q(),G&&G.c(),d(l,"class","data-loader"),d(s,"class","pcv-calculator"),d(c,"class","pcv-calculator"),d(n,"class","app-controls svelte-1yi92du"),d(p,"class","app-content svelte-1yi92du"),d(e,"class","app-container svelte-1yi92du")},m(b,O){A(b,e,O),F(e,n),F(n,l),j(r,l,null),F(n,i),F(n,s),j(u,s,null),F(n,a),F(n,c),j(m,c,null),F(n,_),z&&z.m(n,null),F(e,h),F(e,p),W&&W.m(p,null),F(p,y),Z.m(p,null),F(p,k),G&&G.m(p,null),P=!0},p(b,[O]){const Ce={};!o&&O&1&&(o=!0,Ce.dataset=b[0],de(()=>o=!1)),r.$set(Ce);const De={};O&1&&(De.dataset=b[0]),!f&&O&4&&(f=!0,De.pcamodel=b[2],de(()=>f=!1)),u.$set(De);const je={};O&1&&(je.dataset=b[0]),O&4&&(je.pcamodel=b[2]),!g&&O&2&&(g=!0,je.pvset=b[1],de(()=>g=!1)),m.$set(je),b[2]&&b[1]?z?(z.p(b,O),O&6&&w(z,1)):(z=Mn(b),z.c(),w(z,1),z.m(n,null)):z&&(ue(),M(z,1,1,()=>{z=null}),fe()),b[1]===null?W||(W=Cn(),W.c(),W.m(p,y)):W&&(W.d(1),W=null),R===(R=L(b))&&Z?Z.p(b,O):(Z.d(1),Z=R(b),Z&&(Z.c(),Z.m(p,k))),b[1]&&b[4]?G?(G.p(b,O),O&18&&w(G,1)):(G=En(b),G.c(),w(G,1),G.m(p,null)):G&&(ue(),M(G,1,1,()=>{G=null}),fe())},i(b){P||(w(r.$$.fragment,b),w(u.$$.fragment,b),w(m.$$.fragment,b),w(z),w(G),P=!0)},o(b){M(r.$$.fragment,b),M(u.$$.fragment,b),M(m.$$.fragment,b),M(z),M(G),P=!1},d(b){b&&v(e),I(r),I(u),I(m),z&&z.d(),W&&W.d(),Z.d(),G&&G.d()}}}function co(t,e,n){let l,r=null,o=null,i=null,s=null;function u(m){r=m,n(0,r)}function f(m){i=m,n(2,i)}function a(m){o=m,n(1,o)}function c(m){s=m,n(3,s),n(1,o)}return t.$$.update=()=>{t.$$.dirty&7&&n(4,l=r!==null&&o!==null&&i!==null?[Tt(i,r.values,"cal"),Tt(i,o,"pv")]:null),t.$$.dirty&2&&(o||n(3,s=null))},[r,o,i,s,l,u,f,a,c]}class ao extends re{constructor(e){super(),le(this,e,co,fo,ee,{})}}new ao({target:document.getElementById("app-container")})})();
//# sourceMappingURL=pcv.js.map
