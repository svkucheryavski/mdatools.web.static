var $v=Object.defineProperty;var Da=De=>{throw TypeError(De)};var e1=(De,Ae,et)=>Ae in De?$v(De,Ae,{enumerable:!0,configurable:!0,writable:!0,value:et}):De[Ae]=et;var Lr=(De,Ae,et)=>e1(De,typeof Ae!="symbol"?Ae+"":Ae,et),fl=(De,Ae,et)=>Ae.has(De)||Da("Cannot "+et);var ir=(De,Ae,et)=>(fl(De,Ae,"read from private field"),et?et.call(De):Ae.get(De)),bn=(De,Ae,et)=>Ae.has(De)?Da("Cannot add the same private member more than once"):Ae instanceof WeakSet?Ae.add(De):Ae.set(De,et),dl=(De,Ae,et,Rr)=>(fl(De,Ae,"write to private field"),Rr?Rr.call(De,et):Ae.set(De,et),et),za=(De,Ae,et)=>(fl(De,Ae,"access private method"),et);(function(){"use strict";var wr,Zr,hn,Qn,Ya;var De=document.createElement("style");De.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-h4yni9{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-h4yni9:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-h4yni9:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-h4yni9:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-h4yni9{display:none}.control-element.error.svelte-h4yni9{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-h4yni9{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-h4yni9>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-h4yni9>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-h4yni9>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-h4yni9>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-h4yni9 .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-h4yni9 .range-value_left,.control-element.svelte-h4yni9 .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-h4yni9 .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-h4yni9 .button-cancel:hover{background-color:var(--warning-color, crimson)}.control-element.svelte-h4yni9 .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-h4yni9 .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-h4yni9 .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-h4yni9 .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-h4yni9 .textinput>input:active::placeholder,.control-element.svelte-h4yni9 .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-h4yni9 .textinput>input:focus,.control-element.svelte-h4yni9 .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .textinput.error>input,.control-element.svelte-h4yni9 .textinput.error>input:focus,.control-element.svelte-h4yni9 .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-h4yni9 .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-h4yni9 .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-h4yni9 .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1xneg44{width:100%;border-collapse:collapse}tr.svelte-1xneg44{width:100%}th.svelte-1xneg44{border-bottom:1px solid #a0a0a0}th.svelte-1xneg44,td.svelte-1xneg44{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.selected-buttons.svelte-112cmye>.control-element{background:#fff0c8}.selected-buttons.svelte-112cmye>.control-element button:first-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-right:5px}.selected-buttons.svelte-112cmye>.control-element button:first-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-container.svelte-112cmye{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-112cmye{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-112cmye{padding:0 .25em 0 .5em}.plot-selector.svelte-112cmye{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-112cmye:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-112cmye{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-112cmye{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-container.svelte-112cmye{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-container.svelte-112cmye{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-container.svelte-112cmye{grid-template-columns:1fr 400px}}.app-container.svelte-1dk0fsp{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1dk0fsp{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1dk0fsp{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1dk0fsp>div:where(.svelte-1dk0fsp){border-radius:.25rem}.app-controls.svelte-1dk0fsp>.result-stats:where(.svelte-1dk0fsp){background:#e8e8e8}.help-text.svelte-1dk0fsp{margin-top:.25rem}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp),.help-text.svelte-1dk0fsp>div:where(.svelte-1dk0fsp){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp){border-collapse:collapse}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) thead:where(.svelte-1dk0fsp) tr:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp){font-weight:700;background:#f8f4e0}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) tbody:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1dk0fsp{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1dk0fsp{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1dk0fsp{grid-template-columns:min(320px,30%) 1fr}}.model-info.svelte-1l40o0h{line-height:1.5em}.model-info.svelte-1l40o0h>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-1l40o0h>.file-name:where(.svelte-1l40o0h){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-1mqkfgh{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mqkfgh{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mqkfgh{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mqkfgh>div:where(.svelte-1mqkfgh){border-radius:.25rem}.app-controls.svelte-1mqkfgh>.result-stats:where(.svelte-1mqkfgh){background:#e8e8e8}.help-text.svelte-1mqkfgh{margin-top:.25rem}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mqkfgh{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1mqkfgh{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1mqkfgh{grid-template-columns:min(320px,30%) 1fr}}.page.svelte-1946064{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1946064{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1946064{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1946064{width:5rem;margin:.25rem;grid-area:logo}.header-group.svelte-1946064>h1:where(.svelte-1946064){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1946064>p:where(.svelte-1946064){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1946064{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1946064>div:where(.svelte-1946064){height:100%}footer.svelte-1946064{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1946064 .session:where(.svelte-1946064){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1946064 .session:where(.svelte-1946064) input:where(.svelte-1946064){display:none}footer.svelte-1946064 .session:where(.svelte-1946064) .session-message:where(.svelte-1946064){color:silver;padding-right:.5em}footer.svelte-1946064 .session:where(.svelte-1946064):hover .session-message:where(.svelte-1946064){color:#f8ebc5}footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .clear-button:where(.svelte-1946064),footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .upload-button:where(.svelte-1946064),footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .download-button:where(.svelte-1946064){display:none}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064),footer.svelte-1946064 .session:where(.svelte-1946064) .upload-button:where(.svelte-1946064),footer.svelte-1946064 .session:where(.svelte-1946064) .download-button:where(.svelte-1946064){font-size:1em;font-weight:700;background:#5e6062;color:silver;box-shadow:none;padding:0 .5em;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064){margin-left:.5em}footer.svelte-1946064 .session:where(.svelte-1946064) .upload-button:where(.svelte-1946064):hover,footer.svelte-1946064 .session:where(.svelte-1946064) .download-button:where(.svelte-1946064):hover{background-color:#f8ebc5;color:#4e5052}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064):hover{background-color:#f96666;color:#4e5052}footer.svelte-1946064 .info:where(.svelte-1946064){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1946064 .info:where(.svelte-1946064) .button-info:where(.svelte-1946064){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1946064 p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1946064 span,footer.svelte-1946064 a{color:#f8ebc5}.hidden.svelte-1946064{display:none}.nav.svelte-1946064,.nav.svelte-1946064 :where(.svelte-1946064){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1946064{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1946064{list-style:none;margin:0 2px;border-bottom:5px solid transparent}.nav-item.svelte-1946064>button:where(.svelte-1946064){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1946064>button:where(.svelte-1946064)>span{color:#888}.nav-item.selected.svelte-1946064{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1946064>button:where(.svelte-1946064){font-weight:700;cursor:default}.nav-item.selected.svelte-1946064:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1946064>header:where(.svelte-1946064){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1946064>footer:where(.svelte-1946064){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1946064{width:900px}.info-container.svelte-1946064>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1946064>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1946064>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1946064>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1946064>ul{margin:0}.info-container.svelte-1946064>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1946064>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1946064 a{color:#ae8032}.info-container.svelte-1946064 a:hover{color:#eb9707}.info-container.svelte-1946064:last-child{padding-bottom:2rem}
/*$vite$:1*/`,document.head.appendChild(De);var Ae=typeof document<"u"?document.currentScript:null;const et=!1;var Rr=Array.isArray,Wa=Array.prototype.indexOf,lo=Array.from,Ua=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,vl=Object.getOwnPropertyDescriptors,Ha=Object.prototype,Ga=Array.prototype,so=Object.getPrototypeOf;function jr(t){return typeof t=="function"}const at=()=>{};function Ka(t){return typeof(t==null?void 0:t.then)=="function"}function Xa(t){return t()}function ao(t){for(var e=0;e<t.length;e++)t[e]()}const Vt=2,hl=4,wn=8,_n=16,er=32,$r=64,yn=128,Lt=256,xn=512,mt=1024,tr=2048,Fr=4096,rr=8192,kn=16384,ml=32768,qr=65536,Qa=1<<17,Ja=1<<19,gl=1<<20,ur=Symbol("$state"),pl=Symbol("legacy props"),Za=Symbol("");function bl(t){return t===this.v}function wl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function $a(t,e){return t!==e}function io(t){return!wl(t,this.v)}function ei(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ti(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ri(t){throw new Error("https://svelte.dev/e/effect_orphan")}function ni(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function oi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function li(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function si(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ai(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function ii(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Or=!1,ci=!1;function ui(){Or=!0}const co=1,uo=2,_l=4,fi=8,di=16,vi=1,hi=2,mi=4,gi=8,pi=16,bi=4,yl=1,wi=2,ct=Symbol();function fo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let je=null;function En(t){je=t}function St(t){return xl().get(t)}function _i(t,e){return xl().set(t,e),e}function ge(t,e=!1,r){je={p:je,c:null,e:null,m:!1,s:t,x:null,l:null},Or&&!e&&(je.l={s:null,u:null,r1:[],r2:gt(!1)})}function pe(t){const e=je;if(e!==null){const c=e.e;if(c!==null){var r=qe,o=Ve;e.e=null;try{for(var s=0;s<c.length;s++){var a=c[s];Ft(a.effect),jt(a.reaction),en(a.fn)}}finally{Ft(r),jt(o)}}je=e.p,e.m=!0}return{}}function _r(){return!Or||je!==null&&je.l===null}function xl(t){return je===null&&fo(),je.c??(je.c=new Map(yi(je)||void 0))}function yi(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}function gt(t,e){var r={f:0,v:t,reactions:null,equals:bl,rv:0,wv:0};return r}function le(t){return xi(gt(t))}function An(t,e=!1){var o;const r=gt(t);return e||(r.equals=io),Or&&je!==null&&je.l!==null&&((o=je.l).s??(o.s=[])).push(r),r}function xi(t){return Ve!==null&&!Xt&&Ve.f&Vt&&(Qt===null?Ri([t]):Qt.push(t)),t}function V(t,e){return Ve!==null&&!Xt&&_r()&&Ve.f&(Vt|_n)&&(Qt===null||!Qt.includes(t))&&ii(),Br(t,e)}function Br(t,e){return t.equals(e)||(t.v,t.v=e,t.wv=zl(),kl(t,tr),_r()&&qe!==null&&qe.f&mt&&!(qe.f&(er|$r))&&(or===null?ji([t]):or.push(t))),e}function kl(t,e){var r=t.reactions;if(r!==null)for(var o=_r(),s=r.length,a=0;a<s;a++){var c=r[a],d=c.f;d&tr||!o&&c===qe||(Jt(c,e),d&(mt|Lt)&&(d&Vt?kl(c,Fr):Rn(c)))}}let vo=!1;function ee(t,e=null,r){if(typeof t!="object"||t===null||ur in t)return t;const o=so(t);if(o!==Ha&&o!==Ga)return t;var s=new Map,a=Rr(t),c=gt(0);a&&s.set("length",gt(t.length));var d;return new Proxy(t,{defineProperty(u,f,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&li();var h=s.get(f);return h===void 0?(h=gt(v.value),s.set(f,h)):V(h,ee(v.value,d)),!0},deleteProperty(u,f){var v=s.get(f);if(v===void 0)f in u&&s.set(f,gt(ct));else{if(a&&typeof f=="string"){var h=s.get("length"),m=Number(f);Number.isInteger(m)&&m<h.v&&V(h,m)}V(v,ct),El(c)}return!0},get(u,f,v){var b;if(f===ur)return t;var h=s.get(f),m=f in u;if(h===void 0&&(!m||(b=cr(u,f))!=null&&b.writable)&&(h=gt(ee(m?u[f]:ct,d)),s.set(f,h)),h!==void 0){var g=l(h);return g===ct?void 0:g}return Reflect.get(u,f,v)},getOwnPropertyDescriptor(u,f){var v=Reflect.getOwnPropertyDescriptor(u,f);if(v&&"value"in v){var h=s.get(f);h&&(v.value=l(h))}else if(v===void 0){var m=s.get(f),g=m==null?void 0:m.v;if(m!==void 0&&g!==ct)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(u,f){var g;if(f===ur)return!0;var v=s.get(f),h=v!==void 0&&v.v!==ct||Reflect.has(u,f);if(v!==void 0||qe!==null&&(!h||(g=cr(u,f))!=null&&g.writable)){v===void 0&&(v=gt(h?ee(u[f],d):ct),s.set(f,v));var m=l(v);if(m===ct)return!1}return h},set(u,f,v,h){var C;var m=s.get(f),g=f in u;if(a&&f==="length")for(var b=v;b<m.v;b+=1){var p=s.get(b+"");p!==void 0?V(p,ct):b in u&&(p=gt(ct),s.set(b+"",p))}m===void 0?(!g||(C=cr(u,f))!=null&&C.writable)&&(m=gt(void 0),V(m,ee(v,d)),s.set(f,m)):(g=m.v!==ct,V(m,ee(v,d)));var w=Reflect.getOwnPropertyDescriptor(u,f);if(w!=null&&w.set&&w.set.call(h,v),!g){if(a&&typeof f=="string"){var _=s.get("length"),k=Number(f);Number.isInteger(k)&&k>=_.v&&V(_,k+1)}El(c)}return!0},ownKeys(u){l(c);var f=Reflect.ownKeys(u).filter(m=>{var g=s.get(m);return g===void 0||g.v!==ct});for(var[v,h]of s)h.v!==ct&&!(v in u)&&f.push(v);return f},setPrototypeOf(){si()}})}function El(t,e=1){V(t,t.v+e)}var Cn,Al,Cl,Ml;function ki(){if(Cn===void 0){Cn=window,Al=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype;Cl=cr(e,"firstChild").get,Ml=cr(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function ho(t=""){return document.createTextNode(t)}function Nt(t){return Cl.call(t)}function Mn(t){return Ml.call(t)}function O(t,e){return Nt(t)}function Q(t,e){{var r=Nt(t);return r instanceof Comment&&r.data===""?Mn(r):r}}function q(t,e=1,r=!1){let o=t;for(;e--;)o=Mn(o);return o}function Ei(t){t.textContent=""}function E(t){var e=Vt|tr,r=Ve!==null&&Ve.f&Vt?Ve:null;return qe===null||r!==null&&r.f&Lt?e|=Lt:qe.f|=gl,{ctx:je,deps:null,effects:null,equals:bl,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??qe}}function Sl(t){const e=E(t);return e.equals=io,e}function Nl(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Kt(e[r])}}function Ai(t){for(var e=t.parent;e!==null;){if(!(e.f&Vt))return e;e=e.parent}return null}function Ci(t){var e,r=qe;Ft(Ai(t));try{Nl(t),e=Wl(t)}finally{Ft(r)}return e}function Tl(t){var e=Ci(t),r=(dr||t.f&Lt)&&t.deps!==null?Fr:mt;Jt(t,r),t.equals(e)||(t.v=e,t.wv=zl())}function Il(t){qe===null&&Ve===null&&ri(),Ve!==null&&Ve.f&Lt&&qe===null&&ti(),bo&&ei()}function Mi(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Vr(t,e,r,o=!0){var s=(t&$r)!==0,a=qe,c={ctx:je,deps:null,nodes_start:null,nodes_end:null,f:t|tr,first:null,fn:e,last:null,next:null,parent:s?null:a,prev:null,teardown:null,transitions:null,wv:0};if(r){var d=Dr;try{Bl(!0),wo(c),c.f|=ml}catch(v){throw Kt(c),v}finally{Bl(d)}}else e!==null&&Rn(c);var u=r&&c.deps===null&&c.first===null&&c.nodes_start===null&&c.teardown===null&&(c.f&(gl|yn))===0;if(!u&&!s&&o&&(a!==null&&Mi(c,a),Ve!==null&&Ve.f&Vt)){var f=Ve;(f.effects??(f.effects=[])).push(c)}return c}function Si(t){const e=Vr(wn,null,!1);return Jt(e,mt),e.teardown=t,e}function ze(t){Il();var e=qe!==null&&(qe.f&er)!==0&&je!==null&&!je.m;if(e){var r=je;(r.e??(r.e=[])).push({fn:t,effect:qe,reaction:Ve})}else{var o=en(t);return o}}function Ni(t){return Il(),mo(t)}function Ti(t){const e=Vr($r,t,!0);return(r={})=>new Promise(o=>{r.outro?nr(e,()=>{Kt(e),o(void 0)}):(Kt(e),o(void 0))})}function en(t){return Vr(hl,t,!1)}function mo(t){return Vr(wn,t,!0)}function re(t,e=[],r=E){const o=e.map(r);return fr(()=>t(...o.map(l)))}function fr(t,e=0){return Vr(wn|_n|e,t,!0)}function Rt(t,e=!0){return Vr(wn|er,t,!0,e)}function Pl(t){var e=t.teardown;if(e!==null){const r=bo,o=Ve;Vl(!0),jt(null);try{e.call(null)}finally{Vl(r),jt(o)}}}function Ll(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var o=r.next;Kt(r,e),r=o}}function Ii(t){for(var e=t.first;e!==null;){var r=e.next;e.f&er||Kt(e),e=r}}function Kt(t,e=!0){var r=!1;if((e||t.f&Ja)&&t.nodes_start!==null){for(var o=t.nodes_start,s=t.nodes_end;o!==null;){var a=o===s?null:Mn(o);o.remove(),o=a}r=!0}Ll(t,e&&!r),Ln(t,0),Jt(t,kn);var c=t.transitions;if(c!==null)for(const u of c)u.stop();Pl(t);var d=t.parent;d!==null&&d.first!==null&&Rl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Rl(t){var e=t.parent,r=t.prev,o=t.next;r!==null&&(r.next=o),o!==null&&(o.prev=r),e!==null&&(e.first===t&&(e.first=o),e.last===t&&(e.last=r))}function nr(t,e){var r=[];go(t,r,!0),jl(r,()=>{Kt(t),e&&e()})}function jl(t,e){var r=t.length;if(r>0){var o=()=>--r||e();for(var s of t)s.out(o)}else e()}function go(t,e,r){if(!(t.f&rr)){if(t.f^=rr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var o=t.first;o!==null;){var s=o.next,a=(o.f&qr)!==0||(o.f&er)!==0;go(o,e,a?r:!1),o=s}}}function yr(t){Fl(t,!0)}function Fl(t,e){if(t.f&rr){t.f^=rr,t.f&mt||(t.f^=mt),on(t)&&(Jt(t,tr),Rn(t));for(var r=t.first;r!==null;){var o=r.next,s=(r.f&qr)!==0||(r.f&er)!==0;Fl(r,s?e:!1),r=o}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let Sn=!1,po=[];function ql(){Sn=!1;const t=po.slice();po=[],ao(t)}function tn(t){Sn||(Sn=!0,queueMicrotask(ql)),po.push(t)}function Pi(){Sn&&ql()}const Ol=0,Li=1;let Nn=!1,Tn=Ol,rn=!1,nn=null,Dr=!1,bo=!1;function Bl(t){Dr=t}function Vl(t){bo=t}let xr=[],zr=0,t1=[],Ve=null,Xt=!1;function jt(t){Ve=t}let qe=null;function Ft(t){qe=t}let Qt=null;function Ri(t){Qt=t}let pt=null,Tt=0,or=null;function ji(t){or=t}let Dl=1,In=0,dr=!1;function zl(){return++Dl}function on(t){var h;var e=t.f;if(e&tr)return!0;if(e&Fr){var r=t.deps,o=(e&Lt)!==0;if(r!==null){var s,a,c=(e&xn)!==0,d=o&&qe!==null&&!dr,u=r.length;if(c||d){var f=t,v=f.parent;for(s=0;s<u;s++)a=r[s],(c||!((h=a==null?void 0:a.reactions)!=null&&h.includes(f)))&&(a.reactions??(a.reactions=[])).push(f);c&&(f.f^=xn),d&&v!==null&&!(v.f&Lt)&&(f.f^=Lt)}for(s=0;s<u;s++)if(a=r[s],on(a)&&Tl(a),a.wv>t.wv)return!0}(!o||qe!==null&&!dr)&&Jt(t,mt)}return!1}function Fi(t,e){for(var r=e;r!==null;){if(r.f&yn)try{r.fn(t);return}catch{r.f^=yn}r=r.parent}throw Nn=!1,t}function qi(t){return(t.f&kn)===0&&(t.parent===null||(t.parent.f&yn)===0)}function Pn(t,e,r,o){if(Nn){if(r===null&&(Nn=!1),qi(e))throw t;return}r!==null&&(Nn=!0);{Fi(t,e);return}}function Yl(t,e,r=!0){var o=t.reactions;if(o!==null)for(var s=0;s<o.length;s++){var a=o[s];a.f&Vt?Yl(a,e,!1):e===a&&(r?Jt(a,tr):a.f&mt&&Jt(a,Fr),Rn(a))}}function Wl(t){var g;var e=pt,r=Tt,o=or,s=Ve,a=dr,c=Qt,d=je,u=Xt,f=t.f;pt=null,Tt=0,or=null,Ve=f&(er|$r)?null:t,dr=(f&Lt)!==0&&(!Dr||s===null||u),Qt=null,En(t.ctx),Xt=!1,In++;try{var v=(0,t.fn)(),h=t.deps;if(pt!==null){var m;if(Ln(t,Tt),h!==null&&Tt>0)for(h.length=Tt+pt.length,m=0;m<pt.length;m++)h[Tt+m]=pt[m];else t.deps=h=pt;if(!dr)for(m=Tt;m<h.length;m++)((g=h[m]).reactions??(g.reactions=[])).push(t)}else h!==null&&Tt<h.length&&(Ln(t,Tt),h.length=Tt);if(_r()&&or!==null&&!Xt&&h!==null&&!(t.f&(Vt|Fr|tr)))for(m=0;m<or.length;m++)Yl(or[m],t);return s!==null&&In++,v}finally{pt=e,Tt=r,or=o,Ve=s,dr=a,Qt=c,En(d),Xt=u}}function Oi(t,e){let r=e.reactions;if(r!==null){var o=Wa.call(r,t);if(o!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[o]=r[s],r.pop())}}r===null&&e.f&Vt&&(pt===null||!pt.includes(e))&&(Jt(e,Fr),e.f&(Lt|xn)||(e.f^=xn),Nl(e),Ln(e,0))}function Ln(t,e){var r=t.deps;if(r!==null)for(var o=e;o<r.length;o++)Oi(t,r[o])}function wo(t){var e=t.f;if(!(e&kn)){Jt(t,mt);var r=qe,o=je;qe=t;try{e&_n?Ii(t):Ll(t),Pl(t);var s=Wl(t);t.teardown=typeof s=="function"?s:null,t.wv=Dl;var a=t.deps,c;et&&ci&&t.f&tr}catch(d){Pn(d,t,r,o||t.ctx)}finally{qe=r}}}function Ul(){if(zr>1e3){zr=0;try{ni()}catch(t){if(nn!==null)Pn(t,nn,null);else throw t}}zr++}function Hl(t){var e=t.length;if(e!==0){Ul();var r=Dr;Dr=!0;try{for(var o=0;o<e;o++){var s=t[o];s.f&mt||(s.f^=mt);var a=Di(s);Bi(a)}}finally{Dr=r}}}function Bi(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var o=t[r];if(!(o.f&(kn|rr)))try{on(o)&&(wo(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null?Rl(o):o.fn=null))}catch(s){Pn(s,o,null,o.ctx)}}}function Vi(){if(rn=!1,zr>1001)return;const t=xr;xr=[],Hl(t),rn||(zr=0,nn=null)}function Rn(t){Tn===Ol&&(rn||(rn=!0,queueMicrotask(Vi))),nn=t;for(var e=t;e.parent!==null;){e=e.parent;var r=e.f;if(r&($r|er)){if(!(r&mt))return;e.f^=mt}}xr.push(e)}function Di(t){var e=[],r=t.first;e:for(;r!==null;){var o=r.f,s=(o&er)!==0,a=s&&(o&mt)!==0,c=r.next;if(!a&&!(o&rr)){if(o&hl)e.push(r);else if(s)r.f^=mt;else{var d=Ve;try{Ve=r,on(r)&&wo(r)}catch(v){Pn(v,r,null,r.ctx)}finally{Ve=d}}var u=r.first;if(u!==null){r=u;continue}}if(c===null){let v=r.parent;for(;v!==null;){if(t===v)break e;var f=v.next;if(f!==null){r=f;continue e}v=v.parent}}r=c}return e}function Gl(t){var e=Tn,r=xr;try{Ul();const s=[];Tn=Li,xr=s,rn=!1,Hl(r);var o=t==null?void 0:t();return Pi(),(xr.length>0||s.length>0)&&Gl(),zr=0,nn=null,o}finally{Tn=e,xr=r}}function l(t){var e=t.f,r=(e&Vt)!==0;if(Ve!==null&&!Xt){Qt!==null&&Qt.includes(t)&&ai();var o=Ve.deps;t.rv<In&&(t.rv=In,pt===null&&o!==null&&o[Tt]===t?Tt++:pt===null?pt=[t]:(!dr||!pt.includes(t))&&pt.push(t))}else if(r&&t.deps===null&&t.effects===null){var s=t,a=s.parent;a!==null&&!(a.f&Lt)&&(s.f^=Lt)}return r&&(s=t,on(s)&&Tl(s)),t.v}function lr(t){var e=Xt;try{return Xt=!0,t()}finally{Xt=e}}const zi=-7169;function Jt(t,e){t.f=t.f&zi|e}function Yi(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ur in t)_o(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&ur in r&&_o(r)}}}function _o(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let o in t)try{_o(t[o],e)}catch{}const r=so(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const o=vl(r);for(let s in o){const a=o[s].get;if(a)try{a.call(t)}catch{}}}}}const Wi=["touchstart","touchmove"];function Ui(t){return Wi.includes(t)}let Kl=!1;function Hi(){Kl||(Kl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function yo(t){var e=Ve,r=qe;jt(null),Ft(null);try{return t()}finally{jt(e),Ft(r)}}function Gi(t,e,r,o=r){t.addEventListener(e,()=>yo(r));const s=t.__on_r;s?t.__on_r=()=>{s(),o(!0)}:t.__on_r=()=>o(!0),Hi()}const Xl=new Set,xo=new Set;function Ki(t,e,r,o={}){function s(a){if(o.capture||ln.call(e,a),!a.cancelBubble)return yo(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?tn(()=>{e.addEventListener(t,s,o)}):e.addEventListener(t,s,o),s}function vr(t,e,r,o,s){var a={capture:o,passive:s},c=Ki(t,e,r,a);(e===document.body||e===window||e===document)&&Si(()=>{e.removeEventListener(t,c,a)})}function Ze(t){for(var e=0;e<t.length;e++)Xl.add(t[e]);for(var r of xo)r(t)}function ln(t){var k;var e=this,r=e.ownerDocument,o=t.type,s=((k=t.composedPath)==null?void 0:k.call(t))||[],a=s[0]||t.target,c=0,d=t.__root;if(d){var u=s.indexOf(d);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var f=s.indexOf(e);if(f===-1)return;u<=f&&(c=u)}if(a=s[c]||t.target,a!==e){Ua(t,"currentTarget",{configurable:!0,get(){return a||r}});var v=Ve,h=qe;jt(null),Ft(null);try{for(var m,g=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var p=a["__"+o];if(p!==void 0&&!a.disabled)if(Rr(p)){var[w,..._]=p;w.apply(a,[t,..._])}else p.call(a,t)}catch(C){m?g.push(C):m=C}if(t.cancelBubble||b===e||b===null)break;a=b}if(m){for(let C of g)queueMicrotask(()=>{throw C});throw m}}finally{t.__root=e,delete t.currentTarget,jt(v),Ft(h)}}}function ko(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Yr(t,e){var r=qe;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function J(t,e){var r=(e&yl)!==0,o=(e&wi)!==0,s,a=!t.startsWith("<!>");return()=>{s===void 0&&(s=ko(a?t:"<!>"+t),r||(s=Nt(s)));var c=o||Al?document.importNode(s,!0):s.cloneNode(!0);if(r){var d=Nt(c),u=c.lastChild;Yr(d,u)}else Yr(c,c);return c}}function ve(t,e,r="svg"){var o=!t.startsWith("<!>"),s=(e&yl)!==0,a=`<${r}>${o?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var d=ko(a),u=Nt(d);if(s)for(c=document.createDocumentFragment();Nt(u);)c.appendChild(Nt(u));else c=Nt(u)}var f=c.cloneNode(!0);if(s){var v=Nt(f),h=f.lastChild;Yr(v,h)}else Yr(f,f);return f}}function me(){var t=document.createDocumentFragment(),e=document.createComment(""),r=ho();return t.append(e,r),Yr(e,r),t}function I(t,e){t!==null&&t.before(e)}let Eo=!0;function xe(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Xi(t,e){return Qi(t,e)}const Wr=new Map;function Qi(t,{target:e,anchor:r,props:o={},events:s,context:a,intro:c=!0}){ki();var d=new Set,u=h=>{for(var m=0;m<h.length;m++){var g=h[m];if(!d.has(g)){d.add(g);var b=Ui(g);e.addEventListener(g,ln,{passive:b});var p=Wr.get(g);p===void 0?(document.addEventListener(g,ln,{passive:b}),Wr.set(g,1)):Wr.set(g,p+1)}}};u(lo(Xl)),xo.add(u);var f=void 0,v=Ti(()=>{var h=r??e.appendChild(ho());return Rt(()=>{if(a){ge({});var m=je;m.c=a}s&&(o.$$events=s),Eo=c,f=t(h,o)||{},Eo=!0,a&&pe()}),()=>{var b;for(var m of d){e.removeEventListener(m,ln);var g=Wr.get(m);--g===0?(document.removeEventListener(m,ln),Wr.delete(m)):Wr.set(m,g)}xo.delete(u),h!==r&&((b=h.parentNode)==null||b.removeChild(h))}});return Ji.set(f,v),f}let Ji=new WeakMap;const Ao=0,jn=1,Co=2;function Ql(t,e,r,o,s){var a=t,c=_r(),d=je,u=ct,f,v,h,m=(c?gt:An)(void 0),g=(c?gt:An)(void 0),b=!1;function p(_,k){b=!0,k&&(Ft(w),jt(w),En(d));try{_===Ao&&r&&(f?yr(f):f=Rt(()=>r(a))),_===jn&&o&&(v?yr(v):v=Rt(()=>o(a,m))),_===Co&&s&&(h?yr(h):h=Rt(()=>s(a,g))),_!==Ao&&f&&nr(f,()=>f=null),_!==jn&&v&&nr(v,()=>v=null),_!==Co&&h&&nr(h,()=>h=null)}finally{k&&(En(null),jt(null),Ft(null),Gl())}}var w=fr(()=>{if(u!==(u=e())){if(Ka(u)){var _=u;b=!1,_.then(k=>{_===u&&(Br(m,k),p(jn,!0))},k=>{if(_===u&&(Br(g,k),p(Co,!0),!s))throw g.v}),tn(()=>{b||p(Ao,!0)})}else Br(m,u),p(jn,!1);return()=>u=ct}})}function U(t,e,r=!1){var o=t,s=null,a=null,c=ct,d=r?qr:0,u=!1;const f=(h,m=!0)=>{u=!0,v(m,h)},v=(h,m)=>{c!==(c=h)&&(c?(s?yr(s):m&&(s=Rt(()=>m(o))),a&&nr(a,()=>{a=null})):(a?yr(a):m&&(a=Rt(()=>m(o))),s&&nr(s,()=>{s=null})))};fr(()=>{u=!1,e(f),u||v(null,null)},d)}function Fn(t,e,r){var o=t,s=ct,a,c=_r()?$a:wl;fr(()=>{c(s,s=e())&&(a&&nr(a),a=Rt(()=>r(o)))})}function Ke(t,e){return e}function Zi(t,e,r,o){for(var s=[],a=e.length,c=0;c<a;c++)go(e[c].e,s,!0);var d=a>0&&s.length===0&&r!==null;if(d){var u=r.parentNode;Ei(u),u.append(r),o.clear(),hr(t,e[0].prev,e[a-1].next)}jl(s,()=>{for(var f=0;f<a;f++){var v=e[f];d||(o.delete(v.k),hr(t,v.prev,v.next)),Kt(v.e,!d)}})}function Ye(t,e,r,o,s,a=null){var c=t,d={flags:e,items:new Map,first:null},u=(e&_l)!==0;if(u){var f=t;c=f.appendChild(ho())}var v=null,h=!1,m=Sl(()=>{var g=r();return Rr(g)?g:g==null?[]:lo(g)});fr(()=>{var g=l(m),b=g.length;h&&b===0||(h=b===0,$i(g,d,c,s,e,o,r),a!==null&&(b===0?v?yr(v):v=Rt(()=>a(c)):v!==null&&nr(v,()=>{v=null})),l(m))})}function $i(t,e,r,o,s,a,c){var W,ne,j,z;var d=(s&fi)!==0,u=(s&(co|uo))!==0,f=t.length,v=e.items,h=e.first,m=h,g,b=null,p,w=[],_=[],k,C,y,A;if(d)for(A=0;A<f;A+=1)k=t[A],C=a(k,A),y=v.get(C),y!==void 0&&((W=y.a)==null||W.measure(),(p??(p=new Set)).add(y));for(A=0;A<f;A+=1){if(k=t[A],C=a(k,A),y=v.get(C),y===void 0){var P=m?m.e.nodes_start:r;b=tc(P,e,b,b===null?e.first:b.next,k,C,A,o,s,c),v.set(C,b),w=[],_=[],m=b.next;continue}if(u&&ec(y,k,A,s),y.e.f&rr&&(yr(y.e),d&&((ne=y.a)==null||ne.unfix(),(p??(p=new Set)).delete(y))),y!==m){if(g!==void 0&&g.has(y)){if(w.length<_.length){var M=_[0],N;b=M.prev;var L=w[0],D=w[w.length-1];for(N=0;N<w.length;N+=1)Jl(w[N],M,r);for(N=0;N<_.length;N+=1)g.delete(_[N]);hr(e,L.prev,D.next),hr(e,b,L),hr(e,D,M),m=M,b=D,A-=1,w=[],_=[]}else g.delete(y),Jl(y,m,r),hr(e,y.prev,y.next),hr(e,y,b===null?e.first:b.next),hr(e,b,y),b=y;continue}for(w=[],_=[];m!==null&&m.k!==C;)m.e.f&rr||(g??(g=new Set)).add(m),_.push(m),m=m.next;if(m===null)continue;y=m}w.push(y),b=y,m=y.next}if(m!==null||g!==void 0){for(var T=g===void 0?[]:lo(g);m!==null;)m.e.f&rr||T.push(m),m=m.next;var F=T.length;if(F>0){var H=s&_l&&f===0?r:null;if(d){for(A=0;A<F;A+=1)(j=T[A].a)==null||j.measure();for(A=0;A<F;A+=1)(z=T[A].a)==null||z.fix()}Zi(e,T,H,v)}}d&&tn(()=>{var G;if(p!==void 0)for(y of p)(G=y.a)==null||G.apply()}),qe.first=e.first&&e.first.e,qe.last=b&&b.e}function ec(t,e,r,o){o&co&&Br(t.v,e),o&uo?Br(t.i,r):t.i=r}function tc(t,e,r,o,s,a,c,d,u,f){var v=(u&co)!==0,h=(u&di)===0,m=v?h?An(s):gt(s):s,g=u&uo?gt(c):c,b={i:g,v:m,k:a,a:null,e:null,prev:r,next:o};try{return b.e=Rt(()=>d(t,m,g,f),vo),b.e.prev=r&&r.e,b.e.next=o&&o.e,r===null?e.first=b:(r.next=b,r.e.next=b.e),o!==null&&(o.prev=b,o.e.prev=b.e),b}finally{}}function Jl(t,e,r){for(var o=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==o;){var c=Mn(a);s.before(a),a=c}}function hr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function vt(t,e,r,o,s){var a=t,c="",d;fr(()=>{c!==(c=e()??"")&&(d!==void 0&&(Kt(d),d=void 0),c!==""&&(d=Rt(()=>{var u=c+"";r&&(u=`<svg>${u}</svg>`);var f=ko(u);if((r||o)&&(f=Nt(f)),Yr(Nt(f),f.lastChild),r||o)for(;Nt(f);)a.before(Nt(f));else a.before(f)})))})}function kr(t,e,...r){var o=t,s=at,a;fr(()=>{s!==(s=e())&&(a&&(Kt(a),a=null),a=Rt(()=>s(o,...r)))},qr)}function Mo(t,e,r){var o=t,s,a;fr(()=>{s!==(s=e())&&(a&&(nr(a),a=null),s&&(a=Rt(()=>r(o,s))))},qr)}function Zl(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Zl(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function rc(){for(var t,e,r=0,o="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Zl(t))&&(o&&(o+=" "),o+=e);return o}function nc(t){return typeof t=="object"?rc(t):t??""}function S(t,e,r,o){var s=t.__attributes??(t.__attributes={});s[e]!==(s[e]=r)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Za]=r),r==null?t.removeAttribute(e):typeof r!="string"&&oc(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var $l=new Map;function oc(t){var e=$l.get(t.nodeName);if(e)return e;$l.set(t.nodeName,e=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=vl(o);for(var a in r)r[a].set&&e.push(a);o=so(o)}return e}function So(t,e,r){var o=t.__className,s=es(e);(o!==s||vo)&&(s===""?t.removeAttribute("class"):t.setAttribute("class",s),t.__className=s)}function Ur(t,e,r){var o=t.__className,s=es(e);(o!==s||vo)&&(e==null?t.removeAttribute("class"):t.className=s,t.__className=s)}function es(t,e){return(t??"")+""}function yt(t,e,r){if(r){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const lc=()=>performance.now(),sr={tick:t=>requestAnimationFrame(t),now:()=>lc(),tasks:new Set};function ts(){const t=sr.now();sr.tasks.forEach(e=>{e.c(t)||(sr.tasks.delete(e),e.f())}),sr.tasks.size!==0&&sr.tick(ts)}function sc(t){let e;return sr.tasks.size===0&&sr.tick(ts),{promise:new Promise(r=>{sr.tasks.add(e={c:t,f:r})}),abort(){sr.tasks.delete(e)}}}function qn(t,e){yo(()=>{t.dispatchEvent(new CustomEvent(e))})}function ac(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function rs(t){const e={},r=t.split(";");for(const o of r){const[s,a]=o.split(":");if(!s||a===void 0)break;const c=ac(s.trim());e[c]=a.trim()}return e}const ic=t=>t;function cc(t,e,r,o){var s=(t&bi)!==0,a="both",c,d=e.inert,u=e.style.overflow,f,v;function h(){var w=Ve,_=qe;jt(null),Ft(null);try{return c??(c=r()(e,(o==null?void 0:o())??{},{direction:a}))}finally{jt(w),Ft(_)}}var m={is_global:s,in(){e.inert=d,qn(e,"introstart"),f=No(e,h(),v,1,()=>{qn(e,"introend"),f==null||f.abort(),f=c=void 0,e.style.overflow=u})},out(w){e.inert=!0,qn(e,"outrostart"),v=No(e,h(),f,0,()=>{qn(e,"outroend"),w==null||w()})},stop:()=>{f==null||f.abort(),v==null||v.abort()}},g=qe;if((g.transitions??(g.transitions=[])).push(m),Eo){var b=s;if(!b){for(var p=g.parent;p&&p.f&qr;)for(;(p=p.parent)&&!(p.f&_n););b=!p||(p.f&ml)!==0}b&&en(()=>{lr(()=>m.in())})}}function No(t,e,r,o,s){var a=o===1;if(jr(e)){var c,d=!1;return tn(()=>{if(!d){var w=e({direction:a?"in":"out"});c=No(t,w,r,o,s)}}),{abort:()=>{d=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return s(),{abort:at,deactivate:at,reset:at,t:()=>o};const{delay:u=0,css:f,tick:v,easing:h=ic}=e;var m=[];if(a&&r===void 0&&(v&&v(0,1),f)){var g=rs(f(0,1));m.push(g,g)}var b=()=>1-o,p=t.animate(m,{duration:u});return p.onfinish=()=>{var w=(r==null?void 0:r.t())??1-o;r==null||r.abort();var _=o-w,k=e.duration*Math.abs(_),C=[];if(k>0){var y=!1;if(f)for(var A=Math.ceil(k/16.666666666666668),P=0;P<=A;P+=1){var M=w+_*h(P/A),N=rs(f(M,1-M));C.push(N),y||(y=N.overflow==="hidden")}y&&(t.style.overflow="hidden"),b=()=>{var L=p.currentTime;return w+_*h(L/k)},v&&sc(()=>{if(p.playState!=="running")return!1;var L=b();return v(L,1-L),!0})}p=t.animate(C,{duration:k,fill:"forwards"}),p.onfinish=()=>{b=()=>o,v==null||v(o,1-o),s()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=at)},deactivate:()=>{s=at},reset:()=>{o===0&&(v==null||v(1,0))},t:()=>b()}}function To(t,e,r=e){var o=_r();Gi(t,"input",s=>{var a=s?t.defaultValue:t.value;if(a=Io(t)?Po(a):a,r(a),o&&a!==(a=e())){var c=t.selectionStart,d=t.selectionEnd;t.value=a??"",d!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(d,t.value.length))}}),lr(e)==null&&t.value&&r(Io(t)?Po(t.value):t.value),mo(()=>{var s=e();Io(t)&&s===Po(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Io(t){var e=t.type;return e==="number"||e==="range"}function Po(t){return t===""?null:+t}const Jn=class Jn{constructor(e){bn(this,Qn);bn(this,wr,new WeakMap);bn(this,Zr);bn(this,hn);dl(this,hn,e)}observe(e,r){var o=ir(this,wr).get(e)||new Set;return o.add(r),ir(this,wr).set(e,o),za(this,Qn,Ya).call(this).observe(e,ir(this,hn)),()=>{var s=ir(this,wr).get(e);s.delete(r),s.size===0&&(ir(this,wr).delete(e),ir(this,Zr).unobserve(e))}}};wr=new WeakMap,Zr=new WeakMap,hn=new WeakMap,Qn=new WeakSet,Ya=function(){return ir(this,Zr)??dl(this,Zr,new ResizeObserver(e=>{for(var r of e){Jn.entries.set(r.target,r);for(var o of ir(this,wr).get(r.target)||[])o(r)}}))},Lr(Jn,"entries",new WeakMap);let Lo=Jn;var uc=new Lo({box:"border-box"});function ns(t,e,r){var o=uc.observe(t,()=>r(t[e]));en(()=>(lr(()=>r(t[e])),o))}function os(t,e){return t===e||(t==null?void 0:t[ur])===e}function Hr(t={},e,r,o){return en(()=>{var s,a;return mo(()=>{s=a,a=[],lr(()=>{t!==r(...a)&&(e(t,...a),s&&os(r(...s),t)&&e(null,...s))})}),()=>{tn(()=>{a&&os(r(...a),t)&&e(null,...a)})}}),t}function fc(t=!1){const e=je,r=e.l.u;if(!r)return;let o=()=>Yi(e.s);if(t){let s=0,a={};const c=E(()=>{let d=!1;const u=e.s;for(const f in u)u[f]!==a[f]&&(a[f]=u[f],d=!0);return d&&s++,s});o=()=>l(c)}r.b.length&&Ni(()=>{ls(e,o),ao(r.b)}),ze(()=>{const s=lr(()=>r.m.map(Xa));return()=>{for(const a of s)typeof a=="function"&&a()}}),r.a.length&&ze(()=>{ls(e,o),ao(r.a)})}function ls(t,e){if(t.l.s)for(const r of t.l.s)l(r);e()}let On=!1;function dc(t){var e=On;try{return On=!1,[t(),On]}finally{On=e}}const vc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function hc(t,e,r){return new Proxy({props:t,exclude:e},vc)}const mc={get(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(jr(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o)return o[e]}},set(t,e,r){let o=t.props.length;for(;o--;){let s=t.props[o];jr(s)&&(s=s());const a=cr(s,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(jr(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o){const s=cr(o,e);return s&&!s.configurable&&(s.configurable=!0),s}}},has(t,e){if(e===ur||e===pl)return!1;for(let r of t.props)if(jr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props){jr(r)&&(r=r());for(const o in r)e.includes(o)||e.push(o)}return e}};function Gr(...t){return new Proxy({props:t},mc)}function B(t,e,r,o){var P;var s=(r&vi)!==0,a=!Or||(r&hi)!==0,c=(r&gi)!==0,d=(r&pi)!==0,u=!1,f;c?[f,u]=dc(()=>t[e]):f=t[e];var v=ur in t||pl in t,h=c&&(((P=cr(t,e))==null?void 0:P.set)??(v&&e in t&&(M=>t[e]=M)))||void 0,m=o,g=!0,b=!1,p=()=>(b=!0,g&&(g=!1,d?m=lr(o):m=o),m);f===void 0&&o!==void 0&&(h&&a&&oi(),f=p(),h&&h(f));var w;if(a)w=()=>{var M=t[e];return M===void 0?p():(g=!0,b=!1,M)};else{var _=(s?E:Sl)(()=>t[e]);_.f|=Qa,w=()=>{var M=l(_);return M!==void 0&&(m=void 0),M===void 0?m:M}}if(!(r&mi))return w;if(h){var k=t.$$legacy;return function(M,N){return arguments.length>0?((!a||!N||k||u)&&h(N?w():M),M):w()}}var C=!1,y=An(f),A=E(()=>{var M=w(),N=l(y);return C?(C=!1,N):y.v=M});return s||(A.equals=io),function(M,N){if(arguments.length>0){const L=N?l(A):a&&c?ee(M):M;return A.equals(L)||(C=!0,V(y,L),b&&m!==void 0&&(m=L),lr(()=>l(A))),M}return l(A)}}function ss(t){je===null&&fo(),Or&&je.l!==null?pc(je).m.push(t):ze(()=>{const e=lr(t);if(typeof e=="function")return e})}function gc(t){je===null&&fo(),ss(()=>()=>lr(t))}function pc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const bc="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bc),ui();function as(t){if(Ne(t))return as(t.v);const e=new Ce.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Ce(e)}function Bn(t){if(Ne(t))return Bn(t.v);let e=t[0],r=t[0];for(let o=1;o<t.length;o++)t[o]<e&&(e=t[o]),t[o]>r&&(r=t[o]);return[e,r]}function Ro(t,e){return Ne(t)?Ro(t.v,e):Math.sqrt(is(t,e))}function is(t,e){if(e===void 0&&(e=!1),Ne(t))return is(t.v);const r=Vn(t);let o=0;for(let s=0;s<t.length;s++){const a=t[s]-r;o=o+a*a}return o/(e?t.length:t.length-1)}function Vn(t){return Ne(t)?Vn(t.v):cs(t)/t.length}function cs(t){if(Ne(t))return cs(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function us(t){if(Ne(t))return us(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Kr(t){return Ne(t)||Yt(t)?t.v[jo(t.v)-1]:t[jo(t)-1]}function jo(t){if(Ne(t)||Yt(t))return jo(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]<r&&(e=o,r=t[o-1]);return e}function Er(t){return Ne(t)||Yt(t)?t.v[Fo(t.v)-1]:t[Fo(t)-1]}function Fo(t){if(Ne(t)||Yt(t))return Fo(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]>r&&(e=o,r=t[o-1]);return e}const qo=30,wc=1e-7,_c=1e-7,fs=1e-13,ds=1e3,yc=100;function vs(t,e,r,o,s){o===void 0&&(o=ds),r===void 0&&(r=fs),s===void 0&&(s=yc);let a=r,c=o,d=(c-a)/s;for(let u=0;u<s;u++){let f,v;for(let g=0;g<s;g++){f=a+g*d,v=a+(g+1)*d;const b=e(f),p=e(v);if(b<=t&&p>=t)break}const h=(f+v)/2,m=e(h);if(Math.abs(m-t)<wc||(a=f,c=v,d=(c-a)/s,d/c<_c))return h}return(a+c)/2}function hs(t,e=0,r=1){let o=Ce.zeros(t);for(let s=0;s<t;s++)o.v[s]=e+Math.random()*(r-e);return o}function ms(t,e=0,r=1){let o=Ce.zeros(t);for(let s=0;s<t;s++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();o.v[s]=a*Math.sin(c)*r+e}return o}function gs(t,e=0,r=1){if(Ne(t))return t.apply(s=>gs(s,e,r));const o=1/(Math.sqrt(2)*r);return .5*(1+kc((t-e)*o))}function Oo(t,e=0,r=1){if(Ne(t))return t.apply(H=>Oo(H,e,r));if(e!==0||r!==1)return Oo(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const o=.425,s=5,a=.180625,c=1.6,d=3.3871327179,u=5.0434271938*10,f=1.5929113202*100,v=5.910937472*10,h=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,b=1.4234372777,p=2.75681539,w=1.3067284816,_=1.7023821103*.1,k=7.370016425*.1,C=1.2021132975*.1,y=6.657905115,A=3.081226386,P=4.2868294337*.1,M=1.7337203997*.01,N=2.4197894225*.1,L=1.2258202635*.01,D=t-.5;let T;if(Math.abs(D)<=o)return T=a-D*D,D*(((v*T+f)*T+u)*T+d)/(((g*T+m)*T+h)*T+1);T=D<0?t:1-t,T=Math.sqrt(-Math.log(T));let F;return T<=s?(T=T-c,F=(((_*T+w)*T+p)*T+b)/((C*T+k)*T+1)):(T=T-s,F=((M*T+P)*T+A+y)/((L*T+N)*T+1)),D<0?-F:F}function Bo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return Bo(We(t),e,r);if(Ne(t))return t.apply(o=>Bo(o,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return Dn(t*e,e)}return e==Number.POSITIVE_INFINITY?1-Dn(r/t,r):e*t>r?1-Yn(r/(r+e*t),r/2,e/2):Yn(e*t/(r+e*t),e/2,r/2)}function ps(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let o=ds,s=fs;if(t>.9997&&r===1?(o=1e7,s=6e5,t=.9997):t>.9992&&r===1?(o=1e7,s=6e5):t>.997&&r===1?(o=1e6,s=45e3):t>.992&&r===1?(o=1e5,s=5e3):t>.97&&r===1&&(o=1e4,s=400),Array.isArray(t))return ps(We(t),e,r);const a=d=>Bo(d,e,r);function c(d,u,f){return d===0?0:d===1?Inf:u===0?NaN:f===0?NaN:vs(d,a,s,o)}return Ne(t)?t.apply(c,e,r):c(t,e,r)}function Dn(t,e){if(Array.isArray(t))return Dn(We(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),s=Math.sqrt(o);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const f=u/e,v=Math.pow(f,1/6)-.5*Math.pow(f,1/3)+1/3*Math.pow(f,1/2);return gs(v,r,s)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:xc(u/2,e/2)/sn(e/2)}const d=e>qo?a:c;return Ne(t)?t.apply(d):d(t)}function zn(t,e){if(Array.isArray(t))return zn(We(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),s=Math.sqrt(o);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const f=Oo(u,r,s),v=Math.pow(Math.sqrt(36*f*f-30*f+13)/4+(3*f-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:vs(u,v=>Dn(v,e),0,qo*10)}const d=e>qo?a:c;return Ne(t)?t.apply(d):d(t)}function Yn(t,e,r){if(Array.isArray(t))return Yn(We(t),e,r);if(Ne(t))return t.apply(s=>Yn(s,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const o=.5-t+.5;return jc(e,r,t,o)}function sn(t){if(Ne(t))return t.apply(sn);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+sn(1-t));t=t-1;let r=.9999999999998099;for(let s=0;s<e.length;s++)r=r+e[s]/(t+s+1);const o=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*r}function xc(t,e){let s=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/sn(e+a+1);if(isNaN(c)||c<1e-18)break;s+=c}return Math.pow(t,e)*sn(e)*Math.exp(-t)*s}function kc(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,o=-.284496736,s=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*t),f=1-((((c*u+a)*u+s)*u+o)*u+r)*u*Math.exp(-t*t);return e*f}function bs(t,e){const r=.564189583547756,o=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],d=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,v,h,m,g=Math.abs(e);if(g<=.5)return v=e*e,m=(((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4]+1,h=((s[0]*v+s[1])*v+s[2])*v+1,f=.5-e*(m/h)+.5,f=Math.exp(v)*f,f;if(g<=4)m=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],h=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],f=m/h;else{if(e<=-5.6)return f=2,f=Math.exp(e*e)*2,f;v=1/(e*e),m=(((d[0]*v+d[1])*v+d[2])*v+d[3])*v+d[4],h=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+1,f=(r-v*m/h)/g}return e<0&&(f=Math.exp(e*e)*2-f),f}function ws(t,e){let r=t+e-2;return r<=.25?qt(r+1):r<=1.25?qt(r)+gr(r):qt(r-1)+Math.log(r*(r+1))}function Wn(t,e){const r=.0833333333333333,o=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let u,f,v,h,m,g,b,p,w,_,k,C,y,A,P;return v=Math.min(t,e),h=Math.max(t,e),g=v/h,m=g/(g+1),w=1/(g+1),C=w*w,_=w+C+1,k=w+C*_+1,y=w+C*k+1,A=w+C*y+1,P=w+C*A+1,f=1/h,b=f*f,p=((((d*P*b+c*A)*b+a*y)*b+s*k)*b+o*_)*b+r,p*=m/h,f=1/v,b=f*f,u=(((((d*b+c)*b+a)*b+s)*b+o)*b+r)/v+p,u}function Qe(t){let e,r,o,s,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],d=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],s=(u*r+d)*r+1,o=a/s,e>0?r*o/t:t*(o+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],d=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],s=(((d[4]*r+d[3])*r+d[2])*r+d[1])*r+1,o=a/s,e>0?r/t*(o-.5-.5):t*o}}}function Ec(t,e,r){let o,s,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=s=0,o=0;for(let d=1;d<=r;d++)a=s,s=o,o=c*s-a+e[r-d];return(o-a)*.5}function _s(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,o=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*Ec(t/.375,e,r));if(t<o)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function mr(t,e){const r=.0833333333333333,o=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let u,f,v,h,m,g,b,p,w,_,k,C,y,A;return t>e?(v=e/t,u=1/(v+1),p=v/(v+1),f=t+(e-.5)):(v=t/e,u=v/(v+1),p=1/(v+1),f=e+(t-.5)),k=p*p,w=p+k+1,_=p+k*w+1,C=p+k*_+1,y=p+k*C+1,A=p+k*y+1,h=1/(e*e),b=((((d*A*h+c*y)*h+a*C)*h+s*_)*h+o*w)*h+r,b*=u/e,m=f*gr(t/e),g=t*(Math.log(e)-1),m>g?b-g-m:b-m-g}function qt(t){if(t<.6){const b=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*b}else{const e=.422784335098467,r=.848044614534529,o=.565221050691933,s=.156513060486551,a=.017050248402265,c=.000497958207639485,d=1.24313399877507,u=.548042109832463,f=.10155218743983,v=.00713309612391,h=.000116165475989616,m=t-.5-.5,g=(((((c*m+a)*m+s)*m+o)*m+r)*m+e)/(((((h*m+v)*m+f)*m+u)*m+d)*m+1);return m*g}}function Dt(t){const e=.418938533204673,r=.0833333333333333,o=-.00277777777760991,s=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;if(t<=.8)return qt(t)-Math.log(t);if(t<=2.25)return qt(t-.5-.5);if(t<10){let v=Math.round(t-1.25),h=t,m=1;for(let g=1;g<=v;++g)h+=-1,m*=h;return qt(h-1)+Math.log(m)}let u=1/(t*t),f=(((((d*u+c)*u+a)*u+s)*u+o)*u+r)/t;return e+f+(t-.5)*(Math.log(t)-1)}function Vo(t,e){const r=.918938533204673;let o=Math.min(t,e),s=Math.max(t,e);function a(c,d,u){let f=Math.round(u-1),v=1;for(let h=1;h<=f;++h)u+=-1,v*=u/(d+u);return c+Math.log(v)+(Dt(d)+(Dt(u)-ws(d,u)))}if(o<8){if(o<1)return s<8?Dt(o)+(Dt(s)-Dt(o+s)):Dt(o)+mr(o,s);let c;if(o<2)return s<=2?Dt(o)+Dt(s)-ws(o,s):s<8?(c=0,a(c,o,s)):Dt(o)+mr(o,s);if(s<=1e3){let d=Math.round(o-1);c=1;for(let u=1;u<=d;++u){o+=-1;let f=o/s;c*=f/(f+1)}return c=Math.log(c),s>=8?c+Dt(o)+mr(o,s):a(c,o,s)}else{let d=Math.round(o-1);c=1;for(let u=1;u<=d;++u)o+=-1,c*=o/(o/s+1);return log(c)-d*log(s)+(Dt(o)+mr(o,s))}}else{let c=Wn(o,s),d=o/s,u=-(o-.5)*Math.log(d/(d+1)),f=s*gr(d);return u>f?Math.log(s)*-.5+r+c-f-u:Math.log(s)*-.5+r+c-u-f}}function ys(t){return(t==0?1024:-300)*.69314718055995*.99999}function Xr(t){const e=.0566749439387324,r=.0456512608815524,o=.333333333333333,s=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,d=.354508718369557;let u,f,v,h,m;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(u=t+.3,u/=.7,m=e-u*.3):t>.18?(u=t*.75-.25,m=r+u/3):(u=t,m=0),f=u/(u+2),v=f*f,h=((a*v+s)*v+o)/((d*v+c)*v+1),v*2*(1/(1-f)-f*h)+m)}function gr(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,o=-.0178874546012214,s=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let d=t/(t+2),u=d*d,f=(((o*u+r)*u+e)*u+1)/(((c*u+a)*u+s)*u+1);return d*2*f}function Ac(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],s=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],d=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,f,v,h,m;if(v=Math.abs(t),v<=.5)return u=t*t,m=(((r[0]*u+r[1])*u+r[2])*u+r[3])*u+r[4]+1,h=((o[0]*u+o[1])*u+o[2])*u+1,t*(m/h);if(v<=4){m=((((((s[0]*v+s[1])*v+s[2])*v+s[3])*v+s[4])*v+s[5])*v+s[6])*v+s[7],h=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7];let b=.5-Math.exp(-t*t)*m/h+.5;return t<0?-b:b}if(v>=5.8)return t>0?1:-1;f=t*t,u=1/f,m=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],h=(((d[0]*u+d[1])*u+d[2])*u+d[3])*u+1,u=(e-m/(f*h))/v;let g=.5-Math.exp(-f)*u+.5;return t<0?-g:g}function Cc(t){const e=914041914819518e-24,r=.0238082361044469,o=-.499999999085958,s=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+s)*t+o)*t+1));{let d=Math.exp(t);return t>0?d*(.5-1/d+.5):d-.5-.5}}function an(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function Mc(t){const e=.785398163397448,r=1.4616321449683622,o=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],s=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let d,u,f,v,h,m,g,b,p,w,_,k,C;if(_=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),_>v&&(_=v),C=1e-9,b=0,t<.5){if(fabs(t)<=C){if(t==0)return 0;b=-1/t}else{if(h=-t,p=e,h<=0&&(h=-h,p=-p),h>=_)return 0;if(f=Math.round(h),h-=f,f=Math.round(h*4),h=(h-f*.25)*4,u=f/2,u+u!=f&&(h=1-h),m=e*h,d=u/2,d+d!=u&&(p=-p),u=(f+1)/2,d=u/2,d+=d,d==u){if(m==0)return 0;b=p*(cos(m)/sin(m)*4)}else b=p*(sin(m)/cos(m)*4)}t=1-t}if(t<=3){g=t,k=o[0]*t;for(let y=1;y<=5;++y)g=(g+s[y-1])*t,k=(k+o[y])*t;return g=(k+o[6])/(g+s[5]),w=t-r,g*w+b}if(t<_){h=1/(t*t),g=h,k=a[0]*h;for(let y=1;y<=3;++y)g=(g+c[y-1])*h,k=(k+a[y])*h;b=k/(g+c[3])-.5/t+b}return b+log(t)}function Sc(t,e,r,o){let s,a,c,d,u,f;if(t>o*.001){if(d=t*Math.log(r),d<Math.exparg(1))return 0;s=Math.exp(d)}else s=1;for(s*=e/t,f=o/t,u=t+1,d=r,c=d/u,u+=1,d=r*d,a=d/u,c+=a;Math.abs(r)>f;)u+=1,d=r*d,a=d/u,c+=a;return s*=t*c+1,s}function Nc(t,e,r,o){const s=.577215664901533;let a,c,d,u,f,v,h=e*r;for(f=r-h,c=e*o<=.02?Math.log(r)+Mc(e)+s+f:Math.log(h)+s+f,a=o*5*Math.abs(c),d=1,u=0,d+=1,f*=r-h/d,v=f/d,u+=v;Math.abs(v)>a;)d+=1,f*=r-h/d,v=f/d,u+=v;return-t*(c+u)}function Do(t,e,r,o){let s,a,c,d,u,f,v,h,m;if(r==0)return 0;if(v=Math.min(t,e),v>=1)f=t*Math.log(r)-Vo(t,e),a=Math.exp(f)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(a=Math.pow(r,t),a==0)return a;m=t+e,m>1?(u=t+e-1,f=(Qe(u)+1)/m):f=Qe(m)+1,c=(Qe(t)+1)*(Qe(e)+1)/f,a*=c*(e/m)}else{if(u=qt(v),s=Math.round(h-1),s>=1){c=1;for(let _=1;_<=s;++_)h+=-1,c*=h/(v+h);u+=Math.log(c)}f=t*Math.log(r)-u,h+=-1,m=v+h,m>1?(u=v+h-1,d=(Qe(u)+1)/m):d=Qe(m)+1,a=Math.exp(f)*(v/t)*(Qe(h)+1)/d}else u=qt(v)+mr(v,h),f=t*Math.log(r)-u,a=v/t*Math.exp(f);if(a==0||t<=o*.1)return a;let g=o/t,b=0,p=0,w;for(c=1,b+=1,c*=(.5-e/b+.5)*r,w=c/(t+b),p+=w;b<1e7&&Math.abs(w)>g;)b+=1,c*=(.5-e/b+.5)*r,w=c/(t+b),p+=w;return t*p>-1?a*=t*p+1:a=0,a}function Un(t,e,r,o,s,a){let c,d,u,f,v,h=t+e,m=t+1;if(s>1&&t>=1&&h>=m*1.1?(u=Math.round(Math.abs(ys(1))),d=Math.round(ys(0)),u>d&&(u=d),f=Math.exp(-u)):(u=0,f=1),c=Pc(u,t,e,r,o)/t,s==1||c==0)return c;let g=s-1,b=f;if(d=0,e>1){if(o>1e-4){let p=(e-1)*r/o-t;p>=1&&(d=p<g?Math.round(p):g)}else d=g;for(let p=0;p<d;++p)v=p,f*=(h+v)/(m+v)*r,b+=f}for(let p=d;p<g&&(v=p,f*=(h+v)/(m+v)*r,b+=f,!(f<=a*b));++p);return c*=b,c}function Tc(t,e,r,o,s,a){let c,d,u,f,v,h,m,g,b,p,w,_,k,C,y,A,P,M,N;if(!Number.isFinite(s)||(N=Ic(t,e,r,o),Number.isNaN(N)))return Number.NaN;if(N==0)return 0;for(c=s+1,b=e/t,p=1/t+1,C=o+1,u=0,f=1,h=t+1,_=0,k=1,y=1,A=c/p,v=p/c,u+=1,m=u/t,g=u*(e-u)*r,d=t/h,M=f*(f+b)*d*d*(g*r),d=(m+1)/(p+m+m),P=u+g/h+d*(c+u*C),f=m+1,h+=2,m=M*_+P*y,_=y,y=m,m=M*k+P*A,k=A,A=m,w=v,v=y/A,_/=A,k/=A,y=v,A=1;u<1e4&&(u+=1,m=u/t,g=u*(e-u)*r,d=t/h,M=f*(f+b)*d*d*(g*r),d=(m+1)/(p+m+m),P=u+g/h+d*(c+u*C),f=m+1,h+=2,m=M*_+P*y,_=y,y=m,m=M*k+P*A,k=A,A=m,w=v,v=y/A,!(Math.abs(v-w)<=a*v));)_/=A,k/=A,y=v,A=1;return N*v}function Ic(t,e,r,o){const s=.398942280401433;let a,c,d,u,f,v,h,m,g;if(r==0||o==0)return 0;if(h=Math.min(t,e),h<8){let b,p;if(r<=.375?(b=Math.log(r),p=gr(-r)):o>.375?(b=Math.log(r),p=Math.log(o)):(b=gr(-o),p=Math.log(o)),v=t*b+e*p,h>=1)return v-=Vo(t,e),Math.exp(v);if(m=Math.max(t,e),m>=8)return u=qt(h)+mr(h,m),h*Math.exp(v-u);if(m<=1){let _=Math.exp(v);return _==0?0:(g=t+e,g>1?(u=t+e-1,v=(Qe(u)+1)/g):v=Qe(g)+1,c=(Qe(t)+1)*(Qe(e)+1)/v,_*(h*c)/(h/m+1))}if(u=qt(h),a=Math.round(m-1),a>=1){c=1;for(let _=1;_<=a;++_)m+=-1,c*=m/(h+m);u=Math.log(c)+u}v-=u,m+=-1,g=h+m;let w;return g>1?(u=h+m-1,w=(Qe(u)+1)/g):w=Qe(g)+1,h*Math.exp(v)*(Qe(m)+1)/w}else{let b,p,w,_;return t<=e?(b=t/e,p=b/(b+1),w=1/(b+1),_=t-(t+e)*r):(b=e/t,p=1/(b+1),w=b/(b+1),_=(t+e)*o-e),d=-_/t,u=Math.abs(d)>.6?d-Math.log(r/p):Xr(d),d=_/e,f=Math.abs(d)<=.6?Xr(d):d-Math.log(o/w),v=Math.exp(-(t*u+e*f)),s*Math.sqrt(e*p)*v*Math.exp(-Wn(t,e))}}function Pc(t,e,r,o,s){const a=.398942280401433;let c,d,u,f,v,h,m,g;if(h=Math.min(e,r),h<8){let b,p;if(o<=.375?(b=Math.log(o),p=gr(-o)):s>.375?(b=Math.log(o),p=Math.log(s)):(b=gr(-s),p=Math.log(s)),v=e*b+r*p,h>=1)return v-=Vo(e,r),an(t,v);if(m=Math.max(e,r),m>=8)return u=qt(h)+mr(h,m),h*an(t,v-u);if(m<=1){let _=an(t,v);return _==0?_:(g=e+r,g>1?(u=e+r-1,v=(Qe(u)+1)/g):v=Qe(g)+1,c=(Qe(e)+1)*(Qe(r)+1)/v,_*(h*c)/(h/m+1))}u=qt(h);let w=Math.round(m-1);if(w>=1){c=1;for(let _=1;_<=w;++_)m+=-1,c*=m/(h+m);u+=Math.log(c)}return v-=u,m+=-1,g=h+m,d=g>1?(Qe(g-1)+1)/g:Qe(g)+1,h*an(t,v)*(Qe(m)+1)/d}else{let b,p,w,_;e>r?(b=r/e,p=1/(b+1),w=b/(b+1),_=(e+r)*s-r):(b=e/r,p=b/(b+1),w=1/(b+1),_=e-(e+r)*o),-_s(r/e);let k=-_/e;return u=Math.abs(k)>.6?k-Math.log(o/p):Xr(k),k=_/r,f=Math.abs(k)>.6?k-Math.log(s/w):Xr(k),v=an(t,-(e*u+r*f)),a*Math.sqrt(r*p)*v*Math.exp(-Wn(e,r))}}function zo(t,e,r,o,s,a){let d=Array(30),u=Array(30),f=e-.5-.5,v=t+f*.5,h=o>.375?Math.log(r):gr(-o),m=-v*h;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+_s(Qe(e))+e*Math.log(m)+v*h,b=g-(mr(e,t)+e*Math.log(v)),p=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let w=p==0,_=s==0?0:Math.exp(Math.log(s)-b),k=Lc(e,m,g,a),C=.25/(v*v),y=h*.25*h,A=k,P=A,M=1,N=1,L=0;for(let D=1;D<=30;++D){let T=e+L;A=(T*(T+1)*A+(m+T+1)*M)*C,L+=2,M*=y,N/=L*(L+1);let F=D-1;d[F]=N;let H=0;if(D>1){let ne=e-D;for(let j=1;j<=F;++j)H+=ne*d[j-1]*u[F-j],ne+=e}u[F]=f*N+H/D;let W=u[F]*A;if(P+=W,P<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(W)<=a*(P+_))break}return s+=w?Math.exp(b+Math.log(P)):p*P,s}function Lc(t,e,r,o){const s=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-Ac(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return bs(1,a)/a*s}}else if(e<1.1){let a=3,c=e,d=e/(t+3),u=o*.1/(t+1),f;for(a+=1,c*=-(e/a),f=c/(t+a),d+=f;Math.abs(f)>u;)a+=1,c*=-(e/a),f=c/(t+a),d+=f;let v=t*e*((d/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),m=Qe(t),g=m+1;if(e>=.25&&t<e/2.59||h>-.13394){let b=Cc(h),p=((b+.5+.5)*v-b)*g-m;return p<=0?0:p*Math.exp(-r)}else return(.5-Math.exp(h)*g*(.5-v+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,d=e,u=e+(1-t),f=1,v,h;a=e*c+f*a,d=e*u+f*d,v=a/d,f+=1;let m=f-t;for(c=a+m*c,u=d+m*u,h=c/u;Math.abs(h-v)>=o*h;)a=e*c+f*a,d=e*u+f*d,v=a/d,f+=1,m=f-t,c=a+m*c,u=d+m*u,h=c/u;return h}}function Rc(t,e,r,o){const a=1.12837916709551,c=.353553390593274,d=Array(21),u=Array(21),f=Array(21),v=Array(21);let h=t*Xr(-r/t)+e*Xr(r/e),m;if(m=Math.exp(-h),m==0)return 0;let g=Math.sqrt(h),b=g/c*.5,p=h+h,w,_,k,C;t<e?(w=t/e,_=1/(w+1),k=(e-t)/e,C=1/Math.sqrt(t*(w+1))):(w=e/t,_=1/(w+1),k=(e-t)/t,C=1/Math.sqrt(e*(w+1))),d[0]=k*.6666666666666666,f[0]=d[0]*-.5,v[0]=-f[0];let y=.5/a*bs(1,g),A=c,P=y+v[0]*C*A,M=1,N=w*w,L=1,D=C,T=b,F=p;for(let W=2;W<=20;W+=2){L*=N,d[W-1]=_*2*(w*L+1)/(W+2);let ne=W+1;M+=L,d[ne-1]=k*2*M/(W+3);for(let G=W;G<=ne;++G){let K=(G+1)*-.5;u[0]=K*d[0];for(let $=2;$<=G;++$){let ue=0;for(let X=1;X<=$-1;++X){let te=$-X;ue+=(X*K-te)*d[X-1]*u[te-1]}u[$-1]=K*d[$-1]+ue/$}f[G-1]=u[G-1]/(G+1);let Z=0;for(let $=1;$<=G-1;++$)Z+=v[G-$-1]*f[$-1];v[G-1]=-(Z+f[G-1])}y=c*T+(W-1)*y,A=c*F+W*A,T=p*T,F=p*F,D*=C;let j=v[W-1]*D*y;D*=C;let z=v[ne-1]*D*A;if(P+=j+z,Math.abs(j)+Math.abs(z)<=o*P)break}let H=Math.exp(-Wn(t,e));return a*m*H*P}function jc(t,e,r,o){let a=0,c=0;function d(w,_,k,C){const y=Do(w,_,k,1e-15);return C?.5-y+.5:y}function u(w,_,k,C){const y=Do(_,w,k,1e-15);return C?y:.5-y+.5}function f(w,_,k,C,y,A){const P=Tc(w,_,k,C,y,15000000000000002e-30);return A?.5-P+.5:P}function v(w,_,k,C,y){let A=Math.round(_);_=_-A,_===0&&(A=A-1,_=1);let P=Un(_,w,C,k,A,1e-15);return k<=.7?(P=P+Do(w,_,k,1e-15),y?.5-P+.5:P):(w<=15&&(A=20,P=P+Un(w,_,k,C,A,1e-15),w=w+A),P=zo(w,_,k,C,P,15*1e-15),y?.5-P+.5:P)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,m,g,b,p;if(t<=1||e<=1){if(r>.5?(p=!0,h=e,g=o,m=t,b=r):(p=!1,h=t,g=r,m=e,b=o),m<Math.min(1e-15,1e-15*h))return a=Sc(h,m,g,1e-15),p?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=Nc(h,m,g,1e-15),p?c:.5-c+.5;if(Math.max(h,m)>1){if(m<=1)return d(h,m,g,p);if(g>=.29)return u(h,m,b,p);if(g<.1&&Math.pow(g*m,h)<=.7)return d(h,m,g,p)}else{if(h>=Math.min(.2,m)||Math.pow(g,h)<=.9)return d(h,m,g,p);if(g>=.3)return u(h,m,b,p)}let w=!1;return Math.max(h,m)>1&&m>15?c=0:(w=!0,c=Un(m,h,b,g,20,1e-15),m+=20),c=zo(m,h,b,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(w?c=Un(m-n,h,b,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=zo(m,h,b,g,c,15*1e-15),a=-expm1(c),p?.5-a+.5:a):(a=.5-c+.5,p?.5-a+.5:a)}else{let w=Number.isFinite(t+e)?t>e?(t+e)*o-e:t-(t+e)*r:t*o-e*r;const _=w<0;let k,C,y,A;if(_?(w=-w,k=e,y=o,C=t,A=r):(k=t,y=r,C=e,A=o),C<40)return C*y<=.7?d(k,C,y,_):v(k,C,y,A,_);if(k>C){if(C<=100||w>C*.03)return f(k,C,y,A,w,_)}else{if(k<=100)return f(k,C,y,A,w,_);if(w>k*.03)return f(k,C,y,A,w,_)}return a=Rc(k,C,w,1e-15*100),_?.5-a+.5:a}}function xs(t){const e=t.nrows,r=t.ncols;if(e<r){const c=xs(t.subset([],xt.seq(1,e)));return{Q:c.Q,R:Oc(c.Q,t)}}let o=zt.eye(e),s=t.t();for(let c=1;c<=r;c++)for(let d=e;d>=c+1;d--){const u=s.v.subarray((d-2)*r,d*r),f=o.v.subarray((d-2)*e,d*e),v=u.slice(),h=f.slice(),[m,g,b]=Fc(v[c-1],v[c-1+r]);for(let p=0;p<r;p++)u[p]=v[p]*m+v[p+r]*g,u[p+r]=v[p]*-g+v[p+r]*m,f[p]=h[p]*m+h[p+e]*g,f[p+e]=h[p]*-g+h[p+e]*m;for(let p=r;p<e;p++)f[p]=h[p]*m+h[p+e]*g,f[p+e]=h[p]*-g+h[p+e]*m}const a=xt.seq(1,r);return{Q:e===r?o:o.subset([],a),R:e===r?s.t():s.subset([],a).t()}}function Fc(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),d=1/c;return[d,a*d,t*c]}const r=t/e,o=Math.sqrt(1+r*r),s=1/o;return[r*s,s,e*o]}function ks(t){return typeof t=="number"}function qc(t,e){e===void 0&&(e=t);const r=t.nrows,o=t.ncols,s=e.nrows;e.ncols;const a=r,c=s,d=o,u=new Float64Array(a*c);for(let f=0;f<d;f++){const v=t.v.subarray(f*r,(f+1)*r),h=e.v.subarray(f*s,(f+1)*s);for(let m=0;m<c;m++){const g=u.subarray(m*a,(m+1)*a);for(let b=0;b<a;b++)g[b]+=v[b]*h[m]}}return new zt(u,a,c)}function Oc(t,e){if(e===void 0&&(e=t),!pr(t)||!pr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,o=t.ncols,s=e.nrows,a=e.ncols,c=o,d=a,u=r,f=new Float64Array(c*d);for(let v=0;v<d;v++){const h=e.v.subarray(v*s,(v+1)*s),m=f.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const b=t.v.subarray(g*r,(g+1)*r);let p=0;for(let w=0;w<u;w++)p+=b[w]*h[w];m[g]=p}}return new zt(f,c,d)}function Es(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ce(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new zt(t.v,e,r)}function pr(t){return t&&t.constructor===zt}function Bc(t,e,r){return new zt(new Float64Array(t),e,r)}const ke=class ke{constructor(e,r,o){if(!ArrayBuffer.isView(e)||e.constructor!==ke.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||o===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*o)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=o}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return ke.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const o=ke.eye(e),s=ke.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],d=e-1;for(let u=0;u<e;u++)s.v[d*e+u]=o.v[d*e+u]/c;for(let u=e-2;u>=0;u--){let f=o.getcolumn(u+1);const v=a.getcolref(u+1);for(let h=u+1;h<e;h++){const m=s.getcolumn(h+1);f=f.subtract(m.mult(v[h]))}s.v.set(f.divide(v[u]).v,u*e)}return s.t()}if(this.islowertriangular()){const o=this.diag();if(us(o)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const s=ke.eye(e),a=ke.eye(e),c=this.t(),d=0,u=c.v[0];for(let f=0;f<e;f++)a.v[d*e+f]=s.v[d*e+f]/u;for(let f=1;f<e;f++){let v=s.getcolumn(f+1);const h=c.getcolref(f+1);for(let m=0;m<f;m++){const g=a.getcolumn(m+1);v=v.subtract(g.mult(h[m]))}a.v.set(v.divide(h[f]).v,f*e)}return a.t()}const r=xs(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>ke.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>ke.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let o=0;o<e;o++)r[o]=this.getcolref(o+1)[o];return new Ce(r)}t(){const e=this.nrows,r=this.ncols,o=new ke.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let s=0;s<this.ncols;s++){const a=this.v.subarray(s*this.nrows,(s+1)*this.nrows);for(let c=0;c<this.nrows;c++)o[c*r+s]=a[c]}return new ke(o,r,e)}for(let s=0;s<this.nrows;s++){const a=o.subarray(s*r,(s+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+s]}return new ke(o,r,e)}dot(e){if(Ne(e))return new ke(Uo(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(pr(e))return new ke(Uo(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,o){if(pr(e))return new ke(Yo(this.v,e.v,r),this.nrows,this.ncols);if(ks(e))return new ke(Wo(this.v,e,r),this.nrows,this.ncols);if(!Ne(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(o===void 0&&(o=e.length===this.ncols?2:1),o===2&&e.length===this.ncols){const s=new ke.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)s.set(Wo(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new ke(s,this.nrows,this.ncols)}if(o===1&&e.length===this.nrows){const s=new ke.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)s.set(Yo(this.getcolref(a+1),e.v,r),a*this.nrows);return new ke(s,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e,r){if(r===void 0&&(r=2),r==2){const o=this.ncols,s=new ke.valuesConstructor(o);for(let a=0;a<o;a++)s[a]=e(this.getcolref(a+1));return new Ce(s)}if(r==1)return this.t().apply(e,2);if(r==0){const o=this.v.length,s=new ke.valuesConstructor(o);for(let a=0;a<o;a++)s[a]=e(this.v[a]);return new ke(s,this.nrows,this.ncols)}}replace(e,r,o){typeof r=="number"&&(r=[r]),r.length===0&&(r=xt.seq(1,this.nrows)),Yt(r)||(r=Wt(r)),typeof o=="number"&&(o=[o]),o.length===0&&(o=xt.seq(1,this.ncols)),Yt(o)||(o=Wt(o));const s=r.length,a=o.length;if(Kr(r)<1||Er(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Kr(o)<1||Er(o)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==s||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<o.length;c++){const d=e.getcolref(c+1),u=(o.v[c]-1)*this.nrows;for(let f=0;f<r.length;f++){const v=r.v[f];this.v[u+v-1]=d[f]}}return this}copy(){return new ke(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Ce.valuesConstructor(this.ncols);for(let o=0;o<this.ncols;o++)r[o]=this.getcolref(o+1)[e-1];return new Ce(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ce(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Wt([e])),typeof r=="number"&&(r=Wt([r])),Array.isArray(e)&&(e=e.length===0?null:Wt(e)),Array.isArray(r)&&(r=r.length===0?null:Wt(r)),e!==null&&!Yt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Yt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Kr(e)<1||Er(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Kr(r)<1||Er(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const d=r.length,u=this.nrows,f=new ke.valuesConstructor(u*d);for(let v=0;v<r.length;v++)f.set(this.v.slice((r.v[v]-1)*this.nrows,r.v[v]*this.nrows),v*this.nrows);return new ke(f,u,d)}if(r==null)return this.t().subset(r,e).t();const o=e.length,s=r.length,a=new ke.valuesConstructor(o*s);let c=new ke.valuesConstructor(o);for(let d=0;d<s;d++){const u=this.v.subarray((r.v[d]-1)*this.nrows,r.v[d]*this.nrows);for(let f=0;f<o;f++)c[f]=u[e.v[f]-1];a.set(c,d*o)}return new ke(a,o,s)}toString(e){function r(c,d){return" ".repeat(d-c.length)+c}e===void 0&&(e=2),this.ncols;const o=Math.round(Math.abs(Math.log10(Er(this.v))))+e+3;let s="";const a=this.t();for(let c=1;c<=a.ncols;c++)s+=Array.from(a.getcolref(c)).map(d=>r(d.toFixed(e),o)).join(" ")+`
`;return s}toCSV(e,r,o,s){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=s!=null&&s.length>0,c=o!=null&&o.length>0;if(a&&s.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&o.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const d=this.t();let u=c?o.join(e)+`
`:"";for(let f=1;f<=d.ncols;f++)u=u+(a?s[f-1]+e:"")+d.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,o,s){return Es(ms(e*r,o,s),e,r)}static rand(e,r,o,s){return Es(hs(e*r,o,s),e,r)}static eye(e,r){r===void 0&&(r=e);const o=new Float64Array(e*r);for(let s=0;s<Math.min(e,r);s++)o[s*e+s]=1;return new ke(o,e,r)}static diagm(e){if(!Ne(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,o=new Float64Array(r*r);for(let s=0;s<r;s++)o[s*r+s]=e.v[s];return new ke(o,r,r)}static zeros(e,r){return r===void 0&&(r=e),new ke(new Float64Array(e*r),e,r)}static ones(e,r){return ke.fill(1,e,r)}static fill(e,r,o){o===void 0&&(o=r);const s=new Float64Array(r*o);for(let a=0;a<s.length;a++)s[a]=e;return new ke(s,r,o)}static outer(e,r,o){if(Array.isArray(e)&&(e=We(e)),Array.isArray(r)&&(r=We(r)),!Ne(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ne(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const s=ke.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],d=s.getcolref(a+1);for(let u=0;u<e.length;u++)d[u]=o(e.v[u],c)}return s}static parseCSV(e,r,o,s){function a(w){return w.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let d=e.split(/\n/),u=[],f=0;const v=d[0].split(r);(o||o===void 0&&a(v))&&(u=v,f=1),d=d.filter(w=>w.trim().length>1);let h=[],m=0;s&&(m=1);const g=d.length-f,b=v.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const p=ke.zeros(b,g);for(let w=f;w<g+f;w++){const _=d[w].split(r);let k;if(s?(h[w-f]=_[0],k=_.slice(1).map(C=>Number.parseFloat(C.trim().replace(c,".")))):k=_.map(C=>Number.parseFloat(C.trim().replace(c,"."))),k.some(C=>Number.isNaN(C)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(k.length!=b)throw Error("Wrong number of values in row #"+w);p.v.set(new Float64Array(k),(w-f)*b)}return{values:p.t(),header:u,labels:h,sep:r,dec:c}}};Lr(ke,"valuesConstructor",Float64Array),Lr(ke,"TOLERANCE",Math.pow(10,-9));let zt=ke;function Ne(t){return t&&t.constructor===Ce}function We(t){return new Ce(new Float64Array(t))}const $e=class $e{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new xt.valuesConstructor(this.length);let o=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[o]=s+1,o=o+1);return new xt(r.subarray(0,o))}filter(e){const r=new $e.valuesConstructor(this.length);let o=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[o]=this.v[s],o=o+1);return new $e(r.subarray(0,o))}shuffle(){return new $e(Ss(this.v))}sort(e){return new $e(Ns(this.v,e))}sortind(e){return new xt(Ts(this.v,e))}rep(e){return Cs(this,e)}repeach(e){return Ms(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=xt.seq(1,this.length)),Yt(r)||(r=Wt(r));const o=r.length;if(Kr(r)<1||Er(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==o)throw Error('Vector.replace: length of "x" does not match the indices.');for(let s=0;s<r.length;s++){const a=r.v[s];this.v[a-1]=e.v[s]}return this}subset(e){if(typeof e=="number"&&(e=Wt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?xt.bool2ind(e):Wt(e)),!Yt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=$e.zeros(r);for(let s=0;s<r;s++){if(e.v[s]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[s]>this.length)throw Error("subset: index exceeds the length of the vector.");o.v[s]=this.v[e.v[s]-1]}return o}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new $e(this.v.slice(e-1,r))}copy(){return new $e(this.v.slice())}dot(e){return e===void 0&&(e=this),Uo(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Ne(e))return new $e(Yo(this.v,e.v,r));if(ks(e))return new $e(Wo(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e){const r=this.v.length,o=$e.zeros(r);for(let s=0;s<r;s++)o.v[s]=e(this.v[s]);return o}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),o=new $e.valuesConstructor(r);let s=0;for(const a of e)typeof a=="number"?(o[s]=a,s+=1):(o.set(Ne(a)?a.v:new $e.valuesConstructor(a),s),s+=typeof a=="number"?1:a.length);return new $e(o)}static seq(e,r,o){return As(e,r,o,$e)}static randn(e,r,o){return ms(e,r,o)}static rand(e,r,o){return hs(e,r,o)}static zeros(e){return new $e(new $e.valuesConstructor(e))}static ones(e){return $e.fill(1,e)}static fill(e,r){const o=new $e.valuesConstructor(r);for(let s=0;s<o.length;s++)o[s]=e;return new $e(o)}};Lr($e,"valuesConstructor",Float64Array);let Ce=$e;function Yt(t){return t.constructor===xt}function Wt(t){return new xt(new Int32Array(t))}const lt=class lt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new lt.valuesConstructor(this.length);let o=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[o]=s+1,o=o+1);return new lt(r.subarray(0,o))}filter(e){const r=new lt.valuesConstructor(this.length);let o=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(r[o]=this.v[s],o=o+1);return new lt(r.subarray(0,o))}shuffle(){return new lt(Ss(this.v))}sort(e){return new lt(Ns(this.v,e))}sortind(e){return new lt(Ts(this.v,e))}rep(e){return Cs(this,e)}repeach(e){return Ms(this,e)}subset(e){if(typeof e=="number"&&(e=Wt([e])),Array.isArray(e)&&(e=Wt(e)),!Yt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=new lt.valuesConstructor(r);for(let s=0;s<r;s++){if(e.v[s]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[s]>this.length)throw Error("subset: index exceeds the length of the vector.");o[s]=this.v[e.v[s]-1]}return new lt(o)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new lt(this.v.slice(e-1,r))}static seq(e,r,o){return As(e,r,o,lt)}static ones(e){return lt.fill(1,e)}static fill(e,r){const o=new lt.valuesConstructor(r);for(let s=0;s<o.length;s++)o[s]=e;return new lt(o)}static bool2ind(e){let r=0;const o=new lt.valuesConstructor(e.length);for(let s=0;s<e.length;s++)e[s]&&(o[r]=s+1,r=r+1);return new lt(o.subarray(0,r))}};Lr(lt,"valuesConstructor",Int32Array);let xt=lt;function As(t,e,r,o){r===void 0&&(r=t<=e?1:-1);const s=Math.floor((e-t)/r)+1;if(s<1)throw Error("seq: wrong combination of parameters.");const a=new o.valuesConstructor(s);for(let c=0;c<s;c++)a[c]=t+c*r;return new o(a)}function Cs(t,e){const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let s=1;s<=e;s++)for(let a=0;a<t.length;a++)o[(s-1)*t.length+a]=t.v[a];return new t.constructor(o)}function Ms(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let s=0;s<t.length;s++)for(let a=0;a<e;a++)o[s*e+a]=t.v[s];return new t.constructor(o)}function Yo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const o=new t.constructor(t.length);for(let s=0;s<t.length;s++)o[s]=r(t[s],e[s]);return o}function Wo(t,e,r){const o=new t.constructor(t.length);for(let s=0;s<t.length;s++)o[s]=r(t[s],e);return o}function Uo(t,e,r,o,s,a){if(o!==s)throw Error("_dot: matrix dimensions do not much.");const c=r,d=a,u=o,f=new t.constructor(c*d);for(let v=0;v<d;v++){const h=e.subarray(v*s,(v+1)*s),m=f.subarray(v*c,(v+1)*c);for(let g=0;g<u;g++){const b=h[g],p=t.subarray(g*r,(g+1)*r);for(let w=0;w<c;w++)m[w]+=p[w]*b}}return f}function Ss(t){let e=t.slice(),r=e.length,o,s;for(;r;)s=Math.floor(Math.random()*r--),o=e[r],e[r]=e[s],e[s]=o;return e}function Ns(t,e=!1){return e?t.slice().sort((r,o)=>o-r):t.slice().sort((r,o)=>r-o)}function Ts(t,e=!1){const r=xt.seq(1,t.length).v;return e?r.sort((o,s)=>t[s-1]-t[o-1]):r.sort((o,s)=>t[o-1]-t[s-1])}function Vc(t,e,r){return 5*t*e+e+4*r*e}function Dc(t,e){return 2+2*t+t*e+17*e}function It(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const o=t.ncols,s=t.ncomp;let a,c;switch(e){case"mX":a=2,c=o;break;case"sX":a=2+o,c=o;break;case"loadings":case"xloadings":a=2+2*o+(r-1)*o,c=o;break;case"P":a=2+2*o,c=r*o;break;case"eigenvals":case"xeigenvals":a=2+2*o+o*s,c=s;break;case"cq0":a=2+2*o+o*s+s,c=s;break;case"cNq":a=2+2*o+o*s+2*s,c=s;break;case"rq0":a=2+2*o+o*s+3*s,c=s;break;case"rNq":a=2+2*o+o*s+4*s,c=s;break;case"ch0":a=2+2*o+o*s+5*s,c=s;break;case"cNh":a=2+2*o+o*s+6*s,c=s;break;case"rh0":a=2+2*o+o*s+7*s,c=s;break;case"rNh":a=2+2*o+o*s+8*s,c=s;break;case"cr0":a=2+2*o+o*s+9*s,c=s;break;case"cNr":a=2+2*o+o*s+10*s,c=s;break;case"rr0":a=2+2*o+o*s+11*s,c=s;break;case"rNr":a=2+2*o+o*s+12*s,c=s;break;case"cg0":a=2+2*o+o*s+13*s,c=s;break;case"cNg":a=2+2*o+o*s+14*s,c=s;break;case"rg0":a=2+2*o+o*s+15*s,c=s;break;case"rNg":a=2+2*o+o*s+16*s,c=s;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function cn(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const o=t.ncols,s=t.nrows,a=t.ncomp;let c,d;switch(e){case"scores":case"xscores":c=(r-1)*s,d=s;break;case"hdist":c=s*a+(r-1)*s,d=s;break;case"qdist":c=2*s*a+(r-1)*s,d=s;break;case"xcumexpvar":case"cumexpvar":c=3*s*a,d=a;break;case"fdistc":c=3*s*a+a+(r-1)*s,d=s;break;case"fdistr":c=4*s*a+a+(r-1)*s,d=s;break;case"gdist":c=5*s*a+a+(r-1)*o,d=o;break;case"rdist":c=5*s*a+a+o*a+(r-1)*o,d=o;break;case"idistc":c=5*s*a+a+2*o*a+(r-1)*o,d=o;break;case"idistr":c=5*s*a+a+3*o*a+(r-1)*o,d=o;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+d)}function Ho(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let o=0;o<t.length;o++){const s=t[o];if(s<e||s>r)return!1}return!0}function zc(t,e,r,o,s,a,c){if(!pr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const d=a&&Array.isArray(a)?a.length:0;if(!Ho(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!Ho(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const f=e.nrows-d,v=e.ncols-u;if(f<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(o===void 0&&(o=!0),s===void 0&&(s=!1),r===void 0&&(r=Math.min(e.nrows-d-1,e.ncols-u)),r<1||r>Math.min(f-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(d>0){const C=new Int32Array(a);m=t._malloc(C.length*C.BYTES_PER_ELEMENT),t.HEAP32.set(C,m/C.BYTES_PER_ELEMENT)}let g=null;if(u>0){const C=new Int32Array(c);g=t._malloc(C.length*C.BYTES_PER_ELEMENT),t.HEAP32.set(C,g/C.BYTES_PER_ELEMENT)}const b=Dc(v,r),p=Float64Array,w=t._malloc(b*p.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,r,o,s,w,m,d,g,u])!==1)throw new Error("pca_fit: PCA failed.");const k=t.HEAPF64.slice(w/p.BYTES_PER_ELEMENT,w/p.BYTES_PER_ELEMENT+b);return t._free(h),t._free(w),m&&t._free(m),g&&t._free(g),{class:["pcamodel"],v:k,ncomp:r,nrows:f,ncols:v,exclvars:c,center:o,scale:s}}function Yc(t,e,r,o){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!pr(r))throw new Error("pca_predict: X must be a matrix.");o||(o=[]);const s=o&&Array.isArray(o)?o.length:0;if(!Ho(o,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=r.nrows-s;r.ncols===e.ncols&&(a=0);const d=r.ncols-a;if(c<1)throw new Error("pca_predict: X must have at least 1 row.");if(d!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const u=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,u/r.v.BYTES_PER_ELEMENT);let f=null;if(s>0){const N=new Int32Array(o);f=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,f/N.BYTES_PER_ELEMENT)}let v=null;if(a>0){const N=new Int32Array(e.exclvars);v=t._malloc(N.length*N.BYTES_PER_ELEMENT),t.HEAP32.set(N,v/N.BYTES_PER_ELEMENT)}const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const m=Vc(r.nrows-s,e.ncomp,r.ncols-a),g=Float64Array,b=t._malloc(m*g.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[u,r.nrows,r.ncols,h,b,f,s,v,a])!==1)throw new Error("pca_predict: PCA prediction failed.");const w=t.HEAPF64.slice(b/g.BYTES_PER_ELEMENT,b/g.BYTES_PER_ELEMENT+m);t._free(u),t._free(h),t._free(b),f&&t._free(f),v&&t._free(v);const _={class:["pcares"],v:w,ncomp:e.ncomp,nrows:c,ncols:d,outliers:o,exclvars:e.exclvars,center:e.center,scale:e.scale},k=new Array(e.ncomp),C=new Array(e.ncomp),y=new Array(e.ncomp),A=new Array(e.ncomp),P=new Array(e.ncomp),M=cn(_,"xcumexpvar");P[0]=1,A[0]=M[0],y[0]=1-M[0],k[0]=M[0],C[0]=1-M[0];for(let N=1;N<e.ncomp;N++)P[N]=N+1,A[N]=M[N],y[N]=1-M[N],k[N]=M[N]-M[N-1],C[N]=1-k[N];return _.stat={components:P,resvar:C,expvar:k,cumexpvar:A,cumresvar:y},_}function Wc(t,e){let r,o,s;if(e.length>0){const a=t.values.nrows,c=t.objindices,d=a-e.length;r=Array(d),o=Array(d),s=Array(d);let u=0;for(let f=0;f<a;f++)e.includes(f)||(r[u]=c[f],o[u]=t.classes[f],s[u]=t.objlabels[f],u=u+1)}else r=t.objindices,s=t.objlabels,o=t.classes;return[r,s,o]}function Is(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Ps(t,e,r,o){const[s,a,c]=Wc(r,o),d=Yc(t,e,r.values,o);d.hash=Is(),d.objindices=s,d.objlabels=a,d.classes=c,d.classNames=r.classNames,d.varlabels=r.varlabels,d.eigenvals=It(e,"eigenvals"),d.cNh=It(e,"cNh"),d.cNq=It(e,"cNq"),d.ch0=It(e,"ch0"),d.cq0=It(e,"cq0"),d.rNh=It(e,"rNh"),d.rNq=It(e,"rNq"),d.rh0=It(e,"rh0"),d.rq0=It(e,"rq0");const u=e.nrows;return d.T2lim=2*(u-1)/(u-2)*ps(.95,2,u-2),d}function Uc(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function un(t){return t.some(e=>Number.isNaN(e))}function Ar(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ls(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Hc(t,e,r,o,s,a,c,d=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let v=Ls(t);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");const h=v[0].split(e);if(h.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let m=0,g;const b=r!=="no";(b||b===void 0&&un(firstRow))&&(g=h,m=1);const p=v.length-m;if(p<1)throw new Error("Data file should contain at least 1 row with values.");let w,_,k,C=Array(p);o?(w=b?Ar(g[0]):"",k=Array(p),_=1):(w="",k=[],_=0);let y,A=[],P;s?(y=b?Ar(g[_]):"",P=Array(p),_=_+1):(y="",P=[]);const M=h.length-_;if(M<1)throw new Error("Data file should contain at least 1 column with values.");const N=zt.zeros(M,p);for(let j=m;j<p+m;j++){const z=j-m;C[z]=z;let G=v[j].split(e);if(o&&(k[z]=G[0],G.shift()),s){const Z=G[0];P[z]=Z,G.shift(),(A.length===0||A.indexOf(Z)<0)&&A.push(Z)}const K=f==="."?G.map(Z=>Number.parseFloat(Z.trim())):G.map(Z=>Number.parseFloat(Z.trim().replace(f,".")));if(K.some(Z=>Number.isNaN(Z)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(K.length!=M)throw new Error("Wrong number of values in row #"+j);N.v.set(new Float64Array(K),(j-m)*M)}if(!o||k.length!==p){k=Array(p);for(let j=0;j<p;j++)k[j]="O"+(j+1)}k=k.map(j=>Ar(j)),P=P.map(j=>Ar(j)),A=A.map(j=>Ar(j));let L,D=Array(M),T=Array(M);if(g&&g.length===M+_){L=g.map(j=>Ar(j)).slice(_);for(let j=0;j<M;j++)D[j]=j,T[j]=j+1}else{L=Array(M);for(let j=0;j<M;j++)D[j]=j,L[j]="V"+(j+1),T[j]=j+1}let F;if(r==="values"){if(F=f==="."?L.map(j=>Number.parseFloat(j.trim())):L.map(j=>Number.parseFloat(j.trim().replace(f,"."))),F.some(j=>Number.isNaN(j)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else F=T;Array.isArray(F)||(F=[]),a||(a=""),c||(c=""),a=F.length>0&&a.length>0?a:"Variables",c=F.length>0&&c.length>0?c:"";const H=a+(c.length>0?", "+c:""),W=F[1]<F[0];return{values:N.t(),header:r,hasLabels:o,hasClassNames:s,labelsVarname:w,classLabelsVarname:y,objlabels:k,objindices:C,varlabels:L,varvalues:F,varindices:D,varrev:W,classes:P,responses:null,classNames:A,sep:e,dec:f,varvaluesName:a,varvaluesUnits:c,varAxisTitle:H}}function Gc(t){if(un(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let o=2;o<e;o++){let s=[];for(let f=1;f<t.length;f++)s.push(t[f][o]);const a=t[0][o],c=Vn(s),d=Ro(s),u=Math.abs((a-c)/d);r.push(u)}return r.every(o=>o>5)}function Kc(t){const e=",",r=t[0].split(e),o=t[1].split(e),s=r.length,a=o.length,c=";",d=t[0].split(c),u=t[1].split(c),f=d.length,v=u.length;let h,m;if(s>1&&a>1&&s===a&&s>f)m=e,h=s;else if(f>1&&v>1&&f===v)m=c,h=a;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",h]}function Xc(t){const e=Ls(t),r=e.length;if(r<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,s,a]=Kc(e),c=Math.min(a,5),d=Math.min(r,5);let u=e.slice(0,d).map(M=>M.split(o).slice(0,c));u=u.map(M=>M.map(N=>Ar(N)));const f=u.map(M=>Uc(M.slice(),s));for(let M=1;M<d;M++)if(un(f[M].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const v=Gc(f);let h=0;const m=v?1:0,g=m+1,b=u[m][0],p=u[g][0],w=f[m][0],_=f[g][0],k=f[m][1],C=f[g][1];let y=!1,A=!1;if(Number.isNaN(w)&&Number.isNaN(_)&&b!==p?(y=!0,h=h+1):Number.isNaN(k)&&Number.isNaN(C)&&b!==p&&(y=!0,A=!0,h=h+2),!A){const M=y?1:0,N=f[m][M],L=f[g][M];A=un([N,L]),h=h+A}let P="no";if(v){h>0?u[0].slice(h):u[0];const M=h>0?f[0].slice(h):f[0];P=un(M)?"labels":"values"}return[o,y,A,P]}function Rs(t,e){return pr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ne(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function js(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Bc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return We(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Go(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${o}${s}${a}${c}`}function Fs(t,e,r,o,s){(!o||!Array.isArray(o))&&(o=[]);const a=e.values.nrows,c=e.values.ncols,d=o.length,u=a-d,f=t.ncomp,v=4,h=Math.max(f,v),m=Array(h).fill(""),g=f>h?Array(h-f).fill(""):[],b=Array(f).fill(0).map((P,M)=>"PC"+(M+1)),p=e.sep;function w(P,M,N){_+=`
`,_+=[P+": ","",...m].join(p)+`
`,_+=["object","group","outlier",...b,...g].join(p)+`
`;const L=t.v.subarray(M,M+f*u);for(let D=0;D<a;D++){const T=e.classes?e.classes[D]:"-";if(d>0&&o.includes(D)){_+=[N[D],T,"yes",...Array(f).fill("-"),...g].join(p)+`
`;continue}const F=Array(f);for(let H=0;H<f;H++)F[H]=L[H*u+D];_+=[N[D],T,"",...F,g].join(p)+`
`}_+=`
`}let _="";if(_+=["Number of components:",f,...m].join(p)+`
`,_+=["Center: ",t.center,...m].join(p)+`
`,_+=["Scale: ",t.scale,...m].join(p)+`
`,_+=`
`,_+=["Statistics: ","",...m].join(p)+`
`,s){const P=v>h?Array(h-v-1).fill(""):[];_+=["","PC","Expvar","Cumexpvar","Resvar","Cumresvar","Eigenvalues",...P].join(e.sep)+`
`;for(let M=0;M<f;M++)_+=["",M+1,t.stat.expvar[M],t.stat.cumexpvar[M],t.stat.resvar[M],t.stat.cumresvar[M],t.eigenvals[M],...P].join(e.sep)+`
`}else{const P=v>h?Array(h-v).fill(""):[];_+=["","PC","Expvar","Cumexpvar","Resvar","Cumresvar",...P].join(p)+`
`;for(let M=0;M<f;M++)_+=["",M+1,t.stat.expvar[M],t.stat.cumexpvar[M],t.stat.resvar[M],t.stat.cumresvar[M],...P].join(p)+`
`}if(_+=`
`,s){_+=`
`,_+=["Loading, center and scale values: ","",...m].join(p)+`
`,_+=["variable","center","scale",...b,...g].join(p)+`
`;const P=s.v.subarray(2,2+c),M=s.v.subarray(2+c,2+c*2),N=s.v.subarray(2+c*2,u+c*2+f*c);for(let L=0;L<c;L++){const D=Array(f);for(let T=0;T<f;T++)D[T]=N[T*f+L];_+=[e.varlabels[L],P[L],M[L],...D,g].join(p)+`
`}_+=`
`}w("Scores",0,e.objlabels),w("Score distances, h",f*u,e.objlabels),w("Orthogonal distances, q",f*u*2,e.objlabels),e.dec!=="."&&(_=_.replace(/\./g,e.dec)),_=["Data filename:",e.fileName,...m].join(e.sep)+`
`+_;let k=["PCA results ("+r+")","https://mda.tools/pca/",...m].join(e.sep)+`

`;const C=new Blob([k+_],{type:"text/csv"}),y=window.URL.createObjectURL(C),A=document.createElement("a");A.setAttribute("href",y),A.setAttribute("download",`pca-results-${r}.csv`),A.click()}function Qc(t){const e=new Blob([JSON.stringify({center:t.center,class:t.class,hash:t.hash,exclvars:t.exclvars,ncols:t.ncols,ncomp:t.ncomp,nrows:t.nrows,prep:t.prep,scale:t.scale,v:Array.from(t.v),exclvars:t.exclvars,varlabels:t.varlabels,varvalues:t.varvalues,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits})],{type:"application/json"}),r=window.URL.createObjectURL(e),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download","pca-model.json"),o.click()}var Jc=J('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function Ot(t,e){let r=B(e,"text",3,"button");var o=Jc();o.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var s=O(o);re(()=>xe(s,r())),I(t,o)}Ze(["click"]);var Zc=J('<button tabindex="0"></button>');function $c(t,e){var r=Zc();r.__click=function(...o){var s;(s=e.onclick)==null||s.apply(this,o)},re(()=>{S(r,"title",e.title),S(r,"aria-label",e.title),S(r,"alt",e.title),Ur(r,`button ${e.className??""} svelte-bx9fh5`)}),I(t,r)}Ze(["click"]);function fn(t,e){let r=B(e,"title",3,"Reset");$c(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function Zt(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var eu=J('<span class="label svelte-h4yni9"> </span>'),tu=J("<div><!> <!></div>");function Me(t,e){let r=B(e,"label",3,null),o=B(e,"status",3,""),s=B(e,"colors",3,""),a=B(e,"labelWidth",3,12);var c=tu(),d=O(c);{var u=v=>{var h=eu(),m=O(h);re(()=>{S(h,"style",`flex-basis:${a()??""}ch;`),xe(m,r())}),I(v,h)};U(d,v=>{r()&&v(u)})}var f=q(d,2);kr(f,()=>e.children??at),re(()=>{Ur(c,`control-element ${o()??""} svelte-h4yni9`),S(c,"style",s())}),I(t,c)}const qs=(t,e,r,o)=>{const s=e(t);s<0||s>1||V(r,ee(s*100>l(o)-5&&s*100<l(o)+5))},Os=(t,e,r,o,s)=>{V(e,!1);const a=r(t);a<0||a>1||o(s(a))},Bs=(t,e,r,o,s)=>{if(!l(e))return;const a=r(t);a<0||a>1||o(s(a))},ru=(t,e,r,o,s)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>s()?s():e()+r());return}};var nu=J('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div class="range-slider svelte-vhx0r0"><span class="range-value svelte-vhx0r0"> </span></div></div>');function ou(t,e){ge(e,!0);let r=B(e,"min",7,0),o=B(e,"max",3,100),s=B(e,"value",31,()=>ee(r())),a=B(e,"decNum",3,1),c=B(e,"step",19,()=>+((o()-r())/100).toFixed(4));ze(()=>{s()<r()&&s(r()),s()>o()&&s(o()),r()>o()&&r(o())});let d=le(void 0),u=le(void 0),f=le(!1);const v=C=>{const y=r()+C*(o()-r());return+(Math.round(y/c())*c()).toFixed(4)},h=C=>{const y=l(d).getBoundingClientRect(),A=l(u).getBoundingClientRect(),P=y.x,M=A.x+A.width;return(C.clientX-P)/(M-P)},m=C=>{V(f,!1)},g=C=>{let y=s()+c()*C.deltaY*.5;y<r()&&(y=r()),y>o()&&(y=o()),s(+(Math.round(y/c())*c()).toFixed(4)),C.preventDefault()},b=E(()=>r()===o()?100:(s()-r())/(o()-r())*100);var p=nu();p.__keydown=[ru,s,c,r,o],p.__mousemove=[Bs,f,h,s,v],p.__mousedown=[qs,h,f,b],p.__mouseup=[Os,f,h,s,v],p.__touchmove=[Bs,f,h,s,v],p.__touchstart=[qs,h,f,b],p.__touchend=[Os,f,h,s,v];var w=O(p),_=O(w),k=O(_);Hr(w,C=>V(d,C),()=>l(d)),Hr(p,C=>V(u,C),()=>l(u)),re(C=>{S(p,"aria-valuenow",s()),S(p,"aria-valuemin",r()),S(p,"aria-valuemax",o()),S(w,"style",`width:${l(b)??""}%`),yt(w,"range-slider_right",l(b)<50),yt(_,"range-value_right",l(b)<50),xe(k,C)},[()=>s().toFixed(a())]),vr("mousewheel",p,g),vr("mouseleave",p,m),vr("touchcancel",p,m),I(t,p),pe()}Ze(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Vs=(t,e,r,o,s)=>{const a=e(t);a<0||a>1||V(r,ee(a>l(o)&&a<l(s)+l(o)))},Ds=(t,e,r,o,s)=>{V(e,!1);const a=r(t);if(a<0||a>1)return;const c=o(a);s()!==c&&s(c)},zs=(t,e,r,o,s)=>{if(!l(e))return;const a=r(t);if(a<0||a>1)return;const c=o(a);c!=s()&&s(c)},lu=(t,e,r,o,s)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>s()?s():e()+r());return}};var su=J('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div class="range-slider svelte-xdlm7u"><span class="range-value svelte-xdlm7u"> </span></div></div>');function br(t,e){ge(e,!0);let r=B(e,"min",3,0),o=B(e,"max",3,10),s=B(e,"value",31,()=>ee(r())),a=B(e,"step",3,1);s()<r()&&(console.error('The "value" is outside of the provided range.'),s(r())),s()>o()&&(console.error('The "value" is outside of the provided range.'),s(o())),r()>o()&&console.error("The min and max values must be distinct.");let c=le(void 0),d=le(void 0),u=le(!1);const f=E(()=>r()===o()?0:(s()-r())/(o()-r()+1)),v=E(()=>a()/(o()-r()+1)),h=E(()=>o()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*l(v)}%)`:"background: #f0f0f0"),m=y=>{if(y<0||y>1)return s();let A=s();return y<l(f)&&l(f)>0&&(A=s()-Math.ceil((l(f)-y)/l(v))),y>l(f)+l(v)&&l(f)+l(v)<1&&(A=s()+Math.ceil((y-(l(f)+l(v)))/l(v))),A<r()&&(A=r()),A>o()&&(A=o()),A},g=y=>{const A=l(d).getBoundingClientRect(),P=A.x,M=A.x+A.width;return(y.clientX-P)/(M-P)},b=y=>{V(u,!1)},p=y=>{let A=Math.round(s()+y.deltaY*.5*a());A<r()&&(A=r()),A>o()&&(A=o()),s(A),y.preventDefault()};var w=su();w.__keydown=[lu,s,a,r,o],w.__mousemove=[zs,u,g,m,s],w.__mousedown=[Vs,g,u,f,v],w.__mouseup=[Ds,u,g,m,s],w.__touchmove=[zs,u,g,m,s],w.__touchstart=[Vs,g,u,f,v],w.__touchend=[Ds,u,g,m,s];var _=O(w),k=O(_),C=O(k);Hr(_,y=>V(c,y),()=>l(c)),Hr(w,y=>V(d,y),()=>l(d)),re(y=>{S(w,"aria-valuenow",s()),S(w,"aria-valuemin",r()),S(w,"aria-valuemax",o()),S(w,"style",l(h)),S(_,"style",`width: max(2px, ${l(v)*100}%);left:${l(f)*100}%;`),yt(_,"range-slider_left",l(v)<.1&&l(f)<.5),yt(_,"range-slider_right",l(v)<.1&&l(f)>=.5),yt(k,"range-value_right",l(v)<.1&&l(f)>.5),yt(k,"range-value_left",l(v)<.1&&l(f)<=.5),xe(C,y)},[()=>s().toFixed(0)]),vr("mousewheel",w,p),vr("mouseleave",w,b),vr("touchcancel",w,b),I(t,w),pe()}Ze(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const au=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e.options.findIndex(s=>s===r());o>0&&r(e.options[o-1]);return}if(t.key==="ArrowRight"){const o=e.options.findIndex(s=>s===r());o<e.options.length-1&&r(e.options[o+1]);return}};var iu=(t,e,r)=>e(r),cu=J('<button tabindex="-1"><!></button>'),uu=J('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function ut(t,e){ge(e,!0);let r=B(e,"value",31,()=>ee(e.options[0])),o=B(e,"className",3,"");var s=uu(),a=Q(s);a.__keydown=[au,e,r],Ye(a,20,()=>e.options,d=>d,(d,u)=>{var f=cu();f.__click=[iu,r,u];var v=O(f);vt(v,()=>u,!1,!1),re(()=>{Ur(f,`option option_${u??""} svelte-1i17tox`),yt(f,"selected",u==r())}),I(d,f)});var c=q(a,2);re(()=>Ur(a,`selector ${o()??""} svelte-1i17tox`)),To(c,r),I(t,s),pe()}Ze(["keydown","click"]);function Bt(t,e){ge(e,!0);let r=B(e,"options",19,()=>["no","yes"]),o=B(e,"value",15,!1),s=le(!0);const a=E(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());ze(()=>V(s,ee(o()?r()[1]:r()[0]))),ze(()=>o(l(s)===r()[1]));var c=me(),d=Q(c);{var u=f=>{ut(f,{get options(){return l(a)},get value(){return l(s)},set value(v){V(s,ee(v))}})};U(d,f=>{l(a)&&f(u)})}I(t,c),pe()}var fu=J('<div tabindex="0" role="radiogroup" class="file-selector svelte-1k0x7uv"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function Ys(t,e){ge(e,!0);let r=B(e,"file",15),o=B(e,"message",3,"Select CSV file with dataset"),s=B(e,"acceptType",3,".csv"),a;function c(p){a&&a.files.length>0?r(a.files[0]):r(null)}function d(p){(p.type==="click"||p.type==="keydown"&&(p.code==="Space"||p.code==="Enter"))&&a.click()}function u(p){a.value=null,r(null)}var f=fu(),v=Q(f);v.__keydown=d,v.__click=d;var h=O(v),m=q(h);m.__change=c,Hr(m,p=>a=p,()=>a);var g=q(v,2);{var b=p=>{fn(p,{onclick:u})};U(g,p=>{r()&&p(b)})}re(()=>{yt(v,"selected",r()),xe(h,`${(r()?r().name:o())??""} `),S(m,"accept",s())}),I(t,f),pe()}Ze(["keydown","click","change"]);function du(t,e,r,o){e()&&V(r,ee(e()(o())))}var vu=J('<div class="error-message svelte-1qtiwcs"> </div>'),hu=J('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function Ws(t,e){ge(e,!0);let r=B(e,"value",15,""),o=B(e,"className",3,""),s=B(e,"placeholder",3,""),a=B(e,"maxLength",3,25),c=B(e,"validator",3,null),d=le("");var u=hu(),f=O(u);f.__input=[du,c,d,r];var v=q(f,2);{var h=m=>{var g=vu(),b=O(g);re(()=>xe(b,l(d))),I(m,g)};U(v,m=>{l(d)&&l(d).length>0&&m(h)})}re(()=>{Ur(u,`textinput ${o()??""} svelte-1qtiwcs`),yt(u,"error",l(d)&&l(d).length>0),S(f,"placeholder",s()),S(f,"maxlength",a())}),To(f,r),I(t,u),pe()}Ze(["input"]);var mu=J('<div class="spinner svelte-n48urb"></div>');function Us(t){var e=mu();I(t,e)}const gu=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e().findIndex(s=>s===r());o>0&&r(e()[o-1]);return}if(t.key==="ArrowRight"){const o=e().findIndex(s=>s===r());o<e().length-1&&r(e()[o+1]);return}};var pu=(t,e,r)=>e(r),bu=J('<button tabindex="-1" class="option svelte-yf64an"><!></button>'),wu=J('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an">',1);function Hn(t,e){ge(e,!0);let r=B(e,"options",19,()=>["p","l","b","h"]),o=B(e,"value",31,()=>ee(r()[0]));const s='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar"};var d=wu(),u=Q(d);u.__keydown=[gu,r,o],Ye(u,20,r,v=>v,(v,h)=>{var m=bu();m.__click=[pu,o,h];var g=O(m);vt(g,()=>s+a[h]+"</svg",!1,!1),re(()=>{S(m,"title",c[h]),yt(m,"selected",h==o())}),I(v,m)});var f=q(u,2);To(f,o),I(t,d),pe()}Ze(["keydown","click"]),Ze(["keydown","click"]);var _u=J("<h2> </h2>"),yu=J("<!> <!>",1),xu=J('<div class="widget"><!></div>');function ku(t,e){ge(e,!0);let r=B(e,"title",3,""),o=B(e,"value",15),s=B(e,"labelWidth",3,13);function a(f){const v={};for(const h of Object.keys(f))v[h]=f[h].default;return v}ze(()=>{!o()&&e.options&&o(a(e.options))});var c=xu(),d=O(c);{var u=f=>{var v=yu(),h=Q(v);{var m=b=>{Me(b,{children:(p,w)=>{var _=_u(),k=O(_);re(()=>xe(k,r())),I(p,_)},$$slots:{default:!0}})};U(h,b=>{r()&&b(m)})}var g=q(h,2);Ye(g,17,()=>Object.keys(e.options),Ke,(b,p)=>{var w=me();const _=E(()=>e.options[l(p)]);var k=Q(w);{var C=y=>{Me(y,{get label(){return l(_).label},get labelWidth(){return s()},children:(A,P)=>{var M=me(),N=Q(M);Mo(N,()=>l(_).el,(L,D)=>{D(L,Gr(()=>l(_).props,{get value(){return o()[l(p)]},set value(T){o(o()[l(p)]=T,!0)}}))}),I(A,M)},$$slots:{default:!0}})};U(k,y=>{l(_).hidden||y(C)})}I(b,w)}),I(f,v)};U(d,f=>{o()&&f(u)})}I(t,c),pe()}var Eu=J('<p class="dataset-info svelte-gdjwex"><span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <span class="file-size svelte-gdjwex"> </span></p> <!>',1);function Hs(t,e){ge(e,!0);var r=me(),o=Q(r);{var s=a=>{Me(a,{children:(c,d)=>{var u=Eu(),f=Q(u),v=q(O(f),2),h=O(v),m=q(v,5),g=O(m),b=q(f,2);fn(b,{get onclick(){return e.reset}}),re(()=>{S(v,"title",e.dataset.fileName),xe(h,e.dataset.fileName),xe(g,`${e.dataset.values.nrows??""} × ${e.dataset.values.ncols??""}`)}),I(c,u)},$$slots:{default:!0}})};U(o,a=>{e.dataset&&a(s)})}I(t,r),pe()}var Au=J("<!> <!>",1),Cu=J("<!> <!> <!> <!> <!> <!>",1),Mu=J("<!> <!>",1),Su=J("<p> </p>"),Nu=J("<!> <p> </p>",1),Tu=J("<p> </p>"),Iu=J("<!> <!>",1);function Gs(t,e){ge(e,!0);let r=B(e,"model",3,null),o=B(e,"outliers",19,()=>[]),s=B(e,"className",3,"Class"),a=B(e,"classMandatory",3,!1),c=B(e,"classUnique",3,!1),d=B(e,"dataset",15),u=B(e,"resobj",15);const f=[",",";"],v=E(()=>r()?["no","yes"]:["no","labels","values"]);let h=le(void 0),m=le(""),g=le(""),b=le(","),p=le("no"),w=le(!1),_=le(!1),k=le(null),C=le("neutral"),y=le("");function A(j,z,G){V(k,ee(e.WASM().then(K=>{u(Ps(K,j,z,G))}).catch(K=>{console.error(K),u(null),V(C,"error"),V(y,ee(K))})))}function P(j,z){if(!j||j.size<10)return;const K=j.slice(0,1e5),Z=new FileReader;Z.onload=()=>{const $=Z.result;!$||$.length<0||((ue=>(V(b,ee(ue[0])),V(w,ee(ue[1])),V(_,ee(ue[2])),V(p,ee(ue[3]))))(Xc($)),V(_,ee(a()||l(_))),z&&l(p)!=="no"&&V(p,"yes"))},Z.onerror=function($){csvString=null,V(C,"error"),V(y,ee($)),console.error("Error reading CSV file.",$)},Z.readAsText(K)}function M(j){try{const z=Hc(j,l(b),l(p)==="yes"?"labels":l(p),l(w),l(_),l(m),l(g));if(z.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(r()&&z.values.ncols!==r().ncols+r().exclvars.length)throw new Error("Dataset has different number of columns than the training set.");if(z.classNames.length>z.values.nrows/2)throw new Error("Dataset has too many unique "+s().toLowerCase()+" labels ("+z.classNames.length+"), check your CSV file.");if(a()&&z.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&z.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");z.fileName=l(h).name.replace(/\.[^/.]+$/,""),r()&&(z.varrev=r().varrev,z.header=r().header,z.varlabels=r().varlabels,z.varvalues=r().varvalues,z.varvaluesName=r().varvaluesName,z.varvaluesUnits=r().varvaluesUnits),d(z),V(y,""),V(C,"success")}catch(z){d(null),V(C,"error"),V(y,ee(z))}}function N(j){const z=new FileReader;z.onload=()=>{M(z.result)},z.readAsText(l(h))}function L(){V(h,""),d(null),u(null),V(m,""),V(g,""),V(C,"neutral"),V(y,"")}ze(()=>{l(h)===null?L():(P(l(h),r()),V(C,"neutral"),V(y,""))}),ze(()=>{l(b)&&(V(C,"neutral"),V(y,""))}),ze(()=>{if(d()&&r()&&!u())try{u(A(r(),d(),o())),V(y,""),V(C,"success")}catch(j){d(null),u(null),V(C,"error"),V(y,ee(j))}});var D=Iu(),T=Q(D);{var F=j=>{var z=Mu(),G=Q(z);Fn(G,()=>l(h)===void 0,$=>{Me($,{children:(ue,X)=>{Ys(ue,{id:"dataFile",message:"Select CSV file with dataset",get file(){return l(h)},set file(te){V(h,ee(te))}})},$$slots:{default:!0}})});var K=q(G,2);{var Z=$=>{var ue=Cu(),X=Q(ue);Me(X,{label:"Delimiter",children:(ce,se)=>{ut(ce,{id:"sep",options:f,get value(){return l(b)},set value(Te){V(b,ee(Te))}})},$$slots:{default:!0}});var te=q(X,2);Me(te,{label:"Row labels",children:(ce,se)=>{Bt(ce,{id:"hasLabels",options:["no","yes"],get value(){return l(w)},set value(Te){V(w,ee(Te))}})},$$slots:{default:!0}});var fe=q(te,2);{var be=ce=>{Me(ce,{get label(){return`${s()??""} labels`},children:(se,Te)=>{Bt(se,{id:"hasLabels",options:["no","yes"],get value(){return l(_)},set value(Ee){V(_,ee(Ee))}})},$$slots:{default:!0}})};U(fe,ce=>{a()||ce(be)})}var we=q(fe,2);Me(we,{label:"Header",children:(ce,se)=>{ut(ce,{id:"header",get options(){return l(v)},get value(){return l(p)},set value(Te){V(p,ee(Te))}})},$$slots:{default:!0}});var ae=q(we,2);{var _e=ce=>{var se=Au(),Te=Q(se);Me(Te,{label:"Header name",children:(Pe,wt)=>{Ws(Pe,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return l(m)},set value(Et){V(m,ee(Et))}})},$$slots:{default:!0}});var Ee=q(Te,2);Me(Ee,{label:"Header units",children:(Pe,wt)=>{Ws(Pe,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return l(g)},set value(Et){V(g,ee(Et))}})},$$slots:{default:!0}}),I(ce,se)};U(ae,ce=>{l(p)==="values"&&ce(_e)})}var ie=q(ae,2);Me(ie,{label:" ",children:(ce,se)=>{Ot(ce,{text:"Load",onclick:N})},$$slots:{default:!0}}),I($,ue)};U(K,$=>{l(h)&&$(Z)})}I(j,z)},H=j=>{var z=me(),G=Q(z);{var K=$=>{var ue=me(),X=Q(ue);Ql(X,()=>l(k),te=>{Me(te,{children:(fe,be)=>{var we=Nu(),ae=Q(we);Us(ae);var _e=q(ae,2),ie=O(_e);re(()=>xe(ie,r()?"Loading data and apply model...":"Loading data...")),I(fe,we)},$$slots:{default:!0}})},(te,fe)=>{var be=me(),we=Q(be);{var ae=_e=>{Hs(_e,{get dataset(){return d()},reset:L})};U(we,_e=>{d()!==null&&_e(ae)})}I(te,be)},(te,fe)=>{Me(te,{status:"error",children:(be,we)=>{var ae=Su(),_e=O(ae);re(()=>xe(_e,l(fe))),I(be,ae)},$$slots:{default:!0}})}),I($,ue)},Z=$=>{var ue=me(),X=Q(ue);{var te=fe=>{Hs(fe,{get dataset(){return d()},reset:L})};U(X,fe=>{d()&&fe(te)})}I($,ue)};U(G,$=>{l(k)?$(K):$(Z,!1)})}I(j,z)};U(T,j=>{d()?j(H,!1):j(F)})}var W=q(T,2);{var ne=j=>{Me(j,{status:"error",children:(z,G)=>{var K=Tu(),Z=O(K);re(()=>xe(Z,l(y))),I(z,K)},$$slots:{default:!0}})};U(W,j=>{(l(C)==="error"||l(y))&&j(ne)})}I(t,D),pe()}var Pu=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td></tr>'),Lu=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td></tr>'),Ru=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td></tr>'),ju=J('<table class="svelte-1xneg44"><thead><tr class="svelte-1xneg44"><th class="svelte-1xneg44">PC</th><th class="svelte-1xneg44">Expvar</th><th class="svelte-1xneg44">Cumexpvar</th><th class="svelte-1xneg44">Eigenvals</th></tr></thead><tbody><!><!><!></tbody></table>');function Ks(t,e){ge(e,!0);const r=16,o=E(()=>e.resobj?e.resobj.stat.cumexpvar:null),s=E(()=>e.resobj?e.resobj.stat.expvar:null),a=E(()=>e.resobj?e.resobj.eigenvals.map(f=>f*(e.resobj.nrows-1)):null);var c=me(),d=Q(c);{var u=f=>{var v=ju(),h=q(O(v)),m=O(h);Ye(m,17,()=>e.resobj.stat.components.filter(_=>_<r),Ke,(_,k)=>{var C=Pu(),y=O(C),A=O(y),P=q(y),M=O(P),N=q(P),L=O(N),D=q(N),T=O(D);re((F,H,W)=>{xe(A,l(k)),xe(M,F),xe(L,H),xe(T,W)},[()=>(l(s)[l(k)-1]*100).toFixed(2),()=>(l(o)[l(k)-1]*100).toFixed(2),()=>l(a)[l(k)-1].toFixed(2)]),I(_,C)});var g=q(m);{var b=_=>{var k=Lu();I(_,k)};U(g,_=>{e.resobj.ncomp>r&&_(b)})}var p=q(g);{var w=_=>{var k=Ru(),C=O(k),y=O(C),A=q(C),P=O(A),M=q(A),N=O(M),L=q(M),D=O(L);re((T,F,H)=>{xe(y,e.resobj.ncomp),xe(P,T),xe(N,F),xe(D,H)},[()=>((l(o)[e.resobj.ncomp-1]-l(o)[e.resobj.ncomp-2])*100).toFixed(2),()=>(l(o)[e.resobj.ncomp-1]*100).toFixed(2),()=>l(a)[e.resobj.ncomp-1].toFixed(2)]),I(_,k)};U(p,_=>{e.resobj.ncomp>=r&&_(w)})}I(f,v)};U(d,f=>{e.resobj&&f(u)})}I(t,c),pe()}var Fu=J('<span class="item svelte-1ggez3e"> </span>'),qu=J('<p class="outliers svelte-1ggez3e">Removed: <!></p> <!>',1);function Xs(t,e){ge(e,!0);var r=me(),o=Q(r);{var s=a=>{Me(a,{children:(c,d)=>{var u=qu(),f=Q(u),v=q(O(f));Ye(v,17,()=>e.outliers,Ke,(m,g)=>{var b=Fu(),p=O(b);re(()=>xe(p,e.dataset.objlabels[l(g)])),I(m,b)});var h=q(f,2);fn(h,{get onclick(){return e.resetOutliers}}),I(c,u)},$$slots:{default:!0}})};U(o,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(s)})}I(t,r),pe()}const Ou={small:30,medium:40,large:50,xlarge:60},Bu={small:5,medium:8,large:12,xlarge:15},Vu={small:6,medium:10,large:14,xlarge:18},Ko={small:4,medium:6,large:8,xlarge:10},Du={small:12,medium:15,large:19,xlarge:21},Xo={small:11,medium:15,large:17,xlarge:19},dn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Gn=["●","◼","▲","▼","⬥","＋","✳","✕"],zu=.8,Qs=.5,Yu={small:5,medium:8,large:12,xlarge:15},kt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Js(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function Zs(t,e){if(t!=null&&(Array.isArray(t)&&(t=We(t)),!(!Ne(t)||t.length<1)))return t.apply(r=>tl((r-e[1])*e[0]+e[2])).v}function tt(t,e){return Zs(t,e.coords)}function Qo(t,e){return Zs(t,e.objects)}function $s(t,e){if(t!=null&&(Array.isArray(t)&&(t=We(t)),!(!Ne(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function ea(t,e){return $s(t,e.coords)}function ta(t,e){return $s(t,e.objects)}function Jo(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Cr(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Zo(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Cr(Math.abs(Kr(as(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Cr(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let o=Math.ceil(-Cr(Math.log10(e)));return o<=2?[0,Array.from(t).map(s=>s.toFixed(o))]:(r=o-2,o=2,Cr(Math.abs(Er(t)))<=10?[-r,Array.from(t).map(s=>(s*Math.pow(10,r)).toFixed(o))]:[-r,Array.from(t).map(s=>(s/Math.pow(10,r)).toString())])}function bt(t,e,r){return Array.isArray(t)&&(t=We(t)),Ne(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function $o(t,e,r,o){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const s=r.coords,a=o.coords;let c="";for(let d=0;d<t.length;d++){const u=tl((t.v[d]-s[1])*s[0]+s[2]),f=tl((e.v[d]-a[1])*a[0]+a[2]);c+=u+","+f+" "}return c}function ra(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Kn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function na(t,e){if(Array.isArray(t)&&(t=We(t)),!Ne(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const o=e[0]<e[1]?e[0]:e[1],s=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=o&c<=s);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function el(t,e,r,o,s,a){s==null&&(s=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const d=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*d,f=Math.floor(Math.log10(u)),v=1/Math.pow(10,f-1),h=Math.round(u*v)/v;let m=Wu(h/r);s&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+d)/m)*m,b=Math.floor((c[1]-d)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-b)<m/10&&(b=b-m),r=Math.ceil(Cr((b-g)/m))+1,t=Ce.zeros(r);for(let p=0;p<r;p++)t.v[p]=g+m*p;if(Math.abs(m)<1){const p=Math.pow(10,1+Math.round(-Math.log10(m)));t=t.apply(w=>Math.round((w+Number.EPSILON)*p)/p)}return t.filter(p=>p>=c[0]&p<=c[1])}function Wu(t,e){const r=Math.floor(Math.log10(t)),o=t/Math.pow(10,r);let s;return o<=1?s=1:o<=2?s=2:o<=5?s=5:s=10,s*Math.pow(10,r)}function tl(t){return Math.round(t*10)/10}function Uu(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function oa(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Hu(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Gu(t){let e=-1,r=Hu();for(let o=0;o<t.length;o++)e=r[(e^t[o])&255]^e>>>8;return e^-1}function Ku(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=Gu(r),s=new Uint8Array(4);s[0]=o>>>24,s[1]=o>>>16,s[2]=o>>>8,s[3]=o&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(s,50),c}function Xu(t,e){const r=t.split(","),o=r[0],s=r[1],a=33/3*4,c=s.substring(0,a),d=s.substring(a),u=atob(c),f=new Uint8Array(u.length);for(let m=0;m<f.length;m++)f[m]=u.charCodeAt(m);const v=Ku(f,e),h=btoa(String.fromCharCode(...v));return[o,",",h,d].join("")}function Qu(t,e,r,o,s){if(r||(r=10),o||(o=10),s||(s=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(o<1||o>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(s<50||s>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*s,c=o/2.54*s;setTimeout(()=>{const d=t.clientHeight,u=t.clientWidth;let f=Math.max(a/u,c/d),v=1;f<1&&(v=f,f=1);const h=document.createElement("canvas"),m=h.getContext("2d");h.width=u*(v<1?v:f),h.height=d*(v<1?v:f),t.setAttribute("width",u*f),t.setAttribute("height",d*f),m.fillStyle="white",m.fillRect(0,0,h.width,h.height),m.scale(f,f);const g=new XMLSerializer().serializeToString(t),b=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(b),w=new Image;w.onload=function(){v<0&&(w.width=w.width*v,w.height=w.height*v),m.drawImage(w,0,0,h.width,h.height);const _=h.toDataURL("image/png"),k=Xu(_,s),C=document.createElement("a");C.href=k,C.download=`${e}.png`,C.click()},w.src=p},20)}function Ju(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,o=t.clientWidth;t.setAttribute("width",o+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${o} ${r}`);const s=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(s),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function Zu(t,e,r,o){const s=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":$u(e,r,o)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=s},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=s},500)}).catch(a=>console.error(a))}async function $u(t,e,r){const o=t.clientHeight,s=t.clientWidth,a=Math.max(e/s,r/o),c=document.createElement("canvas"),d=c.getContext("2d");return c.width=s*a,c.height=o*a,d.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((f,v)=>{const h=new XMLSerializer().serializeToString(t),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,b=g.createObjectURL(m),p=new Image;p.onload=function(){d.drawImage(p,0,0,c.width,c.height),g.revokeObjectURL(b),c.toBlob(function(w){w?f(w):v(new Error("Failed to create blob"))},"image/png")},p.onerror=function(w){v(w)},p.src=b})}function la(t,e){t>16&&(t=16);const r=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?r[t-1].map(o=>o+e):r[t-1]}function ef(t,e,r,o,s){let a=s.ticks,c=s.tickLabels,d=0;const u=el(a,t,Bu[r.x],!0,s.whole),f=u.length,v=ta([Ko[r.plot]],o)[0],h=Ce.fill(e[0],f),m=h.add(v),g=Ce.fill(e[1],f);if(c||(a?(d=0,c=a.v.map(N=>Cr(N).toString())):[d,c]=Zo(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[u,h],[u,g]],p=[[We([t[0]]),We([e[0]])],[We([t[1]]),We([e[0]])]],w=[[u,m],[u,h]],_=(t[1]-t[0])*.01,k=[[null,null],[[t[1]-(d>9?1:0)*_],[h.v[f-1]]]],C=Jo(d),y=c.length,A=Math.abs(t[1]>t[0]?t[1]-u.v[y-1]:t[1]-u.v[0]),P=Math.abs(t[1]-t[0]),M=Math.abs(u.v[1]-u.v[0]);if(C.length>0&&A<P*.1&&A<M*.5){const N=t[1]>t[0]?y-1:0;c[N]=" "}return{grid:b,axisLine:p,tickCoords:w,tfCoords:k,ticks:a,tickLabels:c,tickFactor:d,tfLabel:C}}function tf(t,e,r,o,s){let a=s.ticks,c=s.tickLabels,d=0;const u=el(s.ticks,e,Vu[r.y],!0,s.whole),f=u.length,v=ta([Ko[r.plot]],o)[0],h=Ce.fill(t[0],f),m=h.add(v),g=Ce.fill(t[1],f);if(c||(a?(d=0,c=a.v.map(M=>Cr(M).toString())):[d,c]=Zo(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[h,u],[g,u]],p=[[We([t[0]]),We([e[0]])],[We([t[0]]),We([e[1]])]],w=[[h,u],[m,u]],_=[[[],[]],[[m.v[f-1]+(Math.abs(d)>9?3:2)*v],[e[1]]]],k=Jo(d),C=c.length,y=Math.abs(e[1]>e[0]?e[1]-u.v[C-1]:e[1]-u.v[0]),A=Math.abs(e[1]-e[0]),P=Math.abs(u.v[1]-u.v[0]);if(k.length>0&&y<A*.1&&y<P*.5){const M=e[1]>e[0]?C-1:0;c[M]=" "}return{grid:b,axisLine:p,tickCoords:w,tfCoords:_,ticks:a,tickLabels:c,tickFactor:d,tfLabel:k}}function rf(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ne(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let o,s;if(t.labels?(o=t.labels,s=0):[s,o]=Zo(e),!(o.length===e.length-1||o.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=o.length===r.length;return{colmap:r,breaks:e,labels:o,isCentered:a,labelsFactor:s,fontSize:t.fontSize,labelColor:t.labelColor}}function nf(t,e,r,o){const s=t.colmap.length,a=e*zu,c=a/s,d=r[1]+(e-a)*.5,u=Yu[o.y],f=r[2]+u*Qs,v=f+u*(1+Qs),h=t.isCentered?c/2:0;return{start:d,top:f,height:u,width:c,dxl:h,ltop:v}}function Mr(t,e,r){if(!t||!e||!r||typeof r!="function")return;const o=t.target;if(o.tagName===e){const s=Array.prototype.indexOf.call(o.parentNode.children,o);if(s<0)return;r(s),t.stopPropagation()}}function of(t,e){const o=document.createElement("canvas").getContext("2d");return o.font=e,o.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function lf(t,e){const r="Arial",o=e/8,s=e*1.5,a=Array(t.length),c=Array(t.length);let d=0,u=0,f=0;for(let h=0;h<t.length;h++){const m=of("  "+t[h].label+"  ",e+"px "+r);f=m>f?m:f;const g=e*t[h].labelHeight+2*o;a[h]=g,c[h]=d,d=d+g,u=u+g}const v=s+2*o+f;return[c,a,s,o,u,v]}function sf(t,e,r,o,s){const[a,c,d,u,f,v]=lf(t.items,o*t.fontSize),h=t.position.includes("left")?e[0]+s:t.position.includes("right")?e[1]-v-s:(e[1]+e[0]-v)*.5,m=t.position.includes("top")?r[1]+s:t.position.includes("bottom")?r[0]-f-s:(r[1]+r[0]-f)*.5;return{lgl:h,lgt:m,lgw:v,lgh:f,ely:a,elh:c,elw:d,elp:u}}function Kn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let o=0,s="";for(;o<t.length;){const a=t[o];if((a==="^"||a==="_")&&o<t.length-1){const c=a==="^";if(o++,t[o]==="("){let d=o+1;for(;d<t.length&&t[d]!==")";)d++;const u=t.slice(o+1,d);s+=c?e(u):r(u),o=d+1}else if(t[o]==="-"||t[o]==="–"){const d=t.slice(o,o+2);s+=c?e(d):r(d),o=o+2}else s+=c?e(t[o]):r(t[o]),o++}else s+=a,o++}return s}var af=ve('<line vector-effect="non-scaling-stroke"></line>'),cf=ve("<g></g>");function rl(t,e){ge(e,!0);let r=B(e,"lineCoords",19,()=>[]),o=B(e,"lineColor",19,()=>kt.DARKGRAY),s=B(e,"lineType",3,1),a=B(e,"lineWidth",3,1),c=B(e,"className",3,"");const d=St("axes");let u=E(()=>tt(r()[0][0],d.tX())),f=E(()=>tt(r()[1][0],d.tX())),v=E(()=>tt(r()[0][1],d.tY())),h=E(()=>tt(r()[1][1],d.tY())),m=E(()=>`stroke:${o()};stroke-width: ${a()}px;stroke-dasharray:${dn[d.scales().plot][s()-1]}`);var g=me(),b=Q(g);{var p=w=>{var _=cf();Ye(_,21,()=>l(u),Ke,(k,C,y)=>{var A=af();re(()=>{S(A,"x1",l(u)[y]),S(A,"x2",l(f)[y]),S(A,"y1",l(v)[y]),S(A,"y2",l(h)[y]),S(A,"style",l(m))}),I(k,A)}),re(()=>So(_,nc(c()))),I(w,_)};U(b,w=>{l(u)&&l(v)&&l(f)&&w(p)})}I(t,g),pe()}var uf=ve('<text text-anchor="middle"><!></text>'),ff=ve("<text><!></text>"),df=ve("<text><!></text>"),vf=ve('<g class="tick-labels"><!></g>');function sa(t,e){ge(e,!0);let r=B(e,"pos",3,1),o=B(e,"las",3,1),s=E(()=>["middle","middle","start","middle","end"][r()]),a=E(()=>`fill:${e.textColor};`);const c=St("axes");let d=E(()=>tt(e.tickCoords[1][0],c.tX())),u=E(()=>tt(e.tickCoords[1][1],c.tY())),f=E(()=>Xo[c.scales().plot]),v=E(()=>[0,0,l(f),0,-l(f)][r()]),h=E(()=>[0,l(f),0,-l(f),0][r()]);var m=vf(),g=O(m);{var b=w=>{var _=me(),k=Q(_);Ye(k,17,()=>l(d),Ke,(C,y,A)=>{var P=uf();S(P,"data-id",A),S(P,"dx",0);var M=O(P);vt(M,()=>e.tickLabels[A],!0,!1),re(()=>{S(P,"x",l(d)[A]),S(P,"y",l(u)[A]),S(P,"dy",l(v)*1.25),S(P,"transform",`rotate(-90, ${l(d)[A]}, ${l(u)[A]})`)}),I(C,P)}),I(w,_)},p=w=>{var _=me(),k=Q(_);{var C=A=>{var P=me(),M=Q(P);Ye(M,17,()=>l(d),Ke,(N,L,D)=>{var T=ff();S(T,"data-id",D),S(T,"dy",0),S(T,"text-anchor","end");var F=O(T);vt(F,()=>e.tickLabels[D],!0,!1),re(()=>{S(T,"x",l(d)[D]),S(T,"y",l(u)[D]),S(T,"dx",-l(h)/2),S(T,"transform",`rotate(-90, ${l(d)[D]}, ${l(u)[D]})`)}),I(N,T)}),I(A,P)},y=A=>{var P=me(),M=Q(P);Ye(M,17,()=>l(d),Ke,(N,L,D)=>{var T=df();S(T,"data-id",D);var F=O(T);vt(F,()=>e.tickLabels[D],!0,!1),re(()=>{S(T,"x",l(d)[D]),S(T,"y",l(u)[D]),S(T,"dx",l(v)),S(T,"dy",l(h)),S(T,"text-anchor",l(s))}),I(N,T)}),I(A,P)};U(k,A=>{o()===2&&r()===1?A(C):A(y,!1)},!0)}I(w,_)};U(g,w=>{o()===2&&r()===4?w(b):w(p,!1)})}re(()=>S(m,"style",l(a))),I(t,m),pe()}const hf=(t,e=at,r=at)=>{var o=yf();const s=E(()=>e().colmap.length);var a=Q(o);Ye(a,17,()=>e().colmap,Ke,(v,h,m)=>{var g=bf();const b=E(()=>r().start+m*r().width);var p=Q(g),w=q(p);S(w,"dy",0);var _=O(w);vt(_,()=>e().labels[m],!0,!1),re(()=>{S(p,"x",l(b)),S(p,"y",r().top),S(p,"width",r().width),S(p,"height",r().height),S(p,"fill",l(h)),S(w,"x",l(b)),S(w,"y",r().ltop),S(w,"dx",r().dxl),S(w,"fill",e().labelColor),S(w,"font-size",e().fontSize+"em")}),I(v,g)});var c=q(a);{var d=v=>{var h=wf();const m=E(()=>r().start+l(s)*r().width);S(h,"dx",0),S(h,"dy",0);var g=O(h);vt(g,()=>e().labels[l(s)],!0,!1),re(()=>{S(h,"x",l(m)),S(h,"y",r().ltop),S(h,"fill",e().labelColor),S(h,"font-size",`${e().fontSize??""}em`)}),I(v,h)};U(c,v=>{e().isCentered||v(d)})}var u=q(c);{var f=v=>{var h=_f();const m=E(()=>r().start+l(s)*r().width);var g=O(h);vt(g,()=>Jo(e().labelsFactor),!0,!1),re(()=>{S(h,"x",l(m)),S(h,"y",r().ltop),S(h,"fill",e().labelColor),S(h,"font-size",`${e().fontSize??""}em`)}),I(v,h)};U(u,v=>{e().labelsFactor!==0&&v(f)})}I(t,o)};function aa(t,e,r){e(t,r())}function ia(t,e,r){e(t,r())}function ca(t,e,r){e(t,r())}function Xn(t,e,r){e(t,r())}async function ua(t,e,r,o){Zu(t.target,l(e),r(),o())}function fa(t,e,r){Ju(l(e),r())}function da(t,e,r,o,s,a){Qu(l(e),r(),o(),s(),a())}var mf=ve('<text fill="crimson" text-anchor="middle"> </text>'),gf=ve('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),pf=ve("<!><!><!><!><!>",1),bf=ve('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),wf=ve('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),_f=ve('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),yf=ve("<!><!><!>",1),xf=ve("<line></line>"),kf=ve('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Ef=ve('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Af=ve('<svg><rect height="100%" width="100%"></rect><!></svg>'),Cf=ve('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Mf=ve('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Sf=ve('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Nf=ve('<g class="plot-labels"><!><!><!></g>'),Tf=ve('<g class="axis x-axis"><!></g>'),If=ve('<g class="axis y-axis"><!></g>'),Pf=ve('<rect fill="transparent" id="axes-box"></rect>'),Lf=ve('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Rf=ve('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),jf=ve('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Ff=ve('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),qf=J('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),Of=J('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Bf=J(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Vf(t,e){ge(e,!0);const r=(ye,Ie=at,Se=at)=>{var rt=me(),ht=Q(rt);{var Ut=Ct=>{var Ue=me(),Le=Q(Ue);{var ft=nt=>{var Xe=mf(),Pt=O(Xe);re(()=>{S(Xe,"x",l(te)[0]-10),S(Xe,"y",l(ue)),S(Xe,"transform",`rotate(-90, ${l(te)[0]-10}, ${l(ue)})`),xe(Pt,Se().error)}),I(nt,Xe)},st=nt=>{var Xe=gf(),Pt=O(Xe);re(()=>{S(Xe,"x",l(X)),S(Xe,"y",l(fe)[0]),xe(Pt,Se().error)}),I(nt,Xe)};U(Le,nt=>{Se().pos===4?nt(ft):nt(st,!1)})}I(Ct,Ue)},At=Ct=>{var Ue=pf(),Le=Q(Ue);{var ft=he=>{rl(he,{get lineCoords(){return Ie().grid},get lineColor(){return kt.MIDDLEGRAY},lineType:3})};U(Le,he=>{Se().showGrid&&he(ft)})}var st=q(Le);rl(st,{get lineCoords(){return Ie().axisLine},get lineColor(){return kt.DARKGRAY},lineType:1});var nt=q(st);rl(nt,{get lineCoords(){return Ie().tickCoords},get lineColor(){return kt.DARKGRAY},lineType:1});var Xe=q(nt);{var Pt=he=>{sa(he,{get las(){return Se().las},get pos(){return Se().pos},get tickCoords(){return Ie().tickCoords},get tickLabels(){return Ie().tickLabels},get tickColor(){return kt.DARKGRAY},get hideLast(){return Se().hideLast}})};U(Xe,he=>{Ie().tickCoords.length===2&&Ie().tickLabels.length===Ie().tickCoords[1][0].length&&he(Pt)})}var Pr=q(Xe);{var Fe=he=>{const dt=E(()=>[Ie().tfLabel]);sa(he,{get pos(){return Se().pos},get tickCoords(){return Ie().tfCoords},get tickLabels(){return l(dt)},get textColor(){return kt.DARKGRAY}})};U(Pr,he=>{Ie().tickFactor!==0&&he(Fe)})}I(Ct,Ue)};U(ht,Ct=>{Se().error?Ct(Ut):Ct(At,!1)})}I(ye,rt)},o=(ye,Ie=at,Se=at)=>{var rt=Af();const ht=E(()=>Se().elw+2*Se().elp),Ut=E(()=>Se().elp),At=E(()=>Se().elh),Ct=E(()=>Se().ely);var Ue=O(rt),Le=q(Ue);Ye(Le,17,()=>Ie().items,Ke,(ft,st,nt)=>{var Xe=Ef();S(Xe,"x",0);var Pt=O(Xe);{var Pr=ar=>{var Re=xf();re(()=>{S(Re,"x1",l(Ut)),S(Re,"x2",l(ht)-l(Ut)),S(Re,"y1",l(At)[nt]/2),S(Re,"y2",l(At)[nt]/2),S(Re,"stroke",l(st).line.lineColor),S(Re,"stroke-width",l(st).line.lineWidth),S(Re,"stroke-dasharray",l(T)[l(st).line.lineType-1])}),I(ar,Re)};U(Pt,ar=>{l(st).line&&ar(Pr)})}var Fe=q(Pt);{var he=ar=>{var Re=kf(),ro=O(Re);re(()=>{S(Re,"x",l(ht)/2),S(Re,"y",l(At)[nt]/2),S(Re,"fill",l(st).point.faceColor),S(Re,"stroke-width",l(st).point.lineWidth),S(Re,"stroke",l(st).point.lineColor),S(Re,"font-size",l(L)),xe(ro,Gn[l(st).point.marker-1])}),I(ar,Re)};U(Fe,ar=>{l(st).point&&ar(he)})}var dt=q(Fe),cl=O(dt);vt(cl,()=>l(st).label,!0,!1),re(()=>{S(Xe,"y",l(Ct)[nt]),S(Xe,"width",Se().lgw),S(Xe,"height",l(At)[nt]),S(dt,"x",l(ht)+l(Ut)),S(dt,"y",l(At)[nt]/2),S(dt,"fill",kt.LEGEND),S(dt,"font-size",`${Ie().fontSize??""}em`)}),I(ft,Xe)}),re(()=>{S(rt,"x",Se().lgl),S(rt,"y",Se().lgt),S(rt,"height",Se().lgh),S(rt,"width",Se().lgw),S(Ue,"fill",Ie().faceColor),S(Ue,"stroke",Ie().lineColor),S(Ue,"stroke-width",Ie().lineWidth)}),I(ye,rt)};let s=B(e,"limX",19,()=>[0,1]),a=B(e,"limY",19,()=>[0,1]),c=B(e,"margins",19,()=>[1,1.1,.55,.6]),d=B(e,"downloadLinks",3,"none"),u=B(e,"fileName",3,"plot"),f=B(e,"pngWidth",3,8),v=B(e,"pngHeight",3,8),h=B(e,"pngRes",3,300),m=B(e,"clipboardWidth",3,1200),g=B(e,"clipboardHeight",3,800),b=B(e,"onclick",3,null),p=B(e,"onmousemove",3,null),w=B(e,"onmousedown",3,null),_=B(e,"onmouseup",3,null);function k(ye,Ie){if(Ie&&ye.target.id=="axes-box"){const Se=ea([ye.offsetX-l(H)],l(Z))[0],rt=ea([ye.offsetY-l(W)],l($))[0];Ie(Se,rt)}}const C="plottingArea"+Math.round(Math.random()*1e4);let y=le(0),A=le(0),P=le(0);const M=E(()=>({plot:Uu(l(A),l(P)),x:oa(l(A)),y:oa(l(P))})),N=E(()=>c().map(ye=>ye*Ou[l(M).plot])),L=E(()=>Du[l(M).plot]),D=E(()=>Ko[l(M).plot]),T=E(()=>dn[l(M).plot]),F=E(()=>l(_e).show&&l(_e).label!==""?l(L)*1.5:0),H=E(()=>l(ie).show&&l(ie).label!==""?l(L)*1.5:0),W=E(()=>e.title&&e.title!==""?l(L)*1.5:0),ne=E(()=>l(A)>l(H)?l(A)-l(H):0),j=E(()=>l(P)>l(F)+l(W)?l(P)-l(F)-l(W):0),z=E(()=>l(j)-l(N)[0]-l(N)[2]),G=E(()=>l(ne)-l(N)[1]-l(N)[3]),K=E(()=>Js(s(),2)&&Js(a(),2)&&l(ne)>l(N)[1]+l(N)[3]&&l(j)>l(N)[0]+l(N)[2]),Z=E(()=>l(K)?{coords:[l(G)/(s()[1]-s()[0]),s()[0],l(N)[1]],objects:[l(G)/(s()[1]-s()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),$=E(()=>l(K)?{coords:[-l(z)/(a()[1]-a()[0]),a()[1],l(N)[2]],objects:[l(z)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ue=E(()=>l(z)*.5+l(W)+l(N)[2]),X=E(()=>l(G)*.5+l(H)+l(N)[1]),te=E(()=>l(K)?tt(s(),l(Z)):[0,1]),fe=E(()=>l(K)?tt(a(),l($)):[1,0]),be=E(()=>Kn(e.title)),we=E(()=>l(be)?l(be).length===e.title.left?1:1.4:0);let ae=le(ee({show:!1})),_e=le(ee({show:!1,error:""})),ie=le(ee({show:!1,error:""})),ce=le(ee({show:!1,colmap:null,breaks:null})),se=le(ee({show:!1,items:null,position:null}));const Te=E(()=>l(K)&&l(ce)&&l(ce).show?rf(l(ce)):null),Ee=E(()=>l(K)&&l(_e).show?ef(s(),a(),l(M),l($),l(_e)):null),Pe=E(()=>l(K)&&l(ie).show?tf(s(),a(),l(M),l(Z),l(ie)):null),wt=E(()=>l(K)&&l(Te)?nf(l(Te),l(G),l(N),l(M)):null),Et=E(()=>l(K)&&l(se)&&l(se).show&&l(te)?sf(l(se),l(te),l(fe),l(L),l(D)):null);_i("axes",{setBox:ye=>V(ae,ee(ye)),setXAxis:ye=>V(_e,ee(ye)),setYAxis:ye=>V(ie,ee(ye)),setColmapLegend:ye=>V(ce,ee(ye)),setGroupLegend:ye=>V(se,ee(ye)),scales:()=>l(M),tX:()=>l(Z),tY:()=>l($),limX:()=>s(),limY:()=>a()});var it=Bf(),ot=O(it),Je=q(O(ot));{var Tr=ye=>{var Ie=Nf(),Se=O(Ie);{var rt=Ue=>{var Le=Cf();S(Le,"dx",0),S(Le,"dy",0);var ft=O(Le);vt(ft,()=>l(_e).label,!0,!1),re(()=>{S(Le,"x",l(X)),S(Le,"y",l(j)+l(W))}),I(Ue,Le)};U(Se,Ue=>{l(_e).show&&l(_e).label&&l(_e).label!==""&&Ue(rt)})}var ht=q(Se);{var Ut=Ue=>{var Le=Mf();S(Le,"dx",0),S(Le,"dy",0);var ft=O(Le);vt(ft,()=>l(ie).label,!0,!1),re(()=>{S(Le,"x",l(L)/1.1*l(ie).labelHeight),S(Le,"y",l(ue)),S(Le,"transform",`rotate(-90, ${l(L)*l(ie).labelHeight/1.1}, ${l(ue)})`)}),I(Ue,Le)};U(ht,Ue=>{l(ie).show&&l(ie).label&&l(ie).label!==""&&Ue(Ut)})}var At=q(ht);{var Ct=Ue=>{var Le=Sf();S(Le,"dx",0),S(Le,"dy",0);var ft=O(Le);vt(ft,()=>l(be),!0,!1),re(()=>{S(Le,"x",l(X)),S(Le,"y",l(L)*l(we))}),I(Ue,Le)};U(At,Ue=>{l(be)&&l(be)!==""&&Ue(Ct)})}I(ye,Ie)};U(Je,ye=>{l(K)&&ye(Tr)})}var Ir=q(Je),mn=O(Ir),Zn=O(mn);S(Zn,"id",C);var $t=O(Zn),$n=q(mn);{var eo=ye=>{var Ie=Ff(),Se=Q(Ie);{var rt=Fe=>{var he=Tf(),dt=O(he);r(dt,()=>l(Ee),()=>l(_e)),I(Fe,he)};U(Se,Fe=>{l(_e).show&&l(Ee)&&Fe(rt)})}var ht=q(Se);{var Ut=Fe=>{var he=If(),dt=O(he);r(dt,()=>l(Pe),()=>l(ie)),I(Fe,he)};U(ht,Fe=>{l(ie).show&&l(Pe)&&Fe(Ut)})}var At=q(ht),Ct=O(At);{var Ue=Fe=>{var he=Pf();he.__keydown=[Xn,k,b],he.__click=[Xn,k,b],he.__mousemove=[ca,k,p],he.__mousedown=[aa,k,w],he.__mouseup=[ia,k,_],re(()=>{S(he,"stroke",l(ae).lineColor),S(he,"stroke-width",`${l(ae).lineWidth??""}px`),S(he,"x",l(te)[0]),S(he,"y",l(fe)[1]),S(he,"width",l(te)[1]-l(te)[0]),S(he,"height",l(fe)[0]-l(fe)[1])}),I(Fe,he)},Le=Fe=>{var he=Lf();he.__keydown=[Xn,k,b],he.__click=[Xn,k,b],he.__mousemove=[ca,k,p],he.__mousedown=[aa,k,w],he.__mouseup=[ia,k,_],re(()=>{S(he,"x",l(te)[0]),S(he,"y",l(fe)[1]),S(he,"width",l(te)[1]-l(te)[0]),S(he,"height",l(fe)[0]-l(fe)[1])}),I(Fe,he)};U(Ct,Fe=>{l(ae).show?Fe(Ue):Fe(Le,!1)})}var ft=q(At);S(ft,"clip-path",`url(#${C??""})`);var st=O(ft);kr(st,()=>e.children??at);var nt=q(ft);{var Xe=Fe=>{var he=Rf(),dt=O(he);hf(dt,()=>l(Te),()=>l(wt)),I(Fe,he)};U(nt,Fe=>{l(wt)&&Fe(Xe)})}var Pt=q(nt);{var Pr=Fe=>{var he=jf(),dt=O(he);o(dt,()=>l(se),()=>l(Et)),I(Fe,he)};U(Pt,Fe=>{l(Et)&&Fe(Pr)})}I(ye,Ie)};U($n,ye=>{l(K)&&ye(eo)})}Hr(ot,ye=>V(y,ye),()=>l(y));var to=q(ot,2);{var al=ye=>{var Ie=qf();I(ye,Ie)},il=ye=>{var Ie=Of(),Se=O(Ie);Se.__click=[fa,y,u],Se.__keydown=[fa,y,u];var rt=q(Se,2);rt.__click=[da,y,u,f,v,h],rt.__keydown=[da,y,u,f,v,h];var ht=q(rt,2);ht.__click=[ua,y,m,g],ht.__keydown=[ua,y,m,g],I(ye,Ie)};U(to,ye=>{l(K)?ye(il,!1):ye(al)})}re(()=>{Ur(it,`plot-container show-download-links-${d()??""} svelte-1jtdxd0`),yt(it,"plot-error",!l(K)),S(ot,"style",`font-size:${l(L)??""}px`),S(Ir,"x",l(H)),S(Ir,"y",l(W)),S(Ir,"width",l(ne)),S(Ir,"height",l(j)),S($t,"x",l(te)[0]),S($t,"y",l(fe)[1]),S($t,"width",l(te)[1]-l(te)[0]),S($t,"height",l(fe)[0]-l(fe)[1])}),ns(ot,"clientWidth",ye=>V(A,ye)),ns(ot,"clientHeight",ye=>V(P,ye)),I(t,it),pe()}Ze(["keydown","click","mousemove","mousedown","mouseup"]);function va(t,e){ge(e,!0);let r=B(e,"tickLabels",7),o=B(e,"las",3,1),s=B(e,"whole",3,!1),a=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const d=St("axes");ze(()=>{const u=Kn(e.label),f=u?u.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=na(e.ticks,d.limX())),!h&&r()&&(m=>(r(m[0]),h=m[1]))(ra(r(),v)),d.setXAxis({show:a(),error:h,label:u,ticks:v,labelHeight:f,showGrid:c(),las:o(),whole:s(),tickLabels:r()})}),pe()}function ha(t,e){ge(e,!0);let r=B(e,"tickLabels",7),o=B(e,"las",3,1),s=B(e,"whole",3,!1),a=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const d=St("axes");ze(()=>{const u=Kn(e.label),f=u?u.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=na(e.ticks,d.limY())),!h&&r()&&(m=>(r(m[0]),h=m[1]))(ra(r(),v)),d.setYAxis({show:a(),error:h,label:u,ticks:v,labelHeight:f,showGrid:c(),las:o(),whole:s(),tickLabels:r(),pos:4})}),pe()}function ma(t,e){ge(e,!0);let r=B(e,"lineWidth",3,1),o=B(e,"lineColor",3,"#606060");const s=St("axes");ze(()=>{s.setBox({show:!0,lineWidth:r(),lineColor:o()})}),pe()}var Df=(t,e)=>Mr(t,"rect",e.onclick),zf=ve("<rect></rect>"),Yf=ve("<g></g>");function ga(t,e){ge(e,!0);let r=B(e,"faceColor",19,()=>kt.PRIMARY),o=B(e,"lineColor",19,r),s=B(e,"lineWidth",3,1),a=B(e,"className",3,"series-rect");const c=E(()=>bt(e.left,"Rectangles (left)")),d=E(()=>l(c)?bt(e.top,"Rectangles (top)",l(c).length):null),u=E(()=>l(d)?typeof e.width!="object"?Ce.fill(e.width,l(c).length):e.width:null),f=E(()=>l(d)?typeof e.height!="object"?Ce.fill(e.height,l(c).length):e.height:null),v=St("axes"),h=E(()=>l(c)?tt(l(c),v.tX()):null),m=E(()=>l(d)?tt(l(d),v.tY()):null),g=E(()=>l(u)?Qo(l(u),v.tX()):null),b=E(()=>l(f)?Qo(l(f),v.tY()):null),p=E(()=>`fill:${r()};stroke:${o()};stroke-width:${s()}px;`),w=E(()=>l(h)&&l(m)&&l(g)&&l(b)&&l(g).length===l(h).length&&l(b).length===l(h).length);var _=me(),k=Q(_);{var C=y=>{var A=Yf();A.__click=[Df,e],Ye(A,21,()=>e.left,Ke,(P,M,N)=>{var L=zf();re(()=>{S(L,"x",l(h)[N]),S(L,"y",l(m)[N]),S(L,"width",l(g)[N]),S(L,"height",l(b)[N])}),I(P,L)}),re(()=>{So(A,`series ${a()??""}`),S(A,"style",l(p))}),I(y,A)};U(k,y=>{l(w)&&y(C)})}I(t,_),pe()}Ze(["click"]);var Wf=(t,e)=>Mr(t,"line",e.onclick),Uf=ve("<line></line>"),Hf=ve('<g class="series series-segment"></g>');function Sr(t,e){ge(e,!0);let r=B(e,"lineColor",19,()=>kt.PRIMARY),o=B(e,"lineType",3,1),s=B(e,"lineWidth",3,1);const a=E(()=>bt(e.xStart,"Segments")),c=E(()=>l(a)?bt(e.yStart,"Segments",l(a).length):null),d=E(()=>l(c)?bt(e.xEnd,"Segments",l(a).length):null),u=E(()=>l(d)?bt(e.yEnd,"Segments",l(a).length):null),f=St("axes"),v=E(()=>l(a)?tt(l(a),f.tX()):null),h=E(()=>l(d)?tt(l(d),f.tX()):null),m=E(()=>l(c)?tt(l(c),f.tY()):null),g=E(()=>l(u)?tt(l(u),f.tY()):null),b=E(()=>`stroke:${r()};stroke-width: ${s()}px;stroke-dasharray:${dn[f.scales().plot][o()-1]}`),p=E(()=>l(v)&&l(h)&&l(m)&&l(g));var w=me(),_=Q(w);{var k=C=>{var y=Hf();y.__click=[Wf,e],Ye(y,21,()=>l(v),Ke,(A,P,M)=>{var N=Uf();re(()=>{S(N,"x1",l(v)[M]),S(N,"x2",l(h)[M]),S(N,"y1",l(m)[M]),S(N,"y2",l(g)[M])}),I(A,N)}),re(()=>S(y,"style",l(b))),I(C,y)};U(_,C=>{l(p)&&C(k)})}I(t,w),pe()}Ze(["click"]);var Gf=(t,e)=>Mr(t,"text",e.onclick),Kf=ve("<text><!></text>"),Xf=ve("<text><!></text>"),Qf=ve("<text><!></text>"),Jf=ve('<g class="series series-textlabels"><!></g>');function nl(t,e){ge(e,!0);let r=B(e,"pos",3,0),o=B(e,"faceColor",19,()=>kt.PRIMARY_TEXT),s=B(e,"lineColor",3,"transparent"),a=B(e,"lineWidth",3,0),c=B(e,"textSize",3,1),d=B(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],f=E(()=>bt(e.xValues,"TextLabels")),v=E(()=>l(f)?bt(e.yValues,"TextLabels",l(f).length):null),h=E(()=>l(v)?Array.isArray(e.labels)&&e.labels.length!==l(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=E(()=>l(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=St("axes"),b=E(()=>l(f)&&l(m)!==null?tt(l(f),g.tX()):null),p=E(()=>l(v)&&l(b)?tt(l(v),g.tY()):null),w=E(()=>Xo[g.scales().plot]),_=E(()=>[0,0,-l(w),0,l(w),l(w)]),k=E(()=>[0,l(w),0,-l(w),0,l(w)]),C=E(()=>`fill:${o()};stroke-width:${a()}px;stroke:${s()};font-size:${c()}em;`),y=E(()=>l(b)&&l(p)&&l(m)!==null&&l(h)&&l(b).length===l(p).length);var A=me(),P=Q(A);{var M=N=>{var L=Jf();L.__click=[Gf,e];var D=O(L);{var T=H=>{var W=me(),ne=Q(W);Ye(ne,17,()=>l(b),Ke,(j,z,G)=>{var K=Kf();S(K,"data-id",G);var Z=O(K);vt(Z,()=>e.labels,!0,!1),re(()=>{S(K,"x",l(b)[G]),S(K,"y",l(p)[G]),S(K,"dx",l(_)[r()]),S(K,"dy",l(k)[r()]),S(K,"transform",d()!==void 0?`rotate(${d()}, ${l(b)[G]+l(_)[r()]}, ${l(p)[G]+l(k)[r()]})`:""),S(K,"text-anchor",u[r()[G]])}),I(j,K)}),I(H,W)},F=H=>{var W=me(),ne=Q(W);{var j=G=>{var K=me(),Z=Q(K);Ye(Z,17,()=>l(b),Ke,($,ue,X)=>{var te=Xf();S(te,"data-id",X);var fe=O(te);vt(fe,()=>e.labels[X],!0,!1),re(()=>{S(te,"x",l(b)[X]),S(te,"y",l(p)[X]),S(te,"dx",l(_)[r()[X]]),S(te,"dy",l(k)[r()[X]]),S(te,"transform",d()!==void 0?`rotate(${d()}, ${l(b)[X]+l(_)[r()]}, ${l(p)[X]+l(k)[r()]})`:""),S(te,"text-anchor",u[r()[X]])}),I($,te)}),I(G,K)},z=G=>{var K=me(),Z=Q(K);Ye(Z,17,()=>l(b),Ke,($,ue,X)=>{var te=Qf();S(te,"data-id",X);var fe=O(te);vt(fe,()=>e.labels[X],!0,!1),re(()=>{S(te,"x",l(b)[X]),S(te,"y",l(p)[X]),S(te,"dx",l(_)[r()]),S(te,"dy",l(k)[r()]),S(te,"transform",d()!==void 0?`rotate(${d()}, ${l(b)[X]+l(_)[r()]}, ${l(p)[X]+l(k)[r()]})`:""),S(te,"text-anchor",u[r()])}),I($,te)}),I(G,K)};U(ne,G=>{Array.isArray(r())||ArrayBuffer.isView(r())?G(j):G(z,!1)},!0)}I(H,W)};U(D,H=>{typeof e.labels=="string"?H(T):H(F,!1)})}re(()=>S(L,"style",l(C))),I(N,L)};U(P,N=>{l(y)&&N(M)})}I(t,A),pe()}Ze(["click"]),Ze(["click"]);var Zf=(t,e)=>Mr(t,"text",e.onclick),$f=ve("<text> </text>"),ed=ve('<g text-anchor="middle"></g>');function ol(t,e){ge(e,!0);let r=B(e,"marker",3,1),o=B(e,"faceColor",3,"transparent"),s=B(e,"lineColor",19,()=>kt.PRIMARY),a=B(e,"lineWidth",3,1),c=B(e,"markerSize",3,1);const d=E(()=>typeof r()!="number"||r()<1||r()>Gn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+Gn.length+"."),null):Gn[r()-1]),u=E(()=>bt(e.xValues,"Points")),f=E(()=>l(u)?bt(e.yValues,"Points",l(u).length):null),v=St("axes"),h=E(()=>l(u)?tt(l(u),v.tX()):null),m=E(()=>l(h)&&l(f)?tt(l(f),v.tY()):null),g=E(()=>["＋","✳","✕"].includes(l(d))?`fill:${s()&&s()!=="transparent"?s():o()};stroke-width:0px;font-size:${c()}em;`:`fill:${o()};stroke-width:${a()}px;stroke:${s()}; font-size:${c()}em;`),b=E(()=>["◼","⬥","＋","✳","✕"].includes(l(d))?"series-points2":"series-points1"),p=E(()=>l(h)&&l(m)&&l(h).length===l(m).length);var w=me(),_=Q(w);{var k=C=>{var y=ed();y.__click=[Zf,e],Ye(y,21,()=>l(h),Ke,(A,P,M)=>{var N=$f(),L=O(N);re(()=>{S(N,"x",l(h)[M]),S(N,"y",l(m)[M]),xe(L,l(d))}),I(A,N)}),re(()=>{So(y,`series series-points ${l(b)??""}`),S(y,"style",l(g))}),I(C,y)};U(_,C=>{l(p)&&C(k)})}I(t,w),pe()}Ze(["click"]);var td=(t,e)=>Mr(t,"polyline",e.onclick),rd=ve('<g class="series series-line"><polyline class="line"></polyline></g>');function Qr(t,e){ge(e,!0);let r=B(e,"lineColor",19,()=>kt.PRIMARY),o=B(e,"lineType",3,1),s=B(e,"lineWidth",3,1);const a=E(()=>bt(e.xValues,"Lines")),c=E(()=>l(a)?bt(e.yValues,"Lines",l(a).length):null),d=St("axes"),u=E(()=>l(a)&&l(c)?$o(l(a),l(c),d.tX(),d.tY()):null),f=E(()=>`fill:transparent;stroke:${r()};stroke-width: ${s()}px; stroke-dasharray:${dn[d.scales().plot][o()-1]}`);var v=me(),h=Q(v);{var m=g=>{var b=rd();b.__click=[td,e];var p=O(b);re(()=>{S(b,"style",l(f)),S(p,"points",l(u))}),I(g,b)};U(h,g=>{l(u)&&g(m)})}I(t,v),pe()}Ze(["click"]);var nd=(t,e)=>Mr(t,"polyline",e.onclick),od=ve('<polyline class="line"></polyline>'),ld=ve('<g class="series series-multiline"></g>');function sd(t,e){ge(e,!0);let r=B(e,"lineColor",19,()=>kt.PRIMARY),o=B(e,"lineType",3,1),s=B(e,"lineWidth",3,1);const a=E(()=>bt(e.xValues,"Multilines")),c=E(()=>l(a)?pr(e.yValues)?(l(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),d=St("axes"),u=E(()=>{if(!l(a)||!l(c))return null;const g=new Array(l(c).ncols);for(let b=0;b<g.length;b++)g[b]=$o(l(a),l(c).getcolumn(b+1),d.tX(),d.tY());return g}),f=E(()=>`fill:transparent;stroke:${r()};stroke-width: ${s()}px; stroke-dasharray:${dn[d.scales().plot][o()-1]}`);var v=me(),h=Q(v);{var m=g=>{var b=ld();b.__click=[nd,e],Ye(b,21,()=>l(u),Ke,(p,w)=>{var _=od();re(()=>S(_,"points",l(w))),I(p,_)}),re(()=>S(b,"style",l(f))),I(g,b)};U(h,g=>{l(u)&&l(u).length>0&&g(m)})}I(t,v),pe()}Ze(["click"]);function pa(t,e){ge(e,!0);let r=B(e,"show",3,!0),o=B(e,"labels",3,null),s=B(e,"labelColor",19,()=>kt.CLEGEND_LABELS),a=B(e,"fontSize",3,.85);const c=St("axes");ze(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:o(),labelColor:s(),fontSize:a()})}),pe()}function ad(t,e,r,o){e===void 0&&(e=!0),r===void 0&&(r=!1),o===void 0&&(o=!1);function s(u,f,v,h){if(typeof f=="boolean")return f?u.apply(v,2):We([h]).rep(u.ncols);if(!Ne(f))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(f.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return f}const a=s(t,e,Vn,0),c=s(t,r,Ro,1),d=zt.zeros(t.nrows,t.ncols);for(let u=1;u<=t.ncols;u++){const f=t.getcolref(u),v=d.getcolref(u),h=a.v[u-1],m=1/c.v[u-1];for(let g=0;g<t.nrows;g++)v[g]=(f[g]-h)*m}return o?[d,a,c]:d}function ll(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const o=t.ncols,s=t.ncomp;let a,c;switch(e){case"mX":a=2,c=o;break;case"sX":a=2+o,c=o;break;case"loadings":case"xloadings":a=2+2*o+(r-1)*o,c=o;break;case"P":a=2+2*o,c=r*o;break;case"eigenvals":case"xeigenvals":a=2+2*o+o*s,c=s;break;case"cq0":a=2+2*o+o*s+s,c=s;break;case"cNq":a=2+2*o+o*s+2*s,c=s;break;case"rq0":a=2+2*o+o*s+3*s,c=s;break;case"rNq":a=2+2*o+o*s+4*s,c=s;break;case"ch0":a=2+2*o+o*s+5*s,c=s;break;case"cNh":a=2+2*o+o*s+6*s,c=s;break;case"rh0":a=2+2*o+o*s+7*s,c=s;break;case"rNh":a=2+2*o+o*s+8*s,c=s;break;case"cr0":a=2+2*o+o*s+9*s,c=s;break;case"cNr":a=2+2*o+o*s+10*s,c=s;break;case"rr0":a=2+2*o+o*s+11*s,c=s;break;case"rNr":a=2+2*o+o*s+12*s,c=s;break;case"cg0":a=2+2*o+o*s+13*s,c=s;break;case"cNg":a=2+2*o+o*s+14*s,c=s;break;case"rg0":a=2+2*o+o*s+15*s,c=s;break;case"rNg":a=2+2*o+o*s+16*s,c=s;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}const id=t=>t;function cd(t,{delay:e=0,duration:r=400,easing:o=id}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:o,css:a=>`opacity: ${a*s}`}}var ud=J('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function ba(t,e){ge(e,!0);function r(f){f.key==="Escape"&&e.closeModal()}var o=ud();vr("keydown",Cn,r);var s=O(o),a=O(s),c=O(a);c.__click=function(...f){var v;(v=e.closeModal)==null||v.apply(this,f)};var d=q(a,2),u=O(d);kr(u,()=>e.children),cc(7,o,()=>cd),I(t,o),pe()}Ze(["click"]);const fd=[1,1.1,.45,.4],wa={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",alt:"#2679B2",new:"#2679B2"},_a={cal:"#f0f8ff"},ya="#a0a0a0",xa="#909090",Jr="#909090",sl=8,dd=8,vd=8,hd=600;function ka(t,e){return!t||!e||e<0||e>t.ncomp?"":`PC${e} (${(t.stat.expvar[e-1]*100).toFixed(1)}%)`}function md(t,e){if(t.length===e.length)return t;const r=e.length,o=new t.constructor(r);for(let s in e)o[s]=t[e[s]];return o}function gd(t,e){let r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)o=Math.min(o,t[c]),r=Math.max(r,t[c]);let s=el(void 0,[o,r],e-1,!0,!1,0).v;const a=s[1]-s[0];if(s[0]>o){const c=s[0]-a;s=[c<o?c:o,...s]}if(s[s.length-1]<r){const c=s[s.length-1]+a;s=[...s,c>r?c:r]}return s}function pd(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=la(e);return t.reduce((s,a,c)=>(s[a]=r[c],s),{})}function bd(t,e,r){const o=e.length,s=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let d=0;d<o-1;d++){const u=t[c]>=e[d],f=d===o-2?t[c]<e[d+1]+a:t[c]<e[d+1];if(u&&f){s[c]=r[d];break}}return s}function Ea(t,e,r,o,s="cal"){if(!e)return null;let a,c,d,u,f;if(r==="groups"&&e.classNames){const v=pd(e.classNames);c=Object.keys(v).map(h=>v[h]),a=e.classNames,u=e.classes.map(h=>v[h]),d=new Array(a.length+1).map((h,m)=>m-.5),f=null}else if(r==="variable"){const v=md(t.values.getcolref(o),e.objindices);f=t.varlabels[o-1],f.length>30&&(f=f.substring(0,29)+"..."),d=gd(v,10),c=la(d.length-1),u=bd(v,d,c)}else a=null,d=null,c=null,u=Array(e.nrows).fill(wa[s]);return{labels:a,map:c,breaks:d,colors:u,varname:f}}function wd(t,e,r=.95){const s=2*Math.PI/99,[a,c,d]=t,u=Math.sqrt((a+d)**2-4*(a*d-c*c));let f=.5*(a+d-u),v=.5*(a+d+u);if(f<v){let M=f;f=v,v=M}const h=zn(r,2),m=Math.sqrt(h*f),g=Math.sqrt(h*v);let b;if(Math.abs(c)<1e-7)b=0;else{let M=-c/(a-f),N=1;const L=Math.sqrt(M*M+N*N);M=M/L,N=N/L,b=Math.atan2(N,M),b<0&&(b=b+2*Math.PI)}const p=Math.cos(b),w=Math.sin(b),_=Ce.zeros(100),k=Ce.zeros(100);let C=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY;for(let M=0;M<100;M++){const N=M*s,L=m*Math.cos(N),D=g*Math.sin(N),T=L*p-D*w+e[0],F=L*w+D*p+e[1];_.v[M]=T,k.v[M]=F,C=Math.min(C,T),y=Math.max(y,T),A=Math.min(A,F),P=Math.max(P,F)}return[_,k,C,y,A,P]}function _d(t,e,r,o,s,a){if(!t||!e||!r||!o||!s)return null;const c=t.length,d=o.length,u=new Array(d).fill(0),f=new Array(d*2).fill(0);for(let w=0;w<c;w++){const _=o.indexOf(r[w]);u[_]+=1,f[_*2]+=t.v[w],f[_*2+1]+=e.v[w]}for(let w=0;w<d;w++)f[w*2]=f[w*2]/u[w],f[w*2+1]=f[w*2+1]/u[w];const v=new Array(d*3).fill(0);for(let w=0;w<c;w++){const _=o.indexOf(r[w]),k=t.v[w]-f[_*2],C=e.v[w]-f[_*2+1];v[_*3]+=k*k,v[_*3+1]+=k*C,v[_*3+2]+=C*C}let h=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;const p=Array(d);for(let w=0;w<d;w++){const[_,k,C,y,A,P]=wd([v[w*3]/(u[w]-1),v[w*3+1]/(u[w]-1),v[w*3+2]/(u[w]-1)],[f[w*2],f[w*2+1]],a);p[w]={x:_,y:k,c:s[w]},h=Math.min(h,C),m=Math.max(m,y),g=Math.min(g,A),b=Math.max(b,P)}return{ellipses:p,xRange:[h,m],yRange:[g,b]}}var yd=J("<!> <!> <!> <!>",1);function Nr(t,e){let r=B(e,"whole",3,!1),o=hc(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Vf(t,Gr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",margins:fd,pngWidth:dd,pngHeight:vd,pngRes:hd},()=>o,{children:(s,a)=>{var c=yd(),d=Q(c);kr(d,()=>e.children);var u=q(d,2);va(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var f=q(u,2);ha(f,{showGrid:!0,get label(){return e.yLabel}});var v=q(f,2);ma(v,{}),I(s,c)},$$slots:{default:!0}}))}function xd(t,e){if(t.target.tagName!=="rect"){V(e,-1);return}const r=Array.from(t.target.parentNode.children).indexOf(t.target);if(r<0){V(e,-1);return}l(e)!==r&&V(e,ee(r))}var kd=J("<!> <!> <!>",1),Ed=J("<!> <!> <!> <!> <!>",1),Ad=J('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function Aa(t,e){ge(e,!0);let r=B(e,"outliers",19,()=>[]),o=le("residual"),s=le(-1),a=E(()=>l(u)&&l(s)>=0?l(u).values.v[l(s)]:null),c=E(()=>l(k)&&l(s)>=0?l(k).sel.v[l(s)]:null),d=E(()=>e.model&&l(s)>=0?e.model.varlabels[l(s)]:null),u=E(()=>{if(!e.model)return null;const N=We(e.model.varvalues),L=N.length,D=(N.v[1]-N.v[0])/2,T=(N.v[L-2]-N.v[L-1])/2,F=[N.v[0],N.v[L-1]],H=[F[0]-D,F[1]+T],W=(F[1]-F[0])/L;return{values:N,lim:H,width:W,hwidth:W*.5}}),f=E(()=>l(u)?l(u).values.apply(N=>N-l(u).hwidth):null),v=E(()=>{if(!e.dataset||!e.model)return null;const N=e.dataset.values,L=new Ce(ll(e.model,"mX")),D=new Ce(ll(e.model,"sX"));return ad(N,L,D).t()}),h=E(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new zt(ll(e.model,"P",e.ncomp),e.model.ncols,e.ncomp):null),m=E(()=>l(h)?qc(l(h),l(h)):null),g=E(()=>l(v)&&l(m)?l(m).dot(l(v)):null),b=E(()=>l(g)?l(v).subtract(l(g)):null),p=E(()=>l(g)?l(g).getcolumn(e.selected+1):null),w=E(()=>l(b)?l(b).getcolumn(e.selected+1):null),_=E(()=>l(v)?l(v).getcolumn(e.selected+1):null),k=E(()=>{if(!l(p)||!l(w)||!l(_))return null;const N=l(o)==="explained"?{all:l(g),sel:l(p),label:"Explained part, TP^T"}:l(o)==="residual"?{all:l(b),sel:l(w),label:"Residuals, E"}:{all:l(v),sel:l(_),label:"Data, X"},L=Bn(N.all.v),D=L[1]-L[0],T=[L[0]-D/50,L[1]+D/12],F=Ce.fill(L[1],N.sel.length);return N.lim=T,N.top=F,N.height=D,N});const C=E(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),y=E(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var A=me(),P=Q(A);{var M=N=>{ba(N,{get closeModal(){return e.closeModal},children:(L,D)=>{var T=Ad(),F=O(T);F.__click=[xd,s];var H=O(F);Nr(H,{get title(){return l(C)},get yLabel(){return l(k).label},get xLabel(){return l(y)},get limY(){return l(k).lim},get limX(){return l(u).lim},fileName:"plot-contributions",children:(j,z)=>{var G=Ed(),K=Q(G);sd(K,{get xValues(){return l(u).values},get yValues(){return l(k).all},lineColor:"#e0e0e0"});var Z=q(K,2);{var $=be=>{var we=me(),ae=Q(we);Ye(ae,17,r,Ke,(_e,ie)=>{const ce=E(()=>l(k).all.getcolumn(l(ie)+1));Qr(_e,{get xValues(){return l(u).values},get yValues(){return l(ce)},lineColor:"#ffdd88"})}),I(be,we)};U(Z,be=>{r().length>0&&be($)})}var ue=q(Z,2);Qr(ue,{get xValues(){return l(u).values},get yValues(){return l(k).sel},lineColor:"crimson"});var X=q(ue,2);ga(X,{get left(){return l(f)},get top(){return l(k).top},get height(){return l(k).height},get width(){return l(u).width},faceColor:"transparent",borderColor:"transparent"});var te=q(X,2);{var fe=be=>{var we=kd(),ae=Q(we);const _e=E(()=>[l(a)]),ie=E(()=>[l(k).top.v[0]]),ce=E(()=>[l(d)]);nl(ae,{get xValues(){return l(_e)},get yValues(){return l(ie)},get labels(){return l(ce)},pos:3,textSize:.85});var se=q(ae,2);const Te=E(()=>[l(a)]),Ee=E(()=>[l(c)]);ol(se,{get xValues(){return l(Te)},get yValues(){return l(Ee)},faceColor:"crimson",lineColor:"crimson"});var Pe=q(se,2);const wt=E(()=>[l(f).v[l(s)]]),Et=E(()=>[l(k).top.v[l(s)]]);ga(Pe,{get left(){return l(wt)},get top(){return l(Et)},get height(){return l(k).height},get width(){return l(u).width},faceColor:"#ff000015"}),I(be,we)};U(te,be=>{l(s)>=0&&be(fe)})}I(j,G)},$$slots:{default:!0}});var W=q(F,4),ne=O(W);Me(ne,{label:"",children:(j,z)=>{ut(j,{id:"type",options:["full","explained","residual"],get value(){return l(o)},set value(G){V(o,ee(G))}})},$$slots:{default:!0}}),I(L,T)},$$slots:{default:!0}})};U(P,N=>{l(u)&&l(k)&&N(M)})}I(t,A),pe()}Ze(["click"]);var Cd=J("<!> <!> <!> <!>",1),Md=J("<p> </p>"),Sd=J("<!> <p>Computing global model...</p>",1),Nd=J('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Td=J('<div class="buttons"><!> <!></div>'),Id=J("<!> <!>",1),Pd=J("<p> </p>"),Ld=J("<!> <!> <!> <!>",1);function Rd(t,e){ge(e,!0);let r=B(e,"resobj",15),o=B(e,"model",15),s=B(e,"downloadModel",3,null),a=B(e,"downloadResults",3,null),c=le("neutral"),d=le(""),u=le(1),f=le(!0),v=le(!1),h=le(void 0);async function m(L,D,T,F){V(h,ee(e.WASM().then(H=>{V(c,"computing");const W=zc(H,L.values,D,T,F,e.outliers);W.hash=Is(),W.exclvars=[],W.varlabels=L.varlabels,W.varindices=L.varindices,W.varvalues=L.varvalues,W.varvaluesName=L.varvaluesName,W.varvaluesUnits=L.varvaluesUnits,W.varrev=L.varrev,W.exclvars=[],W.prep=[];const ne=Ps(H,W,L,e.outliers);o(W),r(ne),V(c,"success")}).catch(H=>{o(null),V(c,"error"),V(d,ee(H))})))}function g(L){V(c,"neutral"),V(d,null),m(e.dataset,l(u),l(f),l(v))}function b(){V(c,"neutral"),V(h,null),r(null),o(null),V(d,null)}let p=E(()=>e.dataset?Math.min(e.dataset.values.nrows-2-e.outliers.length,e.dataset.values.ncols-1,50):null);ze(()=>{e.dataset===null&&b()}),ze(()=>{V(u,ee(l(p)?Math.min(l(p),20):null))});var w=Ld(),_=Q(w);{var k=L=>{var D=Cd(),T=Q(D);Me(T,{label:"# of PCs",children:(ne,j)=>{ou(ne,{id:"ncomp",min:1,get max(){return l(p)},step:1,decNum:0,get value(){return l(u)},set value(z){V(u,ee(z))}})},$$slots:{default:!0}});var F=q(T,2);Me(F,{label:"Center",children:(ne,j)=>{Bt(ne,{id:"center",options:["no","yes"],get value(){return l(f)},set value(z){V(f,ee(z))}})},$$slots:{default:!0}});var H=q(F,2);Me(H,{label:"Scale",children:(ne,j)=>{Bt(ne,{id:"scale",options:["no","yes"],get value(){return l(v)},set value(z){V(v,ee(z))}})},$$slots:{default:!0}});var W=q(H,2);Me(W,{label:" ",children:(ne,j)=>{Ot(ne,{onclick:g,text:"Create model"})},$$slots:{default:!0}}),I(L,D)};U(_,L=>{e.dataset&&!o()&&l(c)!=="computing"&&L(k)})}var C=q(_,2);{var y=L=>{var D=me(),T=Q(D);Ql(T,()=>l(h),F=>{Me(F,{children:(H,W)=>{var ne=Sd(),j=Q(ne);Us(j),I(H,ne)},$$slots:{default:!0}})},void 0,(F,H)=>{Me(F,{status:"error",children:(W,ne)=>{var j=Md(),z=O(j);re(()=>xe(z,l(H))),I(W,j)},$$slots:{default:!0}})}),I(L,D)};U(C,L=>{l(h)&&L(y)})}var A=q(C,2);{var P=L=>{var D=Id(),T=Q(D);Me(T,{children:(W,ne)=>{var j=Nd(),z=Q(j),G=q(O(z)),K=q(z,2);fn(K,{onclick:b}),re(()=>xe(G,` ${o().ncomp??""} PCs${(o().center?", centered":"")??""}${(o().scale?", scaled":"")??""}`)),I(W,j)},$$slots:{default:!0}});var F=q(T,2);{var H=W=>{Me(W,{label:"Download",children:(ne,j)=>{var z=Td(),G=O(z);Ot(G,{onclick:()=>a()(r(),e.dataset,"train",e.outliers,o()),text:"Results"});var K=q(G,2);Ot(K,{onclick:()=>s()(o()),text:"Model"}),I(ne,z)},$$slots:{default:!0}})};U(F,W=>{s()&&a()&&W(H)})}I(L,D)};U(A,L=>{o()&&L(P)})}var M=q(A,2);{var N=L=>{Me(L,{status:"error",children:(D,T)=>{var F=Pd(),H=O(F);re(()=>xe(H,l(d))),I(D,F)},$$slots:{default:!0}})};U(M,L=>{(l(c)==="error"||l(d))&&L(N)})}I(t,w),pe()}var jd=J('<div class="msg-select">Click on an element to select object...</div>'),Fd=J('<div class="msg-select">Click anywhere to remove selection...</div>'),qd=J('<div class="selected-buttons svelte-112cmye"><!></div>'),Od=J("<!> <!>",1),Bd=()=>switchPlot(i),Vd=(t,e,r)=>V(e,ee(l(r))),Dd=J('<button class="plot-selector svelte-112cmye"> </button>'),zd=J('<div class="plot-container svelte-112cmye"><div class="plot-area svelte-112cmye"><div class="plot svelte-112cmye"><!></div> <div class="plot-select-msg svelte-112cmye"><!></div></div> <div class="plot-controls-area svelte-112cmye"></div></div>');function Ca(t,e){ge(e,!0);let r=B(e,"params",15),o=ee({objects:-1,variables:-1}),s=le(ee(Object.keys(e.plots)[0]));function a(k){o.objects=k}function c(k){o.objects=-1}let d={objects:{select:a,unselect:c},variables:{},stats:{}},u=E(()=>l(s)?e.plots[l(s)]:null),f=E(()=>l(u)?l(u).component:null);var v=zd(),h=O(v),m=O(h),g=O(m);Mo(g,()=>l(f),(k,C)=>{C(k,{get params(){return r()[l(s)]},get callbacks(){return d[l(u).scope]},get selected(){return o[l(u).scope]},get props(){return e.props}})});var b=q(m,2),p=O(b);{var w=k=>{var C=me(),y=Q(C);{var A=M=>{var N=jd();I(M,N)},P=M=>{var N=Fd();I(M,N)};U(y,M=>{o[l(u).scope]<0?M(A):M(P,!1)})}I(k,C)};U(p,k=>{l(u).scope==="objects"&&r()[l(s)].plotType!=="l"&&k(w)})}var _=q(h,2);Ye(_,21,()=>Object.keys(e.plots),Ke,(k,C)=>{var y=me(),A=Q(y);{var P=N=>{var L=Od(),D=Q(L);ku(D,{get title(){return l(u).label},labelWidth:12,get options(){return e.controls[l(s)]},get value(){return r()[l(s)]},set value(H){r(r()[l(s)]=H,!0)}});var T=q(D,2);{var F=H=>{var W=qd(),ne=O(W);kr(ne,()=>l(u).buttons,()=>o.objects),I(H,W)};U(T,H=>{l(u).buttons&&o.objects>=0&&H(F)})}I(N,L)},M=N=>{var L=Dd();L.__keydown=[Bd],L.__click=[Vd,s,C];var D=O(L);re(()=>xe(D,e.plots[l(C)].label)),I(N,L)};U(A,N=>{l(u)&&l(s)===l(C)?N(P):N(M,!1)})}I(k,y)}),I(t,v),pe()}Ze(["keydown","click"]);function Ma(t,e){!e.callbacks||!e.callbacks.select||Mr(t,t.target.tagName,e.callbacks.select)}function Yd(t,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var Wd=ve("<text> </text>"),Ud=ve('<g class="series series-textlabels"></g>'),Hd=ve('<g class="series series-line"><polyline class="line"></polyline></g>'),Gd=ve("<rect></rect>"),Kd=ve('<g class="series series-bar"></g>'),Xd=ve("<text> </text>"),Qd=ve('<g class="series series-points series-points1"></g>'),Jd=ve('<g class="series series-points series-points1"><text> </text></g>'),Zd=ve('<g class="series series-bar"><rect></rect></g>'),$d=ve('<g class="series series-text"><text> </text></g>'),ev=ve('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),tv=ve("<!><!><!><!><!>",1);function vn(t,e){ge(e,!0);let r=B(e,"shortenLabels",3,!0),o=B(e,"lineWidth",3,1),s=B(e,"pch",3,"●"),a=B(e,"colors",3,void 0),c=B(e,"mainColor",19,()=>wa.cal),d=B(e,"faceColor",3,null),u=B(e,"selected",19,()=>-1),f=B(e,"xRange",15),v=B(e,"yRange",15);const h=St("axes"),m=E(()=>bt(e.xValues,"PlotSeries")),g=E(()=>l(m)?bt(e.yValues,"PlotSeries",l(m).length):null);ze(()=>{f(l(m)?Bn(l(m)):null),v(l(g)?Bn(l(g)):null)});const b=E(()=>d()===null?e.plotType==="p"?"transparent":"white":d()),p=E(()=>e.plotType==="p"?1:.7),w=E(()=>Xo[h.scales().plot]),_=E(()=>tt([0],h.tY())[0]),k=E(()=>Qo([.8],h.tX())[0]),C=E(()=>l(k)/2),y=E(()=>l(w));let A=E(()=>e.plotType==="l"||e.plotType==="b"?$o(l(m),l(g),h.tX(),h.tY()):null),P=E(()=>l(m)?tt(l(m),h.tX()):null),M=E(()=>l(g)?tt(l(g),h.tY()):null),N=E(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(G=>G.slice(0,sl)):e.labels:null),L=E(()=>a()&&a().length===l(m).length?a():Array(l(m).length).fill(c()));const D=E(()=>`font-size:${l(p)}em;fill:${l(b)};cursor:default;text-anchor:middle;stroke-width:2px;user-select:none;`),T=`font-size:0.85em;fill:${ya};cursor:default;text-anchor:middle;stroke:${ya};stroke-width:0.1px;user-select:none;`,F="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",H=`fill:transparent;stroke-width: ${o()}px;`,W=`stroke-width:${o()}px;`;var ne=me(),j=Q(ne);{var z=G=>{var K=tv(),Z=Q(K);{var $=ie=>{var ce=Ud();S(ce,"style",T),Ye(ce,21,()=>l(P),Ke,(se,Te,Ee)=>{var Pe=Wd(),wt=O(Pe);re(()=>{S(Pe,"x",l(P)[Ee]),S(Pe,"y",l(M)[Ee]),S(Pe,"dy",l(g).v[Ee]<0?l(y):-l(y)),xe(wt,l(N)[Ee])}),I(se,Pe)}),I(ie,ce)};U(Z,ie=>{e.showLabels&&l(N)&&ie($)})}var ue=q(Z);{var X=ie=>{var ce=Hd();S(ce,"style",H);var se=O(ce);re(()=>{S(se,"points",l(A)),S(se,"stroke",c())}),I(ie,ce)};U(ue,ie=>{(e.plotType==="l"||e.plotType==="b")&&ie(X)})}var te=q(ue);{var fe=ie=>{var ce=Kd();S(ce,"style",W),ce.__click=[Ma,e],Ye(ce,21,()=>l(P),Ke,(se,Te,Ee)=>{var Pe=Gd();re(()=>{S(Pe,"x",l(P)[Ee]-l(C)),S(Pe,"y",l(g).v[Ee]<0?l(_):l(M)[Ee]),S(Pe,"fill",l(L)[Ee]),S(Pe,"width",l(k)),S(Pe,"height",l(g).v[Ee]<0?l(M)[Ee]-l(_):l(_)-l(M)[Ee])}),I(se,Pe)}),I(ie,ce)};U(te,ie=>{e.plotType==="h"&&ie(fe)})}var be=q(te);{var we=ie=>{var ce=Qd();ce.__click=[Ma,e],Ye(ce,21,()=>l(P),Ke,(se,Te,Ee)=>{var Pe=Xd(),wt=O(Pe);re(()=>{S(Pe,"x",l(P)[Ee]),S(Pe,"y",l(M)[Ee]),S(Pe,"fill",d()),S(Pe,"stroke",l(L)[Ee]),xe(wt,s())}),I(se,Pe)}),re(()=>S(ce,"style",l(D))),I(ie,ce)};U(be,ie=>{(e.plotType==="p"||e.plotType==="b")&&ie(we)})}var ae=q(be);{var _e=ie=>{var ce=ev(),se=Q(ce);S(se,"x",0),S(se,"y",0),se.__click=[Yd,e];var Te=q(se);{var Ee=it=>{var ot=Jd();S(ot,"style",F);var Je=O(ot),Tr=O(Je);re(()=>{S(Je,"x",l(P)[u()]),S(Je,"y",l(M)[u()]),S(Je,"stroke",l(L)[u()]),xe(Tr,s())}),I(it,ot)},Pe=it=>{var ot=Zd();S(ot,"style",W);var Je=O(ot);re(()=>{S(Je,"stroke",l(L)[u()]),S(Je,"fill",l(L)[u()]),S(Je,"x",l(P)[u()]-l(C)),S(Je,"y",l(g).v[u()]<0?l(_):l(M)[u()]),S(Je,"width",l(k)),S(Je,"height",l(g).v[u()]<0?l(M)[u()]-l(_):l(_)-l(M)[u()])}),I(it,ot)};U(Te,it=>{e.plotType!=="h"?it(Ee):it(Pe,!1)})}var wt=q(Te);{var Et=it=>{var ot=$d();S(ot,"style",T);var Je=O(ot);S(Je,"stroke",xa),S(Je,"fill",xa);var Tr=O(Je);re(()=>{S(Je,"x",l(P)[u()]),S(Je,"y",l(M)[u()]),S(Je,"dy",l(g).v[u()]<0?l(y):-l(y)),xe(Tr,l(N)[u()])}),I(it,ot)};U(wt,it=>{e.showLabels&&l(N)&&l(N).length>0&&it(Et)})}I(ie,ce)};U(ae,ie=>{u()>=0&&ie(_e)})}I(G,K)};U(j,G=>{l(P)&&l(M)&&G(z)})}I(t,ne),pe()}Ze(["click"]);function rv(t,e){ge(e,!0);let r=B(e,"lineColor",3,"#606060"),o=B(e,"lineType",3,2),s=B(e,"alpha",3,.05),a=B(e,"xRange",15),c=B(e,"yRange",15);const d=Ce.seq(0,2*Math.PI,.05);function u(w,_,k,C){const y=w.eigenvals[_-1],A=zn(1-s(),2),P=Math.sqrt(A*y),M=Ce.zeros(C.length);for(let N=0;N<C.length;N++)M.v[N]=P*k(C.v[N]);return[M,-P,P]}let f=E(()=>e.comp?e.comp[0]:null),v=E(()=>l(f)?u(e.resobj,l(f),Math.cos,d):null);ze(()=>{a(l(v)?[l(v)[1],l(v)[2]]:null)});let h=E(()=>e.comp?e.comp[1]:null),m=E(()=>l(h)?u(e.resobj,l(h),Math.sin,d):null);ze(()=>{c(l(m)?[l(m)[1],l(m)[2]]:null)});var g=me(),b=Q(g);{var p=w=>{Qr(w,{get xValues(){return l(v)[0]},get yValues(){return l(m)[0]},get lineColor(){return r()},get lineType(){return o()}})};U(b,w=>{l(v)&&l(m)&&w(p)})}I(t,g),pe()}function nv(t,e){ge(e,!0);let r=B(e,"confLevel",3,.95),o=B(e,"xRange",15),s=B(e,"yRange",15),a=E(()=>_d(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,r()));ze(()=>{l(a)?(o(l(a).xRange),s(l(a).yRange)):(o(null),s(null))});var c=me(),d=Q(c);{var u=f=>{var v=me(),h=Q(v);Ye(h,17,()=>l(a).ellipses,Ke,(m,g,b)=>{Qr(m,{get xValues(){return l(g).x},get yValues(){return l(g).y},get lineColor(){return e.groupColors[b]}})}),I(f,v)};U(d,f=>{l(a)&&l(a).ellipses&&f(u)})}I(t,c),pe()}var ov=J("<!> <!> <!> <!> <!> <!>",1);function Sa(t,e){ge(e,!0);let r=B(e,"alpha",3,.05),o=E(()=>e.props&&e.props.data?e.props.data:null),s=E(()=>e.props&&e.props.res?e.props.res:null),a=E(()=>e.params&&e.params.resID?l(s)[e.params.resID]:null),c=E(()=>e.params&&e.params.resID?l(o)[e.params.resID]:null);function d(j,z,G,K,Z){if(!G)return null;let $=G[0],ue=G[1];j&&K&&($=Math.min($,K[0]),ue=Math.max(ue,K[1])),z!=="none"&&Z&&($=Math.min($,Z[0]),ue=Math.max(ue,Z[1]));const X=(ue-$)*.1;return{min:$,max:ue,d:X}}function u(j,z){if(!(!j||!z||z<1||z>j.ncomp))return new Ce(cn(j,"scores",z))}let f=le(void 0),v=le(void 0),h=le(void 0),m=le(void 0),g=le(void 0),b=le(void 0),p=E(()=>l(s)?We(l(a).objindices):null),w=E(()=>l(a)?l(a).objlabels.map(j=>j.slice(0,sl)):null),_=E(()=>u(l(a),e.params.comp1)),k=E(()=>e.params.plotType==="p"?l(_):l(p)),C=E(()=>e.params.comp2?e.params.comp2:null),y=E(()=>u(l(a),l(C))),A=E(()=>Ea(l(c),l(a),e.params.colorBy,e.params.colorByVar,e.params.resID)),P=E(()=>e.params.plotType==="p"?ka(l(a),e.params.comp1):"Objects"),M=E(()=>ka(l(a),e.params.comp2)),N=E(()=>d(e.params.showEllipse,e.params.confEllipse,l(f),l(h),l(g))),L=E(()=>l(N)?[l(N).min-l(N).d,l(N).max+l(N).d]:[0,1]),D=E(()=>d(e.params.showEllipse,e.params.confEllipse,l(v),l(m),l(b))),T=E(()=>l(D)?[l(D).min-l(D).d,l(D).max+l(D).d*(1+(e.params.colorBy!=="none"))]:[0,1]),F=E(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!l(A)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+l(A).varname+(l(c).varvaluesUnits?" "+l(c).varvaluesUnits:"")+")");var H=me(),W=Q(H);{var ne=j=>{Nr(j,{get title(){return l(F)},get limX(){return l(L)},get limY(){return l(T)},get xLabel(){return l(P)},get yLabel(){return l(M)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(z,G)=>{var K=ov(),Z=Q(K);const $=E(()=>[l(L)[0]]),ue=E(()=>[l(L)[1]]);Sr(Z,{get xStart(){return l($)},get xEnd(){return l(ue)},yStart:[0],yEnd:[0],lineColor:Jr});var X=q(Z,2);{var te=se=>{const Te=E(()=>[l(T)[0]]),Ee=E(()=>[l(T)[1]]);Sr(se,{xStart:[0],xEnd:[0],get yStart(){return l(Te)},get yEnd(){return l(Ee)},lineColor:Jr})};U(X,se=>{e.params.plotType==="p"&&se(te)})}var fe=q(X,2);{var be=se=>{const Te=E(()=>[e.params.comp1,e.params.comp2]);rv(se,{get alpha(){return r()},get resobj(){return l(a)},get comp(){return l(Te)},get xRange(){return l(h)},set xRange(Ee){V(h,ee(Ee))},get yRange(){return l(m)},set yRange(Ee){V(m,ee(Ee))}})};U(fe,se=>{e.params.showEllipse&&e.params.plotType==="p"&&se(be)})}var we=q(fe,2);{var ae=se=>{const Te=E(()=>Number.parseInt(e.params.confEllipse)/100);nv(se,{get xValues(){return l(k)},get yValues(){return l(y)},get confLevel(){return l(Te)},get groups(){return l(a).classes},get groupNames(){return l(a).classNames},get groupColors(){return l(A).map},get xRange(){return l(g)},set xRange(Ee){V(g,ee(Ee))},get yRange(){return l(b)},set yRange(Ee){V(b,ee(Ee))}})};U(we,se=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&l(A)&&se(ae)})}var _e=q(we,2);vn(_e,{get xValues(){return l(k)},get yValues(){return l(y)},get labels(){return l(w)},get selected(){return e.selected},get callbacks(){return e.callbacks},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return l(A).colors},get xRange(){return l(f)},set xRange(se){V(f,ee(se))},get yRange(){return l(v)},set yRange(se){V(v,ee(se))}});var ie=q(_e,2);{var ce=se=>{const Te=E(()=>l(A).breaks!==null);pa(se,{get show(){return l(Te)},get colmap(){return l(A).map},get breaks(){return l(A).breaks},get labels(){return l(A).labels}})};U(ie,se=>{l(A)&&se(ce)})}I(z,K)},$$slots:{default:!0}})};U(W,j=>{l(k)&&l(y)&&j(ne)})}I(t,H),pe()}var lv=J("<!> <!> <!>",1);function sv(t,e){ge(e,!0);let r=E(()=>e.props?e.props.model:null);function o(y,A){return!y||!A||A<1||A>y.ncomp?null:new Ce(It(y,"loadings",A))}let s=le(void 0),a=le(void 0),c=E(()=>l(r)?We(l(r).varvalues):null),d=E(()=>l(r)?We(l(r).varindices):null),u=E(()=>o(l(r),e.params.comp1)),f=E(()=>!l(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:l(u),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&l(c)?{values:l(c),label:l(r).varvaluesName+(l(r).varvaluesUnits?", "+l(r).varvaluesUnits:"")}:{values:l(d),label:"Variables"}),v=E(()=>l(f)?l(f).values:null),h=E(()=>l(f)?l(f).label:null),m=E(()=>o(l(r),e.params.comp2)),g=E(()=>`PC${e.params.comp2}`),b=E(()=>{if(l(a)&&l(a)[0]<Number.POSITIVE_INFINITY&&l(a)[1]>Number.NEGATIVE_INFINITY){const y=(l(a)[1]-l(a)[0])*.1;return[l(a)[0]-y,l(a)[1]+y]}else return[0,1]}),p=E(()=>{if(l(s)&&l(s)[0]<Number.POSITIVE_INFINITY&&l(s)[1]>Number.NEGATIVE_INFINITY){const y=(l(s)[1]-l(s)[0])*.1;return e.params.plotType==="l"&&l(r).varrev?[l(s)[1]+y,l(s)[0]-y]:[l(s)[0]-y,l(s)[1]+y]}else return[0,1]}),w=E(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const y=Math.max(Math.abs(l(p)[0]),Math.abs(l(b)[0]),l(p)[1],l(b)[1])*1.05;return{x:[-y,y],y:[-y,y]}}else{const y=Math.max(Math.abs(l(b)[0]),l(b)[1])*1.05;return{x:l(p),y:[-y,y]}}return{x:l(p),y:l(b)}});var _=me(),k=Q(_);{var C=y=>{Nr(y,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return l(h)},get yLabel(){return l(g)},get limX(){return l(w).x},get limY(){return l(w).y},children:(A,P)=>{var M=lv(),N=Q(M);const L=E(()=>[l(w).x[0]]),D=E(()=>[l(w).x[1]]);Sr(N,{get xStart(){return l(L)},get xEnd(){return l(D)},yStart:[0],yEnd:[0],lineColor:Jr});var T=q(N,2);{var F=W=>{const ne=E(()=>[l(w).y[0]]),j=E(()=>[l(w).y[1]]);Sr(W,{xStart:[0],xEnd:[0],get yStart(){return l(ne)},get yEnd(){return l(j)},lineColor:Jr})};U(T,W=>{e.params.plotType==="p"&&W(F)})}var H=q(T,2);vn(H,{get xValues(){return l(v)},get yValues(){return l(m)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return l(r).varlabels},shortenLabels:!1,get xRange(){return l(s)},set xRange(W){V(s,ee(W))},get yRange(){return l(a)},set yRange(W){V(a,ee(W))}}),I(A,M)},$$slots:{default:!0}})};U(k,y=>{l(v)&&l(m)&&y(C)})}I(t,_),pe()}var av=J("<!> <!> <!> <!> <!> <!> <!>",1);function Na(t,e){ge(e,!0),B(e,"alpha",3,.05);const r="#2679B2",o="#D22C2F",s="#667892",a="#927866";let c=E(()=>e.props?e.props.model:null),d=E(()=>e.props?e.props.res:null),u=E(()=>l(d)?l(d)[e.params.resID]:null);function f(P,M){return`PC${M} (${(P.stat.expvar[M-1]*100).toFixed(1)}%)`}function v(P,M,N){if(!M||!N||P<1||P>l(d).ncomp)return null;const L=cn(M,"scores",P).slice(),D=It(N,"loadings",P),T=L.length,F=D.length;let H=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY;const ne=new Array(T);for(let X=0;X<T;X++)L[X]=L[X]/Math.sqrt(l(h)[P-1]*(T-1)),H>L[X]&&(H=L[X]),W<L[X]&&(W=L[X]),ne[X]=L[X]<0?1:3;const j=new Array(T);for(let X=0;X<F;X++)H>D[X]&&(H=D[X]),W<D[X]&&(W=D[X]),j[X]=D[X]<0?1:3;const z=new Ce(L),G=new Ce(D),K=f(M,P),Z=(W-H)/15,$=[H-Z,W+Z],ue=Math.max(Math.abs($[0]),$[1]);return{values:z,end:G,lim:$,label:K,tpos:ne,ppos:j,mx:ue}}let h=E(()=>l(c)?It(l(c),"eigenvals"):null),m=E(()=>l(u)?Ce.zeros(l(u).ncols):null),g=E(()=>l(u)?Ce.zeros(l(u).ncols):null),b=E(()=>v(e.params.comp1,l(u),l(c))),p=E(()=>v(e.params.comp2,l(u),l(c))),w=E(()=>l(b)&&l(p)?Math.max(l(b).mx,l(p).mx)*1.05:0),_=E(()=>l(b)?e.params.axesEqual?[-l(w),l(w)]:l(b).lim:[0,1]),k=E(()=>l(p)?e.params.axesEqual?[-l(w),l(w)]:l(p).lim:[0,1]);var C=me(),y=Q(C);{var A=P=>{Nr(P,{get limX(){return l(_)},get limY(){return l(k)},get xLabel(){return l(b).label},get yLabel(){return l(p).label},fileName:"plot-biplot",title:"Bi-plot (scores and loadings)",children:(M,N)=>{var L=av(),D=Q(L);const T=E(()=>[l(_)[0]]),F=E(()=>[l(_)[1]]);Sr(D,{get xStart(){return l(T)},get xEnd(){return l(F)},yStart:[0],yEnd:[0],lineColor:Jr});var H=q(D,2);const W=E(()=>[l(k)[0]]),ne=E(()=>[l(k)[1]]);Sr(H,{xStart:[0],xEnd:[0],get yStart(){return l(W)},get yEnd(){return l(ne)},lineColor:Jr});var j=q(H,2);ol(j,{get xValues(){return l(b).values},get yValues(){return l(p).values},lineColor:o,borderWidth:1.5});var z=q(j,2);Sr(z,{get xStart(){return l(m)},get yStart(){return l(g)},get xEnd(){return l(b).end},get yEnd(){return l(p).end},lineColor:r});var G=q(z,2);ol(G,{get xValues(){return l(b).end},get yValues(){return l(p).end},marker:1,lineColor:r,faceColor:r,markerSize:.4});var K=q(G,2);{var Z=X=>{nl(X,{get xValues(){return l(b).values},get yValues(){return l(p).values},get labels(){return l(u).objlabels},get pos(){return l(p).tpos},textSize:.75,faceColor:a})};U(K,X=>{(e.params.showLabels==="obj"||e.params.showLabels==="both")&&X(Z)})}var $=q(K,2);{var ue=X=>{nl(X,{get xValues(){return l(b).end},get yValues(){return l(p).end},get labels(){return l(u).varlabels},textSize:.75,get pos(){return l(p).ppos},faceColor:s})};U($,X=>{(e.params.showLabels==="var"||e.params.showLabels==="both")&&X(ue)})}I(M,L)},$$slots:{default:!0}})};U(y,P=>{l(b)&&l(p)&&P(A)})}I(t,C),pe()}var iv=J("<!> <!> <!> <!>",1);function Ta(t,e){ge(e,!0);let r=E(()=>e.props?e.props.res:null),o=E(()=>l(r)?l(r)[e.params.resID]:null);const s=[-.05,1.1],a={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"};let c=E(()=>e.params.varForm==="cumulative"?"cum":""),d=E(()=>e.params.varType==="explained"?"exp":"res"),u=E(()=>l(c)+l(d)+"var"),f=E(()=>a[l(u)]),v=E(()=>l(o)?[1-l(o).ncomp*.05,l(o).ncomp+l(o).ncomp*.05]:[0,1]),h=E(()=>l(o)?l(o).stat.components:null),m=E(()=>l(o)?We(l(o).stat[l(u)]):null),g=E(()=>l(m)?Array.from(l(m).v).map(_=>_.toFixed(_<.1?3:2)):null);var b=me(),p=Q(b);{var w=_=>{const k=E(()=>"plot-"+l(u));Nr(_,{get title(){return l(f)},get limX(){return l(v)},limY:s,get fileName(){return l(k)},children:(C,y)=>{var A=iv(),P=Q(A);vn(P,{get xValues(){return l(h)},get yValues(){return l(m)},get labels(){return l(g)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return _a.cal},lineWidth:1.5});var M=q(P,2);va(M,{showGrid:!0,label:"Number of PCs",whole:!0});var N=q(M,2);ha(N,{showGrid:!0,label:"Variance"});var L=q(N,2);ma(L,{}),I(C,A)},$$slots:{default:!0}})};U(p,_=>{l(h)&&l(m)&&_(w)})}I(t,b),pe()}function cv(t,e){ge(e,!0);let r=E(()=>e.props?e.props.model:null);const o={none:"λ",log:"log(λ)",sqrt:"sqrt(λ)"};function s(k,C){const y=l(r).nrows-1;if(C==="none")return k.apply(A=>A*y);if(C==="log")return k.apply(A=>Math.log(A*y));if(C==="sqrt")return k.apply(A=>Math.sqrt(A*y))}let a=E(()=>l(r)?new Ce(It(l(r),"eigenvals")):null),c=E(()=>l(r)?Ce.seq(1,l(r).ncomp):null),d=E(()=>l(a)?s(l(a),e.params.transform):null),u=E(()=>l(d)?Array.from(l(d).v).map(k=>k.toFixed(k<.1?3:2)):null),f=E(()=>l(r)?[1-l(r).ncomp/15,l(r).ncomp+l(r).ncomp/20]:[0,1]),v=E(()=>l(d)?e.params.transform==="none"?0:l(d).v[l(r).ncomp-1]:0),h=E(()=>l(d)?l(d).v[0]:1),m=E(()=>(l(h)-l(v))/18),g=E(()=>l(d)?[l(v)-l(m),l(h)+l(m)]:[0,1]),b=E(()=>o[e.params.transform]);var p=me(),w=Q(p);{var _=k=>{Nr(k,{get limX(){return l(f)},get limY(){return l(g)},get yLabel(){return l(b)},whole:!0,xLabel:"Number of PCs",title:"Eigenvalues",fileName:"plot-eigenvalues",children:(C,y)=>{vn(C,{get xValues(){return l(c)},get yValues(){return l(d)},get labels(){return l(u)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return _a.cal},lineWidth:1.5})},$$slots:{default:!0}})};U(w,k=>{l(c)&&l(d)&&k(_)})}I(t,p),pe()}var uv=J("<!> <!> <!> <!>",1);function Ia(t,e){ge(e,!0);let r=E(()=>e.props&&e.props.data?e.props.data:null),o=E(()=>e.props&&e.props.res?e.props.res:null),s=E(()=>e.params&&e.params.resID?l(o)[e.params.resID]:null),a=E(()=>e.params&&e.params.resID?l(r)[e.params.resID]:null);const c="#909090",d=100;function u(z,G,K,Z){if(!z||!G)return null;const $=z.length;let ue=Ce.zeros($),X=Number.NEGATIVE_INFINITY,te=Number.POSITIVE_INFINITY;if(Z==="log")for(let fe=0;fe<$;fe++){const be=Math.log(1+z[fe]/K);ue.v[fe]=be,X=Math.max(X,be),te=Math.min(te,be)}else for(let fe=0;fe<$;fe++){const be=z[fe]/K;ue.v[fe]=be,X=Math.max(X,be),te=Math.min(te,be)}return{values:ue,min:te,max:X}}function f(z,G){return{q:"Orthogonal distance",h:"Score distance"}[z]+", "+(G==="log"?"log(1 + "+z+"/"+z+"0)":z+"/"+z+"0")}function v(z,G,K,Z){const $=G+K,X=zn(z,$)/K,te=-G/K,fe=-X/te,be=Ce.seq(0,fe*1,fe/d),we=be.apply(ae=>ae*te+X);return{x:Z==="log"?be.apply(ae=>Math.log(1+ae)):be,y:Z==="log"?we.apply(ae=>Math.log(1+ae)):we}}let h=E(()=>e.params.limType==="classic"?{h:l(s).cNh,q:l(s).cNq}:{h:l(s).rNh,q:l(s).rNq}),m=E(()=>e.params.limType==="classic"?{h:l(s).ch0,q:l(s).cq0}:{h:l(s).rh0,q:l(s).rq0}),g=E(()=>({h:l(h).h[e.params.ncomp-1],q:l(h).q[e.params.ncomp-1]})),b=E(()=>({h:l(m).h[e.params.ncomp-1],q:l(m).q[e.params.ncomp-1]})),p=E(()=>v(.95,l(g).h,l(g).q,e.params.transType)),w=E(()=>v(Math.pow(.99,1/l(s).nrows),l(g).h,l(g).q,e.params.transType)),_=E(()=>Ea(l(a),l(s),e.params.colorBy,e.params.colorByVar,e.params.resID)),k=E(()=>l(s)?cn(l(s),"hdist",e.params.ncomp):null),C=E(()=>l(s)?cn(l(s),"qdist",e.params.ncomp):null),y=E(()=>u(l(k),l(g).h,l(b).h,e.params.transType)),A=E(()=>u(l(C),l(g).q,l(b).q,e.params.transType)),P=E(()=>l(s)?l(s).objlabels.map(z=>z.slice(0,sl)):null),M=E(()=>"Distances (A = "+e.params.ncomp+")"),N=E(()=>f("h",e.params.transType)),L=E(()=>f("q",e.params.transType)),D=le(void 0),T=le(void 0),F=E(()=>{if(!l(y)||!l(D))return[0,1];const z=Math.max(l(y).max,l(w).x.v[d-1]);return[-.02*(z-l(D)[0]),1.05*z]}),H=E(()=>{if(!l(A)||!l(T))return[0,1];const z=Math.max(l(A).max,l(w).y.v[0]);return[-.02*(z-l(T)[0]),(1.05+.1*(e.params.colorBy!=="none"))*z]});var W=me(),ne=Q(W);{var j=z=>{Nr(z,{get title(){return l(M)},get limX(){return l(F)},get limY(){return l(H)},get xLabel(){return l(N)},get yLabel(){return l(L)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(G,K)=>{var Z=uv(),$=Q(Z);{var ue=ae=>{Qr(ae,{get xValues(){return l(p).x},get yValues(){return l(p).y},lineColor:c,lineType:2})};U($,ae=>{l(p)&&ae(ue)})}var X=q($,2);{var te=ae=>{Qr(ae,{get xValues(){return l(w).x},get yValues(){return l(w).y},lineColor:c,lineType:3})};U(X,ae=>{l(w)&&ae(te)})}var fe=q(X,2);vn(fe,{get labels(){return l(P)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(y).values},get yValues(){return l(A).values},plotType:"p",get showLabels(){return e.params.showLabels},get colors(){return l(_).colors},get xRange(){return l(D)},set xRange(ae){V(D,ee(ae))},get yRange(){return l(T)},set yRange(ae){V(T,ee(ae))}});var be=q(fe,2);{var we=ae=>{const _e=E(()=>l(_).breaks!==null);pa(ae,{get show(){return l(_e)},get colmap(){return l(_).map},get breaks(){return l(_).breaks},get labels(){return l(_).labels}})};U(be,ae=>{l(_)&&ae(we)})}I(G,Z)},$$slots:{default:!0}})};U(ne,z=>{l(y)&&l(A)&&z(j)})}I(t,W),pe()}function Pa(t){const e=Object.keys(t),r=t[e[0]],o=r.classNames&&r.classNames.length>1?["none","groups","variable"]:["none","variable"];return{plotType:{el:Hn,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:br,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:br,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},resID:{el:ut,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},showEllipse:{el:Bt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:ut,hidden:!1,default:"none",label:"Color by",props:{options:o}},colorByVar:{el:br,hidden:!0,default:1,label:"Variable",props:{min:1,max:r.ncols}},confEllipse:{el:ut,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}function fv(t){return{plotType:{el:Hn,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:br,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:br,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},axesEqual:{el:Bt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function La(t){const e=Object.keys(t),r=t[e[0]];return{resID:{el:ut,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},comp2:{el:br,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:br,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:ut,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","obj","var","both"]}},axesEqual:{el:Bt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function Ra(t){const e=Object.keys(t);return t[e[0]],{plotType:{el:Hn,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},resID:{el:ut,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},varType:{el:ut,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:ut,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}}}function dv(t){return{plotType:{el:Hn,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},transform:{el:ut,hidden:!1,default:"none",label:"Type",props:{options:["none","sqrt","log"]}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}}}function ja(t){const e=Object.keys(t),r=t[e[0]],o={ncomp:{el:br,hidden:!1,default:r.ncomp>1?2:1,label:"# PCs",props:{min:1,max:r.ncomp}},resID:{el:ut,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},transType:{el:ut,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:ut,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Bt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}};return r.classNames&&r.classNames.length>1&&(o.colorBy={el:ut,hidden:!1,default:"none",label:"Color by",props:{options:["none","groups"]}}),o}var vv=J("<!> <!>",1);function hv(t,e){ge(e,!0);const r=(h,m=at)=>{Me(h,{label:"Selected",children:(g,b)=>{Ot(g,{onclick:()=>e.markOutlier(m()),text:"remove"})},$$slots:{default:!0}})},o=(h,m=at)=>{Me(h,{label:"Selected",children:(g,b)=>{var p=vv(),w=Q(p);Ot(w,{onclick:()=>e.markOutlier(m()),text:"remove"});var _=q(w,2);Ot(_,{onclick:()=>e.showContributions(m(),l(u).distance.ncomp),text:"plot"}),I(g,p)},$$slots:{default:!0}})};let s={cal:e.resobj},a={cal:e.dataset};const c=E(()=>({scores:{label:"Scores",scope:"objects",component:Sa,buttons:r},loadings:{label:"Loadings",scope:"variables",component:sv},biplot:{label:"Bi-plot",scope:"stats",component:Na},variance:{label:"Variance",scope:"stats",component:Ta},eigenvals:{label:"Eigenvalues",scope:"stats",component:cv},distance:{label:"Distances",scope:"objects",component:Ia,buttons:o}})),d=ee({scores:Pa(s),loadings:fv(e.model),biplot:La(s),variance:Ra(s),eigenvals:dv(e.model),distance:ja(s)});let u=le(ee({scores:Zt(d.scores),loadings:Zt(d.loadings),biplot:Zt(d.biplot),variance:Zt(d.variance),eigenvals:Zt(d.eigenvals),distance:Zt(d.distance)}));ze(()=>{l(u).scores.plotType!=="p"?(d.scores.comp1.hidden=!0,d.scores.showEllipse.hidden=!0,l(u).scores.showEllipse=!1):(d.scores.comp1.hidden=!1,d.scores.showEllipse.hidden=!1),l(u).scores.plotType==="l"||l(u).scores.plotType==="b"?(d.scores.colorBy.hidden=!0,l(u).scores.colorBy="none"):d.scores.colorBy.hidden=!1,l(u).scores.colorBy==="variable"?d.scores.colorByVar.hidden=!1:d.scores.colorByVar.hidden=!0,l(u).scores.colorBy==="groups"&&l(u).scores.plotType==="p"?d.scores.confEllipse.hidden=!1:(d.scores.confEllipse.hidden=!0,l(u).scores.confEllipse="none")}),ze(()=>{l(u).loadings.plotType!=="p"?d.loadings.comp1.hidden=!0:d.loadings.comp1.hidden=!1});const f=E(()=>({res:s,model:e.model,data:a})),v={markOutlier:e.markOutlier,showContributions:e.showContributions};Ca(t,{get plots(){return l(c)},get controls(){return d},get props(){return l(f)},callbacks:v,get params(){return l(u)},set params(h){V(u,ee(h))}}),pe()}var mv=J('<div class="outliers-pane svelte-1dk0fsp"><!></div>'),gv=J('<div class="model-calculator svelte-1dk0fsp"><!></div>'),pv=J('<div class="result-stats svelte-1dk0fsp"><!></div>'),bv=J(`<p class="svelte-1dk0fsp">In this tab you can train a PCA model and explore how well it describes the training set. After creating the model you can save it to a file and apply it to another, new set of samples, and see how well this new set is explained by the model (tab <strong>Project</strong>).</p> <p class="svelte-1dk0fsp"><strong>Step 1.</strong></p> <p class="svelte-1dk0fsp">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1dk0fsp">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. If this is the case, select <em>values</em> option for the header. In this case you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1dk0fsp">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. It is also possible to have group labels, which you can use, for example, to color group samples on the score plot. Here is an example how data structure may look like (note, that column with group, row labels and header are optional):</p> <div class="svelte-1dk0fsp"><table class="svelte-1dk0fsp"><thead class="svelte-1dk0fsp"><tr class="svelte-1dk0fsp"><td class="svelte-1dk0fsp">Name</td><td class="svelte-1dk0fsp">Group</td><td class="svelte-1dk0fsp">x1</td><td class="svelte-1dk0fsp">x2</td><td class="svelte-1dk0fsp">x3</td></tr></thead><tbody class="svelte-1dk0fsp"><tr><td class="svelte-1dk0fsp">O1</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">3.8</td><td class="svelte-1dk0fsp">1.3</td><td class="svelte-1dk0fsp">13.6</td></tr><tr><td class="svelte-1dk0fsp">O2</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">11.1</td><td class="svelte-1dk0fsp">12.3</td><td class="svelte-1dk0fsp">3.3</td></tr><tr><td class="svelte-1dk0fsp">O3</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">1.2</td><td class="svelte-1dk0fsp">2.3</td><td class="svelte-1dk0fsp">4.2</td></tr></tbody></table></div> <p class="svelte-1dk0fsp"></p>`,1),wv=J('<p class="svelte-1dk0fsp"><strong>Step 2</strong></p> <p class="svelte-1dk0fsp">Next step is to create a global PCA model for the training set. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to select number of components for every plot.</p>',1),_v=J('<div class="help-text svelte-1dk0fsp"><!></div>'),yv=J('<!> <div class="app-container svelte-1dk0fsp"><div class="app-controls svelte-1dk0fsp"><div class="data-loader svelte-1dk0fsp"><!></div> <!> <!> <!></div> <div class="app-content svelte-1dk0fsp"><!></div></div>',1);function xv(t,e){ge(e,!0);let r=B(e,"s",15),o=le(-1),s=le(1),a=le(!1);function c(T){if(T<0||T>r().resobj.nrows-1)return;const F=r().resobj.objindices[T];F>=0&&!r().outliers.includes(F)&&(r().outliers.push(F),r(r().model=null,!0))}function d(T,F){T<0||(V(o,ee(T)),V(a,!0))}function u(){V(a,!1),V(o,-1),V(s,1)}function f(){r(r().outliers=[],!0),r(r().model=null,!0)}ze(()=>{r().dataset===null&&(r(r().model=null,!0),r(r().outliers=[],!0)),r().model===null&&r(r().resobj=null,!0)});var v=yv(),h=Q(v);{var m=T=>{Aa(T,Gr(r,{get ncomp(){return l(s)},get selected(){return l(o)},closeModal:u}))};U(h,T=>{l(a)&&T(m)})}var g=q(h,2),b=O(g),p=O(b),w=O(p);Gs(w,{className:"Group",get dataset(){return r().dataset},set dataset(T){r(r().dataset=T,!0)}});var _=q(p,2);{var k=T=>{var F=mv(),H=O(F);Xs(H,{get outliers(){return r().outliers},get dataset(){return r().dataset},resetOutliers:f}),I(T,F)};U(_,T=>{r().outliers&&r().outliers.length>0&&T(k)})}var C=q(_,2);{var y=T=>{var F=gv(),H=O(F);Rd(H,{get WASM(){return e.WASM},downloadModel:Qc,downloadResults:Fs,get dataset(){return r().dataset},get outliers(){return r().outliers},get model(){return r().model},set model(W){r(r().model=W,!0)},get resobj(){return r().resobj},set resobj(W){r(r().resobj=W,!0)}}),I(T,F)};U(C,T=>{r().dataset&&T(y)})}var A=q(C,2);{var P=T=>{var F=pv(),H=O(F);Ks(H,{get resobj(){return r().resobj}}),I(T,F)};U(A,T=>{r().resobj&&T(P)})}var M=q(b,2),N=O(M);{var L=T=>{var F=_v(),H=O(F);{var W=j=>{var z=bv();I(j,z)},ne=j=>{var z=me(),G=Q(z);{var K=Z=>{var $=wv();I(Z,$)};U(G,Z=>{r().model||Z(K)})}I(j,z)};U(H,j=>{r().dataset?j(ne,!1):j(W)})}I(T,F)},D=T=>{var F=me(),H=Q(F);Fn(H,()=>r().resobj,W=>{hv(W,Gr({markOutlier:c,showContributions:d},r))}),I(T,F)};U(N,T=>{!r().resobj||!r().model?T(L):T(D,!1)})}I(t,v),pe()}var kv=J("<!> <!>",1),Ev=J('<p class="model-info svelte-1l40o0h"><span>Model file:</span> <span class="file-name svelte-1l40o0h"> </span><br> <span style="color:#a0a0a0;">Model info:</span> </p> <!>',1),Av=J("<p><!></p>"),Cv=J("<!> <!>",1);function Mv(t,e){ge(e,!0);let r=B(e,"model",15),o=le(""),s=le("neutral"),a=le("");function c(w){try{const _=JSON.parse(w,js);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),!Object.keys(_).includes("class")||_.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain PCA mdel.");_.fileName=l(f),r(_),V(s,"success"),V(a,"")}catch(_){r(null),V(s,"error"),V(a,ee(_))}}function d(w){const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsText(l(o))}function u(){V(o,""),r(null),V(s,"neutral"),V(a,"")}ze(()=>{l(o)===null?(r(null),V(s,"neutral"),V(a,"")):(V(s,"neutral"),V(a,""))});let f=E(()=>l(o)?l(o).name.replace(/\.[^/.]+$/,""):"");var v=Cv(),h=Q(v);{var m=w=>{var _=kv(),k=Q(_);Fn(k,()=>l(o),A=>{Me(A,{children:(P,M)=>{Ys(P,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(o)},set file(N){V(o,ee(N))}})},$$slots:{default:!0}})});var C=q(k,2);{var y=A=>{Me(A,{label:" ",children:(P,M)=>{Ot(P,{onclick:d,text:"Load"})},$$slots:{default:!0}})};U(C,A=>{l(o)&&A(y)})}I(w,_)},g=w=>{Me(w,{children:(_,k)=>{var C=Ev(),y=Q(C),A=q(O(y),2),P=O(A),M=q(A,4),N=q(y,2);fn(N,{onclick:u}),re(()=>{S(A,"title",r().fileName),xe(P,r().fileName),xe(M,` ${r().ncomp??""} PCs${(r().center?", centered":"")??""}${(r().scale?", scaled":"")??""}`)}),I(_,C)},$$slots:{default:!0}})};U(h,w=>{r()?w(g,!1):w(m)})}var b=q(h,2);{var p=w=>{Me(w,{status:"error",children:(_,k)=>{var C=Av(),y=O(C);vt(y,()=>l(a),!1,!1),I(_,C)},$$slots:{default:!0}})};U(b,w=>{(l(s)==="error"||l(a))&&w(p)})}I(t,v),pe()}var Sv=J("<!> <!>",1);function Nv(t,e){ge(e,!0);const r=(h,m=at)=>{Me(h,{label:"Selected",children:(g,b)=>{Ot(g,{onclick:()=>e.markOutlier(m()),text:"remove"})},$$slots:{default:!0}})},o=(h,m=at)=>{Me(h,{label:"Selected",children:(g,b)=>{var p=Sv(),w=Q(p);Ot(w,{onclick:()=>e.markOutlier(m()),text:"remove"});var _=q(w,2);Ot(_,{onclick:()=>e.showContributions(m(),l(u).distance.ncomp),text:"plot"}),I(g,p)},$$slots:{default:!0}})};let s={new:e.resobj},a={new:e.dataset};const c=E(()=>({scores:{label:"Scores",scope:"objects",component:Sa,buttons:r},biplot:{label:"Bi-plot",scope:"stats",component:Na},variance:{label:"Variance",scope:"stats",component:Ta},distance:{label:"Distances",scope:"objects",component:Ia,buttons:o}})),d=ee({scores:Pa(s),biplot:La(s),variance:Ra(s),distance:ja(s)});let u=le(ee({scores:Zt(d.scores),biplot:Zt(d.biplot),variance:Zt(d.variance),distance:Zt(d.distance)}));ze(()=>{l(u).scores.plotType!=="p"?(d.scores.comp1.hidden=!0,d.scores.showEllipse.hidden=!0,l(u).scores.showEllipse=!1):(d.scores.comp1.hidden=!1,d.scores.showEllipse.hidden=!1),l(u).scores.plotType==="l"||l(u).scores.plotType==="b"?(d.scores.colorBy.hidden=!0,l(u).scores.colorBy="none"):d.scores.colorBy.hidden=!1,l(u).scores.colorBy==="variable"?d.scores.colorByVar.hidden=!1:d.scores.colorByVar.hidden=!0,l(u).scores.colorBy==="groups"&&l(u).scores.plotType==="p"?d.scores.confEllipse.hidden=!1:(d.scores.confEllipse.hidden=!0,l(u).scores.confEllipse="none")});const f=E(()=>({res:s,model:e.model,data:a})),v={markOutlier:e.markOutlier,showContributions:e.showContributions};Ca(t,{get plots(){return l(c)},get controls(){return d},get props(){return l(f)},callbacks:v,get params(){return l(u)},set params(h){V(u,ee(h))}}),pe()}var Tv=J('<div class="data-loader svelte-1mqkfgh"><!></div>'),Iv=J('<div class="outliers-pane svelte-1mqkfgh"><!></div>'),Pv=J('<div class="buttons"><!></div>'),Lv=J('<div class="model-dowloader svelte-1mqkfgh"><!></div> <div class="result-stats svelte-1mqkfgh"><!></div>',1),Rv=J('<p class="svelte-1mqkfgh"><strong>Step 1.</strong></p> <p class="svelte-1mqkfgh">Load file with PCA model you created earlier in tab <strong>Train</strong></p>',1),jv=J('<p class="svelte-1mqkfgh"><strong>Step 2.</strong></p> <p class="svelte-1mqkfgh">Load your dataset set from a CSV file. The interface and selection steps are similar to the ones you used in <em>Train</em> tab. However, in this case you do not need to specify all details for header, just select if the new dataset has header as a first row or not. All values will be inherited from the model object.</p> <p class="svelte-1mqkfgh"><strong>It is important that the new dataset has same variables as the training set used to create the model.</strong></p>',1),Fv=J('<div class="help-text svelte-1mqkfgh"><p class="svelte-1mqkfgh">In this tab you can project new data points to a previosly trained PCA model and explore main outcomes: scores, distances and variances.</p> <!> <p class="svelte-1mqkfgh"></p></div>'),qv=J('<!> <div class="app-container svelte-1mqkfgh"><div class="app-controls svelte-1mqkfgh"><div class="model-loader svelte-1mqkfgh"><!></div> <!> <!> <!></div> <div class="app-content svelte-1mqkfgh"><!></div></div>',1);function Ov(t,e){ge(e,!0);let r=B(e,"s",15),o=le(-1),s=le(1),a=le(!1);function c(T){if(T<0||T>r().resobj.nrows-1)return;const F=r().resobj.objindices[T];F>=0&&!r().outliers.includes(F)&&(r().outliers.push(F),r(r().resobj=null,!0))}function d(T,F){T<0||(V(o,ee(T)),V(a,!0))}function u(){V(a,!1),V(o,-1),V(s,1)}function f(){r(r().outliers=[],!0),r(r().resobj=null,!0)}ze(()=>{r().model===null&&r(r().dataset=null,!0),r().dataset===null&&(r(r().outliers=[],!0),r(r().resobj=null,!0))});var v=qv(),h=Q(v);{var m=T=>{Aa(T,Gr(r,{get ncomp(){return l(s)},get selected(){return l(o)},closeModal:u}))};U(h,T=>{l(a)&&T(m)})}var g=q(h,2),b=O(g),p=O(b),w=O(p);Mv(w,{get model(){return r().model},set model(T){r(r().model=T,!0)}});var _=q(p,2);{var k=T=>{var F=Tv(),H=O(F);Gs(H,{get outliers(){return r().outliers},get WASM(){return e.WASM},get model(){return r().model},className:"Group",get dataset(){return r().dataset},set dataset(W){r(r().dataset=W,!0)},get resobj(){return r().resobj},set resobj(W){r(r().resobj=W,!0)}}),I(T,F)};U(_,T=>{r().model&&T(k)})}var C=q(_,2);{var y=T=>{var F=Iv(),H=O(F);Xs(H,{get dataset(){return r().dataset},get outliers(){return r().outliers},resetOutliers:f}),I(T,F)};U(C,T=>{r().outliers&&r().outliers.length>0&&T(y)})}var A=q(C,2);{var P=T=>{var F=Lv(),H=Q(F),W=O(H);Me(W,{label:"Download",children:(z,G)=>{var K=Pv(),Z=O(K);Ot(Z,{text:"Results",onclick:()=>Fs(r().resobj,r().dataset,"new",r().outliers)}),I(z,K)},$$slots:{default:!0}});var ne=q(H,2),j=O(ne);Ks(j,{get resobj(){return r().resobj}}),I(T,F)};U(A,T=>{r().resobj&&T(P)})}var M=q(b,2),N=O(M);{var L=T=>{var F=Fv(),H=q(O(F),2);{var W=j=>{var z=Rv();I(j,z)},ne=j=>{var z=me(),G=Q(z);{var K=Z=>{var $=jv();I(Z,$)};U(G,Z=>{r().dataset||Z(K)},!0)}I(j,z)};U(H,j=>{r().model?j(ne,!1):j(W)})}I(T,F)},D=T=>{var F=me(),H=Q(F);Fn(H,()=>r().resobj,W=>{Nv(W,Gr({markOutlier:c,showContributions:d},r))}),I(T,F)};U(N,T=>{r().resobj?T(D,!1):T(L)})}I(t,v),pe()}function Fa(t,e){V(e,!0)}function Bv(t,e,r){window.localStorage.removeItem(e.appID+"-blocked"),window.localStorage.removeItem(e.appID),V(r,ee(e.initSession()))}function Vv(t,e,r){const o=Go(new Date),s=e.appID+"-session-"+o+".json";l(r).date=o;const a=JSON.stringify(l(r),Rs),c=new Blob([a],{type:"text/json"}),d=window.URL.createObjectURL(c),u=document.createElement("a");u.setAttribute("href",d),u.setAttribute("download",s),u.click()}var Dv=J('<sup style="color:red">β</sup>'),zv=J('<li class="nav-item svelte-1946064"><button class="svelte-1946064"> </button></li>'),Yv=J('<div class="app-container svelte-1946064"><!></div>'),Wv=J('<div class="info-container svelte-1946064"><!></div>'),Uv=J('<div class="page svelte-1946064"><header class="page-header svelte-1946064"><div class="header-group svelte-1946064"><img class="logo svelte-1946064" src="logo.svg"> <h1 class="svelte-1946064"> <!></h1> <p class="svelte-1946064"> </p></div> <ul class="nav svelte-1946064"></ul></header> <main class="svelte-1946064"></main> <footer class="svelte-1946064"><div class="session svelte-1946064"><span class="session-message svelte-1946064"> </span> <label title="load session from file" class="upload-button svelte-1946064"><input type="file" class="svelte-1946064">⬆</label> <button title="download session as a file" class="download-button svelte-1946064">⬇</button> <button title="reset all sessions" class="clear-button svelte-1946064">✖</button></div> <div class="info svelte-1946064"><button class="button-info svelte-1946064">info</button> <!></div></footer> <!></div>');function Hv(t,e){ge(e,!0);let r=B(e,"tabs",19,()=>[]),o=B(e,"isBeta",3,!1),s=le(!1),a=le(void 0),c=le("Current session "),d=le(!1);function u(){V(s,!1)}function f(_){l(a).tab=_}function v(){l(a).date=Go(new Date),window.localStorage.setItem(e.appID,JSON.stringify(l(a),Rs)),window.localStorage.removeItem(e.appID+"-blocked")}function h(){if(window.localStorage.getItem(e.appID+"-blocked")){V(a,ee(e.initSession()));return}m(window.localStorage.getItem(e.appID)),window.localStorage.setItem(e.appID+"-blocked","yes"),V(c,"Last session is restored "),V(d,!0),setTimeout(()=>{V(c,"Current session "),V(d,!1)},2e3)}function m(_){if(!_||_==="undefined"){V(a,ee(e.initSession()));return}const k=JSON.parse(_,js);V(a,ee(e.checkSession(k)?k:e.initSession(e.appID)))}function g(_){e.resetSession(l(a));const k=new FileReader;k.onload=()=>{m(k.result),_.target.value=""},k.readAsText(_.target.files[0])}gc(()=>{v()}),ss(()=>{h()});var b=me();vr("beforeunload",Cn,v);var p=Q(b);{var w=_=>{var k=Uv(),C=O(k),y=O(C),A=O(y),P=q(A,2),M=O(P),N=q(M);{var L=we=>{var ae=Dv();I(we,ae)};U(N,we=>{o()&&we(L)})}var D=q(P,2),T=O(D),F=q(y,2);Ye(F,21,r,Ke,(we,ae,_e)=>{var ie=zv(),ce=O(ie);ce.__click=()=>f(_e),ce.__keydown=()=>f(_e);var se=O(ce);re(()=>{yt(ie,"selected",l(a).tab===_e),xe(se,l(ae).name)}),I(we,ie)});var H=q(C,2);Ye(H,21,r,Ke,(we,ae,_e)=>{var ie=Yv(),ce=O(ie);Mo(ce,()=>l(ae).component,(se,Te)=>{Te(se,{get WASM(){return e.WASM},get s(){return l(a)[l(ae).label]}})}),re(()=>yt(ie,"hidden",l(a).tab!==_e)),I(we,ie)});var W=q(H,2),ne=O(W),j=O(ne),z=O(j),G=q(j,2),K=O(G);K.__change=g;var Z=q(G,2);Z.__click=[Vv,e,a];var $=q(Z,2);$.__click=[Bv,e,a];var ue=q(ne,2),X=O(ue);X.__click=[Fa,s],X.__keydown=[Fa,s];var te=q(X,2);kr(te,()=>e.footer);var fe=q(W,2);{var be=we=>{ba(we,{closeModal:u,children:(ae,_e)=>{var ie=Wv(),ce=O(ie);kr(ce,()=>e.info),I(ae,ie)},$$slots:{default:!0}})};U(fe,we=>{l(s)&&we(be)})}re(()=>{S(A,"alt",e.appShortTitle),xe(M,e.appTitle),xe(T,e.appSlogan),yt(ne,"no-buttons",l(d)),xe(z,l(c))}),I(_,k)};U(p,_=>{l(a)&&_(w)})}I(t,b),pe()}Ze(["click","keydown","change"]);const r1="modulepreload",n1=function(t){return"/"+t},o1={},Gv=function(e,r,o){let s=Promise.resolve();function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var Kv=(()=>{var t=Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href;return async function(e={}){var r,o=e,s,a,c=new Promise((R,Y)=>{s=R,a=Y}),d=typeof window=="object",u=typeof WorkerGlobalScope<"u",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(f){const{createRequire:R}=await Gv(()=>Promise.resolve().then(()=>Zv),void 0);let Y=Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href;Y.startsWith("data:")&&(Y="/");var v=R(Y)}var h=Object.assign({},o),m=(R,Y)=>{throw Y},g="";function b(R){return o.locateFile?o.locateFile(R,g):g+R}var p,w;if(f){var _=v("fs"),k=v("path");(Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href).startsWith("data:")||(g=k.dirname(v("url").fileURLToPath(Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href))+"/"),w=R=>{R=we(R)?new URL(R):k.normalize(R);var Y=_.readFileSync(R);return Y},p=(R,Y=!0)=>(R=we(R)?new URL(R):k.normalize(R),new Promise((oe,de)=>{_.readFile(R,Y?void 0:"utf8",(He,Ge)=>{He?de(He):oe(Y?Ge.buffer:Ge)})})),!o.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),m=(R,Y)=>{throw process.exitCode=R,Y}}else(d||u)&&(u?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g.startsWith("blob:")?g="":g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(w=R=>{var Y=new XMLHttpRequest;return Y.open("GET",R,!1),Y.responseType="arraybuffer",Y.send(null),new Uint8Array(Y.response)}),p=R=>we(R)?new Promise((Y,oe)=>{var de=new XMLHttpRequest;de.open("GET",R,!0),de.responseType="arraybuffer",de.onload=()=>{if(de.status==200||de.status==0&&de.response){Y(de.response);return}oe(de.status)},de.onerror=oe,de.send(null)}):fetch(R,{credentials:"same-origin"}).then(Y=>Y.ok?Y.arrayBuffer():Promise.reject(new Error(Y.status+" : "+Y.url))));o.print||console.log.bind(console);var C=o.printErr||console.error.bind(console);Object.assign(o,h),h=null,o.arguments&&o.arguments,o.thisProgram&&o.thisProgram;var y=o.wasmBinary,A,P=!1,M,N,L;function D(){var R=A.buffer;o.HEAP8=N=new Int8Array(R),o.HEAP16=new Int16Array(R),o.HEAPU8=L=new Uint8Array(R),o.HEAPU16=new Uint16Array(R),o.HEAP32=new Int32Array(R),o.HEAPU32=new Uint32Array(R),o.HEAPF32=new Float32Array(R),o.HEAPF64=new Float64Array(R)}var T=[],F=[],H=[];function W(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)z(o.preRun.shift());Et(T)}function ne(){Et(F)}function j(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)K(o.postRun.shift());Et(H)}function z(R){T.unshift(R)}function G(R){F.unshift(R)}function K(R){H.unshift(R)}var Z=0,$=null;function ue(R){var Y;Z++,(Y=o.monitorRunDependencies)==null||Y.call(o,Z)}function X(R){var oe;if(Z--,(oe=o.monitorRunDependencies)==null||oe.call(o,Z),Z==0&&$){var Y=$;$=null,Y()}}function te(R){var oe;(oe=o.onAbort)==null||oe.call(o,R),R="Aborted("+R+")",C(R),P=!0,R+=". Build with -sASSERTIONS for more info.";var Y=new WebAssembly.RuntimeError(R);throw a(Y),Y}var fe="data:application/octet-stream;base64,",be=R=>R.startsWith(fe),we=R=>R.startsWith("file://");function ae(){if(o.locateFile){var R="pca_wasm.wasm";return be(R)?R:b(R)}return new URL("/pca-beta/pca.wasm",Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href).href}var _e;function ie(R){if(R==_e&&y)return new Uint8Array(y);if(w)return w(R);throw"both async and sync fetching of the wasm failed"}function ce(R){return y?Promise.resolve().then(()=>ie(R)):p(R).then(Y=>new Uint8Array(Y),()=>ie(R))}function se(R,Y,oe){return ce(R).then(de=>WebAssembly.instantiate(de,Y)).then(oe,de=>{C(`failed to asynchronously prepare wasm: ${de}`),te(de)})}function Te(R,Y,oe,de){return!R&&typeof WebAssembly.instantiateStreaming=="function"&&!be(Y)&&!we(Y)&&!f&&typeof fetch=="function"?fetch(Y,{credentials:"same-origin"}).then(He=>{var Ge=WebAssembly.instantiateStreaming(He,oe);return Ge.then(de,function(Oe){return C(`wasm streaming compile failed: ${Oe}`),C("falling back to ArrayBuffer instantiation"),se(Y,oe,de)})}):se(Y,oe,de)}function Ee(){return{a:ar}}function Pe(){var R=Ee();function Y(de,He){return Re=de.exports,A=Re.h,D(),G(Re.i),X(),Re}ue();function oe(de){Y(de.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(R,Y)}catch(de){C(`Module.instantiateWasm callback failed with error: ${de}`),a(de)}return _e??(_e=ae()),Te(y,_e,R,oe).catch(a),{}}class wt{constructor(Y){Lr(this,"name","ExitStatus");this.message=`Program terminated with exit(${Y})`,this.status=Y}}var Et=R=>{for(;R.length>0;)R.shift()(o)},it=o.noExitRuntime||!0,ot=R=>qa(R),Je=()=>Ba(),Tr=()=>{te("")},Ir=(R,Y,oe)=>L.copyWithin(R,Y,Y+oe),mn=0,Zn=()=>{it=!1,mn=0},$t={},$n=R=>{if(R instanceof wt||R=="unwind")return M;m(1,R)},eo=()=>it||mn>0,to=R=>{var Y;M=R,eo()||((Y=o.onExit)==null||Y.call(o,R),P=!0),m(R,new wt(R))},al=(R,Y)=>{M=R,to(R)},il=al,ye=()=>{if(!eo())try{il(M)}catch(R){$n(R)}},Ie=R=>{if(!P)try{R(),ye()}catch(Y){$n(Y)}},Se=()=>performance.now(),rt=(R,Y)=>{if($t[R]&&(clearTimeout($t[R].id),delete $t[R]),!Y)return 0;var oe=setTimeout(()=>{delete $t[R],Ie(()=>ro(R,Se()))},Y);return $t[R]={id:oe,timeout_ms:Y},0},ht=()=>Date.now(),Ut=()=>2147483648,At=(R,Y)=>Math.ceil(R/Y)*Y,Ct=R=>{var Y=A.buffer,oe=(R-Y.byteLength+65535)/65536|0;try{return A.grow(oe),D(),1}catch{}},Ue=R=>{var Y=L.length;R>>>=0;var oe=Ut();if(R>oe)return!1;for(var de=1;de<=4;de*=2){var He=Y*(1+.2/de);He=Math.min(He,R+100663296);var Ge=Math.min(oe,At(Math.max(R,He),65536)),Oe=Ct(Ge);if(Oe)return!0}return!1},Le=R=>{var Y=o["_"+R];return Y},ft=(R,Y)=>{N.set(R,Y)},st=R=>{for(var Y=0,oe=0;oe<R.length;++oe){var de=R.charCodeAt(oe);de<=127?Y++:de<=2047?Y+=2:de>=55296&&de<=57343?(Y+=4,++oe):Y+=3}return Y},nt=(R,Y,oe,de)=>{if(!(de>0))return 0;for(var He=oe,Ge=oe+de-1,Oe=0;Oe<R.length;++Oe){var Be=R.charCodeAt(Oe);if(Be>=55296&&Be<=57343){var Mt=R.charCodeAt(++Oe);Be=65536+((Be&1023)<<10)|Mt&1023}if(Be<=127){if(oe>=Ge)break;Y[oe++]=Be}else if(Be<=2047){if(oe+1>=Ge)break;Y[oe++]=192|Be>>6,Y[oe++]=128|Be&63}else if(Be<=65535){if(oe+2>=Ge)break;Y[oe++]=224|Be>>12,Y[oe++]=128|Be>>6&63,Y[oe++]=128|Be&63}else{if(oe+3>=Ge)break;Y[oe++]=240|Be>>18,Y[oe++]=128|Be>>12&63,Y[oe++]=128|Be>>6&63,Y[oe++]=128|Be&63}}return Y[oe]=0,oe-He},Xe=(R,Y,oe)=>nt(R,L,Y,oe),Pt=R=>Oa(R),Pr=R=>{var Y=st(R)+1,oe=Pt(Y);return Xe(R,oe,Y),oe},Fe=typeof TextDecoder<"u"?new TextDecoder:void 0,he=(R,Y=0,oe=NaN)=>{for(var de=Y+oe,He=Y;R[He]&&!(He>=de);)++He;if(He-Y>16&&R.buffer&&Fe)return Fe.decode(R.subarray(Y,He));for(var Ge="";Y<He;){var Oe=R[Y++];if(!(Oe&128)){Ge+=String.fromCharCode(Oe);continue}var Be=R[Y++]&63;if((Oe&224)==192){Ge+=String.fromCharCode((Oe&31)<<6|Be);continue}var Mt=R[Y++]&63;if((Oe&240)==224?Oe=(Oe&15)<<12|Be<<6|Mt:Oe=(Oe&7)<<18|Be<<12|Mt<<6|R[Y++]&63,Oe<65536)Ge+=String.fromCharCode(Oe);else{var Ht=Oe-65536;Ge+=String.fromCharCode(55296|Ht>>10,56320|Ht&1023)}}return Ge},dt=(R,Y)=>R?he(L,R,Y):"",cl=(R,Y,oe,de,He)=>{var Ge={string:_t=>{var pn=0;return _t!=null&&_t!==0&&(pn=Pr(_t)),pn},array:_t=>{var pn=Pt(_t.length);return ft(_t,pn),pn}};function Oe(_t){return Y==="string"?dt(_t):Y==="boolean"?!!_t:_t}var Be=Le(R),Mt=[],Ht=0;if(de)for(var Gt=0;Gt<de.length;Gt++){var oo=Ge[oe[Gt]];oo?(Ht===0&&(Ht=Je()),Mt[Gt]=oo(de[Gt])):Mt[Gt]=de[Gt]}var gn=Be(...Mt);function ul(_t){return Ht!==0&&ot(Ht),Oe(_t)}return gn=ul(gn),gn},ar={c:Tr,f:Ir,b:Zn,d:rt,g:ht,e:Ue,a:to},Re=Pe();o._pcafit_wasm=(R,Y,oe,de,He,Ge,Oe,Be,Mt,Ht,Gt)=>(o._pcafit_wasm=Re.j)(R,Y,oe,de,He,Ge,Oe,Be,Mt,Ht,Gt),o._malloc=R=>(o._malloc=Re.k)(R),o._free=R=>(o._free=Re.l)(R),o._pcapredict_wasm=(R,Y,oe,de,He,Ge,Oe,Be,Mt)=>(o._pcapredict_wasm=Re.m)(R,Y,oe,de,He,Ge,Oe,Be,Mt),o._pcvpca_wasm=(R,Y,oe,de,He,Ge,Oe,Be,Mt,Ht,Gt,oo,gn,ul,_t)=>(o._pcvpca_wasm=Re.n)(R,Y,oe,de,He,Ge,Oe,Be,Mt,Ht,Gt,oo,gn,ul,_t);var ro=(R,Y)=>(ro=Re.p)(R,Y),qa=R=>(qa=Re.q)(R),Oa=R=>(Oa=Re.r)(R),Ba=()=>(Ba=Re.s)();o.ccall=cl;var no;$=function R(){no||Va(),no||($=R)};function Va(){if(Z>0||(W(),Z>0))return;function R(){var Y;no||(no=!0,o.calledRun=!0,!P&&(ne(),s(o),(Y=o.onRuntimeInitialized)==null||Y.call(o),j()))}o.setStatus?(o.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>o.setStatus(""),1),R()},1)):R()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Va(),r=c,r}})(),Xv=J('<p>Current release: <span>2.0.2β</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="Wines.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video lessons</a></p>'),Qv=J(`<h2>Principal Component Analysis</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using PCA models for data exploration
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>Check out YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video-lessons</a></p><h3>v. 2.0.1</h3> <p class="release-info">released 18/02/2025</p> <ul><li>Many small improvements to plots and control elements.</li> <li>App now remembers the plot settings when you switch between plots.</li> <li>Introducing sessons — app states, including model, results, datasets, and outliers (in all tabs), which can be saved and restored. When you close tab or app window or click on reboot button, the current session is saved to browser's local storage and
         then is restored automatically. You can also download session as a file and load it from file.</li></ul>`,1);function Jv(t,e){ge(e,!1);function r(c){c.train.dataset=null,c.new.model=null,c.tab=0}function o(c){const d=Object.keys(c);if(!["date","tab","train","new"].every(v=>d.includes(v)))return!1;const u=Object.keys(c.train),f=Object.keys(c.new);return!!["model","dataset","resobj","outliers"].every(v=>u.includes(v)&&f.includes(v))}function s(){return{date:Go(new Date),tab:0,train:{model:0,dataset:0,resobj:0,outliers:[]},new:{model:0,dataset:0,resobj:0,outliers:[]}}}const a=[{name:"Train",label:"train",component:xv},{name:"Project",label:"new",component:Ov}];fc(),Hv(t,{appID:"pca",appTitle:"PCA",appShortTitle:"PCA",isBeta:!0,appSlogan:"Principal component analysis",WASM:Kv,tabs:a,initSession:s,checkSession:o,resetSession:r,footer:u=>{var f=Xv();I(u,f)},info:u=>{var f=Qv();I(u,f)},$$slots:{footer:!0,info:!0}}),pe()}Xi(Jv,{target:document.body});const Zv=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pca.js.map
