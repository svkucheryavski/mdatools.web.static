var r1=Object.defineProperty;var Ha=De=>{throw TypeError(De)};var n1=(De,Ae,et)=>Ae in De?r1(De,Ae,{enumerable:!0,configurable:!0,writable:!0,value:et}):De[Ae]=et;var Rr=(De,Ae,et)=>n1(De,typeof Ae!="symbol"?Ae+"":Ae,et),dl=(De,Ae,et)=>Ae.has(De)||Ha("Cannot "+et);var ir=(De,Ae,et)=>(dl(De,Ae,"read from private field"),et?et.call(De):Ae.get(De)),yn=(De,Ae,et)=>Ae.has(De)?Ha("Cannot add the same private member more than once"):Ae instanceof WeakSet?Ae.add(De):Ae.set(De,et),vl=(De,Ae,et,jr)=>(dl(De,Ae,"write to private field"),jr?jr.call(De,et):Ae.set(De,et),et),Ga=(De,Ae,et)=>(dl(De,Ae,"access private method"),et);(function(){"use strict";var _r,en,pn,$n,Xa;var De=document.createElement("style");De.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-h4yni9{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-h4yni9:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-h4yni9:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-h4yni9:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-h4yni9{display:none}.control-element.error.svelte-h4yni9{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-h4yni9{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-h4yni9>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-h4yni9>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-h4yni9>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-h4yni9>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-h4yni9 .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-h4yni9 .range-value_left,.control-element.svelte-h4yni9 .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-h4yni9 .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-h4yni9 .button-cancel:hover{background-color:var(--warning-color, crimson)}.control-element.svelte-h4yni9 .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-h4yni9 .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-h4yni9 .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-h4yni9 .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-h4yni9 .textinput>input:active::placeholder,.control-element.svelte-h4yni9 .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-h4yni9 .textinput>input:focus,.control-element.svelte-h4yni9 .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .textinput.error>input,.control-element.svelte-h4yni9 .textinput.error>input:focus,.control-element.svelte-h4yni9 .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-h4yni9 .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-h4yni9 .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-h4yni9 .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1xneg44{width:100%;border-collapse:collapse}tr.svelte-1xneg44{width:100%}th.svelte-1xneg44{border-bottom:1px solid #a0a0a0}th.svelte-1xneg44,td.svelte-1xneg44{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.selected-buttons.svelte-112cmye>.control-element{background:#fff0c8}.selected-buttons.svelte-112cmye>.control-element button:first-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-right:5px}.selected-buttons.svelte-112cmye>.control-element button:first-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-container.svelte-112cmye{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-112cmye{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-112cmye{padding:0 .25em 0 .5em}.plot-selector.svelte-112cmye{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-112cmye:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-112cmye{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-112cmye{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-container.svelte-112cmye{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-container.svelte-112cmye{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-container.svelte-112cmye{grid-template-columns:1fr 400px}}.app-container.svelte-1dk0fsp{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1dk0fsp{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1dk0fsp{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1dk0fsp>div:where(.svelte-1dk0fsp){border-radius:.25rem}.app-controls.svelte-1dk0fsp>.result-stats:where(.svelte-1dk0fsp){background:#e8e8e8}.help-text.svelte-1dk0fsp{margin-top:.25rem}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp),.help-text.svelte-1dk0fsp>div:where(.svelte-1dk0fsp){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp){border-collapse:collapse}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) thead:where(.svelte-1dk0fsp) tr:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp){font-weight:700;background:#f8f4e0}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1dk0fsp table:where(.svelte-1dk0fsp) tbody:where(.svelte-1dk0fsp) td:where(.svelte-1dk0fsp):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1dk0fsp>p:where(.svelte-1dk0fsp):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1dk0fsp{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1dk0fsp{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1dk0fsp{grid-template-columns:min(320px,30%) 1fr}}.model-info.svelte-1l40o0h{line-height:1.5em}.model-info.svelte-1l40o0h>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-1l40o0h>.file-name:where(.svelte-1l40o0h){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-1mqkfgh{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mqkfgh{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mqkfgh{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mqkfgh>div:where(.svelte-1mqkfgh){border-radius:.25rem}.app-controls.svelte-1mqkfgh>.result-stats:where(.svelte-1mqkfgh){background:#e8e8e8}.help-text.svelte-1mqkfgh{margin-top:.25rem}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mqkfgh>p:where(.svelte-1mqkfgh):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mqkfgh{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-1mqkfgh{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1mqkfgh{grid-template-columns:min(320px,30%) 1fr}}.page.svelte-1946064{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1946064{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1946064{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1946064{width:5rem;margin:.25rem;grid-area:logo}.header-group.svelte-1946064>h1:where(.svelte-1946064){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1946064>p:where(.svelte-1946064){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1946064{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1946064>div:where(.svelte-1946064){height:100%}footer.svelte-1946064{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1946064 .session:where(.svelte-1946064){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1946064 .session:where(.svelte-1946064) input:where(.svelte-1946064){display:none}footer.svelte-1946064 .session:where(.svelte-1946064) .session-message:where(.svelte-1946064){color:silver;padding-right:.5em}footer.svelte-1946064 .session:where(.svelte-1946064):hover .session-message:where(.svelte-1946064){color:#f8ebc5}footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .clear-button:where(.svelte-1946064),footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .upload-button:where(.svelte-1946064),footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .download-button:where(.svelte-1946064){display:none}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064),footer.svelte-1946064 .session:where(.svelte-1946064) .upload-button:where(.svelte-1946064),footer.svelte-1946064 .session:where(.svelte-1946064) .download-button:where(.svelte-1946064){font-size:1em;font-weight:700;background:#5e6062;color:silver;box-shadow:none;padding:0 .5em;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064){margin-left:.5em}footer.svelte-1946064 .session:where(.svelte-1946064) .upload-button:where(.svelte-1946064):hover,footer.svelte-1946064 .session:where(.svelte-1946064) .download-button:where(.svelte-1946064):hover{background-color:#f8ebc5;color:#4e5052}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064):hover{background-color:#f96666;color:#4e5052}footer.svelte-1946064 .info:where(.svelte-1946064){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1946064 .info:where(.svelte-1946064) .button-info:where(.svelte-1946064){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1946064 p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1946064 span,footer.svelte-1946064 a{color:#f8ebc5}.hidden.svelte-1946064{display:none}.nav.svelte-1946064,.nav.svelte-1946064 :where(.svelte-1946064){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1946064{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1946064{list-style:none;margin:0 2px;border-bottom:5px solid transparent}.nav-item.svelte-1946064>button:where(.svelte-1946064){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1946064>button:where(.svelte-1946064)>span{color:#888}.nav-item.selected.svelte-1946064{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1946064>button:where(.svelte-1946064){font-weight:700;cursor:default}.nav-item.selected.svelte-1946064:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1946064>header:where(.svelte-1946064){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1946064>footer:where(.svelte-1946064){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1946064{width:900px}.info-container.svelte-1946064>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1946064>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1946064>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1946064>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1946064>ul{margin:0}.info-container.svelte-1946064>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1946064>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1946064 a{color:#ae8032}.info-container.svelte-1946064 a:hover{color:#eb9707}.info-container.svelte-1946064:last-child{padding-bottom:2rem}
/*$vite$:1*/`,document.head.appendChild(De);var Ae=typeof document<"u"?document.currentScript:null;const et=!1;var jr=Array.isArray,Ka=Array.prototype.indexOf,io=Array.from,Qa=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,hl=Object.getOwnPropertyDescriptors,Ja=Object.prototype,Za=Array.prototype,co=Object.getPrototypeOf;function Fr(t){return typeof t=="function"}const at=()=>{};function $a(t){return typeof(t==null?void 0:t.then)=="function"}function ei(t){return t()}function uo(t){for(var e=0;e<t.length;e++)t[e]()}const Bt=2,ml=4,tn=8,xn=16,Xt=32,qr=64,kn=128,Kt=256,En=512,vt=1024,tr=2048,wr=4096,rr=8192,An=16384,gl=32768,Or=65536,ti=1<<17,ri=1<<19,pl=1<<20,ur=Symbol("$state"),bl=Symbol("legacy props"),ni=Symbol("");function _l(t){return t===this.v}function wl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function oi(t,e){return t!==e}function fo(t){return!wl(t,this.v)}function li(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function si(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ai(t){throw new Error("https://svelte.dev/e/effect_orphan")}function ii(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ci(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function ui(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function fi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function di(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function vi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Br=!1,hi=!1;function mi(){Br=!0}const vo=1,ho=2,yl=4,gi=8,pi=16,bi=1,_i=2,wi=4,yi=8,xi=16,ki=4,xl=1,Ei=2,ct=Symbol();function mo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Ie=null;function Cn(t){Ie=t}function Nt(t){return kl().get(t)}function Ai(t,e){return kl().set(t,e),e}function ge(t,e=!1,r){Ie={p:Ie,c:null,e:null,m:!1,s:t,x:null,l:null},Br&&!e&&(Ie.l={s:null,u:null,r1:[],r2:gt(!1)})}function pe(t){const e=Ie;if(e!==null){const c=e.e;if(c!==null){var r=je,o=Ve;e.e=null;try{for(var l=0;l<c.length;l++){var a=c[l];yt(a.effect),jt(a.reaction),nn(a.fn)}}finally{yt(r),jt(o)}}Ie=e.p,e.m=!0}return{}}function yr(){return!Br||Ie!==null&&Ie.l===null}function kl(t){return Ie===null&&mo(),Ie.c??(Ie.c=new Map(Ci(Ie)||void 0))}function Ci(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}function gt(t,e){var r={f:0,v:t,reactions:null,equals:_l,rv:0,wv:0};return r}function le(t){return El(gt(t))}function rn(t,e=!1){var o;const r=gt(t);return e||(r.equals=fo),Br&&Ie!==null&&Ie.l!==null&&((o=Ie.l).s??(o.s=[])).push(r),r}function go(t,e=!1){return El(rn(t,e))}function El(t){return Ve!==null&&!or&&Ve.f&Bt&&(Jt===null?Vi([t]):Jt.push(t)),t}function O(t,e){return Ve!==null&&!or&&yr()&&Ve.f&(Bt|xn)&&(Jt===null||!Jt.includes(t))&&vi(),Vr(t,e)}function Vr(t,e){return t.equals(e)||(t.v,t.v=e,t.wv=zl(),Al(t,tr),yr()&&je!==null&&je.f&vt&&!(je.f&(Xt|qr))&&(lr===null?Di([t]):lr.push(t))),e}function Al(t,e){var r=t.reactions;if(r!==null)for(var o=yr(),l=r.length,a=0;a<l;a++){var c=r[a],d=c.f;d&tr||!o&&c===je||(Vt(c,e),d&(vt|Kt)&&(d&Bt?Al(c,wr):qn(c)))}}let po=!1;function ee(t,e=null,r){if(typeof t!="object"||t===null||ur in t)return t;const o=co(t);if(o!==Ja&&o!==Za)return t;var l=new Map,a=jr(t),c=gt(0);a&&l.set("length",gt(t.length));var d;return new Proxy(t,{defineProperty(u,f,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&ui();var m=l.get(f);return m===void 0?(m=gt(v.value),l.set(f,m)):O(m,ee(v.value,d)),!0},deleteProperty(u,f){var v=l.get(f);if(v===void 0)f in u&&l.set(f,gt(ct));else{if(a&&typeof f=="string"){var m=l.get("length"),h=Number(f);Number.isInteger(h)&&h<m.v&&O(m,h)}O(v,ct),Cl(c)}return!0},get(u,f,v){var b;if(f===ur)return t;var m=l.get(f),h=f in u;if(m===void 0&&(!h||(b=cr(u,f))!=null&&b.writable)&&(m=gt(ee(h?u[f]:ct,d)),l.set(f,m)),m!==void 0){var g=s(m);return g===ct?void 0:g}return Reflect.get(u,f,v)},getOwnPropertyDescriptor(u,f){var v=Reflect.getOwnPropertyDescriptor(u,f);if(v&&"value"in v){var m=l.get(f);m&&(v.value=s(m))}else if(v===void 0){var h=l.get(f),g=h==null?void 0:h.v;if(h!==void 0&&g!==ct)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(u,f){var g;if(f===ur)return!0;var v=l.get(f),m=v!==void 0&&v.v!==ct||Reflect.has(u,f);if(v!==void 0||je!==null&&(!m||(g=cr(u,f))!=null&&g.writable)){v===void 0&&(v=gt(m?ee(u[f],d):ct),l.set(f,v));var h=s(v);if(h===ct)return!1}return m},set(u,f,v,m){var C;var h=l.get(f),g=f in u;if(a&&f==="length")for(var b=v;b<h.v;b+=1){var p=l.get(b+"");p!==void 0?O(p,ct):b in u&&(p=gt(ct),l.set(b+"",p))}h===void 0?(!g||(C=cr(u,f))!=null&&C.writable)&&(h=gt(void 0),O(h,ee(v,d)),l.set(f,h)):(g=h.v!==ct,O(h,ee(v,d)));var _=Reflect.getOwnPropertyDescriptor(u,f);if(_!=null&&_.set&&_.set.call(m,v),!g){if(a&&typeof f=="string"){var w=l.get("length"),y=Number(f);Number.isInteger(y)&&y>=w.v&&O(w,y+1)}Cl(c)}return!0},ownKeys(u){s(c);var f=Reflect.ownKeys(u).filter(h=>{var g=l.get(h);return g===void 0||g.v!==ct});for(var[v,m]of l)m.v!==ct&&!(v in u)&&f.push(v);return f},setPrototypeOf(){fi()}})}function Cl(t,e=1){O(t,t.v+e)}var Mn,Ml,Sl;function Mi(){if(Mn===void 0){Mn=window;var t=Element.prototype,e=Node.prototype;Ml=cr(e,"firstChild").get,Sl=cr(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function bo(t=""){return document.createTextNode(t)}function Tt(t){return Ml.call(t)}function Sn(t){return Sl.call(t)}function V(t,e){return Tt(t)}function Q(t,e){{var r=Tt(t);return r instanceof Comment&&r.data===""?Sn(r):r}}function q(t,e=1,r=!1){let o=t;for(;e--;)o=Sn(o);return o}function Si(t){t.textContent=""}function E(t){var e=Bt|tr,r=Ve!==null&&Ve.f&Bt?Ve:null;return je===null||r!==null&&r.f&Kt?e|=Kt:je.f|=pl,{ctx:Ie,deps:null,effects:null,equals:_l,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??je}}function Nn(t){const e=E(t);return e.equals=fo,e}function Nl(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Qt(e[r])}}function Ni(t){for(var e=t.parent;e!==null;){if(!(e.f&Bt))return e;e=e.parent}return null}function Ti(t){var e,r=je;yt(Ni(t));try{Nl(t),e=Wl(t)}finally{yt(r)}return e}function Tl(t){var e=Ti(t),r=(dr||t.f&Kt)&&t.deps!==null?wr:vt;Vt(t,r),t.equals(e)||(t.v=e,t.wv=zl())}function Pl(t){je===null&&Ve===null&&ai(),Ve!==null&&Ve.f&Kt&&je===null&&si(),yo&&li()}function Pi(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Dr(t,e,r,o=!0){var l=(t&qr)!==0,a=je,c={ctx:Ie,deps:null,nodes_start:null,nodes_end:null,f:t|tr,first:null,fn:e,last:null,next:null,parent:l?null:a,prev:null,teardown:null,transitions:null,wv:0};if(r){var d=zr;try{Bl(!0),Fn(c),c.f|=gl}catch(v){throw Qt(c),v}finally{Bl(d)}}else e!==null&&qn(c);var u=r&&c.deps===null&&c.first===null&&c.nodes_start===null&&c.teardown===null&&(c.f&(pl|kn))===0;if(!u&&!l&&o&&(a!==null&&Pi(c,a),Ve!==null&&Ve.f&Bt)){var f=Ve;(f.effects??(f.effects=[])).push(c)}return c}function Ii(t){const e=Dr(tn,null,!1);return Vt(e,vt),e.teardown=t,e}function ze(t){Pl();var e=je!==null&&(je.f&Xt)!==0&&Ie!==null&&!Ie.m;if(e){var r=Ie;(r.e??(r.e=[])).push({fn:t,effect:je,reaction:Ve})}else{var o=nn(t);return o}}function Li(t){return Pl(),on(t)}function Ri(t){const e=Dr(qr,t,!0);return(r={})=>new Promise(o=>{r.outro?nr(e,()=>{Qt(e),o(void 0)}):(Qt(e),o(void 0))})}function nn(t){return Dr(ml,t,!1)}function ji(t,e){var r=Ie,o={effect:null,ran:!1};r.l.r1.push(o),o.effect=on(()=>{t(),!o.ran&&(o.ran=!0,O(r.l.r2,!0),Zt(e))})}function Fi(){var t=Ie;on(()=>{if(s(t.l.r2)){for(var e of t.l.r1){var r=e.effect;r.f&vt&&Vt(r,wr),Wr(r)&&Fn(r),e.ran=!1}t.l.r2.v=!1}})}function on(t){return Dr(tn,t,!0)}function re(t,e=[],r=E){const o=e.map(r);return fr(()=>t(...o.map(s)))}function fr(t,e=0){return Dr(tn|xn|e,t,!0)}function Rt(t,e=!0){return Dr(tn|Xt,t,!0,e)}function Il(t){var e=t.teardown;if(e!==null){const r=yo,o=Ve;Vl(!0),jt(null);try{e.call(null)}finally{Vl(r),jt(o)}}}function Ll(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var o=r.next;Qt(r,e),r=o}}function qi(t){for(var e=t.first;e!==null;){var r=e.next;e.f&Xt||Qt(e),e=r}}function Qt(t,e=!0){var r=!1;if((e||t.f&ri)&&t.nodes_start!==null){for(var o=t.nodes_start,l=t.nodes_end;o!==null;){var a=o===l?null:Sn(o);o.remove(),o=a}r=!0}Ll(t,e&&!r),jn(t,0),Vt(t,An);var c=t.transitions;if(c!==null)for(const u of c)u.stop();Il(t);var d=t.parent;d!==null&&d.first!==null&&Rl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Rl(t){var e=t.parent,r=t.prev,o=t.next;r!==null&&(r.next=o),o!==null&&(o.prev=r),e!==null&&(e.first===t&&(e.first=o),e.last===t&&(e.last=r))}function nr(t,e){var r=[];_o(t,r,!0),jl(r,()=>{Qt(t),e&&e()})}function jl(t,e){var r=t.length;if(r>0){var o=()=>--r||e();for(var l of t)l.out(o)}else e()}function _o(t,e,r){if(!(t.f&rr)){if(t.f^=rr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var o=t.first;o!==null;){var l=o.next,a=(o.f&Or)!==0||(o.f&Xt)!==0;_o(o,e,a?r:!1),o=l}}}function xr(t){Fl(t,!0)}function Fl(t,e){if(t.f&rr){t.f^=rr,t.f&vt||(t.f^=vt),Wr(t)&&(Vt(t,tr),qn(t));for(var r=t.first;r!==null;){var o=r.next,l=(r.f&Or)!==0||(r.f&Xt)!==0;Fl(r,l?e:!1),r=o}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let Tn=!1,wo=[];function ql(){Tn=!1;const t=wo.slice();wo=[],uo(t)}function ln(t){Tn||(Tn=!0,queueMicrotask(ql)),wo.push(t)}function Oi(){Tn&&ql()}const Ol=0,Bi=1;let Pn=!1,In=Ol,sn=!1,an=null,zr=!1,yo=!1;function Bl(t){zr=t}function Vl(t){yo=t}let kr=[],Yr=0,o1=[],Ve=null,or=!1;function jt(t){Ve=t}let je=null;function yt(t){je=t}let Jt=null;function Vi(t){Jt=t}let pt=null,Pt=0,lr=null;function Di(t){lr=t}let Dl=1,Ln=0,dr=!1;function zl(){return++Dl}function Wr(t){var f;var e=t.f;if(e&tr)return!0;if(e&wr){var r=t.deps,o=(e&Kt)!==0;if(r!==null){var l,a,c=(e&En)!==0,d=o&&je!==null&&!dr,u=r.length;if(c||d){for(l=0;l<u;l++)a=r[l],(c||!((f=a==null?void 0:a.reactions)!=null&&f.includes(t)))&&(a.reactions??(a.reactions=[])).push(t);c&&(t.f^=En)}for(l=0;l<u;l++)if(a=r[l],Wr(a)&&Tl(a),a.wv>t.wv)return!0}(!o||je!==null&&!dr)&&Vt(t,vt)}return!1}function zi(t,e){for(var r=e;r!==null;){if(r.f&kn)try{r.fn(t);return}catch{r.f^=kn}r=r.parent}throw Pn=!1,t}function Yi(t){return(t.f&An)===0&&(t.parent===null||(t.parent.f&kn)===0)}function Rn(t,e,r,o){if(Pn){if(r===null&&(Pn=!1),Yi(e))throw t;return}r!==null&&(Pn=!0);{zi(t,e);return}}function Yl(t,e,r=0){var o=t.reactions;if(o!==null)for(var l=0;l<o.length;l++){var a=o[l];a.f&Bt?Yl(a,e,r+1):e===a&&(r===0?Vt(a,tr):a.f&vt&&Vt(a,wr),qn(a))}}function Wl(t){var g;var e=pt,r=Pt,o=lr,l=Ve,a=dr,c=Jt,d=Ie,u=or,f=t.f;pt=null,Pt=0,lr=null,Ve=f&(Xt|qr)?null:t,dr=(f&Kt)!==0&&(!zr||l===null||u),Jt=null,Cn(t.ctx),or=!1,Ln++;try{var v=(0,t.fn)(),m=t.deps;if(pt!==null){var h;if(jn(t,Pt),m!==null&&Pt>0)for(m.length=Pt+pt.length,h=0;h<pt.length;h++)m[Pt+h]=pt[h];else t.deps=m=pt;if(!dr)for(h=Pt;h<m.length;h++)((g=m[h]).reactions??(g.reactions=[])).push(t)}else m!==null&&Pt<m.length&&(jn(t,Pt),m.length=Pt);if(yr()&&lr!==null&&!(t.f&(Bt|wr|tr)))for(h=0;h<lr.length;h++)Yl(lr[h],t);return l!==null&&Ln++,v}finally{pt=e,Pt=r,lr=o,Ve=l,dr=a,Jt=c,Cn(d),or=u}}function Wi(t,e){let r=e.reactions;if(r!==null){var o=Ka.call(r,t);if(o!==-1){var l=r.length-1;l===0?r=e.reactions=null:(r[o]=r[l],r.pop())}}r===null&&e.f&Bt&&(pt===null||!pt.includes(e))&&(Vt(e,wr),e.f&(Kt|En)||(e.f^=En),Nl(e),jn(e,0))}function jn(t,e){var r=t.deps;if(r!==null)for(var o=e;o<r.length;o++)Wi(t,r[o])}function Fn(t){var e=t.f;if(!(e&An)){Vt(t,vt);var r=je,o=Ie;je=t;try{e&xn?qi(t):Ll(t),Il(t);var l=Wl(t);t.teardown=typeof l=="function"?l:null,t.wv=Dl;var a=t.deps,c;et&&hi&&t.f&tr}catch(d){Rn(d,t,r,o||t.ctx)}finally{je=r}}}function Ul(){if(Yr>1e3){Yr=0;try{ii()}catch(t){if(an!==null)Rn(t,an,null);else throw t}}Yr++}function Hl(t){var e=t.length;if(e!==0){Ul();var r=zr;zr=!0;try{for(var o=0;o<e;o++){var l=t[o];l.f&vt||(l.f^=vt);var a=[];Gl(l,a),Ui(a)}}finally{zr=r}}}function Ui(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var o=t[r];if(!(o.f&(An|rr)))try{Wr(o)&&(Fn(o),o.deps===null&&o.first===null&&o.nodes_start===null&&(o.teardown===null?Rl(o):o.fn=null))}catch(l){Rn(l,o,null,o.ctx)}}}function Hi(){if(sn=!1,Yr>1001)return;const t=kr;kr=[],Hl(t),sn||(Yr=0,an=null)}function qn(t){In===Ol&&(sn||(sn=!0,queueMicrotask(Hi))),an=t;for(var e=t;e.parent!==null;){e=e.parent;var r=e.f;if(r&(qr|Xt)){if(!(r&vt))return;e.f^=vt}}kr.push(e)}function Gl(t,e){var r=t.first,o=[];e:for(;r!==null;){var l=r.f,a=(l&Xt)!==0,c=a&&(l&vt)!==0,d=r.next;if(!c&&!(l&rr))if(l&tn){if(a)r.f^=vt;else{var u=Ve;try{Ve=r,Wr(r)&&Fn(r)}catch(h){Rn(h,r,null,r.ctx)}finally{Ve=u}}var f=r.first;if(f!==null){r=f;continue}}else l&ml&&o.push(r);if(d===null){let h=r.parent;for(;h!==null;){if(t===h)break e;var v=h.next;if(v!==null){r=v;continue e}h=h.parent}}r=d}for(var m=0;m<o.length;m++)f=o[m],e.push(f),Gl(f,e)}function Xl(t){var e=In,r=kr;try{Ul();const l=[];In=Bi,kr=l,sn=!1,Hl(r);var o=t==null?void 0:t();return Oi(),(kr.length>0||l.length>0)&&Xl(),Yr=0,an=null,o}finally{In=e,kr=r}}function s(t){var e=t.f,r=(e&Bt)!==0;if(Ve!==null&&!or){Jt!==null&&Jt.includes(t)&&di();var o=Ve.deps;t.rv<Ln&&(t.rv=Ln,pt===null&&o!==null&&o[Pt]===t?Pt++:pt===null?pt=[t]:(!dr||!pt.includes(t))&&pt.push(t))}else if(r&&t.deps===null&&t.effects===null){var l=t,a=l.parent;a!==null&&!(a.f&Kt)&&(l.f^=Kt)}return r&&(l=t,Wr(l)&&Tl(l)),t.v}function Zt(t){var e=or;try{return or=!0,t()}finally{or=e}}const Gi=-7169;function Vt(t,e){t.f=t.f&Gi|e}function Kl(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ur in t)xo(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&ur in r&&xo(r)}}}function xo(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let o in t)try{xo(t[o],e)}catch{}const r=co(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const o=hl(r);for(let l in o){const a=o[l].get;if(a)try{a.call(t)}catch{}}}}}const Xi=["touchstart","touchmove"];function Ki(t){return Xi.includes(t)}let Ql=!1;function Qi(){Ql||(Ql=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Jl(t){var e=Ve,r=je;jt(null),yt(null);try{return t()}finally{jt(e),yt(r)}}function Ji(t,e,r,o=r){t.addEventListener(e,()=>Jl(r));const l=t.__on_r;l?t.__on_r=()=>{l(),o(!0)}:t.__on_r=()=>o(!0),Qi()}const Zl=new Set,ko=new Set;function Zi(t,e,r,o={}){function l(a){if(o.capture||cn.call(e,a),!a.cancelBubble)return Jl(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ln(()=>{e.addEventListener(t,l,o)}):e.addEventListener(t,l,o),l}function vr(t,e,r,o,l){var a={capture:o,passive:l},c=Zi(t,e,r,a);(e===document.body||e===window||e===document)&&Ii(()=>{e.removeEventListener(t,c,a)})}function Ze(t){for(var e=0;e<t.length;e++)Zl.add(t[e]);for(var r of ko)r(t)}function cn(t){var y;var e=this,r=e.ownerDocument,o=t.type,l=((y=t.composedPath)==null?void 0:y.call(t))||[],a=l[0]||t.target,c=0,d=t.__root;if(d){var u=l.indexOf(d);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var f=l.indexOf(e);if(f===-1)return;u<=f&&(c=u)}if(a=l[c]||t.target,a!==e){Qa(t,"currentTarget",{configurable:!0,get(){return a||r}});var v=Ve,m=je;jt(null),yt(null);try{for(var h,g=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var p=a["__"+o];if(p!==void 0&&!a.disabled)if(jr(p)){var[_,...w]=p;_.apply(a,[t,...w])}else p.call(a,t)}catch(C){h?g.push(C):h=C}if(t.cancelBubble||b===e||b===null)break;a=b}if(h){for(let C of g)queueMicrotask(()=>{throw C});throw h}}finally{t.__root=e,delete t.currentTarget,jt(v),yt(m)}}}function Eo(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Ur(t,e){var r=je;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function J(t,e){var r=(e&xl)!==0,o=(e&Ei)!==0,l,a=!t.startsWith("<!>");return()=>{l===void 0&&(l=Eo(a?t:"<!>"+t),r||(l=Tt(l)));var c=o?document.importNode(l,!0):l.cloneNode(!0);if(r){var d=Tt(c),u=c.lastChild;Ur(d,u)}else Ur(c,c);return c}}function ve(t,e,r="svg"){var o=!t.startsWith("<!>"),l=(e&xl)!==0,a=`<${r}>${o?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var d=Eo(a),u=Tt(d);if(l)for(c=document.createDocumentFragment();Tt(u);)c.appendChild(Tt(u));else c=Tt(u)}var f=c.cloneNode(!0);if(l){var v=Tt(f),m=f.lastChild;Ur(v,m)}else Ur(f,f);return f}}function me(){var t=document.createDocumentFragment(),e=document.createComment(""),r=bo();return t.append(e,r),Ur(e,r),t}function P(t,e){t!==null&&t.before(e)}let Ao=!0;function xe(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function $i(t,e){return ec(t,e)}const Hr=new Map;function ec(t,{target:e,anchor:r,props:o={},events:l,context:a,intro:c=!0}){Mi();var d=new Set,u=m=>{for(var h=0;h<m.length;h++){var g=m[h];if(!d.has(g)){d.add(g);var b=Ki(g);e.addEventListener(g,cn,{passive:b});var p=Hr.get(g);p===void 0?(document.addEventListener(g,cn,{passive:b}),Hr.set(g,1)):Hr.set(g,p+1)}}};u(io(Zl)),ko.add(u);var f=void 0,v=Ri(()=>{var m=r??e.appendChild(bo());return Rt(()=>{if(a){ge({});var h=Ie;h.c=a}l&&(o.$$events=l),Ao=c,f=t(m,o)||{},Ao=!0,a&&pe()}),()=>{var b;for(var h of d){e.removeEventListener(h,cn);var g=Hr.get(h);--g===0?(document.removeEventListener(h,cn),Hr.delete(h)):Hr.set(h,g)}ko.delete(u),m!==r&&((b=m.parentNode)==null||b.removeChild(m))}});return tc.set(f,v),f}let tc=new WeakMap;const Co=0,On=1,Mo=2;function $l(t,e,r,o,l){var a=t,c=yr(),d=Ie,u=ct,f,v,m,h=(c?gt:rn)(void 0),g=(c?gt:rn)(void 0),b=!1;function p(w,y){b=!0,y&&(yt(_),jt(_),Cn(d));try{w===Co&&r&&(f?xr(f):f=Rt(()=>r(a))),w===On&&o&&(v?xr(v):v=Rt(()=>o(a,h))),w===Mo&&l&&(m?xr(m):m=Rt(()=>l(a,g))),w!==Co&&f&&nr(f,()=>f=null),w!==On&&v&&nr(v,()=>v=null),w!==Mo&&m&&nr(m,()=>m=null)}finally{y&&(Cn(null),jt(null),yt(null),Xl())}}var _=fr(()=>{if(u!==(u=e())){if($a(u)){var w=u;b=!1,w.then(y=>{w===u&&(Vr(h,y),p(On,!0))},y=>{if(w===u&&(Vr(g,y),p(Mo,!0),!l))throw g.v}),ln(()=>{b||p(Co,!0)})}else Vr(h,u),p(On,!1);return()=>u=ct}})}function U(t,e,r=!1){var o=t,l=null,a=null,c=ct,d=r?Or:0,u=!1;const f=(m,h=!0)=>{u=!0,v(h,m)},v=(m,h)=>{c!==(c=m)&&(c?(l?xr(l):h&&(l=Rt(()=>h(o))),a&&nr(a,()=>{a=null})):(a?xr(a):h&&(a=Rt(()=>h(o))),l&&nr(l,()=>{l=null})))};fr(()=>{u=!1,e(f),u||v(null,null)},d)}function Bn(t,e,r){var o=t,l=ct,a,c=yr()?oi:wl;fr(()=>{c(l,l=e())&&(a&&nr(a),a=Rt(()=>r(o)))})}function Xe(t,e){return e}function rc(t,e,r,o){for(var l=[],a=e.length,c=0;c<a;c++)_o(e[c].e,l,!0);var d=a>0&&l.length===0&&r!==null;if(d){var u=r.parentNode;Si(u),u.append(r),o.clear(),hr(t,e[0].prev,e[a-1].next)}jl(l,()=>{for(var f=0;f<a;f++){var v=e[f];d||(o.delete(v.k),hr(t,v.prev,v.next)),Qt(v.e,!d)}})}function Ye(t,e,r,o,l,a=null){var c=t,d={items:new Map,first:null},u=(e&yl)!==0;if(u){var f=t;c=f.appendChild(bo())}var v=null,m=!1,h=Nn(()=>{var g=r();return jr(g)?g:g==null?[]:io(g)});fr(()=>{var g=s(h),b=g.length;m&&b===0||(m=b===0,nc(g,d,c,l,e,o,r),a!==null&&(b===0?v?xr(v):v=Rt(()=>a(c)):v!==null&&nr(v,()=>{v=null})),s(h))})}function nc(t,e,r,o,l,a,c){var W,ne,j,z;var d=(l&gi)!==0,u=(l&(vo|ho))!==0,f=t.length,v=e.items,m=e.first,h=m,g,b=null,p,_=[],w=[],y,C,k,A;if(d)for(A=0;A<f;A+=1)y=t[A],C=a(y,A),k=v.get(C),k!==void 0&&((W=k.a)==null||W.measure(),(p??(p=new Set)).add(k));for(A=0;A<f;A+=1){if(y=t[A],C=a(y,A),k=v.get(C),k===void 0){var I=h?h.e.nodes_start:r;b=lc(I,e,b,b===null?e.first:b.next,y,C,A,o,l,c),v.set(C,b),_=[],w=[],h=b.next;continue}if(u&&oc(k,y,A,l),k.e.f&rr&&(xr(k.e),d&&((ne=k.a)==null||ne.unfix(),(p??(p=new Set)).delete(k))),k!==h){if(g!==void 0&&g.has(k)){if(_.length<w.length){var N=w[0],M;b=N.prev;var L=_[0],D=_[_.length-1];for(M=0;M<_.length;M+=1)es(_[M],N,r);for(M=0;M<w.length;M+=1)g.delete(w[M]);hr(e,L.prev,D.next),hr(e,b,L),hr(e,D,N),h=N,b=D,A-=1,_=[],w=[]}else g.delete(k),es(k,h,r),hr(e,k.prev,k.next),hr(e,k,b===null?e.first:b.next),hr(e,b,k),b=k;continue}for(_=[],w=[];h!==null&&h.k!==C;)h.e.f&rr||(g??(g=new Set)).add(h),w.push(h),h=h.next;if(h===null)continue;k=h}_.push(k),b=k,h=k.next}if(h!==null||g!==void 0){for(var T=g===void 0?[]:io(g);h!==null;)h.e.f&rr||T.push(h),h=h.next;var F=T.length;if(F>0){var H=l&yl&&f===0?r:null;if(d){for(A=0;A<F;A+=1)(j=T[A].a)==null||j.measure();for(A=0;A<F;A+=1)(z=T[A].a)==null||z.fix()}rc(e,T,H,v)}}d&&ln(()=>{var G;if(p!==void 0)for(k of p)(G=k.a)==null||G.apply()}),je.first=e.first&&e.first.e,je.last=b&&b.e}function oc(t,e,r,o){o&vo&&Vr(t.v,e),o&ho?Vr(t.i,r):t.i=r}function lc(t,e,r,o,l,a,c,d,u,f){var v=(u&vo)!==0,m=(u&pi)===0,h=v?m?rn(l):gt(l):l,g=u&ho?gt(c):c,b={i:g,v:h,k:a,a:null,e:null,prev:r,next:o};try{return b.e=Rt(()=>d(t,h,g,f),po),b.e.prev=r&&r.e,b.e.next=o&&o.e,r===null?e.first=b:(r.next=b,r.e.next=b.e),o!==null&&(o.prev=b,o.e.prev=b.e),b}finally{}}function es(t,e,r){for(var o=t.next?t.next.e.nodes_start:r,l=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==o;){var c=Sn(a);l.before(a),a=c}}function hr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function ht(t,e,r,o,l){var a=t,c="",d;fr(()=>{c!==(c=e()??"")&&(d!==void 0&&(Qt(d),d=void 0),c!==""&&(d=Rt(()=>{var u=c+"";r&&(u=`<svg>${u}</svg>`);var f=Eo(u);if((r||o)&&(f=Tt(f)),Ur(Tt(f),f.lastChild),r||o)for(;Tt(f);)a.before(Tt(f));else a.before(f)})))})}function Er(t,e,...r){var o=t,l=at,a;fr(()=>{l!==(l=e())&&(a&&(Qt(a),a=null),a=Rt(()=>l(o,...r)))},Or)}function So(t,e,r){var o=t,l,a;fr(()=>{l!==(l=e())&&(a&&(nr(a),a=null),l&&(a=Rt(()=>r(o,l))))},Or)}function ts(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(r=ts(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function sc(){for(var t,e,r=0,o="",l=arguments.length;r<l;r++)(t=arguments[r])&&(e=ts(t))&&(o&&(o+=" "),o+=e);return o}function ac(t){return typeof t=="object"?sc(t):t??""}function S(t,e,r,o){var l=t.__attributes??(t.__attributes={});l[e]!==(l[e]=r)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[ni]=r),r==null?t.removeAttribute(e):typeof r!="string"&&ic(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var rs=new Map;function ic(t){var e=rs.get(t.nodeName);if(e)return e;rs.set(t.nodeName,e=[]);for(var r,o=t,l=Element.prototype;l!==o;){r=hl(o);for(var a in r)r[a].set&&e.push(a);o=co(o)}return e}function No(t,e,r){var o=t.__className,l=ns(e);(o!==l||po)&&(l===""?t.removeAttribute("class"):t.setAttribute("class",l),t.__className=l)}function Gr(t,e,r){var o=t.__className,l=ns(e);(o!==l||po)&&(e==null?t.removeAttribute("class"):t.className=l,t.__className=l)}function ns(t,e){return(t??"")+""}function xt(t,e,r){if(r){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const cc=()=>performance.now(),sr={tick:t=>requestAnimationFrame(t),now:()=>cc(),tasks:new Set};function os(){const t=sr.now();sr.tasks.forEach(e=>{e.c(t)||(sr.tasks.delete(e),e.f())}),sr.tasks.size!==0&&sr.tick(os)}function uc(t){let e;return sr.tasks.size===0&&sr.tick(os),{promise:new Promise(r=>{sr.tasks.add(e={c:t,f:r})}),abort(){sr.tasks.delete(e)}}}function Vn(t,e){t.dispatchEvent(new CustomEvent(e))}function fc(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ls(t){const e={},r=t.split(";");for(const o of r){const[l,a]=o.split(":");if(!l||a===void 0)break;const c=fc(l.trim());e[c]=a.trim()}return e}const dc=t=>t;function vc(t,e,r,o){var l=(t&ki)!==0,a="both",c,d=e.inert,u=e.style.overflow,f,v;function m(){var _=Ve,w=je;jt(null),yt(null);try{return c??(c=r()(e,(o==null?void 0:o())??{},{direction:a}))}finally{jt(_),yt(w)}}var h={is_global:l,in(){e.inert=d,Vn(e,"introstart"),f=To(e,m(),v,1,()=>{Vn(e,"introend"),f==null||f.abort(),f=c=void 0,e.style.overflow=u})},out(_){e.inert=!0,Vn(e,"outrostart"),v=To(e,m(),f,0,()=>{Vn(e,"outroend"),_==null||_()})},stop:()=>{f==null||f.abort(),v==null||v.abort()}},g=je;if((g.transitions??(g.transitions=[])).push(h),Ao){var b=l;if(!b){for(var p=g.parent;p&&p.f&Or;)for(;(p=p.parent)&&!(p.f&xn););b=!p||(p.f&gl)!==0}b&&nn(()=>{Zt(()=>h.in())})}}function To(t,e,r,o,l){var a=o===1;if(Fr(e)){var c,d=!1;return ln(()=>{if(!d){var _=e({direction:a?"in":"out"});c=To(t,_,r,o,l)}}),{abort:()=>{d=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return l(),{abort:at,deactivate:at,reset:at,t:()=>o};const{delay:u=0,css:f,tick:v,easing:m=dc}=e;var h=[];if(a&&r===void 0&&(v&&v(0,1),f)){var g=ls(f(0,1));h.push(g,g)}var b=()=>1-o,p=t.animate(h,{duration:u});return p.onfinish=()=>{var _=(r==null?void 0:r.t())??1-o;r==null||r.abort();var w=o-_,y=e.duration*Math.abs(w),C=[];if(y>0){var k=!1;if(f)for(var A=Math.ceil(y/16.666666666666668),I=0;I<=A;I+=1){var N=_+w*m(I/A),M=ls(f(N,1-N));C.push(M),k||(k=M.overflow==="hidden")}k&&(t.style.overflow="hidden"),b=()=>{var L=p.currentTime;return _+w*m(L/y)},v&&uc(()=>{if(p.playState!=="running")return!1;var L=b();return v(L,1-L),!0})}p=t.animate(C,{duration:y,fill:"forwards"}),p.onfinish=()=>{b=()=>o,v==null||v(o,1-o),l()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=at)},deactivate:()=>{l=at},reset:()=>{o===0&&(v==null||v(1,0))},t:()=>b()}}function Po(t,e,r=e){var o=yr();Ji(t,"input",l=>{var a=l?t.defaultValue:t.value;if(a=Io(t)?Lo(a):a,r(a),o&&a!==(a=e())){var c=t.selectionStart,d=t.selectionEnd;t.value=a??"",d!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(d,t.value.length))}}),Zt(e)==null&&t.value&&r(Io(t)?Lo(t.value):t.value),on(()=>{var l=e();Io(t)&&l===Lo(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}function Io(t){var e=t.type;return e==="number"||e==="range"}function Lo(t){return t===""?null:+t}const eo=class eo{constructor(e){yn(this,$n);yn(this,_r,new WeakMap);yn(this,en);yn(this,pn);vl(this,pn,e)}observe(e,r){var o=ir(this,_r).get(e)||new Set;return o.add(r),ir(this,_r).set(e,o),Ga(this,$n,Xa).call(this).observe(e,ir(this,pn)),()=>{var l=ir(this,_r).get(e);l.delete(r),l.size===0&&(ir(this,_r).delete(e),ir(this,en).unobserve(e))}}};_r=new WeakMap,en=new WeakMap,pn=new WeakMap,$n=new WeakSet,Xa=function(){return ir(this,en)??vl(this,en,new ResizeObserver(e=>{for(var r of e){eo.entries.set(r.target,r);for(var o of ir(this,_r).get(r.target)||[])o(r)}}))},Rr(eo,"entries",new WeakMap);let Ro=eo;var hc=new Ro({box:"border-box"});function ss(t,e,r){var o=hc.observe(t,()=>r(t[e]));nn(()=>(Zt(()=>r(t[e])),o))}function as(t,e){return t===e||(t==null?void 0:t[ur])===e}function Xr(t={},e,r,o){return nn(()=>{var l,a;return on(()=>{l=a,a=[],Zt(()=>{t!==r(...a)&&(e(t,...a),l&&as(r(...l),t)&&e(null,...l))})}),()=>{ln(()=>{a&&as(r(...a),t)&&e(null,...a)})}}),t}function is(t=!1){const e=Ie,r=e.l.u;if(!r)return;let o=()=>Kl(e.s);if(t){let l=0,a={};const c=E(()=>{let d=!1;const u=e.s;for(const f in u)u[f]!==a[f]&&(a[f]=u[f],d=!0);return d&&l++,l});o=()=>s(c)}r.b.length&&Li(()=>{cs(e,o),uo(r.b)}),ze(()=>{const l=Zt(()=>r.m.map(ei));return()=>{for(const a of l)typeof a=="function"&&a()}}),r.a.length&&ze(()=>{cs(e,o),uo(r.a)})}function cs(t,e){if(t.l.s)for(const r of t.l.s)s(r);e()}let Dn=!1;function mc(t){var e=Dn;try{return Dn=!1,[t(),Dn]}finally{Dn=e}}const gc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function pc(t,e,r){return new Proxy({props:t,exclude:e},gc)}const bc={get(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(Fr(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o)return o[e]}},set(t,e,r){let o=t.props.length;for(;o--;){let l=t.props[o];Fr(l)&&(l=l());const a=cr(l,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let o=t.props[r];if(Fr(o)&&(o=o()),typeof o=="object"&&o!==null&&e in o){const l=cr(o,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(t,e){if(e===ur||e===bl)return!1;for(let r of t.props)if(Fr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props){Fr(r)&&(r=r());for(const o in r)e.includes(o)||e.push(o)}return e}};function Kr(...t){return new Proxy({props:t},bc)}function us(t){for(var e=je,r=je;e!==null&&!(e.f&(Xt|qr));)e=e.parent;try{return yt(e),t()}finally{yt(r)}}function B(t,e,r,o){var N;var l=(r&bi)!==0,a=!Br||(r&_i)!==0,c=(r&yi)!==0,d=(r&xi)!==0,u=!1,f;c?[f,u]=mc(()=>t[e]):f=t[e];var v=ur in t||bl in t,m=c&&(((N=cr(t,e))==null?void 0:N.set)??(v&&e in t&&(M=>t[e]=M)))||void 0,h=o,g=!0,b=!1,p=()=>(b=!0,g&&(g=!1,d?h=Zt(o):h=o),h);f===void 0&&o!==void 0&&(m&&a&&ci(),f=p(),m&&m(f));var _;if(a)_=()=>{var M=t[e];return M===void 0?p():(g=!0,b=!1,M)};else{var w=us(()=>(l?E:Nn)(()=>t[e]));w.f|=ti,_=()=>{var M=s(w);return M!==void 0&&(h=void 0),M===void 0?h:M}}if(!(r&wi))return _;if(m){var y=t.$$legacy;return function(M,L){return arguments.length>0?((!a||!L||y||u)&&m(L?_():M),M):_()}}var C=!1,k=!1,A=rn(f),I=us(()=>E(()=>{var M=_(),L=s(A);return C?(C=!1,k=!0,L):(k=!1,A.v=M)}));return l||(I.equals=fo),function(M,L){if(arguments.length>0){const D=L?s(I):a&&c?ee(M):M;return I.equals(D)||(C=!0,O(A,D),b&&h!==void 0&&(h=D),Zt(()=>s(I))),M}return s(I)}}function fs(t){Ie===null&&mo(),Br&&Ie.l!==null?wc(Ie).m.push(t):ze(()=>{const e=Zt(t);if(typeof e=="function")return e})}function _c(t){Ie===null&&mo(),fs(()=>()=>Zt(t))}function wc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const yc="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yc),mi();function ds(t){if(Ne(t))return ds(t.v);const e=new Ce.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Ce(e)}function zn(t){if(Ne(t))return zn(t.v);let e=t[0],r=t[0];for(let o=1;o<t.length;o++)t[o]<e&&(e=t[o]),t[o]>r&&(r=t[o]);return[e,r]}function jo(t,e){return Ne(t)?jo(t.v,e):Math.sqrt(vs(t,e))}function vs(t,e){if(e===void 0&&(e=!1),Ne(t))return vs(t.v);const r=Yn(t);let o=0;for(let l=0;l<t.length;l++){const a=t[l]-r;o=o+a*a}return o/(e?t.length:t.length-1)}function Yn(t){return Ne(t)?Yn(t.v):hs(t)/t.length}function hs(t){if(Ne(t))return hs(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function ms(t){if(Ne(t))return ms(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Qr(t){return Ne(t)||Yt(t)?t.v[Fo(t.v)-1]:t[Fo(t)-1]}function Fo(t){if(Ne(t)||Yt(t))return Fo(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]<r&&(e=o,r=t[o-1]);return e}function Ar(t){return Ne(t)||Yt(t)?t.v[qo(t.v)-1]:t[qo(t)-1]}function qo(t){if(Ne(t)||Yt(t))return qo(t.v);let e=1,r=t[0];for(let o=2;o<=t.length;o++)t[o-1]>r&&(e=o,r=t[o-1]);return e}const Oo=30,xc=1e-7,kc=1e-7,gs=1e-13,ps=1e3,Ec=100;function bs(t,e,r,o,l){o===void 0&&(o=ps),r===void 0&&(r=gs),l===void 0&&(l=Ec);let a=r,c=o,d=(c-a)/l;for(let u=0;u<l;u++){let f,v;for(let g=0;g<l;g++){f=a+g*d,v=a+(g+1)*d;const b=e(f),p=e(v);if(b<=t&&p>=t)break}const m=(f+v)/2,h=e(m);if(Math.abs(h-t)<xc||(a=f,c=v,d=(c-a)/l,d/c<kc))return m}return(a+c)/2}function _s(t,e=0,r=1){let o=Ce.zeros(t);for(let l=0;l<t;l++)o.v[l]=e+Math.random()*(r-e);return o}function ws(t,e=0,r=1){let o=Ce.zeros(t);for(let l=0;l<t;l++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();o.v[l]=a*Math.sin(c)*r+e}return o}function ys(t,e=0,r=1){if(Ne(t))return t.apply(l=>ys(l,e,r));const o=1/(Math.sqrt(2)*r);return .5*(1+Cc((t-e)*o))}function Bo(t,e=0,r=1){if(Ne(t))return t.apply(H=>Bo(H,e,r));if(e!==0||r!==1)return Bo(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const o=.425,l=5,a=.180625,c=1.6,d=3.3871327179,u=5.0434271938*10,f=1.5929113202*100,v=5.910937472*10,m=1.7895169469*10,h=7.8757757664*10,g=6.71875636*10,b=1.4234372777,p=2.75681539,_=1.3067284816,w=1.7023821103*.1,y=7.370016425*.1,C=1.2021132975*.1,k=6.657905115,A=3.081226386,I=4.2868294337*.1,N=1.7337203997*.01,M=2.4197894225*.1,L=1.2258202635*.01,D=t-.5;let T;if(Math.abs(D)<=o)return T=a-D*D,D*(((v*T+f)*T+u)*T+d)/(((g*T+h)*T+m)*T+1);T=D<0?t:1-t,T=Math.sqrt(-Math.log(T));let F;return T<=l?(T=T-c,F=(((w*T+_)*T+p)*T+b)/((C*T+y)*T+1)):(T=T-l,F=((N*T+I)*T+A+k)/((L*T+M)*T+1)),D<0?-F:F}function Vo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return Vo(We(t),e,r);if(Ne(t))return t.apply(o=>Vo(o,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return Wn(t*e,e)}return e==Number.POSITIVE_INFINITY?1-Wn(r/t,r):e*t>r?1-Hn(r/(r+e*t),r/2,e/2):Hn(e*t/(r+e*t),e/2,r/2)}function xs(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let o=ps,l=gs;if(t>.9997&&r===1?(o=1e7,l=6e5,t=.9997):t>.9992&&r===1?(o=1e7,l=6e5):t>.997&&r===1?(o=1e6,l=45e3):t>.992&&r===1?(o=1e5,l=5e3):t>.97&&r===1&&(o=1e4,l=400),Array.isArray(t))return xs(We(t),e,r);const a=d=>Vo(d,e,r);function c(d,u,f){return d===0?0:d===1?Inf:u===0?NaN:f===0?NaN:bs(d,a,l,o)}return Ne(t)?t.apply(c,e,r):c(t,e,r)}function Wn(t,e){if(Array.isArray(t))return Wn(We(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(o);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const f=u/e,v=Math.pow(f,1/6)-.5*Math.pow(f,1/3)+1/3*Math.pow(f,1/2);return ys(v,r,l)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:Ac(u/2,e/2)/un(e/2)}const d=e>Oo?a:c;return Ne(t)?t.apply(d):d(t)}function Un(t,e){if(Array.isArray(t))return Un(We(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),o=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(o);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const f=Bo(u,r,l),v=Math.pow(Math.sqrt(36*f*f-30*f+13)/4+(3*f-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:bs(u,v=>Wn(v,e),0,Oo*10)}const d=e>Oo?a:c;return Ne(t)?t.apply(d):d(t)}function Hn(t,e,r){if(Array.isArray(t))return Hn(We(t),e,r);if(Ne(t))return t.apply(l=>Hn(l,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const o=.5-t+.5;return Oc(e,r,t,o)}function un(t){if(Ne(t))return t.apply(un);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+un(1-t));t=t-1;let r=.9999999999998099;for(let l=0;l<e.length;l++)r=r+e[l]/(t+l+1);const o=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*r}function Ac(t,e){let l=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/un(e+a+1);if(isNaN(c)||c<1e-18)break;l+=c}return Math.pow(t,e)*un(e)*Math.exp(-t)*l}function Cc(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,o=-.284496736,l=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*t),f=1-((((c*u+a)*u+l)*u+o)*u+r)*u*Math.exp(-t*t);return e*f}function ks(t,e){const r=.564189583547756,o=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],d=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,v,m,h,g=Math.abs(e);if(g<=.5)return v=e*e,h=(((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4]+1,m=((l[0]*v+l[1])*v+l[2])*v+1,f=.5-e*(h/m)+.5,f=Math.exp(v)*f,f;if(g<=4)h=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],m=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],f=h/m;else{if(e<=-5.6)return f=2,f=Math.exp(e*e)*2,f;v=1/(e*e),h=(((d[0]*v+d[1])*v+d[2])*v+d[3])*v+d[4],m=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+1,f=(r-v*h/m)/g}return e<0&&(f=Math.exp(e*e)*2-f),f}function Es(t,e){let r=t+e-2;return r<=.25?Ft(r+1):r<=1.25?Ft(r)+gr(r):Ft(r-1)+Math.log(r*(r+1))}function Gn(t,e){const r=.0833333333333333,o=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let u,f,v,m,h,g,b,p,_,w,y,C,k,A,I;return v=Math.min(t,e),m=Math.max(t,e),g=v/m,h=g/(g+1),_=1/(g+1),C=_*_,w=_+C+1,y=_+C*w+1,k=_+C*y+1,A=_+C*k+1,I=_+C*A+1,f=1/m,b=f*f,p=((((d*I*b+c*A)*b+a*k)*b+l*y)*b+o*w)*b+r,p*=h/m,f=1/v,b=f*f,u=(((((d*b+c)*b+a)*b+l)*b+o)*b+r)/v+p,u}function Qe(t){let e,r,o,l,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],d=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],l=(u*r+d)*r+1,o=a/l,e>0?r*o/t:t*(o+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],d=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],l=(((d[4]*r+d[3])*r+d[2])*r+d[1])*r+1,o=a/l,e>0?r/t*(o-.5-.5):t*o}}}function Mc(t,e,r){let o,l,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=l=0,o=0;for(let d=1;d<=r;d++)a=l,l=o,o=c*l-a+e[r-d];return(o-a)*.5}function As(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,o=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*Mc(t/.375,e,r));if(t<o)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function mr(t,e){const r=.0833333333333333,o=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let u,f,v,m,h,g,b,p,_,w,y,C,k,A;return t>e?(v=e/t,u=1/(v+1),p=v/(v+1),f=t+(e-.5)):(v=t/e,u=v/(v+1),p=1/(v+1),f=e+(t-.5)),y=p*p,_=p+y+1,w=p+y*_+1,C=p+y*w+1,k=p+y*C+1,A=p+y*k+1,m=1/(e*e),b=((((d*A*m+c*k)*m+a*C)*m+l*w)*m+o*_)*m+r,b*=u/e,h=f*gr(t/e),g=t*(Math.log(e)-1),h>g?b-g-h:b-h-g}function Ft(t){if(t<.6){const b=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*b}else{const e=.422784335098467,r=.848044614534529,o=.565221050691933,l=.156513060486551,a=.017050248402265,c=.000497958207639485,d=1.24313399877507,u=.548042109832463,f=.10155218743983,v=.00713309612391,m=.000116165475989616,h=t-.5-.5,g=(((((c*h+a)*h+l)*h+o)*h+r)*h+e)/(((((m*h+v)*h+f)*h+u)*h+d)*h+1);return h*g}}function Dt(t){const e=.418938533204673,r=.0833333333333333,o=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;if(t<=.8)return Ft(t)-Math.log(t);if(t<=2.25)return Ft(t-.5-.5);if(t<10){let v=Math.round(t-1.25),m=t,h=1;for(let g=1;g<=v;++g)m+=-1,h*=m;return Ft(m-1)+Math.log(h)}let u=1/(t*t),f=(((((d*u+c)*u+a)*u+l)*u+o)*u+r)/t;return e+f+(t-.5)*(Math.log(t)-1)}function Do(t,e){const r=.918938533204673;let o=Math.min(t,e),l=Math.max(t,e);function a(c,d,u){let f=Math.round(u-1),v=1;for(let m=1;m<=f;++m)u+=-1,v*=u/(d+u);return c+Math.log(v)+(Dt(d)+(Dt(u)-Es(d,u)))}if(o<8){if(o<1)return l<8?Dt(o)+(Dt(l)-Dt(o+l)):Dt(o)+mr(o,l);let c;if(o<2)return l<=2?Dt(o)+Dt(l)-Es(o,l):l<8?(c=0,a(c,o,l)):Dt(o)+mr(o,l);if(l<=1e3){let d=Math.round(o-1);c=1;for(let u=1;u<=d;++u){o+=-1;let f=o/l;c*=f/(f+1)}return c=Math.log(c),l>=8?c+Dt(o)+mr(o,l):a(c,o,l)}else{let d=Math.round(o-1);c=1;for(let u=1;u<=d;++u)o+=-1,c*=o/(o/l+1);return log(c)-d*log(l)+(Dt(o)+mr(o,l))}}else{let c=Gn(o,l),d=o/l,u=-(o-.5)*Math.log(d/(d+1)),f=l*gr(d);return u>f?Math.log(l)*-.5+r+c-f-u:Math.log(l)*-.5+r+c-u-f}}function Cs(t){return(t==0?1024:-300)*.69314718055995*.99999}function Jr(t){const e=.0566749439387324,r=.0456512608815524,o=.333333333333333,l=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,d=.354508718369557;let u,f,v,m,h;return t<-.39||t>.57?(m=t+.5+.5,t-Math.log(m)):(t<-.18?(u=t+.3,u/=.7,h=e-u*.3):t>.18?(u=t*.75-.25,h=r+u/3):(u=t,h=0),f=u/(u+2),v=f*f,m=((a*v+l)*v+o)/((d*v+c)*v+1),v*2*(1/(1-f)-f*m)+h)}function gr(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,o=-.0178874546012214,l=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let d=t/(t+2),u=d*d,f=(((o*u+r)*u+e)*u+1)/(((c*u+a)*u+l)*u+1);return d*2*f}function Sc(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],l=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],d=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,f,v,m,h;if(v=Math.abs(t),v<=.5)return u=t*t,h=(((r[0]*u+r[1])*u+r[2])*u+r[3])*u+r[4]+1,m=((o[0]*u+o[1])*u+o[2])*u+1,t*(h/m);if(v<=4){h=((((((l[0]*v+l[1])*v+l[2])*v+l[3])*v+l[4])*v+l[5])*v+l[6])*v+l[7],m=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7];let b=.5-Math.exp(-t*t)*h/m+.5;return t<0?-b:b}if(v>=5.8)return t>0?1:-1;f=t*t,u=1/f,h=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],m=(((d[0]*u+d[1])*u+d[2])*u+d[3])*u+1,u=(e-h/(f*m))/v;let g=.5-Math.exp(-f)*u+.5;return t<0?-g:g}function Nc(t){const e=914041914819518e-24,r=.0238082361044469,o=-.499999999085958,l=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+l)*t+o)*t+1));{let d=Math.exp(t);return t>0?d*(.5-1/d+.5):d-.5-.5}}function fn(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function Tc(t){const e=.785398163397448,r=1.4616321449683622,o=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],l=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let d,u,f,v,m,h,g,b,p,_,w,y,C;if(w=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),w>v&&(w=v),C=1e-9,b=0,t<.5){if(fabs(t)<=C){if(t==0)return 0;b=-1/t}else{if(m=-t,p=e,m<=0&&(m=-m,p=-p),m>=w)return 0;if(f=Math.round(m),m-=f,f=Math.round(m*4),m=(m-f*.25)*4,u=f/2,u+u!=f&&(m=1-m),h=e*m,d=u/2,d+d!=u&&(p=-p),u=(f+1)/2,d=u/2,d+=d,d==u){if(h==0)return 0;b=p*(cos(h)/sin(h)*4)}else b=p*(sin(h)/cos(h)*4)}t=1-t}if(t<=3){g=t,y=o[0]*t;for(let k=1;k<=5;++k)g=(g+l[k-1])*t,y=(y+o[k])*t;return g=(y+o[6])/(g+l[5]),_=t-r,g*_+b}if(t<w){m=1/(t*t),g=m,y=a[0]*m;for(let k=1;k<=3;++k)g=(g+c[k-1])*m,y=(y+a[k])*m;b=y/(g+c[3])-.5/t+b}return b+log(t)}function Pc(t,e,r,o){let l,a,c,d,u,f;if(t>o*.001){if(d=t*Math.log(r),d<Math.exparg(1))return 0;l=Math.exp(d)}else l=1;for(l*=e/t,f=o/t,u=t+1,d=r,c=d/u,u+=1,d=r*d,a=d/u,c+=a;Math.abs(r)>f;)u+=1,d=r*d,a=d/u,c+=a;return l*=t*c+1,l}function Ic(t,e,r,o){const l=.577215664901533;let a,c,d,u,f,v,m=e*r;for(f=r-m,c=e*o<=.02?Math.log(r)+Tc(e)+l+f:Math.log(m)+l+f,a=o*5*Math.abs(c),d=1,u=0,d+=1,f*=r-m/d,v=f/d,u+=v;Math.abs(v)>a;)d+=1,f*=r-m/d,v=f/d,u+=v;return-t*(c+u)}function zo(t,e,r,o){let l,a,c,d,u,f,v,m,h;if(r==0)return 0;if(v=Math.min(t,e),v>=1)f=t*Math.log(r)-Do(t,e),a=Math.exp(f)/t;else if(m=Math.max(t,e),m<8)if(m<=1){if(a=Math.pow(r,t),a==0)return a;h=t+e,h>1?(u=t+e-1,f=(Qe(u)+1)/h):f=Qe(h)+1,c=(Qe(t)+1)*(Qe(e)+1)/f,a*=c*(e/h)}else{if(u=Ft(v),l=Math.round(m-1),l>=1){c=1;for(let w=1;w<=l;++w)m+=-1,c*=m/(v+m);u+=Math.log(c)}f=t*Math.log(r)-u,m+=-1,h=v+m,h>1?(u=v+m-1,d=(Qe(u)+1)/h):d=Qe(h)+1,a=Math.exp(f)*(v/t)*(Qe(m)+1)/d}else u=Ft(v)+mr(v,m),f=t*Math.log(r)-u,a=v/t*Math.exp(f);if(a==0||t<=o*.1)return a;let g=o/t,b=0,p=0,_;for(c=1,b+=1,c*=(.5-e/b+.5)*r,_=c/(t+b),p+=_;b<1e7&&Math.abs(_)>g;)b+=1,c*=(.5-e/b+.5)*r,_=c/(t+b),p+=_;return t*p>-1?a*=t*p+1:a=0,a}function Xn(t,e,r,o,l,a){let c,d,u,f,v,m=t+e,h=t+1;if(l>1&&t>=1&&m>=h*1.1?(u=Math.round(Math.abs(Cs(1))),d=Math.round(Cs(0)),u>d&&(u=d),f=Math.exp(-u)):(u=0,f=1),c=jc(u,t,e,r,o)/t,l==1||c==0)return c;let g=l-1,b=f;if(d=0,e>1){if(o>1e-4){let p=(e-1)*r/o-t;p>=1&&(d=p<g?Math.round(p):g)}else d=g;for(let p=0;p<d;++p)v=p,f*=(m+v)/(h+v)*r,b+=f}for(let p=d;p<g&&(v=p,f*=(m+v)/(h+v)*r,b+=f,!(f<=a*b));++p);return c*=b,c}function Lc(t,e,r,o,l,a){let c,d,u,f,v,m,h,g,b,p,_,w,y,C,k,A,I,N,M;if(!Number.isFinite(l)||(M=Rc(t,e,r,o),Number.isNaN(M)))return Number.NaN;if(M==0)return 0;for(c=l+1,b=e/t,p=1/t+1,C=o+1,u=0,f=1,m=t+1,w=0,y=1,k=1,A=c/p,v=p/c,u+=1,h=u/t,g=u*(e-u)*r,d=t/m,N=f*(f+b)*d*d*(g*r),d=(h+1)/(p+h+h),I=u+g/m+d*(c+u*C),f=h+1,m+=2,h=N*w+I*k,w=k,k=h,h=N*y+I*A,y=A,A=h,_=v,v=k/A,w/=A,y/=A,k=v,A=1;u<1e4&&(u+=1,h=u/t,g=u*(e-u)*r,d=t/m,N=f*(f+b)*d*d*(g*r),d=(h+1)/(p+h+h),I=u+g/m+d*(c+u*C),f=h+1,m+=2,h=N*w+I*k,w=k,k=h,h=N*y+I*A,y=A,A=h,_=v,v=k/A,!(Math.abs(v-_)<=a*v));)w/=A,y/=A,k=v,A=1;return M*v}function Rc(t,e,r,o){const l=.398942280401433;let a,c,d,u,f,v,m,h,g;if(r==0||o==0)return 0;if(m=Math.min(t,e),m<8){let b,p;if(r<=.375?(b=Math.log(r),p=gr(-r)):o>.375?(b=Math.log(r),p=Math.log(o)):(b=gr(-o),p=Math.log(o)),v=t*b+e*p,m>=1)return v-=Do(t,e),Math.exp(v);if(h=Math.max(t,e),h>=8)return u=Ft(m)+mr(m,h),m*Math.exp(v-u);if(h<=1){let w=Math.exp(v);return w==0?0:(g=t+e,g>1?(u=t+e-1,v=(Qe(u)+1)/g):v=Qe(g)+1,c=(Qe(t)+1)*(Qe(e)+1)/v,w*(m*c)/(m/h+1))}if(u=Ft(m),a=Math.round(h-1),a>=1){c=1;for(let w=1;w<=a;++w)h+=-1,c*=h/(m+h);u=Math.log(c)+u}v-=u,h+=-1,g=m+h;let _;return g>1?(u=m+h-1,_=(Qe(u)+1)/g):_=Qe(g)+1,m*Math.exp(v)*(Qe(h)+1)/_}else{let b,p,_,w;return t<=e?(b=t/e,p=b/(b+1),_=1/(b+1),w=t-(t+e)*r):(b=e/t,p=1/(b+1),_=b/(b+1),w=(t+e)*o-e),d=-w/t,u=Math.abs(d)>.6?d-Math.log(r/p):Jr(d),d=w/e,f=Math.abs(d)<=.6?Jr(d):d-Math.log(o/_),v=Math.exp(-(t*u+e*f)),l*Math.sqrt(e*p)*v*Math.exp(-Gn(t,e))}}function jc(t,e,r,o,l){const a=.398942280401433;let c,d,u,f,v,m,h,g;if(m=Math.min(e,r),m<8){let b,p;if(o<=.375?(b=Math.log(o),p=gr(-o)):l>.375?(b=Math.log(o),p=Math.log(l)):(b=gr(-l),p=Math.log(l)),v=e*b+r*p,m>=1)return v-=Do(e,r),fn(t,v);if(h=Math.max(e,r),h>=8)return u=Ft(m)+mr(m,h),m*fn(t,v-u);if(h<=1){let w=fn(t,v);return w==0?w:(g=e+r,g>1?(u=e+r-1,v=(Qe(u)+1)/g):v=Qe(g)+1,c=(Qe(e)+1)*(Qe(r)+1)/v,w*(m*c)/(m/h+1))}u=Ft(m);let _=Math.round(h-1);if(_>=1){c=1;for(let w=1;w<=_;++w)h+=-1,c*=h/(m+h);u+=Math.log(c)}return v-=u,h+=-1,g=m+h,d=g>1?(Qe(g-1)+1)/g:Qe(g)+1,m*fn(t,v)*(Qe(h)+1)/d}else{let b,p,_,w;e>r?(b=r/e,p=1/(b+1),_=b/(b+1),w=(e+r)*l-r):(b=e/r,p=b/(b+1),_=1/(b+1),w=e-(e+r)*o),-As(r/e);let y=-w/e;return u=Math.abs(y)>.6?y-Math.log(o/p):Jr(y),y=w/r,f=Math.abs(y)>.6?y-Math.log(l/_):Jr(y),v=fn(t,-(e*u+r*f)),a*Math.sqrt(r*p)*v*Math.exp(-Gn(e,r))}}function Yo(t,e,r,o,l,a){let d=Array(30),u=Array(30),f=e-.5-.5,v=t+f*.5,m=o>.375?Math.log(r):gr(-o),h=-v*m;if(e*h==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+As(Qe(e))+e*Math.log(h)+v*m,b=g-(mr(e,t)+e*Math.log(v)),p=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let _=p==0,w=l==0?0:Math.exp(Math.log(l)-b),y=Fc(e,h,g,a),C=.25/(v*v),k=m*.25*m,A=y,I=A,N=1,M=1,L=0;for(let D=1;D<=30;++D){let T=e+L;A=(T*(T+1)*A+(h+T+1)*N)*C,L+=2,N*=k,M/=L*(L+1);let F=D-1;d[F]=M;let H=0;if(D>1){let ne=e-D;for(let j=1;j<=F;++j)H+=ne*d[j-1]*u[F-j],ne+=e}u[F]=f*M+H/D;let W=u[F]*A;if(I+=W,I<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(W)<=a*(I+w))break}return l+=_?Math.exp(b+Math.log(I)):p*I,l}function Fc(t,e,r,o){const l=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-Sc(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return ks(1,a)/a*l}}else if(e<1.1){let a=3,c=e,d=e/(t+3),u=o*.1/(t+1),f;for(a+=1,c*=-(e/a),f=c/(t+a),d+=f;Math.abs(f)>u;)a+=1,c*=-(e/a),f=c/(t+a),d+=f;let v=t*e*((d/6-.5/(t+2))*e+1/(t+1)),m=t*Math.log(e),h=Qe(t),g=h+1;if(e>=.25&&t<e/2.59||m>-.13394){let b=Nc(m),p=((b+.5+.5)*v-b)*g-h;return p<=0?0:p*Math.exp(-r)}else return(.5-Math.exp(m)*g*(.5-v+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,d=e,u=e+(1-t),f=1,v,m;a=e*c+f*a,d=e*u+f*d,v=a/d,f+=1;let h=f-t;for(c=a+h*c,u=d+h*u,m=c/u;Math.abs(m-v)>=o*m;)a=e*c+f*a,d=e*u+f*d,v=a/d,f+=1,h=f-t,c=a+h*c,u=d+h*u,m=c/u;return m}}function qc(t,e,r,o){const a=1.12837916709551,c=.353553390593274,d=Array(21),u=Array(21),f=Array(21),v=Array(21);let m=t*Jr(-r/t)+e*Jr(r/e),h;if(h=Math.exp(-m),h==0)return 0;let g=Math.sqrt(m),b=g/c*.5,p=m+m,_,w,y,C;t<e?(_=t/e,w=1/(_+1),y=(e-t)/e,C=1/Math.sqrt(t*(_+1))):(_=e/t,w=1/(_+1),y=(e-t)/t,C=1/Math.sqrt(e*(_+1))),d[0]=y*.6666666666666666,f[0]=d[0]*-.5,v[0]=-f[0];let k=.5/a*ks(1,g),A=c,I=k+v[0]*C*A,N=1,M=_*_,L=1,D=C,T=b,F=p;for(let W=2;W<=20;W+=2){L*=M,d[W-1]=w*2*(_*L+1)/(W+2);let ne=W+1;N+=L,d[ne-1]=y*2*N/(W+3);for(let G=W;G<=ne;++G){let X=(G+1)*-.5;u[0]=X*d[0];for(let $=2;$<=G;++$){let ue=0;for(let K=1;K<=$-1;++K){let te=$-K;ue+=(K*X-te)*d[K-1]*u[te-1]}u[$-1]=X*d[$-1]+ue/$}f[G-1]=u[G-1]/(G+1);let Z=0;for(let $=1;$<=G-1;++$)Z+=v[G-$-1]*f[$-1];v[G-1]=-(Z+f[G-1])}k=c*T+(W-1)*k,A=c*F+W*A,T=p*T,F=p*F,D*=C;let j=v[W-1]*D*k;D*=C;let z=v[ne-1]*D*A;if(I+=j+z,Math.abs(j)+Math.abs(z)<=o*I)break}let H=Math.exp(-Gn(t,e));return a*h*H*I}function Oc(t,e,r,o){let a=0,c=0;function d(_,w,y,C){const k=zo(_,w,y,1e-15);return C?.5-k+.5:k}function u(_,w,y,C){const k=zo(w,_,y,1e-15);return C?k:.5-k+.5}function f(_,w,y,C,k,A){const I=Lc(_,w,y,C,k,15000000000000002e-30);return A?.5-I+.5:I}function v(_,w,y,C,k){let A=Math.round(w);w=w-A,w===0&&(A=A-1,w=1);let I=Xn(w,_,C,y,A,1e-15);return y<=.7?(I=I+zo(_,w,y,1e-15),k?.5-I+.5:I):(_<=15&&(A=20,I=I+Xn(_,w,y,C,A,1e-15),_=_+A),I=Yo(_,w,y,C,I,15*1e-15),k?.5-I+.5:I)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let m,h,g,b,p;if(t<=1||e<=1){if(r>.5?(p=!0,m=e,g=o,h=t,b=r):(p=!1,m=t,g=r,h=e,b=o),h<Math.min(1e-15,1e-15*m))return a=Pc(m,h,g,1e-15),p?.5-a+.5:a;if(m<Math.min(1e-15,1e-15*h)&&h*g<=1)return c=Ic(m,h,g,1e-15),p?c:.5-c+.5;if(Math.max(m,h)>1){if(h<=1)return d(m,h,g,p);if(g>=.29)return u(m,h,b,p);if(g<.1&&Math.pow(g*h,m)<=.7)return d(m,h,g,p)}else{if(m>=Math.min(.2,h)||Math.pow(g,m)<=.9)return d(m,h,g,p);if(g>=.3)return u(m,h,b,p)}let _=!1;return Math.max(m,h)>1&&h>15?c=0:(_=!0,c=Xn(h,m,b,g,20,1e-15),h+=20),c=Yo(h,m,b,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(_?c=Xn(h-n,m,b,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Yo(h,m,b,g,c,15*1e-15),a=-expm1(c),p?.5-a+.5:a):(a=.5-c+.5,p?.5-a+.5:a)}else{let _=Number.isFinite(t+e)?t>e?(t+e)*o-e:t-(t+e)*r:t*o-e*r;const w=_<0;let y,C,k,A;if(w?(_=-_,y=e,k=o,C=t,A=r):(y=t,k=r,C=e,A=o),C<40)return C*k<=.7?d(y,C,k,w):v(y,C,k,A,w);if(y>C){if(C<=100||_>C*.03)return f(y,C,k,A,_,w)}else{if(y<=100)return f(y,C,k,A,_,w);if(_>y*.03)return f(y,C,k,A,_,w)}return a=qc(y,C,_,1e-15*100),w?.5-a+.5:a}}function Ms(t){const e=t.nrows,r=t.ncols;if(e<r){const c=Ms(t.subset([],kt.seq(1,e)));return{Q:c.Q,R:Dc(c.Q,t)}}let o=zt.eye(e),l=t.t();for(let c=1;c<=r;c++)for(let d=e;d>=c+1;d--){const u=l.v.subarray((d-2)*r,d*r),f=o.v.subarray((d-2)*e,d*e),v=u.slice(),m=f.slice(),[h,g,b]=Bc(v[c-1],v[c-1+r]);for(let p=0;p<r;p++)u[p]=v[p]*h+v[p+r]*g,u[p+r]=v[p]*-g+v[p+r]*h,f[p]=m[p]*h+m[p+e]*g,f[p+e]=m[p]*-g+m[p+e]*h;for(let p=r;p<e;p++)f[p]=m[p]*h+m[p+e]*g,f[p+e]=m[p]*-g+m[p+e]*h}const a=kt.seq(1,r);return{Q:e===r?o:o.subset([],a),R:e===r?l.t():l.subset([],a).t()}}function Bc(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),d=1/c;return[d,a*d,t*c]}const r=t/e,o=Math.sqrt(1+r*r),l=1/o;return[r*l,l,e*o]}function Ss(t){return typeof t=="number"}function Vc(t,e){e===void 0&&(e=t);const r=t.nrows,o=t.ncols,l=e.nrows;e.ncols;const a=r,c=l,d=o,u=new Float64Array(a*c);for(let f=0;f<d;f++){const v=t.v.subarray(f*r,(f+1)*r),m=e.v.subarray(f*l,(f+1)*l);for(let h=0;h<c;h++){const g=u.subarray(h*a,(h+1)*a);for(let b=0;b<a;b++)g[b]+=v[b]*m[h]}}return new zt(u,a,c)}function Dc(t,e){if(e===void 0&&(e=t),!pr(t)||!pr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,o=t.ncols,l=e.nrows,a=e.ncols,c=o,d=a,u=r,f=new Float64Array(c*d);for(let v=0;v<d;v++){const m=e.v.subarray(v*l,(v+1)*l),h=f.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const b=t.v.subarray(g*r,(g+1)*r);let p=0;for(let _=0;_<u;_++)p+=b[_]*m[_];h[g]=p}}return new zt(f,c,d)}function Ns(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ce(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new zt(t.v,e,r)}function pr(t){return t&&t.constructor===zt}function zc(t,e,r){return new zt(new Float64Array(t),e,r)}const ke=class ke{constructor(e,r,o){if(!ArrayBuffer.isView(e)||e.constructor!==ke.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||o===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*o)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=o}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return ke.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const o=ke.eye(e),l=ke.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],d=e-1;for(let u=0;u<e;u++)l.v[d*e+u]=o.v[d*e+u]/c;for(let u=e-2;u>=0;u--){let f=o.getcolumn(u+1);const v=a.getcolref(u+1);for(let m=u+1;m<e;m++){const h=l.getcolumn(m+1);f=f.subtract(h.mult(v[m]))}l.v.set(f.divide(v[u]).v,u*e)}return l.t()}if(this.islowertriangular()){const o=this.diag();if(ms(o)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=ke.eye(e),a=ke.eye(e),c=this.t(),d=0,u=c.v[0];for(let f=0;f<e;f++)a.v[d*e+f]=l.v[d*e+f]/u;for(let f=1;f<e;f++){let v=l.getcolumn(f+1);const m=c.getcolref(f+1);for(let h=0;h<f;h++){const g=a.getcolumn(h+1);v=v.subtract(g.mult(m[h]))}a.v.set(v.divide(m[f]).v,f*e)}return a.t()}const r=Ms(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>ke.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>ke.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let o=0;o<e;o++)r[o]=this.getcolref(o+1)[o];return new Ce(r)}t(){const e=this.nrows,r=this.ncols,o=new ke.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const a=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let c=0;c<this.nrows;c++)o[c*r+l]=a[c]}return new ke(o,r,e)}for(let l=0;l<this.nrows;l++){const a=o.subarray(l*r,(l+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+l]}return new ke(o,r,e)}dot(e){if(Ne(e))return new ke(Ho(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(pr(e))return new ke(Ho(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,o){if(pr(e))return new ke(Wo(this.v,e.v,r),this.nrows,this.ncols);if(Ss(e))return new ke(Uo(this.v,e,r),this.nrows,this.ncols);if(!Ne(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(o===void 0&&(o=e.length===this.ncols?2:1),o===2&&e.length===this.ncols){const l=new ke.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Uo(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new ke(l,this.nrows,this.ncols)}if(o===1&&e.length===this.nrows){const l=new ke.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Wo(this.getcolref(a+1),e.v,r),a*this.nrows);return new ke(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e,r){if(r===void 0&&(r=2),r==2){const o=this.ncols,l=new ke.valuesConstructor(o);for(let a=0;a<o;a++)l[a]=e(this.getcolref(a+1));return new Ce(l)}if(r==1)return this.t().apply(e,2);if(r==0){const o=this.v.length,l=new ke.valuesConstructor(o);for(let a=0;a<o;a++)l[a]=e(this.v[a]);return new ke(l,this.nrows,this.ncols)}}replace(e,r,o){typeof r=="number"&&(r=[r]),r.length===0&&(r=kt.seq(1,this.nrows)),Yt(r)||(r=Wt(r)),typeof o=="number"&&(o=[o]),o.length===0&&(o=kt.seq(1,this.ncols)),Yt(o)||(o=Wt(o));const l=r.length,a=o.length;if(Qr(r)<1||Ar(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Qr(o)<1||Ar(o)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<o.length;c++){const d=e.getcolref(c+1),u=(o.v[c]-1)*this.nrows;for(let f=0;f<r.length;f++){const v=r.v[f];this.v[u+v-1]=d[f]}}return this}copy(){return new ke(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Ce.valuesConstructor(this.ncols);for(let o=0;o<this.ncols;o++)r[o]=this.getcolref(o+1)[e-1];return new Ce(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ce(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Wt([e])),typeof r=="number"&&(r=Wt([r])),Array.isArray(e)&&(e=e.length===0?null:Wt(e)),Array.isArray(r)&&(r=r.length===0?null:Wt(r)),e!==null&&!Yt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Yt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Qr(e)<1||Ar(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Qr(r)<1||Ar(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const d=r.length,u=this.nrows,f=new ke.valuesConstructor(u*d);for(let v=0;v<r.length;v++)f.set(this.v.slice((r.v[v]-1)*this.nrows,r.v[v]*this.nrows),v*this.nrows);return new ke(f,u,d)}if(r==null)return this.t().subset(r,e).t();const o=e.length,l=r.length,a=new ke.valuesConstructor(o*l);let c=new ke.valuesConstructor(o);for(let d=0;d<l;d++){const u=this.v.subarray((r.v[d]-1)*this.nrows,r.v[d]*this.nrows);for(let f=0;f<o;f++)c[f]=u[e.v[f]-1];a.set(c,d*o)}return new ke(a,o,l)}toString(e){function r(c,d){return" ".repeat(d-c.length)+c}e===void 0&&(e=2),this.ncols;const o=Math.round(Math.abs(Math.log10(Ar(this.v))))+e+3;let l="";const a=this.t();for(let c=1;c<=a.ncols;c++)l+=Array.from(a.getcolref(c)).map(d=>r(d.toFixed(e),o)).join(" ")+`
`;return l}toCSV(e,r,o,l){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=l!=null&&l.length>0,c=o!=null&&o.length>0;if(a&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&o.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const d=this.t();let u=c?o.join(e)+`
`:"";for(let f=1;f<=d.ncols;f++)u=u+(a?l[f-1]+e:"")+d.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,o,l){return Ns(ws(e*r,o,l),e,r)}static rand(e,r,o,l){return Ns(_s(e*r,o,l),e,r)}static eye(e,r){r===void 0&&(r=e);const o=new Float64Array(e*r);for(let l=0;l<Math.min(e,r);l++)o[l*e+l]=1;return new ke(o,e,r)}static diagm(e){if(!Ne(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,o=new Float64Array(r*r);for(let l=0;l<r;l++)o[l*r+l]=e.v[l];return new ke(o,r,r)}static zeros(e,r){return r===void 0&&(r=e),new ke(new Float64Array(e*r),e,r)}static ones(e,r){return ke.fill(1,e,r)}static fill(e,r,o){o===void 0&&(o=r);const l=new Float64Array(r*o);for(let a=0;a<l.length;a++)l[a]=e;return new ke(l,r,o)}static outer(e,r,o){if(Array.isArray(e)&&(e=We(e)),Array.isArray(r)&&(r=We(r)),!Ne(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ne(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=ke.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],d=l.getcolref(a+1);for(let u=0;u<e.length;u++)d[u]=o(e.v[u],c)}return l}static parseCSV(e,r,o,l){function a(_){return _.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let d=e.split(/\n/),u=[],f=0;const v=d[0].split(r);(o||o===void 0&&a(v))&&(u=v,f=1),d=d.filter(_=>_.trim().length>1);let m=[],h=0;l&&(h=1);const g=d.length-f,b=v.length-h;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const p=ke.zeros(b,g);for(let _=f;_<g+f;_++){const w=d[_].split(r);let y;if(l?(m[_-f]=w[0],y=w.slice(1).map(C=>Number.parseFloat(C.trim().replace(c,".")))):y=w.map(C=>Number.parseFloat(C.trim().replace(c,"."))),y.some(C=>Number.isNaN(C)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(y.length!=b)throw Error("Wrong number of values in row #"+_);p.v.set(new Float64Array(y),(_-f)*b)}return{values:p.t(),header:u,labels:m,sep:r,dec:c}}};Rr(ke,"valuesConstructor",Float64Array),Rr(ke,"TOLERANCE",Math.pow(10,-9));let zt=ke;function Ne(t){return t&&t.constructor===Ce}function We(t){return new Ce(new Float64Array(t))}const $e=class $e{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new kt.valuesConstructor(this.length);let o=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[o]=l+1,o=o+1);return new kt(r.subarray(0,o))}filter(e){const r=new $e.valuesConstructor(this.length);let o=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[o]=this.v[l],o=o+1);return new $e(r.subarray(0,o))}shuffle(){return new $e(Ls(this.v))}sort(e){return new $e(Rs(this.v,e))}sortind(e){return new kt(js(this.v,e))}rep(e){return Ps(this,e)}repeach(e){return Is(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=kt.seq(1,this.length)),Yt(r)||(r=Wt(r));const o=r.length;if(Qr(r)<1||Ar(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==o)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<r.length;l++){const a=r.v[l];this.v[a-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=Wt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?kt.bool2ind(e):Wt(e)),!Yt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=$e.zeros(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");o.v[l]=this.v[e.v[l]-1]}return o}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new $e(this.v.slice(e-1,r))}copy(){return new $e(this.v.slice())}dot(e){return e===void 0&&(e=this),Ho(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Ne(e))return new $e(Wo(this.v,e.v,r));if(Ss(e))return new $e(Uo(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,o)=>r+o)}subtract(e){return this.op(e,(r,o)=>r-o)}mult(e){return this.op(e,(r,o)=>r*o)}divide(e){return this.op(e,(r,o)=>r/o)}apply(e){const r=this.v.length,o=$e.zeros(r);for(let l=0;l<r;l++)o.v[l]=e(this.v[l]);return o}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),o=new $e.valuesConstructor(r);let l=0;for(const a of e)typeof a=="number"?(o[l]=a,l+=1):(o.set(Ne(a)?a.v:new $e.valuesConstructor(a),l),l+=typeof a=="number"?1:a.length);return new $e(o)}static seq(e,r,o){return Ts(e,r,o,$e)}static randn(e,r,o){return ws(e,r,o)}static rand(e,r,o){return _s(e,r,o)}static zeros(e){return new $e(new $e.valuesConstructor(e))}static ones(e){return $e.fill(1,e)}static fill(e,r){const o=new $e.valuesConstructor(r);for(let l=0;l<o.length;l++)o[l]=e;return new $e(o)}};Rr($e,"valuesConstructor",Float64Array);let Ce=$e;function Yt(t){return t.constructor===kt}function Wt(t){return new kt(new Int32Array(t))}const lt=class lt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new lt.valuesConstructor(this.length);let o=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[o]=l+1,o=o+1);return new lt(r.subarray(0,o))}filter(e){const r=new lt.valuesConstructor(this.length);let o=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[o]=this.v[l],o=o+1);return new lt(r.subarray(0,o))}shuffle(){return new lt(Ls(this.v))}sort(e){return new lt(Rs(this.v,e))}sortind(e){return new lt(js(this.v,e))}rep(e){return Ps(this,e)}repeach(e){return Is(this,e)}subset(e){if(typeof e=="number"&&(e=Wt([e])),Array.isArray(e)&&(e=Wt(e)),!Yt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,o=new lt.valuesConstructor(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");o[l]=this.v[e.v[l]-1]}return new lt(o)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new lt(this.v.slice(e-1,r))}static seq(e,r,o){return Ts(e,r,o,lt)}static ones(e){return lt.fill(1,e)}static fill(e,r){const o=new lt.valuesConstructor(r);for(let l=0;l<o.length;l++)o[l]=e;return new lt(o)}static bool2ind(e){let r=0;const o=new lt.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(o[r]=l+1,r=r+1);return new lt(o.subarray(0,r))}};Rr(lt,"valuesConstructor",Int32Array);let kt=lt;function Ts(t,e,r,o){r===void 0&&(r=t<=e?1:-1);const l=Math.floor((e-t)/r)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const a=new o.valuesConstructor(l);for(let c=0;c<l;c++)a[c]=t+c*r;return new o(a)}function Ps(t,e){const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let l=1;l<=e;l++)for(let a=0;a<t.length;a++)o[(l-1)*t.length+a]=t.v[a];return new t.constructor(o)}function Is(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,o=new t.constructor.valuesConstructor(r);for(let l=0;l<t.length;l++)for(let a=0;a<e;a++)o[l*e+a]=t.v[l];return new t.constructor(o)}function Wo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const o=new t.constructor(t.length);for(let l=0;l<t.length;l++)o[l]=r(t[l],e[l]);return o}function Uo(t,e,r){const o=new t.constructor(t.length);for(let l=0;l<t.length;l++)o[l]=r(t[l],e);return o}function Ho(t,e,r,o,l,a){if(o!==l)throw Error("_dot: matrix dimensions do not much.");const c=r,d=a,u=o,f=new t.constructor(c*d);for(let v=0;v<d;v++){const m=e.subarray(v*l,(v+1)*l),h=f.subarray(v*c,(v+1)*c);for(let g=0;g<u;g++){const b=m[g],p=t.subarray(g*r,(g+1)*r);for(let _=0;_<c;_++)h[_]+=p[_]*b}}return f}function Ls(t){let e=t.slice(),r=e.length,o,l;for(;r;)l=Math.floor(Math.random()*r--),o=e[r],e[r]=e[l],e[l]=o;return e}function Rs(t,e=!1){return e?t.slice().sort((r,o)=>o-r):t.slice().sort((r,o)=>r-o)}function js(t,e=!1){const r=kt.seq(1,t.length).v;return e?r.sort((o,l)=>t[l-1]-t[o-1]):r.sort((o,l)=>t[o-1]-t[l-1])}function Yc(t,e,r){return 5*t*e+e+4*r*e}function Wc(t,e){return 2+2*t+t*e+17*e}function It(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const o=t.ncols,l=t.ncomp;let a,c;switch(e){case"mX":a=2,c=o;break;case"sX":a=2+o,c=o;break;case"loadings":case"xloadings":a=2+2*o+(r-1)*o,c=o;break;case"P":a=2+2*o,c=r*o;break;case"eigenvals":case"xeigenvals":a=2+2*o+o*l,c=l;break;case"cq0":a=2+2*o+o*l+l,c=l;break;case"cNq":a=2+2*o+o*l+2*l,c=l;break;case"rq0":a=2+2*o+o*l+3*l,c=l;break;case"rNq":a=2+2*o+o*l+4*l,c=l;break;case"ch0":a=2+2*o+o*l+5*l,c=l;break;case"cNh":a=2+2*o+o*l+6*l,c=l;break;case"rh0":a=2+2*o+o*l+7*l,c=l;break;case"rNh":a=2+2*o+o*l+8*l,c=l;break;case"cr0":a=2+2*o+o*l+9*l,c=l;break;case"cNr":a=2+2*o+o*l+10*l,c=l;break;case"rr0":a=2+2*o+o*l+11*l,c=l;break;case"rNr":a=2+2*o+o*l+12*l,c=l;break;case"cg0":a=2+2*o+o*l+13*l,c=l;break;case"cNg":a=2+2*o+o*l+14*l,c=l;break;case"rg0":a=2+2*o+o*l+15*l,c=l;break;case"rNg":a=2+2*o+o*l+16*l,c=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function dn(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const o=t.ncols,l=t.nrows,a=t.ncomp;let c,d;switch(e){case"scores":case"xscores":c=(r-1)*l,d=l;break;case"hdist":c=l*a+(r-1)*l,d=l;break;case"qdist":c=2*l*a+(r-1)*l,d=l;break;case"xcumexpvar":case"cumexpvar":c=3*l*a,d=a;break;case"fdistc":c=3*l*a+a+(r-1)*l,d=l;break;case"fdistr":c=4*l*a+a+(r-1)*l,d=l;break;case"gdist":c=5*l*a+a+(r-1)*o,d=o;break;case"rdist":c=5*l*a+a+o*a+(r-1)*o,d=o;break;case"idistc":c=5*l*a+a+2*o*a+(r-1)*o,d=o;break;case"idistr":c=5*l*a+a+3*o*a+(r-1)*o,d=o;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+d)}function Go(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let o=0;o<t.length;o++){const l=t[o];if(l<e||l>r)return!1}return!0}function Uc(t,e,r,o,l,a,c){if(!pr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const d=a&&Array.isArray(a)?a.length:0;if(!Go(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!Go(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const f=e.nrows-d,v=e.ncols-u;if(f<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(o===void 0&&(o=!0),l===void 0&&(l=!1),r===void 0&&(r=Math.min(e.nrows-d-1,e.ncols-u)),r<1||r>Math.min(f-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);let h=null;if(d>0){const C=new Int32Array(a);h=t._malloc(C.length*C.BYTES_PER_ELEMENT),t.HEAP32.set(C,h/C.BYTES_PER_ELEMENT)}let g=null;if(u>0){const C=new Int32Array(c);g=t._malloc(C.length*C.BYTES_PER_ELEMENT),t.HEAP32.set(C,g/C.BYTES_PER_ELEMENT)}const b=Wc(v,r),p=Float64Array,_=t._malloc(b*p.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[m,e.nrows,e.ncols,r,o,l,_,h,d,g,u])!==1)throw new Error("pca_fit: PCA failed.");const y=t.HEAPF64.slice(_/p.BYTES_PER_ELEMENT,_/p.BYTES_PER_ELEMENT+b);return t._free(m),t._free(_),h&&t._free(h),g&&t._free(g),{class:["pcamodel"],v:y,ncomp:r,nrows:f,ncols:v,exclvars:c,center:o,scale:l}}function Hc(t,e,r,o){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!pr(r))throw new Error("pca_predict: X must be a matrix.");o||(o=[]);const l=o&&Array.isArray(o)?o.length:0;if(!Go(o,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=r.nrows-l;r.ncols===e.ncols&&(a=0);const d=r.ncols-a;if(c<1)throw new Error("pca_predict: X must have at least 1 row.");if(d!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const u=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,u/r.v.BYTES_PER_ELEMENT);let f=null;if(l>0){const M=new Int32Array(o);f=t._malloc(M.length*M.BYTES_PER_ELEMENT),t.HEAP32.set(M,f/M.BYTES_PER_ELEMENT)}let v=null;if(a>0){const M=new Int32Array(e.exclvars);v=t._malloc(M.length*M.BYTES_PER_ELEMENT),t.HEAP32.set(M,v/M.BYTES_PER_ELEMENT)}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const h=Yc(r.nrows-l,e.ncomp,r.ncols-a),g=Float64Array,b=t._malloc(h*g.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[u,r.nrows,r.ncols,m,b,f,l,v,a])!==1)throw new Error("pca_predict: PCA prediction failed.");const _=t.HEAPF64.slice(b/g.BYTES_PER_ELEMENT,b/g.BYTES_PER_ELEMENT+h);t._free(u),t._free(m),t._free(b),f&&t._free(f),v&&t._free(v);const w={class:["pcares"],v:_,ncomp:e.ncomp,nrows:c,ncols:d,outliers:o,exclvars:e.exclvars,center:e.center,scale:e.scale},y=new Array(e.ncomp),C=new Array(e.ncomp),k=new Array(e.ncomp),A=new Array(e.ncomp),I=new Array(e.ncomp),N=dn(w,"xcumexpvar");I[0]=1,A[0]=N[0],k[0]=1-N[0],y[0]=N[0],C[0]=1-N[0];for(let M=1;M<e.ncomp;M++)I[M]=M+1,A[M]=N[M],k[M]=1-N[M],y[M]=N[M]-N[M-1],C[M]=1-y[M];return w.stat={components:I,resvar:C,expvar:y,cumexpvar:A,cumresvar:k},w}function Gc(t,e){let r,o,l;if(e.length>0){const a=t.values.nrows,c=t.objindices,d=a-e.length;r=Array(d),o=Array(d),l=Array(d);let u=0;for(let f=0;f<a;f++)e.includes(f)||(r[u]=c[f],o[u]=t.classes[f],l[u]=t.objlabels[f],u=u+1)}else r=t.objindices,l=t.objlabels,o=t.classes;return[r,l,o]}function Fs(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function qs(t,e,r,o){const[l,a,c]=Gc(r,o),d=Hc(t,e,r.values,o);d.hash=Fs(),d.objindices=l,d.objlabels=a,d.classes=c,d.classNames=r.classNames,d.varlabels=r.varlabels,d.eigenvals=It(e,"eigenvals"),d.cNh=It(e,"cNh"),d.cNq=It(e,"cNq"),d.ch0=It(e,"ch0"),d.cq0=It(e,"cq0"),d.rNh=It(e,"rNh"),d.rNq=It(e,"rNq"),d.rh0=It(e,"rh0"),d.rq0=It(e,"rq0");const u=e.nrows;return d.T2lim=2*(u-1)/(u-2)*xs(.95,2,u-2),d}function Xc(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function vn(t){return t.some(e=>Number.isNaN(e))}function Cr(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Os(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Kc(t,e,r,o,l,a,c,d=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let v=Os(t);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");const m=v[0].split(e);if(m.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,g;const b=r!=="no";(b||b===void 0&&vn(firstRow))&&(g=m,h=1);const p=v.length-h;if(p<1)throw new Error("Data file should contain at least 1 row with values.");let _,w,y,C=Array(p);o?(_=b?Cr(g[0]):"",y=Array(p),w=1):(_="",y=[],w=0);let k,A=[],I;l?(k=b?Cr(g[w]):"",I=Array(p),w=w+1):(k="",I=[]);const N=m.length-w;if(N<1)throw new Error("Data file should contain at least 1 column with values.");const M=zt.zeros(N,p);for(let j=h;j<p+h;j++){const z=j-h;C[z]=z;let G=v[j].split(e);if(o&&(y[z]=G[0],G.shift()),l){const Z=G[0];I[z]=Z,G.shift(),(A.length===0||A.indexOf(Z)<0)&&A.push(Z)}const X=f==="."?G.map(Z=>Number.parseFloat(Z.trim())):G.map(Z=>Number.parseFloat(Z.trim().replace(f,".")));if(X.some(Z=>Number.isNaN(Z)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(X.length!=N)throw new Error("Wrong number of values in row #"+j);M.v.set(new Float64Array(X),(j-h)*N)}if(!o||y.length!==p){y=Array(p);for(let j=0;j<p;j++)y[j]="O"+(j+1)}y=y.map(j=>Cr(j)),I=I.map(j=>Cr(j)),A=A.map(j=>Cr(j));let L,D=Array(N),T=Array(N);if(g&&g.length===N+w){L=g.map(j=>Cr(j)).slice(w);for(let j=0;j<N;j++)D[j]=j,T[j]=j+1}else{L=Array(N);for(let j=0;j<N;j++)D[j]=j,L[j]="V"+(j+1),T[j]=j+1}let F;if(r==="values"){if(F=f==="."?L.map(j=>Number.parseFloat(j.trim())):L.map(j=>Number.parseFloat(j.trim().replace(f,"."))),F.some(j=>Number.isNaN(j)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else F=T;Array.isArray(F)||(F=[]),a||(a=""),c||(c=""),a=F.length>0&&a.length>0?a:"Variables",c=F.length>0&&c.length>0?c:"";const H=a+(c.length>0?", "+c:""),W=F[1]<F[0];return{values:M.t(),header:r,hasLabels:o,hasClassNames:l,labelsVarname:_,classLabelsVarname:k,objlabels:y,objindices:C,varlabels:L,varvalues:F,varindices:D,varrev:W,classes:I,responses:null,classNames:A,sep:e,dec:f,varvaluesName:a,varvaluesUnits:c,varAxisTitle:H}}function Qc(t){if(vn(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let o=2;o<e;o++){let l=[];for(let f=1;f<t.length;f++)l.push(t[f][o]);const a=t[0][o],c=Yn(l),d=jo(l),u=Math.abs((a-c)/d);r.push(u)}return r.every(o=>o>5)}function Jc(t){const e=",",r=t[0].split(e),o=t[1].split(e),l=r.length,a=o.length,c=";",d=t[0].split(c),u=t[1].split(c),f=d.length,v=u.length;let m,h;if(l>1&&a>1&&l===a&&l>f)h=e,m=l;else if(f>1&&v>1&&f===v)h=c,m=a;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",m]}function Zc(t){const e=Os(t),r=e.length;if(r<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,l,a]=Jc(e),c=Math.min(a,5),d=Math.min(r,5);let u=e.slice(0,d).map(N=>N.split(o).slice(0,c));u=u.map(N=>N.map(M=>Cr(M)));const f=u.map(N=>Xc(N.slice(),l));for(let N=1;N<d;N++)if(vn(f[N].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const v=Qc(f);let m=0;const h=v?1:0,g=h+1,b=u[h][0],p=u[g][0],_=f[h][0],w=f[g][0],y=f[h][1],C=f[g][1];let k=!1,A=!1;if(Number.isNaN(_)&&Number.isNaN(w)&&b!==p?(k=!0,m=m+1):Number.isNaN(y)&&Number.isNaN(C)&&b!==p&&(k=!0,A=!0,m=m+2),!A){const N=k?1:0,M=f[h][N],L=f[g][N];A=vn([M,L]),m=m+A}let I="no";if(v){m>0?u[0].slice(m):u[0];const N=m>0?f[0].slice(m):f[0];I=vn(N)?"labels":"values"}return[o,k,A,I]}function Bs(t,e){return pr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ne(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function Vs(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return zc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return We(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Xo(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${o}${l}${a}${c}`}function Ds(t,e,r,o,l){(!o||!Array.isArray(o))&&(o=[]);const a=e.values.nrows,c=e.values.ncols,d=o.length,u=a-d,f=t.ncomp,v=4,m=Math.max(f,v),h=Array(m).fill(""),g=f>m?Array(m-f).fill(""):[],b=Array(f).fill(0).map((I,N)=>"PC"+(N+1)),p=e.sep;function _(I,N,M){w+=`
`,w+=[I+": ","",...h].join(p)+`
`,w+=["object","group","outlier",...b,...g].join(p)+`
`;const L=t.v.subarray(N,N+f*u);for(let D=0;D<a;D++){const T=e.classes?e.classes[D]:"-";if(d>0&&o.includes(D)){w+=[M[D],T,"yes",...Array(f).fill("-"),...g].join(p)+`
`;continue}const F=Array(f);for(let H=0;H<f;H++)F[H]=L[H*f+D];w+=[M[D],T,"",...F,g].join(p)+`
`}w+=`
`}let w="";if(w+=["Number of components:",f,...h].join(p)+`
`,w+=["Center: ",t.center,...h].join(p)+`
`,w+=["Scale: ",t.scale,...h].join(p)+`
`,w+=`
`,w+=["Statistics: ","",...h].join(p)+`
`,l){const I=v>m?Array(m-v-1).fill(""):[];w+=["","PC","Expvar","Cumexpvar","Resvar","Cumresvar","Eigenvalues",...I].join(e.sep)+`
`;for(let N=0;N<f;N++)w+=["",N+1,t.stat.expvar[N],t.stat.cumexpvar[N],t.stat.resvar[N],t.stat.cumresvar[N],t.eigenvals[N],...I].join(e.sep)+`
`}else{const I=v>m?Array(m-v).fill(""):[];w+=["","PC","Expvar","Cumexpvar","Resvar","Cumresvar",...I].join(p)+`
`;for(let N=0;N<f;N++)w+=["",N+1,t.stat.expvar[N],t.stat.cumexpvar[N],t.stat.resvar[N],t.stat.cumresvar[N],...I].join(p)+`
`}if(w+=`
`,l){w+=`
`,w+=["Loading, center and scale values: ","",...h].join(p)+`
`,w+=["variable","center","scale",...b,...g].join(p)+`
`;const I=l.v.subarray(2,2+c),N=l.v.subarray(2+c,2+c*2),M=l.v.subarray(2+c*2,u+c*2+f*c);for(let L=0;L<c;L++){const D=Array(f);for(let T=0;T<f;T++)D[T]=M[T*f+L];w+=[e.varlabels[L],I[L],N[L],...D,g].join(p)+`
`}w+=`
`}_("Scores",0,e.objlabels),_("Score distances, h",f*u,e.objlabels),_("Orthogonal distances, q",f*u*2,e.objlabels),e.dec!=="."&&(w=w.replace(/\./g,e.dec)),w=["Data filename:",e.fileName,...h].join(e.sep)+`
`+w;let y=["PCA results ("+r+")","https://mda.tools/pca/",...h].join(e.sep)+`

`;const C=new Blob([y+w],{type:"text/csv"}),k=window.URL.createObjectURL(C),A=document.createElement("a");A.setAttribute("href",k),A.setAttribute("download",`pca-results-${r}.csv`),A.click()}function $c(t){const e=new Blob([JSON.stringify({center:t.center,class:t.class,hash:t.hash,exclvars:t.exclvars,ncols:t.ncols,ncomp:t.ncomp,nrows:t.nrows,prep:t.prep,scale:t.scale,v:Array.from(t.v),exclvars:t.exclvars,varlabels:t.varlabels,varvalues:t.varvalues,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits})],{type:"application/json"}),r=window.URL.createObjectURL(e),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download","pca-model.json"),o.click()}var eu=J('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function qt(t,e){let r=B(e,"text",3,"button");var o=eu();o.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var l=V(o);re(()=>xe(l,r())),P(t,o)}Ze(["click"]);var tu=J('<button tabindex="0"></button>');function ru(t,e){var r=tu();r.__click=function(...o){var l;(l=e.onclick)==null||l.apply(this,o)},re(()=>{S(r,"title",e.title),S(r,"aria-label",e.title),S(r,"alt",e.title),Gr(r,`button ${e.className??""} svelte-bx9fh5`)}),P(t,r)}Ze(["click"]);function hn(t,e){let r=B(e,"title",3,"Reset");ru(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function $t(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var nu=J('<span class="label svelte-h4yni9"> </span>'),ou=J("<div><!> <!></div>");function Me(t,e){let r=B(e,"label",3,null),o=B(e,"status",3,""),l=B(e,"colors",3,""),a=B(e,"labelWidth",3,12);var c=ou(),d=V(c);{var u=v=>{var m=nu(),h=V(m);re(()=>{S(m,"style",`flex-basis:${a()??""}ch;`),xe(h,r())}),P(v,m)};U(d,v=>{r()&&v(u)})}var f=q(d,2);Er(f,()=>e.children??at),re(()=>{Gr(c,`control-element ${o()??""} svelte-h4yni9`),S(c,"style",l())}),P(t,c)}const zs=(t,e,r,o)=>{const l=e(t);l<0||l>1||O(r,ee(l*100>s(o)-5&&l*100<s(o)+5))},Ys=(t,e,r,o,l)=>{O(e,!1);const a=r(t);a<0||a>1||o(l(a))},Ws=(t,e,r,o,l)=>{if(!s(e))return;const a=r(t);a<0||a>1||o(l(a))},lu=(t,e,r,o,l)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>l()?l():e()+r());return}};var su=J('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div class="range-slider svelte-vhx0r0"><span class="range-value svelte-vhx0r0"> </span></div></div>');function au(t,e){ge(e,!0);let r=B(e,"min",7,0),o=B(e,"max",3,100),l=B(e,"value",31,()=>ee(r())),a=B(e,"decNum",3,1),c=B(e,"step",19,()=>+((o()-r())/100).toFixed(4));ze(()=>{l()<r()&&l(r()),l()>o()&&l(o()),r()>o()&&r(o())});let d=le(void 0),u=le(void 0),f=le(!1);const v=C=>{const k=r()+C*(o()-r());return+(Math.round(k/c())*c()).toFixed(4)},m=C=>{const k=s(d).getBoundingClientRect(),A=s(u).getBoundingClientRect(),I=k.x,N=A.x+A.width;return(C.clientX-I)/(N-I)},h=C=>{O(f,!1)},g=C=>{let k=l()+c()*C.deltaY*.5;k<r()&&(k=r()),k>o()&&(k=o()),l(+(Math.round(k/c())*c()).toFixed(4)),C.preventDefault()},b=E(()=>r()===o()?100:(l()-r())/(o()-r())*100);var p=su();p.__keydown=[lu,l,c,r,o],p.__mousemove=[Ws,f,m,l,v],p.__mousedown=[zs,m,f,b],p.__mouseup=[Ys,f,m,l,v],p.__touchmove=[Ws,f,m,l,v],p.__touchstart=[zs,m,f,b],p.__touchend=[Ys,f,m,l,v];var _=V(p),w=V(_),y=V(w);Xr(_,C=>O(d,C),()=>s(d)),Xr(p,C=>O(u,C),()=>s(u)),re(C=>{S(p,"aria-valuenow",l()),S(p,"aria-valuemin",r()),S(p,"aria-valuemax",o()),S(_,"style",`width:${s(b)??""}%`),xt(_,"range-slider_right",s(b)<50),xt(w,"range-value_right",s(b)<50),xe(y,C)},[()=>l().toFixed(a())]),vr("mousewheel",p,g),vr("mouseleave",p,h),vr("touchcancel",p,h),P(t,p),pe()}Ze(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Us=(t,e,r,o,l)=>{const a=e(t);a<0||a>1||O(r,ee(a>s(o)&&a<s(l)+s(o)))},Hs=(t,e,r,o,l)=>{O(e,!1);const a=r(t);if(a<0||a>1)return;const c=o(a);l()!==c&&l(c)},Gs=(t,e,r,o,l)=>{if(!s(e))return;const a=r(t);if(a<0||a>1)return;const c=o(a);c!=l()&&l(c)},iu=(t,e,r,o,l)=>{if(t.key==="ArrowLeft"){e(e()-r()<o()?o():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>l()?l():e()+r());return}};var cu=J('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div class="range-slider svelte-xdlm7u"><span class="range-value svelte-xdlm7u"> </span></div></div>');function br(t,e){ge(e,!0);let r=B(e,"min",3,0),o=B(e,"max",3,10),l=B(e,"value",31,()=>ee(r())),a=B(e,"step",3,1);l()<r()&&(console.error('The "value" is outside of the provided range.'),l(r())),l()>o()&&(console.error('The "value" is outside of the provided range.'),l(o())),r()>o()&&console.error("The min and max values must be distinct.");let c=le(void 0),d=le(void 0),u=le(!1);const f=E(()=>r()===o()?0:(l()-r())/(o()-r()+1)),v=E(()=>a()/(o()-r()+1)),m=E(()=>o()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${s(v)*100}%, var(--bg-color-light2, #e8e8e8) ${s(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*s(v)}%)`:"background: #f0f0f0"),h=k=>{if(k<0||k>1)return l();let A=l();return k<s(f)&&s(f)>0&&(A=l()-Math.ceil((s(f)-k)/s(v))),k>s(f)+s(v)&&s(f)+s(v)<1&&(A=l()+Math.ceil((k-(s(f)+s(v)))/s(v))),A<r()&&(A=r()),A>o()&&(A=o()),A},g=k=>{const A=s(d).getBoundingClientRect(),I=A.x,N=A.x+A.width;return(k.clientX-I)/(N-I)},b=k=>{O(u,!1)},p=k=>{let A=Math.round(l()+k.deltaY*.5*a());A<r()&&(A=r()),A>o()&&(A=o()),l(A),k.preventDefault()};var _=cu();_.__keydown=[iu,l,a,r,o],_.__mousemove=[Gs,u,g,h,l],_.__mousedown=[Us,g,u,f,v],_.__mouseup=[Hs,u,g,h,l],_.__touchmove=[Gs,u,g,h,l],_.__touchstart=[Us,g,u,f,v],_.__touchend=[Hs,u,g,h,l];var w=V(_),y=V(w),C=V(y);Xr(w,k=>O(c,k),()=>s(c)),Xr(_,k=>O(d,k),()=>s(d)),re(k=>{S(_,"aria-valuenow",l()),S(_,"aria-valuemin",r()),S(_,"aria-valuemax",o()),S(_,"style",s(m)),S(w,"style",`width: max(2px, ${s(v)*100}%);left:${s(f)*100}%;`),xt(w,"range-slider_left",s(v)<.1&&s(f)<.5),xt(w,"range-slider_right",s(v)<.1&&s(f)>=.5),xt(y,"range-value_right",s(v)<.1&&s(f)>.5),xt(y,"range-value_left",s(v)<.1&&s(f)<=.5),xe(C,k)},[()=>l().toFixed(0)]),vr("mousewheel",_,p),vr("mouseleave",_,b),vr("touchcancel",_,b),P(t,_),pe()}Ze(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const uu=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e.options.findIndex(l=>l===r());o>0&&r(e.options[o-1]);return}if(t.key==="ArrowRight"){const o=e.options.findIndex(l=>l===r());o<e.options.length-1&&r(e.options[o+1]);return}};var fu=(t,e,r)=>e(r),du=J('<button tabindex="-1"><!></button>'),vu=J('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function ut(t,e){ge(e,!0);let r=B(e,"value",31,()=>ee(e.options[0])),o=B(e,"className",3,"");var l=vu(),a=Q(l);a.__keydown=[uu,e,r],Ye(a,20,()=>e.options,d=>d,(d,u)=>{var f=du();f.__click=[fu,r,u];var v=V(f);ht(v,()=>u,!1,!1),re(()=>{Gr(f,`option option_${u??""} svelte-1i17tox`),xt(f,"selected",u==r())}),P(d,f)});var c=q(a,2);re(()=>Gr(a,`selector ${o()??""} svelte-1i17tox`)),Po(c,r),P(t,l),pe()}Ze(["keydown","click"]);function Ot(t,e){ge(e,!0);let r=B(e,"options",19,()=>["no","yes"]),o=B(e,"value",15,!1),l=le(!0);const a=E(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());ze(()=>O(l,ee(o()?r()[1]:r()[0]))),ze(()=>o(s(l)===r()[1]));var c=me(),d=Q(c);{var u=f=>{ut(f,{get options(){return s(a)},get value(){return s(l)},set value(v){O(l,ee(v))}})};U(d,f=>{s(a)&&f(u)})}P(t,c),pe()}var hu=J('<div tabindex="0" role="radiogroup" class="file-selector svelte-1k0x7uv"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function Xs(t,e){ge(e,!0);let r=B(e,"file",15),o=B(e,"message",3,"Select CSV file with dataset"),l=B(e,"acceptType",3,".csv"),a;function c(p){a&&a.files.length>0?r(a.files[0]):r(null)}function d(p){(p.type==="click"||p.type==="keydown"&&(p.code==="Space"||p.code==="Enter"))&&a.click()}function u(p){a.value=null,r(null)}var f=hu(),v=Q(f);v.__keydown=d,v.__click=d;var m=V(v),h=q(m);h.__change=c,Xr(h,p=>a=p,()=>a);var g=q(v,2);{var b=p=>{hn(p,{onclick:u})};U(g,p=>{r()&&p(b)})}re(()=>{xt(v,"selected",r()),xe(m,`${(r()?r().name:o())??""} `),S(h,"accept",l())}),P(t,f),pe()}Ze(["keydown","click","change"]);function mu(t,e,r,o){e()&&O(r,ee(e()(o())))}var gu=J('<div class="error-message svelte-1qtiwcs"> </div>'),pu=J('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function Ks(t,e){ge(e,!0);let r=B(e,"value",15,""),o=B(e,"className",3,""),l=B(e,"placeholder",3,""),a=B(e,"maxLength",3,25),c=B(e,"validator",3,null),d=le("");var u=pu(),f=V(u);f.__input=[mu,c,d,r];var v=q(f,2);{var m=h=>{var g=gu(),b=V(g);re(()=>xe(b,s(d))),P(h,g)};U(v,h=>{s(d)&&s(d).length>0&&h(m)})}re(()=>{Gr(u,`textinput ${o()??""} svelte-1qtiwcs`),xt(u,"error",s(d)&&s(d).length>0),S(f,"placeholder",l()),S(f,"maxlength",a())}),Po(f,r),P(t,u),pe()}Ze(["input"]);var bu=J('<div class="spinner svelte-n48urb"></div>');function Qs(t){var e=bu();P(t,e)}const _u=(t,e,r)=>{if(t.key==="ArrowLeft"){const o=e().findIndex(l=>l===r());o>0&&r(e()[o-1]);return}if(t.key==="ArrowRight"){const o=e().findIndex(l=>l===r());o<e().length-1&&r(e()[o+1]);return}};var wu=(t,e,r)=>e(r),yu=J('<button tabindex="-1" class="option svelte-yf64an"><!></button>'),xu=J('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an">',1);function Kn(t,e){ge(e,!0);let r=B(e,"options",19,()=>["p","l","b","h"]),o=B(e,"value",31,()=>ee(r()[0]));const l='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar"};var d=xu(),u=Q(d);u.__keydown=[_u,r,o],Ye(u,20,r,v=>v,(v,m)=>{var h=yu();h.__click=[wu,o,m];var g=V(h);ht(g,()=>l+a[m]+"</svg",!1,!1),re(()=>{S(h,"title",c[m]),xt(h,"selected",m==o())}),P(v,h)});var f=q(u,2);Po(f,o),P(t,d),pe()}Ze(["keydown","click"]),Ze(["keydown","click"]);var ku=J("<h2> </h2>"),Eu=J("<!> <!>",1),Au=J('<div class="widget"><!></div>');function Cu(t,e){ge(e,!0);let r=B(e,"title",3,""),o=B(e,"value",15),l=B(e,"labelWidth",3,13);function a(f){const v={};for(const m of Object.keys(f))v[m]=f[m].default;return v}ze(()=>{!o()&&e.options&&o(a(e.options))});var c=Au(),d=V(c);{var u=f=>{var v=Eu(),m=Q(v);{var h=b=>{Me(b,{children:(p,_)=>{var w=ku(),y=V(w);re(()=>xe(y,r())),P(p,w)},$$slots:{default:!0}})};U(m,b=>{r()&&b(h)})}var g=q(m,2);Ye(g,17,()=>Object.keys(e.options),Xe,(b,p)=>{var _=me();const w=E(()=>e.options[s(p)]);var y=Q(_);{var C=k=>{Me(k,{get label(){return s(w).label},get labelWidth(){return l()},children:(A,I)=>{var N=me(),M=Q(N);So(M,()=>s(w).el,(L,D)=>{D(L,Kr(()=>s(w).props,{get value(){return o()[s(p)]},set value(T){o(o()[s(p)]=T,!0)}}))}),P(A,N)},$$slots:{default:!0}})};U(y,k=>{s(w).hidden||k(C)})}P(b,_)}),P(f,v)};U(d,f=>{o()&&f(u)})}P(t,c),pe()}var Mu=J('<p class="dataset-info svelte-gdjwex"><span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <span class="file-size svelte-gdjwex"> </span></p> <!>',1);function Js(t,e){ge(e,!0);var r=me(),o=Q(r);{var l=a=>{Me(a,{children:(c,d)=>{var u=Mu(),f=Q(u),v=q(V(f),2),m=V(v),h=q(v,5),g=V(h),b=q(f,2);hn(b,{get onclick(){return e.reset}}),re(()=>{S(v,"title",e.dataset.fileName),xe(m,e.dataset.fileName),xe(g,`${e.dataset.values.nrows??""} × ${e.dataset.values.ncols??""}`)}),P(c,u)},$$slots:{default:!0}})};U(o,a=>{e.dataset&&a(l)})}P(t,r),pe()}var Su=J("<!> <!>",1),Nu=J("<!> <!> <!> <!> <!> <!>",1),Tu=J("<!> <!>",1),Pu=J("<p> </p>"),Iu=J("<!> <p> </p>",1),Lu=J("<p> </p>"),Ru=J("<!> <!>",1);function Zs(t,e){ge(e,!0);let r=B(e,"model",3,null),o=B(e,"outliers",19,()=>[]),l=B(e,"className",3,"Class"),a=B(e,"classMandatory",3,!1),c=B(e,"classUnique",3,!1),d=B(e,"dataset",15),u=B(e,"resobj",15);const f=[",",";"],v=E(()=>r()?["no","yes"]:["no","labels","values"]);let m=le(void 0),h=le(""),g=le(""),b=le(","),p=le("no"),_=le(!1),w=le(!1),y=le(null),C=le("neutral"),k=le("");function A(j,z,G){O(y,ee(e.WASM().then(X=>{u(qs(X,j,z,G))}).catch(X=>{console.error(X),u(null),O(C,"error"),O(k,ee(X))})))}function I(j,z){if(!j||j.size<10)return;const X=j.slice(0,1e5),Z=new FileReader;Z.onload=()=>{const $=Z.result;!$||$.length<0||((ue=>(O(b,ee(ue[0])),O(_,ee(ue[1])),O(w,ee(ue[2])),O(p,ee(ue[3]))))(Zc($)),O(w,ee(a()||s(w))),z&&s(p)!=="no"&&O(p,"yes"))},Z.onerror=function($){csvString=null,O(C,"error"),O(k,ee($)),console.error("Error reading CSV file.",$)},Z.readAsText(X)}function N(j){try{const z=Kc(j,s(b),s(p)==="yes"?"labels":s(p),s(_),s(w),s(h),s(g));if(z.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(r()&&z.values.ncols!==r().ncols+r().exclvars.length)throw new Error("Dataset has different number of columns than the training set.");if(z.classNames.length>z.values.nrows/2)throw new Error("Dataset has too many unique "+l().toLowerCase()+" labels ("+z.classNames.length+"), check your CSV file.");if(a()&&z.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&z.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");z.fileName=s(m).name.replace(/\.[^/.]+$/,""),r()&&(z.varrev=r().varrev,z.header=r().header,z.varlabels=r().varlabels,z.varvalues=r().varvalues,z.varvaluesName=r().varvaluesName,z.varvaluesUnits=r().varvaluesUnits),d(z),O(k,""),O(C,"success")}catch(z){d(null),O(C,"error"),O(k,ee(z))}}function M(j){const z=new FileReader;z.onload=()=>{N(z.result)},z.readAsText(s(m))}function L(){O(m,""),d(null),u(null),O(h,""),O(g,""),O(C,"neutral"),O(k,"")}ze(()=>{s(m)===null?L():(I(s(m),r()),O(C,"neutral"),O(k,""))}),ze(()=>{s(b)&&(O(C,"neutral"),O(k,""))}),ze(()=>{if(d()&&r()&&!u())try{u(A(r(),d(),o())),O(k,""),O(C,"success")}catch(j){d(null),u(null),O(C,"error"),O(k,ee(j))}});var D=Ru(),T=Q(D);{var F=j=>{var z=Tu(),G=Q(z);Bn(G,()=>s(m)===void 0,$=>{Me($,{children:(ue,K)=>{Xs(ue,{id:"dataFile",message:"Select CSV file with dataset",get file(){return s(m)},set file(te){O(m,ee(te))}})},$$slots:{default:!0}})});var X=q(G,2);{var Z=$=>{var ue=Nu(),K=Q(ue);Me(K,{label:"Delimiter",children:(ce,se)=>{ut(ce,{id:"sep",options:f,get value(){return s(b)},set value(Te){O(b,ee(Te))}})},$$slots:{default:!0}});var te=q(K,2);Me(te,{label:"Row labels",children:(ce,se)=>{Ot(ce,{id:"hasLabels",options:["no","yes"],get value(){return s(_)},set value(Te){O(_,ee(Te))}})},$$slots:{default:!0}});var fe=q(te,2);{var be=ce=>{Me(ce,{get label(){return`${l()??""} labels`},children:(se,Te)=>{Ot(se,{id:"hasLabels",options:["no","yes"],get value(){return s(w)},set value(Ee){O(w,ee(Ee))}})},$$slots:{default:!0}})};U(fe,ce=>{a()||ce(be)})}var _e=q(fe,2);Me(_e,{label:"Header",children:(ce,se)=>{ut(ce,{id:"header",get options(){return s(v)},get value(){return s(p)},set value(Te){O(p,ee(Te))}})},$$slots:{default:!0}});var ae=q(_e,2);{var we=ce=>{var se=Su(),Te=Q(se);Me(Te,{label:"Header name",children:(Le,_t)=>{Ks(Le,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return s(h)},set value(At){O(h,ee(At))}})},$$slots:{default:!0}});var Ee=q(Te,2);Me(Ee,{label:"Header units",children:(Le,_t)=>{Ks(Le,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return s(g)},set value(At){O(g,ee(At))}})},$$slots:{default:!0}}),P(ce,se)};U(ae,ce=>{s(p)==="values"&&ce(we)})}var ie=q(ae,2);Me(ie,{label:" ",children:(ce,se)=>{qt(ce,{text:"Load",onclick:M})},$$slots:{default:!0}}),P($,ue)};U(X,$=>{s(m)&&$(Z)})}P(j,z)},H=j=>{var z=me(),G=Q(z);{var X=$=>{var ue=me(),K=Q(ue);$l(K,()=>s(y),te=>{Me(te,{children:(fe,be)=>{var _e=Iu(),ae=Q(_e);Qs(ae);var we=q(ae,2),ie=V(we);re(()=>xe(ie,r()?"Loading data and apply model...":"Loading data...")),P(fe,_e)},$$slots:{default:!0}})},(te,fe)=>{var be=me(),_e=Q(be);{var ae=we=>{Js(we,{get dataset(){return d()},reset:L})};U(_e,we=>{d()!==null&&we(ae)})}P(te,be)},(te,fe)=>{Me(te,{status:"error",children:(be,_e)=>{var ae=Pu(),we=V(ae);re(()=>xe(we,s(fe))),P(be,ae)},$$slots:{default:!0}})}),P($,ue)},Z=$=>{var ue=me(),K=Q(ue);{var te=fe=>{Js(fe,{get dataset(){return d()},reset:L})};U(K,fe=>{d()&&fe(te)})}P($,ue)};U(G,$=>{s(y)?$(X):$(Z,!1)})}P(j,z)};U(T,j=>{d()?j(H,!1):j(F)})}var W=q(T,2);{var ne=j=>{Me(j,{status:"error",children:(z,G)=>{var X=Lu(),Z=V(X);re(()=>xe(Z,s(k))),P(z,X)},$$slots:{default:!0}})};U(W,j=>{(s(C)==="error"||s(k))&&j(ne)})}P(t,D),pe()}var ju=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td></tr>'),Fu=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td><td class="svelte-1xneg44">...</td></tr>'),qu=J('<tr class="svelte-1xneg44"><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td><td class="svelte-1xneg44"> </td></tr>'),Ou=J('<table class="svelte-1xneg44"><thead><tr class="svelte-1xneg44"><th class="svelte-1xneg44">PC</th><th class="svelte-1xneg44">Expvar</th><th class="svelte-1xneg44">Cumexpvar</th><th class="svelte-1xneg44">Eigenvals</th></tr></thead><tbody><!><!><!></tbody></table>');function $s(t,e){ge(e,!1);let r=B(e,"resobj",8);const o=16;let l=go(),a=go(),c=go();ji(()=>Kl(r()),()=>{r()&&(O(a,r().stat.cumexpvar),O(l,r().stat.expvar),O(c,r().eigenvals))}),Fi(),is();var d=me(),u=Q(d);{var f=v=>{var m=Ou(),h=q(V(m)),g=V(h);Ye(g,1,()=>r().stat.components.filter(y=>y<o),Xe,(y,C)=>{var k=ju(),A=V(k),I=V(A),N=q(A),M=V(N),L=q(N),D=V(L),T=q(L),F=V(T);re((H,W,ne)=>{xe(I,s(C)),xe(M,H),xe(D,W),xe(F,ne)},[()=>(s(l)[s(C)-1]*100).toFixed(2),()=>(s(a)[s(C)-1]*100).toFixed(2),()=>s(c)[s(C)-1].toFixed(2)],Nn),P(y,k)});var b=q(g);{var p=y=>{var C=Fu();P(y,C)};U(b,y=>{r().ncomp>o&&y(p)})}var _=q(b);{var w=y=>{var C=qu(),k=V(C),A=V(k),I=q(k),N=V(I),M=q(I),L=V(M),D=q(M),T=V(D);re((F,H,W)=>{xe(A,r().ncomp),xe(N,F),xe(L,H),xe(T,W)},[()=>((s(a)[r().ncomp-1]-s(a)[r().ncomp-2])*100).toFixed(2),()=>(s(a)[r().ncomp-1]*100).toFixed(2),()=>s(c)[r().ncomp-1].toFixed(2)],Nn),P(y,C)};U(_,y=>{r().ncomp>=o&&y(w)})}P(v,m)};U(u,v=>{r()&&v(f)})}P(t,d),pe()}var Bu=J('<span class="item svelte-1ggez3e"> </span>'),Vu=J('<p class="outliers svelte-1ggez3e">Removed: <!></p> <!>',1);function ea(t,e){ge(e,!0);var r=me(),o=Q(r);{var l=a=>{Me(a,{children:(c,d)=>{var u=Vu(),f=Q(u),v=q(V(f));Ye(v,17,()=>e.outliers,Xe,(h,g)=>{var b=Bu(),p=V(b);re(()=>xe(p,e.dataset.objlabels[s(g)])),P(h,b)});var m=q(f,2);hn(m,{get onclick(){return e.resetOutliers}}),P(c,u)},$$slots:{default:!0}})};U(o,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(l)})}P(t,r),pe()}const Du={small:30,medium:40,large:50,xlarge:60},zu={small:5,medium:8,large:12,xlarge:15},Yu={small:6,medium:10,large:14,xlarge:18},Ko={small:4,medium:6,large:8,xlarge:10},Wu={small:12,medium:15,large:19,xlarge:21},Qo={small:11,medium:15,large:17,xlarge:19},mn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Qn=["●","◼","▲","▼","⬥","＋","✳","✕"],Uu=.8,ta=.5,Hu={small:5,medium:8,large:12,xlarge:15},Et={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function ra(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function na(t,e){if(t!=null&&(Array.isArray(t)&&(t=We(t)),!(!Ne(t)||t.length<1)))return t.apply(r=>rl((r-e[1])*e[0]+e[2])).v}function tt(t,e){return na(t,e.coords)}function Jo(t,e){return na(t,e.objects)}function oa(t,e){if(t!=null&&(Array.isArray(t)&&(t=We(t)),!(!Ne(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function la(t,e){return oa(t,e.coords)}function sa(t,e){return oa(t,e.objects)}function Zo(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Mr(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function $o(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Mr(Math.abs(Qr(ds(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Mr(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let o=Math.ceil(-Mr(Math.log10(e)));return o<=2?[0,Array.from(t).map(l=>l.toFixed(o))]:(r=o-2,o=2,Mr(Math.abs(Ar(t)))<=10?[-r,Array.from(t).map(l=>(l*Math.pow(10,r)).toFixed(o))]:[-r,Array.from(t).map(l=>(l/Math.pow(10,r)).toString())])}function bt(t,e,r){return Array.isArray(t)&&(t=We(t)),Ne(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function el(t,e,r,o){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=r.coords,a=o.coords;let c="";for(let d=0;d<t.length;d++){const u=rl((t.v[d]-l[1])*l[0]+l[2]),f=rl((e.v[d]-a[1])*a[0]+a[2]);c+=u+","+f+" "}return c}function aa(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Jn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function ia(t,e){if(Array.isArray(t)&&(t=We(t)),!Ne(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const o=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=o&c<=l);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function tl(t,e,r,o,l,a){l==null&&(l=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const d=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*d,f=Math.floor(Math.log10(u)),v=1/Math.pow(10,f-1),m=Math.round(u*v)/v;let h=Gu(m/r);l&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let g=Math.ceil((c[0]+d)/h)*h,b=Math.floor((c[1]-d)/h)*h;Math.abs(c[0]-g)<h/10&&(g=g+h),Math.abs(c[1]-b)<h/10&&(b=b-h),r=Math.ceil(Mr((b-g)/h))+1,t=Ce.zeros(r);for(let p=0;p<r;p++)t.v[p]=g+h*p;if(Math.abs(h)<1){const p=Math.pow(10,1+Math.round(-Math.log10(h)));t=t.apply(_=>Math.round((_+Number.EPSILON)*p)/p)}return t.filter(p=>p>=c[0]&p<=c[1])}function Gu(t,e){const r=Math.floor(Math.log10(t)),o=t/Math.pow(10,r);let l;return o<=1?l=1:o<=2?l=2:o<=5?l=5:l=10,l*Math.pow(10,r)}function rl(t){return Math.round(t*10)/10}function Xu(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function ca(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Ku(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Qu(t){let e=-1,r=Ku();for(let o=0;o<t.length;o++)e=r[(e^t[o])&255]^e>>>8;return e^-1}function Ju(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=Qu(r),l=new Uint8Array(4);l[0]=o>>>24,l[1]=o>>>16,l[2]=o>>>8,l[3]=o&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(l,50),c}function Zu(t,e){const r=t.split(","),o=r[0],l=r[1],a=33/3*4,c=l.substring(0,a),d=l.substring(a),u=atob(c),f=new Uint8Array(u.length);for(let h=0;h<f.length;h++)f[h]=u.charCodeAt(h);const v=Ju(f,e),m=btoa(String.fromCharCode(...v));return[o,",",m,d].join("")}function $u(t,e,r,o,l){if(r||(r=10),o||(o=10),l||(l=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(o<1||o>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*l,c=o/2.54*l;setTimeout(()=>{const d=t.clientHeight,u=t.clientWidth;let f=Math.max(a/u,c/d),v=1;f<1&&(v=f,f=1);const m=document.createElement("canvas"),h=m.getContext("2d");m.width=u*(v<1?v:f),m.height=d*(v<1?v:f),t.setAttribute("width",u*f),t.setAttribute("height",d*f),h.fillStyle="white",h.fillRect(0,0,m.width,m.height),h.scale(f,f);const g=new XMLSerializer().serializeToString(t),b=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(b),_=new Image;_.onload=function(){v<0&&(_.width=_.width*v,_.height=_.height*v),h.drawImage(_,0,0,m.width,m.height);const w=m.toDataURL("image/png"),y=Zu(w,l),C=document.createElement("a");C.href=y,C.download=`${e}.png`,C.click()},_.src=p},20)}function ef(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,o=t.clientWidth;t.setAttribute("width",o+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${o} ${r}`);const l=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(l),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function tf(t,e,r,o){const l=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":rf(e,r,o)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=l},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=l},500)}).catch(a=>console.error(a))}async function rf(t,e,r){const o=t.clientHeight,l=t.clientWidth,a=Math.max(e/l,r/o),c=document.createElement("canvas"),d=c.getContext("2d");return c.width=l*a,c.height=o*a,d.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((f,v)=>{const m=new XMLSerializer().serializeToString(t),h=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,b=g.createObjectURL(h),p=new Image;p.onload=function(){d.drawImage(p,0,0,c.width,c.height),g.revokeObjectURL(b),c.toBlob(function(_){_?f(_):v(new Error("Failed to create blob"))},"image/png")},p.onerror=function(_){v(_)},p.src=b})}function ua(t,e){t>16&&(t=16);const r=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?r[t-1].map(o=>o+e):r[t-1]}function nf(t,e,r,o,l){let a=l.ticks,c=l.tickLabels,d=0;const u=tl(a,t,zu[r.x],!0,l.whole),f=u.length,v=sa([Ko[r.plot]],o)[0],m=Ce.fill(e[0],f),h=m.add(v),g=Ce.fill(e[1],f);if(c||(a?(d=0,c=a.v.map(N=>Mr(N).toString())):[d,c]=$o(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[u,m],[u,g]],p=[[We([t[0]]),We([e[0]])],[We([t[1]]),We([e[0]])]],_=[[u,h],[u,m]],w=(t[1]-t[0])*.01,y=[[null,null],[[t[1]-(d>9?1:0)*w],[m.v[f-1]]]],C=Zo(d),k=Math.abs(t[1]-u.v[u.length-1]),A=t[1]-t[0],I=Math.abs(u.v[1]-u.v[0]);return C.length>0&&k<A*.1&&k<I*.5&&(c[c.length-1]=" "),{grid:b,axisLine:p,tickCoords:_,tfCoords:y,ticks:a,tickLabels:c,tickFactor:d,tfLabel:C}}function of(t,e,r,o,l){let a=l.ticks,c=l.tickLabels,d=0;const u=tl(l.ticks,e,Yu[r.y],!0,l.whole),f=u.length,v=sa([Ko[r.plot]],o)[0],m=Ce.fill(t[0],f),h=m.add(v),g=Ce.fill(t[1],f);if(c||(a?(d=0,c=a.v.map(C=>Mr(C).toString())):[d,c]=$o(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[m,u],[g,u]],p=[[We([t[0]]),We([e[0]])],[We([t[0]]),We([e[1]])]],_=[[m,u],[h,u]],w=[[[],[]],[[h.v[f-1]+(Math.abs(d)>9?3:2)*v],[e[1]]]],y=Zo(d);return y.length>0&&e[1]-u.v[u.length-1]<(e[1]-e[0])*.05&&(c[c.length-1]=" "),{grid:b,axisLine:p,tickCoords:_,tfCoords:w,ticks:a,tickLabels:c,tickFactor:d,tfLabel:y}}function lf(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ne(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let o,l;if(t.labels?(o=t.labels,l=0):[l,o]=$o(e),!(o.length===e.length-1||o.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=o.length===r.length;return{colmap:r,breaks:e,labels:o,isCentered:a,labelsFactor:l,fontSize:t.fontSize,labelColor:t.labelColor}}function sf(t,e,r,o){const l=t.colmap.length,a=e*Uu,c=a/l,d=r[1]+(e-a)*.5,u=Hu[o.y],f=r[2]+u*ta,v=f+u*(1+ta),m=t.isCentered?c/2:0;return{start:d,top:f,height:u,width:c,dxl:m,ltop:v}}function Sr(t,e,r){if(!t||!e||!r||typeof r!="function")return;const o=t.target;if(o.tagName===e){const l=Array.prototype.indexOf.call(o.parentNode.children,o);if(l<0)return;r(l),t.stopPropagation()}}function af(t,e){const o=document.createElement("canvas").getContext("2d");return o.font=e,o.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function cf(t,e){const r="Arial",o=e/8,l=e*1.5,a=Array(t.length),c=Array(t.length);let d=0,u=0,f=0;for(let m=0;m<t.length;m++){const h=af("  "+t[m].label+"  ",e+"px "+r);f=h>f?h:f;const g=e*t[m].labelHeight+2*o;a[m]=g,c[m]=d,d=d+g,u=u+g}const v=l+2*o+f;return[c,a,l,o,u,v]}function uf(t,e,r,o,l){const[a,c,d,u,f,v]=cf(t.items,o*t.fontSize),m=t.position.includes("left")?e[0]+l:t.position.includes("right")?e[1]-v-l:(e[1]+e[0]-v)*.5,h=t.position.includes("top")?r[1]+l:t.position.includes("bottom")?r[0]-f-l:(r[1]+r[0]-f)*.5;return{lgl:m,lgt:h,lgw:v,lgh:f,ely:a,elh:c,elw:d,elp:u}}function Jn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let o=0,l="";for(;o<t.length;){const a=t[o];if((a==="^"||a==="_")&&o<t.length-1){const c=a==="^";if(o++,t[o]==="("){let d=o+1;for(;d<t.length&&t[d]!==")";)d++;const u=t.slice(o+1,d);l+=c?e(u):r(u),o=d+1}else if(t[o]==="-"||t[o]==="–"){const d=t.slice(o,o+2);l+=c?e(d):r(d),o=o+2}else l+=c?e(t[o]):r(t[o]),o++}else l+=a,o++}return l}var ff=ve('<line vector-effect="non-scaling-stroke"></line>'),df=ve("<g></g>");function nl(t,e){ge(e,!0);let r=B(e,"lineCoords",19,()=>[]),o=B(e,"lineColor",19,()=>Et.DARKGRAY),l=B(e,"lineType",3,1),a=B(e,"lineWidth",3,1),c=B(e,"className",3,"");const d=Nt("axes");let u=E(()=>tt(r()[0][0],d.tX())),f=E(()=>tt(r()[1][0],d.tX())),v=E(()=>tt(r()[0][1],d.tY())),m=E(()=>tt(r()[1][1],d.tY())),h=E(()=>`stroke:${o()};stroke-width: ${a()}px;stroke-dasharray:${mn[d.scales().plot][l()-1]}`);var g=me(),b=Q(g);{var p=_=>{var w=df();Ye(w,21,()=>s(u),Xe,(y,C,k)=>{var A=ff();re(()=>{S(A,"x1",s(u)[k]),S(A,"x2",s(f)[k]),S(A,"y1",s(v)[k]),S(A,"y2",s(m)[k]),S(A,"style",s(h))}),P(y,A)}),re(()=>No(w,ac(c()))),P(_,w)};U(b,_=>{s(u)&&s(v)&&s(f)&&_(p)})}P(t,g),pe()}var vf=ve('<text text-anchor="middle"><!></text>'),hf=ve("<text><!></text>"),mf=ve("<text><!></text>"),gf=ve('<g class="tick-labels"><!></g>');function fa(t,e){ge(e,!0);let r=B(e,"pos",3,1),o=B(e,"las",3,1),l=E(()=>["middle","middle","start","middle","end"][r()]),a=E(()=>`fill:${e.textColor};`);const c=Nt("axes");let d=E(()=>tt(e.tickCoords[1][0],c.tX())),u=E(()=>tt(e.tickCoords[1][1],c.tY())),f=E(()=>Qo[c.scales().plot]),v=E(()=>[0,0,s(f),0,-s(f)][r()]),m=E(()=>[0,s(f),0,-s(f),0][r()]);var h=gf(),g=V(h);{var b=_=>{var w=me(),y=Q(w);Ye(y,17,()=>s(d),Xe,(C,k,A)=>{var I=vf();S(I,"data-id",A),S(I,"dx",0);var N=V(I);ht(N,()=>e.tickLabels[A],!0,!1),re(()=>{S(I,"x",s(d)[A]),S(I,"y",s(u)[A]),S(I,"dy",s(v)*1.25),S(I,"transform",`rotate(-90, ${s(d)[A]}, ${s(u)[A]})`)}),P(C,I)}),P(_,w)},p=_=>{var w=me(),y=Q(w);{var C=A=>{var I=me(),N=Q(I);Ye(N,17,()=>s(d),Xe,(M,L,D)=>{var T=hf();S(T,"data-id",D),S(T,"dy",0),S(T,"text-anchor","end");var F=V(T);ht(F,()=>e.tickLabels[D],!0,!1),re(()=>{S(T,"x",s(d)[D]),S(T,"y",s(u)[D]),S(T,"dx",-s(m)/2),S(T,"transform",`rotate(-90, ${s(d)[D]}, ${s(u)[D]})`)}),P(M,T)}),P(A,I)},k=A=>{var I=me(),N=Q(I);Ye(N,17,()=>s(d),Xe,(M,L,D)=>{var T=mf();S(T,"data-id",D);var F=V(T);ht(F,()=>e.tickLabels[D],!0,!1),re(()=>{S(T,"x",s(d)[D]),S(T,"y",s(u)[D]),S(T,"dx",s(v)),S(T,"dy",s(m)),S(T,"text-anchor",s(l))}),P(M,T)}),P(A,I)};U(y,A=>{o()===2&&r()===1?A(C):A(k,!1)},!0)}P(_,w)};U(g,_=>{o()===2&&r()===4?_(b):_(p,!1)})}re(()=>S(h,"style",s(a))),P(t,h),pe()}const pf=(t,e=at,r=at)=>{var o=Ef();const l=E(()=>e().colmap.length);var a=Q(o);Ye(a,17,()=>e().colmap,Xe,(v,m,h)=>{var g=yf();const b=E(()=>r().start+h*r().width);var p=Q(g),_=q(p);S(_,"dy",0);var w=V(_);ht(w,()=>e().labels[h],!0,!1),re(()=>{S(p,"x",s(b)),S(p,"y",r().top),S(p,"width",r().width),S(p,"height",r().height),S(p,"fill",s(m)),S(_,"x",s(b)),S(_,"y",r().ltop),S(_,"dx",r().dxl),S(_,"fill",e().labelColor),S(_,"font-size",e().fontSize+"em")}),P(v,g)});var c=q(a);{var d=v=>{var m=xf();const h=E(()=>r().start+s(l)*r().width);S(m,"dx",0),S(m,"dy",0);var g=V(m);ht(g,()=>e().labels[s(l)],!0,!1),re(()=>{S(m,"x",s(h)),S(m,"y",r().ltop),S(m,"fill",e().labelColor),S(m,"font-size",`${e().fontSize??""}em`)}),P(v,m)};U(c,v=>{e().isCentered||v(d)})}var u=q(c);{var f=v=>{var m=kf();const h=E(()=>r().start+s(l)*r().width);var g=V(m);ht(g,()=>Zo(e().labelsFactor),!0,!1),re(()=>{S(m,"x",s(h)),S(m,"y",r().ltop),S(m,"fill",e().labelColor),S(m,"font-size",`${e().fontSize??""}em`)}),P(v,m)};U(u,v=>{e().labelsFactor!==0&&v(f)})}P(t,o)};function da(t,e,r){e(t,r())}function va(t,e,r){e(t,r())}function ha(t,e,r){e(t,r())}function Zn(t,e,r){e(t,r())}async function ma(t,e,r,o){tf(t.target,s(e),r(),o())}function ga(t,e,r){ef(s(e),r())}function pa(t,e,r,o,l,a){$u(s(e),r(),o(),l(),a())}var bf=ve('<text fill="crimson" text-anchor="middle"> </text>'),_f=ve('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),wf=ve("<!><!><!><!><!>",1),yf=ve('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),xf=ve('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),kf=ve('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Ef=ve("<!><!><!>",1),Af=ve("<line></line>"),Cf=ve('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Mf=ve('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Sf=ve('<svg><rect height="100%" width="100%"></rect><!></svg>'),Nf=ve('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Tf=ve('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Pf=ve('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),If=ve('<g class="plot-labels"><!><!><!></g>'),Lf=ve('<g class="axis x-axis"><!></g>'),Rf=ve('<g class="axis y-axis"><!></g>'),jf=ve('<rect fill="transparent" id="axes-box"></rect>'),Ff=ve('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),qf=ve('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Of=ve('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Bf=ve('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Vf=J('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),Df=J('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),zf=J(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Yf(t,e){ge(e,!0);const r=(ye,Pe=at,Se=at)=>{var rt=me(),mt=Q(rt);{var Ut=Mt=>{var Ue=me(),Re=Q(Ue);{var ft=nt=>{var Ke=bf(),Lt=V(Ke);re(()=>{S(Ke,"x",s(te)[0]-10),S(Ke,"y",s(ue)),S(Ke,"transform",`rotate(-90, ${s(te)[0]-10}, ${s(ue)})`),xe(Lt,Se().error)}),P(nt,Ke)},st=nt=>{var Ke=_f(),Lt=V(Ke);re(()=>{S(Ke,"x",s(K)),S(Ke,"y",s(fe)[0]),xe(Lt,Se().error)}),P(nt,Ke)};U(Re,nt=>{Se().pos===4?nt(ft):nt(st,!1)})}P(Mt,Ue)},Ct=Mt=>{var Ue=wf(),Re=Q(Ue);{var ft=he=>{nl(he,{get lineCoords(){return Pe().grid},get lineColor(){return Et.MIDDLEGRAY},lineType:3})};U(Re,he=>{Se().showGrid&&he(ft)})}var st=q(Re);nl(st,{get lineCoords(){return Pe().axisLine},get lineColor(){return Et.DARKGRAY},lineType:1});var nt=q(st);nl(nt,{get lineCoords(){return Pe().tickCoords},get lineColor(){return Et.DARKGRAY},lineType:1});var Ke=q(nt);{var Lt=he=>{fa(he,{get las(){return Se().las},get pos(){return Se().pos},get tickCoords(){return Pe().tickCoords},get tickLabels(){return Pe().tickLabels},get tickColor(){return Et.DARKGRAY},get hideLast(){return Se().hideLast}})};U(Ke,he=>{Pe().tickCoords.length===2&&Pe().tickLabels.length===Pe().tickCoords[1][0].length&&he(Lt)})}var Lr=q(Ke);{var qe=he=>{const dt=E(()=>[Pe().tfLabel]);fa(he,{get pos(){return Se().pos},get tickCoords(){return Pe().tfCoords},get tickLabels(){return s(dt)},get textColor(){return Et.DARKGRAY}})};U(Lr,he=>{Pe().tickFactor!==0&&he(qe)})}P(Mt,Ue)};U(mt,Mt=>{Se().error?Mt(Ut):Mt(Ct,!1)})}P(ye,rt)},o=(ye,Pe=at,Se=at)=>{var rt=Sf();const mt=E(()=>Se().elw+2*Se().elp),Ut=E(()=>Se().elp),Ct=E(()=>Se().elh),Mt=E(()=>Se().ely);var Ue=V(rt),Re=q(Ue);Ye(Re,17,()=>Pe().items,Xe,(ft,st,nt)=>{var Ke=Mf();S(Ke,"x",0);var Lt=V(Ke);{var Lr=ar=>{var Fe=Af();re(()=>{S(Fe,"x1",s(Ut)),S(Fe,"x2",s(mt)-s(Ut)),S(Fe,"y1",s(Ct)[nt]/2),S(Fe,"y2",s(Ct)[nt]/2),S(Fe,"stroke",s(st).line.lineColor),S(Fe,"stroke-width",s(st).line.lineWidth),S(Fe,"stroke-dasharray",s(T)[s(st).line.lineType-1])}),P(ar,Fe)};U(Lt,ar=>{s(st).line&&ar(Lr)})}var qe=q(Lt);{var he=ar=>{var Fe=Cf(),lo=V(Fe);re(()=>{S(Fe,"x",s(mt)/2),S(Fe,"y",s(Ct)[nt]/2),S(Fe,"fill",s(st).point.faceColor),S(Fe,"stroke-width",s(st).point.lineWidth),S(Fe,"stroke",s(st).point.lineColor),S(Fe,"font-size",s(L)),xe(lo,Qn[s(st).point.marker-1])}),P(ar,Fe)};U(qe,ar=>{s(st).point&&ar(he)})}var dt=q(qe),ul=V(dt);ht(ul,()=>s(st).label,!0,!1),re(()=>{S(Ke,"y",s(Mt)[nt]),S(Ke,"width",Se().lgw),S(Ke,"height",s(Ct)[nt]),S(dt,"x",s(mt)+s(Ut)),S(dt,"y",s(Ct)[nt]/2),S(dt,"fill",Et.LEGEND),S(dt,"font-size",`${Pe().fontSize??""}em`)}),P(ft,Ke)}),re(()=>{S(rt,"x",Se().lgl),S(rt,"y",Se().lgt),S(rt,"height",Se().lgh),S(rt,"width",Se().lgw),S(Ue,"fill",Pe().faceColor),S(Ue,"stroke",Pe().lineColor),S(Ue,"stroke-width",Pe().lineWidth)}),P(ye,rt)};let l=B(e,"limX",19,()=>[0,1]),a=B(e,"limY",19,()=>[0,1]),c=B(e,"margins",19,()=>[1,1.1,.55,.6]),d=B(e,"downloadLinks",3,"none"),u=B(e,"fileName",3,"plot"),f=B(e,"pngWidth",3,8),v=B(e,"pngHeight",3,8),m=B(e,"pngRes",3,300),h=B(e,"clipboardWidth",3,1200),g=B(e,"clipboardHeight",3,800),b=B(e,"onclick",3,null),p=B(e,"onmousemove",3,null),_=B(e,"onmousedown",3,null),w=B(e,"onmouseup",3,null);function y(ye,Pe){if(Pe&&ye.target.id=="axes-box"){const Se=la([ye.offsetX-s(H)],s(Z))[0],rt=la([ye.offsetY-s(W)],s($))[0];Pe(Se,rt)}}const C="plottingArea"+Math.round(Math.random()*1e4);let k=le(0),A=le(0),I=le(0);const N=E(()=>({plot:Xu(s(A),s(I)),x:ca(s(A)),y:ca(s(I))})),M=E(()=>c().map(ye=>ye*Du[s(N).plot])),L=E(()=>Wu[s(N).plot]),D=E(()=>Ko[s(N).plot]),T=E(()=>mn[s(N).plot]),F=E(()=>s(we).show&&s(we).label!==""?s(L)*1.5:0),H=E(()=>s(ie).show&&s(ie).label!==""?s(L)*1.5:0),W=E(()=>e.title&&e.title!==""?s(L)*1.5:0),ne=E(()=>s(A)>s(H)?s(A)-s(H):0),j=E(()=>s(I)>s(F)+s(W)?s(I)-s(F)-s(W):0),z=E(()=>s(j)-s(M)[0]-s(M)[2]),G=E(()=>s(ne)-s(M)[1]-s(M)[3]),X=E(()=>ra(l(),2)&&ra(a(),2)&&s(ne)>s(M)[1]+s(M)[3]&&s(j)>s(M)[0]+s(M)[2]),Z=E(()=>s(X)?{coords:[s(G)/(l()[1]-l()[0]),l()[0],s(M)[1]],objects:[s(G)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),$=E(()=>s(X)?{coords:[-s(z)/(a()[1]-a()[0]),a()[1],s(M)[2]],objects:[s(z)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ue=E(()=>s(z)*.5+s(W)+s(M)[2]),K=E(()=>s(G)*.5+s(H)+s(M)[1]),te=E(()=>s(X)?tt(l(),s(Z)):[0,1]),fe=E(()=>s(X)?tt(a(),s($)):[1,0]),be=E(()=>Jn(e.title)),_e=E(()=>s(be)?s(be).length===e.title.left?1:1.4:0);let ae=le(ee({show:!1})),we=le(ee({show:!1,error:""})),ie=le(ee({show:!1,error:""})),ce=le(ee({show:!1,colmap:null,breaks:null})),se=le(ee({show:!1,items:null,position:null}));const Te=E(()=>s(X)&&s(ce)&&s(ce).show?lf(s(ce)):null),Ee=E(()=>s(X)&&s(we).show?nf(l(),a(),s(N),s($),s(we)):null),Le=E(()=>s(X)&&s(ie).show?of(l(),a(),s(N),s(Z),s(ie)):null),_t=E(()=>s(X)&&s(Te)?sf(s(Te),s(G),s(M),s(N)):null),At=E(()=>s(X)&&s(se)&&s(se).show&&s(te)?uf(s(se),s(te),s(fe),s(L),s(D)):null);Ai("axes",{setBox:ye=>O(ae,ee(ye)),setXAxis:ye=>O(we,ee(ye)),setYAxis:ye=>O(ie,ee(ye)),setColmapLegend:ye=>O(ce,ee(ye)),setGroupLegend:ye=>O(se,ee(ye)),scales:()=>s(N),tX:()=>s(Z),tY:()=>s($),limX:()=>l(),limY:()=>a()});var it=zf(),ot=V(it),Je=q(V(ot));{var Pr=ye=>{var Pe=If(),Se=V(Pe);{var rt=Ue=>{var Re=Nf();S(Re,"dx",0),S(Re,"dy",0);var ft=V(Re);ht(ft,()=>s(we).label,!0,!1),re(()=>{S(Re,"x",s(K)),S(Re,"y",s(j)+s(W))}),P(Ue,Re)};U(Se,Ue=>{s(we).show&&s(we).label&&s(we).label!==""&&Ue(rt)})}var mt=q(Se);{var Ut=Ue=>{var Re=Tf();S(Re,"dx",0),S(Re,"dy",0);var ft=V(Re);ht(ft,()=>s(ie).label,!0,!1),re(()=>{S(Re,"x",s(L)/1.1*s(ie).labelHeight),S(Re,"y",s(ue)),S(Re,"transform",`rotate(-90, ${s(L)*s(ie).labelHeight/1.1}, ${s(ue)})`)}),P(Ue,Re)};U(mt,Ue=>{s(ie).show&&s(ie).label&&s(ie).label!==""&&Ue(Ut)})}var Ct=q(mt);{var Mt=Ue=>{var Re=Pf();S(Re,"dx",0),S(Re,"dy",0);var ft=V(Re);ht(ft,()=>s(be),!0,!1),re(()=>{S(Re,"x",s(K)),S(Re,"y",s(L)*s(_e))}),P(Ue,Re)};U(Ct,Ue=>{s(be)&&s(be)!==""&&Ue(Mt)})}P(ye,Pe)};U(Je,ye=>{s(X)&&ye(Pr)})}var Ir=q(Je),bn=V(Ir),to=V(bn);S(to,"id",C);var er=V(to),ro=q(bn);{var no=ye=>{var Pe=Bf(),Se=Q(Pe);{var rt=qe=>{var he=Lf(),dt=V(he);r(dt,()=>s(Ee),()=>s(we)),P(qe,he)};U(Se,qe=>{s(we).show&&s(Ee)&&qe(rt)})}var mt=q(Se);{var Ut=qe=>{var he=Rf(),dt=V(he);r(dt,()=>s(Le),()=>s(ie)),P(qe,he)};U(mt,qe=>{s(ie).show&&s(Le)&&qe(Ut)})}var Ct=q(mt),Mt=V(Ct);{var Ue=qe=>{var he=jf();he.__keydown=[Zn,y,b],he.__click=[Zn,y,b],he.__mousemove=[ha,y,p],he.__mousedown=[da,y,_],he.__mouseup=[va,y,w],re(()=>{S(he,"stroke",s(ae).lineColor),S(he,"stroke-width",`${s(ae).lineWidth??""}px`),S(he,"x",s(te)[0]),S(he,"y",s(fe)[1]),S(he,"width",s(te)[1]-s(te)[0]),S(he,"height",s(fe)[0]-s(fe)[1])}),P(qe,he)},Re=qe=>{var he=Ff();he.__keydown=[Zn,y,b],he.__click=[Zn,y,b],he.__mousemove=[ha,y,p],he.__mousedown=[da,y,_],he.__mouseup=[va,y,w],re(()=>{S(he,"x",s(te)[0]),S(he,"y",s(fe)[1]),S(he,"width",s(te)[1]-s(te)[0]),S(he,"height",s(fe)[0]-s(fe)[1])}),P(qe,he)};U(Mt,qe=>{s(ae).show?qe(Ue):qe(Re,!1)})}var ft=q(Ct);S(ft,"clip-path",`url(#${C??""})`);var st=V(ft);Er(st,()=>e.children??at);var nt=q(ft);{var Ke=qe=>{var he=qf(),dt=V(he);pf(dt,()=>s(Te),()=>s(_t)),P(qe,he)};U(nt,qe=>{s(_t)&&qe(Ke)})}var Lt=q(nt);{var Lr=qe=>{var he=Of(),dt=V(he);o(dt,()=>s(se),()=>s(At)),P(qe,he)};U(Lt,qe=>{s(At)&&qe(Lr)})}P(ye,Pe)};U(ro,ye=>{s(X)&&ye(no)})}Xr(ot,ye=>O(k,ye),()=>s(k));var oo=q(ot,2);{var il=ye=>{var Pe=Vf();P(ye,Pe)},cl=ye=>{var Pe=Df(),Se=V(Pe);Se.__click=[ga,k,u],Se.__keydown=[ga,k,u];var rt=q(Se,2);rt.__click=[pa,k,u,f,v,m],rt.__keydown=[pa,k,u,f,v,m];var mt=q(rt,2);mt.__click=[ma,k,h,g],mt.__keydown=[ma,k,h,g],P(ye,Pe)};U(oo,ye=>{s(X)?ye(cl,!1):ye(il)})}re(()=>{Gr(it,`plot-container show-download-links-${d()??""} svelte-1jtdxd0`),xt(it,"plot-error",!s(X)),S(ot,"style",`font-size:${s(L)??""}px`),S(Ir,"x",s(H)),S(Ir,"y",s(W)),S(Ir,"width",s(ne)),S(Ir,"height",s(j)),S(er,"x",s(te)[0]),S(er,"y",s(fe)[1]),S(er,"width",s(te)[1]-s(te)[0]),S(er,"height",s(fe)[0]-s(fe)[1])}),ss(ot,"clientWidth",ye=>O(A,ye)),ss(ot,"clientHeight",ye=>O(I,ye)),P(t,it),pe()}Ze(["keydown","click","mousemove","mousedown","mouseup"]);function ba(t,e){ge(e,!0);let r=B(e,"tickLabels",7),o=B(e,"las",3,1),l=B(e,"whole",3,!1),a=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const d=Nt("axes");ze(()=>{const u=Jn(e.label),f=u?u.length===e.label.length?1:1.4:0;let v,m="";e.ticks&&([v,m]=ia(e.ticks,d.limX())),!m&&r()&&(h=>(r(h[0]),m=h[1]))(aa(r(),v)),d.setXAxis({show:a(),error:m,label:u,ticks:v,labelHeight:f,showGrid:c(),las:o(),whole:l(),tickLabels:r()})}),pe()}function _a(t,e){ge(e,!0);let r=B(e,"tickLabels",7),o=B(e,"las",3,1),l=B(e,"whole",3,!1),a=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const d=Nt("axes");ze(()=>{const u=Jn(e.label),f=u?u.length===e.label.length?1:1.4:0;let v,m="";e.ticks&&([v,m]=ia(e.ticks,d.limY())),!m&&r()&&(h=>(r(h[0]),m=h[1]))(aa(r(),v)),d.setYAxis({show:a(),error:m,label:u,ticks:v,labelHeight:f,showGrid:c(),las:o(),whole:l(),tickLabels:r(),pos:4})}),pe()}function wa(t,e){ge(e,!0);let r=B(e,"lineWidth",3,1),o=B(e,"lineColor",3,"#606060");const l=Nt("axes");ze(()=>{l.setBox({show:!0,lineWidth:r(),lineColor:o()})}),pe()}var Wf=(t,e)=>Sr(t,"rect",e.onclick),Uf=ve("<rect></rect>"),Hf=ve("<g></g>");function ya(t,e){ge(e,!0);let r=B(e,"faceColor",19,()=>Et.PRIMARY),o=B(e,"lineColor",19,r),l=B(e,"lineWidth",3,1),a=B(e,"className",3,"series-rect");const c=E(()=>bt(e.left,"Rectangles (left)")),d=E(()=>s(c)?bt(e.top,"Rectangles (top)",s(c).length):null),u=E(()=>s(d)?typeof e.width!="object"?Ce.fill(e.width,s(c).length):e.width:null),f=E(()=>s(d)?typeof e.height!="object"?Ce.fill(e.height,s(c).length):e.height:null),v=Nt("axes"),m=E(()=>s(c)?tt(s(c),v.tX()):null),h=E(()=>s(d)?tt(s(d),v.tY()):null),g=E(()=>s(u)?Jo(s(u),v.tX()):null),b=E(()=>s(f)?Jo(s(f),v.tY()):null),p=E(()=>`fill:${r()};stroke:${o()};stroke-width:${l()}px;`),_=E(()=>s(m)&&s(h)&&s(g)&&s(b)&&s(g).length===s(m).length&&s(b).length===s(m).length);var w=me(),y=Q(w);{var C=k=>{var A=Hf();A.__click=[Wf,e],Ye(A,21,()=>e.left,Xe,(I,N,M)=>{var L=Uf();re(()=>{S(L,"x",s(m)[M]),S(L,"y",s(h)[M]),S(L,"width",s(g)[M]),S(L,"height",s(b)[M])}),P(I,L)}),re(()=>{No(A,`series ${a()??""}`),S(A,"style",s(p))}),P(k,A)};U(y,k=>{s(_)&&k(C)})}P(t,w),pe()}Ze(["click"]);var Gf=(t,e)=>Sr(t,"line",e.onclick),Xf=ve("<line></line>"),Kf=ve('<g class="series series-segment"></g>');function Nr(t,e){ge(e,!0);let r=B(e,"lineColor",19,()=>Et.PRIMARY),o=B(e,"lineType",3,1),l=B(e,"lineWidth",3,1);const a=E(()=>bt(e.xStart,"Segments")),c=E(()=>s(a)?bt(e.yStart,"Segments",s(a).length):null),d=E(()=>s(c)?bt(e.xEnd,"Segments",s(a).length):null),u=E(()=>s(d)?bt(e.yEnd,"Segments",s(a).length):null),f=Nt("axes"),v=E(()=>s(a)?tt(s(a),f.tX()):null),m=E(()=>s(d)?tt(s(d),f.tX()):null),h=E(()=>s(c)?tt(s(c),f.tY()):null),g=E(()=>s(u)?tt(s(u),f.tY()):null),b=E(()=>`stroke:${r()};stroke-width: ${l()}px;stroke-dasharray:${mn[f.scales().plot][o()-1]}`),p=E(()=>s(v)&&s(m)&&s(h)&&s(g));var _=me(),w=Q(_);{var y=C=>{var k=Kf();k.__click=[Gf,e],Ye(k,21,()=>s(v),Xe,(A,I,N)=>{var M=Xf();re(()=>{S(M,"x1",s(v)[N]),S(M,"x2",s(m)[N]),S(M,"y1",s(h)[N]),S(M,"y2",s(g)[N])}),P(A,M)}),re(()=>S(k,"style",s(b))),P(C,k)};U(w,C=>{s(p)&&C(y)})}P(t,_),pe()}Ze(["click"]);var Qf=(t,e)=>Sr(t,"text",e.onclick),Jf=ve("<text><!></text>"),Zf=ve("<text><!></text>"),$f=ve("<text><!></text>"),ed=ve('<g class="series series-textlabels"><!></g>');function ol(t,e){ge(e,!0);let r=B(e,"pos",3,0),o=B(e,"faceColor",19,()=>Et.PRIMARY_TEXT),l=B(e,"lineColor",3,"transparent"),a=B(e,"lineWidth",3,0),c=B(e,"textSize",3,1),d=B(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],f=E(()=>bt(e.xValues,"TextLabels")),v=E(()=>s(f)?bt(e.yValues,"TextLabels",s(f).length):null),m=E(()=>s(v)?Array.isArray(e.labels)&&e.labels.length!==s(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=E(()=>s(m)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Nt("axes"),b=E(()=>s(f)&&s(h)!==null?tt(s(f),g.tX()):null),p=E(()=>s(v)&&s(b)?tt(s(v),g.tY()):null),_=E(()=>Qo[g.scales().plot]),w=E(()=>[0,0,-s(_),0,s(_),s(_)]),y=E(()=>[0,s(_),0,-s(_),0,s(_)]),C=E(()=>`fill:${o()};stroke-width:${a()}px;stroke:${l()};font-size:${c()}em;`),k=E(()=>s(b)&&s(p)&&s(h)!==null&&s(m)&&s(b).length===s(p).length);var A=me(),I=Q(A);{var N=M=>{var L=ed();L.__click=[Qf,e];var D=V(L);{var T=H=>{var W=me(),ne=Q(W);Ye(ne,17,()=>s(b),Xe,(j,z,G)=>{var X=Jf();S(X,"data-id",G);var Z=V(X);ht(Z,()=>e.labels,!0,!1),re(()=>{S(X,"x",s(b)[G]),S(X,"y",s(p)[G]),S(X,"dx",s(w)[r()]),S(X,"dy",s(y)[r()]),S(X,"transform",d()!==void 0?`rotate(${d()}, ${s(b)[G]+s(w)[r()]}, ${s(p)[G]+s(y)[r()]})`:""),S(X,"text-anchor",u[r()[G]])}),P(j,X)}),P(H,W)},F=H=>{var W=me(),ne=Q(W);{var j=G=>{var X=me(),Z=Q(X);Ye(Z,17,()=>s(b),Xe,($,ue,K)=>{var te=Zf();S(te,"data-id",K);var fe=V(te);ht(fe,()=>e.labels[K],!0,!1),re(()=>{S(te,"x",s(b)[K]),S(te,"y",s(p)[K]),S(te,"dx",s(w)[r()[K]]),S(te,"dy",s(y)[r()[K]]),S(te,"transform",d()!==void 0?`rotate(${d()}, ${s(b)[K]+s(w)[r()]}, ${s(p)[K]+s(y)[r()]})`:""),S(te,"text-anchor",u[r()[K]])}),P($,te)}),P(G,X)},z=G=>{var X=me(),Z=Q(X);Ye(Z,17,()=>s(b),Xe,($,ue,K)=>{var te=$f();S(te,"data-id",K);var fe=V(te);ht(fe,()=>e.labels[K],!0,!1),re(()=>{S(te,"x",s(b)[K]),S(te,"y",s(p)[K]),S(te,"dx",s(w)[r()]),S(te,"dy",s(y)[r()]),S(te,"transform",d()!==void 0?`rotate(${d()}, ${s(b)[K]+s(w)[r()]}, ${s(p)[K]+s(y)[r()]})`:""),S(te,"text-anchor",u[r()])}),P($,te)}),P(G,X)};U(ne,G=>{Array.isArray(r())||ArrayBuffer.isView(r())?G(j):G(z,!1)},!0)}P(H,W)};U(D,H=>{typeof e.labels=="string"?H(T):H(F,!1)})}re(()=>S(L,"style",s(C))),P(M,L)};U(I,M=>{s(k)&&M(N)})}P(t,A),pe()}Ze(["click"]),Ze(["click"]);var td=(t,e)=>Sr(t,"text",e.onclick),rd=ve("<text> </text>"),nd=ve('<g text-anchor="middle"></g>');function ll(t,e){ge(e,!0);let r=B(e,"marker",3,1),o=B(e,"faceColor",3,"transparent"),l=B(e,"lineColor",19,()=>Et.PRIMARY),a=B(e,"lineWidth",3,1),c=B(e,"markerSize",3,1);const d=E(()=>typeof r()!="number"||r()<1||r()>Qn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+Qn.length+"."),null):Qn[r()-1]),u=E(()=>bt(e.xValues,"Points")),f=E(()=>s(u)?bt(e.yValues,"Points",s(u).length):null),v=Nt("axes"),m=E(()=>s(u)?tt(s(u),v.tX()):null),h=E(()=>s(m)&&s(f)?tt(s(f),v.tY()):null),g=E(()=>["＋","✳","✕"].includes(s(d))?`fill:${l()&&l()!=="transparent"?l():o()};stroke-width:0px;font-size:${c()}em;`:`fill:${o()};stroke-width:${a()}px;stroke:${l()}; font-size:${c()}em;`),b=E(()=>["◼","⬥","＋","✳","✕"].includes(s(d))?"series-points2":"series-points1"),p=E(()=>s(m)&&s(h)&&s(m).length===s(h).length);var _=me(),w=Q(_);{var y=C=>{var k=nd();k.__click=[td,e],Ye(k,21,()=>s(m),Xe,(A,I,N)=>{var M=rd(),L=V(M);re(()=>{S(M,"x",s(m)[N]),S(M,"y",s(h)[N]),xe(L,s(d))}),P(A,M)}),re(()=>{No(k,`series series-points ${s(b)??""}`),S(k,"style",s(g))}),P(C,k)};U(w,C=>{s(p)&&C(y)})}P(t,_),pe()}Ze(["click"]);var od=(t,e)=>Sr(t,"polyline",e.onclick),ld=ve('<g class="series series-line"><polyline class="line"></polyline></g>');function Zr(t,e){ge(e,!0);let r=B(e,"lineColor",19,()=>Et.PRIMARY),o=B(e,"lineType",3,1),l=B(e,"lineWidth",3,1);const a=E(()=>bt(e.xValues,"Lines")),c=E(()=>s(a)?bt(e.yValues,"Lines",s(a).length):null),d=Nt("axes"),u=E(()=>s(a)&&s(c)?el(s(a),s(c),d.tX(),d.tY()):null),f=E(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${mn[d.scales().plot][o()-1]}`);var v=me(),m=Q(v);{var h=g=>{var b=ld();b.__click=[od,e];var p=V(b);re(()=>{S(b,"style",s(f)),S(p,"points",s(u))}),P(g,b)};U(m,g=>{s(u)&&g(h)})}P(t,v),pe()}Ze(["click"]);var sd=(t,e)=>Sr(t,"polyline",e.onclick),ad=ve('<polyline class="line"></polyline>'),id=ve('<g class="series series-multiline"></g>');function cd(t,e){ge(e,!0);let r=B(e,"lineColor",19,()=>Et.PRIMARY),o=B(e,"lineType",3,1),l=B(e,"lineWidth",3,1);const a=E(()=>bt(e.xValues,"Multilines")),c=E(()=>s(a)?pr(e.yValues)?(s(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),d=Nt("axes"),u=E(()=>{if(!s(a)||!s(c))return null;const g=new Array(s(c).ncols);for(let b=0;b<g.length;b++)g[b]=el(s(a),s(c).getcolumn(b+1),d.tX(),d.tY());return g}),f=E(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${mn[d.scales().plot][o()-1]}`);var v=me(),m=Q(v);{var h=g=>{var b=id();b.__click=[sd,e],Ye(b,21,()=>s(u),Xe,(p,_)=>{var w=ad();re(()=>S(w,"points",s(_))),P(p,w)}),re(()=>S(b,"style",s(f))),P(g,b)};U(m,g=>{s(u)&&s(u).length>0&&g(h)})}P(t,v),pe()}Ze(["click"]);function xa(t,e){ge(e,!0);let r=B(e,"show",3,!0),o=B(e,"labels",3,null),l=B(e,"labelColor",19,()=>Et.CLEGEND_LABELS),a=B(e,"fontSize",3,.85);const c=Nt("axes");ze(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:o(),labelColor:l(),fontSize:a()})}),pe()}function ud(t,e,r,o){e===void 0&&(e=!0),r===void 0&&(r=!1),o===void 0&&(o=!1);function l(u,f,v,m){if(typeof f=="boolean")return f?u.apply(v,2):We([m]).rep(u.ncols);if(!Ne(f))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(f.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return f}const a=l(t,e,Yn,0),c=l(t,r,jo,1),d=zt.zeros(t.nrows,t.ncols);for(let u=1;u<=t.ncols;u++){const f=t.getcolref(u),v=d.getcolref(u),m=a.v[u-1],h=1/c.v[u-1];for(let g=0;g<t.nrows;g++)v[g]=(f[g]-m)*h}return o?[d,a,c]:d}function sl(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const o=t.ncols,l=t.ncomp;let a,c;switch(e){case"mX":a=2,c=o;break;case"sX":a=2+o,c=o;break;case"loadings":case"xloadings":a=2+2*o+(r-1)*o,c=o;break;case"P":a=2+2*o,c=r*o;break;case"eigenvals":case"xeigenvals":a=2+2*o+o*l,c=l;break;case"cq0":a=2+2*o+o*l+l,c=l;break;case"cNq":a=2+2*o+o*l+2*l,c=l;break;case"rq0":a=2+2*o+o*l+3*l,c=l;break;case"rNq":a=2+2*o+o*l+4*l,c=l;break;case"ch0":a=2+2*o+o*l+5*l,c=l;break;case"cNh":a=2+2*o+o*l+6*l,c=l;break;case"rh0":a=2+2*o+o*l+7*l,c=l;break;case"rNh":a=2+2*o+o*l+8*l,c=l;break;case"cr0":a=2+2*o+o*l+9*l,c=l;break;case"cNr":a=2+2*o+o*l+10*l,c=l;break;case"rr0":a=2+2*o+o*l+11*l,c=l;break;case"rNr":a=2+2*o+o*l+12*l,c=l;break;case"cg0":a=2+2*o+o*l+13*l,c=l;break;case"cNg":a=2+2*o+o*l+14*l,c=l;break;case"rg0":a=2+2*o+o*l+15*l,c=l;break;case"rNg":a=2+2*o+o*l+16*l,c=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}const fd=t=>t;function dd(t,{delay:e=0,duration:r=400,easing:o=fd}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:o,css:a=>`opacity: ${a*l}`}}var vd=J('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function ka(t,e){ge(e,!0);function r(f){f.key==="Escape"&&e.closeModal()}var o=vd();vr("keydown",Mn,r);var l=V(o),a=V(l),c=V(a);c.__click=function(...f){var v;(v=e.closeModal)==null||v.apply(this,f)};var d=q(a,2),u=V(d);Er(u,()=>e.children),vc(7,o,()=>dd),P(t,o),pe()}Ze(["click"]);const hd=[1,1.1,.45,.4],Ea={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",alt:"#2679B2",new:"#2679B2"},Aa={cal:"#f0f8ff"},Ca="#a0a0a0",Ma="#909090",$r="#909090",al=8,md=8,gd=8,pd=600;function Sa(t,e){return!t||!e||e<0||e>t.ncomp?"":`PC${e} (${(t.stat.expvar[e-1]*100).toFixed(1)}%)`}function bd(t,e){if(t.length===e.length)return t;const r=e.length,o=new t.constructor(r);for(let l in e)o[l]=t[e[l]];return o}function _d(t,e){let r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)o=Math.min(o,t[c]),r=Math.max(r,t[c]);let l=tl(void 0,[o,r],e-1,!0,!1,0).v;const a=l[1]-l[0];if(l[0]>o){const c=l[0]-a;l=[c<o?c:o,...l]}if(l[l.length-1]<r){const c=l[l.length-1]+a;l=[...l,c>r?c:r]}return l}function wd(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=ua(e);return t.reduce((l,a,c)=>(l[a]=r[c],l),{})}function yd(t,e,r){const o=e.length,l=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let d=0;d<o-1;d++){const u=t[c]>=e[d],f=d===o-2?t[c]<e[d+1]+a:t[c]<e[d+1];if(u&&f){l[c]=r[d];break}}return l}function Na(t,e,r,o,l="cal"){if(!e)return null;let a,c,d,u,f;if(r==="groups"&&e.classNames){const v=wd(e.classNames);c=Object.keys(v).map(m=>v[m]),a=e.classNames,u=e.classes.map(m=>v[m]),d=new Array(a.length+1).map((m,h)=>h-.5),f=null}else if(r==="variable"){const v=bd(t.values.getcolref(o),e.objindices);f=t.varlabels[o-1],f.length>30&&(f=f.substring(0,29)+"..."),d=_d(v,10),c=ua(d.length-1),u=yd(v,d,c)}else a=null,d=null,c=null,u=Array(e.nrows).fill(Ea[l]);return{labels:a,map:c,breaks:d,colors:u,varname:f}}function xd(t,e,r=.95){const l=2*Math.PI/99,[a,c,d]=t,u=Math.sqrt((a+d)**2-4*(a*d-c*c));let f=.5*(a+d-u),v=.5*(a+d+u);if(f<v){let N=f;f=v,v=N}const m=Un(r,2),h=Math.sqrt(m*f),g=Math.sqrt(m*v);let b;if(Math.abs(c)<1e-7)b=0;else{let N=-c/(a-f),M=1;const L=Math.sqrt(N*N+M*M);N=N/L,M=M/L,b=Math.atan2(M,N),b<0&&(b=b+2*Math.PI)}const p=Math.cos(b),_=Math.sin(b),w=Ce.zeros(100),y=Ce.zeros(100);let C=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY;for(let N=0;N<100;N++){const M=N*l,L=h*Math.cos(M),D=g*Math.sin(M),T=L*p-D*_+e[0],F=L*_+D*p+e[1];w.v[N]=T,y.v[N]=F,C=Math.min(C,T),k=Math.max(k,T),A=Math.min(A,F),I=Math.max(I,F)}return[w,y,C,k,A,I]}function kd(t,e,r,o,l,a){if(!t||!e||!r||!o||!l)return null;const c=t.length,d=o.length,u=new Array(d).fill(0),f=new Array(d*2).fill(0);for(let _=0;_<c;_++){const w=o.indexOf(r[_]);u[w]+=1,f[w*2]+=t.v[_],f[w*2+1]+=e.v[_]}for(let _=0;_<d;_++)f[_*2]=f[_*2]/u[_],f[_*2+1]=f[_*2+1]/u[_];const v=new Array(d*3).fill(0);for(let _=0;_<c;_++){const w=o.indexOf(r[_]),y=t.v[_]-f[w*2],C=e.v[_]-f[w*2+1];v[w*3]+=y*y,v[w*3+1]+=y*C,v[w*3+2]+=C*C}let m=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;const p=Array(d);for(let _=0;_<d;_++){const[w,y,C,k,A,I]=xd([v[_*3]/(u[_]-1),v[_*3+1]/(u[_]-1),v[_*3+2]/(u[_]-1)],[f[_*2],f[_*2+1]],a);p[_]={x:w,y,c:l[_]},m=Math.min(m,C),h=Math.max(h,k),g=Math.min(g,A),b=Math.max(b,I)}return{ellipses:p,xRange:[m,h],yRange:[g,b]}}var Ed=J("<!> <!> <!> <!>",1);function Tr(t,e){let r=B(e,"whole",3,!1),o=pc(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Yf(t,Kr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",margins:hd,pngWidth:md,pngHeight:gd,pngRes:pd},()=>o,{children:(l,a)=>{var c=Ed(),d=Q(c);Er(d,()=>e.children);var u=q(d,2);ba(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var f=q(u,2);_a(f,{showGrid:!0,get label(){return e.yLabel}});var v=q(f,2);wa(v,{}),P(l,c)},$$slots:{default:!0}}))}function Ad(t,e){if(t.target.tagName!=="rect"){O(e,-1);return}const r=Array.from(t.target.parentNode.children).indexOf(t.target);if(r<0){O(e,-1);return}s(e)!==r&&O(e,ee(r))}var Cd=J("<!> <!> <!>",1),Md=J("<!> <!> <!> <!> <!>",1),Sd=J('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function Ta(t,e){ge(e,!0);let r=B(e,"outliers",19,()=>[]),o=le("residual"),l=le(-1),a=E(()=>s(u)&&s(l)>=0?s(u).values.v[s(l)]:null),c=E(()=>s(y)&&s(l)>=0?s(y).sel.v[s(l)]:null),d=E(()=>e.model&&s(l)>=0?e.model.varlabels[s(l)]:null),u=E(()=>{if(!e.model)return null;const M=We(e.model.varvalues),L=M.length,D=(M.v[1]-M.v[0])/2,T=(M.v[L-2]-M.v[L-1])/2,F=[M.v[0],M.v[L-1]],H=[F[0]-D,F[1]+T],W=(F[1]-F[0])/L;return{values:M,lim:H,width:W,hwidth:W*.5}}),f=E(()=>s(u)?s(u).values.apply(M=>M-s(u).hwidth):null),v=E(()=>{if(!e.dataset||!e.model)return null;const M=e.dataset.values,L=new Ce(sl(e.model,"mX")),D=new Ce(sl(e.model,"sX"));return ud(M,L,D).t()}),m=E(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new zt(sl(e.model,"P",e.ncomp),e.model.ncols,e.ncomp):null),h=E(()=>s(m)?Vc(s(m),s(m)):null),g=E(()=>s(v)&&s(h)?s(h).dot(s(v)):null),b=E(()=>s(g)?s(v).subtract(s(g)):null),p=E(()=>s(g)?s(g).getcolumn(e.selected+1):null),_=E(()=>s(b)?s(b).getcolumn(e.selected+1):null),w=E(()=>s(v)?s(v).getcolumn(e.selected+1):null),y=E(()=>{if(!s(p)||!s(_)||!s(w))return null;const M=s(o)==="explained"?{all:s(g),sel:s(p),label:"Explained part, TP^T"}:s(o)==="residual"?{all:s(b),sel:s(_),label:"Residuals, E"}:{all:s(v),sel:s(w),label:"Data, X"},L=zn(M.all.v),D=L[1]-L[0],T=[L[0]-D/50,L[1]+D/12],F=Ce.fill(L[1],M.sel.length);return M.lim=T,M.top=F,M.height=D,M});const C=E(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),k=E(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var A=me(),I=Q(A);{var N=M=>{ka(M,{get closeModal(){return e.closeModal},children:(L,D)=>{var T=Sd(),F=V(T);F.__click=[Ad,l];var H=V(F);Tr(H,{get title(){return s(C)},get yLabel(){return s(y).label},get xLabel(){return s(k)},get limY(){return s(y).lim},get limX(){return s(u).lim},fileName:"plot-contributions",children:(j,z)=>{var G=Md(),X=Q(G);cd(X,{get xValues(){return s(u).values},get yValues(){return s(y).all},lineColor:"#e0e0e0"});var Z=q(X,2);{var $=be=>{var _e=me(),ae=Q(_e);Ye(ae,17,r,Xe,(we,ie)=>{const ce=E(()=>s(y).all.getcolumn(s(ie)+1));Zr(we,{get xValues(){return s(u).values},get yValues(){return s(ce)},lineColor:"#ffdd88"})}),P(be,_e)};U(Z,be=>{r().length>0&&be($)})}var ue=q(Z,2);Zr(ue,{get xValues(){return s(u).values},get yValues(){return s(y).sel},lineColor:"crimson"});var K=q(ue,2);ya(K,{get left(){return s(f)},get top(){return s(y).top},get height(){return s(y).height},get width(){return s(u).width},faceColor:"transparent",borderColor:"transparent"});var te=q(K,2);{var fe=be=>{var _e=Cd(),ae=Q(_e);const we=E(()=>[s(a)]),ie=E(()=>[s(y).top.v[0]]),ce=E(()=>[s(d)]);ol(ae,{get xValues(){return s(we)},get yValues(){return s(ie)},get labels(){return s(ce)},pos:3,textSize:.85});var se=q(ae,2);const Te=E(()=>[s(a)]),Ee=E(()=>[s(c)]);ll(se,{get xValues(){return s(Te)},get yValues(){return s(Ee)},faceColor:"crimson",lineColor:"crimson"});var Le=q(se,2);const _t=E(()=>[s(f).v[s(l)]]),At=E(()=>[s(y).top.v[s(l)]]);ya(Le,{get left(){return s(_t)},get top(){return s(At)},get height(){return s(y).height},get width(){return s(u).width},faceColor:"#ff000015"}),P(be,_e)};U(te,be=>{s(l)>=0&&be(fe)})}P(j,G)},$$slots:{default:!0}});var W=q(F,4),ne=V(W);Me(ne,{label:"",children:(j,z)=>{ut(j,{id:"type",options:["full","explained","residual"],get value(){return s(o)},set value(G){O(o,ee(G))}})},$$slots:{default:!0}}),P(L,T)},$$slots:{default:!0}})};U(I,M=>{s(u)&&s(y)&&M(N)})}P(t,A),pe()}Ze(["click"]);var Nd=J("<!> <!> <!> <!>",1),Td=J("<p> </p>"),Pd=J("<!> <p>Computing global model...</p>",1),Id=J('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Ld=J('<div class="buttons"><!> <!></div>'),Rd=J("<!> <!>",1),jd=J("<p> </p>"),Fd=J("<!> <!> <!> <!>",1);function qd(t,e){ge(e,!0);let r=B(e,"resobj",15),o=B(e,"model",15),l=B(e,"downloadModel",3,null),a=B(e,"downloadResults",3,null),c=le("neutral"),d=le(""),u=le(1),f=le(!0),v=le(!1),m=le(void 0);async function h(L,D,T,F){O(m,ee(e.WASM().then(H=>{O(c,"computing");const W=Uc(H,L.values,D,T,F,e.outliers);W.hash=Fs(),W.exclvars=[],W.varlabels=L.varlabels,W.varindices=L.varindices,W.varvalues=L.varvalues,W.varvaluesName=L.varvaluesName,W.varvaluesUnits=L.varvaluesUnits,W.varrev=L.varrev,W.exclvars=[],W.prep=[];const ne=qs(H,W,L,e.outliers);o(W),r(ne),O(c,"success")}).catch(H=>{o(null),O(c,"error"),O(d,ee(H))})))}function g(L){O(c,"neutral"),O(d,null),h(e.dataset,s(u),s(f),s(v))}function b(){O(c,"neutral"),O(m,null),r(null),o(null),O(d,null)}let p=E(()=>e.dataset?Math.min(e.dataset.values.nrows-2-e.outliers.length,e.dataset.values.ncols-1,50):null);ze(()=>{e.dataset===null&&b()}),ze(()=>{O(u,ee(s(p)?Math.min(s(p),20):null))});var _=Fd(),w=Q(_);{var y=L=>{var D=Nd(),T=Q(D);Me(T,{label:"# of PCs",children:(ne,j)=>{au(ne,{id:"ncomp",min:1,get max(){return s(p)},step:1,decNum:0,get value(){return s(u)},set value(z){O(u,ee(z))}})},$$slots:{default:!0}});var F=q(T,2);Me(F,{label:"Center",children:(ne,j)=>{Ot(ne,{id:"center",options:["no","yes"],get value(){return s(f)},set value(z){O(f,ee(z))}})},$$slots:{default:!0}});var H=q(F,2);Me(H,{label:"Scale",children:(ne,j)=>{Ot(ne,{id:"scale",options:["no","yes"],get value(){return s(v)},set value(z){O(v,ee(z))}})},$$slots:{default:!0}});var W=q(H,2);Me(W,{label:" ",children:(ne,j)=>{qt(ne,{onclick:g,text:"Create model"})},$$slots:{default:!0}}),P(L,D)};U(w,L=>{e.dataset&&!o()&&s(c)!=="computing"&&L(y)})}var C=q(w,2);{var k=L=>{var D=me(),T=Q(D);$l(T,()=>s(m),F=>{Me(F,{children:(H,W)=>{var ne=Pd(),j=Q(ne);Qs(j),P(H,ne)},$$slots:{default:!0}})},void 0,(F,H)=>{Me(F,{status:"error",children:(W,ne)=>{var j=Td(),z=V(j);re(()=>xe(z,s(H))),P(W,j)},$$slots:{default:!0}})}),P(L,D)};U(C,L=>{s(m)&&L(k)})}var A=q(C,2);{var I=L=>{var D=Rd(),T=Q(D);Me(T,{children:(W,ne)=>{var j=Id(),z=Q(j),G=q(V(z)),X=q(z,2);hn(X,{onclick:b}),re(()=>xe(G,` ${o().ncomp??""} PCs${(o().center?", centered":"")??""}${(o().scale?", scaled":"")??""}`)),P(W,j)},$$slots:{default:!0}});var F=q(T,2);{var H=W=>{Me(W,{label:"Download",children:(ne,j)=>{var z=Ld(),G=V(z);qt(G,{onclick:()=>a()(r(),e.dataset,"train",e.outliers,o()),text:"Results"});var X=q(G,2);qt(X,{onclick:()=>l()(o()),text:"Model"}),P(ne,z)},$$slots:{default:!0}})};U(F,W=>{l()&&a()&&W(H)})}P(L,D)};U(A,L=>{o()&&L(I)})}var N=q(A,2);{var M=L=>{Me(L,{status:"error",children:(D,T)=>{var F=jd(),H=V(F);re(()=>xe(H,s(d))),P(D,F)},$$slots:{default:!0}})};U(N,L=>{(s(c)==="error"||s(d))&&L(M)})}P(t,_),pe()}var Od=J('<div class="msg-select">Click on an element to select object...</div>'),Bd=J('<div class="msg-select">Click anywhere to remove selection...</div>'),Vd=J('<div class="selected-buttons svelte-112cmye"><!></div>'),Dd=J("<!> <!>",1),zd=()=>switchPlot(i),Yd=(t,e,r)=>O(e,ee(s(r))),Wd=J('<button class="plot-selector svelte-112cmye"> </button>'),Ud=J('<div class="plot-container svelte-112cmye"><div class="plot-area svelte-112cmye"><div class="plot svelte-112cmye"><!></div> <div class="plot-select-msg svelte-112cmye"><!></div></div> <div class="plot-controls-area svelte-112cmye"></div></div>');function Pa(t,e){ge(e,!0);let r=B(e,"params",15),o=ee({objects:-1,variables:-1}),l=le(ee(Object.keys(e.plots)[0]));function a(y){o.objects=y}function c(y){o.objects=-1}let d={objects:{select:a,unselect:c},variables:{},stats:{}},u=E(()=>s(l)?e.plots[s(l)]:null),f=E(()=>s(u)?s(u).component:null);var v=Ud(),m=V(v),h=V(m),g=V(h);So(g,()=>s(f),(y,C)=>{C(y,{get params(){return r()[s(l)]},get callbacks(){return d[s(u).scope]},get selected(){return o[s(u).scope]},get props(){return e.props}})});var b=q(h,2),p=V(b);{var _=y=>{var C=me(),k=Q(C);{var A=N=>{var M=Od();P(N,M)},I=N=>{var M=Bd();P(N,M)};U(k,N=>{o[s(u).scope]<0?N(A):N(I,!1)})}P(y,C)};U(p,y=>{s(u).scope==="objects"&&r()[s(l)].plotType!=="l"&&y(_)})}var w=q(m,2);Ye(w,21,()=>Object.keys(e.plots),Xe,(y,C)=>{var k=me(),A=Q(k);{var I=M=>{var L=Dd(),D=Q(L);Cu(D,{get title(){return s(u).label},labelWidth:12,get options(){return e.controls[s(l)]},get value(){return r()[s(l)]},set value(H){r(r()[s(l)]=H,!0)}});var T=q(D,2);{var F=H=>{var W=Vd(),ne=V(W);Er(ne,()=>s(u).buttons,()=>o.objects),P(H,W)};U(T,H=>{s(u).buttons&&o.objects>=0&&H(F)})}P(M,L)},N=M=>{var L=Wd();L.__keydown=[zd],L.__click=[Yd,l,C];var D=V(L);re(()=>xe(D,e.plots[s(C)].label)),P(M,L)};U(A,M=>{s(u)&&s(l)===s(C)?M(I):M(N,!1)})}P(y,k)}),P(t,v),pe()}Ze(["keydown","click"]);function Ia(t,e){!e.callbacks||!e.callbacks.select||Sr(t,t.target.tagName,e.callbacks.select)}function Hd(t,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var Gd=ve("<text> </text>"),Xd=ve('<g class="series series-textlabels"></g>'),Kd=ve('<g class="series series-line"><polyline class="line"></polyline></g>'),Qd=ve("<rect></rect>"),Jd=ve('<g class="series series-bar"></g>'),Zd=ve("<text> </text>"),$d=ve('<g class="series series-points series-points1"></g>'),ev=ve('<g class="series series-points series-points1"><text> </text></g>'),tv=ve('<g class="series series-bar"><rect></rect></g>'),rv=ve('<g class="series series-text"><text> </text></g>'),nv=ve('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),ov=ve("<!><!><!><!><!>",1);function gn(t,e){ge(e,!0);let r=B(e,"shortenLabels",3,!0),o=B(e,"lineWidth",3,1),l=B(e,"pch",3,"●"),a=B(e,"colors",3,void 0),c=B(e,"mainColor",19,()=>Ea.cal),d=B(e,"faceColor",3,null),u=B(e,"selected",19,()=>-1),f=B(e,"xRange",15),v=B(e,"yRange",15);const m=Nt("axes"),h=E(()=>bt(e.xValues,"PlotSeries")),g=E(()=>s(h)?bt(e.yValues,"PlotSeries",s(h).length):null);ze(()=>{f(s(h)?zn(s(h)):null),v(s(g)?zn(s(g)):null)});const b=E(()=>d()===null?e.plotType==="p"?"transparent":"white":d()),p=E(()=>e.plotType==="p"?1:.7),_=E(()=>Qo[m.scales().plot]),w=E(()=>tt([0],m.tY())[0]),y=E(()=>Jo([.8],m.tX())[0]),C=E(()=>s(y)/2),k=E(()=>s(_));let A=E(()=>e.plotType==="l"||e.plotType==="b"?el(s(h),s(g),m.tX(),m.tY()):null),I=E(()=>s(h)?tt(s(h),m.tX()):null),N=E(()=>s(g)?tt(s(g),m.tY()):null),M=E(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(G=>G.slice(0,al)):e.labels:null),L=E(()=>a()&&a().length===s(h).length?a():Array(s(h).length).fill(c()));const D=E(()=>`font-size:${s(p)}em;fill:${s(b)};cursor:default;text-anchor:middle;stroke-width:2px;user-select:none;`),T=`font-size:0.85em;fill:${Ca};cursor:default;text-anchor:middle;stroke:${Ca};stroke-width:0.1px;user-select:none;`,F="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",H=`fill:transparent;stroke-width: ${o()}px;`,W=`stroke-width:${o()}px;`;var ne=me(),j=Q(ne);{var z=G=>{var X=ov(),Z=Q(X);{var $=ie=>{var ce=Xd();S(ce,"style",T),Ye(ce,21,()=>s(I),Xe,(se,Te,Ee)=>{var Le=Gd(),_t=V(Le);re(()=>{S(Le,"x",s(I)[Ee]),S(Le,"y",s(N)[Ee]),S(Le,"dy",s(g).v[Ee]<0?s(k):-s(k)),xe(_t,s(M)[Ee])}),P(se,Le)}),P(ie,ce)};U(Z,ie=>{e.showLabels&&s(M)&&ie($)})}var ue=q(Z);{var K=ie=>{var ce=Kd();S(ce,"style",H);var se=V(ce);re(()=>{S(se,"points",s(A)),S(se,"stroke",c())}),P(ie,ce)};U(ue,ie=>{(e.plotType==="l"||e.plotType==="b")&&ie(K)})}var te=q(ue);{var fe=ie=>{var ce=Jd();S(ce,"style",W),ce.__click=[Ia,e],Ye(ce,21,()=>s(I),Xe,(se,Te,Ee)=>{var Le=Qd();re(()=>{S(Le,"x",s(I)[Ee]-s(C)),S(Le,"y",s(g).v[Ee]<0?s(w):s(N)[Ee]),S(Le,"fill",s(L)[Ee]),S(Le,"width",s(y)),S(Le,"height",s(g).v[Ee]<0?s(N)[Ee]-s(w):s(w)-s(N)[Ee])}),P(se,Le)}),P(ie,ce)};U(te,ie=>{e.plotType==="h"&&ie(fe)})}var be=q(te);{var _e=ie=>{var ce=$d();ce.__click=[Ia,e],Ye(ce,21,()=>s(I),Xe,(se,Te,Ee)=>{var Le=Zd(),_t=V(Le);re(()=>{S(Le,"x",s(I)[Ee]),S(Le,"y",s(N)[Ee]),S(Le,"fill",d()),S(Le,"stroke",s(L)[Ee]),xe(_t,l())}),P(se,Le)}),re(()=>S(ce,"style",s(D))),P(ie,ce)};U(be,ie=>{(e.plotType==="p"||e.plotType==="b")&&ie(_e)})}var ae=q(be);{var we=ie=>{var ce=nv(),se=Q(ce);S(se,"x",0),S(se,"y",0),se.__click=[Hd,e];var Te=q(se);{var Ee=it=>{var ot=ev();S(ot,"style",F);var Je=V(ot),Pr=V(Je);re(()=>{S(Je,"x",s(I)[u()]),S(Je,"y",s(N)[u()]),S(Je,"stroke",s(L)[u()]),xe(Pr,l())}),P(it,ot)},Le=it=>{var ot=tv();S(ot,"style",W);var Je=V(ot);re(()=>{S(Je,"stroke",s(L)[u()]),S(Je,"fill",s(L)[u()]),S(Je,"x",s(I)[u()]-s(C)),S(Je,"y",s(g).v[u()]<0?s(w):s(N)[u()]),S(Je,"width",s(y)),S(Je,"height",s(g).v[u()]<0?s(N)[u()]-s(w):s(w)-s(N)[u()])}),P(it,ot)};U(Te,it=>{e.plotType!=="h"?it(Ee):it(Le,!1)})}var _t=q(Te);{var At=it=>{var ot=rv();S(ot,"style",T);var Je=V(ot);S(Je,"stroke",Ma),S(Je,"fill",Ma);var Pr=V(Je);re(()=>{S(Je,"x",s(I)[u()]),S(Je,"y",s(N)[u()]),S(Je,"dy",s(g).v[u()]<0?s(k):-s(k)),xe(Pr,s(M)[u()])}),P(it,ot)};U(_t,it=>{e.showLabels&&s(M)&&s(M).length>0&&it(At)})}P(ie,ce)};U(ae,ie=>{u()>=0&&ie(we)})}P(G,X)};U(j,G=>{s(I)&&s(N)&&G(z)})}P(t,ne),pe()}Ze(["click"]);function lv(t,e){ge(e,!0);let r=B(e,"lineColor",3,"#606060"),o=B(e,"lineType",3,2),l=B(e,"alpha",3,.05),a=B(e,"xRange",15),c=B(e,"yRange",15);const d=Ce.seq(0,2*Math.PI,.05);function u(_,w,y,C){const k=_.eigenvals[w-1],A=Un(1-l(),2),I=Math.sqrt(A*k),N=Ce.zeros(C.length);for(let M=0;M<C.length;M++)N.v[M]=I*y(C.v[M]);return[N,-I,I]}let f=E(()=>e.comp?e.comp[0]:null),v=E(()=>s(f)?u(e.resobj,s(f),Math.cos,d):null);ze(()=>{a(s(v)?[s(v)[1],s(v)[2]]:null)});let m=E(()=>e.comp?e.comp[1]:null),h=E(()=>s(m)?u(e.resobj,s(m),Math.sin,d):null);ze(()=>{c(s(h)?[s(h)[1],s(h)[2]]:null)});var g=me(),b=Q(g);{var p=_=>{Zr(_,{get xValues(){return s(v)[0]},get yValues(){return s(h)[0]},get lineColor(){return r()},get lineType(){return o()}})};U(b,_=>{s(v)&&s(h)&&_(p)})}P(t,g),pe()}function sv(t,e){ge(e,!0);let r=B(e,"confLevel",3,.95),o=B(e,"xRange",15),l=B(e,"yRange",15),a=E(()=>kd(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,r()));ze(()=>{s(a)?(o(s(a).xRange),l(s(a).yRange)):(o(null),l(null))});var c=me(),d=Q(c);{var u=f=>{var v=me(),m=Q(v);Ye(m,17,()=>s(a).ellipses,Xe,(h,g,b)=>{Zr(h,{get xValues(){return s(g).x},get yValues(){return s(g).y},get lineColor(){return e.groupColors[b]}})}),P(f,v)};U(d,f=>{s(a)&&s(a).ellipses&&f(u)})}P(t,c),pe()}var av=J("<!> <!> <!> <!> <!> <!>",1);function La(t,e){ge(e,!0);let r=B(e,"alpha",3,.05),o=E(()=>e.props&&e.props.data?e.props.data:null),l=E(()=>e.props&&e.props.res?e.props.res:null),a=E(()=>e.params&&e.params.resID?s(l)[e.params.resID]:null),c=E(()=>e.params&&e.params.resID?s(o)[e.params.resID]:null);function d(j,z,G,X,Z){if(!G)return null;let $=G[0],ue=G[1];j&&X&&($=Math.min($,X[0]),ue=Math.max(ue,X[1])),z!=="none"&&Z&&($=Math.min($,Z[0]),ue=Math.max(ue,Z[1]));const K=(ue-$)*.1;return{min:$,max:ue,d:K}}function u(j,z){if(!(!j||!z||z<1||z>j.ncomp))return new Ce(dn(j,"scores",z))}let f=le(void 0),v=le(void 0),m=le(void 0),h=le(void 0),g=le(void 0),b=le(void 0),p=E(()=>s(l)?We(s(a).objindices):null),_=E(()=>s(a)?s(a).objlabels.map(j=>j.slice(0,al)):null),w=E(()=>u(s(a),e.params.comp1)),y=E(()=>e.params.plotType==="p"?s(w):s(p)),C=E(()=>e.params.comp2?e.params.comp2:null),k=E(()=>u(s(a),s(C))),A=E(()=>Na(s(c),s(a),e.params.colorBy,e.params.colorByVar,e.params.resID)),I=E(()=>e.params.plotType==="p"?Sa(s(a),e.params.comp1):"Objects"),N=E(()=>Sa(s(a),e.params.comp2)),M=E(()=>d(e.params.showEllipse,e.params.confEllipse,s(f),s(m),s(g))),L=E(()=>s(M)?[s(M).min-s(M).d,s(M).max+s(M).d]:[0,1]),D=E(()=>d(e.params.showEllipse,e.params.confEllipse,s(v),s(h),s(b))),T=E(()=>s(D)?[s(D).min-s(D).d,s(D).max+s(D).d*(1+(e.params.colorBy!=="none"))]:[0,1]),F=E(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!s(A)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+s(A).varname+(s(c).varvaluesUnits?" "+s(c).varvaluesUnits:"")+")");var H=me(),W=Q(H);{var ne=j=>{Tr(j,{get title(){return s(F)},get limX(){return s(L)},get limY(){return s(T)},get xLabel(){return s(I)},get yLabel(){return s(N)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(z,G)=>{var X=av(),Z=Q(X);const $=E(()=>[s(L)[0]]),ue=E(()=>[s(L)[1]]);Nr(Z,{get xStart(){return s($)},get xEnd(){return s(ue)},yStart:[0],yEnd:[0],lineColor:$r});var K=q(Z,2);{var te=se=>{const Te=E(()=>[s(T)[0]]),Ee=E(()=>[s(T)[1]]);Nr(se,{xStart:[0],xEnd:[0],get yStart(){return s(Te)},get yEnd(){return s(Ee)},lineColor:$r})};U(K,se=>{e.params.plotType==="p"&&se(te)})}var fe=q(K,2);{var be=se=>{const Te=E(()=>[e.params.comp1,e.params.comp2]);lv(se,{get alpha(){return r()},get resobj(){return s(a)},get comp(){return s(Te)},get xRange(){return s(m)},set xRange(Ee){O(m,ee(Ee))},get yRange(){return s(h)},set yRange(Ee){O(h,ee(Ee))}})};U(fe,se=>{e.params.showEllipse&&e.params.plotType==="p"&&se(be)})}var _e=q(fe,2);{var ae=se=>{const Te=E(()=>Number.parseInt(e.params.confEllipse)/100);sv(se,{get xValues(){return s(y)},get yValues(){return s(k)},get confLevel(){return s(Te)},get groups(){return s(a).classes},get groupNames(){return s(a).classNames},get groupColors(){return s(A).map},get xRange(){return s(g)},set xRange(Ee){O(g,ee(Ee))},get yRange(){return s(b)},set yRange(Ee){O(b,ee(Ee))}})};U(_e,se=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&s(A)&&se(ae)})}var we=q(_e,2);gn(we,{get xValues(){return s(y)},get yValues(){return s(k)},get labels(){return s(_)},get selected(){return e.selected},get callbacks(){return e.callbacks},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return s(A).colors},get xRange(){return s(f)},set xRange(se){O(f,ee(se))},get yRange(){return s(v)},set yRange(se){O(v,ee(se))}});var ie=q(we,2);{var ce=se=>{const Te=E(()=>s(A).breaks!==null);xa(se,{get show(){return s(Te)},get colmap(){return s(A).map},get breaks(){return s(A).breaks},get labels(){return s(A).labels}})};U(ie,se=>{s(A)&&se(ce)})}P(z,X)},$$slots:{default:!0}})};U(W,j=>{s(y)&&s(k)&&j(ne)})}P(t,H),pe()}var iv=J("<!> <!> <!>",1);function cv(t,e){ge(e,!0);let r=E(()=>e.props?e.props.model:null);function o(k,A){return!k||!A||A<1||A>k.ncomp?null:new Ce(It(k,"loadings",A))}let l=le(void 0),a=le(void 0),c=E(()=>s(r)?We(s(r).varvalues):null),d=E(()=>s(r)?We(s(r).varindices):null),u=E(()=>o(s(r),e.params.comp1)),f=E(()=>!s(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:s(u),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&s(c)?{values:s(c),label:s(r).varvaluesName+(s(r).varvaluesUnits?", "+s(r).varvaluesUnits:"")}:{values:s(d),label:"Variables"}),v=E(()=>s(f)?s(f).values:null),m=E(()=>s(f)?s(f).label:null),h=E(()=>o(s(r),e.params.comp2)),g=E(()=>`PC${e.params.comp2}`),b=E(()=>{if(s(a)&&s(a)[0]<Number.POSITIVE_INFINITY&&s(a)[1]>Number.NEGATIVE_INFINITY){const k=(s(a)[1]-s(a)[0])*.1;return[s(a)[0]-k,s(a)[1]+k]}else return[0,1]}),p=E(()=>{if(s(l)&&s(l)[0]<Number.POSITIVE_INFINITY&&s(l)[1]>Number.NEGATIVE_INFINITY){const k=(s(l)[1]-s(l)[0])*.1;return e.params.plotType==="l"&&s(r).varrev?[s(l)[1]+k,s(l)[0]-k]:[s(l)[0]-k,s(l)[1]+k]}else return[0,1]}),_=E(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const k=Math.max(Math.abs(s(p)[0]),Math.abs(s(b)[0]),s(p)[1],s(b)[1])*1.05;return{x:[-k,k],y:[-k,k]}}else{const k=Math.max(Math.abs(s(b)[0]),s(b)[1])*1.05;return{x:s(p),y:[-k,k]}}return{x:s(p),y:s(b)}});var w=me(),y=Q(w);{var C=k=>{Tr(k,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return s(m)},get yLabel(){return s(g)},get limX(){return s(_).x},get limY(){return s(_).y},children:(A,I)=>{var N=iv(),M=Q(N);const L=E(()=>[s(_).x[0]]),D=E(()=>[s(_).x[1]]);Nr(M,{get xStart(){return s(L)},get xEnd(){return s(D)},yStart:[0],yEnd:[0],lineColor:$r});var T=q(M,2);{var F=W=>{const ne=E(()=>[s(_).y[0]]),j=E(()=>[s(_).y[1]]);Nr(W,{xStart:[0],xEnd:[0],get yStart(){return s(ne)},get yEnd(){return s(j)},lineColor:$r})};U(T,W=>{e.params.plotType==="p"&&W(F)})}var H=q(T,2);gn(H,{get xValues(){return s(v)},get yValues(){return s(h)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return s(r).varlabels},shortenLabels:!1,get xRange(){return s(l)},set xRange(W){O(l,ee(W))},get yRange(){return s(a)},set yRange(W){O(a,ee(W))}}),P(A,N)},$$slots:{default:!0}})};U(y,k=>{s(v)&&s(h)&&k(C)})}P(t,w),pe()}var uv=J("<!> <!> <!> <!> <!> <!> <!>",1);function Ra(t,e){ge(e,!0),B(e,"alpha",3,.05);const r="#2679B2",o="#D22C2F",l="#667892",a="#927866";let c=E(()=>e.props?e.props.model:null),d=E(()=>e.props?e.props.res:null),u=E(()=>s(d)?s(d)[e.params.resID]:null);function f(I,N){return`PC${N} (${(I.stat.expvar[N-1]*100).toFixed(1)}%)`}function v(I,N,M){if(!N||!M||I<1||I>s(d).ncomp)return null;const L=dn(N,"scores",I).slice(),D=It(M,"loadings",I),T=L.length,F=D.length;let H=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY;const ne=new Array(T);for(let K=0;K<T;K++)L[K]=L[K]/Math.sqrt(s(m)[I-1]*(T-1)),H>L[K]&&(H=L[K]),W<L[K]&&(W=L[K]),ne[K]=L[K]<0?1:3;const j=new Array(T);for(let K=0;K<F;K++)H>D[K]&&(H=D[K]),W<D[K]&&(W=D[K]),j[K]=D[K]<0?1:3;const z=new Ce(L),G=new Ce(D),X=f(N,I),Z=(W-H)/15,$=[H-Z,W+Z],ue=Math.max(Math.abs($[0]),$[1]);return{values:z,end:G,lim:$,label:X,tpos:ne,ppos:j,mx:ue}}let m=E(()=>s(c)?It(s(c),"eigenvals"):null),h=E(()=>s(u)?Ce.zeros(s(u).ncols):null),g=E(()=>s(u)?Ce.zeros(s(u).ncols):null),b=E(()=>v(e.params.comp1,s(u),s(c))),p=E(()=>v(e.params.comp2,s(u),s(c))),_=E(()=>s(b)&&s(p)?Math.max(s(b).mx,s(p).mx)*1.05:0),w=E(()=>s(b)?e.params.axesEqual?[-s(_),s(_)]:s(b).lim:[0,1]),y=E(()=>s(p)?e.params.axesEqual?[-s(_),s(_)]:s(p).lim:[0,1]);var C=me(),k=Q(C);{var A=I=>{Tr(I,{get limX(){return s(w)},get limY(){return s(y)},get xLabel(){return s(b).label},get yLabel(){return s(p).label},fileName:"plot-biplot",title:"Bi-plot (scores and loadings)",children:(N,M)=>{var L=uv(),D=Q(L);const T=E(()=>[s(w)[0]]),F=E(()=>[s(w)[1]]);Nr(D,{get xStart(){return s(T)},get xEnd(){return s(F)},yStart:[0],yEnd:[0],lineColor:$r});var H=q(D,2);const W=E(()=>[s(y)[0]]),ne=E(()=>[s(y)[1]]);Nr(H,{xStart:[0],xEnd:[0],get yStart(){return s(W)},get yEnd(){return s(ne)},lineColor:$r});var j=q(H,2);ll(j,{get xValues(){return s(b).values},get yValues(){return s(p).values},lineColor:o,borderWidth:1.5});var z=q(j,2);Nr(z,{get xStart(){return s(h)},get yStart(){return s(g)},get xEnd(){return s(b).end},get yEnd(){return s(p).end},lineColor:r});var G=q(z,2);ll(G,{get xValues(){return s(b).end},get yValues(){return s(p).end},marker:1,lineColor:r,faceColor:r,markerSize:.4});var X=q(G,2);{var Z=K=>{ol(K,{get xValues(){return s(b).values},get yValues(){return s(p).values},get labels(){return s(u).objlabels},get pos(){return s(p).tpos},textSize:.75,faceColor:a})};U(X,K=>{(e.params.showLabels==="obj"||e.params.showLabels==="both")&&K(Z)})}var $=q(X,2);{var ue=K=>{ol(K,{get xValues(){return s(b).end},get yValues(){return s(p).end},get labels(){return s(u).varlabels},textSize:.75,get pos(){return s(p).ppos},faceColor:l})};U($,K=>{(e.params.showLabels==="var"||e.params.showLabels==="both")&&K(ue)})}P(N,L)},$$slots:{default:!0}})};U(k,I=>{s(b)&&s(p)&&I(A)})}P(t,C),pe()}var fv=J("<!> <!> <!> <!>",1);function ja(t,e){ge(e,!0);let r=E(()=>e.props?e.props.res:null),o=E(()=>s(r)?s(r)[e.params.resID]:null);const l=[-.05,1.1],a={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"};let c=E(()=>e.params.varForm==="cumulative"?"cum":""),d=E(()=>e.params.varType==="explained"?"exp":"res"),u=E(()=>s(c)+s(d)+"var"),f=E(()=>a[s(u)]),v=E(()=>s(o)?[1-s(o).ncomp*.05,s(o).ncomp+s(o).ncomp*.05]:[0,1]),m=E(()=>s(o)?s(o).stat.components:null),h=E(()=>s(o)?We(s(o).stat[s(u)]):null),g=E(()=>s(h)?Array.from(s(h).v).map(w=>w.toFixed(w<.1?3:2)):null);var b=me(),p=Q(b);{var _=w=>{const y=E(()=>"plot-"+s(u));Tr(w,{get title(){return s(f)},get limX(){return s(v)},limY:l,get fileName(){return s(y)},children:(C,k)=>{var A=fv(),I=Q(A);gn(I,{get xValues(){return s(m)},get yValues(){return s(h)},get labels(){return s(g)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return Aa.cal},lineWidth:1.5});var N=q(I,2);ba(N,{showGrid:!0,label:"Number of PCs",whole:!0});var M=q(N,2);_a(M,{showGrid:!0,label:"Variance"});var L=q(M,2);wa(L,{}),P(C,A)},$$slots:{default:!0}})};U(p,w=>{s(m)&&s(h)&&w(_)})}P(t,b),pe()}function dv(t,e){ge(e,!0);let r=E(()=>e.props?e.props.model:null);const o={none:"λ",log:"log(λ)",sqrt:"sqrt(λ)"};function l(y,C){if(C==="none")return y;if(C==="log")return y.apply(k=>Math.log(k));if(C==="sqrt")return y.apply(k=>Math.sqrt(k))}let a=E(()=>s(r)?new Ce(It(s(r),"eigenvals")):null),c=E(()=>s(r)?Ce.seq(1,s(r).ncomp):null),d=E(()=>s(a)?l(s(a),e.params.transform):null),u=E(()=>s(d)?Array.from(s(d).v).map(y=>y.toFixed(y<.1?3:2)):null),f=E(()=>s(r)?[1-s(r).ncomp/15,s(r).ncomp+s(r).ncomp/20]:[0,1]),v=E(()=>s(d)?e.params.transform==="none"?0:s(d).v[s(r).ncomp-1]:0),m=E(()=>s(d)?s(d).v[0]:1),h=E(()=>(s(m)-s(v))/18),g=E(()=>s(d)?[s(v)-s(h),s(m)+s(h)]:[0,1]),b=E(()=>o[e.params.transform]);var p=me(),_=Q(p);{var w=y=>{Tr(y,{get limX(){return s(f)},get limY(){return s(g)},get yLabel(){return s(b)},whole:!0,xLabel:"Number of PCs",title:"Eigenvalues",fileName:"plot-eigenvalues",children:(C,k)=>{gn(C,{get xValues(){return s(c)},get yValues(){return s(d)},get labels(){return s(u)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return Aa.cal},lineWidth:1.5})},$$slots:{default:!0}})};U(_,y=>{s(c)&&s(d)&&y(w)})}P(t,p),pe()}var vv=J("<!> <!> <!> <!>",1);function Fa(t,e){ge(e,!0);let r=E(()=>e.props&&e.props.data?e.props.data:null),o=E(()=>e.props&&e.props.res?e.props.res:null),l=E(()=>e.params&&e.params.resID?s(o)[e.params.resID]:null),a=E(()=>e.params&&e.params.resID?s(r)[e.params.resID]:null);const c="#909090",d=100;function u(z,G,X,Z){if(!z||!G)return null;const $=z.length;let ue=Ce.zeros($),K=Number.NEGATIVE_INFINITY,te=Number.POSITIVE_INFINITY;if(Z==="log")for(let fe=0;fe<$;fe++){const be=Math.log(1+z[fe]/X);ue.v[fe]=be,K=Math.max(K,be),te=Math.min(te,be)}else for(let fe=0;fe<$;fe++){const be=z[fe]/X;ue.v[fe]=be,K=Math.max(K,be),te=Math.min(te,be)}return{values:ue,min:te,max:K}}function f(z,G){return{q:"Orthogonal distance",h:"Score distance"}[z]+", "+(G==="log"?"log(1 + "+z+"/"+z+"0)":z+"/"+z+"0")}function v(z,G,X,Z){const $=G+X,K=Un(z,$)/X,te=-G/X,fe=-K/te,be=Ce.seq(0,fe*1,fe/d),_e=be.apply(ae=>ae*te+K);return{x:Z==="log"?be.apply(ae=>Math.log(1+ae)):be,y:Z==="log"?_e.apply(ae=>Math.log(1+ae)):_e}}let m=E(()=>e.params.limType==="classic"?{h:s(l).cNh,q:s(l).cNq}:{h:s(l).rNh,q:s(l).rNq}),h=E(()=>e.params.limType==="classic"?{h:s(l).ch0,q:s(l).cq0}:{h:s(l).rh0,q:s(l).rq0}),g=E(()=>({h:s(m).h[e.params.ncomp-1],q:s(m).q[e.params.ncomp-1]})),b=E(()=>({h:s(h).h[e.params.ncomp-1],q:s(h).q[e.params.ncomp-1]})),p=E(()=>v(.95,s(g).h,s(g).q,e.params.transType)),_=E(()=>v(Math.pow(.99,1/s(l).nrows),s(g).h,s(g).q,e.params.transType)),w=E(()=>Na(s(a),s(l),e.params.colorBy,e.params.colorByVar,e.params.resID)),y=E(()=>s(l)?dn(s(l),"hdist",e.params.ncomp):null),C=E(()=>s(l)?dn(s(l),"qdist",e.params.ncomp):null),k=E(()=>u(s(y),s(g).h,s(b).h,e.params.transType)),A=E(()=>u(s(C),s(g).q,s(b).q,e.params.transType)),I=E(()=>s(l)?s(l).objlabels.map(z=>z.slice(0,al)):null),N=E(()=>"Distances (A = "+e.params.ncomp+")"),M=E(()=>f("h",e.params.transType)),L=E(()=>f("q",e.params.transType)),D=le(void 0),T=le(void 0),F=E(()=>{if(!s(k)||!s(D))return[0,1];const z=Math.max(s(k).max,s(_).x.v[d-1]);return[-.02*(z-s(D)[0]),1.05*z]}),H=E(()=>{if(!s(A)||!s(T))return[0,1];const z=Math.max(s(A).max,s(_).y.v[0]);return[-.02*(z-s(T)[0]),(1.05+.1*(e.params.colorBy!=="none"))*z]});var W=me(),ne=Q(W);{var j=z=>{Tr(z,{get title(){return s(N)},get limX(){return s(F)},get limY(){return s(H)},get xLabel(){return s(M)},get yLabel(){return s(L)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(G,X)=>{var Z=vv(),$=Q(Z);{var ue=ae=>{Zr(ae,{get xValues(){return s(p).x},get yValues(){return s(p).y},lineColor:c,lineType:2})};U($,ae=>{s(p)&&ae(ue)})}var K=q($,2);{var te=ae=>{Zr(ae,{get xValues(){return s(_).x},get yValues(){return s(_).y},lineColor:c,lineType:3})};U(K,ae=>{s(_)&&ae(te)})}var fe=q(K,2);gn(fe,{get labels(){return s(I)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return s(k).values},get yValues(){return s(A).values},plotType:"p",get showLabels(){return e.params.showLabels},get colors(){return s(w).colors},get xRange(){return s(D)},set xRange(ae){O(D,ee(ae))},get yRange(){return s(T)},set yRange(ae){O(T,ee(ae))}});var be=q(fe,2);{var _e=ae=>{const we=E(()=>s(w).breaks!==null);xa(ae,{get show(){return s(we)},get colmap(){return s(w).map},get breaks(){return s(w).breaks},get labels(){return s(w).labels}})};U(be,ae=>{s(w)&&ae(_e)})}P(G,Z)},$$slots:{default:!0}})};U(ne,z=>{s(k)&&s(A)&&z(j)})}P(t,W),pe()}function qa(t){const e=Object.keys(t),r=t[e[0]],o=r.classNames&&r.classNames.length>1?["none","groups","variable"]:["none","variable"];return{plotType:{el:Kn,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:br,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:br,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},resID:{el:ut,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},showLabels:{el:Ot,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},showEllipse:{el:Ot,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:ut,hidden:!1,default:"none",label:"Color by",props:{options:o}},colorByVar:{el:br,hidden:!0,default:1,label:"Variable",props:{min:1,max:r.ncols}},confEllipse:{el:ut,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}function hv(t){return{plotType:{el:Kn,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:br,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:br,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},showLabels:{el:Ot,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},axesEqual:{el:Ot,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function Oa(t){const e=Object.keys(t),r=t[e[0]];return{resID:{el:ut,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},comp2:{el:br,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:br,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:ut,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","obj","var","both"]}},axesEqual:{el:Ot,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function Ba(t){const e=Object.keys(t);return t[e[0]],{plotType:{el:Kn,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},resID:{el:ut,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},varType:{el:ut,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:ut,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Ot,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}}}function mv(t){return{plotType:{el:Kn,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},transform:{el:ut,hidden:!1,default:"none",label:"Type",props:{options:["none","sqrt","log"]}},showLabels:{el:Ot,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}}}function Va(t){const e=Object.keys(t),r=t[e[0]],o={ncomp:{el:br,hidden:!1,default:r.ncomp>1?2:1,label:"# PCs",props:{min:1,max:r.ncomp}},resID:{el:ut,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},transType:{el:ut,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:ut,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Ot,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}};return r.classNames&&r.classNames.length>1&&(o.colorBy={el:ut,hidden:!1,default:"none",label:"Color by",props:{options:["none","groups"]}}),o}var gv=J("<!> <!>",1);function pv(t,e){ge(e,!0);const r=(m,h=at)=>{Me(m,{label:"Selected",children:(g,b)=>{qt(g,{onclick:()=>e.markOutlier(h()),text:"remove"})},$$slots:{default:!0}})},o=(m,h=at)=>{Me(m,{label:"Selected",children:(g,b)=>{var p=gv(),_=Q(p);qt(_,{onclick:()=>e.markOutlier(h()),text:"remove"});var w=q(_,2);qt(w,{onclick:()=>e.showContributions(h(),s(u).distance.ncomp),text:"plot"}),P(g,p)},$$slots:{default:!0}})};let l={cal:e.resobj},a={cal:e.dataset};const c=E(()=>({scores:{label:"Scores",scope:"objects",component:La,buttons:r},loadings:{label:"Loadings",scope:"variables",component:cv},biplot:{label:"Bi-plot",scope:"stats",component:Ra},variance:{label:"Variance",scope:"stats",component:ja},eigenvals:{label:"Eigenvalues",scope:"stats",component:dv},distance:{label:"Distances",scope:"objects",component:Fa,buttons:o}})),d=ee({scores:qa(l),loadings:hv(e.model),biplot:Oa(l),variance:Ba(l),eigenvals:mv(e.model),distance:Va(l)});let u=le(ee({scores:$t(d.scores),loadings:$t(d.loadings),biplot:$t(d.biplot),variance:$t(d.variance),eigenvals:$t(d.eigenvals),distance:$t(d.distance)}));ze(()=>{s(u).scores.plotType!=="p"?(d.scores.comp1.hidden=!0,d.scores.showEllipse.hidden=!0,s(u).scores.showEllipse=!1):(d.scores.comp1.hidden=!1,d.scores.showEllipse.hidden=!1),s(u).scores.plotType==="l"||s(u).scores.plotType==="b"?(d.scores.colorBy.hidden=!0,s(u).scores.colorBy="none"):d.scores.colorBy.hidden=!1,s(u).scores.colorBy==="variable"?d.scores.colorByVar.hidden=!1:d.scores.colorByVar.hidden=!0,s(u).scores.colorBy==="groups"&&s(u).scores.plotType==="p"?d.scores.confEllipse.hidden=!1:(d.scores.confEllipse.hidden=!0,s(u).scores.confEllipse="none")}),ze(()=>{s(u).loadings.plotType!=="p"?d.loadings.comp1.hidden=!0:d.loadings.comp1.hidden=!1});const f=E(()=>({res:l,model:e.model,data:a})),v={markOutlier:e.markOutlier,showContributions:e.showContributions};Pa(t,{get plots(){return s(c)},get controls(){return d},get props(){return s(f)},callbacks:v,get params(){return s(u)},set params(m){O(u,ee(m))}}),pe()}var bv=J('<div class="outliers-pane svelte-1dk0fsp"><!></div>'),_v=J('<div class="model-calculator svelte-1dk0fsp"><!></div>'),wv=J('<div class="result-stats svelte-1dk0fsp"><!></div>'),yv=J(`<p class="svelte-1dk0fsp">In this tab you can train a PCA model and explore how well it describes the training set. After creating the model you can save it to a file and apply it to another, new set of samples, and see how well this new set is explained by the model (tab <strong>Project</strong>).</p> <p class="svelte-1dk0fsp"><strong>Step 1.</strong></p> <p class="svelte-1dk0fsp">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1dk0fsp">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. If this is the case, select <em>values</em> option for the header. In this case you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1dk0fsp">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. It is also possible to have group labels, which you can use, for example, to color group samples on the score plot. Here is an example how data structure may look like (note, that column with group, row labels and header are optional):</p> <div class="svelte-1dk0fsp"><table class="svelte-1dk0fsp"><thead class="svelte-1dk0fsp"><tr class="svelte-1dk0fsp"><td class="svelte-1dk0fsp">Name</td><td class="svelte-1dk0fsp">Group</td><td class="svelte-1dk0fsp">x1</td><td class="svelte-1dk0fsp">x2</td><td class="svelte-1dk0fsp">x3</td></tr></thead><tbody class="svelte-1dk0fsp"><tr><td class="svelte-1dk0fsp">O1</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">3.8</td><td class="svelte-1dk0fsp">1.3</td><td class="svelte-1dk0fsp">13.6</td></tr><tr><td class="svelte-1dk0fsp">O2</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">11.1</td><td class="svelte-1dk0fsp">12.3</td><td class="svelte-1dk0fsp">3.3</td></tr><tr><td class="svelte-1dk0fsp">O3</td><td class="svelte-1dk0fsp">A</td><td class="svelte-1dk0fsp">1.2</td><td class="svelte-1dk0fsp">2.3</td><td class="svelte-1dk0fsp">4.2</td></tr></tbody></table></div> <p class="svelte-1dk0fsp"></p>`,1),xv=J('<p class="svelte-1dk0fsp"><strong>Step 2</strong></p> <p class="svelte-1dk0fsp">Next step is to create a global PCA model for the training set. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to select number of components for every plot.</p>',1),kv=J('<div class="help-text svelte-1dk0fsp"><!></div>'),Ev=J('<!> <div class="app-container svelte-1dk0fsp"><div class="app-controls svelte-1dk0fsp"><div class="data-loader svelte-1dk0fsp"><!></div> <!> <!> <!></div> <div class="app-content svelte-1dk0fsp"><!></div></div>',1);function Av(t,e){ge(e,!0);let r=B(e,"s",15),o=le(-1),l=le(1),a=le(!1);function c(T){if(T<0||T>r().resobj.nrows-1)return;const F=r().resobj.objindices[T];F>=0&&!r().outliers.includes(F)&&(r().outliers.push(F),r(r().model=null,!0))}function d(T,F){T<0||(O(o,ee(T)),O(a,!0))}function u(){O(a,!1),O(o,-1),O(l,1)}function f(){r(r().outliers=[],!0),r(r().model=null,!0)}ze(()=>{r().dataset===null&&(r(r().model=null,!0),r(r().outliers=[],!0)),r().model===null&&r(r().resobj=null,!0)});var v=Ev(),m=Q(v);{var h=T=>{Ta(T,Kr(r,{get ncomp(){return s(l)},get selected(){return s(o)},closeModal:u}))};U(m,T=>{s(a)&&T(h)})}var g=q(m,2),b=V(g),p=V(b),_=V(p);Zs(_,{className:"Group",prefix:"pca-train-dataset",get dataset(){return r().dataset},set dataset(T){r(r().dataset=T,!0)}});var w=q(p,2);{var y=T=>{var F=bv(),H=V(F);ea(H,{get outliers(){return r().outliers},get dataset(){return r().dataset},resetOutliers:f}),P(T,F)};U(w,T=>{r().outliers&&r().outliers.length>0&&T(y)})}var C=q(w,2);{var k=T=>{var F=_v(),H=V(F);qd(H,{get WASM(){return e.WASM},downloadModel:$c,downloadResults:Ds,get dataset(){return r().dataset},get outliers(){return r().outliers},get model(){return r().model},set model(W){r(r().model=W,!0)},get resobj(){return r().resobj},set resobj(W){r(r().resobj=W,!0)}}),P(T,F)};U(C,T=>{r().dataset&&T(k)})}var A=q(C,2);{var I=T=>{var F=wv(),H=V(F);$s(H,{get resobj(){return r().resobj}}),P(T,F)};U(A,T=>{r().resobj&&T(I)})}var N=q(b,2),M=V(N);{var L=T=>{var F=kv(),H=V(F);{var W=j=>{var z=yv();P(j,z)},ne=j=>{var z=me(),G=Q(z);{var X=Z=>{var $=xv();P(Z,$)};U(G,Z=>{r().model||Z(X)})}P(j,z)};U(H,j=>{r().dataset?j(ne,!1):j(W)})}P(T,F)},D=T=>{var F=me(),H=Q(F);Bn(H,()=>r().resobj,W=>{pv(W,Kr({markOutlier:c,showContributions:d},r))}),P(T,F)};U(M,T=>{!r().resobj||!r().model?T(L):T(D,!1)})}P(t,v),pe()}var Cv=J("<!> <!>",1),Mv=J('<p class="model-info svelte-1l40o0h"><span>Model file:</span> <span class="file-name svelte-1l40o0h"> </span><br> <span style="color:#a0a0a0;">Model info:</span> </p> <!>',1),Sv=J("<p><!></p>"),Nv=J("<!> <!>",1);function Tv(t,e){ge(e,!0);let r=B(e,"model",15),o=le(""),l=le("neutral"),a=le("");function c(_){try{const w=JSON.parse(_,Vs);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain PCA mdel.");w.fileName=s(f),r(w),O(l,"success"),O(a,"")}catch(w){r(null),O(l,"error"),O(a,ee(w))}}function d(_){const w=new FileReader;w.onload=()=>{c(w.result)},w.readAsText(s(o))}function u(){O(o,""),r(null),O(l,"neutral"),O(a,"")}ze(()=>{s(o)===null?(r(null),O(l,"neutral"),O(a,"")):(O(l,"neutral"),O(a,""))});let f=E(()=>s(o)?s(o).name.replace(/\.[^/.]+$/,""):"");var v=Nv(),m=Q(v);{var h=_=>{var w=Cv(),y=Q(w);Bn(y,()=>s(o),A=>{Me(A,{children:(I,N)=>{Xs(I,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return s(o)},set file(M){O(o,ee(M))}})},$$slots:{default:!0}})});var C=q(y,2);{var k=A=>{Me(A,{label:" ",children:(I,N)=>{qt(I,{onclick:d,text:"Load"})},$$slots:{default:!0}})};U(C,A=>{s(o)&&A(k)})}P(_,w)},g=_=>{Me(_,{children:(w,y)=>{var C=Mv(),k=Q(C),A=q(V(k),2),I=V(A),N=q(A,4),M=q(k,2);hn(M,{onclick:u}),re(()=>{S(A,"title",r().fileName),xe(I,r().fileName),xe(N,` ${r().ncomp??""} PCs${(r().center?", centered":"")??""}${(r().scale?", scaled":"")??""}`)}),P(w,C)},$$slots:{default:!0}})};U(m,_=>{r()?_(g,!1):_(h)})}var b=q(m,2);{var p=_=>{Me(_,{status:"error",children:(w,y)=>{var C=Sv(),k=V(C);ht(k,()=>s(a),!1,!1),P(w,C)},$$slots:{default:!0}})};U(b,_=>{(s(l)==="error"||s(a))&&_(p)})}P(t,v),pe()}var Pv=J("<!> <!>",1);function Iv(t,e){ge(e,!0);const r=(m,h=at)=>{Me(m,{label:"Selected",children:(g,b)=>{qt(g,{onclick:()=>e.markOutlier(h()),text:"remove"})},$$slots:{default:!0}})},o=(m,h=at)=>{Me(m,{label:"Selected",children:(g,b)=>{var p=Pv(),_=Q(p);qt(_,{onclick:()=>e.markOutlier(h()),text:"remove"});var w=q(_,2);qt(w,{onclick:()=>e.showContributions(h(),s(u).distance.ncomp),text:"plot"}),P(g,p)},$$slots:{default:!0}})};let l={new:e.resobj},a={new:e.dataset};const c=E(()=>({scores:{label:"Scores",scope:"objects",component:La,buttons:r},biplot:{label:"Bi-plot",scope:"stats",component:Ra},variance:{label:"Variance",scope:"stats",component:ja},distance:{label:"Distances",scope:"objects",component:Fa,buttons:o}})),d=ee({scores:qa(l),biplot:Oa(l),variance:Ba(l),distance:Va(l)});let u=le(ee({scores:$t(d.scores),biplot:$t(d.biplot),variance:$t(d.variance),distance:$t(d.distance)}));ze(()=>{s(u).scores.plotType!=="p"?(d.scores.comp1.hidden=!0,d.scores.showEllipse.hidden=!0,s(u).scores.showEllipse=!1):(d.scores.comp1.hidden=!1,d.scores.showEllipse.hidden=!1),s(u).scores.plotType==="l"||s(u).scores.plotType==="b"?(d.scores.colorBy.hidden=!0,s(u).scores.colorBy="none"):d.scores.colorBy.hidden=!1,s(u).scores.colorBy==="variable"?d.scores.colorByVar.hidden=!1:d.scores.colorByVar.hidden=!0,s(u).scores.colorBy==="groups"&&s(u).scores.plotType==="p"?d.scores.confEllipse.hidden=!1:(d.scores.confEllipse.hidden=!0,s(u).scores.confEllipse="none")});const f=E(()=>({res:l,model:e.model,data:a})),v={markOutlier:e.markOutlier,showContributions:e.showContributions};Pa(t,{get plots(){return s(c)},get controls(){return d},get props(){return s(f)},callbacks:v,get params(){return s(u)},set params(m){O(u,ee(m))}}),pe()}var Lv=J('<div class="data-loader svelte-1mqkfgh"><!></div>'),Rv=J('<div class="outliers-pane svelte-1mqkfgh"><!></div>'),jv=J('<div class="buttons"><!></div>'),Fv=J('<div class="model-dowloader svelte-1mqkfgh"><!></div> <div class="result-stats svelte-1mqkfgh"><!></div>',1),qv=J('<p class="svelte-1mqkfgh"><strong>Step 1.</strong></p> <p class="svelte-1mqkfgh">Load file with PCA model you created earlier in tab <strong>Train</strong></p>',1),Ov=J('<p class="svelte-1mqkfgh"><strong>Step 2.</strong></p> <p class="svelte-1mqkfgh">Load your dataset set from a CSV file. The interface and selection steps are similar to the ones you used in <em>Train</em> tab. However, in this case you do not need to specify all details for header, just select if the new dataset has header as a first row or not. All values will be inherited from the model object.</p> <p class="svelte-1mqkfgh"><strong>It is important that the new dataset has same variables as the training set used to create the model.</strong></p>',1),Bv=J('<div class="help-text svelte-1mqkfgh"><p class="svelte-1mqkfgh">In this tab you can project new data points to a previosly trained PCA model and explore main outcomes: scores, distances and variances.</p> <!> <p class="svelte-1mqkfgh"></p></div>'),Vv=J('<!> <div class="app-container svelte-1mqkfgh"><div class="app-controls svelte-1mqkfgh"><div class="model-loader svelte-1mqkfgh"><!></div> <!> <!> <!></div> <div class="app-content svelte-1mqkfgh"><!></div></div>',1);function Dv(t,e){ge(e,!0);let r=B(e,"s",15),o=le(-1),l=le(1),a=le(!1);function c(T){if(T<0||T>r().resobj.nrows-1)return;const F=r().resobj.objindices[T];F>=0&&!r().outliers.includes(F)&&(r().outliers.push(F),r(r().resobj=null,!0))}function d(T,F){T<0||(O(o,ee(T)),O(a,!0))}function u(){O(a,!1),O(o,-1),O(l,1)}function f(){r(r().outliers=[],!0),r(r().resobj=null,!0)}ze(()=>{r().model===null&&r(r().dataset=null,!0),r().dataset===null&&(r(r().outliers=[],!0),r(r().resobj=null,!0))});var v=Vv(),m=Q(v);{var h=T=>{Ta(T,Kr(r,{get ncomp(){return s(l)},get selected(){return s(o)},closeModal:u}))};U(m,T=>{s(a)&&T(h)})}var g=q(m,2),b=V(g),p=V(b),_=V(p);Tv(_,{get model(){return r().model},set model(T){r(r().model=T,!0)}});var w=q(p,2);{var y=T=>{var F=Lv(),H=V(F);Zs(H,{get outliers(){return r().outliers},get WASM(){return e.WASM},get model(){return r().model},className:"Group",get dataset(){return r().dataset},set dataset(W){r(r().dataset=W,!0)},get resobj(){return r().resobj},set resobj(W){r(r().resobj=W,!0)}}),P(T,F)};U(w,T=>{r().model&&T(y)})}var C=q(w,2);{var k=T=>{var F=Rv(),H=V(F);ea(H,{get dataset(){return r().dataset},get outliers(){return r().outliers},resetOutliers:f}),P(T,F)};U(C,T=>{r().outliers&&r().outliers.length>0&&T(k)})}var A=q(C,2);{var I=T=>{var F=Fv(),H=Q(F),W=V(H);Me(W,{label:"Download",children:(z,G)=>{var X=jv(),Z=V(X);qt(Z,{text:"Results",onclick:()=>Ds(r().resobj,r().dataset,"new",r().outliers)}),P(z,X)},$$slots:{default:!0}});var ne=q(H,2),j=V(ne);$s(j,{get resobj(){return r().resobj}}),P(T,F)};U(A,T=>{r().resobj&&T(I)})}var N=q(b,2),M=V(N);{var L=T=>{var F=Bv(),H=q(V(F),2);{var W=j=>{var z=qv();P(j,z)},ne=j=>{var z=me(),G=Q(z);{var X=Z=>{var $=Ov();P(Z,$)};U(G,Z=>{r().dataset||Z(X)},!0)}P(j,z)};U(H,j=>{r().model?j(ne,!1):j(W)})}P(T,F)},D=T=>{var F=me(),H=Q(F);Bn(H,()=>r().resobj,W=>{Iv(W,Kr({markOutlier:c,showContributions:d},r))}),P(T,F)};U(M,T=>{r().resobj?T(D,!1):T(L)})}P(t,v),pe()}function Da(t,e){O(e,!0)}function zv(t,e,r){window.localStorage.removeItem(e.appID+"-blocked"),window.localStorage.removeItem(e.appID),O(r,ee(e.initSession()))}function Yv(t,e,r){const o=Xo(new Date),l=e.appID+"-session-"+o+".json";s(r).date=o;const a=JSON.stringify(s(r),Bs),c=new Blob([a],{type:"text/json"}),d=window.URL.createObjectURL(c),u=document.createElement("a");u.setAttribute("href",d),u.setAttribute("download",l),u.click()}var Wv=J('<sup style="color:red">β</sup>'),Uv=J('<li class="nav-item svelte-1946064"><button class="svelte-1946064"> </button></li>'),Hv=J('<div class="app-container svelte-1946064"><!></div>'),Gv=J('<div class="info-container svelte-1946064"><!></div>'),Xv=J('<div class="page svelte-1946064"><header class="page-header svelte-1946064"><div class="header-group svelte-1946064"><img class="logo svelte-1946064" src="logo.svg"> <h1 class="svelte-1946064"> <!></h1> <p class="svelte-1946064"> </p></div> <ul class="nav svelte-1946064"></ul></header> <main class="svelte-1946064"></main> <footer class="svelte-1946064"><div class="session svelte-1946064"><span class="session-message svelte-1946064"> </span> <label title="load session from file" class="upload-button svelte-1946064"><input type="file" class="svelte-1946064">⬆</label> <button title="download session as a file" class="download-button svelte-1946064">⬇</button> <button title="reset all sessions" class="clear-button svelte-1946064">✖</button></div> <div class="info svelte-1946064"><button class="button-info svelte-1946064">info</button> <!></div></footer> <!></div>');function Kv(t,e){ge(e,!0);let r=B(e,"tabs",19,()=>[]),o=B(e,"isBeta",3,!1),l=le(!1),a=le(void 0),c=le("Current session "),d=le(!1);function u(){O(l,!1)}function f(w){s(a).tab=w}function v(){s(a).date=Xo(new Date),window.localStorage.setItem(e.appID,JSON.stringify(s(a),Bs)),window.localStorage.removeItem(e.appID+"-blocked")}function m(){if(window.localStorage.getItem(e.appID+"-blocked")){O(a,ee(e.initSession()));return}h(window.localStorage.getItem(e.appID)),window.localStorage.setItem(e.appID+"-blocked","yes"),O(c,"Last session is restored "),O(d,!0),setTimeout(()=>{O(c,"Current session "),O(d,!1)},2e3)}function h(w){if(!w||w==="undefined"){O(a,ee(e.initSession()));return}const y=JSON.parse(w,Vs);O(a,ee(e.checkSession(y)?y:e.initSession(e.appID)))}function g(w){e.resetSession(s(a));const y=new FileReader;y.onload=()=>{h(y.result),w.target.value=""},y.readAsText(w.target.files[0])}_c(()=>{v()}),fs(()=>{m()});var b=me();vr("beforeunload",Mn,v);var p=Q(b);{var _=w=>{var y=Xv(),C=V(y),k=V(C),A=V(k),I=q(A,2),N=V(I),M=q(N);{var L=_e=>{var ae=Wv();P(_e,ae)};U(M,_e=>{o()&&_e(L)})}var D=q(I,2),T=V(D),F=q(k,2);Ye(F,21,r,Xe,(_e,ae,we)=>{var ie=Uv(),ce=V(ie);ce.__click=()=>f(we),ce.__keydown=()=>f(we);var se=V(ce);re(()=>{xt(ie,"selected",s(a).tab===we),xe(se,s(ae).name)}),P(_e,ie)});var H=q(C,2);Ye(H,21,r,Xe,(_e,ae,we)=>{var ie=Hv(),ce=V(ie);So(ce,()=>s(ae).component,(se,Te)=>{Te(se,{get WASM(){return e.WASM},get s(){return s(a)[s(ae).label]}})}),re(()=>xt(ie,"hidden",s(a).tab!==we)),P(_e,ie)});var W=q(H,2),ne=V(W),j=V(ne),z=V(j),G=q(j,2),X=V(G);X.__change=g;var Z=q(G,2);Z.__click=[Yv,e,a];var $=q(Z,2);$.__click=[zv,e,a];var ue=q(ne,2),K=V(ue);K.__click=[Da,l],K.__keydown=[Da,l];var te=q(K,2);Er(te,()=>e.footer);var fe=q(W,2);{var be=_e=>{ka(_e,{closeModal:u,children:(ae,we)=>{var ie=Gv(),ce=V(ie);Er(ce,()=>e.info),P(ae,ie)},$$slots:{default:!0}})};U(fe,_e=>{s(l)&&_e(be)})}re(()=>{S(A,"alt",e.appShortTitle),xe(N,e.appTitle),xe(T,e.appSlogan),xt(ne,"no-buttons",s(d)),xe(z,s(c))}),P(w,y)};U(p,w=>{s(a)&&w(_)})}P(t,b),pe()}Ze(["click","keydown","change"]);const l1="modulepreload",s1=function(t){return"/"+t},a1={},Qv=function(e,r,o){let l=Promise.resolve();function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return l.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var Jv=(()=>{var t=Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href;return async function(e={}){var r,o=e,l,a,c=new Promise((R,Y)=>{l=R,a=Y}),d=typeof window=="object",u=typeof WorkerGlobalScope<"u",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(f){const{createRequire:R}=await Qv(()=>Promise.resolve().then(()=>t1),void 0);let Y=Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href;Y.startsWith("data:")&&(Y="/");var v=R(Y)}var m=Object.assign({},o),h=(R,Y)=>{throw Y},g="";function b(R){return o.locateFile?o.locateFile(R,g):g+R}var p,_;if(f){var w=v("fs"),y=v("path");(Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href).startsWith("data:")||(g=y.dirname(v("url").fileURLToPath(Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href))+"/"),_=R=>{R=_e(R)?new URL(R):y.normalize(R);var Y=w.readFileSync(R);return Y},p=(R,Y=!0)=>(R=_e(R)?new URL(R):y.normalize(R),new Promise((oe,de)=>{w.readFile(R,Y?void 0:"utf8",(He,Ge)=>{He?de(He):oe(Y?Ge.buffer:Ge)})})),!o.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),h=(R,Y)=>{throw process.exitCode=R,Y}}else(d||u)&&(u?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g.startsWith("blob:")?g="":g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(_=R=>{var Y=new XMLHttpRequest;return Y.open("GET",R,!1),Y.responseType="arraybuffer",Y.send(null),new Uint8Array(Y.response)}),p=R=>_e(R)?new Promise((Y,oe)=>{var de=new XMLHttpRequest;de.open("GET",R,!0),de.responseType="arraybuffer",de.onload=()=>{if(de.status==200||de.status==0&&de.response){Y(de.response);return}oe(de.status)},de.onerror=oe,de.send(null)}):fetch(R,{credentials:"same-origin"}).then(Y=>Y.ok?Y.arrayBuffer():Promise.reject(new Error(Y.status+" : "+Y.url))));o.print||console.log.bind(console);var C=o.printErr||console.error.bind(console);Object.assign(o,m),m=null,o.arguments&&o.arguments,o.thisProgram&&o.thisProgram;var k=o.wasmBinary,A,I=!1,N,M,L;function D(){var R=A.buffer;o.HEAP8=M=new Int8Array(R),o.HEAP16=new Int16Array(R),o.HEAPU8=L=new Uint8Array(R),o.HEAPU16=new Uint16Array(R),o.HEAP32=new Int32Array(R),o.HEAPU32=new Uint32Array(R),o.HEAPF32=new Float32Array(R),o.HEAPF64=new Float64Array(R)}var T=[],F=[],H=[];function W(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)z(o.preRun.shift());At(T)}function ne(){At(F)}function j(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)X(o.postRun.shift());At(H)}function z(R){T.unshift(R)}function G(R){F.unshift(R)}function X(R){H.unshift(R)}var Z=0,$=null;function ue(R){var Y;Z++,(Y=o.monitorRunDependencies)==null||Y.call(o,Z)}function K(R){var oe;if(Z--,(oe=o.monitorRunDependencies)==null||oe.call(o,Z),Z==0&&$){var Y=$;$=null,Y()}}function te(R){var oe;(oe=o.onAbort)==null||oe.call(o,R),R="Aborted("+R+")",C(R),I=!0,R+=". Build with -sASSERTIONS for more info.";var Y=new WebAssembly.RuntimeError(R);throw a(Y),Y}var fe="data:application/octet-stream;base64,",be=R=>R.startsWith(fe),_e=R=>R.startsWith("file://");function ae(){if(o.locateFile){var R="pca_wasm.wasm";return be(R)?R:b(R)}return new URL("/pca-beta/pca.wasm",Ae&&Ae.tagName.toUpperCase()==="SCRIPT"&&Ae.src||new URL("pca.js",document.baseURI).href).href}var we;function ie(R){if(R==we&&k)return new Uint8Array(k);if(_)return _(R);throw"both async and sync fetching of the wasm failed"}function ce(R){return k?Promise.resolve().then(()=>ie(R)):p(R).then(Y=>new Uint8Array(Y),()=>ie(R))}function se(R,Y,oe){return ce(R).then(de=>WebAssembly.instantiate(de,Y)).then(oe,de=>{C(`failed to asynchronously prepare wasm: ${de}`),te(de)})}function Te(R,Y,oe,de){return!R&&typeof WebAssembly.instantiateStreaming=="function"&&!be(Y)&&!_e(Y)&&!f&&typeof fetch=="function"?fetch(Y,{credentials:"same-origin"}).then(He=>{var Ge=WebAssembly.instantiateStreaming(He,oe);return Ge.then(de,function(Oe){return C(`wasm streaming compile failed: ${Oe}`),C("falling back to ArrayBuffer instantiation"),se(Y,oe,de)})}):se(Y,oe,de)}function Ee(){return{a:ar}}function Le(){var R=Ee();function Y(de,He){return Fe=de.exports,A=Fe.h,D(),G(Fe.i),K(),Fe}ue();function oe(de){Y(de.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(R,Y)}catch(de){C(`Module.instantiateWasm callback failed with error: ${de}`),a(de)}return we??(we=ae()),Te(k,we,R,oe).catch(a),{}}class _t{constructor(Y){Rr(this,"name","ExitStatus");this.message=`Program terminated with exit(${Y})`,this.status=Y}}var At=R=>{for(;R.length>0;)R.shift()(o)},it=o.noExitRuntime||!0,ot=R=>za(R),Je=()=>Wa(),Pr=()=>{te("")},Ir=(R,Y,oe)=>L.copyWithin(R,Y,Y+oe),bn=0,to=()=>{it=!1,bn=0},er={},ro=R=>{if(R instanceof _t||R=="unwind")return N;h(1,R)},no=()=>it||bn>0,oo=R=>{var Y;N=R,no()||((Y=o.onExit)==null||Y.call(o,R),I=!0),h(R,new _t(R))},il=(R,Y)=>{N=R,oo(R)},cl=il,ye=()=>{if(!no())try{cl(N)}catch(R){ro(R)}},Pe=R=>{if(!I)try{R(),ye()}catch(Y){ro(Y)}},Se=()=>performance.now(),rt=(R,Y)=>{if(er[R]&&(clearTimeout(er[R].id),delete er[R]),!Y)return 0;var oe=setTimeout(()=>{delete er[R],Pe(()=>lo(R,Se()))},Y);return er[R]={id:oe,timeout_ms:Y},0},mt=()=>Date.now(),Ut=()=>2147483648,Ct=(R,Y)=>Math.ceil(R/Y)*Y,Mt=R=>{var Y=A.buffer,oe=(R-Y.byteLength+65535)/65536|0;try{return A.grow(oe),D(),1}catch{}},Ue=R=>{var Y=L.length;R>>>=0;var oe=Ut();if(R>oe)return!1;for(var de=1;de<=4;de*=2){var He=Y*(1+.2/de);He=Math.min(He,R+100663296);var Ge=Math.min(oe,Ct(Math.max(R,He),65536)),Oe=Mt(Ge);if(Oe)return!0}return!1},Re=R=>{var Y=o["_"+R];return Y},ft=(R,Y)=>{M.set(R,Y)},st=R=>{for(var Y=0,oe=0;oe<R.length;++oe){var de=R.charCodeAt(oe);de<=127?Y++:de<=2047?Y+=2:de>=55296&&de<=57343?(Y+=4,++oe):Y+=3}return Y},nt=(R,Y,oe,de)=>{if(!(de>0))return 0;for(var He=oe,Ge=oe+de-1,Oe=0;Oe<R.length;++Oe){var Be=R.charCodeAt(Oe);if(Be>=55296&&Be<=57343){var St=R.charCodeAt(++Oe);Be=65536+((Be&1023)<<10)|St&1023}if(Be<=127){if(oe>=Ge)break;Y[oe++]=Be}else if(Be<=2047){if(oe+1>=Ge)break;Y[oe++]=192|Be>>6,Y[oe++]=128|Be&63}else if(Be<=65535){if(oe+2>=Ge)break;Y[oe++]=224|Be>>12,Y[oe++]=128|Be>>6&63,Y[oe++]=128|Be&63}else{if(oe+3>=Ge)break;Y[oe++]=240|Be>>18,Y[oe++]=128|Be>>12&63,Y[oe++]=128|Be>>6&63,Y[oe++]=128|Be&63}}return Y[oe]=0,oe-He},Ke=(R,Y,oe)=>nt(R,L,Y,oe),Lt=R=>Ya(R),Lr=R=>{var Y=st(R)+1,oe=Lt(Y);return Ke(R,oe,Y),oe},qe=typeof TextDecoder<"u"?new TextDecoder:void 0,he=(R,Y=0,oe=NaN)=>{for(var de=Y+oe,He=Y;R[He]&&!(He>=de);)++He;if(He-Y>16&&R.buffer&&qe)return qe.decode(R.subarray(Y,He));for(var Ge="";Y<He;){var Oe=R[Y++];if(!(Oe&128)){Ge+=String.fromCharCode(Oe);continue}var Be=R[Y++]&63;if((Oe&224)==192){Ge+=String.fromCharCode((Oe&31)<<6|Be);continue}var St=R[Y++]&63;if((Oe&240)==224?Oe=(Oe&15)<<12|Be<<6|St:Oe=(Oe&7)<<18|Be<<12|St<<6|R[Y++]&63,Oe<65536)Ge+=String.fromCharCode(Oe);else{var Ht=Oe-65536;Ge+=String.fromCharCode(55296|Ht>>10,56320|Ht&1023)}}return Ge},dt=(R,Y)=>R?he(L,R,Y):"",ul=(R,Y,oe,de,He)=>{var Ge={string:wt=>{var wn=0;return wt!=null&&wt!==0&&(wn=Lr(wt)),wn},array:wt=>{var wn=Lt(wt.length);return ft(wt,wn),wn}};function Oe(wt){return Y==="string"?dt(wt):Y==="boolean"?!!wt:wt}var Be=Re(R),St=[],Ht=0;if(de)for(var Gt=0;Gt<de.length;Gt++){var ao=Ge[oe[Gt]];ao?(Ht===0&&(Ht=Je()),St[Gt]=ao(de[Gt])):St[Gt]=de[Gt]}var _n=Be(...St);function fl(wt){return Ht!==0&&ot(Ht),Oe(wt)}return _n=fl(_n),_n},ar={c:Pr,f:Ir,b:to,d:rt,g:mt,e:Ue,a:oo},Fe=Le();o._pcafit_wasm=(R,Y,oe,de,He,Ge,Oe,Be,St,Ht,Gt)=>(o._pcafit_wasm=Fe.j)(R,Y,oe,de,He,Ge,Oe,Be,St,Ht,Gt),o._malloc=R=>(o._malloc=Fe.k)(R),o._free=R=>(o._free=Fe.l)(R),o._pcapredict_wasm=(R,Y,oe,de,He,Ge,Oe,Be,St)=>(o._pcapredict_wasm=Fe.m)(R,Y,oe,de,He,Ge,Oe,Be,St),o._pcvpca_wasm=(R,Y,oe,de,He,Ge,Oe,Be,St,Ht,Gt,ao,_n,fl,wt)=>(o._pcvpca_wasm=Fe.n)(R,Y,oe,de,He,Ge,Oe,Be,St,Ht,Gt,ao,_n,fl,wt);var lo=(R,Y)=>(lo=Fe.p)(R,Y),za=R=>(za=Fe.q)(R),Ya=R=>(Ya=Fe.r)(R),Wa=()=>(Wa=Fe.s)();o.ccall=ul;var so;$=function R(){so||Ua(),so||($=R)};function Ua(){if(Z>0||(W(),Z>0))return;function R(){var Y;so||(so=!0,o.calledRun=!0,!I&&(ne(),l(o),(Y=o.onRuntimeInitialized)==null||Y.call(o),j()))}o.setStatus?(o.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>o.setStatus(""),1),R()},1)):R()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Ua(),r=c,r}})(),Zv=J('<p>Current release: <span>2.0.1β</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="Wines.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video lessons</a></p>'),$v=J(`<h2>Principal Component Analysis</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using PCA models for data exploration
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>Check out YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video-lessons</a></p><h3>v. 2.0.1</h3> <p class="release-info">released 12/02/2025</p> <ul><li>Many small improvements to plots and control elements. App now remembers its state and
         recovers it after closing tab or browser window. Same about the state of the plots controls.</li></ul>`,1);function e1(t,e){ge(e,!1);function r(c){c.train.dataset=null,c.new.model=null,c.tab=0}function o(c){const d=Object.keys(c);if(!["date","tab","train","new"].every(v=>d.includes(v)))return!1;const u=Object.keys(c.train),f=Object.keys(c.new);return!!["model","dataset","resobj","outliers"].every(v=>u.includes(v)&&f.includes(v))}function l(){return{date:Xo(new Date),tab:0,train:{model:0,dataset:0,resobj:0,outliers:[]},new:{model:0,dataset:0,resobj:0,outliers:[]}}}const a=[{name:"Train",label:"train",component:Av},{name:"Project",label:"new",component:Dv}];is(),Kv(t,{appID:"pca",appTitle:"PCA",appShortTitle:"PCA",isBeta:!0,appSlogan:"Principal component analysis",WASM:Jv,tabs:a,initSession:l,checkSession:o,resetSession:r,footer:u=>{var f=Zv();P(u,f)},info:u=>{var f=$v();P(u,f)},$$slots:{footer:!0,info:!0}}),pe()}$i(e1,{target:document.body});const t1=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pca.js.map
