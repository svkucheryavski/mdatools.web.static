{"version":3,"file":"ddsimca.js","sources":["../node_modules/svelte/src/runtime/internal/utils.js","../node_modules/svelte/src/runtime/internal/dom.js","../node_modules/svelte/src/runtime/internal/lifecycle.js","../node_modules/svelte/src/runtime/internal/scheduler.js","../node_modules/svelte/src/runtime/internal/transitions.js","../node_modules/svelte/src/runtime/internal/await_block.js","../node_modules/svelte/src/runtime/internal/each.js","../node_modules/svelte/src/runtime/internal/Component.js","../node_modules/svelte/src/shared/version.js","../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../node_modules/mdatools/src/stat/index.js","../node_modules/mdatools/src/misc/index.js","../node_modules/mdatools/src/distributions/index.js","../node_modules/mdatools/src/decomp/index.js","../node_modules/mdatools/src/arrays/index.js","../src/wasm/pca.js","../src/wasm/simca.js","../src/utils.js","../../shared/controls/Container.svelte","../../shared/controls/ButtonCancel.svelte","../src/shared/DatasetWidget.svelte","../../shared/controls/FileSelector.svelte","../../shared/controls/Select.svelte","../../shared/controls/Button.svelte","../src/tab_train/DataLoader.svelte","../../shared/controls/Spinner.svelte","../src/tab_train/PCVCalculator.svelte","../../shared/controls/Range.svelte","../src/tab_train/ModelCalculator.svelte","../src/shared/AppPlots.svelte","../node_modules/svelte/src/runtime/store/index.js","../../node_modules/mdatools/src/stat/index.js","../../node_modules/mdatools/src/misc/index.js","../../node_modules/mdatools/src/distributions/index.js","../../node_modules/mdatools/src/arrays/index.js","../../node_modules/svelte-plots-basic/src/Utils.js","../../node_modules/svelte-plots-basic/src/2d/Axes.svelte","../../node_modules/svelte-plots-basic/src/Colors.js","../../node_modules/svelte-plots-basic/src/2d/AxisLines.svelte","../../node_modules/svelte-plots-basic/src/2d/AxisTickLabels.svelte","../../node_modules/svelte-plots-basic/src/2d/Axis.svelte","../../node_modules/svelte-plots-basic/src/2d/XAxis.svelte","../../node_modules/svelte-plots-basic/src/2d/YAxis.svelte","../../node_modules/svelte-plots-basic/src/2d/Box.svelte","../../node_modules/svelte-plots-basic/src/2d/Rectangles.svelte","../../node_modules/svelte-plots-basic/src/2d/Segments.svelte","../../node_modules/svelte-plots-basic/src/2d/TextLabels.svelte","../../node_modules/svelte-plots-basic/src/2d/Bars.svelte","../../node_modules/svelte-plots-basic/src/2d/Points.svelte","../../node_modules/svelte-plots-basic/src/2d/Lines.svelte","../../node_modules/svelte-plots-basic/src/2d/Legend.svelte","../../node_modules/svelte-plots-basic/src/2d/ColormapLegend.svelte","../../shared/plots/Defaults.js","../../shared/plots/SensitivityPlot.svelte","../../shared/plots/ExtremePlot.svelte","../../shared/plots/AcceptancePlotSeries.svelte","../../shared/plots/AcceptancePlotLegend.svelte","../../shared/plots/AcceptancePlotLimits.svelte","../../shared/plots/AcceptancePlot.svelte","../../shared/plots/DistancePlot.svelte","../../shared/plots/DFPlot.svelte","../../shared/plots/SensitivityPlotControls.svelte","../../shared/plots/ExtremePlotControls.svelte","../../shared/plots/AcceptancePlotControls.svelte","../../shared/plots/DistancePlotControls.svelte","../../shared/plots/VariableDistancePlotControls.svelte","../../shared/plots/DFPlotControls.svelte","../../shared/plots/ImportancePlotControls.svelte","../src/tab_train/AppPlots.svelte","../src/shared/ResultTable.svelte","../src/shared/ModelTable.svelte","../src/shared/SIMCASettings.svelte","../node_modules/svelte-plots-basic/src/Utils.js","../node_modules/svelte-plots-basic/src/2d/Axes.svelte","../node_modules/svelte-plots-basic/src/Colors.js","../node_modules/svelte-plots-basic/src/2d/AxisLines.svelte","../node_modules/svelte-plots-basic/src/2d/AxisTickLabels.svelte","../node_modules/svelte-plots-basic/src/2d/Axis.svelte","../node_modules/svelte-plots-basic/src/2d/XAxis.svelte","../node_modules/svelte-plots-basic/src/2d/YAxis.svelte","../node_modules/svelte-plots-basic/src/2d/Box.svelte","../node_modules/svelte-plots-basic/src/2d/Rectangles.svelte","../node_modules/svelte-plots-basic/src/2d/TextLabels.svelte","../node_modules/svelte-plots-basic/src/2d/Points.svelte","../node_modules/svelte-plots-basic/src/2d/Lines.svelte","../node_modules/svelte-plots-basic/src/2d/Multilines.svelte","../node_modules/mdatools/src/prep/index.js","../src/modals/Contributions.svelte","../../shared/widgets/Outliers.svelte","../src/tab_train/AppContainer.svelte","../src/tab_target/ResultTable.svelte","../src/tab_target/AppPlots.svelte","../src/shared/PredictDataLoader.svelte","../src/shared/ModelLoader.svelte","../src/tab_target/AppContainer.svelte","../../shared/plots/SpecificityPlot.svelte","../../shared/plots/AliensPlot.svelte","../../shared/plots/SelectivityPlot.svelte","../../shared/plots/AltAcceptancePlotControls.svelte","../../shared/plots/SpecificityPlotControls.svelte","../../shared/plots/AliensPlotControls.svelte","../../shared/plots/SelectivityPlotControls.svelte","../src/tab_new/AppPlots.svelte","../src/tab_new/ResultTable.svelte","../src/tab_new/AppContainer.svelte","../src/wasm/pca_wasm.js","../src/MainApp.svelte","../src/main.js","../__vite-browser-external"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { is_promise } from './utils.js';\nimport { check_outros, group_outros, transition_in, transition_out } from './transitions.js';\nimport { flush } from './scheduler.js';\nimport { get_current_component, set_current_component } from './lifecycle.js';\n\n/**\n * @template T\n * @param {Promise<T>} promise\n * @param {import('./private.js').PromiseInfo<T>} info\n * @returns {boolean}\n */\nexport function handle_promise(promise, info) {\n\tconst token = (info.token = {});\n\t/**\n\t * @param {import('./private.js').FragmentFactory} type\n\t * @param {0 | 1 | 2} index\n\t * @param {number} [key]\n\t * @param {any} [value]\n\t * @returns {void}\n\t */\n\tfunction update(type, index, key, value) {\n\t\tif (info.token !== token) return;\n\t\tinfo.resolved = value;\n\t\tlet child_ctx = info.ctx;\n\t\tif (key !== undefined) {\n\t\t\tchild_ctx = child_ctx.slice();\n\t\t\tchild_ctx[key] = value;\n\t\t}\n\t\tconst block = type && (info.current = type)(child_ctx);\n\t\tlet needs_flush = false;\n\t\tif (info.block) {\n\t\t\tif (info.blocks) {\n\t\t\t\tinfo.blocks.forEach((block, i) => {\n\t\t\t\t\tif (i !== index && block) {\n\t\t\t\t\t\tgroup_outros();\n\t\t\t\t\t\ttransition_out(block, 1, 1, () => {\n\t\t\t\t\t\t\tif (info.blocks[i] === block) {\n\t\t\t\t\t\t\t\tinfo.blocks[i] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcheck_outros();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinfo.block.d(1);\n\t\t\t}\n\t\t\tblock.c();\n\t\t\ttransition_in(block, 1);\n\t\t\tblock.m(info.mount(), info.anchor);\n\t\t\tneeds_flush = true;\n\t\t}\n\t\tinfo.block = block;\n\t\tif (info.blocks) info.blocks[index] = block;\n\t\tif (needs_flush) {\n\t\t\tflush();\n\t\t}\n\t}\n\tif (is_promise(promise)) {\n\t\tconst current_component = get_current_component();\n\t\tpromise.then(\n\t\t\t(value) => {\n\t\t\t\tset_current_component(current_component);\n\t\t\t\tupdate(info.then, 1, info.value, value);\n\t\t\t\tset_current_component(null);\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tset_current_component(current_component);\n\t\t\t\tupdate(info.catch, 2, info.error, error);\n\t\t\t\tset_current_component(null);\n\t\t\t\tif (!info.hasCatch) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t// if we previously had a then/catch block, destroy it\n\t\tif (info.current !== info.pending) {\n\t\t\tupdate(info.pending, 0);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tif (info.current !== info.then) {\n\t\t\tupdate(info.then, 1, info.value, promise);\n\t\t\treturn true;\n\t\t}\n\t\tinfo.resolved = /** @type {T} */ (promise);\n\t}\n}\n\n/** @returns {void} */\nexport function update_await_block_branch(info, ctx, dirty) {\n\tconst child_ctx = ctx.slice();\n\tconst { resolved } = info;\n\tif (info.current === info.then) {\n\t\tchild_ctx[info.value] = resolved;\n\t}\n\tif (info.current === info.catch) {\n\t\tchild_ctx[info.error] = resolved;\n\t}\n\tinfo.block.p(child_ctx, dirty);\n}\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.18';\nexport const PUBLIC_VERSION = '4';\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","/*************************************************/\n/*    Methods for computing statistics           */\n/*************************************************/\n\nimport { isnumber, isindex, isvector, vector, Vector, _sort } from '../arrays/index.js';\n\n\n/**\n * Compute median of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} median of x.\n *\n */\nexport function median(x) {\n   return quantile(x, 0.5)\n}\n\n/**\n * Compute inter-quartile range for vector of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} IQR of x (Q3 - Q1).\n *\n */\nexport function iqr(x) {\n   return quantile(x, 0.75) - quantile(x, 0.25);\n}\n\n\n/**\n * Computes a p-th quantile/quantiles for a numeric vector.\n *\n * @param {Vector} x - vector with values.\n * @param {number|Array|Vector} p - probability (one value or a vector).\n *\n * @returns {number|Vector} quantile value or a vector with quantiles.\n */\nexport function quantile(x, p) {\n\n   if (isvector(x)) {\n      return quantile(x.v, p);\n   }\n\n   if (isvector(p)) {\n      return quantile(x, p.v);\n   }\n\n   const n = x.length;\n\n   if (!Array.isArray(p)) p = [p];\n\n   if (!isnumber(p[0]) || min(p) < 0 || max(p) > 1) {\n      throw new Error(\"Parameter 'p' must be between 0 and 1 (both included).\");\n   }\n\n   function q(x, p) {\n      const h = (n - 1) * p + 1;\n      const n1 = Math.floor(h);\n      const n2 = Math.ceil(h);\n      return x[n1 - 1] + (x[n2 - 1] - x[n1 - 1]) * (h - Math.floor(h));\n   }\n\n   const xs = _sort(x);\n   const out =  p.map(v => q(xs, v));\n   return p.length == 1 ? out[0] : vector(out);\n}\n\n\n/**\n * Counts how many values from a vector falls into provided intervals (bins).\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} bins - vector with bins boundaries.\n *\n * @returns {Vector} vector with counts for each bean.\n *\n */\nexport function count(x, bins) {\n\n   if (isvector(x)) {\n      return count(x.v, isvector(bins) ? bins.v : bins);\n   }\n\n   const n = bins.length;\n\n   // add a bit extra to right side of the last bin\n   bins[n - 1] = bins[n - 1] * 1.0001\n\n   // count\n   let counts = new Vector.valuesConstructor(n - 1);\n   for (let i = 0; i < x.length; i++) {\n      for (let j = 0; j < n - 1; j++) {\n         if (x[i] >= bins[j] && x[i] < bins[j + 1]) counts[j] += 1;\n      }\n   }\n\n   return new Vector(counts);\n}\n\n\n/**\n * Computes middle points between values of a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with middle points.\n *\n */\nexport function mids(x) {\n\n   if (isvector(x)) {\n      return mids(x.v);\n   }\n\n   const out = new Vector.valuesConstructor(x.length - 1);\n   for (let i = 0; i < out.length; i++) {\n      out[i] = 0.5 * (x[i] + x[i + 1]);\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Splits range of vector values into equal intervals.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} n - number of intervals.\n *\n * @returns {Vector} vector with boundaries of the intervals.\n *\n */\nexport function split(x, n) {\n\n   if (isvector(x)) {\n      split(x.v, n);\n   }\n\n   const rn = range(x);\n\n   if (rn[0] === rn[1]) {\n      throw new Error('split: values in a vector \"x\" should vary.');\n   }\n\n   const by = (rn[1] - rn[0]) / n;\n   return Vector.seq(rn[0], rn[1], by);\n}\n\n\n/**\n * Computes difference between all adjacent values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with the differences.\n *\n */\nexport function diff(x) {\n\n   if (isvector(x)) {\n      return diff(x.v);\n   }\n\n   const out = new Vector.valuesConstructor(x.length - 1);\n   for (let i = 0; i < x.length - 1; i++) {\n      out[i] = x[i + 1] - x[i];\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Generate probability points for QQ plot.\n *\n * @param {number} n - number of points.\n *\n * @returns {Vector} a sequence of probabilities between 0 and 1.\n *\n */\nexport function ppoints(n) {\n\n   const a = n < 10 ? 3.0/8.0 : 0.5;\n   const out = new Vector.valuesConstructor(n);\n\n   for (let i = 0; i < n; i++) {\n      out[i] = (i + 1 - a) / (n + (1 - a) - a);\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Computes cumulative sums for the vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vectors} vector with cumulative sums.\n *\n */\nexport function cumsum(x) {\n\n   if (isvector(x)) {\n      return cumsum(x.v);\n   }\n\n   let s = 0;\n   let out = new Vector.valuesConstructor(x.length);\n   for (let i = 0; i < x.length; i++) {\n      s += x[i];\n      out[i] = s\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Computes kurtosis of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} kurtosis of x.\n *\n */\nexport function kurtosis(x) {\n\n   if (isvector(x)) {\n      return kurtosis(x.v);\n   }\n\n   let n = x.length;\n   let m = mean(x);\n\n   let m4 = 0.0;\n   let m2 = 0.0;\n   for (let i = 0; i < n; i++) {\n      m2 = m2 + Math.pow((x[i] - m), 2);\n      m4 = m4 + Math.pow((x[i] - m), 4);\n   }\n\n   return (m4/n) / Math.pow((m2/n), 2);\n}\n\n\n/**\n * Computes skewness of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} skewness of x.\n *\n */\nexport function skewness(x) {\n\n   if (isvector(x)) {\n      return skewness(x.v);\n   }\n\n   let n = x.length;\n   let m = mean(x);\n\n   let m3 = 0.0;\n   let m2 = 0.0;\n   for (let i = 0; i < n; i++) {\n      m2 = m2 + Math.pow((x[i] - m), 2);\n      m3 = m3 + Math.pow((x[i] - m), 3);\n   }\n\n   return (m3/n) / Math.pow((m2/n), 1.5);\n}\n\n\n/**\n * Computes correlation between two vectors.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} y - vector with values.\n * @param {string} method - which method to use (\"pearson\" or \"spearman\").\n *\n * @returns {number} correlation between x and y.\n *\n */\nexport function cor(x, y, method = \"pearson\") {\n\n   if (isvector(x)) {\n      return cor(x.v, y.v, method);\n   }\n\n   if (method === \"spearman\") {\n      return cor(rank(x), rank(y));\n   }\n\n   return cov(x, y) / (sd(x) * sd(y));\n}\n\n\n/**\n * Computes covariance between two vectors.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} y - vector with values.\n * @param {boolean} [biased=false] - compute a biased version with n degrees of freedom or not (with n - 1).\n * @param {number} [mx=undefined] - mean of x values (if already known).\n * @param {number} [my=undefined] - mean of y values (if already known).\n *\n * @returns {number} covariance between x and y.\n *\n */\nexport function cov(x, y, biased = false, mx = undefined, my = undefined) {\n\n   if (isvector(x)) {\n      return cov(x.v, y.v, biased, mx, my);\n   }\n\n   const n = x.length;\n\n   if (y.length !== n) {\n      throw Error(\"Vectors 'x' and 'y' must have the same length.\");\n   }\n\n   if (n < 2) {\n      throw Error(\"Vectors 'x' and 'y' must have at least two values.\");\n   }\n\n   if (mx === undefined) mx = mean(x);\n   if (my === undefined) my = mean(y);\n\n   let s = 0;\n   for (let i = 0; i < n; i++) {\n      s = s + (x[i] - mx) * (y[i] - my);\n   }\n\n   return s / (biased ? n : n - 1);\n}\n\n\n/**\n * Returns ranks of values in a vector (ranks start from 1, not 0).\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with ranks.\n *\n */\nexport function rank(x) {\n\n   if (isvector(x)) {\n      return rank(x.v);\n   }\n\n   const y = [...x].sort((a, b) => a - b);\n\n   return new Vector(x.map(v => y.indexOf(v) + 1));\n}\n\n\n/**\n * Compute marginal range of values as [min, max]\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} m - margin as per cent of range (value between 0 and 1).\n *\n * @return {Array} array with two values, min and max.\n *\n */\nexport function mrange(x, m) {\n\n   if (isvector(x)) {\n      return mrange(x.v, m);\n   }\n\n   if (m === undefined) m = 0.10;\n   const r = range(x);\n   const d = (r[1] - r[0]) * m;\n\n   return [r[0] - d, r[1] + d];\n}\n\n\n/**\n * Compute range of values as [min, max].\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @return {Array} array with two values, min and max.\n *\n */\nexport function range(x) {\n\n   if (isvector(x)) {\n      return range(x.v);\n   }\n\n   let min = x[0];\n   let max = x[0];\n\n   for (let i = 1; i < x.length; i++) {\n      if (x[i] < min) min = x[i];\n      if (x[i] > max) max = x[i];\n   }\n\n   return [min, max];\n}\n\n\n/**\n * Compute norm2 of a vector (Euclidean distance).\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} norm value.\n *\n */\nexport function norm2(x) {\n\n   if (isvector(x)) {\n      return norm2(x.v);\n   }\n\n   return Math.sqrt(ssq(x));\n}\n\n\n/**\n * Compute sum of squared vector values\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} sum of squared values of x.\n *\n */\nexport function ssq(x) {\n\n   if (isvector(x)) {\n      return ssq(x.v);\n   }\n\n   let ssqv = 0;\n   const n = x.length;\n   for (let i = 0; i < n; i++) {\n      const v = x[i]\n      ssqv += v * v;\n   }\n\n   return ssqv;\n}\n\n\n/**\n * Compute standard deviation of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {boolean} [biased=false] - compute a biased value (n degrees of freedom) or unbiased (n - 1 degrees of freedom)\n *\n * @returns {number} standard deviation of x.\n *\n */\nexport function sd(x, biased) {\n\n   if (isvector(x)) {\n      return sd(x.v, biased);\n   }\n\n   return Math.sqrt(variance(x, biased));\n}\n\n\n/**\n * Compute variance of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {boolean} [biased=false] - compute a biased variance (n degrees of freedom) or unbiased (n - 1 degrees of freedom)\n *\n * @returns {number} variance of x.\n *\n */\nexport function variance(x, biased) {\n\n   if (biased === undefined) {\n      biased = false;\n   }\n\n   if (isvector(x)) {\n      return variance(x.v);\n   }\n\n   const m = mean(x);\n   let s = 0;\n   for (let i = 0; i < x.length; i++) {\n      const d = (x[i] - m);\n      s = s + d * d ;\n   }\n\n   return s / (biased ? x.length : (x.length - 1));\n}\n\n\n/**\n * Compute average of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} mean of x.\n *\n */\nexport function mean(x) {\n\n   if (isvector(x)) {\n      return mean(x.v);\n   }\n\n   return sum(x) / x.length;\n}\n\n\n/**\n * Compute sum of all values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} sum of x.\n *\n */\nexport function sum(x) {\n\n   if (isvector(x)) {\n      return sum(x.v);\n   }\n\n   let s = 0;\n   for (let i = 0; i < x.length; i++) {\n      s = s + x[i];\n   }\n\n   return s;\n}\n\n\n/**\n * Compute product of all values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} product of x.\n *\n */\nexport function prod(x) {\n\n   if (isvector(x)) {\n      return prod(x.v);\n   }\n\n   let p = 1;\n   for (let i = 0; i < x.length; i++) {\n      p = p * x[i];\n   }\n\n   return p;\n}\n\n\n/**\n * Find the smallest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} the smallest value.\n *\n */\nexport function min(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return x.v[minind(x.v) - 1];\n   }\n\n   return x[minind(x) - 1];\n}\n\n\n/**\n * Find index of the smallest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} index of the smallest value (starting from 1).\n *\n */\nexport function minind(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return minind(x.v);\n   }\n\n   let outind = 1;\n   let out = x[0]\n   for (let i = 2; i <= x.length; i++) {\n      if (x[i - 1] < out) {\n         outind = i;\n         out = x[i - 1];\n      }\n   }\n\n   return outind;\n}\n\n\n/**\n * Find the largest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} the largest value.\n *\n */\nexport function max(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return x.v[maxind(x.v) - 1];\n   }\n\n   return x[maxind(x) - 1];\n}\n\n\n/**\n * Find index of the largest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} index of the largest value (starting from 1).\n *\n */\nexport function maxind(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return maxind(x.v);\n   }\n\n   let outind = 1;\n   let out = x[0]\n   for (let i = 2; i <= x.length; i++) {\n      if (x[i - 1] > out) {\n         outind = i;\n         out = x[i - 1];\n      }\n   }\n\n   return outind;\n}\n\n\n","/*************************************************/\n/*    Misc extra methods for statistics          */\n/*************************************************/\n\nimport { isvector, vector, Index, Vector } from \"../arrays/index.js\";\nimport { prod, quantile } from \"../stat/index.js\";\n\n\n/**\n * Finds index of value in x which is closest to the value a.\n *\n * @param {Array|Vector} x - a vector with values.\n * @param {number} a - a value\n *\n * @returns {number} the index value (starts from 1).\n *\n */\nexport function closestind(x, a) {\n\n   if (isvector(x)) {\n      return closestind(x.v, a);\n   }\n\n   const c = x.reduce((prev, curr) => Math.abs(curr - a) < Math.abs(prev - a) ? curr : prev);\n   return x.indexOf(c) + 1;\n}\n\n\n/**\n * Computes numeric integral for function \"f\" with limits (a, b).\n *\n * @param {function} f - a reference to a function.\n * @param {number} a - lower limit for integration.\n * @param {number} b - upper limit for integration.\n * @param {number} [acc=0.000001] - absolute accuracy.\n * @param {number} [eps=0.00001] - relative accuracy.\n * @param {number[]} oldfs - vector of values needed for recursion.\n *\n * @returns {number} result of integration.\n *\n */\nexport function integrate(f, a, b, acc, eps, oldfs) {\n\n   if (acc === undefined) {\n      acc = 0.000001;\n   }\n\n   if (eps === undefined) {\n      eps = 0.00001\n   }\n\n   if (typeof(a) !== \"number\" || typeof(b) !== \"number\") {\n      throw Error(\"Parameters 'a' and 'b' must be numbers.\");\n   }\n\n   if (b < a) {\n      throw Error(\"Parameter 'b' must be larger 'a'.\");\n   }\n\n   // special case when left limit is minus infinity\n   if (a === -Infinity && b !== Infinity) {\n      return integrate((t) => f(b - (1 - t) / t) / (t ** 2), 0, 1);\n   }\n\n   // special case when right limit is plus infinity\n   if (a !== -Infinity && b === Infinity) {\n      return integrate((t) => f(a + (1 - t) / t) / (t ** 2), 0, 1);\n   }\n\n   // special case when both limits are infinite\n   if (a === -Infinity && b === Infinity) {\n      return integrate((t) => (f((1 - t) / t) + f((t - 1) / t)) / t ** 2, 0, 1);\n   }\n\n   // constants for splitting the integration interval\n   const x = [1/6, 2/6, 4/6, 5/6];\n   const w = [2/6, 1/6, 1/6, 2/6];\n   const v = [1/4, 1/4, 1/4, 1/4];\n   const p = [1, 0, 0, 1];\n\n   let n = x.length, h = b - a;\n   let fs;\n\n   if (oldfs === undefined) {\n      fs = x.map(v => f(a + v * h));\n   } else {\n      fs = new Array(n);\n      for (let k = 0, i = 0; i < n; i++) {\n         fs[i] = p[i] === 1 ? f(a + x[i] * h) : oldfs[k++];\n      }\n   }\n\n   let q4 = 0, q2 = 0;\n   for (let i = 0; i < n; i++) {\n      q4 += w[i] * fs[i] * h;\n      q2 += v[i] * fs[i] * h;\n   }\n\n   if (isNaN(q2) || isNaN(q4)) {\n      throw Error(\"Numerical integration ended up with NaN number.\")\n   }\n\n   let tol = acc + eps * Math.abs(q4);\n   let err = Math.abs((q4 - q2)/3);\n\n   if (err < tol) return q4;\n\n   acc = acc / Math.sqrt(2.);\n   const mid = (a + b) / 2;\n   const left = fs.filter((v, i) => i < n/2);\n   const right = fs.filter((v, i) => i >= n/2);\n\n   const ql = integrate(f, a, mid, eps, acc, left);\n   const qr = integrate(f, mid, b, eps, acc, right);\n\n   return ql + qr;\n}\n\n\n/**\n * Finds outliers in a vector based on inter-quartile range distance.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} q1 - first quartile (optional parameter).\n * @param {number} q3 - third quartile (optional parameter).\n *\n * @returns {Vector} vector with outliers or empty vector if none were found.\n *\n */\nexport function getoutliers(x, q1 = undefined, q3 = undefined) {\n\n   if (q1 === undefined) q1 = quantile(x, 0.25);\n   if (q3 === undefined) q3 = quantile(x, 0.75);\n\n   const iqr15 = (q3 - q1) * 1.5;\n   const bl = q1 - iqr15\n   const bu = q3 + iqr15\n\n   return new Vector(x.v.filter(v => v < bl || v > bu));\n}\n\n\n/**\n * Rounds number (or vector of numbers) to given amount of decimals.\n *\n * @param {numbr|Array|Vector} x - a number or a vector with values.\n *\n * @return {number|Array|Vector} a number or a vector with rounded values.\n *\n */\nexport function round(x, n = 0) {\n\n   if (isvector(x)) {\n      return vector(x.v.map(v => round(v, n)));\n   }\n\n   if (Array.isArray(x)) {\n      return x.map(v => round(v, n));\n   }\n\n   return Number.parseFloat(x.toFixed(n));\n}\n\n\n/**\n * Generate combination of all levels of vectors.\n *\n * @param {...} args - a sequence of vectors.\n *\n * @returns {Array} array of arrays with values for each vector.\n *\n */\nexport function expandgrid(...args) {\n\n   const nargs = args.length;\n   const d = args.map(v => v.length);\n   let orep = prod(d);\n\n   let grid = Array(nargs);\n   let repFac = 1;\n\n   for (let i = 0; i < nargs; i++) {\n      const x = isvector(args[i]) ? args[i] : vector(args[i]);\n      const nx = x.length;\n      orep = orep / nx;\n      grid[i] = x.subset(Index.seq(1, nx).repeach(repFac).rep(orep));\n      repFac = repFac * nx;\n   }\n\n   return grid;\n}\n","/* =================================================================== */\n/*    Methods for statistical distributions                            */\n/* =================================================================== */\n\nimport { range } from '../stat/index.js';\nimport { isvector, vector, Vector } from '../arrays/index.js';\nimport { closestind, integrate } from '../misc/index.js';\n\n// threshold to switch between two approximation for chi-square distribution\nconst CHISQ_DOF_THRESHOLD = 30;\n// tolerance for chi-square distribution search\nconst CHISQ_TOL = 0.0000001;\n\n/**\n * Generates 'n' random numbers from a uniform distribution.\n *\n * @param {number} n - amount of numbers to generate.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {Vector} vector with generated random numbers.\n *\n */\nexport function runif(n, a = 0, b = 1) {\n   let out = Vector.zeros(n);\n   for (let i = 0; i < n; i++) {\n      out.v[i] = (a + Math.random() * (b - a));\n   }\n   return out;\n}\n\n\n/**\n * Cumulative distribution function for uniform distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function punif(x, a = 0, b = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => punif(v, a, b));\n   }\n\n   return x < a ? 0 : (x > b ? 1 : (x - a) / (b - a));\n}\n\n\n/**\n * Probability density function for uniform distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dunif(x, a = 0, b = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => dunif(v, a, b));\n   }\n\n   return x < a || x > b ? 0 : 1 / (b - a);\n}\n\n\n /**\n * Generates 'n' random numbers from a normal distribution.\n *\n * @param {number} n - amount of numbers to generate.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {Vector} vector with generated random numbers.\n */\nexport function rnorm(n, mu = 0, sigma = 1) {\n\n   let out = Vector.zeros(n);\n   for (let i = 0; i < n; i ++) {\n      const a = Math.sqrt(-2 * Math.log(Math.random()));\n      const b = 2 * Math.PI * Math.random();\n      out.v[i] = (a * Math.sin(b) * sigma + mu);\n   }\n\n   return out;\n}\n\n\n/**\n * Probability density function for normal distribution.\n *\n * @param {number|Vector} x - vector of values of a single value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dnorm(x, mu = 0, sigma = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => dnorm(v, mu, sigma));\n   }\n\n   const z = (x - mu) / sigma;\n   return Math.exp(-0.5 * z * z) / (Math.sqrt(2 * Math.PI) * sigma);\n}\n\n\n/**\n * Cumulative distribution function for normal distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pnorm(x, mu = 0, sigma = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => pnorm(v, mu, sigma));\n   }\n\n   const frac = 1 / (Math.sqrt(2) * sigma);\n   return  0.5 * (1 + erf((x - mu) * frac));\n}\n\n\n/**\n * Inverse cumulative distribution function for normal distribution.\n *\n * @param {number|Vector} p - vector of probabilities or a single probability value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qnorm(p, mu = 0, sigma = 1) {\n\n   if (isvector(p)) {\n      return p.apply(v => qnorm(v, mu, sigma));\n   }\n\n   if (mu !== 0 || sigma !== 1) {\n      return qnorm(p) * sigma + mu;\n   }\n\n   if (p < 0 || p > 1) {\n      throw Error('Parameter \"p\" must be between 0 and 1.');\n   }\n\n   if (p < 0.0000000001) return -Infinity;\n   if (p > 0.9999999999) return +Infinity;\n\n   const SP1 = 0.425;\n   const SP2 = 5.0;\n   const C1 = 0.180625;\n   const C2 = 1.6;\n\n   const a0 = 3.3871327179;\n   const a1 = 5.0434271938 * 10;\n   const a2 = 1.5929113202 * 100;\n   const a3 = 5.9109374720 * 10;\n   const b1 = 1.7895169469 * 10;\n   const b2 = 7.8757757664 * 10;\n   const b3 = 6.7187563600 * 10;\n\n   const c0 = 1.4234372777;\n   const c1 = 2.7568153900;\n   const c2 = 1.3067284816;\n   const c3 = 1.7023821103 * 0.1;\n   const d1 = 7.3700164250 * 0.1;\n   const d2 = 1.2021132975 * 0.1;\n\n   const e0 = 6.6579051150;\n   const e1 = 3.0812263860;\n   const e2 = 4.2868294337 * 0.1;\n   const e3 = 1.7337203997 * 0.01;\n   const f1 = 2.4197894225 * 0.1;\n   const f2 = 1.2258202635 * 0.01;\n\n   const q = p - 0.5;\n   let r;\n\n   if (Math.abs(q) <= SP1) {\n      r = C1 - q * q;\n      return q * (((a3 * r + a2) * r + a1) *r + a0) / (((b3 * r + b2) * r + b1) * r + 1.0);\n   }\n\n   r = q < 0 ? p : 1 - p;\n   r = Math.sqrt(-Math.log(r));\n   let res;\n\n   if (r <= SP2) {\n      r = r - C2;\n      res = (((c3 * r + c2) * r + c1) * r + c0) / ((d2 * r + d1) * r + 1.0);\n   } else {\n      r = r - SP2;\n      res = (((e3 * r + e2) * r + e1) + e0) / ((f2 * r + f1) * r + 1.0);\n   }\n\n   return q < 0 ? -res : res;\n}\n\n\n/**\n * Probability density function for Student's t-distribution.\n *\n * @param {number|Vector} t - t-value or a vector of t-values.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dt(t, dof) {\n\n   if (dof < 0) {\n      throw new Error('Parameter \"dof\" should be a positive number.');\n   }\n\n   if (isvector(t)) {\n      return t.apply(v => dt(v, dof));\n   }\n\n   const pow = -0.5 * (dof + 1);\n   const A = 1 / (Math.sqrt(dof) * beta(0.5, dof/2));\n\n   return (A * Math.pow((1 + t * t / dof), pow));\n}\n\n\n/**\n * Cumulative distribution function for Student's t-distribution.\n *\n * @param {number|Vector} t - t-value or a vector of t-values.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pt(t, dof) {\n\n   if (dof === undefined || dof === null || dof < 1) {\n      throw Error('Parameter \"dof\" (degrees of freedom) must be an integer number >= 1.');\n   }\n\n   if (isvector(t)){\n      return t.apply(v => pt(v, dof));\n   }\n\n   // since distribution in symmetric we can use only left tail\n   if (t === 0) return 0.5;\n   if (t === -Infinity) return 0;\n   if (t === Infinity) return 1;\n   if (t > 0) return (1 - pt(-t, dof));\n\n   return integrate((x) => dt(x, dof), -Infinity, t);\n}\n\n\n/**\n * Inverse cumulative distribution (quantile) function for Student's t-distribution.\n *\n * @param {number|Vector} p - probability or vector with probabilities.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qt(p, dof) {\n\n   if (dof === undefined || dof === null || dof < 1) {\n      throw Error('Parameter \"dof\" (degrees of freedom) must be an integer number >= 1.');\n   }\n\n   if (p < 0 || p > 1) {\n      throw Error('Parameter \"p\" must be between 0 and 1.');\n   }\n\n   if (isvector(p)) {\n      return p.apply(v => qt(v, dof));\n   }\n\n   if (p < 0.0000000001) return -Infinity;\n   if (p > 0.9999999999) return +Infinity;\n\n\n   // simple cases  exact solutions\n   if (dof === 1) {\n      return Math.tan(Math.PI * (p - 0.5));\n   }\n\n   if (dof === 2) {\n      return 2 * (p - 0.5) * Math.sqrt(2 / (4 * p * (1 - p)));\n   }\n\n   // approximation\n\n   let sign = -1;\n   if (p >= 0.5){\n      sign = +1 ;\n      p = 2 * (1 - p);\n   } else {\n      sign = -1;\n      p = 2 * p;\n   }\n\n   const a = 1.0 / (dof - 0.5);\n   const b = 48.0 / (a ** 2);\n   let c = ((20700 * a / b - 98) * a - 16) * a + 96.36;\n   const d = ((94.5 / (b + c) - 3.0)/b + 1.0) * Math.sqrt(a * Math.PI / 2) * dof;\n\n   let x = d * p;\n   let y = x ** (2.0/dof);\n\n   if (y > 0.05 + a) {\n\n      // asymptotic inverse expansion about normal\n      x = qnorm(p * 0.5);\n      y = x * x;\n\n      if (dof < 5) {\n         c = c + 0.3 * (dof - 4.5) * (x + 0.6);\n      }\n\n      c = (((0.05 * d * x - 5.0) * x - 7.0) * x - 2.0) * x + b + c;\n      y = (((((0.4 * y + 6.3) * y + 36.0) * y + 94.5) / c - y - 3.0)/b + 1.0) * x;\n      y = a * (y ** 2);\n      y = y > 0.002 ? Math.exp(y) - 1.0 : 0.5 * (y ** 2) + y;\n   } else {\n      y = ((1.0 / (((dof + 6.0)/(dof * y) - 0.089 * d - 0.822) * (dof + 2.0) * 3.0) + 0.5/(dof + 4.0)) * y - 1.0) *\n         (dof + 1.0)/(dof + 2.0) + 1.0/y;\n   }\n\n   return sign * Math.sqrt(dof * y);\n}\n\n\n/**\n * Probability density function for F-distribution.\n *\n * @param {number|Vector} F - F-value or a vector of t-values\n * @param {number} d1 - degrees of freedom.\n * @param {number} d2 - degrees of freedom.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function df(F, d1, d2) {\n\n   if (F < 0 || d1 < 0 || d2 < 0) {\n      throw new Error('All 3 parameters must be positive.');\n   }\n\n   if (d2 <= d1) {\n      throw new Error('Parameter \"d1\" must be larger \"d2\".');\n   }\n\n   if (isvector(F)) {\n      return F.apply(v => df(v, d1, d2));\n   }\n\n   return Math.sqrt( ( Math.pow(d1 * F, d1) * Math.pow(d2, d2)) / Math.pow(d1 * F + d2, d1 + d2)) / (F * beta(d1/2, d2/2))\n}\n\n\n/**\n * Cumulative distribution function for F-distribution.\n *\n * @param {number|Vector} F - F-value or a vector of t-values.\n * @param {number} d1 - degrees of freedom.\n * @param {number} d2 - degrees of freedom.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pf(F, d1, d2) {\n\n   if (F < 0 || d1 < 0 || d2 < 0) {\n      throw new Error('All 3 parameters must be positive.');\n   }\n\n   if (isvector(F)) {\n      return F.apply(v => pf(v, d1, d2));\n   }\n\n   return ibeta(d1 * F / (d1 * F + d2), d1/2, d2/2)\n}\n\n\n/**\n * Cumulative distribution function for chi-square distribution.\n *\n * @param {number|Vector|Array} x - chi-square value.\n * @param {number} dof - degrees of freedom.\n *\n * @description if DoF is relatively small (< 30) the method computes probabilities via\n * approximation of lower incomplete gamma function, `igamma()`, and gamma function, `gamma()`.\n * If the DoF is larger than 30 it uses the a modified power series approximation\n * (doi:10.1016/j.csda.2004.04.001) and normal distribution.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pchisq(x, dof) {\n\n   if (Array.isArray(x)) {\n      return pchisq(vector(x), dof);\n   }\n\n   const mu = 5/6 - 1 / (9 * dof) - 7 / (648 * dof * dof) + 25 / (2187 * dof * dof * dof);\n   const sigma2 = 1 / (18 * dof) + 1 / (162 * dof * dof) - 37 / (1164 * dof * dof * dof);\n   const sigma = Math.sqrt(sigma2);\n\n   // works well for large dof\n   function F2(x) {\n      if (x === 0) return 0;\n      if (dof === 0) return 1;\n      if (dof > 100 && x > dof * 2) return 1;\n      if (dof > 50 && x > dof * 3) return 1;\n      if (dof > 10 && x > dof * 5) return 1;\n      if (dof > 5 && x > dof * 8) return 1;\n      if (x > dof * 30) return 1;\n      const l0 = x / dof;\n      const l = Math.pow(l0, 1/6) - 0.5 * Math.pow(l0, 1/3) + (1/3) * Math.pow(l0, 1/2);\n      return pnorm(l, mu, sigma);\n   }\n\n   // works well for small dof\n   function F1(x) {\n      if (x === 0) return 0;\n      if (dof === 0) return 1;\n      if (dof > 100 && x > dof * 2) return 1;\n      if (dof > 50 && x > dof * 3) return 1;\n      if (dof > 10 && x > dof * 5) return 1;\n      if (dof > 5 && x > dof * 8) return 1;\n      if (x > dof * 30) return 1;\n      return igamma(x/2, dof/2) / gamma(dof/2)\n   }\n\n   const F = dof > CHISQ_DOF_THRESHOLD ? F2 : F1;\n   return isvector(x) ? x.apply(F) : F(x)\n}\n\n\n/**\n * Inverse cumulative distribution (quantile) function for chi-square distribution.\n *\n * @param {number|Vector|Array} p - probability or vector/array with probabilities.\n * @param {number} dof - degrees of freedom.\n *\n * @description if DoF is relatively small (< 30) the method computes quantiles by sequential\n * improving, splitting possible quantile range into intervals, computing probabilities for each\n * element of the interval using `pchisq()`, then find the quantile which has the closest\n * probability value, make a new split around it and so on until the probability of the\n * currently selected quintile is close to the desired one. For large DoF (>30) the it uses\n * the a modified power series approximation (doi:10.1016/j.csda.2004.04.001) and\n * normal distribution.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qchisq(p, dof) {\n\n   if (Array.isArray(p)) {\n      return qchisq(vector(p), dof);\n   }\n\n   // compute parameters of normal distribution for power approximation\n   const mu = 5/6 - 1 / (9 * dof) - 7 / (648 * dof * dof) + 25 / (2187 * dof * dof * dof);\n   const sigma2 = 1 / (18 * dof) + 1 / (162 * dof * dof) - 37 / (1164 * dof * dof * dof);\n   const sigma = Math.sqrt(sigma2);\n\n   // compute quantile for one probability value using power approximations\n   // and inverse solution\n   function F2(x) {\n      if (x === 0) return 0;\n      if (x === 0) return Inf;\n      if (dof === 0) return 0;\n      const l = qnorm(x, mu, sigma);\n      const o = Math.pow(Math.sqrt(36 * l * l - 30 * l + 13)/4 + (3 * l - 3/2)/2 + 1/8, 1/3);\n      return Math.pow(o - 3 / (4 * o) + 0.5, 6) * dof;\n   }\n\n   // compute quantile using sequential splits of quantile range\n   function F1(x) {\n      if (x === 0) return 0;\n      if (x === 0) return Inf;\n      if (dof === 0) return 0;\n\n      // initial split (start, end, and delta)\n      let qs = 0;\n      let qe = CHISQ_DOF_THRESHOLD * 10;\n      let qd = qe / 30;\n\n      // loop for sequential splits\n      for (let i = 0; i < 30; i++) {\n\n         // compute vector of quantiles and corresponding probabilities\n         const q = Vector.seq(qs, qe, qd);\n         const p = pchisq(q, dof);\n\n         // find index of quantile which has probability closest to x\n         const ind = closestind(p, x) - 1;\n\n         // if the probability is close enough to the desired one return the quantile\n         if (Math.abs(p.v[ind] - x) < CHISQ_TOL) return q.v[ind];\n\n         // if not make a new split by taking left and right neighbors quantiles\n         qs = ind == 0 ? q.v[0] : q.v[ind - 1];\n         qe = ind == q.v.length - 1? q.v[ind] : q.v[ind + 1];\n\n         // if the boundaries are the same stop\n         if (qs == qe) return qs;\n\n         // compute delta for new boundaries\n         qd = (qe - qs) / 30;\n      }\n\n      // if the loop did not converge we simply return the middle quantile\n      return (qe + qs) / 2;\n   }\n\n   const F = dof > CHISQ_DOF_THRESHOLD ? F2 : F1;\n   return isvector(p) ? p.apply(F) : F(p)\n}\n\n\n/**\n * Incomplete Betta function (approximation via numeric integration).\n *\n * @param {number} x - first argument.\n * @param {number} a - second argument.\n * @param {number} b - third argument.\n *\n * @returns {number} value of the function.\n *\n */\nexport function ibeta(x, a, b) {\n\n   if (x === 0) return 0;\n   if (x === 1) return 1;\n   if (b === 1) return x ** a;\n   if (a === 1) return (1 - (1 - x)**b);\n\n   return integrate((t) => t ** (a - 1) * (1 - t) ** (b - 1), 0, x) / beta(a, b);\n}\n\n\n/**\n * Gamma function (approximation).\n *\n * @param {number|Vector} z - argument (one value or a vector).\n *\n * @returns {number} value of the Gamma function.\n *\n */\nexport function gamma(z) {\n\n   if (isvector(z)) {\n      return z.apply(gamma);\n   }\n\n   if (z <= 0) {\n      throw new Error('gamma: the function only works with arguments > 0.');\n   }\n\n   // coefficients\n   const p = [\n        676.5203681218851,\n      -1259.1392167224028,\n        771.32342877765313,\n       -176.61502916214059,\n         12.507343278686905,\n         -0.13857109526572012,\n          9.9843695780195716e-6,\n          1.5056327351493116e-7\n    ];\n\n   if (z < 0.5) {\n      return Math.PI / (Math.sin(Math.PI * z) + gamma(1 - z));\n   }\n\n   z = z - 1;\n   let x = 0.99999999999980993;\n\n   for (let i = 0; i < p.length; i++) {\n      x = x + p[i] / (z + i + 1);\n   }\n\n   const t = z + p.length - 0.5;\n   return Math.sqrt(2 * Math.PI) * Math.pow(t, z + 0.5) * Math.exp(-t) * x;\n}\n\n\n\n/**\n * Lower incomplete gamma function (approximation)\n *\n * @param {number} x - first argument (one value).\n * @param {number} a - second argument (one value).\n *\n * @returns {number} value of the lower incomplete gamma function.\n *\n */\nexport function igamma(x, a) {\n\n   const epsilon = 1e-18; // Desired accuracy\n   const maxIterations = 10000; // Maximum number of iterations\n\n   let sum = 0;\n\n   for (let k = 0; k < maxIterations; k++) {\n      const s = Math.pow(x, k) / gamma(a + k + 1);\n      if (isNaN(s) || s < epsilon) break;\n      sum += s\n   }\n\n   return Math.pow(x, a) * gamma(a) * Math.exp(-x) * sum;\n}\n\n\n\n/**\n * Beta function (approximation).\n *\n * @param {number} x - first argument (one value).\n * @param {number} y - second argument (one value).\n *\n * @returns {number} value of the Beta function.\n *\n */\nexport function beta(x, y) {\n\n   if (y > 100) {\n      // for large y we use slower integrate version\n      return integrate((u) => Math.pow(u, x - 1) / Math.pow(1 + u, x + y), 0, Infinity)\n   }\n\n   return gamma(x) * gamma(y) / gamma(x + y);\n}\n\n\n/**\n * Error function for normal distribution.\n *\n * @param {number} x - a number.\n *\n * @returns {number} value for erf.\n *\n */\nexport function erf(x) {\n\n  const sign = (x >= 0) ? 1 : -1;\n  x = Math.abs(x);\n\n  // constants\n  const a1 =  0.254829592;\n  const a2 = -0.284496736;\n  const a3 =  1.421413741;\n  const a4 = -1.453152027;\n  const a5 =  1.061405429;\n  const p  =  0.3275911;\n\n  // approximation\n  const t = 1.0 / (1.0 + p * x);\n  const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);\n\n  return sign * y;\n}\n\n\n","/************************************************************/\n/*    Methods for computing matrix decompositions           */\n/************************************************************/\n\nimport { ssq } from '../stat/index.js';\nimport { crossprod, Vector, Matrix, Index } from '../arrays/index.js';\n\n\n/**\n * Randomized SVD decomposition.\n *\n * @param {Matrix} X - matrix to decompose.\n * @param {number} [ncomp] - number of components.\n * @param {number} [pa=1] - oversampling factor (ncomp * pa + pb).\n * @param {number} [pb=10] - oversampling increment (ncomp * pa + pb).\n * @param {number} [its=3] - number of iterations\n *\n * @returns {JSON} JSON with three fields, 's' - vector with singular values,\n * 'U', 'V' - matrices with left and right singular vectors.\n *\n */\nexport function rsvd(X, ncomp, pa, pb, its) {\n\n   const m = X.nrows;\n   const n = X.ncols;\n\n   if (its === undefined) {\n      its = 3;\n   }\n\n   if (pb === undefined) {\n      pb = 5;\n   }\n\n   if (pa === undefined) {\n      pa = 1;\n   }\n\n   if (its < 1 || its > 10) {\n      throw new Error('rsvd: wrong value for parameter \"its\" (must be between 1 and 10).');\n   }\n\n   if (pa < 1 || pa > 5) {\n      throw new Error('rsvd: wrong value for parameter \"pa\" (must be between 1 and 5).');\n   }\n\n   if (pb < 1 || pb > 100) {\n      throw new Error('rsvd: wrong value for parameter \"pb\" (must be between 1 and 100).');\n   }\n\n\n   if (ncomp === undefined) {\n      ncomp = Math.round(Math.min(m - 1, n) / 1.5);\n   }\n\n   if (m < n) {\n      const res = rsvd(X.t(), ncomp, pa, pb, its);\n      return {s: res.s, V: res.U, U: res.V}\n   }\n\n   // the more the better but slower\n   const l = Math.round(pa * ncomp + pb);\n   let Q = X.dot(Matrix.rand(n, l, -1, 1));\n\n   for (let it = 1; it <= its; it++) {\n      Q = lu(crossprod(X, Q)).L;\n      Q = it < its ? lu(X.dot(Q)).L : qr(X.dot(Q)).Q;\n   }\n\n   const B = crossprod(Q, X);\n   const res = svd(B, ncomp);\n   return {s: res.s, V: res.V, U: Q.dot(res.U)};\n}\n\n/**\n * QR decomposition\n *\n * @param {Matrix} X - matrix to decompose.\n *\n * @returns {JSON} JSON with two matrices, Q and R, so X = QR.\n *\n */\nexport function qr(X) {\n\n   const m = X.nrows;\n   const n = X.ncols;\n\n   if (m < n) {\n      const res = qr(X.subset([], Index.seq(1, m)));\n      return {Q:res.Q, R:crossprod(res.Q, X)}\n   }\n\n   let Q = Matrix.eye(m);\n   let Rt = X.t();\n\n   for (let j = 1; j <= n; j++) {\n      for (let i = m; i >= (j + 1); i--) {\n\n         const r = Rt.v.subarray((i - 2) * n, i * n);\n         const q =  Q.v.subarray((i - 2) * m, i * m);\n         const rc = r.slice();\n         const qc = q.slice();\n\n         const [c, s, temp] = rot(rc[j - 1], rc[j - 1 + n]);\n\n         // apply transformation to columns i and i - 1 of matrix Rt\n         for (let k = 0; k < n; k++) {\n\n            r[k]     = rc[k] *  c + rc[k + n] * s;\n            r[k + n] = rc[k] * -s + rc[k + n] * c;\n\n            q[k]     = qc[k] *  c + qc[k + m] * s;\n            q[k + m] = qc[k] * -s + qc[k + m] * c;\n         }\n\n         for (let k = n; k < m; k++) {\n            q[k]     = qc[k] *  c + qc[k + m] * s;\n            q[k + m] = qc[k] * -s + qc[k + m] * c;\n         }\n      }\n   }\n\n   const ind = Index.seq(1, n);\n   return {\n      Q: m === n ? Q : Q.subset([], ind),\n      R: m === n ? Rt.t() : Rt.subset([], ind).t()\n   }\n}\n\n/**\n * LU decomposition.\n *\n * @param {Matrix} X - matrix to decompose.\n *\n * @returns {JSON} JSON with two matrices, L and U, so X = LU.\n *\n */\nexport function lu(X) {\n\n   const nr = X.nrows;\n   const nc = X.ncols\n   const n = Math.min(nr, nc)\n\n   const Lv = new Float64Array(nr * nc);\n   const Uv = new Float64Array(nc * nc);\n   const Xv = X.v.slice();\n\n   const s = Math.round(Math.pow(n, 0.5285425));\n   let z = 1;\n\n   for (let c = 1; c <= n; c++) {\n\n      if (c == z + s) {\n         const nro = nr - c + 1;\n         const nco = nc - c + 1;\n         const ni = c - z;\n         const Sv = new Float64Array(nro * nco);\n\n         for (let i = 0; i < nro; i++) {\n            for (let j = 0; j < nco; j++) {\n               let s = 0;\n               for (let k = 0; k < ni; k++) {\n                  s += Lv[(z - 1 + k) * nr + (c - 1) + i] * Uv[(c - 1 + j) * nc + (z - 1 + k)];\n               }\n               Sv[j * nro + i] = s;\n            }\n         }\n\n         for (let i = c; i <= nr; i++) {\n            for (let j = c; j <= nc; j++) {\n               Xv[(j - 1) * nr + (i - 1)] = Xv[(j - 1) * nr + (i - 1)] - Sv[(j - c) * nro + (i - c)];\n            }\n         }\n\n         z = c;\n      }\n\n      for (let i = c; i <= nr; i++) {\n         let acc = Xv[(c - 1) * nr + (i - 1)];\n         for (let k = z; k <= c - 1; k++) {\n            acc = acc - Lv[(k - 1) * nr + (i - 1)] * Uv[(c - 1) * nc + (k - 1)];\n         }\n         Lv[(c - 1) * nr + (i - 1)] = acc;\n      }\n\n      for (let i = c; i <= nc; i++) {\n         let acc = Xv[(i - 1) * nr + (c - 1)];\n         for (let k = z; k <= c - 1; k++) {\n            acc = acc - Lv[(k - 1) * nr + (c - 1)] * Uv[(i - 1) * nc + (k - 1)];\n         }\n         const l = Lv[(c - 1) * nr + (c - 1)];\n         Uv[(i - 1) * nc + (c - 1)] = (l == 0 ? acc : acc / l);\n      }\n   }\n\n   return {L: new Matrix(Lv, nr, nc), U: new Matrix(Uv, nc, nc)}\n}\n\n\n/**\n * Singular value decomposition\n *\n * @param {Matrix} X - matrix to decompose.\n * @param {number} [ncomp] - number of components.\n *\n * @returns {JSON} JSON with three fields, 's' - vector with singular values,\n * 'U', 'V' - matrices with left and right singular vectors.\n *\n */\nexport function svd(X, ncomp) {\n\n   let d, e, bV, bU, m, n, transposed;\n\n   if (X.nrows < X.ncols) {\n      [d, e, bV, bU] = bidiag(X.t());\n      m = X.ncols;\n      n = X.nrows;\n      transposed = true;\n   } else {\n      [d, e, bV, bU] = bidiag(X);\n      m = X.nrows;\n      n = X.ncols;\n      transposed = false;\n   }\n\n   if (!ncomp) {\n      ncomp = Math.min(m, n);\n   }\n\n   const maxit = 500 * n * n;\n   const thresh = Math.pow(10, -64);\n   let Gt = Matrix.eye(n);\n   let P = Matrix.eye(n);\n\n   for (let it = 0; it < maxit; it++) {\n\n      // find first nonzero element in e from bottom\n      let iU = 0;\n      for (let i = n - 1; i >= 1; i--) {\n         if (Math.abs(e.v[i - 1]) > thresh) {\n            iU = i\n            break;\n         }\n      }\n\n      // find first nonzero element in e from top\n      let iL = iU + 1;\n      for (let i = 1; i <= n - 1; i++) {\n         if (Math.abs(e.v[i - 1]) > thresh) {\n            iL = i;\n            break;\n         }\n      }\n\n      // check the convergence and return result\n      if ((iU == iL && Math.abs(e[iU - 1]) <= thresh) || (iU < iL)) {\n\n         // compute final results:\n         // V = bU * P\n         // U = bV * Gt\n         // and correct sign of singular values and columns of V\n\n         const s = Vector.zeros(ncomp);\n         const U = Matrix.zeros(X.nrows, ncomp);\n         const V = Matrix.zeros(X.ncols, ncomp);\n\n         for (let k = 1; k <= ncomp; k++) {\n            const sign = Math.sign(d.v[k - 1]);\n            s.v[k - 1] = Math.abs(d.v[k - 1]);\n\n            let uk, vk;\n            if (transposed) {\n               uk = V.getcolref(k);\n               vk = U.getcolref(k);\n            } else {\n               uk = U.getcolref(k);\n               vk = V.getcolref(k);\n            }\n\n            const pk = P.getcolref(k);\n            const gtk = Gt.getcolref(k);\n\n            for (let i = 0; i < n; i++) {\n               const pki = pk[i];\n               const gtki = gtk[i] * sign;\n\n               const bur = bU.getcolref(i + 1);\n               const vur = bV.getcolref(i + 1);\n\n               for (let r = 0; r < n; r++) {\n                  uk[r] += bur[r] * pki;\n                  vk[r] += vur[r] * gtki;\n               }\n               for (let r = n; r < m; r++) {\n                  uk[r] += bur[r] * pki;\n               }\n            }\n         }\n\n         return {s: s, U: U, V: V};\n      }\n\n      // re-sweep\n      const cstart = iL - 1;\n      const cend = iU + 1;\n      const clen = iU - iL + 2;\n      const [rd, re, rG, rPt] = vsweep(d.v.subarray(cstart, cend), e.v.subarray(cstart, cend - 1));\n\n      // replace elements of d and e\n      d.v.set(rd, cstart);\n      e.v.set(re, cstart);\n\n      // now we need to compute:\n      // G = rG' * G = (G' * rG)' -> this should be done only fo selected columns in G\n      // P =            P  * rP'  -> only for selected columns in P\n\n      // get local copy of the \"clen\" columns from G' and P starting from column \"cstart\"\n      const lgt = Gt.v.slice(cstart * n, cstart * n + clen * n);\n      const lp = P.v.slice(cstart * n, cstart * n + clen * n);\n\n      // compute dot(lG', rG) and save back to G'\n      // compute dot(P, rP') and save back to P\n      for (let c = 0; c < clen; c++) {\n\n         // get pointers to column \"c\" (c from \"cstart\" to \"cend\") of Gt and P - to save the results\n         const gtc = Gt.getcolref(c + cstart + 1);  // nc x 1\n         const pc = P.getcolref(c + cstart + 1);    // nc x 1\n\n         // get pointers to the columns of rG and rPt\n         const rgc = rG.getcolref(c + 1);           // clen x 1\n         const rptc = rPt.getcolref(c + 1);          // clen x 1\n\n         // copmpute and save the dot products\n         for (let r = 0; r < n; r++) {\n            // row \"r\" of lGt (nc x clen) times column \"c\" of rG (clen x 1)\n            // row of lP times column of rPt\n            let gtcr = 0;\n            let pcr = 0;\n            for (let i = 0; i < clen; i++) {\n               gtcr += lgt[i * n + r] * rgc[i];\n               pcr += lp[i * n + r] * rptc[i];\n            }\n            gtc[r] = gtcr;\n            pc[r] = pcr;\n         }\n      }\n\n\n      // get local copy of selected columns from G' and P\n      /*\n      const lGt = Matrix.zeros(n, l);\n      const lP = Matrix.zeros(n, l)\n      for (let c = iL; c <= iU + 1; c++) {\n         lGt.v.set(Gt.v.subarray((c - 1) * n, c * n), (c - iL) * n);\n         lP.v.set(P.v.subarray((c - 1) * n, c * n), (c - iL) * n);\n      }\n\n      // compute dot(lG', rG) and save back to G\n      // compute dot(P, rP') and save back to P\n      for (let c = 1; c <= l; c++) {\n         const newgc = lGt.dot(new Vector(rG.getcolref(c)));\n         const newpc = lP.dot(new Vector(rPt.getcolref(c)));\n         Gt.v.set(newgc.v, (c - 1 + iL - 1) * n);\n         P.v.set(newpc.v, (c - 1 + iL - 1) * n);\n      }\n      */\n   }\n\n   throw Error(\"svd: can not converge.\")\n}\n\n\n/**\n * Applies givens rotations to diagonal elements of bidiagonalized matrix.\n *\n * @param {Float64Array} d - vector with main diagonal elements.\n * @param {Float64Array} e - vector with diagonal elements on top of main diagonal.\n *\n * @returns {Array} array with vectors 'd' and 'e' after rotation as well as right\n * transformation matrices G and P'.\n *\n */\nexport function vsweep(d, e) {\n\n   const n = d.length;\n\n   let cold = 1;\n   let sold = 1;\n\n   let c = 1;\n   let s = 0;\n   let r = 0;\n\n   let G = Matrix.eye(n);\n   let Pt = Matrix.eye(n);\n\n   for (let k = 1; k <= (n - 1); k++) {\n\n      [c, s, r] = rot(c * d[k - 1], e[k - 1]);\n\n      // get two columns from G and rotate their values\n      const gk = G.v.subarray((k - 1) * n, (k + 1) * n);\n      const gkc = gk.slice();\n\n      for (let i = 0; i < n; i++) {\n         gk[i]     =  gkc[i] * c + gkc[i + n] * s;\n         gk[i + n] = -gkc[i] * s + gkc[i + n] * c;\n      }\n\n      if (k != 1) {\n         e[k - 2] = r * sold;\n      }\n\n      [cold, sold, r] = rot(cold * r, d[k] * s);\n      d[k - 1] = r;\n\n      // get two columns from Pt and rotate their values\n      const ptk = Pt.v.subarray((k - 1) * n, (k + 1) * n);\n      const ptkc = ptk.slice();\n\n      for (let i = 0; i < n; i++) {\n         ptk[i]     =  ptkc[i] * cold + ptkc[i + n] * sold;\n         ptk[i + n] = -ptkc[i] * sold + ptkc[i + n] * cold;\n      }\n\n   }\n\n   const h = c * d[n - 1];\n   e[n - 2] = h * sold;\n   d[n - 1] = h * cold;\n\n   return [d, e, G, Pt];\n}\n\n\n/**\n * Generate c, s, r values for Givens rotations, so [c s; -s c][f; g] = [r; 0].\n *\n * @param {number} f - first element of vector.\n * @param {number} g - second element of vector.\n *\n * @return array with values [c, s, r].\n *\n */\nexport function rot(f, g) {\n\n   if (f == 0) {\n      return [0, 1, g];\n   }\n\n   if (Math.abs(f) > Math.abs(g)) {\n      const t = g / f;\n      const t1 = Math.sqrt(1 + t * t);\n      const c = 1 / t1\n      return [c, t * c, f * t1];\n   }\n\n   const t = f / g;\n   const t1 = Math.sqrt(1 + t * t)\n   const s = 1 / t1\n   return [t * s, s, g * t1];\n}\n\n\n/**\n * Golub-Reinsch bidiagonalization of matrix A\n *\n * @param {Matrix} A - matrix with values.\n *\n * @returns {Array} array with three matrices [B, V, U].\n *\n */\nexport function bidiag(A) {\n\n   const m = A.nrows;\n   const n = A.ncols;\n\n   if (m < n) {\n      throw Error(\"bidiag: number of rows in A must not be smaller number of columns.\");\n   }\n\n   let Ut = Matrix.eye(m);\n   let V = Matrix.eye(n);\n   let B = A.copy();\n\n  for (let k = 1; k <= (m > n ? n : n - 1); k++) {\n   // for (let k = 1; k <= 1; k++) {\n      const mk = m - k + 1;\n\n      // compute:\n      // B  = H * B\n      // U' = H' * U';\n      const H1 = householder(B.getcolref(k), k);\n\n      for (let c = 1; c <= n; c++) {\n\n         // get c-th column of B (starting from (k-1) row) and make a copy\n         const bc = B.v.subarray((c - 1) * m + k - 1, c * m)\n         const bcc = bc.slice();\n\n         // get c-th column of U' (starting from (k-1) row) and make a copy\n         const utc = Ut.v.subarray((c - 1) * m + k - 1, c * m)\n         const utcc = utc.slice();\n\n         for (let r = k; r <= m; r++) {\n            // because H is symmetric we take column instead of row\n            const hr = H1.getcolref(r - k + 1);\n            let sb = 0;\n            let sut = 0;\n            for (let i = 0; i < mk; i++) {\n               sb += hr[i] * bcc[i];\n               sut += hr[i] * utcc[i]\n            }\n            bc[r - k] = sb;\n            utc[r - k] = sut;\n         }\n      }\n\n\n      for (let c = n + 1; c <= m; c++) {\n\n         // get c-th column of U' and make a copy\n         const utc = Ut.v.subarray((c - 1) * m + k - 1, c * m)\n         const utcc = utc.slice();\n\n         for (let r = k; r <= m; r++) {\n            const hr = H1.getcolref(r - k + 1);\n            let sut = 0;\n            for (let i = 0; i < mk; i++) {\n               sut += hr[i] * utcc[i];\n            }\n            utc[r - k] = sut;\n         }\n      }\n\n      if (k < n - 1) {\n\n         // compute:\n         // B = B * H'\n         // V = V * H\n         const H2 = householder(B.getrow(k).v, k + 1);\n\n         // we need to process columns from k + 1, so make a subset from the start\n         const Bvk = B.v.subarray(k * m);\n         const Vvk = V.v.subarray(k * n);\n\n         let br = new Float64Array(n - k)\n         let vr = new Float64Array(n - k)\n\n         // process first n rows for both B and V\n         for (let r = 1; r <= n; r++) {\n\n            // get elements from r-th row\n            for (let i = 0; i < n - k; i++) {\n               br[i] = Bvk[i * m + r - 1];\n               vr[i] = Vvk[i * n + r - 1];\n            }\n\n            for (let c = k + 1; c <= n; c++) {\n               const hc = H2.getcolref(c - k);\n               let sb = 0;\n               let sv = 0;\n               for (let i = 0; i < H2.nrows; i++) {\n                  sb += br[i] * hc[i];\n                  sv += vr[i] * hc[i];\n               }\n               Bvk[(c - k - 1) * m + (r - 1)] = sb;\n               Vvk[(c - k - 1) * n + (r - 1)] = sv\n            }\n         }\n\n         // process rows from (n+1) to m for B only\n         for (let r = n + 1; r <= m; r++) {\n\n            // get elements from r-th row\n            for (let i = 0; i < n - k; i++) {\n               br[i] = Bvk[i * m + r - 1];\n            }\n\n            for (let c = k + 1; c <= n; c++) {\n               const hc = H2.getcolref(c - k);\n               let sb = 0;\n               for (let i = 0; i < H2.nrows; i++) {\n                  sb += br[i] * hc[i];\n               }\n               Bvk[(c - k - 1) * m + (r - 1)] = sb;\n            }\n         }\n      }\n   }\n\n   const d = Vector.zeros(n);\n   const e = Vector.zeros(n - 1);\n   for (let i = 0; i < n - 1; i++) {\n      d.v[i] = B.v[i * m + i];\n      e.v[i] = B.v[(i + 1) * m + i];\n   }\n   d.v[n - 1] = B.v[(n - 1) * m + (n - 1)];\n\n   return [d, e, V, Ut.t()];\n}\n\n\n/**\n * Compute elements of Householder transformation as a matrix.\n *\n * @param {Float64Array} b - array with diagonal values.\n * @param {number} k - position to start with.\n *\n * @returns {Matrix} matrix with transformation values.\n *\n */\nexport function householder(b, k) {\n\n   // get vector with values\n   const h = householderv(b, k);\n   const n = h.length;\n   // compute matrix as outer product of the vector\n   const H = Matrix.zeros(n);\n   for (let c = 0; c < n; c++) {\n      const hc = H.getcolref(c + 1);\n      for (let r = 0; r < n; r++) {\n         hc[r] = 1 * (r == c) - 2 * h[r] * h[c];\n      }\n   }\n\n   return H;\n}\n\n\n/**\n * Compute elements of Householder transformation as a vector.\n *\n * @param {Float64Array} b - array with diagonal values.\n * @param {number} k - position to start with.\n *\n * @returns {Float64Array} vector with transformation values.\n *\n */\nexport function householderv(b, k) {\n\n   const n = b.length;\n\n   if (k >= n) {\n      throw Error(\"householder: parameter 'k' must be smaller than length of vector 'b'.\")\n   }\n\n   const hlen = n - k + 1;\n   const h = b.slice(k - 1);\n   // to avoid computing norm2 twice we will\n   // compute it based on the first norm\n   const hssq = ssq(h);\n   const hn2 = Math.sqrt(hssq);\n   const s = Math.sign(h[0]);\n   const a = h[0];\n\n   // change first value in the vector\n   h[0] = a - s * hn2;\n\n   // recompute the norm\n   const hn2a = Math.sqrt(2 * hssq - 2 * s * a * hn2);\n\n   // if norm is zero return vector as is\n   if (hn2a < Number.EPSILON) return h\n\n   // normalize vector and return\n   for (let i = 0; i < hlen; i++) {\n      h[i] /=  hn2a;\n   }\n   return h;\n}\n\n\n\n\n\n","/* =================================================================== */\n/*    Methods for Arrays (vectors, matrices, indices and factors, )    */\n/* =================================================================== */\n\nimport { min, max, prod } from '../stat/index.js';\nimport { rnorm, runif } from '../distributions/index.js';\nimport { qr } from '../decomp/index.js';\n\nexport function isnumber(x) {\n   return typeof(x) === 'number';\n}\n\n\n/**************************************************/\n/*    Non-class methods for Vectors and Matrix    */\n/**************************************************/\n\n/**\n * Compute XY' product of two matrices.\n *\n * @param {Matrix} X - a matrix.\n * @param {Matrix} Y - a matrix.\n *\n * @returns {Matrix} result of the product.\n *\n */\nexport function tcrossprod(X, Y) {\n\n   if (Y === undefined) {\n      Y = X;\n   }\n\n   const nrx = X.nrows;\n   const ncx = X.ncols;\n\n   const nry = Y.nrows;\n   const ncy = Y.ncols;\n\n   // create vector for the product\n   const nrows = nrx;\n   const ncols = nry;\n   const ninner = ncx;\n   const out = new Float64Array(nrows * ncols);\n\n   for (let i = 0; i < ninner; i++) {\n      const xr = X.v.subarray(i * nrx, (i + 1) * nrx);\n      const yc = Y.v.subarray(i * nry, (i + 1) * nry);\n\n      for (let c = 0; c < ncols; c++) {\n         const outc = out.subarray(c * nrows, (c + 1) * nrows);\n         for (let r = 0; r < nrows; r++) {\n            outc[r] += xr[r] * yc[c];\n         }\n      }\n   }\n\n   return new Matrix(out, nrows, ncols);\n\n}\n\n\n/**\n * Compute X'Y product of two matrices or a vector and a matrix.\n *\n * @param {Matrix|Vector} X - a matrix or a vector.\n * @param {Matrix} Y - a matrix.\n *\n * @returns {Matrix} result of the product.\n *\n */\nexport function crossprod(X, Y) {\n\n   if (Y === undefined) {\n      Y = X;\n   }\n\n   if (!ismatrix(X) || !ismatrix(Y)) {\n      throw Error('crossprod: both X and Y must be instance of Matrix class.');\n   }\n\n   const nrx = X.nrows;\n   const ncx = X.ncols;\n\n   const nry = Y.nrows;\n   const ncy = Y.ncols;\n\n   // create vector for the product\n   const nrows = ncx;\n   const ncols = ncy;\n   const ninner = nrx;\n   const out = new Float64Array(nrows * ncols);\n\n   for (let c = 0; c < ncols; c++) {\n      // column c of Y\n      const yc = Y.v.subarray(c * nry, (c + 1) * nry);\n\n      // column c of out\n      const outc = out.subarray(c * nrows, (c + 1) * nrows);\n\n      for (let r = 0; r < nrows; r++) {\n\n         // column r of X (row r of X')\n         const xr = X.v.subarray(r * nrx, (r + 1) * nrx);\n\n         let s = 0;\n         for (let i = 0; i < ninner; i++) {\n            s += xr[i] * yc[i];\n         }\n         outc[r] = s;\n      }\n   }\n\n   return new Matrix(out, nrows, ncols);\n}\n\n\n/**\n * Bind several matrices or vectors into a single matrix row wise.\n *\n * @param  {...any} args - matrices or vectors separated by comma.\n *\n * @returns {Matrix} concatenated matrix.\n *\n */\nexport function rbind(...args) {\n\n   if (args.length === 1) return args[0];\n\n   // check that all matrices have the same number of rows\n   const ncols = ismatrix(args[0]) ? args[0].ncols : args[0].length;\n   const check = args.reduce( (acc, cur) => acc & ismatrix(cur) ? cur.ncols === ncols : cur.length === ncols, true);\n\n   if (!check) {\n      throw Error('rbind: all matrices must the same number of columns.');\n   }\n\n   // compute number of columns in outside matrix\n   const nrows = args.reduce( (acc, cur) => acc + (ismatrix(cur) ? cur.nrows : 1), 0);\n   const l = nrows * ncols;\n   const out = new Matrix.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set((ismatrix(a) ? a.t().v : a.v), start);\n      start += a.v.length;\n   }\n\n   return new Matrix(out, ncols, nrows).t();\n\n}\n\n\n/**\n * Bind several matrices or vectors into a single matrix column wise.\n *\n * @param  {...any} args - matrices or vectors separated by comma.\n *\n * @returns {Matrix} concatenated matrix.\n *\n */\nexport function cbind(...args) {\n\n   if (args.length === 1) return args[0];\n\n   // check that all matrices have the same number of rows\n   const nrows = ismatrix(args[0]) ? args[0].nrows : args[0].length;\n   const check = args.reduce( (acc, cur) => acc & (ismatrix(cur) ? cur.nrows === nrows : cur.length === nrows), true);\n\n   if (!check) {\n      throw Error('cbind: all matrices must the same number of rows.');\n   }\n\n   // compute number of columns in outside matrix\n   const ncols = args.reduce( (acc, cur) => acc + (ismatrix(cur) ? cur.ncols : 1), 0);\n   const l = nrows * ncols;\n   const out = new Matrix.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set(a.v, start);\n      start += a.v.length;\n   }\n\n   return new Matrix(out, nrows, ncols);\n\n}\n\n\n/**\n * Concatenate several vectors into one vector.\n *\n * @param {...Vector | ...Index} args - vectors separated by comma.\n *\n * @returns {Vector|Index} vector with concatenated values.\n *\n */\nexport function c(...args) {\n\n   if (args.length === 1) return args[0];\n\n   const l = args.reduce( (acc, cur) => acc + cur.length, 0);\n   const out = new args[0].constructor.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set(a.v, start);\n      start += a.length;\n   }\n\n   return new args[0].constructor(out);\n}\n\n\n/**\n * Change dimension of matrices and vectors.\n * @param {Matrix|Vector} obj - a matrix or a vector.\n * @param {number} nrow - number of rows in the reshaped object.\n * @param {number} ncol - number of columns in the reshaped object, if undefined, a vector will be returned.\n *\n * @returns {Matrix|Vector} the reshaped object.\n *\n */\nexport function reshape(obj, nrow, ncol) {\n\n   if (ncol === undefined) {\n      if (nrow !== obj.v.length) {\n         throw Error(\"reshape: provided dimension does not match number of values in the object.\");\n      }\n      return new Vector(obj.v);\n   }\n\n   if (obj.v.length !== nrow * ncol) {\n      throw Error(\"reshape: provided dimension does not match number of values in the object.\");\n   }\n\n   return new Matrix(obj.v, nrow, ncol);\n}\n\n\n\n/*************************************************/\n/*         Classes and type checkers             */\n/*************************************************/\n\n\n/**\n * Return 'true' of 'X' is a Matrix object, 'false' otherwise.\n *\n * @param {any} X - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function ismatrix(X) {\n   return X && X.constructor === Matrix;\n}\n\n\n/**\n * Create a Matrix object from array of values.\n *\n * @param {number[]} values - array with values.\n * @param {number} nrows - number of rows in matrix.\n * @param {number} ncols - number of columns in matrix.\n *\n * @returns {Matrix} the matrix.\n *\n */\nexport function matrix(values, nrows, ncols) {\n   return new Matrix(new Float64Array(values), nrows, ncols);\n}\n\n\n/** Class representing a matrix */\nexport class Matrix {\n\n   static valuesConstructor = Float64Array;\n   static TOLERANCE = Math.pow(10, -9);\n\n   /**\n    * Constructor for a Matrix object.\n    *\n    * @param {Float64Array} values - typed array with values.\n    * @param {number} nrows - number of rows in the matrix.\n    * @param {number} ncols - number of columns in the matrix.\n    *\n    * @returns {Matrix} a Matrix object (see description).\n    *\n    * @description  Create a matrix from vector of values. Matrix is represented by an object with two\n    * fields. Field 'v' is a typed Float64Array with all values, unfolded column by column. The second\n    * field, 'dim', is an array with 2 values: number of rows and number of columns.\n    *\n    */\n   constructor (values, nrows, ncols) {\n      if (!ArrayBuffer.isView(values) || values.constructor !== Matrix.valuesConstructor) {\n         throw Error('Matrix: parameter \"values\" must be Float64Array.')\n      }\n\n      if (nrows === 0 || ncols === 0) {\n         throw Error('Matrix: can not create matrix with zero rows or columns.')\n      }\n\n      if (values.length !== nrows * ncols) {\n         throw Error('Matrix: number elements in \"values\" is not equal to \"nrows\" x \"ncols\".')\n      }\n\n      this.v = values;\n      this.nrows = nrows\n      this.ncols = ncols;\n   }\n\n\n   /**\n    * Compute inverse of the matrix.\n    *\n    * @returns inverse matrix.\n    *\n    */\n   inv() {\n\n      if (this.nrows !== this.ncols) {\n         throw Error('inv: only squared matrices can be inverted.');\n      }\n\n      const n = this.ncols;\n\n      if (this.isuppertriangular()) {\n\n         if (this.islowertriangular()) {\n            // it means diagonal\n            return Matrix.diagm(this.diag().apply(v => Math.abs(v) > Number.EPSILON ? 1 / v : x));\n         }\n\n         // prepare matrices - we will transpose X to work with columns instead of rows\n         const I = Matrix.eye(n);\n         const Yt = Matrix.eye(n);\n         const Xt = this.t();\n\n         // solve for the last column\n         const s = Xt.v[(n - 1) * n + (n - 1)];\n         const c = n - 1;\n         for (let r = 0; r < n; r++) {\n            Yt.v[c * n + r] = I.v[c * n + r] / s;\n         }\n\n         // do backward substitution\n         for (let c = n - 2; c >= 0; c--) {\n            let s = I.getcolumn(c + 1);\n            const xc = Xt.getcolref(c + 1);\n            for (let r = c + 1; r < n; r++ ) {\n               const yc = Yt.getcolumn(r + 1);\n               s = s.subtract(yc.mult(xc[r]));\n            }\n            Yt.v.set(s.divide(xc[c]).v, c * n);\n         }\n\n         return Yt.t()\n      }\n\n\n      if (this.islowertriangular()) {\n\n         // check if diagonal elements are not zeros\n         const d = this.diag();\n         if (prod(d) < Number.EPSILON) {\n            throw Error('inv: the matrix is not invertible.');\n         }\n\n         // prepare matrices - we will transpose X to work with columns instead of rows\n         const I = Matrix.eye(n);\n         const Yt = Matrix.eye(n);\n         const Xt = this.t();\n\n         // solve for the first column\n         const c = 0;\n         const s = Xt.v[0];\n         for (let r = 0; r < n; r++) {\n            Yt.v[c * n + r] = I.v[c * n + r] / s;\n         }\n\n         // do forward substitution\n         for (let c = 1; c < n; c++) {\n            let s = I.getcolumn(c + 1);\n            const xc = Xt.getcolref(c + 1);\n            for (let r = 0; r < c; r++ ) {\n               const yc = Yt.getcolumn(r + 1);\n               s = s.subtract(yc.mult(xc[r]));\n            }\n            Yt.v.set(s.divide(xc[c]).v, c * n);\n         }\n\n         return Yt.t()\n      }\n\n      // invert matrix using QR transformation\n      const r = qr(this);\n      if (!r.R.isuppertriangular()) {\n         throw Error('inv: QR decomposition of the matrix returned incorrect result.');\n      }\n\n      return r.R.inv().dot(r.Q.t());\n   }\n\n\n   /**\n    * Check if matrix is lower triangular.\n    *\n    * @returns {boolean} true if matrix is lower triangular, false otherwise.\n    */\n   islowertriangular() {\n\n      if (this.nrows !== this.ncols) return false;\n      for (let j = 1; j < this.ncols; j++) {\n         for (let i = 0; i < j; i++) {\n            if (Math.abs(this.v[j * this.nrows + i]) > Matrix.TOLERANCE) return false;\n         }\n      }\n\n      return true;\n   }\n\n\n   /**\n    * Check if matrix is upper triangular.\n    *\n    * @returns {boolean} true if matrix is upper triangular, false otherwise.\n    */\n   isuppertriangular() {\n\n      if (this.nrows !== this.ncols) return false;\n\n      for (let j = 0; j < this.ncols; j++) {\n         for (let i = j + 1; i < this.nrows; i++) {\n            if (Math.abs(this.v[j * this.nrows + i]) > Matrix.TOLERANCE) return false;\n         }\n      }\n\n      return true;\n   }\n\n\n   /**\n    * Return vector with diagonal elements of matrix.\n    *\n    * @returns {Vector} vector with diagonal elements.\n    *\n    */\n   diag() {\n\n      const n = Math.min(this.nrows, this.ncols);\n      const out = new Float64Array(n);\n      for (let rc = 0; rc < n; rc++) {\n         out[rc] = this.getcolref(rc + 1)[rc];\n      }\n\n      return new Vector(out);\n   }\n\n\n   /**\n    * Transpose the matrix.\n    *\n    * @returns {Matrix} transposed matrix.\n    *\n    */\n   t() {\n\n      const ncols_out = this.nrows;\n      const nrows_out = this.ncols;\n      const out = new Matrix.valuesConstructor(this.v.length);\n\n      if (this.ncols < this.nrows) {\n         for(let i = 0; i < this.ncols; i++) {\n            const x = this.v.subarray(i * this.nrows, (i + 1) * this.nrows)\n            for(let j = 0; j < this.nrows; j++) {\n               out[j * nrows_out + i] = x[j];\n            }\n         }\n\n         return new Matrix(out, nrows_out, ncols_out);\n      }\n\n      for(let j = 0; j < this.nrows; j++) {\n         const outx = out.subarray(j * nrows_out, (j + 1) * nrows_out)\n         for(let i = 0; i < this.ncols; i++) {\n            outx[i] = this.v[i * this.nrows + j];\n         }\n      }\n\n      return new Matrix(out, nrows_out, ncols_out);\n   }\n\n\n   /**\n    * Compute a dot product of the matrix with vector or another matrix.\n    *\n    * @param {Vector|Matrix} X - a vector or a matrix to compute a dot product with.\n    *\n    * @returns {Matrix} result of the dot product.\n    *\n    */\n   dot(X) {\n\n      if (isvector(X)) {\n         return new Matrix(_dot(this.v, X.v, this.nrows, this.ncols, X.length, 1), this.nrows, 1);\n      }\n\n      if (ismatrix(X)) {\n         return new Matrix(_dot(this.v, X.v, this.nrows, this.ncols, X.nrows, X.ncols), this.nrows, X.ncols);\n      }\n\n      throw Error(\"dot: argument 'X' must be a matrix or a vector.\");\n   }\n\n   /**\n    * Does mathematical operation between the matrix and another matrix, a vector or a number.\n    *\n    * @param {number|Vector|Matrix} x - a vector or a number to operate with.\n    * @param {function} fun - function to apply.\n    * @param {number} dims - if 'x' is a vector which dimension applies it to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   op(X, fun, dims) {\n\n      if (ismatrix(X)) {\n         return new Matrix(_opvv(this.v, X.v, fun), this.nrows, this.ncols);\n      }\n\n      if (isnumber(X)) {\n         return new Matrix(_opvn(this.v, X, fun), this.nrows, this.ncols);\n      }\n\n      if (!isvector(X)) {\n         throw new Error('op: argument \"x\" must be a matrix, a vector or a number.');\n      }\n\n      if (dims === undefined) {\n         dims = X.length === this.ncols ? 2 : 1;\n      }\n\n      if (dims === 2 && X.length === this.ncols) {\n\n         const out = new Matrix.valuesConstructor(this.v.length);\n         for (let c = 0; c < this.ncols; c++) {\n            out.set(_opvn(this.getcolref(c + 1), X.v[c], fun), c * this.nrows);\n         }\n\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n\n      if (dims === 1 && X.length === this.nrows) {\n\n         const out = new Matrix.valuesConstructor(this.v.length);\n         for (let c = 0; c < this.ncols; c++) {\n            out.set(_opvv(this.getcolref(c + 1), X.v, fun), c * this.nrows);\n         }\n\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n\n      throw new Error('op: length of vector \"X\" does not match number of rows nor number of columns of the maytrix.');\n\n   }\n\n\n   /**\n    * Add a number or values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to sum the values with.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   add(X) {\n      return this.op(X, (a, b) => a + b);\n   }\n\n   /**\n    * Subtract a number or values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to subtract the values of.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   subtract(X) {\n      return this.op(X, (a, b) => a - b);\n   }\n\n\n   /**\n    * Multiply to a number or to values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to multiply the values to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   mult(X) {\n      return this.op(X, (a, b) => a * b);\n   }\n\n\n   /**\n    * Divide to a number or to values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to divide the values to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   divide(X) {\n      return this.op(X, (a, b) => a / b);\n   }\n\n\n   /**\n    * Applies a function to elements of the matrix.\n    * @param {function} fun - function to apply (should return single value).\n    * @param {number} dims - which elements to apply the function to (0 - every, 1 - rows, 2 - columns).\n    *\n    * @returns {Vector|Matrix} - result of applying the function (either array with one value for each\n    * row/column or another Matrix with transformed values).\n    */\n   apply(fun, dims) {\n\n      // by default function is applied to columns\n      if (dims === undefined) {\n         dims = 2;\n      }\n\n      // columns\n      if (dims == 2) {\n         const n = this.ncols;\n         const out = new Matrix.valuesConstructor(n);\n         for (let i = 0; i < n; i++) {\n            out[i] = fun(this.getcolref(i + 1));\n         }\n         return new Vector(out);\n      }\n\n      // rows\n      if (dims == 1) {\n         return this.t().apply(fun, 2);\n      }\n\n      // individual values\n      if (dims == 0) {\n         const n = this.v.length;\n         const out = new Matrix.valuesConstructor(n);\n         for (let i = 0; i < n; i++) {\n            out[i] = fun(this.v[i]);\n         }\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n   }\n\n\n   /**\n    * Replace values of matrix specified by 'rind' and 'cind' with values from another matrix.\n    *\n    * @param {Matrix} - matrix with values to use as replacement.\n    * @param {number | Array | Index} rind - row indices (as number or vector of indices).\n    * @param {number | Array | Index} cind - column indices (as number or vector of indices).\n    *\n    * @description Row and column indices must start from 1. Empty array ([]) tells function to use\n    * all elements (e.g. all rows or all columns). Size of matrix 'X' should correspond to the\n    * number of indices.\n    *\n    * Function does not create a new matrix but changes the current one.\n    *\n    * @returns {Matrix} the matrix with replaced values.\n    *\n    */\n   replace (X, rind, cind) {\n\n      if (typeof(rind) === 'number') {\n         rind = [rind];\n      }\n\n      if (rind.length === 0) {\n         rind = Index.seq(1, this.nrows);\n      }\n\n      if (!isindex(rind)) {\n         rind = index(rind);\n      }\n\n      if (typeof(cind) === 'number') {\n         cind = [cind];\n      }\n\n      if (cind.length === 0) {\n         cind = Index.seq(1, this.ncols);\n      }\n\n      if (!isindex(cind)) {\n         cind = index(cind);\n      }\n\n      const nrows = rind.length;\n      const ncols = cind.length;\n\n      if (min(rind) < 1 || max(rind) > this.nrows) {\n         throw Error('Matrix.replace: row indices do not match the dimension of matrix.');\n      }\n\n      if (min(cind) < 1 || max(cind) > this.ncols) {\n         throw Error('Matrix.replace: column indices do not match the dimension of matrix.');\n      }\n\n      if (X.nrows !== nrows || X.ncols !== ncols) {\n         throw Error('Matrix.replace: dimension of \"X\" does not match the indices.');\n      }\n\n      for (let ic = 0; ic < cind.length; ic++) {\n         const xc = X.getcolref(ic + 1);\n         const cv = (cind.v[ic] - 1) * this.nrows;\n         for (let ir = 0; ir < rind.length; ir++) {\n            const r = rind.v[ir];\n            this.v[cv + r - 1] = xc[ir];\n         }\n      }\n\n      return this;\n   }\n\n\n   /**\n    * Create a deep copy of the matrix.\n    *\n    * @returns {Matrix}\n    *\n    */\n   copy() {\n      return new Matrix(this.v.slice(), this.nrows, this.ncols);\n   }\n\n   /**\n    * Return values from a particular matrix row as vector.\n    *\n    * @param {number} ir - row index (starting from 1).\n    *\n    * @returns {Vector} vector with column values.\n    *\n    */\n   getrow(ir) {\n\n      if (ir < 1 || ir > this.nrows) {\n         throw Error('getrow: wrong row index.');\n      }\n\n      const v = new Vector.valuesConstructor(this.ncols);\n      for (let c = 0; c < this.ncols; c++) {\n         v[c] = this.getcolref(c + 1)[ir - 1];\n      }\n      return new Vector(v);\n   }\n\n\n   /**\n    * Return values from a particular matrix column as vector.\n    *\n    * @param {number} ic - column index (starting from 1).\n    *\n    * @returns {Vector} vector with column values.\n    *\n    */\n   getcolumn(ic) {\n\n      if (ic < 1 || ic > this.ncols) {\n         throw Error('getcolumn: wrong column index.');\n      }\n\n      return new Vector(this.v.slice((ic - 1) * this.nrows, ic * this.nrows));\n   }\n\n\n   /**\n    * Return a reference (not copy) to values of a particular matrix column.\n    *\n    * @param {number} ic - index of column (starting from 1).\n    *\n    * @returns {Float64Array} - reference to the column values as typed array.\n    *\n    */\n   getcolref(ic) {\n      return this.v.subarray((ic - 1) * this.nrows, ic * this.nrows);\n   }\n\n\n   /**\n    * Create a subset of a matrix using row and column indices.\n    *\n    * @param {number|Index} rind - row indices to select (as Index or a single number).\n    * @param {number|Index} cind - column indices to select (as Index or a single number).\n    *\n    * @description Row and column indices must start from 1. If 'rind' or 'cind' are null,\n    * all items from this direction will be taken.\n    *\n    * @returns {Matrix} the subset of the matrix.\n    *\n    */\n   subset(rind, cind) {\n\n      if (typeof(rind) === 'number') {\n         rind = index([rind]);\n      }\n\n      if (typeof(cind) === 'number') {\n         cind = index([cind]);\n      }\n\n      if (Array.isArray(rind)) {\n         rind = rind.length === 0 ? null : index(rind);\n      }\n\n      if (Array.isArray(cind)) {\n         cind = cind.length === 0 ? null : index(cind);\n      }\n\n      if (rind !== null && !isindex(rind)) {\n         throw Error('subset: parameter \"rind\" can be a number, null or instance of Index.');\n      }\n\n      if (cind !== null && !isindex(cind)) {\n         throw Error('subset: parameter \"cind\" can be a number, null or instance of Index.');\n      }\n\n      if (rind !== null && (min(rind) < 1 || max(rind) > this.nrows)) {\n         throw Error('subset: parameter \"rind\" does not match size of the matrix.');\n      }\n\n      if (cind !== null && (min(cind) < 1 || max(cind) > this.ncols)) {\n         throw Error('subset: parameter \"cind\" does not match size of the matrix.');\n      }\n\n      // select all rows and a subset of columns\n      if (rind === null) {\n\n         const ncols_out = cind.length;\n         const nrows_out = this.nrows;\n         const out = new Matrix.valuesConstructor(nrows_out * ncols_out);\n         for (let ic = 0; ic < cind.length; ic++) {\n            out.set(this.v.slice((cind.v[ic] - 1) * this.nrows, cind.v[ic] * this.nrows), ic * this.nrows);\n         }\n\n         return new Matrix(out, nrows_out, ncols_out);\n      }\n\n      // select all columns and a subset of rows\n      if (cind === null || cind === undefined) {\n         return this.t().subset(cind, rind).t();\n      }\n\n      // select specific columns and rows\n      const nrows_out = rind.length;\n      const ncols_out = cind.length;\n      const out = new Matrix.valuesConstructor(nrows_out * ncols_out);\n      let xc_out = new Matrix.valuesConstructor(nrows_out)\n      for (let ic = 0; ic < ncols_out; ic++) {\n\n         // take the a whole column from matrix and pick row values from it\n         const xc = this.v.subarray((cind.v[ic] - 1) * this.nrows, (cind.v[ic]) * this.nrows);\n         for (let ir = 0; ir < nrows_out; ir++) {\n            xc_out[ir] = xc[rind.v[ir] - 1];\n         }\n         out.set(xc_out, ic * nrows_out);\n      }\n\n      return new Matrix(out, nrows_out, ncols_out);\n   }\n\n\n   /**\n    * Convert matrix to a text representation for showing the values in nice way.\n    *\n    * @param {number} ndec - number of decimals to round the values to.\n    *\n    * @returns {string} the string with matrix representation.\n    *\n    * TODO: 1) add workaround for large matrices (...)\n    *\n    */\n   toString (ndec) {\n\n      function leftpad(x, n) {\n         return  \" \".repeat(n - x.length) + x;\n      }\n\n      if (ndec === undefined) {\n         ndec = 2;\n      }\n\n      const nvar = this.ncols;\n      const ndigits = Math.round(Math.abs(Math.log10(max(this.v)))) + ndec + 3;\n\n      let str = \"\";\n      const Xt = this.t();\n      for (let c = 1; c <= Xt.ncols; c++) {\n         str += Array.from(Xt.getcolref(c)).map(v => leftpad(v.toFixed(ndec), ndigits)).join(\" \") + \"\\n\"\n      }\n\n      return str;\n   }\n\n   /**\n    * Convert matrix values to a string which can be downloaded as CSV file.\n    *\n    * @param {string} sep - symbol to use for separation of values (by default \",\").\n    * @param {string} dec - symbold to use for separation of decimals (by default \".\").\n    * @param {Array} header - optional array of header elements (column names).\n    * @param {Array} labels - optional array of labels (row names).\n    *\n    * @returns {string} - string with CSV data.\n    */\n   toCSV(sep, dec, header, labels) {\n\n      // set default separator symbol\n      if (sep === undefined) {\n         sep = \",\";\n      }\n\n      // set default decimals separator symbol\n      if (dec === undefined) {\n         dec = sep === \";\" ? \",\" : \".\"\n      }\n\n      const hasLabels = labels !== undefined && labels !== null && labels.length > 0;\n      const hasHeader = header !== undefined && header !== null && header.length > 0;\n\n      if (hasLabels && labels.length !== this.nrows) {\n         throw Error (\"Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.\");\n      }\n\n      if (hasHeader && header.length !== this.ncols + (hasLabels ? 1 : 0)) {\n         throw Error (\"Matrix.toCSV: number of elements in header must match number of columns in the matrix.\");\n      }\n\n      // transpose to make it faster\n      const m = this.t();\n      let rows = hasHeader ? header.join(sep) + \"\\n\" : \"\";\n      for (let c = 1; c <= m.ncols; c++) {\n         rows = rows + (hasLabels ? labels[c - 1] + sep : \"\") + m.getcolref(c).join(sep) + \"\\n\";\n      }\n\n      // change decimal separator if it is not a dot\n      rows = rows.replace(/\\./g, dec);\n\n      return rows;\n   }\n\n   // Static methods //\n\n   /**\n    * Create a matrix with random values from normal distribution.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    * @param {number} [mu=0] - mean (expected) value.\n    * @param {number} [sigma=1] - standard deviation.\n    *\n    * @returns {Vector} matrix with values.\n    *\n    */\n   static randn(nrows, ncols, mu, sigma) {\n      return reshape(rnorm(nrows * ncols, mu, sigma), nrows, ncols);\n   }\n\n\n   /**\n    * Create a matrix with random values from uniform distribution [a, b].\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    * @param {number} [a=0] - smallest possible value.\n    * @param {number} [b=1] - largest possible value.\n    *\n    * @returns {Vector} matrix with values.\n    *\n    */\n   static rand(nrows, ncols, a, b) {\n      return reshape(runif(nrows * ncols, a, b), nrows, ncols);\n   }\n\n\n   /**\n    * Create an identity matrix.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns (if undefined, will be same as 'nrows').\n    *\n    * @returns {Matrix} the matrix.\n    *\n    */\n   static eye(nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      const out = new Float64Array(nrows * ncols);\n      for (let rc = 0; rc < Math.min(nrows, ncols); rc++) {\n         out[rc * nrows + rc] = 1;\n      }\n\n      return new Matrix(out, nrows, ncols);\n   }\n\n\n   /**\n    * Create a diagonal matrix based on vector with values.\n    *\n    * @param {Vector} x - vector with values.\n    *\n    * @returns {Matrix} the matrix.\n    *\n    */\n   static diagm(x) {\n\n      if (!isvector(x)) {\n         throw Error('diagm: the argument \"x\" must be a Vector.');\n      }\n\n      const n = x.length;\n      const out = new Float64Array(n * n);\n      for (let rc = 0; rc < n; rc++) {\n         out[rc * n + rc] = x.v[rc];\n      }\n\n      return new Matrix(out, n, n);\n   }\n\n\n   /**\n    * Create a Matrix object filled with zeros.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static zeros(nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      return new Matrix(new Float64Array(nrows * ncols), nrows, ncols);\n   }\n\n\n   /**\n    * Create a Matrix object filled with ones.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static ones(nrows, ncols) {\n      return Matrix.fill(1, nrows, ncols);\n   }\n\n   /**\n    * Create a Matrix object filled with a manual value.\n    *\n    * @param {number} v - value to fill the matrix with.\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static fill(v, nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      const out = new Float64Array(nrows * ncols);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Matrix(out, nrows, ncols);\n   }\n\n\n   /**\n    * Create a matrix by applying function to all possible pairs of values from two vectors.\n    *\n    * @param {Array|Vector} x - vector with values.\n    * @param {Array|Vector} y - vector with values.\n    * @param {function} fun - function of two arguments which returns a single value.\n    *\n    * @returns {Matrix}\n    */\n   static outer(x, y, fun) {\n\n      if (Array.isArray(x)) {\n         x = vector(x);\n      }\n\n      if (Array.isArray(y)) {\n         y = vector(y);\n      }\n\n      if (!isvector(x)) {\n         throw Error('Matrix.outer: parameter \"x\" must be a vector or an array with numbers.');\n      }\n\n      if (!isvector(y)) {\n         throw Error('Matrix.outer: parameter \"y\" must be a vector or an array with numbers.');\n      }\n\n      const out = Matrix.zeros(x.length, y.length);\n      for (let c = 0; c < y.length; c++) {\n         const yv = y.v[c]\n         const outc = out.getcolref(c + 1);\n         for (let r = 0; r < x.length; r++) {\n            outc[r] = fun(x.v[r], yv);\n         }\n      }\n\n      return out;\n   }\n\n\n   /**\n    * Parse string with data from a CSV file and create a matrix with values.\n    *\n    * @param {string} strData - string with all data from the CSV file.\n    * @param {string} sep - symbols used for separation of values (by default \",\").\n    * @param {boolean} hasHeader - logical, if first row must be treated as header or not.\n    * @param {boolean} hasLabels - logical, if first column must be treated as object labels or not.\n    *\n    *\n    * @returns {Object} JSON containing matrix with parsed values, header, values and decimal separators.\n    */\n   static parseCSV(strData, sep, hasHeader, hasLabels) {\n\n\n      // function which returns true if at least one value in array can not be parsed to float\n      function hasNaN(vec) {\n         return vec.some(v => Number.isNaN(Number.parseFloat(v.trim())));\n      }\n\n      // set default separator symbol\n      if (sep === undefined) {\n         sep = \",\";\n      }\n\n      // setup decimal separator\n      const dec = sep === \";\" ? \",\" : \".\";\n\n      // remove BOM symbol if any\n      strData = strData.replace(/^\\uFEFF/gm, \"\").replace(/^\\u00EF?\\u00BB\\u00BF/gm,\"\");\n\n      // remove \\r symbols\n      strData = strData.replace(/\\r/gm, \"\");\n\n      // split string with data values into array of rows\n      let rows = strData.split(/\\n/);\n\n      // check if the first row contains header\n      let header = [];\n      let startRow = 0;\n      const firstRow = rows[0].split(sep);\n      if (hasHeader || (hasHeader === undefined && hasNaN(firstRow))) {\n         header = firstRow;\n         startRow = 1;\n      }\n\n      // filter empty rows out\n      rows = rows.filter(v => v.trim().length > 1);\n\n      // check if first column contains labels\n      let labels = [];\n      let startColumn = 0;\n      if (hasLabels) {\n         startColumn = 1;\n      }\n\n      // number of rows and columns in future matrix\n      const nrows = rows.length - startRow;\n      const ncols = firstRow.length - startColumn;\n\n\n      if (nrows < 1) {\n         throw Error(\"Data file should contain at least 1 row with values.\");\n      }\n\n      if (ncols < 1) {\n         throw Error(\"Data file should contain at least 1 column with values.\");\n      }\n\n      // set rows of data as columns of matrix - it is faster\n      const data = Matrix.zeros(ncols, nrows);\n\n      // find symbol used for decimals separator\n      for (let r = startRow; r < nrows + startRow; r++) {\n\n         // parsing: trim spaces and replace non-numbers with dot (.)\n         const rowValuesAll = rows[r].split(sep)\n\n         let rowValues;\n         if (hasLabels) {\n            labels[r - startRow] = rowValuesAll[0];\n            rowValues = rowValuesAll.slice(1).map(v => Number.parseFloat(v.trim().replace(dec, \".\")));\n         } else {\n            rowValues = rowValuesAll.map(v => Number.parseFloat(v.trim().replace(dec, \".\")));\n         }\n\n         if (rowValues.some(v => Number.isNaN(v))) {\n            throw Error(\"Some of the values can not be converted to numbers, check your CSV file and try again.\");\n         }\n\n         if (rowValues.length != ncols) {\n            throw Error(\"Wrong number of values in row #\" + r);\n         }\n\n         data.v.set(new Float64Array(rowValues), (r - startRow) * ncols);\n      }\n\n      return {values: data.t(), header: header, labels: labels, sep:sep, dec:dec};\n   }\n\n}\n\n\n/**\n * Return 'true' of 'x' is a Vector object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isvector(x) {\n   return x && x.constructor === Vector;\n}\n\n\n/**\n * Create a Vector object from array of values.\n *\n * @param {number[]} values - array with values.\n *\n * @returns {Vector} the vector.\n *\n */\nexport function vector(values) {\n   return new Vector(new Float64Array(values));\n}\n\n\n/** Class representing a vector */\nexport class Vector {\n\n   static valuesConstructor = Float64Array;\n\n   /**\n    * Constructor for a Vector object.\n    *\n    * @param {Float64Array} values - typed array with values.\n    *\n    * @returns {Vector} a Vector object (see description).\n    * @constructor\n    *\n    * @description  Create a vector of values. Vector is represented by an object with two\n    * fields. Field 'v' is a typed Float64Array with values. The second field, 'length', is\n    * the length of the vector.\n    *\n    */\n   constructor(values) {\n\n      if (!ArrayBuffer.isView(values) || values.constructor !== Float64Array) {\n         throw Error('Vector: parameter \"values\" must be Float64Array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n   }\n\n   /**\n    * Returns a vector of indices for values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a vector of indices.\n    */\n   which(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Returns a subset of values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Vector} a subset.\n    */\n   filter(fun) {\n      const out = new Vector.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = this.v[i];\n            n = n + 1;\n         }\n      }\n\n      return new Vector(out.subarray(0, n));\n   }\n\n\n   /**\n    * Shuffles values in vector using FisherYates algorithm.\n    *\n    * @returns {Vector} vector with shuffled values.\n    */\n   shuffle() {\n      return new Vector(_shuffle(this.v));\n   }\n\n\n   /**\n    * Sorts values in a vector.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Vector} vector with sorted values\n    *\n    */\n   sort(decreasing) {\n      return new Vector(_sort(this.v, decreasing));\n   }\n\n   /**\n    * Sorts values in a vector and return indices of sorted values.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted values\n    *\n    */\n   sortind(decreasing) {\n      return new Index(_sortind(this.v, decreasing));\n   }\n\n\n   /**\n    * Replicate a vector 'n' times.\n    *\n    * @param {number} n - how many times the vector must be replicated.\n    *\n    * @returns {Vector} a vector with replicated values.\n    *\n    */\n   rep(n) {\n      return _rep(this, n);\n   }\n\n\n   /**\n    * Replicate each value in the vector 'n' times.\n    *\n    * @param {number} n - how many times every value must be replicated.\n    *\n    * @returns {Vector} a vector with replicated values.\n    *\n    */\n   repeach(n) {\n      return _repeach(this, n);\n   }\n\n\n   /**\n    * Replace values of vectors specified by 'ind' with values from another vector.\n    *\n    * @param {Vector} - vector with values to use as replacement.\n    * @param {number | Array | Index} ind - indices (as number or vector of indices).\n    *\n    * @description Indices must start from 1. Empty array ([]) tells function to use\n    * all elements. Length of vector 'x' should correspond to the\n    * number of indices.\n    *\n    * Function does not create a new vector but changes the current one.\n    *\n    * @returns {Vector} the vector with replaced values.\n    *\n    */\n   replace (x, ind) {\n\n      if (typeof(ind) === 'number') {\n         ind = [ind];\n      }\n\n      if (ind.length === 0) {\n         ind = Index.seq(1, this.length);\n      }\n\n      if (!isindex(ind)) {\n         ind = index(ind);\n      }\n\n      const n = ind.length;\n\n      if (min(ind) < 1 || max(ind) > this.length) {\n         throw Error('Vector.replace: indices do not match the lenght of the vector.');\n      }\n\n      if (x.length !== n) {\n         throw Error('Vector.replace: length of \"x\" does not match the indices.');\n      }\n\n      for (let i = 0; i < ind.length; i++) {\n         const r = ind.v[i];\n         this.v[r - 1] = x.v[i];\n      }\n\n      return this;\n   }\n\n\n   /**\n    * Create a subset of a vector using vector with indices.\n    *\n    * @param {number|Array|Index} ind - single index or vector with indices (must start from 1, not 0).\n    *\n    * @returns {Vector} a subset.\n    */\n   subset(ind) {\n\n      if (typeof(ind) === 'number') {\n         ind = index([ind]);\n      }\n\n      if (Array.isArray(ind)) {\n         ind = typeof(ind[0]) === 'boolean' ? Index.bool2ind(ind) : index(ind);\n      }\n\n      if (!isindex(ind)) {\n         throw Error('subset: parameter \"ind\" must be number, array of instance of class Index.');\n      }\n\n      const n = ind.length;\n      const out = Vector.zeros(n);\n\n      for (let i = 0; i < n; i++) {\n\n         if (ind.v[i] < 1) {\n            throw Error('subset: indices must start with 1 (not 0).');\n         }\n\n         if (ind.v[i] > this.length) {\n            throw Error('subset: index exceeds the length of the vector.');\n         }\n\n         out.v[i] = this.v[ind.v[i] - 1];\n      }\n\n      return out;\n   }\n\n\n   /**\n    * Create a subset of a vector values which are located between positions 'start' and 'end' (both included).\n    *\n    * @param {number} start - index of value to start (must start from 1, not 0).\n    * @param {number} end - index of value to end.\n    *\n    * @returns {Vector} a subset.\n    */\n   slice(start, end) {\n\n      if (start === null) {\n         start = 1;\n      }\n\n      if (end === null || end === undefined) {\n         end = this.length;\n      }\n\n      if (start < 1) {\n         throw Error('slice: indices must start with 1 (not 0).');\n      }\n\n      if (end > this.length) {\n         throw Error('slice: index exceeds the length of the vector.');\n      }\n\n      if (end < start) {\n         throw Error('slice: \"end\" must not be smaller than \"start\".');\n      }\n\n      return new Vector(this.v.slice(start - 1, end));\n   }\n\n\n   /**\n    * Make a deep copy of the vector.\n    */\n   copy() {\n      return new Vector(this.v.slice());\n   }\n\n\n   /**\n    * Compute a dot product with another vector.\n    *\n    * @param {Vector} x - a vector.\n    *\n    * @returns {number} result of the product.\n    *\n    */\n   dot(x) {\n\n      if (x === undefined) {\n         x = this;\n      }\n\n      return _dot(this.v, x.v, 1, this.length, x.length, 1)[0];\n   }\n\n\n   /**\n    * Does mathematical operation between vector values and either values from another vector or a number.\n    *\n    * @param {number|Vector} x - a vector or a number to operate with.\n    * @param {function} fun - function to apply.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   op(x, fun) {\n      if (isvector(x)) {\n         return new Vector(_opvv(this.v, x.v, fun));\n      }\n\n      if (isnumber(x)) {\n         return new Vector(_opvn(this.v, x, fun));\n      }\n\n      throw new Error('op: argument \"x\" must be a vector or a number.');\n   }\n\n\n   /**\n    * Add a number or values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to sum the values with.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   add(x) {\n      return this.op(x, (a, b) => a + b);\n   }\n\n\n   /**\n    * Subtract a number or values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to subtract the values of.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   subtract(x) {\n      return this.op(x, (a, b) => a - b);\n   }\n\n\n   /**\n    * Multiply to a number or to values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to multiply the values to.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   mult(x) {\n      return this.op(x, (a, b) => a * b);\n   }\n\n\n   /**\n    * Divide to a number or to values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to divide the values to.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   divide(x) {\n      return this.op(x, (a, b) => a / b);\n   }\n\n\n   /**\n    * Apply a function to each value of the vector.\n    *\n    * @param {function} fun - function to apply (should take one value and return one value).\n    *\n    * @returns {Vector} the transformed vector.\n    */\n   apply(fun) {\n\n      const n = this.v.length;\n      const out = Vector.zeros(n);\n      for (let i = 0; i < n; i++) {\n         out.v[i] = fun(this.v[i]);\n      }\n\n      return out;\n   }\n\n\n   // Static methods //\n\n\n   /**\n    * Concatenates numbers, arrays and vectors into a single vector.\n    *\n    * @param  {...any} args - numbers, arrays or/and vectors.\n    *\n    * @returns {Vector}\n    *\n    */\n   static c(...args) {\n\n      if (args.length === 1) return args[0];\n\n      const l = args.reduce( (acc, cur) => acc + (typeof(cur) === 'number' ? 1 : cur.length), 0);\n      const out = new Vector.valuesConstructor(l);\n\n      let start = 0;\n      for (const a of args) {\n\n         if (typeof(a) === 'number') {\n            out[start] = a;\n            start += 1;\n         } else {\n            out.set(isvector(a) ? a.v : new Vector.valuesConstructor(a), start);\n            start += typeof(a) === 'number' ? 1 : a.length;\n         }\n      }\n\n      return new Vector(out);\n   }\n\n\n   /**\n    * Generate sequence of values.\n    *\n    * @param {number} start - first value.\n    * @param {number} end - last value.\n    * @param {number} [by=1] - increment between values.\n    *\n    * @returns {Vector} vector with sequence values.\n    *\n    */\n   static seq(start, end, by) {\n      return _seq(start, end, by, Vector)\n   }\n\n\n   /**\n    * Create a vector with random values from normal distribution.\n    *\n    * @param {number} length - number of values.\n    * @param {number} [mu=0] - mean (expected) value.\n    * @param {number} [sigma=1] - standard deviation.\n    *\n    * @returns {Vector} vector with values.\n    *\n    */\n   static randn(length, mu, sigma) {\n      return rnorm(length, mu, sigma);\n   }\n\n\n   /**\n    * Create a vector with random values from uniform distribution [a, b].\n    *\n    * @param {number} length - number of values.\n    * @param {number} [a=0] - smallest possible value.\n    * @param {number} [b=1] - largest possible value.\n    *\n    * @returns {Vector} vector with values.\n    *\n    */\n   static rand(length, a, b) {\n      return runif(length, a, b);\n   }\n\n\n   /**\n    * Create a Vector object filled with zeros.\n    *\n    * @param {number} n - length of the vector\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static zeros(n) {\n      return new Vector(new Vector.valuesConstructor(n));\n   }\n\n\n   /**\n    * Create a Vector object filled with ones.\n    *\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static ones(n) {\n      return Vector.fill(1, n);\n   }\n\n\n  /**\n    * Create a Vector object filled with a repeated value.\n    *\n    * @param {number} v - value to fill the vector with.\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static fill(v, n) {\n\n      const out = new Vector.valuesConstructor(n);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Vector(out);\n   }\n\n}\n\n\n/**\n * Return 'true' of 'x' is an Index object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isindex(x) {\n   return x.constructor === Index;\n}\n\n\n/**\n * Create an Index object from array of values.\n *\n * @param {number[]} values - array with values.\n *\n * @returns {Index} the vector.\n *\n */\nexport function index(values) {\n   return new Index(new Int32Array(values));\n}\n\n\n/** Class representing a vector with indices */\nexport class Index {\n\n   static valuesConstructor = Int32Array;\n\n   /**\n    * Constructor for an Index object.\n    *\n    * @param {Int32Array} values - typed array with index values.\n    *\n    * @returns {Index} an Index object (see description).\n    * @constructor\n    *\n    * @description  Create a vector of values to be used as indices (e.g. for subsetting,\n    * counting, etc.). Index is represented by an object with two fields. Field 'v' is a typed\n    * Int32Array with index values. The second field, 'length', is the length of the vector.\n    *\n    */\n   constructor(values) {\n\n      if (!ArrayBuffer.isView(values) || values.constructor !== Int32Array) {\n         throw Error('Index: parameter \"values\" must be Int32Array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n   }\n\n\n   /**\n    * Returns a vector of indices for values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a vector of indices.\n    */\n   which(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Returns a subset of indices for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a subset.\n    */\n   filter(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = this.v[i];\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Shuffle indices.\n    *\n    * @returns {Index} vector with shuffled indices.\n    */\n   shuffle() {\n      return new Index(_shuffle(this.v));\n   }\n\n\n   /**\n    * Sorts indices.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted indices.\n    *\n    */\n   sort(decreasing) {\n      return new Index(_sort(this.v, decreasing));\n   }\n\n   /**\n    * Sorts indices and return indices of sorted values.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted indices.\n    *\n    */\n   sortind(decreasing) {\n      return new Index(_sortind(this.v, decreasing));\n   }\n\n   /**\n    * Replicate the index object 'n' times.\n    *\n    * @param {number} n - how many times the index must be replicated.\n    *\n    * @returns {Index} index with replicated values.\n    *\n    */\n   rep(n) {\n      return _rep(this, n);\n   }\n\n\n   /**\n    * Replicate each index in the index 'n' times.\n    *\n    * @param {number} n - how many times every value must be replicated.\n    *\n    * @returns {Index} an index object with replicated values.\n    *\n    */\n   repeach(n) {\n      return _repeach(this, n);\n   }\n\n   /**\n    * Create a subset of a index using another vector with indices.\n    *\n    * @param {number|Array|Index} ind - single index or vector with indices (must start from 1, not 0).\n    *\n    * @returns {Index} a subset.\n    */\n   subset(ind) {\n\n     if (typeof(ind) === 'number') {\n         ind = index([ind]);\n      }\n\n      if (Array.isArray(ind)) {\n         ind = index(ind);\n      }\n\n      if (!isindex(ind)) {\n         throw Error('subset: parameter \"ind\" must be number, array of instance of class Index.');\n      }\n\n      const n = ind.length;\n      const out = new Index.valuesConstructor(n);\n\n      for (let i = 0; i < n; i++) {\n\n         if (ind.v[i] < 1) {\n            throw Error('subset: indices must start with 1 (not 0).');\n         }\n\n         if (ind.v[i] > this.length) {\n            throw Error('subset: index exceeds the length of the vector.');\n         }\n\n         out[i] = this.v[ind.v[i] - 1];\n      }\n\n      return new Index(out);\n   }\n\n\n   /**\n    * Create a subset of a vector of indices which are located between positions 'start' and 'end' (both included).\n    *\n    * @param {number} start - index of value to start (must start from 1, not 0).\n    * @param {number} end - index of value to end.\n    *\n    * @returns {Index} a subset.\n    */\n   slice(start, end) {\n\n      if (start === null) {\n         start = 1;\n      }\n\n      if (end === null || end === undefined) {\n         end = this.length;\n      }\n\n      if (start < 1) {\n         throw Error('slice: indices must start with 1 (not 0).');\n      }\n\n      if (end > this.length) {\n         throw Error('slice: index exceeds the length of the vector.');\n      }\n\n      if (end < start) {\n         throw Error('slice: \"end\" must not be smaller than \"start\".');\n      }\n\n      return new Index(this.v.slice(start - 1, end));\n   }\n\n\n   // Static methods //\n\n   /**\n    * Generate sequence of indices.\n    *\n    * @param {number} start - first value.\n    * @param {number} end - last value.\n    * @param {number} [by=1] - increment between values.\n    *\n    * @returns {Index} object with sequence values.\n    *\n    */\n   static seq(start, end, by) {\n      return _seq(start, end, by, Index);\n   }\n\n\n   /**\n    * Create an Index object filled with ones.\n    *\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Index} the generated vector of indices.\n    *\n    */\n   static ones(n) {\n      return Index.fill(1, n);\n   }\n\n\n  /**\n    * Create an Index object filled with a repeated value.\n    *\n    * @param {number} v - value to fill the index vector with (must be integer).\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector of indices.\n    *\n    */\n   static fill(v, n) {\n\n      const out = new Index.valuesConstructor(n);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Index(out);\n   }\n\n\n   /**\n    * Convert array of logical values to vector of indices.\n    *\n    * @param {Array} x - array of logical values.\n    *\n    * @returns {Index} vector of indices where x is true.\n    *\n    */\n   static bool2ind(x) {\n\n      let n = 0;\n      const out = new Index.valuesConstructor(x.length);\n\n      for (let i = 0; i < x.length; i++) {\n         if (x[i]) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n}\n\n/**\n * Return 'true' of 'x' is an Factor object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isfactor(x) {\n   return x.constructor === Factor;\n}\n\n/**\n * Create a factor object from Array with values.\n *\n * @param {Array} x - array with values.\n *\n * @return {Factor} returns instance of Factor object.\n *\n */\nexport function factor(x) {\n   const n = x.length;\n   const values = new Factor.valuesConstructor(n);\n   const labels = [];\n\n   for (let i = 0; i < n; i++) {\n      const j = labels.findIndex(v => v === x[i]);\n      if (j < 0) {\n         // value is new\n         labels.push(x[i])\n         values[i] = labels.length - 1;\n      } else {\n         // value already present\n         values[i] = j;\n      }\n   }\n\n   return new Factor(values, labels)\n}\n\n\n/** Class representing a factor vector with categorical variables */\nexport class Factor {\n\n   static valuesConstructor = Uint8Array;\n\n   /**\n    * Constructor for a Factor object.\n    *\n    * @param {Uint8Array} values - vector with indices for each category item.\n    * @param {Array} labels - array with labels for each category.\n    *\n    * @returns {Factor} class object (see description).\n    * @constructor\n    *\n    */\n   constructor(values, labels) {\n\n      if (values.constructor !== Factor.valuesConstructor) {\n         throw Error('Factor: wrong class for parameter \"values\".')\n      }\n\n      if (values.nrows < 1 || values.ncols < 1) {\n         throw Error('Factor: parameter \"values\" must have at least one row and one column.')\n      }\n\n      if (!labels || !Array.isArray(labels)) {\n         throw Error('Factor: parameter \"labels\" must be an array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n      this.labels = labels.map(v => v.toString());\n      this.nlevels = this.labels.length;\n   }\n\n   /**\n    * Return vector of indices corresponding to location of a particular category.\n    *\n    * @param {string} value - name (label) of the category to find.\n    *\n    * @returns {Index} vector with indices (starts from 1).\n    */\n   which(value) {\n      const ind = this.labels.findIndex((v, i) => v === value);\n      const out = new Index.valuesConstructor(this.length);\n      let k = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (this.v[i] === ind) {\n            out[k] = i + 1;\n            k += 1;\n         }\n      }\n\n      return new Index(out.slice(0, k))\n   }\n}\n\n\n\n/***********************************************/\n/*    Generic methods                          */\n/***********************************************/\n\n/**\n * Generate sequence of values for vector or index.\n *\n * @param {number} start - first value.\n * @param {number} end - last value.\n * @param {number} [by=1] - increment between values.\n * @param {class} classRef - class reference\n *\n * @returns {Object} object with sequence values.\n *\n */\nfunction _seq(start, end, by, classRef) {\n\n   // by default increment is unit\n   if (by === undefined) by = (start <= end) ? 1 : -1;\n\n   // compute length of sequence\n   const length = Math.floor((end - start) / by) + 1;\n\n   if (length < 1) {\n      throw Error('seq: wrong combination of parameters.');\n   }\n\n   const x = new classRef.valuesConstructor(length);\n   for (let i = 0; i < length; i++) {\n      x[i] = start + i * by;\n   }\n\n   return new classRef(x);\n}\n\n\n/**\n * Replicate object 'n' times.\n *\n * @param {Object} obj - object to replicate (Vector or Index).\n * @param {number} n - how many times the vector must be replicated.\n *\n * @returns {Object} an object with replicated values.\n *\n */\nfunction _rep(obj, n) {\n\n   const l = obj.length * n;\n   const out = new obj.constructor.valuesConstructor(l);\n   for (let i = 1; i <= n; i++) {\n      for (let j = 0; j < obj.length; j++) {\n         out[(i - 1) * obj.length + j] = obj.v[j];\n      }\n   }\n\n   return new obj.constructor(out);\n}\n\n\n/**\n * Replicate each value in the object 'n' times.\n *\n * @param {Object} obj - object to replicate (Vector or Index).\n * @param {number} n - how many times every value must be replicated.\n *\n * @returns {Object} an object with replicated values.\n *\n */\nfunction _repeach(obj, n) {\n\n   if (n < 1 || Math.round(n) !== n) {\n      throw Error('rep: parameter \"n\" must be an integer number > 1.');\n   }\n\n   const l = obj.length * n;\n   const out = new obj.constructor.valuesConstructor(l);\n   for (let j = 0; j < obj.length; j++) {\n      for (let i = 0; i < n; i++) {\n         out[j * n + i] = obj.v[j];\n      }\n   }\n\n   return new obj.constructor(out);\n}\n\n\n/**\n * Does an arithmetic operation for individual values from two arrays.\n *\n * @param {Array|Float64Array} v1 - the first array.\n * @param {Array|Float64Array} v2 - the second array.\n * @param {function} fun - function to use.\n *\n * @description the function must take two numbers and return one.\n *\n * @returns array of the same type as v1 and v2.\n */\nfunction _opvv(v1, v2, fun) {\n\n   if (v1.length !== v2.length) {\n      throw new Error(\"_opvv: arrays sizes do not match.\");\n   }\n\n   if (v1.constructor !== v2.constructor) {\n      throw new Error(\"_opvv: array types do not match.\");\n   }\n\n   const out = new v1.constructor(v1.length);\n   for (let i = 0; i < v1.length; i++) {\n      out[i] = fun(v1[i], v2[i]);\n   }\n\n   return out;\n}\n\n\n\n/**\n * Does an arithmetic operation for individual value from an array and a number.\n *\n * @param {Array|Float64Array} v1 - an array.\n * @param {number} v2 - a number.\n * @param {function} fun - function to use.\n *\n * @description the function must take two numbers and return one.\n *\n * @returns array of the same type as v1.\n */\nfunction _opvn(v1, v2, fun) {\n\n   const out = new v1.constructor(v1.length);\n   for (let i = 0; i < v1.length; i++) {\n      out[i] = fun(v1[i], v2);\n   }\n\n   return out;\n}\n\n\n/**\n * Generic function for taking a dot product of two matrices, X and Y, represented as vectors\n * @param {TypedArray} xv - vector with values from X\n * @param {TypedArray} yv - vector with values from Y\n * @param {number} nrx - number of rows in X\n * @param {number} ncx - number of columns in X\n * @param {number} nry - number of rows in Y\n * @param {number} ncy - number of columns in Y\n *\n * @returns {TypedArray} - vector with result of the product\n */\nexport function _dot(xv, yv, nrx, ncx, nry, ncy) {\n\n   if (ncx !== nry) {\n      throw Error('_dot: matrix dimensions do not much.');\n   }\n\n   // create vector for the product\n   const nrows = nrx;\n   const ncols = ncy;\n   const ninner = ncx;\n   const out = new xv.constructor(nrows * ncols);\n\n   for (let c = 0; c < ncols; c++) {\n      const yc = yv.subarray(c * nry, (c + 1) * nry)\n      const outc = out.subarray(c * nrows, (c + 1) * nrows);\n\n      for (let i = 0; i < ninner; i++) {\n         const yci = yc[i];\n         const xr = xv.subarray(i * nrx, (i + 1) * nrx)\n         for (let r = 0; r < nrows; r++) {\n            outc[r] += xr[r] * yci;\n         }\n      }\n   }\n\n   return out;\n}\n\n\n/**\n * Shuffles values in vector x using FisherYates algorithm.\n *\n * @param {Arrat|TypedArray} x - a vector with values.\n *\n * @returns {Array|TypedArray} ector with shuffled values.\n *\n */\nexport function _shuffle(x) {\n\n  let y = x.slice();\n  let n = y.length;\n  let t, i;\n\n  while (n) {\n    i = Math.floor(Math.random() * n--);\n    t = y[n];\n    y[n] = y[i];\n    y[i] = t;\n  }\n\n  return y;\n}\n\n\n/**\n * Sorts values in a vector.\n *\n * @param {Array|TypedArray} x - vector with values.\n * @param {boolean} decreasing - should order be decreasing (true) or increasing (false).\n *\n * @returns {Array} array with two vectors: sorted values and indices of the sorted values.\n *\n */\nexport function _sort(x, decreasing = false) {\n   return decreasing ? x.slice().sort((a, b) => b - a) : x.slice().sort((a, b) => a - b);\n}\n\n\n/**\n * Sorts values in a vector.\n *\n * @param {Array|TypedArray} x - vector with values.\n * @param {boolean} decreasing - should order be decreasing (true) or increasing (false).\n *\n * @returns {Array} array with two vectors: sorted values and indices of the sorted values.\n *\n */\nexport function _sortind(x, decreasing = false) {\n   const ind = Index.seq(1, x.length).v;\n   return decreasing ? ind.sort((a, b) => x[b - 1] - x[a - 1]) : ind.sort((a, b) => x[a - 1] - x[b - 1]);\n}\n","/**************************************************/\n/* Methods for PCA and PCVPCA based on wasm code  */\n/* partly can be also used for PCR/PCVPCR         */\n/**************************************************/\n\nimport { ismatrix, Matrix } from 'mdatools/arrays';\nimport { qchisq } from 'mdatools/distributions';\n\n// zero level for distance parameters (if below, set Nu = 1)\nconst ZERO = Math.pow(10,-16);\n\n\n/**\n * Returns length of array with PCA results.\n *\n * @param {number} nrows number of rows in a dataset.\n * @param {number} ncomp number of components in the model.\n * @param {number} ncols number of columns in a dataset.\n *\n * @returns {number} the length of the results array.\n */\nexport function pca_getreslength(nrows, ncomp, ncols) {\n\n   // Structure of PCA results:\n   // - T: nr x ncomp\n   // - H: nr x ncomp\n   // - Q: nr x ncomp\n   // - expvar: 1 x ncomp\n   // - Fc: nr x ncomp\n   // - Fr: nr x ncomp\n\n   // - G: nc x ncomp\n   // - R: nc x ncomp\n   // - Ic: nc x ncomp\n   // - Ir: nc x ncomp\n\n   return (5 * nrows * ncomp) + ncomp + (4 * ncols * ncomp);\n}\n\n\n/**\n * Returns length of array with PCA model.\n *\n * @param {number} ncols number of columns in calibration set (number of variables).\n * @param {number} ncomp number of components\n *\n * @returns {number} the length of the model array.\n */\nexport function pca_getmodellength(ncols, ncomp) {\n\n   // Structure of PCA model:\n   // - nc and ncomp: 2\n   // - mX: 1 x ncols\n   // - sX: 1 x ncols\n   // - P: ncols x ncomp\n   // - eigenvals: 1 x ncomp\n   // - cq0: 1 x ncomp\n   // - cNq: 1 x ncomp\n   // - rq0: 1 x ncomp\n   // - rNq: 1 x ncomp\n   // - ch0: 1 x ncomp\n   // - cNh: 1 x ncomp\n   // - rh0: 1 x ncomp\n   // - rNh: 1 x ncomp\n\n   // - cr0: 1 x ncomp\n   // - cNr: 1 x ncomp\n   // - rr0: 1 x ncomp\n   // - rNr: 1 x ncomp\n   // - cg0: 1 x ncomp\n   // - cNg: 1 x ncomp\n   // - rg0: 1 x ncomp\n   // - rNg: 1 x ncomp\n\n   return 2 + 2 * ncols + ncols * ncomp + 17 * ncomp;\n}\n\n\n/**\n * Returns part of PCA model array for given outcome.\n *\n * @param {TypedArray} m array with PCA model.\n * @param {string} name name of the outcome (e.g. 'mX', 'sX', 'loadings', etc.).\n * @param {number} a component number (for loadings).\n *\n * @returns {TypedArray} array with outcomes (by reference).\n */\nexport function pcamodel_get(m, name, a) {\n\n   if (!m || !m.class || !m.class.includes('pcamodel')) {\n      throw new Error('pcamodel_get: parameter \"m\" must be JSON with PCA model.');\n   }\n\n   const ncols = m.ncols;\n   const ncomp = m.ncomp;\n   let offset, length;\n\n   switch(name) {\n      case 'mX':\n         offset = 2;\n         length = ncols;\n         break;\n      case 'sX':\n         offset = 2 + ncols;\n         length = ncols;\n         break;\n      case 'loadings':\n      case 'xloadings':\n         offset = 2 + 2 * ncols + (a - 1) * ncols;\n         length = ncols;\n         break;\n      case 'P':\n         offset = 2 + 2 * ncols;\n         length = a * ncols;\n         break;\n      case 'eigenvals':\n      case 'xeigenvals':\n         offset = 2 + 2 * ncols + ncols * ncomp;\n         length = ncomp;\n         break;\n      case 'cq0':\n         offset = 2 + 2 * ncols + ncols * ncomp + ncomp;\n         length = ncomp;\n         break;\n      case 'cNq':\n         offset = 2 + 2 * ncols + ncols * ncomp + 2 * ncomp;\n         length = ncomp;\n         break;\n      case 'rq0':\n         offset = 2 + 2 * ncols + ncols * ncomp + 3 * ncomp;\n         length = ncomp;\n         break;\n      case 'rNq':\n         offset = 2 + 2 * ncols + ncols * ncomp + 4 * ncomp;\n         length = ncomp;\n         break;\n      case 'ch0':\n         offset = 2 + 2 * ncols + ncols * ncomp + 5 * ncomp;\n         length = ncomp;\n         break;\n      case 'cNh':\n         offset = 2 + 2 * ncols + ncols * ncomp + 6 * ncomp;\n         length = ncomp;\n         break;\n      case 'rh0':\n         offset = 2 + 2 * ncols + ncols * ncomp + 7 * ncomp;\n         length = ncomp;\n         break;\n      case 'rNh':\n         offset = 2 + 2 * ncols + ncols * ncomp + 8 * ncomp;\n         length = ncomp;\n         break;\n      case 'cr0':\n         offset = 2 + 2 * ncols + ncols * ncomp + 9 * ncomp;\n         length = ncomp;\n         break;\n      case 'cNr':\n         offset = 2 + 2 * ncols + ncols * ncomp + 10 * ncomp;\n         length = ncomp;\n         break;\n      case 'rr0':\n         offset = 2 + 2 * ncols + ncols * ncomp + 11 * ncomp;\n         length = ncomp;\n         break;\n      case 'rNr':\n         offset = 2 + 2 * ncols + ncols * ncomp + 12 * ncomp;\n         length = ncomp;\n         break;\n      case 'cg0':\n         offset = 2 + 2 * ncols + ncols * ncomp + 13 * ncomp;\n         length = ncomp;\n         break;\n      case 'cNg':\n         offset = 2 + 2 * ncols + ncols * ncomp + 14 * ncomp;\n         length = ncomp;\n         break;\n      case 'rg0':\n         offset = 2 + 2 * ncols + ncols * ncomp + 15 * ncomp;\n         length = ncomp;\n         break;\n      case 'rNg':\n         offset = 2 + 2 * ncols + ncols * ncomp + 16 * ncomp;\n         length = ncomp;\n         break;\n\n      default:\n         throw Error('pcamodel_get: wrong outcome name.');\n   }\n\n   return m.v.subarray(offset, offset + length);\n}\n\n\n/**\n * Returns part of PCA result array for given outcome.\n *\n * @param {TypedArray} r array with PCA results.\n * @param {string} name name of the outcome (e.g. 'scores', 'hdist', 'qdist', 'expvar').\n * @param {number} a component number (for scores and distances).\n *\n * @returns {TypedArray} array with outcomes (by reference).\n */\nexport function pcares_get(r, name, a) {\n\n   if (!r || !r.class || !r.class.includes('pcares')) {\n      throw new Error('pcares_get: parameter \"r\" must be JSON with PCA results.');\n   }\n\n   const ncols = r.ncols;\n   const nrows = r.nrows;\n   const ncomp = r.ncomp;\n   let offset, length;\n\n   switch(name) {\n      case 'scores':\n      case 'xscores':\n         offset = (a - 1) * nrows;\n         length = nrows;\n         break;\n      case 'hdist':\n         offset = nrows * ncomp + (a - 1) * nrows;\n         length = nrows;\n         break;\n      case 'qdist':\n         offset = 2 * nrows * ncomp + (a - 1) * nrows;\n         length = nrows;\n         break;\n      case 'xcumexpvar':\n      case 'cumexpvar':\n         offset = 3 * nrows * ncomp;\n         length = ncomp;\n         break;\n      case 'fdistc':\n         offset = 3 * nrows * ncomp + ncomp + (a - 1) * nrows;\n         length = nrows;\n         break;\n      case 'fdistr':\n         offset = 4 * nrows * ncomp + ncomp + (a - 1) * nrows;\n         length = nrows;\n         break;\n\n      case 'gdist':\n         offset = 5 * nrows * ncomp + ncomp + (a - 1) * ncols;\n         length = ncols;\n         break;\n      case 'rdist':\n         offset = (5 * nrows * ncomp) + ncomp + (ncols * ncomp) + (a - 1) * ncols;\n         length = ncols;\n         break;\n      case 'idistc':\n         offset = (5 * nrows * ncomp) + ncomp + (2 * ncols * ncomp) + (a - 1) * ncols;\n         length = ncols;\n         break;\n      case 'idistr':\n         offset = (5 * nrows * ncomp) + ncomp + (3 * ncols * ncomp) + (a - 1) * ncols;\n         length = ncols;\n         break;\n\n      default:\n         throw new Error('pcares_get: wrong outcome name.');\n   }\n\n   return r.v.subarray(offset, offset + length);\n}\n\n\n/**\n * Creates a PCA model using wasm implementation.\n *\n * @param {Object} Module object with wasm module for PCVPCA.\n * @param {Matrix} X matrix with calibration set.\n * @param {number} ncomp number of components.\n * @param {boolean} center mean center the data columns or not.\n * @param {boolean} scale standardize the data columns or not.\n * @param {Array} outliers array with indices of outliers.\n *\n * @returns {Object} JSON with PCA model.\n */\nexport function pca_fit(Module, X, ncomp, center, scale, outliers) {\n\n   if (!outliers) {\n      outliers = [];\n   }\n\n   const nout = outliers && Array.isArray(outliers) ? outliers.length : 0;\n\n   if (ncomp === undefined) {\n      ncomp = Math.min(X.nrows - nout - 1, X.ncols);\n   }\n\n   if (center === undefined) {\n      center = true;\n   }\n\n   if (scale === undefined) {\n      scale = false;\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pca_fit: X must be a matrix.');\n   }\n\n   if ((X.nrows - nout) < 3 || X.ncols < 2) {\n      throw new Error('pca_fit: X must have at least 3 rows and 2 columns.');\n   }\n\n   if (ncomp < 1 || ncomp > Math.min(X.nrows - nout - 1, X.ncols)) {\n      throw new Error('pca_fit: the value of \"ncomp\" does not match the dimension of X.');\n   }\n\n   // allocate memory in WASM heap space and copy dataset values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy outliers values\n   let o_ptr = null;\n   if (nout > 0) {\n      const o = new Int16Array(outliers);\n      o_ptr = Module._malloc(o.length * o.BYTES_PER_ELEMENT);\n      Module.HEAP16.set(o, o_ptr / o.BYTES_PER_ELEMENT);\n   }\n\n   // allocate memory in WASM heap space for model and calibration set results outcomes\n   const m_length = pca_getmodellength(X.ncols, ncomp);\n   const m_constructor = Float64Array;\n   const m_ptr = Module._malloc(m_length * m_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCA\n   const res = Module.ccall('pcafit_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, X.nrows, X.ncols, ncomp, center, scale, m_ptr, o_ptr, nout]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pca_fit: PCA failed.');\n   }\n\n   // copy part of HEAP memory with model outcomes\n   const model = Module.HEAPF64.slice(\n      m_ptr/m_constructor.BYTES_PER_ELEMENT,\n      m_ptr/m_constructor.BYTES_PER_ELEMENT + m_length\n   );\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(m_ptr);\n\n   // return PCA model and result objects\n   return {\n      class: ['pcamodel'],\n      v: model,\n      ncomp: ncomp,\n      nrows: X.nrows - nout,\n      ncols: X.ncols,\n      center: center,\n      scale: scale\n   };\n}\n\n\n/**\n * Projects dataset to a PCA model.\n *\n * @param {Object} Module object with wasm module for PCVPCA.\n * @param {Object} m JSON with PCA model created by `pca_fit()`.\n * @param {Matrix} X matrix with dataset.\n * @param {Array} outliers array with indices of outliers.\n *\n * @returns {Object} JSON with PCA results.\n */\nexport function pca_predict(Module, m, X, outliers) {\n\n   if (!outliers) {\n      outliers = [];\n   }\n\n   const nout = outliers && Array.isArray(outliers) ? outliers.length : 0;\n\n   if (!m || !m.class || !m.class.includes('pcamodel')) {\n      throw new Error('pca_predict: parameter \"m\" must be JSON with PCA results.');\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pca_predict: X must be a matrix.');\n   }\n\n   if (X.nrows < 1) {\n      throw new Error('pca_predict: X must have at least 1 row.');\n   }\n\n   if (X.ncols !== m.ncols) {\n      throw new Error('pca_predict: X must have the same number of columns as the training set.');\n   }\n\n   // allocate memory in WASM heap space and copy dataset values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy outliers values\n   let o_ptr = null;\n   if (nout > 0) {\n      const o = new Int16Array(outliers);\n      o_ptr = Module._malloc(o.length * o.BYTES_PER_ELEMENT);\n      Module.HEAP16.set(o, o_ptr / o.BYTES_PER_ELEMENT);\n   }\n\n   // allocate memory in WASM heap space and copy model values\n   const m_ptr = Module._malloc(m.v.length * m.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(m.v, m_ptr / m.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for result values\n   const r_length = pca_getreslength(X.nrows, m.ncomp, X.ncols);\n   const r_constructor = Float64Array;\n   const r_ptr = Module._malloc(r_length * r_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCA prediction\n   const res = Module.ccall('pcapredict_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, X.nrows, X.ncols, m_ptr, r_ptr, o_ptr, nout]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pca_predict: PCA prediction failed.');\n   }\n\n   // copy part of HEAP memory with result values\n   const res_values = Module.HEAPF64.slice(\n      r_ptr/r_constructor.BYTES_PER_ELEMENT,\n      r_ptr/r_constructor.BYTES_PER_ELEMENT + r_length\n   );\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(m_ptr);\n   Module._free(r_ptr);\n\n   // return PCA results\n   return {\n      class: ['pcares'],\n      v: res_values,\n      ncomp: m.ncomp,\n      nrows: (X.nrows - nout),\n      ncols: X.ncols,\n      center: m.center,\n      scale: m.scale\n   };\n}\n\n\n/**\n * Create a PV-set based on PCA decomposition.\n *\n * @param {Object} Module object with wasm module for PCVPCA.\n * @param {Object} m JSON with PCA model created by `pca_fit()`.\n * @param {Matrix} X matrix with dataset.\n * @param {number} ncomp number of components for PV-set generation.\n * @param {number} cv_nseg number of segments for cross-validation.\n * @param {number} cv_type type of cross-validation (0: loo, 1: ven, 2: rand).\n * @param {number} cv_scope scope of cross-validation (0: global, 1: local).\n * @param {Array} outliers array with indices of outliers.\n *\n * @returns {Matrix} the generated PV-set.\n */\nexport function pcvpca(Module, m, X, ncomp, cv_nseg, cv_type, cv_scope, outliers) {\n\n   if (!outliers) {\n      outliers = [];\n   }\n\n   const nout = outliers && Array.isArray(outliers) ? outliers.length : 0;\n\n   if (!m || !m.class || !m.class.includes('pcamodel')) {\n      throw new Error('pcapcv: parameter \"m\" must be JSON with PCA results.');\n   }\n\n   if (!ismatrix(X)) {\n      throw new Error('pcapcv: X must be a matrix.');\n   }\n\n   if ((X.nrows - nout) < 3) {\n      throw new Error('pcapcv: X must have at least 3 rows.');\n   }\n\n   if (X.ncols !== m.ncols) {\n      throw new Error('pcapcv: X must have the same number of columns as the training set.');\n   }\n\n   if (!Number.isInteger(cv_type) || ![0, 1, 2].includes(cv_type)) {\n      throw new Error('pcapcv: parameter \"cv_type\" must be one of 0 (\"loo\"), 1 (\"ven\"), 2 (\"rand).');\n   }\n\n   if (!Number.isInteger(cv_scope) || ![0, 1].includes(cv_scope)) {\n      throw new Error('pcapcv: parameter \"cv_scope\" must be 0 (\"global\") or 1 (\"local\").');\n   }\n\n   if (cv_type > 0 && (!Number.isInteger(cv_nseg) || cv_nseg < 2)) {\n      throw new Error('pcapcv: parameter \"cv_nseg\" must be a number  2.');\n   }\n\n   if (cv_type > 0 && cv_nseg > (X.nrows - nout)) {\n      throw new Error('pcapcv: the value of \"cv_nseg\" is too large for the given X.');\n   }\n\n   if (!Number.isInteger(ncomp) || ncomp < 1) {\n      throw new Error('pcapcv: the value of \"ncomp\" must be a number >= 1.');\n   }\n\n   const max_ncomp = cv_type === 0 ?\n      Math.min(X.nrows - nout - 2, X.ncols, m.ncomp) :\n      Math.min(X.nrows - nout - Math.ceil((X.nrows - nout)/ cv_nseg) - 1, X.ncols, m.ncomp);\n\n   if (ncomp > max_ncomp) {\n      throw new Error('pcapcv: the value of \"ncomp\" is too large.');\n   }\n\n\n   // allocate memory in WASM heap space and copy dataset values\n   const x_ptr = Module._malloc(X.v.length * X.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(X.v, x_ptr / X.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space and copy outliers values\n   let o_ptr = null;\n   if (nout > 0) {\n      const o = new Int16Array(outliers);\n      o_ptr = Module._malloc(o.length * o.BYTES_PER_ELEMENT);\n      Module.HEAP16.set(o, o_ptr / o.BYTES_PER_ELEMENT);\n   }\n\n   // allocate memory in WASM heap space and copy model values\n   const m_ptr = Module._malloc(m.v.length * m.v.BYTES_PER_ELEMENT);\n   Module.HEAPF64.set(m.v, m_ptr / m.v.BYTES_PER_ELEMENT);\n\n   // allocate memory in WASM heap space for Xpv values\n   const xpv_length = X.v.length - nout * X.ncols;\n   const xpv_constructor = X.v.constructor;\n   const xpv_ptr = Module._malloc(xpv_length * xpv_constructor.BYTES_PER_ELEMENT);\n\n   // call WASM function for PCAPCV\n   const res = Module.ccall('pcvpca_wasm',\n               ['number'], // return type\n               ['number', 'number', 'number', 'number', 'number', 'number',\n               'number', 'number', 'number', 'number', 'number', 'number', 'number'], // argument types\n               [x_ptr, X.nrows, X.ncols, ncomp, m.center, m.scale,\n               cv_type, cv_nseg, cv_scope, m_ptr, xpv_ptr, o_ptr, nout]); // arguments\n\n   if (res !== 1) {\n      throw new Error('pcapcv: PCVPCA failed.');\n   }\n\n   // copy part of HEAP memory with Xpv values\n   const xpv = Module.HEAPF64.slice(\n      xpv_ptr/xpv_constructor.BYTES_PER_ELEMENT,\n      xpv_ptr/xpv_constructor.BYTES_PER_ELEMENT + xpv_length\n   );\n\n   // free the memory\n   Module._free(x_ptr);\n   Module._free(m_ptr);\n   Module._free(xpv_ptr);\n\n   // return Xpv\n   return new Matrix(xpv, (X.nrows - nout), X.ncols);\n}\n","import { Vector } from 'mdatools/arrays';\nimport { mean, variance } from 'mdatools/stat';\nimport { pnorm } from 'mdatools/distributions';\n\nimport { pcares_get } from './pca';\n\n/**\n * Compute classification statistics.\n *\n * @param {Array} pred - array with predicted categories ('regular', 'extreme', 'outlier').\n * @param {Array} ref - array with reference class names for each object.\n * @param {string} className - name of the target class.\n *\n * @returns {Object} JSON with classification statistics.\n */\nfunction get_stat(pred, ref, className) {\n   if (!ref || !className || ref.length !== pred.length) return null;\n   let TP = 0, FP = 0, TN = 0, FN = 0;\n   for (let i = 0; i < pred.length; i++) {\n      if (pred[i] === 'regular' && ref[i] === className) TP = TP + 1;\n      if (pred[i] === 'regular' && ref[i] !== className) FP = FP + 1;\n      if (pred[i] !== 'regular' && ref[i] === className) FN = FN + 1;\n      if (pred[i] !== 'regular' && ref[i] !== className) TN = TN + 1;\n   }\n\n   return {\n      TP, FP, TN, FN,\n      'accuracy': (TP + TN) / (TP + TN + FP + FN),\n      'specificity': TN / (TN + FP),\n      'sensitivity': TP / (TP + FN),\n   }\n}\n\n/**\n * Compute SIMCA predictions for a particular component for alternative dataset\n */\nexport function simca_predict_alt(pcares, simca, classes, labels, varlabels) {\n\n   // get matrices with h and q distances\n   const nrows = pcares.nrows;\n   const ncomp = pcares.ncomp;\n   const ncols = pcares.ncols;\n\n\n   // we will make classification assuming that all objects are from alternative class\n   const refClasses = Array.from({length: nrows}, () => (\"alternative\"));\n\n   // get object with results for each component\n   const res = new Array(ncomp);\n   for (let a = 0; a < ncomp; a++) {\n\n      // get usual results\n      res[a] = simca_predict_single(simca, pcares, a, refClasses);\n\n      let I = nrows;\n\n      // get distances\n      const f = res[a].f;\n      const fcrit = simca.eCrit[a];\n\n      // get DoF for full distance\n      const k = simca.Nf[a];\n\n      // \tOrder f' such that f1' f2'....  fI''\n      const fv = new Vector(f);\n      let fp = fv.sort();\n      let ind = fv.sortind();\n\n      // prepare array for roles\n      const roles = Array.from({length: nrows}, () => (\"alien\"));;\n\n      // Step 2. If Disc <0\n      let Disc = -1;\n      let n = 0;\n      let m = 0;\n      let d = 0;\n      let M1 = 0;\n\n      while (Disc < 0) {\n         if (n > 0) {\n            roles[ind.v[I - 1] - 1] = 'external';\n            I = I - 1;\n            ind = ind.slice(1, I);\n            fp = fp.slice(1, I);\n         }\n         m = mean(fp);\n         d = variance(fp, true);\n         M1 = d / (m * m);\n         Disc = 4 - 2 * k * M1;\n         n = n + 1;\n      }\n\n      // Step 3. Calculate  x  by Eq. (18)\n      const x = (2 + Math.sqrt(Disc)) / M1;\n\n      // \tCalculate  s and  f'0 by Eq. (19)\n      const s = (x - k);\n      const f0 = m / x;\n\n      // \tCalculate: z, h, r, p, Mz, Sz by Eq. (20)\n      const z = fcrit / f0;\n      const h = 1 - 2 * (k + s) * (k + 3 * s) / (3 * (k + 2 * s)**2);\n      const r = (h - 1) * (1 - 3 * h);\n      const p = (k + 2 * s) / (k + s)**2;\n      const Mz = 1 + h * p * (h - 1 - 0.5 * (2 - h) * r * p);\n      const Sz = h * Math.sqrt(2 * p) * (1 + 0.5 * r * p);\n\n      // Step 3.\tIf  is given then calculate  by Eq. (21)\n      const beta = pnorm((Math.pow(z / (k + s), h) - Mz) / Sz);\n\n      res[a].beta = beta;\n      res[a].s = s;\n      res[a].k = k;\n      res[a].Mz = Mz;\n      res[a].Sz = Sz;\n      res[a].m = m;\n      res[a].f0 = f0;\n      res[a].hz = h;\n      res[a].anum = {'aliens': I, 'external': nrows - I};\n      res[a].a = roles;\n   }\n\n   return {\n      class: ['simcares'],\n      v: res,\n      className: simca.className,\n      alpha: simca.alpha,\n      limType: simca.limType,\n      ncomp: simca.ncomp,\n      nrows: nrows,\n      ncols: ncols,\n      classes: classes,\n      classNames: classes && classes.length > 0 ? [...new Set(classes)] : null,\n      labels: labels,\n      varlabels: varlabels\n   }\n}\n\n/**\n * Compute SIMCA predictions for a particular component\n */\nexport function simca_predict_single(simca, pcares, a, classes) {\n\n   // get object distances\n   const f = pcares_get(pcares, (simca.limType === 'robust' ? 'fdistr' : 'fdistc'), a + 1);\n   const h = pcares_get(pcares, 'hdist', a + 1);\n   const q = pcares_get(pcares, 'qdist', a + 1);\n\n   // get variable distances\n   const i = pcares_get(pcares, (simca.limType === 'robust' ? 'idistr' : 'idistc'), a + 1);\n   const g = pcares_get(pcares, 'gdist', a + 1);\n   const r = pcares_get(pcares, 'rdist', a + 1);\n\n   const nrows = f.length;\n\n   // get object distance parameters\n   const h0 = simca.h0[a];\n   const Nh = simca.Nh[a];\n   const q0 = simca.q0[a];\n   const Nq = simca.Nq[a];\n   const Nf = simca.Nf[a];\n\n   // get variable distance parameters\n   const g0 = simca.g0[a];\n   const Ng = simca.Ng[a];\n   const r0 = simca.r0[a];\n   const Nr = simca.Nr[a];\n   const Ni = simca.Ni[a];\n\n   // get critical limits (for objects and variables)\n   const oCrit = simca.oCrit[a];\n   const eCrit = simca.eCrit[a];\n   const voCrit = simca.voCrit[a];\n   const veCrit = simca.veCrit[a];\n\n   // prepare array for object categories\n   const c = new Array(nrows);\n   const d = new Array(nrows);\n   const cnum = {'regular': 0, 'extreme': 0, 'outliers': 0};\n   const dnum = {'in': 0, 'out': 0};\n\n   for (let k = 0; k < nrows; k++) {\n      const fk = f[k];\n      if (fk < eCrit) {\n         c[k] = 'regular';\n         d[k] = 'in';\n         cnum.regular += 1;\n         dnum.in += 1;\n      } else if (fk > oCrit) {\n         c[k] = 'outlier';\n         d[k] = 'out';\n         cnum.outliers += 1;\n         dnum.out += 1;\n      } else {\n         c[k] = 'extreme';\n         d[k] = 'out';\n         cnum.extreme += 1;\n         dnum.out += 1;\n      }\n   }\n   const stat =  classes && classes.length === nrows ? get_stat(c, classes, simca.className) : null\n   return {\n      h, h0, Nh, q, q0, Nq, f, Nf, eCrit, oCrit, c, d, cnum, dnum, stat,\n      g, g0, Ng, r, r0, Nr, i, Ni, veCrit, voCrit\n   };\n}\n\n/**\n * Compute SIMCA predictions.\n *\n * @param {Object} pcares - JSON with predicted PCA results.\n * @param {Object} simca - JSON with SIMCA parameters.\n * @param {Array} classes - array with reference class names for each object.\n * @param {Array} labels - array with reference labels for each object.\n * @param {Array} varlabels - array with reference labels for each variable.\n *\n * @returns {Object} JSON with SIMCA parameters.\n */\nexport function simca_predict(pcares, simca, classes, labels, varlabels) {\n\n   // get matrices with h and q distances\n   const nrows = pcares.nrows;\n   const ncomp = pcares.ncomp;\n   const ncols = pcares.ncols;\n\n   // we will make classification assuming that all objects are from alternative class\n   const refClasses = Array.from({length: nrows}, () => (simca.className))\n\n   // get object with results for each component\n   const res = new Array(ncomp);\n   for (let a = 0; a < ncomp; a++) {\n      res[a] = simca_predict_single(simca, pcares, a, refClasses);\n   }\n   return {\n      class: ['simcares'],\n      v: res,\n      className: simca.className,\n      alpha: simca.alpha,\n      limType: simca.limType,\n      ncomp: simca.ncomp,\n      nrows: nrows,\n      ncols: ncols,\n      classes: classes,\n      labels: labels,\n      varlabels: varlabels\n   }\n}\n","import { Matrix } from 'mdatools/arrays';\n\n\n// constant values (colors, etc)\nexport const LINE_COLORS = {'cal': '#2679B2', 'pv': '#D22C2F', 'target': '#2679B2', 'alt': '#2679B2'};\nexport const FACE_COLORS = {'cal': '#f0f8ff', 'pv': '#fff8f0', 'target': '#f0f8ff', 'alt': '#f0f8ff'};\nexport const LABELS_COLOR = '#a0a0a0';\nexport const LABELS_COLOR_SELECTED = '#909090';\n\n\nexport function genhash() {\n    const now = new Date();\n    const uniqueId = `${now.getFullYear()}${(now.getMonth() + 1)\n        .toString()\n        .padStart(2, '0')}${now.getDate().toString().padStart(2, '0')}${now\n        .getHours()\n        .toString()\n        .padStart(2, '0')}${now.getMinutes().toString().padStart(2, '0')}${now\n        .getSeconds()\n        .toString()\n        .padStart(2, '0')}${now\n        .getMilliseconds()\n        .toString()\n        .padStart(3, '0')}`;\n    return uniqueId;\n}\n/**\n * Parse string with data from a CSV file and create a matrix with values.\n *\n * @param {string} strData - string with all data from the CSV file.\n * @param {string} sep - symbols used for separation of values (by default \",\").\n * @param {boolean} hasHeader - logical, if first row must be treated as header or not.\n * @param {boolean} hasLabels - logical, if first column must be treated as object labels or not.\n * @param {boolean} hasClasses - logical, if column next to labels must be treated as class names or not.\n *\n * @returns {Object} JSON containing matrix with parsed values, header, values and decimal separators.\n */\nexport function parseCSV(strData, sep, hasHeader, hasLabels, hasClassNames) {\n\n\n   // function which returns true if at least one value in array can not be parsed to float\n   function hasNaN(vec) {\n      return vec.some(v => Number.isNaN(Number.parseFloat(v.trim())));\n   }\n\n   // set default separator symbol\n   if (sep === undefined) {\n      sep = \",\";\n   }\n\n   // setup decimal separator\n   const dec = sep === \";\" ? \",\" : \".\";\n\n   // remove BOM symbol if any\n   strData = strData.replace(/^\\uFEFF/gm, \"\").replace(/^\\u00EF?\\u00BB\\u00BF/gm,\"\");\n\n   // remove \\r symbols\n   strData = strData.replace(/\\r/gm, \"\");\n\n   // split string with data values into array of rows\n   let rows = strData.split(/\\n/);\n\n   // check if the first row contains header\n   let header = [];\n   let startRow = 0;\n   const firstRow = rows[0].split(sep);\n   if (hasHeader || (hasHeader === undefined && hasNaN(firstRow))) {\n      header = firstRow;\n      startRow = 1;\n   }\n\n   // filter empty rows out\n   rows = rows.filter(v => v.trim().length > 1);\n\n   // check if first column contains labels\n   let labels = [];\n   let startColumn = 0;\n   if (hasLabels) {\n      startColumn = 1;\n   }\n\n   // check if next column contains class names\n   let classNames = [];\n   let classes = [];\n   if (hasClassNames) {\n      startColumn = startColumn + 1;\n   }\n\n   // number of rows and columns in future matrix\n   const nrows = rows.length - startRow;\n   const ncols = firstRow.length - startColumn;\n\n\n   if (nrows < 1) {\n      throw Error(\"Data file should contain at least 1 row with values.\");\n   }\n\n   if (ncols < 1) {\n      throw Error(\"Data file should contain at least 1 column with values.\");\n   }\n\n   // set rows of data as columns of matrix - it is faster\n   const data = Matrix.zeros(ncols, nrows);\n\n   // find symbol used for decimals separator\n   for (let r = startRow; r < nrows + startRow; r++) {\n\n      // parsing: trim spaces and replace non-numbers with dot (.)\n      let rowValuesAll = rows[r].split(sep)\n\n      if (hasLabels) {\n         labels.push(rowValuesAll[0]);\n         rowValuesAll = rowValuesAll.slice(1);\n      }\n\n      if (hasClassNames) {\n         const className = rowValuesAll[0];\n         classes.push(className);\n         if (classNames.length === 0 || classNames.indexOf(className) < 0) {\n            classNames.push(className);\n         }\n         rowValuesAll = rowValuesAll.slice(1);\n      }\n\n      const rowValues = rowValuesAll.map(v => Number.parseFloat(v.trim().replace(dec, \".\")));\n\n      if (rowValues.some(v => Number.isNaN(v))) {\n         throw Error(\"Some of the values can not be converted to numbers, check your CSV file and try again.\");\n      }\n\n      if (rowValues.length != ncols) {\n         throw Error(\"Wrong number of values in row #\" + r);\n      }\n\n      data.v.set(new Float64Array(rowValues), (r - startRow) * ncols);\n   }\n\n   // generate row labels if they are not provided\n   if (!hasLabels || labels.length !== nrows) {\n      labels = [];\n      for (let i = 0; i < nrows; i++) {\n         labels.push(\"O\" + (i + 1));\n      }\n   }\n\n   // handle variable labels\n   let varlabels;\n   let varvalues;\n   if (header && header.length === ncols + startColumn) {\n      varlabels = header.slice(startColumn);\n   } else {\n      varlabels = [];\n      for (let i = 0; i < ncols; i++) {\n         varlabels.push(\"V\" + (i + 1));\n      }\n   }\n\n   return {\n      values: data.t(),\n      header,\n      labels,\n      varlabels,\n      varvalues,\n      classes,\n      classNames,\n      sep,\n      dec\n   };\n}\n\n\n// function for downloading of PV-set\nexport function downloadResults(res, dataset, name, outliers, ncomp) {\n\n   if (!outliers || !Array.isArray(outliers)) {\n      outliers = [];\n   }\n\n   const nAll = dataset.values.nrows;\n   const nOut = outliers.length;\n   const n = nAll - nOut;\n   const v = res.v[ncomp - 1];\n\n   const hasClasses = res.classes && res.classes.length === n;\n   const filler = hasClasses ? ['', '', '', '', ''] : ['', '', '', ''];\n   let out = '';\n   out += ['Data filename:', dataset.fileName, ...filler].join(dataset.sep) + '\\n';\n   out += ['Target class:', res.className, ...filler].join(dataset.sep) + '\\n';\n   out += ['Reference classes:',  hasClasses ? 'provided' : 'not provided', ...filler].join(dataset.sep) + '\\n';\n   out += ['Number of components:', ncomp, ...filler].join(dataset.sep) + '\\n';\n   out += ['Alpha:', (res.alpha/100).toFixed(3), ...filler].join(dataset.sep) + '\\n';\n   out += ['Limits estimator:', res.limType, ...filler].join(dataset.sep) + '\\n';\n   out += '\\n';\n\n   out += ['Nh:', v.Nh, ...filler].join(dataset.sep) + '\\n';\n   out += ['Nq:', v.Nq, ...filler].join(dataset.sep) + '\\n';\n   out += ['Nf:', v.Nf, ...filler].join(dataset.sep) + '\\n';\n   out += '\\n';\n\n   out += ['F crit (extremes):', v.eCrit, ...filler].join(dataset.sep) + '\\n';\n   out += ['F crit (outliers):', v.oCrit, ...filler].join(dataset.sep) + '\\n';\n   out += '\\n';\n\n\n   if (v.beta) {\n      // there can be no removed outliers in this case\n      out += ['Objects treated as from non-target class', '', ...filler].join(dataset.sep) + '\\n';\n      out += ['Objects:', nAll, ...filler].join(dataset.sep) + '\\n';\n      out += ['In:', v.dnum.in, ...filler].join(dataset.sep) + '\\n';\n      out += ['Out:', v.dnum.out, ...filler].join(dataset.sep) + '\\n';\n      out += ['Aliens:', v.anum.aliens, ...filler].join(dataset.sep) + '\\n';\n      out += ['External:', v.anum.external, ...filler].join(dataset.sep) + '\\n';\n      out += ['Specificity:', v.stat.specificity ? v.stat.specificity : '-', ...filler].join(dataset.sep) + '\\n';\n      out += ['Beta:', v.beta, ...filler].join(dataset.sep) + '\\n';\n      out += '\\n';\n\n      out += ['', 'object', 'class', 'role', 'decision', 'h/h0', 'q/q0', 'f'].join(dataset.sep) + '\\n';\n\n      for (let i = 0; i < nAll; i++) {\n         out += [\n            '',\n            dataset.labels[i],\n            res.classes[i],\n            v.a[i],\n            v.d[i],\n            v.h[i] / v.h0,\n            v.q[i] / v.q0,\n            v.f[i]\n         ].join(dataset.sep) + '\\n';\n      }\n\n   } else {\n      // there can be no removed outliers in this case\n      out += ['Objects treated as from target class', '', ...filler].join(dataset.sep) + '\\n';\n      out += ['Objects:', nAll, ...filler].join(dataset.sep) + '\\n';\n      out += ['Removed:', nOut, ...filler].join(dataset.sep) + '\\n';\n      out += ['In:', v.dnum.in, ...filler].join(dataset.sep) + '\\n';\n      out += ['Out:', v.dnum.out, ...filler].join(dataset.sep) + '\\n';\n      out += ['Regular:', v.cnum.regular, ...filler].join(dataset.sep) + '\\n';\n      out += ['Extreme:', v.cnum.extreme, ...filler].join(dataset.sep) + '\\n';\n      out += ['Outliers:', v.cnum.outliers, ...filler].join(dataset.sep) + '\\n';\n      out += ['Sensitivity:', v.stat.sensitivity ? v.stat.sensitivity : '-', ...filler].join(dataset.sep) + '\\n';\n      out += '\\n';\n\n      out += ['', 'object', 'class', 'role', 'decision', 'h/h0', 'q/q0', 'f'].join(dataset.sep) + '\\n';\n\n      let j = 0;\n      for (let i = 0; i < nAll; i++) {\n\n         if (nOut > 0 && outliers.includes(i)) {\n            out += [\n               '',\n               dataset.labels[i],\n               '-',\n               'removed',\n               '-',\n               '-',\n               '-',\n               '-'\n            ].join(dataset.sep) + '\\n';\n            continue;\n         }\n\n         out += [\n            '',\n            dataset.labels[j],\n            res.classes[j],\n            v.c[j],\n            v.d[j],\n            v.h[j] / v.h0,\n            v.q[j] / v.q0,\n            v.f[j]\n         ].join(dataset.sep) + '\\n';\n         j = j + 1;\n      }\n   }\n   out += '\\n';\n\n\n\n   if (dataset.dec !== '.') {\n      out = out.replace(/\\./g, dataset.dec);\n   }\n\n   let hdr = ['DD-SIMCA results (' + name + ')', 'https://mda.tools/ddsimca/', ...filler].join(dataset.sep) + '\\n\\n';\n\n   const blob = new Blob([hdr + out], { type: 'text/csv' });\n   const url = window.URL.createObjectURL(blob)\n   const a = document.createElement('a')\n   a.setAttribute('href', url)\n   a.setAttribute('download', `ddsimca-results-${name}.csv`);\n   a.click()\n}\n\n\n// function for downloading of PV-set\nexport function downloadModel(pcamodel, simca, ncomp) {\n\n   const blob = new Blob([JSON.stringify({\n      pca: {\n         hash: pcamodel.hash,\n         class: pcamodel.class,\n         ncomp: pcamodel.ncomp,\n         nrows: pcamodel.nrows,\n         ncols: pcamodel.ncols,\n         center: pcamodel.center,\n         scale: pcamodel.scale,\n         lim: {\n            classic: {\n               Nh: Array.from(pcamodel.lim.classic.Nh),\n               Nq: Array.from(pcamodel.lim.classic.Nq),\n               h0: Array.from(pcamodel.lim.classic.h0),\n               q0: Array.from(pcamodel.lim.classic.q0),\n               Ng: Array.from(pcamodel.lim.classic.Ng),\n               Nr: Array.from(pcamodel.lim.classic.Nr),\n               g0: Array.from(pcamodel.lim.classic.g0),\n               r0: Array.from(pcamodel.lim.classic.r0)\n            },\n            robust: {\n               Nh: Array.from(pcamodel.lim.robust.Nh),\n               Nq: Array.from(pcamodel.lim.robust.Nq),\n               h0: Array.from(pcamodel.lim.robust.h0),\n               q0: Array.from(pcamodel.lim.robust.q0),\n               Ng: Array.from(pcamodel.lim.robust.Ng),\n               Nr: Array.from(pcamodel.lim.robust.Nr),\n               g0: Array.from(pcamodel.lim.robust.g0),\n               r0: Array.from(pcamodel.lim.robust.r0)\n            }\n         },\n         varlabels: pcamodel.varlabels,      // array with text labels for the variables\n         exclvars: pcamodel.exclvars,        // array with indices of excluded variables - reserved for future use\n         varvalues: pcamodel.varvalues,      // reserved for future use (wavelength, etc.) - reserved for future use\n         vartitle: pcamodel.vartitle,        // title for variable axis reserved for future use\n         prep: [],                           // array with preprocessing methods reserved for future use\n         v: Array.from(pcamodel.v)           // array with all model outcomes (loadings, variances, etc)\n      },\n      simca: {\n         ncomp: ncomp,\n         nrows: simca.nrows,\n         ncols: simca.ncols,\n         alpha: simca.alpha,\n         gamma: simca.gamma,\n         limType: simca.limType,\n         h0: Array.from(simca.h0),\n         q0: Array.from(simca.q0),\n         g0: Array.from(simca.g0),\n         r0: Array.from(simca.r0),\n         Nh: Array.from(simca.Nh),\n         Nq: Array.from(simca.Nq),\n         Nf: Array.from(simca.Nf),\n         Ng: Array.from(simca.Ng),\n         Nr: Array.from(simca.Nr),\n         Ni: Array.from(simca.Nr),\n         eCrit: Array.from(simca.eCrit),\n         oCrit: Array.from(simca.oCrit),\n         veCrit: Array.from(simca.veCrit),\n         voCrit: Array.from(simca.voCrit),\n         className: simca.className,\n         hash: simca.hash,\n      }\n   })], { type: 'application/json' });\n\n   const url = window.URL.createObjectURL(blob)\n   const a = document.createElement('a')\n   a.setAttribute('href', url)\n   a.setAttribute('download', 'ddsimca-model.json');\n   a.click()\n}\n","<script>\n   /***************************************************************\n    * Container                                                   *\n    * --------------------                                        *\n    * a container for any control element                         *\n    ***************************************************************/\n\n   export let label = null;   // text label (optional)\n   export let status = '';    // class name for status (e.g. 'hidden' or 'error')\n</script>\n\n<div class=\"control-element {status}\">\n   {#if label}\n   <span class=\"label\">{label}</span>\n   {/if}\n   <slot></slot>\n</div>\n\n<style>\n   .control-element {\n      font-size: 0.85em;\n      background: #fff;\n      padding: 0.35em 0.75em;\n      border-radius: 0;\n      display: flex;\n      justify-items: center;\n      justify-content: center;\n      align-items: center;\n      margin-bottom: 0.5px;\n   }\n\n   .control-element:first-of-type {\n      margin-top: 0.25rem;\n      border-top-left-radius: 0.25rem;\n      border-top-right-radius: 0.25rem;\n      margin-bottom: 1px;\n   }\n\n   .control-element:last-of-type {\n      margin-bottom: 0.25rem;\n      border-bottom-left-radius: 0.25rem;\n      border-bottom-right-radius: 0.25rem;\n   }\n\n   .hidden {\n      display: none;\n   }\n\n   .control-element.error {\n      background: crimson;\n      color: #fefefe;\n   }\n\n   :global(.control-element.error a) {\n      color: yellow;\n   }\n\n   .label {\n      padding-right: 1em;\n      flex-basis: 12ch;\n      flex-grow: 0;\n      flex-shrink: 1;\n      color: #606570;\n   }\n\n   .control-element > :global(.wrapper) {\n      flex: 1 1;\n   }\n\n   .control-element > :global(p) {\n      text-align: left;\n      flex-grow: 1;\n      padding: 0 0.25em;\n      margin: 0;\n      font-size: 0.9em;\n   }\n\n   .control-element > :global(.title) {\n      font-size: 1.05em;\n      font-weight: bold;\n      color: #303540;\n      flex-grow: 1;\n      padding: 0.3em 0;\n      margin: 0;\n   }\n</style>","<script>\n   /***************************************************************\n    * ButtonCancel                                                *\n    * --------------------                                        *\n    * control element in form of red circle button with cross     *\n    ***************************************************************/\n   export let title = 'Reset';\n</script>\n\n<button tabindex=\"0\" on:click alt={title} title={title} ></button>\n\n<style>\n   button {\n      background: #606060;\n      display: inline-block;\n      color: #fefefe;\n      font-size: 1em;\n      width: 1.3em;\n      height: 1.3em;\n      border: none;\n      border-radius: 50%;\n      box-shadow: none;\n      margin-left: 1.5em;\n      text-align: center;\n      padding: 0;\n      background-size: 40% 40%;\n      background-position: 50%;\n      background-repeat: no-repeat;\n      background-image:\n        url('data:image/svg+xml;utf8,<svg viewBox=\"0 0 100 100\" version=\"1.1\" style=\"stroke:%23fafafa;stroke-width:14;\" xmlns=\"http://www.w3.org/2000/svg\"><line x1=\"0\" y1=\"0\" x2=\"100\" y2=\"100\"/><line x1=\"0\" y1=\"100\" x2=\"100\" y2=\"0\"/></svg>');\n   }\n\n   button:hover {\n      background-color: crimson;\n   }\n</style>\n","<script>\n   /*************************************************************\n   * DatasetWidget                                              *\n   * -------------------------                                  *\n   * widget to show information about loaded dataset            *\n   **************************************************************/\n\n   import Container from '../../../shared/controls/Container.svelte';\n   import ButtonCancel from '../../../shared/controls/ButtonCancel.svelte';\n\n   // calibration set\n   export let dataset;\n\n</script>\n\n{#if dataset }\n   <!-- dataset is loaded - show info and cancel button -->\n   <Container>\n      <p class=\"dataset-info\">\n         <span>Data file:</span> <span title=\"{dataset.fileName}\" class=\"file-name\">{dataset.fileName}</span><br>\n         <span>Size:</span> <span class=\"file-size\">{dataset.values.nrows} &times; {dataset.values.ncols}</span>\n      </p>\n      <ButtonCancel on:click />\n   </Container>\n{/if}\n\n<style>\n\n   .dataset-info {\n      line-height: 1.5em;\n   }\n   .dataset-info > :global(span) {\n      vertical-align: middle;\n      color: #a0a0a0;\n   }\n\n   .dataset-info > .file-name,\n   .dataset-info > .file-size {\n      display: inline-block;\n      padding: 0;\n      margin: 0;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      max-width: 25ch;\n      color: #222;\n   }\n</style>","<script>\n   /***************************************************************\n    * File                                                        *\n    * --------------------                                        *\n    * control element for uploading files                         *\n    ***************************************************************/\n\n   export let id;                                        // text ID for file input\n   export let file;                                      // container to get return the uploaded file\n   export let message = 'Select CSV file with dataset';  // message to show when no file is selected\n   export let acceptType = '.csv';                       // file type to accept\n\n   let fileInput;\n   function changeStatus(e) {\n      if (fileInput.files.length > 0) {\n         file = fileInput.files[0];\n      }\n   }\n</script>\n\n<label class:selected={file !== null}>\n   { file ? file.name : message }\n   <input on:change={changeStatus} bind:this={fileInput} name={id} type=\"file\" accept={acceptType}>\n</label>\n\n<style>\n   input {\n      display: none;\n   }\n\n   label {\n      display: inline-block;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n      flex: 1 1;\n      min-width: 0;\n   }\n\n   label::before {\n      display: inline-block;\n      content: '\\21ea';\n      font-size: 1.2em;\n      margin: 0 0.5em 0 0em;\n   }\n\n   label.selected {\n      color: #909090;\n   }\n\n   label.selected::before {\n      content: '\\28FF\\28FF';\n      letter-spacing: -.25em;\n      color: #6EB8FF;\n      font-weight: bold;\n   }\n</style>","<script>\n   /***************************************************************\n    * Select                                                      *\n    * --------------------                                        *\n    * control element for selecting among a few options           *\n    ***************************************************************/\n\n   export let id;                         // text ID of the input element\n   export let options;                    // array with all options\n   export let value = options[0];         // initial selected value\n   export let className = '';             // extra class name\n\n   /**\n    * Handler of event when changes are made by pressing left and right arrows\n    * @param e\n    */\n   const changeOption = (e) => {\n      if (e.key === 'ArrowLeft') {\n         const ind = options.findIndex(v => v === value);\n         if (ind > 0) {\n            value = options[ind - 1];\n         }\n         return\n      }\n\n      if (e.key === 'ArrowRight') {\n         const ind = options.findIndex(v => v === value);\n         if (ind < options.length) {\n            value = options[ind + 1];\n         }\n         return\n      }\n   }\n\n</script>\n\n<div on:keydown={changeOption} role=\"radiogroup\" tabindex=\"0\" class=\"selector {className}\">\n   {#each options as option (option)}\n   <button on:click={() => value = option} class=\"option option_{option}\" class:selected={option==value}>\n   {@html option}\n   </button>\n   {/each}\n</div>\n<input name={id} bind:value={value}>\n\n<style>\n   input {\n      display: none;\n   }\n\n   .selector {\n      position: relative;\n      box-sizing: border-box;\n      flex: 1 1 auto;\n      font-size: 1em;\n      line-height: 1.5em;\n      margin: 0;\n      padding: 0.15em 0;\n      width: auto;\n      border-radius: 2px;\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      display: flex;\n   }\n\n   .option {\n      cursor: default;\n      padding: 0.25em 0.5em;\n      margin: 0 0.2em 0 0;\n      color: #606060;\n      background-color: #f0f0f0;\n      border: 1px solid transparent;\n      border-radius: 0.3em;\n   }\n\n   .option.selected {\n      background-color: #6EB8FF;\n      color: #fefefe;\n   }\n\n   .option:not(.selected):hover {\n      border: 1px solid #66abec;\n      background-color: #6eb8ff20;\n      color: #4777a4;\n   }\n</style>","<script>\n   /***************************************************************\n    * Button                                                      *\n    * --------------------                                        *\n    * control element in form of rectangular button with text     *\n    ***************************************************************/\n</script>\n\n<span class=\"wrapper\">\n<button tabindex=\"0\" class=\"button-rect\" on:click><slot></slot></button>\n</span>\n\n<style>\n   button {\n      background: #606060;\n      display: inline-block;\n      color: #fefefe;\n      font-size: 0.9em;\n      padding: 0.2em 0.5em;\n      line-height: 1.5em;\n      border: none;\n      border-radius: 0.25em;\n      box-shadow: none;\n      text-align: center;\n      border: 1px solid transparent;\n   }\n\n   button:hover {\n      border-color: #6eb8ff;\n      background: #6eb8ff20;\n      color: #5086b9;\n   }\n</style>\n","<script>\n   /*************************************************************\n   * DataLoader for training set                                *\n   * -------------------------                                  *\n   * loads training set from CSV file                           *\n   **************************************************************/\n\n   import DatasetWidget from '../shared/DatasetWidget.svelte';\n   import { parseCSV } from '../utils.js';\n\n   import FileSelector from '../../../shared/controls/FileSelector.svelte';\n   import Select from '../../../shared/controls/Select.svelte';\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n\n\n   // calibration set\n   export let dataset;\n\n   let dataFile;                    // CSV file\n   let sep = ',';                   // separator between values\n   let hasHeader = 'yes';           // first row contains header (variable names)\n   let hasLabels = 'no';            // firs column contains row labels\n\n   // app status for handling and showing errors\n   let status = 'neutral';\n   let errMsg = '';\n\n   // possible delimeters\n   const sepOptions = [',', ';'];\n\n   // converts array buffer to long string\n   function arrayBufferToString(buffer) {\n      const uint8Array = new Uint8Array(buffer);\n      return new TextDecoder().decode(uint8Array);\n   }\n\n   // gets CSV content as one large string, parse it into matrix\n   function setData(strData) {\n      try{\n         const d = parseCSV(\n            strData,\n            sep,\n            hasHeader === 'yes',\n            hasLabels === 'yes',\n            true // calibration set must have classNames\n         );\n\n         if (d.values.nrows < 3 || d.values.ncols < 3) {\n            throw new Error('Calibration set must have at least 3 rows and 3 columns');\n         }\n\n         if (d.classNames.length !== 1) {\n            throw new Error('Calibration set must have a column filled with target class name.');\n         }\n\n         d['fileName'] = dataFile.name;\n         dataset = d;\n         errMsg = ''\n         status = 'success';\n      } catch (e) {\n         console.error(e)\n         dataset = null;\n         status = 'error';\n         errMsg = e;\n      }\n   }\n\n   // promise for reading the CSV file\n   function readFile (e) {\n      // // old code - deprecated\n      // const reader = new FileReader();\n      // reader.onload = () => setData(arrayBufferToString(reader.result));\n      // reader.readAsArrayBuffer(dataFile);\n\n      // const reader = new FileReader();\n      // reader.onload = () => {\n      //    const arrayBuffer = reader.result;\n      //    const binaryString = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n      //    setData(binaryString);\n      // };\n      // reader.readAsArrayBuffer(dataFile);\n      const reader = new FileReader();\n      reader.onload = () => {\n         setData(reader.result);\n      };\n      reader.readAsText(dataFile);\n   }\n\n   // reset whole component to initial state\n   function reset () {\n      dataset = null;\n      dataFile = null;\n   }\n\n   // reactive expression for tracking changes of 'dataFile'\n   $: if (dataFile === null) {\n      // if data file is empty reset status and error messages\n      reset();\n   } else {\n      // if not just remove error messages if any\n      status = 'neutral';\n      errMsg = '';\n   }\n\n   // reactive expression for tracking changes of 'sep'\n   $: if (sep) {\n      // if separator was changed remove error message\n      status = 'neutral';\n      errMsg = '';\n   }\n\n</script>\n\n{#if !dataset }\n\n   <!-- show if data is not loaded -->\n   <!-- reset component if dataFile is changed inside -->\n   {#key dataFile === undefined}\n   <Container>\n      <FileSelector id=\"dataFile\" message=\"Select CSV file with training set\" bind:file={dataFile} />\n   </Container>\n   {/key}\n\n   <!-- show if file is selected but data is not loaded -->\n   {#if dataFile}\n   <Container label=\"Delimiter:\">\n      <Select id=\"sep\" bind:value={sep} options={sepOptions} />\n   </Container>\n   <Container label=\"Header:\">\n      <Select id=\"hasHeader\" bind:value={hasHeader} options={['yes', 'no']} />\n   </Container>\n   <Container label=\"Row labels:\">\n      <Select id=\"hasLabels\" bind:value={hasLabels} options={['yes', 'no']} />\n   </Container>\n   <Container label=\"&nbsp;\">\n      <Button on:click={readFile}>Load</Button>\n   </Container>\n   {/if}\n\n{:else}\n   <DatasetWidget {dataset} on:click={reset} />\n{/if}\n\n<!-- error message -->\n{#if status === 'error' || errMsg}\n<Container status=\"error\">\n   <p>{errMsg}</p>\n</Container>\n{/if}\n","<script>\n   /***************************************************************\n    * Spinner                                                     *\n    * --------------------                                        *\n    * shows an active spinner                                     *\n    ***************************************************************/\n</script>\n\n<div class=\"spinner\"></div>\n\n<style>\n   .spinner {\n      display: inline-block;\n      height: 1.5em;\n      line-height: 1.5em;\n      width: 1.5em;\n      margin: 0 0.5em;\n   }\n\n   .spinner:after {\n   content: \" \";\n   display: block;\n   width: 0.8em;\n   height: 0.8em;\n   margin: 0.1em;\n   border-radius: 50%;\n   border: 0.2em solid #6eb8ff;\n   border-color: #6eb8ff transparent #6eb8ff transparent;\n   animation: spinner 1.2s linear infinite;\n   }\n\n   @keyframes spinner {\n      0% {\n         transform: rotate(0deg);\n      }\n      100% {\n         transform: rotate(360deg);\n      }\n   }\n</style>","<script>\n   /*************************************************************\n   * PCVCalculator                                              *\n   * -------------------------                                  *\n   * component for computing a PV-set                           *\n   **************************************************************/\n\n   import { pcvpca, pca_predict } from '../wasm/pca';\n\n   import Select from '../../../shared/controls/Select.svelte';\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n   import Spinner from '../../../shared/controls/Spinner.svelte';\n   import ButtonCancel from '../../../shared/controls/ButtonCancel.svelte';\n\n\n   // main properties of the whole app\n   export let WASM;\n   export let calset;\n   export let model;\n   export let pvset;\n   export let pvres;\n   export let outliers;\n\n   // error handling parameetrs\n   let status = 'neutral';\n   let errMsg = null;\n\n   // PV-set calculation parameters\n   let cvtypeOptions = ['ven', 'rand', 'loo'];\n   let cvType = 'ven';\n\n   // promise container for calculator\n   let promise;\n\n   // compute number of segments options based on dataset size\n   let nsegOptions = calset && calset.values.nrows > 0 ?\n      [3, 4, 5, 10, 20].filter(v =>\n         v >= (calset.values.nrows / (calset.values.nrows - model.ncomp - 1)) && v <= calset.values.nrows / 2\n      ) : [];\n\n   // select first available option for number of segments as initial\n   let nseg = nsegOptions.length > 0 ? nsegOptions[0] : 0;\n\n   // if no options available (dataset is too small) - limit CV choice by LOO\n   $: if (nsegOptions.length === 0) {\n      cvtypeOptions = ['loo'];\n      cvType = 'loo';\n   }\n\n   // function that computes PV-set using given parameters\n   async function computePVSet(calset, model, cv) {\n      promise = WASM()\n         .then(Module => {\n            const cv_type = cv.type == 'loo' ? 0 : cv.type == 'rand' ? 2 : 1;\n            const pvvalues = pcvpca(Module, model, calset.values, model.ncomp, cv.nseg, cv_type, 0, outliers);\n            pvset = {\n               values: pvvalues,\n               header: calset.header,\n               labels: calset.labels,\n               classes: calset.classes,\n               sep: calset.sep,\n               dec: calset.dec\n            }\n            // pv-set is created for outliers free data, hence outliers is empty here\n            pvres = pca_predict(Module, model, pvset.values, []);\n         })\n         .catch((e) => {\n            pvset = null;\n            pvres = null;\n            status = 'error';\n            errMsg = e;\n         });\n   }\n\n   // event handler which triggers the model computation\n   function compute(e) {\n      status = 'neutral';\n      errMsg = null;\n      computePVSet(calset, model, {type: cvType, nseg: nseg});\n   }\n\n   // function which resets the state of the component\n   function reset() {\n      status = 'neutral';\n      errMsg = null;\n      promise = null;\n      pvset = null;\n   }\n\n   // if data file is empty reset status and error messages\n   $: if (model === null) reset();\n</script>\n\n\n{#if (model && !pvset) && status !== 'busy'}\n   <Container label='Split type:'>\n      <Select id='cvType' bind:value={cvType} options={cvtypeOptions} />\n   </Container>\n\n   {#if cvType !== 'loo'}\n   <Container label='Segments:'>\n      <Select id='nseg' bind:value={nseg} options={nsegOptions} />\n   </Container>\n   {/if}\n\n   <Container label=' '>\n      <Button on:click={compute}>Compute PV-set</Button>\n   </Container>\n{/if}\n\n{#if promise}\n\n   {#await promise}\n      <Container>\n         <Spinner />\n         <p>Computing PV-set...</p>\n      </Container>\n   {:then value}\n      {#if pvset !== null}\n      <Container>\n         <p>PV-set is computed: {pvset.values.nrows} &times; {pvset.values.ncols}, {cvType}\n            {cvType !== 'loo' ? nseg + ' seg' : ''}</p>\n         <ButtonCancel on:click={reset} />\n      </Container>\n      {/if}\n   {:catch error}\n      <Container status='error'>\n         <p>{error}</p>\n      </Container>\n   {/await}\n\n{/if}\n\n{#if status === 'error' && errMsg}\n   <Container status='error'>\n      <p>{errMsg}</p>\n   </Container>\n{/if}\n\n","<script>\n   /***************************************************************\n    * Range                                                       *\n    * --------------------                                        *\n    * control element for taking a numeric value from a range     *\n    ***************************************************************/\n\n   import { createEventDispatcher } from 'svelte';\n\n   export let id;                                        // text ID for the input element\n   export let value;                                     // initial value\n   export let min;                                       // smallest value of the range\n   export let max;                                       // largest value of the range\n   export let decNum = 1;                                // number of decimals to show the current value\n   export let step = +((max - min) / 100).toFixed(4);    // increment/decrement step\n\n\n   if (value < min || value > max) {\n      throw new Error('The value is outside of the provided range.');\n   }\n\n   if (min >= max) {\n      throw new Error('The min and max values must be distinct.');\n   }\n\n   const dispatch = createEventDispatcher();\n\n   let sliderElement;\n   let sliderContainer;\n   let isDragging = false;\n\n   const computeValue = (p) => {\n      const tmpValue = min + p * (max - min);\n\n      // strange construction below is needed for:\n      // a. make a value fractionated according to step\n      // b. get rid of small decimals added by JS due to loss of precision\n      return(+(Math.round(tmpValue / step) * step).toFixed(4));\n   }\n\n   /**\n    * Returns relative position of the element 'e' inside the slider\n    * @param e\n    */\n   const getRelativePosition = (e) => {\n      const sliderRect = sliderElement.getBoundingClientRect();\n      const parentRect = sliderContainer.getBoundingClientRect();\n      const minX = sliderRect.x;\n      const maxX = parentRect.x + parentRect.width;\n\n      return (e.clientX - minX) / (maxX - minX);\n   }\n\n   /**\n    * Handler of changing start event\n    * @param e\n    */\n   const startChanging = (e) => {\n      const p = getRelativePosition(e);\n      if (p < 0 || p > 1) return;\n      isDragging = p * 100 > width - 5 && p * 100 < width + 5;\n   }\n\n   /**\n    * Handler of changing cancel event\n    * @param e\n    */\n   const cancelChanging = (e) => {\n      isDragging = false;\n   }\n\n   /**\n    * Handler of changing stop event\n    * @param e\n    */\n   const stopChanging = (e) => {\n      isDragging = false;\n      const p = getRelativePosition(e);\n      if (p < 0 || p > 1) return;\n\n      value = computeValue(p);\n   }\n\n   /**\n    * Handler of event when changes are made by mouse wheel\n    * @param e\n    */\n   const changingByWheel = (e) => {\n      let newValue = value + step * e.deltaY * 0.5;\n      if (newValue < min) newValue = min;\n      if (newValue > max) newValue = max;\n\n      value = +(Math.round(newValue / step) * step).toFixed(4);\n   }\n\n   /**\n    * Handler of event when changes are made by dragging an element\n    * @param e\n    */\n   const changing = (e) => {\n      if (!isDragging) return;\n      const p = getRelativePosition(e);\n      if (p < 0 || p > 1) return;\n\n      value = computeValue(p);\n   }\n\n   /**\n    * Handler of event when changes are made by pressing left and right arrows\n    * @param e\n    */\n   const changingByKeys = (e) => {\n      if (e.key === 'ArrowLeft') {\n         value = value - step < min ? min : value - step;\n         return\n      }\n\n      if (e.key === 'ArrowRight') {\n         value = value + step > max ? max : value + step;\n         return\n      }\n   }\n\n   $: width = (value - min) / (max - min) * 100;\n   $: dispatch('change', value);\n</script>\n\n<div\n   id={id}\n   role=\"slider\"\n   tabindex=\"0\"\n   aria-valuenow={value}\n   aria-valuemin={min}\n   aria-valuemax={max}\n   class=\"range-slider-container\"\n   bind:this={sliderContainer}\n   on:mousewheel|preventDefault={changingByWheel}\n   on:mousemove={changing}\n   on:keydown={changingByKeys}\n   on:mousedown={startChanging}\n   on:mouseleave={cancelChanging}\n   on:mouseup={stopChanging}>\n\n   <div class=\"range-slider\" style=\"width:{width}%\" bind:this={sliderElement}>\n   {#if width > 25}\n   <span style=\"padding-right:0.25em;color:#fefefe\" class=\"range-value\">{value.toFixed(decNum)}</span>\n   {/if}\n   </div>\n\n   {#if width <= 25}\n   <span style=\"padding-left:0.25em;color:#606060\" class=\"range-value\">{value.toFixed(decNum)}</span>\n   {/if}\n</div>\n\n\n<style>\n   .range-slider-container {\n      position: relative;\n      box-sizing: border-box;\n      display: inline-block;\n      flex: 1 1 auto;\n      background: #f0f0f0;\n      height: 1.5em;\n      margin: 0;\n      padding: 1px 0;\n      width: auto;\n      border-radius: 2px;\n      cursor: default;\n\n      display: flex;\n      align-items: center;\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n   }\n\n   .range-slider {\n      position: relative;\n      display: flex;\n      justify-content: right;\n      align-items: center;\n      box-sizing: border-box;\n      background: #6EB8FF;\n      border-radius: 2px;\n      text-align: right;\n      color: #fafafa;\n      margin: 0;\n      padding: 0;\n      height: 100%;\n      cursor:default;\n      border-right: 5px solid #528abe;\n      cursor: default;\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n   }\n\n   .range-value {\n      display: inline-block;\n      margin: 0;\n      padding: 0;\n      cursor: default;\n      font-size: 0.85em;\n\n\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n   }\n\n</style>\n\n","<script>\n   /*************************************************************\n   * ModelCalculator                                            *\n   * -------------------------                                  *\n   * component for training PCA model                           *\n   **************************************************************/\n\n   import { pca_fit, pca_predict, pcamodel_get } from '../wasm/pca';\n   import { genhash } from '../utils';\n\n   import Select from '../../../shared/controls/Select.svelte';\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n   import Spinner from '../../../shared/controls/Spinner.svelte';\n   import ButtonCancel from '../../../shared/controls/ButtonCancel.svelte';\n   import Range from '../../../shared/controls/Range.svelte';\n\n\n   // main properties of the whole app\n   export let WASM;\n   export let model;\n   export let calset;\n   export let calres;\n   export let outliers;\n\n   // error handling parameetrs\n   let status = 'neutral';\n   let errMsg = null;\n\n   // model calculation parameters\n   let ncomp = 1;\n   let center = 'yes';\n   let scale = 'no';\n\n   // promise for model calculation method\n   let promise;\n\n   // function that fits the model using given parameters\n   async function computeModel(data, ncomp, center, scale) {\n      promise = WASM()\n         .then(Module => {\n            status = 'computing';\n            const m = pca_fit(Module, data.values, ncomp, center, scale, outliers);\n            m['lim'] = {\n               'classic': {\n                  'h0': pcamodel_get(m, \"ch0\"),\n                  'Nh': pcamodel_get(m, \"cNh\"),\n                  'q0': pcamodel_get(m, \"cq0\"),\n                  'Nq': pcamodel_get(m, \"cNq\"),\n                  'g0': pcamodel_get(m, \"cg0\"),\n                  'Ng': pcamodel_get(m, \"cNg\"),\n                  'r0': pcamodel_get(m, \"cr0\"),\n                  'Nr': pcamodel_get(m, \"cNr\")\n               },\n               'robust': {\n                  'h0': pcamodel_get(m, \"rh0\"),\n                  'Nh': pcamodel_get(m, \"rNh\"),\n                  'q0': pcamodel_get(m, \"rq0\"),\n                  'Nq': pcamodel_get(m, \"rNq\"),\n                  'g0': pcamodel_get(m, \"rg0\"),\n                  'Ng': pcamodel_get(m, \"rNg\"),\n                  'r0': pcamodel_get(m, \"rr0\"),\n                  'Nr': pcamodel_get(m, \"rNr\")\n               }\n            };\n            m['varlabels'] = data.varlabels;\n            m['hash'] = genhash();        // unique hash number to trace model updates\n            m['exclvars'] = [];           // array with indices of excluded variables - reserved for future use\n            m['varvalues'] = [];          // reserved for future use (wavelength, etc.) - reserved for future use\n            m['vartitle'] = 'Variables';  // title for variable axis reserved for future use\n            m['prep'] = [];               // array with preprocessing methods reserved for future use\n            model = m;\n            calres = pca_predict(Module, model, data.values, outliers);\n            status = 'success';\n         })\n         .catch(e =>{\n            model = null;\n            calres = null;\n            simca = null;\n            status = 'error';\n            errMsg = e;\n         });\n   }\n\n   // event handler which triggers the model computation\n   function compute(e) {\n      status = 'neutral';\n      errMsg = null;\n      computeModel(calset, ncomp, center === 'yes', scale === 'yes');\n   }\n\n   // function which resets the state of the component\n   function reset() {\n      status = 'neutral';\n      promise = null;\n      model = null;\n      errMsg = null;\n   }\n\n   // if data file is empty reset status and error messages\n   $: if (calset === null) reset();\n\n   // set initial number of components depending on dataset size and manual limit of A = 20\n   $: maxNComp = calset ? Math.min(calset.values.nrows - 2 - outliers.length, calset.values.ncols - 1) : null;\n   $: ncomp = maxNComp ? Math.min(maxNComp, 20) : null;\n</script>\n\n{#if (calset && !model) && status !== 'computing'}\n   <!-- settings for global model calculation -->\n   <Container label=\"# of PCs\">\n      <Range id=\"ncomp\" bind:value={ncomp} min={1} max={maxNComp} step={1} decNum={0} />\n   </Container>\n   <Container label=\"Center\">\n      <Select id=\"center\" bind:value={center} options={[\"yes\", \"no\"]} />\n   </Container>\n   <Container label=\"Scale\">\n      <Select id=\"scale\" bind:value={scale} options={[\"yes\", \"no\"]} />\n   </Container>\n   <Container label=\" \">\n      <Button on:click={compute}>Create model</Button>\n   </Container>\n{/if}\n\n\n{#if promise}\n\n   <!-- calculation is in process -->\n   {#await promise}\n      <Container>\n         <Spinner />\n         <p>Computing global model...</p>\n      </Container>\n\n   {:then value}\n      <!-- status if succeed -->\n      {#if model !== null}\n      <Container>\n         <p>Global model is computed: {model.ncomp} PCs</p>\n         <ButtonCancel on:click={reset} />\n      </Container>\n      {/if}\n\n   {:catch error}\n      <!-- error message if failed -->\n      <Container status=\"error\">\n         <p>{error}</p>\n      </Container>\n   {/await}\n\n{/if}\n\n\n<!-- error message -->\n{#if status === 'error' || errMsg}\n<Container status=\"error\">\n   <p>{errMsg}</p>\n</Container>\n{/if}\n","<script>\n   /*************************************************************/\n   /* Svelte component for showing app plots                    */\n   /*************************************************************/\n\n\timport { createEventDispatcher } from 'svelte';\n\n   // import plot and plot controls components\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n\n   // Input parameters\n   export let simcares;\n   export let options;\n   export let ncomp;\n\n   // index of selected object and variable\n   let selected_object = -1;\n   let selected_variable = -1;\n\n   // selected plot number and its parameters\n   let plot_container;\n   let params = null;\n   let selected_plot_index = 0;\n   let selected_plot = options[selected_plot_index];\n\n   // event dispatcher\n   const dispatch = createEventDispatcher();\n\n   // function to switch between plots\n   function switchPlot(i) {\n      params = null;\n      selected_plot_index = i;\n      selected_plot = options[selected_plot_index]\n   }\n\n   // function to dispatch event when outlier is marked\n   function markOutlier(el) {\n      dispatch('setoutlier', {id: selected_object});\n   }\n\n   function plotOutlier(el) {\n      dispatch('plotoutlier', {id: selected_object});\n   }\n\n   function markExcluded(el) {\n      dispatch('setexcluded', {id: selected_variable});\n   }\n</script>\n\n<div class=\"plot-container\">\n\n   <!-- column with current plot -->\n   <div bind:this={plot_container} class=\"plot-area\">\n      {#if selected_plot.scope === 'objects'}\n      <svelte:component\n         this={selected_plot.plotComponent}\n         bind:selected={selected_object}\n         {simcares}\n         {params}\n         {ncomp}\n      />\n      {:else if selected_plot.scope === 'variables'}\n      <svelte:component\n         this={selected_plot.plotComponent}\n         bind:selected={selected_variable}\n         {simcares}\n         {params}\n         {ncomp}\n      />\n      {:else}\n      <svelte:component\n         this={selected_plot.plotComponent}\n         {simcares}\n         {params}\n         {ncomp}\n      />\n      {/if}\n   </div>\n\n   <!-- column with plot selectors and current plot settings -->\n   <div class=\"plot-controls-area\">\n      {#each options as {label, scope, plotComponent, controlsComponent}, i}\n         {#if selected_plot_index === i}\n         <svelte:component this={controlsComponent} bind:params={params} {simcares} />\n\n            {#if scope === 'objects' && selected_object >= 0 && i < 2}\n            <Container label=\"Selected\">\n               <div class=\"buttons button-outlier\">\n               <Button on:click={plotOutlier}>plot</Button>\n               <Button on:click={markOutlier}>remove</Button>\n               </div>\n            </Container>\n            {/if}\n\n            {#if scope === 'variables' && selected_variable >= 0 && i < 2}\n            <Container label=\"Selected\">\n               <div class=\"buttons button-outlier\">\n               <Button on:click={markExcluded}>exclude</Button>\n               </div>\n            </Container>\n            {/if}\n\n         {:else}\n         <button\n            class=\"plot-selector\"\n            on:keydown={() => switchPlot(i)}\n            on:click={() => switchPlot(i)}\n         >{label}</button>\n         {/if}\n      {/each}\n\n   </div>\n</div>\n\n\n<style>\n   .plot-controls-area > :global(.control-element:has(.button-outlier)) {\n      background: #fff0e8;\n   }\n\n   .button-outlier  :global(span:last-child > button) {\n      color: white;\n      border-color: crimson;\n      background: crimson;\n   }\n\n   .button-outlier  :global(span:last-child > button:hover) {\n      background: #DC143C20;\n      border-color: #DC143C80;\n      color: crimson;\n   }\n\n   .buttons {\n      position: relative;\n      box-sizing: border-box;\n      display: inline-block;\n      flex: 1 1 auto;\n      margin: 0;\n      padding: 2px 0;\n      width: auto;\n      border-radius: 2px;\n      cursor: default;\n   }\n\n   .plot-container {\n      width: 100%;\n      height: 100%;\n      box-sizing: border-box;\n      padding: 0;\n      display: grid;\n      grid-template-rows: 1fr;\n      grid-template-columns: 1fr minmax(270px, 30%);\n   }\n\n   .plot-area {\n      padding: 1em;\n      margin-top: 0.25rem;\n      border-radius: 0.25em;\n      background: #fefefe;\n   }\n\n   .plot-controls-area {\n      padding: 0 0.25em 0 0.5em;\n   }\n\n   .plot-selector {\n      cursor: pointer;\n      color: #606060;\n      background: #fffef480;\n      box-sizing: border-box;\n      padding: 0.5em 1em;\n      margin: 0.25em 0;\n      border-radius: 0.25rem;\n      box-shadow: none;\n      border: none;\n      width: 100%;\n      text-align: left;\n      font-size: 1rem;\n   }\n\n   .plot-selector:hover {\n      background: #e0e0e0;\n      color: #403020;\n   }\n\n   :global(div.plot-container.off-screen) {\n      position:absolute;\n      top:0;\n      left:50%;\n      width: 650px;\n      height: 600px;\n      background: white;\n      z-index: 999;\n   }\n\n   @media(min-width:1100px) {\n      .plot-container {\n         grid-template-columns: 1fr minmax(285px, 30%);\n      }\n   }\n\n   @media(min-width:1300px) {\n      .plot-container {\n         grid-template-columns: 1fr minmax(300px, 30%);\n      }\n   }\n\n</style>","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","/*************************************************/\n/*    Methods for computing statistics           */\n/*************************************************/\n\nimport { isnumber, isindex, isvector, vector, Vector, _sort } from '../arrays/index.js';\n\n\n/**\n * Compute median of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} median of x.\n *\n */\nexport function median(x) {\n   return quantile(x, 0.5)\n}\n\n/**\n * Compute inter-quartile range for vector of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} IQR of x (Q3 - Q1).\n *\n */\nexport function iqr(x) {\n   return quantile(x, 0.75) - quantile(x, 0.25);\n}\n\n\n/**\n * Computes a p-th quantile/quantiles for a numeric vector.\n *\n * @param {Vector} x - vector with values.\n * @param {number|Array|Vector} p - probability (one value or a vector).\n *\n * @returns {number|Vector} quantile value or a vector with quantiles.\n */\nexport function quantile(x, p) {\n\n   if (isvector(x)) {\n      return quantile(x.v, p);\n   }\n\n   if (isvector(p)) {\n      return quantile(x, p.v);\n   }\n\n   const n = x.length;\n\n   if (!Array.isArray(p)) p = [p];\n\n   if (!isnumber(p[0]) || min(p) < 0 || max(p) > 1) {\n      throw new Error(\"Parameter 'p' must be between 0 and 1 (both included).\");\n   }\n\n   function q(x, p) {\n      const h = (n - 1) * p + 1;\n      const n1 = Math.floor(h);\n      const n2 = Math.ceil(h);\n      return x[n1 - 1] + (x[n2 - 1] - x[n1 - 1]) * (h - Math.floor(h));\n   }\n\n   const xs = _sort(x);\n   const out =  p.map(v => q(xs, v));\n   return p.length == 1 ? out[0] : vector(out);\n}\n\n\n/**\n * Counts how many values from a vector falls into provided intervals (bins).\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} bins - vector with bins boundaries.\n *\n * @returns {Vector} vector with counts for each bean.\n *\n */\nexport function count(x, bins) {\n\n   if (isvector(x)) {\n      return count(x.v, isvector(bins) ? bins.v : bins);\n   }\n\n   const n = bins.length;\n\n   // add a bit extra to right side of the last bin\n   bins[n - 1] = bins[n - 1] * 1.0001\n\n   // count\n   let counts = new Vector.valuesConstructor(n - 1);\n   for (let i = 0; i < x.length; i++) {\n      for (let j = 0; j < n - 1; j++) {\n         if (x[i] >= bins[j] && x[i] < bins[j + 1]) counts[j] += 1;\n      }\n   }\n\n   return new Vector(counts);\n}\n\n\n/**\n * Computes middle points between values of a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with middle points.\n *\n */\nexport function mids(x) {\n\n   if (isvector(x)) {\n      return mids(x.v);\n   }\n\n   const out = new Vector.valuesConstructor(x.length - 1);\n   for (let i = 0; i < out.length; i++) {\n      out[i] = 0.5 * (x[i] + x[i + 1]);\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Splits range of vector values into equal intervals.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} n - number of intervals.\n *\n * @returns {Vector} vector with boundaries of the intervals.\n *\n */\nexport function split(x, n) {\n\n   if (isvector(x)) {\n      split(x.v, n);\n   }\n\n   const rn = range(x);\n\n   if (rn[0] === rn[1]) {\n      throw new Error('split: values in a vector \"x\" should vary.');\n   }\n\n   const by = (rn[1] - rn[0]) / n;\n   return Vector.seq(rn[0], rn[1], by);\n}\n\n\n/**\n * Computes difference between all adjacent values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with the differences.\n *\n */\nexport function diff(x) {\n\n   if (isvector(x)) {\n      return diff(x.v);\n   }\n\n   const out = new Vector.valuesConstructor(x.length - 1);\n   for (let i = 0; i < x.length - 1; i++) {\n      out[i] = x[i + 1] - x[i];\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Generate probability points for QQ plot.\n *\n * @param {number} n - number of points.\n *\n * @returns {Vector} a sequence of probabilities between 0 and 1.\n *\n */\nexport function ppoints(n) {\n\n   const a = n < 10 ? 3.0/8.0 : 0.5;\n   const out = new Vector.valuesConstructor(n);\n\n   for (let i = 0; i < n; i++) {\n      out[i] = (i + 1 - a) / (n + (1 - a) - a);\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Computes cumulative sums for the vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vectors} vector with cumulative sums.\n *\n */\nexport function cumsum(x) {\n\n   if (isvector(x)) {\n      return cumsum(x.v);\n   }\n\n   let s = 0;\n   let out = new Vector.valuesConstructor(x.length);\n   for (let i = 0; i < x.length; i++) {\n      s += x[i];\n      out[i] = s\n   }\n\n   return new Vector(out);\n}\n\n\n/**\n * Computes kurtosis of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} kurtosis of x.\n *\n */\nexport function kurtosis(x) {\n\n   if (isvector(x)) {\n      return kurtosis(x.v);\n   }\n\n   let n = x.length;\n   let m = mean(x);\n\n   let m4 = 0.0;\n   let m2 = 0.0;\n   for (let i = 0; i < n; i++) {\n      m2 = m2 + Math.pow((x[i] - m), 2);\n      m4 = m4 + Math.pow((x[i] - m), 4);\n   }\n\n   return (m4/n) / Math.pow((m2/n), 2);\n}\n\n\n/**\n * Computes skewness of values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} skewness of x.\n *\n */\nexport function skewness(x) {\n\n   if (isvector(x)) {\n      return skewness(x.v);\n   }\n\n   let n = x.length;\n   let m = mean(x);\n\n   let m3 = 0.0;\n   let m2 = 0.0;\n   for (let i = 0; i < n; i++) {\n      m2 = m2 + Math.pow((x[i] - m), 2);\n      m3 = m3 + Math.pow((x[i] - m), 3);\n   }\n\n   return (m3/n) / Math.pow((m2/n), 1.5);\n}\n\n\n/**\n * Computes correlation between two vectors.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} y - vector with values.\n * @param {string} method - which method to use (\"pearson\" or \"spearman\").\n *\n * @returns {number} correlation between x and y.\n *\n */\nexport function cor(x, y, method = \"pearson\") {\n\n   if (isvector(x)) {\n      return cor(x.v, y.v, method);\n   }\n\n   if (method === \"spearman\") {\n      return cor(rank(x), rank(y));\n   }\n\n   return cov(x, y) / (sd(x) * sd(y));\n}\n\n\n/**\n * Computes covariance between two vectors.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {Array|Vector} y - vector with values.\n * @param {boolean} [biased=false] - compute a biased version with n degrees of freedom or not (with n - 1).\n * @param {number} [mx=undefined] - mean of x values (if already known).\n * @param {number} [my=undefined] - mean of y values (if already known).\n *\n * @returns {number} covariance between x and y.\n *\n */\nexport function cov(x, y, biased = false, mx = undefined, my = undefined) {\n\n   if (isvector(x)) {\n      return cov(x.v, y.v, biased, mx, my);\n   }\n\n   const n = x.length;\n\n   if (y.length !== n) {\n      throw Error(\"Vectors 'x' and 'y' must have the same length.\");\n   }\n\n   if (n < 2) {\n      throw Error(\"Vectors 'x' and 'y' must have at least two values.\");\n   }\n\n   if (mx === undefined) mx = mean(x);\n   if (my === undefined) my = mean(y);\n\n   let s = 0;\n   for (let i = 0; i < n; i++) {\n      s = s + (x[i] - mx) * (y[i] - my);\n   }\n\n   return s / (biased ? n : n - 1);\n}\n\n\n/**\n * Returns ranks of values in a vector (ranks start from 1, not 0).\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {Vector} vector with ranks.\n *\n */\nexport function rank(x) {\n\n   if (isvector(x)) {\n      return rank(x.v);\n   }\n\n   const y = [...x].sort((a, b) => a - b);\n\n   return new Vector(x.map(v => y.indexOf(v) + 1));\n}\n\n\n/**\n * Compute marginal range of values as [min, max]\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} m - margin as per cent of range (value between 0 and 1).\n *\n * @return {Array} array with two values, min and max.\n *\n */\nexport function mrange(x, m) {\n\n   if (isvector(x)) {\n      return mrange(x.v, m);\n   }\n\n   if (m === undefined) m = 0.10;\n   const r = range(x);\n   const d = (r[1] - r[0]) * m;\n\n   return [r[0] - d, r[1] + d];\n}\n\n\n/**\n * Compute range of values as [min, max].\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @return {Array} array with two values, min and max.\n *\n */\nexport function range(x) {\n\n   if (isvector(x)) {\n      return range(x.v);\n   }\n\n   let min = x[0];\n   let max = x[0];\n\n   for (let i = 1; i < x.length; i++) {\n      if (x[i] < min) min = x[i];\n      if (x[i] > max) max = x[i];\n   }\n\n   return [min, max];\n}\n\n\n/**\n * Compute norm2 of a vector (Euclidean distance).\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} norm value.\n *\n */\nexport function norm2(x) {\n\n   if (isvector(x)) {\n      return norm2(x.v);\n   }\n\n   return Math.sqrt(ssq(x));\n}\n\n\n/**\n * Compute sum of squared vector values\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} sum of squared values of x.\n *\n */\nexport function ssq(x) {\n\n   if (isvector(x)) {\n      return ssq(x.v);\n   }\n\n   let ssqv = 0;\n   const n = x.length;\n   for (let i = 0; i < n; i++) {\n      const v = x[i]\n      ssqv += v * v;\n   }\n\n   return ssqv;\n}\n\n\n/**\n * Compute standard deviation of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {boolean} [biased=false] - compute a biased value (n degrees of freedom) or unbiased (n - 1 degrees of freedom)\n *\n * @returns {number} standard deviation of x.\n *\n */\nexport function sd(x, biased) {\n\n   if (isvector(x)) {\n      return sd(x.v, biased);\n   }\n\n   return Math.sqrt(variance(x, biased));\n}\n\n\n/**\n * Compute variance of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {boolean} [biased=false] - compute a biased variance (n degrees of freedom) or unbiased (n - 1 degrees of freedom)\n *\n * @returns {number} variance of x.\n *\n */\nexport function variance(x, biased) {\n\n   if (biased === undefined) {\n      biased = false;\n   }\n\n   if (isvector(x)) {\n      return variance(x.v);\n   }\n\n   const m = mean(x);\n   let s = 0;\n   for (let i = 0; i < x.length; i++) {\n      const d = (x[i] - m);\n      s = s + d * d ;\n   }\n\n   return s / (biased ? x.length : (x.length - 1));\n}\n\n\n/**\n * Compute average of vector values.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} mean of x.\n *\n */\nexport function mean(x) {\n\n   if (isvector(x)) {\n      return mean(x.v);\n   }\n\n   return sum(x) / x.length;\n}\n\n\n/**\n * Compute sum of all values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} sum of x.\n *\n */\nexport function sum(x) {\n\n   if (isvector(x)) {\n      return sum(x.v);\n   }\n\n   let s = 0;\n   for (let i = 0; i < x.length; i++) {\n      s = s + x[i];\n   }\n\n   return s;\n}\n\n\n/**\n * Compute product of all values in a vector.\n *\n * @param {Array|Vector} x - vector with values.\n *\n * @returns {number} product of x.\n *\n */\nexport function prod(x) {\n\n   if (isvector(x)) {\n      return prod(x.v);\n   }\n\n   let p = 1;\n   for (let i = 0; i < x.length; i++) {\n      p = p * x[i];\n   }\n\n   return p;\n}\n\n\n/**\n * Find the smallest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} the smallest value.\n *\n */\nexport function min(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return x.v[minind(x.v) - 1];\n   }\n\n   return x[minind(x) - 1];\n}\n\n\n/**\n * Find index of the smallest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} index of the smallest value (starting from 1).\n *\n */\nexport function minind(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return minind(x.v);\n   }\n\n   let outind = 1;\n   let out = x[0]\n   for (let i = 2; i <= x.length; i++) {\n      if (x[i - 1] < out) {\n         outind = i;\n         out = x[i - 1];\n      }\n   }\n\n   return outind;\n}\n\n\n/**\n * Find the largest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} the largest value.\n *\n */\nexport function max(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return x.v[maxind(x.v) - 1];\n   }\n\n   return x[maxind(x) - 1];\n}\n\n\n/**\n * Find index of the largest element in a vector.\n *\n * @param {Array|Vector|Index} x - vector or index with values.\n *\n * @returns {number} index of the largest value (starting from 1).\n *\n */\nexport function maxind(x) {\n\n   if (isvector(x) || isindex(x)) {\n      return maxind(x.v);\n   }\n\n   let outind = 1;\n   let out = x[0]\n   for (let i = 2; i <= x.length; i++) {\n      if (x[i - 1] > out) {\n         outind = i;\n         out = x[i - 1];\n      }\n   }\n\n   return outind;\n}\n\n\n","/*************************************************/\n/*    Misc extra methods for statistics          */\n/*************************************************/\n\nimport { isvector, vector, Index, Vector } from \"../arrays/index.js\";\nimport { prod, quantile } from \"../stat/index.js\";\n\n\n/**\n * Finds index of value in x which is closest to the value a.\n *\n * @param {Array|Vector} x - a vector with values.\n * @param {number} a - a value\n *\n * @returns {number} the index value (starts from 1).\n *\n */\nexport function closestind(x, a) {\n\n   if (isvector(x)) {\n      return closestind(x.v, a);\n   }\n\n   const c = x.reduce((prev, curr) => Math.abs(curr - a) < Math.abs(prev - a) ? curr : prev);\n   return x.indexOf(c) + 1;\n}\n\n\n/**\n * Computes numeric integral for function \"f\" with limits (a, b).\n *\n * @param {function} f - a reference to a function.\n * @param {number} a - lower limit for integration.\n * @param {number} b - upper limit for integration.\n * @param {number} [acc=0.000001] - absolute accuracy.\n * @param {number} [eps=0.00001] - relative accuracy.\n * @param {number[]} oldfs - vector of values needed for recursion.\n *\n * @returns {number} result of integration.\n *\n */\nexport function integrate(f, a, b, acc, eps, oldfs) {\n\n   if (acc === undefined) {\n      acc = 0.000001;\n   }\n\n   if (eps === undefined) {\n      eps = 0.00001\n   }\n\n   if (typeof(a) !== \"number\" || typeof(b) !== \"number\") {\n      throw Error(\"Parameters 'a' and 'b' must be numbers.\");\n   }\n\n   if (b < a) {\n      throw Error(\"Parameter 'b' must be larger 'a'.\");\n   }\n\n   // special case when left limit is minus infinity\n   if (a === -Infinity && b !== Infinity) {\n      return integrate((t) => f(b - (1 - t) / t) / (t ** 2), 0, 1);\n   }\n\n   // special case when right limit is plus infinity\n   if (a !== -Infinity && b === Infinity) {\n      return integrate((t) => f(a + (1 - t) / t) / (t ** 2), 0, 1);\n   }\n\n   // special case when both limits are infinite\n   if (a === -Infinity && b === Infinity) {\n      return integrate((t) => (f((1 - t) / t) + f((t - 1) / t)) / t ** 2, 0, 1);\n   }\n\n   // constants for splitting the integration interval\n   const x = [1/6, 2/6, 4/6, 5/6];\n   const w = [2/6, 1/6, 1/6, 2/6];\n   const v = [1/4, 1/4, 1/4, 1/4];\n   const p = [1, 0, 0, 1];\n\n   let n = x.length, h = b - a;\n   let fs;\n\n   if (oldfs === undefined) {\n      fs = x.map(v => f(a + v * h));\n   } else {\n      fs = new Array(n);\n      for (let k = 0, i = 0; i < n; i++) {\n         fs[i] = p[i] === 1 ? f(a + x[i] * h) : oldfs[k++];\n      }\n   }\n\n   let q4 = 0, q2 = 0;\n   for (let i = 0; i < n; i++) {\n      q4 += w[i] * fs[i] * h;\n      q2 += v[i] * fs[i] * h;\n   }\n\n   if (isNaN(q2) || isNaN(q4)) {\n      throw Error(\"Numerical integration ended up with NaN number.\")\n   }\n\n   let tol = acc + eps * Math.abs(q4);\n   let err = Math.abs((q4 - q2)/3);\n\n   if (err < tol) return q4;\n\n   acc = acc / Math.sqrt(2.);\n   const mid = (a + b) / 2;\n   const left = fs.filter((v, i) => i < n/2);\n   const right = fs.filter((v, i) => i >= n/2);\n\n   const ql = integrate(f, a, mid, eps, acc, left);\n   const qr = integrate(f, mid, b, eps, acc, right);\n\n   return ql + qr;\n}\n\n\n/**\n * Finds outliers in a vector based on inter-quartile range distance.\n *\n * @param {Array|Vector} x - vector with values.\n * @param {number} q1 - first quartile (optional parameter).\n * @param {number} q3 - third quartile (optional parameter).\n *\n * @returns {Vector} vector with outliers or empty vector if none were found.\n *\n */\nexport function getoutliers(x, q1 = undefined, q3 = undefined) {\n\n   if (q1 === undefined) q1 = quantile(x, 0.25);\n   if (q3 === undefined) q3 = quantile(x, 0.75);\n\n   const iqr15 = (q3 - q1) * 1.5;\n   const bl = q1 - iqr15\n   const bu = q3 + iqr15\n\n   return new Vector(x.v.filter(v => v < bl || v > bu));\n}\n\n\n/**\n * Rounds number (or vector of numbers) to given amount of decimals.\n *\n * @param {numbr|Array|Vector} x - a number or a vector with values.\n *\n * @return {number|Array|Vector} a number or a vector with rounded values.\n *\n */\nexport function round(x, n = 0) {\n\n   if (isvector(x)) {\n      return vector(x.v.map(v => round(v, n)));\n   }\n\n   if (Array.isArray(x)) {\n      return x.map(v => round(v, n));\n   }\n\n   return Number.parseFloat(x.toFixed(n));\n}\n\n\n/**\n * Generate combination of all levels of vectors.\n *\n * @param {...} args - a sequence of vectors.\n *\n * @returns {Array} array of arrays with values for each vector.\n *\n */\nexport function expandgrid(...args) {\n\n   const nargs = args.length;\n   const d = args.map(v => v.length);\n   let orep = prod(d);\n\n   let grid = Array(nargs);\n   let repFac = 1;\n\n   for (let i = 0; i < nargs; i++) {\n      const x = isvector(args[i]) ? args[i] : vector(args[i]);\n      const nx = x.length;\n      orep = orep / nx;\n      grid[i] = x.subset(Index.seq(1, nx).repeach(repFac).rep(orep));\n      repFac = repFac * nx;\n   }\n\n   return grid;\n}\n","/* =================================================================== */\n/*    Methods for statistical distributions                            */\n/* =================================================================== */\n\nimport { range } from '../stat/index.js';\nimport { isvector, vector, Vector } from '../arrays/index.js';\nimport { closestind, integrate } from '../misc/index.js';\n\n// threshold to switch between two approximation for chi-square distribution\nconst CHISQ_DOF_THRESHOLD = 30;\n// tolerance for chi-square distribution search\nconst CHISQ_TOL = 0.0000001;\n\n/**\n * Generates 'n' random numbers from a uniform distribution.\n *\n * @param {number} n - amount of numbers to generate.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {Vector} vector with generated random numbers.\n *\n */\nexport function runif(n, a = 0, b = 1) {\n   let out = Vector.zeros(n);\n   for (let i = 0; i < n; i++) {\n      out.v[i] = (a + Math.random() * (b - a));\n   }\n   return out;\n}\n\n\n/**\n * Cumulative distribution function for uniform distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function punif(x, a = 0, b = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => punif(v, a, b));\n   }\n\n   return x < a ? 0 : (x > b ? 1 : (x - a) / (b - a));\n}\n\n\n/**\n * Probability density function for uniform distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [a=0] - smallest value (min) of the population.\n * @param {number} [b=1] - largest value (max) of the population.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dunif(x, a = 0, b = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => dunif(v, a, b));\n   }\n\n   return x < a || x > b ? 0 : 1 / (b - a);\n}\n\n\n /**\n * Generates 'n' random numbers from a normal distribution.\n *\n * @param {number} n - amount of numbers to generate.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {Vector} vector with generated random numbers.\n */\nexport function rnorm(n, mu = 0, sigma = 1) {\n\n   let out = Vector.zeros(n);\n   for (let i = 0; i < n; i ++) {\n      const a = Math.sqrt(-2 * Math.log(Math.random()));\n      const b = 2 * Math.PI * Math.random();\n      out.v[i] = (a * Math.sin(b) * sigma + mu);\n   }\n\n   return out;\n}\n\n\n/**\n * Probability density function for normal distribution.\n *\n * @param {number|Vector} x - vector of values of a single value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dnorm(x, mu = 0, sigma = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => dnorm(v, mu, sigma));\n   }\n\n   const z = (x - mu) / sigma;\n   return Math.exp(-0.5 * z * z) / (Math.sqrt(2 * Math.PI) * sigma);\n}\n\n\n/**\n * Cumulative distribution function for normal distribution.\n *\n * @param {number|Vector} x - vector of values or a single value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pnorm(x, mu = 0, sigma = 1) {\n\n   if (isvector(x)) {\n      return x.apply(v => pnorm(v, mu, sigma));\n   }\n\n   const frac = 1 / (Math.sqrt(2) * sigma);\n   return  0.5 * (1 + erf((x - mu) * frac));\n}\n\n\n/**\n * Inverse cumulative distribution function for normal distribution.\n *\n * @param {number|Vector} p - vector of probabilities or a single probability value.\n * @param {number} [mu=0] - average value of the population.\n * @param {number} [sigma=1] - standard deviation of the population.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qnorm(p, mu = 0, sigma = 1) {\n\n   if (isvector(p)) {\n      return p.apply(v => qnorm(v, mu, sigma));\n   }\n\n   if (mu !== 0 || sigma !== 1) {\n      return qnorm(p) * sigma + mu;\n   }\n\n   if (p < 0 || p > 1) {\n      throw Error('Parameter \"p\" must be between 0 and 1.');\n   }\n\n   if (p < 0.0000000001) return -Infinity;\n   if (p > 0.9999999999) return +Infinity;\n\n   const SP1 = 0.425;\n   const SP2 = 5.0;\n   const C1 = 0.180625;\n   const C2 = 1.6;\n\n   const a0 = 3.3871327179;\n   const a1 = 5.0434271938 * 10;\n   const a2 = 1.5929113202 * 100;\n   const a3 = 5.9109374720 * 10;\n   const b1 = 1.7895169469 * 10;\n   const b2 = 7.8757757664 * 10;\n   const b3 = 6.7187563600 * 10;\n\n   const c0 = 1.4234372777;\n   const c1 = 2.7568153900;\n   const c2 = 1.3067284816;\n   const c3 = 1.7023821103 * 0.1;\n   const d1 = 7.3700164250 * 0.1;\n   const d2 = 1.2021132975 * 0.1;\n\n   const e0 = 6.6579051150;\n   const e1 = 3.0812263860;\n   const e2 = 4.2868294337 * 0.1;\n   const e3 = 1.7337203997 * 0.01;\n   const f1 = 2.4197894225 * 0.1;\n   const f2 = 1.2258202635 * 0.01;\n\n   const q = p - 0.5;\n   let r;\n\n   if (Math.abs(q) <= SP1) {\n      r = C1 - q * q;\n      return q * (((a3 * r + a2) * r + a1) *r + a0) / (((b3 * r + b2) * r + b1) * r + 1.0);\n   }\n\n   r = q < 0 ? p : 1 - p;\n   r = Math.sqrt(-Math.log(r));\n   let res;\n\n   if (r <= SP2) {\n      r = r - C2;\n      res = (((c3 * r + c2) * r + c1) * r + c0) / ((d2 * r + d1) * r + 1.0);\n   } else {\n      r = r - SP2;\n      res = (((e3 * r + e2) * r + e1) + e0) / ((f2 * r + f1) * r + 1.0);\n   }\n\n   return q < 0 ? -res : res;\n}\n\n\n/**\n * Probability density function for Student's t-distribution.\n *\n * @param {number|Vector} t - t-value or a vector of t-values.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function dt(t, dof) {\n\n   if (dof < 0) {\n      throw new Error('Parameter \"dof\" should be a positive number.');\n   }\n\n   if (isvector(t)) {\n      return t.apply(v => dt(v, dof));\n   }\n\n   const pow = -0.5 * (dof + 1);\n   const A = 1 / (Math.sqrt(dof) * beta(0.5, dof/2));\n\n   return (A * Math.pow((1 + t * t / dof), pow));\n}\n\n\n/**\n * Cumulative distribution function for Student's t-distribution.\n *\n * @param {number|Vector} t - t-value or a vector of t-values.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pt(t, dof) {\n\n   if (dof === undefined || dof === null || dof < 1) {\n      throw Error('Parameter \"dof\" (degrees of freedom) must be an integer number >= 1.');\n   }\n\n   if (isvector(t)){\n      return t.apply(v => pt(v, dof));\n   }\n\n   // since distribution in symmetric we can use only left tail\n   if (t === 0) return 0.5;\n   if (t === -Infinity) return 0;\n   if (t === Infinity) return 1;\n   if (t > 0) return (1 - pt(-t, dof));\n\n   return integrate((x) => dt(x, dof), -Infinity, t);\n}\n\n\n/**\n * Inverse cumulative distribution (quantile) function for Student's t-distribution.\n *\n * @param {number|Vector} p - probability or vector with probabilities.\n * @param {number} dof - degrees of freedom.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qt(p, dof) {\n\n   if (dof === undefined || dof === null || dof < 1) {\n      throw Error('Parameter \"dof\" (degrees of freedom) must be an integer number >= 1.');\n   }\n\n   if (p < 0 || p > 1) {\n      throw Error('Parameter \"p\" must be between 0 and 1.');\n   }\n\n   if (isvector(p)) {\n      return p.apply(v => qt(v, dof));\n   }\n\n   if (p < 0.0000000001) return -Infinity;\n   if (p > 0.9999999999) return +Infinity;\n\n\n   // simple cases  exact solutions\n   if (dof === 1) {\n      return Math.tan(Math.PI * (p - 0.5));\n   }\n\n   if (dof === 2) {\n      return 2 * (p - 0.5) * Math.sqrt(2 / (4 * p * (1 - p)));\n   }\n\n   // approximation\n\n   let sign = -1;\n   if (p >= 0.5){\n      sign = +1 ;\n      p = 2 * (1 - p);\n   } else {\n      sign = -1;\n      p = 2 * p;\n   }\n\n   const a = 1.0 / (dof - 0.5);\n   const b = 48.0 / (a ** 2);\n   let c = ((20700 * a / b - 98) * a - 16) * a + 96.36;\n   const d = ((94.5 / (b + c) - 3.0)/b + 1.0) * Math.sqrt(a * Math.PI / 2) * dof;\n\n   let x = d * p;\n   let y = x ** (2.0/dof);\n\n   if (y > 0.05 + a) {\n\n      // asymptotic inverse expansion about normal\n      x = qnorm(p * 0.5);\n      y = x * x;\n\n      if (dof < 5) {\n         c = c + 0.3 * (dof - 4.5) * (x + 0.6);\n      }\n\n      c = (((0.05 * d * x - 5.0) * x - 7.0) * x - 2.0) * x + b + c;\n      y = (((((0.4 * y + 6.3) * y + 36.0) * y + 94.5) / c - y - 3.0)/b + 1.0) * x;\n      y = a * (y ** 2);\n      y = y > 0.002 ? Math.exp(y) - 1.0 : 0.5 * (y ** 2) + y;\n   } else {\n      y = ((1.0 / (((dof + 6.0)/(dof * y) - 0.089 * d - 0.822) * (dof + 2.0) * 3.0) + 0.5/(dof + 4.0)) * y - 1.0) *\n         (dof + 1.0)/(dof + 2.0) + 1.0/y;\n   }\n\n   return sign * Math.sqrt(dof * y);\n}\n\n\n/**\n * Probability density function for F-distribution.\n *\n * @param {number|Vector} F - F-value or a vector of t-values\n * @param {number} d1 - degrees of freedom.\n * @param {number} d2 - degrees of freedom.\n *\n * @returns {number|Vector} computed densities.\n *\n */\nexport function df(F, d1, d2) {\n\n   if (F < 0 || d1 < 0 || d2 < 0) {\n      throw new Error('All 3 parameters must be positive.');\n   }\n\n   if (d2 <= d1) {\n      throw new Error('Parameter \"d1\" must be larger \"d2\".');\n   }\n\n   if (isvector(F)) {\n      return F.apply(v => df(v, d1, d2));\n   }\n\n   return Math.sqrt( ( Math.pow(d1 * F, d1) * Math.pow(d2, d2)) / Math.pow(d1 * F + d2, d1 + d2)) / (F * beta(d1/2, d2/2))\n}\n\n\n/**\n * Cumulative distribution function for F-distribution.\n *\n * @param {number|Vector} F - F-value or a vector of t-values.\n * @param {number} d1 - degrees of freedom.\n * @param {number} d2 - degrees of freedom.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pf(F, d1, d2) {\n\n   if (F < 0 || d1 < 0 || d2 < 0) {\n      throw new Error('All 3 parameters must be positive.');\n   }\n\n   if (isvector(F)) {\n      return F.apply(v => pf(v, d1, d2));\n   }\n\n   return ibeta(d1 * F / (d1 * F + d2), d1/2, d2/2)\n}\n\n\n/**\n * Cumulative distribution function for chi-square distribution.\n *\n * @param {number|Vector|Array} x - chi-square value.\n * @param {number} dof - degrees of freedom.\n *\n * @description if DoF is relatively small (< 30) the method computes probabilities via\n * approximation of lower incomplete gamma function, `igamma()`, and gamma function, `gamma()`.\n * If the DoF is larger than 30 it uses the a modified power series approximation\n * (doi:10.1016/j.csda.2004.04.001) and normal distribution.\n *\n * @returns {number|Vector} computed probabilities.\n *\n */\nexport function pchisq(x, dof) {\n\n   if (Array.isArray(x)) {\n      return pchisq(vector(x), dof);\n   }\n\n   const mu = 5/6 - 1 / (9 * dof) - 7 / (648 * dof * dof) + 25 / (2187 * dof * dof * dof);\n   const sigma2 = 1 / (18 * dof) + 1 / (162 * dof * dof) - 37 / (1164 * dof * dof * dof);\n   const sigma = Math.sqrt(sigma2);\n\n   // works well for large dof\n   function F2(x) {\n      if (x === 0) return 0;\n      if (dof === 0) return 1;\n      if (dof > 100 && x > dof * 2) return 1;\n      if (dof > 50 && x > dof * 3) return 1;\n      if (dof > 10 && x > dof * 5) return 1;\n      if (dof > 5 && x > dof * 8) return 1;\n      if (x > dof * 30) return 1;\n      const l0 = x / dof;\n      const l = Math.pow(l0, 1/6) - 0.5 * Math.pow(l0, 1/3) + (1/3) * Math.pow(l0, 1/2);\n      return pnorm(l, mu, sigma);\n   }\n\n   // works well for small dof\n   function F1(x) {\n      if (x === 0) return 0;\n      if (dof === 0) return 1;\n      if (dof > 100 && x > dof * 2) return 1;\n      if (dof > 50 && x > dof * 3) return 1;\n      if (dof > 10 && x > dof * 5) return 1;\n      if (dof > 5 && x > dof * 8) return 1;\n      if (x > dof * 30) return 1;\n      return igamma(x/2, dof/2) / gamma(dof/2)\n   }\n\n   const F = dof > CHISQ_DOF_THRESHOLD ? F2 : F1;\n   return isvector(x) ? x.apply(F) : F(x)\n}\n\n\n/**\n * Inverse cumulative distribution (quantile) function for chi-square distribution.\n *\n * @param {number|Vector|Array} p - probability or vector/array with probabilities.\n * @param {number} dof - degrees of freedom.\n *\n * @description if DoF is relatively small (< 30) the method computes quantiles by sequential\n * improving, splitting possible quantile range into intervals, computing probabilities for each\n * element of the interval using `pchisq()`, then find the quantile which has the closest\n * probability value, make a new split around it and so on until the probability of the\n * currently selected quintile is close to the desired one. For large DoF (>30) the it uses\n * the a modified power series approximation (doi:10.1016/j.csda.2004.04.001) and\n * normal distribution.\n *\n * @returns {number|Vector} computed quantiles.\n *\n */\nexport function qchisq(p, dof) {\n\n   if (Array.isArray(p)) {\n      return qchisq(vector(p), dof);\n   }\n\n   // compute parameters of normal distribution for power approximation\n   const mu = 5/6 - 1 / (9 * dof) - 7 / (648 * dof * dof) + 25 / (2187 * dof * dof * dof);\n   const sigma2 = 1 / (18 * dof) + 1 / (162 * dof * dof) - 37 / (1164 * dof * dof * dof);\n   const sigma = Math.sqrt(sigma2);\n\n   // compute quantile for one probability value using power approximations\n   // and inverse solution\n   function F2(x) {\n      if (x === 0) return 0;\n      if (x === 0) return Inf;\n      if (dof === 0) return 0;\n      const l = qnorm(x, mu, sigma);\n      const o = Math.pow(Math.sqrt(36 * l * l - 30 * l + 13)/4 + (3 * l - 3/2)/2 + 1/8, 1/3);\n      return Math.pow(o - 3 / (4 * o) + 0.5, 6) * dof;\n   }\n\n   // compute quantile using sequential splits of quantile range\n   function F1(x) {\n      if (x === 0) return 0;\n      if (x === 0) return Inf;\n      if (dof === 0) return 0;\n\n      // initial split (start, end, and delta)\n      let qs = 0;\n      let qe = CHISQ_DOF_THRESHOLD * 10;\n      let qd = qe / 30;\n\n      // loop for sequential splits\n      for (let i = 0; i < 30; i++) {\n\n         // compute vector of quantiles and corresponding probabilities\n         const q = Vector.seq(qs, qe, qd);\n         const p = pchisq(q, dof);\n\n         // find index of quantile which has probability closest to x\n         const ind = closestind(p, x) - 1;\n\n         // if the probability is close enough to the desired one return the quantile\n         if (Math.abs(p.v[ind] - x) < CHISQ_TOL) return q.v[ind];\n\n         // if not make a new split by taking left and right neighbors quantiles\n         qs = ind == 0 ? q.v[0] : q.v[ind - 1];\n         qe = ind == q.v.length - 1? q.v[ind] : q.v[ind + 1];\n\n         // if the boundaries are the same stop\n         if (qs == qe) return qs;\n\n         // compute delta for new boundaries\n         qd = (qe - qs) / 30;\n      }\n\n      // if the loop did not converge we simply return the middle quantile\n      return (qe + qs) / 2;\n   }\n\n   const F = dof > CHISQ_DOF_THRESHOLD ? F2 : F1;\n   return isvector(p) ? p.apply(F) : F(p)\n}\n\n\n/**\n * Incomplete Betta function (approximation via numeric integration).\n *\n * @param {number} x - first argument.\n * @param {number} a - second argument.\n * @param {number} b - third argument.\n *\n * @returns {number} value of the function.\n *\n */\nexport function ibeta(x, a, b) {\n\n   if (x === 0) return 0;\n   if (x === 1) return 1;\n   if (b === 1) return x ** a;\n   if (a === 1) return (1 - (1 - x)**b);\n\n   return integrate((t) => t ** (a - 1) * (1 - t) ** (b - 1), 0, x) / beta(a, b);\n}\n\n\n/**\n * Gamma function (approximation).\n *\n * @param {number|Vector} z - argument (one value or a vector).\n *\n * @returns {number} value of the Gamma function.\n *\n */\nexport function gamma(z) {\n\n   if (isvector(z)) {\n      return z.apply(gamma);\n   }\n\n   if (z <= 0) {\n      throw new Error('gamma: the function only works with arguments > 0.');\n   }\n\n   // coefficients\n   const p = [\n        676.5203681218851,\n      -1259.1392167224028,\n        771.32342877765313,\n       -176.61502916214059,\n         12.507343278686905,\n         -0.13857109526572012,\n          9.9843695780195716e-6,\n          1.5056327351493116e-7\n    ];\n\n   if (z < 0.5) {\n      return Math.PI / (Math.sin(Math.PI * z) + gamma(1 - z));\n   }\n\n   z = z - 1;\n   let x = 0.99999999999980993;\n\n   for (let i = 0; i < p.length; i++) {\n      x = x + p[i] / (z + i + 1);\n   }\n\n   const t = z + p.length - 0.5;\n   return Math.sqrt(2 * Math.PI) * Math.pow(t, z + 0.5) * Math.exp(-t) * x;\n}\n\n\n\n/**\n * Lower incomplete gamma function (approximation)\n *\n * @param {number} x - first argument (one value).\n * @param {number} a - second argument (one value).\n *\n * @returns {number} value of the lower incomplete gamma function.\n *\n */\nexport function igamma(x, a) {\n\n   const epsilon = 1e-18; // Desired accuracy\n   const maxIterations = 10000; // Maximum number of iterations\n\n   let sum = 0;\n\n   for (let k = 0; k < maxIterations; k++) {\n      const s = Math.pow(x, k) / gamma(a + k + 1);\n      if (isNaN(s) || s < epsilon) break;\n      sum += s\n   }\n\n   return Math.pow(x, a) * gamma(a) * Math.exp(-x) * sum;\n}\n\n\n\n/**\n * Beta function (approximation).\n *\n * @param {number} x - first argument (one value).\n * @param {number} y - second argument (one value).\n *\n * @returns {number} value of the Beta function.\n *\n */\nexport function beta(x, y) {\n\n   if (y > 100) {\n      // for large y we use slower integrate version\n      return integrate((u) => Math.pow(u, x - 1) / Math.pow(1 + u, x + y), 0, Infinity)\n   }\n\n   return gamma(x) * gamma(y) / gamma(x + y);\n}\n\n\n/**\n * Error function for normal distribution.\n *\n * @param {number} x - a number.\n *\n * @returns {number} value for erf.\n *\n */\nexport function erf(x) {\n\n  const sign = (x >= 0) ? 1 : -1;\n  x = Math.abs(x);\n\n  // constants\n  const a1 =  0.254829592;\n  const a2 = -0.284496736;\n  const a3 =  1.421413741;\n  const a4 = -1.453152027;\n  const a5 =  1.061405429;\n  const p  =  0.3275911;\n\n  // approximation\n  const t = 1.0 / (1.0 + p * x);\n  const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);\n\n  return sign * y;\n}\n\n\n","/* =================================================================== */\n/*    Methods for Arrays (vectors, matrices, indices and factors, )    */\n/* =================================================================== */\n\nimport { min, max, prod } from '../stat/index.js';\nimport { rnorm, runif } from '../distributions/index.js';\nimport { qr } from '../decomp/index.js';\n\nexport function isnumber(x) {\n   return typeof(x) === 'number';\n}\n\n\n/**************************************************/\n/*    Non-class methods for Vectors and Matrix    */\n/**************************************************/\n\n/**\n * Compute XY' product of two matrices.\n *\n * @param {Matrix} X - a matrix.\n * @param {Matrix} Y - a matrix.\n *\n * @returns {Matrix} result of the product.\n *\n */\nexport function tcrossprod(X, Y) {\n\n   if (Y === undefined) {\n      Y = X;\n   }\n\n   const nrx = X.nrows;\n   const ncx = X.ncols;\n\n   const nry = Y.nrows;\n   const ncy = Y.ncols;\n\n   // create vector for the product\n   const nrows = nrx;\n   const ncols = nry;\n   const ninner = ncx;\n   const out = new Float64Array(nrows * ncols);\n\n   for (let i = 0; i < ninner; i++) {\n      const xr = X.v.subarray(i * nrx, (i + 1) * nrx);\n      const yc = Y.v.subarray(i * nry, (i + 1) * nry);\n\n      for (let c = 0; c < ncols; c++) {\n         const outc = out.subarray(c * nrows, (c + 1) * nrows);\n         for (let r = 0; r < nrows; r++) {\n            outc[r] += xr[r] * yc[c];\n         }\n      }\n   }\n\n   return new Matrix(out, nrows, ncols);\n\n}\n\n\n/**\n * Compute X'Y product of two matrices or a vector and a matrix.\n *\n * @param {Matrix|Vector} X - a matrix or a vector.\n * @param {Matrix} Y - a matrix.\n *\n * @returns {Matrix} result of the product.\n *\n */\nexport function crossprod(X, Y) {\n\n   if (Y === undefined) {\n      Y = X;\n   }\n\n   if (!ismatrix(X) || !ismatrix(Y)) {\n      throw Error('crossprod: both X and Y must be instance of Matrix class.');\n   }\n\n   const nrx = X.nrows;\n   const ncx = X.ncols;\n\n   const nry = Y.nrows;\n   const ncy = Y.ncols;\n\n   // create vector for the product\n   const nrows = ncx;\n   const ncols = ncy;\n   const ninner = nrx;\n   const out = new Float64Array(nrows * ncols);\n\n   for (let c = 0; c < ncols; c++) {\n      // column c of Y\n      const yc = Y.v.subarray(c * nry, (c + 1) * nry);\n\n      // column c of out\n      const outc = out.subarray(c * nrows, (c + 1) * nrows);\n\n      for (let r = 0; r < nrows; r++) {\n\n         // column r of X (row r of X')\n         const xr = X.v.subarray(r * nrx, (r + 1) * nrx);\n\n         let s = 0;\n         for (let i = 0; i < ninner; i++) {\n            s += xr[i] * yc[i];\n         }\n         outc[r] = s;\n      }\n   }\n\n   return new Matrix(out, nrows, ncols);\n}\n\n\n/**\n * Bind several matrices or vectors into a single matrix row wise.\n *\n * @param  {...any} args - matrices or vectors separated by comma.\n *\n * @returns {Matrix} concatenated matrix.\n *\n */\nexport function rbind(...args) {\n\n   if (args.length === 1) return args[0];\n\n   // check that all matrices have the same number of rows\n   const ncols = ismatrix(args[0]) ? args[0].ncols : args[0].length;\n   const check = args.reduce( (acc, cur) => acc & ismatrix(cur) ? cur.ncols === ncols : cur.length === ncols, true);\n\n   if (!check) {\n      throw Error('rbind: all matrices must the same number of columns.');\n   }\n\n   // compute number of columns in outside matrix\n   const nrows = args.reduce( (acc, cur) => acc + (ismatrix(cur) ? cur.nrows : 1), 0);\n   const l = nrows * ncols;\n   const out = new Matrix.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set((ismatrix(a) ? a.t().v : a.v), start);\n      start += a.v.length;\n   }\n\n   return new Matrix(out, ncols, nrows).t();\n\n}\n\n\n/**\n * Bind several matrices or vectors into a single matrix column wise.\n *\n * @param  {...any} args - matrices or vectors separated by comma.\n *\n * @returns {Matrix} concatenated matrix.\n *\n */\nexport function cbind(...args) {\n\n   if (args.length === 1) return args[0];\n\n   // check that all matrices have the same number of rows\n   const nrows = ismatrix(args[0]) ? args[0].nrows : args[0].length;\n   const check = args.reduce( (acc, cur) => acc & (ismatrix(cur) ? cur.nrows === nrows : cur.length === nrows), true);\n\n   if (!check) {\n      throw Error('cbind: all matrices must the same number of rows.');\n   }\n\n   // compute number of columns in outside matrix\n   const ncols = args.reduce( (acc, cur) => acc + (ismatrix(cur) ? cur.ncols : 1), 0);\n   const l = nrows * ncols;\n   const out = new Matrix.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set(a.v, start);\n      start += a.v.length;\n   }\n\n   return new Matrix(out, nrows, ncols);\n\n}\n\n\n/**\n * Concatenate several vectors into one vector.\n *\n * @param {...Vector | ...Index} args - vectors separated by comma.\n *\n * @returns {Vector|Index} vector with concatenated values.\n *\n */\nexport function c(...args) {\n\n   if (args.length === 1) return args[0];\n\n   const l = args.reduce( (acc, cur) => acc + cur.length, 0);\n   const out = new args[0].constructor.valuesConstructor(l);\n\n   let start = 0;\n   for (const a of args) {\n      out.set(a.v, start);\n      start += a.length;\n   }\n\n   return new args[0].constructor(out);\n}\n\n\n/**\n * Change dimension of matrices and vectors.\n * @param {Matrix|Vector} obj - a matrix or a vector.\n * @param {number} nrow - number of rows in the reshaped object.\n * @param {number} ncol - number of columns in the reshaped object, if undefined, a vector will be returned.\n *\n * @returns {Matrix|Vector} the reshaped object.\n *\n */\nexport function reshape(obj, nrow, ncol) {\n\n   if (ncol === undefined) {\n      if (nrow !== obj.v.length) {\n         throw Error(\"reshape: provided dimension does not match number of values in the object.\");\n      }\n      return new Vector(obj.v);\n   }\n\n   if (obj.v.length !== nrow * ncol) {\n      throw Error(\"reshape: provided dimension does not match number of values in the object.\");\n   }\n\n   return new Matrix(obj.v, nrow, ncol);\n}\n\n\n\n/*************************************************/\n/*         Classes and type checkers             */\n/*************************************************/\n\n\n/**\n * Return 'true' of 'X' is a Matrix object, 'false' otherwise.\n *\n * @param {any} X - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function ismatrix(X) {\n   return X && X.constructor === Matrix;\n}\n\n\n/**\n * Create a Matrix object from array of values.\n *\n * @param {number[]} values - array with values.\n * @param {number} nrows - number of rows in matrix.\n * @param {number} ncols - number of columns in matrix.\n *\n * @returns {Matrix} the matrix.\n *\n */\nexport function matrix(values, nrows, ncols) {\n   return new Matrix(new Float64Array(values), nrows, ncols);\n}\n\n\n/** Class representing a matrix */\nexport class Matrix {\n\n   static valuesConstructor = Float64Array;\n   static TOLERANCE = Math.pow(10, -9);\n\n   /**\n    * Constructor for a Matrix object.\n    *\n    * @param {Float64Array} values - typed array with values.\n    * @param {number} nrows - number of rows in the matrix.\n    * @param {number} ncols - number of columns in the matrix.\n    *\n    * @returns {Matrix} a Matrix object (see description).\n    *\n    * @description  Create a matrix from vector of values. Matrix is represented by an object with two\n    * fields. Field 'v' is a typed Float64Array with all values, unfolded column by column. The second\n    * field, 'dim', is an array with 2 values: number of rows and number of columns.\n    *\n    */\n   constructor (values, nrows, ncols) {\n      if (!ArrayBuffer.isView(values) || values.constructor !== Matrix.valuesConstructor) {\n         throw Error('Matrix: parameter \"values\" must be Float64Array.')\n      }\n\n      if (nrows === 0 || ncols === 0) {\n         throw Error('Matrix: can not create matrix with zero rows or columns.')\n      }\n\n      if (values.length !== nrows * ncols) {\n         throw Error('Matrix: number elements in \"values\" is not equal to \"nrows\" x \"ncols\".')\n      }\n\n      this.v = values;\n      this.nrows = nrows\n      this.ncols = ncols;\n   }\n\n\n   /**\n    * Compute inverse of the matrix.\n    *\n    * @returns inverse matrix.\n    *\n    */\n   inv() {\n\n      if (this.nrows !== this.ncols) {\n         throw Error('inv: only squared matrices can be inverted.');\n      }\n\n      const n = this.ncols;\n\n      if (this.isuppertriangular()) {\n\n         if (this.islowertriangular()) {\n            // it means diagonal\n            return Matrix.diagm(this.diag().apply(v => Math.abs(v) > Number.EPSILON ? 1 / v : x));\n         }\n\n         // prepare matrices - we will transpose X to work with columns instead of rows\n         const I = Matrix.eye(n);\n         const Yt = Matrix.eye(n);\n         const Xt = this.t();\n\n         // solve for the last column\n         const s = Xt.v[(n - 1) * n + (n - 1)];\n         const c = n - 1;\n         for (let r = 0; r < n; r++) {\n            Yt.v[c * n + r] = I.v[c * n + r] / s;\n         }\n\n         // do backward substitution\n         for (let c = n - 2; c >= 0; c--) {\n            let s = I.getcolumn(c + 1);\n            const xc = Xt.getcolref(c + 1);\n            for (let r = c + 1; r < n; r++ ) {\n               const yc = Yt.getcolumn(r + 1);\n               s = s.subtract(yc.mult(xc[r]));\n            }\n            Yt.v.set(s.divide(xc[c]).v, c * n);\n         }\n\n         return Yt.t()\n      }\n\n\n      if (this.islowertriangular()) {\n\n         // check if diagonal elements are not zeros\n         const d = this.diag();\n         if (prod(d) < Number.EPSILON) {\n            throw Error('inv: the matrix is not invertible.');\n         }\n\n         // prepare matrices - we will transpose X to work with columns instead of rows\n         const I = Matrix.eye(n);\n         const Yt = Matrix.eye(n);\n         const Xt = this.t();\n\n         // solve for the first column\n         const c = 0;\n         const s = Xt.v[0];\n         for (let r = 0; r < n; r++) {\n            Yt.v[c * n + r] = I.v[c * n + r] / s;\n         }\n\n         // do forward substitution\n         for (let c = 1; c < n; c++) {\n            let s = I.getcolumn(c + 1);\n            const xc = Xt.getcolref(c + 1);\n            for (let r = 0; r < c; r++ ) {\n               const yc = Yt.getcolumn(r + 1);\n               s = s.subtract(yc.mult(xc[r]));\n            }\n            Yt.v.set(s.divide(xc[c]).v, c * n);\n         }\n\n         return Yt.t()\n      }\n\n      // invert matrix using QR transformation\n      const r = qr(this);\n      if (!r.R.isuppertriangular()) {\n         throw Error('inv: QR decomposition of the matrix returned incorrect result.');\n      }\n\n      return r.R.inv().dot(r.Q.t());\n   }\n\n\n   /**\n    * Check if matrix is lower triangular.\n    *\n    * @returns {boolean} true if matrix is lower triangular, false otherwise.\n    */\n   islowertriangular() {\n\n      if (this.nrows !== this.ncols) return false;\n      for (let j = 1; j < this.ncols; j++) {\n         for (let i = 0; i < j; i++) {\n            if (Math.abs(this.v[j * this.nrows + i]) > Matrix.TOLERANCE) return false;\n         }\n      }\n\n      return true;\n   }\n\n\n   /**\n    * Check if matrix is upper triangular.\n    *\n    * @returns {boolean} true if matrix is upper triangular, false otherwise.\n    */\n   isuppertriangular() {\n\n      if (this.nrows !== this.ncols) return false;\n\n      for (let j = 0; j < this.ncols; j++) {\n         for (let i = j + 1; i < this.nrows; i++) {\n            if (Math.abs(this.v[j * this.nrows + i]) > Matrix.TOLERANCE) return false;\n         }\n      }\n\n      return true;\n   }\n\n\n   /**\n    * Return vector with diagonal elements of matrix.\n    *\n    * @returns {Vector} vector with diagonal elements.\n    *\n    */\n   diag() {\n\n      const n = Math.min(this.nrows, this.ncols);\n      const out = new Float64Array(n);\n      for (let rc = 0; rc < n; rc++) {\n         out[rc] = this.getcolref(rc + 1)[rc];\n      }\n\n      return new Vector(out);\n   }\n\n\n   /**\n    * Transpose the matrix.\n    *\n    * @returns {Matrix} transposed matrix.\n    *\n    */\n   t() {\n\n      const ncols_out = this.nrows;\n      const nrows_out = this.ncols;\n      const out = new Matrix.valuesConstructor(this.v.length);\n\n      if (this.ncols < this.nrows) {\n         for(let i = 0; i < this.ncols; i++) {\n            const x = this.v.subarray(i * this.nrows, (i + 1) * this.nrows)\n            for(let j = 0; j < this.nrows; j++) {\n               out[j * nrows_out + i] = x[j];\n            }\n         }\n\n         return new Matrix(out, nrows_out, ncols_out);\n      }\n\n      for(let j = 0; j < this.nrows; j++) {\n         const outx = out.subarray(j * nrows_out, (j + 1) * nrows_out)\n         for(let i = 0; i < this.ncols; i++) {\n            outx[i] = this.v[i * this.nrows + j];\n         }\n      }\n\n      return new Matrix(out, nrows_out, ncols_out);\n   }\n\n\n   /**\n    * Compute a dot product of the matrix with vector or another matrix.\n    *\n    * @param {Vector|Matrix} X - a vector or a matrix to compute a dot product with.\n    *\n    * @returns {Matrix} result of the dot product.\n    *\n    */\n   dot(X) {\n\n      if (isvector(X)) {\n         return new Matrix(_dot(this.v, X.v, this.nrows, this.ncols, X.length, 1), this.nrows, 1);\n      }\n\n      if (ismatrix(X)) {\n         return new Matrix(_dot(this.v, X.v, this.nrows, this.ncols, X.nrows, X.ncols), this.nrows, X.ncols);\n      }\n\n      throw Error(\"dot: argument 'X' must be a matrix or a vector.\");\n   }\n\n   /**\n    * Does mathematical operation between the matrix and another matrix, a vector or a number.\n    *\n    * @param {number|Vector|Matrix} x - a vector or a number to operate with.\n    * @param {function} fun - function to apply.\n    * @param {number} dims - if 'x' is a vector which dimension applies it to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   op(X, fun, dims) {\n\n      if (ismatrix(X)) {\n         return new Matrix(_opvv(this.v, X.v, fun), this.nrows, this.ncols);\n      }\n\n      if (isnumber(X)) {\n         return new Matrix(_opvn(this.v, X, fun), this.nrows, this.ncols);\n      }\n\n      if (!isvector(X)) {\n         throw new Error('op: argument \"x\" must be a matrix, a vector or a number.');\n      }\n\n      if (dims === undefined) {\n         dims = X.length === this.ncols ? 2 : 1;\n      }\n\n      if (dims === 2 && X.length === this.ncols) {\n\n         const out = new Matrix.valuesConstructor(this.v.length);\n         for (let c = 0; c < this.ncols; c++) {\n            out.set(_opvn(this.getcolref(c + 1), X.v[c], fun), c * this.nrows);\n         }\n\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n\n      if (dims === 1 && X.length === this.nrows) {\n\n         const out = new Matrix.valuesConstructor(this.v.length);\n         for (let c = 0; c < this.ncols; c++) {\n            out.set(_opvv(this.getcolref(c + 1), X.v, fun), c * this.nrows);\n         }\n\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n\n      throw new Error('op: length of vector \"X\" does not match number of rows nor number of columns of the maytrix.');\n\n   }\n\n\n   /**\n    * Add a number or values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to sum the values with.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   add(X) {\n      return this.op(X, (a, b) => a + b);\n   }\n\n   /**\n    * Subtract a number or values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to subtract the values of.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   subtract(X) {\n      return this.op(X, (a, b) => a - b);\n   }\n\n\n   /**\n    * Multiply to a number or to values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to multiply the values to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   mult(X) {\n      return this.op(X, (a, b) => a * b);\n   }\n\n\n   /**\n    * Divide to a number or to values from another matrix or vector.\n    *\n    * @param {number|Vector|Matrix} X - a matrix, a vector or a number to divide the values to.\n    *\n    * @returns {Matrix} result of operation.\n    *\n    */\n   divide(X) {\n      return this.op(X, (a, b) => a / b);\n   }\n\n\n   /**\n    * Applies a function to elements of the matrix.\n    * @param {function} fun - function to apply (should return single value).\n    * @param {number} dims - which elements to apply the function to (0 - every, 1 - rows, 2 - columns).\n    *\n    * @returns {Vector|Matrix} - result of applying the function (either array with one value for each\n    * row/column or another Matrix with transformed values).\n    */\n   apply(fun, dims) {\n\n      // by default function is applied to columns\n      if (dims === undefined) {\n         dims = 2;\n      }\n\n      // columns\n      if (dims == 2) {\n         const n = this.ncols;\n         const out = new Matrix.valuesConstructor(n);\n         for (let i = 0; i < n; i++) {\n            out[i] = fun(this.getcolref(i + 1));\n         }\n         return new Vector(out);\n      }\n\n      // rows\n      if (dims == 1) {\n         return this.t().apply(fun, 2);\n      }\n\n      // individual values\n      if (dims == 0) {\n         const n = this.v.length;\n         const out = new Matrix.valuesConstructor(n);\n         for (let i = 0; i < n; i++) {\n            out[i] = fun(this.v[i]);\n         }\n         return new Matrix(out, this.nrows, this.ncols);\n      }\n   }\n\n\n   /**\n    * Replace values of matrix specified by 'rind' and 'cind' with values from another matrix.\n    *\n    * @param {Matrix} - matrix with values to use as replacement.\n    * @param {number | Array | Index} rind - row indices (as number or vector of indices).\n    * @param {number | Array | Index} cind - column indices (as number or vector of indices).\n    *\n    * @description Row and column indices must start from 1. Empty array ([]) tells function to use\n    * all elements (e.g. all rows or all columns). Size of matrix 'X' should correspond to the\n    * number of indices.\n    *\n    * Function does not create a new matrix but changes the current one.\n    *\n    * @returns {Matrix} the matrix with replaced values.\n    *\n    */\n   replace (X, rind, cind) {\n\n      if (typeof(rind) === 'number') {\n         rind = [rind];\n      }\n\n      if (rind.length === 0) {\n         rind = Index.seq(1, this.nrows);\n      }\n\n      if (!isindex(rind)) {\n         rind = index(rind);\n      }\n\n      if (typeof(cind) === 'number') {\n         cind = [cind];\n      }\n\n      if (cind.length === 0) {\n         cind = Index.seq(1, this.ncols);\n      }\n\n      if (!isindex(cind)) {\n         cind = index(cind);\n      }\n\n      const nrows = rind.length;\n      const ncols = cind.length;\n\n      if (min(rind) < 1 || max(rind) > this.nrows) {\n         throw Error('Matrix.replace: row indices do not match the dimension of matrix.');\n      }\n\n      if (min(cind) < 1 || max(cind) > this.ncols) {\n         throw Error('Matrix.replace: column indices do not match the dimension of matrix.');\n      }\n\n      if (X.nrows !== nrows || X.ncols !== ncols) {\n         throw Error('Matrix.replace: dimension of \"X\" does not match the indices.');\n      }\n\n      for (let ic = 0; ic < cind.length; ic++) {\n         const xc = X.getcolref(ic + 1);\n         const cv = (cind.v[ic] - 1) * this.nrows;\n         for (let ir = 0; ir < rind.length; ir++) {\n            const r = rind.v[ir];\n            this.v[cv + r - 1] = xc[ir];\n         }\n      }\n\n      return this;\n   }\n\n\n   /**\n    * Create a deep copy of the matrix.\n    *\n    * @returns {Matrix}\n    *\n    */\n   copy() {\n      return new Matrix(this.v.slice(), this.nrows, this.ncols);\n   }\n\n   /**\n    * Return values from a particular matrix row as vector.\n    *\n    * @param {number} ir - row index (starting from 1).\n    *\n    * @returns {Vector} vector with column values.\n    *\n    */\n   getrow(ir) {\n\n      if (ir < 1 || ir > this.nrows) {\n         throw Error('getrow: wrong row index.');\n      }\n\n      const v = new Vector.valuesConstructor(this.ncols);\n      for (let c = 0; c < this.ncols; c++) {\n         v[c] = this.getcolref(c + 1)[ir - 1];\n      }\n      return new Vector(v);\n   }\n\n\n   /**\n    * Return values from a particular matrix column as vector.\n    *\n    * @param {number} ic - column index (starting from 1).\n    *\n    * @returns {Vector} vector with column values.\n    *\n    */\n   getcolumn(ic) {\n\n      if (ic < 1 || ic > this.ncols) {\n         throw Error('getcolumn: wrong column index.');\n      }\n\n      return new Vector(this.v.slice((ic - 1) * this.nrows, ic * this.nrows));\n   }\n\n\n   /**\n    * Return a reference (not copy) to values of a particular matrix column.\n    *\n    * @param {number} ic - index of column (starting from 1).\n    *\n    * @returns {Float64Array} - reference to the column values as typed array.\n    *\n    */\n   getcolref(ic) {\n      return this.v.subarray((ic - 1) * this.nrows, ic * this.nrows);\n   }\n\n\n   /**\n    * Create a subset of a matrix using row and column indices.\n    *\n    * @param {number|Index} rind - row indices to select (as Index or a single number).\n    * @param {number|Index} cind - column indices to select (as Index or a single number).\n    *\n    * @description Row and column indices must start from 1. If 'rind' or 'cind' are null,\n    * all items from this direction will be taken.\n    *\n    * @returns {Matrix} the subset of the matrix.\n    *\n    */\n   subset(rind, cind) {\n\n      if (typeof(rind) === 'number') {\n         rind = index([rind]);\n      }\n\n      if (typeof(cind) === 'number') {\n         cind = index([cind]);\n      }\n\n      if (Array.isArray(rind)) {\n         rind = rind.length === 0 ? null : index(rind);\n      }\n\n      if (Array.isArray(cind)) {\n         cind = cind.length === 0 ? null : index(cind);\n      }\n\n      if (rind !== null && !isindex(rind)) {\n         throw Error('subset: parameter \"rind\" can be a number, null or instance of Index.');\n      }\n\n      if (cind !== null && !isindex(cind)) {\n         throw Error('subset: parameter \"cind\" can be a number, null or instance of Index.');\n      }\n\n      if (rind !== null && (min(rind) < 1 || max(rind) > this.nrows)) {\n         throw Error('subset: parameter \"rind\" does not match size of the matrix.');\n      }\n\n      if (cind !== null && (min(cind) < 1 || max(cind) > this.ncols)) {\n         throw Error('subset: parameter \"cind\" does not match size of the matrix.');\n      }\n\n      // select all rows and a subset of columns\n      if (rind === null) {\n\n         const ncols_out = cind.length;\n         const nrows_out = this.nrows;\n         const out = new Matrix.valuesConstructor(nrows_out * ncols_out);\n         for (let ic = 0; ic < cind.length; ic++) {\n            out.set(this.v.slice((cind.v[ic] - 1) * this.nrows, cind.v[ic] * this.nrows), ic * this.nrows);\n         }\n\n         return new Matrix(out, nrows_out, ncols_out);\n      }\n\n      // select all columns and a subset of rows\n      if (cind === null || cind === undefined) {\n         return this.t().subset(cind, rind).t();\n      }\n\n      // select specific columns and rows\n      const nrows_out = rind.length;\n      const ncols_out = cind.length;\n      const out = new Matrix.valuesConstructor(nrows_out * ncols_out);\n      let xc_out = new Matrix.valuesConstructor(nrows_out)\n      for (let ic = 0; ic < ncols_out; ic++) {\n\n         // take the a whole column from matrix and pick row values from it\n         const xc = this.v.subarray((cind.v[ic] - 1) * this.nrows, (cind.v[ic]) * this.nrows);\n         for (let ir = 0; ir < nrows_out; ir++) {\n            xc_out[ir] = xc[rind.v[ir] - 1];\n         }\n         out.set(xc_out, ic * nrows_out);\n      }\n\n      return new Matrix(out, nrows_out, ncols_out);\n   }\n\n\n   /**\n    * Convert matrix to a text representation for showing the values in nice way.\n    *\n    * @param {number} ndec - number of decimals to round the values to.\n    *\n    * @returns {string} the string with matrix representation.\n    *\n    * TODO: 1) add workaround for large matrices (...)\n    *\n    */\n   toString (ndec) {\n\n      function leftpad(x, n) {\n         return  \" \".repeat(n - x.length) + x;\n      }\n\n      if (ndec === undefined) {\n         ndec = 2;\n      }\n\n      const nvar = this.ncols;\n      const ndigits = Math.round(Math.abs(Math.log10(max(this.v)))) + ndec + 3;\n\n      let str = \"\";\n      const Xt = this.t();\n      for (let c = 1; c <= Xt.ncols; c++) {\n         str += Array.from(Xt.getcolref(c)).map(v => leftpad(v.toFixed(ndec), ndigits)).join(\" \") + \"\\n\"\n      }\n\n      return str;\n   }\n\n   /**\n    * Convert matrix values to a string which can be downloaded as CSV file.\n    *\n    * @param {string} sep - symbol to use for separation of values (by default \",\").\n    * @param {string} dec - symbold to use for separation of decimals (by default \".\").\n    * @param {Array} header - optional array of header elements (column names).\n    * @param {Array} labels - optional array of labels (row names).\n    *\n    * @returns {string} - string with CSV data.\n    */\n   toCSV(sep, dec, header, labels) {\n\n      // set default separator symbol\n      if (sep === undefined) {\n         sep = \",\";\n      }\n\n      // set default decimals separator symbol\n      if (dec === undefined) {\n         dec = sep === \";\" ? \",\" : \".\"\n      }\n\n      const hasLabels = labels !== undefined && labels !== null && labels.length > 0;\n      const hasHeader = header !== undefined && header !== null && header.length > 0;\n\n      if (hasLabels && labels.length !== this.nrows) {\n         throw Error (\"Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.\");\n      }\n\n      if (hasHeader && header.length !== this.ncols + (hasLabels ? 1 : 0)) {\n         throw Error (\"Matrix.toCSV: number of elements in header must match number of columns in the matrix.\");\n      }\n\n      // transpose to make it faster\n      const m = this.t();\n      let rows = hasHeader ? header.join(sep) + \"\\n\" : \"\";\n      for (let c = 1; c <= m.ncols; c++) {\n         rows = rows + (hasLabels ? labels[c - 1] + sep : \"\") + m.getcolref(c).join(sep) + \"\\n\";\n      }\n\n      // change decimal separator if it is not a dot\n      rows = rows.replace(/\\./g, dec);\n\n      return rows;\n   }\n\n   // Static methods //\n\n   /**\n    * Create a matrix with random values from normal distribution.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    * @param {number} [mu=0] - mean (expected) value.\n    * @param {number} [sigma=1] - standard deviation.\n    *\n    * @returns {Vector} matrix with values.\n    *\n    */\n   static randn(nrows, ncols, mu, sigma) {\n      return reshape(rnorm(nrows * ncols, mu, sigma), nrows, ncols);\n   }\n\n\n   /**\n    * Create a matrix with random values from uniform distribution [a, b].\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    * @param {number} [a=0] - smallest possible value.\n    * @param {number} [b=1] - largest possible value.\n    *\n    * @returns {Vector} matrix with values.\n    *\n    */\n   static rand(nrows, ncols, a, b) {\n      return reshape(runif(nrows * ncols, a, b), nrows, ncols);\n   }\n\n\n   /**\n    * Create an identity matrix.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns (if undefined, will be same as 'nrows').\n    *\n    * @returns {Matrix} the matrix.\n    *\n    */\n   static eye(nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      const out = new Float64Array(nrows * ncols);\n      for (let rc = 0; rc < Math.min(nrows, ncols); rc++) {\n         out[rc * nrows + rc] = 1;\n      }\n\n      return new Matrix(out, nrows, ncols);\n   }\n\n\n   /**\n    * Create a diagonal matrix based on vector with values.\n    *\n    * @param {Vector} x - vector with values.\n    *\n    * @returns {Matrix} the matrix.\n    *\n    */\n   static diagm(x) {\n\n      if (!isvector(x)) {\n         throw Error('diagm: the argument \"x\" must be a Vector.');\n      }\n\n      const n = x.length;\n      const out = new Float64Array(n * n);\n      for (let rc = 0; rc < n; rc++) {\n         out[rc * n + rc] = x.v[rc];\n      }\n\n      return new Matrix(out, n, n);\n   }\n\n\n   /**\n    * Create a Matrix object filled with zeros.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static zeros(nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      return new Matrix(new Float64Array(nrows * ncols), nrows, ncols);\n   }\n\n\n   /**\n    * Create a Matrix object filled with ones.\n    *\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static ones(nrows, ncols) {\n      return Matrix.fill(1, nrows, ncols);\n   }\n\n   /**\n    * Create a Matrix object filled with a manual value.\n    *\n    * @param {number} v - value to fill the matrix with.\n    * @param {number} nrows - number of rows.\n    * @param {number} ncols - number of columns.\n    *\n    * @returns {Matrix} the generated matrix.\n    *\n    */\n   static fill(v, nrows, ncols) {\n\n      if (ncols === undefined) {\n         ncols = nrows;\n      }\n\n      const out = new Float64Array(nrows * ncols);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Matrix(out, nrows, ncols);\n   }\n\n\n   /**\n    * Create a matrix by applying function to all possible pairs of values from two vectors.\n    *\n    * @param {Array|Vector} x - vector with values.\n    * @param {Array|Vector} y - vector with values.\n    * @param {function} fun - function of two arguments which returns a single value.\n    *\n    * @returns {Matrix}\n    */\n   static outer(x, y, fun) {\n\n      if (Array.isArray(x)) {\n         x = vector(x);\n      }\n\n      if (Array.isArray(y)) {\n         y = vector(y);\n      }\n\n      if (!isvector(x)) {\n         throw Error('Matrix.outer: parameter \"x\" must be a vector or an array with numbers.');\n      }\n\n      if (!isvector(y)) {\n         throw Error('Matrix.outer: parameter \"y\" must be a vector or an array with numbers.');\n      }\n\n      const out = Matrix.zeros(x.length, y.length);\n      for (let c = 0; c < y.length; c++) {\n         const yv = y.v[c]\n         const outc = out.getcolref(c + 1);\n         for (let r = 0; r < x.length; r++) {\n            outc[r] = fun(x.v[r], yv);\n         }\n      }\n\n      return out;\n   }\n\n\n   /**\n    * Parse string with data from a CSV file and create a matrix with values.\n    *\n    * @param {string} strData - string with all data from the CSV file.\n    * @param {string} sep - symbols used for separation of values (by default \",\").\n    * @param {boolean} hasHeader - logical, if first row must be treated as header or not.\n    * @param {boolean} hasLabels - logical, if first column must be treated as object labels or not.\n    *\n    *\n    * @returns {Object} JSON containing matrix with parsed values, header, values and decimal separators.\n    */\n   static parseCSV(strData, sep, hasHeader, hasLabels) {\n\n\n      // function which returns true if at least one value in array can not be parsed to float\n      function hasNaN(vec) {\n         return vec.some(v => Number.isNaN(Number.parseFloat(v.trim())));\n      }\n\n      // set default separator symbol\n      if (sep === undefined) {\n         sep = \",\";\n      }\n\n      // setup decimal separator\n      const dec = sep === \";\" ? \",\" : \".\";\n\n      // remove BOM symbol if any\n      strData = strData.replace(/^\\uFEFF/gm, \"\").replace(/^\\u00EF?\\u00BB\\u00BF/gm,\"\");\n\n      // remove \\r symbols\n      strData = strData.replace(/\\r/gm, \"\");\n\n      // split string with data values into array of rows\n      let rows = strData.split(/\\n/);\n\n      // check if the first row contains header\n      let header = [];\n      let startRow = 0;\n      const firstRow = rows[0].split(sep);\n      if (hasHeader || (hasHeader === undefined && hasNaN(firstRow))) {\n         header = firstRow;\n         startRow = 1;\n      }\n\n      // filter empty rows out\n      rows = rows.filter(v => v.trim().length > 1);\n\n      // check if first column contains labels\n      let labels = [];\n      let startColumn = 0;\n      if (hasLabels) {\n         startColumn = 1;\n      }\n\n      // number of rows and columns in future matrix\n      const nrows = rows.length - startRow;\n      const ncols = firstRow.length - startColumn;\n\n\n      if (nrows < 1) {\n         throw Error(\"Data file should contain at least 1 row with values.\");\n      }\n\n      if (ncols < 1) {\n         throw Error(\"Data file should contain at least 1 column with values.\");\n      }\n\n      // set rows of data as columns of matrix - it is faster\n      const data = Matrix.zeros(ncols, nrows);\n\n      // find symbol used for decimals separator\n      for (let r = startRow; r < nrows + startRow; r++) {\n\n         // parsing: trim spaces and replace non-numbers with dot (.)\n         const rowValuesAll = rows[r].split(sep)\n\n         let rowValues;\n         if (hasLabels) {\n            labels[r - startRow] = rowValuesAll[0];\n            rowValues = rowValuesAll.slice(1).map(v => Number.parseFloat(v.trim().replace(dec, \".\")));\n         } else {\n            rowValues = rowValuesAll.map(v => Number.parseFloat(v.trim().replace(dec, \".\")));\n         }\n\n         if (rowValues.some(v => Number.isNaN(v))) {\n            throw Error(\"Some of the values can not be converted to numbers, check your CSV file and try again.\");\n         }\n\n         if (rowValues.length != ncols) {\n            throw Error(\"Wrong number of values in row #\" + r);\n         }\n\n         data.v.set(new Float64Array(rowValues), (r - startRow) * ncols);\n      }\n\n      return {values: data.t(), header: header, labels: labels, sep:sep, dec:dec};\n   }\n\n}\n\n\n/**\n * Return 'true' of 'x' is a Vector object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isvector(x) {\n   return x && x.constructor === Vector;\n}\n\n\n/**\n * Create a Vector object from array of values.\n *\n * @param {number[]} values - array with values.\n *\n * @returns {Vector} the vector.\n *\n */\nexport function vector(values) {\n   return new Vector(new Float64Array(values));\n}\n\n\n/** Class representing a vector */\nexport class Vector {\n\n   static valuesConstructor = Float64Array;\n\n   /**\n    * Constructor for a Vector object.\n    *\n    * @param {Float64Array} values - typed array with values.\n    *\n    * @returns {Vector} a Vector object (see description).\n    * @constructor\n    *\n    * @description  Create a vector of values. Vector is represented by an object with two\n    * fields. Field 'v' is a typed Float64Array with values. The second field, 'length', is\n    * the length of the vector.\n    *\n    */\n   constructor(values) {\n\n      if (!ArrayBuffer.isView(values) || values.constructor !== Float64Array) {\n         throw Error('Vector: parameter \"values\" must be Float64Array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n   }\n\n   /**\n    * Returns a vector of indices for values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a vector of indices.\n    */\n   which(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Returns a subset of values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Vector} a subset.\n    */\n   filter(fun) {\n      const out = new Vector.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = this.v[i];\n            n = n + 1;\n         }\n      }\n\n      return new Vector(out.subarray(0, n));\n   }\n\n\n   /**\n    * Shuffles values in vector using FisherYates algorithm.\n    *\n    * @returns {Vector} vector with shuffled values.\n    */\n   shuffle() {\n      return new Vector(_shuffle(this.v));\n   }\n\n\n   /**\n    * Sorts values in a vector.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Vector} vector with sorted values\n    *\n    */\n   sort(decreasing) {\n      return new Vector(_sort(this.v, decreasing));\n   }\n\n   /**\n    * Sorts values in a vector and return indices of sorted values.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted values\n    *\n    */\n   sortind(decreasing) {\n      return new Index(_sortind(this.v, decreasing));\n   }\n\n\n   /**\n    * Replicate a vector 'n' times.\n    *\n    * @param {number} n - how many times the vector must be replicated.\n    *\n    * @returns {Vector} a vector with replicated values.\n    *\n    */\n   rep(n) {\n      return _rep(this, n);\n   }\n\n\n   /**\n    * Replicate each value in the vector 'n' times.\n    *\n    * @param {number} n - how many times every value must be replicated.\n    *\n    * @returns {Vector} a vector with replicated values.\n    *\n    */\n   repeach(n) {\n      return _repeach(this, n);\n   }\n\n\n   /**\n    * Replace values of vectors specified by 'ind' with values from another vector.\n    *\n    * @param {Vector} - vector with values to use as replacement.\n    * @param {number | Array | Index} ind - indices (as number or vector of indices).\n    *\n    * @description Indices must start from 1. Empty array ([]) tells function to use\n    * all elements. Length of vector 'x' should correspond to the\n    * number of indices.\n    *\n    * Function does not create a new vector but changes the current one.\n    *\n    * @returns {Vector} the vector with replaced values.\n    *\n    */\n   replace (x, ind) {\n\n      if (typeof(ind) === 'number') {\n         ind = [ind];\n      }\n\n      if (ind.length === 0) {\n         ind = Index.seq(1, this.length);\n      }\n\n      if (!isindex(ind)) {\n         ind = index(ind);\n      }\n\n      const n = ind.length;\n\n      if (min(ind) < 1 || max(ind) > this.length) {\n         throw Error('Vector.replace: indices do not match the lenght of the vector.');\n      }\n\n      if (x.length !== n) {\n         throw Error('Vector.replace: length of \"x\" does not match the indices.');\n      }\n\n      for (let i = 0; i < ind.length; i++) {\n         const r = ind.v[i];\n         this.v[r - 1] = x.v[i];\n      }\n\n      return this;\n   }\n\n\n   /**\n    * Create a subset of a vector using vector with indices.\n    *\n    * @param {number|Array|Index} ind - single index or vector with indices (must start from 1, not 0).\n    *\n    * @returns {Vector} a subset.\n    */\n   subset(ind) {\n\n      if (typeof(ind) === 'number') {\n         ind = index([ind]);\n      }\n\n      if (Array.isArray(ind)) {\n         ind = typeof(ind[0]) === 'boolean' ? Index.bool2ind(ind) : index(ind);\n      }\n\n      if (!isindex(ind)) {\n         throw Error('subset: parameter \"ind\" must be number, array of instance of class Index.');\n      }\n\n      const n = ind.length;\n      const out = Vector.zeros(n);\n\n      for (let i = 0; i < n; i++) {\n\n         if (ind.v[i] < 1) {\n            throw Error('subset: indices must start with 1 (not 0).');\n         }\n\n         if (ind.v[i] > this.length) {\n            throw Error('subset: index exceeds the length of the vector.');\n         }\n\n         out.v[i] = this.v[ind.v[i] - 1];\n      }\n\n      return out;\n   }\n\n\n   /**\n    * Create a subset of a vector values which are located between positions 'start' and 'end' (both included).\n    *\n    * @param {number} start - index of value to start (must start from 1, not 0).\n    * @param {number} end - index of value to end.\n    *\n    * @returns {Vector} a subset.\n    */\n   slice(start, end) {\n\n      if (start === null) {\n         start = 1;\n      }\n\n      if (end === null || end === undefined) {\n         end = this.length;\n      }\n\n      if (start < 1) {\n         throw Error('slice: indices must start with 1 (not 0).');\n      }\n\n      if (end > this.length) {\n         throw Error('slice: index exceeds the length of the vector.');\n      }\n\n      if (end < start) {\n         throw Error('slice: \"end\" must not be smaller than \"start\".');\n      }\n\n      return new Vector(this.v.slice(start - 1, end));\n   }\n\n\n   /**\n    * Make a deep copy of the vector.\n    */\n   copy() {\n      return new Vector(this.v.slice());\n   }\n\n\n   /**\n    * Compute a dot product with another vector.\n    *\n    * @param {Vector} x - a vector.\n    *\n    * @returns {number} result of the product.\n    *\n    */\n   dot(x) {\n\n      if (x === undefined) {\n         x = this;\n      }\n\n      return _dot(this.v, x.v, 1, this.length, x.length, 1)[0];\n   }\n\n\n   /**\n    * Does mathematical operation between vector values and either values from another vector or a number.\n    *\n    * @param {number|Vector} x - a vector or a number to operate with.\n    * @param {function} fun - function to apply.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   op(x, fun) {\n      if (isvector(x)) {\n         return new Vector(_opvv(this.v, x.v, fun));\n      }\n\n      if (isnumber(x)) {\n         return new Vector(_opvn(this.v, x, fun));\n      }\n\n      throw new Error('op: argument \"x\" must be a vector or a number.');\n   }\n\n\n   /**\n    * Add a number or values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to sum the values with.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   add(x) {\n      return this.op(x, (a, b) => a + b);\n   }\n\n\n   /**\n    * Subtract a number or values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to subtract the values of.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   subtract(x) {\n      return this.op(x, (a, b) => a - b);\n   }\n\n\n   /**\n    * Multiply to a number or to values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to multiply the values to.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   mult(x) {\n      return this.op(x, (a, b) => a * b);\n   }\n\n\n   /**\n    * Divide to a number or to values from another vector.\n    *\n    * @param {number|Vector} x - a vector or a number to divide the values to.\n    *\n    * @returns {Vector} result of operation.\n    *\n    */\n   divide(x) {\n      return this.op(x, (a, b) => a / b);\n   }\n\n\n   /**\n    * Apply a function to each value of the vector.\n    *\n    * @param {function} fun - function to apply (should take one value and return one value).\n    *\n    * @returns {Vector} the transformed vector.\n    */\n   apply(fun) {\n\n      const n = this.v.length;\n      const out = Vector.zeros(n);\n      for (let i = 0; i < n; i++) {\n         out.v[i] = fun(this.v[i]);\n      }\n\n      return out;\n   }\n\n\n   // Static methods //\n\n\n   /**\n    * Concatenates numbers, arrays and vectors into a single vector.\n    *\n    * @param  {...any} args - numbers, arrays or/and vectors.\n    *\n    * @returns {Vector}\n    *\n    */\n   static c(...args) {\n\n      if (args.length === 1) return args[0];\n\n      const l = args.reduce( (acc, cur) => acc + (typeof(cur) === 'number' ? 1 : cur.length), 0);\n      const out = new Vector.valuesConstructor(l);\n\n      let start = 0;\n      for (const a of args) {\n\n         if (typeof(a) === 'number') {\n            out[start] = a;\n            start += 1;\n         } else {\n            out.set(isvector(a) ? a.v : new Vector.valuesConstructor(a), start);\n            start += typeof(a) === 'number' ? 1 : a.length;\n         }\n      }\n\n      return new Vector(out);\n   }\n\n\n   /**\n    * Generate sequence of values.\n    *\n    * @param {number} start - first value.\n    * @param {number} end - last value.\n    * @param {number} [by=1] - increment between values.\n    *\n    * @returns {Vector} vector with sequence values.\n    *\n    */\n   static seq(start, end, by) {\n      return _seq(start, end, by, Vector)\n   }\n\n\n   /**\n    * Create a vector with random values from normal distribution.\n    *\n    * @param {number} length - number of values.\n    * @param {number} [mu=0] - mean (expected) value.\n    * @param {number} [sigma=1] - standard deviation.\n    *\n    * @returns {Vector} vector with values.\n    *\n    */\n   static randn(length, mu, sigma) {\n      return rnorm(length, mu, sigma);\n   }\n\n\n   /**\n    * Create a vector with random values from uniform distribution [a, b].\n    *\n    * @param {number} length - number of values.\n    * @param {number} [a=0] - smallest possible value.\n    * @param {number} [b=1] - largest possible value.\n    *\n    * @returns {Vector} vector with values.\n    *\n    */\n   static rand(length, a, b) {\n      return runif(length, a, b);\n   }\n\n\n   /**\n    * Create a Vector object filled with zeros.\n    *\n    * @param {number} n - length of the vector\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static zeros(n) {\n      return new Vector(new Vector.valuesConstructor(n));\n   }\n\n\n   /**\n    * Create a Vector object filled with ones.\n    *\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static ones(n) {\n      return Vector.fill(1, n);\n   }\n\n\n  /**\n    * Create a Vector object filled with a repeated value.\n    *\n    * @param {number} v - value to fill the vector with.\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector.\n    *\n    */\n   static fill(v, n) {\n\n      const out = new Vector.valuesConstructor(n);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Vector(out);\n   }\n\n}\n\n\n/**\n * Return 'true' of 'x' is an Index object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isindex(x) {\n   return x.constructor === Index;\n}\n\n\n/**\n * Create an Index object from array of values.\n *\n * @param {number[]} values - array with values.\n *\n * @returns {Index} the vector.\n *\n */\nexport function index(values) {\n   return new Index(new Int32Array(values));\n}\n\n\n/** Class representing a vector with indices */\nexport class Index {\n\n   static valuesConstructor = Int32Array;\n\n   /**\n    * Constructor for an Index object.\n    *\n    * @param {Int32Array} values - typed array with index values.\n    *\n    * @returns {Index} an Index object (see description).\n    * @constructor\n    *\n    * @description  Create a vector of values to be used as indices (e.g. for subsetting,\n    * counting, etc.). Index is represented by an object with two fields. Field 'v' is a typed\n    * Int32Array with index values. The second field, 'length', is the length of the vector.\n    *\n    */\n   constructor(values) {\n\n      if (!ArrayBuffer.isView(values) || values.constructor !== Int32Array) {\n         throw Error('Index: parameter \"values\" must be Int32Array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n   }\n\n\n   /**\n    * Returns a vector of indices for values for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a vector of indices.\n    */\n   which(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Returns a subset of indices for which function fun returns true.\n    *\n    * @param {function} fun - function with two arguments (value and its index).\n    *\n    * @returns {Index} a subset.\n    */\n   filter(fun) {\n      const out = new Index.valuesConstructor(this.length);\n      let n = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (fun(this.v[i], i)) {\n            out[n] = this.v[i];\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n\n\n   /**\n    * Shuffle indices.\n    *\n    * @returns {Index} vector with shuffled indices.\n    */\n   shuffle() {\n      return new Index(_shuffle(this.v));\n   }\n\n\n   /**\n    * Sorts indices.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted indices.\n    *\n    */\n   sort(decreasing) {\n      return new Index(_sort(this.v, decreasing));\n   }\n\n   /**\n    * Sorts indices and return indices of sorted values.\n    *\n    * @param {boolean} decreasing - if true, values will be sorted in decreasing order, otherwise in increasing.\n    *\n    * @returns {Index} vector with sorted indices.\n    *\n    */\n   sortind(decreasing) {\n      return new Index(_sortind(this.v, decreasing));\n   }\n\n   /**\n    * Replicate the index object 'n' times.\n    *\n    * @param {number} n - how many times the index must be replicated.\n    *\n    * @returns {Index} index with replicated values.\n    *\n    */\n   rep(n) {\n      return _rep(this, n);\n   }\n\n\n   /**\n    * Replicate each index in the index 'n' times.\n    *\n    * @param {number} n - how many times every value must be replicated.\n    *\n    * @returns {Index} an index object with replicated values.\n    *\n    */\n   repeach(n) {\n      return _repeach(this, n);\n   }\n\n   /**\n    * Create a subset of a index using another vector with indices.\n    *\n    * @param {number|Array|Index} ind - single index or vector with indices (must start from 1, not 0).\n    *\n    * @returns {Index} a subset.\n    */\n   subset(ind) {\n\n     if (typeof(ind) === 'number') {\n         ind = index([ind]);\n      }\n\n      if (Array.isArray(ind)) {\n         ind = index(ind);\n      }\n\n      if (!isindex(ind)) {\n         throw Error('subset: parameter \"ind\" must be number, array of instance of class Index.');\n      }\n\n      const n = ind.length;\n      const out = new Index.valuesConstructor(n);\n\n      for (let i = 0; i < n; i++) {\n\n         if (ind.v[i] < 1) {\n            throw Error('subset: indices must start with 1 (not 0).');\n         }\n\n         if (ind.v[i] > this.length) {\n            throw Error('subset: index exceeds the length of the vector.');\n         }\n\n         out[i] = this.v[ind.v[i] - 1];\n      }\n\n      return new Index(out);\n   }\n\n\n   /**\n    * Create a subset of a vector of indices which are located between positions 'start' and 'end' (both included).\n    *\n    * @param {number} start - index of value to start (must start from 1, not 0).\n    * @param {number} end - index of value to end.\n    *\n    * @returns {Index} a subset.\n    */\n   slice(start, end) {\n\n      if (start === null) {\n         start = 1;\n      }\n\n      if (end === null || end === undefined) {\n         end = this.length;\n      }\n\n      if (start < 1) {\n         throw Error('slice: indices must start with 1 (not 0).');\n      }\n\n      if (end > this.length) {\n         throw Error('slice: index exceeds the length of the vector.');\n      }\n\n      if (end < start) {\n         throw Error('slice: \"end\" must not be smaller than \"start\".');\n      }\n\n      return new Index(this.v.slice(start - 1, end));\n   }\n\n\n   // Static methods //\n\n   /**\n    * Generate sequence of indices.\n    *\n    * @param {number} start - first value.\n    * @param {number} end - last value.\n    * @param {number} [by=1] - increment between values.\n    *\n    * @returns {Index} object with sequence values.\n    *\n    */\n   static seq(start, end, by) {\n      return _seq(start, end, by, Index);\n   }\n\n\n   /**\n    * Create an Index object filled with ones.\n    *\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Index} the generated vector of indices.\n    *\n    */\n   static ones(n) {\n      return Index.fill(1, n);\n   }\n\n\n  /**\n    * Create an Index object filled with a repeated value.\n    *\n    * @param {number} v - value to fill the index vector with (must be integer).\n    * @param {number} n - length of the vector.\n    *\n    * @returns {Vector} the generated vector of indices.\n    *\n    */\n   static fill(v, n) {\n\n      const out = new Index.valuesConstructor(n);\n      for (let i = 0; i < out.length; i++) {\n         out[i] = v;\n      }\n\n      return new Index(out);\n   }\n\n\n   /**\n    * Convert array of logical values to vector of indices.\n    *\n    * @param {Array} x - array of logical values.\n    *\n    * @returns {Index} vector of indices where x is true.\n    *\n    */\n   static bool2ind(x) {\n\n      let n = 0;\n      const out = new Index.valuesConstructor(x.length);\n\n      for (let i = 0; i < x.length; i++) {\n         if (x[i]) {\n            out[n] = i + 1;\n            n = n + 1;\n         }\n      }\n\n      return new Index(out.subarray(0, n));\n   }\n}\n\n/**\n * Return 'true' of 'x' is an Factor object, 'false' otherwise.\n *\n * @param {any} x - any object or variable.\n *\n * @returns {boolean}\n *\n */\nexport function isfactor(x) {\n   return x.constructor === Factor;\n}\n\n/**\n * Create a factor object from Array with values.\n *\n * @param {Array} x - array with values.\n *\n * @return {Factor} returns instance of Factor object.\n *\n */\nexport function factor(x) {\n   const n = x.length;\n   const values = new Factor.valuesConstructor(n);\n   const labels = [];\n\n   for (let i = 0; i < n; i++) {\n      const j = labels.findIndex(v => v === x[i]);\n      if (j < 0) {\n         // value is new\n         labels.push(x[i])\n         values[i] = labels.length - 1;\n      } else {\n         // value already present\n         values[i] = j;\n      }\n   }\n\n   return new Factor(values, labels)\n}\n\n\n/** Class representing a factor vector with categorical variables */\nexport class Factor {\n\n   static valuesConstructor = Uint8Array;\n\n   /**\n    * Constructor for a Factor object.\n    *\n    * @param {Uint8Array} values - vector with indices for each category item.\n    * @param {Array} labels - array with labels for each category.\n    *\n    * @returns {Factor} class object (see description).\n    * @constructor\n    *\n    */\n   constructor(values, labels) {\n\n      if (values.constructor !== Factor.valuesConstructor) {\n         throw Error('Factor: wrong class for parameter \"values\".')\n      }\n\n      if (values.nrows < 1 || values.ncols < 1) {\n         throw Error('Factor: parameter \"values\" must have at least one row and one column.')\n      }\n\n      if (!labels || !Array.isArray(labels)) {\n         throw Error('Factor: parameter \"labels\" must be an array.')\n      }\n\n      this.v = values;\n      this.length = values.length;\n      this.labels = labels.map(v => v.toString());\n      this.nlevels = this.labels.length;\n   }\n\n   /**\n    * Return vector of indices corresponding to location of a particular category.\n    *\n    * @param {string} value - name (label) of the category to find.\n    *\n    * @returns {Index} vector with indices (starts from 1).\n    */\n   which(value) {\n      const ind = this.labels.findIndex((v, i) => v === value);\n      const out = new Index.valuesConstructor(this.length);\n      let k = 0;\n      for (let i = 0; i < this.length; i++) {\n         if (this.v[i] === ind) {\n            out[k] = i + 1;\n            k += 1;\n         }\n      }\n\n      return new Index(out.slice(0, k))\n   }\n}\n\n\n\n/***********************************************/\n/*    Generic methods                          */\n/***********************************************/\n\n/**\n * Generate sequence of values for vector or index.\n *\n * @param {number} start - first value.\n * @param {number} end - last value.\n * @param {number} [by=1] - increment between values.\n * @param {class} classRef - class reference\n *\n * @returns {Object} object with sequence values.\n *\n */\nfunction _seq(start, end, by, classRef) {\n\n   // by default increment is unit\n   if (by === undefined) by = (start <= end) ? 1 : -1;\n\n   // compute length of sequence\n   const length = Math.floor((end - start) / by) + 1;\n\n   if (length < 1) {\n      throw Error('seq: wrong combination of parameters.');\n   }\n\n   const x = new classRef.valuesConstructor(length);\n   for (let i = 0; i < length; i++) {\n      x[i] = start + i * by;\n   }\n\n   return new classRef(x);\n}\n\n\n/**\n * Replicate object 'n' times.\n *\n * @param {Object} obj - object to replicate (Vector or Index).\n * @param {number} n - how many times the vector must be replicated.\n *\n * @returns {Object} an object with replicated values.\n *\n */\nfunction _rep(obj, n) {\n\n   const l = obj.length * n;\n   const out = new obj.constructor.valuesConstructor(l);\n   for (let i = 1; i <= n; i++) {\n      for (let j = 0; j < obj.length; j++) {\n         out[(i - 1) * obj.length + j] = obj.v[j];\n      }\n   }\n\n   return new obj.constructor(out);\n}\n\n\n/**\n * Replicate each value in the object 'n' times.\n *\n * @param {Object} obj - object to replicate (Vector or Index).\n * @param {number} n - how many times every value must be replicated.\n *\n * @returns {Object} an object with replicated values.\n *\n */\nfunction _repeach(obj, n) {\n\n   if (n < 1 || Math.round(n) !== n) {\n      throw Error('rep: parameter \"n\" must be an integer number > 1.');\n   }\n\n   const l = obj.length * n;\n   const out = new obj.constructor.valuesConstructor(l);\n   for (let j = 0; j < obj.length; j++) {\n      for (let i = 0; i < n; i++) {\n         out[j * n + i] = obj.v[j];\n      }\n   }\n\n   return new obj.constructor(out);\n}\n\n\n/**\n * Does an arithmetic operation for individual values from two arrays.\n *\n * @param {Array|Float64Array} v1 - the first array.\n * @param {Array|Float64Array} v2 - the second array.\n * @param {function} fun - function to use.\n *\n * @description the function must take two numbers and return one.\n *\n * @returns array of the same type as v1 and v2.\n */\nfunction _opvv(v1, v2, fun) {\n\n   if (v1.length !== v2.length) {\n      throw new Error(\"_opvv: arrays sizes do not match.\");\n   }\n\n   if (v1.constructor !== v2.constructor) {\n      throw new Error(\"_opvv: array types do not match.\");\n   }\n\n   const out = new v1.constructor(v1.length);\n   for (let i = 0; i < v1.length; i++) {\n      out[i] = fun(v1[i], v2[i]);\n   }\n\n   return out;\n}\n\n\n\n/**\n * Does an arithmetic operation for individual value from an array and a number.\n *\n * @param {Array|Float64Array} v1 - an array.\n * @param {number} v2 - a number.\n * @param {function} fun - function to use.\n *\n * @description the function must take two numbers and return one.\n *\n * @returns array of the same type as v1.\n */\nfunction _opvn(v1, v2, fun) {\n\n   const out = new v1.constructor(v1.length);\n   for (let i = 0; i < v1.length; i++) {\n      out[i] = fun(v1[i], v2);\n   }\n\n   return out;\n}\n\n\n/**\n * Generic function for taking a dot product of two matrices, X and Y, represented as vectors\n * @param {TypedArray} xv - vector with values from X\n * @param {TypedArray} yv - vector with values from Y\n * @param {number} nrx - number of rows in X\n * @param {number} ncx - number of columns in X\n * @param {number} nry - number of rows in Y\n * @param {number} ncy - number of columns in Y\n *\n * @returns {TypedArray} - vector with result of the product\n */\nexport function _dot(xv, yv, nrx, ncx, nry, ncy) {\n\n   if (ncx !== nry) {\n      throw Error('_dot: matrix dimensions do not much.');\n   }\n\n   // create vector for the product\n   const nrows = nrx;\n   const ncols = ncy;\n   const ninner = ncx;\n   const out = new xv.constructor(nrows * ncols);\n\n   for (let c = 0; c < ncols; c++) {\n      const yc = yv.subarray(c * nry, (c + 1) * nry)\n      const outc = out.subarray(c * nrows, (c + 1) * nrows);\n\n      for (let i = 0; i < ninner; i++) {\n         const yci = yc[i];\n         const xr = xv.subarray(i * nrx, (i + 1) * nrx)\n         for (let r = 0; r < nrows; r++) {\n            outc[r] += xr[r] * yci;\n         }\n      }\n   }\n\n   return out;\n}\n\n\n/**\n * Shuffles values in vector x using FisherYates algorithm.\n *\n * @param {Arrat|TypedArray} x - a vector with values.\n *\n * @returns {Array|TypedArray} ector with shuffled values.\n *\n */\nexport function _shuffle(x) {\n\n  let y = x.slice();\n  let n = y.length;\n  let t, i;\n\n  while (n) {\n    i = Math.floor(Math.random() * n--);\n    t = y[n];\n    y[n] = y[i];\n    y[i] = t;\n  }\n\n  return y;\n}\n\n\n/**\n * Sorts values in a vector.\n *\n * @param {Array|TypedArray} x - vector with values.\n * @param {boolean} decreasing - should order be decreasing (true) or increasing (false).\n *\n * @returns {Array} array with two vectors: sorted values and indices of the sorted values.\n *\n */\nexport function _sort(x, decreasing = false) {\n   return decreasing ? x.slice().sort((a, b) => b - a) : x.slice().sort((a, b) => a - b);\n}\n\n\n/**\n * Sorts values in a vector.\n *\n * @param {Array|TypedArray} x - vector with values.\n * @param {boolean} decreasing - should order be decreasing (true) or increasing (false).\n *\n * @returns {Array} array with two vectors: sorted values and indices of the sorted values.\n *\n */\nexport function _sortind(x, decreasing = false) {\n   const ind = Index.seq(1, x.length).v;\n   return decreasing ? ind.sort((a, b) => x[b - 1] - x[a - 1]) : ind.sort((a, b) => x[a - 1] - x[b - 1]);\n}\n","import { cbind, vector, isvector, Vector } from 'mdatools/arrays';\nimport { min, max, diff } from 'mdatools/stat';\n\n\n/**\n * Generate vector with axis tick labels and tick factor based on numeric tick values.\n *\n * @param {Vector} ticks - vector with numeric tick values.\n *\n * @returns {Array} an array with tick factor and array with tick labels.\n */\nexport function getTickLabels(ticks) {\n\n   if (ticks === undefined) return undefined;\n\n   const step = Math.abs(min(diff(ticks)));\n   let tickFactor = 0;\n   if (step < 1 && Math.abs(max(ticks)) < 1) {\n      // values between 0 and 1 (absolute)\n      let decNum = Math.ceil(-Math.log10(step));\n      if (decNum <= 2) {\n         return [0, Array.from(ticks).map(v => v.toFixed(decNum).toString())];\n      }\n      tickFactor = decNum - 2;\n      decNum = 2;\n      return [-tickFactor, Array.from(ticks).map(v => (v * Math.pow(10, tickFactor)).toFixed(decNum).toString())];\n   } else {\n      let decNum = Math.ceil(Math.log10(step));\n      if (decNum <= 2) {\n         return [0, Array.from(ticks).map(v => v.toString())];\n      }\n      tickFactor = decNum - 2;\n      decNum = 2;\n      return [tickFactor, Array.from(ticks).map(v => (v / Math.pow(10, tickFactor)).toString())];\n   }\n}\n\n\n/**\n * Check coordinates and convert them to vector if necessary.\n *\n * @param {Array|Vector} x - vector or array with coordinates.\n * @param {string} source - name of component which called the method (needed for error message).\n *\n * @returns {Vector}\n *\n */\nexport function checkCoords(x, source) {\n\n   if (Array.isArray(x)) {\n      x = vector(x);\n   }\n\n   if (!isvector(x)) {\n      throw Error(source + \": coordinates must be provided as array or instance of Vector class.\");\n   }\n\n   if (x.length < 1) {\n      throw Error(source + \": vector with coordinates is empty.\");\n   }\n\n   return x;\n}\n\n\n/**\n * Create string with coordinates of SVG polygon in 3D.\n *\n * @param {Array|Vector} x - vector with x-coordinates of polygon points.\n * @param {Array|Vector} y - vector with y-coordinates of polygon points.\n * @param {Array|Vector} z - vector with y-coordinates of polygon points.\n * @param {Array} tM - transformation matrix for 3D->2D (from 'Axes').\n * @param {Object} axes - JSON with Axes context.\n *\n * @returns {string} string with coordinates.\n *\n */\nexport function val2p3d(x, y, z, tM, axes) {\n\n   if (x === undefined || y === undefined) return undefined;\n\n   const [px, py] = axes.transform(cbind(checkCoords(x), checkCoords(y), checkCoords(z)), tM);\n\n   if (px.length !== py.length) {\n      throw Error('PlotSeries: parameters \"xValues\", \"yValues\" and \"zValues\" must be numeric vectors of the same length.');\n   }\n\n   let p = \"\";\n   for (let i = 0; i < px.length; i++) {\n      p += px[i] + \",\" + py[i] + \" \";\n   }\n\n   return p;\n}\n\n\n/**\n * Create string with coordinates of SVG polygon.\n *\n * @param {Array|Vector} x - vector with x-coordinates of polygon points.\n * @param {Array|Vector} y - vector with y-coordinates of polygon points.\n * @param {Array} tX - transformation parameters for x-coordinates (from 'Axes').\n * @param {Array} tY - transformation parameters for y-coordinates (from 'Axes').\n * @param {Object} axes - JSON with Axes context.\n *\n * @returns {string} string with coordinates.\n *\n */\nexport function val2p(x, y, tX, tY, axes) {\n\n   if (x === undefined || y === undefined) return undefined;\n\n   const px = axes.transform(checkCoords(x, 'val2p'), tX.coords);\n   const py = axes.transform(checkCoords(y, 'val2p'), tY.coords);\n\n   if (px.length != py.length) {\n      throw Error('PlotSeries: parameters \"xValues\" and \"yValues\" must be numeric vectors of the same length.');\n   }\n\n   let p = \"\";\n   for (let i = 0; i < px.length; i++) {\n      p += px[i] + \",\" + py[i] + \" \";\n   }\n\n   return p;\n}\n\n/**\n * Computes nice tick values for axis.\n *\n * @param {Array} ticks - vector with ticks if alredy available (if not, new will be computed).\n * @param {Array} lim - vector with axis limits tickets must be computed for.\n * @param {number} maxTickNum - maximum number of ticks to compute.\n * @param {boolean} round - round or not the fractions when computing nice numbers for the ticks.\n *\n * @returns {Array} an array with computed tick positions.\n *\n */\nexport function getAxisTicks(ticks, lim, maxTickNum, round = true) {\n\n   // if ticks are already provided do not recompute them\n   if (ticks !== undefined) {\n      if (Array.isArray(ticks)) {\n         ticks = vector(ticks);\n      }\n\n      if (!isvector(ticks)) {\n         throw Error('getAxisTicks: axis ticks must be provided as an array or as a vector.');\n      }\n\n      return ticks.filter(x => x >= lim[0] & x <= lim[1]);\n   }\n\n   // check if limits are ok\n   if (typeof(lim) !== \"object\" || lim[0] === undefined || lim[1] === undefined) return undefined;\n\n   // get range as a nice number and compute min, max and steps for the tick sequence\n   const delta = (lim[1] - lim[0]) / 50;\n   const range = niceNum(lim[1] - lim[0] - 1 * delta, round);\n   const tickSpacing = niceNum(range / (maxTickNum - 1), round);\n   const tickMin = Math.ceil((lim[0] + delta) / tickSpacing) * tickSpacing;\n   const tickMax = Math.floor((lim[1] - delta) / tickSpacing) * tickSpacing;\n\n   // recompute maxTickNum\n   maxTickNum = Math.round((tickMax - tickMin + 1) / tickSpacing) + 1;\n\n   // create a sequence of ticks\n   ticks = Vector.seq(tickMin, tickMax, tickSpacing);\n\n   // if step is smaller than 1 round values to remove small decimals accidentially added by JS\n   if (Math.abs(tickSpacing) < 1) {\n      const decNum = Math.round(-Math.log10(tickSpacing));\n      const r = Math.pow(10, 1 + Math.round(-Math.log10(tickSpacing)));\n      ticks = ticks.apply(v => (Math.round((v + Number.EPSILON) * r) / r));\n   }\n\n   // make sure the ticks are not aligned with axes limits\n   return ticks.filter(x => x >= lim[0] & x <= lim[1]);\n}\n\n\n/**\n * Computes a nice spacing value for a given range.\n *\n * @param {Number} localRange - a range (max - min).\n * @param {boolean} round - round or not the fractions when computing the number.\n *\n * @returns {Number} the computed spacing value.\n *\n */\nexport function niceNum( localRange,  round) {\n\n   const exponent = Math.floor(Math.log10(localRange));\n   const fraction = localRange / Math.pow(10, exponent);\n   let niceFraction;\n\n   if (round) {\n      if (fraction < 1.5)\n         niceFraction = 1;\n      else if (fraction < 3)\n         niceFraction = 2;\n      else if (fraction < 7)\n         niceFraction = 5;\n      else\n         niceFraction = 10;\n   } else {\n      if (fraction <= 1)\n         niceFraction = 1;\n      else if (fraction <= 2)\n         niceFraction = 2;\n      else if (fraction <= 5)\n         niceFraction = 5;\n      else\n         niceFraction = 10;\n   }\n\n   return niceFraction * Math.pow(10, exponent);\n}\n\n\n/**\n * Rounds coordinate values to single decimal\n */\nexport function roundCoords(x) {\n   return Math.round(x * 10) / 10\n}\n\n\n/**\n * Computes a scale level.\n *\n * @param {numeric} width - width of plotting area in pixels.\n * @param {numeric} height - height of plotting area in pixels.\n *\n * @returns {text} the scale level (\"small\", \"medium\" or \"large\").\n *\n */\nexport function getScale(width, height) {\n   if (height < 300.2 || width < 300.2) return \"small\";\n   if (height < 600.2 || width < 600.2) return \"medium\";\n   if (height < 850.2 || width < 850.2) return \"large\";\n   return \"xlarge\";\n}\n\n\n   /*************************************************************/\n   /* Functions needed to adjust DPI of resulting PNG image     */\n   /* taken from: https://github.com/shutterstock/changeDPI     */\n   /* and modified                                              */\n   /*************************************************************/\n\n   /**\n    * Create table for PNG CRC calculation\n    */\n   function createPngDataTable() {\n      const crcTable = new Int32Array(256);\n      for (let n = 0; n < 256; n++) {\n         let c = n;\n         for (let k = 0; k < 8; k++) {\n            c = (c & 1) ? 0xedb88320 ^ (c >>> 1) : c >>> 1;\n         }\n         crcTable[n] = c;\n      }\n      return crcTable;\n   }\n\n   /**\n    * Calculate CRC for PNG image\n    * @param buf image data\n    */\n   function calcCrc(buf) {\n      let c = -1;\n      let pngDataTable = createPngDataTable();\n      for (let n = 0; n < buf.length; n++) {\n         c = pngDataTable[(c ^ buf[n]) & 0xFF] ^ (c >>> 8);\n      }\n      return c ^ -1;\n   }\n\n   /**\n    * Change DPI of PNG image\n    * @param dataArray image data\n    * @param dpi new DPI\n    */\n   function changeDpiOnArray(dataArray, dpi) {\n\n      const physChunk = new Uint8Array(13);\n      // chunk header pHYs\n      // 9 bytes of data\n      // 4 bytes of crc\n      // this multiplication is because the standard is dpi per meter.\n      dpi *= 39.3701;\n      physChunk[0] = 'p'.charCodeAt(0);\n      physChunk[1] = 'H'.charCodeAt(0);\n      physChunk[2] = 'Y'.charCodeAt(0);\n      physChunk[3] = 's'.charCodeAt(0);\n      physChunk[4] = dpi >>> 24; // dpiX byte 3\n      physChunk[5] = dpi >>> 16; // dpiX byte 2\n      physChunk[6] = dpi >>> 8;  // dpiX byte 1\n      physChunk[7] = dpi & 0xff; // dpiX byte 0\n      physChunk[8] = physChunk[4];  // dpiY byte 3\n      physChunk[9] = physChunk[5];  // dpiY byte 2\n      physChunk[10] = physChunk[6]; // dpiY byte 1\n      physChunk[11] = physChunk[7]; // dpiY byte 0\n      physChunk[12] = 1; // dot per meter....\n\n      // compute and add CRC for physChunk\n      const crc = calcCrc(physChunk);\n      const crcChunk = new Uint8Array(4);\n      crcChunk[0] = crc >>> 24;\n      crcChunk[1] = crc >>> 16;\n      crcChunk[2] = crc >>> 8;\n      crcChunk[3] = crc & 0xff;\n\n      // chunk structur 4 bytes for length is 9\n      const chunkLength = new Uint8Array(4);\n      chunkLength[0] = 0;\n      chunkLength[1] = 0;\n      chunkLength[2] = 0;\n      chunkLength[3] = 9;\n\n      const finalHeader = new Uint8Array(54);\n      finalHeader.set(dataArray, 0);\n      finalHeader.set(chunkLength, 33);\n      finalHeader.set(physChunk, 37);\n      finalHeader.set(crcChunk, 50);\n      return finalHeader;\n   }\n\n   /**\n    * Change DPI of PNG image\n    * @param base64Image image data\n    * @param dpi new DPI\n    */\n   function changeDPI(base64Image, dpi) {\n\n      const dataSplitted = base64Image.split(',');\n      const format = dataSplitted[0];\n      const body = dataSplitted[1];\n\n      // here we assume there is pHYS chunk in the header\n      const headerLength = 33 / 3 * 4;\n\n      const stringHeader = body.substring(0, headerLength);\n      const restOfData = body.substring(headerLength);\n      const headerBytes = atob(stringHeader);\n      const dataArray = new Uint8Array(headerBytes.length);\n      for (let i = 0; i < dataArray.length; i++) {\n         dataArray[i] = headerBytes.charCodeAt(i);\n      }\n      const finalArray = changeDpiOnArray(dataArray, dpi, 'image/png');\n      const base64Header = btoa(String.fromCharCode(...finalArray));\n      return [format, ',', base64Header, restOfData].join('');\n   }\n\n\n/**\n * Downloads plot (or any other SVG image) as a PNG file.\n *\n * @param {SVGElement} svg - root SVG element of a plot\n * @param {string} fileName - filename to save with (without extension)\n * @param {number} width - desired image width in cm\n * @param {number} height - desired image height in cm\n * @param {number} res - resolution (pixels per inch)\n *\n */\nexport function downloadPNG (svg, fileName, width, height, res) {\n\n   if (!width) {\n      width = 10;\n   }\n\n   if (!height) {\n      height = 10;\n   }\n\n   if (!res) {\n      res = 300;\n   }\n\n   if (width < 1 || width > 30) {\n      throw Error('Parameter \"width\" must be between 1 and 30 (cm).');\n   }\n\n   if (height < 1 || height > 30) {\n      throw Error('Parameter \"height\" must be between 1 and 30 (cm).');\n   }\n\n   if (res < 50 || res > 1200) {\n      throw Error('Parameter \"res\" must be between 50 and 1200 (ppi).');\n   }\n\n   if (!svg || !(svg instanceof SVGElement)) {\n      throw Error('Parameter \"svg\" is not an instance of SVGElement.');\n   }\n\n   if (!fileName || fileName.trim() === '') {\n      fileName = 'plot';\n   }\n\n   // recalculate width and height to pixels\n   width = width / 2.54 * res;\n   height = height / 2.54 * res;\n\n   setTimeout(() => {\n\n      // compute canvas size based on SVG size and desired PNG WIDTH in pixels\n      const svgHeight = svg.clientHeight;\n      const svgWidth = svg.clientWidth;\n      const scaleFactor = Math.max(width / svgWidth, height / svgHeight);\n\n      // create a new canvas element\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      // set the canvas size to match the SVG element\n      canvas.width =  svgWidth * scaleFactor;\n      canvas.height = svgHeight * scaleFactor;\n\n      console.log([svgHeight, svgWidth, height, width])\n      svg.setAttribute('width', canvas.width);\n      svg.setAttribute('height', canvas.height);\n\n      // draw a white background\n      context.fillStyle = 'white';\n      context.scale(scaleFactor, scaleFactor)\n      context.fillRect(0, 0, canvas.width, canvas.height);\n\n      // draw the SVG onto the canvas\n      const svgXml = new XMLSerializer().serializeToString(svg);\n      const blob = new Blob([svgXml], { type: 'image/svg+xml;charset=utf-8' });\n      const url = URL.createObjectURL(blob);\n\n      const img = new Image();\n\n      img.onload = function () {\n\n         // draw the image\n         context.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n         // create a data URL for the canvas and adjust its DPI\n         const dataURL = canvas.toDataURL('image/png');\n         const dataURL2 = changeDPI(dataURL, res);\n\n         // create a temporary link and trigger the download\n         const downloadLink = document.createElement('a');\n         downloadLink.href = dataURL2;\n         downloadLink.download = `${fileName}.png`;\n         downloadLink.click();\n      };\n\n      // set the image source\n      img.src = url;\n   }, 20);\n}\n\n\n/**\n * Downloads plot (or any other SVG image) as an SVG file.\n *\n * @param {SVGElement} svg - root SVG element of a plot\n * @param {string} fileName - filename to save with (without extension)\n */\nexport function downloadSVG(svg, fileName) {\n\n   if (!svg || !(svg instanceof SVGElement)) {\n      throw Error('Variable \"svg\" is not an instance of SVGElement.');\n   }\n\n   if (!fileName || fileName.trim() === \"\") {\n      fileName = \"plot\";\n   }\n\n   const svgHeight = svg.clientHeight;\n   const svgWidth = svg.clientWidth;\n   svg.setAttribute('width', svgWidth + 'px');\n   svg.setAttribute('height', svgHeight + 'px');\n   svg.setAttribute('viewBox', `0 0 ${svgWidth} ${svgHeight}`);\n\n   const blob = new Blob([svg.outerHTML], { type: 'image/svg+xml' });\n   const url = window.URL.createObjectURL(blob)\n   const a = document.createElement('a')\n   a.setAttribute('href', url)\n   a.setAttribute('download', `${fileName}.svg`);\n   a.click()\n}\n\n","<script>\n   /****************************************************\n   * Axes                                              *\n   * --------------------                              *\n   * root item for any plot                            *\n   *****************************************************/\n\n\timport { setContext, createEventDispatcher, onMount, onDestroy } from 'svelte';\n\timport { writable } from 'svelte/store';\n   import { isvector, vector, Vector } from 'mdatools/arrays';\n   import { roundCoords, getScale, downloadSVG, downloadPNG } from '../Utils.js';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let limX;                                   // array with limits for x-axis (in plot units) [min, max]\n   export let limY;                                   // array with limits for y-axis (in plot units) [min, max]\n   export let title = '';                             // title of the plot\n   export let xLabel = '';                            // label for x-axis\n   export let yLabel = '';                            // label for y-axis\n   export let margins = [1.0, 0.75, 0.5, 0.5];        // margins [bottom, left, top, right] )\n\n\n   /*****************************************/\n   /* Input parameters for downloading      */\n   /*****************************************/\n   export let downloadLinks = 'hover';                // how to show download links panel ('none', 'hover', 'fixed')\n   export let fileName = 'plot';                      // file name for download (without extension)\n   export let pngWidth = 8;                           // width of PNG image in cm\n   export let pngHeight = 8;                          // height of PNG image in cm\n   export let pngRes = 300;                           // resolution of PNG image (pixels per inch)\n\n\n   /*****************************************/\n   /* Constants                             */\n   /*****************************************/\n\n   // event dispatcher\n   const dispatch = createEventDispatcher();\n\n   // how big are margins (number of pixels in unit margin value) between axis and plot area if axis are shown\n   const AXES_MARGIN_FACTORS = {\n      'small': 30,\n      'medium': 40,\n      'large': 50,\n      'xlarge': 60\n   }\n\n   // number of ticks along each axis\n   const TICK_NUM = {\n      'small': 5,\n      'medium': 8,\n      'large': 12,\n      'xlarge': 15\n   };\n\n   // size of ticks\n   const TICK_SIZE = {\n      'small': 4,\n      'medium': 6,\n      'large': 8,\n      'xlarge': 10\n   };\n\n   // font size for plot element\n   const LEGEND_FONT_SIZE = {\n      \"small\": 11,\n      \"medium\": 14,\n      \"large\": 16,\n      \"xlarge\": 18\n   };\n\n   // font size for legend items in pixels\n   const PLOT_FONT_SIZE = {\n      \"small\": 12,\n      \"medium\": 15,\n      \"large\": 19,\n      \"xlarge\": 21\n   };\n\n   // margin between plot series elements and data labels\n   const LABELS_MARGIN = {\n      'small': 11,\n      'medium': 15,\n      'large': 17,\n      'xlarge': 19\n   };\n\n   // line styles for different scales and types\n   const LINE_STYLES = {\n      small: ['0', '3,3', '1,1', '3,1'],\n      medium: ['0', '5,5', '2,2', '5,2'],\n      large: ['0', '7,7', '3,3', '7,3'],\n      xlarge: ['0', '9,9', '4,4', '9,3'],\n   }\n\n   // marker symbols\n   const MARKER_SYMBOLS = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\n\n   // constant to make clip path ID unique\n   const clipPathID = 'plottingArea' + Math.round(Math.random() * 10000);\n\n\n   /*****************************************/\n   /* Variable parameters for internal use  */\n   /*****************************************/\n\n   /* parameters for internal use inside the component */\n   let plotElement;\n   let width = 100, height = 100;\n   let left = 0, bottom = 0, top = 0;\n\n\n   /*****************************************/\n   /* Helper functions                      */\n   /*****************************************/\n\n   /**\n    * Dispatcher for click events.\n    * @param {string} eventName - name of the event.\n    * @param {HTMLDOMElement} el - DOM element the click was registered for.\n    *\n    */\n   function dispatchClickEvent(eventName, el) {\n      const id = Array.prototype.indexOf.call(el.parentNode.children, el)\n      dispatch(eventName, {seriesTitle: el.parentNode.getAttribute('title'), elementID: id});\n   }\n\n   /**\n    * Handler (router) for click events.\n    *\n    * @param {event} e - event object.\n    *\n    * @description\n    * Checks which element the click was made on and dispatch a corresponding event.\n    *\n    */\n   function handleClick(e) {\n\n      // click on scatter plot markers\n      if (e.target.tagName === 'text' && e.target.parentNode.classList.contains('series-points')) {\n         dispatchClickEvent('markerclick', e.target);\n         return;\n      }\n\n      // click on bar plot bars\n      if (e.target.tagName === 'rect' && e.target.parentNode.classList.contains('series-bar')) {\n         dispatchClickEvent('barclick', e.target);\n         return;\n      }\n\n      // click outside any plot element\n      dispatch('axesclick');\n   }\n\n   function handleClickSVG() {\n      downloadSVG(plotElement, fileName)\n   }\n\n   function handleClickPNG() {\n      downloadPNG(plotElement, fileName, pngWidth, pngHeight, pngRes)\n   }\n\n   /**\n    * Generic function to transform x or y-values from plot coordinates to screen (SVG) coordinates.\n    *\n    * @param {Array|Vector} v - vector with coordinates (or objects size) in original plot coordinates.\n    * @param {Object} tA - array with scaling and translation factors.\n    *\n    * @returns {Vector} vector with rescaled values\n    *\n    */\n   const transform = function(v, tA) {\n\n      if (!$isOk || v === undefined || v === null) return undefined;\n      if (Array.isArray(v)) v = vector(v);\n      if (!isvector(v) || v.length < 1) return undefined;\n\n      return v.apply(a => roundCoords((a - tA[1]) * tA[0] + tA[2])).v;\n   }\n\n\n   /**\n    * Generic function to transform x or y-values from screen (SVG) coordinates to plot coordinates.\n    *\n    * @param {Array|Vector} v - vector with coordinates (or objects size) in screen (SVG) coordinates.\n    * @param {Object} tA - array with scaling and translation factors.\n    *\n    * @returns {Vector} vector plot coordinates.\n    *\n    */\n   const invTransform = function(v, tA) {\n\n      if (!$isOk || v === undefined || v === null) return undefined;\n      if (Array.isArray(v)) v = vector(v);\n      if (!isvector(v) || v.length < 1) return undefined;\n\n      return v.apply(a => (a - tA[2]) / tA[0] + tA[1]).v;\n   }\n\n   /*****************************************/\n   /* Storage to share with children        */\n   /*****************************************/\n\n   const scale = writable('medium');                                  // scale factor (how big the shown plot is)\n   const isOk = writable(false);                                      // are axes ready for drawing\n   const xLim = writable(limX);                                       // validated values for x-axis limits\n   const yLim = writable(limY);                                       // validated values for y-axis limits\n   const tX = writable({'coords': [1, 0, 0], 'objects': [1, 0, 0]});  // scaling and translation factors for x-dimension\n   const tY = writable({'coords': [1, 0, 0], 'objects': [1, 0, 0]});  // scaling and translation factors for y-dimension\n\n\n   /*****************************************/\n   /* Axes context                          */\n   /*****************************************/\n\n   let context = {\n\n      // methods\n      transform: transform,\n      invTransform: invTransform,\n\n      // variables\n      scale: scale,\n      isOk: isOk,\n      xLim: xLim,\n      yLim: yLim,\n      tX: tX,\n      tY: tY,\n      xLabel: xLabel,\n      yLabel: yLabel,\n\n      // constants\n      LINE_STYLES: LINE_STYLES,\n      LABELS_MARGIN: LABELS_MARGIN,\n      TICK_NUM: TICK_NUM,\n      TICK_SIZE: TICK_SIZE,\n      MARKER_SYMBOLS: MARKER_SYMBOLS,\n      LEGEND_FONT_SIZE: LEGEND_FONT_SIZE\n   }\n\n\tsetContext('axes', context);\n\n   /*****************************************/\n   /* Reactive updates of the parameters    */\n   /*****************************************/\n\n   // computes real margins in pixels based on current scale\n   $: pxMargins = margins.map(v => v * AXES_MARGIN_FACTORS[$scale]);\n\n   // update limits if necessary\n   $: xLim.update(v => limX);\n   $: yLim.update(v => limY);\n\n   // computes status which tells that axes limits look fine and it is safe to draw\n   // the status is based on the axis limits validity\n   $: isOk.update(v =>\n      Array.isArray($yLim) &&\n      Array.isArray($xLim) &&\n      $xLim.length === 2 &&\n      $yLim.length === 2 &&\n      !$yLim.some(v => v === undefined) &&\n      !$xLim.some(v => v === undefined) &&\n      !$yLim.some(v => isNaN(v)) &&\n      !$xLim.some(v => isNaN(v)) &&\n      $xLim[1] !== $xLim[0] &&\n      $yLim[1] !== $yLim[0] &&\n      width > (pxMargins[1] + pxMargins[3]) &&\n      height > (pxMargins[0] + pxMargins[2])\n   )\n\n   // update transformation array for x-coordinates\n   $: {\n      if ($isOk) {\n         tX.update(v => ({\n            'coords':  [ (width - pxMargins[1] - pxMargins[3]) / ($xLim[1] - $xLim[0]), $xLim[0], pxMargins[1]],\n            'objects': [ (width - pxMargins[1] - pxMargins[3]) / ($xLim[1] - $xLim[0]),       0,             0]\n         }));\n      }\n   };\n\n   // update transformation array for y-coordinates\n   $: {\n      if ($isOk) {\n         tY.update(v => ({\n            'coords':  [-(height - pxMargins[0] - pxMargins[2]) / ($yLim[1] - $yLim[0]), $yLim[1], pxMargins[2]],\n            'objects': [ (height - pxMargins[0] - pxMargins[2]) / ($yLim[1] - $yLim[0]),        0,            0]\n         }));\n      }\n   };\n\n   // computes coordinates for clip path box\n   $: cpx = $isOk ? transform($xLim, $tX.coords) : [0, 1];\n   $: cpy = $isOk ? transform($yLim, $tY.coords) : [1, 0];\n\n\n   /*****************************************/\n   /* Events observers                      */\n   /*****************************************/\n\n   // observer for the plot area size to update the scale\n   const ro = new ResizeObserver(entries => {\n      for (let entry of entries) {\n         const pcr = plotElement.getBoundingClientRect();\n         const scl = getScale(pcr.width, pcr.height);\n         scale.update(x => scl);\n\n         const m = PLOT_FONT_SIZE[scl] * 1.5;\n         left = xLabel && xLabel !== '' ? m : 0;\n         bottom = yLabel && yLabel !== '' ? m : 0;\n         top = title && title !== '' ? m : 0;\n         width = pcr.width > left ? pcr.width - left : 0;\n         height = pcr.height > (bottom + top) ? pcr.height - bottom - top : 0;\n      }\n   });\n\n   $: fontSize = PLOT_FONT_SIZE[$scale];\n\n   onMount(() => {\n      ro.observe(plotElement);\n   });\n\n   onDestroy(() => {\n      ro.unobserve(plotElement);\n   })\n\n</script>\n\n<div class=\"plot-container show-download-links-{downloadLinks}\" class:plot_error={!$isOk}>\n\n   <svg class=\"plot\" bind:this={plotElement} xmlns=\"http://www.w3.org/2000/svg\"\n      style={`font-size:${fontSize}px`}>\n\n      <style>\n         .plot {\n            font-family: Arial, Helvetica, sans-serif;\n         }\n\n         .plot-labels text {\n            font-weight:bold;\n            text-anchor:middle;\n         }\n\n         .tick-labels text,\n         .tick-labels tspan,\n         .series-text text,\n         .series-text tspan,\n         .series-points text,\n         .series-points tspan {\n            dominant-baseline: middle;\n            cursor: default;\n            user-select: none;\n         }\n\n         .series-text text,\n         .series-text tspan {\n            text-anchor: middle;\n         }\n\n         .tick-labels text,\n         .tick-labels tspan {\n            font-size:1em;\n         }\n      </style>\n\n      <g class=\"plot-labels\">\n         <!-- y-axis label -->\n         {#if yLabel && yLabel !== ''}\n         <text x={0} y={(height + top) /2} dx={0} dy={0} dominant-baseline=\"top\" transform={`rotate(-90, 10, ${height/2})`} style=\"font-size:1.1em;\">{@html yLabel}</text>\n         {/if}\n         <!-- x-axis label -->\n         {#if xLabel && xLabel !== ''}\n         <text x={left + width/2 } y={height + top} dx={0} dy={5} dominant-baseline=\"middle\" style=\"font-size:1.1em;\">{@html xLabel}</text>\n         {/if}\n         <!-- plot title -->\n         {#if title && title !== ''}\n         <text x={left + width/2 } y={0} dx={0} dy={10}  dominant-baseline=\"hanging\" style=\"font-size:1.2em;\">{@html title}</text>\n         {/if}\n      </g>\n\n      <svg x={left} y={top} width={width} height={height} on:click={handleClick}\n         on:keydown={handleClick} preserveAspectRatio=\"none\" class=\"axes\">\n\n         <!-- define clipping path -->\n         <defs>\n            <clipPath id={clipPathID}>\n               <rect style=\"pointer-events:none\" x={cpx[0]} y={cpy[1]} width={cpx[1]-cpx[0]} height={cpy[0]-cpy[1]} />\n            </clipPath>\n         </defs>\n\n         <!-- axis and box -->\n         <slot name=\"xaxis\"></slot>\n         <slot name=\"yaxis\"></slot>\n\n         <!-- main plot content -->\n         <g class=\"axes-content\" clip-path=\"url(#{clipPathID})\">\n            <slot></slot>\n         </g>\n\n         <!-- axis and box -->\n         <slot name=\"box\"></slot>\n      </svg>\n   </svg>\n\n   {#if !$isOk}\n   <p class=\"message_error\">\n      Axes component was not properly initialized. <br />\n      Check that you defined axes limits and margins correctly.\n   </p>\n   {:else}\n   <div class=\"download-links\">\n      <button on:click={handleClickSVG} on:keydown={handleClickSVG}> svg</button>\n      <button on:click={handleClickPNG} on:keydown={handleClickPNG}> png</button>\n   </div>\n   {/if}\n\n</div>\n\n<style>\n   .show-download-links-none > .download-links{\n      display: none;\n   }\n\n   .show-download-links-hover:hover > .download-links {\n      bottom: 0;\n   }\n\n   .show-download-links-fixed > .download-links{\n      bottom: 0;\n   }\n\n   .download-links {\n      bottom: right 0.5s ease;\n      position: absolute;\n      font-size: 0.8em;\n      bottom: -50%;\n      right: 0;\n      z-index: 10;\n      padding: 0.5em 1em 0.5em 1em;\n      background: #fefefe;\n      border-radius: 0.5em;\n      transition: bottom 0.35s ease;\n      box-shadow: 0 0 1em #00000040;\n      margin: 0.5em;\n      box-sizing: border-box;\n\n      display: flex;\n      align-items: center;\n      justify-content: center;\n   }\n\n   .download-links > button{\n      color: #606060;\n      border: none;\n      box-shadow: none;\n      background: #fafafa;\n      border-radius: 0.35em;\n      padding: 0.25em 0.5em;\n   }\n\n   .download-links > button:hover{\n      background: #443333;\n      color: #fafafa;\n   }\n\n   /* Plot container */\n   .plot-container {\n      font-family: Arial, Helvetica, sans-serif;\n      box-sizing: border-box;\n      position: relative;\n      min-width: 100px;\n      min-height: 50px;\n      width: 100%;\n      height: 100%;\n      padding: 0;\n      margin: 0;\n      overflow: hidden;\n      background: #fff;\n   }\n\n   .plot_error {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n   }\n\n   .message_error {\n      font-size: 1.2em;\n      color: crimson;\n      padding: 1em;\n      box-sizing: border-box;\n      text-align: center;\n   }\n\n   /* Plot and axes (coordinate system) */\n\n   .plot {\n      display: block;\n      box-sizing: border-box;\n      position:absolute;\n      padding: 0;\n      margin: 0;\n      left: 0;\n      top: 0;\n      bottom: 0;\n      right: 0;\n      width: 100%;\n      height: 100%;\n   }\n\n   .axes-content {\n      padding: 0;\n      margin: 0;\n      height: 100%;\n      width: 100%;\n      max-height: 100%;\n      max-width: 100%;\n      min-height: 100%;\n      min-width: 100%;\n   }\n\n</style>","export const Colors = {\n   \"AXIS_LINE\": \"#303030\",\n   \"AXIS_TICK\": \"#606060\",\n   \"WHITE\":     \"#fff\",\n   \"BLACK\":     \"#000\",\n   \"GRAY\":      \"#909090\",\n   \"MIDDLEGRAY\": \"#dadada\",\n   \"LIGHTGRAY\": \"#f0f0f0\",\n   \"DARKGRAY\":  \"#606060\",\n   \"LEGEND\": \"#303030\",\n\n   \"PRIMARY\": \"#2679B2\",\n   \"PRIMARY_LIGHT\": \"#d2ebff\",\n   \"PRIMARY_TEXT\": \"#333\",\n}\n\n\n/**\n * Returns an array with 'n' colors.\n *\n * @param {number} n - number of colors to return.\n *\n * @returns {Array} array with colors as strings (hexadecimal).\n *\n */\nexport function getcolmap(n) {\n   if (n ==  1) return [\"#2679B2\"];\n   if (n ==  2) return [\"#2679B2\", \"#D22C2F\"];\n   if (n ==  3) return [\"#2679B2\", \"#92B42A\", \"#D22C2F\"];\n   if (n ==  4) return [\"#2679B2\", \"#2E9658\", \"#F2B825\", \"#D22C2F\"];\n   if (n ==  5) return [\"#2679B2\", \"#22988A\", \"#92B42A\", \"#F79426\", \"#D22C2F\"];\n   if (n ==  6) return [\"#2679B2\", \"#1C9AA8\", \"#379531\", \"#EED524\", \"#FB7F28\", \"#D22C2F\"];\n   if (n ==  7) return [\"#2679B2\", \"#1D94A9\", \"#2E9658\", \"#92B42A\", \"#F2B825\", \"#F47129\", \"#D22C2F\"];\n   if (n ==  8) return [\"#2679B2\", \"#1E90AA\", \"#279775\", \"#519E2F\", \"#D3CB25\", \"#F5A326\", \"#EF672A\", \"#D22C2F\"];\n   if (n ==  9) return [\"#2679B2\", \"#1F8DAB\", \"#22988A\", \"#33953F\", \"#92B42A\", \"#EFCA24\", \"#F79426\", \"#EB5F2A\", \"#D22C2F\"];\n   if (n == 10) return [\"#2679B2\", \"#208BAC\", \"#1E999A\", \"#2E9658\", \"#5FA32E\", \"#C5C626\", \"#F2B825\", \"#F98827\", \"#E85A2B\", \"#D22C2F\"];\n   if (n == 11) return [\"#2679B2\", \"#2089AD\", \"#1C9AA8\", \"#29976C\", \"#379531\", \"#92B42A\", \"#EED524\", \"#F4AA26\", \"#FB7F28\",\n      \"#E6552B\", \"#D22C2F\"];\n   if (n == 12) return [\"#2679B2\", \"#2188AD\", \"#1C97A8\", \"#25987C\", \"#329546\", \"#68A62D\", \"#BCC327\", \"#F0C524\", \"#F69E26\",\n      \"#F77728\", \"#E4512B\", \"#D22C2F\"];\n   if (n == 13) return [\"#2679B2\", \"#2186AD\", \"#1D94A9\", \"#22988A\", \"#2E9658\", \"#469A2F\", \"#92B42A\", \"#DECF25\", \"#F2B825\",\n      \"#F79426\", \"#F47129\", \"#E34E2C\", \"#D22C2F\"];\n   if (n == 14) return [\"#2679B2\", \"#2285AE\", \"#1E92AA\", \"#209995\", \"#2A9767\", \"#34953A\", \"#6FA82D\", \"#B5C128\", \"#EFCE24\", \"#F3AD25\",\n      \"#F98C27\", \"#F16B29\", \"#E14B2C\", \"#D22C2F\"];\n   if (n == 15) return [\"#2679B2\", \"#2284AE\", \"#1E90AA\", \"#1D999F\", \"#279775\", \"#31964A\", \"#519E2F\", \"#92B42A\", \"#D3CB25\", \"#F0C224\",\n      \"#F5A326\", \"#FA8527\", \"#EF672A\", \"#E0492C\", \"#D22C2F\"];\n\n   // if n > 15 return 16 colors\n   return [\"#2679B2\", \"#2283AE\", \"#1F8FAB\", \"#1C9AA8\", \"#249880\", \"#2E9658\", \"#379531\", \"#73AA2C\", \"#B0BF28\", \"#EDD424\", \"#F2B825\",\n      \"#F69B26\", \"#FB7F28\", \"#ED632A\", \"#DF472C\", \"#D22C2F\"];\n}\n","<script>\n   /****************************************************\n   * Axis lines                                        *\n   * --------------------                              *\n   * generic component for axis lines (main, grid, ...)*\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors.js';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let lineCoords = [];               // coordinates of start and end points of the lines\n   export let lineColor = Colors.DARKGRAY;   // line color\n   export let lineType = 1;                  // line type\n   export let lineWidth = 1;                 // lined width (thickness)\n   export let className = '';                // CSS class name for the component\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // reactive variables for coordinates of axis lines\n   let x1, x2, y1, y2 = undefined;\n   $: if (lineCoords.length == 2) {\n      x1 = axes.transform(lineCoords[0][0], $tX.coords);\n      y1 = axes.transform(lineCoords[0][1], $tY.coords);\n      x2 = axes.transform(lineCoords[1][0], $tX.coords);\n      y2 = axes.transform(lineCoords[1][1], $tY.coords);\n   }\n\n   /* styles for axis and grid lines */\n   $: lineStyleStr = `stroke:${lineColor};stroke-width: ${lineWidth}px;stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n\n</script>\n\n{#if x1 !== undefined && y1 !== undefined && x2 !== undefined && y2 !== undefined}\n<g class={className}>\n   {#each x1 as v, i}\n   <line vector-effect=\"non-scaling-stroke\" x1={x1[i]} x2={x2[i]} y1={y1[i]} y2={y2[i]} style={lineStyleStr} />\n   {/each}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * AxisTickLabels                                    *\n   * --------------------                              *\n   * shows a series of tick labels along an axis       *\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let tickCoords;  // array with tick coordinates\n   export let textColor;   // color of tick labels\n   export let tickLabels;  // array with tick labels\n   export let pos = 1;     // position of tick labels\n   export let las = 1;     // rotation of tick labels (1 - horizontal, 2 - vertical)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   let el;\n\n   let x, y = undefined;\n   let dx = 0, dy = 0, textAnchor;\n\n   // reactive calculations triggered by changes in coordinates and plot parameters\n   $: if ($isOk) {\n      x = axes.transform(tickCoords[1][0], $tX.coords);\n      y = axes.transform(tickCoords[1][1], $tY.coords);\n   }\n\n   // reactive calculations triggered by changes in scale\n   $: m = axes.LABELS_MARGIN[$scale];\n\n   // reactive calculations triggered by changes in pos\n   $: {\n      textAnchor = (['middle', 'middle', 'start', 'middle', 'end'])[pos];\n      dx = ([0, 0, m,  0, -m])[pos];\n      dy = ([0, m, 0, -m, 0])[pos];\n   }\n\n   // styles for the elements\n   $: textStyleStr = `fill:${textColor};`;\n</script>\n\n{#if x !== undefined && y !== undefined}\n<g class=\"tick-labels\" bind:this={el} style={textStyleStr} >\n   {#if las === 2 && pos === 4}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={0} dy={dx*1.25} transform={`rotate(-90, ${x[i]}, ${y[i]})`} text-anchor={\"middle\"}>{@html tickLabels[i]}</text>\n   {/each}\n   {:else if las === 2 && pos === 1}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={-dy/2} dy={0} transform={`rotate(-90, ${x[i]}, ${y[i]})`} text-anchor={\"end\"}>{@html tickLabels[i]}</text>\n   {/each}\n   {:else}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx} dy={dy} text-anchor={textAnchor}>{@html tickLabels[i]}</text>\n   {/each}\n   {/if}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * Axis                                              *\n   * ---------------------------------                 *\n   * generic element for X- or Y-axis                  *\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { Colors } from '../Colors.js';\n   import AxisLines from './AxisLines.svelte';\n   import AxisTickLabels from './AxisTickLabels.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let tickLabels = [];               // vector with labels for each tick\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // rotation of tick labels\n\n   export let pos = 1;                       // position of tick labels\n   export let className = \"\";                // name of CSS class for the axis\n   export let grid = [];                     // array with grid coordinates\n   export let axisLine = [];                 // array with coordinates of main axis line\n   export let tickCoords = [];               // array with axis tick coordinates\n   export let tfCoords = [];                 // array with tick factor coordinates\n   export let tickFactor = 0;                // tick factor (as power of 10)\n\n   export let lineColor = Colors.DARKGRAY;   // color of main axis line\n   export let gridColor = Colors.MIDDLEGRAY; // color of grid lines\n   export let textColor = Colors.DARKGRAY;   // color of tick labels\n\n   // generate text for tick factor label\n   function getTickFactorLabel(tf) {\n      if (tf === 0) return '';\n      if (tf < 0) {\n         return `&times;10<tspan dy=\"-0.5em\">${(tf).toString()}</tspan>`;\n      } else {\n         return `&times;10<tspan dy=\"-0.5em\">${(tf).toString()}</tspan>`;\n      }\n   }\n</script>\n\n<g class=\"mdaplot__axis {className}\">\n   <!-- grid -->\n   {#if showGrid }\n      <AxisLines lineCoords={grid} lineColor={gridColor} lineType={3} />\n   {/if}\n\n   <!-- main axis line -->\n   <AxisLines lineCoords={axisLine} lineColor={lineColor} lineType={1} />\n\n   <!-- ticks-->\n   <AxisLines lineCoords={tickCoords} lineColor={lineColor} lineType={1} />\n\n   <!-- labels -->\n   {#if tickCoords.length === 2 && tickLabels.length === tickCoords[1][0].length}\n   <AxisTickLabels {las} {pos} {tickCoords} {tickLabels} {textColor} />\n   {/if}\n\n   <!-- tick factor -->\n   {#if tickFactor !== 0}\n   <AxisTickLabels {pos} tickCoords={tfCoords} tickLabels={[getTickFactorLabel(tickFactor)]} {textColor} />\n   {/if}\n</g>\n\n","<script>\n   /****************************************************\n   * X-Axis                                            *\n   * --------------------                              *\n   * shows x-axis and its elements (ticks, grid, etc.) *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector, vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors.js';\n   import { getAxisTicks, getTickLabels } from '../Utils.js';\n   import Axis from './Axis.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot = 'xaxis';                // slot the component must be placed in (must be \"xaxis\")\n   export let ticks = undefined;             // vector with numeric tick positions (by default is computed automatically)\n   export let tickLabels = undefined;        // vector with labels for each tick (by default tick values will be used)\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // orientation of tick labels (1 - horizontal, 2 - vertical)\n\n   export let lineColor = Colors.DARKGRAY;   // color of axis and tick lines\n   export let gridColor = Colors.MIDDLEGRAY; // color og grid lines\n   export let textColor = Colors.DARKGRAY;   // color of text tick labels\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // sanity checks of input parameters\n   if (slot !== 'xaxis') {\n      throw('Component XAxis must have \"slot=\\'xaxis\\'\" attribute.');\n   }\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n\n   // get reactive variables needed to compute coordinates\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tY = axes.tY;\n\n   // prepare variables for coordinates\n   let grid = [];\n   let axisLine = [];\n   let tickCoords = [];\n   let tfCoords = [];\n   let tickFactor = 0;\n\n   // compute coordinates for ticks, grid and axis line\n   $: if ($isOk) {\n\n      // compute x-coordinates of the ticks or take the ones manually specified by user\n      const ticksX = getAxisTicks(ticks, $xLim, axes.TICK_NUM[$scale], true);\n      const tickNum = ticksX.length;\n\n      // compute tick y-coordinates (up and bottom)\n      const dY = axes.invTransform([axes.TICK_SIZE[$scale]], $tY.objects)[0];\n      const ticksY1 = Vector.fill($yLim[0], tickNum);\n      const ticksY2 = ticksY1.add(dY);\n\n      // compute coordinates for the ends of grid\n      const gridYEnd = Vector.fill($yLim[1], tickNum);\n\n      // tick labels and tick factor\n      if (ticks === undefined || tickLabels === undefined) {\n         [tickFactor, tickLabels] = getTickLabels(ticksX.v);\n      }\n\n      if (tickLabels.length !== ticksX.length) {\n         throw('XAxis: \"tickLabels\" must be a array of the same size as ticks.')\n      }\n\n      // combine all coordinates together\n      grid = [\n         [ticksX, ticksY1],\n         [ticksX, gridYEnd]\n      ];\n\n      axisLine = [\n         [vector([$xLim[0]]), vector([$yLim[0]])],\n         [vector([$xLim[1]]), vector([$yLim[0]])]\n      ]\n\n      tickCoords = [\n         [ticksX, ticksY2],\n         [ticksX, ticksY1]\n      ];\n\n      tfCoords = [\n         [null, null],\n         [[$xLim[1]], [ticksY1.v[tickNum - 1] - 1.5 * dY]],\n      ];\n   }\n</script>\n\n{#if $isOk && axisLine.length > 0}\n<Axis\n   className=\"mdaplot__xaxis\" pos={1}\n   {lineColor} {gridColor} {textColor} {showGrid} {grid} {axisLine}\n   {tickCoords} {tickLabels} {tfCoords} {tickFactor} {las}\n/>\n{/if}","<script>\n   /****************************************************\n   * Y-Axis                                            *\n   * --------------------                              *\n   * shows y-axis and its elements (ticks, grid, etc.) *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector, vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors.js';\n   import { getAxisTicks, getTickLabels } from '../Utils.js';\n   import Axis from './Axis.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot = 'yaxis';                // slot the component must be placed in (must be \"yaxis\")\n   export let ticks = undefined;             // vector with numeric tick positions (by default is computed automatically)\n   export let tickLabels = undefined;        // vector with labels for each tick (by default tick values will be used)\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // orientation of tick labels (1 - horizontal, 2 - vertical)\n\n   export let lineColor = Colors.DARKGRAY;   // color of axis and tick lines\n   export let gridColor = Colors.MIDDLEGRAY; // color og grid lines\n   export let textColor = Colors.DARKGRAY;   // color of text tick labels\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // sanity checks of input parameters\n   if (slot !== 'yaxis') {\n      throw('Component YAxis must have \"slot=\\'yaxis\\'\" attribute.');\n   }\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n\n   // get reactive variables needed to compute coordinates\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n\n   // prepare variables for coordinates\n   let grid = [];\n   let axisLine = [];\n   let tickCoords = [];\n   let tfCoords = [];\n   let tickFactor = 0;\n\n   // compute tick x-coordinates\n   $: if ($isOk) {\n\n      // compute x-coordinates of the ticks or take the ones manually specified by user\n      const ticksY = getAxisTicks(ticks, $yLim, axes.TICK_NUM[$scale], true);\n      const tickNum = ticksY.length;\n\n      // compute tick y-coordinates (up and bottom)\n      const dX = axes.invTransform([axes.TICK_SIZE[$scale]], $tX.objects)[0];\n      const ticksX1 = Vector.fill($xLim[0], tickNum)\n      const ticksX2 = ticksX1.add(dX)\n\n      // coordinates for the ends of grid\n      const gridXEnd = Vector.fill($xLim[1], tickNum);\n\n      // tick labels and tick factor\n      if (ticks === undefined || tickLabels === undefined) {\n         [tickFactor, tickLabels] = getTickLabels(ticksY.v)\n      }\n\n      if (tickLabels.length !== ticksY.length) {\n         throw('YAxis: \"tickLabels\" must be a array of the same size as ticks.')\n      }\n\n      // combine all coordinates together\n      grid = [\n         [ticksX1, ticksY],\n         [gridXEnd, ticksY]\n      ];\n\n      axisLine = [\n         [vector([$xLim[0]]), vector([$yLim[0]])],\n         [vector([$xLim[0]]), vector([$yLim[1]])]\n      ]\n\n      tickCoords = [\n         [ticksX1, ticksY],\n         [ticksX2, ticksY]\n      ];\n\n      tfCoords = [\n         [[], []],\n         [[ticksX1.v[tickNum - 1]], [$yLim[1]]],\n      ];\n   }\n</script>\n\n{#if $isOk && axisLine.length > 0}\n<Axis\n   className=\"mdaplot__yaxis\" pos={4}\n   {lineColor} {gridColor} {textColor} {showGrid} {grid} {axisLine}\n   {tickCoords} {tickLabels} {tfCoords} {tickFactor} {las}\n/>\n{/if}","<script>\n   /****************************************************\n   * Box                                               *\n   * --------------------                              *\n   * shows border box around axes                      *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot;  // slot name, must be \"box\"\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // check that the box is located in a correct slot\n   if (slot !== 'box') {\n      throw('Component Box must have \\'slot=\"box\"\\' attribute.')\n   }\n\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // reactive variables for coordinates of box points in pixels\n   $: xx = $isOk ? axes.transform($xLim, $tX.coords) : undefined;\n   $: yy = $isOk ? axes.transform($yLim, $tY.coords) : undefined;\n\n</script>\n\n{#if $isOk}\n   <g style=\"pointer-events:none\" class=\"mdaplot__axes-box\">\n   <rect stroke=\"{Colors.DARKGRAY}\" stroke-width=\"0.1em\" fill=\"transparent\" x={xx[0]} y={yy[1]} width={xx[1] - xx[0]} height={yy[0] - yy[1]} />\n   </g>\n{/if}\n\n","<script>\n   /****************************************************\n   * Rectangles                                        *\n   * --------------------                              *\n   * shows series of rectangles                        *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let left;                          // array of vector with coordinates of left sides of the bars\n   export let top;                           // array of vector with coordinates of top sides of the bars\n   export let width;                         // single value (same for all) or vector/array with bar width\n   export let height;                        // single value (same for all) or vector/array with bar height\n   export let faceColor = Colors.PRIMARY;    // color of bar faces (fill)\n   export let borderColor = faceColor;       // color of bar borders\n   export let lineWidth = 1;                 // width (thickness) of bar border lines\n   export let className = 'series-rect';     // CSS class name of the SVG group\n   export let title = '';                    // title of the rectangle series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   let rx, ry, rw, rh = undefined;\n   $: {\n      if ($isOk) {\n         rx = axes.transform(checkCoords(left, 'Rectangles'), $tX.coords);\n         ry = axes.transform(checkCoords(top, 'Rectangles'), $tY.coords);\n\n         if (rx.length !== ry.length) {\n            throw Error('Rectangles: parameters \"left\" and \"top\" must be vectors of the same length.');\n         }\n\n         if (typeof width !== 'object') {\n            width = Vector.fill(width, left.length);\n         }\n\n         if (typeof height !== 'object') {\n            height = Vector.fill(height, left.length);\n         }\n\n         rw = axes.transform(width, $tX.objects);\n         rh = axes.transform(height, $tY.objects);\n      }\n   }\n\n   // styles for bars and labels\n   $: barsStyleStr = `fill:${faceColor};stroke:${borderColor};stroke-width:${lineWidth}px;`;\n</script>\n\n{#if $isOk}\n   <g class=\"series {className}\" title={title} style={barsStyleStr}>\n   {#each left as v, i}\n      <rect x={rx[i]} y={ry[i]} width={rw[i]} height={rh[i]} />\n   {/each}\n   </g>\n{/if}\n\n\n","<script>\n   /****************************************************\n   * Segments                                          *\n   * --------------------                              *\n   * shows series of line segments                     *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xStart;                        // vector or array with x-coordinates of starting points\n   export let xEnd;                          // vector or array with x-coordinates of end points\n   export let yStart;                        // vector or array with y-coordinates of starting points\n   export let yEnd;                          // vector or array with y-coordinates of end points\n   export let lineColor = Colors.PRIMARY;    // color of segment lines\n   export let lineType = 1;                  // type of segment lines (1 - solid, 2 - dashed, 3 - dotted, 4 - dashdot)\n   export let lineWidth = 1;                 // width (thickness) of segment lines\n   export let className = 'series-seg';      // CSS class name of the SVG group\n   export let title = '';                    // title of the segment series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   let x1, x2, y1, y2 = undefined;\n   $: {\n      if ($isOk) {\n\n         x1 = axes.transform(checkCoords(xStart, 'Segments'), $tX.coords);\n         y1 = axes.transform(checkCoords(yStart, 'Segments'), $tY.coords);\n         x2 = axes.transform(checkCoords(xEnd, 'Segments'), $tX.coords);\n         y2 = axes.transform(checkCoords(yEnd, 'Segments'), $tY.coords);\n\n         const n = x1.length;\n         if (x2.length !== n || y1.length !== n || y2.length !== n) {\n            throw Error('Segments: parameters \"xStart\", \"yStart\", \"xEnd\" and \"yEnd\" should have the same length.');\n         }\n      }\n   }\n\n   // reactive variables for coordinates of data points in pixels (and line style)\n   $: lineStyleStr = `stroke:${lineColor};stroke-width: ${lineWidth}px;stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n</script>\n\n{#if $isOk}\n   <g class=\"series {className}\" title={title} style={lineStyleStr}>\n   {#each x1 as v, i}\n      <line x1={x1[i]} x2={x2[i]} y1={y1[i]} y2={y2[i]} />\n   {/each}\n   </g>\n{/if}\n\n","<script>\n   /****************************************************\n   * TextLabels component                              *\n   * --------------------                              *\n   * shows a series of text labels on the plot         *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                             // vector or array with x-coordinates for each label\n   export let yValues;                             // vector or array with y-coordinates for each label\n   export let labels;                              // array with labels (strings)\n   export let pos = 0;                             // position of labels related to coordinates (middle, bottom, left, top, right)\n   export let faceColor = Colors.PRIMARY_TEXT;     // face color of label symbols\n   export let borderColor = 'transparent';         // border colors of label symbols\n   export let borderWidth = 0;                     // border width of label symbols\n   export let textSize = 1;                        // size of label symbols\n   export let className = 'series-text';           // CSS class name for the labels group\n   export let title = 'series-text';               // title of the labels SVG group\n   export let rotateAngle = 0;                     // angle to rotate labels\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   const textAnchors = ['middle', 'middle', 'start', 'middle', 'end'];\n\n   let x, y = undefined;\n   let dx = 0, dy = 0;\n\n   // reactive calculations triggered by changes in coordinates and plot parameters\n   $: if ($isOk) {\n\n      if (typeof labels === 'string' && typeof pos !== 'number' ) {\n         throw Error('TextLabels: parameter \"labels\" is provided as single string, so \"pos\" must be a single number.');\n      }\n\n      x = axes.transform(checkCoords(xValues, 'TextLabels'), $tX.coords);\n      y = axes.transform(checkCoords(yValues, 'TextLabels'), $tY.coords);\n\n      // sanity check for input parameters\n      if (x.length !== y.length) {\n         throw Error('TextLabels: parameters \"xValues\" and \"yValues\" must be vectors of the same length.');\n      }\n\n      if (Array.isArray(labels) && labels.length !== x.length ) {\n         throw Error('TextLabels: number of elements in \"labels\" does not match number of coordinates.');\n      }\n   }\n\n   // reactive calculations triggered by changes in scale\n   $: {\n      const m = axes.LABELS_MARGIN[$scale];\n      dx = [0, 0, m,  0, -m, m];\n      dy = [0, m, 0, -m, 0, m];\n   }\n\n   // styles for the elements\n   $: textStyleStr = `fill:${faceColor};stroke-width:${borderWidth}px;stroke:${borderColor};font-size:${textSize}em;`;\n</script>\n\n{#if $isOk && x !== undefined && y !== undefined}\n<g class=\"series {className}\" title={title} style={textStyleStr} >\n\n   {#if typeof labels === 'string'}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx[pos]} dy={dy[pos]}\n         transform={rotateAngle !== undefined ? `rotate(${rotateAngle}, ${x[i] + dx[pos]}, ${y[i] + dy[pos]})` : ''}\n         text-anchor={textAnchors[pos[i]]}>{@html labels}</text>\n   {/each}\n\n   {:else if (Array.isArray(pos) || ArrayBuffer.isView(pos))}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx[pos[i]]} dy={dy[pos[i]]} text-anchor={textAnchors[pos[i]]}>{@html labels[i]}</text>\n   {/each}\n\n   {:else}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx[pos]} dy={dy[pos]} text-anchor={textAnchors[pos]}>{@html labels[i]}</text>\n   {/each}\n   {/if}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * Bars                                              *\n   * --------------------                              *\n   * shows series of bars on a plot                    *\n   *****************************************************/\n\n   import { max, diff } from 'mdatools/stat';\n   import { Vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n   import Rectangles from './Rectangles.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                       // vector with x-coordinates of middle points of the bars\n   export let yValues;                       // vector with y-coordinates of top points of the bars\n   export let barWidth = 0.8;                // width of bars as per cent of maximum width\n   export let faceColor = Colors.PRIMARY;    // face color of the bars\n   export let borderColor = Colors.PRIMARY;  // border color of the bars\n   export let title = '';                    // title of the bar series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   let width, left, top, height;\n\n   // reactive code for computing position of left sides and bar width\n   $: {\n\n      if (!barWidth) {\n         barWidth = 0.8;\n      }\n\n      if (barWidth <= 0 || barWidth > 1) {\n         throw Error('BarSeries: parameters \"barWidth\" should be between 0 and 1.');\n      }\n\n      // compute maximum bar width and position of left side\n      const xv = checkCoords(xValues, 'BarSeries');\n      const w = max(diff(xv.v)) * barWidth;\n      left = xv.subtract(w/2);\n      width = Vector.fill(w, xv.length);\n   }\n\n   // reactive code for computing position of top sides and bar height\n   $: {\n\n      const yv = checkCoords(yValues, 'BarSeries');\n      if (yv.length !== left.length) {\n         throw Error('BarSeries: parameters \"yValues\" must be vector of the same length as \"xValues\".');\n      }\n\n      top = yv.apply(v => v > 0 ? v : 0);\n      height = yv.apply(v => Math.abs(v));\n   }\n</script>\n\n<Rectangles className=\"series-bar\" {left} {top} {width} {height} {borderColor} {faceColor} {title} />\n","<script>\n   /****************************************************\n   * Points                                            *\n   * --------------------                              *\n   * shows series of points/markers on a plot          *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                          // array of vector with x-coordinates of points\n   export let yValues;                          // array of vector with y-coordinates of points\n   export let marker = 1                        // index for point symbol (from 1 to 8): \"\", \"\", \"\", \"\", \"\", \"\", \"*\", \"\"\n   export let faceColor = 'transparent';        // face (fill) color of the points\n   export let borderColor = Colors.PRIMARY;     // border color of the points\n   export let borderWidth = 1;                  // width (thickness) of the points\n   export let markerSize = 1;                   // size of the marker symbols\n   export let title = '';                       // title of the point series - required for handling mouse click events\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   let x, y, markerSymbol;\n\n   // reactive calculations triggered by changes in coordinates and plot parameters\n   $: if ($isOk) {\n\n      if (typeof(marker) !== \"number\" || marker < 1 || marker > axes.MARKER_SYMBOLS.length) {\n         throw Error(`Points: parameter \"marker\" must be a number from 1 to ${axes.MARKER_SYMBOLS.length}.`);\n      }\n\n      markerSymbol = axes.MARKER_SYMBOLS[marker - 1];\n\n      x = axes.transform(checkCoords(xValues, 'Points'), $tX.coords);\n      y = axes.transform(checkCoords(yValues, 'Points'), $tY.coords);\n\n      // sanity check for input parameters\n      if (x.length !== y.length) {\n         throw Error('Points: parameters \"xValues\" and \"yValues\" must be vectors of the same length.')\n      }\n   }\n\n   // styles for the elements\n   $: textStyleStr = ['', '', ''].includes(markerSymbol)  ?\n       `fill:${borderColor && borderColor !== 'transparent' ? borderColor : faceColor};stroke-width:0px;font-size:${markerSize}em;` :\n       `fill:${faceColor};stroke-width:${borderWidth}px;stroke:${borderColor}; font-size:${markerSize}em;`;\n\n</script>\n\n{#if $isOk && x !== undefined && y !== undefined}\n<g class=\"series series-points\" title={title} style={textStyleStr} dominant-baseline=\"middle\" text-anchor=\"middle\">\n   {#each x as v, i}\n      <text x={x[i]} y={y[i]}>{markerSymbol}</text>\n   {/each}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * Lines                                             *\n   * --------------------                              *\n   * shows lines connected sequence of points          *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { val2p } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                       // vector or array with x-coordinates of the points\n   export let yValues;                       // vector or array with y-coordinates of the points\n   export let lineWidth = 1;                 // width (thickness) of the lines\n   export let lineColor = Colors.PRIMARY;    // color of the lines\n   export let lineType = 1;                  // type of the lines (1 - solid, 2 - dashed, 3 - dotted, 4 - dashdot)\n   export let title = '';                    // title of the bar series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context\n   const axes = getContext('axes');\n\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // compute polynomial coordinates as string\n   $: p = $isOk ? val2p(xValues, yValues, $tX, $tY, axes) : undefined;\n\n   // reactive variables for coordinates of data points in pixels\n   $: lineStyleStr = `fill:transparent;stroke:${lineColor};stroke-width: ${lineWidth}px; stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n</script>\n\n{#if $isOk && p !== undefined}\n   <g class=\"series series-line\" style={lineStyleStr} title={title}>\n      <polyline class=\"line\" points={p}/>\n   </g>\n{/if}\n\n","<script>\n   /****************************************************\n   * Legend                                            *\n   * --------------------                              *\n   * shows legend for plot components                  *\n   *****************************************************/\n\n   import { mean } from 'mdatools/stat';\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let items;                 // array with text labels for each legend element\n\texport let position = \"topleft\";  // position of the legend (\"topleft\", \"top\", \"topright\", \"right\", \"bottomright\", etc).\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n\n   /**\n    * Computes width of text element for given font.\n    *\n    * @param {string} text - string with text\n    * @param {string} font - font name and size, e.g. '12px Arial'\n    *\n    * @return {number} size of element in pixels\n    */\n   function getTextWidth(text, font) {\n      const element = document.createElement('canvas');\n      const context = element.getContext('2d');\n      context.font = font;\n      return context.measureText(text.replace(/<(.|\\n)*?>/g, '')).width;\n   }\n\n   /**\n    * Compute size of main legend elements.\n    *\n    * @param {Array} items - array of legend items and their properties.\n    * @param {number} fontSize - font size of a legend element.\n    * @param {string} position - position of the legend.\n    *\n    * @return {Array} array with height and width og graphical part of legend item, padding size,\n    * height and width of text labels (all in pixels).\n    */\n   function getLegendSize(items, fontSize, position)  {\n\n      // compute size of graphical elements\n      const elHeight = fontSize;       // height of legend element without padding\n      const elPadding = elHeight / 4;  // top and bottom padding\n      const elWidth = elHeight * 1.5;  // width of legend element without padding\n\n      // compute size of text label elements\n      // TODO: implement one row legend if position is \"top\" or \"bottom\"\n      const lbHeight = elHeight;\n      let lbWidth = 0;\n      for (let i = 0; i < items.length; i++) {\n         const w = getTextWidth('  ' + items[i].label + '  ', fontSize + 'px Arial');\n         lbWidth = w > lbWidth ? w : lbWidth;\n      }\n\n      return [elHeight, elWidth, elPadding, lbHeight, lbWidth];\n   }\n\n   // reactive expression to compute all sizes and coordinates\n   let left, top, elHeight, elWidth, elPadding, lbHeight, lbWidth, legendHeight, legendWidth, fontSize;\n   $: if ($isOk) {\n\n      fontSize = axes.LEGEND_FONT_SIZE[$scale];\n\n      // compute size of elements\n      [elHeight, elWidth, elPadding, lbHeight, lbWidth] = getLegendSize(items, fontSize, position);\n\n      // compute size of whole legend box\n      legendHeight = (elHeight + 2 * elPadding) * items.length;\n      legendWidth = (elWidth + 2 * elPadding + lbWidth);\n\n      // compute coordinates of top left corner of the legend box\n      const xLimPx = axes.transform($xLim, $tX.coords);\n      left = position.includes(\"left\") ? xLimPx[0] + axes.TICK_SIZE[$scale] :\n          position.includes(\"right\") ? xLimPx[1] - legendWidth - axes.TICK_SIZE[$scale] :\n          mean(xLimPx) - legendWidth/2;\n\n      const yLimPx = axes.transform($yLim, $tY.coords);\n      top = position.includes(\"top\") ? yLimPx[1] + axes.TICK_SIZE[$scale] :\n          position.includes(\"bottom\") ? yLimPx[0] - legendHeight - axes.TICK_SIZE[$scale] :\n          mean(yLimPx) - legendHeight/2;\n   }\n</script>\n\n{#if $isOk }\n\n<!-- outer legend box, background and frame -->\n<svg x=\"{left}px\" y=\"{top}px\" height=\"{legendHeight}px\" width=\"{legendWidth}\">\n<rect height=\"100%\" width=\"100%\" fill=\"white\" stroke=\"{Colors.MIDDLEGRAY}\"></rect>\n\n{#each items as item, i}\n\n<!-- individual legend item -->\n<svg x=\"{0}px\" y=\"{i * (elHeight + 2 * elPadding)}px\" width=\"{legendWidth}px\" height=\"{elHeight + 2 * elPadding}px\">\n\n   <style>\n   .legend-text,\n   .legend-text tspan {\n      dominant-baseline: hanging;\n   }\n   </style>\n\n   <!-- line -->\n   {#if item.lineType && item.lineType > 0 && item.lineType <= 4}\n   <line x1={elPadding} x2={elPadding + elWidth} y1={(elHeight + elPadding * 2)/2} y2={(elHeight + elPadding * 2)/2} stroke=\"{item.lineColor ? item.lineColor : Colors.PRIMARY}\" stroke-width=\"{item.lineWidth ? item.lineWidth : 1}px\" stroke-dasharray=\"{axes.LINE_STYLES[$scale][item.lineType - 1]}\"/>\n   {/if}\n\n   <!-- marker -->\n   {#if item.marker && item.marker > 0 && item.marker < axes.MARKER_SYMBOLS.length}\n   <text x=\"{(elWidth + 2 * elPadding)/2}px\" y=\"{(elHeight + 2 * elPadding)/2}px\"\n      dominant-baseline=\"middle\" fill=\"{item.faceColor ? item.faceColor : 'transparent'}\" stroke-width=\"{item.borderWidth ? item.borderWidth : 1}px\" stroke=\"{item.borderColor ? item.borderColor : Colors.PRIMARY}\" font-size=\"{fontSize}px\" text-anchor=\"middle\">{axes.MARKER_SYMBOLS[item.marker - 1]}</text>\n   {/if}\n\n\n   <!-- text -->\n   <text class=\"legend-text\" xml:space=\"preserve\" x=\"{elWidth + elPadding * 3}px\" y=\"{elPadding}px\" text-anchor=\"start\" fill=\"{Colors.LEGEND}\" font-size=\"{fontSize}px\"> {@html item.label}</text>\n\n</svg>\n{/each}\n</svg>\n{/if}\n","<script>\n   /*********************************************************\n   * ColormapLegend                                         *\n   * --------------------                                   *\n   * shows color map legend on a plot                       *\n   **********************************************************/\n\n   import { getContext } from 'svelte';\n   import { checkCoords } from '../Utils';\n   import { Vector, isvector } from 'mdatools/arrays';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let breaks;                  // vector with breaks for color intervals or vector with their indices\n   export let colmap;                  // array with colors for each interval\n   export let decNum = 1;              // number of decimals to show the interval boundaries with\n   export let labels = null;           // optional vector with labels for interval boundaries or elements\n   export let labelColor = '#909090';  // color of labels\n   export let fontSize = 0.85;         // font size for labels in em\n\n   // if number of breaks is the same as number of elements in color map\n   // the corresponding labels will be placed in the middle inder each color element in the legend\n   // if this number is by one larger, the labels will be placed on the boundaries\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // constant parameters\n   const WIDTH_RATIO = 0.80;    // legend will span 80% of plot width\n   const HEIGHT_RATIO = 0.02;   // legend will span 2% of plot height\n   const TOP_MARGIN = 0.25;     // legend top margin is 25% of its height\n\n   // height of the legend elements in pixels\n   const EL_HEIGHTS_PX = {'small': 5, 'medium': 8, 'large': 12, 'xlarge': 15};\n\n   // check breaks values\n   $: if (!breaks || breaks.length < 2) {\n      throw new Error('ColormapLegend: breaks values must be provided.');\n   }\n\n   // check colormap values\n   $: if (!colmap || !(colmap.length === breaks.length - 1 || colmap.length === breaks.length )) {\n      console.log(colmap)\n      console.log(breaks)\n      console.log(labels)\n      throw new Error('ColormapLegend: number of color values in colormap does not match number of intervals defined by breaks.');\n   }\n\n   // define local variables for breaks and prepare breaks labels\n   $: lBreaks = isvector(breaks) ? breaks.v : breaks;\n   $: lLabels = labels && labels.length === lBreaks.length ?\n         labels :\n         Array.from(lBreaks).map(v => v.toFixed(decNum).toString());\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n\n   // number of elements\n   $: n = colmap.length;\n   $: isCentered = lLabels && lLabels.length === n;\n\n   // compute screen coordinates of the elements\n   let dxl, rx, ry, rw, rh = undefined;\n   $: {\n      if ($isOk) {\n         // compute size of the whole block in plot coordinates\n         const axesWidth = $xLim[1] - $xLim[0];\n         const axesHeight = $yLim[1] - $yLim[0];\n         const width = axesWidth * WIDTH_RATIO;\n         const height = axesHeight * HEIGHT_RATIO;\n\n         // compute elements size and position\n         const elWidth = width / n;\n         const left = $xLim[0] + axesWidth * (1 - WIDTH_RATIO) * 0.5 ;\n         const elTop = $yLim[1] - height * TOP_MARGIN;\n\n         // compute screen coordinates and sized\n         ry = axes.transform(checkCoords([elTop], 'Rectangles'), $tY.coords);\n         rx = axes.transform(Vector.seq(0, n).apply(v => left + v * elWidth), $tX.coords);\n         rw = axes.transform([elWidth], $tX.objects);\n         rh = EL_HEIGHTS_PX[$scale];\n         dxl = isCentered ? rw[0] / 2 : 0\n      }\n   };\n</script>\n\n{#if $isOk && rx.length > 0}\n   <g class=\"series colormap_legend\" style=\"stroke:0;stroke-width:0px;\">\n   {#each colmap as col, i}\n      <rect x={rx[i]} y={ry} width={rw} height={rh} fill=\"{col}\"/>\n      <text x={rx[i]} y={ry} dx={dxl} dy={rh * 1.25} dominant-baseline=\"hanging\" fill={labelColor} font-size=\"{fontSize}em\" text-anchor=\"middle\">{@html lLabels[i]}</text>\n   {/each}\n   {#if !isCentered}\n   <text x={rx[n]} y={ry} dx={0} dy={rh * 1.25} dominant-baseline=\"hanging\" fill={labelColor} font-size=\"{fontSize}em\" text-anchor=\"middle\">{@html lLabels[n]}</text>\n   {/if}\n   </g>\n{/if}\n\n\n\n","// default plot settings\nexport const MARGINS = [0.85, 1.0, 0.25, 0.25];\n\n// default colors for SIMCA categories\nexport const CAT_COLORS = {\n   'regular': '#2679B2',\n   'extreme': '#F2B825',\n   'outlier': '#D22C2F', 'outliers': '#D22C2F',\n   'alien': '#2679B2', 'aliens': '#2679B2',\n   'external': '#D22C2F'\n};\n\n// default colors for series\nexport const LINE_COLORS = {'cal': '#2679B2', 'pv': '#D22C2F', 'target': '#2679B2', 'alt': '#2679B2'};\nexport const FACE_COLORS = {'cal': '#f0f8ff', 'pv': '#fff8f0', 'target': '#f0f8ff', 'alt': '#f0f8ff'};\nexport const LABELS_COLOR = '#a0a0a0';\nexport const LABELS_COLOR_SELECTED = '#909090';\n\n// default parameters to save plots as PNG file\nexport const PNG_WIDTH = 8;   // cm\nexport const PNG_HEIGHT = 8;  // cm\nexport const PNG_RES = 600;   // pixels per inch\n\n/**\n * Returns array with colors for given number of categories.\n * @param {number} n - number of categories (between 1 nd 16).\n * @returns {Array}\n */\nfunction getColors(n) {\n   if (n ==  1) return [\"#2679B2\"];\n   if (n ==  2) return [\"#2679B2\", \"#D22C2F\"];\n   if (n ==  3) return [\"#2679B2\", \"#92B42A\", \"#D22C2F\"];\n   if (n ==  4) return [\"#2679B2\", \"#2E9658\", \"#F2B825\", \"#D22C2F\"];\n   if (n ==  5) return [\"#2679B2\", \"#22988A\", \"#92B42A\", \"#F79426\", \"#D22C2F\"];\n   if (n ==  6) return [\"#2679B2\", \"#1C9AA8\", \"#379531\", \"#EED524\", \"#FB7F28\", \"#D22C2F\"];\n   if (n ==  7) return [\"#2679B2\", \"#1D94A9\", \"#2E9658\", \"#92B42A\", \"#F2B825\", \"#F47129\", \"#D22C2F\"];\n   if (n ==  8) return [\"#2679B2\", \"#1E90AA\", \"#279775\", \"#519E2F\", \"#D3CB25\", \"#F5A326\", \"#EF672A\", \"#D22C2F\"];\n   if (n ==  9) return [\"#2679B2\", \"#1F8DAB\", \"#22988A\", \"#33953F\", \"#92B42A\", \"#EFCA24\", \"#F79426\", \"#EB5F2A\", \"#D22C2F\"];\n   if (n == 10) return [\"#2679B2\", \"#208BAC\", \"#1E999A\", \"#2E9658\", \"#5FA32E\", \"#C5C626\", \"#F2B825\", \"#F98827\", \"#E85A2B\", \"#D22C2F\"];\n   if (n == 11) return [\"#2679B2\", \"#2089AD\", \"#1C9AA8\", \"#29976C\", \"#379531\", \"#92B42A\", \"#EED524\", \"#F4AA26\", \"#FB7F28\",\n      \"#E6552B\", \"#D22C2F\"];\n   if (n == 12) return [\"#2679B2\", \"#2188AD\", \"#1C97A8\", \"#25987C\", \"#329546\", \"#68A62D\", \"#BCC327\", \"#F0C524\", \"#F69E26\",\n      \"#F77728\", \"#E4512B\", \"#D22C2F\"];\n   if (n == 13) return [\"#2679B2\", \"#2186AD\", \"#1D94A9\", \"#22988A\", \"#2E9658\", \"#469A2F\", \"#92B42A\", \"#DECF25\", \"#F2B825\",\n      \"#F79426\", \"#F47129\", \"#E34E2C\", \"#D22C2F\"];\n   if (n == 14) return [\"#2679B2\", \"#2285AE\", \"#1E92AA\", \"#209995\", \"#2A9767\", \"#34953A\", \"#6FA82D\", \"#B5C128\", \"#EFCE24\", \"#F3AD25\",\n      \"#F98C27\", \"#F16B29\", \"#E14B2C\", \"#D22C2F\"];\n   if (n == 15) return [\"#2679B2\", \"#2284AE\", \"#1E90AA\", \"#1D999F\", \"#279775\", \"#31964A\", \"#519E2F\", \"#92B42A\", \"#D3CB25\", \"#F0C224\",\n      \"#F5A326\", \"#FA8527\", \"#EF672A\", \"#E0492C\", \"#D22C2F\"];\n\n   // if n > 15 return 16 colors\n   return [\"#2679B2\", \"#2283AE\", \"#1F8FAB\", \"#1C9AA8\", \"#249880\", \"#2E9658\", \"#379531\", \"#73AA2C\", \"#B0BF28\", \"#EDD424\", \"#F2B825\",\n      \"#F69B26\", \"#FB7F28\", \"#ED632A\", \"#DF472C\", \"#D22C2F\"];\n}\n\n/**\n * Returns JSON with color for each class category\n * @param {Array} classNames - array with unique class names\n * @returns {Object}\n */\nexport function getClassColors(classNames) {\n   const n = classNames.length;\n   if (n < 1 || n > 16) {\n      throw Error(\"getClassColors: can not create color map for more than 16 categories.\");\n   }\n\n   const colors = getColors(n);\n   const out = classNames.reduce((acc, curr, index) => {\n      acc[curr] = colors[index];\n      return acc;\n   }, {});\n   return out;\n}\n\n/**\n * Returns JSON with x and y coordinates, legend item, colors and axis limits for a particular\n * statistic (e.g. sensitivity, specificity, etc) of result object.\n *\n * @param {Object} resobj - JSON with one or several result objects (SIMCA, PCA, etc.).\n * @param {string} id - ID of the object to compute the series values for (e.g. \"cal\" or \"pv\").\n * @param {string} statName - name of statistic to extract (e.g. \"sens\").\n * @returns {Object}\n */\nexport function getSeries(resobj, id, statName) {\n\n   if (!resobj || !id) return null;\n\n   if (!Object.keys(resobj).includes(id)) {\n      throw Error('getSeries: the result object has no element with ID: \"' + id + '\"');\n   }\n\n   const res = resobj[id];\n\n   const ncomp = res.v.length;\n   const y = Array(ncomp);\n   const x = Array(ncomp);\n   let yMin = 9999999999;\n   let yMax = -999999999;\n\n   for (let a = 0; a < ncomp; a++) {\n      const ya = res.v[a].stat[statName];\n      x[a] = a + 1;\n      y[a] = ya;\n      yMin = Math.min(yMin, ya);\n      yMax = Math.max(yMax, ya);\n   }\n\n   const legendItem = {label: id, marker: 1, borderColor: LINE_COLORS[id], faceColor: FACE_COLORS[id]};\n   const lineColor = LINE_COLORS[id];\n   const faceColor = FACE_COLORS[id];\n   return {x, y, legendItem, lineColor, faceColor, yMin, yMax};\n}","<script>\n   /****************************************************************\n   * SensitivityPlot                                               *\n   * --------------------                                          *\n   * shows plot with sensitivity values vs. number of PCs          *\n   *****************************************************************/\n\n   import { Axes, XAxis, YAxis, Box, Lines, Segments, Legend, Rectangles, Points } from 'svelte-plots-basic/2d';\n   import { PNG_WIDTH, PNG_HEIGHT, PNG_RES, MARGINS, getSeries } from './Defaults.js';\n\n   export let params;                     // JSON with main plot parameters\n   export let simcares;                   // JSON with SIMCA results\n   export let ncomp = 1;                  // number of components selected by user\n\n   export let fileName = 'plot-sensitivity';\n   export let pngWidth = PNG_WIDTH;\n   export let pngHeight = PNG_HEIGHT;\n   export let pngRes = PNG_RES;\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // constant plot parameters\n   const showGrid = true;                  // logical, show grid or not\n   const xLabel = 'Number of PCs';\n   const yLabel = 'Sensitivity';\n   const title = 'Sensitivity plot';\n\n   // parameters depending on the provided results\n   let resIDs, amargin, aline, nCompMax;\n   $: if (simcares) {\n      resIDs = Object.keys(simcares);\n      const nObj = simcares[resIDs[0]].nrows;\n      const alpha = simcares[resIDs[0]].alpha;\n      nCompMax = simcares[resIDs[0]].v.length;\n      aline = 1 - alpha/100;\n      amargin = 2 * Math.sqrt(alpha/100 * (1 - alpha/100) / nObj);\n   } else {\n      resIDs = null;\n      aline = 0;\n      amargin = 0;\n   }\n\n   let series, legendItems;\n   $: if (resIDs && params && params.resID) {\n      series = params.resID === 'both' ?\n         resIDs.map(id => getSeries(simcares, id, 'sensitivity')) :\n         [getSeries(simcares, params.resID, 'sensitivity')];\n      legendItems = series.map(s => s.legendItem);\n   } else {\n      series = null;\n      legendItems = null;\n   }\n\n   // reactive computation of confidence area\n   $: atop = amargin + aline;\n   $: abottom = aline - amargin;\n\n   // reactive computation of y limits\n   $: limYMin = params && params.zoom === 'on' ? abottom - 0.5 * amargin : -0.1;\n   $: limYMax = params && params.zoom === 'on' ? atop + 0.5 * amargin : 1.2;\n\n</script>\n\n{#if series }\n<Axes {title} {xLabel} {yLabel}\n   {fileName} {pngWidth} {pngHeight} {pngRes}\n   downloadLinks=\"hover\"\n   margins={MARGINS}\n   limX={[0, nCompMax + 1]}\n   limY={[limYMin, limYMax]}>\n\n   <!-- area with possible sensitivity -->\n   <Rectangles left={[0]} width={[nCompMax + 1]} top={[atop]} height={[2 * amargin]} faceColor='#00000010'/>\n   <Segments xStart={[0]} xEnd={[nCompMax + 1]} yStart={[aline]} yEnd={[aline]} lineColor='#00000050' lineType={2}/>\n\n   <!-- selected component -->\n   <Segments xStart={[ncomp]} xEnd={[ncomp]} yStart={[-1]} yEnd={[1.2]} lineColor='#a0a0a0' />\n\n   <!-- data points -->\n   {#each series as s}\n   <Lines xValues={s.x} yValues={s.y} lineWidth={1.5} lineColor={s.lineColor} />\n   <Points xValues={s.x} yValues={s.y} borderWidth={1.5} faceColor={s.faceColor} borderColor={s.lineColor}/>\n\n   <!-- selected component (point) -->\n   <Points\n      xValues={[s.x[ncomp - 1]]}\n      yValues={[s.y[ncomp - 1]]}\n      markerSize={1.5}\n      borderWidth={1.5}\n      faceColor={s.lineColor}\n      borderColor='#a0a0a0'\n   />\n   {/each}\n\n   {#if legendItems && legendItems.length > 0}\n   <Legend items={legendItems} position='topright'/>\n   {/if}\n\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /****************************************************************\n   * ExtremePlot                                                   *\n   * --------------------                                          *\n   * shows plot with number of extreme samples for different alpha *\n   *****************************************************************/\n\n   import { pchisq } from 'mdatools/distributions';\n   import { Vector } from 'mdatools/arrays';\n   import { Axes, XAxis, YAxis, Box, Lines, Segments, Legend, Points } from 'svelte-plots-basic/2d';\n   import { PNG_WIDTH, PNG_HEIGHT, PNG_RES, MARGINS, LINE_COLORS, FACE_COLORS } from './Defaults.js';\n\n   export let params;                                    // JSON with main plot parameters\n   export let simcares;                                  // JSON with SIMCA results\n   export let showGrid = true;                           // logical, show grid or not\n   export let xLabel = 'Number of extremes (expected)';  // label for x axis\n   export let yLabel = 'Number of extremes (observed)';  // label for y axis\n   export let ncomp = 1;                                 // number of components selected by user\n\n   // plot saving parameters\n   export let fileName = 'plot-extreme';\n   export let pngWidth = PNG_WIDTH;\n   export let pngHeight = PNG_HEIGHT;\n   export let pngRes = PNG_RES;\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   const CONFIDENCE_AREA_COLOR = \"#e0e0e0\";\n\n   // local copies of Plot parameters\n   //let resID = simcares ? Object.keys(simcares)[0] : '';\n\n   // function to compute observed extremes\n   function getObserved(res, id, ncomp) {\n      const v = res.v[ncomp - 1];\n      const n = v.f.length;\n      let observed = Vector.zeros(n);\n      for (let i = 0; i < n; i++) {\n         const pi = pchisq(v.f[i], v.Nf);\n         observed = observed.add((alpha.apply(v => 1 - pi < v)));\n      }\n\n      const legendItem = {label: id, marker: 1, borderColor: LINE_COLORS[id], faceColor: FACE_COLORS[id]};\n      const lineColor = LINE_COLORS[id];\n      const faceColor = FACE_COLORS[id];\n\n      return {\n         values: observed,\n         legendItem,\n         lineColor,\n         faceColor\n      };\n   }\n\n   $: resIDs = simcares ? Object.keys(simcares) : null;\n   $: title = ncomp ? 'Extremes plot (A = ' + ncomp + ')' : '';\n   $: nObj = simcares ? simcares[Object.keys(simcares)[0]].nrows : null;\n\n   // compute expected values values\n   let expected, Nm, Np, alpha;\n   $: if (nObj) {\n      alpha = Vector.zeros(nObj);\n      expected = Vector.zeros(nObj);\n      Nm = Vector.zeros(nObj);\n      Np = Vector.zeros(nObj);\n\n      for (let i = 1; i <= nObj; i++) {\n         const a = i / nObj;\n         const D = 2 * Math.sqrt(i * (1 - a));\n         Nm.v[i - 1] = i - D;\n         Np.v[i - 1] = i + D;\n         alpha.v[i - 1] = a;\n         expected.v[i - 1] = i;\n      }\n\n   } else {\n      expected = null;\n      Nm = null;\n      Np = null;\n      alpha = null;\n   }\n\n   let observed, legendItems;\n   $: if (resIDs && params && params.resID && ncomp && alpha) {\n      observed = params.resID === 'both' ?\n         resIDs.map(id => getObserved(simcares[id], id, ncomp)) :\n         [getObserved(simcares[params.resID], params.resID, ncomp)];\n      legendItems = observed.map(o => o.legendItem);\n   } else {\n      observed = null;\n      legendItems = null;\n   }\n\n</script>\n\n{#if expected && observed }\n<Axes {title} {xLabel} {yLabel}\n   {fileName} {pngWidth} {pngHeight} {pngRes}\n   downloadLinks=\"hover\"\n   margins={MARGINS}\n   limX={[-1, nObj + 2]}\n   limY={[-1, nObj + 2]}\n>\n\n   <Lines xValues={expected} yValues={expected} lineColor={CONFIDENCE_AREA_COLOR} />\n   <Lines xValues={expected} yValues={Nm} lineColor={CONFIDENCE_AREA_COLOR} />\n   <Lines xValues={expected} yValues={Np} lineColor={CONFIDENCE_AREA_COLOR} />\n   <Segments xStart={expected} xEnd={expected} yStart={Nm} yEnd={Np}  lineColor={CONFIDENCE_AREA_COLOR} />\n\n   {#each observed as o}\n   <Points xValues={expected} yValues={o.values} borderWidth={1.5} borderColor={o.lineColor} />\n   {/each}\n\n   {#if legendItems && legendItems.length > 0}\n   <Legend items={legendItems} position='bottomright'/>\n   {/if}\n\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /*************************************************************\n   * AcceptancePlotSeries                                       *\n   * --------------------                                       *\n   * shows plot with score and orthogonal distances             *\n   **************************************************************/\n\n   import { Vector } from 'mdatools/arrays';\n   import { getContext } from 'svelte';\n   import { LABELS_COLOR, CAT_COLORS, getClassColors } from './Defaults.js';\n\n   export let resobj;                     // JSON with SIMCA results\n   export let transType = 'no';           // transformation type\n   export let showLabels = 'hide';        // show labels or not?\n   export let xMax = 0;                   // to return maximum x-coordinate for series\n   export let yMax = 0;                   // to return maximum y-coordinate for series\n   export let selected;                   // selected sample\n   export let scope = 'objects';          // plot scope ('objects' or 'variables')\n   export let ncomp = 1;                  // number of components selected by user\n   export let isAlt = false;              // acceptance plot for members or alternative?\n   export let colorBy = 'roles';          // how to color group data points ('roles' or 'classes')\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   // define colors for the points\n   $: catColors = colorBy == 'classes' ? getClassColors(resobj.classNames) : CAT_COLORS;\n\n   // convert array with colors to JSON with categories as keys\n   $: pch = isAlt ? '' : '';\n\n   // reactive calculations for distance values\n   let xd, yd, c, l, t, max_xd, max_yd;\n   $: if (resobj && ncomp > 0) {\n\n      // define a shortcut to make subsets easier\n      const res = resobj.v[ncomp - 1];\n\n      // select distances to show and their scales\n      let res_xd, res_yd, res_xd0, res_yd0, cat;\n      if (scope === 'objects') {\n         res_xd = res.h;\n         res_yd = res.q;\n         res_xd0 = res.h0;\n         res_yd0 = res.q0;\n         c = Array(resobj.nrows);\n         l = resobj.labels;\n         cat = isAlt ? (colorBy == 'roles' ? res.a : resobj.classes) : res.c;\n      } else {\n         res_xd = res.g;\n         res_yd = res.r;\n         res_xd0 = res.g0;\n         res_yd0 = res.r0;\n         c = Array(resobj.ncols);\n         l = resobj.varlabels;\n         cat = Array(resobj.ncols).fill('regular')\n      }\n\n      // prepare vectors for transformed distances\n      const n = res_xd.length;\n      xd = Vector.zeros(n);\n      yd = Vector.zeros(n);\n      max_xd = 0;\n      max_yd = 0;\n\n      if (transType === 'log') {\n         for (let i = 0; i < n; i++) {\n            xd.v[i] = Math.log(1 + res_xd[i]/res_xd0);\n            yd.v[i] = Math.log(1 + res_yd[i]/res_yd0);\n            max_xd = Math.max(max_xd, xd.v[i]);\n            max_yd = Math.max(max_yd, yd.v[i]);\n            c[i] = catColors[cat[i]];\n         }\n      } else {\n         for (let i = 0; i < n; i++) {\n            xd.v[i] = res_xd[i]/res_xd0;\n            yd.v[i] = res_yd[i]/res_yd0;\n            max_xd = Math.max(max_xd, xd.v[i]);\n            max_yd = Math.max(max_yd, yd.v[i]);\n            c[i] = catColors[cat[i]];\n         }\n      }\n\n      xMax = max_xd;\n      yMax = max_yd;\n   } else {\n      xd = null;\n      yd = null;\n      c = null;\n      l = null;\n   }\n   // reactive calculations for coordinates\n   let x, y\n   $: if ($isOk && xd && yd) {\n      x = axes.transform(xd, $tX.coords);\n      y = axes.transform(yd, $tY.coords);\n   } else {\n      x = null;\n      y = null;\n   }\n\n   const ptStyle = `font-size:1em;fill:none;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`;\n   const lbStyle = `font-size:0.85em;fill:${LABELS_COLOR};text-anchor:middle;cursor:default;stroke:${LABELS_COLOR};stroke-width:0.1px;user-select:none;`;\n   const slStyle = `font-size:1.2em;fill:none;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;`;\n\n</script>\n\n{#if $isOk && x && y}\n\n   <g class=\"series series-points\" title=\"distance-points\" style={ptStyle} dominant-baseline=\"middle\" text-anchor=\"middle\">\n   {#each x as v, i}\n      <text x={x[i]} y={y[i]} stroke={c[i]}>{pch}</text>\n   {/each}\n   </g>\n\n   {#if showLabels === 'show' && l && l.length > 0}\n   <g class=\"series series-labels\" title=\"distance-labels\" style={lbStyle} dominant-baseline=\"middle\" text-anchor=\"middle\">\n      {#each x as v, i}\n         <text x={x[i]} y={y[i]} dy={-12}>{l[i]}</text>\n      {/each}\n   </g>\n   {/if}\n\n   {#if selected >= 0}\n      <rect x={0} y={0} width={'100%'} height={'100%'} fill=\"#ffffffa0\" />\n      <g class=\"series series-points\" title=\"distance-points\" style={slStyle} dominant-baseline=\"middle\" text-anchor=\"middle\">\n      <text x={x[selected]} y={y[selected]} stroke={c[selected]} >{pch}</text>\n      </g>\n\n      {#if showLabels === 'show' && l && l.length > 0}\n      <g class=\"series series-labels\" title=\"distance-labels\" style={lbStyle} dominant-baseline=\"middle\" text-anchor=\"middle\">\n         <text x={x[selected]} y={y[selected]} dy={-12}>{l[selected]}</text>\n      </g>\n      {/if}\n\n   {/if}\n{/if}\n\n","<script>\n   /*********************************************************\n   * AcceptancePlotLegend                                   *\n   * --------------------                                   *\n   * shows color map legend on Acceptance plot              *\n   **********************************************************/\n\n   import { ColormapLegend } from 'svelte-plots-basic/2d';\n   import { CAT_COLORS, getClassColors } from './Defaults.js';\n\n   export let resobj;               // SIMCA result object\n   export let ncomp = 1;            // number of components selected by user\n   export let isAlt = false;        // predictions for target class or alternative?\n   export let colorBy = 'roles';    // how to color group data points ('roles' or 'classes')\n\n   /**\n    * Returns JSON with every reference class and number of samples in that class\n    * @param resobj - JSON with SIMCA result object\n    */\n   function getClassCategories(resobj) {\n      if (!resobj || !resobj.classNames || !resobj.classes || resobj.classNames.length < 1) return null;\n      return resobj.classes.reduce((acc, curr) => {\n         acc[curr] = (acc[curr] || 0) + 1;\n         return acc;\n      }, {});\n   }\n\n   // categories and colors for classes\n   $: classCategories = getClassCategories(resobj);\n   $: classColmap = classCategories ? getClassColors(resobj.classNames) : null;\n   $: catColors = colorBy === 'roles' ? CAT_COLORS : classColmap;\n\n   // categories, colors and labels for the legend\n   $: categories = resobj ?\n      (\n         isAlt ?\n         (colorBy === 'roles' ? resobj.v[ncomp - 1].anum : classCategories) :\n         resobj.v[ncomp - 1].cnum\n      )\n      : null;\n   $: labels = categories ? Object.keys(categories).map(v => v + ': ' + categories[v]) : null;\n   $: colmap = categories ? Object.keys(categories).map(v => catColors[v]) : null;\n   $: breaks = labels ? labels.map((v, i) => i) : null;\n</script>\n\n<ColormapLegend {colmap} {breaks} labels={labels}/>\n\n\n\n","<script>\n   /*************************************************************\n   * AcceptancePlotLimits                                       *\n   * --------------------                                       *\n   * shows plot with acceptance limits for extreme and outliers *\n   **************************************************************/\n\n   import { Lines } from 'svelte-plots-basic/2d';\n   import { Vector } from 'mdatools/arrays';\n\n   export let resobj;                    // JSON with SIMCA results\n   export let transType = 'no';          // transformation type ('log' or 'none')\n   export let xMax = 0;                  // max value for x-coordinates of limits\n   export let yMax = 0;                  // max value for y-coordinates of limits\n   export let scope = 'objects';         // plot scope\n   export let ncomp = 1;                 // number of components selected by user\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   const NPOINTS = 100;             // number of points in limit lines\n   const LINE_COLOR = '#909090';    // color of the lines\n\n\n   // function computes x and y coordinates for given critical value\n   function get_limit_coordinates(crit, Nx, Ny, transType) {\n      // show limit for orthogonal and score distance\n      const b0 = crit/Ny;\n      const b1 = -Nx / Ny;\n      const xMax = -b0 / b1;\n      const x = Vector.seq(0, xMax * 1, xMax  / NPOINTS);\n      const y = x.apply(v => v * b1 + b0);\n      return {\n         x:  transType === 'log' ? x.apply(v => Math.log(1 + v)) : x,\n         y:  transType === 'log' ? y.apply(v => Math.log(1 + v)) : y\n      }\n   }\n\n   let els = null, ols = null;\n   $: if (resobj && ncomp) {\n      let Nx, Ny, oCrit, eCrit;\n      const res = resobj.v[ncomp - 1];\n      if (scope === 'objects') {\n         Nx = res.Nh;\n         Ny = res.Nq;\n         oCrit = res.oCrit;\n         eCrit = res.eCrit;\n      } else {\n         Nx = res.Ng;\n         Ny = res.Nr;\n         oCrit = res.voCrit;\n         eCrit = res.veCrit;\n      }\n      els = get_limit_coordinates(eCrit, Nx, Ny, transType);\n      ols = get_limit_coordinates(oCrit, Nx, Ny, transType);\n      xMax = ols.x.v[NPOINTS - 1];\n      yMax = ols.y.v[0];\n   } else {\n      els = null;\n      ols = null;\n      xMax = 1;\n      yMax = 1;\n   }\n</script>\n\n{#if els }\n<Lines xValues={els.x} yValues={els.y} lineColor={LINE_COLOR} lineType={2} />\n{/if}\n\n{#if ols }\n<Lines xValues={ols.x} yValues={ols.y} lineColor={LINE_COLOR} lineType={3} />\n{/if}\n","<script>\n   /*************************************************************\n   * AcceptancePlot/ImportancePlot for training app             *\n   * --------------------                                       *\n   * shows plot with score and orthogonal distances             *\n   * and acceptance areas  (both for objects and variables)     *\n   **************************************************************/\n\n   import { max } from 'mdatools/stat';\n   import { Axes, XAxis, YAxis, Box } from 'svelte-plots-basic/2d';\n\n   import AcceptancePlotSeries from './AcceptancePlotSeries.svelte';\n   import AcceptancePlotLegend from './AcceptancePlotLegend.svelte';\n   import AcceptancePlotLimits from './AcceptancePlotLimits.svelte';\n\n   import { PNG_WIDTH, PNG_HEIGHT, PNG_RES, MARGINS } from './Defaults.js';\n\n   export let params;                     // JSON with main plot parameters\n   export let simcares;                   // JSON with SIMCA results\n   export let ncomp = 1;                  // number of components selected by user\n   export let selected = undefined;       // selected object or variable\n\n   export let fileName = null;\n   export let pngWidth = PNG_WIDTH;\n   export let pngHeight = PNG_HEIGHT;\n   export let pngRes = PNG_RES;\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // constant plot parameters\n   const showGrid = true;\n\n   // scope (comes from plot settings) defines which distance to use\n   // 'objects' h/q distances\n   // 'variables' g/r distances\n   let scope = 'objects';\n\n   // local copies of other plot parameters\n   let transType = 'no';\n   let showLabels = 'no';\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n   let isAlt = false;\n   let colorBy = 'roles';\n\n   // max values for distance points coordinates\n   let psXMax = 1;\n   let psYMax = 1;\n\n   // max values for limit lines coordinates\n   let lmXMax = 1;\n   let lmYMax = 1;\n\n   // function for creating axis titles\n   function get_axis_label(id, transType) {\n      const distNames = {\n         'q': 'Orthogonal distance',\n         'h': 'Score distance',\n         'f': 'Full distance',\n         'g': 'Orthogonal distance',\n         'r': 'Score distance',\n         'i': 'Importance distance'\n      };\n      return distNames[id] + ', ' + (transType === 'log' ? 'log(1 + ' + id + '/' + id + '0)' : id + '/' + id + '0');\n   };\n\n   function select(e) {\n      if (selected === undefined) return; // do not select points if this option is not activated in parent app\n      const id = parseInt(e.detail.elementID)\n      const series_title = e.detail.seriesTitle\n      if (id >= 0 && series_title === 'distance-points') {\n         selected = id;\n      }\n   }\n\n   function resetSelection(e) {\n      selected = -1;\n   }\n\n   // reactive expressions to monitor changes in plot parameters\n   $: if (params && params.resID !== resID) resID = params.resID;\n   $: if (params && params.transType !== transType) transType = params.transType;\n   $: if (params && params.showLabels !== showLabels) showLabels = params.showLabels;\n   $: if (params && params.scope) scope = params.scope;\n   $: if (params && params.isAlt) isAlt = params.isAlt;\n   $: if (params && params.colorBy) colorBy = params.colorBy;\n\n   // select result object for user selected ID\n   $: resobj = simcares && resID ? simcares[resID] : null;\n\n   // reactive calculations for axis labels and title\n   $: title = (scope === 'objects' ? 'Acceptance' : 'Importance') + ' plot (A = ' + ncomp + ')';\n   $: xLabel = get_axis_label(scope === 'objects' ? 'h' : 'g', transType);\n   $: yLabel = get_axis_label(scope === 'objects' ? 'q' : 'r', transType);\n\n   // reactive calculations for axis limits\n   $: xMax = max([psXMax, lmXMax]);\n   $: yMax = max([psYMax, lmYMax]);\n   $: limX = [-0.02 * xMax, 1.05 * xMax];\n   $: limY = [-0.02 * yMax, 1.20 * yMax];\n</script>\n\n{#if resobj && params}\n<div class=\"plot-container\">\n<Axes\n   margins={MARGINS}\n   on:markerclick={select}\n   on:axesclick={resetSelection}\n   downloadLinks=\"hover\"\n   fileName={fileName ? fileName : 'plot-' + (scope === 'objects' ? 'acceptance' : 'importance')}\n   {xLabel}\n   {yLabel}\n   {limX}\n   {limY}\n   {title}\n   {pngWidth}\n   {pngHeight}\n   {pngRes}\n>\n   <AcceptancePlotLimits\n      bind:xMax={lmXMax}\n      bind:yMax={lmYMax}\n      {scope}\n      {resobj}\n      {transType}\n      {ncomp}\n   />\n\n   <AcceptancePlotSeries\n      bind:xMax={psXMax}\n      bind:yMax={psYMax}\n      {isAlt}\n      {ncomp}\n      {resobj}\n      {scope}\n      {colorBy}\n      {transType}\n      {showLabels}\n      {selected}\n   />\n\n   {#if scope === 'objects'}\n   <AcceptancePlotLegend\n      {isAlt}\n      {resobj}\n      {colorBy}\n      {ncomp}\n   />\n   {/if}\n\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n</div>\n\n{#if selected !== undefined}\n   {#if selected < 0}\n   <div class=\"msg-select\">Click on a point to select...</div>\n   {:else}\n   <div class=\"msg-select\">Click anywhere to remove selection...</div>\n   {/if}\n{/if}\n{/if}\n\n\n<style>\n   .plot-container {\n      width: 100%;\n      height: calc(100% - 15px);\n   }\n   .msg-select {\n      height: 15px;\n      font-size: 12px;\n      color: #aaa;\n      text-align: center;\n   }\n</style>\n\n","<script>\n   /*************************************************************\n   * DistancePlot                                               *\n   * --------------------                                       *\n   * shows plot with score, orthogonal or full distances        *\n   * for objects or variables                                   *\n   **************************************************************/\n\n   import { Vector } from 'mdatools/arrays';\n   import { max } from 'mdatools/stat';\n   import { qchisq } from 'mdatools/distributions';\n   import { Axes, XAxis, YAxis, Box, Legend, Points, Lines, TextLabels, Bars, Rectangles } from 'svelte-plots-basic/2d';\n   import { PNG_WIDTH, PNG_HEIGHT, PNG_RES, MARGINS, LINE_COLORS, FACE_COLORS, LABELS_COLOR, LABELS_COLOR_SELECTED } from './Defaults.js';\n\n   export let params;                     // JSON with main plot parameters\n   export let simcares;                   // JSON with SIMCA results\n   export let ncomp;                      // number of components selected by user\n   export let selected = undefined;       // selected sample\n\n   // parameters for saving the plot to file\n   export let fileName = null;\n   export let pngWidth = PNG_WIDTH;\n   export let pngHeight = PNG_HEIGHT;\n   export let pngRes = PNG_RES;\n\n   let distType = '';\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // constant plot parameters\n   const DIFF_COLOR = '#b0b0b0';\n   const showGrid = true;\n   const LINE_COLOR = '#909090';    // color of the lines\n\n   // local copies of plot parameters\n   let showLabels = 'no';\n   let resID = 'both';\n   let yMax = 0;\n   let scope = 'objects';\n\n\n   /**\n    * Get limits for the selected distance type\n    * @param res - SIMCA result object\n    * @param distType - distance type\n    * @param ncomp - number of components\n    */\n   function getLimits(res, distType, ncomp) {\n      if (!res) return null;\n      const Nu = res.v[ncomp - 1]['N' + distType];\n      const alpha = res.alpha;\n      const lim = qchisq(1 - alpha/100, Nu) / Nu;\n      if (yMax < lim) yMax = lim;\n      return lim\n   }\n\n\n   /**\n    * Generate plot series for given result object\n    * @param res - SIMCA result objects\n    * @param id - result ID\n    * @param distType - distance name/type\n    * @param ncomp - number of components\n    */\n   function getSeries(res, id, distType, ncomp) {\n      if (!res || !id) return null;\n\n      // get result values for selected number of components\n      const r = res[id].v[ncomp - 1];\n\n      // get a copy of the array with distance values and its scalar u0\n      const u = r[distType].slice();\n      const u0 = distType === 'f' || distType === 'i' ? r['N' + distType] : r[distType + '0'];\n\n      // generate x vector\n      const n = u.length;\n      const x = Vector.seq(1, n);\n\n      // normalize the distance values and find the maximum\n      let maxu = 0;\n      for (let i = 0; i < n; i++) {\n         u[i] = u[i]/u0;\n         if (maxu < u[i]) maxu = u[i];\n      }\n\n      // update the global maximum for y-axis\n      yMax = maxu;\n\n      // create legend item\n      const legendItem = {label: id, marker: 1, borderColor: LINE_COLORS[id], faceColor: FACE_COLORS[id]};\n\n      // get proper colors\n      const lineColor = LINE_COLORS[id];\n      const faceColor = FACE_COLORS[id];\n\n      // get proper labels\n      const labels = ['f', 'q', 'h'].includes(distType) ? res[id].labels : res[id].varlabels;\n\n      // return series object\n      return {id, x, y: new Vector(u), labels: labels, legendItem, lineColor, faceColor};\n   }\n\n\n   /**\n    * Get axis label for given distance type\n    * @param id - distance type\n    */\n   function get_axis_label(id) {\n      const distNames = {\n         'q': 'Orthogonal distance',\n         'h': 'Score distance',\n         'f': 'Full distance',\n         'r': 'Ortogonal distance',\n         'g': 'Score distance',\n         'i': 'Importance distance',\n      };\n      return distNames[id] + ', ' +  id + '/' + id + '0';\n   };\n\n\n   /**\n    * Function to handle selection of a point or a bar\n    * @param e - event object\n    */\n   function select(e) {\n      if (selected === undefined) return; // do not select points if this option is not activated in parent app\n      const id = parseInt(e.detail.elementID)\n      const title = e.detail.seriesTitle\n      if (id >= 0 && (title === 'diff' || title === 'pv' || title === 'cal' || title === 'target')) {\n         selected = id;\n      }\n   }\n\n\n   /**\n    * Function to reset selection\n    * @param e - event object\n    */\n   function resetSelection(e) {\n      selected = -1;\n   }\n\n\n   // reactive expressions to monitor changes in plot and model parameters\n   $: if (params && params.resID !== resID) resID = params.resID;\n   $: if (params && params.distType !== distType) distType = params.distType;\n   $: if (params && params.showLabels !== showLabels) showLabels = params.showLabels;\n   $: if (params && params.scope) scope = params.scope;\n\n   // get IDs of all provided result objects and number of observations in the first object\n   $: resIDs = simcares ? Object.keys(simcares) : null;\n\n   // create series for the selected result objects\n   let series, legendItems;\n   $: if (resIDs && resID && distType && simcares && ncomp) {\n      series = resID === 'both' || resID === 'diff' ?\n         resIDs.map(id => getSeries(simcares, id, distType, ncomp)) :\n         [getSeries(simcares, resID, distType, ncomp)];\n      legendItems = series.map(s => s.legendItem);\n   } else {\n      series = null;\n      legendItems = null;\n   }\n\n   // if resID is 'diff' compute absolute difference between the first two series\n   let diff;\n   $: if (series && resID === 'diff' && series.length === 2) {\n         const d = Vector.zeros(series[0].y.length);\n         for (let i = 0; i < d.length; i++) {\n            d.v[i] = Math.abs(series[0].y.v[i] - series[1].y.v[i]);\n         }\n         diff = d;\n         yMax = max(diff);\n         legendItems = [{label: 'abs(cal - pv)', marker: 1, borderColor: 'transparent', faceColor: DIFF_COLOR}];\n      };\n\n   // get limits for the selected distance type\n   $: lim = simcares && resID && resID !== 'diff' && distType ? getLimits(simcares[resIDs[0]], distType, ncomp) : null;\n\n   // reactive calculations for axis labels and title\n   $: title = (scope === 'objects' ? 'Objects' : 'Variablles') + ' distance plot (A = ' + ncomp + ')';\n   $: xLabel = scope === 'objects' ? 'Objects' : 'Variables';\n   $: yLabel = distType ? get_axis_label(distType) : '';\n\n   // reactive calculations for axis limits\n   $: nX = series && series[0].x ? series[0].x.length : 1;\n   $: limX = [0 - nX * 0.05, nX * 1.05];\n   $: limY = [0 - yMax * 0.05, 1.20 * yMax];\n</script>\n\n{#if simcares && params}\n<div class=\"plot-container\">\n<Axes\n   margins={MARGINS}\n   downloadLinks=\"hover\"\n   on:markerclick={select}\n   on:barclick={select}\n   on:axesclick={resetSelection}\n   fileName={fileName ? fileName : 'plot-' + scope + '-distance'}\n   {xLabel} {yLabel} {limX} {limY} {title}\n   {pngWidth} {pngHeight} {pngRes}\n>\n   {#if lim}\n   <Lines xValues={limX} yValues={[lim, lim]} lineColor={LINE_COLOR} lineType={2} />\n   {/if}\n\n   {#if resID !== 'diff'}\n\n      <!-- distance points -->\n      {#each series as s}\n      <Points\n         title={s.id}\n         xValues={s.x}\n         yValues={s.y}\n         borderWidth={1.5}\n         faceColor={s.faceColor}\n         borderColor={s.lineColor}\n      />\n      {/each}\n\n      <!-- labels on top of each point -->\n      {#if showLabels === 'show'}\n         {#each series as s}\n         <TextLabels\n            xValues={s.x}\n            yValues={s.y}\n            labels={s.labels}\n            pos={3}\n            textSize={0.8}\n            faceColor={LABELS_COLOR}\n         />\n         {/each}\n      {/if}\n\n      <!-- for selection highlight selected point and dim the others -->\n      {#if selected >= 0}\n         <Rectangles\n            left={[limX[0]]}\n            top={[limY[1]]}\n            width={[limX[1] - limX[0]]}\n            height={[limY[1] - limY[0]]}\n            borderColor='transparent'\n            faceColor='#ffffffa0'\n         />\n\n         {#each series as s}\n            <Points\n               title={s.id}\n               markerSize={1.25}\n               xValues={[s.x.v[selected]]}\n               yValues={[s.y.v[selected]]}\n               borderWidth={3.0}\n               faceColor={s.faceColor}\n               borderColor={s.lineColor}\n            />\n         {/each}\n\n         {#if showLabels === 'show'}\n            {#each series as s}\n               <TextLabels\n                  xValues={[s.x.v[selected]]}\n                  yValues={[s.y.v[selected]]}\n                  labels={[s.labels[selected]]}\n                  pos={3}\n                  textSize={0.8}\n                  faceColor={LABELS_COLOR_SELECTED}\n               />\n            {/each}\n         {/if}\n\n      {/if}\n\n   {:else}\n\n      <!-- bars with difference values -->\n      <Bars\n         title='diff'\n         xValues={series[0].x}\n         yValues={diff}\n         faceColor={DIFF_COLOR}\n         borderColor='transparent'\n      />\n\n      <!-- labels on top of each bar -->\n      {#if showLabels === 'show'}\n         <TextLabels\n            xValues={series[0].x}\n            yValues={diff}\n            labels={series[0].labels}\n            pos={3}\n            textSize={0.8}\n            faceColor={LABELS_COLOR}\n         />\n      {/if}\n\n      <!-- for selection highlight selected bar and dim the others -->\n      {#if selected >= 0}\n\n         <Rectangles\n            left={[limX[0]]}\n            top={[limY[1]]}\n            width={[limX[1] - limX[0]]}\n            height={[limY[1] - limY[0]]}\n            borderColor='transparent'\n            faceColor='#ffffffa0'\n         />\n\n         <Rectangles title='diff'\n            left={[series[0].x.v[selected] - 0.5]}\n            top={[diff.v[selected]]}\n            width={1}\n            height={[diff.v[selected]]}\n            faceColor='#ff0000'\n            borderColor='transparent'\n         />\n\n         {#if showLabels === 'show'}\n            <TextLabels\n               xValues={[series[0].x.v[selected]]}\n               yValues={[diff.v[selected]]}\n               labels={[series[0].labels[selected]]}\n               pos={3}\n               textSize={0.8}\n               faceColor={LABELS_COLOR_SELECTED}\n            />\n         {/if}\n\n      {/if}\n\n   {/if}\n\n\n   {#if legendItems && legendItems.length > 0}\n   <Legend items={legendItems} position='topright'/>\n   {/if}\n\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n</div>\n\n{#if selected !== undefined}\n   {#if selected < 0}\n   <div class=\"msg-select\">Click on a {resID === 'diff' ? 'bar' : 'point' } to select...</div>\n   {:else}\n   <div class=\"msg-select\">Click anywhere to remove selection...</div>\n   {/if}\n{/if}\n{/if}\n\n\n<style>\n   .plot-container {\n      width: 100%;\n      height: calc(100% - 15px);\n   }\n   .msg-select {\n      height: 15px;\n      font-size: 12px;\n      color: #aaa;\n      text-align: center;\n   }\n</style>\n\n","<script>\n   /****************************************************************\n   * DFPlot                                                        *\n   * --------------------                                          *\n   * shows plot with number of degrees of freedom vs number of PCs *\n   *****************************************************************/\n\n   import { max } from 'mdatools/stat';\n   import { Vector } from 'mdatools/arrays';\n   import { Axes, XAxis, YAxis, Box, Lines, Legend, Segments, Points } from 'svelte-plots-basic/2d';\n   import { PNG_WIDTH, PNG_HEIGHT, PNG_RES, MARGINS } from './Defaults.js';\n\n   export let params;                     // JSON with main plot parameters\n   export let simcares;                   // JSON with SIMCA results\n   export let ncomp = 1;                  // number of components selected by user\n\n   export let fileName = 'plot-dof';\n   export let pngWidth = PNG_WIDTH;\n   export let pngHeight = PNG_HEIGHT;\n   export let pngRes = PNG_RES;\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // constant plot parameters\n   const showGrid = true;                  // logical, show grid or not\n   const xLabel = 'Number of PCs';\n   const yLabel = 'Degrees of freedom, Nu';\n   const title = 'DoF plot';\n\n   // colors for series\n   const COLORS = ['#2679B2', '#D22C2F']; // Nh, Nq\n\n   // local copies of plot parameters\n   let item = 'both';\n\n   // reactive checks of local copies of plot parameters\n   $: if (params && params.item && params.item !== item) item = params.item;\n\n   let legendItems = [];\n   $: if (item) {\n      legendItems = [];\n      if (item === 'Nh' || item === 'both')\n         legendItems.push({'label': 'Nh', 'borderColor': COLORS[0], 'marker': 1, 'borderWidth': 2});\n      if (item === 'Nq' || item === 'both')\n         legendItems.push({'label': 'Nq', 'borderColor': COLORS[1], 'marker': 1, 'borderWidth': 2});\n   } else {\n      legendItems = null;\n   };\n\n   let Nh, Nq, xMax, yMax, x;\n   $: if (simcares) {\n      const res = simcares[Object.keys(simcares)[0]];\n      const ncomp = res.v.length;\n      Nh = Vector.zeros(ncomp);\n      Nq = Vector.zeros(ncomp);\n      x = Vector.zeros(ncomp);\n      let NhMax = 0;\n      let NqMax = 0;\n      for (let a = 0; a < ncomp; a++) {\n         const Nha = res.v[a].Nh;\n         const Nqa = res.v[a].Nq;\n         Nh.v[a] = Nha;\n         Nq.v[a] = Nqa;\n         x.v[a] = a + 1;\n         NhMax = Math.max(NhMax, Nha);\n         NqMax = Math.max(NqMax, Nqa);\n      }\n\n      xMax = ncomp;\n      yMax = {'both': 1.2 * Math.max(NhMax, NqMax), 'Nh': 1.2 * NhMax, 'Nq': 1.2 * NqMax};\n   } else {\n      x = null;\n      Nh = null;\n      Nq = null;\n   }\n</script>\n\n{#if params, x, Nh, Nq }\n<Axes {title} {xLabel} {yLabel}\n   downloadLinks=\"hover\"\n   margins={MARGINS}\n   limX={[0, xMax + 1]}\n   limY={[-1, yMax[item]]}\n   {fileName} {pngWidth} {pngHeight} {pngRes}\n>\n\n   <Segments xStart={[ncomp]} xEnd={[ncomp]} yStart={[-1]} yEnd={[yMax[item]]} lineColor='#00000040' />\n\n   {#if item === 'Nh' || item === 'both'}\n   <Lines xValues={x} yValues={Nh} lineWidth={1.5} lineColor={COLORS[0]} />\n   <Points xValues={x} yValues={Nh} borderWidth={1.5} faceColor='#fff' borderColor={COLORS[0]}/>\n   <Points xValues={[x.v[ncomp - 1]]} yValues={[Nh.v[ncomp - 1]]} borderWidth={4} faceColor={COLORS[0]} borderColor={COLORS[0]}/>\n   {/if}\n\n   {#if item === 'Nq' || item === 'both'}\n   <Lines xValues={x} yValues={Nq} lineWidth={1.5} lineColor={COLORS[1]} />\n   <Points xValues={x} yValues={Nq} borderWidth={1.5} faceColor='#fff' borderColor={COLORS[1]}/>\n   <Points xValues={[x.v[ncomp - 1]]} yValues={[Nq.v[ncomp - 1]]} borderWidth={4} faceColor={COLORS[1]} borderColor={COLORS[1]}/>\n   {/if}\n\n   <Legend items={legendItems} />\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /**************************************************************/\n   /* Svelte component for SensitivityPlot settings              */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let resID = 'both';\n   let zoom = 'off';\n\n   $: params = {\n      resID,\n      zoom\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Sensitivity plot</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={[...Object.keys(simcares), 'both']} />\n</Container>\n{/if}\n<Container label='Zoom:'>\n   <Select id='zoom' bind:value={zoom} options={['off', 'on']} />\n</Container>\n{/if}\n","<script>\n   /**************************************************************/\n   /* Svelte component for ExtremePlot settings                  */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let resID = 'both';\n\n   $: params = {\n      resID\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Extremes plot</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={[...Object.keys(simcares), 'both']} />\n</Container>\n{/if}\n{/if}\n","<script>\n   /**************************************************************/\n   /* Svelte component for AcceptancePlot settings               */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let isAlt = false;\n   let scope = 'objects';\n   let transType = 'no';\n   let showLabels = 'hide';\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n\n   $: params = {\n      isAlt,\n      scope,\n      transType,\n      showLabels,\n      resID\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Acceptance plot</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={Object.keys(simcares)} />\n</Container>\n{/if}\n<Container label='Transform:'>\n   <Select id='limType' bind:value={transType} options={['no', 'log']} />\n</Container>\n<Container label='Labels:'>\n   <Select id='showLabels' bind:value={showLabels} options={['hide', 'show']} />\n</Container>\n{/if}\n\n","<script>\n   /**************************************************************/\n   /* Svelte component for DistancePlot settings               */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let scope = 'objects';\n   let distType = 'f';\n   let showLabels = 'hide';\n   let resID = 'both';\n\n   $: params = {\n      scope,\n      distType,\n      showLabels,\n      resID\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Distance plot (objects)</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={[...Object.keys(simcares), 'both', 'diff']} />\n</Container>\n{/if}\n<Container label='Distances:'>\n   <Select id='distances' bind:value={distType} options={['h', 'q', 'f']} />\n</Container>\n<Container label='Labels:'>\n   <Select id='showLabels' bind:value={showLabels} options={['hide', 'show']} />\n</Container>\n{/if}\n\n","<script>\n   /**************************************************************/\n   /* Svelte component for VariableDistancePlot settings         */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let scope = 'variables';\n   let distType = 'i';\n   let showLabels = 'hide';\n   let resID = 'both';\n\n   $: params = {\n      scope,\n      distType,\n      showLabels,\n      resID\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Distance plot (variables)</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={[...Object.keys(simcares), 'both']} />\n</Container>\n{/if}\n<Container label='Distances:'>\n   <Select id='distances' bind:value={distType} options={['g', 'r', 'i']} />\n</Container>\n<Container label='Labels:'>\n   <Select id='showLabels' bind:value={showLabels} options={['hide', 'show']} />\n</Container>\n{/if}\n\n","<script>\n   /**************************************************************/\n   /* Svelte component for DFPlot settings                  */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select  from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let item = 'both';\n   $: params = {\n      item\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">DoF plot</p>\n</Container>\n<Container label='Results:'>\n   <Select id='resType' bind:value={item} options={['both', 'Nh', 'Nq']} />\n</Container>\n{/if}\n","<script>\n   /**************************************************************/\n   /* Svelte component for ImportancePlot settings               */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let scope = 'variables';\n   let transType = 'no';\n   let showLabels = 'hide';\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n\n   $: params = {\n      scope,\n      transType,\n      showLabels,\n      resID\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Importance plot</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={Object.keys(simcares)} />\n</Container>\n{/if}\n<Container label='Transform:'>\n   <Select id='limType' bind:value={transType} options={['no', 'log']} />\n</Container>\n<Container label='Labels:'>\n   <Select id='showLabels' bind:value={showLabels} options={['hide', 'show']} />\n</Container>\n{/if}\n\n","<script>\n   /*************************************************************\n   * AppPlots component for training app                        *\n   * -------------------------------                            *\n   * show selection of plot for training of SIMCA model         *\n   **************************************************************/\n\n   // import plot and plot controls components\n   import AppPlots from '../shared/AppPlots.svelte';\n\n   import SensitivityPlot from '../../../shared/plots/SensitivityPlot.svelte';\n   import ExtremePlot from '../../../shared/plots/ExtremePlot.svelte';\n   import AcceptancePlot from '../../../shared/plots/AcceptancePlot.svelte';\n   import DistancePlot from '../../../shared/plots/DistancePlot.svelte';\n   import DFPlot from '../../../shared/plots/DFPlot.svelte';\n\n   import SensitivityPlotControls from '../../../shared/plots/SensitivityPlotControls.svelte';\n   import ExtremePlotControls from '../../../shared/plots/ExtremePlotControls.svelte';\n   import AcceptancePlotControls from '../../../shared/plots/AcceptancePlotControls.svelte';\n   import DistancePlotControls from '../../../shared/plots/DistancePlotControls.svelte';\n   import VariableDistancePlotControls from '../../../shared/plots/VariableDistancePlotControls.svelte';\n   import DFPlotControls from '../../../shared/plots/DFPlotControls.svelte';\n   import ImportancePlotControls from '../../../shared/plots/ImportancePlotControls.svelte';\n\n\n   // input parameters\n   export let simcares;\n   export let ncomp;\n\n   // array with list of plots and their components\n   // parameter \"scope\" tells parent AppPlots component whether click events must be handled:\n   // - for \"objects\" - it triggers click events on plots as selection of objects and mark them as outliers\n   // - for \"variables\" - it triggers click events on plots as selection of variables (no more actions so far)\n   // - for \"none\" - the click events will be ignored\n   const options = [\n      {label: 'Acceptance', scope: 'objects', plotComponent: AcceptancePlot, controlsComponent: AcceptancePlotControls},\n      {label: 'Distance (obj)', scope: 'objects', plotComponent: DistancePlot, controlsComponent: DistancePlotControls},\n      {label: 'Distance (var)', scope: 'variables', plotComponent: DistancePlot, controlsComponent: VariableDistancePlotControls},\n      {label: 'DoF', scope: 'none', plotComponent: DFPlot, controlsComponent: DFPlotControls},\n      {label: 'Extremes', scope: 'none', plotComponent: ExtremePlot, controlsComponent: ExtremePlotControls},\n      {label: 'Sensitivity', scope: 'none', plotComponent: SensitivityPlot, controlsComponent: SensitivityPlotControls},\n      {label: 'Importance', scope: 'variables', plotComponent: AcceptancePlot, controlsComponent: ImportancePlotControls},\n   ]\n</script>\n\n\n<AppPlots on:setoutlier on:plotoutlier {simcares} {options} {ncomp} />","<script>\n   /*************************************************************\n   * ResultsTable                                               *\n   * -------------------------                                  *\n   * shows table with SIMCA results for training and PV-sets    *\n   **************************************************************/\n\n   // main properties of the whole app\n   export let simcares;\n   export let ncomp;\n\n   $: cal = simcares ? simcares.cal.v[ncomp - 1] : null;\n   $: pv = simcares ? simcares.pv.v[ncomp - 1] : null;\n</script>\n\n\n{#if cal && pv}\n<table>\n   <tr>\n      <th></th>\n      <th>Cal</th>\n      <th>PV</th>\n   </tr>\n   <tr>\n      <td class=\"label\">Objects</td>\n      <td>{simcares.cal.nrows}</td>\n      <td>{simcares.pv.nrows}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Extremes</td>\n      <td>{cal.cnum.extreme}</td>\n      <td>{pv.cnum.extreme}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Outliers</td>\n      <td>{cal.cnum.outliers}</td>\n      <td>{pv.cnum.outliers}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Sensitivity</td>\n      <td>{cal.stat.sensitivity.toFixed(2)}</td>\n      <td>{pv.stat.sensitivity.toFixed(2)}</td>\n   </tr>\n</table>\n{/if}\n\n<style>\n   table {\n      width: 100%;\n      border-collapse: collapse;\n   }\n\n   tr {\n      width: 100%;\n   }\n\n   th {\n      border-bottom: 1px solid #a0a0a0;\n   }\n\n   th, td {\n      text-align: right;\n      padding: 0.2em 0.5em 0.2em 0.1em;\n      color: #404040;\n      margin: 0;\n   }\n\n   .label {\n      text-align: left;\n      padding: 0.1em 0.5em;\n   }\n</style>","<script>\n   /*************************************************************/\n   /* Svelte component for changing SIMCA settings              */\n   /*************************************************************/\n\n   // main properties of the whole app\n   export let simca;\n   export let ncomp;\n</script>\n\n\n{#if simca && ncomp > 0}\n<table>\n   <tr>\n      <th></th>\n      <th>h</th>\n      <th>q</th>\n      <th>f</th>\n   </tr>\n   <tr>\n      <td class=\"label\">DoF (Nu)</td>\n      <td>{simca.Nh[ncomp - 1]}</td>\n      <td>{simca.Nq[ncomp - 1]}</td>\n      <td>{simca.Nf[ncomp - 1]}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Mean (u0)</td>\n      <td>{simca.h0[ncomp - 1].toFixed(2)}</td>\n      <td>{simca.q0[ncomp - 1].toFixed(simca.q0[ncomp - 1] > 99 ? 0 : 2)}</td>\n      <td></td>\n   </tr>\n   <tr>\n      <td class=\"label\">Crit (extreme)</td>\n      <td></td>\n      <td></td>\n      <td>{simca.eCrit[ncomp - 1].toFixed(1)}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Crit (outliers)</td>\n      <td></td>\n      <td></td>\n      <td>{simca.oCrit[ncomp - 1].toFixed(1)}</td>\n   </tr>\n</table>\n{/if}\n\n<style>\n   table {\n      width: 100%;\n      border-collapse: collapse;\n   }\n\n   tr {\n      width: 100%;\n   }\n\n   th {\n      border-bottom: 1px solid #a0a0a0;\n   }\n\n   th, td {\n      text-align: right;\n      padding: 0.2em 0.5em 0.2em 0.1em;\n      color: #404040;\n      margin: 0;\n   }\n\n   .label {\n      text-align: left;\n      padding: 0.1em 0.5em;\n   }\n</style>","<script>\n   /*************************************************************\n   * SIMCASettings                                              *\n   * -------------------------------------                      *\n   * shows panel with SIMCA model settings.                     *\n   **************************************************************/\n\n   import { qchisq } from 'mdatools/distributions';\n   import { genhash } from '../utils';\n\n   import Select from '../../../shared/controls/Select.svelte';\n   import Container from '../../../shared/controls/Container.svelte';\n   import Range from '../../../shared/controls/Range.svelte';\n\n\n   export let model;\n   export let simca;\n   export let ncomp;\n   export let className = '';\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n\n   // initialize simca object\n   let alpha, gamma, limType;\n\n   if (!simca) {\n      alpha = 5;\n      gamma = 1;\n      limType = 'classic';\n\n      const Nh = model.lim[limType].Nh;\n      const h0 = model.lim[limType].h0;\n      const Nq = model.lim[limType].Nq;\n      const q0 = model.lim[limType].q0;\n\n      const Ng = model.lim[limType].Ng;\n      const g0 = model.lim[limType].g0;\n      const Nr = model.lim[limType].Nr;\n      const r0 = model.lim[limType].r0;\n\n      const Nf = Nh.map((v, i) => v + Nq[i]);\n      const Ni = Ng.map((v, i) => v + Nr[i]);\n      const eCrit = Nf.map(v => qchisq(1 - alpha / 100, v));\n      const oCrit = Nf.map(v => qchisq(Math.pow(1 - gamma / 100, 1 / model.nrows), v));\n      const veCrit = Ni.map(v => qchisq(1 - alpha / 100, v));\n      const voCrit = Ni.map(v => qchisq(Math.pow(1 - gamma / 100, 1 / model.ncols), v));\n\n      simca = {\n         ncomp: 1,\n         nrows: model.nrows,\n         ncols: model.ncols,\n         alpha: alpha,\n         gamma: gamma,\n         limType,\n         h0,\n         q0,\n         g0,\n         r0,\n         Nh,\n         Nq,\n         Nf,\n         Ng,\n         Nr,\n         Ni,\n         eCrit,\n         oCrit,\n         veCrit,\n         voCrit,\n         className,\n         hash: genhash()\n      };\n   } else {\n      alpha = simca.alpha;\n      gamma = simca.gamma;\n      limType = simca.limType;\n      ncomp = simca.ncomp;\n   }\n\n   // initialize ncomp\n   if (ncomp > model.ncomp) {\n      ncomp = model.ncomp;\n   }\n\n   if (ncomp < 1) {\n      ncomp = Number(simca.ncomp);\n   }\n\n   // possible choices for alpha and gamma\n   const alphaOptions = [10, 5, 1, 0.1];\n   const gammaOptions = [5, 1, 0.1, 0.01];\n\n\n   /*****************************************/\n   /* functions for changing model settings */\n   /*****************************************/\n\n   function setSimcaAlpha(alpha) {\n      if (alpha === simca.alpha) return;\n      simca.alpha =  alpha;\n      simca.eCrit = simca.Nf.map(v => qchisq(1 - alpha / 100, v));\n      simca.veCrit = simca.Ni.map(v => qchisq(1 - alpha / 100, v));\n      simca.hash = genhash();\n   }\n\n   function setSimcaGamma(gamma) {\n      if (gamma === simca.gamma) return;\n      simca.gamma = gamma;\n      simca.oCrit = simca.Nf.map(v => qchisq(Math.pow(1 - gamma / 100, 1 / simca.nrows), v));\n      simca.voCrit = simca.Ni.map(v => qchisq(Math.pow(1 - gamma / 100, 1 / simca.ncols), v));\n      simca.hash = genhash();\n   }\n\n   function setSimcaLimType(limType, model) {\n\n      if (limType === simca.limType) return;\n      simca.limType = limType;\n\n      // object distance settings\n      simca.Nh = model.lim[limType].Nh;\n      simca.h0 = model.lim[limType].h0;\n      simca.Nq = model.lim[limType].Nq;\n      simca.q0 = model.lim[limType].q0;\n\n      simca.Nf = simca.Nh.map((v, i) => v + simca.Nq[i]);\n      simca.eCrit = simca.Nf.map(v => qchisq(1 - simca.alpha / 100, v));\n      simca.oCrit = simca.Nf.map(v => qchisq(Math.pow(1 - simca.gamma / 100, 1 / simca.nrows), v));\n\n      // variable distance settings\n      simca.Ng = model.lim[limType].Ng;\n      simca.g0 = model.lim[limType].g0;\n      simca.Nr = model.lim[limType].Nr;\n      simca.r0 = model.lim[limType].r0;\n\n      simca.Ni = simca.Ng.map((v, i) => v + simca.Ng[i]);\n      simca.veCrit = simca.Ni.map(v => qchisq(1 - simca.alpha / 100, v));\n      simca.voCrit = simca.Ni.map(v => qchisq(Math.pow(1 - simca.gamma / 100, 1 / simca.ncols), v));\n      simca.hash = genhash();\n   }\n\n   $: setSimcaAlpha(alpha, model)\n   $: setSimcaGamma(gamma, model)\n   $: setSimcaLimType(limType, model)\n</script>\n\n{#if simca}\n<Container label=\"\">\n   <p class=\"title\">Target class: {simca.className}</p>\n</Container>\n\n<Container label=\"# of PCs\">\n   <Range id=\"ncomp\" bind:value={ncomp} min={1} max={model.ncomp} step={1} decNum={0} />\n</Container>\n\n<Container label='Alpha, %:'>\n   <Select id='alpha' bind:value={alpha} options={alphaOptions} />\n</Container>\n\n<Container label='Gamma, %:'>\n   <Select id='gamma' bind:value={gamma} options={gammaOptions} />\n</Container>\n\n<Container label='Limits:'>\n   <Select id='limType' bind:value={limType} options={['classic', 'robust']} />\n</Container>\n{/if}\n","import { cbind, vector, isvector, Vector } from 'mdatools/arrays';\nimport { min, max, diff } from 'mdatools/stat';\n\n\n/**\n * Generate vector with axis tick labels and tick factor based on numeric tick values.\n *\n * @param {Vector} ticks - vector with numeric tick values.\n *\n * @returns {Array} an array with tick factor and array with tick labels.\n */\nexport function getTickLabels(ticks) {\n\n   if (ticks === undefined) return undefined;\n\n   const step = Math.abs(min(diff(ticks)));\n   let tickFactor = 0;\n   if (step < 1 && Math.abs(max(ticks)) < 1) {\n      // values between 0 and 1 (absolute)\n      let decNum = Math.ceil(-Math.log10(step));\n      if (decNum <= 2) {\n         return [0, Array.from(ticks).map(v => v.toFixed(decNum).toString())];\n      }\n      tickFactor = decNum - 2;\n      decNum = 2;\n      return [-tickFactor, Array.from(ticks).map(v => (v * Math.pow(10, tickFactor)).toFixed(decNum).toString())];\n   } else {\n      let decNum = Math.ceil(Math.log10(step));\n      if (decNum <= 2) {\n         return [0, Array.from(ticks).map(v => v.toString())];\n      }\n      tickFactor = decNum - 2;\n      decNum = 2;\n      return [tickFactor, Array.from(ticks).map(v => (v / Math.pow(10, tickFactor)).toString())];\n   }\n}\n\n\n/**\n * Check coordinates and convert them to vector if necessary.\n *\n * @param {Array|Vector} x - vector or array with coordinates.\n * @param {string} source - name of component which called the method (needed for error message).\n *\n * @returns {Vector}\n *\n */\nexport function checkCoords(x, source) {\n\n   if (Array.isArray(x)) {\n      x = vector(x);\n   }\n\n   if (!isvector(x)) {\n      throw Error(source + \": coordinates must be provided as array or instance of Vector class.\");\n   }\n\n   if (x.length < 1) {\n      throw Error(source + \": vector with coordinates is empty.\");\n   }\n\n   return x;\n}\n\n\n/**\n * Create string with coordinates of SVG polygon in 3D.\n *\n * @param {Array|Vector} x - vector with x-coordinates of polygon points.\n * @param {Array|Vector} y - vector with y-coordinates of polygon points.\n * @param {Array|Vector} z - vector with y-coordinates of polygon points.\n * @param {Array} tM - transformation matrix for 3D->2D (from 'Axes').\n * @param {Object} axes - JSON with Axes context.\n *\n * @returns {string} string with coordinates.\n *\n */\nexport function val2p3d(x, y, z, tM, axes) {\n\n   if (x === undefined || y === undefined) return undefined;\n\n   const [px, py] = axes.transform(cbind(checkCoords(x), checkCoords(y), checkCoords(z)), tM);\n\n   if (px.length !== py.length) {\n      throw Error('PlotSeries: parameters \"xValues\", \"yValues\" and \"zValues\" must be numeric vectors of the same length.');\n   }\n\n   let p = \"\";\n   for (let i = 0; i < px.length; i++) {\n      p += px[i] + \",\" + py[i] + \" \";\n   }\n\n   return p;\n}\n\n\n/**\n * Create string with coordinates of SVG polygon.\n *\n * @param {Array|Vector} x - vector with x-coordinates of polygon points.\n * @param {Array|Vector} y - vector with y-coordinates of polygon points.\n * @param {Array} tX - transformation parameters for x-coordinates (from 'Axes').\n * @param {Array} tY - transformation parameters for y-coordinates (from 'Axes').\n * @param {Object} axes - JSON with Axes context.\n *\n * @returns {string} string with coordinates.\n *\n */\nexport function val2p(x, y, tX, tY, axes) {\n\n   if (x === undefined || y === undefined) return undefined;\n\n   const px = axes.transform(checkCoords(x, 'val2p'), tX.coords);\n   const py = axes.transform(checkCoords(y, 'val2p'), tY.coords);\n\n   if (px.length != py.length) {\n      throw Error('PlotSeries: parameters \"xValues\" and \"yValues\" must be numeric vectors of the same length.');\n   }\n\n   let p = \"\";\n   for (let i = 0; i < px.length; i++) {\n      p += px[i] + \",\" + py[i] + \" \";\n   }\n\n   return p;\n}\n\n/**\n * Computes nice tick values for axis.\n *\n * @param {Array} ticks - vector with ticks if alredy available (if not, new will be computed).\n * @param {Array} lim - vector with axis limits tickets must be computed for.\n * @param {number} maxTickNum - maximum number of ticks to compute.\n * @param {boolean} round - round or not the fractions when computing nice numbers for the ticks.\n *\n * @returns {Array} an array with computed tick positions.\n *\n */\nexport function getAxisTicks(ticks, lim, maxTickNum, round = true) {\n\n   // if ticks are already provided do not recompute them\n   if (ticks !== undefined) {\n      if (Array.isArray(ticks)) {\n         ticks = vector(ticks);\n      }\n\n      if (!isvector(ticks)) {\n         throw Error('getAxisTicks: axis ticks must be provided as an array or as a vector.');\n      }\n\n      return ticks.filter(x => x >= lim[0] & x <= lim[1]);\n   }\n\n   // check if limits are ok\n   if (typeof(lim) !== \"object\" || lim[0] === undefined || lim[1] === undefined) return undefined;\n\n   // get range as a nice number and compute min, max and steps for the tick sequence\n   const delta = (lim[1] - lim[0]) / 50;\n   const range = niceNum(lim[1] - lim[0] - 1 * delta, round);\n   const tickSpacing = niceNum(range / (maxTickNum - 1), round);\n   const tickMin = Math.ceil((lim[0] + delta) / tickSpacing) * tickSpacing;\n   const tickMax = Math.floor((lim[1] - delta) / tickSpacing) * tickSpacing;\n\n   // recompute maxTickNum\n   maxTickNum = Math.round((tickMax - tickMin + 1) / tickSpacing) + 1;\n\n   // create a sequence of ticks\n   ticks = Vector.seq(tickMin, tickMax, tickSpacing);\n\n   // if step is smaller than 1 round values to remove small decimals accidentially added by JS\n   if (Math.abs(tickSpacing) < 1) {\n      const decNum = Math.round(-Math.log10(tickSpacing));\n      const r = Math.pow(10, 1 + Math.round(-Math.log10(tickSpacing)));\n      ticks = ticks.apply(v => (Math.round((v + Number.EPSILON) * r) / r));\n   }\n\n   // make sure the ticks are not aligned with axes limits\n   return ticks.filter(x => x >= lim[0] & x <= lim[1]);\n}\n\n\n/**\n * Computes a nice spacing value for a given range.\n *\n * @param {Number} localRange - a range (max - min).\n * @param {boolean} round - round or not the fractions when computing the number.\n *\n * @returns {Number} the computed spacing value.\n *\n */\nexport function niceNum( localRange,  round) {\n\n   const exponent = Math.floor(Math.log10(localRange));\n   const fraction = localRange / Math.pow(10, exponent);\n   let niceFraction;\n\n   if (round) {\n      if (fraction < 1.5)\n         niceFraction = 1;\n      else if (fraction < 3)\n         niceFraction = 2;\n      else if (fraction < 7)\n         niceFraction = 5;\n      else\n         niceFraction = 10;\n   } else {\n      if (fraction <= 1)\n         niceFraction = 1;\n      else if (fraction <= 2)\n         niceFraction = 2;\n      else if (fraction <= 5)\n         niceFraction = 5;\n      else\n         niceFraction = 10;\n   }\n\n   return niceFraction * Math.pow(10, exponent);\n}\n\n\n/**\n * Rounds coordinate values to single decimal\n */\nexport function roundCoords(x) {\n   return Math.round(x * 10) / 10\n}\n\n\n/**\n * Computes a scale level.\n *\n * @param {numeric} width - width of plotting area in pixels.\n * @param {numeric} height - height of plotting area in pixels.\n *\n * @returns {text} the scale level (\"small\", \"medium\" or \"large\").\n *\n */\nexport function getScale(width, height) {\n   if (height < 300.2 || width < 300.2) return \"small\";\n   if (height < 600.2 || width < 600.2) return \"medium\";\n   if (height < 850.2 || width < 850.2) return \"large\";\n   return \"xlarge\";\n}\n\n\n/*************************************************************/\n/* Functions needed to adjust DPI of resulting PNG image     */\n/* taken from: https://github.com/shutterstock/changeDPI     */\n/* and modified                                              */\n/*************************************************************/\n\n/**\n * Create table for PNG CRC calculation\n */\nfunction createPngDataTable() {\n   const crcTable = new Int32Array(256);\n   for (let n = 0; n < 256; n++) {\n      let c = n;\n      for (let k = 0; k < 8; k++) {\n         c = (c & 1) ? 0xedb88320 ^ (c >>> 1) : c >>> 1;\n      }\n      crcTable[n] = c;\n   }\n   return crcTable;\n}\n\n/**\n * Calculate CRC for PNG image\n * @param buf image data\n */\nfunction calcCrc(buf) {\n   let c = -1;\n   let pngDataTable = createPngDataTable();\n   for (let n = 0; n < buf.length; n++) {\n      c = pngDataTable[(c ^ buf[n]) & 0xFF] ^ (c >>> 8);\n   }\n   return c ^ -1;\n}\n\n/**\n * Change DPI of PNG image\n * @param dataArray image data\n * @param dpi new DPI\n */\nfunction changeDpiOnArray(dataArray, dpi) {\n\n   const physChunk = new Uint8Array(13);\n   // chunk header pHYs\n   // 9 bytes of data\n   // 4 bytes of crc\n   // this multiplication is because the standard is dpi per meter.\n   dpi *= 39.3701;\n   physChunk[0] = 'p'.charCodeAt(0);\n   physChunk[1] = 'H'.charCodeAt(0);\n   physChunk[2] = 'Y'.charCodeAt(0);\n   physChunk[3] = 's'.charCodeAt(0);\n   physChunk[4] = dpi >>> 24; // dpiX byte 3\n   physChunk[5] = dpi >>> 16; // dpiX byte 2\n   physChunk[6] = dpi >>> 8;  // dpiX byte 1\n   physChunk[7] = dpi & 0xff; // dpiX byte 0\n   physChunk[8] = physChunk[4];  // dpiY byte 3\n   physChunk[9] = physChunk[5];  // dpiY byte 2\n   physChunk[10] = physChunk[6]; // dpiY byte 1\n   physChunk[11] = physChunk[7]; // dpiY byte 0\n   physChunk[12] = 1; // dot per meter....\n\n   // compute and add CRC for physChunk\n   const crc = calcCrc(physChunk);\n   const crcChunk = new Uint8Array(4);\n   crcChunk[0] = crc >>> 24;\n   crcChunk[1] = crc >>> 16;\n   crcChunk[2] = crc >>> 8;\n   crcChunk[3] = crc & 0xff;\n\n   // chunk structur 4 bytes for length is 9\n   const chunkLength = new Uint8Array(4);\n   chunkLength[0] = 0;\n   chunkLength[1] = 0;\n   chunkLength[2] = 0;\n   chunkLength[3] = 9;\n\n   const finalHeader = new Uint8Array(54);\n   finalHeader.set(dataArray, 0);\n   finalHeader.set(chunkLength, 33);\n   finalHeader.set(physChunk, 37);\n   finalHeader.set(crcChunk, 50);\n   return finalHeader;\n}\n\n/**\n * Change DPI of PNG image\n * @param base64Image image data\n * @param dpi new DPI\n */\nfunction changeDPI(base64Image, dpi) {\n\n   const dataSplitted = base64Image.split(',');\n   const format = dataSplitted[0];\n   const body = dataSplitted[1];\n\n   // here we assume there is pHYS chunk in the header\n   const headerLength = 33 / 3 * 4;\n\n   const stringHeader = body.substring(0, headerLength);\n   const restOfData = body.substring(headerLength);\n   const headerBytes = atob(stringHeader);\n   const dataArray = new Uint8Array(headerBytes.length);\n   for (let i = 0; i < dataArray.length; i++) {\n      dataArray[i] = headerBytes.charCodeAt(i);\n   }\n   const finalArray = changeDpiOnArray(dataArray, dpi, 'image/png');\n   const base64Header = btoa(String.fromCharCode(...finalArray));\n   return [format, ',', base64Header, restOfData].join('');\n}\n\n\n/**\n * Downloads plot (or any other SVG image) as a PNG file.\n *\n * @param {SVGElement} svg - root SVG element of a plot\n * @param {string} fileName - filename to save with (without extension)\n * @param {number} width - desired image width in cm\n * @param {number} height - desired image height in cm\n * @param {number} res - resolution (pixels per inch)\n *\n */\nexport function downloadPNG (svg, fileName, width, height, res) {\n\n   if (!width) {\n      width = 10;\n   }\n\n   if (!height) {\n      height = 10;\n   }\n\n   if (!res) {\n      res = 300;\n   }\n\n   if (width < 1 || width > 30) {\n      throw Error('Parameter \"width\" must be between 1 and 30 (cm).');\n   }\n\n   if (height < 1 || height > 30) {\n      throw Error('Parameter \"height\" must be between 1 and 30 (cm).');\n   }\n\n   if (res < 50 || res > 1200) {\n      throw Error('Parameter \"res\" must be between 50 and 1200 (ppi).');\n   }\n\n   if (!svg || !(svg instanceof SVGElement)) {\n      throw Error('Parameter \"svg\" is not an instance of SVGElement.');\n   }\n\n   if (!fileName || fileName.trim() === '') {\n      fileName = 'plot';\n   }\n\n   // recalculate width and height to pixels\n   width = width / 2.54 * res;\n   height = height / 2.54 * res;\n\n   setTimeout(() => {\n\n      // compute canvas size based on SVG size and desired PNG WIDTH in pixels\n      const svgHeight = svg.clientHeight;\n      const svgWidth = svg.clientWidth;\n      const scaleFactor = Math.max(width / svgWidth, height / svgHeight);\n\n      // create a new canvas element\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      // set the canvas size to match the SVG element\n      canvas.width =  svgWidth * scaleFactor;\n      canvas.height = svgHeight * scaleFactor;\n\n   // set corresponding attributes for SVG element\n      svg.setAttribute('width', canvas.width);\n      svg.setAttribute('height', canvas.height);\n\n      // draw a white background\n      context.fillStyle = 'white';\n      context.scale(scaleFactor, scaleFactor)\n      context.fillRect(0, 0, canvas.width, canvas.height);\n\n      // draw the SVG onto the canvas\n      const svgXml = new XMLSerializer().serializeToString(svg);\n      const blob = new Blob([svgXml], { type: 'image/svg+xml;charset=utf-8' });\n      const url = URL.createObjectURL(blob);\n\n      const img = new Image();\n\n      img.onload = function () {\n\n         // draw the image\n         context.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n         // create a data URL for the canvas and adjust its DPI\n         const dataURL = canvas.toDataURL('image/png');\n         const dataURL2 = changeDPI(dataURL, res);\n\n         // create a temporary link and trigger the download\n         const downloadLink = document.createElement('a');\n         downloadLink.href = dataURL2;\n         downloadLink.download = `${fileName}.png`;\n         downloadLink.click();\n      };\n\n      // set the image source\n      img.src = url;\n   }, 20);\n}\n\n\n/**\n * Downloads plot (or any other SVG image) as an SVG file.\n *\n * @param {SVGElement} svg - root SVG element of a plot\n * @param {string} fileName - filename to save with (without extension)\n */\nexport function downloadSVG(svg, fileName) {\n\n   if (!svg || !(svg instanceof SVGElement)) {\n      throw Error('Variable \"svg\" is not an instance of SVGElement.');\n   }\n\n   if (!fileName || fileName.trim() === \"\") {\n      fileName = \"plot\";\n   }\n\n   const svgHeight = svg.clientHeight;\n   const svgWidth = svg.clientWidth;\n   svg.setAttribute('width', svgWidth + 'px');\n   svg.setAttribute('height', svgHeight + 'px');\n   svg.setAttribute('viewBox', `0 0 ${svgWidth} ${svgHeight}`);\n\n   const blob = new Blob([svg.outerHTML], { type: 'image/svg+xml' });\n   const url = window.URL.createObjectURL(blob)\n   const a = document.createElement('a')\n   a.setAttribute('href', url)\n   a.setAttribute('download', `${fileName}.svg`);\n   a.click()\n}\n\n\n/**\n * Returns plot BLOB to copy it to clipboard.\n *\n * @param {SVGElement} svg - root SVG element of a plot\n * @param {number} width - desired image width in pixels\n * @param {number} height - desired image height in pixels\n *\n */\nexport async function createPngBlob(svg, width, height) {\n\n   // compute canvas size based on SVG size and scaling factor\n   // based on desired size in pixels\n   const svgHeight = svg.clientHeight;\n   const svgWidth = svg.clientWidth;\n   const scaleFactor = Math.max(width / svgWidth, height / svgHeight);\n\n   // create a new canvas element and 2D context for it\n   const canvas = document.createElement('canvas');\n   const context = canvas.getContext('2d');\n\n   // set the canvas size to match the size of SVG element\n   canvas.width =  svgWidth * scaleFactor;\n   canvas.height = svgHeight * scaleFactor;\n\n   // scale the context\n   context.scale(scaleFactor, scaleFactor)\n\n   // set corresponding attributes for SVG element\n   svg.setAttribute('width', canvas.width);\n   svg.setAttribute('height', canvas.height);\n\n   // create promise\n   const promise = new Promise((resolve, reject) => {\n\n      // serialzie SVG, create blob and URL for it\n      const svgData = new XMLSerializer().serializeToString(svg);\n      const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });\n      const DOMURL = window.URL || window.webkitURL || window;\n      const url = DOMURL.createObjectURL(svgBlob);\n\n      // create image an image and add callback\n      const img = new Image();\n      img.onload = function () {\n\n         // draw the image\n         context.drawImage(img, 0, 0, canvas.width, canvas.height);\n         DOMURL.revokeObjectURL(url);\n\n         // convert canvas to blob\n         canvas.toBlob(function (blob) {\n            if (blob) {\n               resolve(blob);\n            } else {\n               reject(new Error('Failed to create blob'));\n            }\n         }, 'image/png');\n      };\n\n      // add error callback\n      img.onerror = function (err) {\n         reject(err);\n      };\n\n      // assign value to run the onload callback\n      img.src = url;\n   });\n\n   // resolve promise and return the result\n   return (await promise);\n}","<script>\n   /****************************************************\n   * Axes                                              *\n   * --------------------                              *\n   * root item for any plot                            *\n   *****************************************************/\n\n\timport { setContext, createEventDispatcher, onMount, onDestroy } from 'svelte';\n\timport { writable } from 'svelte/store';\n   import { isvector, vector, Vector } from 'mdatools/arrays';\n   import { roundCoords, getScale, downloadSVG, downloadPNG, createPngBlob } from '../Utils.js';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let limX;                                   // array with limits for x-axis (in plot units) [min, max]\n   export let limY;                                   // array with limits for y-axis (in plot units) [min, max]\n   export let title = '';                             // title of the plot\n   export let xLabel = '';                            // label for x-axis\n   export let yLabel = '';                            // label for y-axis\n   export let margins = [1.0, 0.75, 0.5, 0.5];        // margins [bottom, left, top, right] )\n\n\n   /***********************************************/\n   /* Input parameters for downloading and copy   */\n   /***********************************************/\n   export let downloadLinks = 'none';                // how to show download links panel ('none', 'hover', 'fixed')\n   export let fileName = 'plot';                      // file name for download (without extension)\n   export let pngWidth = 8;                           // width of PNG image in cm\n   export let pngHeight = 8;                          // height of PNG image in cm\n   export let pngRes = 300;                           // resolution of PNG image (pixels per inch)\n   export let clipboardWidth = 1200;                  // width of PNG image to copy to clipboard in pixels\n   export let clipboardHeight = 800;                  // height of PNG image to copy to clipboard in pixels\n\n\n   /*****************************************/\n   /* Constants                             */\n   /*****************************************/\n\n   // event dispatcher\n   const dispatch = createEventDispatcher();\n\n   // how big are margins (number of pixels in unit margin value) between axis and plot area if axis are shown\n   const AXES_MARGIN_FACTORS = {\n      'small': 30,\n      'medium': 40,\n      'large': 50,\n      'xlarge': 60\n   }\n\n   // number of ticks along each axis\n   const TICK_NUM = {\n      'small': 5,\n      'medium': 8,\n      'large': 12,\n      'xlarge': 15\n   };\n\n   // size of ticks\n   const TICK_SIZE = {\n      'small': 4,\n      'medium': 6,\n      'large': 8,\n      'xlarge': 10\n   };\n\n   // font size for plot element\n   const LEGEND_FONT_SIZE = {\n      \"small\": 11,\n      \"medium\": 14,\n      \"large\": 16,\n      \"xlarge\": 18\n   };\n\n   // font size for legend items in pixels\n   const PLOT_FONT_SIZE = {\n      \"small\": 12,\n      \"medium\": 15,\n      \"large\": 19,\n      \"xlarge\": 21\n   };\n\n   // margin between plot series elements and data labels\n   const LABELS_MARGIN = {\n      'small': 11,\n      'medium': 15,\n      'large': 17,\n      'xlarge': 19\n   };\n\n   // line styles for different scales and types\n   const LINE_STYLES = {\n      small: ['0', '3,3', '1,1', '3,1'],\n      medium: ['0', '5,5', '2,2', '5,2'],\n      large: ['0', '7,7', '3,3', '7,3'],\n      xlarge: ['0', '9,9', '4,4', '9,3'],\n   }\n\n   // marker symbols\n   const MARKER_SYMBOLS = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\n\n   // constant to make clip path ID unique\n   const clipPathID = 'plottingArea' + Math.round(Math.random() * 10000);\n\n\n   /*****************************************/\n   /* Variable parameters for internal use  */\n   /*****************************************/\n\n   /* parameters for internal use inside the component */\n   let plotElement;\n   let width = 100, height = 100;\n   let left = 0, bottom = 0, top = 0;\n\n\n   /*****************************************/\n   /* Helper functions                      */\n   /*****************************************/\n\n   /**\n    * Dispatcher for click events.\n    * @param {string} eventName - name of the event.\n    * @param {HTMLDOMElement} el - DOM element the click was registered for.\n    *\n    */\n   function dispatchClickEvent(eventName, el) {\n      const id = Array.prototype.indexOf.call(el.parentNode.children, el)\n      dispatch(eventName, {seriesTitle: el.parentNode.getAttribute('title'), elementID: id});\n   }\n\n   /**\n    * Handler (router) for axes or series click events.\n    *\n    * @param {event} e - event object.\n    *\n    * @description\n    * Checks which element the click was made on and dispatch a corresponding event.\n    *\n    */\n   function handleClick(e) {\n\n      // click on scatter plot markers\n      if (e.target.tagName === 'text' && e.target.parentNode.classList.contains('series-points')) {\n         dispatchClickEvent('markerclick', e.target);\n         return;\n      }\n\n      // click on bar plot bars\n      if (e.target.tagName === 'rect' && e.target.parentNode.classList.contains('series-bar')) {\n         dispatchClickEvent('barclick', e.target);\n         return;\n      }\n\n      // click outside any plot element\n      dispatch('axesclick');\n   }\n\n\n   /**\n    * Handler (router) for click event on copy plot button.\n    *\n    * @description\n    * Copy plot to clipboard as PNG image.\n    *\n    */\n   async function handleClickCopy(e) {\n      navigator.clipboard.write([\n         new ClipboardItem({ 'image/png': createPngBlob(plotElement, clipboardWidth, clipboardHeight) })\n      ]).catch(function (error) { console.error(error); });\n\n      const content = e.target.textContent;\n      e.target.classList.add('copied');\n      e.target.textContent = ' done';\n\n      // Remove the class after 1 second and revert the text\n      setTimeout(() => {\n        e.target.classList.remove('copied');\n        e.target.textContent = content;\n      }, 500);\n   }\n\n\n   /**\n    * Handler (router) for click event to download SVG image.\n    *\n    * @description\n    * Copy plot to clipboard as SVG image.\n    *\n    */\n   function handleClickSVG() {\n      downloadSVG(plotElement, fileName);\n   }\n\n\n   /**\n    * Handler (router) for click event to download PNG image.\n    *\n    * @description\n    * Copy plot to clipboard as PNG image.\n    *\n    */\n   function handleClickPNG() {\n      downloadPNG(plotElement, fileName, pngWidth, pngHeight, pngRes);\n   }\n\n   /**\n    * Generic function to transform x or y-values from plot coordinates to screen (SVG) coordinates.\n    *\n    * @param {Array|Vector} v - vector with coordinates (or objects size) in original plot coordinates.\n    * @param {Object} tA - array with scaling and translation factors.\n    *\n    * @returns {Vector} vector with rescaled values\n    *\n    */\n   const transform = function(v, tA) {\n\n      if (!$isOk || v === undefined || v === null) return undefined;\n      if (Array.isArray(v)) v = vector(v);\n      if (!isvector(v) || v.length < 1) return undefined;\n\n      return v.apply(a => roundCoords((a - tA[1]) * tA[0] + tA[2])).v;\n   }\n\n\n   /**\n    * Generic function to transform x or y-values from screen (SVG) coordinates to plot coordinates.\n    *\n    * @param {Array|Vector} v - vector with coordinates (or objects size) in screen (SVG) coordinates.\n    * @param {Object} tA - array with scaling and translation factors.\n    *\n    * @returns {Vector} vector plot coordinates.\n    *\n    */\n   const invTransform = function(v, tA) {\n\n      if (!$isOk || v === undefined || v === null) return undefined;\n      if (Array.isArray(v)) v = vector(v);\n      if (!isvector(v) || v.length < 1) return undefined;\n\n      return v.apply(a => (a - tA[2]) / tA[0] + tA[1]).v;\n   }\n\n   /*****************************************/\n   /* Storage to share with children        */\n   /*****************************************/\n\n   const scale = writable('medium');                                  // scale factor (how big the shown plot is)\n   const isOk = writable(false);                                      // are axes ready for drawing\n   const xLim = writable(limX);                                       // validated values for x-axis limits\n   const yLim = writable(limY);                                       // validated values for y-axis limits\n   const tX = writable({'coords': [1, 0, 0], 'objects': [1, 0, 0]});  // scaling and translation factors for x-dimension\n   const tY = writable({'coords': [1, 0, 0], 'objects': [1, 0, 0]});  // scaling and translation factors for y-dimension\n\n\n   /*****************************************/\n   /* Axes context                          */\n   /*****************************************/\n\n   let context = {\n\n      // methods\n      transform: transform,\n      invTransform: invTransform,\n\n      // variables\n      scale: scale,\n      isOk: isOk,\n      xLim: xLim,\n      yLim: yLim,\n      tX: tX,\n      tY: tY,\n      xLabel: xLabel,\n      yLabel: yLabel,\n\n      // constants\n      LINE_STYLES: LINE_STYLES,\n      LABELS_MARGIN: LABELS_MARGIN,\n      TICK_NUM: TICK_NUM,\n      TICK_SIZE: TICK_SIZE,\n      MARKER_SYMBOLS: MARKER_SYMBOLS,\n      LEGEND_FONT_SIZE: LEGEND_FONT_SIZE\n   }\n\n\tsetContext('axes', context);\n\n   /*****************************************/\n   /* Reactive updates of the parameters    */\n   /*****************************************/\n\n   // computes real margins in pixels based on current scale\n   $: pxMargins = margins.map(v => v * AXES_MARGIN_FACTORS[$scale]);\n\n   // update limits if necessary\n   $: xLim.update(v => limX);\n   $: yLim.update(v => limY);\n\n   // computes status which tells that axes limits look fine and it is safe to draw\n   // the status is based on the axis limits validity\n   $: isOk.update(v =>\n      Array.isArray($yLim) &&\n      Array.isArray($xLim) &&\n      $xLim.length === 2 &&\n      $yLim.length === 2 &&\n      !$yLim.some(v => v === undefined) &&\n      !$xLim.some(v => v === undefined) &&\n      !$yLim.some(v => isNaN(v)) &&\n      !$xLim.some(v => isNaN(v)) &&\n      $xLim[1] !== $xLim[0] &&\n      $yLim[1] !== $yLim[0] &&\n      width > (pxMargins[1] + pxMargins[3]) &&\n      height > (pxMargins[0] + pxMargins[2])\n   )\n\n   // update transformation array for x-coordinates\n   $: {\n      if ($isOk) {\n         tX.update(v => ({\n            'coords':  [ (width - pxMargins[1] - pxMargins[3]) / ($xLim[1] - $xLim[0]), $xLim[0], pxMargins[1]],\n            'objects': [ (width - pxMargins[1] - pxMargins[3]) / ($xLim[1] - $xLim[0]),       0,             0]\n         }));\n      }\n   };\n\n   // update transformation array for y-coordinates\n   $: {\n      if ($isOk) {\n         tY.update(v => ({\n            'coords':  [-(height - pxMargins[0] - pxMargins[2]) / ($yLim[1] - $yLim[0]), $yLim[1], pxMargins[2]],\n            'objects': [ (height - pxMargins[0] - pxMargins[2]) / ($yLim[1] - $yLim[0]),        0,            0]\n         }));\n      }\n   };\n\n   // computes coordinates for clip path box\n   $: cpx = $isOk ? transform($xLim, $tX.coords) : [0, 1];\n   $: cpy = $isOk ? transform($yLim, $tY.coords) : [1, 0];\n\n\n   /*****************************************/\n   /* Events observers                      */\n   /*****************************************/\n\n   // observer for the plot area size to update the scale\n   const ro = new ResizeObserver(entries => {\n      for (let entry of entries) {\n         const pcr = plotElement.getBoundingClientRect();\n         const scl = getScale(pcr.width, pcr.height);\n         scale.update(x => scl);\n\n         const m = PLOT_FONT_SIZE[scl] * 1.5;\n         left = xLabel && xLabel !== '' ? m : 0;\n         bottom = yLabel && yLabel !== '' ? m : 0;\n         top = title && title !== '' ? m : 0;\n         width = pcr.width > left ? pcr.width - left : 0;\n         height = pcr.height > (bottom + top) ? pcr.height - bottom - top : 0;\n      }\n   });\n\n   $: fontSize = PLOT_FONT_SIZE[$scale];\n\n   onMount(() => {\n      ro.observe(plotElement);\n   });\n\n   onDestroy(() => {\n      ro.unobserve(plotElement);\n   })\n\n</script>\n\n<div class=\"plot-container show-download-links-{downloadLinks}\" class:plot_error={!$isOk}>\n\n   <svg class=\"plot\" bind:this={plotElement} xmlns=\"http://www.w3.org/2000/svg\"\n      style={`font-size:${fontSize}px`}>\n\n      <style>\n         .plot {\n            font-family: Arial, Helvetica, sans-serif;\n         }\n\n         .plot-labels text {\n            font-weight:bold;\n            text-anchor:middle;\n         }\n\n         .tick-labels text,\n         .tick-labels tspan,\n         .series-text text,\n         .series-text tspan,\n         .series-points text,\n         .series-points tspan {\n            dominant-baseline: middle;\n            cursor: default;\n            user-select: none;\n         }\n\n         .series-text text,\n         .series-text tspan {\n            text-anchor: middle;\n         }\n\n         .tick-labels text,\n         .tick-labels tspan {\n            font-size:1em;\n         }\n      </style>\n\n      <g class=\"plot-labels\">\n         <!-- y-axis label -->\n         {#if yLabel && yLabel !== ''}\n         <text x={0} y={(height + top) /2} dx={0} dy={0} dominant-baseline=\"top\" transform={`rotate(-90, 10, ${height/2})`} style=\"font-size:1.1em;\">{@html yLabel}</text>\n         {/if}\n         <!-- x-axis label -->\n         {#if xLabel && xLabel !== ''}\n         <text x={left + width/2 } y={height + top} dx={0} dy={5} dominant-baseline=\"middle\" style=\"font-size:1.1em;\">{@html xLabel}</text>\n         {/if}\n         <!-- plot title -->\n         {#if title && title !== ''}\n         <text x={left + width/2 } y={0} dx={0} dy={10}  dominant-baseline=\"hanging\" style=\"font-size:1.2em;\">{@html title}</text>\n         {/if}\n      </g>\n\n      <svg x={left} y={top} width={width} height={height} on:click={handleClick}\n         on:keydown={handleClick} preserveAspectRatio=\"none\" class=\"axes\">\n\n         <!-- define clipping path -->\n         <defs>\n            <clipPath id={clipPathID}>\n               <rect style=\"pointer-events:none\" x={cpx[0]} y={cpy[1]} width={cpx[1]-cpx[0]} height={cpy[0]-cpy[1]} />\n            </clipPath>\n         </defs>\n\n         <!-- axis and box -->\n         <slot name=\"xaxis\"></slot>\n         <slot name=\"yaxis\"></slot>\n\n         <!-- main plot content -->\n         <g class=\"axes-content\" clip-path=\"url(#{clipPathID})\">\n            <slot></slot>\n         </g>\n\n         <!-- axis and box -->\n         <slot name=\"box\"></slot>\n      </svg>\n   </svg>\n\n   {#if !$isOk}\n   <p class=\"message_error\">\n      Axes component was not properly initialized. <br />\n      Check that you defined axes limits and margins correctly.\n   </p>\n   {:else}\n   <div class=\"download-links\">\n      <button on:click={handleClickSVG} on:keydown={handleClickSVG}> svg</button>\n      <button on:click={handleClickPNG} on:keydown={handleClickPNG}> png</button>\n      <button on:click={handleClickCopy} on:keydown={handleClickCopy}> copy</button>\n   </div>\n   {/if}\n\n</div>\n\n<style>\n   .show-download-links-none > .download-links{\n      display: none;\n   }\n\n   .show-download-links-hover:hover > .download-links {\n      bottom: 0;\n   }\n\n   .show-download-links-fixed > .download-links{\n      bottom: 0;\n   }\n\n   .download-links {\n      box-sizing: border-box;\n      bottom: right 0.5s ease;\n      position: absolute;\n      font-size: 0.8em;\n      bottom: -50%;\n      right: 0;\n      z-index: 10;\n      padding: 0.5em 1em 0.5em 1em;\n      background: #fefefe;\n      border-radius: 0.5em;\n      transition: bottom 0.35s ease;\n      box-shadow: 0 0 0.75em #00000060;\n      margin: 0.6em;\n      box-sizing: border-box;\n\n      display: flex;\n      align-items: center;\n      justify-content: center;\n   }\n\n   .download-links > button{\n      box-sizing: border-box;\n      color: #606060;\n      border: none;\n      box-shadow: none;\n      background: #fafafa;\n      border-radius: 0.35em;\n      padding: 0.25em 0.5em;\n   }\n\n   .download-links > button:hover{\n      background: #443333;\n      color: #fafafa;\n   }\n\n\n   /* Plot container */\n   .plot-container {\n      font-family: Arial, Helvetica, sans-serif;\n      box-sizing: border-box;\n      position: relative;\n      min-width: 100px;\n      min-height: 50px;\n      width: 100%;\n      height: 100%;\n      padding: 0;\n      margin: 0;\n      overflow: hidden;\n      background: #fff;\n   }\n\n   .plot_error {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n   }\n\n   .message_error {\n      font-size: 1.2em;\n      color: crimson;\n      padding: 1em;\n      box-sizing: border-box;\n      text-align: center;\n   }\n\n   /* Plot and axes (coordinate system) */\n\n   .plot {\n      display: block;\n      box-sizing: border-box;\n      position:absolute;\n      padding: 0;\n      margin: 0;\n      left: 0;\n      top: 0;\n      bottom: 0;\n      right: 0;\n      width: 100%;\n      height: 100%;\n   }\n\n   .axes-content {\n      padding: 0;\n      margin: 0;\n      height: 100%;\n      width: 100%;\n      max-height: 100%;\n      max-width: 100%;\n      min-height: 100%;\n      min-width: 100%;\n   }\n\n</style>","export const Colors = {\n   \"AXIS_LINE\": \"#303030\",\n   \"AXIS_TICK\": \"#606060\",\n   \"WHITE\":     \"#fff\",\n   \"BLACK\":     \"#000\",\n   \"GRAY\":      \"#909090\",\n   \"MIDDLEGRAY\": \"#dadada\",\n   \"LIGHTGRAY\": \"#f0f0f0\",\n   \"DARKGRAY\":  \"#606060\",\n   \"LEGEND\": \"#303030\",\n\n   \"PRIMARY\": \"#2679B2\",\n   \"PRIMARY_LIGHT\": \"#d2ebff\",\n   \"PRIMARY_TEXT\": \"#333\",\n}\n\n\n/**\n * Returns an array with 'n' colors.\n *\n * @param {number} n - number of colors to return.\n *\n * @returns {Array} array with colors as strings (hexadecimal).\n *\n */\nexport function getcolmap(n) {\n   if (n ==  1) return [\"#2679B2\"];\n   if (n ==  2) return [\"#2679B2\", \"#D22C2F\"];\n   if (n ==  3) return [\"#2679B2\", \"#92B42A\", \"#D22C2F\"];\n   if (n ==  4) return [\"#2679B2\", \"#2E9658\", \"#F2B825\", \"#D22C2F\"];\n   if (n ==  5) return [\"#2679B2\", \"#22988A\", \"#92B42A\", \"#F79426\", \"#D22C2F\"];\n   if (n ==  6) return [\"#2679B2\", \"#1C9AA8\", \"#379531\", \"#EED524\", \"#FB7F28\", \"#D22C2F\"];\n   if (n ==  7) return [\"#2679B2\", \"#1D94A9\", \"#2E9658\", \"#92B42A\", \"#F2B825\", \"#F47129\", \"#D22C2F\"];\n   if (n ==  8) return [\"#2679B2\", \"#1E90AA\", \"#279775\", \"#519E2F\", \"#D3CB25\", \"#F5A326\", \"#EF672A\", \"#D22C2F\"];\n   if (n ==  9) return [\"#2679B2\", \"#1F8DAB\", \"#22988A\", \"#33953F\", \"#92B42A\", \"#EFCA24\", \"#F79426\", \"#EB5F2A\", \"#D22C2F\"];\n   if (n == 10) return [\"#2679B2\", \"#208BAC\", \"#1E999A\", \"#2E9658\", \"#5FA32E\", \"#C5C626\", \"#F2B825\", \"#F98827\", \"#E85A2B\", \"#D22C2F\"];\n   if (n == 11) return [\"#2679B2\", \"#2089AD\", \"#1C9AA8\", \"#29976C\", \"#379531\", \"#92B42A\", \"#EED524\", \"#F4AA26\", \"#FB7F28\",\n      \"#E6552B\", \"#D22C2F\"];\n   if (n == 12) return [\"#2679B2\", \"#2188AD\", \"#1C97A8\", \"#25987C\", \"#329546\", \"#68A62D\", \"#BCC327\", \"#F0C524\", \"#F69E26\",\n      \"#F77728\", \"#E4512B\", \"#D22C2F\"];\n   if (n == 13) return [\"#2679B2\", \"#2186AD\", \"#1D94A9\", \"#22988A\", \"#2E9658\", \"#469A2F\", \"#92B42A\", \"#DECF25\", \"#F2B825\",\n      \"#F79426\", \"#F47129\", \"#E34E2C\", \"#D22C2F\"];\n   if (n == 14) return [\"#2679B2\", \"#2285AE\", \"#1E92AA\", \"#209995\", \"#2A9767\", \"#34953A\", \"#6FA82D\", \"#B5C128\", \"#EFCE24\", \"#F3AD25\",\n      \"#F98C27\", \"#F16B29\", \"#E14B2C\", \"#D22C2F\"];\n   if (n == 15) return [\"#2679B2\", \"#2284AE\", \"#1E90AA\", \"#1D999F\", \"#279775\", \"#31964A\", \"#519E2F\", \"#92B42A\", \"#D3CB25\", \"#F0C224\",\n      \"#F5A326\", \"#FA8527\", \"#EF672A\", \"#E0492C\", \"#D22C2F\"];\n\n   // if n > 15 return 16 colors\n   return [\"#2679B2\", \"#2283AE\", \"#1F8FAB\", \"#1C9AA8\", \"#249880\", \"#2E9658\", \"#379531\", \"#73AA2C\", \"#B0BF28\", \"#EDD424\", \"#F2B825\",\n      \"#F69B26\", \"#FB7F28\", \"#ED632A\", \"#DF472C\", \"#D22C2F\"];\n}\n","<script>\n   /****************************************************\n   * Axis lines                                        *\n   * --------------------                              *\n   * generic component for axis lines (main, grid, ...)*\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors.js';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let lineCoords = [];               // coordinates of start and end points of the lines\n   export let lineColor = Colors.DARKGRAY;   // line color\n   export let lineType = 1;                  // line type\n   export let lineWidth = 1;                 // lined width (thickness)\n   export let className = '';                // CSS class name for the component\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // reactive variables for coordinates of axis lines\n   let x1, x2, y1, y2 = undefined;\n   $: if (lineCoords.length == 2) {\n      x1 = axes.transform(lineCoords[0][0], $tX.coords);\n      y1 = axes.transform(lineCoords[0][1], $tY.coords);\n      x2 = axes.transform(lineCoords[1][0], $tX.coords);\n      y2 = axes.transform(lineCoords[1][1], $tY.coords);\n   }\n\n   /* styles for axis and grid lines */\n   $: lineStyleStr = `stroke:${lineColor};stroke-width: ${lineWidth}px;stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n\n</script>\n\n{#if x1 !== undefined && y1 !== undefined && x2 !== undefined && y2 !== undefined}\n<g class={className}>\n   {#each x1 as v, i}\n   <line vector-effect=\"non-scaling-stroke\" x1={x1[i]} x2={x2[i]} y1={y1[i]} y2={y2[i]} style={lineStyleStr} />\n   {/each}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * AxisTickLabels                                    *\n   * --------------------                              *\n   * shows a series of tick labels along an axis       *\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let tickCoords;  // array with tick coordinates\n   export let textColor;   // color of tick labels\n   export let tickLabels;  // array with tick labels\n   export let pos = 1;     // position of tick labels\n   export let las = 1;     // rotation of tick labels (1 - horizontal, 2 - vertical)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   let el;\n\n   let x, y = undefined;\n   let dx = 0, dy = 0, textAnchor;\n\n   // reactive calculations triggered by changes in coordinates and plot parameters\n   $: if ($isOk) {\n      x = axes.transform(tickCoords[1][0], $tX.coords);\n      y = axes.transform(tickCoords[1][1], $tY.coords);\n   }\n\n   // reactive calculations triggered by changes in scale\n   $: m = axes.LABELS_MARGIN[$scale];\n\n   // reactive calculations triggered by changes in pos\n   $: {\n      textAnchor = (['middle', 'middle', 'start', 'middle', 'end'])[pos];\n      dx = ([0, 0, m,  0, -m])[pos];\n      dy = ([0, m, 0, -m, 0])[pos];\n   }\n\n   // styles for the elements\n   $: textStyleStr = `fill:${textColor};`;\n</script>\n\n{#if x !== undefined && y !== undefined}\n<g class=\"tick-labels\" bind:this={el} style={textStyleStr} >\n   {#if las === 2 && pos === 4}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={0} dy={dx*1.25} transform={`rotate(-90, ${x[i]}, ${y[i]})`} text-anchor={\"middle\"}>{@html tickLabels[i]}</text>\n   {/each}\n   {:else if las === 2 && pos === 1}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={-dy/2} dy={0} transform={`rotate(-90, ${x[i]}, ${y[i]})`} text-anchor={\"end\"}>{@html tickLabels[i]}</text>\n   {/each}\n   {:else}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx} dy={dy} text-anchor={textAnchor}>{@html tickLabels[i]}</text>\n   {/each}\n   {/if}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * Axis                                              *\n   * ---------------------------------                 *\n   * generic element for X- or Y-axis                  *\n   * !!! not for users !!!                             *\n   *****************************************************/\n\n   import { Colors } from '../Colors.js';\n   import AxisLines from './AxisLines.svelte';\n   import AxisTickLabels from './AxisTickLabels.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let tickLabels = [];               // vector with labels for each tick\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // rotation of tick labels\n\n   export let pos = 1;                       // position of tick labels\n   export let className = \"\";                // name of CSS class for the axis\n   export let grid = [];                     // array with grid coordinates\n   export let axisLine = [];                 // array with coordinates of main axis line\n   export let tickCoords = [];               // array with axis tick coordinates\n   export let tfCoords = [];                 // array with tick factor coordinates\n   export let tickFactor = 0;                // tick factor (as power of 10)\n\n   export let lineColor = Colors.DARKGRAY;   // color of main axis line\n   export let gridColor = Colors.MIDDLEGRAY; // color of grid lines\n   export let textColor = Colors.DARKGRAY;   // color of tick labels\n\n   // generate text for tick factor label\n   function getTickFactorLabel(tf) {\n      if (tf === 0) return '';\n      if (tf < 0) {\n         return `&times;10<tspan dy=\"-0.5em\">${(tf).toString()}</tspan>`;\n      } else {\n         return `&times;10<tspan dy=\"-0.5em\">${(tf).toString()}</tspan>`;\n      }\n   }\n</script>\n\n<g class=\"mdaplot__axis {className}\">\n   <!-- grid -->\n   {#if showGrid }\n      <AxisLines lineCoords={grid} lineColor={gridColor} lineType={3} />\n   {/if}\n\n   <!-- main axis line -->\n   <AxisLines lineCoords={axisLine} lineColor={lineColor} lineType={1} />\n\n   <!-- ticks-->\n   <AxisLines lineCoords={tickCoords} lineColor={lineColor} lineType={1} />\n\n   <!-- labels -->\n   {#if tickCoords.length === 2 && tickLabels.length === tickCoords[1][0].length}\n   <AxisTickLabels {las} {pos} {tickCoords} {tickLabels} {textColor} />\n   {/if}\n\n   <!-- tick factor -->\n   {#if tickFactor !== 0}\n   <AxisTickLabels {pos} tickCoords={tfCoords} tickLabels={[getTickFactorLabel(tickFactor)]} {textColor} />\n   {/if}\n</g>\n\n","<script>\n   /****************************************************\n   * X-Axis                                            *\n   * --------------------                              *\n   * shows x-axis and its elements (ticks, grid, etc.) *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector, vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors.js';\n   import { getAxisTicks, getTickLabels } from '../Utils.js';\n   import Axis from './Axis.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot = 'xaxis';                // slot the component must be placed in (must be \"xaxis\")\n   export let ticks = undefined;             // vector with numeric tick positions (by default is computed automatically)\n   export let tickLabels = undefined;        // vector with labels for each tick (by default tick values will be used)\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // orientation of tick labels (1 - horizontal, 2 - vertical)\n\n   export let lineColor = Colors.DARKGRAY;   // color of axis and tick lines\n   export let gridColor = Colors.MIDDLEGRAY; // color og grid lines\n   export let textColor = Colors.DARKGRAY;   // color of text tick labels\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // sanity checks of input parameters\n   if (slot !== 'xaxis') {\n      throw('Component XAxis must have \"slot=\\'xaxis\\'\" attribute.');\n   }\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n\n   // get reactive variables needed to compute coordinates\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tY = axes.tY;\n\n   // prepare variables for coordinates\n   let grid = [];\n   let axisLine = [];\n   let tickCoords = [];\n   let tfCoords = [];\n   let tickFactor = 0;\n\n   // compute coordinates for ticks, grid and axis line\n   $: if ($isOk) {\n\n      // compute x-coordinates of the ticks or take the ones manually specified by user\n      const ticksX = getAxisTicks(ticks, $xLim, axes.TICK_NUM[$scale], true);\n      const tickNum = ticksX.length;\n\n      // compute tick y-coordinates (up and bottom)\n      const dY = axes.invTransform([axes.TICK_SIZE[$scale]], $tY.objects)[0];\n      const ticksY1 = Vector.fill($yLim[0], tickNum);\n      const ticksY2 = ticksY1.add(dY);\n\n      // compute coordinates for the ends of grid\n      const gridYEnd = Vector.fill($yLim[1], tickNum);\n\n      // tick labels and tick factor\n      if (ticks === undefined || tickLabels === undefined) {\n         [tickFactor, tickLabels] = getTickLabels(ticksX.v);\n      }\n\n      if (tickLabels.length !== ticksX.length) {\n         throw('XAxis: \"tickLabels\" must be a array of the same size as ticks.')\n      }\n\n      // combine all coordinates together\n      grid = [\n         [ticksX, ticksY1],\n         [ticksX, gridYEnd]\n      ];\n\n      axisLine = [\n         [vector([$xLim[0]]), vector([$yLim[0]])],\n         [vector([$xLim[1]]), vector([$yLim[0]])]\n      ]\n\n      tickCoords = [\n         [ticksX, ticksY2],\n         [ticksX, ticksY1]\n      ];\n\n      tfCoords = [\n         [null, null],\n         [[$xLim[1]], [ticksY1.v[tickNum - 1] - 1.5 * dY]],\n      ];\n   }\n</script>\n\n{#if $isOk && axisLine.length > 0}\n<Axis\n   className=\"mdaplot__xaxis\" pos={1}\n   {lineColor} {gridColor} {textColor} {showGrid} {grid} {axisLine}\n   {tickCoords} {tickLabels} {tfCoords} {tickFactor} {las}\n/>\n{/if}","<script>\n   /****************************************************\n   * Y-Axis                                            *\n   * --------------------                              *\n   * shows y-axis and its elements (ticks, grid, etc.) *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector, vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors.js';\n   import { getAxisTicks, getTickLabels } from '../Utils.js';\n   import Axis from './Axis.svelte';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot = 'yaxis';                // slot the component must be placed in (must be \"yaxis\")\n   export let ticks = undefined;             // vector with numeric tick positions (by default is computed automatically)\n   export let tickLabels = undefined;        // vector with labels for each tick (by default tick values will be used)\n   export let showGrid = false;              // logical, show or not grid lines\n   export let las = 1;                       // orientation of tick labels (1 - horizontal, 2 - vertical)\n\n   export let lineColor = Colors.DARKGRAY;   // color of axis and tick lines\n   export let gridColor = Colors.MIDDLEGRAY; // color og grid lines\n   export let textColor = Colors.DARKGRAY;   // color of text tick labels\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // sanity checks of input parameters\n   if (slot !== 'yaxis') {\n      throw('Component YAxis must have \"slot=\\'yaxis\\'\" attribute.');\n   }\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n\n   // get reactive variables needed to compute coordinates\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n\n   // prepare variables for coordinates\n   let grid = [];\n   let axisLine = [];\n   let tickCoords = [];\n   let tfCoords = [];\n   let tickFactor = 0;\n\n   // compute tick x-coordinates\n   $: if ($isOk) {\n\n      // compute x-coordinates of the ticks or take the ones manually specified by user\n      const ticksY = getAxisTicks(ticks, $yLim, axes.TICK_NUM[$scale], true);\n      const tickNum = ticksY.length;\n\n      // compute tick y-coordinates (up and bottom)\n      const dX = axes.invTransform([axes.TICK_SIZE[$scale]], $tX.objects)[0];\n      const ticksX1 = Vector.fill($xLim[0], tickNum)\n      const ticksX2 = ticksX1.add(dX)\n\n      // coordinates for the ends of grid\n      const gridXEnd = Vector.fill($xLim[1], tickNum);\n\n      // tick labels and tick factor\n      if (ticks === undefined || tickLabels === undefined) {\n         [tickFactor, tickLabels] = getTickLabels(ticksY.v)\n      }\n\n      if (tickLabels.length !== ticksY.length) {\n         throw('YAxis: \"tickLabels\" must be a array of the same size as ticks.')\n      }\n\n      // combine all coordinates together\n      grid = [\n         [ticksX1, ticksY],\n         [gridXEnd, ticksY]\n      ];\n\n      axisLine = [\n         [vector([$xLim[0]]), vector([$yLim[0]])],\n         [vector([$xLim[0]]), vector([$yLim[1]])]\n      ]\n\n      tickCoords = [\n         [ticksX1, ticksY],\n         [ticksX2, ticksY]\n      ];\n\n      tfCoords = [\n         [[], []],\n         [[ticksX1.v[tickNum - 1]], [$yLim[1]]],\n      ];\n   }\n</script>\n\n{#if $isOk && axisLine.length > 0}\n<Axis\n   className=\"mdaplot__yaxis\" pos={4}\n   {lineColor} {gridColor} {textColor} {showGrid} {grid} {axisLine}\n   {tickCoords} {tickLabels} {tfCoords} {tickFactor} {las}\n/>\n{/if}","<script>\n   /****************************************************\n   * Box                                               *\n   * --------------------                              *\n   * shows border box around axes                      *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n   export let slot;  // slot name, must be \"box\"\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // check that the box is located in a correct slot\n   if (slot !== 'box') {\n      throw('Component Box must have \\'slot=\"box\"\\' attribute.')\n   }\n\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const xLim = axes.xLim;\n   const yLim = axes.yLim;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // reactive variables for coordinates of box points in pixels\n   $: xx = $isOk ? axes.transform($xLim, $tX.coords) : undefined;\n   $: yy = $isOk ? axes.transform($yLim, $tY.coords) : undefined;\n\n</script>\n\n{#if $isOk}\n   <g style=\"pointer-events:none\" class=\"mdaplot__axes-box\">\n   <rect stroke=\"{Colors.DARKGRAY}\" stroke-width=\"0.1em\" fill=\"transparent\" x={xx[0]} y={yy[1]} width={xx[1] - xx[0]} height={yy[0] - yy[1]} />\n   </g>\n{/if}\n\n","<script>\n   /****************************************************\n   * Rectangles                                        *\n   * --------------------                              *\n   * shows series of rectangles                        *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Vector } from 'mdatools/arrays';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let left;                          // array of vector with coordinates of left sides of the bars\n   export let top;                           // array of vector with coordinates of top sides of the bars\n   export let width;                         // single value (same for all) or vector/array with bar width\n   export let height;                        // single value (same for all) or vector/array with bar height\n   export let faceColor = Colors.PRIMARY;    // color of bar faces (fill)\n   export let borderColor = faceColor;       // color of bar borders\n   export let lineWidth = 1;                 // width (thickness) of bar border lines\n   export let className = 'series-rect';     // CSS class name of the SVG group\n   export let title = '';                    // title of the rectangle series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   let rx, ry, rw, rh = undefined;\n   $: {\n      if ($isOk) {\n         rx = axes.transform(checkCoords(left, 'Rectangles'), $tX.coords);\n         ry = axes.transform(checkCoords(top, 'Rectangles'), $tY.coords);\n\n         if (rx.length !== ry.length) {\n            throw Error('Rectangles: parameters \"left\" and \"top\" must be vectors of the same length.');\n         }\n\n         if (typeof width !== 'object') {\n            width = Vector.fill(width, left.length);\n         }\n\n         if (typeof height !== 'object') {\n            height = Vector.fill(height, left.length);\n         }\n\n         rw = axes.transform(width, $tX.objects);\n         rh = axes.transform(height, $tY.objects);\n      }\n   }\n\n   // styles for bars and labels\n   $: barsStyleStr = `fill:${faceColor};stroke:${borderColor};stroke-width:${lineWidth}px;`;\n</script>\n\n{#if $isOk}\n   <g class=\"series {className}\" title={title} style={barsStyleStr}>\n   {#each left as v, i}\n      <rect x={rx[i]} y={ry[i]} width={rw[i]} height={rh[i]} />\n   {/each}\n   </g>\n{/if}\n\n\n","<script>\n   /****************************************************\n   * TextLabels component                              *\n   * --------------------                              *\n   * shows a series of text labels on the plot         *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                             // vector or array with x-coordinates for each label\n   export let yValues;                             // vector or array with y-coordinates for each label\n   export let labels;                              // array with labels (strings)\n   export let pos = 0;                             // position of labels related to coordinates (middle, bottom, left, top, right)\n   export let faceColor = Colors.PRIMARY_TEXT;     // face color of label symbols\n   export let borderColor = 'transparent';         // border colors of label symbols\n   export let borderWidth = 0;                     // border width of label symbols\n   export let textSize = 1;                        // size of label symbols\n   export let className = 'series-text';           // CSS class name for the labels group\n   export let title = 'series-text';               // title of the labels SVG group\n   export let rotateAngle = 0;                     // angle to rotate labels\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and reactive variables needed to compute coordinates\n   const axes = getContext('axes');\n   const scale = axes.scale;\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   const textAnchors = ['middle', 'middle', 'start', 'middle', 'end'];\n\n   let x, y = undefined;\n   let dx = 0, dy = 0;\n\n   // reactive calculations triggered by changes in coordinates and plot parameters\n   $: if ($isOk) {\n\n      if (typeof labels === 'string' && typeof pos !== 'number' ) {\n         throw Error('TextLabels: parameter \"labels\" is provided as single string, so \"pos\" must be a single number.');\n      }\n\n      x = axes.transform(checkCoords(xValues, 'TextLabels'), $tX.coords);\n      y = axes.transform(checkCoords(yValues, 'TextLabels'), $tY.coords);\n\n      // sanity check for input parameters\n      if (x.length !== y.length) {\n         throw Error('TextLabels: parameters \"xValues\" and \"yValues\" must be vectors of the same length.');\n      }\n\n      if (Array.isArray(labels) && labels.length !== x.length ) {\n         throw Error('TextLabels: number of elements in \"labels\" does not match number of coordinates.');\n      }\n   }\n\n   // reactive calculations triggered by changes in scale\n   $: {\n      const m = axes.LABELS_MARGIN[$scale];\n      dx = [0, 0, m,  0, -m, m];\n      dy = [0, m, 0, -m, 0, m];\n   }\n\n   // styles for the elements\n   $: textStyleStr = `fill:${faceColor};stroke-width:${borderWidth}px;stroke:${borderColor};font-size:${textSize}em;`;\n</script>\n\n{#if $isOk && x !== undefined && y !== undefined}\n<g class=\"series {className}\" title={title} style={textStyleStr} >\n\n   {#if typeof labels === 'string'}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx[pos]} dy={dy[pos]}\n         transform={rotateAngle !== undefined ? `rotate(${rotateAngle}, ${x[i] + dx[pos]}, ${y[i] + dy[pos]})` : ''}\n         text-anchor={textAnchors[pos[i]]}>{@html labels}</text>\n   {/each}\n\n   {:else if (Array.isArray(pos) || ArrayBuffer.isView(pos))}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx[pos[i]]} dy={dy[pos[i]]} text-anchor={textAnchors[pos[i]]}>{@html labels[i]}</text>\n   {/each}\n\n   {:else}\n   {#each x as v, i}\n      <text data-id={i} x={x[i]} y={y[i]} dx={dx[pos]} dy={dy[pos]} text-anchor={textAnchors[pos]}>{@html labels[i]}</text>\n   {/each}\n   {/if}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * Points                                            *\n   * --------------------                              *\n   * shows series of points/markers on a plot          *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { checkCoords } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                          // array of vector with x-coordinates of points\n   export let yValues;                          // array of vector with y-coordinates of points\n   export let marker = 1                        // index for point symbol (from 1 to 8): \"\", \"\", \"\", \"\", \"\", \"\", \"*\", \"\"\n   export let faceColor = 'transparent';        // face (fill) color of the points\n   export let borderColor = Colors.PRIMARY;     // border color of the points\n   export let borderWidth = 1;                  // width (thickness) of the points\n   export let markerSize = 1;                   // size of the marker symbols\n   export let title = '';                       // title of the point series - required for handling mouse click events\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context and adjust x margins\n   const axes = getContext('axes');\n   const tX = axes.tX;\n   const tY = axes.tY;\n   const isOk = axes.isOk;\n\n   let x, y, markerSymbol;\n\n   // reactive calculations triggered by changes in coordinates and plot parameters\n   $: if ($isOk) {\n\n      if (typeof(marker) !== \"number\" || marker < 1 || marker > axes.MARKER_SYMBOLS.length) {\n         throw Error(`Points: parameter \"marker\" must be a number from 1 to ${axes.MARKER_SYMBOLS.length}.`);\n      }\n\n      markerSymbol = axes.MARKER_SYMBOLS[marker - 1];\n\n      x = axes.transform(checkCoords(xValues, 'Points'), $tX.coords);\n      y = axes.transform(checkCoords(yValues, 'Points'), $tY.coords);\n\n      // sanity check for input parameters\n      if (x.length !== y.length) {\n         throw Error('Points: parameters \"xValues\" and \"yValues\" must be vectors of the same length.')\n      }\n   }\n\n   // styles for the elements\n   $: textStyleStr = ['', '', ''].includes(markerSymbol)  ?\n       `fill:${borderColor && borderColor !== 'transparent' ? borderColor : faceColor};stroke-width:0px;font-size:${markerSize}em;` :\n       `fill:${faceColor};stroke-width:${borderWidth}px;stroke:${borderColor}; font-size:${markerSize}em;`;\n\n</script>\n\n{#if $isOk && x !== undefined && y !== undefined}\n<g class=\"series series-points\" title={title} style={textStyleStr} dominant-baseline=\"middle\" text-anchor=\"middle\">\n   {#each x as v, i}\n      <text x={x[i]} y={y[i]}>{markerSymbol}</text>\n   {/each}\n</g>\n{/if}\n","<script>\n   /****************************************************\n   * Lines                                             *\n   * --------------------                              *\n   * shows lines connected sequence of points          *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { Colors } from '../Colors';\n   import { val2p } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                       // vector or array with x-coordinates of the points\n   export let yValues;                       // vector or array with y-coordinates of the points\n   export let lineWidth = 1;                 // width (thickness) of the lines\n   export let lineColor = Colors.PRIMARY;    // color of the lines\n   export let lineType = 1;                  // type of the lines (1 - solid, 2 - dashed, 3 - dotted, 4 - dashdot)\n   export let title = '';                    // title of the bar series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context\n   const axes = getContext('axes');\n\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // compute polynomial coordinates as string\n   $: p = $isOk ? val2p(xValues, yValues, $tX, $tY, axes) : undefined;\n\n   // reactive variables for coordinates of data points in pixels\n   $: lineStyleStr = `fill:transparent;stroke:${lineColor};stroke-width: ${lineWidth}px; stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n</script>\n\n{#if $isOk && p !== undefined}\n   <g class=\"series series-line\" style={lineStyleStr} title={title}>\n      <polyline class=\"line\" points={p}/>\n   </g>\n{/if}\n\n","<script>\n   /****************************************************\n   * Multilines                                        *\n   * --------------------                              *\n   * shows series of lines components                  *\n   *****************************************************/\n\n   import { getContext } from 'svelte';\n   import { ismatrix } from 'mdatools/arrays';\n   import { Colors } from '../Colors';\n   import { val2p } from '../Utils';\n\n\n   /*****************************************/\n   /* Input parameters                      */\n   /*****************************************/\n\n\texport let xValues;                       // vector or array with x-coordinates of the points\n   export let yValues;                       // matrix (!) with y-coordinates of the points - every column is separate line\n   export let lineWidth = 1;                 // width (thickness) of the lines\n   export let lineColor = Colors.PRIMARY;    // color of the lines\n   export let lineType = 1;                  // type of the lines (1 - solid, 2 - dashed, 3 - dotted, 4 - dashdot)\n   export let title = '';                    // title of the bar series (reserved for future use)\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // get axes context\n   const axes = getContext('axes');\n\n   const scale = axes.scale;\n   const isOk = axes.isOk;\n   const tX = axes.tX;\n   const tY = axes.tY;\n\n   // compute polynomial coordinates as string\n   let pp;\n   $: if ($isOk) {\n\n      if (!ismatrix(yValues)) {\n         throw Error('Multilines: parameter \"yValues\" must be a matrix.');\n      }\n\n      if (xValues.length !== yValues.nrows) {\n         throw Error('Multilines: parameter \"xValues\" must have the same number of values as number of rows in \"yValues\".');\n      }\n\n      pp = new Array(yValues.ncols);\n      for (let i = 0; i < pp.length; i++) {\n         pp[i] = val2p(xValues, yValues.getcolumn(i + 1), $tX, $tY, axes);\n      }\n   }\n\n   // reactive variables for coordinates of data points in pixels\n   $: lineStyleStr = `fill:transparent;stroke:${lineColor};stroke-width: ${lineWidth}px; stroke-dasharray:${axes.LINE_STYLES[$scale][lineType-1]}`;\n</script>\n\n{#if $isOk && pp !== undefined && pp.length > 0}\n   <g class=\"series series-multiline\" style={lineStyleStr} title={title}>\n      {#each pp as p}\n      <polyline class=\"line\" points={p}/>\n      {/each}\n   </g>\n{/if}\n\n","/********************************************************************/\n/*    Methods for Preprocessing (work with vectors and matrices)    */\n/********************************************************************/\n\nimport { isvector, Vector, Matrix, vector } from '../arrays/index.js';\nimport { mean, sd } from '../stat/index.js';\n\n/**\n * Uncenter and unscale values in every column of a matrix.\n *\n * @param {Matrix} X - matrix with values.\n * @param {Vector} center - vector with numbers to use for uncentering.\n * @param {Vector} scale - vector with numbers to use for unscaling.\n *\n * @returns {Matrix} a matrix with uncentered and unscaled column values.\n *\n */\nexport function unscale(X, centerValues, scaleValues) {\n\n   const Xp = Matrix.zeros(X.nrows, X.ncols);\n   for (let c = 1; c <= X.ncols; c++) {\n      const xc = X.getcolref(c);\n      const xpc = Xp.getcolref(c);\n\n      const cv = centerValues.v[c - 1];\n      const sv = scaleValues.v[c - 1];\n\n      for (let r = 0; r < X.nrows; r++) {\n         xpc[r] = xc[r] * sv + cv;\n      }\n   }\n\n   return Xp;\n}\n\n\n/**\n * Center and scale values in every column of a matrix.\n *\n * @param {Matrix} X - matrix with values.\n * @param {boolean|Vector} [center=true] - logical value or a vector with numbers to use for centering.\n * @param {boolean|Vector} [scale=true] - logical value or a vector with numbers to use for scaling.\n * @param {boolean} [full=true] - logical, influences the return values.\n *\n * @returns {Array|Matrix} either a matrix with centered and scaled column values (if 'full = false')\n * or an array with three elements: the matrix, vector with values for centring and vector with values\n * for scaling.\n *\n */\nexport function scale(X, center, scale, full) {\n\n   if (center === undefined) {\n      center = true;\n   }\n\n   if (scale === undefined) {\n      scale = false;\n   }\n\n   if (full === undefined) {\n      full = false;\n   }\n\n   function getStat(X, param, fun, alt) {\n\n      if (typeof(param) === \"boolean\") {\n         return param ? X.apply(fun, 2) : vector([alt]).rep(X.ncols);\n      }\n\n      if (!isvector(param)) {\n         throw Error(\"scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.\");\n      }\n\n      if (param.length !== X.ncols ) {\n         throw Error(\"scale: number of values for centring and scaling must be the same as number of columns in the matrix.\");\n      }\n\n      return param;\n   }\n\n   // prepare values for centering and scaling\n   const centerValues = getStat(X, center, mean, 0);\n   const scaleValues = getStat(X, scale, sd, 1);\n\n   const Xp = Matrix.zeros(X.nrows, X.ncols);\n   for (let c = 1; c <= X.ncols; c++) {\n      const xc = X.getcolref(c);\n      const xpc = Xp.getcolref(c);\n\n      const cv = centerValues.v[c - 1];\n      const sv = 1 / scaleValues.v[c - 1];\n\n      for (let r = 0; r < X.nrows; r++) {\n         xpc[r] = (xc[r] - cv) * sv;\n      }\n   }\n\n   return full ? [Xp, centerValues, scaleValues] : Xp;\n}\n\n","<script>\n   /********************************************************************\n   * OutlierPlot                                                       *\n   * --------------------                                              *\n   * plot variables contributions to q/h distances for selected object *\n   *********************************************************************/\n\n\timport { createEventDispatcher } from 'svelte';\n\n   import { Axes, Multilines, Rectangles, Points, Lines, TextLabels, XAxis, YAxis, Box } from 'svelte-plots-basic/2d';\n   import { scale as prep_scale } from 'mdatools/prep';\n   import { Matrix, Vector, tcrossprod } from 'mdatools/arrays';\n   import { range } from 'mdatools/stat';\n\n   import { pcamodel_get } from '../wasm/pca.js';\n\n   import Container from '../../../shared/controls/Container.svelte';\n   import Select from '../../../shared/controls/Select.svelte';\n\n   export let selected;                   // ID of the selected sample\n   export let model;                      // PCA model\n   export let data;                       // dataset\n   export let ncomp;\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   const dispatch = createEventDispatcher();\n\n   // type of the contributions to show\n   let type = 'residual';\n\n   // x, y coordinates and variable label for highlighted bar\n   let hx, hy, hl;\n\n   /**\n    * Mouse move handler\n    * @param e mouse event\n    */\n   function mouseHandler(e) {\n\n      if (e.target.tagName !== 'rect') {\n         hx = -1;\n         hy = null;\n         hl = null;\n         return;\n      }\n\n      const id = Array.from(e.target.parentNode.children).indexOf(e.target);\n      if (id < 0) {\n         hx = -1;\n         hy = null;\n         hl = null;\n         return;\n      }\n\n      // if index is the same as the highlighted variable, do nothing\n      if (hx === id) return;\n\n      hx = id;\n      hy = y.v[id];\n      hl = model.varlabels[id];\n   }\n\n   let xp, h, q, Xpt, Ht, Qt, i, n, left;\n   $: if (selected >= 0 && model) {\n\n      const X = data.values;\n      const m = new Vector(pcamodel_get(model, \"mX\"));\n      const s = new Vector(pcamodel_get(model, \"sX\"));\n      const P = new Matrix(pcamodel_get(model, \"P\", ncomp), model.ncols, ncomp);\n      const PI = tcrossprod(P, P);\n      const Xp = prep_scale(X, m, s);\n      const H = Xp.dot(PI);\n      const Q = Xp.subtract(H);\n\n      Xpt = Xp.t();\n      Ht = H.t();\n      Qt = Q.t();\n\n      n = model.ncols;\n      i = Vector.seq(1, n);\n      left = i.apply(x => x - 0.5);\n      h = Ht.getcolumn(selected + 1);\n      q = Qt.getcolumn(selected + 1);\n      xp = Xpt.getcolumn(selected + 1);\n   } else {\n      h = null;\n      q = null;\n   }\n\n   // check if type is changed and adjust y-values and y-axis label\n   let y, Y, limY, top, height, yLabel = '';\n   $: if (type) {\n         if (type === 'explained') {\n            Y = Ht;\n            y = h;\n            yLabel = 'Score distance contributions (tpt)';\n         } else if (type === 'residual'){\n            Y = Qt;\n            y = q;\n            yLabel = 'Orthgonal distance contributions (e)';\n         } else {\n            Y = Xpt;\n            y = xp;\n            yLabel = 'Dataset (X)';\n         }\n\n         if (hx > -1) {\n            hy = y.v[hx];\n         }\n\n         limY = range(Y.v);\n         height = limY[1] - limY[0];\n         top = Vector.fill(limY[1], y.length)\n      }\n   // set plot title\n   $: title = selected >= 0 ? `Object ${data.labels[selected]}` : null;\n</script>\n\n{#if selected >= 0 && i && y}\n<div class=\"drop\">\n   <div class=\"modal\">\n      <div class=\"header\">\n         <button class=\"close-button\" on:click={() => dispatch(\"close\")}></button>\n      </div>\n\n      <div class=\"plot-container\" role=\"tooltip\" on:click={mouseHandler}>\n         <Axes {title} {yLabel}\n            limX={[-n/40, n + n/40]}\n            limY={[limY[0] - height * 0.1, limY[1] + height * 0.1]}\n            xLabel=\"Variables\"\n            margins={[0.75, 1.35, 0.5, 1.0]}\n         >\n\n            <Multilines xValues={i} yValues={Y} lineColor='#e0e0e0'/>\n            <Lines xValues={i} yValues={y} lineColor=\"crimson\"  />\n            <Rectangles {left} {top} {height} width={1} faceColor='transparent' borderColor='transparent'/>\n\n\n            {#if hx >= 0}\n            <!-- highlighted variable -->\n            <TextLabels xValues={[hx + 1]} yValues={[limY[1]]} labels={[hl]} pos={3}/>\n            <Points xValues={[hx + 1]} yValues={[hy]} faceColor='crimson' borderColor='crimson'/>\n            <Rectangles left={[left.v[hx]]} top={[top.v[hx]]} {height} width={1} faceColor='#00000015'/>\n            {/if}\n\n\n            <Box slot=\"box\" />\n            <XAxis slot=\"xaxis\" showGrid={true} />\n            <YAxis slot=\"yaxis\" showGrid={true} />\n         </Axes>\n      </div>\n\n      <div class=\"msg-select\">click inside the plot to see a variable label</div>\n      <div class=\"plot-controls\">\n         <Container label=''>\n            <Select id='type' bind:value={type} options={['full', 'explained', 'residual']} />\n         </Container>\n      </div>\n   </div>\n\n</div>\n{/if}\n\n<style>\n   .drop {\n      position: absolute;\n      z-index: 9999;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #000000a0;\n   }\n\n   .modal {\n      border-radius: 0.5rem;\n      background-color: white;\n      display: grid;\n      grid-template-areas:\n         \"header\"\n         \"plot\"\n         \"message\"\n         \"controls\";\n      grid-template-rows: 30px 1fr 20px 3em;\n      width: 95%;\n      height: 80%;\n   }\n\n\n\n   .plot-container {\n      grid-area: plot;\n      padding: 0.5em 1em;\n   }\n\n   .plot-controls {\n      grid-area: controls;\n      background: #f0f0f0;\n      display: flex;\n      width: 100%;\n      justify-content: center;\n      border-radius: 0.5rem;\n   }\n\n   .plot-controls > :global(.control-element) {\n      background: transparent;\n   }\n\n   .header {\n      grid-area: header;\n   }\n\n   .close-button {\n      cursor: pointer;\n      border: none;\n      box-shadow: none;\n      background: transparent;\n      font-size: inherit;\n      font-weight: bold;\n      color: #f8ebc5;\n      border-radius: 50%;\n      width: 20px;\n      height: 20px;\n      background-color: #9ea0a2;\n      float: right;\n      text-align: center;\n      padding: 0;\n      line-height: 20px;\n      font-size: 12px;\n      margin: 5px;\n   }\n\n   .close-button:hover {\n      background-color: #4e5052;\n   }\n\n\n   .msg-select {\n      grid-area: message;\n      height: 15px;\n      font-size: 12px;\n      color: #aaa;\n      text-align: center;\n   }\n</style>","<script>\n   /*************************************************************\n   * Outliers pane for training set                             *\n   * -------------------------                                  *\n   * loads training set from CSV file                           *\n   **************************************************************/\n\n\timport { createEventDispatcher } from 'svelte';\n   import Container from '../controls/Container.svelte';\n   import ButtonCancel from '../controls/ButtonCancel.svelte';\n\n   // event dispatcher\n   const dispatch = createEventDispatcher();\n\n   // calibration set\n   export let outliers;\n   export let dataset;\n\n   // function to dispatch event when outliers are reset\n   function resetOutliers(el) {\n      dispatch(\"resetoutliers\", {});\n   }\n</script>\n\n{#if outliers.length > 0 }\n   <!-- dataset is loaded - show info and cancel button -->\n   <Container>\n      <p class=\"outliers\">\n         Removed: {@html outliers.map(v => '<span class=\"out\">' + dataset.labels[v] + '</span>').join(' ')}\n      </p>\n      <ButtonCancel on:click={resetOutliers} />\n   </Container>\n{/if}\n\n\n<style>\n   .outliers{\n      line-height: 1.5em;\n      text-align: left;\n      padding: 0.5em 0;\n      flex: 0 0 80%;\n   }\n\n   .outliers > :global(.out) {\n      color: #DC143C;\n      background: #DC143C20;\n\n      display: inline-block;\n      white-space: nowrap;\n      vertical-align: middle;\n      max-width: 10ch;\n      overflow: hidden;\n      text-overflow: ellipsis;\n\n      padding: 0.1em 0.5em;\n      margin: 0.2em 0.1em;\n      border-radius: 0.2em;\n   }\n</style>","<script>\n   /*************************************************************\n   * AppContainer for training                                  *\n   * -------------------------                                  *\n   * app container for training of SIMCA model                  *\n   **************************************************************/\n\n\n   import { simca_predict } from '../wasm/simca';\n   import { downloadResults, downloadModel } from '../utils';\n\n   import DataLoader from './DataLoader.svelte';\n   import PCVCalculator from './PCVCalculator.svelte';\n   import ModelCalculator from './ModelCalculator.svelte';\n   import AppPlots from './AppPlots.svelte';\n\n   import ResultTable from '../shared/ResultTable.svelte';\n   import ModelTable from '../shared/ModelTable.svelte';\n   import SIMCASettings from '../shared/SIMCASettings.svelte';\n   import ContributionsModal from '../modals/Contributions.svelte';\n\n   import Outliers from '../../../shared/widgets/Outliers.svelte';\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n\n\n   /*****************************************/\n   /* Component parameters                  */\n   /*****************************************/\n\n   export let WASM; // WASM object from parent app\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // main properties of the training app\n   // all set to undefined to avoid triggering\n   // reset conditions on first render\n\n   let model = undefined;     // global PCA model\n   let simca = undefined;     // SIMCA parameters\n   let calset = undefined;    // calibration set\n   let pvset = undefined;     // computed PV-set\n   let className = undefined; // name of target class\n\n   // parameters to check if model or simca object have been updated\n   let modelHash = 0;\n   let simcaHash = 0;\n\n   // settings for outliers\n   let outliers = [];         // vector with dataset row numbers (from 0) marked as outliers\n   let samples = [];          // vector with dataset row numbers (from 0) without outliers\n   let classes;               // vector with class names for data rows without outliers\n   let labels;                // vector with row labels for data rows without outliers\n   let varlabels;             // vector with column labels for data columns without removed variables\n\n   // settings for results\n   let calres = undefined;    // calibration PCA results\n   let pvres = undefined;     // PV-set PCA results\n   let simcares = undefined;  // combined results for SIMCA classification\n   let ncomp = 1;             // number of components selected by user\n\n   // flag and object id container for showing contributions plot\n   let isContributionsModalShown = false;\n   let outlierId = -1;\n\n\n   /**\n    * Show contributions plot for the selected object\n    * @param e - event dispatched by AppPlots component with id of the selected object\n    */\n   function showContributionsModal(e) {\n      const id = samples[parseInt(e.detail.id)];\n      if (id >= 0 && !outliers.includes(id) && samples.includes(id)) {\n         outlierId = id;\n         isContributionsModalShown = true;\n      }\n   }\n\n\n   /**\n    * Close contributions plot\n    * @param e - event dispatched by ContributionsPlot component\n    */\n   function closeContributionsModal(e) {\n      outlierId = -1;\n      isContributionsModalShown = false;\n   }\n\n\n   /**\n    * Set the selected point as outlier and reset the model and results\n    * @param e - event dispatched by AppPlots component with id of the selected point\n    */\n   function setOutlier(e) {\n      const id = samples[parseInt(e.detail.id)];\n\n      if (id >= 0 && !outliers.includes(id) && samples.includes(id)) {\n\n         // find index of the selected point in samples array\n         const pos = samples.findIndex(x => x === id);\n         if (pos < 0) return;\n\n         // remove id of selected point from classes and labels arrays if they defined\n         if (labels) labels = labels.filter((x, i) => i !== pos);\n         if (classes) classes = classes.filter((x, i) => i !== pos);\n\n         // remove the selected point from samples array\n         samples = samples.filter(x => x !== id);\n\n         // add id of selected point to outliers array\n         outliers = [...outliers, id];\n\n         // reset the model object\n         model = null;\n      }\n   }\n\n\n   /**\n    * Reset outliers and samples arrays\n    */\n   function resetOutliers() {\n      // reset outliers and samples arrays\n      outliers = [];\n      samples = Array(calset.values.nrows).fill().map((element, index) => index);\n\n      // reset classes and labels arrays if they defined\n      classes = calset.classes;\n      labels = calset.labels;\n      varlabels = calset.varlabels;\n\n      // reset the model object\n      model = null;\n   }\n\n\n   // if training set is set null - reset model and class name\n   $: if (calset === null) {\n      model = null;\n      className = null;\n      classes = null;\n      labels = null;\n      varlabels = null;\n      ncomp = 1;\n      samples = [];\n      outliers = [];\n   } else if (calset && samples.length === 0) {\n      samples = Array(calset.values.nrows).fill().map((element, index) => index);\n      classes = calset.classes;\n      labels = calset.labels;\n      varlabels = calset.varlabels;\n      className = calset.classNames[0];\n   }\n\n   // if model object is set to null - reset dependent objects\n   $: if (model === null) {\n      simca = null;\n      calres = null;\n      pvset = null;\n      modelHash = 0;\n      simcaHash = 0;\n   }\n\n   // if pvset is set null - reset the corresponding result object\n   $: if (pvset === null) {\n      simcares = null;\n      pvres = null;\n      simcaHash = 0;\n   }\n\n   // check hashes and initiate updates if outcomes changed\n   $: if (model && model.hash !== modelHash) {\n      modelHash = model.hash;\n   }\n\n   $: if (simca && simca.hash !== simcaHash && pvres && calres) {\n      simcaHash = simca.hash;\n      simcares = {\n         cal: simca_predict(calres, simca, classes, labels, varlabels),\n         pv: simca_predict(pvres, simca, classes, labels, varlabels)\n      };\n   }\n</script>\n\n{#if isContributionsModalShown}\n<ContributionsModal data={calset} {model} {ncomp} selected={outlierId} on:close={closeContributionsModal} />\n{/if}\n\n<div class=\"app-container\">\n\n   <!-- left column with main app controls -->\n   <div class=\"app-controls\">\n      <div class=\"data-loader\">\n         <DataLoader bind:dataset={calset} />\n      </div>\n      {#if outliers.length > 0 }\n      <div class=\"outliers-pane\">\n         <Outliers dataset={calset} on:resetoutliers={resetOutliers} bind:outliers={outliers} />\n      </div>\n      {/if}\n      {#if calset }\n      <div class=\"model-calculator\">\n         <ModelCalculator {WASM} {calset} {outliers} bind:model={model} bind:calres={calres} />\n      </div>\n      {/if}\n      {#if model }\n      <div class=\"pcv-calculator\">\n         <PCVCalculator {WASM} {calset} {outliers} {model} bind:pvset={pvset} bind:pvres={pvres} />\n      </div>\n      {/if}\n      <div class=\"simca-settings\">\n         {#if pvset}\n         <SIMCASettings {model} {className} bind:simca={simca} bind:ncomp={ncomp} />\n         {/if}\n         {#if simcares}\n         <Container label='Download'>\n            <div class=\"buttons\">\n            <Button on:click={() => downloadResults(simcares.cal, calset, \"train\", outliers, ncomp)}>Res (cal)</Button>\n            <Button on:click={() => downloadResults(simcares.pv, pvset, \"PV\", outliers, ncomp)}>Res (pv)</Button>\n            <Button on:click={() => downloadModel(model, simca, ncomp)}>Model</Button>\n            </div>\n         </Container>\n         {/if}\n      </div>\n      {#if simcares}\n      <div class=\"model-stats\">\n         <ModelTable {simca} {ncomp} />\n      </div>\n      <div class=\"result-stats\">\n         <ResultTable {simcares} {ncomp} />\n      </div>\n      {/if}\n   </div>\n\n   <!-- right column with help text or with plots and plot controls -->\n   <div class=\"app-content\">\n      {#if !pvset || !pvres || !simca}\n         <div class=\"help-text\">\n         {#if !calset}\n            <p>\n               In this tab you can train a DD-SIMCA model and optimize its parameters using Procrustes cross-validation. After creating the model you can save it to a file and use it in other tabs. For example, validate and tune it using test set with target class members (tab <strong>Predict: Target</strong>) or apply it to a dataset with non-target class members (tab <strong>Predict: New</strong>).\n            </p>\n            <p><strong>Step 1.</strong></p>\n            <p>Load your training set from a CSV file. The file should contain data as numeric values delimited\n               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns  to variables.\n            </p>\n            <p>\n               First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).\n            </p>\n            <p>\n               First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>)  just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:\n            </p>\n            <div>\n               <table>\n               <tr>\n                  <td>Name</td>\n                  <td>Class</td>\n                  <td>x1</td>\n                  <td>x2</td>\n                  <td>x3</td>\n               </tr>\n               <tr>\n                  <td>O1</td>\n                  <td>A</td>\n                  <td>3.8</td>\n                  <td>1.3</td>\n                  <td>13.6</td>\n               </tr>\n               <tr>\n                  <td>O2</td>\n                  <td>A</td>\n                  <td>11.1</td>\n                  <td>12.3</td>\n                  <td>3.3</td>\n               </tr>\n               <tr>\n                  <td>O3</td>\n                  <td>A</td>\n                  <td>1.2</td>\n                  <td>2.3</td>\n                  <td>4.2</td>\n               </tr>\n               </table>\n            </div>\n            <p></p>\n         {:else}\n            {#if !model}\n            <p><strong>Step 2</strong></p>\n            <p>\n               Next step is to create a global PCA model for the calibration set, which will be the basis for the SIMCA model. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to set\n               optimal number later.\n            </p>\n            {/if}\n\n            {#if model && !pvset}\n            <p><strong>Step 3</strong></p>\n            <p>\n               Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).\n            </p>\n            <p>\n               After this step SIMCA model will be created automatically and you will be able to tune its parameters.\n            </p>\n            {/if}\n         {/if}\n         </div>\n      {:else}\n         {#key pvset }\n         <AppPlots on:setoutlier={setOutlier} on:plotoutlier={showContributionsModal} {simcares} {ncomp} />\n         {/key}\n      {/if}\n   </div>\n</div>\n\n<style>\n\n   .app-container {\n      font-family: Helvetica, Arial, sans-serif;\n      font-size: 1rem;\n      color: #404040;\n      box-sizing: border-box;\n      margin: 0 auto;\n      padding: 0.35em 0.25em;\n      width: 100%;\n      height: 100%;\n      display: grid;\n      grid-template-areas: \"controls content\";\n      grid-template-rows: 100%;\n      grid-template-columns: min(310px, 30%) 1fr;\n   }\n\n   .app-controls {\n      box-sizing: border-box;\n      padding: 0.25em 0.5em;\n   }\n\n   .app-content {\n      box-sizing: border-box;\n      padding: 0 1em 0 0.5em;\n      padding: 0.25em 0.25em;\n      height: 100%;\n   }\n\n   .app-controls > div {\n      background: #e8e8e8;\n      border-radius: 0.25rem;\n   }\n\n   .help-text {\n      margin-top: 0.25rem;\n   }\n\n   .help-text > p, .help-text > div {\n      background: #fafafa;\n      padding: 0em 1.5em 0.5em 1.5em;\n      color: #606060;\n      line-height: 1.5em;\n      margin: 0 1em 0 0;\n   }\n\n   .help-text table {\n      border-collapse: collapse;\n   }\n\n   .help-text table td{\n      padding: 0.25em 0.5em;\n      background: #e0f0fa;\n      text-align: right;\n      border: 1px solid white;\n   }\n\n   .help-text table tr:first-child td{\n      font-weight: bold;\n      background: #f8f4e0;\n   }\n\n   .help-text table td:first-child {\n      font-weight: bold;\n      background: #f8f4e0;\n      padding-right: 1em;\n   }\n\n   .help-text table td:nth-child(2) {\n      background: #e0e8f0;\n      padding-right: 1em;\n   }\n\n   .help-text > p:first-child {\n      border-top-left-radius: 0.25rem;\n      border-top-right-radius: 0.25rem;\n      padding-top: 1.5em;\n   }\n\n   .help-text > p:last-child {\n      border-bottom-left-radius: 0.25rem;\n      border-bottom-right-radius: 0.25rem;\n      padding-bottom: 1.5em;\n   }\n\n   .model-stats {\n      padding: 0.5rem 1rem;\n      margin-top: 0.5rem;\n      font-size: 0.85em;\n   }\n\n   .result-stats {\n      padding: 0.5rem 1rem;\n      margin-top: 0.25rem;\n      font-size: 0.85em;\n   }\n\n   .buttons {\n      position: relative;\n      box-sizing: border-box;\n      display: inline-block;\n      flex: 1 1 auto;\n      margin: 0;\n      padding: 2px 0;\n      width: auto;\n      border-radius: 2px;\n      cursor: default;\n      white-space: nowrap;\n   }\n\n   @media(min-width:1300px) {\n      .app-container {\n         grid-template-columns: min(340px, 30%) 1fr;\n      }\n   }\n\n   @media(min-width:1100px) {\n      .app-container {\n         grid-template-columns: min(320px, 30%) 1fr;\n      }\n   }\n\n</style>","<script>\n   /*************************************************************\n   * ResultsTable                                               *\n   * -------------------------                                  *\n   * shows table with SIMCA results for target test set         *\n   **************************************************************/\n\n   // main properties of the whole app\n   export let res;\n   export let ncomp;\n\n   $: resa = res && ncomp > 0 ? res.v[ncomp - 1] : null;\n</script>\n\n\n{#if resa}\n<table>\n   <tr>\n      <th></th>\n      <th>Target</th>\n   </tr>\n   <tr>\n      <td class=\"label\">Objects</td>\n      <td>{res.nrows}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Extremes</td>\n      <td>{resa.cnum.extreme}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Outliers</td>\n      <td>{resa.cnum.outliers}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Sensitivity</td>\n      <td>{resa.stat.sensitivity.toFixed(2)}</td>\n   </tr>\n</table>\n{/if}\n\n<style>\n   table {\n      width: 100%;\n      border-collapse: collapse;\n   }\n\n   tr {\n      width: 100%;\n   }\n\n   th {\n      border-bottom: 1px solid #a0a0a0;\n   }\n\n   th, td {\n      text-align: right;\n      padding: 0.2em 0.5em 0.2em 0.1em;\n      color: #404040;\n      margin: 0;\n   }\n\n   .label {\n      text-align: left;\n      padding: 0.1em 0.5em;\n   }\n</style>","<script>\n   /*************************************************************\n   * AppPlots component for test set                            *\n   * -------------------------------                            *\n   * show selection of plot for testing of SIMCA model          *\n   **************************************************************/\n\n   // import plot and plot controls components\n   import AppPlots  from '../shared/AppPlots.svelte';\n\n   import SensitivityPlot from '../../../shared/plots/SensitivityPlot.svelte';\n   import ExtremePlot from '../../../shared/plots/ExtremePlot.svelte';\n   import AcceptancePlot from '../../../shared/plots/AcceptancePlot.svelte';\n   import DistancePlot from '../../../shared/plots/DistancePlot.svelte';\n\n   import SensitivityPlotControls from '../../../shared/plots/SensitivityPlotControls.svelte';\n   import ExtremePlotControls from '../../../shared/plots/ExtremePlotControls.svelte';\n   import AcceptancePlotControls from '../../../shared/plots/AcceptancePlotControls.svelte';\n   import DistancePlotControls from '../../../shared/plots/DistancePlotControls.svelte';\n   import VariableDistancePlotControls from '../../../shared/plots/VariableDistancePlotControls.svelte';\n   import ImportancePlotControls from '../../../shared/plots/ImportancePlotControls.svelte';\n\n\n   // Input parameters\n   export let simcares;\n   export let ncomp;\n\n\n   // array with list of plots and their components\n   // parameter \"scope\" tells parent AppPlots component whether click events must be handled:\n   // - for \"objects\" - it triggers click events on plots as selection of objects and mark them as outliers\n   // - for \"variables\" - it triggers click events on plots as selection of variables (no more actions so far)\n   // - for \"none\" - the click events will be ignored\n   let options = [\n      {label: 'Acceptance', scope: 'objects', plotComponent: AcceptancePlot, controlsComponent: AcceptancePlotControls},\n      {label: 'Distance (obj)', scope: 'objects', plotComponent: DistancePlot, controlsComponent: DistancePlotControls},\n      {label: 'Distance (var)', scope: 'variables', plotComponent: DistancePlot, controlsComponent: VariableDistancePlotControls},\n      {label: 'Extremes', scope: 'none', plotComponent: ExtremePlot, controlsComponent: ExtremePlotControls},\n      {label: 'Sensitivity', scope: 'none', plotComponent: SensitivityPlot, controlsComponent: SensitivityPlotControls},\n      {label: 'Importance', scope: 'variables', plotComponent: AcceptancePlot, controlsComponent: ImportancePlotControls},\n   ];\n\n</script>\n\n{#if options}\n<AppPlots on:setoutlier on:plotoutlier {simcares} {options} {ncomp} />\n{/if}","<script>\n   /*************************************************************\n   * DataLoader for test set                                    *\n   * -------------------------                                  *\n   * loads test set from CSV file                               *\n   **************************************************************/\n\n   import { pca_predict } from '../wasm/pca';\n   import { parseCSV } from '../utils.js';\n\n   import DatasetWidget from './DatasetWidget.svelte';\n\n   import FileSelector from '../../../shared/controls/FileSelector.svelte';\n   import Spinner from '../../../shared/controls/Spinner.svelte';\n   import Select from '../../../shared/controls/Select.svelte';\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n\n   export let WASM;\n   export let dataset;\n   export let model;\n   export let pcares;\n   export let outliers;\n\n   export let outliersOld = [];\n\n   let dataFile;                    // CSV file\n   let sep = ',';                   // seperator between values\n   let hasHeader = 'yes';           // first row contains header (variable names)\n   let hasLabels = 'no';            // first column contains row labels\n   let hasClassLabels = 'no';       // next column contains class labels\n   let promise;\n\n   // app status for handling and showing errors\n   let status = 'neutral';\n   let errMsg = '';\n\n   // possible delimeters\n   const sepOptions = [',', ';'];\n\n   function predict(data, outliers) {\n      promise = WASM()\n         .then(Module => {\n            const res = pca_predict(Module, model, data, outliers);\n            pcares = res;\n         })\n         .catch(e =>{\n            pcares = null;\n            status = 'error';\n            errMsg = e;\n         });\n   };\n\n\n   // gets CSV content as one large string, parse it into matrix\n   function setData(strData) {\n      try{\n         const d = parseCSV(\n            strData,\n            sep,\n            hasHeader === 'yes',\n            hasLabels === 'yes',\n            hasClassLabels === 'yes'\n         );\n\n         if (d.values.nrows < 1 ) {\n            throw new Error('Dataset must have at least 1 row.');\n         }\n\n         if (d.values.ncols !== model.ncols) {\n            throw new Error('Dataset has different number of columns than the training set.');\n         }\n\n         d['fileName'] = dataFile.name;\n         dataset = d;\n         predict(d.values, []);\n         errMsg = ''\n         status = 'success';\n      } catch (e) {\n         dataset = null;\n         status = 'error';\n         errMsg = e;\n      }\n   }\n\n   // promise for reading the CSV file\n   function readFile (e) {\n      // // old code - deprecated\n      // const reader = new FileReader();\n      // reader.onload = () => setData(reader.result);\n      // reader.readAsBinaryString(dataFile);\n      // const reader = new FileReader();\n      // reader.onload = () => {\n      //    const arrayBuffer = reader.result;\n      //    const binaryString = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n      //    setData(binaryString);\n      // };\n      // reader.readAsArrayBuffer(dataFile);\n\n      const reader = new FileReader();\n      reader.onload = () => {\n         setData(reader.result);\n      };\n      reader.readAsText(dataFile);\n   }\n\n\n\n   // reset whole component to initial state\n   function reset () {\n      dataFile = null;\n   }\n\n   // reactive expression for tracking changes of 'dataFile'\n   $: if (dataFile === null) {\n      // if data file is empty reset status and error messages\n      dataset = null;\n   } else {\n      // if not just remove error messages if any\n      status = 'neutral';\n      errMsg = '';\n   }\n\n   // reactive expression for tracking changes of 'sep'\n   $: if (sep) {\n      // if separator was changed remove error message\n      status = 'neutral';\n      errMsg = '';\n   }\n\n   $: if (dataset && outliers !== outliersOld) {\n      try{\n         predict(dataset.values, outliers);\n         errMsg = ''\n         status = 'success';\n         outliersOld = outliers;\n      } catch (e) {\n         dataset = null;\n         status = 'error';\n         errMsg = e;\n      }\n   }\n\n</script>\n\n{#if !dataset }\n\n   <!-- show if data is not loaded -->\n   <!-- reset component if dataFile is changed inside -->\n   {#key dataFile === undefined}\n   <Container>\n      <FileSelector id=\"dataFile\" message=\"Select CSV file with dataset\" bind:file={dataFile} />\n   </Container>\n   {/key}\n\n   <!-- show if file is selected but data is not loaded -->\n   {#if dataFile}\n   <Container label=\"Delimiter:\">\n      <Select id=\"sep\" bind:value={sep} options={sepOptions} />\n   </Container>\n   <Container label=\"Header:\">\n      <Select id=\"hasHeader\" bind:value={hasHeader} options={['yes', 'no']} />\n   </Container>\n   <Container label=\"Row labels:\">\n      <Select id=\"hasLabels\" bind:value={hasLabels} options={['yes', 'no']} />\n   </Container>\n   <Container label=\"Class labels:\">\n      <Select id=\"hasLabels\" bind:value={hasClassLabels} options={['yes', 'no']} />\n   </Container>\n   <Container label=\"&nbsp;\">\n      <Button on:click={readFile}>Load</Button>\n   </Container>\n   {/if}\n\n{:else}\n\n\n{#if promise}\n\n   <!-- calculation is in process -->\n   {#await promise}\n      <Container>\n         <Spinner />\n         <p>Loading data and apply model...</p>\n      </Container>\n\n   {:then value}\n      <!-- status if succeed -->\n      {#if pcares !== null}\n      <!-- dataset is loaded - show info and cancel button -->\n      <DatasetWidget {dataset} on:click={reset} />\n      {/if}\n\n   {:catch error}\n      <!-- error message if failed -->\n      <Container status=\"error\">\n         <p>{error}</p>\n      </Container>\n   {/await}\n\n{/if}\n\n\n{/if}\n\n<!-- error message -->\n{#if status === 'error' || errMsg}\n<Container status=\"error\">\n   <p>{errMsg}</p>\n</Container>\n{/if}\n\n","<script>\n   /*************************************************************\n   * ModelLoader                                                *\n   * -------------------------                                  *\n   * loads SIMCA model from file                                *\n   **************************************************************/\n\n   import FileSelector from '../../../shared/controls/FileSelector.svelte';\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n   import ButtonCancel from '../../../shared/controls/ButtonCancel.svelte';\n\n   // calibration set\n   export let model;\n   export let simca;\n\n   // JSON file with model\n   let modelFile = undefined;\n\n   // app status for handling and showing errors\n   let status = 'neutral';\n   let errMsg = '';\n\n\n   // gets model content as one large string, parse it into matrix\n   function setModel(strData) {\n      try{\n         const m = JSON.parse(strData);\n\n         // check if the object version is from previous app version (no hash field)\n         if (!Object.keys(m.pca).includes('hash')) {\n            throw Error('you try to load model incompatible with this app version, create a new model or use <a href=\"/ddsimca-old/\">old version</a> of the app.');\n         }\n         m.pca.v = new Float64Array(m.pca.v);\n\n         m.pca.lim.classic.Nh = new Float64Array(m.pca.lim.classic.Nh);\n         m.pca.lim.classic.Nq = new Float64Array(m.pca.lim.classic.Nq);\n         m.pca.lim.classic.h0 = new Float64Array(m.pca.lim.classic.h0);\n         m.pca.lim.classic.q0 = new Float64Array(m.pca.lim.classic.q0);\n\n         m.pca.lim.classic.Ng = new Float64Array(m.pca.lim.classic.Ng);\n         m.pca.lim.classic.Nr = new Float64Array(m.pca.lim.classic.Nr);\n         m.pca.lim.classic.g0 = new Float64Array(m.pca.lim.classic.g0);\n         m.pca.lim.classic.r0 = new Float64Array(m.pca.lim.classic.r0);\n\n         m.pca.lim.robust.Nh = new Float64Array(m.pca.lim.robust.Nh);\n         m.pca.lim.robust.Nq = new Float64Array(m.pca.lim.robust.Nq);\n         m.pca.lim.robust.h0 = new Float64Array(m.pca.lim.robust.h0);\n         m.pca.lim.robust.q0 = new Float64Array(m.pca.lim.robust.q0);\n\n         m.pca.lim.robust.Ng = new Float64Array(m.pca.lim.robust.Ng);\n         m.pca.lim.robust.Nr = new Float64Array(m.pca.lim.robust.Nr);\n         m.pca.lim.robust.g0 = new Float64Array(m.pca.lim.robust.g0);\n         m.pca.lim.robust.r0 = new Float64Array(m.pca.lim.robust.r0);\n\n         m.simca.h0 = new Float64Array(m.simca.h0);\n         m.simca.Nh = new Float64Array(m.simca.Nh);\n         m.simca.q0 = new Float64Array(m.simca.q0);\n         m.simca.Nq = new Float64Array(m.simca.Nq);\n         m.simca.Nf = new Float64Array(m.simca.Nf);\n\n         m.simca.g0 = new Float64Array(m.simca.g0);\n         m.simca.Ng = new Float64Array(m.simca.Ng);\n         m.simca.r0 = new Float64Array(m.simca.r0);\n         m.simca.Nr = new Float64Array(m.simca.Nr);\n         m.simca.Ni = new Float64Array(m.simca.Ni);\n\n         m.simca.eCrit = new Float64Array(m.simca.eCrit);\n         m.simca.oCrit = new Float64Array(m.simca.oCrit);\n         m.simca.veCrit = new Float64Array(m.simca.veCrit);\n         m.simca.voCrit = new Float64Array(m.simca.voCrit);\n\n         model = m.pca;\n         simca = m.simca;\n         status = 'success';\n         errMsg = ''\n      } catch (e) {\n         model = null;\n         simca = null;\n         status = 'error';\n         errMsg = e;\n      }\n   }\n\n   // promise for reading the CSV file\n   function readFile (e) {\n      const reader = new FileReader();\n      reader.onload = () => setModel(reader.result);\n      reader.readAsBinaryString(modelFile);\n   }\n\n   function reset() {\n      modelFile = null\n   }\n\n   // reactive expression for tracking changes of 'dataFile'\n   $: if (modelFile === null) {\n      // if model file is empty reset status and error messages\n      model = null;\n      simca = null;\n   } else {\n      // if not just remove error messages if any\n      status = 'neutral';\n      errMsg = '';\n   }\n\n   // file name with model without extension\n   $: modelFileName = modelFile ? modelFile.name.replace(/\\.[^/.]+$/, \"\") : '';\n</script>\n\n{#if !model }\n\n   <!-- show if data is not loaded -->\n   <!-- reset component if dataFile is changed inside -->\n   {#key modelFile === undefined}\n   <Container>\n      <FileSelector id=\"modelFile\" bind:file={modelFile} acceptType=\".json\" message=\"Select file with model\"/>\n   </Container>\n   {/key}\n\n   {#if modelFile}\n   <Container label=\"&nbsp;\">\n      <Button on:click={readFile}>Load</Button>\n   </Container>\n   {/if}\n\n{:else}\n\n   <!-- dataset is loaded - show info and cancel button -->\n   <Container>\n      <p class=\"model-info\">\n         <span>Model file:</span> <span title=\"{modelFileName}\" class=\"file-name\">{modelFileName}</span><br>\n         <span>Target class:</span> <span title=\"{simca.className}\" class=\"class-name\">{simca.className}</span>\n      </p>\n      <ButtonCancel on:click={reset} />\n   </Container>\n\n{/if}\n\n<!-- error message -->\n{#if status === 'error' || errMsg}\n<Container status=\"error\">\n   <p>{@html errMsg}</p>\n</Container>\n{/if}\n\n\n<style>\n\n   .model-info {\n      line-height: 1.5em;\n   }\n   .model-info > :global(span) {\n      vertical-align:top;\n      color: #a0a0a0;\n   }\n\n   .model-info > .file-name,\n   .model-info > .class-name {\n      display: inline-block;\n      padding: 0;\n      margin: 0;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      max-width: 25ch;\n      color: #222;\n   }\n\n</style>","<script>\n   /*************************************************************\n   * AppContainer for target predictions                        *\n   * -----------------------------------                        *\n   * app container for testing of SIMCA model                   *\n   * on target class                                            *\n   **************************************************************/\n\n   import { simca_predict } from '../wasm/simca';\n   import { downloadResults, downloadModel } from '../utils';\n\n   import ResultTable from './ResultTable.svelte';\n   import AppPlots from './AppPlots.svelte';\n\n   import DataLoader from '../shared/PredictDataLoader.svelte';\n   import ModelLoader from '../shared/ModelLoader.svelte';\n   import ModelTable from '../shared/ModelTable.svelte';\n   import SIMCASettings from '../shared/SIMCASettings.svelte';\n\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n   import Outliers from '../../../shared/widgets/Outliers.svelte';\n   import ModalContributions from '../modals/Contributions.svelte';\n\n\n   /*****************************************/\n   /* Component parameters                  */\n   /*****************************************/\n\n   export let WASM; // WASM object from parent app\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // main properties of the test app\n   let model;                 // PCA model\n   let simca;                 // SIMCA parameters\n   let data;                  // data set\n   let pcares;                // PCA results for the new data set\n   let simcares;              // combined results for SIMCA classification\n   let ncomp = 0;             // number of components selected by user\n\n   // parameters to check if model or simca object have been updated\n   let modelHash = 0;\n   let simcaHash = 0;\n\n   // settings for outliers\n   let outliers = [];         // vector with dataset row numbers (from 0) marked as outliers\n   let samples = [];          // vector with dataset row numbers (from 0) without outliers\n   let classes;               // vector with class names for data rows without outliers\n   let labels;                // vector with row labels for data rows without outliers\n   let varlabels;             // vector with column labels for data columns without removed variables\n\n   // flag and object id container for showing contributions plot\n   let isContributionModalShown = false;\n   let outlierId = -1;\n\n\n   /**\n    * Show contributions plot for the selected object\n    * @param e - event dispatched by AppPlots component with id of the selected object\n    */\n   function showContributionsModal(e) {\n      const id = samples[parseInt(e.detail.id)];\n      if (id >= 0 && !outliers.includes(id) && samples.includes(id)) {\n         outlierId = id;\n         isContributionModalShown = true;\n      }\n   }\n\n\n   /**\n    * Close contributions plot\n    * @param e - event dispatched by ContributionsPlot component\n    */\n   function closeContributionsModal(e) {\n      outlierId = -1;\n      isContributionModalShown = false;\n   }\n\n\n   /**\n    * Set the selected point as outlier and reset the model and results\n    * @param e - event dispatched by AppPlots component with id of the selected point\n    */\n   function setOutlier(e) {\n      const id = samples[parseInt(e.detail.id)];\n\n      if (id >= 0 && !outliers.includes(id) && samples.includes(id)) {\n\n         // find index of the selected point in samples array\n         const pos = samples.findIndex(x => x === id);\n         if (pos < 0) return;\n\n\n         // remove id of selected point from classes and labels arrays if they defined\n         if (labels) labels = labels.filter((x, i) => i !== pos);\n         if (classes) classes = classes.filter((x, i) => i !== pos);\n\n         // remove the selected point from samples array\n         samples = samples.filter(x => x !== id);\n\n         // set result objects to null\n         simcares = null;\n         pcares = null;\n\n         // add id of selected point to outliers array\n         outliers = [...outliers, id];\n      }\n   }\n\n\n   /**\n    * Reset outliers and samples arrays\n    */\n   function resetOutliers() {\n\n      // reset classes and labels arrays if they defined\n      labels = data.labels;\n      classes = data.classes;\n      varlabels = data.varlabels;\n\n      // reset outliers and samples arrays\n      samples = Array(data.values.nrows).fill().map((element, index) => index);\n      outliers = [];\n   }\n\n   // if model is null - reset dataset\n   $: if (model === null) {\n      data = null;\n      simca = null;\n      varlabels = null;\n      ncomp = 0;\n      modelHash = 0;\n      simcaHash = 0;\n   }\n\n   // if dataset is null - reset all dependent objects (results, labels, outliers, etc.)\n   $: if (data === null) {\n      pcares = null;\n      simcares = null;\n      classes = null;\n      labels = null;\n      samples = [];\n      outliers = [];\n   } else if (data && samples.length === 0) {\n      samples = Array(data.values.nrows).fill().map((element, index) => index);\n      labels = data.labels;\n      classes = data.classes;\n   }\n\n\n   // check hashes and initiate updates if outcomes changed\n   $: if (model && model.hash !== modelHash) {\n      modelHash = model.hash;\n      varlabels = model.varlabels;\n   }\n\n   $: if (simca && pcares) {\n      simcaHash = simca.hash;\n      simcares = {\n         target: simca_predict(pcares, simca, classes, labels, varlabels)\n      };\n   }\n</script>\n\n{#if isContributionModalShown}\n<ModalContributions {data} {simca} {model} {ncomp} selected={outlierId} on:close={closeContributionsModal} />\n{/if}\n\n<div class=\"app-container\">\n\n   <!-- left column with main app controls -->\n   <div class=\"app-controls\">\n      <div class=\"data-loader\">\n         <ModelLoader bind:model={model} bind:simca={simca} />\n      </div>\n\n      {#if model}\n      <div class=\"data-loader\">\n         <DataLoader bind:dataset={data} bind:pcares={pcares} {WASM} {model} {outliers} />\n      </div>\n      {/if}\n\n      {#if outliers.length > 0 }\n      <div class=\"outliers-pane\">\n         <Outliers dataset={data} on:resetoutliers={resetOutliers} bind:outliers={outliers} />\n      </div>\n      {/if}\n\n      {#if simca && data}\n      <div class=\"simca-settings\">\n         <SIMCASettings {model} bind:simca={simca} bind:ncomp={ncomp} />\n         <Container label='Download'>\n            <div class=\"buttons\">\n            <Button on:click={() => downloadResults(simcares.target, data, \"target\", outliers, ncomp)}>Results</Button>\n            <Button on:click={() => downloadModel(model, simca, ncomp)}>Model</Button>\n            </div>\n         </Container>\n      </div>\n      <div class=\"model-stats\">\n         <ModelTable {simca} {ncomp} />\n      </div>\n      {/if}\n      {#if simcares}\n      <div class=\"result-stats\">\n         <ResultTable res={simcares.target} {ncomp} />\n      </div>\n      {/if}\n\n   </div>\n\n   <!-- right column with help text or with plots and plot controls -->\n   <div class=\"app-content\">\n      {#if !pcares}\n         <div class=\"help-text\">\n         <p>\n            In this tab you can apply previously trained DD-SIMCA model to a dataset consisting of target class members (at least\n            the app will assume this, you can of course provide any dataset). You can use it for testing performance\n            of the model, or tune its parameters, if necessary.\n         </p>\n         {#if !model}\n            <p><strong>Step 1</strong></p>\n            <p>\n               Load previously trained DD-SIMCA model from file.\n            </p>\n         {:else}\n            {#if !data}\n            <p><strong>Step 2</strong></p>\n            <p>\n               Load data set from CSV file. The requirements to the file are the same as for the\n               training set. The data may contain class labels for each row (you need to select this option in settings after selecting CSV file) but it is not necessary, as in any case the labels will be ignored and model will assume that all samples are from the target class.\n            </p>\n            {/if}\n         {/if}\n         </div>\n      {:else}\n         {#key data || outliers}\n         <AppPlots on:setoutlier={setOutlier} on:plotoutlier={showContributionsModal} {simcares} {ncomp} />\n         {/key}\n      {/if}\n   </div>\n</div>\n\n<style>\n\n   .app-container {\n      font-family: Helvetica, Arial, sans-serif;\n      font-size: 1rem;\n      color: #404040;\n      box-sizing: border-box;\n      margin: 0 auto;\n      padding: 0.35em 0.25em;\n      width: 100%;\n      height: 100%;\n      display: grid;\n      grid-template-areas: \"controls content\";\n      grid-template-rows: 100%;\n      grid-template-columns: min(310px, 30%) 1fr;\n   }\n\n   .app-controls {\n      box-sizing: border-box;\n      padding: 0.25em 0.5em;\n   }\n\n   .app-content {\n      box-sizing: border-box;\n      padding: 0 1em 0 0.5em;\n      padding: 0.25em 0.25em;\n   }\n\n   .app-controls > div {\n      background: #e8e8e8;\n      border-radius: 0.25rem;\n   }\n\n   .help-text {\n      margin-top: 0.25rem;\n   }\n\n   .help-text > p {\n      background: #fafafa;\n      padding: 0em 1.5em 0.5em 1.5em;\n      color: #606060;\n      line-height: 1.5em;\n      margin: 0 1em 0 0;\n   }\n\n   .help-text > p:first-child {\n      border-top-left-radius: 0.25rem;\n      border-top-right-radius: 0.25rem;\n      padding-top: 1.5em;\n   }\n\n   .help-text > p:last-child {\n      border-bottom-left-radius: 0.25rem;\n      border-bottom-right-radius: 0.25rem;\n      padding-bottom: 1.5em;\n   }\n\n   .model-stats {\n      padding: 0.5rem 1rem;\n      margin-top: 0.5rem;\n      font-size: 0.85em;\n   }\n\n   .result-stats {\n      padding: 0.5rem 1rem;\n      margin-top: 0.25rem;\n      font-size: 0.85em;\n   }\n\n   .buttons {\n      position: relative;\n      box-sizing: border-box;\n      display: inline-block;\n      flex: 1 1 auto;\n      margin: 0;\n      padding: 2px 0;\n      width: auto;\n      border-radius: 2px;\n      cursor: default;\n   }\n\n   @media(min-width:1300px) {\n      .app-container {\n         grid-template-columns: min(340px, 30%) 1fr;\n      }\n   }\n\n   @media(min-width:1100px) {\n      .app-container {\n         grid-template-columns: min(320px, 30%) 1fr;\n      }\n   }\n\n</style>","<script>\n   /****************************************************************\n   * SpecificityPlot                                               *\n   * --------------------                                          *\n   * shows plot with specificity values vs. number of PCs          *\n   *****************************************************************/\n\n   import { Axes, XAxis, YAxis, Box, Lines, Segments, Points } from 'svelte-plots-basic/2d';\n   import { PNG_WIDTH, PNG_HEIGHT, PNG_RES, MARGINS, getSeries } from './Defaults.js';\n\n   export let params;                     // JSON with main plot parameters\n   export let simcares;                   // JSON with SIMCA results\n   export let ncomp = 1;                  // number of components selected by user\n\n   export let fileName = 'plot-specificity';\n   export let pngWidth = PNG_WIDTH;\n   export let pngHeight = PNG_HEIGHT;\n   export let pngRes = PNG_RES;\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // constant plot parameters\n   const showGrid = true;                  // logical, show grid or not\n   const xLabel = 'Number of PCs';\n   const yLabel = 'Specificity';\n   const title = 'Specificity plot';\n\n\n   // local copies of plot parameters\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n   $: if (params && params.resID !== resID) resID = params.resID;\n   $: nCompMax = simcares && resID ? simcares[resID].v.length : 1;\n   $: s = getSeries(simcares, resID, 'specificity');\n   $: limY = params && params.zoom === 'on' ? [s.yMin - 0.1, 1.05] : [-0.1, 1.1];\n</script>\n\n{#if params, s }\n<Axes {title} {xLabel} {yLabel}\n   {fileName} {pngWidth} {pngHeight} {pngRes}\n   {limY}\n   downloadLinks=\"hover\"\n   margins={MARGINS}\n   limX={[0, nCompMax + 1]}\n>\n\n   <!-- selected component (vertical line) -->\n   <Segments xStart={[ncomp]} xEnd={[ncomp]} yStart={[-1]} yEnd={[1.2]} lineColor='#a0a0a0' />\n\n   <!-- data points -->\n   <Lines xValues={s.x} yValues={s.y} lineWidth={1.5} lineColor='#2679B2' />\n   <Points xValues={s.x} yValues={s.y} borderWidth={1.5} faceColor='#fff' borderColor='#2679B2'/>\n\n   <!-- selected component (point) -->\n   <Points\n      xValues={[s.x[ncomp - 1]]}\n      yValues={[s.y[ncomp - 1]]}\n      markerSize={1.5}\n      borderWidth={1.5}\n      faceColor={s.lineColor}\n      borderColor='#a0a0a0'\n   />\n\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /****************************************************************\n   * AliensPlot                                                    *\n   * --------------------                                          *\n   * shows plot with number of alien samples for different alpha   *\n   *****************************************************************/\n\n   import { qnorm } from 'mdatools/distributions';\n   import { Vector } from 'mdatools/arrays';\n   import { Axes, XAxis, YAxis, Box, Lines, Segments, Points } from 'svelte-plots-basic/2d';\n   import { PNG_WIDTH, PNG_HEIGHT, PNG_RES, MARGINS } from './Defaults.js';\n\n   export let params;                                             // JSON with main plot parameters\n   export let simcares;                                           // JSON with SIMCA results\n   export let showGrid = true;                                    // logical, show grid or not\n   export let xLabel = 'Number of wrongly accepted (expected)';   // label for x axis\n   export let yLabel = 'Number of wrongly accepted (observed)';   // label for y axis\n   export let ncomp = 1;                                          // number of components selected by user\n\n   // plot saving parameters\n   export let fileName = 'plot-aliens';\n   export let pngWidth = PNG_WIDTH;\n   export let pngHeight = PNG_HEIGHT;\n   export let pngRes = PNG_RES;\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n\n   // local copies of Plot parameters\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n\n   // function to compute observed extremes\n   function getObserved(res) {\n      const na = res.anum.aliens;\n      const n = res.f.length;\n      let observed = Vector.zeros(na);\n\n      // loop over all samples but take into account only aliens\n      for (let i = 0; i < n; i++) {\n         if (res.a[i] !== 'alien') continue;\n         observed = observed.add((fcrit.apply(v => res.f[i] < v)));\n      }\n      return observed;\n   }\n\n\n   $: if (params && params.resID !== resID) resID = params.resID;\n   $: title = ncomp ? 'Aliens plot (A = ' + ncomp + ')' : '';\n   $: resobj = simcares && resID ? simcares[resID] : null;\n   $: ra = resobj ? resobj.v[ncomp - 1] : null;\n   $: nObj = ra ? ra.anum.aliens : null;\n\n   // compute expected values values\n   let expected, Nm, Np, fcrit;\n   $: if (nObj) {\n      fcrit = Vector.zeros(nObj);\n      expected = Vector.zeros(nObj);\n      Nm = Vector.zeros(nObj);\n      Np = Vector.zeros(nObj);\n\n      for (let i = 1; i <= nObj; i++) {\n         // compute expected beta\n         const b = i / nObj;\n\n         // based on beta compute critical value for f-distance\n         const zb = qnorm(b);\n         fcrit.v[i - 1] = ra.m * Math.pow(ra.Sz * zb + ra.Mz, 1.0 / ra.hz);\n\n         // compute 95% interval for expected values\n         const D = 2 * Math.sqrt(i * ( 1 - b));\n\n         Nm.v[i - 1] = i - D;\n         Np.v[i - 1] = i + D;\n         expected.v[i - 1] = i;\n      }\n\n   } else {\n      expected = null;\n      Nm = null;\n      Np = null;\n      fcrit = null;\n   }\n\n   $: observed = ra ? getObserved(ra) : null;\n</script>\n\n{#if expected && observed }\n<Axes {title} {xLabel} {yLabel}\n   downloadLinks=\"hover\"\n   margins={MARGINS}\n   limX={[-1, nObj + 2]}\n   limY={[-1, nObj + 2]}\n   {fileName} {pngWidth} {pngHeight} {pngRes}\n>\n\n   <Lines xValues={expected} yValues={expected} lineColor=\"#e0e0e0\" />\n   <Lines xValues={expected} yValues={Nm} lineColor=\"#e0e0e0\" />\n   <Lines xValues={expected} yValues={Np} lineColor=\"#e0e0e0\" />\n   <Segments xStart={expected} xEnd={expected} yStart={Nm} yEnd={Np}  lineColor=\"#e0e0e0\"/>\n\n   <Points xValues={expected} yValues={observed} borderWidth={2}/>\n\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /****************************************************************\n   * SelectivityPlot                                               *\n   * --------------------                                          *\n   * shows plot with number of alien samples for different alpha   *\n   *****************************************************************/\n\n   import { pnorm, qchisq } from 'mdatools/distributions';\n   import { Vector } from 'mdatools/arrays';\n   import { Axes, XAxis, YAxis, Box, Lines, Segments, Points } from 'svelte-plots-basic/2d';\n   import { PNG_WIDTH, PNG_HEIGHT, PNG_RES, MARGINS, LINE_COLORS, FACE_COLORS, getSeries } from './Defaults.js';\n\n   export let params;                                 // JSON with main plot parameters\n   export let simcares;                               // JSON with SIMCA results\n   export let showGrid = true;                        // logical, show grid or not\n   export let yLabel = 'Selectivity (1 - )';         // label for y axis\n   export let ncomp = 1;                              // number of components selected by user\n\n   // plot saving parameters\n   export let fileName = 'plot-aliens';\n   export let pngWidth = PNG_WIDTH;\n   export let pngHeight = PNG_HEIGHT;\n   export let pngRes = PNG_RES;\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n\n   export function getPlotSeries(resobj, ncomp, vsVar) {\n      if (!resobj || ncomp < 1) return;\n\n      // compute selectivity vs theoretical values of alpha for fixed ncomp\n      if (vsVar === ' vs. ') {\n         //const n = res.h.length;\n         const res = resobj.v[ncomp - 1];\n         const f0 = res.f0;\n         const k = res.k;\n         const s = res.s;\n         const h = res.hz;\n         const Sz = res.Sz;\n         const Mz = res.Mz;\n\n         let n = 181;\n         const x = Vector.ones(n);\n         const y = Vector.ones(n);\n         let sel = 0;\n\n         const norm1 = 1 / (k + s);\n         const norm2 = 1 / Sz;\n\n         function getbeta(a) {\n            const fcrit = qchisq(1 - a, k);\n            const z = fcrit / f0;\n            return pnorm((Math.pow(z * norm1, h) - Mz) * norm2);\n         }\n\n         // alpha from 0 to 0.1\n         let i = 1;\n         for (let a = 0.001; a < 0.1; a = a + 0.002) {\n            const b = getbeta(a);\n            x.v[i] = b;\n            y.v[i] = 1 - a;\n            sel = sel + b * 0.002\n            i = i + 1;\n         }\n\n         for (let a = 0.1; a < 0.9; a = a + 0.01) {\n            const b = getbeta(a);\n            x.v[i] = b;\n            y.v[i] = 1 - a;\n            sel = sel + b * 0.01\n            i = i + 1;\n         }\n\n         for (let a = 0.9; a < 1.0; a = a + 0.002) {\n            const b = getbeta(a);\n            x.v[i] = b;\n            y.v[i] = 1 - a;\n            sel = sel + b * 0.002\n            i = i + 1;\n         }\n\n         x.v[i] = 0;\n         y.v[i] = 0;\n\n         return [x, y, 1 - sel];\n      }\n\n      // compute selectivity vs ncomp for fixed alpha\n      const nCompMax = resobj.v.length;\n      const x = Array(nCompMax);\n      const y = Array(nCompMax);\n      for (let i = 0; i < nCompMax; i++) {\n         x[i] = i + 1;\n         y[i] = 1 - resobj.v[i].beta;\n      }\n      return [x, y, 0];\n   }\n\n\n\n   // local copies of Plot parameters\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n   let vsVar = ' vs. ';\n\n   $: resobj = simcares && resID ? simcares[resID] : null;\n   $: if (params && params.vsVar) vsVar = params.vsVar;\n\n\n   $: [x, y, sel] = resobj && ncomp > 0 ? getPlotSeries(resobj, ncomp, vsVar) : [null, null];\n   $: limX = vsVar === ' vs. ' ? [-0.05, 1.05] : [0, resobj.v.length + 1];\n   $: yLabel = vsVar === ' vs. ' ? 'Expected sensitivity, 1 - ' : 'Selectivity, 1 - ';\n   $: xLabel = vsVar === ' vs. ' ? '1  selectivity, ' : 'Number of PCs';\n   $: title = vsVar === ' vs. ' ? 'Selectivity plot (A = ' + ncomp + ', AUC = ' + sel.toFixed(4) + ')' : 'Selectivity plot ( = ' + resobj.alpha/100 + ')';\n\n</script>\n\n{#if x && y }\n<Axes {title} {xLabel} {yLabel} {limX}\n   downloadLinks=\"hover\"\n   margins={MARGINS}\n   limY={[-0.05, 1.05]}\n   {fileName} {pngWidth} {pngHeight} {pngRes}\n>\n\n   {#if vsVar === ' vs. ncomp'}\n   <!-- selected component (line )-->\n   <Segments xStart={[ncomp]} xEnd={[ncomp]} yStart={[-1]} yEnd={[1.2]} lineColor='#a0a0a0' />\n   {:else}\n   <!-- 50% line -->\n   <Segments xStart={[0]} xEnd={[1]} yStart={[0]} yEnd={[1]} lineColor='#a0a0a0' lineType={3} />\n   {/if}\n\n   <!-- data points -->\n   <Lines xValues={x} yValues={y} lineWidth={1.5} lineColor={LINE_COLORS['alt']} />\n\n   <!-- selected component (point) -->\n   {#if vsVar === ' vs. ncomp'}\n   <Points xValues={x} yValues={y} borderWidth={1.5} faceColor={FACE_COLORS['alt']} borderColor={LINE_COLORS['alt']}/>\n   <Points\n      xValues={[x[ncomp - 1]]}\n      yValues={[y[ncomp - 1]]}\n      markerSize={1.5}\n      borderWidth={1.5}\n      faceColor={LINE_COLORS['alt']}\n      borderColor='#a0a0a0'\n   />\n   {/if}\n\n   <XAxis {showGrid} slot=\"xaxis\" />\n   <YAxis {showGrid} slot=\"yaxis\" />\n   <Box slot=\"box\" />\n</Axes>\n{/if}","<script>\n   /**************************************************************/\n   /* Svelte component for AcceptancePlot settings               */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let isAlt = true;\n   let scope = 'objects';\n   let transType = 'no';\n   let showLabels = 'hide';\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n   let colorBy = 'roles';\n\n   $: params = {\n      isAlt,\n      scope,\n      transType,\n      showLabels,\n      colorBy,\n      resID\n   }\n\n   $: colorByValid = simcares['alt'].classNames &&\n      simcares['alt'].classNames.length > 1 &&\n      simcares['alt'].classNames.length < 9;\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Acceptance plot</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={Object.keys(simcares)} />\n</Container>\n{/if}\n<Container label='Transform:'>\n   <Select id='limType' bind:value={transType} options={['no', 'log']} />\n</Container>\n<Container label='Labels:'>\n   <Select id='showLabels' bind:value={showLabels} options={['hide', 'show']} />\n</Container>\n{#if colorByValid}\n<Container label='Color by:'>\n   <Select id='colorby' bind:value={colorBy} options={['roles', 'classes']} />\n</Container>\n{/if}\n{/if}\n\n","<script>\n   /**************************************************************/\n   /* Svelte component for SpecificityPlot settings              */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n   let zoom = 'off';\n\n   $: params = {\n      resID,\n      zoom\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Specificity plot</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={Object.keys(simcares)} />\n</Container>\n{/if}\n<Container label='Zoom:'>\n   <Select id='zoom' bind:value={zoom} options={['off', 'on']} />\n</Container>\n{/if}\n","<script>\n   /**************************************************************/\n   /* Svelte component for ExtremePlot settings                  */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let resID = simcares ? Object.keys(simcares)[0] : '';\n\n   $: params = {\n      resID\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Aliens plot</p>\n</Container>\n{#if Object.keys(simcares).length > 1 }\n<Container label='Results:'>\n   <Select id='resType' bind:value={resID} options={Object.keys(simcares)} />\n</Container>\n{/if}\n{/if}\n","<script>\n   /**************************************************************/\n   /* Svelte component for ExtremePlot settings                  */\n   /**************************************************************/\n\n   import Container from '../controls/Container.svelte';\n   import Select from '../controls/Select.svelte';\n\n   export let params;\n   export let simcares;\n\n   let vsVar = ' vs. ';\n\n   $: params = {\n      vsVar\n   }\n</script>\n\n{#if simcares  }\n<Container label=\"\">\n   <p class=\"title\">Selectivity plot</p>\n</Container>\n\n<Container label='Show:'>\n   <Select id='resType' bind:value={vsVar} options={[' vs. ', ' vs. ncomp']} />\n</Container>\n{/if}\n","<script>\n   /*************************************************************\n   * AppPlots component for alternative set                     *\n   * --------------------------------------                     *\n   * show selection of plot for testing of SIMCA model          *\n   **************************************************************/\n\n   // import plot and plot controls components\n   import AppPlots  from '../shared/AppPlots.svelte';\n\n   import AcceptancePlot  from '../../../shared/plots/AcceptancePlot.svelte';\n   import SpecificityPlot from '../../../shared/plots/SpecificityPlot.svelte';\n   import AliensPlot from '../../../shared/plots/AliensPlot.svelte';\n   import DistancePlot from '../../../shared/plots/DistancePlot.svelte';\n   import SelectivityPlot from '../../../shared/plots/SelectivityPlot.svelte';\n\n   import AltAcceptancePlotControls from '../../../shared/plots/AltAcceptancePlotControls.svelte';\n   import SpecificityPlotControls from '../../../shared/plots/SpecificityPlotControls.svelte';\n   import AliensPlotControls from '../../../shared/plots/AliensPlotControls.svelte';\n   import DistancePlotControls from '../../../shared/plots/DistancePlotControls.svelte';\n   import VariableDistancePlotControls from '../../../shared/plots/VariableDistancePlotControls.svelte';\n   import ImportancePlotControls from '../../../shared/plots/ImportancePlotControls.svelte';\n   import SelectivityPlotControls from '../../../shared/plots/SelectivityPlotControls.svelte';\n\n\n   // Input parameters\n   export let simcares;\n   export let ncomp;\n\n\n   // array with list of plots and their components\n   // parameter \"scope\" tells parent AppPlots component whether click events must be handled:\n   // - for \"objects\" - it triggers click events on plots as selection of objects and mark them as outliers\n   // - for \"variables\" - it triggers click events on plots as selection of variables (no more actions so far)\n   // - for \"none\" - the click events will be ignored\n   let options = [\n      {label: 'Acceptance', scope: 'none', plotComponent: AcceptancePlot, controlsComponent: AltAcceptancePlotControls},\n      {label: 'Distance (obj)', scope: 'none', plotComponent: DistancePlot, controlsComponent: DistancePlotControls},\n      {label: 'Distance (var)', scope: 'none', plotComponent: DistancePlot, controlsComponent: VariableDistancePlotControls},\n      {label: 'Specificity', scope: 'none', plotComponent: SpecificityPlot, controlsComponent: SpecificityPlotControls},\n      {label: 'Aliens', scope: 'none', plotComponent: AliensPlot, controlsComponent: AliensPlotControls},\n      {label: 'Importance', scope: 'none', plotComponent: AcceptancePlot, controlsComponent: ImportancePlotControls},\n      {label: 'Selectivity', scope: 'none', plotComponent: SelectivityPlot, controlsComponent: SelectivityPlotControls},\n   ];\n\n</script>\n\n{#if options}\n<AppPlots {simcares} {options} {ncomp} />\n{/if}","<script>\n   /*************************************************************\n   * ResultsTable                                               *\n   * -------------------------                                  *\n   * shows table with SIMCA results for alternative set         *\n   **************************************************************/\n\n   // main properties of the whole app\n   export let res;\n   export let ncomp;\n\n   $: resa = res && ncomp > 0 ? res.v[ncomp - 1] : null;\n</script>\n\n\n{#if resa}\n<table>\n   <tr>\n      <th></th>\n      <th>New</th>\n   </tr>\n   <tr>\n      <td class=\"label\">Objects</td>\n      <td>{res.nrows}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">In</td>\n      <td>{resa.dnum.in}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Out</td>\n      <td>{resa.dnum.out}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Aliens</td>\n      <td>{resa.anum.aliens}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">External</td>\n      <td>{resa.anum.external}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Specificity</td>\n      <td>{resa.stat.specificity.toFixed(2)}</td>\n   </tr>\n   <tr>\n      <td class=\"label\">Beta</td>\n      <td>{resa.beta.toFixed(3)}</td>\n   </tr>\n</table>\n{/if}\n\n<style>\n   table {\n      width: 100%;\n      border-collapse: collapse;\n   }\n\n   tr {\n      width: 100%;\n   }\n\n   th {\n      border-bottom: 1px solid #a0a0a0;\n   }\n\n   th, td {\n      text-align: right;\n      padding: 0.2em 0.5em 0.2em 0.1em;\n      color: #404040;\n      margin: 0;\n   }\n\n   .label {\n      text-align: left;\n      padding: 0.1em 0.5em;\n   }\n</style>","<script>\n   /*************************************************************\n   * AppContainer for alternative set                           *\n   * ---------------------------------                          *\n   * app container for testing of SIMCA model                   *\n   * on alternative classes                                     *\n   **************************************************************/\n\n   import { simca_predict_alt } from '../wasm/simca';\n   import { downloadResults, downloadModel } from '../utils';\n\n   import AppPlots from './AppPlots.svelte';\n   import ResultTable from './ResultTable.svelte';\n\n   import DataLoader from '../shared/PredictDataLoader.svelte';\n   import ModelLoader from '../shared/ModelLoader.svelte';\n   import ModelTable from '../shared/ModelTable.svelte';\n   import SIMCASettings from '../shared/SIMCASettings.svelte';\n\n   import Container from '../../../shared/controls/Container.svelte';\n   import Button from '../../../shared/controls/Button.svelte';\n\n\n\n   /*****************************************/\n   /* Component parameters                  */\n   /*****************************************/\n\n   export let WASM;  // WASM object from parent app\n\n\n   /*****************************************/\n   /* Component code                        */\n   /*****************************************/\n\n   // main properties of the test app\n   let model;                 // PCA model\n   let simca;                 // SIMCA parameters\n   let data;                  // test data set with alternative classes\n   let pcares;                // PCA results for the new data set\n   let simcares;              // combined results for SIMCA classification\n   let ncomp = 0;             // number of components selected by user\n\n   // parameters to check if model or simca object have been updated\n   let modelHash = 0;\n   let simcaHash = 0;\n\n   // settings for outliers\n   let outliers = [];         // vector with dataset row numbers (from 0) marked as outliers\n   let samples = [];          // vector with dataset row numbers (from 0) without outliers\n   let classes;               // vector with class names for data rows without outliers\n   let labels;                // vector with row labels for data rows without outliers\n   let varlabels;             // vector with column labels for data columns without removed variables\n\n   // if model is null - reset dependent objects\n   $: if (model === null) {\n      data = null;\n      simca = null;\n      varlabels = null;\n      ncomp = 0;\n      modelHash = 0;\n      simcaHash = 0;\n   }\n\n   // if dataset is null - reset dependent objects\n   $: if (data === null) {\n      pcares = null;\n      simcares = null;\n      classes = null;\n      labels = null;\n      samples = [];\n      outliers = [];\n   } else if (data && samples.length === 0) {\n      samples = Array(data.values.nrows).fill().map((element, index) => index);\n      labels = data.labels;\n      classes = data.classes;\n   }\n\n\n   // check hashes and initiate updates if outcomes changed\n   $: if (model && model.hash !== modelHash) {\n      modelHash = model.hash;\n      varlabels = model.varlabels;\n   }\n\n   $: if (simca && pcares) {\n      simcaHash = simca.hash;\n      simcares = {\n         alt: simca_predict_alt(pcares, simca, classes, labels, varlabels)\n      };\n   }\n</script>\n\n<div class=\"app-container\">\n\n   <!-- left column with main app controls -->\n   <div class=\"app-controls\">\n      <div class=\"data-loader\">\n         <ModelLoader bind:model={model} bind:simca={simca} />\n      </div>\n\n      {#if model }\n      <div class=\"data-loader\">\n         <DataLoader bind:dataset={data} bind:pcares={pcares} {WASM} {model} {outliers} />\n      </div>\n      {/if}\n\n      {#if model && simca && data}\n      <div class=\"simca-settings\">\n         <SIMCASettings {model} bind:simca={simca} bind:ncomp={ncomp} />\n         <Container label='Download'>\n            <div class=\"buttons\">\n            <Button on:click={() => downloadResults(simcares.alt, data, \"alt\", outliers, ncomp)}>Results</Button>\n            <Button on:click={() => downloadModel(model, simca, ncomp)}>Model</Button>\n            </div>\n         </Container>\n      </div>\n      {/if}\n      {#if simca && data}\n      <div class=\"model-stats\">\n         <ModelTable {simca} {ncomp} />\n      </div>\n      {/if}\n      {#if simcares}\n      <div class=\"result-stats\">\n         <ResultTable res={simcares.alt} {ncomp} />\n      </div>\n      {/if}\n\n   </div>\n\n   <!-- right column with help text or with plots and plot controls -->\n   <div class=\"app-content\">\n      {#if !pcares}\n         <div class=\"help-text\">\n         <p>\n            In this tab you can apply previously trained DD-SIMCA model to a dataset consisting of non-target (alternative) class members (at least the app will assume this, you can of course provide any dataset). You can use it for testing performance of the model on the alternative classes, or tune its parameters, if necessary.\n         </p>\n         {#if !model}\n            <p><strong>Step 1</strong></p>\n            <p>\n               Load previously trained DD-SIMCA model from file.\n            </p>\n         {:else}\n            {#if !data}\n            <p><strong>Step 2</strong></p>\n            <p>\n               Load data set from CSV file. The requirements to the file are the same as for the\n               training set. The data may contain class labels for each row (you need to select this option in settings after selecting CSV file) but it is not necessary, as in any case the labels will be ignored and model will assume that all samples are from non-target classes.\n            </p>\n            {/if}\n         {/if}\n         </div>\n      {:else}\n         {#key data }\n         <AppPlots {simcares} {ncomp} />\n         {/key}\n      {/if}\n   </div>\n</div>\n\n<style>\n\n   .app-container {\n      font-family: Helvetica, Arial, sans-serif;\n      font-size: 1rem;\n      color: #404040;\n      box-sizing: border-box;\n      margin: 0 auto;\n      padding: 0.35em 0.25em;\n      width: 100%;\n      height: 100%;\n      display: grid;\n      grid-template-areas: \"controls content\";\n      grid-template-rows: 100%;\n      grid-template-columns: min(310px, 30%) 1fr;\n   }\n\n   .app-controls {\n      box-sizing: border-box;\n      padding: 0.25em 0.5em;\n   }\n\n   .app-content {\n      box-sizing: border-box;\n      padding: 0 1em 0 0.5em;\n      padding: 0.25em 0.25em;\n   }\n\n   .app-controls > div {\n      background: #e8e8e8;\n      border-radius: 0.25rem;\n   }\n\n   .help-text {\n      margin-top: 0.25rem;\n   }\n\n   .help-text > p {\n      background: #fafafa;\n      padding: 0em 1.5em 0.5em 1.5em;\n      color: #606060;\n      line-height: 1.5em;\n      margin: 0 1em 0 0;\n   }\n\n   .help-text > p:first-child {\n      border-top-left-radius: 0.25rem;\n      border-top-right-radius: 0.25rem;\n      padding-top: 1.5em;\n   }\n\n   .help-text > p:last-child {\n      border-bottom-left-radius: 0.25rem;\n      border-bottom-right-radius: 0.25rem;\n      padding-bottom: 1.5em;\n   }\n\n   .model-stats {\n      padding: 0.5rem 1rem;\n      margin-top: 0.5rem;\n      font-size: 0.85em;\n   }\n\n   .result-stats {\n      padding: 0.5rem 1rem;\n      margin-top: 0.25rem;\n      font-size: 0.85em;\n   }\n\n   .buttons {\n      position: relative;\n      box-sizing: border-box;\n      display: inline-block;\n      flex: 1 1 auto;\n      margin: 0;\n      padding: 2px 0;\n      width: auto;\n      border-radius: 2px;\n      cursor: default;\n   }\n\n   @media(min-width:1300px) {\n      .app-container {\n         grid-template-columns: min(340px, 30%) 1fr;\n      }\n   }\n\n   @media(min-width:1100px) {\n      .app-container {\n         grid-template-columns: min(320px, 30%) 1fr;\n      }\n   }\n\n</style>","\nvar PCA = (() => {\n  var _scriptDir = import.meta.url;\n  \n  return (\nasync function(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=typeof window==\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts==\"function\";var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\";var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_NODE){const{createRequire:createRequire}=await import(\"module\");var require=createRequire(import.meta.url);var fs=require(\"fs\");var nodePath=require(\"path\");if(ENVIRONMENT_IS_WORKER){scriptDirectory=nodePath.dirname(scriptDirectory)+\"/\"}else{scriptDirectory=require(\"url\").fileURLToPath(new URL(\"./\",import.meta.url))}read_=(filename,binary)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);return fs.readFileSync(filename,binary?undefined:\"utf8\")};readBinary=filename=>{var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}return ret};readAsync=(filename,onload,onerror,binary=true)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);fs.readFile(filename,binary?undefined:\"utf8\",(err,data)=>{if(err)onerror(err);else onload(binary?data.buffer:data)})};if(!Module[\"thisProgram\"]&&process.argv.length>1){thisProgram=process.argv[1].replace(/\\\\/g,\"/\")}arguments_=process.argv.slice(2);quit_=(status,toThrow)=>{process.exitCode=status;throw toThrow};Module[\"inspect\"]=()=>\"[Emscripten Module object]\"}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b)}var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith(\"file://\")}var wasmBinaryFile;if(Module[\"locateFile\"]){wasmBinaryFile=\"pca_wasm.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}}else{wasmBinaryFile=new URL(\"pca_wasm.wasm\",import.meta.url).href}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"&&!isFileURI(binaryFile)){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+binaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(()=>getBinarySync(binaryFile))}else if(readAsync){return new Promise((resolve,reject)=>{readAsync(binaryFile,response=>resolve(new Uint8Array(response)),reject)})}}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&!isFileURI(binaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(`wasm streaming compile failed: ${reason}`);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"a\":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports[\"d\"];updateMemoryViews();wasmTable=wasmExports[\"k\"];addOnInit(wasmExports[\"e\"]);removeRunDependency(\"wasm-instantiate\");return exports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(`Module.instantiateWasm callback failed with error: ${e}`);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};var _emscripten_date_now=()=>Date.now();var _emscripten_memcpy_big=(dest,src,num)=>HEAPU8.copyWithin(dest,src,src+num);var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var getCFunc=ident=>{var func=Module[\"_\"+ident];return func};var writeArrayToMemory=(array,buffer)=>{HEAP8.set(array,buffer)};var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);var stringToUTF8OnStack=str=>{var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8(str,ret,size);return ret};var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var ccall=(ident,returnType,argTypes,args,opts)=>{var toC={\"string\":str=>{var ret=0;if(str!==null&&str!==undefined&&str!==0){ret=stringToUTF8OnStack(str)}return ret},\"array\":arr=>{var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\"){return UTF8ToString(ret)}if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret};var wasmImports={b:_emscripten_date_now,c:_emscripten_memcpy_big,a:_emscripten_resize_heap};var wasmExports=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"e\"])();var _pcafit_wasm=Module[\"_pcafit_wasm\"]=(a0,a1,a2,a3,a4,a5,a6,a7,a8)=>(_pcafit_wasm=Module[\"_pcafit_wasm\"]=wasmExports[\"f\"])(a0,a1,a2,a3,a4,a5,a6,a7,a8);var _malloc=Module[\"_malloc\"]=a0=>(_malloc=Module[\"_malloc\"]=wasmExports[\"g\"])(a0);var _free=Module[\"_free\"]=a0=>(_free=Module[\"_free\"]=wasmExports[\"h\"])(a0);var _pcapredict_wasm=Module[\"_pcapredict_wasm\"]=(a0,a1,a2,a3,a4,a5,a6)=>(_pcapredict_wasm=Module[\"_pcapredict_wasm\"]=wasmExports[\"i\"])(a0,a1,a2,a3,a4,a5,a6);var _pcvpca_wasm=Module[\"_pcvpca_wasm\"]=(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12)=>(_pcvpca_wasm=Module[\"_pcvpca_wasm\"]=wasmExports[\"j\"])(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12);var ___errno_location=()=>(___errno_location=wasmExports[\"__errno_location\"])();var stackSave=()=>(stackSave=wasmExports[\"l\"])();var stackRestore=a0=>(stackRestore=wasmExports[\"m\"])(a0);var stackAlloc=a0=>(stackAlloc=wasmExports[\"n\"])(a0);Module[\"ccall\"]=ccall;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return moduleArg.ready\n}\n\n);\n})();\nexport default PCA;","<script>\n   /*************************************************************/\n   /* Root component for the application                        */\n   /*************************************************************/\n\n   import TrainAppContainer from './tab_train/AppContainer.svelte';\n   import TargetAppContainer from './tab_target/AppContainer.svelte';\n   import AltAppContainer from './tab_new/AppContainer.svelte';\n   import WASM from './wasm/pca_wasm.js';\n\n\n   let selectedApp = 'train';\n   let trainAppTab;\n   let targetAppTab;\n   let altAppTab;\n\n   let isInfoShown = false;\n\n   function showInfo() {\n      isInfoShown = true;\n   }\n\n   function closeInfo() {\n      isInfoShown = false;\n   }\n\n   function selectTrainApp() {\n      selectedApp = 'train';\n   }\n\n   function selectTargetApp() {\n      selectedApp = 'target';\n   }\n\n   function selectAltApp() {\n      selectedApp = 'alt';\n   }\n\n</script>\n\n<div class=\"page\">\n\n   <header class=\"page-header\">\n      <div class=\"header-group\">\n         <img class=\"logo\" alt=\"DD-SIMCA\" src=\"logo.svg\" />\n         <h1>Data Driven SIMCA<sup style=\"color:red\"></sup></h1>\n         <p>One class classifier</p>\n      </div>\n      <ul class=\"nav\">\n         <li class=\"nav-item\" class:selected={selectedApp === 'train'} >\n            <button on:click={selectTrainApp} on:keydown={selectTrainApp}>Train</button>\n         </li>\n         <li class=\"nav-item\" class:selected={selectedApp === 'target'}>\n            <button on:click={selectTargetApp} on:keydown={selectTargetApp}>Predict: <span>Target</span></button>\n         </li>\n         <li class=\"nav-item\" class:selected={selectedApp === 'alt'}>\n            <button on:click={selectAltApp} on:keydown={selectAltApp}>Predict: <span>New</span></button>\n         </li>\n      </ul>\n   </header>\n\n   <main>\n      <div class:hidden={selectedApp !== 'train'} class=\"train-app-container\" bind:this={trainAppTab}>\n      <TrainAppContainer {WASM} />\n      </div>\n      <div class:hidden={selectedApp !== 'target'} class=\"test-app-container\" bind:this={targetAppTab}>\n      <TargetAppContainer {WASM} />\n      </div>\n      <div class:hidden={selectedApp !== 'alt'} class=\"alt-app-container\" bind:this={altAppTab}>\n      <AltAppContainer {WASM} />\n      </div>\n   </main>\n\n   <footer>\n      <p>Current release: <span>2.0.0</span>\n      <button class=\"button-info\" on:click={showInfo} on:keydown={showInfo}>info</button>\n      Feedback: <a class=\"paper-link\" href=\"mailto:help@mda.tools?subject=DD-SIMCA app\">help@mda.tools</a>\n      Tutorial:\n      <a href=\"https://doi.org/10.1002/cem.3556\">paper</a>\n      | <a class=\"paper-link\" href=\"Oregano.zip\" download>dataset</a>\n      | <a href=\"https://www.youtube.com/playlist?list=PLep7KM9cEyFmoOR8sWDt7vJdnOCHvPEo2\">video lessons</a>\n      </p>\n   </footer>\n\n   {#if isInfoShown}\n   <div class=\"info-backdrop\">\n      <div class=\"info-container\">\n         <button class=\"info-close-button\" on:click={closeInfo}></button>\n         <h2>Data Driven SIMCA</h2>\n         <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p>\n         <p>\n            Interactive web-application for creating and using DD-SIMCA one class classifier\n            directly in your browser. The app does not send any information to the server,\n            all calculations are done locally on your device.\n         </p>\n         <p>Check our open access <a href=\"https://doi.org/10.1002/cem.3556\">tutorial paper</a> and YouTube <a href=\"https://www.youtube.com/playlist?list=PLep7KM9cEyFmoOR8sWDt7vJdnOCHvPEo2\">video-lessons</a>\n         <p>\n            All related theory can be found in:\n            <a href=\"https://doi.org/10.1002/cem.2506\">10.1002/cem.2506</a>,\n            <a href=\"https://doi.org/10.1002/cem.2610\">10.1002/cem.2610</a>,\n            <a href=\"https://doi.org/10.1002/cem.3250\">10.1002/cem.3250</a>.\n         </p>\n         <h3>v. 2.0.0</h3>\n         <p class=\"release-info\">released 1/10/2024</p>\n         <ul>\n            <li>Major release, which introduces several new tools, such as variable distances, selectivity plot and others as well as contains some minor improvements.</li>\n            <li>Breaking changes   the model structure produced by the new version of the app is different as it also contains new parameters. So you can not use the model objects created in the earlier version of the app to make predictions in the new version.</li>\n            <li>If necessary, the old app version is available here: <a href=\"https://mda.tools/ddsimca-old/\">https://mda.tools/ddsimca-old/</a>, so you can safely continue using it.</li>\n            <li>All details about the new version can be found in <a href=\"\">this video</a></li>\n         </ul>\n         <p></p>\n      </div>\n   </div>\n   {/if}\n</div>\n\n<style>\n\n   .page {\n      width: 100%;\n      height: 100%;\n      margin: 0 auto;\n      padding: 0;\n\n      min-width: 1020px;\n      min-height: 590px;\n      max-width: 1600px;\n\n      display: flex;\n      flex-direction: column;\n   }\n\n   .page > header{\n      display: flex;\n      justify-content: flex-start;\n      flex-direction: row;\n      background: #f8f6f4;\n   }\n\n   .header-group {\n      width: min-content;\n      margin: 0 0 0 0.25rem;\n      display: grid;\n      align-items: center;\n      grid-template-columns: min-content 1fr;\n      grid-template-rows: min-content min-content min-content min-content;\n      grid-template-areas:\n         \"logo .\"\n         \"logo title\"\n         \"logo subtitle\"\n         \"logo .\";\n   }\n\n   .logo{\n      width: 5rem;\n      margin: 0.25rem;\n      grid-area: logo;\n   }\n\n   .header-group > h1{\n      margin: 0;\n      padding: 0;\n      text-align: left;\n      font-size: 1.6rem;\n      color: #4e5052;\n      white-space: nowrap;\n      grid-area: title;\n   }\n\n   .header-group > p{\n      margin: 0;\n      padding: 0;\n      text-align: left;\n      font-size: 1.1rem;\n      color: #7e8082;\n      grid-area: subtitle;\n   }\n\n   .page > main{\n      flex-basis: auto;\n      flex-grow: 1;\n      flex-shrink: 1;\n      box-sizing: border-box;\n      padding: 0.2rem 0;\n   }\n\n   .page > main > div{\n      height: 100%;\n   }\n\n   .page > footer {\n      font-size: 0.9rem;\n      flex-basis: min-content;\n      flex-grow: 0;\n      flex-shrink: 0;\n      background: #4e5052;\n      color: #c0c0c0;\n      padding: 0.5em;\n   }\n\n   .page > footer  p {\n      max-width: 800px;\n      text-align: center;\n      margin: 0 auto;\n      padding: 0.15em;\n   }\n\n   .page > footer  span,\n   .page > footer  a {\n      color: #f8ebc5\n   }\n\n   .hidden {\n      display: none;\n   }\n\n   .nav,\n   .nav * {\n      user-select: none;\n      -moz-user-select: none;\n   }\n\n   .nav {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n      list-style: none;\n      margin: 0 100px 0 auto;\n      padding: 0;\n      align-self: flex-end;\n   }\n\n   .nav-item {\n      list-style: none;\n      margin: 0 2px;\n      border-bottom: 5px solid transparent;\n   }\n\n   .nav-item > button {\n      cursor: pointer;\n      padding: 0.5em 1em;\n      border: none;\n      box-shadow: none;\n      background: transparent;\n      font-size: inherit;\n   }\n   .nav-item > button > span {\n      color: #888;\n   }\n   .nav-item.selected {\n      border-bottom: 5px solid #80888f;\n   }\n\n   .nav-item.selected > button{\n      font-weight: bold;\n      cursor: default;\n   }\n\n   .nav-item.selected:hover {\n      border-bottom: 5px solid #80888f;\n   }\n\n\n   @media (min-width: 1600px) {\n      .page > header {\n         border-bottom-right-radius: 0.25rem;\n         border-bottom-left-radius: 0.25rem;\n      }\n\n      .page > footer {\n         border-top-right-radius: 0.25rem;\n         border-top-left-radius: 0.25rem;\n      }\n   }\n\n   .button-info {\n      cursor: pointer;\n      border: none;\n      box-shadow: none;\n      background: transparent;\n      font-weight: bold;\n      color: #4e5052;\n      border-radius: 0.2em;\n\n      padding: 0.25em 0.5em;\n      text-align: center;\n      line-height: 1em;\n      margin-left: 0.25em;\n      margin-right: 0.5em;\n      background-color: #f8ebc5;\n   }\n\n   .info-backdrop{\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: #000000a0;\n      z-index: 100;\n\n      display: flex;\n      justify-content: center;\n      align-items: flex-start;\n   }\n\n   .info-container {\n      position: relative;\n      top: 10%;\n      width: 100%;\n      max-width: 800px;\n      max-height: 600px;\n      background-color: #f8f6f4;\n      border-radius: 0.25rem;\n      padding: 1rem;\n      z-index: 101;\n   }\n\n   .info-container > p {\n      font-size: 1.15em;\n      line-height: 1.35em;\n      padding: 0 1em 0.5em 1em;\n      margin: 0;\n   }\n\n   .info-container > .release-info {\n      font-size: 1em;\n      color: #808080;\n      line-height: 1.25em;\n      padding: 0 1.2em 0.5em 1.2em;\n      margin: 0;\n   }\n\n   .info-container > h2 {\n      font-size: 1.5em;\n      line-height: 1.25em;\n      padding: 0.5em 1rem 0.5em 1rem;\n      margin: 0;\n   }\n\n   .info-container > h3 {\n      font-size: 1.15em;\n      line-height: 1.25em;\n      padding: 1rem 1em 0.25em 1em;\n      margin: 0;\n   }\n\n   .info-container > ul {\n      margin: 0;\n   }\n\n   .info-container > ul > li {\n      font-size: 1.15em;\n      line-height: 1.25em;\n      padding: 0 0.5em 0.5em 0em;\n      margin: 0;\n   }\n\n   .info-container > ul > li > span {\n      font-size: 0.9em;\n      color: #808080;\n      line-height: 1.25em;\n      padding: 0 0.25em;\n      margin: 0;\n\n   }\n\n   .info-container a {\n      color: #ae8032;\n   }\n\n   .info-container a:hover {\n      color: #eb9707;\n   }\n\n   .info-close-button {\n      cursor: pointer;\n      border: none;\n      box-shadow: none;\n      background: transparent;\n      font-size: inherit;\n      font-weight: bold;\n      color: #f8ebc5;\n      border-radius: 50%;\n      width: 20px;\n      height: 20px;\n      background-color: #9ea0a2;\n      float: right;\n      text-align: center;\n      padding: 0;\n      line-height: 20px;\n      font-size: 12px;\n   }\n\n   .info-close-button:hover {\n      background-color: #4e5052;\n   }\n\n   .info-container:last-child {\n      padding-bottom: 2rem;\n   }\n\n\n</style>","import MainApp from './MainApp.svelte';\n\nconst app = new MainApp({\n\ttarget: document.body,\n});\n\nexport default app;","export default {}"],"names":["noop","assign","tar","src","k","is_promise","value","run","fn","blank_object","run_all","fns","is_function","thing","safe_not_equal","a","b","is_empty","obj","subscribe","store","callbacks","callback","unsub","component_subscribe","component","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","get_slot_changes","dirty","lets","merged","len","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","length","i","append","target","node","insert","anchor","detach","destroy_each","iterations","detaching","element","name","svg_element","text","data","space","empty","listen","event","handler","options","prevent_default","attr","attribute","children","set_data","set_input_value","input","set_style","key","important","toggle_class","toggle","custom_event","type","detail","bubbles","cancelable","HtmlTag","is_svg","__publicField","html","construct_svelte_component","props","current_component","set_current_component","get_current_component","onMount","onDestroy","createEventDispatcher","setContext","context","getContext","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","flush","add_render_callback","add_flush_callback","seen_callbacks","flushidx","saved_component","update","$$","flush_render_callbacks","filtered","targets","c","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","handle_promise","promise","info","token","index","child_ctx","needs_flush","error","update_await_block_branch","resolved","ensure_array_like","array_like_or_iterator","destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","next","get_context","o","n","old_indexes","new_blocks","new_lookup","deltas","updates","will_move","did_move","new_block","old_block","new_key","old_key","bind","create_component","mount_component","fragment","after_update","new_on_destroy","destroy_component","make_dirty","init","instance","create_fragment","not_equal","append_styles","parent_component","ready","ret","rest","nodes","SvelteComponent","PUBLIC_VERSION","diff","x","isvector","out","Vector","range","min","max","sd","biased","variance","m","mean","s","d","sum","prod","p","isindex","minind","outind","maxind","closestind","prev","curr","CHISQ_DOF_THRESHOLD","CHISQ_TOL","runif","rnorm","mu","sigma","pnorm","v","frac","erf","qnorm","SP1","SP2","C1","C2","a0","a1","a2","a3","b1","b2","b3","c0","c1","c2","c3","d1","d2","e0","e1","e2","e3","f1","f2","q","r","res","pchisq","dof","vector","sigma2","F2","l0","l","F1","igamma","gamma","F","qchisq","qs","qe","qd","ind","z","t","sign","a4","a5","y","qr","X","Index","crossprod","Q","Matrix","Rt","j","rc","qc","temp","rot","f","g","t1","isnumber","tcrossprod","Y","nrx","ncx","nry","nrows","ncols","ninner","xr","yc","outc","ismatrix","ncy","reshape","nrow","ncol","_Matrix","values","I","Yt","Xt","xc","ncols_out","nrows_out","outx","_dot","fun","dims","_opvv","_opvn","rind","cind","ic","cv","ir","xc_out","ndec","leftpad","ndigits","str","sep","dec","header","labels","hasLabels","hasHeader","rows","yv","strData","hasNaN","vec","startRow","firstRow","startColumn","rowValuesAll","rowValues","Vector$1","_a","_shuffle","decreasing","_sort","_sortind","_rep","_repeach","start","end","args","acc","cur","by","_seq","Index$1","_b","classRef","v1","v2","xv","yci","pca_getreslength","ncomp","pca_getmodellength","pcamodel_get","offset","pcares_get","pca_fit","Module","center","scale","outliers","nout","x_ptr","o_ptr","m_length","m_constructor","m_ptr","model","pca_predict","r_length","r_constructor","r_ptr","res_values","pcvpca","cv_nseg","cv_type","cv_scope","max_ncomp","xpv_length","xpv_constructor","xpv_ptr","xpv","get_stat","pred","ref","className","TP","FP","TN","FN","simca_predict_alt","pcares","simca","classes","varlabels","refClasses","simca_predict_single","fcrit","fv","fp","roles","Disc","M1","f0","h","Mz","Sz","beta","h0","Nh","q0","Nq","Nf","g0","Ng","r0","Nr","Ni","oCrit","eCrit","voCrit","veCrit","cnum","dnum","fk","stat","simca_predict","genhash","now","parseCSV","hasClassNames","classNames","varvalues","downloadResults","dataset","nAll","nOut","hasClasses","filler","hdr","blob","url","downloadModel","pcamodel","span","create_if_block","div","label","$$props","status","button","title","t2_value","span1","span1_title_value","span0","br","span2","span3","current","t2","t6","t6_value","t8","t8_value","t0","t0_value","id","file","message","acceptType","fileInput","changeStatus","e","$$invalidate","$$value","html_tag","raw_value","changeOption","click_handler","option","previous_key","create_if_block_2","select_props","dataFile","errMsg","sepOptions","setData","readFile","reader","reset","if_block","create_if_block_4","promise_1","t_value","t7_value","t1_value","t3","t3_value","t7","if_block0","create_if_block_3","create_if_block_1","WASM","calset","pvset","pvres","cvtypeOptions","cvType","nsegOptions","nseg","computePVSet","pvvalues","compute","if_block1","div1","div0","decNum","step","dispatch","sliderElement","sliderContainer","isDragging","computeValue","tmpValue","getRelativePosition","sliderRect","parentRect","minX","maxX","startChanging","width","cancelChanging","stopChanging","changingByWheel","newValue","changing","changingByKeys","calres","computeModel","maxNComp","switch_value","div2","each_blocks","simcares","selected_object","selected_variable","plot_container","params","selected_plot_index","selected_plot","switchPlot","markOutlier","el","plotOutlier","markExcluded","keydown_handler","subscriber_queue","writable","stop","subscribers","set","new_value","run_queue","subscriber","invalidate","_Vector","_Index","getTickLabels","ticks","tickFactor","checkCoords","source","val2p","tX","tY","axes","px","py","getAxisTicks","lim","maxTickNum","round","delta","niceNum","tickSpacing","tickMin","tickMax","localRange","exponent","fraction","niceFraction","roundCoords","getScale","height","createPngDataTable","crcTable","calcCrc","buf","pngDataTable","changeDpiOnArray","dataArray","dpi","physChunk","crc","crcChunk","chunkLength","finalHeader","changeDPI","base64Image","dataSplitted","format","body","headerLength","stringHeader","restOfData","headerBytes","finalArray","base64Header","downloadPNG","svg","fileName","svgHeight","svgWidth","scaleFactor","canvas","svgXml","img","dataURL","dataURL2","downloadLink","downloadSVG","text_1","text_1_transform_value","text_1_y_value","button0","button1","rect","rect_x_value","rect_y_value","rect_width_value","rect_height_value","svg1","style","svg0","defs","clipPath","g1","limX","limY","xLabel","yLabel","margins","downloadLinks","pngWidth","pngHeight","pngRes","AXES_MARGIN_FACTORS","TICK_NUM","TICK_SIZE","LEGEND_FONT_SIZE","PLOT_FONT_SIZE","LABELS_MARGIN","LINE_STYLES","MARKER_SYMBOLS","clipPathID","plotElement","left","bottom","top","dispatchClickEvent","eventName","handleClick","handleClickSVG","handleClickPNG","transform","tA","$isOk","invTransform","isOk","xLim","yLim","ro","entries","entry","pcr","scl","pxMargins","$scale","$yLim","$xLim","cpx","$tX","cpy","$tY","fontSize","Colors","line","line_x__value","line_x__value_1","line_y__value","line_y__value_1","lineCoords","lineColor","lineType","lineWidth","x1","x2","y1","y2","lineStyleStr","text_1_x_value","text_1_dx_value","text_1_dy_value","tickCoords","textColor","tickLabels","pos","las","dx","dy","textAnchor","textStyleStr","getTickFactorLabel","axisticklabels_changes","if_block2","tf","showGrid","grid","axisLine","tfCoords","gridColor","ticksX","tickNum","dY","ticksY1","ticksY2","gridYEnd","ticksY","dX","ticksX1","ticksX2","gridXEnd","xx","yy","faceColor","borderColor","rx","ry","rw","rh","barsStyleStr","xStart","xEnd","yStart","yEnd","text_1_text_anchor_value","xValues","yValues","borderWidth","textSize","rotateAngle","textAnchors","barWidth","w","marker","markerSize","markerSymbol","polyline","line_stroke_value","line_stroke_width_value","text_1_fill_value","text_1_stroke_width_value","text_1_stroke_value","svg_y_value","getTextWidth","font","getLegendSize","items","position","elHeight","elPadding","elWidth","lbHeight","lbWidth","legendHeight","legendWidth","xLimPx","yLimPx","WIDTH_RATIO","HEIGHT_RATIO","TOP_MARGIN","breaks","colmap","labelColor","EL_HEIGHTS_PX","dxl","lBreaks","lLabels","isCentered","axesWidth","axesHeight","elTop","MARGINS","CAT_COLORS","LINE_COLORS","FACE_COLORS","LABELS_COLOR","LABELS_COLOR_SELECTED","PNG_WIDTH","PNG_HEIGHT","PNG_RES","getColors","getClassColors","colors","getSeries","resobj","statName","yMin","yMax","ya","legendItem","axes_changes","lines_changes","points0_changes","points1_changes","rectangles_changes","segments0_changes","resIDs","amargin","aline","nCompMax","series","legendItems","nObj","alpha","atop","abottom","limYMin","limYMax","points_changes","CONFIDENCE_AREA_COLOR","getObserved","observed","pi","expected","Nm","Np","t_1_value","t_1","transType","showLabels","xMax","selected","scope","isAlt","colorBy","xd","yd","max_xd","max_yd","ptStyle","lbStyle","slStyle","catColors","pch","res_xd","res_yd","res_xd0","res_yd0","cat","getClassCategories","classCategories","classColmap","categories","LINE_COLOR","NPOINTS","get_limit_coordinates","crit","Nx","Ny","b0","els","ols","get_axis_label","resID","psXMax","psYMax","lmXMax","lmYMax","select","series_title","resetSelection","DIFF_COLOR","create_if_block_10","create_if_block_8","create_if_block_7","create_if_block_5","create_if_block_9","rectangles0_changes","textlabels_changes","create_if_block_6","create_if_block_11","distType","getLimits","Nu","u","u0","maxu","nX","segments_changes","COLORS","item","NhMax","NqMax","Nha","Nqa","show_if","select_changes","zoom","AcceptancePlot","AcceptancePlotControls","DistancePlot","DistancePlotControls","VariableDistancePlotControls","DFPlot","DFPlotControls","ExtremePlot","ExtremePlotControls","SensitivityPlot","SensitivityPlotControls","ImportancePlotControls","t25_value","t27_value","table","tr0","tr1","td0","td1","td2","tr2","td3","td4","td5","tr3","td6","td7","td8","tr4","td9","td10","td11","t9","t9_value","t13","t13_value","t15","t15_value","t19","t19_value","t21","t21_value","t25","t27","cal","pv","t11_value","td12","td13","td14","td15","t11","t17","t17_value","t26","t26_value","t32","t32_value","range_changes","limType","alphaOptions","gammaOptions","setSimcaAlpha","setSimcaGamma","setSimcaLimType","createPngBlob","resolve","reject","svgData","svgBlob","DOMURL","err","button2","clipboardWidth","clipboardHeight","handleClickCopy","content","pp","full","getStat","param","alt","centerValues","scaleValues","Xp","xpc","sv","div5","div4","div3","hx","hy","hl","mouseHandler","xp","Xpt","Ht","Qt","P","PI","prep_scale","H","resetOutliers","p0","p1","p2","p3","p4","p5","modelHash","simcaHash","samples","isContributionsModalShown","outlierId","showContributionsModal","closeContributionsModal","setOutlier","click_handler_2","t5_value","t5","resa","outliersOld","hasClassLabels","predict","span3_title_value","modelFile","setModel","modelFileName","resulttable_changes","if_block3","isContributionModalShown","click_handler_1","na","ra","zb","D","getPlotSeries","vsVar","getbeta","norm1","norm2","sel","colorByValid","AltAcceptancePlotControls","SpecificityPlot","SpecificityPlotControls","AliensPlot","AliensPlotControls","SelectivityPlot","SelectivityPlotControls","t29_value","tr5","tr6","tr7","t29","PCA","_scriptDir","_documentCurrentScript","moduleArg","readyPromiseResolve","readyPromiseReject","moduleOverrides","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","ENVIRONMENT_IS_NODE","scriptDirectory","locateFile","path","read_","readAsync","readBinary","createRequire","__vitePreload","__viteBrowserExternal$1","require","fs","nodePath","filename","binary","isFileURI","onload","onerror","xhr","wasmBinary","abort","wasmMemory","ABORT","HEAP8","HEAPU8","updateMemoryViews","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","preRun","addOnPreRun","callRuntimeCallbacks","initRuntime","postRun","addOnPostRun","cb","addOnInit","runDependencies","dependenciesFulfilled","addRunDependency","removeRunDependency","what","dataURIPrefix","isDataURI","wasmBinaryFile","getBinarySync","getBinaryPromise","binaryFile","response","instantiateArrayBuffer","imports","receiver","reason","instantiateAsync","result","createWasm","wasmImports","receiveInstance","module","exports","wasmExports","receiveInstantiationResult","_emscripten_date_now","_emscripten_memcpy_big","dest","num","getHeapMax","growMemory","size","pages","_emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","alignUp","multiple","cutDown","overGrownHeapSize","newSize","replacement","getCFunc","ident","func","writeArrayToMemory","array","buffer","lengthBytesUTF8","stringToUTF8Array","heap","outIdx","maxBytesToWrite","startIdx","endIdx","u1","stringToUTF8","outPtr","stringToUTF8OnStack","stackAlloc","UTF8Decoder","UTF8ArrayToString","heapOrArray","idx","maxBytesToRead","endPtr","u2","ch","UTF8ToString","ptr","ccall","returnType","argTypes","opts","toC","arr","convertReturnValue","cArgs","stack","converter","stackSave","onDone","stackRestore","a6","a7","a8","a9","a10","a11","a12","calledRun","runCaller","doRun","h2","h3","ul","li0","li1","li2","main","footer","button3","selectedApp","trainAppTab","targetAppTab","altAppTab","isInfoShown","showInfo","closeInfo","selectTrainApp","selectTargetApp","selectAltApp","MainApp"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86]}