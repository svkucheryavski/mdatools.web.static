var Z1=Object.defineProperty;var Ya=We=>{throw TypeError(We)};var $1=(We,Ne,it)=>Ne in We?Z1(We,Ne,{enumerable:!0,configurable:!0,writable:!0,value:it}):We[Ne]=it;var Dr=(We,Ne,it)=>$1(We,typeof Ne!="symbol"?Ne+"":Ne,it),Ll=(We,Ne,it)=>Ne.has(We)||Ya("Cannot "+it);var hr=(We,Ne,it)=>(Ll(We,Ne,"read from private field"),it?it.call(We):Ne.get(We)),Sn=(We,Ne,it)=>Ne.has(We)?Ya("Cannot add the same private member more than once"):Ne instanceof WeakSet?Ne.add(We):Ne.set(We,it),Rl=(We,Ne,it,Or)=>(Ll(We,Ne,"write to private field"),Or?Or.call(We,it):Ne.set(We,it),it),Wa=(We,Ne,it)=>(Ll(We,Ne,"access private method"),it);(function(){"use strict";var Er,sn,Cn,is,Ua,Va;var We=document.createElement("style");We.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-vzu0vi{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-vzu0vi:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-vzu0vi:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-vzu0vi:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-vzu0vi{display:none}.control-element.error.svelte-vzu0vi{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-vzu0vi{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-vzu0vi>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-vzu0vi>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-vzu0vi>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-vzu0vi>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-vzu0vi .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-vzu0vi .range-value_left,.control-element.svelte-vzu0vi .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-vzu0vi .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-vzu0vi .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-vzu0vi .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-vzu0vi .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-vzu0vi .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-vzu0vi .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-vzu0vi .textinput>input:active::placeholder,.control-element.svelte-vzu0vi .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-vzu0vi .textinput>input:focus,.control-element.svelte-vzu0vi .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .textinput.error>input,.control-element.svelte-vzu0vi .textinput.error>input:focus,.control-element.svelte-vzu0vi .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-vzu0vi .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-vzu0vi .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-vzu0vi .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}.app-container.svelte-1v0yar6{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1v0yar6{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1v0yar6{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1v0yar6>div:where(.svelte-1v0yar6){border-radius:.25rem}.app-controls.svelte-1v0yar6>.model-stats:where(.svelte-1v0yar6),.app-controls.svelte-1v0yar6>.result-stats:where(.svelte-1v0yar6){background:#e8e8e8}.app-controls.svelte-1v0yar6>.model-stats:where(.svelte-1v0yar6),.app-controls.svelte-1v0yar6>.result-stats:where(.svelte-1v0yar6){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1v0yar6{margin-top:.25rem}.help-text.svelte-1v0yar6>p:where(.svelte-1v0yar6),.help-text.svelte-1v0yar6>div:where(.svelte-1v0yar6){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6){border-collapse:collapse}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6) td:where(.svelte-1v0yar6){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6) thead:where(.svelte-1v0yar6) tr:where(.svelte-1v0yar6) td:where(.svelte-1v0yar6){font-weight:700;background:#f8f4e0}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6) td:where(.svelte-1v0yar6):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6) tbody:where(.svelte-1v0yar6) td:where(.svelte-1v0yar6):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1v0yar6>p:where(.svelte-1v0yar6):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1v0yar6>p:where(.svelte-1v0yar6):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1v0yar6{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1v0yar6{grid-template-columns:min(325px,30%) 1fr}}.model-info.svelte-14tszjv{line-height:1.5em}.model-info.svelte-14tszjv>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-14tszjv>.file-name:where(.svelte-14tszjv){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-kg0b31{width:100%;border-collapse:collapse}tr.svelte-kg0b31{width:100%}th.svelte-kg0b31{border-bottom:1px solid #a0a0a0}th.svelte-kg0b31,td.svelte-kg0b31{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-kg0b31{text-align:left;padding:.1em .5em}.app-container.svelte-1qdsey6{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1qdsey6{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1qdsey6{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1qdsey6>div:where(.svelte-1qdsey6){border-radius:.25rem}.app-controls.svelte-1qdsey6>.model-stats:where(.svelte-1qdsey6),.app-controls.svelte-1qdsey6>.result-stats:where(.svelte-1qdsey6){background:#e8e8e8}.app-controls.svelte-1qdsey6>.model-stats:where(.svelte-1qdsey6),.app-controls.svelte-1qdsey6>.result-stats:where(.svelte-1qdsey6){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1qdsey6{margin-top:.25rem}.help-text.svelte-1qdsey6>p:where(.svelte-1qdsey6){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1qdsey6>p:where(.svelte-1qdsey6):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1qdsey6>p:where(.svelte-1qdsey6):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1qdsey6{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1qdsey6{grid-template-columns:min(325px,30%) 1fr}}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(We);var Ne=typeof document<"u"?document.currentScript:null;const it=!1;var Or=Array.isArray,Ha=Array.prototype.indexOf,vs=Array.from,Ga=Object.defineProperty,gr=Object.getOwnPropertyDescriptor,jl=Object.getOwnPropertyDescriptors,Ka=Object.prototype,Xa=Array.prototype,ds=Object.getPrototypeOf,ql=Object.isExtensible;function Vr(r){return typeof r=="function"}const mt=()=>{};function Ja(r){return typeof(r==null?void 0:r.then)=="function"}function Qa(r){return r()}function Nn(r){for(var e=0;e<r.length;e++)r[e]()}const rr=2,Fl=4,Mn=8,Tn=16,ir=32,Br=64,zn=128,Dt=256,Pn=512,It=1024,cr=2048,Yr=4096,ur=8192,In=16384,Dl=32768,Wr=65536,Za=1<<17,$a=1<<19,Ol=1<<20,ms=1<<21,pr=Symbol("$state"),Vl=Symbol("legacy props"),ei=Symbol("");function Bl(r){return r===this.v}function Yl(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function ti(r,e){return r!==e}function hs(r){return!Yl(r,this.v)}function ri(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ni(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function si(r){throw new Error("https://svelte.dev/e/effect_orphan")}function li(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function oi(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function ai(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ii(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ci(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ur=!1,ui=!1;function fi(){Ur=!0}const gs=1,ps=2,Wl=4,vi=8,di=16,mi=1,hi=2,gi=4,pi=8,bi=16,yi=4,Ul=1,wi=2,bt=Symbol(),_i="http://www.w3.org/1999/xhtml";function Hl(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Fe=null;function Ln(r){Fe=r}function Nt(r){return Gl().get(r)}function xi(r,e){return Gl().set(r,e),e}function ve(r,e=!1,t){var l=Fe={p:Fe,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};Ur&&!e&&(Fe.l={s:null,u:null,r1:[],r2:Nr(!1)}),no(()=>{l.d=!0})}function de(r){const e=Fe;if(e!==null){const c=e.e;if(c!==null){var t=De,l=Re;e.e=null;try{for(var o=0;o<c.length;o++){var a=c[o];Ot(a.effect),Mt(a.reaction),an(a.fn)}}finally{Ot(t),Mt(l)}}Fe=e.p,e.m=!0}return{}}function Sr(){return!Ur||Fe!==null&&Fe.l===null}function Gl(r){return Fe===null&&Hl(),Fe.c??(Fe.c=new Map(ki(Fe)||void 0))}function ki(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function Ue(r,e){if(typeof r!="object"||r===null||pr in r)return r;const t=ds(r);if(t!==Ka&&t!==Xa)return r;var l=new Map,o=Or(r),a=re(0),c=Re,d=f=>{var u=Re;Mt(c);var v;return v=f(),Mt(u),v};return o&&l.set("length",re(r.length)),new Proxy(r,{defineProperty(f,u,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&ai();var m=l.get(u);return m===void 0?(m=d(()=>re(v.value)),l.set(u,m)):H(m,d(()=>Ue(v.value))),!0},deleteProperty(f,u){var v=l.get(u);if(v===void 0)u in f&&l.set(u,d(()=>re(bt)));else{if(o&&typeof u=="string"){var m=l.get("length"),h=Number(u);Number.isInteger(h)&&h<m.v&&H(m,h)}H(v,bt),Kl(a)}return!0},get(f,u,v){var p;if(u===pr)return r;var m=l.get(u),h=u in f;if(m===void 0&&(!h||(p=gr(f,u))!=null&&p.writable)&&(m=d(()=>re(Ue(h?f[u]:bt))),l.set(u,m)),m!==void 0){var g=s(m);return g===bt?void 0:g}return Reflect.get(f,u,v)},getOwnPropertyDescriptor(f,u){var v=Reflect.getOwnPropertyDescriptor(f,u);if(v&&"value"in v){var m=l.get(u);m&&(v.value=s(m))}else if(v===void 0){var h=l.get(u),g=h==null?void 0:h.v;if(h!==void 0&&g!==bt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(f,u){var g;if(u===pr)return!0;var v=l.get(u),m=v!==void 0&&v.v!==bt||Reflect.has(f,u);if(v!==void 0||De!==null&&(!m||(g=gr(f,u))!=null&&g.writable)){v===void 0&&(v=d(()=>re(m?Ue(f[u]):bt)),l.set(u,v));var h=s(v);if(h===bt)return!1}return m},set(f,u,v,m){var N;var h=l.get(u),g=u in f;if(o&&u==="length")for(var p=v;p<h.v;p+=1){var y=l.get(p+"");y!==void 0?H(y,bt):p in f&&(y=d(()=>re(bt)),l.set(p+"",y))}h===void 0?(!g||(N=gr(f,u))!=null&&N.writable)&&(h=d(()=>re(void 0)),H(h,d(()=>Ue(v))),l.set(u,h)):(g=h.v!==bt,H(h,d(()=>Ue(v))));var b=Reflect.getOwnPropertyDescriptor(f,u);if(b!=null&&b.set&&b.set.call(m,v),!g){if(o&&typeof u=="string"){var C=l.get("length"),A=Number(u);Number.isInteger(A)&&A>=C.v&&H(C,A+1)}Kl(a)}return!0},ownKeys(f){s(a);var u=Reflect.ownKeys(f).filter(h=>{var g=l.get(h);return g===void 0||g.v!==bt});for(var[v,m]of l)m.v!==bt&&!(v in f)&&u.push(v);return u},setPrototypeOf(){ii()}})}function Kl(r,e=1){H(r,r.v+e)}const on=new Map;function Nr(r,e){var t={f:0,v:r,reactions:null,equals:Bl,rv:0,wv:0};return t}function re(r,e){const t=Nr(r);return vo(t),t}function Rn(r,e=!1){var l;const t=Nr(r);return e||(t.equals=hs),Ur&&Fe!==null&&Fe.l!==null&&((l=Fe.l).s??(l.s=[])).push(t),t}function H(r,e,t=!1){Re!==null&&!sr&&Sr()&&(Re.f&(rr|Tn))!==0&&!(Ct!=null&&Ct.includes(r))&&ci();let l=t?Ue(e):e;return Hr(r,l)}function Hr(r,e){if(!r.equals(e)){var t=r.v;fn?on.set(r,e):on.set(r,t),r.v=e,r.wv=ho(),Xl(r,cr),Sr()&&De!==null&&(De.f&It)!==0&&(De.f&(ir|Br))===0&&(Vt===null?Li([r]):Vt.push(r))}return e}function Xl(r,e){var t=r.reactions;if(t!==null)for(var l=Sr(),o=t.length,a=0;a<o;a++){var c=t[a],d=c.f;(d&cr)===0&&(!l&&c===De||(lr(c,e),(d&(It|Dt))!==0&&((d&rr)!==0?Xl(c,Yr):Wn(c))))}}let Ei=!1;var bs,Jl,Ql,Zl;function Ci(){if(bs===void 0){bs=window,Jl=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Ql=gr(e,"firstChild").get,Zl=gr(e,"nextSibling").get,ql(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),ql(t)&&(t.__t=void 0)}}function ys(r=""){return document.createTextNode(r)}function Lt(r){return Ql.call(r)}function jn(r){return Zl.call(r)}function L(r,e){return Lt(r)}function Z(r,e){{var t=Lt(r);return t instanceof Comment&&t.data===""?jn(t):t}}function I(r,e=1,t=!1){let l=r;for(;e--;)l=jn(l);return l}function Ai(r){r.textContent=""}function Gr(r){var e=rr|cr,t=Re!==null&&(Re.f&rr)!==0?Re:null;return De===null||t!==null&&(t.f&Dt)!==0?e|=Dt:De.f|=Ol,{ctx:Fe,deps:null,effects:null,equals:Bl,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??De}}function _(r){const e=Gr(r);return vo(e),e}function $l(r){const e=Gr(r);return e.equals=hs,e}function eo(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)nr(e[t])}}function Si(r){for(var e=r.parent;e!==null;){if((e.f&rr)===0)return e;e=e.parent}return null}function Ni(r){var e,t=De;Ot(Si(r));try{eo(r),e=po(r)}finally{Ot(t)}return e}function to(r){var e=Ni(r),t=(yr||(r.f&Dt)!==0)&&r.deps!==null?Yr:It;lr(r,t),r.equals(e)||(r.v=e,r.wv=ho())}function ro(r){De===null&&Re===null&&si(),Re!==null&&(Re.f&Dt)!==0&&De===null&&ni(),fn&&ri()}function Mi(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Kr(r,e,t,l=!0){var o=De,a={ctx:Fe,deps:null,nodes_start:null,nodes_end:null,f:r|cr,first:null,fn:e,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{ks(a),a.f|=Dl}catch(f){throw nr(a),f}else e!==null&&Wn(a);var c=t&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(Ol|zn))===0;if(!c&&l&&(o!==null&&Mi(a,o),Re!==null&&(Re.f&rr)!==0)){var d=Re;(d.effects??(d.effects=[])).push(a)}return a}function no(r){const e=Kr(Mn,null,!1);return lr(e,It),e.teardown=r,e}function ue(r){ro();var e=De!==null&&(De.f&ir)!==0&&Fe!==null&&!Fe.m;if(e){var t=Fe;(t.e??(t.e=[])).push({fn:r,effect:De,reaction:Re})}else{var l=an(r);return l}}function qn(r){return ro(),ws(r)}function Ti(r){const e=Kr(Br,r,!0);return(t={})=>new Promise(l=>{t.outro?fr(e,()=>{nr(e),l(void 0)}):(nr(e),l(void 0))})}function an(r){return Kr(Fl,r,!1)}function ws(r){return Kr(Mn,r,!0)}function ne(r,e=[],t=Gr){const l=e.map(t);return br(()=>r(...l.map(s)))}function br(r,e=0){return Kr(Mn|Tn|e,r,!0)}function Gt(r,e=!0){return Kr(Mn|ir,r,!0,e)}function so(r){var e=r.teardown;if(e!==null){const t=fn,l=Re;fo(!0),Mt(null);try{e.call(null)}finally{fo(t),Mt(l)}}}function lo(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var l=t.next;(t.f&Br)!==0?t.parent=null:nr(t,e),t=l}}function zi(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&ir)===0&&nr(e),e=t}}function nr(r,e=!0){var t=!1;if((e||(r.f&$a)!==0)&&r.nodes_start!==null){for(var l=r.nodes_start,o=r.nodes_end;l!==null;){var a=l===o?null:jn(l);l.remove(),l=a}t=!0}lo(r,e&&!t),Yn(r,0),lr(r,In);var c=r.transitions;if(c!==null)for(const f of c)f.stop();so(r);var d=r.parent;d!==null&&d.first!==null&&oo(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function oo(r){var e=r.parent,t=r.prev,l=r.next;t!==null&&(t.next=l),l!==null&&(l.prev=t),e!==null&&(e.first===r&&(e.first=l),e.last===r&&(e.last=t))}function fr(r,e){var t=[];_s(r,t,!0),ao(t,()=>{nr(r),e&&e()})}function ao(r,e){var t=r.length;if(t>0){var l=()=>--t||e();for(var o of r)o.out(l)}else e()}function _s(r,e,t){if((r.f&ur)===0){if(r.f^=ur,r.transitions!==null)for(const c of r.transitions)(c.is_global||t)&&e.push(c);for(var l=r.first;l!==null;){var o=l.next,a=(l.f&Wr)!==0||(l.f&ir)!==0;_s(l,e,a?t:!1),l=o}}}function Xr(r){io(r,!0)}function io(r,e){if((r.f&ur)!==0){r.f^=ur,(r.f&It)===0&&(r.f^=It),dn(r)&&(lr(r,cr),Wn(r));for(var t=r.first;t!==null;){var l=t.next,o=(t.f&Wr)!==0||(t.f&ir)!==0;io(t,o?e:!1),t=l}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}let cn=[],xs=[];function co(){var r=cn;cn=[],Nn(r)}function Pi(){var r=xs;xs=[],Nn(r)}function un(r){cn.length===0&&queueMicrotask(co),cn.push(r)}function uo(){cn.length>0&&co(),xs.length>0&&Pi()}let Fn=!1,Dn=!1,On=null,Mr=!1,fn=!1;function fo(r){fn=r}let vn=[],e0=[],Re=null,sr=!1;function Mt(r){Re=r}let De=null;function Ot(r){De=r}let Ct=null;function Ii(r){Ct=r}function vo(r){Re!==null&&Re.f&ms&&(Ct===null?Ii([r]):Ct.push(r))}let At=null,Rt=0,Vt=null;function Li(r){Vt=r}let mo=1,Vn=0,yr=!1;function ho(){return++mo}function dn(r){var m;var e=r.f;if((e&cr)!==0)return!0;if((e&Yr)!==0){var t=r.deps,l=(e&Dt)!==0;if(t!==null){var o,a,c=(e&Pn)!==0,d=l&&De!==null&&!yr,f=t.length;if(c||d){var u=r,v=u.parent;for(o=0;o<f;o++)a=t[o],(c||!((m=a==null?void 0:a.reactions)!=null&&m.includes(u)))&&(a.reactions??(a.reactions=[])).push(u);c&&(u.f^=Pn),d&&v!==null&&(v.f&Dt)===0&&(u.f^=Dt)}for(o=0;o<f;o++)if(a=t[o],dn(a)&&to(a),a.wv>r.wv)return!0}(!l||De!==null&&!yr)&&lr(r,It)}return!1}function Ri(r,e){for(var t=e;t!==null;){if((t.f&zn)!==0)try{t.fn(r);return}catch{t.f^=zn}t=t.parent}throw Fn=!1,r}function ji(r){return(r.f&In)===0&&(r.parent===null||(r.parent.f&zn)===0)}function Bn(r,e,t,l){if(Fn){if(t===null&&(Fn=!1),ji(e))throw r;return}t!==null&&(Fn=!0);{Ri(r,e);return}}function go(r,e,t=!0){var l=r.reactions;if(l!==null)for(var o=0;o<l.length;o++){var a=l[o];Ct!=null&&Ct.includes(r)||((a.f&rr)!==0?go(a,e,!1):e===a&&(t?lr(a,cr):(a.f&It)!==0&&lr(a,Yr),Wn(a)))}}function po(r){var g;var e=At,t=Rt,l=Vt,o=Re,a=yr,c=Ct,d=Fe,f=sr,u=r.f;At=null,Rt=0,Vt=null,yr=(u&Dt)!==0&&(sr||!Mr||Re===null),Re=(u&(ir|Br))===0?r:null,Ct=null,Ln(r.ctx),sr=!1,Vn++,r.f|=ms;try{var v=(0,r.fn)(),m=r.deps;if(At!==null){var h;if(Yn(r,Rt),m!==null&&Rt>0)for(m.length=Rt+At.length,h=0;h<At.length;h++)m[Rt+h]=At[h];else r.deps=m=At;if(!yr)for(h=Rt;h<m.length;h++)((g=m[h]).reactions??(g.reactions=[])).push(r)}else m!==null&&Rt<m.length&&(Yn(r,Rt),m.length=Rt);if(Sr()&&Vt!==null&&!sr&&m!==null&&(r.f&(rr|Yr|cr))===0)for(h=0;h<Vt.length;h++)go(Vt[h],r);return o!==null&&(Vn++,Vt!==null&&(l===null?l=Vt:l.push(...Vt))),v}finally{At=e,Rt=t,Vt=l,Re=o,yr=a,Ct=c,Ln(d),sr=f,r.f^=ms}}function qi(r,e){let t=e.reactions;if(t!==null){var l=Ha.call(t,r);if(l!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[l]=t[o],t.pop())}}t===null&&(e.f&rr)!==0&&(At===null||!At.includes(e))&&(lr(e,Yr),(e.f&(Dt|Pn))===0&&(e.f^=Pn),eo(e),Yn(e,0))}function Yn(r,e){var t=r.deps;if(t!==null)for(var l=e;l<t.length;l++)qi(r,t[l])}function ks(r){var e=r.f;if((e&In)===0){lr(r,It);var t=De,l=Fe,o=Mr;De=r,Mr=!0;try{(e&Tn)!==0?zi(r):lo(r),so(r);var a=po(r);r.teardown=typeof a=="function"?a:null,r.wv=mo;var c=r.deps,d;it&&ui&&r.f&cr}catch(f){Bn(f,r,t,l||r.ctx)}finally{Mr=o,De=t}}}function Fi(){try{li()}catch(r){if(On!==null)Bn(r,On,null);else throw r}}function bo(){var r=Mr;try{var e=0;for(Mr=!0;vn.length>0;){e++>1e3&&Fi();var t=vn,l=t.length;vn=[];for(var o=0;o<l;o++){var a=Oi(t[o]);Di(a)}}}finally{Dn=!1,Mr=r,On=null,on.clear()}}function Di(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var l=r[t];if((l.f&(In|ur))===0)try{dn(l)&&(ks(l),l.deps===null&&l.first===null&&l.nodes_start===null&&(l.teardown===null?oo(l):l.fn=null))}catch(o){Bn(o,l,null,l.ctx)}}}function Wn(r){Dn||(Dn=!0,queueMicrotask(bo));for(var e=On=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Br|ir))!==0){if((t&It)===0)return;e.f^=It}}vn.push(e)}function Oi(r){for(var e=[],t=r;t!==null;){var l=t.f,o=(l&(ir|Br))!==0,a=o&&(l&It)!==0;if(!a&&(l&ur)===0){if((l&Fl)!==0)e.push(t);else if(o)t.f^=It;else{var c=Re;try{Re=t,dn(t)&&ks(t)}catch(u){Bn(u,t,null,t.ctx)}finally{Re=c}}var d=t.first;if(d!==null){t=d;continue}}var f=t.parent;for(t=t.next;t===null&&f!==null;)t=f.next,f=f.parent}return e}function Vi(r){var e;for(uo();vn.length>0;)Dn=!0,bo(),uo();return e}function s(r){var e=r.f,t=(e&rr)!==0;if(Re!==null&&!sr){if(!(Ct!=null&&Ct.includes(r))){var l=Re.deps;r.rv<Vn&&(r.rv=Vn,At===null&&l!==null&&l[Rt]===r?Rt++:At===null?At=[r]:(!yr||!At.includes(r))&&At.push(r))}}else if(t&&r.deps===null&&r.effects===null){var o=r,a=o.parent;a!==null&&(a.f&Dt)===0&&(o.f^=Dt)}return t&&(o=r,dn(o)&&to(o)),fn&&on.has(r)?on.get(r):r.v}function _t(r){var e=sr;try{return sr=!0,r()}finally{sr=e}}const Bi=-7169;function lr(r,e){r.f=r.f&Bi|e}function Yi(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(pr in r)Es(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&pr in t&&Es(t)}}}function Es(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let l in r)try{Es(r[l],e)}catch{}const t=ds(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const l=jl(t);for(let o in l){const a=l[o].get;if(a)try{a.call(r)}catch{}}}}}const Wi=["touchstart","touchmove"];function Ui(r){return Wi.includes(r)}let yo=!1;function Hi(){yo||(yo=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Cs(r){var e=Re,t=De;Mt(null),Ot(null);try{return r()}finally{Mt(e),Ot(t)}}function Gi(r,e,t,l=t){r.addEventListener(e,()=>Cs(t));const o=r.__on_r;o?r.__on_r=()=>{o(),l(!0)}:r.__on_r=()=>l(!0),Hi()}const wo=new Set,As=new Set;function Ki(r,e,t,l={}){function o(a){if(l.capture||mn.call(e,a),!a.cancelBubble)return Cs(()=>t==null?void 0:t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?un(()=>{e.addEventListener(r,o,l)}):e.addEventListener(r,o,l),o}function Tr(r,e,t,l,o){var a={capture:l,passive:o},c=Ki(r,e,t,a);(e===document.body||e===window||e===document)&&no(()=>{e.removeEventListener(r,c,a)})}function et(r){for(var e=0;e<r.length;e++)wo.add(r[e]);for(var t of As)t(r)}function mn(r){var A;var e=this,t=e.ownerDocument,l=r.type,o=((A=r.composedPath)==null?void 0:A.call(r))||[],a=o[0]||r.target,c=0,d=r.__root;if(d){var f=o.indexOf(d);if(f!==-1&&(e===document||e===window)){r.__root=e;return}var u=o.indexOf(e);if(u===-1)return;f<=u&&(c=f)}if(a=o[c]||r.target,a!==e){Ga(r,"currentTarget",{configurable:!0,get(){return a||t}});var v=Re,m=De;Mt(null),Ot(null);try{for(var h,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+l];if(y!=null&&(!a.disabled||r.target===a))if(Or(y)){var[b,...C]=y;b.apply(a,[r,...C])}else y.call(a,r)}catch(N){h?g.push(N):h=N}if(r.cancelBubble||p===e||p===null)break;a=p}if(h){for(let N of g)queueMicrotask(()=>{throw N});throw h}}finally{r.__root=e,delete r.currentTarget,Mt(v),Ot(m)}}}function Ss(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function Jr(r,e){var t=De;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function Q(r,e){var t=(e&Ul)!==0,l=(e&wi)!==0,o,a=!r.startsWith("<!>");return()=>{o===void 0&&(o=Ss(a?r:"<!>"+r),t||(o=Lt(o)));var c=l||Jl?document.importNode(o,!0):o.cloneNode(!0);if(t){var d=Lt(c),f=c.lastChild;Jr(d,f)}else Jr(c,c);return c}}function pe(r,e,t="svg"){var l=!r.startsWith("<!>"),o=(e&Ul)!==0,a=`<${t}>${l?r:"<!>"+r}</${t}>`,c;return()=>{if(!c){var d=Ss(a),f=Lt(d);if(o)for(c=document.createDocumentFragment();Lt(f);)c.appendChild(Lt(f));else c=Lt(f)}var u=c.cloneNode(!0);if(o){var v=Lt(u),m=u.lastChild;Jr(v,m)}else Jr(u,u);return u}}function ge(){var r=document.createDocumentFragment(),e=document.createComment(""),t=ys();return r.append(e,t),Jr(e,t),r}function P(r,e){r!==null&&r.before(e)}let Ns=!0;function ce(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function Xi(r,e){return Ji(r,e)}const Qr=new Map;function Ji(r,{target:e,anchor:t,props:l={},events:o,context:a,intro:c=!0}){Ci();var d=new Set,f=m=>{for(var h=0;h<m.length;h++){var g=m[h];if(!d.has(g)){d.add(g);var p=Ui(g);e.addEventListener(g,mn,{passive:p});var y=Qr.get(g);y===void 0?(document.addEventListener(g,mn,{passive:p}),Qr.set(g,1)):Qr.set(g,y+1)}}};f(vs(wo)),As.add(f);var u=void 0,v=Ti(()=>{var m=t??e.appendChild(ys());return Gt(()=>{if(a){ve({});var h=Fe;h.c=a}o&&(l.$$events=o),Ns=c,u=r(m,l)||{},Ns=!0,a&&de()}),()=>{var p;for(var h of d){e.removeEventListener(h,mn);var g=Qr.get(h);--g===0?(document.removeEventListener(h,mn),Qr.delete(h)):Qr.set(h,g)}As.delete(f),m!==t&&((p=m.parentNode)==null||p.removeChild(m))}});return Qi.set(u,v),u}let Qi=new WeakMap;const Ms=0,Un=1,Ts=2;function zs(r,e,t,l,o){var a=r,c=Sr(),d=Fe,f=bt,u,v,m,h=(c?Nr:Rn)(void 0),g=(c?Nr:Rn)(void 0),p=!1;function y(C,A){p=!0,A&&(Ot(b),Mt(b),Ln(d));try{C===Ms&&t&&(u?Xr(u):u=Gt(()=>t(a))),C===Ts&&o&&(m?Xr(m):m=Gt(()=>o(a,g))),C!==Ms&&u&&fr(u,()=>u=null),C!==Un&&v&&fr(v,()=>v=null),C!==Ts&&m&&fr(m,()=>m=null)}finally{A&&(Ln(null),Mt(null),Ot(null),Vi())}}var b=br(()=>{if(f!==(f=e())){if(Ja(f)){var C=f;p=!1,C.then(A=>{C===f&&(Hr(h,A),y(Un,!0))},A=>{if(C===f&&(Hr(g,A),y(Ts,!0),!o))throw g.v}),un(()=>{p||y(Ms,!0)})}else Hr(h,f),y(Un,!1);return()=>f=bt}})}function X(r,e,[t,l]=[0,0]){var o=r,a=null,c=null,d=bt,f=t>0?Wr:0,u=!1;const v=(h,g=!0)=>{u=!0,m(g,h)},m=(h,g)=>{d!==(d=h)&&(d?(a?Xr(a):g&&(a=Gt(()=>g(o))),c&&fr(c,()=>{c=null})):(c?Xr(c):g&&(c=Gt(()=>g(o,[t+1,l]))),a&&fr(a,()=>{a=null})))};br(()=>{u=!1,e(v),u||m(null,null)},f)}function hn(r,e,t){var l=r,o=bt,a,c=Sr()?ti:Yl;br(()=>{c(o,o=e())&&(a&&fr(a),a=Gt(()=>t(l)))})}function qe(r,e){return e}function Zi(r,e,t,l){for(var o=[],a=e.length,c=0;c<a;c++)_s(e[c].e,o,!0);var d=a>0&&o.length===0&&t!==null;if(d){var f=t.parentNode;Ai(f),f.append(t),l.clear(),wr(r,e[0].prev,e[a-1].next)}ao(o,()=>{for(var u=0;u<a;u++){var v=e[u];d||(l.delete(v.k),wr(r,v.prev,v.next)),nr(v.e,!d)}})}function Ie(r,e,t,l,o,a=null){var c=r,d={flags:e,items:new Map,first:null},f=(e&Wl)!==0;if(f){var u=r;c=u.appendChild(ys())}var v=null,m=!1,h=$l(()=>{var g=t();return Or(g)?g:g==null?[]:vs(g)});br(()=>{var g=s(h),p=g.length;m&&p===0||(m=p===0,$i(g,d,c,o,e,l,t),a!==null&&(p===0?v?Xr(v):v=Gt(()=>a(c)):v!==null&&fr(v,()=>{v=null})),s(h))})}function $i(r,e,t,l,o,a,c){var K,F,M,W;var d=(o&vi)!==0,f=(o&(gs|ps))!==0,u=r.length,v=e.items,m=e.first,h=m,g,p=null,y,b=[],C=[],A,N,E,w;if(d)for(w=0;w<u;w+=1)A=r[w],N=a(A,w),E=v.get(N),E!==void 0&&((K=E.a)==null||K.measure(),(y??(y=new Set)).add(E));for(w=0;w<u;w+=1){if(A=r[w],N=a(A,w),E=v.get(N),E===void 0){var T=h?h.e.nodes_start:t;p=tc(T,e,p,p===null?e.first:p.next,A,N,w,l,o,c),v.set(N,p),b=[],C=[],h=p.next;continue}if(f&&ec(E,A,w,o),(E.e.f&ur)!==0&&(Xr(E.e),d&&((F=E.a)==null||F.unfix(),(y??(y=new Set)).delete(E))),E!==h){if(g!==void 0&&g.has(E)){if(b.length<C.length){var S=C[0],k;p=S.prev;var z=b[0],j=b[b.length-1];for(k=0;k<b.length;k+=1)_o(b[k],S,t);for(k=0;k<C.length;k+=1)g.delete(C[k]);wr(e,z.prev,j.next),wr(e,p,z),wr(e,j,S),h=S,p=j,w-=1,b=[],C=[]}else g.delete(E),_o(E,h,t),wr(e,E.prev,E.next),wr(e,E,p===null?e.first:p.next),wr(e,p,E),p=E;continue}for(b=[],C=[];h!==null&&h.k!==N;)(h.e.f&ur)===0&&(g??(g=new Set)).add(h),C.push(h),h=h.next;if(h===null)continue;E=h}b.push(E),p=E,h=E.next}if(h!==null||g!==void 0){for(var R=g===void 0?[]:vs(g);h!==null;)(h.e.f&ur)===0&&R.push(h),h=h.next;var Y=R.length;if(Y>0){var B=(o&Wl)!==0&&u===0?t:null;if(d){for(w=0;w<Y;w+=1)(M=R[w].a)==null||M.measure();for(w=0;w<Y;w+=1)(W=R[w].a)==null||W.fix()}Zi(e,R,B,v)}}d&&un(()=>{var V;if(y!==void 0)for(E of y)(V=E.a)==null||V.apply()}),De.first=e.first&&e.first.e,De.last=p&&p.e}function ec(r,e,t,l){(l&gs)!==0&&Hr(r.v,e),(l&ps)!==0?Hr(r.i,t):r.i=t}function tc(r,e,t,l,o,a,c,d,f,u){var v=(f&gs)!==0,m=(f&di)===0,h=v?m?Rn(o):Nr(o):o,g=(f&ps)===0?c:Nr(c),p={i:g,v:h,k:a,a:null,e:null,prev:t,next:l};try{return p.e=Gt(()=>d(r,h,g,u),Ei),p.e.prev=t&&t.e,p.e.next=l&&l.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),l!==null&&(l.prev=p,l.e.prev=p.e),p}finally{}}function _o(r,e,t){for(var l=r.next?r.next.e.nodes_start:t,o=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==l;){var c=jn(a);o.before(a),a=c}}function wr(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function xt(r,e,t,l,o){var a=r,c="",d;br(()=>{c!==(c=e()??"")&&(d!==void 0&&(nr(d),d=void 0),c!==""&&(d=Gt(()=>{var f=c+"";t&&(f=`<svg>${f}</svg>`);var u=Ss(f);if((t||l)&&(u=Lt(u)),Jr(Lt(u),u.lastChild),t||l)for(;Lt(u);)a.before(Lt(u));else a.before(u)})))})}function zr(r,e,...t){var l=r,o=mt,a;br(()=>{o!==(o=e())&&(a&&(nr(a),a=null),a=Gt(()=>o(l,...t)))},Wr)}function Ps(r,e,t){var l=r,o,a;br(()=>{o!==(o=e())&&(a&&(fr(a),a=null),o&&(a=Gt(()=>t(l,o))))},Wr)}function xo(r){var e,t,l="";if(typeof r=="string"||typeof r=="number")l+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=xo(r[e]))&&(l&&(l+=" "),l+=t)}else for(t in r)r[t]&&(l&&(l+=" "),l+=t);return l}function rc(){for(var r,e,t=0,l="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=xo(r))&&(l&&(l+=" "),l+=e);return l}function nc(r){return typeof r=="object"?rc(r):r??""}const ko=[...`
\r\f \v\uFEFF`];function sc(r,e,t){var l=r==null?"":""+r;if(e&&(l=l?l+" "+e:e),t){for(var o in t)if(t[o])l=l?l+" "+o:o;else if(l.length)for(var a=o.length,c=0;(c=l.indexOf(o,c))>=0;){var d=c+a;(c===0||ko.includes(l[c-1]))&&(d===l.length||ko.includes(l[d]))?l=(c===0?"":l.substring(0,c))+l.substring(d+1):c=d}}return l===""?null:l}function lc(r,e){return r==null?null:String(r)}function ht(r,e,t,l,o,a){var c=r.__className;if(c!==t||c===void 0){var d=sc(t,l,a);d==null?r.removeAttribute("class"):e?r.className=d:r.setAttribute("class",d),r.__className=t}else if(a&&o!==a)for(var f in a){var u=!!a[f];(o==null||u!==!!o[f])&&r.classList.toggle(f,u)}return a}function st(r,e,t,l){var o=r.__style;if(o!==e){var a=lc(e);a==null?r.removeAttribute("style"):r.style.cssText=a,r.__style=e}return l}const oc=Symbol("is custom element"),ac=Symbol("is html");function q(r,e,t,l){var o=ic(r);o[e]!==(o[e]=t)&&(e==="loading"&&(r[ei]=t),t==null?r.removeAttribute(e):typeof t!="string"&&cc(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function ic(r){return r.__attributes??(r.__attributes={[oc]:r.nodeName.includes("-"),[ac]:r.namespaceURI===_i})}var Eo=new Map;function cc(r){var e=Eo.get(r.nodeName);if(e)return e;Eo.set(r.nodeName,e=[]);for(var t,l=r,o=Element.prototype;o!==l;){t=jl(l);for(var a in t)t[a].set&&e.push(a);l=ds(l)}return e}const uc=()=>performance.now(),vr={tick:r=>requestAnimationFrame(r),now:()=>uc(),tasks:new Set};function Co(){const r=vr.now();vr.tasks.forEach(e=>{e.c(r)||(vr.tasks.delete(e),e.f())}),vr.tasks.size!==0&&vr.tick(Co)}function fc(r){let e;return vr.tasks.size===0&&vr.tick(Co),{promise:new Promise(t=>{vr.tasks.add(e={c:r,f:t})}),abort(){vr.tasks.delete(e)}}}function Hn(r,e){Cs(()=>{r.dispatchEvent(new CustomEvent(e))})}function vc(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Ao(r){const e={},t=r.split(";");for(const l of t){const[o,a]=l.split(":");if(!o||a===void 0)break;const c=vc(o.trim());e[c]=a.trim()}return e}const dc=r=>r;function mc(r,e,t,l){var o=(r&yi)!==0,a="both",c,d=e.inert,f=e.style.overflow,u,v;function m(){var b=Re,C=De;Mt(null),Ot(null);try{return c??(c=t()(e,(l==null?void 0:l())??{},{direction:a}))}finally{Mt(b),Ot(C)}}var h={is_global:o,in(){e.inert=d,Hn(e,"introstart"),u=Is(e,m(),v,1,()=>{Hn(e,"introend"),u==null||u.abort(),u=c=void 0,e.style.overflow=f})},out(b){e.inert=!0,Hn(e,"outrostart"),v=Is(e,m(),u,0,()=>{Hn(e,"outroend"),b==null||b()})},stop:()=>{u==null||u.abort(),v==null||v.abort()}},g=De;if((g.transitions??(g.transitions=[])).push(h),Ns){var p=o;if(!p){for(var y=g.parent;y&&(y.f&Wr)!==0;)for(;(y=y.parent)&&(y.f&Tn)===0;);p=!y||(y.f&Dl)!==0}p&&an(()=>{_t(()=>h.in())})}}function Is(r,e,t,l,o){var a=l===1;if(Vr(e)){var c,d=!1;return un(()=>{if(!d){var b=e({direction:a?"in":"out"});c=Is(r,b,t,l,o)}}),{abort:()=>{d=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return o(),{abort:mt,deactivate:mt,reset:mt,t:()=>l};const{delay:f=0,css:u,tick:v,easing:m=dc}=e;var h=[];if(a&&t===void 0&&(v&&v(0,1),u)){var g=Ao(u(0,1));h.push(g,g)}var p=()=>1-l,y=r.animate(h,{duration:f});return y.onfinish=()=>{var b=(t==null?void 0:t.t())??1-l;t==null||t.abort();var C=l-b,A=e.duration*Math.abs(C),N=[];if(A>0){var E=!1;if(u)for(var w=Math.ceil(A/16.666666666666668),T=0;T<=w;T+=1){var S=b+C*m(T/w),k=Ao(u(S,1-S));N.push(k),E||(E=k.overflow==="hidden")}E&&(r.style.overflow="hidden"),p=()=>{var z=y.currentTime;return b+C*m(z/A)},v&&fc(()=>{if(y.playState!=="running")return!1;var z=p();return v(z,1-z),!0})}y=r.animate(N,{duration:A,fill:"forwards"}),y.onfinish=()=>{p=()=>l,v==null||v(l,1-l),o()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=mt)},deactivate:()=>{o=mt},reset:()=>{l===0&&(v==null||v(1,0))},t:()=>p()}}function Ls(r,e,t=e){var l=Sr();Gi(r,"input",o=>{var a=o?r.defaultValue:r.value;if(a=Rs(r)?js(a):a,t(a),l&&a!==(a=e())){var c=r.selectionStart,d=r.selectionEnd;r.value=a??"",d!==null&&(r.selectionStart=c,r.selectionEnd=Math.min(d,r.value.length))}}),_t(e)==null&&r.value&&t(Rs(r)?js(r.value):r.value),ws(()=>{var o=e();Rs(r)&&o===js(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o??"")})}function Rs(r){var e=r.type;return e==="number"||e==="range"}function js(r){return r===""?null:+r}const cs=class cs{constructor(e){Sn(this,is);Sn(this,Er,new WeakMap);Sn(this,sn);Sn(this,Cn);Rl(this,Cn,e)}observe(e,t){var l=hr(this,Er).get(e)||new Set;return l.add(t),hr(this,Er).set(e,l),Wa(this,is,Ua).call(this).observe(e,hr(this,Cn)),()=>{var o=hr(this,Er).get(e);o.delete(t),o.size===0&&(hr(this,Er).delete(e),hr(this,sn).unobserve(e))}}};Er=new WeakMap,sn=new WeakMap,Cn=new WeakMap,is=new WeakSet,Ua=function(){return hr(this,sn)??Rl(this,sn,new ResizeObserver(e=>{for(var t of e){cs.entries.set(t.target,t);for(var l of hr(this,Er).get(t.target)||[])l(t)}}))},Dr(cs,"entries",new WeakMap);let qs=cs;var hc=new qs({box:"border-box"});function So(r,e,t){var l=hc.observe(r,()=>t(r[e]));an(()=>(_t(()=>t(r[e])),l))}function No(r,e){return r===e||(r==null?void 0:r[pr])===e}function Zr(r={},e,t,l){return an(()=>{var o,a;return ws(()=>{o=a,a=[],_t(()=>{r!==t(...a)&&(e(r,...a),o&&No(t(...o),r)&&e(null,...o))})}),()=>{un(()=>{a&&No(t(...a),r)&&e(null,...a)})}}),r}function gc(r=!1){const e=Fe,t=e.l.u;if(!t)return;let l=()=>Yi(e.s);if(r){let o=0,a={};const c=Gr(()=>{let d=!1;const f=e.s;for(const u in f)f[u]!==a[u]&&(a[u]=f[u],d=!0);return d&&o++,o});l=()=>s(c)}t.b.length&&qn(()=>{Mo(e,l),Nn(t.b)}),ue(()=>{const o=_t(()=>t.m.map(Qa));return()=>{for(const a of o)typeof a=="function"&&a()}}),t.a.length&&ue(()=>{Mo(e,l),Nn(t.a)})}function Mo(r,e){if(r.l.s)for(const t of r.l.s)s(t);e()}let Gn=!1;function pc(r){var e=Gn;try{return Gn=!1,[r(),Gn]}finally{Gn=e}}const bc={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function yc(r,e,t){return new Proxy({props:r,exclude:e},bc)}const wc={get(r,e){let t=r.props.length;for(;t--;){let l=r.props[t];if(Vr(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l)return l[e]}},set(r,e,t){let l=r.props.length;for(;l--;){let o=r.props[l];Vr(o)&&(o=o());const a=gr(o,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let l=r.props[t];if(Vr(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l){const o=gr(l,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(r,e){if(e===pr||e===Vl)return!1;for(let t of r.props)if(Vr(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props){Vr(t)&&(t=t());for(const l in t)e.includes(l)||e.push(l)}return e}};function Pr(...r){return new Proxy({props:r},wc)}function To(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function G(r,e,t,l){var T;var o=(t&mi)!==0,a=!Ur||(t&hi)!==0,c=(t&pi)!==0,d=(t&bi)!==0,f=!1,u;c?[u,f]=pc(()=>r[e]):u=r[e];var v=pr in r||Vl in r,m=c&&(((T=gr(r,e))==null?void 0:T.set)??(v&&e in r&&(S=>r[e]=S)))||void 0,h=l,g=!0,p=!1,y=()=>(p=!0,g&&(g=!1,d?h=_t(l):h=l),h);u===void 0&&l!==void 0&&(m&&a&&oi(),u=y(),m&&m(u));var b;if(a)b=()=>{var S=r[e];return S===void 0?y():(g=!0,p=!1,S)};else{var C=(o?Gr:$l)(()=>r[e]);C.f|=Za,b=()=>{var S=s(C);return S!==void 0&&(h=void 0),S===void 0?h:S}}if((t&gi)===0)return b;if(m){var A=r.$$legacy;return function(S,k){return arguments.length>0?((!a||!k||A||f)&&m(k?b():S),S):b()}}var N=!1,E=Rn(u),w=Gr(()=>{var S=b(),k=s(E);return N?(N=!1,k):E.v=S});return c&&s(w),o||(w.equals=hs),function(S,k){if(arguments.length>0){const z=k?s(w):a&&c?Ue(S):S;if(!w.equals(z)){if(N=!0,H(E,z),p&&h!==void 0&&(h=z),To(w))return S;_t(()=>s(w))}return S}return To(w)?w.v:s(w)}}function _c(r){Fe===null&&Hl(),Ur&&Fe.l!==null?xc(Fe).m.push(r):ue(()=>{const e=_t(r);if(typeof e=="function")return e})}function xc(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const kc="5";typeof window<"u"&&((Va=window.__svelte??(window.__svelte={})).v??(Va.v=new Set)).add(kc),fi();function zo(r){if(Te(r))return zo(r.v);const e=new ye.valuesConstructor(r.length-1);for(let t=0;t<r.length-1;t++)e[t]=r[t+1]-r[t];return new ye(e)}function Po(r,e){if(Te(r))return Po(r.v,e);const t=$r(r),l=(t[1]-t[0])*e;return[t[0]-l,t[1]+l]}function $r(r){if(Te(r))return $r(r.v);let e=r[0],t=r[0];for(let l=1;l<r.length;l++)r[l]<e&&(e=r[l]),r[l]>t&&(t=r[l]);return[e,t]}function Fs(r,e){return Te(r)?Fs(r.v,e):Math.sqrt(Ds(r,e))}function Ds(r,e){if(e===void 0&&(e=!1),Te(r))return Ds(r.v);const t=gn(r);let l=0;for(let o=0;o<r.length;o++){const a=r[o]-t;l=l+a*a}return l/(e?r.length:r.length-1)}function gn(r){return Te(r)?gn(r.v):Io(r)/r.length}function Io(r){if(Te(r))return Io(r.v);let e=0;for(let t=0;t<r.length;t++)e=e+r[t];return e}function Lo(r){if(Te(r))return Lo(r.v);let e=1;for(let t=0;t<r.length;t++)e=e*r[t];return e}function en(r){return Te(r)||Xt(r)?r.v[Os(r.v)-1]:r[Os(r)-1]}function Os(r){if(Te(r)||Xt(r))return Os(r.v);let e=1,t=r[0];for(let l=2;l<=r.length;l++)r[l-1]<t&&(e=l,t=r[l-1]);return e}function jt(r){return Te(r)||Xt(r)?r.v[Vs(r.v)-1]:r[Vs(r)-1]}function Vs(r){if(Te(r)||Xt(r))return Vs(r.v);let e=1,t=r[0];for(let l=2;l<=r.length;l++)r[l-1]>t&&(e=l,t=r[l-1]);return e}const Bs=30,Ec=1e-7,Cc=1e-7,Ro=1e-13,jo=1e3,Ac=100;function qo(r,e,t,l,o){l===void 0&&(l=jo),t===void 0&&(t=Ro),o===void 0&&(o=Ac);let a=t,c=l,d=(c-a)/o;for(let f=0;f<o;f++){let u,v;for(let g=0;g<o;g++){u=a+g*d,v=a+(g+1)*d;const p=e(u),y=e(v);if(p<=r&&y>=r)break}const m=(u+v)/2,h=e(m);if(Math.abs(h-r)<Ec||(a=u,c=v,d=(c-a)/o,d/c<Cc))return m}return(a+c)/2}function Fo(r,e=0,t=1){let l=ye.zeros(r);for(let o=0;o<r;o++)l.v[o]=e+Math.random()*(t-e);return l}function Do(r,e=0,t=1){let l=ye.zeros(r);for(let o=0;o<r;o++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();l.v[o]=a*Math.sin(c)*t+e}return l}function Kn(r,e=0,t=1){if(Te(r))return r.apply(o=>Kn(o,e,t));const l=1/(Math.sqrt(2)*t);return .5*(1+Nc((r-e)*l))}function Xn(r,e=0,t=1){if(Te(r))return r.apply(B=>Xn(B,e,t));if(e!==0||t!==1)return Xn(r)*t+e;if(r<0||r>1)throw Error('Parameter "p" must be between 0 and 1.');if(r<1e-10)return-1/0;if(r>.9999999999)return 1/0;const l=.425,o=5,a=.180625,c=1.6,d=3.3871327179,f=5.0434271938*10,u=1.5929113202*100,v=5.910937472*10,m=1.7895169469*10,h=7.8757757664*10,g=6.71875636*10,p=1.4234372777,y=2.75681539,b=1.3067284816,C=1.7023821103*.1,A=7.370016425*.1,N=1.2021132975*.1,E=6.657905115,w=3.081226386,T=4.2868294337*.1,S=1.7337203997*.01,k=2.4197894225*.1,z=1.2258202635*.01,j=r-.5;let R;if(Math.abs(j)<=l)return R=a-j*j,j*(((v*R+u)*R+f)*R+d)/(((g*R+h)*R+m)*R+1);R=j<0?r:1-r,R=Math.sqrt(-Math.log(R));let Y;return R<=o?(R=R-c,Y=(((C*R+b)*R+y)*R+p)/((N*R+A)*R+1)):(R=R-o,Y=((S*R+T)*R+w+E)/((z*R+k)*R+1)),j<0?-Y:Y}function Ys(r,e,t){if(t<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(r))return Ys(Ge(r),e,t);if(Te(r))return r.apply(l=>Ys(l,e,t));if(r<=0)return 0;if(t<=0&&ML_ERR_return_NAN,t==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(r<1)return 0;if(r==1)return .5;if(r>1)return 1}return Jn(r*e,e)}return e==Number.POSITIVE_INFINITY?1-Jn(t/r,t):e*r>t?1-Qn(t/(t+e*r),t/2,e/2):Qn(e*r/(t+e*r),e/2,t/2)}function Oo(r,e,t){if(r===0)return 0;if(r===1)return Inf;if(t<=0)return NaN;let l=jo,o=Ro;if(r>.9997&&t===1?(l=1e7,o=6e5,r=.9997):r>.9992&&t===1?(l=1e7,o=6e5):r>.997&&t===1?(l=1e6,o=45e3):r>.992&&t===1?(l=1e5,o=5e3):r>.97&&t===1&&(l=1e4,o=400),Array.isArray(r))return Oo(Ge(r),e,t);const a=d=>Ys(d,e,t);function c(d,f,u){return d===0?0:d===1?Inf:f===0?NaN:u===0?NaN:qo(d,a,o,l)}return Te(r)?r.apply(c,e,t):c(r,e,t)}function Jn(r,e){if(Array.isArray(r))return Jn(Ge(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(l);function a(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const u=f/e,v=Math.pow(u,1/6)-.5*Math.pow(u,1/3)+1/3*Math.pow(u,1/2);return Kn(v,t,o)}function c(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:Sc(f/2,e/2)/pn(e/2)}const d=e>Bs?a:c;return Te(r)?r.apply(d):d(r)}function Bt(r,e){if(Array.isArray(r))return Bt(Ge(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(l);function a(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const u=Xn(f,t,o),v=Math.pow(Math.sqrt(36*u*u-30*u+13)/4+(3*u-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(f){return f===0?0:f===1?Inf:e===0?0:qo(f,v=>Jn(v,e),0,Bs*10)}const d=e>Bs?a:c;return Te(r)?r.apply(d):d(r)}function Qn(r,e,t){if(Array.isArray(r))return Qn(Ge(r),e,t);if(Te(r))return r.apply(o=>Qn(o,e,t));if(r<=0)return 0;if(r>=1)return 1;if(e==0||t==0||!Number.isFinite(e)||!Number.isFinite(t))return e==0&&t==0?.5:e==0||e/t==0?1:t==0||t/e==0||r<.5?0:1;const l=.5-r+.5;return Oc(e,t,r,l)}function pn(r){if(Te(r))return r.apply(pn);if(r<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(r<.5)return Math.PI/(Math.sin(Math.PI*r)+pn(1-r));r=r-1;let t=.9999999999998099;for(let o=0;o<e.length;o++)t=t+e[o]/(r+o+1);const l=r+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(l,r+.5)*Math.exp(-l)*t}function Sc(r,e){let o=0;for(let a=0;a<1e4;a++){const c=Math.pow(r,a)/pn(e+a+1);if(isNaN(c)||c<1e-18)break;o+=c}return Math.pow(r,e)*pn(e)*Math.exp(-r)*o}function Nc(r){const e=r>=0?1:-1;r=Math.abs(r);const t=.254829592,l=-.284496736,o=1.421413741,a=-1.453152027,c=1.061405429,f=1/(1+.3275911*r),u=1-((((c*f+a)*f+o)*f+l)*f+t)*f*Math.exp(-r*r);return e*u}function Vo(r,e){const t=.564189583547756,l=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],d=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,v,m,h,g=Math.abs(e);if(g<=.5)return v=e*e,h=(((l[0]*v+l[1])*v+l[2])*v+l[3])*v+l[4]+1,m=((o[0]*v+o[1])*v+o[2])*v+1,u=.5-e*(h/m)+.5,u=Math.exp(v)*u,u;if(g<=4)h=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],m=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],u=h/m;else{if(e<=-5.6)return u=2,u=Math.exp(e*e)*2,u;v=1/(e*e),h=(((d[0]*v+d[1])*v+d[2])*v+d[3])*v+d[4],m=(((f[0]*v+f[1])*v+f[2])*v+f[3])*v+1,u=(t-v*h/m)/g}return e<0&&(u=Math.exp(e*e)*2-u),u}function Bo(r,e){let t=r+e-2;return t<=.25?Yt(t+1):t<=1.25?Yt(t)+xr(t):Yt(t-1)+Math.log(t*(t+1))}function Zn(r,e){const t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let f,u,v,m,h,g,p,y,b,C,A,N,E,w,T;return v=Math.min(r,e),m=Math.max(r,e),g=v/m,h=g/(g+1),b=1/(g+1),N=b*b,C=b+N+1,A=b+N*C+1,E=b+N*A+1,w=b+N*E+1,T=b+N*w+1,u=1/m,p=u*u,y=((((d*T*p+c*w)*p+a*E)*p+o*A)*p+l*C)*p+t,y*=h/m,u=1/v,p=u*u,f=(((((d*p+c)*p+a)*p+o)*p+l)*p+t)/v+y,f}function Ze(r){let e,t,l,o,a;if(t=r,e=r-.5,e>0&&(t=e-.5),t<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],d=.273076135303957,f=.0559398236957378;return a=(((((((c[8]*t+c[7])*t+c[6])*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],o=(f*t+d)*t+1,l=a/o,e>0?t*l/r:r*(l+.5+.5)}else{if(t==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],d=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],o=(((d[4]*t+d[3])*t+d[2])*t+d[1])*t+1,l=a/o,e>0?t/r*(l-.5-.5):r*l}}}function Mc(r,e,t){let l,o,a,c;if(r<-1.1||r>1.1)return Number.NaN;c=r*2,a=o=0,l=0;for(let d=1;d<=t;d++)a=o,o=l,l=c*o-a+e[t-d];return(l-a)*.5}function Yo(r){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],t=22,l=-.999999985;if(r==0)return 0;if(r==-1)return Number.NEGATIVE_INFINITY;if(r<-1)return Number.NaN;if(Math.abs(r)<=.375)return Math.abs(r)<.5*Number.EPSILON?r:0<r&&r<1e-8||-1e-9<r&&r<0?r*(1-.5*r):r*(1-r*Mc(r/.375,e,t));if(r<l)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+r)}function _r(r,e){const t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let f,u,v,m,h,g,p,y,b,C,A,N,E,w;return r>e?(v=e/r,f=1/(v+1),y=v/(v+1),u=r+(e-.5)):(v=r/e,f=v/(v+1),y=1/(v+1),u=e+(r-.5)),A=y*y,b=y+A+1,C=y+A*b+1,N=y+A*C+1,E=y+A*N+1,w=y+A*E+1,m=1/(e*e),p=((((d*w*m+c*E)*m+a*N)*m+o*C)*m+l*b)*m+t,p*=f/e,h=u*xr(r/e),g=r*(Math.log(e)-1),h>g?p-g-h:p-h-g}function Yt(r){if(r<.6){const p=((((((-.00271935708322958*r+-.0673562214325671)*r+-.402055799310489)*r+-.780427615533591)*r+-.168860593646662)*r+.844203922187225)*r+.577215664901533)/((((((.000667465618796164*r+.0325038868253937)*r+.361951990101499)*r+1.56875193295039)*r+3.12755088914843)*r+2.88743195473681)*r+1);return-r*p}else{const e=.422784335098467,t=.848044614534529,l=.565221050691933,o=.156513060486551,a=.017050248402265,c=.000497958207639485,d=1.24313399877507,f=.548042109832463,u=.10155218743983,v=.00713309612391,m=.000116165475989616,h=r-.5-.5,g=(((((c*h+a)*h+o)*h+l)*h+t)*h+e)/(((((m*h+v)*h+u)*h+f)*h+d)*h+1);return h*g}}function Kt(r){const e=.418938533204673,t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;if(r<=.8)return Yt(r)-Math.log(r);if(r<=2.25)return Yt(r-.5-.5);if(r<10){let v=Math.round(r-1.25),m=r,h=1;for(let g=1;g<=v;++g)m+=-1,h*=m;return Yt(m-1)+Math.log(h)}let f=1/(r*r),u=(((((d*f+c)*f+a)*f+o)*f+l)*f+t)/r;return e+u+(r-.5)*(Math.log(r)-1)}function Ws(r,e){const t=.918938533204673;let l=Math.min(r,e),o=Math.max(r,e);function a(c,d,f){let u=Math.round(f-1),v=1;for(let m=1;m<=u;++m)f+=-1,v*=f/(d+f);return c+Math.log(v)+(Kt(d)+(Kt(f)-Bo(d,f)))}if(l<8){if(l<1)return o<8?Kt(l)+(Kt(o)-Kt(l+o)):Kt(l)+_r(l,o);let c;if(l<2)return o<=2?Kt(l)+Kt(o)-Bo(l,o):o<8?(c=0,a(c,l,o)):Kt(l)+_r(l,o);if(o<=1e3){let d=Math.round(l-1);c=1;for(let f=1;f<=d;++f){l+=-1;let u=l/o;c*=u/(u+1)}return c=Math.log(c),o>=8?c+Kt(l)+_r(l,o):a(c,l,o)}else{let d=Math.round(l-1);c=1;for(let f=1;f<=d;++f)l+=-1,c*=l/(l/o+1);return log(c)-d*log(o)+(Kt(l)+_r(l,o))}}else{let c=Zn(l,o),d=l/o,f=-(l-.5)*Math.log(d/(d+1)),u=o*xr(d);return f>u?Math.log(o)*-.5+t+c-u-f:Math.log(o)*-.5+t+c-f-u}}function Wo(r){return(r==0?1024:-300)*.69314718055995*.99999}function tn(r){const e=.0566749439387324,t=.0456512608815524,l=.333333333333333,o=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,d=.354508718369557;let f,u,v,m,h;return r<-.39||r>.57?(m=r+.5+.5,r-Math.log(m)):(r<-.18?(f=r+.3,f/=.7,h=e-f*.3):r>.18?(f=r*.75-.25,h=t+f/3):(f=r,h=0),u=f/(f+2),v=u*u,m=((a*v+o)*v+l)/((d*v+c)*v+1),v*2*(1/(1-u)-u*m)+h)}function xr(r){if(Math.abs(r)>.375)return Math.log(1+r);const e=-1.29418923021993,t=.405303492862024,l=-.0178874546012214,o=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let d=r/(r+2),f=d*d,u=(((l*f+t)*f+e)*f+1)/(((c*f+a)*f+o)*f+1);return d*2*u}function Tc(r){const e=.564189583547756,t=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],d=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,u,v,m,h;if(v=Math.abs(r),v<=.5)return f=r*r,h=(((t[0]*f+t[1])*f+t[2])*f+t[3])*f+t[4]+1,m=((l[0]*f+l[1])*f+l[2])*f+1,r*(h/m);if(v<=4){h=((((((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4])*v+o[5])*v+o[6])*v+o[7],m=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7];let p=.5-Math.exp(-r*r)*h/m+.5;return r<0?-p:p}if(v>=5.8)return r>0?1:-1;u=r*r,f=1/u,h=(((c[0]*f+c[1])*f+c[2])*f+c[3])*f+c[4],m=(((d[0]*f+d[1])*f+d[2])*f+d[3])*f+1,f=(e-h/(u*m))/v;let g=.5-Math.exp(-u)*f+.5;return r<0?-g:g}function zc(r){const e=914041914819518e-24,t=.0238082361044469,l=-.499999999085958,o=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(r)<=.15)return r*(((t*r+e)*r+1)/((((c*r+a)*r+o)*r+l)*r+1));{let d=Math.exp(r);return r>0?d*(.5-1/d+.5):d-.5-.5}}function bn(r,e){let t;if(e>0){if(r>0||(t=r+e,t<0))return Math.exp(r)*Math.exp(e)}else if(r<0||(t=r+e,t>0))return Math.exp(r)*Math.exp(e);return Math.exp(t)}function Pc(r){const e=.785398163397448,t=1.4616321449683622,l=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],o=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let d,f,u,v,m,h,g,p,y,b,C,A,N;if(C=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),C>v&&(C=v),N=1e-9,p=0,r<.5){if(fabs(r)<=N){if(r==0)return 0;p=-1/r}else{if(m=-r,y=e,m<=0&&(m=-m,y=-y),m>=C)return 0;if(u=Math.round(m),m-=u,u=Math.round(m*4),m=(m-u*.25)*4,f=u/2,f+f!=u&&(m=1-m),h=e*m,d=f/2,d+d!=f&&(y=-y),f=(u+1)/2,d=f/2,d+=d,d==f){if(h==0)return 0;p=y*(cos(h)/sin(h)*4)}else p=y*(sin(h)/cos(h)*4)}r=1-r}if(r<=3){g=r,A=l[0]*r;for(let E=1;E<=5;++E)g=(g+o[E-1])*r,A=(A+l[E])*r;return g=(A+l[6])/(g+o[5]),b=r-t,g*b+p}if(r<C){m=1/(r*r),g=m,A=a[0]*m;for(let E=1;E<=3;++E)g=(g+c[E-1])*m,A=(A+a[E])*m;p=A/(g+c[3])-.5/r+p}return p+log(r)}function Ic(r,e,t,l){let o,a,c,d,f,u;if(r>l*.001){if(d=r*Math.log(t),d<Math.exparg(1))return 0;o=Math.exp(d)}else o=1;for(o*=e/r,u=l/r,f=r+1,d=t,c=d/f,f+=1,d=t*d,a=d/f,c+=a;Math.abs(t)>u;)f+=1,d=t*d,a=d/f,c+=a;return o*=r*c+1,o}function Lc(r,e,t,l){const o=.577215664901533;let a,c,d,f,u,v,m=e*t;for(u=t-m,c=e*l<=.02?Math.log(t)+Pc(e)+o+u:Math.log(m)+o+u,a=l*5*Math.abs(c),d=1,f=0,d+=1,u*=t-m/d,v=u/d,f+=v;Math.abs(v)>a;)d+=1,u*=t-m/d,v=u/d,f+=v;return-r*(c+f)}function Us(r,e,t,l){let o,a,c,d,f,u,v,m,h;if(t==0)return 0;if(v=Math.min(r,e),v>=1)u=r*Math.log(t)-Ws(r,e),a=Math.exp(u)/r;else if(m=Math.max(r,e),m<8)if(m<=1){if(a=Math.pow(t,r),a==0)return a;h=r+e,h>1?(f=r+e-1,u=(Ze(f)+1)/h):u=Ze(h)+1,c=(Ze(r)+1)*(Ze(e)+1)/u,a*=c*(e/h)}else{if(f=Yt(v),o=Math.round(m-1),o>=1){c=1;for(let C=1;C<=o;++C)m+=-1,c*=m/(v+m);f+=Math.log(c)}u=r*Math.log(t)-f,m+=-1,h=v+m,h>1?(f=v+m-1,d=(Ze(f)+1)/h):d=Ze(h)+1,a=Math.exp(u)*(v/r)*(Ze(m)+1)/d}else f=Yt(v)+_r(v,m),u=r*Math.log(t)-f,a=v/r*Math.exp(u);if(a==0||r<=l*.1)return a;let g=l/r,p=0,y=0,b;for(c=1,p+=1,c*=(.5-e/p+.5)*t,b=c/(r+p),y+=b;p<1e7&&Math.abs(b)>g;)p+=1,c*=(.5-e/p+.5)*t,b=c/(r+p),y+=b;return r*y>-1?a*=r*y+1:a=0,a}function $n(r,e,t,l,o,a){let c,d,f,u,v,m=r+e,h=r+1;if(o>1&&r>=1&&m>=h*1.1?(f=Math.round(Math.abs(Wo(1))),d=Math.round(Wo(0)),f>d&&(f=d),u=Math.exp(-f)):(f=0,u=1),c=qc(f,r,e,t,l)/r,o==1||c==0)return c;let g=o-1,p=u;if(d=0,e>1){if(l>1e-4){let y=(e-1)*t/l-r;y>=1&&(d=y<g?Math.round(y):g)}else d=g;for(let y=0;y<d;++y)v=y,u*=(m+v)/(h+v)*t,p+=u}for(let y=d;y<g&&(v=y,u*=(m+v)/(h+v)*t,p+=u,!(u<=a*p));++y);return c*=p,c}function Rc(r,e,t,l,o,a){let c,d,f,u,v,m,h,g,p,y,b,C,A,N,E,w,T,S,k;if(!Number.isFinite(o)||(k=jc(r,e,t,l),Number.isNaN(k)))return Number.NaN;if(k==0)return 0;for(c=o+1,p=e/r,y=1/r+1,N=l+1,f=0,u=1,m=r+1,C=0,A=1,E=1,w=c/y,v=y/c,f+=1,h=f/r,g=f*(e-f)*t,d=r/m,S=u*(u+p)*d*d*(g*t),d=(h+1)/(y+h+h),T=f+g/m+d*(c+f*N),u=h+1,m+=2,h=S*C+T*E,C=E,E=h,h=S*A+T*w,A=w,w=h,b=v,v=E/w,C/=w,A/=w,E=v,w=1;f<1e4&&(f+=1,h=f/r,g=f*(e-f)*t,d=r/m,S=u*(u+p)*d*d*(g*t),d=(h+1)/(y+h+h),T=f+g/m+d*(c+f*N),u=h+1,m+=2,h=S*C+T*E,C=E,E=h,h=S*A+T*w,A=w,w=h,b=v,v=E/w,!(Math.abs(v-b)<=a*v));)C/=w,A/=w,E=v,w=1;return k*v}function jc(r,e,t,l){const o=.398942280401433;let a,c,d,f,u,v,m,h,g;if(t==0||l==0)return 0;if(m=Math.min(r,e),m<8){let p,y;if(t<=.375?(p=Math.log(t),y=xr(-t)):l>.375?(p=Math.log(t),y=Math.log(l)):(p=xr(-l),y=Math.log(l)),v=r*p+e*y,m>=1)return v-=Ws(r,e),Math.exp(v);if(h=Math.max(r,e),h>=8)return f=Yt(m)+_r(m,h),m*Math.exp(v-f);if(h<=1){let C=Math.exp(v);return C==0?0:(g=r+e,g>1?(f=r+e-1,v=(Ze(f)+1)/g):v=Ze(g)+1,c=(Ze(r)+1)*(Ze(e)+1)/v,C*(m*c)/(m/h+1))}if(f=Yt(m),a=Math.round(h-1),a>=1){c=1;for(let C=1;C<=a;++C)h+=-1,c*=h/(m+h);f=Math.log(c)+f}v-=f,h+=-1,g=m+h;let b;return g>1?(f=m+h-1,b=(Ze(f)+1)/g):b=Ze(g)+1,m*Math.exp(v)*(Ze(h)+1)/b}else{let p,y,b,C;return r<=e?(p=r/e,y=p/(p+1),b=1/(p+1),C=r-(r+e)*t):(p=e/r,y=1/(p+1),b=p/(p+1),C=(r+e)*l-e),d=-C/r,f=Math.abs(d)>.6?d-Math.log(t/y):tn(d),d=C/e,u=Math.abs(d)<=.6?tn(d):d-Math.log(l/b),v=Math.exp(-(r*f+e*u)),o*Math.sqrt(e*y)*v*Math.exp(-Zn(r,e))}}function qc(r,e,t,l,o){const a=.398942280401433;let c,d,f,u,v,m,h,g;if(m=Math.min(e,t),m<8){let p,y;if(l<=.375?(p=Math.log(l),y=xr(-l)):o>.375?(p=Math.log(l),y=Math.log(o)):(p=xr(-o),y=Math.log(o)),v=e*p+t*y,m>=1)return v-=Ws(e,t),bn(r,v);if(h=Math.max(e,t),h>=8)return f=Yt(m)+_r(m,h),m*bn(r,v-f);if(h<=1){let C=bn(r,v);return C==0?C:(g=e+t,g>1?(f=e+t-1,v=(Ze(f)+1)/g):v=Ze(g)+1,c=(Ze(e)+1)*(Ze(t)+1)/v,C*(m*c)/(m/h+1))}f=Yt(m);let b=Math.round(h-1);if(b>=1){c=1;for(let C=1;C<=b;++C)h+=-1,c*=h/(m+h);f+=Math.log(c)}return v-=f,h+=-1,g=m+h,d=g>1?(Ze(g-1)+1)/g:Ze(g)+1,m*bn(r,v)*(Ze(h)+1)/d}else{let p,y,b,C;e>t?(p=t/e,y=1/(p+1),b=p/(p+1),C=(e+t)*o-t):(p=e/t,y=p/(p+1),b=1/(p+1),C=e-(e+t)*l),-Yo(t/e);let A=-C/e;return f=Math.abs(A)>.6?A-Math.log(l/y):tn(A),A=C/t,u=Math.abs(A)>.6?A-Math.log(o/b):tn(A),v=bn(r,-(e*f+t*u)),a*Math.sqrt(t*y)*v*Math.exp(-Zn(e,t))}}function Hs(r,e,t,l,o,a){let d=Array(30),f=Array(30),u=e-.5-.5,v=r+u*.5,m=l>.375?Math.log(t):xr(-l),h=-v*m;if(e*h==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+Yo(Ze(e))+e*Math.log(h)+v*m,p=g-(_r(e,r)+e*Math.log(v)),y=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let b=y==0,C=o==0?0:Math.exp(Math.log(o)-p),A=Fc(e,h,g,a),N=.25/(v*v),E=m*.25*m,w=A,T=w,S=1,k=1,z=0;for(let j=1;j<=30;++j){let R=e+z;w=(R*(R+1)*w+(h+R+1)*S)*N,z+=2,S*=E,k/=z*(z+1);let Y=j-1;d[Y]=k;let B=0;if(j>1){let F=e-j;for(let M=1;M<=Y;++M)B+=F*d[M-1]*f[Y-M],F+=e}f[Y]=u*k+B/j;let K=f[Y]*w;if(T+=K,T<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(K)<=a*(T+C))break}return o+=b?Math.exp(p+Math.log(T)):y*T,o}function Fc(r,e,t,l){const o=1.772453850905516;if(r*e==0)return e<=r?Math.exp(-t):0;if(r==.5){if(e<.25)return(.5-Tc(Math.sqrt(e))+.5)*Math.exp(-t);{let a=Math.sqrt(e);return Vo(1,a)/a*o}}else if(e<1.1){let a=3,c=e,d=e/(r+3),f=l*.1/(r+1),u;for(a+=1,c*=-(e/a),u=c/(r+a),d+=u;Math.abs(u)>f;)a+=1,c*=-(e/a),u=c/(r+a),d+=u;let v=r*e*((d/6-.5/(r+2))*e+1/(r+1)),m=r*Math.log(e),h=Ze(r),g=h+1;if(e>=.25&&r<e/2.59||m>-.13394){let p=zc(m),y=((p+.5+.5)*v-p)*g-h;return y<=0?0:y*Math.exp(-t)}else return(.5-Math.exp(m)*g*(.5-v+.5)+.5)*Math.exp(-t)}else{let a=1,c=1,d=e,f=e+(1-r),u=1,v,m;a=e*c+u*a,d=e*f+u*d,v=a/d,u+=1;let h=u-r;for(c=a+h*c,f=d+h*f,m=c/f;Math.abs(m-v)>=l*m;)a=e*c+u*a,d=e*f+u*d,v=a/d,u+=1,h=u-r,c=a+h*c,f=d+h*f,m=c/f;return m}}function Dc(r,e,t,l){const a=1.12837916709551,c=.353553390593274,d=Array(21),f=Array(21),u=Array(21),v=Array(21);let m=r*tn(-t/r)+e*tn(t/e),h;if(h=Math.exp(-m),h==0)return 0;let g=Math.sqrt(m),p=g/c*.5,y=m+m,b,C,A,N;r<e?(b=r/e,C=1/(b+1),A=(e-r)/e,N=1/Math.sqrt(r*(b+1))):(b=e/r,C=1/(b+1),A=(e-r)/r,N=1/Math.sqrt(e*(b+1))),d[0]=A*.6666666666666666,u[0]=d[0]*-.5,v[0]=-u[0];let E=.5/a*Vo(1,g),w=c,T=E+v[0]*N*w,S=1,k=b*b,z=1,j=N,R=p,Y=y;for(let K=2;K<=20;K+=2){z*=k,d[K-1]=C*2*(b*z+1)/(K+2);let F=K+1;S+=z,d[F-1]=A*2*S/(K+3);for(let V=K;V<=F;++V){let O=(V+1)*-.5;f[0]=O*d[0];for(let J=2;J<=V;++J){let ee=0;for(let te=1;te<=J-1;++te){let se=J-te;ee+=(te*O-se)*d[te-1]*f[se-1]}f[J-1]=O*d[J-1]+ee/J}u[V-1]=f[V-1]/(V+1);let D=0;for(let J=1;J<=V-1;++J)D+=v[V-J-1]*u[J-1];v[V-1]=-(D+u[V-1])}E=c*R+(K-1)*E,w=c*Y+K*w,R=y*R,Y=y*Y,j*=N;let M=v[K-1]*j*E;j*=N;let W=v[F-1]*j*w;if(T+=M+W,Math.abs(M)+Math.abs(W)<=l*T)break}let B=Math.exp(-Zn(r,e));return a*h*B*T}function Oc(r,e,t,l){let a=0,c=0;function d(b,C,A,N){const E=Us(b,C,A,1e-15);return N?.5-E+.5:E}function f(b,C,A,N){const E=Us(C,b,A,1e-15);return N?E:.5-E+.5}function u(b,C,A,N,E,w){const T=Rc(b,C,A,N,E,15000000000000002e-30);return w?.5-T+.5:T}function v(b,C,A,N,E){let w=Math.round(C);C=C-w,C===0&&(w=w-1,C=1);let T=$n(C,b,N,A,w,1e-15);return A<=.7?(T=T+Us(b,C,A,1e-15),E?.5-T+.5:T):(b<=15&&(w=20,T=T+$n(b,C,A,N,w,1e-15),b=b+w),T=Hs(b,C,A,N,T,15*1e-15),E?.5-T+.5:T)}if(r<1e-15*.001&&e<1e-15*.001)return e/(r+e);let m,h,g,p,y;if(r<=1||e<=1){if(t>.5?(y=!0,m=e,g=l,h=r,p=t):(y=!1,m=r,g=t,h=e,p=l),h<Math.min(1e-15,1e-15*m))return a=Ic(m,h,g,1e-15),y?.5-a+.5:a;if(m<Math.min(1e-15,1e-15*h)&&h*g<=1)return c=Lc(m,h,g,1e-15),y?c:.5-c+.5;if(Math.max(m,h)>1){if(h<=1)return d(m,h,g,y);if(g>=.29)return f(m,h,p,y);if(g<.1&&Math.pow(g*h,m)<=.7)return d(m,h,g,y)}else{if(m>=Math.min(.2,h)||Math.pow(g,m)<=.9)return d(m,h,g,y);if(g>=.3)return f(m,h,p,y)}let b=!1;return Math.max(m,h)>1&&h>15?c=0:(b=!0,c=$n(h,m,p,g,20,1e-15),h+=20),c=Hs(h,m,p,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(b?c=$n(h-n,m,p,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Hs(h,m,p,g,c,15*1e-15),a=-expm1(c),y?.5-a+.5:a):(a=.5-c+.5,y?.5-a+.5:a)}else{let b=Number.isFinite(r+e)?r>e?(r+e)*l-e:r-(r+e)*t:r*l-e*t;const C=b<0;let A,N,E,w;if(C?(b=-b,A=e,E=l,N=r,w=t):(A=r,E=t,N=e,w=l),N<40)return N*E<=.7?d(A,N,E,C):v(A,N,E,w,C);if(A>N){if(N<=100||b>N*.03)return u(A,N,E,w,b,C)}else{if(A<=100)return u(A,N,E,w,b,C);if(b>A*.03)return u(A,N,E,w,b,C)}return a=Dc(A,N,b,1e-15*100),C?.5-a+.5:a}}function Uo(r){const e=r.nrows,t=r.ncols;if(e<t){const c=Uo(r.subset([],Tt.seq(1,e)));return{Q:c.Q,R:Yc(c.Q,r)}}let l=Wt.eye(e),o=r.t();for(let c=1;c<=t;c++)for(let d=e;d>=c+1;d--){const f=o.v.subarray((d-2)*t,d*t),u=l.v.subarray((d-2)*e,d*e),v=f.slice(),m=u.slice(),[h,g,p]=Vc(v[c-1],v[c-1+t]);for(let y=0;y<t;y++)f[y]=v[y]*h+v[y+t]*g,f[y+t]=v[y]*-g+v[y+t]*h,u[y]=m[y]*h+m[y+e]*g,u[y+e]=m[y]*-g+m[y+e]*h;for(let y=t;y<e;y++)u[y]=m[y]*h+m[y+e]*g,u[y+e]=m[y]*-g+m[y+e]*h}const a=Tt.seq(1,t);return{Q:e===t?l:l.subset([],a),R:e===t?o.t():o.subset([],a).t()}}function Vc(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const a=e/r,c=Math.sqrt(1+a*a),d=1/c;return[d,a*d,r*c]}const t=r/e,l=Math.sqrt(1+t*t),o=1/l;return[t*o,o,e*l]}function Ho(r){return typeof r=="number"}function Bc(r,e){e===void 0&&(e=r);const t=r.nrows,l=r.ncols,o=e.nrows;e.ncols;const a=t,c=o,d=l,f=new Float64Array(a*c);for(let u=0;u<d;u++){const v=r.v.subarray(u*t,(u+1)*t),m=e.v.subarray(u*o,(u+1)*o);for(let h=0;h<c;h++){const g=f.subarray(h*a,(h+1)*a);for(let p=0;p<a;p++)g[p]+=v[p]*m[h]}}return new Wt(f,a,c)}function Yc(r,e){if(e===void 0&&(e=r),!dr(r)||!dr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=r.nrows,l=r.ncols,o=e.nrows,a=e.ncols,c=l,d=a,f=t,u=new Float64Array(c*d);for(let v=0;v<d;v++){const m=e.v.subarray(v*o,(v+1)*o),h=u.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const p=r.v.subarray(g*t,(g+1)*t);let y=0;for(let b=0;b<f;b++)y+=p[b]*m[b];h[g]=y}}return new Wt(u,c,d)}function Go(r,e,t){if(t===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new ye(r.v)}if(r.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new Wt(r.v,e,t)}function dr(r){return r&&r.constructor===Wt}function Wc(r,e,t){return new Wt(new Float64Array(r),e,t)}const Se=class Se{constructor(e,t,l){if(!ArrayBuffer.isView(e)||e.constructor!==Se.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||l===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*l)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=l}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Se.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const l=Se.eye(e),o=Se.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],d=e-1;for(let f=0;f<e;f++)o.v[d*e+f]=l.v[d*e+f]/c;for(let f=e-2;f>=0;f--){let u=l.getcolumn(f+1);const v=a.getcolref(f+1);for(let m=f+1;m<e;m++){const h=o.getcolumn(m+1);u=u.subtract(h.mult(v[m]))}o.v.set(u.divide(v[f]).v,f*e)}return o.t()}if(this.islowertriangular()){const l=this.diag();if(Lo(l)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=Se.eye(e),a=Se.eye(e),c=this.t(),d=0,f=c.v[0];for(let u=0;u<e;u++)a.v[d*e+u]=o.v[d*e+u]/f;for(let u=1;u<e;u++){let v=o.getcolumn(u+1);const m=c.getcolref(u+1);for(let h=0;h<u;h++){const g=a.getcolumn(h+1);v=v.subtract(g.mult(m[h]))}a.v.set(v.divide(m[u]).v,u*e)}return a.t()}const t=Uo(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Se.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Se.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let l=0;l<e;l++)t[l]=this.getcolref(l+1)[l];return new ye(t)}t(){const e=this.nrows,t=this.ncols,l=new Se.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const a=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let c=0;c<this.nrows;c++)l[c*t+o]=a[c]}return new Se(l,t,e)}for(let o=0;o<this.nrows;o++){const a=l.subarray(o*t,(o+1)*t);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+o]}return new Se(l,t,e)}dot(e){if(Te(e))return new Se(Xs(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(dr(e))return new Se(Xs(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,l){if(dr(e))return new Se(Gs(this.v,e.v,t),this.nrows,this.ncols);if(Ho(e))return new Se(Ks(this.v,e,t),this.nrows,this.ncols);if(!Te(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(l===void 0&&(l=e.length===this.ncols?2:1),l===2&&e.length===this.ncols){const o=new Se.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(Ks(this.getcolref(a+1),e.v[a],t),a*this.nrows);return new Se(o,this.nrows,this.ncols)}if(l===1&&e.length===this.nrows){const o=new Se.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(Gs(this.getcolref(a+1),e.v,t),a*this.nrows);return new Se(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e,t){if(t===void 0&&(t=2),t==2){const l=this.ncols,o=new Se.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=e(this.getcolref(a+1));return new ye(o)}if(t==1)return this.t().apply(e,2);if(t==0){const l=this.v.length,o=new Se.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=e(this.v[a]);return new Se(o,this.nrows,this.ncols)}}replace(e,t,l){typeof t=="number"&&(t=[t]),t.length===0&&(t=Tt.seq(1,this.nrows)),Xt(t)||(t=Jt(t)),typeof l=="number"&&(l=[l]),l.length===0&&(l=Tt.seq(1,this.ncols)),Xt(l)||(l=Jt(l));const o=t.length,a=l.length;if(en(t)<1||jt(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(en(l)<1||jt(l)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<l.length;c++){const d=e.getcolref(c+1),f=(l.v[c]-1)*this.nrows;for(let u=0;u<t.length;u++){const v=t.v[u];this.v[f+v-1]=d[u]}}return this}copy(){return new Se(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new ye.valuesConstructor(this.ncols);for(let l=0;l<this.ncols;l++)t[l]=this.getcolref(l+1)[e-1];return new ye(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new ye(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=Jt([e])),typeof t=="number"&&(t=Jt([t])),Array.isArray(e)&&(e=e.length===0?null:Jt(e)),Array.isArray(t)&&(t=t.length===0?null:Jt(t)),e!==null&&!Xt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!Xt(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(en(e)<1||jt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(en(t)<1||jt(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const d=t.length,f=this.nrows,u=new Se.valuesConstructor(f*d);for(let v=0;v<t.length;v++)u.set(this.v.slice((t.v[v]-1)*this.nrows,t.v[v]*this.nrows),v*this.nrows);return new Se(u,f,d)}if(t==null)return this.t().subset(t,e).t();const l=e.length,o=t.length,a=new Se.valuesConstructor(l*o);let c=new Se.valuesConstructor(l);for(let d=0;d<o;d++){const f=this.v.subarray((t.v[d]-1)*this.nrows,t.v[d]*this.nrows);for(let u=0;u<l;u++)c[u]=f[e.v[u]-1];a.set(c,d*l)}return new Se(a,l,o)}toString(e){function t(c,d){return" ".repeat(d-c.length)+c}e===void 0&&(e=2),this.ncols;const l=Math.round(Math.abs(Math.log10(jt(this.v))))+e+3;let o="";const a=this.t();for(let c=1;c<=a.ncols;c++)o+=Array.from(a.getcolref(c)).map(d=>t(d.toFixed(e),l)).join(" ")+`
`;return o}toCSV(e,t,l,o){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const a=o!=null&&o.length>0,c=l!=null&&l.length>0;if(a&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&l.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const d=this.t();let f=c?l.join(e)+`
`:"";for(let u=1;u<=d.ncols;u++)f=f+(a?o[u-1]+e:"")+d.getcolref(u).join(e)+`
`;return f=f.replace(/\./g,t),f}static randn(e,t,l,o){return Go(Do(e*t,l,o),e,t)}static rand(e,t,l,o){return Go(Fo(e*t,l,o),e,t)}static eye(e,t){t===void 0&&(t=e);const l=new Float64Array(e*t);for(let o=0;o<Math.min(e,t);o++)l[o*e+o]=1;return new Se(l,e,t)}static diagm(e){if(!Te(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,l=new Float64Array(t*t);for(let o=0;o<t;o++)l[o*t+o]=e.v[o];return new Se(l,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Se(new Float64Array(e*t),e,t)}static ones(e,t){return Se.fill(1,e,t)}static fill(e,t,l){l===void 0&&(l=t);const o=new Float64Array(t*l);for(let a=0;a<o.length;a++)o[a]=e;return new Se(o,t,l)}static outer(e,t,l){if(Array.isArray(e)&&(e=Ge(e)),Array.isArray(t)&&(t=Ge(t)),!Te(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Te(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=Se.zeros(e.length,t.length);for(let a=0;a<t.length;a++){const c=t.v[a],d=o.getcolref(a+1);for(let f=0;f<e.length;f++)d[f]=l(e.v[f],c)}return o}static parseCSV(e,t,l,o){function a(b){return b.some(C=>Number.isNaN(Number.parseFloat(C.trim())))}t===void 0&&(t=",");const c=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let d=e.split(/\n/),f=[],u=0;const v=d[0].split(t);(l||l===void 0&&a(v))&&(f=v,u=1),d=d.filter(b=>b.trim().length>1);let m=[],h=0;o&&(h=1);const g=d.length-u,p=v.length-h;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const y=Se.zeros(p,g);for(let b=u;b<g+u;b++){const C=d[b].split(t);let A;if(o?(m[b-u]=C[0],A=C.slice(1).map(N=>Number.parseFloat(N.trim().replace(c,".")))):A=C.map(N=>Number.parseFloat(N.trim().replace(c,"."))),A.some(N=>Number.isNaN(N)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=p)throw Error("Wrong number of values in row #"+b);y.v.set(new Float64Array(A),(b-u)*p)}return{values:y.t(),header:f,labels:m,sep:t,dec:c}}};Dr(Se,"valuesConstructor",Float64Array),Dr(Se,"TOLERANCE",Math.pow(10,-9));let Wt=Se;function Te(r){return r&&r.constructor===ye}function Ge(r){return new ye(new Float64Array(r))}const rt=class rt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new Tt.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=o+1,l=l+1);return new Tt(t.subarray(0,l))}filter(e){const t=new rt.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=this.v[o],l=l+1);return new rt(t.subarray(0,l))}shuffle(){return new rt(Qo(this.v))}sort(e){return new rt(Zo(this.v,e))}sortind(e){return new Tt($o(this.v,e))}rep(e){return Xo(this,e)}repeach(e){return Jo(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=Tt.seq(1,this.length)),Xt(t)||(t=Jt(t));const l=t.length;if(en(t)<1||jt(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==l)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<t.length;o++){const a=t.v[o];this.v[a-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=Jt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Tt.bool2ind(e):Jt(e)),!Xt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=rt.zeros(t);for(let o=0;o<t;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");l.v[o]=this.v[e.v[o]-1]}return l}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new rt(this.v.slice(e-1,t))}copy(){return new rt(this.v.slice())}dot(e){return e===void 0&&(e=this),Xs(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(Te(e))return new rt(Gs(this.v,e.v,t));if(Ho(e))return new rt(Ks(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e){const t=this.v.length,l=rt.zeros(t);for(let o=0;o<t;o++)l.v[o]=e(this.v[o]);return l}static c(...e){if(e.length===1)return e[0];const t=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),l=new rt.valuesConstructor(t);let o=0;for(const a of e)typeof a=="number"?(l[o]=a,o+=1):(l.set(Te(a)?a.v:new rt.valuesConstructor(a),o),o+=typeof a=="number"?1:a.length);return new rt(l)}static seq(e,t,l){return Ko(e,t,l,rt)}static randn(e,t,l){return Do(e,t,l)}static rand(e,t,l){return Fo(e,t,l)}static zeros(e){return new rt(new rt.valuesConstructor(e))}static ones(e){return rt.fill(1,e)}static fill(e,t){const l=new rt.valuesConstructor(t);for(let o=0;o<l.length;o++)l[o]=e;return new rt(l)}};Dr(rt,"valuesConstructor",Float64Array);let ye=rt;function Xt(r){return r.constructor===Tt}function Jt(r){return new Tt(new Int32Array(r))}const vt=class vt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new vt.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=o+1,l=l+1);return new vt(t.subarray(0,l))}filter(e){const t=new vt.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=this.v[o],l=l+1);return new vt(t.subarray(0,l))}shuffle(){return new vt(Qo(this.v))}sort(e){return new vt(Zo(this.v,e))}sortind(e){return new vt($o(this.v,e))}rep(e){return Xo(this,e)}repeach(e){return Jo(this,e)}subset(e){if(typeof e=="number"&&(e=Jt([e])),Array.isArray(e)&&(e=Jt(e)),!Xt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=new vt.valuesConstructor(t);for(let o=0;o<t;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");l[o]=this.v[e.v[o]-1]}return new vt(l)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new vt(this.v.slice(e-1,t))}static seq(e,t,l){return Ko(e,t,l,vt)}static ones(e){return vt.fill(1,e)}static fill(e,t){const l=new vt.valuesConstructor(t);for(let o=0;o<l.length;o++)l[o]=e;return new vt(l)}static bool2ind(e){let t=0;const l=new vt.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(l[t]=o+1,t=t+1);return new vt(l.subarray(0,t))}};Dr(vt,"valuesConstructor",Int32Array);let Tt=vt;function Ko(r,e,t,l){t===void 0&&(t=r<=e?1:-1);const o=Math.floor((e-r)/t)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const a=new l.valuesConstructor(o);for(let c=0;c<o;c++)a[c]=r+c*t;return new l(a)}function Xo(r,e){const t=r.length*e,l=new r.constructor.valuesConstructor(t);for(let o=1;o<=e;o++)for(let a=0;a<r.length;a++)l[(o-1)*r.length+a]=r.v[a];return new r.constructor(l)}function Jo(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=r.length*e,l=new r.constructor.valuesConstructor(t);for(let o=0;o<r.length;o++)for(let a=0;a<e;a++)l[o*e+a]=r.v[o];return new r.constructor(l)}function Gs(r,e,t){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const l=new r.constructor(r.length);for(let o=0;o<r.length;o++)l[o]=t(r[o],e[o]);return l}function Ks(r,e,t){const l=new r.constructor(r.length);for(let o=0;o<r.length;o++)l[o]=t(r[o],e);return l}function Xs(r,e,t,l,o,a){if(l!==o)throw Error("_dot: matrix dimensions do not much.");const c=t,d=a,f=l,u=new r.constructor(c*d);for(let v=0;v<d;v++){const m=e.subarray(v*o,(v+1)*o),h=u.subarray(v*c,(v+1)*c);for(let g=0;g<f;g++){const p=m[g],y=r.subarray(g*t,(g+1)*t);for(let b=0;b<c;b++)h[b]+=y[b]*p}}return u}function Qo(r){let e=r.slice(),t=e.length,l,o;for(;t;)o=Math.floor(Math.random()*t--),l=e[t],e[t]=e[o],e[o]=l;return e}function Zo(r,e=!1){return e?r.slice().sort((t,l)=>l-t):r.slice().sort((t,l)=>t-l)}function $o(r,e=!1){const t=Tt.seq(1,r.length).v;return e?t.sort((l,o)=>r[o-1]-r[l-1]):t.sort((l,o)=>r[l-1]-r[o-1])}function Uc(r,e,t){return 5*r*e+e+4*t*e}function Hc(r,e){return 2+2*r+r*e+17*e}function Ke(r,e,t){if(!r||!r.class||!r.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=r.ncols,o=r.ncomp;let a,c;switch(e){case"mX":a=2,c=l;break;case"sX":a=2+l,c=l;break;case"loadings":case"xloadings":a=2+2*l+(t-1)*l,c=l;break;case"P":a=2+2*l,c=t*l;break;case"eigenvals":case"xeigenvals":a=2+2*l+l*o,c=o;break;case"cq0":a=2+2*l+l*o+o,c=o;break;case"cNq":a=2+2*l+l*o+2*o,c=o;break;case"rq0":a=2+2*l+l*o+3*o,c=o;break;case"rNq":a=2+2*l+l*o+4*o,c=o;break;case"ch0":a=2+2*l+l*o+5*o,c=o;break;case"cNh":a=2+2*l+l*o+6*o,c=o;break;case"rh0":a=2+2*l+l*o+7*o,c=o;break;case"rNh":a=2+2*l+l*o+8*o,c=o;break;case"cr0":a=2+2*l+l*o+9*o,c=o;break;case"cNr":a=2+2*l+l*o+10*o,c=o;break;case"rr0":a=2+2*l+l*o+11*o,c=o;break;case"rNr":a=2+2*l+l*o+12*o,c=o;break;case"cg0":a=2+2*l+l*o+13*o,c=o;break;case"cNg":a=2+2*l+l*o+14*o,c=o;break;case"rg0":a=2+2*l+l*o+15*o,c=o;break;case"rNg":a=2+2*l+l*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(a,a+c)}function or(r,e,t){if(!r||!r.class||!r.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const l=r.ncols,o=r.nrows,a=r.ncomp;let c,d;switch(e){case"scores":case"xscores":c=(t-1)*o,d=o;break;case"hdist":c=o*a+(t-1)*o,d=o;break;case"qdist":c=2*o*a+(t-1)*o,d=o;break;case"xcumexpvar":case"cumexpvar":c=3*o*a,d=a;break;case"fdistc":c=3*o*a+a+(t-1)*o,d=o;break;case"fdistr":c=4*o*a+a+(t-1)*o,d=o;break;case"gdist":c=5*o*a+a+(t-1)*l,d=l;break;case"rdist":c=5*o*a+a+l*a+(t-1)*l,d=l;break;case"idistc":c=5*o*a+a+2*l*a+(t-1)*l,d=l;break;case"idistr":c=5*o*a+a+3*l*a+(t-1)*l,d=l;break;default:throw new Error("pcares_get: wrong outcome name.")}return r.v.subarray(c,c+d)}function es(r,e,t){if(!Array.isArray(r))return!1;if(r.length===0)return!0;for(let l=0;l<r.length;l++){const o=r[l];if(o<e||o>t)return!1}return!0}function Gc(r,e,t,l,o,a,c){if(!dr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const d=a&&Array.isArray(a)?a.length:0;if(!es(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!es(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const u=e.nrows-d,v=e.ncols-f;if(u<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),t===void 0&&(t=Math.min(e.nrows-d-1,e.ncols-f)),t<1||t>Math.min(u-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const m=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);let h=null;if(d>0){const N=new Int32Array(a);h=r._malloc(N.length*N.BYTES_PER_ELEMENT),r.HEAP32.set(N,h/N.BYTES_PER_ELEMENT)}let g=null;if(f>0){const N=new Int32Array(c);g=r._malloc(N.length*N.BYTES_PER_ELEMENT),r.HEAP32.set(N,g/N.BYTES_PER_ELEMENT)}const p=Hc(v,t),y=Float64Array,b=r._malloc(p*y.BYTES_PER_ELEMENT);if(r.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[m,e.nrows,e.ncols,t,l,o,b,h,d,g,f])!==1)throw new Error("pca_fit: PCA failed.");const A=r.HEAPF64.slice(b/y.BYTES_PER_ELEMENT,b/y.BYTES_PER_ELEMENT+p);return r._free(m),r._free(b),h&&r._free(h),g&&r._free(g),{class:["pcamodel"],v:A,ncomp:t,nrows:u,ncols:v,exclvars:c,center:l,scale:o}}function Kc(r,e,t,l){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!dr(t))throw new Error("pca_predict: X must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!es(l,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=t.nrows-o;t.ncols===e.ncols&&(a=0);const d=t.ncols-a;if(c<1)throw new Error("pca_predict: X must have at least 1 row.");if(d!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const f=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,f/t.v.BYTES_PER_ELEMENT);let u=null;if(o>0){const k=new Int32Array(l);u=r._malloc(k.length*k.BYTES_PER_ELEMENT),r.HEAP32.set(k,u/k.BYTES_PER_ELEMENT)}let v=null;if(a>0){const k=new Int32Array(e.exclvars);v=r._malloc(k.length*k.BYTES_PER_ELEMENT),r.HEAP32.set(k,v/k.BYTES_PER_ELEMENT)}const m=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const h=Uc(t.nrows-o,e.ncomp,t.ncols-a),g=Float64Array,p=r._malloc(h*g.BYTES_PER_ELEMENT);if(r.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[f,t.nrows,t.ncols,m,p,u,o,v,a])!==1)throw new Error("pca_predict: PCA prediction failed.");const b=r.HEAPF64.slice(p/g.BYTES_PER_ELEMENT,p/g.BYTES_PER_ELEMENT+h);r._free(f),r._free(m),r._free(p),u&&r._free(u),v&&r._free(v);const C={class:["pcares"],v:b,ncomp:e.ncomp,nrows:c,ncols:d,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},A=new Array(e.ncomp),N=new Array(e.ncomp),E=new Array(e.ncomp),w=new Array(e.ncomp),T=new Array(e.ncomp),S=or(C,"xcumexpvar");T[0]=1,w[0]=S[0],E[0]=1-S[0],A[0]=S[0],N[0]=1-S[0];for(let k=1;k<e.ncomp;k++)T[k]=k+1,w[k]=S[k],E[k]=1-S[k],A[k]=S[k]-S[k-1],N[k]=1-A[k];return C.stat={components:T,resvar:N,expvar:A,cumexpvar:w,cumresvar:E},C}function Xc(r,e,t,l,o,a,c,d){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!dr(t))throw new Error("pcapcv: X must be a matrix.");d||(d=[]);const f=d&&Array.isArray(d)?d.length:0;if(!es(d,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const u=e.exclvars.length,v=t.nrows-f,m=t.ncols-u;if(v<3)throw new Error("pcapcv: X must have at least 3 rows.");if(m!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>v)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(l)||l<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const h=Math.min(a===0?v-2:v-Math.ceil(v/o)-1,m,e.ncomp);if(l>h)throw new Error('pcapcv: the value of "ncomp" is too large.');const g=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,g/t.v.BYTES_PER_ELEMENT);let p=null;if(f>0){const T=new Int32Array(d);p=r._malloc(T.length*T.BYTES_PER_ELEMENT),r.HEAP32.set(T,p/T.BYTES_PER_ELEMENT)}let y=null;if(u>0){const T=new Int32Array(e.exclvars);y=r._malloc(T.length*T.BYTES_PER_ELEMENT),r.HEAP32.set(T,y/T.BYTES_PER_ELEMENT)}const b=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,b/e.v.BYTES_PER_ELEMENT);const C=v*m,A=t.v.constructor,N=r._malloc(C*A.BYTES_PER_ELEMENT);if(r.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,t.nrows,t.ncols,l,e.center,e.scale,a,o,c,b,N,p,f,y,u])!==1)throw new Error("pcapcv: PCVPCA failed.");const w=r.HEAPF64.slice(N/A.BYTES_PER_ELEMENT,N/A.BYTES_PER_ELEMENT+C);return r._free(g),r._free(b),r._free(N),p&&r._free(p),y&&r._free(y),new Wt(w,v,m)}function Jc(r,e){let t,l,o;if(e.length>0){const a=r.values.nrows,c=r.objindices,d=a-e.length;t=Array(d),l=Array(d),o=Array(d);let f=0;for(let u=0;u<a;u++)e.includes(u)||(t[f]=c[u],l[f]=r.classes[u],o[f]=r.objlabels[u],f=f+1)}else t=r.objindices,o=r.objlabels,l=r.classes;return[t,o,l]}function Js(){const r=new Date;return`${r.getFullYear()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}${r.getHours().toString().padStart(2,"0")}${r.getMinutes().toString().padStart(2,"0")}${r.getSeconds().toString().padStart(2,"0")}${r.getMilliseconds().toString().padStart(3,"0")}`}function Qs(r,e,t,l){const[o,a,c]=Jc(t,l),d=Kc(r,e,t.values,l);d.hash=Js(),d.objindices=o,d.objlabels=a,d.classes=c,d.classNames=t.classNames,d.varlabels=t.varlabels,d.eigenvals=Ke(e,"eigenvals"),d.cNh=Ke(e,"cNh"),d.cNq=Ke(e,"cNq"),d.ch0=Ke(e,"ch0"),d.cq0=Ke(e,"cq0"),d.rNh=Ke(e,"rNh"),d.rNq=Ke(e,"rNq"),d.rh0=Ke(e,"rh0"),d.rq0=Ke(e,"rq0");const f=e.nrows;return d.T2lim=2*(f-1)/(f-2)*Oo(.95,2,f-2),d}function Qc(r,e="."){return Array.isArray(r)&&r.length>0?e==="."?r.map(t=>Number.parseFloat(t.trim())):r.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(r.trim()):Number.parseFloat(r.trim().replace(e,"."))}function yn(r){return r.some(e=>Number.isNaN(e))}function Ir(r){return r.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function ea(r){let e=r.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function Zc(r,e,t,l,o,a,c,d=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let v=ea(r);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");v=v.filter(M=>M.replaceAll(e,"").trim().length>0);const m=v[0].split(e);if(m.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,g;const p=t!=="no";(p||p===void 0&&yn(firstRow))&&(g=m,h=1);const y=v.length-h;if(y<1)throw new Error("Data file should contain at least 1 row with values.");let b,C,A,N=Array(y);l?(b=p?Ir(g[0]):"",A=Array(y),C=1):(b="",A=[],C=0);let E,w=[],T;o?(E=p?Ir(g[C]):"",T=Array(y),C=C+1):(E="",T=[]);const S=m.length-C;if(S<1)throw new Error("Data file should contain at least 1 column with values.");const k=Wt.zeros(S,y);for(let M=h;M<y+h;M++){const W=M-h;N[W]=W;let V=v[M].split(e);if(l&&(A[W]=V[0],V.shift()),o){const D=V[0];T[W]=D,V.shift(),(w.length===0||w.indexOf(D)<0)&&w.push(D)}const O=u==="."?V.map(D=>Number.parseFloat(D.trim())):V.map(D=>Number.parseFloat(D.trim().replace(u,".")));if(O.some(D=>Number.isNaN(D)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(O.length!=S)throw new Error("Wrong number of values in row #"+M);k.v.set(new Float64Array(O),(M-h)*S)}if(!l||A.length!==y){A=Array(y);for(let M=0;M<y;M++)A[M]="O"+(M+1)}A=A.map(M=>Ir(M)),T=T.map(M=>Ir(M)),w=w.map(M=>Ir(M));let z,j=Array(S),R=Array(S);if(g&&g.length===S+C){z=g.map(M=>Ir(M)).slice(C);for(let M=0;M<S;M++)j[M]=M,R[M]=M+1}else{z=Array(S);for(let M=0;M<S;M++)j[M]=M,z[M]="V"+(M+1),R[M]=M+1}let Y;if(t==="values"){if(Y=u==="."?z.map(M=>Number.parseFloat(M.trim())):z.map(M=>Number.parseFloat(M.trim().replace(u,"."))),Y.some(M=>Number.isNaN(M)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else Y=R;Array.isArray(Y)||(Y=[]),a||(a=""),c||(c=""),a=Y.length>0&&a.length>0?a:"Variables",c=Y.length>0&&c.length>0?c:"";const B=a+(c.length>0?", "+c:""),K=Y[1]<Y[0];return{values:k.t(),header:t,hasLabels:l,hasClassNames:o,labelsVarname:b,classLabelsVarname:E,objlabels:A,objindices:N,varlabels:z,varvalues:Y,varindices:j,varrev:K,classes:T,responses:null,classNames:w,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:B}}function $c(r){if(yn(r[0].slice(2)))return!0;const e=r[0].length,t=[];for(let l=2;l<e;l++){let o=[];for(let u=1;u<r.length;u++)o.push(r[u][l]);const a=r[0][l],c=gn(o),d=Fs(o),f=Math.abs((a-c)/d);t.push(f)}return t.every(l=>l>5)}function eu(r){const e=",",t=r[0].split(e),l=r[1].split(e),o=t.length,a=l.length,c=";",d=r[0].split(c),f=r[1].split(c),u=d.length,v=f.length;let m,h;if(o>1&&a>1&&o===a&&o>u)h=e,m=o;else if(u>1&&v>1&&u===v)h=c,m=a;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",m]}function tu(r){const e=ea(r),t=e.length;if(t<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,o,a]=eu(e),c=Math.min(a,5),d=Math.min(t,5);let f=e.slice(0,d).map(S=>S.split(l).slice(0,c));f=f.map(S=>S.map(k=>Ir(k)));const u=f.map(S=>Qc(S.slice(),o));for(let S=1;S<d;S++)if(yn(u[S].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const v=$c(u);let m=0;const h=v?1:0,g=h+1,p=f[h][0],y=f[g][0],b=u[h][0],C=u[g][0],A=u[h][1],N=u[g][1];let E=!1,w=!1;if(Number.isNaN(b)&&Number.isNaN(C)&&p!==y?(E=!0,m=m+1):Number.isNaN(A)&&Number.isNaN(N)&&p!==y&&(E=!0,w=!0,m=m+2),!w){const S=E?1:0,k=u[h][S],z=u[g][S];w=yn([k,z]),m=m+w}let T="no";if(v){m>0?f[0].slice(m):f[0];const S=m>0?u[0].slice(m):u[0];T=yn(S)?"labels":"values"}return[l,E,w,T]}function ru(r){const e=r.values.t(),t=r.sep,l=r.dec;let o=null;r.header!=="no"&&(o=r.header==="values"?r.varvalues.slice():r.varlabels.slice()),o&&r.hasClassNames&&(o=[r.classLabelsVarname,...o]),o&&r.hasLabels&&(o=[r.labelsVarname,...o]);const a=r.classes&&r.classes.length===e.ncols,c=r.objlabels&&r.objlabels.length===e.ncols;let d=o?o.join(t):"";for(let f=0;f<e.ncols;f++){let u=e.getcolref(f+1).join(t);l!=="."&&(u=u.replace(".",l)),a&&(u=r.classes[f]+r.sep+u),c&&(u=r.objlabels[f]+r.sep+u),d=d+`
`+u}return d=d+`
`,l!=="."&&(d=d.replace(/\./g,l)),d}function nu(r,e){const t=ru(r),l=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.csv`),a.click()}function su(r){if(!r.length)return"";r.sort((o,a)=>o-a);let e=[],t=r[0],l=t;for(let o=1;o<r.length;o++)r[o]===l+1?l=r[o]:(t===l?e.push(`${t}`):e.push(`${t}-${l}`),t=r[o],l=t);return t===l?e.push(`${t}`):e.push(`${t}-${l}`),e.join(" ")}function wn(r,e){return dr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Te(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function ta(r,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Wc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Ge(e.v);const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function Zs(r){const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),o=String(r.getHours()).padStart(2,"0"),a=String(r.getMinutes()).padStart(2,"0"),c=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${l}${o}${a}${c}`}function ts(r,e){return Object.keys(r).reduce((t,l)=>(t[l]=e(r,l),t),{})}var lu=Q('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function ut(r,e){let t=G(e,"text",3,"button");var l=lu();l.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var o=L(l);ne(()=>ce(o,t())),P(r,l)}et(["click"]);var ou=Q('<button tabindex="0"></button>');function $s(r,e){var t=ou();t.__click=function(...l){var o;(o=e.onclick)==null||o.apply(this,l)},ne(()=>{q(t,"title",e.title),q(t,"aria-label",e.title),q(t,"alt",e.title),ht(t,1,`button ${e.className??""}`,"svelte-bx9fh5")}),P(r,t)}et(["click"]);function rn(r,e){let t=G(e,"title",3,"Reset");$s(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function au(r,e){let t=G(e,"title",3,"Undo");$s(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function iu(r,e){let t=G(e,"title",3,"Download");$s(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-download"})}function ft(r){const e={};for(const t of Object.keys(r))e[t]=r[t].default;return e}var cu=Q('<span class="label svelte-vzu0vi"> </span>'),uu=Q("<div><!> <!></div>");function xe(r,e){let t=G(e,"label",3,null),l=G(e,"name",3,""),o=G(e,"status",3,""),a=G(e,"colors",3,""),c=G(e,"labelWidth",3,12);var d=uu(),f=L(d);{var u=m=>{var h=cu(),g=L(h);ne(()=>{st(h,`flex-basis:${c()??""}ch;`),ce(g,t())}),P(m,h)};X(f,m=>{t()&&m(u)})}var v=I(f,2);zr(v,()=>e.children??mt),ne(()=>{ht(d,1,`control-element ${l()??""} ${o()??""}`,"svelte-vzu0vi"),st(d,a())}),P(r,d)}const ra=(r,e,t,l)=>{const o=e(r);o<0||o>1||H(t,o*100>s(l)-5&&o*100<s(l)+5,!0)},na=(r,e,t,l,o,a)=>{H(e,!1);const c=t(r);c<0||c>1||(l(o(c)),a()&&a()(l()))},sa=(r,e,t,l,o,a)=>{if(!s(e))return;const c=t(r);c<0||c>1||(l(o(c)),a()&&a()(l()))},fu=(r,e,t,l,o,a)=>{if(r.key==="ArrowLeft"){e(e()-t()<l()?l():e()-t()),o()&&o()(e());return}if(r.key==="ArrowRight"){e(e()+t()>a()?a():e()+t()),o()&&o()(e());return}};var vu=Q('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function la(r,e){ve(e,!0);let t=G(e,"min",7,0),l=G(e,"max",3,100),o=G(e,"value",31,()=>Ue(t())),a=G(e,"decNum",3,1),c=G(e,"step",19,()=>+((l()-t())/100).toFixed(4)),d=G(e,"onchange",3,null);ue(()=>{o()<t()&&(o(t()),d()&&d()(o())),o()>l()&&(o(l()),d()&&d()(o())),t()>l()&&t(l())});let f=re(void 0),u=re(void 0),v=re(!1);const m=T=>{const S=t()+T*(l()-t());return+(Math.round(S/c())*c()).toFixed(4)},h=T=>{const S=s(f).getBoundingClientRect(),k=s(u).getBoundingClientRect(),z=S.x,j=k.x+k.width;return(T.clientX-z)/(j-z)},g=T=>{H(v,!1)},p=T=>{let S=o()+c()*T.deltaY*.5;S<t()&&(S=t()),S>l()&&(S=l()),o(+(Math.round(S/c())*c()).toFixed(4)),T.preventDefault(),d()&&d()(o())},y=_(()=>t()===l()?100:(o()-t())/(l()-t())*100);var b=vu();b.__keydown=[fu,o,c,t,d,l],b.__mousemove=[sa,v,h,o,m,d],b.__mousedown=[ra,h,v,y],b.__mouseup=[na,v,h,o,m,d],b.__touchmove=[sa,v,h,o,m,d],b.__touchstart=[ra,h,v,y],b.__touchend=[na,v,h,o,m,d];var C=L(b);let A;var N=L(C);let E;var w=L(N);Zr(C,T=>H(f,T),()=>s(f)),Zr(b,T=>H(u,T),()=>s(u)),ne((T,S,k)=>{q(b,"aria-valuenow",o()),q(b,"aria-valuemin",t()),q(b,"aria-valuemax",l()),A=ht(C,1,"range-slider svelte-vhx0r0",null,A,T),st(C,`width:${s(y)??""}%`),E=ht(N,1,"range-value svelte-vhx0r0",null,E,S),ce(w,k)},[()=>({"range-slider_right":s(y)<50}),()=>({"range-value_right":s(y)<50}),()=>o().toFixed(a())]),Tr("mousewheel",b,p),Tr("mouseleave",b,g),Tr("touchcancel",b,g),P(r,b),de()}et(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const oa=(r,e,t,l,o)=>{const a=e(r);a<0||a>1||H(t,a>s(l)&&a<s(o)+s(l),!0)},aa=(r,e,t,l,o)=>{H(e,!1);const a=t(r);if(a<0||a>1)return;const c=l(a);o()!==c&&o(c)},ia=(r,e,t,l,o)=>{if(!s(e))return;const a=t(r);if(a<0||a>1)return;const c=l(a);c!=o()&&o(c)},du=(r,e,t,l,o)=>{if(r.key==="ArrowLeft"){e(e()-t()<l()?l():e()-t());return}if(r.key==="ArrowRight"){e(e()+t()>o()?o():e()+t());return}};var mu=Q('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function _n(r,e){ve(e,!0);let t=G(e,"min",3,0),l=G(e,"max",3,10),o=G(e,"value",31,()=>Ue(t())),a=G(e,"step",3,1);o()<t()&&(console.error('The "value" is outside of the provided range.'),o(t())),o()>l()&&(console.error('The "value" is outside of the provided range.'),o(l())),t()>l()&&console.error("The min and max values must be distinct.");let c=re(void 0),d=re(void 0),f=re(!1);const u=_(()=>t()===l()?0:(o()-t())/(l()-t()+1)),v=_(()=>a()/(l()-t()+1)),m=_(()=>l()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${s(v)*100}%, var(--bg-color-light2, #e8e8e8) ${s(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*s(v)}%)`:"background: #f0f0f0"),h=T=>{if(T<0||T>1)return o();let S=o();return T<s(u)&&s(u)>0&&(S=o()-Math.ceil((s(u)-T)/s(v))),T>s(u)+s(v)&&s(u)+s(v)<1&&(S=o()+Math.ceil((T-(s(u)+s(v)))/s(v))),S<t()&&(S=t()),S>l()&&(S=l()),S},g=T=>{const S=s(d).getBoundingClientRect(),k=S.x,z=S.x+S.width;return(T.clientX-k)/(z-k)},p=T=>{H(f,!1)},y=T=>{let S=Math.round(o()+T.deltaY*.5*a());S<t()&&(S=t()),S>l()&&(S=l()),o(S),T.preventDefault()};var b=mu();b.__keydown=[du,o,a,t,l],b.__mousemove=[ia,f,g,h,o],b.__mousedown=[oa,g,f,u,v],b.__mouseup=[aa,f,g,h,o],b.__touchmove=[ia,f,g,h,o],b.__touchstart=[oa,g,f,u,v],b.__touchend=[aa,f,g,h,o];var C=L(b);let A;var N=L(C);let E;var w=L(N);Zr(C,T=>H(c,T),()=>s(c)),Zr(b,T=>H(d,T),()=>s(d)),ne((T,S,k)=>{q(b,"aria-valuenow",o()),q(b,"aria-valuemin",t()),q(b,"aria-valuemax",l()),st(b,s(m)),A=ht(C,1,"range-slider svelte-xdlm7u",null,A,T),st(C,`width: max(2px, ${s(v)*100}%);left:${s(u)*100}%;`),E=ht(N,1,"range-value svelte-xdlm7u",null,E,S),ce(w,k)},[()=>({"range-slider_left":s(v)<.1&&s(u)<.5,"range-slider_right":s(v)<.1&&s(u)>=.5}),()=>({"range-value_right":s(v)<.1&&s(u)>.5,"range-value_left":s(v)<.1&&s(u)<=.5}),()=>o().toFixed(0)]),Tr("mousewheel",b,y),Tr("mouseleave",b,p),Tr("touchcancel",b,p),P(r,b),de()}et(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const hu=(r,e,t)=>{if(r.key==="ArrowLeft"){const l=e.options.findIndex(o=>o===t());l>0&&t(e.options[l-1]);return}if(r.key==="ArrowRight"){const l=e.options.findIndex(o=>o===t());l<e.options.length-1&&t(e.options[l+1]);return}};var gu=(r,e,t)=>e(t),pu=Q('<button tabindex="-1"><!></button>'),bu=Q('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function tt(r,e){ve(e,!0);let t=G(e,"value",31,()=>Ue(e.options[0])),l=G(e,"className",3,"");var o=bu(),a=Z(o);a.__keydown=[hu,e,t],Ie(a,20,()=>e.options,d=>d,(d,f)=>{var u=pu();u.__click=[gu,t,f];let v;var m=L(u);xt(m,()=>f,!1,!1),ne((h,g)=>v=ht(u,1,`option option_${h??""}`,"svelte-1i17tox",v,g),[()=>f.toString().replace(".","_"),()=>({selected:f==t()})]),P(d,u)});var c=I(a,2);ne(()=>ht(a,1,`selector ${l()??""}`,"svelte-1i17tox")),Ls(c,t),P(r,o),de()}et(["keydown","click"]);function Qt(r,e){ve(e,!0);let t=G(e,"options",19,()=>["no","yes"]),l=G(e,"value",15,!1),o=re(!0);const a=_(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());ue(()=>H(o,l()?t()[1]:t()[0],!0)),ue(()=>l(s(o)===t()[1]));var c=ge(),d=Z(c);{var f=u=>{tt(u,{get options(){return s(a)},get value(){return s(o)},set value(v){H(o,v,!0)}})};X(d,u=>{s(a)&&u(f)})}P(r,c),de()}var yu=Q('<div tabindex="0" role="radiogroup"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function ca(r,e){ve(e,!0);let t=G(e,"file",15),l=G(e,"message",3,"Select CSV file with dataset"),o=G(e,"acceptType",3,".csv"),a;function c(b){a&&a.files.length>0?t(a.files[0]):t(null)}function d(b){(b.type==="click"||b.type==="keydown"&&(b.code==="Space"||b.code==="Enter"))&&a.click()}function f(b){a.value=null,t(null)}var u=yu(),v=Z(u);v.__keydown=d,v.__click=d;let m;var h=L(v),g=I(h);g.__change=c,Zr(g,b=>a=b,()=>a);var p=I(v,2);{var y=b=>{rn(b,{onclick:f})};X(p,b=>{t()&&b(y)})}ne(b=>{m=ht(v,1,"file-selector svelte-1k0x7uv",null,m,b),ce(h,`${(t()?t().name:l())??""} `),q(g,"accept",o())},[()=>({selected:t()})]),P(r,u),de()}et(["keydown","click","change"]);function wu(r,e,t,l){e()&&H(t,e()(l()),!0)}var _u=Q('<div class="error-message svelte-1qtiwcs"> </div>'),xu=Q('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function ua(r,e){ve(e,!0);let t=G(e,"value",15,""),l=G(e,"className",3,""),o=G(e,"placeholder",3,""),a=G(e,"maxLength",3,25),c=G(e,"validator",3,null),d=re("");var f=xu();let u;var v=L(f);v.__input=[wu,c,d,t];var m=I(v,2);{var h=g=>{var p=_u(),y=L(p);ne(()=>ce(y,s(d))),P(g,p)};X(m,g=>{s(d)&&s(d).length>0&&g(h)})}ne(g=>{u=ht(f,1,`textinput ${l()??""}`,"svelte-1qtiwcs",u,g),q(v,"placeholder",o()),q(v,"maxlength",a())},[()=>({error:s(d)&&s(d).length>0})]),Ls(v,t),P(r,f),de()}et(["input"]);var ku=Q('<div class="spinner svelte-n48urb"></div>');function el(r){var e=ku();P(r,e)}const Eu=(r,e,t)=>{if(r.key==="ArrowLeft"){const l=e().findIndex(o=>o===t());l>0&&t(e()[l-1]);return}if(r.key==="ArrowRight"){const l=e().findIndex(o=>o===t());l<e().length-1&&t(e()[l+1]);return}};var Cu=(r,e,t)=>e(t),Au=Q('<button tabindex="-1"><!></button>'),Su=Q('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an">',1);function fa(r,e){ve(e,!0);let t=G(e,"options",19,()=>["p","l","b","h"]),l=G(e,"value",31,()=>Ue(t()[0]));const o='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar"};var d=Su(),f=Z(d);f.__keydown=[Eu,t,l],Ie(f,20,t,v=>v,(v,m)=>{var h=Au();h.__click=[Cu,l,m];let g;var p=L(h);xt(p,()=>o+a[m]+"</svg",!1,!1),ne(y=>{g=ht(h,1,"option svelte-yf64an",null,g,y),q(h,"title",c[m])},[()=>({selected:m==l()})]),P(v,h)});var u=I(f,2);Ls(u,l),P(r,d),de()}et(["keydown","click"]),et(["keydown","click"]);var Nu=Q("<h2> </h2>"),Mu=Q("<!> <!>",1),Tu=Q('<div class="widget"><!></div>');function zu(r,e){ve(e,!0);let t=G(e,"title",3,""),l=G(e,"value",15),o=G(e,"labelWidth",3,13);function a(u){const v={};for(const m of Object.keys(u))v[m]=u[m].default;return v}ue(()=>{!l()&&e.options&&l(a(e.options))});var c=Tu(),d=L(c);{var f=u=>{var v=Mu(),m=Z(v);{var h=p=>{xe(p,{children:(y,b)=>{var C=Nu(),A=L(C);ne(()=>ce(A,t())),P(y,C)},$$slots:{default:!0}})};X(m,p=>{t()&&p(h)})}var g=I(m,2);Ie(g,17,()=>Object.keys(e.options),qe,(p,y)=>{var b=ge();const C=_(()=>e.options[s(y)]);var A=Z(b);{var N=E=>{xe(E,{get name(){return s(C).name},get label(){return s(C).label},get labelWidth(){return o()},children:(w,T)=>{var S=ge(),k=Z(S);Ps(k,()=>s(C).el,(z,j)=>{j(z,Pr(()=>s(C).props,{get value(){return l()[s(y)]},set value(R){l(l()[s(y)]=R,!0)}}))}),P(w,S)},$$slots:{default:!0}})};X(A,E=>{s(C).hidden||E(N)})}P(p,b)}),P(u,v)};X(d,u=>{l()&&u(f)})}P(r,c),de()}var Pu=Q('<span style="font-weight:bold"> </span><br>',1),Iu=Q('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <span class="file-size svelte-gdjwex"> </span></p> <!>',1);function Lu(r,e){ve(e,!0);let t=G(e,"title",3,"");var l=ge(),o=Z(l);{var a=c=>{xe(c,{children:(d,f)=>{var u=Iu(),v=Z(u),m=L(v);{var h=A=>{var N=Pu(),E=Z(N),w=L(E);ne(()=>ce(w,t())),P(A,N)};X(m,A=>{t()&&t()!==""&&A(h)})}var g=I(m,4),p=L(g),y=I(g,5),b=L(y),C=I(v,2);rn(C,{get onclick(){return e.reset}}),ne(()=>{q(g,"title",e.dataset.fileName),ce(p,e.dataset.fileName),ce(b,`${e.dataset.values.nrows??""} × ${e.dataset.values.ncols??""}`)}),P(d,u)},$$slots:{default:!0}})};X(o,c=>{e.dataset&&c(a)})}P(r,l),de()}var Ru=Q("<!> <!>",1),ju=Q("<!> <!> <!> <!> <!> <!>",1),qu=Q("<!> <!>",1),Fu=Q("<p> </p>"),Du=Q("<!> <p> </p>",1),Ou=Q("<p> </p>"),Vu=Q("<!> <!> <!>",1);function tl(r,e){ve(e,!0);let t=G(e,"model",3,null),l=G(e,"outliers",19,()=>[]),o=G(e,"className",3,"Class"),a=G(e,"classMandatory",3,!1),c=G(e,"classUnique",3,!1),d=G(e,"title",3,""),f=G(e,"dataset",15),u=G(e,"resobj",15);const v=[",",";"],m=_(()=>t()?["no","yes"]:["no","labels","values"]);let h=re(void 0),g=re(""),p=re(""),y=re(","),b=re("no"),C=re(!1),A=re(!1),N=re(null),E=re("neutral"),w=re("");function T(O,D,J){H(N,e.WASM().then(ee=>{u(Qs(ee,O,D,J))}).catch(ee=>{console.error(ee),u(null),H(E,"error"),H(w,ee,!0)}),!0)}function S(O,D){if(!O||O.size<10)return;const ee=O.slice(0,1e5),te=new FileReader;te.onload=()=>{const se=te.result;!se||se.length<0||((le=>(H(y,le[0],!0),H(C,le[1],!0),H(A,le[2],!0),H(b,le[3],!0)))(tu(se)),H(A,a()||s(A),!0),D&&s(b)!=="no"&&H(b,"yes"))},te.onerror=function(se){csvString=null,H(E,"error"),H(w,se,!0),console.error("Error reading CSV file.",se)},te.readAsText(ee)}function k(O){try{const D=Zc(O,s(y),s(b)==="yes"?"labels":s(b),s(C),s(A),s(g),s(p));if(D.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(t()&&D.values.ncols!==t().ncols+t().exclvars.length)throw new Error("Dataset has different number of columns than the training set.");if(D.classNames.length>D.values.nrows/2)throw new Error("Dataset has too many unique "+o().toLowerCase()+" labels ("+D.classNames.length+"), check your CSV file.");if(a()&&D.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&D.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");D.fileName=s(h).name.replace(/\.[^/.]+$/,""),t()&&(D.varrev=t().varrev,D.header=t().header,D.varlabels=t().varlabels,D.varvalues=t().varvalues,D.varvaluesName=t().varvaluesName,D.varvaluesUnits=t().varvaluesUnits),f(D),H(w,""),H(E,"success")}catch(D){console.error(D),f(null),H(E,"error"),H(w,D,!0)}}function z(O){const D=new FileReader;D.onload=()=>{k(D.result)},D.readAsText(s(h))}function j(){H(h,""),f(null),u(null),H(g,""),H(p,""),H(E,"neutral"),H(w,"")}ue(()=>{s(h)===null?j():(S(s(h),t()),H(E,"neutral"),H(w,""))}),ue(()=>{s(y)&&(H(E,"neutral"),H(w,""))}),ue(()=>{if(f()&&t()&&!u()&&!s(w))try{u(T(t(),f(),l())),H(w,""),H(E,"success")}catch(O){console.error(O),f(null),u(null),H(E,"error"),H(w,O,!0)}});var R=Vu(),Y=Z(R);{var B=O=>{var D=qu(),J=Z(D);hn(J,()=>s(h)===void 0,se=>{xe(se,{children:(le,fe)=>{ca(le,{id:"dataFile",message:"Select CSV file with dataset",get file(){return s(h)},set file(he){H(h,he,!0)}})},$$slots:{default:!0}})});var ee=I(J,2);{var te=se=>{var le=ju(),fe=Z(le);xe(fe,{label:"Delimiter",children:(_e,Ae)=>{tt(_e,{id:"sep",options:v,get value(){return s(y)},set value(ke){H(y,ke,!0)}})},$$slots:{default:!0}});var he=I(fe,2);xe(he,{label:"Row labels",children:(_e,Ae)=>{Qt(_e,{id:"hasLabels",options:["no","yes"],get value(){return s(C)},set value(ke){H(C,ke,!0)}})},$$slots:{default:!0}});var Ce=I(he,2);{var be=_e=>{xe(_e,{get label(){return`${o()??""} labels`},children:(Ae,ke)=>{Qt(Ae,{id:"hasLabels",options:["no","yes"],get value(){return s(A)},set value(nt){H(A,nt,!0)}})},$$slots:{default:!0}})};X(Ce,_e=>{a()||_e(be)})}var ae=I(Ce,2);xe(ae,{label:"Header",children:(_e,Ae)=>{tt(_e,{id:"header",get options(){return s(m)},get value(){return s(b)},set value(ke){H(b,ke,!0)}})},$$slots:{default:!0}});var ie=I(ae,2);{var oe=_e=>{var Ae=Ru(),ke=Z(Ae);xe(ke,{label:"Header name",children:(kt,yt)=>{ua(kt,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return s(g)},set value(Ve){H(g,Ve,!0)}})},$$slots:{default:!0}});var nt=I(ke,2);xe(nt,{label:"Header units",children:(kt,yt)=>{ua(kt,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return s(p)},set value(Ve){H(p,Ve,!0)}})},$$slots:{default:!0}}),P(_e,Ae)};X(ie,_e=>{s(b)==="values"&&_e(oe)})}var Me=I(ie,2);xe(Me,{label:" ",children:(_e,Ae)=>{ut(_e,{text:"Load",onclick:z})},$$slots:{default:!0}}),P(se,le)};X(ee,se=>{s(h)&&se(te)})}P(O,D)},K=O=>{var D=ge(),J=Z(D);{var ee=te=>{var se=ge(),le=Z(se);zs(le,()=>s(N),fe=>{xe(fe,{children:(he,Ce)=>{var be=Du(),ae=Z(be);el(ae);var ie=I(ae,2),oe=L(ie);ne(()=>ce(oe,t()?"Loading data and apply model...":"Loading data...")),P(he,be)},$$slots:{default:!0}})},void 0,(fe,he)=>{xe(fe,{status:"error",children:(Ce,be)=>{var ae=Fu(),ie=L(ae);ne(()=>ce(ie,s(he))),P(Ce,ae)},$$slots:{default:!0}})}),P(te,se)};X(J,te=>{s(N)&&te(ee)})}P(O,D)};X(Y,O=>{f()?O(K,!1):O(B)})}var F=I(Y,2);{var M=O=>{Lu(O,{get dataset(){return f()},reset:j,get title(){return d()}})};X(F,O=>{f()&&O(M)})}var W=I(F,2);{var V=O=>{xe(O,{status:"error",children:(D,J)=>{var ee=Ou(),te=L(ee);ne(()=>ce(te,s(w))),P(D,ee)},$$slots:{default:!0}})};X(W,O=>{(s(E)==="error"||s(w))&&O(V)})}P(r,R),de()}var Bu=Q('<span class="item svelte-1ggez3e"> </span>'),Yu=Q('<p class="outliers svelte-1ggez3e"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function rl(r,e){ve(e,!0);var t=ge(),l=Z(t);{var o=a=>{xe(a,{children:(c,d)=>{var f=Yu(),u=Z(f),v=I(L(u),2);Ie(v,17,()=>e.outliers,qe,(p,y)=>{var b=Bu(),C=L(b);ne(()=>ce(C,e.dataset.objlabels[s(y)])),P(p,b)});var m=I(u,2);{var h=p=>{au(p,{get onclick(){return e.undoOutliers}})};X(m,p=>{e.outliers.length>1&&p(h)})}var g=I(m,2);rn(g,{get onclick(){return e.resetOutliers}}),P(c,f)},$$slots:{default:!0}})};X(l,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(o)})}P(r,t),de()}const Wu={small:30,medium:40,large:50,xlarge:60},Uu={small:5,medium:8,large:12,xlarge:15},Hu={small:6,medium:10,large:14,xlarge:18},nl={small:4,medium:6,large:8,xlarge:10},Gu={small:12,medium:15,large:19,xlarge:21},sl={small:11,medium:15,large:17,xlarge:19},xn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},kn=["●","◼","▲","▼","⬥","＋","✳","✕"],Ku=.8,va=.5,Xu={small:5,medium:8,large:12,xlarge:15},gt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function da(r,e){return Array.isArray(r)&&r.length===e&&!r.some(t=>t===void 0)&&!r.some(t=>isNaN(t))}function ma(r,e){if(r!=null&&(Array.isArray(r)&&(r=Ge(r)),!(!Te(r)||r.length<1)))return r.apply(t=>ul((t-e[1])*e[0]+e[2])).v}function lt(r,e){return ma(r,e.coords)}function ll(r,e){return ma(r,e.objects)}function ha(r,e){if(r!=null&&(Array.isArray(r)&&(r=Ge(r)),!(!Te(r)||r.length<1)))return r.apply(t=>(t-e[2])/e[0]+e[1]).v}function ga(r,e){return ha(r,e.coords)}function pa(r,e){return ha(r,e.objects)}function ol(r){return r===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${r.toString()}</tspan>`}function Lr(r){if(r===Math.round(r))return r;if(Math.abs(r)>10**6)return Math.round(r);if(Math.abs(r)<10**-6)return r;let e=r.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function al(r){if(r===void 0)return[0,void 0];if(r.length<1)return[0,void 0];if(r.length===1)return[0,[r[0].toString()]];let e=Lr(Math.abs(en(zo(r)))),t=0;if(e>=1)return e<100?[0,Array.from(r).map(a=>a.toFixed(0))]:(t=Math.ceil(Lr(Math.log10(e)))-2,[t,Array.from(r).map(a=>(a/Math.pow(10,t)).toFixed(0))]);let l=Math.ceil(-Lr(Math.log10(e)));return l<=2?[0,Array.from(r).map(o=>o.toFixed(l))]:(t=l-2,l=2,Lr(Math.abs(jt(r)))<=10?[-t,Array.from(r).map(o=>(o*Math.pow(10,t)).toFixed(l))]:[-t,Array.from(r).map(o=>(o/Math.pow(10,t)).toString())])}function St(r,e,t){return Array.isArray(r)&&(r=Ge(r)),Te(r)?r.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&r.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):r:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function il(r,e,t,l){if(!r||!e||r.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=t.coords,a=l.coords;let c="";for(let d=0;d<r.length;d++){const f=ul((r.v[d]-o[1])*o[0]+o[2]),u=ul((e.v[d]-a[1])*a[0]+a[2]);c+=f+","+u+" "}return c}function ba(r,e){return r?Array.isArray(r)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==r.length?[null,"number of tick labels and values should be the same."]:[r.map(t=>En(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function ya(r,e){if(Array.isArray(r)&&(r=Ge(r)),!Te(r))return[null,"tick values must be provided as an array or as a vector."];if(r.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const t=new Set(r.v);if(r.length!==t.size)return[null,"ticks values must be unique."];const l=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],a=r.filter(c=>c>=l&c<=o);return a.length!==r.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function cl(r,e,t,l,o,a){o==null&&(o=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(r)return r;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const d=Math.abs(c[1]-c[0])*a,f=c[1]-c[0]-2*d,u=Math.floor(Math.log10(f)),v=1/Math.pow(10,u-1),m=Math.round(f*v)/v;let h=Ju(m/t);o&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let g=Math.ceil((c[0]+d)/h)*h,p=Math.floor((c[1]-d)/h)*h;Math.abs(c[0]-g)<h/10&&(g=g+h),Math.abs(c[1]-p)<h/10&&(p=p-h),t=Math.ceil(Lr((p-g)/h))+1,r=ye.zeros(t);for(let y=0;y<t;y++)r.v[y]=g+h*y;if(Math.abs(h)<1){const y=Math.pow(10,1+Math.round(-Math.log10(h)));r=r.apply(b=>Math.round((b+Number.EPSILON)*y)/y)}return r.filter(y=>y>=c[0]&y<=c[1])}function Ju(r,e){const t=Math.floor(Math.log10(r)),l=r/Math.pow(10,t);let o;return l<=1?o=1:l<=2?o=2:l<=5?o=5:o=10,o*Math.pow(10,t)}function ul(r){return Math.round(r*10)/10}function Qu(r,e){return e<300.2||r<400.2?"small":e<400.2||r<700.2?"medium":e<650.2||r<850.2?"large":"xlarge"}function wa(r,e){return r<400.2?"small":r<700.2?"medium":r<900.2?"large":"xlarge"}function Zu(){const r=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let l=0;l<8;l++)t=t&1?3988292384^t>>>1:t>>>1;r[e]=t}return r}function $u(r){let e=-1,t=Zu();for(let l=0;l<r.length;l++)e=t[(e^r[l])&255]^e>>>8;return e^-1}function ef(r,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const l=$u(t),o=new Uint8Array(4);o[0]=l>>>24,o[1]=l>>>16,o[2]=l>>>8,o[3]=l&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(r,0),c.set(a,33),c.set(t,37),c.set(o,50),c}function tf(r,e){const t=r.split(","),l=t[0],o=t[1],a=33/3*4,c=o.substring(0,a),d=o.substring(a),f=atob(c),u=new Uint8Array(f.length);for(let h=0;h<u.length;h++)u[h]=f.charCodeAt(h);const v=ef(u,e),m=btoa(String.fromCharCode(...v));return[l,",",m,d].join("")}function rf(r,e,t,l,o){if(t||(t=10),l||(l=10),o||(o=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(l<1||l>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!r||!(r instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=t/2.54*o,c=l/2.54*o;setTimeout(()=>{const d=r.clientHeight,f=r.clientWidth;let u=Math.max(a/f,c/d),v=1;u<1&&(v=u,u=1);const m=document.createElement("canvas"),h=m.getContext("2d");m.width=f*(v<1?v:u),m.height=d*(v<1?v:u),r.setAttribute("width",f*u),r.setAttribute("height",d*u),h.fillStyle="white",h.fillRect(0,0,m.width,m.height),h.scale(u,u);const g=new XMLSerializer().serializeToString(r),p=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),y=URL.createObjectURL(p),b=new Image;b.onload=function(){v<0&&(b.width=b.width*v,b.height=b.height*v),h.drawImage(b,0,0,m.width,m.height);const C=m.toDataURL("image/png"),A=tf(C,o),N=document.createElement("a");N.href=A,N.download=`${e}.png`,N.click()},b.src=y},20)}function nf(r,e){if(!r||!(r instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=r.clientHeight,l=r.clientWidth;r.setAttribute("width",l+"px"),r.setAttribute("height",t+"px"),r.setAttribute("viewBox",`0 0 ${l} ${t}`);const o=new Blob([r.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(o),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function sf(r,e,t,l){const o=r.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":lf(e,t,l)})]).then(()=>{r.classList.add("copied"),r.textContent="✓ done",setTimeout(()=>{r.classList.remove("copied"),r.textContent=o},500)},a=>{console.error(a),r.classList.add("error"),r.textContent="x copy",setTimeout(()=>{r.classList.remove("error"),r.textContent=o},500)}).catch(a=>console.error(a))}async function lf(r,e,t){const l=r.clientHeight,o=r.clientWidth,a=Math.max(e/o,t/l),c=document.createElement("canvas"),d=c.getContext("2d");return c.width=o*a,c.height=l*a,d.scale(a,a),r.setAttribute("width",c.width),r.setAttribute("height",c.height),await new Promise((u,v)=>{const m=new XMLSerializer().serializeToString(r),h=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,p=g.createObjectURL(h),y=new Image;y.onload=function(){d.drawImage(y,0,0,c.width,c.height),g.revokeObjectURL(p),c.toBlob(function(b){b?u(b):v(new Error("Failed to create blob"))},"image/png")},y.onerror=function(b){v(b)},y.src=p})}function fl(r,e){r>16&&(r=16);const t=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?t[r-1].map(l=>l+e):t[r-1]}function of(r,e,t,l,o){let a=o.ticks,c=o.tickLabels,d=0;const f=cl(a,r,Uu[t.x],!0,o.whole),u=f.length,v=pa([nl[t.plot]],l)[0],m=ye.fill(e[0],u),h=m.add(v),g=ye.fill(e[1],u);if(c||(a?(d=0,c=a.v.map(k=>Lr(k).toString())):[d,c]=al(f.v)),!c||c.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[f,m],[f,g]],y=[[Ge([r[0]]),Ge([e[0]])],[Ge([r[1]]),Ge([e[0]])]],b=[[f,h],[f,m]],C=(r[1]-r[0])*.01,A=[[null,null],[[r[1]-(d>9?1:0)*C],[m.v[u-1]]]],N=ol(d),E=c.length,w=Math.abs(r[1]>r[0]?r[1]-f.v[E-1]:r[1]-f.v[0]),T=Math.abs(r[1]-r[0]),S=Math.abs(f.v[1]-f.v[0]);if(N.length>0&&w<T*.1&&w<S*.5){const k=r[1]>r[0]?E-1:0;c[k]=" "}return{grid:p,axisLine:y,tickCoords:b,tfCoords:A,ticks:a,tickLabels:c,tickFactor:d,tfLabel:N}}function af(r,e,t,l,o){let a=o.ticks,c=o.tickLabels,d=0;const f=cl(o.ticks,e,Hu[t.y],!0,o.whole),u=f.length,v=pa([nl[t.plot]],l)[0],m=ye.fill(r[0],u),h=m.add(v),g=ye.fill(r[1],u);if(c||(a?(d=0,c=a.v.map(S=>Lr(S).toString())):[d,c]=al(f.v)),c.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[m,f],[g,f]],y=[[Ge([r[0]]),Ge([e[0]])],[Ge([r[0]]),Ge([e[1]])]],b=[[m,f],[h,f]],C=[[[],[]],[[h.v[u-1]+(Math.abs(d)>9?3:2)*v],[e[1]]]],A=ol(d),N=c.length,E=Math.abs(e[1]>e[0]?e[1]-f.v[N-1]:e[1]-f.v[0]),w=Math.abs(e[1]-e[0]),T=Math.abs(f.v[1]-f.v[0]);if(A.length>0&&E<w*.1&&E<T*.5){const S=e[1]>e[0]?N-1:0;c[S]=" "}return{grid:p,axisLine:y,tickCoords:b,tfCoords:C,ticks:a,tickLabels:c,tickFactor:d,tfLabel:A}}function cf(r){if(!r.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Te(r.breaks)?r.breaks.v:r.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!r.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(r.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(r.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=r.colmap;let l,o;if(r.labels?(l=r.labels,o=0):[o,l]=al(e),!(l.length===e.length-1||l.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=l.length===t.length;return{colmap:t,breaks:e,labels:l,isCentered:a,labelsFactor:o,fontSize:r.fontSize,labelColor:r.labelColor}}function uf(r,e,t,l){const o=r.colmap.length,a=e*Ku,c=a/o,d=t[1]+(e-a)*.5,f=Xu[l.y],u=t[2]+f*va,v=u+f*(1+va),m=r.isCentered?c/2:0;return{start:d,top:u,height:f,width:c,dxl:m,ltop:v}}function Rr(r,e,t){if(!r||!e||!t||typeof t!="function")return;const l=r.target;if(l.tagName===e){const o=Array.prototype.indexOf.call(l.parentNode.children,l);if(o<0)return;t(o),r.stopPropagation()}}function ff(r,e){const l=document.createElement("canvas").getContext("2d");return l.font=e,l.measureText(r.replace(/<(.|\n)*?>/g,"")).width}function vf(r,e){const t="Arial",l=e/8,o=e*1.5,a=Array(r.length),c=Array(r.length);let d=0,f=0,u=0;for(let m=0;m<r.length;m++){const h=ff("  "+r[m].label+"  ",e+"px "+t);u=h>u?h:u;const g=e*r[m].labelHeight+2*l;a[m]=g,c[m]=d,d=d+g,f=f+g}const v=o+2*l+u;return[c,a,o,l,f,v]}function df(r,e,t,l,o){const[a,c,d,f,u,v]=vf(r.items,l*r.fontSize),m=r.position.includes("left")?e[0]+o:r.position.includes("right")?e[1]-v-o:(e[1]+e[0]-v)*.5,h=r.position.includes("top")?t[1]+o:r.position.includes("bottom")?t[0]-u-o:(t[1]+t[0]-u)*.5;return{lgl:m,lgt:h,lgw:v,lgh:u,ely:a,elh:c,elw:d,elp:f}}function En(r){if(!r||r.length<1)return r;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function t(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let l=0,o="";for(;l<r.length;){const a=r[l];if((a==="^"||a==="_")&&l<r.length-1){const c=a==="^";if(l++,r[l]==="("){let d=l+1;for(;d<r.length&&r[d]!==")";)d++;const f=r.slice(l+1,d);o+=c?e(f):t(f),l=d+1}else if(r[l]==="-"||r[l]==="–"){const d=r.slice(l,l+2);o+=c?e(d):t(d),l=l+2}else o+=c?e(r[l]):t(r[l]),l++}else o+=a,l++}return o}var mf=pe('<line vector-effect="non-scaling-stroke"></line>'),hf=pe("<g></g>");function vl(r,e){ve(e,!0);let t=G(e,"lineCoords",19,()=>[]),l=G(e,"lineColor",19,()=>gt.DARKGRAY),o=G(e,"lineType",3,1),a=G(e,"lineWidth",3,1),c=G(e,"className",3,"");const d=Nt("axes");let f=_(()=>lt(t()[0][0],d.tX())),u=_(()=>lt(t()[1][0],d.tX())),v=_(()=>lt(t()[0][1],d.tY())),m=_(()=>lt(t()[1][1],d.tY())),h=_(()=>`stroke:${l()};stroke-width: ${a()}px;stroke-dasharray:${xn[d.scales().plot][o()-1]}`);var g=ge(),p=Z(g);{var y=b=>{var C=hf();Ie(C,21,()=>s(f),qe,(A,N,E)=>{var w=mf();ne(()=>{q(w,"x1",s(f)[E]),q(w,"x2",s(u)[E]),q(w,"y1",s(v)[E]),q(w,"y2",s(m)[E]),st(w,s(h))}),P(A,w)}),ne(()=>ht(C,0,nc(c()))),P(b,C)};X(p,b=>{s(f)&&s(v)&&s(u)&&b(y)})}P(r,g),de()}var gf=pe('<text text-anchor="middle"><!></text>'),pf=pe("<text><!></text>"),bf=pe("<text><!></text>"),yf=pe('<g class="tick-labels"><!></g>');function _a(r,e){ve(e,!0);let t=G(e,"pos",3,1),l=G(e,"las",3,1),o=_(()=>["middle","middle","start","middle","end"][t()]),a=_(()=>`fill:${e.textColor};`);const c=Nt("axes");let d=_(()=>lt(e.tickCoords[1][0],c.tX())),f=_(()=>lt(e.tickCoords[1][1],c.tY())),u=_(()=>sl[c.scales().plot]),v=_(()=>[0,0,s(u),0,-s(u)][t()]),m=_(()=>[0,s(u),0,-s(u),0][t()]);var h=yf(),g=L(h);{var p=b=>{var C=ge(),A=Z(C);Ie(A,17,()=>s(d),qe,(N,E,w)=>{var T=gf();q(T,"data-id",w),q(T,"dx",0);var S=L(T);xt(S,()=>e.tickLabels[w],!0,!1),ne(()=>{q(T,"x",s(d)[w]),q(T,"y",s(f)[w]),q(T,"dy",s(v)*1.25),q(T,"transform",`rotate(-90, ${s(d)[w]}, ${s(f)[w]})`)}),P(N,T)}),P(b,C)},y=(b,C)=>{{var A=E=>{var w=ge(),T=Z(w);Ie(T,17,()=>s(d),qe,(S,k,z)=>{var j=pf();q(j,"data-id",z),q(j,"dy",0),q(j,"text-anchor","end");var R=L(j);xt(R,()=>e.tickLabels[z],!0,!1),ne(()=>{q(j,"x",s(d)[z]),q(j,"y",s(f)[z]),q(j,"dx",-s(m)/2),q(j,"transform",`rotate(-90, ${s(d)[z]}, ${s(f)[z]})`)}),P(S,j)}),P(E,w)},N=E=>{var w=ge(),T=Z(w);Ie(T,17,()=>s(d),qe,(S,k,z)=>{var j=bf();q(j,"data-id",z);var R=L(j);xt(R,()=>e.tickLabels[z],!0,!1),ne(()=>{q(j,"x",s(d)[z]),q(j,"y",s(f)[z]),q(j,"dx",s(v)),q(j,"dy",s(m)),q(j,"text-anchor",s(o))}),P(S,j)}),P(E,w)};X(b,E=>{l()===2&&t()===1?E(A):E(N,!1)},C)}};X(g,b=>{l()===2&&t()===4?b(p):b(y,!1)})}ne(()=>st(h,s(a))),P(r,h),de()}const wf=(r,e=mt,t=mt)=>{var l=Sf();_(()=>t().height*1.25);const o=_(()=>e().colmap.length);var a=Z(l);Ie(a,17,()=>e().colmap,qe,(v,m,h)=>{var g=Ef();const p=_(()=>t().start+h*t().width);var y=Z(g),b=I(y);q(b,"dy",0);var C=L(b);xt(C,()=>e().labels[h],!0,!1),ne(()=>{q(y,"x",s(p)),q(y,"y",t().top),q(y,"width",t().width),q(y,"height",t().height),q(y,"fill",s(m)),q(b,"x",s(p)),q(b,"y",t().ltop),q(b,"dx",t().dxl),q(b,"fill",e().labelColor),q(b,"font-size",e().fontSize+"em")}),P(v,g)});var c=I(a);{var d=v=>{var m=Cf();const h=_(()=>t().start+s(o)*t().width);q(m,"dx",0),q(m,"dy",0);var g=L(m);xt(g,()=>e().labels[s(o)],!0,!1),ne(()=>{q(m,"x",s(h)),q(m,"y",t().ltop),q(m,"fill",e().labelColor),q(m,"font-size",`${e().fontSize??""}em`)}),P(v,m)};X(c,v=>{e().isCentered||v(d)})}var f=I(c);{var u=v=>{var m=Af();const h=_(()=>t().start+s(o)*t().width);var g=L(m);xt(g,()=>ol(e().labelsFactor),!0,!1),ne(()=>{q(m,"x",s(h)),q(m,"y",t().ltop),q(m,"fill",e().labelColor),q(m,"font-size",`${e().fontSize??""}em`)}),P(v,m)};X(f,v=>{e().labelsFactor!==0&&v(u)})}P(r,l)};function xa(r,e,t){e(r,t())}function ka(r,e,t){e(r,t())}function Ea(r,e,t){e(r,t())}function rs(r,e,t){e(r,t())}async function Ca(r,e,t,l){sf(r.target,s(e),t(),l())}function Aa(r,e,t){nf(s(e),t())}function Sa(r,e,t,l,o,a){rf(s(e),t(),l(),o(),a())}var _f=pe('<text fill="crimson" text-anchor="middle"> </text>'),xf=pe('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),kf=pe("<!><!><!><!><!>",1),Ef=pe('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Cf=pe('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Af=pe('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Sf=pe("<!><!><!>",1),Nf=pe("<line></line>"),Mf=pe('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Tf=pe('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),zf=pe('<svg><rect height="100%" width="100%"></rect><!></svg>'),Pf=pe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),If=pe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Lf=pe('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Rf=pe('<g class="plot-labels"><!><!><!></g>'),jf=pe('<g class="axis x-axis"><!></g>'),qf=pe('<g class="axis y-axis"><!></g>'),Ff=pe('<rect fill="transparent" id="axes-box"></rect>'),Df=pe('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Of=pe('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Vf=pe('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Bf=pe('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Yf=Q('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),Wf=Q('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Uf=Q(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Hf(r,e){ve(e,!0);const t=(Ee,Pe=mt,ze=mt)=>{var ot=ge(),Et=Z(ot);{var er=Pt=>{var Ye=ge(),Le=Z(Ye);{var pt=at=>{var Qe=_f(),Ht=L(Qe);ne(()=>{q(Qe,"x",s(se)[0]-10),q(Qe,"y",s(ee)),q(Qe,"transform",`rotate(-90, ${s(se)[0]-10}, ${s(ee)})`),ce(Ht,ze().error)}),P(at,Qe)},dt=at=>{var Qe=xf(),Ht=L(Qe);ne(()=>{q(Qe,"x",s(te)),q(Qe,"y",s(le)[0]),ce(Ht,ze().error)}),P(at,Qe)};X(Le,at=>{ze().pos===4?at(pt):at(dt,!1)})}P(Pt,Ye)},zt=Pt=>{var Ye=kf(),Le=Z(Ye);{var pt=we=>{vl(we,{get lineCoords(){return Pe().grid},get lineColor(){return gt.MIDDLEGRAY},lineType:3})};X(Le,we=>{ze().showGrid&&we(pt)})}var dt=I(Le);vl(dt,{get lineCoords(){return Pe().axisLine},get lineColor(){return gt.DARKGRAY},lineType:1});var at=I(dt);vl(at,{get lineCoords(){return Pe().tickCoords},get lineColor(){return gt.DARKGRAY},lineType:1});var Qe=I(at);{var Ht=we=>{_a(we,{get las(){return ze().las},get pos(){return ze().pos},get tickCoords(){return Pe().tickCoords},get tickLabels(){return Pe().tickLabels},get tickColor(){return gt.DARKGRAY},get hideLast(){return ze().hideLast}})};X(Qe,we=>{Pe().tickCoords.length===2&&Pe().tickLabels.length===Pe().tickCoords[1][0].length&&we(Ht)})}var ct=I(Qe);{var Oe=we=>{const wt=_(()=>[Pe().tfLabel]);_a(we,{get pos(){return ze().pos},get tickCoords(){return Pe().tfCoords},get tickLabels(){return s(wt)},get textColor(){return gt.DARKGRAY}})};X(ct,we=>{Pe().tickFactor!==0&&we(Oe)})}P(Pt,Ye)};X(Et,Pt=>{ze().error?Pt(er):Pt(zt,!1)})}P(Ee,ot)},l=(Ee,Pe=mt,ze=mt)=>{var ot=zf();const Et=_(()=>ze().elw+2*ze().elp),er=_(()=>ze().elp),zt=_(()=>ze().elh),Pt=_(()=>ze().ely);var Ye=L(ot),Le=I(Ye);Ie(Le,17,()=>Pe().items,qe,(pt,dt,at)=>{var Qe=Tf();q(Qe,"x",0);var Ht=L(Qe);{var ct=tr=>{var U=Nf();ne(()=>{q(U,"x1",s(er)),q(U,"x2",s(Et)-s(er)),q(U,"y1",s(zt)[at]/2),q(U,"y2",s(zt)[at]/2),q(U,"stroke",s(dt).line.lineColor),q(U,"stroke-width",s(dt).line.lineWidth),q(U,"stroke-dasharray",s(R)[s(dt).line.lineType-1])}),P(tr,U)};X(Ht,tr=>{s(dt).line&&tr(ct)})}var Oe=I(Ht);{var we=tr=>{var U=Mf(),$=L(U);ne(()=>{q(U,"x",s(Et)/2),q(U,"y",s(zt)[at]/2),q(U,"fill",s(dt).point.faceColor),q(U,"stroke-width",s(dt).point.lineWidth),q(U,"stroke",s(dt).point.lineColor),q(U,"font-size",s(z)),ce($,kn[s(dt).point.marker-1])}),P(tr,U)};X(Oe,tr=>{s(dt).point&&tr(we)})}var wt=I(Oe),Pl=L(wt);xt(Pl,()=>s(dt).label,!0,!1),ne(()=>{q(Qe,"y",s(Pt)[at]),q(Qe,"width",ze().lgw),q(Qe,"height",s(zt)[at]),q(wt,"x",s(Et)+s(er)),q(wt,"y",s(zt)[at]/2),q(wt,"fill",gt.LEGEND),q(wt,"font-size",`${Pe().fontSize??""}em`)}),P(pt,Qe)}),ne(()=>{q(ot,"x",ze().lgl),q(ot,"y",ze().lgt),q(ot,"height",ze().lgh),q(ot,"width",ze().lgw),q(Ye,"fill",Pe().faceColor),q(Ye,"stroke",Pe().lineColor),q(Ye,"stroke-width",Pe().lineWidth)}),P(Ee,ot)};let o=G(e,"limX",19,()=>[0,1]),a=G(e,"limY",19,()=>[0,1]),c=G(e,"margins",19,()=>[1,1.1,.55,.6]),d=G(e,"downloadLinks",3,"none"),f=G(e,"fileName",3,"plot"),u=G(e,"pngWidth",3,8),v=G(e,"pngHeight",3,8),m=G(e,"pngRes",3,300),h=G(e,"clipboardWidth",3,1200),g=G(e,"clipboardHeight",3,800),p=G(e,"onclick",3,null),y=G(e,"onmousemove",3,null),b=G(e,"onmousedown",3,null),C=G(e,"onmouseup",3,null);function A(Ee,Pe){if(Pe&&Ee.target.id=="axes-box"){const ze=ga([Ee.offsetX-s(B)],s(D))[0],ot=ga([Ee.offsetY-s(K)],s(J))[0];Pe(ze,ot)}}const N="plottingArea"+Math.round(Math.random()*1e4);let E=re(0),w=re(0),T=re(0);const S=_(()=>({plot:Qu(s(w),s(T)),x:wa(s(w)),y:wa(s(T))})),k=_(()=>c().map(Ee=>Ee*Wu[s(S).plot])),z=_(()=>Gu[s(S).plot]),j=_(()=>nl[s(S).plot]),R=_(()=>xn[s(S).plot]),Y=_(()=>s(be).show&&s(be).label!==""?s(z)*1.5:0),B=_(()=>s(ae).show&&s(ae).label!==""?s(z)*1.5:0),K=_(()=>e.title&&e.title!==""?s(z)*1.5:0),F=_(()=>s(w)>s(B)?s(w)-s(B):0),M=_(()=>s(T)>s(Y)+s(K)?s(T)-s(Y)-s(K):0),W=_(()=>s(M)-s(k)[0]-s(k)[2]),V=_(()=>s(F)-s(k)[1]-s(k)[3]),O=_(()=>da(o(),2)&&da(a(),2)&&s(F)>s(k)[1]+s(k)[3]&&s(M)>s(k)[0]+s(k)[2]),D=_(()=>s(O)?{coords:[s(V)/(o()[1]-o()[0]),o()[0],s(k)[1]],objects:[s(V)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),J=_(()=>s(O)?{coords:[-s(W)/(a()[1]-a()[0]),a()[1],s(k)[2]],objects:[s(W)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ee=_(()=>s(W)*.5+s(K)+s(k)[2]),te=_(()=>s(V)*.5+s(B)+s(k)[1]),se=_(()=>s(O)?lt(o(),s(D)):[0,1]),le=_(()=>s(O)?lt(a(),s(J)):[1,0]),fe=_(()=>En(e.title)),he=_(()=>s(fe)?s(fe).length===e.title.left?1:1.4:0);let Ce=re(Ue({show:!1})),be=re(Ue({show:!1,error:""})),ae=re(Ue({show:!1,error:""})),ie=re(Ue({show:!1,colmap:null,breaks:null})),oe=re(Ue({show:!1,items:null,position:null}));const Me=_(()=>s(O)&&s(ie)&&s(ie).show?cf(s(ie)):null),_e=_(()=>s(O)&&s(be).show?of(o(),a(),s(S),s(J),s(be)):null),Ae=_(()=>s(O)&&s(ae).show?af(o(),a(),s(S),s(D),s(ae)):null),ke=_(()=>s(O)&&s(Me)?uf(s(Me),s(V),s(k),s(S)):null),nt=_(()=>s(O)&&s(oe)&&s(oe).show&&s(se)?df(s(oe),s(se),s(le),s(z),s(j)):null);xi("axes",{setBox:Ee=>H(Ce,Ee,!0),setXAxis:Ee=>H(be,Ee,!0),setYAxis:Ee=>H(ae,Ee,!0),setColmapLegend:Ee=>H(ie,Ee,!0),setGroupLegend:Ee=>H(oe,Ee,!0),scales:()=>s(S),tX:()=>s(D),tY:()=>s(J),limX:()=>o(),limY:()=>a()});var kt=Uf();let yt;var Ve=L(kt),Je=I(L(Ve));{var Cr=Ee=>{var Pe=Rf(),ze=L(Pe);{var ot=Ye=>{var Le=Pf();q(Le,"dx",0),q(Le,"dy",0);var pt=L(Le);xt(pt,()=>s(be).label,!0,!1),ne(()=>{q(Le,"x",s(te)),q(Le,"y",s(M)+s(K))}),P(Ye,Le)};X(ze,Ye=>{s(be).show&&s(be).label&&s(be).label!==""&&Ye(ot)})}var Et=I(ze);{var er=Ye=>{var Le=If();q(Le,"dx",0),q(Le,"dy",0);var pt=L(Le);xt(pt,()=>s(ae).label,!0,!1),ne(()=>{q(Le,"x",s(z)/1.1*s(ae).labelHeight),q(Le,"y",s(ee)),q(Le,"transform",`rotate(-90, ${s(z)*s(ae).labelHeight/1.1}, ${s(ee)})`)}),P(Ye,Le)};X(Et,Ye=>{s(ae).show&&s(ae).label&&s(ae).label!==""&&Ye(er)})}var zt=I(Et);{var Pt=Ye=>{var Le=Lf();q(Le,"dx",0),q(Le,"dy",0);var pt=L(Le);xt(pt,()=>s(fe),!0,!1),ne(()=>{q(Le,"x",s(te)),q(Le,"y",s(z)*s(he))}),P(Ye,Le)};X(zt,Ye=>{s(fe)&&s(fe)!==""&&Ye(Pt)})}P(Ee,Pe)};X(Je,Ee=>{s(O)&&Ee(Cr)})}var Ar=I(Je),us=L(Ar),fs=L(us);q(fs,"id",N);var ln=L(fs),Sl=I(us);{var Nl=Ee=>{var Pe=Bf(),ze=Z(Pe);{var ot=Oe=>{var we=jf(),wt=L(we);t(wt,()=>s(_e),()=>s(be)),P(Oe,we)};X(ze,Oe=>{s(be).show&&s(_e)&&Oe(ot)})}var Et=I(ze);{var er=Oe=>{var we=qf(),wt=L(we);t(wt,()=>s(Ae),()=>s(ae)),P(Oe,we)};X(Et,Oe=>{s(ae).show&&s(Ae)&&Oe(er)})}var zt=I(Et),Pt=L(zt);{var Ye=Oe=>{var we=Ff();we.__keydown=[rs,A,p],we.__click=[rs,A,p],we.__mousemove=[Ea,A,y],we.__mousedown=[xa,A,b],we.__mouseup=[ka,A,C],ne(()=>{q(we,"stroke",s(Ce).lineColor),q(we,"stroke-width",`${s(Ce).lineWidth??""}px`),q(we,"x",s(se)[0]),q(we,"y",s(le)[1]),q(we,"width",s(se)[1]-s(se)[0]),q(we,"height",s(le)[0]-s(le)[1])}),P(Oe,we)},Le=Oe=>{var we=Df();we.__keydown=[rs,A,p],we.__click=[rs,A,p],we.__mousemove=[Ea,A,y],we.__mousedown=[xa,A,b],we.__mouseup=[ka,A,C],ne(()=>{q(we,"x",s(se)[0]),q(we,"y",s(le)[1]),q(we,"width",s(se)[1]-s(se)[0]),q(we,"height",s(le)[0]-s(le)[1])}),P(Oe,we)};X(Pt,Oe=>{s(Ce).show?Oe(Ye):Oe(Le,!1)})}var pt=I(zt);q(pt,"clip-path",`url(#${N??""})`);var dt=L(pt);zr(dt,()=>e.children??mt);var at=I(pt);{var Qe=Oe=>{var we=Of(),wt=L(we);wf(wt,()=>s(Me),()=>s(ke)),P(Oe,we)};X(at,Oe=>{s(ke)&&Oe(Qe)})}var Ht=I(at);{var ct=Oe=>{var we=Vf(),wt=L(we);l(wt,()=>s(oe),()=>s(nt)),P(Oe,we)};X(Ht,Oe=>{s(nt)&&Oe(ct)})}P(Ee,Pe)};X(Sl,Ee=>{s(O)&&Ee(Nl)})}Zr(Ve,Ee=>H(E,Ee),()=>s(E));var Ml=I(Ve,2);{var Tl=Ee=>{var Pe=Yf();P(Ee,Pe)},zl=Ee=>{var Pe=Wf(),ze=L(Pe);ze.__click=[Aa,E,f],ze.__keydown=[Aa,E,f];var ot=I(ze,2);ot.__click=[Sa,E,f,u,v,m],ot.__keydown=[Sa,E,f,u,v,m];var Et=I(ot,2);Et.__click=[Ca,E,h,g],Et.__keydown=[Ca,E,h,g],P(Ee,Pe)};X(Ml,Ee=>{s(O)?Ee(zl,!1):Ee(Tl)})}ne(Ee=>{yt=ht(kt,1,`plot-container show-download-links-${d()??""}`,"svelte-1jtdxd0",yt,Ee),st(Ve,`font-size:${s(z)??""}px`),q(Ar,"x",s(B)),q(Ar,"y",s(K)),q(Ar,"width",s(F)),q(Ar,"height",s(M)),q(ln,"x",s(se)[0]),q(ln,"y",s(le)[1]),q(ln,"width",s(se)[1]-s(se)[0]),q(ln,"height",s(le)[0]-s(le)[1])},[()=>({"plot-error":!s(O)})]),So(Ve,"clientWidth",Ee=>H(w,Ee)),So(Ve,"clientHeight",Ee=>H(T,Ee)),P(r,kt),de()}et(["keydown","click","mousemove","mousedown","mouseup"]);function Gf(r,e){ve(e,!0);let t=G(e,"tickLabels",7),l=G(e,"las",3,1),o=G(e,"whole",3,!1),a=G(e,"show",3,!0),c=G(e,"showGrid",3,!1);const d=Nt("axes");ue(()=>{const f=En(e.label),u=f?f.length===e.label.length?1:1.4:0;let v,m="";e.ticks&&([v,m]=ya(e.ticks,d.limX())),!m&&t()&&(h=>(t(h[0]),m=h[1]))(ba(t(),v)),d.setXAxis({show:a(),error:m,label:f,ticks:v,labelHeight:u,showGrid:c(),las:l(),whole:o(),tickLabels:t()})}),de()}function Kf(r,e){ve(e,!0);let t=G(e,"tickLabels",7),l=G(e,"las",3,1),o=G(e,"whole",3,!1),a=G(e,"show",3,!0),c=G(e,"showGrid",3,!1);const d=Nt("axes");ue(()=>{const f=En(e.label),u=f?f.length===e.label.length?1:1.4:0;let v,m="";e.ticks&&([v,m]=ya(e.ticks,d.limY())),!m&&t()&&(h=>(t(h[0]),m=h[1]))(ba(t(),v)),d.setYAxis({show:a(),error:m,label:f,ticks:v,labelHeight:u,showGrid:c(),las:l(),whole:o(),tickLabels:t(),pos:4})}),de()}function Xf(r,e){ve(e,!0);let t=G(e,"lineWidth",3,1),l=G(e,"lineColor",3,"#606060");const o=Nt("axes");ue(()=>{o.setBox({show:!0,lineWidth:t(),lineColor:l()})}),de()}var Jf=(r,e)=>Rr(r,"rect",e.onclick),Qf=pe("<rect></rect>"),Zf=pe("<g></g>");function dl(r,e){ve(e,!0);let t=G(e,"faceColor",19,()=>gt.PRIMARY),l=G(e,"lineColor",19,t),o=G(e,"lineWidth",3,1),a=G(e,"className",3,"series-rect");const c=_(()=>St(e.left,"Rectangles (left)")),d=_(()=>s(c)?St(e.top,"Rectangles (top)",s(c).length):null),f=_(()=>s(d)?typeof e.width!="object"?ye.fill(e.width,s(c).length):e.width:null),u=_(()=>s(d)?typeof e.height!="object"?ye.fill(e.height,s(c).length):e.height:null),v=Nt("axes"),m=_(()=>s(c)?lt(s(c),v.tX()):null),h=_(()=>s(d)?lt(s(d),v.tY()):null),g=_(()=>s(f)?ll(s(f),v.tX()):null),p=_(()=>s(u)?ll(s(u),v.tY()):null),y=_(()=>`fill:${t()};stroke:${l()};stroke-width:${o()}px;`),b=_(()=>s(m)&&s(h)&&s(g)&&s(p)&&s(g).length===s(m).length&&s(p).length===s(m).length);var C=ge(),A=Z(C);{var N=E=>{var w=Zf();w.__click=[Jf,e],Ie(w,21,()=>e.left,qe,(T,S,k)=>{var z=Qf();ne(()=>{q(z,"x",s(m)[k]),q(z,"y",s(h)[k]),q(z,"width",s(g)[k]),q(z,"height",s(p)[k])}),P(T,z)}),ne(()=>{ht(w,0,`series ${a()??""}`),st(w,s(y))}),P(E,w)};X(A,E=>{s(b)&&E(N)})}P(r,C),de()}et(["click"]);var $f=(r,e)=>Rr(r,"line",e.onclick),ev=pe("<line></line>"),tv=pe('<g class="series series-segment"></g>');function Zt(r,e){ve(e,!0);let t=G(e,"lineColor",19,()=>gt.PRIMARY),l=G(e,"lineType",3,1),o=G(e,"lineWidth",3,1);const a=_(()=>St(e.xStart,"Segments")),c=_(()=>s(a)?St(e.yStart,"Segments",s(a).length):null),d=_(()=>s(c)?St(e.xEnd,"Segments",s(a).length):null),f=_(()=>s(d)?St(e.yEnd,"Segments",s(a).length):null),u=Nt("axes"),v=_(()=>s(a)?lt(s(a),u.tX()):null),m=_(()=>s(d)?lt(s(d),u.tX()):null),h=_(()=>s(c)?lt(s(c),u.tY()):null),g=_(()=>s(f)?lt(s(f),u.tY()):null),p=_(()=>`stroke:${t()};stroke-width: ${o()}px;stroke-dasharray:${xn[u.scales().plot][l()-1]}`),y=_(()=>s(v)&&s(m)&&s(h)&&s(g));var b=ge(),C=Z(b);{var A=N=>{var E=tv();E.__click=[$f,e],Ie(E,21,()=>s(v),qe,(w,T,S)=>{var k=ev();ne(()=>{q(k,"x1",s(v)[S]),q(k,"x2",s(m)[S]),q(k,"y1",s(h)[S]),q(k,"y2",s(g)[S])}),P(w,k)}),ne(()=>st(E,s(p))),P(N,E)};X(C,N=>{s(y)&&N(A)})}P(r,b),de()}et(["click"]);var rv=(r,e)=>Rr(r,"text",e.onclick),nv=pe("<text><!></text>"),sv=pe("<text><!></text>"),lv=pe("<text><!></text>"),ov=pe('<g class="series series-textlabels"><!></g>');function av(r,e){ve(e,!0);let t=G(e,"pos",3,0),l=G(e,"faceColor",19,()=>gt.PRIMARY_TEXT),o=G(e,"lineColor",3,"transparent"),a=G(e,"lineWidth",3,0),c=G(e,"textSize",3,1),d=G(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],u=_(()=>St(e.xValues,"TextLabels")),v=_(()=>s(u)?St(e.yValues,"TextLabels",s(u).length):null),m=_(()=>s(v)?Array.isArray(e.labels)&&e.labels.length!==s(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=_(()=>s(m)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),g=Nt("axes"),p=_(()=>s(u)&&s(h)!==null?lt(s(u),g.tX()):null),y=_(()=>s(v)&&s(p)?lt(s(v),g.tY()):null),b=_(()=>sl[g.scales().plot]),C=_(()=>[0,0,-s(b),0,s(b),s(b)]),A=_(()=>[0,s(b),0,-s(b),0,s(b)]),N=_(()=>`fill:${l()};stroke-width:${a()}px;stroke:${o()};font-size:${c()}em;`),E=_(()=>s(p)&&s(y)&&s(h)!==null&&s(m)&&s(p).length===s(y).length);var w=ge(),T=Z(w);{var S=k=>{var z=ov();z.__click=[rv,e];var j=L(z);{var R=B=>{var K=ge(),F=Z(K);Ie(F,17,()=>s(p),qe,(M,W,V)=>{var O=nv();q(O,"data-id",V);var D=L(O);xt(D,()=>e.labels,!0,!1),ne(()=>{q(O,"x",s(p)[V]),q(O,"y",s(y)[V]),q(O,"dx",s(C)[t()]),q(O,"dy",s(A)[t()]),q(O,"transform",d()!==void 0?`rotate(${d()}, ${s(p)[V]+s(C)[t()]}, ${s(y)[V]+s(A)[t()]})`:""),q(O,"text-anchor",f[t()[V]])}),P(M,O)}),P(B,K)},Y=(B,K)=>{{var F=W=>{var V=ge(),O=Z(V);Ie(O,17,()=>s(p),qe,(D,J,ee)=>{var te=sv();q(te,"data-id",ee);var se=L(te);xt(se,()=>e.labels[ee],!0,!1),ne(()=>{q(te,"x",s(p)[ee]),q(te,"y",s(y)[ee]),q(te,"dx",s(C)[t()[ee]]),q(te,"dy",s(A)[t()[ee]]),q(te,"transform",d()!==void 0?`rotate(${d()}, ${s(p)[ee]+s(C)[t()]}, ${s(y)[ee]+s(A)[t()]})`:""),q(te,"text-anchor",f[t()[ee]])}),P(D,te)}),P(W,V)},M=W=>{var V=ge(),O=Z(V);Ie(O,17,()=>s(p),qe,(D,J,ee)=>{var te=lv();q(te,"data-id",ee);var se=L(te);xt(se,()=>e.labels[ee],!0,!1),ne(()=>{q(te,"x",s(p)[ee]),q(te,"y",s(y)[ee]),q(te,"dx",s(C)[t()]),q(te,"dy",s(A)[t()]),q(te,"transform",d()!==void 0?`rotate(${d()}, ${s(p)[ee]+s(C)[t()]}, ${s(y)[ee]+s(A)[t()]})`:""),q(te,"text-anchor",f[t()])}),P(D,te)}),P(W,V)};X(B,W=>{Array.isArray(t())||ArrayBuffer.isView(t())?W(F):W(M,!1)},K)}};X(j,B=>{typeof e.labels=="string"?B(R):B(Y,!1)})}ne(()=>st(z,s(N))),P(k,z)};X(T,k=>{s(E)&&k(S)})}P(r,w),de()}et(["click"]),et(["click"]);var iv=(r,e)=>Rr(r,"text",e.onclick),cv=pe("<text> </text>"),uv=pe('<g text-anchor="middle"></g>');function Na(r,e){ve(e,!0);let t=G(e,"marker",3,1),l=G(e,"faceColor",3,"transparent"),o=G(e,"lineColor",19,()=>gt.PRIMARY),a=G(e,"lineWidth",3,1),c=G(e,"markerSize",3,1);const d=_(()=>typeof t()!="number"||t()<1||t()>kn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+kn.length+"."),null):kn[t()-1]),f=_(()=>St(e.xValues,"Points")),u=_(()=>s(f)?St(e.yValues,"Points",s(f).length):null),v=Nt("axes"),m=_(()=>s(f)?lt(s(f),v.tX()):null),h=_(()=>s(m)&&s(u)?lt(s(u),v.tY()):null),g=_(()=>["＋","✳","✕"].includes(s(d))?`fill:${o()&&o()!=="transparent"?o():l()};stroke-width:0px;font-size:${c()}em;`:`fill:${l()};stroke-width:${a()}px;stroke:${o()}; font-size:${c()}em;`),p=_(()=>["◼","⬥","＋","✳","✕"].includes(s(d))?"series-points2":"series-points1"),y=_(()=>s(m)&&s(h)&&s(m).length===s(h).length);var b=ge(),C=Z(b);{var A=N=>{var E=uv();E.__click=[iv,e],Ie(E,21,()=>s(m),qe,(w,T,S)=>{var k=cv(),z=L(k);ne(()=>{q(k,"x",s(m)[S]),q(k,"y",s(h)[S]),ce(z,s(d))}),P(w,k)}),ne(()=>{ht(E,0,`series series-points ${s(p)??""}`),st(E,s(g))}),P(N,E)};X(C,N=>{s(y)&&N(A)})}P(r,b),de()}et(["click"]);var fv=(r,e)=>Rr(r,"polyline",e.onclick),vv=pe('<g class="series series-line"><polyline class="line"></polyline></g>');function Ut(r,e){ve(e,!0);let t=G(e,"lineColor",19,()=>gt.PRIMARY),l=G(e,"lineType",3,1),o=G(e,"lineWidth",3,1);const a=_(()=>St(e.xValues,"Lines")),c=_(()=>s(a)?St(e.yValues,"Lines",s(a).length):null),d=Nt("axes"),f=_(()=>s(a)&&s(c)?il(s(a),s(c),d.tX(),d.tY()):null),u=_(()=>`fill:transparent;stroke:${t()};stroke-width: ${o()}px; stroke-dasharray:${xn[d.scales().plot][l()-1]}`);var v=ge(),m=Z(v);{var h=g=>{var p=vv();p.__click=[fv,e];var y=L(p);ne(()=>{st(p,s(u)),q(y,"points",s(f))}),P(g,p)};X(m,g=>{s(f)&&g(h)})}P(r,v),de()}et(["click"]);var dv=(r,e)=>Rr(r,"polyline",e.onclick),mv=pe('<polyline class="line"></polyline>'),hv=pe('<g class="series series-multiline"></g>');function gv(r,e){ve(e,!0);let t=G(e,"lineColor",19,()=>gt.PRIMARY),l=G(e,"lineType",3,1),o=G(e,"lineWidth",3,1);const a=_(()=>St(e.xValues,"Multilines")),c=_(()=>s(a)?dr(e.yValues)?(s(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),d=Nt("axes"),f=_(()=>{if(!s(a)||!s(c))return null;const g=new Array(s(c).ncols);for(let p=0;p<g.length;p++)g[p]=il(s(a),s(c).getcolumn(p+1),d.tX(),d.tY());return g}),u=_(()=>`fill:transparent;stroke:${t()};stroke-width: ${o()}px; stroke-dasharray:${xn[d.scales().plot][l()-1]}`);var v=ge(),m=Z(v);{var h=g=>{var p=hv();p.__click=[dv,e],Ie(p,21,()=>s(f),qe,(y,b)=>{var C=mv();ne(()=>q(C,"points",s(b))),P(y,C)}),ne(()=>st(p,s(u))),P(g,p)};X(m,g=>{s(f)&&s(f).length>0&&g(h)})}P(r,v),de()}et(["click"]);function nn(r,e){ve(e,!0);let t=G(e,"show",3,!0),l=G(e,"position",3,"topleft"),o=G(e,"lineColor",19,()=>gt.LEGEND),a=G(e,"lineWidth",3,1),c=G(e,"faceColor",3,"#fff"),d=G(e,"fontSize",3,.85);function f(m){return typeof m!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(m)?m:(console.error('Legend: wrong value of "position" property'),null)}function u(m){if(!m||!Array.isArray(m)||m.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let h=0;h<m.length;h++){const g=m[h];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=En(g.label),y=p.length===g.label?1:1.4;g.label=p,g.labelHeight=y,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(h+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:gt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=kn.length||console.error('Legend: parameter "marker" for legend item '+(h+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:gt.PRIMARY)}return m}const v=Nt("axes");ue(()=>{const m=u(e.items),h=f(l());v.setGroupLegend(m&&h?{show:t(),position:l(),items:e.items,lineColor:o(),faceColor:c(),lineWidth:a(),fontSize:d()}:{show:!1,position:null,items:null})}),de()}function Ma(r,e){ve(e,!0);let t=G(e,"show",3,!0),l=G(e,"labels",3,null),o=G(e,"labelColor",19,()=>gt.CLEGEND_LABELS),a=G(e,"fontSize",3,.85);const c=Nt("axes");ue(()=>{c.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:l(),labelColor:o(),fontSize:a()})}),de()}function pv(r,e,t,l){e===void 0&&(e=!0),t===void 0&&(t=!1),l===void 0&&(l=!1);function o(f,u,v,m){if(typeof u=="boolean")return u?f.apply(v,2):Ge([m]).rep(f.ncols);if(!Te(u))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(u.length!==f.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return u}const a=o(r,e,gn,0),c=o(r,t,Fs,1),d=Wt.zeros(r.nrows,r.ncols);for(let f=1;f<=r.ncols;f++){const u=r.getcolref(f),v=d.getcolref(f),m=a.v[f-1],h=1/c.v[f-1];for(let g=0;g<r.nrows;g++)v[g]=(u[g]-m)*h}return l?[d,a,c]:d}function ml(r,e,t){if(!r||!r.class||!r.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=r.ncols,o=r.ncomp;let a,c;switch(e){case"mX":a=2,c=l;break;case"sX":a=2+l,c=l;break;case"loadings":case"xloadings":a=2+2*l+(t-1)*l,c=l;break;case"P":a=2+2*l,c=t*l;break;case"eigenvals":case"xeigenvals":a=2+2*l+l*o,c=o;break;case"cq0":a=2+2*l+l*o+o,c=o;break;case"cNq":a=2+2*l+l*o+2*o,c=o;break;case"rq0":a=2+2*l+l*o+3*o,c=o;break;case"rNq":a=2+2*l+l*o+4*o,c=o;break;case"ch0":a=2+2*l+l*o+5*o,c=o;break;case"cNh":a=2+2*l+l*o+6*o,c=o;break;case"rh0":a=2+2*l+l*o+7*o,c=o;break;case"rNh":a=2+2*l+l*o+8*o,c=o;break;case"cr0":a=2+2*l+l*o+9*o,c=o;break;case"cNr":a=2+2*l+l*o+10*o,c=o;break;case"rr0":a=2+2*l+l*o+11*o,c=o;break;case"rNr":a=2+2*l+l*o+12*o,c=o;break;case"cg0":a=2+2*l+l*o+13*o,c=o;break;case"cNg":a=2+2*l+l*o+14*o,c=o;break;case"rg0":a=2+2*l+l*o+15*o,c=o;break;case"rNg":a=2+2*l+l*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(a,a+c)}const bv=r=>r;function yv(r,{delay:e=0,duration:t=400,easing:l=bv}={}){const o=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:l,css:a=>`opacity: ${a*o}`}}var wv=Q('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function Ta(r,e){ve(e,!0);function t(u){u.key==="Escape"&&e.closeModal()}var l=wv();Tr("keydown",bs,t);var o=L(l),a=L(o),c=L(a);c.__click=function(...u){var v;(v=e.closeModal)==null||v.apply(this,u)};var d=I(a,2),f=L(d);zr(f,()=>e.children),mc(7,l,()=>yv),P(r,l),de()}et(["click"]);const _v=[1,1.1,.45,.4],kr={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",aliens:"#2679B2",external:"#D22C2F"},qt={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",alt:"#2679B2",new:"#2679B2"},jr={cal:"#f0f8ff",pv:"#fff8f0",target:"#f0f8ff",alt:"#f0f8ff",new:"#f0f8ff"},za="#a0a0a0",Pa="#909090",ns="#909090",ss=8,xv=8,kv=8,Ev=600;function Ia(r,e){return!r||!e||e<0||e>r.ncomp?"":`PC${e} (${(r.stat.expvar[e-1]*100).toFixed(1)}%)`}function Cv(r,e){if(r.length===e.length)return r;const t=e.length,l=new r.constructor(t);for(let o in e)l[o]=r[e[o]];return l}function Av(r,e){let t=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;for(let c=0;c<r.length;c++)l=Math.min(l,r[c]),t=Math.max(t,r[c]);let o=cl(void 0,[l,t],e-1,!0,!1,0).v;const a=o[1]-o[0];if(o[0]>l){const c=o[0]-a;o=[c<l?c:l,...o]}if(o[o.length-1]<t){const c=o[o.length-1]+a;o=[...o,c>t?c:t]}return o}function Sv(r){const e=r.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const t=fl(e);return r.reduce((o,a,c)=>(o[a]=t[c],o),{})}function Nv(r,e,t){const l=e.length,o=new Array(r.length),a=e[1]-e[0];for(let c=0;c<r.length;c++)for(let d=0;d<l-1;d++){const f=r[c]>=e[d],u=d===l-2?r[c]<e[d+1]+a:r[c]<e[d+1];if(f&&u){o[c]=t[d];break}}return o}function La(r,e,t,l,o="cal",a){if(!e)return null;let c,d,f,u,v;if(a){const m=a.values;c=a.labels;const h=a.classColmap;d=Object.keys(h).map(g=>h[g]),u=m.map(g=>h[g]),f=new Array(c.length+1).map((g,p)=>p-.5),v=null}else if(t==="groups"&&e.classNames){const m=Sv(e.classNames);d=Object.keys(m).map(h=>m[h]),c=e.classNames,u=e.classes.map(h=>m[h]),f=new Array(c.length+1).map((h,g)=>g-.5),v=null}else if(t==="variable"){const m=Cv(r.values.getcolref(l),e.objindices);v=r.varlabels[l-1],v.length>30&&(v=v.substring(0,29)+"..."),f=Av(m,10),d=fl(f.length-1),u=Nv(m,f,d)}else c=null,f=null,d=null,u=Array(e.nrows).fill(qt[o]);return{labels:c,map:d,breaks:f,colors:u,varname:v}}function Mv(r,e,t=.95){const o=2*Math.PI/99,[a,c,d]=r,f=Math.sqrt((a+d)**2-4*(a*d-c*c));let u=.5*(a+d-f),v=.5*(a+d+f);if(u<v){let S=u;u=v,v=S}const m=Bt(t,2),h=Math.sqrt(m*u),g=Math.sqrt(m*v);let p;if(Math.abs(c)<1e-7)p=0;else{let S=-c/(a-u),k=1;const z=Math.sqrt(S*S+k*k);S=S/z,k=k/z,p=Math.atan2(k,S),p<0&&(p=p+2*Math.PI)}const y=Math.cos(p),b=Math.sin(p),C=ye.zeros(100),A=ye.zeros(100);let N=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,w=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY;for(let S=0;S<100;S++){const k=S*o,z=h*Math.cos(k),j=g*Math.sin(k),R=z*y-j*b+e[0],Y=z*b+j*y+e[1];C.v[S]=R,A.v[S]=Y,N=Math.min(N,R),E=Math.max(E,R),w=Math.min(w,Y),T=Math.max(T,Y)}return[C,A,N,E,w,T]}function Tv(r,e,t,l,o,a){if(!r||!e||!t||!l||!o)return null;const c=r.length,d=l.length,f=new Array(d).fill(0),u=new Array(d*2).fill(0);for(let b=0;b<c;b++){const C=l.indexOf(t[b]);f[C]+=1,u[C*2]+=r.v[b],u[C*2+1]+=e.v[b]}for(let b=0;b<d;b++)u[b*2]=u[b*2]/f[b],u[b*2+1]=u[b*2+1]/f[b];const v=new Array(d*3).fill(0);for(let b=0;b<c;b++){const C=l.indexOf(t[b]),A=r.v[b]-u[C*2],N=e.v[b]-u[C*2+1];v[C*3]+=A*A,v[C*3+1]+=A*N,v[C*3+2]+=N*N}let m=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;const y=Array(d);for(let b=0;b<d;b++){const[C,A,N,E,w,T]=Mv([v[b*3]/(f[b]-1),v[b*3+1]/(f[b]-1),v[b*3+2]/(f[b]-1)],[u[b*2],u[b*2+1]],a);y[b]={x:C,y:A,c:o[b]},m=Math.min(m,N),h=Math.max(h,E),g=Math.min(g,w),p=Math.max(p,T)}return{ellipses:y,xRange:[m,h],yRange:[g,p]}}var zv=Q("<!> <!> <!> <!>",1);function ar(r,e){let t=G(e,"whole",3,!1),l=yc(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Hf(r,Pr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",margins:_v,pngWidth:xv,pngHeight:kv,pngRes:Ev},()=>l,{children:(o,a)=>{var c=zv(),d=Z(c);zr(d,()=>e.children);var f=I(d,2);Gf(f,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var u=I(f,2);Kf(u,{showGrid:!0,get label(){return e.yLabel}});var v=I(u,2);Xf(v,{}),P(o,c)},$$slots:{default:!0}}))}function Pv(r,e){if(r.target.tagName!=="rect"){H(e,-1);return}const t=Array.from(r.target.parentNode.children).indexOf(r.target);if(t<0){H(e,-1);return}s(e)!==t&&H(e,t,!0)}var Iv=Q("<!> <!> <!>",1),Lv=Q("<!> <!> <!> <!> <!>",1),Rv=Q('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function hl(r,e){ve(e,!0);let t=G(e,"outliers",19,()=>[]),l=re("residual"),o=re(-1),a=_(()=>s(f)&&s(o)>=0?s(f).values.v[s(o)]:null),c=_(()=>s(A)&&s(o)>=0?s(A).sel.v[s(o)]:null),d=_(()=>e.model&&s(o)>=0?e.model.varlabels[s(o)]:null),f=_(()=>{if(!e.model)return null;const k=Ge(e.model.varvalues),z=k.length,j=(k.v[1]-k.v[0])/2,R=(k.v[z-2]-k.v[z-1])/2,Y=[k.v[0],k.v[z-1]],B=[Y[0]-j,Y[1]+R],K=(Y[1]-Y[0])/z;return{values:k,lim:B,width:K,hwidth:K*.5}}),u=_(()=>s(f)?s(f).values.apply(k=>k-s(f).hwidth):null),v=_(()=>{if(!e.dataset||!e.model)return null;const k=e.dataset.values,z=new ye(ml(e.model,"mX")),j=new ye(ml(e.model,"sX"));return pv(k,z,j).t()}),m=_(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new Wt(ml(e.model,"P",e.ncomp),e.model.ncols,e.ncomp):null),h=_(()=>s(m)?Bc(s(m),s(m)):null),g=_(()=>s(v)&&s(h)?s(h).dot(s(v)):null),p=_(()=>s(g)?s(v).subtract(s(g)):null),y=_(()=>s(g)?s(g).getcolumn(e.selected+1):null),b=_(()=>s(p)?s(p).getcolumn(e.selected+1):null),C=_(()=>s(v)?s(v).getcolumn(e.selected+1):null),A=_(()=>{if(!s(y)||!s(b)||!s(C))return null;const k=s(l)==="explained"?{all:s(g),sel:s(y),label:"Explained part, TP^T"}:s(l)==="residual"?{all:s(p),sel:s(b),label:"Residuals, E"}:{all:s(v),sel:s(C),label:"Data, X"},z=$r(k.all.v),j=z[1]-z[0],R=[z[0]-j/50,z[1]+j/12],Y=ye.fill(z[1],k.sel.length);return k.lim=R,k.top=Y,k.height=j,k});const N=_(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),E=_(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var w=ge(),T=Z(w);{var S=k=>{Ta(k,{get closeModal(){return e.closeModal},children:(z,j)=>{var R=Rv(),Y=L(R);Y.__click=[Pv,o];var B=L(Y);ar(B,{get title(){return s(N)},get yLabel(){return s(A).label},get xLabel(){return s(E)},get limY(){return s(A).lim},get limX(){return s(f).lim},fileName:"plot-contributions",children:(M,W)=>{var V=Lv(),O=Z(V);gv(O,{get xValues(){return s(f).values},get yValues(){return s(A).all},lineColor:"#e0e0e0"});var D=I(O,2);{var J=fe=>{var he=ge(),Ce=Z(he);Ie(Ce,17,t,qe,(be,ae)=>{const ie=_(()=>s(A).all.getcolumn(s(ae)+1));Ut(be,{get xValues(){return s(f).values},get yValues(){return s(ie)},lineColor:"#ffdd88"})}),P(fe,he)};X(D,fe=>{t().length>0&&fe(J)})}var ee=I(D,2);Ut(ee,{get xValues(){return s(f).values},get yValues(){return s(A).sel},lineColor:"crimson"});var te=I(ee,2);dl(te,{get left(){return s(u)},get top(){return s(A).top},get height(){return s(A).height},get width(){return s(f).width},faceColor:"transparent",borderColor:"transparent"});var se=I(te,2);{var le=fe=>{var he=Iv(),Ce=Z(he);const be=_(()=>[s(a)]),ae=_(()=>[s(A).top.v[0]]),ie=_(()=>[s(d)]);av(Ce,{get xValues(){return s(be)},get yValues(){return s(ae)},get labels(){return s(ie)},pos:3,textSize:.85});var oe=I(Ce,2);const Me=_(()=>[s(a)]),_e=_(()=>[s(c)]);Na(oe,{get xValues(){return s(Me)},get yValues(){return s(_e)},faceColor:"crimson",lineColor:"crimson"});var Ae=I(oe,2);const ke=_(()=>[s(u).v[s(o)]]),nt=_(()=>[s(A).top.v[s(o)]]);dl(Ae,{get left(){return s(ke)},get top(){return s(nt)},get height(){return s(A).height},get width(){return s(f).width},faceColor:"#ff000015"}),P(fe,he)};X(se,fe=>{s(o)>=0&&fe(le)})}P(M,V)},$$slots:{default:!0}});var K=I(Y,4),F=L(K);xe(F,{label:"",children:(M,W)=>{tt(M,{id:"type",options:["full","explained","residual"],get value(){return s(l)},set value(V){H(l,V,!0)}})},$$slots:{default:!0}}),P(z,R)},$$slots:{default:!0}})};X(T,k=>{s(f)&&s(A)&&k(S)})}P(r,w),de()}et(["click"]);var jv=Q("<!> <!> <!> <!>",1),qv=Q("<p> </p>"),Fv=Q("<!> <p>Computing global model...</p>",1),Dv=Q('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Ov=Q('<div class="buttons"><!> <!></div>'),Vv=Q("<!> <!>",1),Bv=Q("<p> </p>"),Yv=Q("<!> <!> <!> <!>",1);function Wv(r,e){ve(e,!0);let t=G(e,"outliers",19,()=>[]),l=G(e,"resobj",15),o=G(e,"model",15),a=G(e,"downloadModel",3,null),c=G(e,"downloadResults",3,null),d=re("neutral"),f=re(""),u=re(1),v=re(!0),m=re(!1),h=re(void 0);async function g(j,R,Y,B){H(h,e.WASM().then(K=>{H(d,"computing");const F=Gc(K,j.values,R,Y,B,t());F.hash=Js(),F.exclvars=[],F.varlabels=j.varlabels,F.varindices=j.varindices,F.varvalues=j.varvalues,F.varvaluesName=j.varvaluesName,F.varvaluesUnits=j.varvaluesUnits,F.varrev=j.varrev,F.prep=[];const M=Qs(K,F,j,t());o(F),l(M),H(d,"success")}).catch(K=>{console.error(K),o(null),H(d,"error"),H(f,K,!0)}),!0)}function p(j){H(d,"neutral"),H(f,null),g(e.dataset,s(u),s(v),s(m))}function y(){H(d,"neutral"),H(h,null),l(null),o(null),H(f,null)}let b=_(()=>e.dataset?Math.min(e.dataset.values.nrows-2-t().length,e.dataset.values.ncols-1,50):null);ue(()=>{e.dataset===null&&y()}),ue(()=>{H(u,s(b)?Math.min(s(b),20):null,!0)});var C=Yv(),A=Z(C);{var N=j=>{var R=jv(),Y=Z(R);xe(Y,{name:"ncomp",label:"# of PCs",children:(M,W)=>{la(M,{id:"ncomp",min:1,get max(){return s(b)},step:1,decNum:0,get value(){return s(u)},set value(V){H(u,V,!0)}})},$$slots:{default:!0}});var B=I(Y,2);xe(B,{name:"center",label:"Center",children:(M,W)=>{Qt(M,{id:"center",options:["no","yes"],get value(){return s(v)},set value(V){H(v,V,!0)}})},$$slots:{default:!0}});var K=I(B,2);xe(K,{name:"scale",label:"Scale",children:(M,W)=>{Qt(M,{id:"scale",options:["no","yes"],get value(){return s(m)},set value(V){H(m,V,!0)}})},$$slots:{default:!0}});var F=I(K,2);xe(F,{name:"create-model",label:" ",children:(M,W)=>{ut(M,{onclick:p,text:"Create model"})},$$slots:{default:!0}}),P(j,R)};X(A,j=>{e.dataset&&!o()&&s(d)!=="computing"&&j(N)})}var E=I(A,2);{var w=j=>{var R=ge(),Y=Z(R);zs(Y,()=>s(h),B=>{xe(B,{name:"spinner",children:(K,F)=>{var M=Fv(),W=Z(M);el(W),P(K,M)},$$slots:{default:!0}})},void 0,(B,K)=>{xe(B,{name:"error",status:"error",children:(F,M)=>{var W=qv(),V=L(W);ne(()=>ce(V,s(K))),P(F,W)},$$slots:{default:!0}})}),P(j,R)};X(E,j=>{s(h)&&j(w)})}var T=I(E,2);{var S=j=>{var R=Vv(),Y=Z(R);xe(Y,{name:"info",children:(F,M)=>{var W=Dv(),V=Z(W),O=I(L(V)),D=I(V,2);rn(D,{onclick:y}),ne(()=>ce(O,` ${o().ncomp??""} PCs${(o().center?", centered":"")??""}${(o().scale?", scaled":"")??""}`)),P(F,W)},$$slots:{default:!0}});var B=I(Y,2);{var K=F=>{xe(F,{name:"download-buttons",label:"Download",children:(M,W)=>{var V=Ov(),O=L(V);ut(O,{onclick:()=>c()(l(),e.dataset,"train",t(),o()),text:"Results"});var D=I(O,2);ut(D,{onclick:()=>a()(o()),text:"Model"}),P(M,V)},$$slots:{default:!0}})};X(B,F=>{a()&&c()&&F(K)})}P(j,R)};X(T,j=>{o()&&j(S)})}var k=I(T,2);{var z=j=>{xe(j,{name:"error",status:"error",children:(R,Y)=>{var B=Bv(),K=L(B);ne(()=>ce(K,s(f))),P(R,B)},$$slots:{default:!0}})};X(k,j=>{(s(d)==="error"||s(f))&&j(z)})}P(r,C),de()}var Uv=Q("<!> <!> <!>",1),Hv=Q("<p> </p>"),Gv=Q("<!> <p>Computing PV-set...</p>",1),Kv=Q('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),Xv=Q("<p> </p>"),Jv=Q("<!> <!> <!> <!>",1);function Qv(r,e){ve(e,!0);let t=G(e,"outliers",19,()=>[]),l=G(e,"pvset",15),o=G(e,"pvres",15),a=re("neutral"),c=re(""),d=re(Ue(["ven","rand","loo"])),f=re("ven"),u=re(void 0),v=e.calset.values.nrows-t().length,m=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(z=>z>=v/(v-e.model.ncomp-1)&&z<=v/2):[],h=re(Ue(m.length>0?m[0]:0));ue(()=>{m.length===0&&(H(d,["loo"],!0),H(f,"loo"))});async function g(z,j,R){H(u,e.WASM().then(Y=>{const B=R.type=="loo"?0:R.type=="rand"?2:1,K=Xc(Y,j,z.values,j.ncomp,R.nseg,B,0,t());l({classLabelsVarname:z.classLabelsVarname,classNames:z.classNames,classes:z.classes,dec:z.dec,fileName:z.fileName+"-pcv",hasClassNames:z.hasClassNames,hasLabels:z.hasLabels,header:z.header,labelsVarname:z.labelsVarname,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:z.sep,values:K,varAxisTitle:z.varAxisTitle,varindices:j.varindices,varlabels:j.varlabels,varrev:j.varrev,varvalues:j.varvalues,varvaluesName:j.varvaluesName,varvaluesUnits:j.varvaluesUnits}),o(Qs(Y,j,l(),[]))}).catch(Y=>{console.error(Y),l(null),o(null),H(a,"error"),H(c,Y,!0)}),!0)}function p(z){H(a,"neutral"),H(c,""),g(e.calset,e.model,{type:s(f),nseg:s(h)})}function y(){H(a,"neutral"),H(c,""),H(u,null),l(null),o(null)}ue(()=>{e.model===null&&y()});var b=Jv(),C=Z(b);{var A=z=>{var j=Uv(),R=Z(j);xe(R,{name:"split",label:"Split type:",children:(F,M)=>{tt(F,{id:"cvType",get options(){return s(d)},get value(){return s(f)},set value(W){H(f,W,!0)}})},$$slots:{default:!0}});var Y=I(R,2);{var B=F=>{xe(F,{name:"nseg",label:"Segments:",children:(M,W)=>{tt(M,{id:"nseg",options:m,get value(){return s(h)},set value(V){H(h,V,!0)}})},$$slots:{default:!0}})};X(Y,F=>{s(f)!=="loo"&&F(B)})}var K=I(Y,2);xe(K,{name:"run-button",label:" ",children:(F,M)=>{ut(F,{onclick:p,text:"Compute PV-set"})},$$slots:{default:!0}}),P(z,j)};X(C,z=>{e.model&&!l()&&s(a)!=="busy"&&z(A)})}var N=I(C,2);{var E=z=>{var j=ge(),R=Z(j);zs(R,()=>s(u),Y=>{xe(Y,{name:"spinner",children:(B,K)=>{var F=Gv(),M=Z(F);el(M),P(B,F)},$$slots:{default:!0}})},void 0,(Y,B)=>{xe(Y,{name:"error",status:"error",children:(K,F)=>{var M=Hv(),W=L(M);ne(()=>ce(W,s(B))),P(K,M)},$$slots:{default:!0}})}),P(z,j)};X(N,z=>{s(u)&&z(E)})}var w=I(N,2);{var T=z=>{xe(z,{name:"info",children:(j,R)=>{var Y=Kv(),B=Z(Y),K=I(L(B)),F=I(B,2);iu(F,{onclick:()=>nu(l(),e.calset.fileName+"-pv")});var M=I(F,2);rn(M,{onclick:y}),ne(()=>ce(K,` ${l().values.nrows??""} × ${l().values.ncols??""}, ${s(f)??""}
      ${(s(f)!=="loo"?s(h)+" seg":"")??""}`)),P(j,Y)},$$slots:{default:!0}})};X(w,z=>{l()&&z(T)})}var S=I(w,2);{var k=z=>{xe(z,{name:"error",status:"error",children:(j,R)=>{var Y=Xv(),B=L(Y);ne(()=>ce(B,s(c))),P(j,Y)},$$slots:{default:!0}})};X(S,z=>{s(a)==="error"&&s(c)&&z(k)})}P(r,b),de()}var Zv=Q('<tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Crit (outliers)</td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"> </td></tr>'),$v=Q('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">h</th><th class="svelte-kg0b31">q</th><th class="svelte-kg0b31">f</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">DoF (Nu)</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Mean (u0)</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"></td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Crit (extreme)</td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"> </td></tr><!></tbody></table>');function gl(r,e){ve(e,!0);let t=G(e,"isAlt",3,!1),l=_(()=>e.simca?e.simca.limType==="classic"?"c":"r":null),o=_(()=>e.model&&s(l)?Ke(e.model,s(l)+"Nh"):null),a=_(()=>e.model&&s(l)?Ke(e.model,s(l)+"Nq"):null),c=_(()=>e.model&&s(l)?Ke(e.model,s(l)+"h0"):null),d=_(()=>e.model&&s(l)?Ke(e.model,s(l)+"q0"):null),f=_(()=>e.simca?e.simca.ncomp:null);var u=ge(),v=Z(u);{var m=h=>{var g=$v(),p=I(L(g)),y=L(p),b=I(L(y)),C=L(b),A=I(b),N=L(A),E=I(A),w=L(E),T=I(y),S=I(L(T)),k=L(S),z=I(S),j=L(z),R=I(T),Y=I(L(R),3),B=L(Y),K=I(R);{var F=M=>{var W=Zv(),V=I(L(W),3),O=L(V);ne(D=>ce(O,D),[()=>e.simca.oCrit[s(f)-1].toFixed(1)]),P(M,W)};X(K,M=>{t()||M(F)})}ne((M,W,V)=>{ce(C,s(o)[s(f)-1]),ce(N,s(a)[s(f)-1]),ce(w,s(o)[s(f)-1]+s(a)[s(f)-1]),ce(k,M),ce(j,W),ce(B,V)},[()=>s(c)[s(f)-1].toFixed(3),()=>s(d)[s(f)-1].toFixed(s(d)[s(f)-1]>99?0:3),()=>e.simca.eCrit[s(f)-1].toFixed(1)]),P(h,g)};X(v,h=>{e.model&&e.simca&&s(f)>0&&h(m)})}P(r,u),de()}var ed=Q('<p class="title"> </p>'),td=Q("<!> <!> <!> <!> <!>",1);function pl(r,e){ve(e,!0);let t=G(e,"isAlt",3,!1),l=G(e,"simca",15),o=re(void 0),a=re(void 0);if(!l()&&e.model){const g="classic",p=Ke(e.model,"cNh"),y=Ke(e.model,"cNq"),b=p.map((w,T)=>w+y[T]),C=1-5/100,A=Math.pow(1-1/100,1/e.model.nrows),N=b.map(w=>Bt(C,w)),E=b.map(w=>Bt(A,w));H(o,5),H(a,1),l({ncomp:1,alpha:5,gamma:1,limType:g,Nf:b,eCrit:N,oCrit:E,className:e.className,hash:Js()})}const c=[10,5,1,.1],d=[5,1,.1,.01];ue(()=>{if(l().alpha&&s(o)!==l().alpha){const m=1-l().alpha/100;l(l().eCrit=l().Nf.map(h=>Bt(m,h)),!0),H(o,l().alpha,!0)}if(l().gamma&&s(a)!==l().gamma){const m=Math.pow(1-l().gamma/100,1/e.model.nrows);l(l().oCrit=l().Nf.map(h=>Bt(m,h)),!0),H(a,l().gamma,!0)}}),ue(()=>{const m=l().limType.charAt(0),h=Ke(e.model,m+"Nh"),g=Ke(e.model,m+"Nq"),p=h.map((N,E)=>N+g[E]),y=1-l().alpha/100,b=Math.pow(1-l().gamma/100,1/e.model.nrows),C=p.map(N=>Bt(y,N)),A=p.map(N=>Bt(b,N));l(l().Nf=p,!0),l(l().eCrit=C,!0),l(l().oCrit=A,!0)});var f=ge(),u=Z(f);{var v=m=>{var h=td(),g=Z(h);xe(g,{name:"target-class",label:"",children:(N,E)=>{var w=ed(),T=L(w);ne(()=>ce(T,`Target class: ${l().className??""}`)),P(N,w)},$$slots:{default:!0}});var p=I(g,2);xe(p,{name:"ncomp",label:"# of PCs",children:(N,E)=>{la(N,{min:1,get max(){return e.model.ncomp},step:1,decNum:0,get value(){return l().ncomp},set value(w){l(l().ncomp=w,!0)}})},$$slots:{default:!0}});var y=I(p,2);xe(y,{name:"alpha",label:"Alpha, %:",children:(N,E)=>{tt(N,{options:c,get value(){return l().alpha},set value(w){l(l().alpha=w,!0)}})},$$slots:{default:!0}});var b=I(y,2);{var C=N=>{xe(N,{name:"gamma",label:"Gamma, %:",children:(E,w)=>{tt(E,{options:d,get value(){return l().gamma},set value(T){l(l().gamma=T,!0)}})},$$slots:{default:!0}})};X(b,N=>{t()||N(C)})}var A=I(b,2);xe(A,{name:"limits",label:"Limits:",children:(N,E)=>{tt(N,{options:["classic","robust"],get value(){return l().limType},set value(w){l(l().limType=w,!0)}})},$$slots:{default:!0}}),P(m,h)};X(u,m=>{l()&&m(v)})}P(r,f),de()}function rd(r,e,t,l,o){const a=r.ncomp,c=r.nrows,d=new Array(a),f=new Array(a),u=new Array(a),v=new Array(a);for(let m=0;m<a;m++){const h=or(r,e==="robust"?"fdistr":"fdistc",m+1),g=Ra(!1,h,l[m],o[m]);let p=r.nrows;const y=l[m],b=t[m],C=new ye(h);let A=C.sort(),N=C.sortind();const E=Array.from({length:c},()=>"alien");let w=-1,T=0,S=0,k=0,z=0;for(;w<0;)T>0&&(E[N.v[p-1]-1]="external",p=p-1,N=N.slice(1,p),A=A.slice(1,p)),S=gn(A),k=Ds(A,!0),z=k/(S*S),w=4-2*b*z,T=T+1;const j=(2+Math.sqrt(w))/z,R=j-b,Y=S/j,B=y/Y,K=1-2*(b+R)*(b+3*R)/(3*(b+2*R)**2),F=(K-1)*(1-3*K),M=(b+2*R)/(b+R)**2,W=1+K*M*(K-1-.5*(2-K)*F*M),V=K*Math.sqrt(2*M)*(1+.5*F*M),O=Kn((Math.pow(B/(b+R),K)-W)/V);d[m]=g,d[m].beta=O,d[m].s=R,d[m].k=b,d[m].Mz=W,d[m].Sz=V,d[m].m=S,d[m].f0=Y,d[m].hz=K,d[m].anum={aliens:p,external:c-p},d[m].a=E,u[m]=1-O,f[m]=g.TN/(g.TN+g.FP),v[m]=m+1}return{class:["simcares"],classes:r.classes,classNames:r.classNames,target:!1,v:d,nrows:r.nrows,stat:{specificity:f,selectivity:u,components:v}}}function Ra(r,e,t,l){const o=e.length,a=new Array(o),c=new Array(o),d={regular:0,extreme:0,outliers:0},f={in:0,out:0};let u=0,v=0,m=0,h=0;for(let g=0;g<o;g++){const p=e[g];p<t?(a[g]="regular",c[g]="in",d.regular+=1,f.in+=1):p>l?(a[g]="outlier",c[g]="out",d.outliers+=1,f.out+=1):(a[g]="extreme",c[g]="out",d.extreme+=1,f.out+=1),u=u+(c[g]==="in"&&r),h=h+(c[g]!=="in"&&r),m=m+(c[g]!=="in"&&!r),v=v+(c[g]==="in"&&!r)}return{f:e,c:a,d:c,cnum:d,dnum:f,TP:u,TN:m,FN:h,FP:v}}function bl(r,e,t,l){const o=r.ncomp,a=new Array(o),c=new Array(o),d=new Array(o);for(let f=0;f<o;f++){const u=or(r,e==="robust"?"fdistr":"fdistc",f+1),v=Ra(!0,u,t[f],l[f]);c[f]=v.TP/(v.TP+v.FN),d[f]=f+1,a[f]=v}return{class:["simcares"],classes:r.classes,target:!0,v:a,nrows:r.nrows,stat:{sensitivity:c,components:d}}}function ls(r,e,t,l,o,a){(!a||!Array.isArray(a))&&(a=[]);let c=r.exclvars;(!c||!Array.isArray(c))&&(c=[]);const d=l.values.nrows,f=a.length,u=d-f,v=e.ncomp,m=or(t.pca,"qdist",v),h=or(t.pca,"hdist",v),g=e.limType==="classic"?"c":"r",p=or(t.pca,"fdist"+g,v),y=Ke(r,g+"Nh")[v-1],b=Ke(r,g+"Nq")[v-1],C=Ke(r,g+"h0")[v-1],A=Ke(r,g+"q0")[v-1],N=y+b,E=t.simca.v[v-1],w=l.sep,T=t.simca.classes&&t.simca.classes.length===u,S=T?["","","","",""]:["","","",""];let k="";if(k+=["Reference classes:",T?"provided":"not provided",...S].join(w)+`
`,k+=["Number of components:",v,...S].join(w)+`
`,k+=["Alpha:",(e.alpha/100).toFixed(3),...S].join(w)+`
`,k+=["Limits estimator:",e.limType,...S].join(w)+`
`,k+=`
`,k+=["Nh:",y,...S].join(w)+`
`,k+=["Nq:",b,...S].join(w)+`
`,k+=["Nf:",N,...S].join(w)+`
`,k+=`
`,k+=["F crit (extremes):",e.eCrit[v-1],...S].join(w)+`
`,k+=["F crit (outliers):",e.oCrit[v-1],...S].join(w)+`
`,k+=`
`,c.length>0&&(k+=["Number of excluded varibles:",c.length,...S].join(w)+`
`,k+=["Indices of excluded varibles:",su(c),...S].join(w)+`
`,k+=`
`),E.beta!==null&&E.beta!==void 0){k+=["Objects treated as from non-target class","",...S].join(w)+`
`,k+=["Objects:",d,...S].join(w)+`
`,k+=["In:",E.dnum.in,...S].join(w)+`
`,k+=["Out:",E.dnum.out,...S].join(w)+`
`,k+=["Aliens:",E.anum.aliens,...S].join(w)+`
`,k+=["External:",E.anum.external,...S].join(w)+`
`,k+=["Specificity:",t.simca.stat.specificity?t.simca.stat.specificity[v-1]:"-",...S].join(w)+`
`,k+=["Selectivity:",t.simca.stat.selectivity?t.simca.stat.selectivity[v-1]:"-",...S].join(w)+`
`,k+=["Beta:",E.beta,...S].join(w)+`
`,k+=["Non-centrality, s:",E.s,...S].join(w)+`
`,k+=["Scaling, f0:",E.f0,...S].join(w)+`
`,k+=`
`,k+=["","object","class","role","decision","h/h0","q/q0","f"].join(w)+`
`;for(let B=0;B<d;B++)k+=["",l.objlabels[B],t.simca.classes[B],E.a[B],E.d[B],h[B]/C,m[B]/A,p[B]].join(w)+`
`}else{k+=["Objects treated as from target class","",...S].join(w)+`
`,k+=["Objects:",d,...S].join(w)+`
`,k+=["Removed:",f,...S].join(w)+`
`,k+=["In:",E.dnum.in,...S].join(w)+`
`,k+=["Out:",E.dnum.out,...S].join(w)+`
`,k+=["Regular:",E.cnum.regular,...S].join(w)+`
`,k+=["Extreme:",E.cnum.extreme,...S].join(w)+`
`,k+=["Outliers:",E.cnum.outliers,...S].join(w)+`
`,k+=["Sensitivity:",t.simca.stat.sensitivity?t.simca.stat.sensitivity[v-1]:"-",...S].join(w)+`
`,k+=`
`,k+=["","object","class","role","decision","h/h0","q/q0","f"].join(w)+`
`;let B=0;for(let K=0;K<d;K++){if(f>0&&a.includes(K)){k+=["",l.objlabels[K],"-","removed","-","-","-","-"].join(w)+`
`;continue}k+=["",l.objlabels[B],t.pca.classes[B],E.c[B],E.d[B],h[B]/C,m[B]/A,p[B]].join(w)+`
`,B=B+1}}k+=`
`,l.dec!=="."&&(k=k.replace(/\./g,l.dec)),k=["Target class:",e.className,...S].join(w)+`
`+k,k=["Data filename:",l.fileName,...S].join(w)+`
`+k;let z=["DD-SIMCA results ("+o+")","https://mda.tools/ddsimca/",...S].join(w)+`

`;const j=new Blob([z+k],{type:"text/csv"}),R=window.URL.createObjectURL(j),Y=document.createElement("a");Y.setAttribute("href",R),Y.setAttribute("download",`ddsimca-results-${o}.csv`),Y.click()}function yl(r,e){const t=new Blob([JSON.stringify({pca:r,simca:e},wn)],{type:"application/json"}),l=window.URL.createObjectURL(t),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download","ddsimca-model.json"),o.click()}var nd=Q('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">Cal</th><th class="svelte-kg0b31">PV</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extremes</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Outliers</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Sensitivity</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function sd(r,e){ve(e,!0);let t=_(()=>e.calres?e.calres.v[0].c.length:0);var l=ge(),o=Z(l);{var a=c=>{var d=nd(),f=I(L(d)),u=L(f),v=I(L(u)),m=L(v),h=I(v),g=L(h),p=I(u),y=I(L(p)),b=L(y),C=I(y),A=L(C),N=I(p),E=I(L(N)),w=L(E),T=I(E),S=L(T),k=I(N),z=I(L(k)),j=L(z),R=I(z),Y=L(R);ne((B,K)=>{ce(m,s(t)),ce(g,s(t)),ce(b,e.calres.v[e.ncomp-1].cnum.extreme),ce(A,e.pvres.v[e.ncomp-1].cnum.extreme),ce(w,e.calres.v[e.ncomp-1].cnum.outliers),ce(S,e.pvres.v[e.ncomp-1].cnum.outliers),ce(j,B),ce(Y,K)},[()=>e.calres.stat.sensitivity[e.ncomp-1].toFixed(3),()=>e.pvres.stat.sensitivity[e.ncomp-1].toFixed(3)]),P(c,d)};X(o,c=>{e.calres&&e.pvres&&c(a)})}P(r,l),de()}var ld=Q('<div class="msg-select"> </div>'),od=Q('<div class="msg-select"> </div>'),ad=Q('<div class="selected-buttons svelte-8mh2yv"><!></div>'),id=Q("<!> <!>",1),cd=()=>switchPlot(i),ud=(r,e,t)=>H(e,s(t),!0),fd=Q('<button class="plot-selector svelte-8mh2yv"> </button>'),vd=Q('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function wl(r,e){ve(e,!0);let t=G(e,"selobjText",3,"Click to select an object...");G(e,"selvarText",3,"Click to select a variable...");let l=G(e,"clearText",3,"Click anywhere to remove selection..."),o=G(e,"params",15),a=Ue({objects:-1,variables:-1}),c=re(Ue(Object.keys(e.plots)[0]));function d(T){a.objects=T}function f(T){a.objects=-1}function u(T){a.variables=T}function v(T){a.variables=-1}let m={objects:{select:d,unselect:f},variables:{select:u,unselect:v},stats:{}},h=_(()=>s(c)?e.plots[s(c)]:null),g=_(()=>s(h)?s(h).component:null);var p=vd(),y=L(p),b=L(y),C=L(b);Ps(C,()=>s(g),(T,S)=>{S(T,{get params(){return o()[s(c)]},get callbacks(){return m[s(h).scope]},get selected(){return a[s(h).scope]},get props(){return e.props}})});var A=I(b,2),N=L(A);{var E=T=>{var S=ge(),k=Z(S);{var z=R=>{var Y=ld(),B=L(Y);ne(()=>ce(B,t())),P(R,Y)},j=R=>{var Y=od(),B=L(Y);ne(()=>ce(B,l())),P(R,Y)};X(k,R=>{a[s(h).scope]<0?R(z):R(j,!1)})}P(T,S)};X(N,T=>{s(h).scope==="objects"&&o()[s(c)].plotType!=="l"&&t().length>0&&T(E)})}var w=I(y,2);Ie(w,21,()=>Object.keys(e.plots),qe,(T,S)=>{var k=ge(),z=Z(k);{var j=Y=>{var B=id(),K=Z(B);zu(K,{get title(){return s(h).label},labelWidth:12,get options(){return e.controls[s(c)]},get value(){return o()[s(c)]},set value(W){o(o()[s(c)]=W,!0)}});var F=I(K,2);{var M=W=>{var V=ad(),O=L(V);zr(O,()=>s(h).buttons,()=>a.objects),P(W,V)};X(F,W=>{s(h).buttons&&a.objects>=0&&W(M)})}P(Y,B)},R=Y=>{var B=fd();B.__keydown=[cd],B.__click=[ud,c,S];var K=L(B);ne(()=>ce(K,e.plots[s(S)].label)),P(Y,B)};X(z,Y=>{s(h)&&s(c)===s(S)?Y(j):Y(R,!1)})}P(T,k)}),P(r,p),de()}et(["keydown","click"]);function ja(r,e){!e.callbacks||!e.callbacks.select||Rr(r,r.target.tagName,e.callbacks.select)}function dd(r,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var md=pe("<text> </text>"),hd=pe('<g class="series series-textlabels"></g>'),gd=pe('<g class="series series-line"><polyline class="line"></polyline></g>'),pd=pe("<rect></rect>"),bd=pe('<g class="series series-bar"></g>'),yd=pe("<text> </text>"),wd=pe('<g class="series series-points series-points1"></g>'),_d=pe('<g class="series series-points series-points1"><text> </text></g>'),xd=pe('<g class="series series-bar"><rect></rect></g>'),kd=pe('<g class="series series-text"><text> </text></g>'),Ed=pe('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),Cd=pe("<!><!><!><!><!>",1);function $t(r,e){ve(e,!0);let t=G(e,"shortenLabels",3,!0),l=G(e,"lineWidth",3,1),o=G(e,"markerSize",3,null),a=G(e,"pch",3,"●"),c=G(e,"colors",3,void 0),d=G(e,"mainColor",19,()=>qt.cal),f=G(e,"faceColor",3,null),u=G(e,"selected",19,()=>-1),v=G(e,"xRange",15),m=G(e,"yRange",15);const h=Nt("axes"),g=_(()=>St(e.xValues,"PlotSeries")),p=_(()=>s(g)?St(e.yValues,"PlotSeries",s(g).length):null);ue(()=>{v(s(g)?$r(s(g)):null),m(s(p)?$r(s(p)):null)});const y=_(()=>f()===null?e.plotType==="p"?"transparent":"white":f()),b=_(()=>o()?o():e.plotType==="p"?1:.85),C=_(()=>sl[h.scales().plot]),A=_(()=>lt([0],h.tY())[0]),N=_(()=>ll([.8],h.tX())[0]),E=_(()=>s(N)/2),w=_(()=>s(C));let T=_(()=>e.plotType==="l"||e.plotType==="b"?il(s(g),s(p),h.tX(),h.tY()):null),S=_(()=>s(g)?lt(s(g),h.tX()):null),k=_(()=>s(p)?lt(s(p),h.tY()):null),z=_(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(O=>O.slice(0,ss)):e.labels:null),j=_(()=>c()&&c().length===s(g).length?c():Array(s(g).length).fill(d()));const R=_(()=>`font-size:${s(b)}em;fill:${s(y)};cursor:default;text-anchor:middle;stroke-width:2px;user-select:none;`),Y=`font-size:0.85em;fill:${za};cursor:default;text-anchor:middle;stroke:${za};stroke-width:0.1px;user-select:none;`,B="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",K=`fill:transparent;stroke-width: ${l()}px;`,F=`stroke-width:${l()}px;`;var M=ge(),W=Z(M);{var V=O=>{var D=Cd(),J=Z(D);{var ee=ie=>{var oe=hd();st(oe,Y),Ie(oe,21,()=>s(S),qe,(Me,_e,Ae)=>{var ke=md(),nt=L(ke);ne(()=>{q(ke,"x",s(S)[Ae]),q(ke,"y",s(k)[Ae]),q(ke,"dy",s(p).v[Ae]<0?s(w):-s(w)),ce(nt,s(z)[Ae])}),P(Me,ke)}),P(ie,oe)};X(J,ie=>{e.showLabels&&s(z)&&ie(ee)})}var te=I(J);{var se=ie=>{var oe=gd();st(oe,K);var Me=L(oe);ne(()=>{q(Me,"points",s(T)),q(Me,"stroke",d())}),P(ie,oe)};X(te,ie=>{(e.plotType==="l"||e.plotType==="b")&&ie(se)})}var le=I(te);{var fe=ie=>{var oe=bd();st(oe,F),oe.__click=[ja,e],Ie(oe,21,()=>s(S),qe,(Me,_e,Ae)=>{var ke=pd();ne(()=>{q(ke,"x",s(S)[Ae]-s(E)),q(ke,"y",s(p).v[Ae]<0?s(A):s(k)[Ae]),q(ke,"fill",s(j)[Ae]),q(ke,"width",s(N)),q(ke,"height",s(p).v[Ae]<0?s(k)[Ae]-s(A):s(A)-s(k)[Ae])}),P(Me,ke)}),P(ie,oe)};X(le,ie=>{e.plotType==="h"&&ie(fe)})}var he=I(le);{var Ce=ie=>{var oe=wd();oe.__click=[ja,e],Ie(oe,21,()=>s(S),qe,(Me,_e,Ae)=>{var ke=yd(),nt=L(ke);ne(()=>{q(ke,"x",s(S)[Ae]),q(ke,"y",s(k)[Ae]),q(ke,"fill",f()),q(ke,"stroke",s(j)[Ae]),ce(nt,a())}),P(Me,ke)}),ne(()=>st(oe,s(R))),P(ie,oe)};X(he,ie=>{(e.plotType==="p"||e.plotType==="b")&&ie(Ce)})}var be=I(he);{var ae=ie=>{var oe=Ed(),Me=Z(oe);q(Me,"x",0),q(Me,"y",0),Me.__click=[dd,e];var _e=I(Me);{var Ae=yt=>{var Ve=_d();st(Ve,B);var Je=L(Ve),Cr=L(Je);ne(()=>{q(Je,"x",s(S)[u()]),q(Je,"y",s(k)[u()]),q(Je,"stroke",s(j)[u()]),ce(Cr,a())}),P(yt,Ve)},ke=yt=>{var Ve=xd();st(Ve,F);var Je=L(Ve);ne(()=>{q(Je,"stroke",s(j)[u()]),q(Je,"fill",s(j)[u()]),q(Je,"x",s(S)[u()]-s(E)),q(Je,"y",s(p).v[u()]<0?s(A):s(k)[u()]),q(Je,"width",s(N)),q(Je,"height",s(p).v[u()]<0?s(k)[u()]-s(A):s(A)-s(k)[u()])}),P(yt,Ve)};X(_e,yt=>{e.plotType!=="h"?yt(Ae):yt(ke,!1)})}var nt=I(_e);{var kt=yt=>{var Ve=kd();st(Ve,Y);var Je=L(Ve);q(Je,"stroke",Pa),q(Je,"fill",Pa);var Cr=L(Je);ne(()=>{q(Je,"x",s(S)[u()]),q(Je,"y",s(k)[u()]),q(Je,"dy",s(p).v[u()]<0?s(w):-s(w)),ce(Cr,s(z)[u()])}),P(yt,Ve)};X(nt,yt=>{e.showLabels&&s(z)&&s(z).length>0&&yt(kt)})}P(ie,oe)};X(be,ie=>{u()>=0&&ie(ae)})}P(O,D)};X(W,O=>{s(S)&&s(k)&&O(V)})}P(r,M),de()}et(["click"]);var Ad=Q("<!> <!> <!> <!>",1);function _l(r,e){ve(e,!0);let t=_(()=>e.props&&e.props.data?e.props.data:null),l=_(()=>e.props&&e.props.res?e.props.res:null),o=_(()=>e.params&&e.params.resID?s(l)[e.params.resID]:null),a=_(()=>e.params&&e.params.resID?s(t)[e.params.resID]:null);const c="#909090",d=100;function f(O,D,J,ee){if(!O||!D)return null;const te=O.length;let se=ye.zeros(te),le=Number.NEGATIVE_INFINITY,fe=Number.POSITIVE_INFINITY;if(ee==="log")for(let he=0;he<te;he++){const Ce=Math.log(1+O[he]/J);se.v[he]=Ce,le=Math.max(le,Ce),fe=Math.min(fe,Ce)}else for(let he=0;he<te;he++){const Ce=O[he]/J;se.v[he]=Ce,le=Math.max(le,Ce),fe=Math.min(fe,Ce)}return{values:se,min:fe,max:le}}function u(O,D){return{q:"Orthogonal distance",h:"Score distance"}[O]+", "+(D==="log"?"log(1 + "+O+"/"+O+"0)":O+"/"+O+"0")}function v(O,D,J,ee){const te=D+J,le=Bt(O,te)/J,fe=-D/J,he=-le/fe,Ce=ye.seq(0,he*1,he/d),be=Ce.apply(ae=>ae*fe+le);return{x:ee==="log"?Ce.apply(ae=>Math.log(1+ae)):Ce,y:ee==="log"?be.apply(ae=>Math.log(1+ae)):be}}let m=_(()=>e.params.limType==="classic"?{h:s(o).cNh,q:s(o).cNq}:{h:s(o).rNh,q:s(o).rNq}),h=_(()=>e.params.limType==="classic"?{h:s(o).ch0,q:s(o).cq0}:{h:s(o).rh0,q:s(o).rq0}),g=_(()=>({h:s(m).h[e.params.ncomp-1],q:s(m).q[e.params.ncomp-1]})),p=_(()=>({h:s(h).h[e.params.ncomp-1],q:s(h).q[e.params.ncomp-1]})),y=_(()=>e.params.alpha?1-e.params.alpha/100:.95),b=_(()=>e.params.gamma?1-e.params.gamma/100:.99),C=_(()=>v(s(y),s(g).h,s(g).q,e.params.transType)),A=_(()=>v(Math.pow(s(b),1/s(o).nrows),s(g).h,s(g).q,e.params.transType)),N=_(()=>La(s(a),s(o),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),E=_(()=>s(o)?or(s(o),"hdist",e.params.ncomp):null),w=_(()=>s(o)?or(s(o),"qdist",e.params.ncomp):null),T=_(()=>f(s(E),s(g).h,s(p).h,e.params.transType)),S=_(()=>f(s(w),s(g).q,s(p).q,e.params.transType)),k=_(()=>s(o)?s(o).objlabels.map(O=>O.slice(0,ss)):null),z=_(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),j=_(()=>u("h",e.params.transType)),R=_(()=>u("q",e.params.transType)),Y=re(void 0),B=re(void 0),K=_(()=>{if(!s(T)||!s(Y))return[0,1];const O=Math.max(s(T).max,s(A).x.v[d-1]);return[-.02*(O-s(Y)[0]),1.05*O]}),F=_(()=>{if(!s(S)||!s(B))return[0,1];const O=Math.max(s(S).max,s(A).y.v[0]);return[-.02*(O-s(B)[0]),(1.05+.1*(e.params.colorBy!=="none"))*O]});var M=ge(),W=Z(M);{var V=O=>{ar(O,{get title(){return s(z)},get limX(){return s(K)},get limY(){return s(F)},get xLabel(){return s(j)},get yLabel(){return s(R)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(D,J)=>{var ee=Ad(),te=Z(ee);{var se=ae=>{Ut(ae,{get xValues(){return s(C).x},get yValues(){return s(C).y},lineColor:c,lineType:2})};X(te,ae=>{s(C)&&ae(se)})}var le=I(te,2);{var fe=ae=>{Ut(ae,{get xValues(){return s(A).x},get yValues(){return s(A).y},lineColor:c,lineType:3})};X(le,ae=>{s(A)&&ae(fe)})}var he=I(le,2);$t(he,{get labels(){return s(k)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return s(T).values},get yValues(){return s(S).values},plotType:"p",get showLabels(){return e.params.showLabels},get colors(){return s(N).colors},get xRange(){return s(Y)},set xRange(ae){H(Y,ae,!0)},get yRange(){return s(B)},set yRange(ae){H(B,ae,!0)}});var Ce=I(he,2);{var be=ae=>{const ie=_(()=>s(N).breaks!==null);Ma(ae,{get show(){return s(ie)},get colmap(){return s(N).map},get breaks(){return s(N).breaks},get labels(){return s(N).labels}})};X(Ce,ae=>{s(N)&&ae(be)})}P(D,ee)},$$slots:{default:!0}})};X(W,O=>{s(T)&&s(S)&&O(V)})}P(r,M),de()}var Sd=Q("<!> <!> <!> <!>",1);function xl(r,e){ve(e,!0);const t="Objects",l="topright",o={q:"Orthogonal distance, q/q0",h:"Score distance, h/h0",f:"Full distance, f/f0"},a="#909090",c=_(()=>e.props&&e.props.res?e.props.res:null),d=_(()=>e.props&&e.props.simca?e.props.simca:null),f=_(()=>e.props&&e.props.model?e.props.model:null),u=_(()=>s(c)?s(c)[Object.keys(s(c))[0]]:null),v=_(()=>s(d)?s(d).ncomp:null),m=_(()=>s(d)?s(d).Nf:null),h=_(()=>s(d)?s(d).limType.charAt(0):null),g=_(()=>s(f)?Ke(s(f),s(h)+"h0"):null),p=_(()=>s(f)?Ke(s(f),s(h)+"q0"):null),y=(V,O,D,J)=>new ye(or(V,O,D).map(ee=>ee/J)),b=_(()=>s(c)&&s(v)?ts(s(c),(V,O)=>y(V[O],"hdist",s(v),s(g)[s(v)-1])):null),C=_(()=>s(c)&&s(v)?ts(s(c),(V,O)=>y(V[O],"qdist",s(v),s(p)[s(v)-1])):null),A=_(()=>s(c)&&s(v)?ts(s(c),(V,O)=>y(V[O],"fdist"+s(h),s(v),s(m)[s(v)-1])):null),N=_(()=>s(b)&&s(C)&&s(A)?{h:s(b),q:s(C),f:s(A)}:null),E=_(()=>{if(!s(N))return null;if(e.params.resID==="both")return ts(s(N)[e.params.distType],(O,D)=>({values:O[D],color:qt[D],max:jt(O[D])}));if(e.params.resID==="diff"){const O=s(N)[e.params.distType].cal,D=s(N)[e.params.distType].pv,J=O.subtract(D).apply(ee=>Math.abs(ee));return{"abs(cal - pv)":{values:J,color:"#a0a0a0",max:jt(J)}}}const V={};return V[e.params.resID]={values:s(N)[e.params.distType][e.params.resID],color:qt[e.params.resID],max:jt(s(N)[e.params.distType][e.params.resID])},V});let w=_(()=>s(E)?Object.keys(s(E)).map(V=>({id:V,label:V,point:{marker:e.params.resID==="diff"?2:1,faceColor:e.params.resID==="diff"?s(E)[V].color:"white",lineColor:s(E)[V].color,markerSize:.85,lineWidth:1.5}})):null);const T=_(()=>s(d)&&e.params.distType==="f"&&e.params.resID!=="diff"?s(d).eCrit[s(v)-1]/s(m)[s(v)-1]:0),S=_(()=>s(d)&&e.params.distType==="f"&&e.params.resID!=="diff"?s(d).oCrit[s(v)-1]/s(m)[s(v)-1]:0),k=_(()=>s(E)?jt(Object.keys(s(E)).map(V=>s(E)[V].max).concat([s(S)])):null),z=_(()=>s(u)?ye.seq(1,s(u).nrows):null),j=_(()=>s(u)?[0,s(u).nrows+1]:[0,1]),R=_(()=>s(k)?[-s(k)*.05,s(k)*1.2]:[0,1]),Y=_(()=>o[e.params.distType]),B=_(()=>s(u)?s(u).objlabels.map(V=>V.slice(0,ss)):null),K=_(()=>e.params.title?e.params.title:"Distances (A = "+s(v)+")");var F=ge(),M=Z(F);{var W=V=>{ar(V,{get title(){return s(K)},get limX(){return s(j)},get limY(){return s(R)},xLabel:t,get yLabel(){return s(Y)},fileName:"plot-distances",get onclick(){return e.callbacks.unselectObject},children:(O,D)=>{var J=Sd(),ee=Z(J);{var te=be=>{const ae=_(()=>[s(T),s(T)]);Ut(be,{get xValues(){return s(j)},get yValues(){return s(ae)},lineColor:a,lineType:2})};X(ee,be=>{s(T)>0&&be(te)})}var se=I(ee,2);{var le=be=>{const ae=_(()=>[s(S),s(S)]);Ut(be,{get xValues(){return s(j)},get yValues(){return s(ae)},lineColor:a,lineType:3})};X(se,be=>{s(S)>0&&be(le)})}var fe=I(se,2);Ie(fe,17,()=>Object.keys(s(E)),qe,(be,ae)=>{const ie=_(()=>e.params.resID==="diff"?"h":"p");$t(be,{get labels(){return s(B)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return s(z)},get yValues(){return s(E)[s(ae)].values},get mainColor(){return s(E)[s(ae)].color},get plotType(){return s(ie)},get showLabels(){return e.params.showLabels}})});var he=I(fe,2);{var Ce=be=>{nn(be,{get items(){return s(w)},position:l})};X(he,be=>{s(w)&&s(w).length>0&&be(Ce)})}P(O,J)},$$slots:{default:!0}})};X(M,V=>{s(z)&&s(E)&&V(W)})}P(r,F),de()}var Nd=Q("<!> <!> <!> <!>",1);function Md(r,e){ve(e,!0);const t="Components",l="Degrees of freedom, Nu",o="DoF",a="plot-dof",c={Nh:"#2679B2",Nq:"#D22C2F"},d={Nh:"#f0f8ff",Nq:"#fff8f0"};let f=_(()=>e.props&&e.props.simca?e.props.simca:null),u=_(()=>e.props&&e.props.model?e.props.model:null),v=_(()=>s(f)?s(f).ncomp:null),m=_(()=>e.params.dfID!=="both"?[e.params.dfID]:["Nh","Nq"]),h=_(()=>e.params.legendPosition?e.params.legendPosition:"topleft"),g=_(()=>s(m)?s(m).map(w=>({id:w,label:w,point:{marker:1,lineColor:c[w],faceColor:"white",markerSize:.85,lineWidth:1.5},line:{lineColor:c[w],lineWidth:1.5}})):null),p=_(()=>s(u)?ye.seq(1,s(u).ncomp):null),y=_(()=>s(f)&&s(m)?s(m).reduce((w,T)=>{const S=s(f).limType==="classic"?"c":"r";return w[T]=new ye(Ke(s(u),S+T)),w},{}):null),b=_(()=>s(u)?[.5,s(u).ncomp+.5]:[0,1]),C=_(()=>{const w=Object.keys(s(y));if(w.length<1)return[0,1];const T=w.map(S=>jt(s(y)[S]));return[0,jt(T)*1.2]});var A=ge(),N=Z(A);{var E=w=>{ar(w,{title:o,xLabel:t,yLabel:l,get limX(){return s(b)},get limY(){return s(C)},fileName:a,whole:!0,children:(T,S)=>{var k=Nd(),z=Z(k);{var j=M=>{const W=_(()=>[s(v)]),V=_(()=>[s(v)]),O=_(()=>[s(C)[0]]),D=_(()=>[s(C)[1]]);Zt(M,{get xStart(){return s(W)},get xEnd(){return s(V)},get yStart(){return s(O)},get yEnd(){return s(D)},lineColor:"#a0a0a0"})};X(z,M=>{s(v)&&M(j)})}var R=I(z,2);Ie(R,17,()=>s(m),qe,(M,W)=>{$t(M,{get xValues(){return s(p)},get yValues(){return s(y)[s(W)]},plotType:"b",showLabels:!1,get faceColor(){return d[s(W)]},get mainColor(){return c[s(W)]},lineWidth:1.5})});var Y=I(R,2);{var B=M=>{var W=ge(),V=Z(W);Ie(V,17,()=>s(m),qe,(O,D)=>{const J=_(()=>[s(p).v[s(v)-1]]),ee=_(()=>[s(y)[s(D)].v[s(v)-1]]);$t(O,{get xValues(){return s(J)},get yValues(){return s(ee)},plotType:"p",showLabels:!1,get faceColor(){return c[s(D)]},mainColor:"#a0a0a0",markerSize:1.2,lineWidth:1})}),P(M,W)};X(Y,M=>{s(v)&&M(B)})}var K=I(Y,2);{var F=M=>{nn(M,{get items(){return s(g)},get position(){return s(h)}})};X(K,M=>{s(g)&&s(g).length>0&&M(F)})}P(T,k)},$$slots:{default:!0}})};X(N,w=>{s(p)&&s(y)&&w(E)})}P(r,A),de()}var Td=Q("<!> <!> <!>",1),zd=Q("<!> <!> <!>",1);function qa(r,e){ve(e,!0);const t="#e0e0e0",l="Number of extremes (expected)",o="Number of extremes (observed)",a="plot-extremes";function c(k){const z=ye.zeros(k+1),j=ye.zeros(k+1),R=ye.zeros(k+1),Y=ye.zeros(k+1);for(let B=1;B<k;B++){const K=B/k,F=2*Math.sqrt(B*(1-K));z.v[B]=B,R.v[B]=B,j.v[B]=B-F,Y.v[B]=B+F}return z.v[k]=k,R.v[k]=k,j.v[k]=k,Y.v[k]=k,{xStart:z,xEnd:R,yStart:j,yEnd:Y}}function d(k,z,j){const R=k.v[j-1].f,Y=z.Nf[j-1],B=R.length,K=ye.zeros(B);for(let F=1;F<=B;F++){const M=F/B,W=Bt(1-M,Y);let V=0;for(let O=0;O<B;O++)R[O]>W&&(V+=1);K.v[F-1]=V}return K}let f=_(()=>e.props&&e.props.classres?e.props.classres:null),u=_(()=>e.props&&e.props.simca?e.props.simca:null),v=_(()=>e.props&&e.props.ncomp?e.props.ncomp:null),m=_(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(f))),h=_(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),g=_(()=>s(m)?s(m).map(k=>({id:k,label:k,point:{marker:1,lineColor:qt[k],faceColor:jr[k],markerSize:.85,lineWidth:1.5}})):null),p=_(()=>s(f)&&s(m)?s(m).reduce((k,z)=>(k[z]=ye.seq(1,s(f)[z].nrows),k),{}):null),y=_(()=>s(f)&&s(m)&&s(v)?s(m).reduce((k,z)=>(k[z]=d(s(f)[z],s(u),s(v)),k),{}):null),b=_(()=>s(m)?s(m).reduce((k,z)=>Math.max(k,s(p)[z].length),0):1),C=_(()=>s(b)>1?c(s(b)):null),A=_(()=>s(p)?[-1,s(b)+2]:[0,1]),N=_(()=>s(p)?[-1,s(b)+2]:[0,1]),E=_(()=>s(v)?`Extremes (A = ${s(v)})`:"Extremes");var w=ge(),T=Z(w);{var S=k=>{ar(k,{get title(){return s(E)},xLabel:l,yLabel:o,get limX(){return s(A)},get limY(){return s(N)},fileName:a,whole:!0,children:(z,j)=>{var R=zd(),Y=Z(R);{var B=W=>{var V=Td(),O=Z(V);Zt(O,Pr(()=>s(C),{lineColor:t}));var D=I(O,2);Ut(D,{get xValues(){return s(C).xStart},get yValues(){return s(C).yStart},lineColor:t});var J=I(D,2);Ut(J,{get xValues(){return s(C).xEnd},get yValues(){return s(C).yEnd},lineColor:t}),P(W,V)};X(Y,W=>{s(C)&&W(B)})}var K=I(Y,2);Ie(K,17,()=>s(m),qe,(W,V)=>{$t(W,{get xValues(){return s(p)[s(V)]},get yValues(){return s(y)[s(V)]},plotType:"p",showLabels:!1,get faceColor(){return jr[s(V)]},get mainColor(){return qt[s(V)]},lineWidth:1.5})});var F=I(K,2);{var M=W=>{nn(W,{get items(){return s(g)},get position(){return s(h)}})};X(F,W=>{s(g)&&s(g).length>0&&W(M)})}P(z,R)},$$slots:{default:!0}})};X(T,k=>{s(f)&&k(S)})}P(r,w),de()}var Pd=Q("<!> <!>",1),Id=Q("<!> <!> <!> <!> <!>",1);function os(r,e){ve(e,!0);let t=_(()=>"plot-"+e.params.statName),l=_(()=>e.props&&e.props.classres?e.props.classres:null),o=_(()=>e.props&&e.props.ncomp?e.props.ncomp:null),a=_(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(l))),c=_(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),d=_(()=>s(a)?s(a).map(A=>({id:A,label:A,point:{marker:1,lineColor:qt[A],faceColor:jr[A],markerSize:.85,lineWidth:1.5},line:{lineType:1,lineColor:qt[A]}})):null),f=_(()=>e.params.ci&&Array.isArray(e.params.ci)&&e.params.ci.length===2?e.params.ci:null);const u=_(()=>s(l)?s(l)[s(a)[0]].stat.components.length:1),v=_(()=>s(u)>10?s(u)*.05:.5),m=_(()=>s(u)>1?1:0),h=_(()=>s(u)>1?s(u):2),g=_(()=>[s(m)-s(v),s(h)+s(v)]);let p=_(()=>{if(!e.params.zoom)return[0,1.1];if(!s(a)||s(a).length<1)return[0,1];const A=s(a).map(N=>$r(s(l)[N].stat[e.params.statName]));return Po(A.flat(),.2)});var y=ge(),b=Z(y);{var C=A=>{ar(A,{get title(){return e.params.title},xLabel:"Components",get yLabel(){return e.params.title},get limX(){return s(g)},get limY(){return s(p)},get fileName(){return s(t)},whole:!0,children:(N,E)=>{var w=Id(),T=Z(w);{var S=F=>{const M=_(()=>[s(o)]),W=_(()=>[s(o)]),V=_(()=>[s(p)[0]]),O=_(()=>[s(p)[1]]);Zt(F,{get xStart(){return s(M)},get xEnd(){return s(W)},get yStart(){return s(V)},get yEnd(){return s(O)},lineColor:"#a0a0a0"})};X(T,F=>{s(o)&&F(S)})}var k=I(T,2);{var z=F=>{var M=Pd();const W=_(()=>s(g)[1]-s(g)[0]);var V=Z(M);const O=_(()=>[s(g)[0]]),D=_(()=>[s(f)[0]+s(f)[1]]),J=_(()=>[2*s(f)[1]]),ee=_(()=>[s(W)]);dl(V,{get left(){return s(O)},get top(){return s(D)},get height(){return s(J)},get width(){return s(ee)},lineColor:"#transparent",faceColor:"#00000010"});var te=I(V,2);const se=_(()=>[s(g)[0]]),le=_(()=>[s(W)]),fe=_(()=>[s(f)[0]]),he=_(()=>[s(f)[0]]);Zt(te,{get xStart(){return s(se)},get xEnd(){return s(le)},get yStart(){return s(fe)},get yEnd(){return s(he)},lineColor:"#a0a0a0",lineType:2}),P(F,M)};X(k,F=>{s(f)&&F(z)})}var j=I(k,2);Ie(j,17,()=>s(a),qe,(F,M)=>{$t(F,{get xValues(){return s(l)[s(M)].stat.components},get yValues(){return s(l)[s(M)].stat[e.params.statName]},plotType:"b",showLabels:!1,get faceColor(){return jr[s(M)]},get mainColor(){return qt[s(M)]},lineWidth:1.5})});var R=I(j,2);{var Y=F=>{var M=ge(),W=Z(M);Ie(W,17,()=>s(a),qe,(V,O)=>{const D=_(()=>[s(l)[s(O)].stat.components[s(o)-1]]),J=_(()=>[s(l)[s(O)].stat[e.params.statName][s(o)-1]]);$t(V,{get xValues(){return s(D)},get yValues(){return s(J)},plotType:"b",showLabels:!1,get faceColor(){return qt[s(O)]},mainColor:"#a0a0a0",markerSize:1.2,lineWidth:1})}),P(F,M)};X(R,F=>{s(o)&&F(Y)})}var B=I(R,2);{var K=F=>{nn(F,{get items(){return s(d)},get position(){return s(c)}})};X(B,F=>{s(d)&&s(d).length>0&&F(K)})}P(N,w)},$$slots:{default:!0}})};X(b,A=>{s(l)&&A(C)})}P(r,y),de()}function Ld(r,e){ve(e,!0);let t=G(e,"lineColor",3,"#606060"),l=G(e,"lineType",3,2),o=G(e,"alpha",3,.05),a=G(e,"xRange",15),c=G(e,"yRange",15);const d=ye.seq(0,2*Math.PI,.05);function f(b,C,A,N){const E=b.eigenvals[C-1],w=Bt(1-o(),2),T=Math.sqrt(w*E),S=ye.zeros(N.length);for(let k=0;k<N.length;k++)S.v[k]=T*A(N.v[k]);return[S,-T,T]}let u=_(()=>e.comp?e.comp[0]:null),v=_(()=>s(u)?f(e.resobj,s(u),Math.cos,d):null);ue(()=>{a(s(v)?[s(v)[1],s(v)[2]]:null)});let m=_(()=>e.comp?e.comp[1]:null),h=_(()=>s(m)?f(e.resobj,s(m),Math.sin,d):null);ue(()=>{c(s(h)?[s(h)[1],s(h)[2]]:null)});var g=ge(),p=Z(g);{var y=b=>{Ut(b,{get xValues(){return s(v)[0]},get yValues(){return s(h)[0]},get lineColor(){return t()},get lineType(){return l()}})};X(p,b=>{s(v)&&s(h)&&b(y)})}P(r,g),de()}function Rd(r,e){ve(e,!0);let t=G(e,"confLevel",3,.95),l=G(e,"xRange",15),o=G(e,"yRange",15),a=_(()=>Tv(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,t()));ue(()=>{s(a)?(l(s(a).xRange),o(s(a).yRange)):(l(null),o(null))});var c=ge(),d=Z(c);{var f=u=>{var v=ge(),m=Z(v);Ie(m,17,()=>s(a).ellipses,qe,(h,g,p)=>{Ut(h,{get xValues(){return s(g).x},get yValues(){return s(g).y},get lineColor(){return e.groupColors[p]}})}),P(u,v)};X(d,u=>{s(a)&&s(a).ellipses&&u(f)})}P(r,c),de()}var jd=Q("<!> <!> <!> <!> <!> <!>",1);function kl(r,e){ve(e,!0);let t=G(e,"alpha",3,.05),l=_(()=>e.props&&e.props.data?e.props.data:null),o=_(()=>e.props&&e.props.res?e.props.res:null),a=_(()=>e.params&&e.params.resID?s(o)[e.params.resID]:null),c=_(()=>e.params&&e.params.resID?s(l)[e.params.resID]:null);function d(M,W,V,O,D){if(!V)return null;let J=V[0],ee=V[1];M&&O&&(J=Math.min(J,O[0]),ee=Math.max(ee,O[1])),W!=="none"&&D&&(J=Math.min(J,D[0]),ee=Math.max(ee,D[1]));const te=(ee-J)*.1;return{min:J,max:ee,d:te}}function f(M,W){if(!(!M||!W||W<1||W>M.ncomp))return new ye(or(M,"scores",W))}let u=re(void 0),v=re(void 0),m=re(void 0),h=re(void 0),g=re(void 0),p=re(void 0),y=_(()=>s(o)?Ge(s(a).objindices):null),b=_(()=>s(a)?s(a).objlabels.map(M=>M.slice(0,ss)):null),C=_(()=>f(s(a),e.params.comp1)),A=_(()=>e.params.plotType==="p"?s(C):s(y)),N=_(()=>e.params.comp2?e.params.comp2:null),E=_(()=>f(s(a),s(N))),w=_(()=>La(s(c),s(a),e.params.colorBy,e.params.colorByVar,e.params.resID)),T=_(()=>e.params.plotType==="p"?Ia(s(a),e.params.comp1):"Objects"),S=_(()=>Ia(s(a),e.params.comp2)),k=_(()=>d(e.params.showEllipse,e.params.confEllipse,s(u),s(m),s(g))),z=_(()=>s(k)?[s(k).min-s(k).d,s(k).max+s(k).d]:[0,1]),j=_(()=>d(e.params.showEllipse,e.params.confEllipse,s(v),s(h),s(p))),R=_(()=>s(j)?[s(j).min-s(j).d,s(j).max+s(j).d*(1+(e.params.colorBy!=="none"))]:[0,1]),Y=_(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!s(w)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+s(w).varname+(s(c).varvaluesUnits?" "+s(c).varvaluesUnits:"")+")");var B=ge(),K=Z(B);{var F=M=>{ar(M,{get title(){return s(Y)},get limX(){return s(z)},get limY(){return s(R)},get xLabel(){return s(T)},get yLabel(){return s(S)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(W,V)=>{var O=jd(),D=Z(O);const J=_(()=>[s(z)[0]]),ee=_(()=>[s(z)[1]]);Zt(D,{get xStart(){return s(J)},get xEnd(){return s(ee)},yStart:[0],yEnd:[0],lineColor:ns});var te=I(D,2);{var se=oe=>{const Me=_(()=>[s(R)[0]]),_e=_(()=>[s(R)[1]]);Zt(oe,{xStart:[0],xEnd:[0],get yStart(){return s(Me)},get yEnd(){return s(_e)},lineColor:ns})};X(te,oe=>{e.params.plotType==="p"&&oe(se)})}var le=I(te,2);{var fe=oe=>{const Me=_(()=>[e.params.comp1,e.params.comp2]);Ld(oe,{get alpha(){return t()},get resobj(){return s(a)},get comp(){return s(Me)},get xRange(){return s(m)},set xRange(_e){H(m,_e,!0)},get yRange(){return s(h)},set yRange(_e){H(h,_e,!0)}})};X(le,oe=>{e.params.showEllipse&&e.params.plotType==="p"&&oe(fe)})}var he=I(le,2);{var Ce=oe=>{const Me=_(()=>Number.parseInt(e.params.confEllipse)/100);Rd(oe,{get xValues(){return s(A)},get yValues(){return s(E)},get confLevel(){return s(Me)},get groups(){return s(a).classes},get groupNames(){return s(a).classNames},get groupColors(){return s(w).map},get xRange(){return s(g)},set xRange(_e){H(g,_e,!0)},get yRange(){return s(p)},set yRange(_e){H(p,_e,!0)}})};X(he,oe=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&s(w)&&oe(Ce)})}var be=I(he,2);$t(be,{get xValues(){return s(A)},get yValues(){return s(E)},get labels(){return s(b)},get selected(){return e.selected},get callbacks(){return e.callbacks},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return s(w).colors},get xRange(){return s(u)},set xRange(oe){H(u,oe,!0)},get yRange(){return s(v)},set yRange(oe){H(v,oe,!0)}});var ae=I(be,2);{var ie=oe=>{const Me=_(()=>s(w).breaks!==null);Ma(oe,{get show(){return s(Me)},get colmap(){return s(w).map},get breaks(){return s(w).breaks},get labels(){return s(w).labels}})};X(ae,oe=>{s(w)&&oe(ie)})}P(W,O)},$$slots:{default:!0}})};X(K,M=>{s(A)&&s(E)&&M(F)})}P(r,B),de()}var qd=Q("<!> <!> <!>",1);function Fd(r,e){ve(e,!0);let t=_(()=>e.props?e.props.model:null);function l(E,w){return!E||!w||w<1||w>E.ncomp?null:new ye(Ke(E,"loadings",w))}let o=re(void 0),a=re(void 0),c=_(()=>s(t)?Ge(s(t).varvalues):null),d=_(()=>s(t)?Ge(s(t).varindices):null),f=_(()=>l(s(t),e.params.comp1)),u=_(()=>!s(t)||!e.params.comp1?null:e.params.plotType==="p"?{values:s(f),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&s(c)?{values:s(c),label:s(t).varvaluesName+(s(t).varvaluesUnits?", "+s(t).varvaluesUnits:"")}:{values:s(d),label:"Variables"}),v=_(()=>s(u)?s(u).values:null),m=_(()=>s(u)?s(u).label:null),h=_(()=>l(s(t),e.params.comp2)),g=_(()=>`PC${e.params.comp2}`),p=_(()=>{if(s(a)&&s(a)[0]<Number.POSITIVE_INFINITY&&s(a)[1]>Number.NEGATIVE_INFINITY){const E=(s(a)[1]-s(a)[0])*.1;return[s(a)[0]-E,s(a)[1]+E]}else return[0,1]}),y=_(()=>{if(s(o)&&s(o)[0]<Number.POSITIVE_INFINITY&&s(o)[1]>Number.NEGATIVE_INFINITY){const E=(s(o)[1]-s(o)[0])*.1;return e.params.plotType==="l"&&s(t).varrev?[s(o)[1]+E,s(o)[0]-E]:[s(o)[0]-E,s(o)[1]+E]}else return[0,1]}),b=_(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const E=Math.max(Math.abs(s(y)[0]),Math.abs(s(p)[0]),s(y)[1],s(p)[1])*1.05;return{x:[-E,E],y:[-E,E]}}else{const E=Math.max(Math.abs(s(p)[0]),s(p)[1])*1.05;return{x:s(y),y:[-E,E]}}return{x:s(y),y:s(p)}});var C=ge(),A=Z(C);{var N=E=>{ar(E,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return s(m)},get yLabel(){return s(g)},get limX(){return s(b).x},get limY(){return s(b).y},children:(w,T)=>{var S=qd(),k=Z(S);const z=_(()=>[s(b).x[0]]),j=_(()=>[s(b).x[1]]);Zt(k,{get xStart(){return s(z)},get xEnd(){return s(j)},yStart:[0],yEnd:[0],lineColor:ns});var R=I(k,2);{var Y=K=>{const F=_(()=>[s(b).y[0]]),M=_(()=>[s(b).y[1]]);Zt(K,{xStart:[0],xEnd:[0],get yStart(){return s(F)},get yEnd(){return s(M)},lineColor:ns})};X(R,K=>{e.params.plotType==="p"&&K(Y)})}var B=I(R,2);$t(B,{get xValues(){return s(v)},get yValues(){return s(h)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return s(t).varlabels},shortenLabels:!1,get xRange(){return s(o)},set xRange(K){H(o,K,!0)},get yRange(){return s(a)},set yRange(K){H(a,K,!0)}}),P(w,S)},$$slots:{default:!0}})};X(A,E=>{s(v)&&s(h)&&E(N)})}P(r,C),de()}function El(r){const e=Object.keys(r);return{resID:{el:tt,hidden:e.length==1,default:e[0],label:"Result",props:{options:e}},transType:{el:tt,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},colorBy:{el:tt,hidden:!0,default:"roles",label:"Color by",props:{options:["roles","classes"]}}}}function as(r){return{resID:{el:tt,hidden:r.length==1,default:r[0],label:"Show",props:{options:r}},zoom:{el:Qt,hidden:!1,default:!1,label:"Zoom",props:{options:["off","on"]}}}}function Cl(r){const e=Object.keys(r),t=e.concat(["both","diff"]);return{resID:{el:tt,hidden:e.length==1,default:e[0],label:"Result",props:{options:t}},distType:{el:tt,hidden:!1,default:"h",label:"Distance",props:{options:["h","q","f"]}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}}}function Dd(){return{dfID:{el:tt,hidden:!1,default:"both",label:"DoF type",props:{options:["both","Nh","Nq"]}}}}function Od(r){return{resID:{el:tt,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Vd(r){return{resID:{el:tt,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Fa(r){return{resID:{el:tt,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Bd(r){return{plotType:{el:fa,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:_n,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:_n,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},axesEqual:{el:Qt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function Al(r){const e=Object.keys(r),t=r[e[0]],l=t.classNames&&t.classNames.length>1?["none","groups","variable"]:["none","variable"];return{plotType:{el:fa,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:_n,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:_n,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},resID:{el:tt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},showEllipse:{el:Qt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:tt,hidden:!1,default:"none",label:"Color by",props:{options:l}},colorByVar:{el:_n,hidden:!0,default:1,label:"Variable",props:{min:1,max:t.ncols}},confEllipse:{el:tt,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}var Yd=Q("<!> <!>",1);function Wd(r,e){ve(e,!0);const t=(g,p=mt)=>{xe(g,{label:"Selected",children:(y,b)=>{ut(y,{onclick:()=>e.markOutlier(p()),text:"remove"})},$$slots:{default:!0}})},l=(g,p=mt)=>{xe(g,{label:"Selected",children:(y,b)=>{var C=Yd(),A=Z(C);ut(A,{onclick:()=>e.showContributions(p()),text:"plot"});var N=I(A,2);ut(N,{onclick:()=>e.markOutlier(p()),text:"remove"}),P(y,C)},$$slots:{default:!0}})},o={cal:e.calres.pca,pv:e.pvres.pca},a={cal:e.calset,pv:e.pvset},c=_(()=>({cal:e.calres.simca,pv:e.pvres.simca})),d={regular:kr.regular,extreme:kr.extreme,outlier:kr.outlier},f=_(()=>({acceptance:{label:"Acceptance",scope:"objects",component:_l,buttons:l},distances:{label:"Distances",scope:"objects",component:xl,buttons:l},dof:{label:"DoF",scope:"stats",component:Md},extremes:{label:"Extremes",scope:"stats",component:qa},sensitivity:{label:"Sensitivity",scope:"stats",component:os},loadings:{label:"Loadings",scope:"variables",component:Fd},scores:{label:"Scores",scope:"objects",component:kl,buttons:t}})),u=Ue({acceptance:El(o),distances:Cl(o),dof:Dd(),extremes:Fa(["cal","pv","both"]),sensitivity:as(["cal","pv","both"]),scores:Al(o),loadings:Bd(e.model)});let v=re(Ue({acceptance:ft(u.acceptance),distances:ft(u.distances),dof:ft(u.dof),extremes:ft(u.extremes),sensitivity:ft(u.sensitivity),scores:ft(u.scores),loadings:ft(u.loadings)}));ue(()=>{s(v).sensitivity.title="Sensitivity",s(v).sensitivity.statName="sensitivity"}),ue(()=>{const g=e.calres.pca.nrows,p=1-e.simca.alpha/100,b=1.96*Math.sqrt(g*p*(1-p))/g;s(v).sensitivity.ci=[p,b]}),ue(()=>{s(v).acceptance.ncomp=e.simca.ncomp,s(v).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(v).acceptance.limType=e.simca.limType,s(v).acceptance.alpha=e.simca.alpha,s(v).acceptance.gamma=e.simca.gamma}),ue(()=>{if(e.simca.limType){const p={cal:e.calres.simca,pv:e.pvres.simca}[s(v).acceptance.resID].v[e.simca.ncomp-1];s(v).acceptance.colorByObj={classColmap:d,labels:[`regular: ${p.cnum.regular}`,`extreme: ${p.cnum.extreme}`,`outliers: ${p.cnum.outliers}`],values:p.c}}}),ue(()=>{s(v).scores.plotType!=="p"?(u.scores.comp1.hidden=!0,u.scores.showEllipse.hidden=!0,s(v).scores.showEllipse=!1):(u.scores.comp1.hidden=!1,u.scores.showEllipse.hidden=!1),s(v).scores.plotType==="l"||s(v).scores.plotType==="b"?(u.scores.colorBy.hidden=!0,s(v).scores.colorBy="none"):u.scores.colorBy.hidden=!1,s(v).scores.colorBy==="variable"?u.scores.colorByVar.hidden=!1:u.scores.colorByVar.hidden=!0,s(v).scores.colorBy==="groups"&&s(v).scores.plotType==="p"?u.scores.confEllipse.hidden=!1:(u.scores.confEllipse.hidden=!0,s(v).scores.confEllipse="none")}),ue(()=>{s(v).loadings.plotType!=="p"?u.loadings.comp1.hidden=!0:u.loadings.comp1.hidden=!1});const m=_(()=>({res:o,classres:s(c),model:e.model,simca:e.simca,data:a,ncomp:e.simca.ncomp})),h={markOutlier:e.markOutlier,showContributions:e.showContributions};wl(r,{get plots(){return s(f)},get controls(){return u},get props(){return s(m)},callbacks:h,get params(){return s(v)},set params(g){H(v,g,!0)}}),de()}var Ud=Q('<div class="outliers-pane svelte-1v0yar6"><!></div>'),Hd=Q('<div class="model-calculator svelte-1v0yar6"><!></div>'),Gd=Q('<div class="pcv-calculator svelte-1v0yar6"><!></div>'),Kd=Q('<div class="buttons"><!> <!> <!></div>'),Xd=Q('<div class="model-stats svelte-1v0yar6"><!></div> <div class="result-stats svelte-1v0yar6"><!></div>',1),Jd=Q(`<p class="svelte-1v0yar6">In this tab you can train a DD-SIMCA model and optimize its parameters using Procrustes cross-validation. After creating the model you can save it to a file and use it in other tabs. For example, validate and tune it using test set with target class members (tab <strong>Predict: Target</strong>) or apply it to a dataset with non-target class members (tab <strong>Predict: New</strong>).</p> <p class="svelte-1v0yar6"><strong>Step 1.</strong></p> <p class="svelte-1v0yar6">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1v0yar6">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1v0yar6">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1v0yar6"><table class="svelte-1v0yar6"><thead class="svelte-1v0yar6"><tr class="svelte-1v0yar6"><td class="svelte-1v0yar6">Name</td><td class="svelte-1v0yar6">Class</td><td class="svelte-1v0yar6">x1</td><td class="svelte-1v0yar6">x2</td><td class="svelte-1v0yar6">x3</td></tr></thead><tbody class="svelte-1v0yar6"><tr><td class="svelte-1v0yar6">O1</td><td class="svelte-1v0yar6">A</td><td class="svelte-1v0yar6">3.8</td><td class="svelte-1v0yar6">1.3</td><td class="svelte-1v0yar6">13.6</td></tr><tr><td class="svelte-1v0yar6">O2</td><td class="svelte-1v0yar6">A</td><td class="svelte-1v0yar6">11.1</td><td class="svelte-1v0yar6">12.3</td><td class="svelte-1v0yar6">3.3</td></tr><tr><td class="svelte-1v0yar6">O3</td><td class="svelte-1v0yar6">A</td><td class="svelte-1v0yar6">1.2</td><td class="svelte-1v0yar6">2.3</td><td class="svelte-1v0yar6">4.2</td></tr></tbody></table></div> <p class="svelte-1v0yar6"></p>`,1),Qd=Q(`<p class="svelte-1v0yar6"><strong>Step 2</strong></p> <p class="svelte-1v0yar6">Next step is to create a global PCA model for the calibration set, which will be the basis for the SIMCA model. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to set
               optimal number later.</p>`,1),Zd=Q('<p class="svelte-1v0yar6"><strong>Step 3</strong></p> <p class="svelte-1v0yar6">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p> <p class="svelte-1v0yar6">After this step SIMCA model will be created automatically and you will be able to tune its parameters.</p>',1),$d=Q("<!> <!>",1),e1=Q('<div class="help-text svelte-1v0yar6"><!></div>'),t1=Q('<!> <div class="app-container svelte-1v0yar6"><div class="app-controls svelte-1v0yar6"><div class="data-loader svelte-1v0yar6"><!></div> <!> <!> <!> <div class="simca-settings svelte-1v0yar6"><!> <!></div> <!></div> <div class="app-content svelte-1v0yar6"><!></div></div>',1);function r1(r,e){ve(e,!0);const t=_(()=>e.session.train);let l=re(-1),o=re(!1);function a(D){if(D<0||D>s(t).calres.pca.nrows-1)return;const J=s(t).calres.pca.objindices[D];J>=0&&!s(t).outliers.includes(J)&&(s(t).outliers.push(J),s(t).pvres.simca=null,s(t).calres.simca=null,s(t).simca=null,s(t).pvres.pca=null,s(t).pvset=null,s(t).calres.pca=null,s(t).model=null)}function c(D){D<0||(H(l,D,!0),H(o,!0))}function d(){H(o,!1),H(l,-1)}function f(){s(t).outliers=[],s(t).model=null}function u(){s(t).outliers.pop(),s(t).model=null}let v=_(()=>s(t).model&&s(t).model.hash!==s(v)?s(t).model.hash:0),m=_(()=>s(t).simca&&s(t).simca.hash!==s(m)?s(t).simca.hash:0);qn(()=>{s(t).calset===null?(s(t).model=null,s(t).className=null,s(t).outliers=[]):s(t).calset&&!s(t).className&&(s(t).className=s(t).calset.classNames[0]),s(t).model===null&&(s(t).calres.simca=null,s(t).simca=null,s(t).calres.pca=null,s(t).pvset=null),s(t).pvset===null&&(s(t).pvres.simca=null,s(t).pvres.pca=null)}),ue(()=>{s(t).model===null&&(s(t).pvres={pca:null,scima:null},s(t).calres={pca:null,simca:null},s(t).simca=null,s(t).pvset=null)}),ue(()=>{s(t).calset===null?(s(t).pvres={pca:null,scima:null},s(t).calres={pca:null,simca:null},s(t).simca=null,s(t).pvset=null,s(t).className=null,s(t).outliers=[],s(t).model=null):s(t).calset&&!s(t).className&&(s(t).className=s(t).calset.classNames[0])}),ue(()=>{s(t).pvset===null&&(s(t).pvres={pca:null,scima:null})}),ue(()=>{s(t).calres.pca&&s(t).simca&&(s(t).calres.simca=bl(s(t).calres.pca,_t(()=>s(t).simca.limType),s(t).simca.eCrit,s(t).simca.oCrit))}),ue(()=>{s(t).pvres.pca&&s(t).simca&&(s(t).pvres.simca=bl(s(t).pvres.pca,_t(()=>s(t).simca.limType),s(t).simca.eCrit,s(t).simca.oCrit))}),ue(()=>{const D=_t(()=>JSON.stringify(e.session,wn));s(t).simca?e.backupSession(D,s(t).model,s(t).calset,s(t).pvset,s(t).simca.ncomp,s(t).pvres.simca):e.backupSession(D,s(t).model,s(t).calset,s(t).pvset,s(t).simca,s(t).pvres.simca)});var h=t1(),g=Z(h);{var p=D=>{hl(D,{get dataset(){return s(t).calset},get model(){return s(t).model},get ncomp(){return s(t).simca.ncomp},get outliers(){return s(t).outliers},get selected(){return s(l)},closeModal:d})};X(g,D=>{s(o)&&D(p)})}var y=I(g,2),b=L(y),C=L(b),A=L(C);tl(A,{className:"Class",get dataset(){return s(t).calset},set dataset(D){s(t).calset=D}});var N=I(C,2);{var E=D=>{var J=Ud(),ee=L(J);rl(ee,{get outliers(){return s(t).outliers},get dataset(){return s(t).calset},resetOutliers:f,undoOutliers:u}),P(D,J)};X(N,D=>{s(t).outliers&&s(t).outliers.length>0&&D(E)})}var w=I(N,2);{var T=D=>{var J=Hd(),ee=L(J);Wv(ee,{get WASM(){return e.WASM},get dataset(){return s(t).calset},get outliers(){return s(t).outliers},get model(){return s(t).model},set model(te){s(t).model=te},get resobj(){return s(t).calres.pca},set resobj(te){s(t).calres.pca=te}}),P(D,J)};X(w,D=>{s(t).calset&&D(T)})}var S=I(w,2);{var k=D=>{var J=Gd(),ee=L(J);Qv(ee,{get WASM(){return e.WASM},get calset(){return s(t).calset},get outliers(){return s(t).outliers},get model(){return s(t).model},get calres(){return s(t).calres.pca},get pvset(){return s(t).pvset},set pvset(te){s(t).pvset=te},get pvres(){return s(t).pvres.pca},set pvres(te){s(t).pvres.pca=te}}),P(D,J)};X(S,D=>{s(t).model&&D(k)})}var z=I(S,2),j=L(z);{var R=D=>{pl(D,{get model(){return s(t).model},get className(){return s(t).className},get simca(){return s(t).simca},set simca(J){s(t).simca=J}})};X(j,D=>{s(t).model&&s(t).pvres.pca&&s(t).calres.pca&&D(R)})}var Y=I(j,2);{var B=D=>{xe(D,{label:"Download",children:(J,ee)=>{var te=Kd(),se=L(te);ut(se,{onclick:()=>ls(s(t).model,s(t).simca,s(t).calres,s(t).calset,"train",s(t).outliers),text:"Res (cal)"});var le=I(se,2);ut(le,{onclick:()=>ls(s(t).model,s(t).simca,s(t).pvres,s(t).pvset,"PV",s(t).outliers),text:"Res (pv)"});var fe=I(le,2);ut(fe,{onclick:()=>yl(s(t).model,s(t).simca),text:"Model"}),P(J,te)},$$slots:{default:!0}})};X(Y,D=>{s(t).pvres.simca&&s(t).calres.simca&&D(B)})}var K=I(z,2);{var F=D=>{var J=Xd(),ee=Z(J),te=L(ee);gl(te,{get model(){return s(t).model},get simca(){return s(t).simca}});var se=I(ee,2),le=L(se);sd(le,{get calres(){return s(t).calres.simca},get pvres(){return s(t).pvres.simca},get ncomp(){return s(t).simca.ncomp}}),P(D,J)};X(K,D=>{s(t).pvres.simca&&s(t).calres.simca&&D(F)})}var M=I(b,2),W=L(M);{var V=D=>{var J=e1(),ee=L(J);{var te=le=>{var fe=Jd();P(le,fe)},se=le=>{var fe=$d(),he=Z(fe);{var Ce=ie=>{var oe=Qd();P(ie,oe)};X(he,ie=>{s(t).model||ie(Ce)})}var be=I(he,2);{var ae=ie=>{var oe=Zd();P(ie,oe)};X(be,ie=>{s(t).model&&!s(t).pvset&&ie(ae)})}P(le,fe)};X(ee,le=>{s(t).calset?le(se,!1):le(te)})}P(D,J)},O=(D,J)=>{{var ee=te=>{var se=ge(),le=Z(se);hn(le,()=>s(t).pvset.pca,fe=>{Wd(fe,Pr({markOutlier:a,showContributions:c},()=>s(t)))}),P(te,se)};X(D,te=>{s(t).pvres.simca!==null&&te(ee)},J)}};X(W,D=>{!s(t).pvres.simca||!s(t).calres.simca?D(V):D(O,!1)})}P(r,h),de()}var n1=Q("<!> <!>",1),s1=Q('<p class="model-info svelte-14tszjv"><span>Model file:</span> <span class="file-name svelte-14tszjv"> </span><br> <span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),l1=Q("<p><!></p>"),o1=Q("<!> <!>",1);function Da(r,e){ve(e,!0);let t=G(e,"model",15),l=G(e,"simca",15),o=re(""),a=re("neutral"),c=re("");function d(C){try{const A=JSON.parse(C,ta);if(!Object.keys(A).includes("pca","simca")||A.pca.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain SIMCA mdel.");if(!Object.keys(A.pca).includes("hash"))throw Error('you try to load model incompatible with this app version, create a new model or use <a href="/ddsimca-old/">old version</a> of the app.');Array.isArray(A.pca.v)&&(A.pca.v=Float64Array.from(A.pca.v)),A.pca.fileName=s(v),t(A.pca),l(A.simca),H(a,"success"),H(c,"")}catch(A){t(null),H(a,"error"),H(c,A,!0)}}function f(C){const A=new FileReader;A.onload=()=>{d(A.result)},A.readAsText(s(o))}function u(){H(o,""),t(null),H(a,"neutral"),H(c,"")}ue(()=>{s(o)===null?(t(null),H(a,"neutral"),H(c,"")):(H(a,"neutral"),H(c,""))});let v=_(()=>s(o)?s(o).name.replace(/\.[^/.]+$/,""):"");var m=o1(),h=Z(m);{var g=C=>{var A=n1(),N=Z(A);hn(N,()=>s(o),T=>{xe(T,{children:(S,k)=>{ca(S,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return s(o)},set file(z){H(o,z,!0)}})},$$slots:{default:!0}})});var E=I(N,2);{var w=T=>{xe(T,{label:" ",children:(S,k)=>{ut(S,{onclick:f,text:"Load"})},$$slots:{default:!0}})};X(E,T=>{s(o)&&T(w)})}P(C,A)},p=C=>{xe(C,{name:"info",children:(A,N)=>{var E=s1(),w=Z(E),T=I(L(w),2),S=L(T),k=I(T,4),z=I(w,2);rn(z,{onclick:u}),ne(()=>{q(T,"title",t().fileName),ce(S,t().fileName),ce(k,` ${t().ncomp??""} PCs${(t().center?", centered":"")??""}${(t().scale?", scaled":"")??""}`)}),P(A,E)},$$slots:{default:!0}})};X(h,C=>{t()?C(p,!1):C(g)})}var y=I(h,2);{var b=C=>{xe(C,{status:"error",children:(A,N)=>{var E=l1(),w=L(E);xt(w,()=>s(c),!1,!1),P(A,E)},$$slots:{default:!0}})};X(y,C=>{(s(a)==="error"||s(c))&&C(b)})}P(r,m),de()}var a1=Q('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">Target</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extremes</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Outliers</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Sensitivity</td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function i1(r,e){ve(e,!0);var t=ge(),l=Z(t);{var o=a=>{var c=a1(),d=I(L(c)),f=L(d),u=I(L(f)),v=L(u),m=I(f),h=I(L(m)),g=L(h),p=I(m),y=I(L(p)),b=L(y),C=I(p),A=I(L(C)),N=L(A);ne(E=>{ce(v,e.res.v[0].c.length),ce(g,e.res.v[e.ncomp-1].cnum.extreme),ce(b,e.res.v[e.ncomp-1].cnum.outliers),ce(N,E)},[()=>e.res.stat.sensitivity[e.ncomp-1].toFixed(3)]),P(a,c)};X(l,a=>{e.res&&a(o)})}P(r,t),de()}var c1=Q("<!> <!>",1);function u1(r,e){ve(e,!0);const t=(g,p=mt)=>{xe(g,{label:"Selected",children:(y,b)=>{ut(y,{onclick:()=>e.markOutlier(p()),text:"remove"})},$$slots:{default:!0}})},l=(g,p=mt)=>{xe(g,{label:"Selected",children:(y,b)=>{var C=c1(),A=Z(C);ut(A,{onclick:()=>e.showContributions(p()),text:"plot"});var N=I(A,2);ut(N,{onclick:()=>e.markOutlier(p()),text:"remove"}),P(y,C)},$$slots:{default:!0}})},o={target:e.testres.pca},a={target:e.testset},c=_(()=>({target:e.testres.simca})),d={regular:kr.regular,extreme:kr.extreme,outlier:kr.outlier},f=_(()=>({acceptance:{label:"Acceptance",scope:"objects",component:_l,buttons:l},distances:{label:"Distances",scope:"objects",component:xl,buttons:l},extremes:{label:"Extremes",scope:"stats",component:qa},sensitivity:{label:"Sensitivity",scope:"stats",component:os},scores:{label:"Scores",scope:"objects",component:kl,buttons:t}})),u=Ue({acceptance:El(o),distances:Cl(o),extremes:Fa(["target"]),sensitivity:as(["target"]),scores:Al(o)});let v=re(Ue({acceptance:ft(u.acceptance),distances:ft(u.distances),extremes:ft(u.extremes),sensitivity:ft(u.sensitivity),scores:ft(u.scores)}));ue(()=>{s(v).sensitivity.title="Sensitivity",s(v).sensitivity.statName="sensitivity"}),ue(()=>{const g=e.testres.pca.nrows,p=1-e.simca.alpha/100,b=1.96*Math.sqrt(g*p*(1-p))/g;s(v).sensitivity.ci=[p,b]}),ue(()=>{s(v).acceptance.ncomp=e.simca.ncomp,s(v).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(v).acceptance.limType=e.simca.limType,s(v).acceptance.alpha=e.simca.alpha,s(v).acceptance.gamma=e.simca.gamma}),ue(()=>{if(e.simca.limType){const p={target:e.testres.simca}[s(v).acceptance.resID].v[e.simca.ncomp-1];s(v).acceptance.colorByObj={classColmap:d,labels:[`regular: ${p.cnum.regular}`,`extreme: ${p.cnum.extreme}`,`outliers: ${p.cnum.outliers}`],values:p.c}}}),ue(()=>{s(v).scores.plotType!=="p"?(u.scores.comp1.hidden=!0,u.scores.showEllipse.hidden=!0,s(v).scores.showEllipse=!1):(u.scores.comp1.hidden=!1,u.scores.showEllipse.hidden=!1),s(v).scores.plotType==="l"||s(v).scores.plotType==="b"?(u.scores.colorBy.hidden=!0,s(v).scores.colorBy="none"):u.scores.colorBy.hidden=!1,s(v).scores.colorBy==="variable"?u.scores.colorByVar.hidden=!1:u.scores.colorByVar.hidden=!0,s(v).scores.colorBy==="groups"&&s(v).scores.plotType==="p"?u.scores.confEllipse.hidden=!1:(u.scores.confEllipse.hidden=!0,s(v).scores.confEllipse="none")});const m=_(()=>({res:o,classres:s(c),model:e.model,simca:e.simca,data:a,ncomp:e.simca.ncomp})),h={markOutlier:e.markOutlier,showContributions:e.showContributions};wl(r,{get plots(){return s(f)},get controls(){return u},get props(){return s(m)},callbacks:h,get params(){return s(v)},set params(g){H(v,g,!0)}}),de()}var f1=Q('<div class="data-loader svelte-1qdsey6"><!></div>'),v1=Q('<div class="outliers-pane svelte-1qdsey6"><!></div>'),d1=Q('<div class="buttons"><!> <!></div>'),m1=Q('<div class="model-stats svelte-1qdsey6"><!></div> <div class="result-stats svelte-1qdsey6"><!></div>',1),h1=Q('<p class="svelte-1qdsey6"><strong>Step 1</strong></p> <p class="svelte-1qdsey6">Load previously trained DD-SIMCA model from file.</p>',1),g1=Q(`<p class="svelte-1qdsey6"><strong>Step 2</strong></p> <p class="svelte-1qdsey6">Load testset set from CSV file. The requirements to the file are the same as for the
               training set. The testset may contain class labels for each row (you need to select this option in settings after selecting CSV file) but it is not necessary, as in any case the labels will be ignored and model will assume that all samples are from the target class.</p>`,1),p1=Q(`<div class="help-text svelte-1qdsey6"><p class="svelte-1qdsey6">In this tab you can apply previously trained DD-SIMCA model to a dataset consisting of target class members (at least
            the app will assume this, you can of course provide any dataset). You can use it for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),b1=Q('<!> <div class="app-container svelte-1qdsey6"><div class="app-controls svelte-1qdsey6"><div class="model-loader svelte-1qdsey6"><!></div> <!> <!> <div class="simca-settings svelte-1qdsey6"><!> <!></div> <!></div> <div class="app-content svelte-1qdsey6"><!></div></div>',1);function y1(r,e){ve(e,!0);const t=_(()=>e.session.target);let l=re(-1),o=re(!1);function a(M){if(M<0||M>s(t).testres.pca.nrows-1)return;const W=s(t).testres.pca.objindices[M];W>=0&&!s(t).outliers.includes(W)&&(s(t).outliers.push(W),s(t).testres.simca=null,s(t).testres.pca=null)}function c(M){M<0||(H(l,M,!0),H(o,!0))}function d(){H(o,!1),H(l,-1)}function f(){s(t).outliers=[],s(t).testres.simca=null,s(t).testres.pca=null}function u(){s(t).outliers.pop(),s(t).testres.simca=null,s(t).testres.pca=null}qn(()=>{s(t).testset===null&&(s(t).outliers=[],s(t).testres.simca=null,s(t).testres.pca=null),s(t).model===null&&(s(t).outliers=[],s(t).simca=null,s(t).testres.simca=null,s(t).testres.pca=null,s(t).testset=null)}),ue(()=>{s(t).model===null&&(s(t).outliers=[],s(t).testres.simca=null,s(t).testres.pca=null,s(t).testset=null)}),ue(()=>{s(t).testset===null&&(s(t).outliers=[],s(t).testres.simca=null,s(t).testres.pca=null)}),ue(()=>{s(t).testres.pca&&s(t).simca&&(s(t).testres.simca=bl(s(t).testres.pca,_t(()=>s(t).simca.limType),s(t).simca.eCrit,s(t).simca.oCrit))}),ue(()=>{const M=_t(()=>JSON.stringify(e.session,wn));e.backupSession(M,s(t).model,s(t).testset,s(t).testres.simca,s(t).simca.ncomp),s(t).simca?e.backupSession(M,s(t).model,s(t).testset,s(t).simca.ncomp,s(t).testres.simca):e.backupSession(M,s(t).model,s(t).testset,s(t).simca,s(t).testres.simca)});var v=b1(),m=Z(v);{var h=M=>{hl(M,{get dataset(){return s(t).testset},get model(){return s(t).model},get ncomp(){return s(t).simca.ncomp},get outliers(){return s(t).outliers},get selected(){return s(l)},closeModal:d})};X(m,M=>{s(o)&&M(h)})}var g=I(m,2),p=L(g),y=L(p),b=L(y);Da(b,{get model(){return s(t).model},set model(M){s(t).model=M},get simca(){return s(t).simca},set simca(M){s(t).simca=M}});var C=I(y,2);{var A=M=>{var W=f1(),V=L(W);tl(V,{get outliers(){return s(t).outliers},get WASM(){return e.WASM},get model(){return s(t).model},className:"Class",get dataset(){return s(t).testset},set dataset(O){s(t).testset=O},get resobj(){return s(t).testres.pca},set resobj(O){s(t).testres.pca=O}}),P(M,W)};X(C,M=>{s(t).model&&M(A)})}var N=I(C,2);{var E=M=>{var W=v1(),V=L(W);rl(V,{get outliers(){return s(t).outliers},get dataset(){return s(t).testset},resetOutliers:f,undoOutliers:u}),P(M,W)};X(N,M=>{s(t).outliers&&s(t).outliers.length>0&&M(E)})}var w=I(N,2),T=L(w);{var S=M=>{pl(M,{get model(){return s(t).model},get className(){return s(t).className},get simca(){return s(t).simca},set simca(W){s(t).simca=W}})};X(T,M=>{s(t).model&&s(t).testres.pca&&M(S)})}var k=I(T,2);{var z=M=>{xe(M,{label:"Download",children:(W,V)=>{var O=d1(),D=L(O);ut(D,{onclick:()=>ls(s(t).model,s(t).simca,s(t).testres,s(t).testset,"target",s(t).outliers),text:"Res"});var J=I(D,2);ut(J,{onclick:()=>yl(s(t).model,s(t).simca),text:"Model"}),P(W,O)},$$slots:{default:!0}})};X(k,M=>{s(t).testres.simca&&M(z)})}var j=I(w,2);{var R=M=>{var W=m1(),V=Z(W),O=L(V);gl(O,{get model(){return s(t).model},get simca(){return s(t).simca}});var D=I(V,2),J=L(D);i1(J,{get res(){return s(t).testres.simca},get ncomp(){return s(t).simca.ncomp}}),P(M,W)};X(j,M=>{s(t).testres.simca&&M(R)})}var Y=I(p,2),B=L(Y);{var K=M=>{var W=p1(),V=I(L(W),2);{var O=J=>{var ee=h1();P(J,ee)},D=J=>{var ee=ge(),te=Z(ee);{var se=le=>{var fe=g1();P(le,fe)};X(te,le=>{s(t).testset||le(se)})}P(J,ee)};X(V,J=>{s(t).model?J(D,!1):J(O)})}P(M,W)},F=M=>{var W=ge(),V=Z(W);hn(V,()=>s(t).testres.pca,O=>{u1(O,Pr({markOutlier:a,showContributions:c},()=>s(t)))}),P(M,W)};X(B,M=>{s(t).testres.simca?M(F,!1):M(K)})}P(r,v),de()}var w1=Q('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">New</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">In</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Out</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Aliens</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extrenal</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Specificity</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Selectivity</td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function _1(r,e){ve(e,!0);var t=ge(),l=Z(t);{var o=a=>{var c=w1(),d=I(L(c)),f=L(d),u=I(L(f)),v=L(u),m=I(f),h=I(L(m)),g=L(h),p=I(m),y=I(L(p)),b=L(y),C=I(p),A=I(L(C)),N=L(A),E=I(C),w=I(L(E)),T=L(w),S=I(E),k=I(L(S)),z=L(k),j=I(S),R=I(L(j)),Y=L(R);ne((B,K)=>{ce(v,e.res.v[0].c.length),ce(g,e.res.v[e.ncomp-1].dnum.in),ce(b,e.res.v[e.ncomp-1].dnum.out),ce(N,e.res.v[e.ncomp-1].anum.aliens),ce(T,e.res.v[e.ncomp-1].anum.external),ce(z,B),ce(Y,K)},[()=>e.res.stat.specificity[e.ncomp-1].toFixed(3),()=>e.res.stat.selectivity[e.ncomp-1].toFixed(3)]),P(a,c)};X(l,a=>{e.res&&a(o)})}P(r,t),de()}var x1=Q("<!> <!> <!>",1),k1=Q("<!> <!> <!>",1);function E1(r,e){ve(e,!0);const t="#e0e0e0",l="Number of aliens (expected)",o="Number of aliens (observed)",a="plot-aliens";function c(k){const z=ye.zeros(k+1),j=ye.zeros(k+1),R=ye.zeros(k+1),Y=ye.zeros(k+1);for(let B=1;B<k;B++){const K=B/k,F=2*Math.sqrt(B*(1-K));z.v[B]=B,R.v[B]=B,j.v[B]=B-F,Y.v[B]=B+F}return z.v[k]=k,R.v[k]=k,j.v[k]=k,Y.v[k]=k,{xStart:z,xEnd:R,yStart:j,yEnd:Y}}function d(k,z,j){const R=k.v[j-1],Y=R.anum.aliens,B=k.nrows,K=ye.zeros(Y);for(let F=1;F<=Y;F++){const M=F/Y,W=Xn(M),V=R.m*Math.pow(R.Sz*W+R.Mz,1/R.hz);let O=0;for(let D=0;D<B;D++)R.a[D]==="alien"&&R.f[D]<V&&(O+=1);K.v[F-1]=O}return K}let f=_(()=>e.props&&e.props.classres?e.props.classres:null),u=_(()=>e.props&&e.props.simca?e.props.simca:null),v=_(()=>e.props&&e.props.ncomp?e.props.ncomp:null),m=_(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(f))),h=_(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),g=_(()=>s(m)?s(m).map(k=>({id:k,label:k,point:{marker:1,lineColor:qt[k],faceColor:jr[k],markerSize:.85,lineWidth:1.5}})):null),p=_(()=>s(f)&&s(m)?s(m).reduce((k,z)=>(k[z]=ye.seq(1,s(f)[z].v[s(v)-1].anum.aliens),k),{}):null),y=_(()=>s(f)&&s(m)&&s(v)?s(m).reduce((k,z)=>(k[z]=d(s(f)[z],s(u),s(v)),k),{}):null),b=_(()=>s(m)?s(m).reduce((k,z)=>Math.max(k,s(p)[z].length),0):1),C=_(()=>s(b)>1?c(s(b)):null),A=_(()=>s(p)?[-1,s(b)+2]:[0,1]),N=_(()=>s(p)?[-1,s(b)+2]:[0,1]),E=_(()=>s(v)?`Aliens (A = ${s(v)})`:"Aliens");var w=ge(),T=Z(w);{var S=k=>{ar(k,{get title(){return s(E)},xLabel:l,yLabel:o,get limX(){return s(A)},get limY(){return s(N)},fileName:a,whole:!0,children:(z,j)=>{var R=k1(),Y=Z(R);{var B=W=>{var V=x1(),O=Z(V);Zt(O,Pr(()=>s(C),{lineColor:t}));var D=I(O,2);Ut(D,{get xValues(){return s(C).xStart},get yValues(){return s(C).yStart},lineColor:t});var J=I(D,2);Ut(J,{get xValues(){return s(C).xEnd},get yValues(){return s(C).yEnd},lineColor:t}),P(W,V)};X(Y,W=>{s(C)&&W(B)})}var K=I(Y,2);Ie(K,17,()=>s(m),qe,(W,V)=>{$t(W,{get xValues(){return s(p)[s(V)]},get yValues(){return s(y)[s(V)]},plotType:"p",showLabels:!1,get faceColor(){return jr[s(V)]},get mainColor(){return qt[s(V)]},lineWidth:1.5})});var F=I(K,2);{var M=W=>{nn(W,{get items(){return s(g)},get position(){return s(h)}})};X(F,W=>{s(g)&&s(g).length>0&&W(M)})}P(z,R)},$$slots:{default:!0}})};X(T,k=>{s(f)&&k(S)})}P(r,w),de()}var C1=Q("<!> <!> <!> <!> <!>",1);function A1(r,e){ve(e,!0);const t="1 – selectivity, β",l="Expected sensitivity, 1 – ɑ",o="plot-selectivity-integral",a=[-.05,1.05],c=[-.05,1.05],d="bottomright",f=_(()=>e.props&&e.props.classres?e.props.classres:null),u=_(()=>e.props&&e.props.simca?e.props.simca:null),v=_(()=>s(f)?Object.keys(s(f))[0]:null),m=141;function h(R){const Y=ye.zeros(m),B=ye.zeros(m);Y.v[0]=1,B.v[0]=1;let K=1,F=0;for(let M=.001;M<.1;M=M+.002){const W=R(M);Y.v[K]=W,B.v[K]=1-M,F=F+W*.002,K=K+1}for(let M=.1;M<.9;M=M+.02){const W=R(M);Y.v[K]=W,B.v[K]=1-M,F=F+W*.02,K=K+1}for(let M=.9;M<1;M=M+.002){const W=R(M);Y.v[K]=W,B.v[K]=1-M,F=F+W*.002,K=K+1}return Y.v[K]=0,B.v[K]=0,{x:Y,y:B,auc:1-F}}let g=re(void 0),p=re(void 0),y=re(void 0);ue(()=>{(s(p)!==s(u).ncomp||s(y)!==s(u).limType)&&(H(p,s(u).ncomp,!0),H(y,s(u).limType,!0),H(g,s(f)[s(v)].v[s(u).ncomp-1],!0))});const b=_(()=>s(g)?1/(s(g).k+s(g).s):null),C=_(()=>s(g)?1/s(g).Sz:null);function A(R){if(!s(g))return null;const B=Bt(1-R,s(g).k)/s(g).f0;return Kn((Math.pow(B*s(b),s(g).hz)-s(g).Mz)*s(C))}const N=_(()=>s(u).alpha/100),E=_(()=>A(s(N))),w=_(()=>h(A));let T=_(()=>s(v)?[s(v)].map(R=>({id:R,label:R,point:{marker:1,lineColor:qt[R],faceColor:jr[R],markerSize:.85,lineWidth:1.5}})):null),S=_(()=>s(u).ncomp?`Selecitivity (A = ${s(u).ncomp}, AUC = ${s(w).auc.toFixed(4)})`:"Selectivity");var k=ge(),z=Z(k);{var j=R=>{ar(R,{get title(){return s(S)},xLabel:t,yLabel:l,limX:a,limY:c,fileName:o,children:(Y,B)=>{var K=C1(),F=Z(K);Zt(F,{xStart:[0],xEnd:[1],yStart:[0],yEnd:[1],lineColor:"#a0a0a0",lineType:3});var M=I(F,2);$t(M,{get xValues(){return s(w).x},get yValues(){return s(w).y},plotType:"l",showLabels:!1,lineWidth:1.5});var W=I(M,2);const V=_(()=>[a[0]]),O=_(()=>[a[1]]),D=_(()=>[1-s(N)]),J=_(()=>[1-s(N)]);Zt(W,{get xStart(){return s(V)},get xEnd(){return s(O)},get yStart(){return s(D)},get yEnd(){return s(J)},lineColor:"#a0a0a0"});var ee=I(W,2);const te=_(()=>[s(E)]),se=_(()=>[1-s(N)]);Na(ee,{get xValues(){return s(te)},get yValues(){return s(se)},lineColor:"#a0a0a0",lineWidth:2,get faceColor(){return gt.PRIMARY}});var le=I(ee,2);{var fe=he=>{nn(he,{get items(){return s(T)},position:d})};X(le,he=>{s(T)&&s(T).length>0&&he(fe)})}P(Y,K)},$$slots:{default:!0}})};X(z,R=>{s(w)&&R(j)})}P(r,k),de()}function S1(r,e){ve(e,!0);const t={alt:e.altres.pca},l={alt:e.altset},o=_(()=>({alt:e.altres.simca})),a={alien:kr.aliens,external:kr.external};let c=null;if(e.altres.simca.classNames&&e.altres.simca.classNames.length>1){const h=e.altres.simca.classNames?e.altres.simca.classNames.length:0,g=h>0?fl(h):null;c=e.altres.simca.classNames.reduce((p,y,b)=>(p[y]=g[b],p),{})}const d=_(()=>({acceptance:{label:"Acceptance",scope:"objects",component:_l},distances:{label:"Distances",scope:"objects",component:xl},aliens:{label:"Aliens",scope:"stat",component:E1},specificity:{label:"Specificity",scope:"stat",component:os},selectivity:{label:"Selectivity (vs PCs)",scope:"stat",component:os},selectivityInt:{label:"Selectivity (integral)",scope:"stat",component:A1},scores:{label:"Scores",scope:"objects",component:kl}})),f=Ue({acceptance:El(t),distances:Cl(t),aliens:Vd(["alt"]),specificity:as(["alt"]),selectivity:as(["alt"]),selectivityInt:Od(["alt"]),scores:Al(t)});let u=re(Ue({acceptance:ft(f.acceptance),distances:ft(f.distances),aliens:ft(f.aliens),specificity:ft(f.specificity),selectivity:ft(f.selectivity),selectivityInt:ft(f.selectivityInt),scores:ft(f.scores)}));ue(()=>{s(u).specificity.title="Specificity",s(u).specificity.statName="specificity"}),ue(()=>{s(u).selectivity.title="Selectivity",s(u).selectivity.statName="selectivity"}),ue(()=>{s(u).acceptance.ncomp=e.simca.ncomp,s(u).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(u).acceptance.limType=e.simca.limType,s(u).acceptance.alpha=e.simca.alpha,s(u).acceptance.gamma=e.simca.gamma}),ue(()=>{s(u)&&s(u).acceptance&&(f.acceptance.colorBy.hidden=c===null)}),ue(()=>{if(e.simca.limType){const g={alt:e.altres.simca}[s(u).acceptance.resID].v[e.simca.ncomp-1];s(u).acceptance.colorBy==="classes"?s(u).acceptance.colorByObj={classColmap:c,labels:e.altres.simca.classNames,values:e.altres.simca.classes}:s(u).acceptance.colorByObj={classColmap:a,labels:[`aliens: ${g.anum.aliens}`,`external: ${g.anum.external}`],values:g.a}}}),ue(()=>{s(u).scores.plotType!=="p"?(f.scores.comp1.hidden=!0,f.scores.showEllipse.hidden=!0,s(u).scores.showEllipse=!1):(f.scores.comp1.hidden=!1,f.scores.showEllipse.hidden=!1),s(u).scores.plotType==="l"||s(u).scores.plotType==="b"?(f.scores.colorBy.hidden=!0,s(u).scores.colorBy="none"):f.scores.colorBy.hidden=!1,s(u).scores.colorBy==="variable"?f.scores.colorByVar.hidden=!1:f.scores.colorByVar.hidden=!0,s(u).scores.colorBy==="groups"&&s(u).scores.plotType==="p"?f.scores.confEllipse.hidden=!1:(f.scores.confEllipse.hidden=!0,s(u).scores.confEllipse="none")});const v=_(()=>({res:t,classres:s(o),model:e.model,simca:e.simca,data:l,ncomp:e.simca.ncomp})),m={markOutlier:e.markOutlier,showContributions:e.showContributions};wl(r,{get plots(){return s(d)},get controls(){return f},get props(){return s(v)},callbacks:m,get params(){return s(u)},set params(h){H(u,h,!0)}}),de()}var N1=Q('<div class="data-loader svelte-1qdsey6"><!></div>'),M1=Q('<div class="outliers-pane svelte-1qdsey6"><!></div>'),T1=Q('<div class="buttons"><!> <!></div>'),z1=Q('<div class="model-stats svelte-1qdsey6"><!></div> <div class="result-stats svelte-1qdsey6"><!></div>',1),P1=Q('<p class="svelte-1qdsey6"><strong>Step 1</strong></p> <p class="svelte-1qdsey6">Load previously trained DD-SIMCA model from file.</p>',1),I1=Q(`<p class="svelte-1qdsey6"><strong>Step 2</strong></p> <p class="svelte-1qdsey6">Load data set from CSV file. The requirements to the file are the same as for the
               training set. The data may contain class labels for each row (you need to select this option in settings after selecting CSV file) but it is not necessary, as in any case the labels will be ignored and model will assume that all samples are from non-target classes.</p>`,1),L1=Q('<div class="help-text svelte-1qdsey6"><p class="svelte-1qdsey6">In this tab you can apply previously trained DD-SIMCA model to a dataset consisting of non-target (alternative) class members (at least the app will assume this, you can of course provide any dataset). You can use it for testing performance of the model on the alternative classes, or tune its parameters, if necessary.</p> <!></div>'),R1=Q('<!> <div class="app-container svelte-1qdsey6"><div class="app-controls svelte-1qdsey6"><div class="model-loader svelte-1qdsey6"><!></div> <!> <!> <div class="simca-settings svelte-1qdsey6"><!> <!></div> <!></div> <div class="app-content svelte-1qdsey6"><!></div></div>',1);function j1(r,e){ve(e,!0);const t=_(()=>e.session.new);let l=re(-1),o=re(!1);function a(F){if(F<0||F>s(t).altres.pca.nrows-1)return;const M=s(t).altres.pca.objindices[F];M>=0&&!s(t).outliers.includes(M)&&(s(t).outliers.push(M),s(t).altres.simca=null,s(t).altres.pca=null)}function c(F){F<0||(H(l,F,!0),H(o,!0))}function d(){H(o,!1),H(l,-1)}function f(){s(t).outliers=[],s(t).altres.simca=null,s(t).altres.pca=null}qn(()=>{s(t).altset===null&&(s(t).outliers=[],s(t).altres.simca=null,s(t).altres.pca=null),s(t).model===null&&(s(t).outliers=[],s(t).simca=null,s(t).altres.simca=null,s(t).altres.pca=null,s(t).altset=null)}),ue(()=>{s(t).model===null&&(s(t).outliers=[],s(t).altres.simca=null,s(t).altres.pca=null,s(t).altset=null)}),ue(()=>{s(t).altset===null&&(s(t).outliers=[],s(t).altres.simca=null,s(t).altres.pca=null)}),ue(()=>{s(t).altres.pca&&s(t).simca&&(s(t).altres.simca=rd(s(t).altres.pca,_t(()=>s(t).simca.limType),_t(()=>s(t).simca.Nf),s(t).simca.eCrit,s(t).simca.oCrit))}),ue(()=>{const F=_t(()=>JSON.stringify(e.session,wn));e.backupSession(F,s(t).model,s(t).altset,s(t).altres.simca,s(t).simca.ncomp)});var u=R1(),v=Z(u);{var m=F=>{hl(F,{get dataset(){return s(t).altset},get model(){return s(t).model},get ncomp(){return s(t).simca.ncomp},get outliers(){return s(t).outliers},get selected(){return s(l)},closeModal:d})};X(v,F=>{s(o)&&F(m)})}var h=I(v,2),g=L(h),p=L(g),y=L(p);Da(y,{get model(){return s(t).model},set model(F){s(t).model=F},get simca(){return s(t).simca},set simca(F){s(t).simca=F}});var b=I(p,2);{var C=F=>{var M=N1(),W=L(M);tl(W,{get outliers(){return s(t).outliers},get WASM(){return e.WASM},get model(){return s(t).model},className:"Class",get dataset(){return s(t).altset},set dataset(V){s(t).altset=V},get resobj(){return s(t).altres.pca},set resobj(V){s(t).altres.pca=V}}),P(F,M)};X(b,F=>{s(t).model&&F(C)})}var A=I(b,2);{var N=F=>{var M=M1(),W=L(M);rl(W,{get outliers(){return s(t).outliers},get dataset(){return s(t).altset},resetOutliers:f}),P(F,M)};X(A,F=>{s(t).outliers&&s(t).outliers.length>0&&F(N)})}var E=I(A,2),w=L(E);{var T=F=>{pl(F,{get model(){return s(t).model},get className(){return s(t).className},isAlt:!0,get simca(){return s(t).simca},set simca(M){s(t).simca=M}})};X(w,F=>{s(t).model&&s(t).altres.pca&&F(T)})}var S=I(w,2);{var k=F=>{xe(F,{label:"Download",children:(M,W)=>{var V=T1(),O=L(V);ut(O,{onclick:()=>ls(s(t).model,s(t).simca,s(t).altres,s(t).altset,"new",s(t).outliers),text:"Res"});var D=I(O,2);ut(D,{onclick:()=>yl(s(t).model,s(t).simca),text:"Model"}),P(M,V)},$$slots:{default:!0}})};X(S,F=>{s(t).altres.simca&&F(k)})}var z=I(E,2);{var j=F=>{var M=z1(),W=Z(M),V=L(W);gl(V,{get model(){return s(t).model},get simca(){return s(t).simca},isAlt:!0});var O=I(W,2),D=L(O);_1(D,{get res(){return s(t).altres.simca},get ncomp(){return s(t).simca.ncomp}}),P(F,M)};X(z,F=>{s(t).altres.simca&&F(j)})}var R=I(g,2),Y=L(R);{var B=F=>{var M=L1(),W=I(L(M),2);{var V=D=>{var J=P1();P(D,J)},O=D=>{var J=ge(),ee=Z(J);{var te=se=>{var le=I1();P(se,le)};X(ee,se=>{s(t).altset||se(te)})}P(D,J)};X(W,D=>{s(t).model?D(O,!1):D(V)})}P(F,M)},K=F=>{var M=ge(),W=Z(M);hn(W,()=>s(t).altres.pca,V=>{S1(V,Pr({markOutlier:a,showContributions:c},()=>s(t)))}),P(F,M)};X(Y,F=>{s(t).altres.simca?F(K,!1):F(B)})}P(r,u),de()}function Oa(r,e){H(e,!0)}function q1(r,e,t){const l=Zs(new Date),o=e.appID+"-session-"+l+".json";s(t).date=l;const a=JSON.stringify(s(t),wn),c=new Blob([a],{type:"text/json"}),d=window.URL.createObjectURL(c),f=document.createElement("a");f.setAttribute("href",d),f.setAttribute("download",o),f.click()}function F1(r,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var D1=Q('<sup style="color:red">β</sup>'),O1=Q('<li><button class="svelte-1cyr8za"> </button></li>'),V1=Q("<div><!></div>"),B1=Q('<div class="info-container svelte-1cyr8za"><!></div>'),Y1=Q('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function W1(r,e){ve(e,!0);let t=G(e,"tabs",19,()=>[]),l=G(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let a=re(!1),c=re(void 0),d=re("Current session "),f=re(!1);function u(E){H(d,E,!0),H(f,!0),setTimeout(()=>{H(d,"Current session "),H(f,!1)},1e3)}function v(){H(a,!1)}function m(E){s(c).tab=E}function h(){const E=indexedDB.open(o,1);E.onsuccess=w=>{const S=w.target.result.transaction(e.appID,"readwrite");S.objectStore(e.appID).delete("session"),S.oncomplete=()=>{H(c,e.initSession(),!0),u("Session was reinitialzed.")},S.onerror=()=>console.error("Failed to session from DB.")}}function g(E,w){window.localStorage.removeItem(e.appID+"-blocked");const T=indexedDB.open(o,1);T.onsuccess=S=>{const j=S.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);j.put(E,"session"),j.put(Zs(new Date),"session-update")}}function p(){new Promise((E,w)=>{const T=indexedDB.open(o,1);T.onsuccess=S=>{const R=S.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");R.onsuccess=()=>E(R.result),R.onerror=()=>w(R.error)}}).then(E=>{y(E),H(d,"Last session is restored "),H(f,!0),setTimeout(()=>{H(d,"Current session "),H(f,!1)},1500)}).catch(E=>{console.error(E),H(c,e.initSession(),!0)})}function y(E){if(!E||E==="undefined"){H(c,e.initSession(),!0);return}const w=JSON.parse(E,ta);H(c,e.checkSession(w)?w:e.initSession(e.appID),!0)}function b(E){e.resetSession(s(c));const w=new FileReader;w.onload=()=>{y(w.result),E.target.value=""},w.readAsText(E.target.files[0])}_c(()=>{const E=e.appID,w=indexedDB.open(o,1);w.onupgradeneeded=T=>{const S=T.target.result;S.objectStoreNames.contains(E)||S.createObjectStore(E)},w.onsuccess=T=>{p()}});var C=ge(),A=Z(C);{var N=E=>{var w=Y1(),T=L(w),S=L(T),k=L(S),z=I(k,2),j=L(z),R=I(j);{var Y=ie=>{var oe=D1();P(ie,oe)};X(R,ie=>{l()&&ie(Y)})}var B=I(z,2),K=L(B),F=I(S,2);Ie(F,21,t,qe,(ie,oe,Me)=>{var _e=O1();let Ae;var ke=L(_e);ke.__click=()=>m(Me),ke.__keydown=()=>m(Me);var nt=L(ke);ne(kt=>{Ae=ht(_e,1,"nav-item svelte-1cyr8za",null,Ae,kt),ce(nt,s(oe).name)},[()=>({selected:s(c).tab===Me})]),P(ie,_e)});var M=I(T,2);Ie(M,21,t,qe,(ie,oe,Me)=>{var _e=V1();let Ae;var ke=L(_e);Ps(ke,()=>s(oe).component,(nt,kt)=>{kt(nt,{get WASM(){return e.WASM},get session(){return s(c)},backupSession:g})}),ne(nt=>Ae=ht(_e,1,"tab-content svelte-1cyr8za",null,Ae,nt),[()=>({hidden:s(c).tab!==Me})]),P(ie,_e)});var W=I(M,2),V=L(W);let O;var D=L(V),J=L(D),ee=I(D,2),te=L(ee);te.__change=b;var se=I(ee,2);se.__click=[q1,e,c];var le=I(se,2);le.__click=[F1,h];var fe=I(V,2),he=L(fe);he.__click=[Oa,a],he.__keydown=[Oa,a];var Ce=I(he,2);zr(Ce,()=>e.footer);var be=I(W,2);{var ae=ie=>{Ta(ie,{closeModal:v,children:(oe,Me)=>{var _e=B1(),Ae=L(_e);zr(Ae,()=>e.info),P(oe,_e)},$$slots:{default:!0}})};X(be,ie=>{s(a)&&ie(ae)})}ne(ie=>{q(k,"alt",e.appShortTitle),ce(j,e.appTitle),ce(K,e.appSlogan),O=ht(V,1,"session svelte-1cyr8za",null,O,ie),ce(J,s(d))},[()=>({"no-buttons":s(f)})]),P(E,w)};X(A,E=>{s(c)&&E(N)})}P(r,C),de()}et(["click","keydown","change"]);const t0="modulepreload",r0=function(r){return"/"+r},n0={},U1=function(e,t,l){let o=Promise.resolve();function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var H1=(()=>{var r=Ne&&Ne.tagName.toUpperCase()==="SCRIPT"&&Ne.src||new URL("ddsimca.js",document.baseURI).href;return async function(e={}){var t,l=e,o,a,c=new Promise((U,$)=>{o=U,a=$}),d=typeof window=="object",f=typeof WorkerGlobalScope<"u",u=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(u){const{createRequire:U}=await U1(()=>Promise.resolve().then(()=>J1),void 0);var v=U(Ne&&Ne.tagName.toUpperCase()==="SCRIPT"&&Ne.src||new URL("ddsimca.js",document.baseURI).href)}var m={...l},h=(U,$)=>{throw $},g="";function p(U){return l.locateFile?l.locateFile(U,g):g+U}var y,b;if(u){var C=v("fs"),A=v("path");(Ne&&Ne.tagName.toUpperCase()==="SCRIPT"&&Ne.src||new URL("ddsimca.js",document.baseURI).href).startsWith("data:")||(g=A.dirname(v("url").fileURLToPath(Ne&&Ne.tagName.toUpperCase()==="SCRIPT"&&Ne.src||new URL("ddsimca.js",document.baseURI).href))+"/"),b=U=>{U=j(U)?new URL(U):U;var $=C.readFileSync(U);return $},y=async(U,$=!0)=>{U=j(U)?new URL(U):U;var me=C.readFileSync(U,$?void 0:"utf8");return me},!l.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),h=(U,$)=>{throw process.exitCode=U,$}}else(d||f)&&(f?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),r&&(g=r),g.startsWith("blob:")?g="":g=g.slice(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),f&&(b=U=>{var $=new XMLHttpRequest;return $.open("GET",U,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}),y=async U=>{if(j(U))return new Promise((me,Be)=>{var je=new XMLHttpRequest;je.open("GET",U,!0),je.responseType="arraybuffer",je.onload=()=>{if(je.status==200||je.status==0&&je.response){me(je.response);return}Be(je.status)},je.onerror=Be,je.send(null)});var $=await fetch(U,{credentials:"same-origin"});if($.ok)return $.arrayBuffer();throw new Error($.status+" : "+$.url)});l.print||console.log.bind(console);var N=l.printErr||console.error.bind(console);Object.assign(l,m),m=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram;var E=l.wasmBinary,w,T=!1,S,k,z,j=U=>U.startsWith("file://");function R(){var U=w.buffer;l.HEAP8=k=new Int8Array(U),l.HEAP16=new Int16Array(U),l.HEAPU8=z=new Uint8Array(U),l.HEAPU16=new Uint16Array(U),l.HEAP32=new Int32Array(U),l.HEAPU32=new Uint32Array(U),l.HEAPF32=new Float32Array(U),l.HEAPF64=new Float64Array(U),l.HEAP64=new BigInt64Array(U),l.HEAPU64=new BigUint64Array(U)}function Y(){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)Me(l.preRun.shift());be(oe)}function B(){ct.h()}function K(){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)ie(l.postRun.shift());be(ae)}var F=0,M=null;function W(U){var $;F++,($=l.monitorRunDependencies)==null||$.call(l,F)}function V(U){var me;if(F--,(me=l.monitorRunDependencies)==null||me.call(l,F),F==0&&M){var $=M;M=null,$()}}function O(U){var me;(me=l.onAbort)==null||me.call(l,U),U="Aborted("+U+")",N(U),T=!0,U+=". Build with -sASSERTIONS for more info.";var $=new WebAssembly.RuntimeError(U);throw a($),$}var D;function J(){return l.locateFile?p("pca_wasm.wasm"):new URL("/ddsimca/ddsimca.wasm",Ne&&Ne.tagName.toUpperCase()==="SCRIPT"&&Ne.src||new URL("ddsimca.js",document.baseURI).href).href}function ee(U){if(U==D&&E)return new Uint8Array(E);if(b)return b(U);throw"both async and sync fetching of the wasm failed"}async function te(U){if(!E)try{var $=await y(U);return new Uint8Array($)}catch{}return ee(U)}async function se(U,$){try{var me=await te(U),Be=await WebAssembly.instantiate(me,$);return Be}catch(je){N(`failed to asynchronously prepare wasm: ${je}`),O(je)}}async function le(U,$,me){if(!U&&typeof WebAssembly.instantiateStreaming=="function"&&!j($)&&!u)try{var Be=fetch($,{credentials:"same-origin"}),je=await WebAssembly.instantiateStreaming(Be,me);return je}catch(Xe){N(`wasm streaming compile failed: ${Xe}`),N("falling back to ArrayBuffer instantiation")}return se($,me)}function fe(){return{a:Ht}}async function he(){function U(Xe,$e){return ct=Xe.exports,w=ct.g,R(),V(),ct}W();function $(Xe){return U(Xe.instance)}var me=fe();if(l.instantiateWasm)return new Promise((Xe,$e)=>{l.instantiateWasm(me,(He,mr)=>{U(He),Xe(He.exports)})});D??(D=J());try{var Be=await le(E,D,me),je=$(Be);return je}catch(Xe){return a(Xe),Promise.reject(Xe)}}class Ce{constructor($){Dr(this,"name","ExitStatus");this.message=`Program terminated with exit(${$})`,this.status=$}}var be=U=>{for(;U.length>0;)U.shift()(l)},ae=[],ie=U=>ae.unshift(U),oe=[],Me=U=>oe.unshift(U),_e=l.noExitRuntime||!0,Ae=U=>we(U),ke=()=>Pl(),nt=()=>O(""),kt=0,yt=()=>{_e=!1,kt=0},Ve={},Je=U=>{if(U instanceof Ce||U=="unwind")return S;h(1,U)},Cr=()=>_e||kt>0,Ar=U=>{var $;S=U,Cr()||(($=l.onExit)==null||$.call(l,U),T=!0),h(U,new Ce(U))},us=(U,$)=>{S=U,Ar(U)},fs=us,ln=()=>{if(!Cr())try{fs(S)}catch(U){Je(U)}},Sl=U=>{if(!T)try{U(),ln()}catch($){Je($)}},Nl=()=>performance.now(),Ml=(U,$)=>{if(Ve[U]&&(clearTimeout(Ve[U].id),delete Ve[U]),!$)return 0;var me=setTimeout(()=>{delete Ve[U],Sl(()=>Oe(U,Nl()))},$);return Ve[U]={id:me,timeout_ms:$},0},Tl=()=>Date.now(),zl=()=>2147483648,Ee=(U,$)=>Math.ceil(U/$)*$,Pe=U=>{var $=w.buffer,me=(U-$.byteLength+65535)/65536|0;try{return w.grow(me),R(),1}catch{}},ze=U=>{var $=z.length;U>>>=0;var me=zl();if(U>me)return!1;for(var Be=1;Be<=4;Be*=2){var je=$*(1+.2/Be);je=Math.min(je,U+100663296);var Xe=Math.min(me,Ee(Math.max(U,je),65536)),$e=Pe(Xe);if($e)return!0}return!1},ot=U=>{var $=l["_"+U];return $},Et=(U,$)=>{k.set(U,$)},er=U=>{for(var $=0,me=0;me<U.length;++me){var Be=U.charCodeAt(me);Be<=127?$++:Be<=2047?$+=2:Be>=55296&&Be<=57343?($+=4,++me):$+=3}return $},zt=(U,$,me,Be)=>{if(!(Be>0))return 0;for(var je=me,Xe=me+Be-1,$e=0;$e<U.length;++$e){var He=U.charCodeAt($e);if(He>=55296&&He<=57343){var mr=U.charCodeAt(++$e);He=65536+((He&1023)<<10)|mr&1023}if(He<=127){if(me>=Xe)break;$[me++]=He}else if(He<=2047){if(me+1>=Xe)break;$[me++]=192|He>>6,$[me++]=128|He&63}else if(He<=65535){if(me+2>=Xe)break;$[me++]=224|He>>12,$[me++]=128|He>>6&63,$[me++]=128|He&63}else{if(me+3>=Xe)break;$[me++]=240|He>>18,$[me++]=128|He>>12&63,$[me++]=128|He>>6&63,$[me++]=128|He&63}}return $[me]=0,me-je},Pt=(U,$,me)=>zt(U,z,$,me),Ye=U=>wt(U),Le=U=>{var $=er(U)+1,me=Ye($);return Pt(U,me,$),me},pt=typeof TextDecoder<"u"?new TextDecoder:void 0,dt=(U,$=0,me=NaN)=>{for(var Be=$+me,je=$;U[je]&&!(je>=Be);)++je;if(je-$>16&&U.buffer&&pt)return pt.decode(U.subarray($,je));for(var Xe="";$<je;){var $e=U[$++];if(!($e&128)){Xe+=String.fromCharCode($e);continue}var He=U[$++]&63;if(($e&224)==192){Xe+=String.fromCharCode(($e&31)<<6|He);continue}var mr=U[$++]&63;if(($e&240)==224?$e=($e&15)<<12|He<<6|mr:$e=($e&7)<<18|He<<12|mr<<6|U[$++]&63,$e<65536)Xe+=String.fromCharCode($e);else{var qr=$e-65536;Xe+=String.fromCharCode(55296|qr>>10,56320|qr&1023)}}return Xe},at=(U,$)=>U?dt(z,U,$):"",Qe=(U,$,me,Be,je)=>{var Xe={string:Ft=>{var An=0;return Ft!=null&&Ft!==0&&(An=Le(Ft)),An},array:Ft=>{var An=Ye(Ft.length);return Et(Ft,An),An}};function $e(Ft){return $==="string"?at(Ft):$==="boolean"?!!Ft:Ft}var He=ot(U),mr=[],qr=0;if(Be)for(var Fr=0;Fr<Be.length;Fr++){var Ba=Xe[me[Fr]];Ba?(qr===0&&(qr=ke()),mr[Fr]=Ba(Be[Fr])):mr[Fr]=Be[Fr]}var Il=He(...mr);function Q1(Ft){return qr!==0&&Ae(qr),$e(Ft)}return Il=Q1(Il),Il},Ht={c:nt,b:yt,d:Ml,f:Tl,e:ze,a:Ar},ct=await he();ct.h,l._pcafit_wasm=ct.i,l._malloc=ct.j,l._free=ct.k,l._pcapredict_wasm=ct.l,l._pcvpca_wasm=ct.m;var Oe=ct.o,we=ct.p,wt=ct.q,Pl=ct.r;l.ccall=Qe;function tr(){if(F>0){M=tr;return}if(Y(),F>0){M=tr;return}function U(){var $;l.calledRun=!0,!T&&(B(),o(l),($=l.onRuntimeInitialized)==null||$.call(l),K())}l.setStatus?(l.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>l.setStatus(""),1),U()},1)):U()}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();return tr(),t=c,t}})(),G1=Q('<p>Current release: <span>2.1.8</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=DDSIMCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="Oregano.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmoOR8sWDt7vJdnOCHvPEo2">video lessons</a></p>'),K1=Q(`<h2>Data Driven SIMCA</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using DD-SIMCA one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check our open access <a href="https://doi.org/10.1002/cem.3556">tutorial paper</a> and YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmoOR8sWDt7vJdnOCHvPEo2">video-lessons</a></p><p>Related theory: <a href="https://doi.org/10.1002/cem.2506">10.1002/cem.2506</a>, <a href="https://doi.org/10.1002/cem.2610">10.1002/cem.2610</a>, <a href="https://doi.org/10.1002/cem.3250">10.1002/cem.3250</a>, <a href="https://doi.org/10.1016/j.aca.2024.343352">10.1016/j.aca.2024.343352</a>.</p> <h3>v. 2.1.8</h3> <p class="release-info">released 16/04/2025</p> <ul><li>App now remembers the plot settings when you switch between plots.</li> <li>Introducing sessons — app states, including model, results, datasets, and outliers
         (in all tabs). When you close tab or app window or click on reboot button, the current
         session is saved to browser's local storage and then is restored automatically. You can
         also download session as a file and load it from file.</li> <li>Added undo option for outliers (if more than one is removed).</li> <li>More robust CSV converter which filters out empty rows created by some versions of MS Excel.</li> <li>Results for alternative set also contains parameters <em>s</em> and <em>f'<sub>0</sub></em> for LoD estimation.</li> <li>Many small improvements to plots and control elements.</li></ul>`,1);function X1(r,e){ve(e,!1);function t(c){c.train.dataset=null,c.target.model=null,c.new.model=null,c.tab=0}function l(c){const d=Object.keys(c);if(!["date","tab","train","target","new"].every(m=>d.includes(m)))return!1;/*!!!!change because in this case different tabs have different fields!!!*/const f=Object.keys(c.train);if(!["model","simca","calset","pvset","calres","pvres","outliers"].every(m=>f.includes(m)))return!1;const u=Object.keys(c.target);if(!["model","simca","testset","testres","outliers"].every(m=>u.includes(m)))return!1;const v=Object.keys(c.new);return!!["model","simca","altset","altres","outliers"].every(m=>v.includes(m))}function o(){return{date:Zs(new Date),tab:0,train:{model:0,simca:0,calset:0,pvset:0,calres:{pca:0,simca:0},pvres:{pca:0,simca:0},outliers:[]},target:{model:0,simca:0,testset:0,testres:{pca:0,simca:0},outliers:[]},new:{model:0,simca:0,altset:0,altres:{pca:0,simca:0},outliers:[]}}}const a=[{name:"Train",label:"train",component:r1},{name:"Predict: Target",label:"target",component:y1},{name:"Predict: New",label:"new",component:j1}];gc(),W1(r,{appID:"ddsimca",appTitle:"Data Driven SIMCA",appShortTitle:"DD-SIMCA",appSlogan:"One class classifier",WASM:H1,tabs:a,initSession:o,checkSession:l,resetSession:t,footer:f=>{var u=G1();P(f,u)},info:f=>{var u=K1();P(f,u)},$$slots:{footer:!0,info:!0}}),de()}Xi(X1,{target:document.body});const J1=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=ddsimca.js.map
