(function(){"use strict";var ta=document.createElement("style");ta.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-142p4sy{display:none}.selector.svelte-142p4sy{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-142p4sy{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-142p4sy:not(.selected):hover{border:1px solid}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;inset:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.wrapper.svelte-1di9qjd{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-1di9qjd{grid-area:plot}.plot-controls.svelte-1di9qjd{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-1di9qjd>.control-element{background:transparent}.msg-select.svelte-1di9qjd{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1fhdfcc{width:100%;border-collapse:collapse}tr.svelte-1fhdfcc{width:100%}th.svelte-1fhdfcc{border-bottom:1px solid #a0a0a0}th.svelte-1fhdfcc,td.svelte-1fhdfcc{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1fhdfcc{text-align:left;padding:.1em .5em}table.svelte-1bca91p{width:100%;border-collapse:collapse}tr.svelte-1bca91p{width:100%}th.svelte-1bca91p{border-bottom:1px solid #a0a0a0}th.svelte-1bca91p,td.svelte-1bca91p{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1bca91p{text-align:left;padding:.1em .5em}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(325px,30%) 1fr}}.model-info.svelte-7h7avz{line-height:1.5em}.model-info.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-k5uafz{width:100%;border-collapse:collapse}tr.svelte-k5uafz{width:100%}th.svelte-k5uafz{border-bottom:1px solid #a0a0a0}tr.section.svelte-k5uafz>td:where(.svelte-k5uafz){border-top:1px solid #a0a0a0}th.svelte-k5uafz,td.svelte-k5uafz{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-k5uafz{text-align:left;padding:.1em .5em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(325px,30%) 1fr}}table.svelte-vm8g95{width:100%;border-collapse:collapse}tr.svelte-vm8g95{width:100%}th.svelte-vm8g95{border-bottom:1px solid #a0a0a0}th.svelte-vm8g95,td.svelte-vm8g95{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-vm8g95{text-align:left;padding:.1em .5em}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){background:#e8e8e8}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(325px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(ta);var yr=typeof document<"u"?document.currentScript:null;const Fs=!1;var Os=Array.isArray,wi=Array.prototype.indexOf,ts=Array.from,yi=Object.defineProperty,Ir=Object.getOwnPropertyDescriptor,ra=Object.getOwnPropertyDescriptors,na=Object.prototype,xi=Array.prototype,rs=Object.getPrototypeOf,sa=Object.isExtensible;function pn(s){return typeof s=="function"}const vt=()=>{};function ki(s){return typeof s?.then=="function"}function Ei(s){return s()}function Ds(s){for(var e=0;e<s.length;e++)s[e]()}function la(){var s,e,t=new Promise((l,a)=>{s=l,e=a});return{promise:t,resolve:s,reject:e}}function Bs(s,e){if(Array.isArray(s))return s;if(e===void 0||!(Symbol.iterator in s))return Array.from(s);const t=[];for(const l of s)if(t.push(l),t.length===e)break;return t}const wt=2,Vs=4,ns=8,Si=1<<24,fr=16,xr=32,Gr=64,ss=128,nr=512,Nt=1024,zt=2048,dr=4096,Wt=8192,kr=16384,ls=32768,Er=65536,aa=1<<17,oa=1<<18,bn=1<<19,ia=1<<20,Sr=1<<25,Xr=32768,Ys=1<<21,Ws=1<<22,Rr=1<<23,zr=Symbol("$state"),ca=Symbol("legacy props"),Ci=Symbol(""),_n=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ua(s){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ni(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ai(s){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ti(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Mi(s){throw new Error("https://svelte.dev/e/effect_orphan")}function ji(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pi(s){throw new Error("https://svelte.dev/e/props_invalid_value")}function Li(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ii(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ri(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function zi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const qi=1,Fi=2,fa=4,Oi=8,Di=16,Bi=1,Vi=2,Yi=4,Wi=8,Ui=16,Hi=1,Gi=2,Xi=4,da=1,Ki=2,yt=Symbol(),Ji="http://www.w3.org/1999/xhtml";function Zi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function va(s){return s===this.v}function Qi(s,e){return s!=s?e==e:s!==e||s!==null&&typeof s=="object"||typeof s=="function"}function ma(s){return!Qi(s,this.v)}let wn=!1,$i=!1;function ec(){wn=!0}const tc=[];function rc(s,e=!1,t=!1){return as(s,new Map,"",tc,null,t)}function as(s,e,t,l,a=null,o=!1){if(typeof s=="object"&&s!==null){var c=e.get(s);if(c!==void 0)return c;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(Os(s)){var d=Array(s.length);e.set(s,d),a!==null&&e.set(a,d);for(var u=0;u<s.length;u+=1){var f=s[u];u in s&&(d[u]=as(f,e,t,l,null,o))}return d}if(rs(s)===na){d={},e.set(s,d),a!==null&&e.set(a,d);for(var v in s)d[v]=as(s[v],e,t,l,null,o);return d}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function"&&!o)return as(s.toJSON(),e,t,l,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}let st=null;function yn(s){st=s}function qt(s){return ha().get(s)}function nc(s,e){return ha().set(s,e),e}function ye(s,e=!1,t){st={p:st,i:!1,c:null,e:null,s,x:null,l:wn&&!e?{s:null,u:null,$:[]}:null}}function xe(s){var e=st,t=e.e;if(t!==null){e.e=null;for(var l of t)Ra(l)}return e.i=!0,st=e.p,{}}function Kr(){return!wn||st!==null&&st.l===null}function ha(s){return st===null&&ua(),st.c??=new Map(sc(st)||void 0)}function sc(s){let e=s.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}let Jr=[];function ga(){var s=Jr;Jr=[],Ds(s)}function qr(s){if(Jr.length===0&&!kn){var e=Jr;queueMicrotask(()=>{e===Jr&&ga()})}Jr.push(s)}function lc(){for(;Jr.length>0;)ga()}function pa(s){var e=Ke;if(e===null)return He.f|=Rr,s;if((e.f&ls)===0){if((e.f&ss)===0)throw s;e.b.error(s)}else xn(s,e)}function xn(s,e){for(;e!==null;){if((e.f&ss)!==0)try{e.b.error(s);return}catch(t){s=t}e=e.parent}throw s}const os=new Set;let $e=null,is=null,Zt=null,Qt=[],cs=null,Us=!1,kn=!1;class sr{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#i=null;#l=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){Qt=[],is=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const l of e)this.#a(l,t);this.is_fork||this.#u(),this.is_deferred()?(this.#o(t.effects),this.#o(t.render_effects)):(is=this,$e=null,wa(t.render_effects),wa(t.effects),is=null,this.#i?.resolve()),Zt=null}#a(e,t){e.f^=Nt;for(var l=e.first;l!==null;){var a=l.f,o=(a&(xr|Gr))!==0,c=o&&(a&Nt)!==0,d=c||(a&Wt)!==0||this.skipped_effects.has(l);if((l.f&ss)!==0&&l.b?.is_pending()&&(t={parent:t,effect:l,effects:[],render_effects:[]}),!d&&l.fn!==null){o?l.f^=Nt:(a&Vs)!==0?t.effects.push(l):qn(l)&&((l.f&fr)!==0&&this.#l.add(l),Fn(l));var u=l.first;if(u!==null){l=u;continue}}var f=l.parent;for(l=l.next;l===null&&f!==null;)f===t.effect&&(this.#o(t.effects),this.#o(t.render_effects),t=t.parent),l=f.next,f=f.parent}}#o(e){for(const t of e)(t.f&zt)!==0?this.#l.add(t):(t.f&dr)!==0&&this.#s.add(t),this.#c(t.deps),At(t,Nt)}#c(e){if(e!==null)for(const t of e)(t.f&wt)===0||(t.f&Xr)===0||(t.f^=Xr,this.#c(t.deps))}capture(e,t){this.previous.has(e)||this.previous.set(e,t),(e.f&Rr)===0&&(this.current.set(e,e.v),Zt?.set(e,e.v))}activate(){$e=this,this.apply()}deactivate(){$e===this&&($e=null,Zt=null)}flush(){if(this.activate(),Qt.length>0){if(_a(),$e!==null&&$e!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(os.size>1){this.previous.clear();var e=Zt,t=!0,l={parent:null,effect:null,effects:[],render_effects:[]};for(const o of os){if(o===this){t=!1;continue}const c=[];for(const[u,f]of this.current){if(o.current.has(u))if(t&&f!==o.current.get(u))o.current.set(u,f);else continue;c.push(u)}if(c.length===0)continue;const d=[...o.current.keys()].filter(u=>!this.current.has(u));if(d.length>0){var a=Qt;Qt=[];const u=new Set,f=new Map;for(const v of c)ya(v,d,u,f);if(Qt.length>0){$e=o,o.apply();for(const v of Qt)o.#a(v,l);o.deactivate()}Qt=a}}$e=null,Zt=e}this.committed=!0,os.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#l)this.#s.delete(e),At(e,zt),Zr(e);for(const e of this.#s)At(e,dr),Zr(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#i??=la()).promise}static ensure(){if($e===null){const e=$e=new sr;os.add($e),kn||sr.enqueue(()=>{$e===e&&e.flush()})}return $e}static enqueue(e){qr(e)}apply(){}}function ba(s){var e=kn;kn=!0;try{for(var t;;){if(lc(),Qt.length===0&&($e?.flush(),Qt.length===0))return cs=null,t;_a()}}finally{kn=e}}function _a(){var s=en;Us=!0;var e=null;try{var t=0;for(fs(!0);Qt.length>0;){var l=sr.ensure();if(t++>1e3){var a,o;ac()}l.process(Qt),Fr.clear()}}finally{Us=!1,fs(s),cs=null}}function ac(){try{ji()}catch(s){xn(s,cs)}}let Cr=null;function wa(s){var e=s.length;if(e!==0){for(var t=0;t<e;){var l=s[t++];if((l.f&(kr|Wt))===0&&qn(l)&&(Cr=new Set,Fn(l),l.deps===null&&l.first===null&&l.nodes===null&&(l.teardown===null&&l.ac===null?Oa(l):l.fn=null),Cr?.size>0)){Fr.clear();for(const a of Cr){if((a.f&(kr|Wt))!==0)continue;const o=[a];let c=a.parent;for(;c!==null;)Cr.has(c)&&(Cr.delete(c),o.push(c)),c=c.parent;for(let d=o.length-1;d>=0;d--){const u=o[d];(u.f&(kr|Wt))===0&&Fn(u)}}Cr.clear()}}Cr=null}}function ya(s,e,t,l){if(!t.has(s)&&(t.add(s),s.reactions!==null))for(const a of s.reactions){const o=a.f;(o&wt)!==0?ya(a,e,t,l):(o&(Ws|fr))!==0&&(o&zt)===0&&xa(a,e,l)&&(At(a,zt),Zr(a))}}function xa(s,e,t){const l=t.get(s);if(l!==void 0)return l;if(s.deps!==null)for(const a of s.deps){if(e.includes(a))return!0;if((a.f&wt)!==0&&xa(a,e,t))return t.set(a,!0),!0}return t.set(s,!1),!1}function Zr(s){for(var e=cs=s;e.parent!==null;){e=e.parent;var t=e.f;if(Us&&e===Ke&&(t&fr)!==0&&(t&oa)===0)return;if((t&(Gr|xr))!==0){if((t&Nt)===0)return;e.f^=Nt}}Qt.push(e)}function oc(s){let e=0,t=Nr(0),l;return()=>{Rn()&&(r(t),Qs(()=>(e===0&&(l=Pt(()=>s(()=>Ln(t)))),e+=1,()=>{qr(()=>{e-=1,e===0&&(l?.(),l=void 0,Ln(t))})})))}}var ic=Er|bn|ss;function cc(s,e,t){new uc(s,e,t)}class uc{parent;#e=!1;#t;#r=null;#n;#i;#l;#s=null;#a=null;#o=null;#c=null;#u=null;#f=0;#d=0;#m=!1;#v=null;#_=oc(()=>(this.#v=Nr(this.#f),()=>{this.#v=null}));constructor(e,t,l){this.#t=e,this.#n=t,this.#i=l,this.parent=Ke.b,this.#e=!!this.#n.pending,this.#l=Qr(()=>{Ke.b=this;{var a=this.#p();try{this.#s=$t(()=>l(a))}catch(o){this.error(o)}this.#d>0?this.#g():this.#e=!1}return()=>{this.#u?.remove()}},ic)}#w(){try{this.#s=$t(()=>this.#i(this.#t))}catch(e){this.error(e)}this.#e=!1}#y(){const e=this.#n.pending;e&&(this.#a=$t(()=>e(this.#t)),sr.enqueue(()=>{var t=this.#p();this.#s=this.#h(()=>(sr.ensure(),$t(()=>this.#i(t)))),this.#d>0?this.#g():($r(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#p(){var e=this.#t;return this.#e&&(this.#u=Tr(),this.#t.before(this.#u),e=this.#u),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#h(e){var t=Ke,l=He,a=st;hr(this.#l),Ot(this.#l),yn(this.#l.ctx);try{return e()}catch(o){return pa(o),null}finally{hr(t),Ot(l),yn(a)}}#g(){const e=this.#n.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Va(this.#s,this.#c)),this.#a===null&&(this.#a=$t(()=>e(this.#t)))}#b(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(e);return}this.#d+=e,this.#d===0&&(this.#e=!1,this.#a&&$r(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(e){this.#b(e),this.#f+=e,this.#v&&Ar(this.#v,this.#f)}get_effect_pending(){return this.#_(),r(this.#v)}error(e){var t=this.#n.onerror;let l=this.#n.failed;if(this.#m||!t&&!l)throw e;this.#s&&(Ft(this.#s),this.#s=null),this.#a&&(Ft(this.#a),this.#a=null),this.#o&&(Ft(this.#o),this.#o=null);var a=!1,o=!1;const c=()=>{if(a){Zi();return}a=!0,o&&zi(),sr.ensure(),this.#f=0,this.#o!==null&&$r(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#h(()=>(this.#m=!1,$t(()=>this.#i(this.#t)))),this.#d>0?this.#g():this.#e=!1};var d=He;try{Ot(null),o=!0,t?.(e,c),o=!1}catch(u){xn(u,this.#l&&this.#l.parent)}finally{Ot(d)}l&&qr(()=>{this.#o=this.#h(()=>{sr.ensure(),this.#m=!0;try{return $t(()=>{l(this.#t,()=>e,()=>c)})}catch(u){return xn(u,this.#l.parent),null}finally{this.#m=!1}})})}}function fc(s,e,t,l){const a=Kr()?Pn:Hs;if(t.length===0&&s.length===0){l(e.map(a));return}var o=$e,c=Ke,d=ka();function u(){Promise.all(t.map(f=>dc(f))).then(f=>{d();try{l([...e.map(a),...f])}catch(v){(c.f&kr)===0&&xn(v,c)}o?.deactivate(),jn()}).catch(f=>{xn(f,c)})}s.length>0?Promise.all(s).then(()=>{d();try{return u()}finally{o?.deactivate(),jn()}}):u()}function ka(){var s=Ke,e=He,t=st,l=$e;return function(o=!0){hr(s),Ot(e),yn(t),o&&l?.activate()}}function jn(){hr(null),Ot(null),yn(null)}function Pn(s){var e=wt|zt,t=He!==null&&(He.f&wt)!==0?He:null;return Ke!==null&&(Ke.f|=bn),{ctx:st,deps:null,effects:null,equals:va,f:e,fn:s,reactions:null,rv:0,v:yt,wv:0,parent:t??Ke,ac:null}}function dc(s,e){let t=Ke;t===null&&Ni();var l=t.b,a=void 0,o=Nr(yt),c=!He,d=new Map;return yc(()=>{var u=la();a=u.promise;try{Promise.resolve(s()).then(u.resolve,u.reject).then(()=>{f===$e&&f.committed&&f.deactivate(),jn()})}catch(m){u.reject(m),jn()}var f=$e;if(c){var v=!l.is_pending();l.update_pending_count(1),f.increment(v),d.get(f)?.reject(_n),d.delete(f),d.set(f,u)}const h=(m,g=void 0)=>{if(f.activate(),g)g!==_n&&(o.f|=Rr,Ar(o,g));else{(o.f&Rr)!==0&&(o.f^=Rr),Ar(o,m);for(const[b,_]of d){if(d.delete(b),b===f)break;_.reject(_n)}}c&&(l.update_pending_count(-1),f.decrement(v))};u.promise.then(h,m=>h(null,m||"unknown"))}),Ia(()=>{for(const u of d.values())u.reject(_n)}),new Promise(u=>{function f(v){function h(){v===a?u(o):f(a)}v.then(h,h)}f(a)})}function w(s){const e=Pn(s);return Wa(e),e}function Hs(s){const e=Pn(s);return e.equals=ma,e}function Ea(s){var e=s.effects;if(e!==null){s.effects=null;for(var t=0;t<e.length;t+=1)Ft(e[t])}}function vc(s){for(var e=s.parent;e!==null;){if((e.f&wt)===0)return(e.f&kr)===0?e:null;e=e.parent}return null}function Gs(s){var e,t=Ke;hr(vc(s));try{s.f&=~Xr,Ea(s),e=Ka(s)}finally{hr(t)}return e}function Sa(s){var e=Gs(s);if(s.equals(e)||($e?.is_fork||(s.v=e),s.wv=Ga()),!tn)if(Zt!==null)(Rn()||$e?.is_fork)&&Zt.set(s,e);else{var t=(s.f&nr)===0?dr:Nt;At(s,t)}}let Xs=new Set;const Fr=new Map;let Ca=!1;function Nr(s,e){var t={f:0,v:s,reactions:null,equals:va,rv:0,wv:0};return t}function re(s,e){const t=Nr(s);return Wa(t),t}function Ks(s,e=!1,t=!0){const l=Nr(s);return e||(l.equals=ma),wn&&t&&st!==null&&st.l!==null&&(st.l.s??=[]).push(l),l}function D(s,e,t=!1){He!==null&&(!mr||(He.f&aa)!==0)&&Kr()&&(He.f&(wt|fr|Ws|aa))!==0&&!Mr?.includes(s)&&Ri();let l=t?qe(e):e;return Ar(s,l)}function Ar(s,e){if(!s.equals(e)){var t=s.v;tn?Fr.set(s,e):Fr.set(s,t),s.v=e;var l=sr.ensure();l.capture(s,t),(s.f&wt)!==0&&((s.f&zt)!==0&&Gs(s),At(s,(s.f&nr)!==0?Nt:dr)),s.wv=Ga(),Na(s,zt),Kr()&&Ke!==null&&(Ke.f&Nt)!==0&&(Ke.f&(xr|Gr))===0&&(er===null?kc([s]):er.push(s)),!l.is_fork&&Xs.size>0&&!Ca&&mc()}return e}function mc(){Ca=!1;var s=en;fs(!0);const e=Array.from(Xs);try{for(const t of e)(t.f&Nt)!==0&&At(t,dr),qn(t)&&Fn(t)}finally{fs(s)}Xs.clear()}function Ln(s){D(s,s.v+1)}function Na(s,e){var t=s.reactions;if(t!==null)for(var l=Kr(),a=t.length,o=0;o<a;o++){var c=t[o],d=c.f;if(!(!l&&c===Ke)){var u=(d&zt)===0;if(u&&At(c,e),(d&wt)!==0){var f=c;Zt?.delete(f),(d&Xr)===0&&(d&nr&&(c.f|=Xr),Na(f,dr))}else u&&((d&fr)!==0&&Cr!==null&&Cr.add(c),Zr(c))}}}function qe(s){if(typeof s!="object"||s===null||zr in s)return s;const e=rs(s);if(e!==na&&e!==xi)return s;var t=new Map,l=Os(s),a=re(0),o=rn,c=d=>{if(rn===o)return d();var u=He,f=rn;Ot(null),Ha(o);var v=d();return Ot(u),Ha(f),v};return l&&t.set("length",re(s.length)),new Proxy(s,{defineProperty(d,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Li();var v=t.get(u);return v===void 0?v=c(()=>{var h=re(f.value);return t.set(u,h),h}):D(v,f.value,!0),!0},deleteProperty(d,u){var f=t.get(u);if(f===void 0){if(u in d){const v=c(()=>re(yt));t.set(u,v),Ln(a)}}else D(f,yt),Ln(a);return!0},get(d,u,f){if(u===zr)return s;var v=t.get(u),h=u in d;if(v===void 0&&(!h||Ir(d,u)?.writable)&&(v=c(()=>{var g=qe(h?d[u]:yt),b=re(g);return b}),t.set(u,v)),v!==void 0){var m=r(v);return m===yt?void 0:m}return Reflect.get(d,u,f)},getOwnPropertyDescriptor(d,u){var f=Reflect.getOwnPropertyDescriptor(d,u);if(f&&"value"in f){var v=t.get(u);v&&(f.value=r(v))}else if(f===void 0){var h=t.get(u),m=h?.v;if(h!==void 0&&m!==yt)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return f},has(d,u){if(u===zr)return!0;var f=t.get(u),v=f!==void 0&&f.v!==yt||Reflect.has(d,u);if(f!==void 0||Ke!==null&&(!v||Ir(d,u)?.writable)){f===void 0&&(f=c(()=>{var m=v?qe(d[u]):yt,g=re(m);return g}),t.set(u,f));var h=r(f);if(h===yt)return!1}return v},set(d,u,f,v){var h=t.get(u),m=u in d;if(l&&u==="length")for(var g=f;g<h.v;g+=1){var b=t.get(g+"");b!==void 0?D(b,yt):g in d&&(b=c(()=>re(yt)),t.set(g+"",b))}if(h===void 0)(!m||Ir(d,u)?.writable)&&(h=c(()=>re(void 0)),D(h,qe(f)),t.set(u,h));else{m=h.v!==yt;var _=c(()=>qe(f));D(h,_)}var p=Reflect.getOwnPropertyDescriptor(d,u);if(p?.set&&p.set.call(v,f),!m){if(l&&typeof u=="string"){var y=t.get("length"),C=Number(u);Number.isInteger(C)&&C>=y.v&&D(y,C+1)}Ln(a)}return!0},ownKeys(d){r(a);var u=Reflect.ownKeys(d).filter(h=>{var m=t.get(h);return m===void 0||m.v!==yt});for(var[f,v]of t)v.v!==yt&&!(f in d)&&u.push(f);return u},setPrototypeOf(){Ii()}})}var Js,Aa,Ta,Ma;function hc(){if(Js===void 0){Js=window,Aa=/Firefox/.test(navigator.userAgent);var s=Element.prototype,e=Node.prototype,t=Text.prototype;Ta=Ir(e,"firstChild").get,Ma=Ir(e,"nextSibling").get,sa(s)&&(s.__click=void 0,s.__className=void 0,s.__attributes=null,s.__style=void 0,s.__e=void 0),sa(t)&&(t.__t=void 0)}}function Tr(s=""){return document.createTextNode(s)}function Ut(s){return Ta.call(s)}function In(s){return Ma.call(s)}function q(s,e){return Ut(s)}function J(s,e=!1){{var t=Ut(s);return t instanceof Comment&&t.data===""?In(t):t}}function L(s,e=1,t=!1){let l=s;for(;e--;)l=In(l);return l}function gc(s){s.textContent=""}function ja(){return!1}let Pa=!1;function pc(){Pa||(Pa=!0,document.addEventListener("reset",s=>{Promise.resolve().then(()=>{if(!s.defaultPrevented)for(const e of s.target.elements)e.__on_r?.()})},{capture:!0}))}function En(s){var e=He,t=Ke;Ot(null),hr(null);try{return s()}finally{Ot(e),hr(t)}}function bc(s,e,t,l=t){s.addEventListener(e,()=>En(t));const a=s.__on_r;a?s.__on_r=()=>{a(),l(!0)}:s.__on_r=()=>l(!0),pc()}function La(s){Ke===null&&(He===null&&Mi(),Ti()),tn&&Ai()}function _c(s,e){var t=e.last;t===null?e.last=e.first=s:(t.next=s,s.prev=t,e.last=s)}function vr(s,e,t){var l=Ke;l!==null&&(l.f&Wt)!==0&&(s|=Wt);var a={ctx:st,deps:null,nodes:null,f:s|zt|nr,first:null,fn:e,last:null,next:null,parent:l,b:l&&l.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{Fn(a),a.f|=ls}catch(d){throw Ft(a),d}else e!==null&&Zr(a);var o=a;if(t&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&bn)===0&&(o=o.first,(s&fr)!==0&&(s&Er)!==0&&o!==null&&(o.f|=Er)),o!==null&&(o.parent=l,l!==null&&_c(o,l),He!==null&&(He.f&wt)!==0&&(s&Gr)===0)){var c=He;(c.effects??=[]).push(o)}return a}function Rn(){return He!==null&&!mr}function Ia(s){const e=vr(ns,null,!1);return At(e,Nt),e.teardown=s,e}function me(s){La();var e=Ke.f,t=!He&&(e&xr)!==0&&(e&ls)===0;if(t){var l=st;(l.e??=[]).push(s)}else return Ra(s)}function Ra(s){return vr(Vs|ia,s,!1)}function us(s){return La(),vr(ns|ia,s,!0)}function wc(s){sr.ensure();const e=vr(Gr|bn,s,!0);return(t={})=>new Promise(l=>{t.outro?$r(e,()=>{Ft(e),l(void 0)}):(Ft(e),l(void 0))})}function Zs(s){return vr(Vs,s,!1)}function yc(s){return vr(Ws|bn,s,!0)}function Qs(s,e=0){return vr(ns|e,s,!0)}function ae(s,e=[],t=[],l=[]){fc(l,e,t,a=>{vr(ns,()=>s(...a.map(r)),!0)})}function Qr(s,e=0){var t=vr(fr|e,s,!0);return t}function $t(s){return vr(xr|bn,s,!0)}function za(s){var e=s.teardown;if(e!==null){const t=tn,l=He;Ya(!0),Ot(null);try{e.call(null)}finally{Ya(t),Ot(l)}}}function qa(s,e=!1){var t=s.first;for(s.first=s.last=null;t!==null;){const a=t.ac;a!==null&&En(()=>{a.abort(_n)});var l=t.next;(t.f&Gr)!==0?t.parent=null:Ft(t,e),t=l}}function xc(s){for(var e=s.first;e!==null;){var t=e.next;(e.f&xr)===0&&Ft(e),e=t}}function Ft(s,e=!0){var t=!1;(e||(s.f&oa)!==0)&&s.nodes!==null&&s.nodes.end!==null&&(Fa(s.nodes.start,s.nodes.end),t=!0),qa(s,e&&!t),ds(s,0),At(s,kr);var l=s.nodes&&s.nodes.t;if(l!==null)for(const o of l)o.stop();za(s);var a=s.parent;a!==null&&a.first!==null&&Oa(s),s.next=s.prev=s.teardown=s.ctx=s.deps=s.fn=s.nodes=s.ac=null}function Fa(s,e){for(;s!==null;){var t=s===e?null:In(s);s.remove(),s=t}}function Oa(s){var e=s.parent,t=s.prev,l=s.next;t!==null&&(t.next=l),l!==null&&(l.prev=t),e!==null&&(e.first===s&&(e.first=l),e.last===s&&(e.last=t))}function $r(s,e,t=!0){var l=[];Da(s,l,!0);var a=()=>{t&&Ft(s),e&&e()},o=l.length;if(o>0){var c=()=>--o||a();for(var d of l)d.out(c)}else a()}function Da(s,e,t){if((s.f&Wt)===0){s.f^=Wt;var l=s.nodes&&s.nodes.t;if(l!==null)for(const d of l)(d.is_global||t)&&e.push(d);for(var a=s.first;a!==null;){var o=a.next,c=(a.f&Er)!==0||(a.f&xr)!==0&&(s.f&fr)!==0;Da(a,e,c?t:!1),a=o}}}function $s(s){Ba(s,!0)}function Ba(s,e){if((s.f&Wt)!==0){s.f^=Wt,(s.f&Nt)===0&&(At(s,zt),Zr(s));for(var t=s.first;t!==null;){var l=t.next,a=(t.f&Er)!==0||(t.f&xr)!==0;Ba(t,a?e:!1),t=l}var o=s.nodes&&s.nodes.t;if(o!==null)for(const c of o)(c.is_global||e)&&c.in()}}function Va(s,e){if(s.nodes)for(var t=s.nodes.start,l=s.nodes.end;t!==null;){var a=t===l?null:In(t);e.append(t),t=a}}let en=!1;function fs(s){en=s}let tn=!1;function Ya(s){tn=s}let He=null,mr=!1;function Ot(s){He=s}let Ke=null;function hr(s){Ke=s}let Mr=null;function Wa(s){He!==null&&(Mr===null?Mr=[s]:Mr.push(s))}let jt=null,Ht=0,er=null;function kc(s){er=s}let Ua=1,zn=0,rn=zn;function Ha(s){rn=s}function Ga(){return++Ua}function qn(s){var e=s.f;if((e&zt)!==0)return!0;if(e&wt&&(s.f&=~Xr),(e&dr)!==0){var t=s.deps;if(t!==null)for(var l=t.length,a=0;a<l;a++){var o=t[a];if(qn(o)&&Sa(o),o.wv>s.wv)return!0}(e&nr)!==0&&Zt===null&&At(s,Nt)}return!1}function Xa(s,e,t=!0){var l=s.reactions;if(l!==null&&!Mr?.includes(s))for(var a=0;a<l.length;a++){var o=l[a];(o.f&wt)!==0?Xa(o,e,!1):e===o&&(t?At(o,zt):(o.f&Nt)!==0&&At(o,dr),Zr(o))}}function Ka(s){var e=jt,t=Ht,l=er,a=He,o=Mr,c=st,d=mr,u=rn,f=s.f;jt=null,Ht=0,er=null,He=(f&(xr|Gr))===0?s:null,Mr=null,yn(s.ctx),mr=!1,rn=++zn,s.ac!==null&&(En(()=>{s.ac.abort(_n)}),s.ac=null);try{s.f|=Ys;var v=s.fn,h=v(),m=s.deps;if(jt!==null){var g;if(ds(s,Ht),m!==null&&Ht>0)for(m.length=Ht+jt.length,g=0;g<jt.length;g++)m[Ht+g]=jt[g];else s.deps=m=jt;if(Rn()&&(s.f&nr)!==0)for(g=Ht;g<m.length;g++)(m[g].reactions??=[]).push(s)}else m!==null&&Ht<m.length&&(ds(s,Ht),m.length=Ht);if(Kr()&&er!==null&&!mr&&m!==null&&(s.f&(wt|dr|zt))===0)for(g=0;g<er.length;g++)Xa(er[g],s);return a!==null&&a!==s&&(zn++,er!==null&&(l===null?l=er:l.push(...er))),(s.f&Rr)!==0&&(s.f^=Rr),h}catch(b){return pa(b)}finally{s.f^=Ys,jt=e,Ht=t,er=l,He=a,Mr=o,yn(c),mr=d,rn=u}}function Ec(s,e){let t=e.reactions;if(t!==null){var l=wi.call(t,s);if(l!==-1){var a=t.length-1;a===0?t=e.reactions=null:(t[l]=t[a],t.pop())}}t===null&&(e.f&wt)!==0&&(jt===null||!jt.includes(e))&&(At(e,dr),(e.f&nr)!==0&&(e.f^=nr,e.f&=~Xr),Ea(e),ds(e,0))}function ds(s,e){var t=s.deps;if(t!==null)for(var l=e;l<t.length;l++)Ec(s,t[l])}function Fn(s){var e=s.f;if((e&kr)===0){At(s,Nt);var t=Ke,l=en;Ke=s,en=!0;try{(e&(fr|Si))!==0?xc(s):qa(s),za(s);var a=Ka(s);s.teardown=typeof a=="function"?a:null,s.wv=Ua;var o;Fs&&$i&&(s.f&zt)!==0&&s.deps}finally{en=l,Ke=t}}}async function Sc(){await Promise.resolve(),ba()}function r(s){var e=s.f,t=(e&wt)!==0;if(He!==null&&!mr){var l=Ke!==null&&(Ke.f&kr)!==0;if(!l&&!Mr?.includes(s)){var a=He.deps;if((He.f&Ys)!==0)s.rv<zn&&(s.rv=zn,jt===null&&a!==null&&a[Ht]===s?Ht++:jt===null?jt=[s]:jt.includes(s)||jt.push(s));else{(He.deps??=[]).push(s);var o=s.reactions;o===null?s.reactions=[He]:o.includes(He)||o.push(He)}}}if(tn){if(Fr.has(s))return Fr.get(s);if(t){var c=s,d=c.v;return((c.f&Nt)===0&&c.reactions!==null||Za(c))&&(d=Gs(c)),Fr.set(c,d),d}}else t&&(!Zt?.has(s)||$e?.is_fork&&!Rn())&&(c=s,qn(c)&&Sa(c),en&&Rn()&&(c.f&nr)===0&&Ja(c));if(Zt?.has(s))return Zt.get(s);if((s.f&Rr)!==0)throw s.v;return s.v}function Ja(s){if(s.deps!==null){s.f^=nr;for(const e of s.deps)(e.reactions??=[]).push(s),(e.f&wt)!==0&&(e.f&nr)===0&&Ja(e)}}function Za(s){if(s.v===yt)return!0;if(s.deps===null)return!1;for(const e of s.deps)if(Fr.has(e)||(e.f&wt)!==0&&Za(e))return!0;return!1}function Pt(s){var e=mr;try{return mr=!0,s()}finally{mr=e}}const Cc=-7169;function At(s,e){s.f=s.f&Cc|e}function Nc(s){if(!(typeof s!="object"||!s||s instanceof EventTarget)){if(zr in s)el(s);else if(!Array.isArray(s))for(let e in s){const t=s[e];typeof t=="object"&&t&&zr in t&&el(t)}}}function el(s,e=new Set){if(typeof s=="object"&&s!==null&&!(s instanceof EventTarget)&&!e.has(s)){e.add(s),s instanceof Date&&s.getTime();for(let l in s)try{el(s[l],e)}catch{}const t=rs(s);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const l=ra(t);for(let a in l){const o=l[a].get;if(o)try{o.call(s)}catch{}}}}}const Ac=["touchstart","touchmove"];function Tc(s){return Ac.includes(s)}const Qa=new Set,tl=new Set;function Mc(s,e,t,l={}){function a(o){if(l.capture||On.call(e,o),!o.cancelBubble)return En(()=>t?.call(this,o))}return s.startsWith("pointer")||s.startsWith("touch")||s==="wheel"?qr(()=>{e.addEventListener(s,a,l)}):e.addEventListener(s,a,l),a}function nn(s,e,t,l,a){var o={capture:l,passive:a},c=Mc(s,e,t,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ia(()=>{e.removeEventListener(s,c,o)})}function at(s){for(var e=0;e<s.length;e++)Qa.add(s[e]);for(var t of tl)t(s)}let $a=null;function On(s){var e=this,t=e.ownerDocument,l=s.type,a=s.composedPath?.()||[],o=a[0]||s.target;$a=s;var c=0,d=$a===s&&s.__root;if(d){var u=a.indexOf(d);if(u!==-1&&(e===document||e===window)){s.__root=e;return}var f=a.indexOf(e);if(f===-1)return;u<=f&&(c=u)}if(o=a[c]||s.target,o!==e){yi(s,"currentTarget",{configurable:!0,get(){return o||t}});var v=He,h=Ke;Ot(null),hr(null);try{for(var m,g=[];o!==null;){var b=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+l];_!=null&&(!o.disabled||s.target===o)&&_.call(o,s)}catch(p){m?g.push(p):m=p}if(s.cancelBubble||b===e||b===null)break;o=b}if(m){for(let p of g)queueMicrotask(()=>{throw p});throw m}}finally{s.__root=e,delete s.currentTarget,Ot(v),hr(h)}}}function rl(s){var e=document.createElement("template");return e.innerHTML=s.replaceAll("<!>","<!---->"),e.content}function sn(s,e){var t=Ke;t.nodes===null&&(t.nodes={start:s,end:e,a:null,t:null})}function K(s,e){var t=(e&da)!==0,l=(e&Ki)!==0,a,o=!s.startsWith("<!>");return()=>{a===void 0&&(a=rl(o?s:"<!>"+s),t||(a=Ut(a)));var c=l||Aa?document.importNode(a,!0):a.cloneNode(!0);if(t){var d=Ut(c),u=c.lastChild;sn(d,u)}else sn(c,c);return c}}function jc(s,e,t="svg"){var l=!s.startsWith("<!>"),a=(e&da)!==0,o=`<${t}>${l?s:"<!>"+s}</${t}>`,c;return()=>{if(!c){var d=rl(o),u=Ut(d);if(a)for(c=document.createDocumentFragment();Ut(u);)c.appendChild(Ut(u));else c=Ut(u)}var f=c.cloneNode(!0);if(a){var v=Ut(f),h=f.lastChild;sn(v,h)}else sn(f,f);return f}}function Me(s,e){return jc(s,e,"svg")}function Pc(s=""){{var e=Tr(s+"");return sn(e,e),e}}function _e(){var s=document.createDocumentFragment(),e=document.createComment(""),t=Tr();return s.append(e,t),sn(e,t),s}function M(s,e){s!==null&&s.before(e)}let nl=!0;function be(s,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(s.__t??=s.nodeValue)&&(s.__t=t,s.nodeValue=t+"")}function Lc(s,e){return Ic(s,e)}const Sn=new Map;function Ic(s,{target:e,anchor:t,props:l={},events:a,context:o,intro:c=!0}){hc();var d=new Set,u=h=>{for(var m=0;m<h.length;m++){var g=h[m];if(!d.has(g)){d.add(g);var b=Tc(g);e.addEventListener(g,On,{passive:b});var _=Sn.get(g);_===void 0?(document.addEventListener(g,On,{passive:b}),Sn.set(g,1)):Sn.set(g,_+1)}}};u(ts(Qa)),tl.add(u);var f=void 0,v=wc(()=>{var h=t??e.appendChild(Tr());return cc(h,{pending:()=>{}},m=>{if(o){ye({});var g=st;g.c=o}a&&(l.$$events=a),nl=c,f=s(m,l)||{},nl=!0,o&&xe()}),()=>{for(var m of d){e.removeEventListener(m,On);var g=Sn.get(m);--g===0?(document.removeEventListener(m,On),Sn.delete(m)):Sn.set(m,g)}tl.delete(u),h!==t&&h.parentNode?.removeChild(h)}});return Rc.set(f,v),f}let Rc=new WeakMap;class Dn{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#i=!0;constructor(e,t=!0){this.anchor=e,this.#i=t}#l=()=>{var e=$e;if(this.#e.has(e)){var t=this.#e.get(e),l=this.#t.get(t);if(l)$s(l),this.#n.delete(t);else{var a=this.#r.get(t);a&&(this.#t.set(t,a.effect),this.#r.delete(t),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),l=a.effect)}for(const[o,c]of this.#e){if(this.#e.delete(o),o===e)break;const d=this.#r.get(c);d&&(Ft(d.effect),this.#r.delete(c))}for(const[o,c]of this.#t){if(o===t||this.#n.has(o))continue;const d=()=>{if(Array.from(this.#e.values()).includes(o)){var f=document.createDocumentFragment();Va(c,f),f.append(Tr()),this.#r.set(o,{effect:c,fragment:f})}else Ft(c);this.#n.delete(o),this.#t.delete(o)};this.#i||!l?(this.#n.add(o),$r(c,d,!1)):d()}}};#s=e=>{this.#e.delete(e);const t=Array.from(this.#e.values());for(const[l,a]of this.#r)t.includes(l)||(Ft(a.effect),this.#r.delete(l))};ensure(e,t){var l=$e,a=ja();if(t&&!this.#t.has(e)&&!this.#r.has(e))if(a){var o=document.createDocumentFragment(),c=Tr();o.append(c),this.#r.set(e,{effect:$t(()=>t(c)),fragment:o})}else this.#t.set(e,$t(()=>t(this.anchor)));if(this.#e.set(l,e),a){for(const[d,u]of this.#t)d===e?l.skipped_effects.delete(u):l.skipped_effects.add(u);for(const[d,u]of this.#r)d===e?l.skipped_effects.delete(u.effect):l.skipped_effects.add(u.effect);l.oncommit(this.#l),l.ondiscard(this.#s)}else this.#l()}}const zc=0,sl=1;function ll(s,e,t,l,a){var o=Kr(),c=yt,d=o?Nr(c):Ks(c,!1,!1),u=o?Nr(c):Ks(c,!1,!1),f=new Dn(s);Qr(()=>{var v=e(),h=!1;if(ki(v)){var m=ka(),g=!1;const b=_=>{if(!h){g=!0,m(!1),sr.ensure();try{_()}finally{jn(),kn||ba()}}};v.then(_=>{b(()=>{Ar(d,_),f.ensure(sl,l&&(p=>l(p,d)))})},_=>{b(()=>{if(Ar(u,_),f.ensure(sl,a&&(p=>a(p,u))),!a)throw u.v})}),qr(()=>{g||b(()=>{f.ensure(zc,t)})})}else Ar(d,v),f.ensure(sl,l);return()=>{h=!0}})}function Y(s,e,t=!1){var l=new Dn(s),a=t?Er:0;function o(c,d){l.ensure(c,d)}Qr(()=>{var c=!1;e((d,u=!0)=>{c=!0,o(u,d)}),c||o(!1,null)},a)}function ln(s,e,t){var l=new Dn(s),a=!Kr();Qr(()=>{var o=e();a&&o!==null&&typeof o=="object"&&(o={}),l.ensure(o,t)})}function Ge(s,e){return e}function qc(s,e,t){for(var l=[],a=e.length,o,c=e.length,d=0;d<a;d++){let h=e[d];$r(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var m=s.outrogroups;al(ts(o.done)),m.delete(o),m.size===0&&(s.outrogroups=null)}}else c-=1},!1)}if(c===0){var u=l.length===0&&t!==null;if(u){var f=t,v=f.parentNode;gc(v),v.append(f),s.items.clear()}al(e,!u)}else o={pending:new Set(e),done:new Set},(s.outrogroups??=new Set).add(o)}function al(s,e=!0){for(var t=0;t<s.length;t++)Ft(s[t],e)}var eo;function Ye(s,e,t,l,a,o=null){var c=s,d=new Map,u=(e&fa)!==0;if(u){var f=s;c=f.appendChild(Tr())}var v=null,h=Hs(()=>{var y=t();return Os(y)?y:y==null?[]:ts(y)}),m,g=!0;function b(){p.fallback=v,Fc(p,m,c,e,l),v!==null&&(m.length===0?(v.f&Sr)===0?$s(v):(v.f^=Sr,Bn(v,null,c)):$r(v,()=>{v=null}))}var _=Qr(()=>{m=r(h);for(var y=m.length,C=new Set,E=$e,k=ja(),S=0;S<y;S+=1){var I=m[S],j=l(I,S),N=g?null:d.get(j);N?(N.v&&Ar(N.v,I),N.i&&Ar(N.i,S),k&&E.skipped_effects.delete(N.e)):(N=Oc(d,g?c:eo??=Tr(),I,j,S,a,e,t),g||(N.e.f|=Sr),d.set(j,N)),C.add(j)}if(y===0&&o&&!v&&(g?v=$t(()=>o(c)):(v=$t(()=>o(eo??=Tr())),v.f|=Sr)),!g)if(k){for(const[A,T]of d)C.has(A)||E.skipped_effects.add(T.e);E.oncommit(b),E.ondiscard(()=>{})}else b();r(h)}),p={effect:_,items:d,outrogroups:null,fallback:v};g=!1}function Fc(s,e,t,l,a){var o=(l&Oi)!==0,c=e.length,d=s.items,u=s.effect.first,f,v=null,h,m=[],g=[],b,_,p,y;if(o)for(y=0;y<c;y+=1)b=e[y],_=a(b,y),p=d.get(_).e,(p.f&Sr)===0&&(p.nodes?.a?.measure(),(h??=new Set).add(p));for(y=0;y<c;y+=1){if(b=e[y],_=a(b,y),p=d.get(_).e,s.outrogroups!==null)for(const T of s.outrogroups)T.pending.delete(p),T.done.delete(p);if((p.f&Sr)!==0)if(p.f^=Sr,p===u)Bn(p,null,t);else{var C=v?v.next:u;p===s.effect.last&&(s.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Or(s,v,p),Or(s,p,C),Bn(p,C,t),v=p,m=[],g=[],u=v.next;continue}if((p.f&Wt)!==0&&($s(p),o&&(p.nodes?.a?.unfix(),(h??=new Set).delete(p))),p!==u){if(f!==void 0&&f.has(p)){if(m.length<g.length){var E=g[0],k;v=E.prev;var S=m[0],I=m[m.length-1];for(k=0;k<m.length;k+=1)Bn(m[k],E,t);for(k=0;k<g.length;k+=1)f.delete(g[k]);Or(s,S.prev,I.next),Or(s,v,S),Or(s,I,E),u=E,v=I,y-=1,m=[],g=[]}else f.delete(p),Bn(p,u,t),Or(s,p.prev,p.next),Or(s,p,v===null?s.effect.first:v.next),Or(s,v,p),v=p;continue}for(m=[],g=[];u!==null&&u!==p;)(f??=new Set).add(u),g.push(u),u=u.next;if(u===null)continue}(p.f&Sr)===0&&m.push(p),v=p,u=p.next}if(s.outrogroups!==null){for(const T of s.outrogroups)T.pending.size===0&&(al(ts(T.done)),s.outrogroups?.delete(T));s.outrogroups.size===0&&(s.outrogroups=null)}if(u!==null||f!==void 0){var j=[];if(f!==void 0)for(p of f)(p.f&Wt)===0&&j.push(p);for(;u!==null;)(u.f&Wt)===0&&u!==s.fallback&&j.push(u),u=u.next;var N=j.length;if(N>0){var A=(l&fa)!==0&&c===0?t:null;if(o){for(y=0;y<N;y+=1)j[y].nodes?.a?.measure();for(y=0;y<N;y+=1)j[y].nodes?.a?.fix()}qc(s,j,A)}}o&&qr(()=>{if(h!==void 0)for(p of h)p.nodes?.a?.apply()})}function Oc(s,e,t,l,a,o,c,d){var u=(c&qi)!==0?(c&Di)===0?Ks(t,!1,!1):Nr(t):null,f=(c&Fi)!==0?Nr(a):null;return{v:u,i:f,e:$t(()=>(o(e,u??t,f??a,d),()=>{s.delete(l)}))}}function Bn(s,e,t){if(s.nodes)for(var l=s.nodes.start,a=s.nodes.end,o=e&&(e.f&Sr)===0?e.nodes.start:t;l!==null;){var c=In(l);if(o.before(l),l===a)return;l=c}}function Or(s,e,t){e===null?s.effect.first=t:e.next=t,t===null?s.effect.last=e:t.prev=e}function pt(s,e,t=!1,l=!1,a=!1){var o=s,c="";ae(()=>{var d=Ke;if(c!==(c=e()??"")&&(d.nodes!==null&&(Fa(d.nodes.start,d.nodes.end),d.nodes=null),c!=="")){var u=c+"";t?u=`<svg>${u}</svg>`:l&&(u=`<math>${u}</math>`);var f=rl(u);if((t||l)&&(f=Ut(f)),sn(Ut(f),f.lastChild),t||l)for(;Ut(f);)o.before(Ut(f));else o.before(f)}})}function jr(s,e,...t){var l=new Dn(s);Qr(()=>{const a=e()??null;l.ensure(a,a&&(o=>a(o,...t)))},Er)}function Vn(s,e,t){var l=new Dn(s);Qr(()=>{var a=e()??null;l.ensure(a,a&&(o=>t(o,a)))},Er)}const Dc=()=>performance.now(),Pr={tick:s=>requestAnimationFrame(s),now:()=>Dc(),tasks:new Set};function to(){const s=Pr.now();Pr.tasks.forEach(e=>{e.c(s)||(Pr.tasks.delete(e),e.f())}),Pr.tasks.size!==0&&Pr.tick(to)}function Bc(s){let e;return Pr.tasks.size===0&&Pr.tick(to),{promise:new Promise(t=>{Pr.tasks.add(e={c:s,f:t})}),abort(){Pr.tasks.delete(e)}}}function vs(s,e){En(()=>{s.dispatchEvent(new CustomEvent(e))})}function Vc(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const e=s.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function ro(s){const e={},t=s.split(";");for(const l of t){const[a,o]=l.split(":");if(!a||o===void 0)break;const c=Vc(a.trim());e[c]=o.trim()}return e}const Yc=s=>s;function no(s,e,t,l){var a=(s&Hi)!==0,o=(s&Gi)!==0,c=a&&o,d=(s&Xi)!==0,u=c?"both":a?"in":"out",f,v=e.inert,h=e.style.overflow,m,g;function b(){return En(()=>f??=t()(e,l?.()??{},{direction:u}))}var _={is_global:d,in(){if(e.inert=v,!a){g?.abort(),g?.reset?.();return}o||m?.abort(),vs(e,"introstart"),m=ol(e,b(),g,1,()=>{vs(e,"introend"),m?.abort(),m=f=void 0,e.style.overflow=h})},out(E){if(!o){E?.(),f=void 0;return}e.inert=!0,vs(e,"outrostart"),g=ol(e,b(),m,0,()=>{vs(e,"outroend"),E?.()})},stop:()=>{m?.abort(),g?.abort()}},p=Ke;if((p.nodes.t??=[]).push(_),a&&nl){var y=d;if(!y){for(var C=p.parent;C&&(C.f&Er)!==0;)for(;(C=C.parent)&&(C.f&fr)===0;);y=!C||(C.f&ls)!==0}y&&Zs(()=>{Pt(()=>_.in())})}}function ol(s,e,t,l,a){var o=l===1;if(pn(e)){var c,d=!1;return qr(()=>{if(!d){var p=e({direction:o?"in":"out"});c=ol(s,p,t,l,a)}}),{abort:()=>{d=!0,c?.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(t?.deactivate(),!e?.duration)return a(),{abort:vt,deactivate:vt,reset:vt,t:()=>l};const{delay:u=0,css:f,tick:v,easing:h=Yc}=e;var m=[];if(o&&t===void 0&&(v&&v(0,1),f)){var g=ro(f(0,1));m.push(g,g)}var b=()=>1-l,_=s.animate(m,{duration:u,fill:"forwards"});return _.onfinish=()=>{_.cancel();var p=t?.t()??1-l;t?.abort();var y=l-p,C=e.duration*Math.abs(y),E=[];if(C>0){var k=!1;if(f)for(var S=Math.ceil(C/16.666666666666668),I=0;I<=S;I+=1){var j=p+y*h(I/S),N=ro(f(j,1-j));E.push(N),k||=N.overflow==="hidden"}k&&(s.style.overflow="hidden"),b=()=>{var A=_.currentTime;return p+y*h(A/C)},v&&Bc(()=>{if(_.playState!=="running")return!1;var A=b();return v(A,1-A),!0})}_=s.animate(E,{duration:C,fill:"forwards"}),_.onfinish=()=>{b=()=>l,v?.(l,1-l),a()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=vt)},deactivate:()=>{a=vt},reset:()=>{l===0&&v?.(1,0)},t:()=>b()}}function so(s){var e,t,l="";if(typeof s=="string"||typeof s=="number")l+=s;else if(typeof s=="object")if(Array.isArray(s)){var a=s.length;for(e=0;e<a;e++)s[e]&&(t=so(s[e]))&&(l&&(l+=" "),l+=t)}else for(t in s)s[t]&&(l&&(l+=" "),l+=t);return l}function Wc(){for(var s,e,t=0,l="",a=arguments.length;t<a;t++)(s=arguments[t])&&(e=so(s))&&(l&&(l+=" "),l+=e);return l}function Uc(s){return typeof s=="object"?Wc(s):s??""}const lo=[...`
\r\f \v\uFEFF`];function Hc(s,e,t){var l=s==null?"":""+s;if(e&&(l=l?l+" "+e:e),t){for(var a in t)if(t[a])l=l?l+" "+a:a;else if(l.length)for(var o=a.length,c=0;(c=l.indexOf(a,c))>=0;){var d=c+o;(c===0||lo.includes(l[c-1]))&&(d===l.length||lo.includes(l[d]))?l=(c===0?"":l.substring(0,c))+l.substring(d+1):c=d}}return l===""?null:l}function Gc(s,e){return s==null?null:String(s)}function ct(s,e,t,l,a,o){var c=s.__className;if(c!==t||c===void 0){var d=Hc(t,l,o);d==null?s.removeAttribute("class"):e?s.className=d:s.setAttribute("class",d),s.__className=t}else if(o&&a!==o)for(var u in o){var f=!!o[u];(a==null||f!==!!a[u])&&s.classList.toggle(u,f)}return o}function ut(s,e,t,l){var a=s.__style;if(a!==e){var o=Gc(e);o==null?s.removeAttribute("style"):s.style.cssText=o,s.__style=e}return l}const Xc=Symbol("is custom element"),Kc=Symbol("is html");function U(s,e,t,l){var a=Jc(s);a[e]!==(a[e]=t)&&(e==="loading"&&(s[Ci]=t),t==null?s.removeAttribute(e):typeof t!="string"&&Zc(s).includes(e)?s[e]=t:s.setAttribute(e,t))}function Jc(s){return s.__attributes??={[Xc]:s.nodeName.includes("-"),[Kc]:s.namespaceURI===Ji}}var ao=new Map;function Zc(s){var e=s.getAttribute("is")||s.nodeName,t=ao.get(e);if(t)return t;ao.set(e,t=[]);for(var l,a=s,o=Element.prototype;o!==a;){l=ra(a);for(var c in l)l[c].set&&t.push(c);a=rs(a)}return t}function il(s,e,t=e){var l=new WeakSet;bc(s,"input",async a=>{var o=a?s.defaultValue:s.value;if(o=cl(s)?ul(o):o,t(o),$e!==null&&l.add($e),await Sc(),o!==(o=e())){var c=s.selectionStart,d=s.selectionEnd,u=s.value.length;if(s.value=o??"",d!==null){var f=s.value.length;c===d&&d===u&&f>u?(s.selectionStart=f,s.selectionEnd=f):(s.selectionStart=c,s.selectionEnd=Math.min(d,f))}}}),Pt(e)==null&&s.value&&(t(cl(s)?ul(s.value):s.value),$e!==null&&l.add($e)),Qs(()=>{var a=e();if(s===document.activeElement){var o=is??$e;if(l.has(o))return}cl(s)&&a===ul(s.value)||s.type==="date"&&!a&&!s.value||a!==s.value&&(s.value=a??"")})}function cl(s){var e=s.type;return e==="number"||e==="range"}function ul(s){return s===""?null:+s}class fl{#e=new WeakMap;#t;#r;static entries=new WeakMap;constructor(e){this.#r=e}observe(e,t){var l=this.#e.get(e)||new Set;return l.add(t),this.#e.set(e,l),this.#n().observe(e,this.#r),()=>{var a=this.#e.get(e);a.delete(t),a.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#n(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var t of e){fl.entries.set(t.target,t);for(var l of this.#e.get(t.target)||[])l(t)}}))}}var Qc=new fl({box:"border-box"});function oo(s,e,t){var l=Qc.observe(s,()=>t(s[e]));Zs(()=>(Pt(()=>t(s[e])),l))}function io(s,e){return s===e||s?.[zr]===e}function an(s={},e,t,l){return Zs(()=>{var a,o;return Qs(()=>{a=o,o=[],Pt(()=>{s!==t(...o)&&(e(s,...o),a&&io(t(...a),s)&&e(null,...a))})}),()=>{qr(()=>{o&&io(t(...o),s)&&e(null,...o)})}}),s}function $c(s=!1){const e=st,t=e.l.u;if(!t)return;let l=()=>Nc(e.s);if(s){let a=0,o={};const c=Pn(()=>{let d=!1;const u=e.s;for(const f in u)u[f]!==o[f]&&(o[f]=u[f],d=!0);return d&&a++,a});l=()=>r(c)}t.b.length&&us(()=>{co(e,l),Ds(t.b)}),me(()=>{const a=Pt(()=>t.m.map(Ei));return()=>{for(const o of a)typeof o=="function"&&o()}}),t.a.length&&me(()=>{co(e,l),Ds(t.a)})}function co(s,e){if(s.l.s)for(const t of s.l.s)r(t);e()}let ms=!1;function eu(s){var e=ms;try{return ms=!1,[s(),ms]}finally{ms=e}}const tu={get(s,e){if(!s.exclude.includes(e))return s.props[e]},set(s,e){return!1},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function on(s,e,t){return new Proxy({props:s,exclude:e},tu)}const ru={get(s,e){let t=s.props.length;for(;t--;){let l=s.props[t];if(pn(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l)return l[e]}},set(s,e,t){let l=s.props.length;for(;l--;){let a=s.props[l];pn(a)&&(a=a());const o=Ir(a,e);if(o&&o.set)return o.set(t),!0}return!1},getOwnPropertyDescriptor(s,e){let t=s.props.length;for(;t--;){let l=s.props[t];if(pn(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l){const a=Ir(l,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(s,e){if(e===zr||e===ca)return!1;for(let t of s.props)if(pn(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(s){const e=[];for(let t of s.props)if(pn(t)&&(t=t()),!!t){for(const l in t)e.includes(l)||e.push(l);for(const l of Object.getOwnPropertySymbols(t))e.includes(l)||e.push(l)}return e}};function Gt(...s){return new Proxy({props:s},ru)}function B(s,e,t,l){var a=!wn||(t&Vi)!==0,o=(t&Wi)!==0,c=(t&Ui)!==0,d=l,u=!0,f=()=>(u&&(u=!1,d=c?Pt(l):l),d),v;if(o){var h=zr in s||ca in s;v=Ir(s,e)?.set??(h&&e in s?E=>s[e]=E:void 0)}var m,g=!1;o?[m,g]=eu(()=>s[e]):m=s[e],m===void 0&&l!==void 0&&(m=f(),v&&(a&&Pi(),v(m)));var b;if(a?b=()=>{var E=s[e];return E===void 0?f():(u=!0,E)}:b=()=>{var E=s[e];return E!==void 0&&(d=void 0),E===void 0?d:E},a&&(t&Yi)===0)return b;if(v){var _=s.$$legacy;return(function(E,k){return arguments.length>0?((!a||!k||_||g)&&v(k?b():E),E):b()})}var p=!1,y=((t&Bi)!==0?Pn:Hs)(()=>(p=!1,b()));o&&r(y);var C=Ke;return(function(E,k){if(arguments.length>0){const S=k?r(y):a&&o?qe(E):E;return D(y,S),p=!0,d!==void 0&&(d=S),E}return tn&&p||(C.f&kr)!==0?y.v:r(y)})}function nu(s){st===null&&ua(),wn&&st.l!==null?su(st).m.push(s):me(()=>{const e=Pt(s);if(typeof e=="function")return e})}function su(s){var e=s.l;return e.u??={a:[],b:[],m:[]}}const lu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(lu),ec();function au(s){return Yn(s,.5)}function ou(s){return Yn(s,.75)-Yn(s,.25)}function Yn(s,e){if(Be(s))return Yn(s.v,e);if(Be(e))return Yn(s,e.v);const t=s.length;if(Array.isArray(e)||(e=[e]),!_l(e[0])||un(e)<0||Dt(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function l(c,d){const u=(t-1)*d+1,f=Math.floor(u),v=Math.ceil(u);return c[f-1]+(c[v-1]-c[f-1])*(u-Math.floor(u))}const a=kl(s),o=e.map(c=>l(a,c));return e.length==1?o[0]:rt(o)}function uo(s,e){Be(s)&&uo(s.v,e);const t=Lr(s);if(t[0]===t[1])throw new Error('split: values in a vector "x" should vary.');const l=(t[1]-t[0])/e;return we.seq(t[0],t[1],l)}function fo(s){if(Be(s))return fo(s.v);const e=new we.valuesConstructor(s.length-1);for(let t=0;t<s.length-1;t++)e[t]=s[t+1]-s[t];return new we(e)}function hs(s,e){if(Be(s))return hs(s.v,e);e===void 0&&(e=.1);const t=Lr(s),l=(t[1]-t[0])*e;return[t[0]-l,t[1]+l]}function Lr(s){if(Be(s))return Lr(s.v);let e=s[0],t=s[0];for(let l=1;l<s.length;l++)s[l]<e&&(e=s[l]),s[l]>t&&(t=s[l]);return[e,t]}function gs(s,e){return Be(s)?gs(s.v,e):Math.sqrt(ps(s,e))}function ps(s,e){if(e===void 0&&(e=!1),Be(s))return ps(s.v);const t=cn(s);let l=0;for(let a=0;a<s.length;a++){const o=s[a]-t;l=l+o*o}return l/(e?s.length:s.length-1)}function cn(s){return Be(s)?cn(s.v):vo(s)/s.length}function vo(s){if(Be(s))return vo(s.v);let e=0;for(let t=0;t<s.length;t++)e=e+s[t];return e}function mo(s){if(Be(s))return mo(s.v);let e=1;for(let t=0;t<s.length;t++)e=e*s[t];return e}function un(s){return Be(s)||ar(s)?s.v[dl(s.v)-1]:s[dl(s)-1]}function dl(s){if(Be(s)||ar(s))return dl(s.v);let e=1,t=s[0];for(let l=2;l<=s.length;l++)s[l-1]<t&&(e=l,t=s[l-1]);return e}function Dt(s){return Be(s)||ar(s)?s.v[vl(s.v)-1]:s[vl(s)-1]}function vl(s){if(Be(s)||ar(s))return vl(s.v);let e=1,t=s[0];for(let l=2;l<=s.length;l++)s[l-1]>t&&(e=l,t=s[l-1]);return e}const ml=30,iu=1e-7,cu=1e-7,ho=1e-13,go=1e3,uu=100;function po(s,e,t,l,a){l===void 0&&(l=go),t===void 0&&(t=ho),a===void 0&&(a=uu);let o=t,c=l,d=(c-o)/a;for(let u=0;u<a;u++){let f,v;for(let g=0;g<a;g++){f=o+g*d,v=o+(g+1)*d;const b=e(f),_=e(v);if(b<=s&&_>=s)break}const h=(f+v)/2,m=e(h);if(Math.abs(m-s)<iu||(o=f,c=v,d=(c-o)/a,d/c<cu))return h}return(o+c)/2}function bo(s,e=0,t=1){let l=we.zeros(s);for(let a=0;a<s;a++)l.v[a]=e+Math.random()*(t-e);return l}function _o(s,e=0,t=1){let l=we.zeros(s);for(let a=0;a<s;a++){const o=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();l.v[a]=o*Math.sin(c)*t+e}return l}function bs(s,e=0,t=1){if(Be(s))return s.apply(a=>bs(a,e,t));const l=1/(Math.sqrt(2)*t);return .5*(1+du((s-e)*l))}function _s(s,e=0,t=1){if(Be(s))return s.apply(V=>_s(V,e,t));if(e!==0||t!==1)return _s(s)*t+e;if(s<0||s>1)throw Error('Parameter "p" must be between 0 and 1.');if(s<1e-10)return-1/0;if(s>.9999999999)return 1/0;const l=.425,a=5,o=.180625,c=1.6,d=3.3871327179,u=5.0434271938*10,f=1.5929113202*100,v=5.910937472*10,h=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,b=1.4234372777,_=2.75681539,p=1.3067284816,y=1.7023821103*.1,C=7.370016425*.1,E=1.2021132975*.1,k=6.657905115,S=3.081226386,I=4.2868294337*.1,j=1.7337203997*.01,N=2.4197894225*.1,A=1.2258202635*.01,T=s-.5;let P;if(Math.abs(T)<=l)return P=o-T*T,T*(((v*P+f)*P+u)*P+d)/(((g*P+m)*P+h)*P+1);P=T<0?s:1-s,P=Math.sqrt(-Math.log(P));let R;return P<=a?(P=P-c,R=(((y*P+p)*P+_)*P+b)/((E*P+C)*P+1)):(P=P-a,R=((j*P+I)*P+S+k)/((A*P+N)*P+1)),T<0?-R:R}function hl(s,e,t){if(t<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(s))return hl(rt(s),e,t);if(Be(s))return s.apply(l=>hl(l,e,t));if(s<=0)return 0;if(t<=0&&ML_ERR_return_NAN,t==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(s<1)return 0;if(s==1)return .5;if(s>1)return 1}return ws(s*e,e)}return e==Number.POSITIVE_INFINITY?1-ws(t/s,t):e*s>t?1-ys(t/(t+e*s),t/2,e/2):ys(e*s/(t+e*s),e/2,t/2)}function wo(s,e,t){if(s===0)return 0;if(s===1)return Inf;if(t<=0)return NaN;let l=go,a=ho;if(s>.9997&&t===1?(l=1e7,a=6e5,s=.9997):s>.9992&&t===1?(l=1e7,a=6e5):s>.997&&t===1?(l=1e6,a=45e3):s>.992&&t===1?(l=1e5,a=5e3):s>.97&&t===1&&(l=1e4,a=400),Array.isArray(s))return wo(rt(s),e,t);const o=d=>hl(d,e,t);function c(d,u,f){return d===0?0:d===1?Inf:u===0?NaN:f===0?NaN:po(d,o,a,l)}return Be(s)?s.apply(c,e,t):c(s,e,t)}function ws(s,e){if(Array.isArray(s))return ws(rt(s),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),a=Math.sqrt(l);function o(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const f=u/e,v=Math.pow(f,1/6)-.5*Math.pow(f,1/3)+1/3*Math.pow(f,1/2);return bs(v,t,a)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:fu(u/2,e/2)/Wn(e/2)}const d=e>ml?o:c;return Be(s)?s.apply(d):d(s)}function xt(s,e){if(Array.isArray(s))return xt(rt(s),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),a=Math.sqrt(l);function o(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const f=_s(u,t,a),v=Math.pow(Math.sqrt(36*f*f-30*f+13)/4+(3*f-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:po(u,v=>ws(v,e),0,ml*10)}const d=e>ml?o:c;return Be(s)?s.apply(d):d(s)}function ys(s,e,t){if(Array.isArray(s))return ys(rt(s),e,t);if(Be(s))return s.apply(a=>ys(a,e,t));if(s<=0)return 0;if(s>=1)return 1;if(e==0||t==0||!Number.isFinite(e)||!Number.isFinite(t))return e==0&&t==0?.5:e==0||e/t==0?1:t==0||t/e==0||s<.5?0:1;const l=.5-s+.5;return Eu(e,t,s,l)}function Wn(s){if(Be(s))return s.apply(Wn);if(s<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(s<.5)return Math.PI/(Math.sin(Math.PI*s)+Wn(1-s));s=s-1;let t=.9999999999998099;for(let a=0;a<e.length;a++)t=t+e[a]/(s+a+1);const l=s+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(l,s+.5)*Math.exp(-l)*t}function fu(s,e){let a=0;for(let o=0;o<1e4;o++){const c=Math.pow(s,o)/Wn(e+o+1);if(isNaN(c)||c<1e-18)break;a+=c}return Math.pow(s,e)*Wn(e)*Math.exp(-s)*a}function du(s){const e=s>=0?1:-1;s=Math.abs(s);const t=.254829592,l=-.284496736,a=1.421413741,o=-1.453152027,c=1.061405429,u=1/(1+.3275911*s),f=1-((((c*u+o)*u+a)*u+l)*u+t)*u*Math.exp(-s*s);return e*f}function yo(s,e){const t=.564189583547756,l=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],a=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],d=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,v,h,m,g=Math.abs(e);if(g<=.5)return v=e*e,m=(((l[0]*v+l[1])*v+l[2])*v+l[3])*v+l[4]+1,h=((a[0]*v+a[1])*v+a[2])*v+1,f=.5-e*(m/h)+.5,f=Math.exp(v)*f,f;if(g<=4)m=((((((o[0]*g+o[1])*g+o[2])*g+o[3])*g+o[4])*g+o[5])*g+o[6])*g+o[7],h=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],f=m/h;else{if(e<=-5.6)return f=2,f=Math.exp(e*e)*2,f;v=1/(e*e),m=(((d[0]*v+d[1])*v+d[2])*v+d[3])*v+d[4],h=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+1,f=(t-v*m/h)/g}return e<0&&(f=Math.exp(e*e)*2-f),f}function xo(s,e){let t=s+e-2;return t<=.25?tr(t+1):t<=1.25?tr(t)+Br(t):tr(t-1)+Math.log(t*(t+1))}function xs(s,e){const t=.0833333333333333,l=-.00277777777760991,a=.00079365066682539,o=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let u,f,v,h,m,g,b,_,p,y,C,E,k,S,I;return v=Math.min(s,e),h=Math.max(s,e),g=v/h,m=g/(g+1),p=1/(g+1),E=p*p,y=p+E+1,C=p+E*y+1,k=p+E*C+1,S=p+E*k+1,I=p+E*S+1,f=1/h,b=f*f,_=((((d*I*b+c*S)*b+o*k)*b+a*C)*b+l*y)*b+t,_*=m/h,f=1/v,b=f*f,u=(((((d*b+c)*b+o)*b+a)*b+l)*b+t)/v+_,u}function ot(s){let e,t,l,a,o;if(t=s,e=s-.5,e>0&&(t=e-.5),t<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],d=.273076135303957,u=.0559398236957378;return o=(((((((c[8]*t+c[7])*t+c[6])*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],a=(u*t+d)*t+1,l=o/a,e>0?t*l/s:s*(l+.5+.5)}else{if(t==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],d=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return o=(((((c[6]*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],a=(((d[4]*t+d[3])*t+d[2])*t+d[1])*t+1,l=o/a,e>0?t/s*(l-.5-.5):s*l}}}function vu(s,e,t){let l,a,o,c;if(s<-1.1||s>1.1)return Number.NaN;c=s*2,o=a=0,l=0;for(let d=1;d<=t;d++)o=a,a=l,l=c*a-o+e[t-d];return(l-o)*.5}function ko(s){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],t=22,l=-.999999985;if(s==0)return 0;if(s==-1)return Number.NEGATIVE_INFINITY;if(s<-1)return Number.NaN;if(Math.abs(s)<=.375)return Math.abs(s)<.5*Number.EPSILON?s:0<s&&s<1e-8||-1e-9<s&&s<0?s*(1-.5*s):s*(1-s*vu(s/.375,e,t));if(s<l)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+s)}function Dr(s,e){const t=.0833333333333333,l=-.00277777777760991,a=.00079365066682539,o=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;let u,f,v,h,m,g,b,_,p,y,C,E,k,S;return s>e?(v=e/s,u=1/(v+1),_=v/(v+1),f=s+(e-.5)):(v=s/e,u=v/(v+1),_=1/(v+1),f=e+(s-.5)),C=_*_,p=_+C+1,y=_+C*p+1,E=_+C*y+1,k=_+C*E+1,S=_+C*k+1,h=1/(e*e),b=((((d*S*h+c*k)*h+o*E)*h+a*y)*h+l*p)*h+t,b*=u/e,m=f*Br(s/e),g=s*(Math.log(e)-1),m>g?b-g-m:b-m-g}function tr(s){if(s<.6){const b=((((((-.00271935708322958*s+-.0673562214325671)*s+-.402055799310489)*s+-.780427615533591)*s+-.168860593646662)*s+.844203922187225)*s+.577215664901533)/((((((.000667465618796164*s+.0325038868253937)*s+.361951990101499)*s+1.56875193295039)*s+3.12755088914843)*s+2.88743195473681)*s+1);return-s*b}else{const e=.422784335098467,t=.848044614534529,l=.565221050691933,a=.156513060486551,o=.017050248402265,c=.000497958207639485,d=1.24313399877507,u=.548042109832463,f=.10155218743983,v=.00713309612391,h=.000116165475989616,m=s-.5-.5,g=(((((c*m+o)*m+a)*m+l)*m+t)*m+e)/(((((h*m+v)*m+f)*m+u)*m+d)*m+1);return m*g}}function lr(s){const e=.418938533204673,t=.0833333333333333,l=-.00277777777760991,a=.00079365066682539,o=-.00059520293135187,c=.000837308034031215,d=-.00165322962780713;if(s<=.8)return tr(s)-Math.log(s);if(s<=2.25)return tr(s-.5-.5);if(s<10){let v=Math.round(s-1.25),h=s,m=1;for(let g=1;g<=v;++g)h+=-1,m*=h;return tr(h-1)+Math.log(m)}let u=1/(s*s),f=(((((d*u+c)*u+o)*u+a)*u+l)*u+t)/s;return e+f+(s-.5)*(Math.log(s)-1)}function gl(s,e){const t=.918938533204673;let l=Math.min(s,e),a=Math.max(s,e);function o(c,d,u){let f=Math.round(u-1),v=1;for(let h=1;h<=f;++h)u+=-1,v*=u/(d+u);return c+Math.log(v)+(lr(d)+(lr(u)-xo(d,u)))}if(l<8){if(l<1)return a<8?lr(l)+(lr(a)-lr(l+a)):lr(l)+Dr(l,a);let c;if(l<2)return a<=2?lr(l)+lr(a)-xo(l,a):a<8?(c=0,o(c,l,a)):lr(l)+Dr(l,a);if(a<=1e3){let d=Math.round(l-1);c=1;for(let u=1;u<=d;++u){l+=-1;let f=l/a;c*=f/(f+1)}return c=Math.log(c),a>=8?c+lr(l)+Dr(l,a):o(c,l,a)}else{let d=Math.round(l-1);c=1;for(let u=1;u<=d;++u)l+=-1,c*=l/(l/a+1);return log(c)-d*log(a)+(lr(l)+Dr(l,a))}}else{let c=xs(l,a),d=l/a,u=-(l-.5)*Math.log(d/(d+1)),f=a*Br(d);return u>f?Math.log(a)*-.5+t+c-f-u:Math.log(a)*-.5+t+c-u-f}}function Eo(s){return(s==0?1024:-300)*.69314718055995*.99999}function Cn(s){const e=.0566749439387324,t=.0456512608815524,l=.333333333333333,a=-.224696413112536,o=.00620886815375787,c=-1.27408923933623,d=.354508718369557;let u,f,v,h,m;return s<-.39||s>.57?(h=s+.5+.5,s-Math.log(h)):(s<-.18?(u=s+.3,u/=.7,m=e-u*.3):s>.18?(u=s*.75-.25,m=t+u/3):(u=s,m=0),f=u/(u+2),v=f*f,h=((o*v+a)*v+l)/((d*v+c)*v+1),v*2*(1/(1-f)-f*h)+m)}function Br(s){if(Math.abs(s)>.375)return Math.log(1+s);const e=-1.29418923021993,t=.405303492862024,l=-.0178874546012214,a=-1.62752256355323,o=.747811014037616,c=-.0845104217945565;let d=s/(s+2),u=d*d,f=(((l*u+t)*u+e)*u+1)/(((c*u+o)*u+a)*u+1);return d*2*f}function mu(s){const e=.564189583547756,t=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],o=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],d=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,f,v,h,m;if(v=Math.abs(s),v<=.5)return u=s*s,m=(((t[0]*u+t[1])*u+t[2])*u+t[3])*u+t[4]+1,h=((l[0]*u+l[1])*u+l[2])*u+1,s*(m/h);if(v<=4){m=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7],h=((((((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4])*v+o[5])*v+o[6])*v+o[7];let b=.5-Math.exp(-s*s)*m/h+.5;return s<0?-b:b}if(v>=5.8)return s>0?1:-1;f=s*s,u=1/f,m=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],h=(((d[0]*u+d[1])*u+d[2])*u+d[3])*u+1,u=(e-m/(f*h))/v;let g=.5-Math.exp(-f)*u+.5;return s<0?-g:g}function hu(s){const e=914041914819518e-24,t=.0238082361044469,l=-.499999999085958,a=.107141568980644,o=-.0119041179760821,c=.000595130811860248;if(Math.abs(s)<=.15)return s*(((t*s+e)*s+1)/((((c*s+o)*s+a)*s+l)*s+1));{let d=Math.exp(s);return s>0?d*(.5-1/d+.5):d-.5-.5}}function Un(s,e){let t;if(e>0){if(s>0||(t=s+e,t<0))return Math.exp(s)*Math.exp(e)}else if(s<0||(t=s+e,t>0))return Math.exp(s)*Math.exp(e);return Math.exp(t)}function gu(s){const e=.785398163397448,t=1.4616321449683622,l=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],a=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],o=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let d,u,f,v,h,m,g,b,_,p,y,C,E;if(y=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),y>v&&(y=v),E=1e-9,b=0,s<.5){if(fabs(s)<=E){if(s==0)return 0;b=-1/s}else{if(h=-s,_=e,h<=0&&(h=-h,_=-_),h>=y)return 0;if(f=Math.round(h),h-=f,f=Math.round(h*4),h=(h-f*.25)*4,u=f/2,u+u!=f&&(h=1-h),m=e*h,d=u/2,d+d!=u&&(_=-_),u=(f+1)/2,d=u/2,d+=d,d==u){if(m==0)return 0;b=_*(cos(m)/sin(m)*4)}else b=_*(sin(m)/cos(m)*4)}s=1-s}if(s<=3){g=s,C=l[0]*s;for(let k=1;k<=5;++k)g=(g+a[k-1])*s,C=(C+l[k])*s;return g=(C+l[6])/(g+a[5]),p=s-t,g*p+b}if(s<y){h=1/(s*s),g=h,C=o[0]*h;for(let k=1;k<=3;++k)g=(g+c[k-1])*h,C=(C+o[k])*h;b=C/(g+c[3])-.5/s+b}return b+log(s)}function pu(s,e,t,l){let a,o,c,d,u,f;if(s>l*.001){if(d=s*Math.log(t),d<Math.exparg(1))return 0;a=Math.exp(d)}else a=1;for(a*=e/s,f=l/s,u=s+1,d=t,c=d/u,u+=1,d=t*d,o=d/u,c+=o;Math.abs(t)>f;)u+=1,d=t*d,o=d/u,c+=o;return a*=s*c+1,a}function bu(s,e,t,l){const a=.577215664901533;let o,c,d,u,f,v,h=e*t;for(f=t-h,c=e*l<=.02?Math.log(t)+gu(e)+a+f:Math.log(h)+a+f,o=l*5*Math.abs(c),d=1,u=0,d+=1,f*=t-h/d,v=f/d,u+=v;Math.abs(v)>o;)d+=1,f*=t-h/d,v=f/d,u+=v;return-s*(c+u)}function pl(s,e,t,l){let a,o,c,d,u,f,v,h,m;if(t==0)return 0;if(v=Math.min(s,e),v>=1)f=s*Math.log(t)-gl(s,e),o=Math.exp(f)/s;else if(h=Math.max(s,e),h<8)if(h<=1){if(o=Math.pow(t,s),o==0)return o;m=s+e,m>1?(u=s+e-1,f=(ot(u)+1)/m):f=ot(m)+1,c=(ot(s)+1)*(ot(e)+1)/f,o*=c*(e/m)}else{if(u=tr(v),a=Math.round(h-1),a>=1){c=1;for(let y=1;y<=a;++y)h+=-1,c*=h/(v+h);u+=Math.log(c)}f=s*Math.log(t)-u,h+=-1,m=v+h,m>1?(u=v+h-1,d=(ot(u)+1)/m):d=ot(m)+1,o=Math.exp(f)*(v/s)*(ot(h)+1)/d}else u=tr(v)+Dr(v,h),f=s*Math.log(t)-u,o=v/s*Math.exp(f);if(o==0||s<=l*.1)return o;let g=l/s,b=0,_=0,p;for(c=1,b+=1,c*=(.5-e/b+.5)*t,p=c/(s+b),_+=p;b<1e7&&Math.abs(p)>g;)b+=1,c*=(.5-e/b+.5)*t,p=c/(s+b),_+=p;return s*_>-1?o*=s*_+1:o=0,o}function ks(s,e,t,l,a,o){let c,d,u,f,v,h=s+e,m=s+1;if(a>1&&s>=1&&h>=m*1.1?(u=Math.round(Math.abs(Eo(1))),d=Math.round(Eo(0)),u>d&&(u=d),f=Math.exp(-u)):(u=0,f=1),c=yu(u,s,e,t,l)/s,a==1||c==0)return c;let g=a-1,b=f;if(d=0,e>1){if(l>1e-4){let _=(e-1)*t/l-s;_>=1&&(d=_<g?Math.round(_):g)}else d=g;for(let _=0;_<d;++_)v=_,f*=(h+v)/(m+v)*t,b+=f}for(let _=d;_<g&&(v=_,f*=(h+v)/(m+v)*t,b+=f,!(f<=o*b));++_);return c*=b,c}function _u(s,e,t,l,a,o){let c,d,u,f,v,h,m,g,b,_,p,y,C,E,k,S,I,j,N;if(!Number.isFinite(a)||(N=wu(s,e,t,l),Number.isNaN(N)))return Number.NaN;if(N==0)return 0;for(c=a+1,b=e/s,_=1/s+1,E=l+1,u=0,f=1,h=s+1,y=0,C=1,k=1,S=c/_,v=_/c,u+=1,m=u/s,g=u*(e-u)*t,d=s/h,j=f*(f+b)*d*d*(g*t),d=(m+1)/(_+m+m),I=u+g/h+d*(c+u*E),f=m+1,h+=2,m=j*y+I*k,y=k,k=m,m=j*C+I*S,C=S,S=m,p=v,v=k/S,y/=S,C/=S,k=v,S=1;u<1e4&&(u+=1,m=u/s,g=u*(e-u)*t,d=s/h,j=f*(f+b)*d*d*(g*t),d=(m+1)/(_+m+m),I=u+g/h+d*(c+u*E),f=m+1,h+=2,m=j*y+I*k,y=k,k=m,m=j*C+I*S,C=S,S=m,p=v,v=k/S,!(Math.abs(v-p)<=o*v));)y/=S,C/=S,k=v,S=1;return N*v}function wu(s,e,t,l){const a=.398942280401433;let o,c,d,u,f,v,h,m,g;if(t==0||l==0)return 0;if(h=Math.min(s,e),h<8){let b,_;if(t<=.375?(b=Math.log(t),_=Br(-t)):l>.375?(b=Math.log(t),_=Math.log(l)):(b=Br(-l),_=Math.log(l)),v=s*b+e*_,h>=1)return v-=gl(s,e),Math.exp(v);if(m=Math.max(s,e),m>=8)return u=tr(h)+Dr(h,m),h*Math.exp(v-u);if(m<=1){let y=Math.exp(v);return y==0?0:(g=s+e,g>1?(u=s+e-1,v=(ot(u)+1)/g):v=ot(g)+1,c=(ot(s)+1)*(ot(e)+1)/v,y*(h*c)/(h/m+1))}if(u=tr(h),o=Math.round(m-1),o>=1){c=1;for(let y=1;y<=o;++y)m+=-1,c*=m/(h+m);u=Math.log(c)+u}v-=u,m+=-1,g=h+m;let p;return g>1?(u=h+m-1,p=(ot(u)+1)/g):p=ot(g)+1,h*Math.exp(v)*(ot(m)+1)/p}else{let b,_,p,y;return s<=e?(b=s/e,_=b/(b+1),p=1/(b+1),y=s-(s+e)*t):(b=e/s,_=1/(b+1),p=b/(b+1),y=(s+e)*l-e),d=-y/s,u=Math.abs(d)>.6?d-Math.log(t/_):Cn(d),d=y/e,f=Math.abs(d)<=.6?Cn(d):d-Math.log(l/p),v=Math.exp(-(s*u+e*f)),a*Math.sqrt(e*_)*v*Math.exp(-xs(s,e))}}function yu(s,e,t,l,a){const o=.398942280401433;let c,d,u,f,v,h,m,g;if(h=Math.min(e,t),h<8){let b,_;if(l<=.375?(b=Math.log(l),_=Br(-l)):a>.375?(b=Math.log(l),_=Math.log(a)):(b=Br(-a),_=Math.log(a)),v=e*b+t*_,h>=1)return v-=gl(e,t),Un(s,v);if(m=Math.max(e,t),m>=8)return u=tr(h)+Dr(h,m),h*Un(s,v-u);if(m<=1){let y=Un(s,v);return y==0?y:(g=e+t,g>1?(u=e+t-1,v=(ot(u)+1)/g):v=ot(g)+1,c=(ot(e)+1)*(ot(t)+1)/v,y*(h*c)/(h/m+1))}u=tr(h);let p=Math.round(m-1);if(p>=1){c=1;for(let y=1;y<=p;++y)m+=-1,c*=m/(h+m);u+=Math.log(c)}return v-=u,m+=-1,g=h+m,d=g>1?(ot(g-1)+1)/g:ot(g)+1,h*Un(s,v)*(ot(m)+1)/d}else{let b,_,p,y;e>t?(b=t/e,_=1/(b+1),p=b/(b+1),y=(e+t)*a-t):(b=e/t,_=b/(b+1),p=1/(b+1),y=e-(e+t)*l),-ko(t/e);let C=-y/e;return u=Math.abs(C)>.6?C-Math.log(l/_):Cn(C),C=y/t,f=Math.abs(C)>.6?C-Math.log(a/p):Cn(C),v=Un(s,-(e*u+t*f)),o*Math.sqrt(t*_)*v*Math.exp(-xs(e,t))}}function bl(s,e,t,l,a,o){let d=Array(30),u=Array(30),f=e-.5-.5,v=s+f*.5,h=l>.375?Math.log(t):Br(-l),m=-v*h;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+ko(ot(e))+e*Math.log(m)+v*h,b=g-(Dr(e,s)+e*Math.log(v)),_=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let p=_==0,y=a==0?0:Math.exp(Math.log(a)-b),C=xu(e,m,g,o),E=.25/(v*v),k=h*.25*h,S=C,I=S,j=1,N=1,A=0;for(let T=1;T<=30;++T){let P=e+A;S=(P*(P+1)*S+(m+P+1)*j)*E,A+=2,j*=k,N/=A*(A+1);let R=T-1;d[R]=N;let V=0;if(T>1){let z=e-T;for(let O=1;O<=R;++O)V+=z*d[O-1]*u[R-O],z+=e}u[R]=f*N+V/T;let F=u[R]*S;if(I+=F,I<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(F)<=o*(I+y))break}return a+=p?Math.exp(b+Math.log(I)):_*I,a}function xu(s,e,t,l){const a=1.772453850905516;if(s*e==0)return e<=s?Math.exp(-t):0;if(s==.5){if(e<.25)return(.5-mu(Math.sqrt(e))+.5)*Math.exp(-t);{let o=Math.sqrt(e);return yo(1,o)/o*a}}else if(e<1.1){let o=3,c=e,d=e/(s+3),u=l*.1/(s+1),f;for(o+=1,c*=-(e/o),f=c/(s+o),d+=f;Math.abs(f)>u;)o+=1,c*=-(e/o),f=c/(s+o),d+=f;let v=s*e*((d/6-.5/(s+2))*e+1/(s+1)),h=s*Math.log(e),m=ot(s),g=m+1;if(e>=.25&&s<e/2.59||h>-.13394){let b=hu(h),_=((b+.5+.5)*v-b)*g-m;return _<=0?0:_*Math.exp(-t)}else return(.5-Math.exp(h)*g*(.5-v+.5)+.5)*Math.exp(-t)}else{let o=1,c=1,d=e,u=e+(1-s),f=1,v,h;o=e*c+f*o,d=e*u+f*d,v=o/d,f+=1;let m=f-s;for(c=o+m*c,u=d+m*u,h=c/u;Math.abs(h-v)>=l*h;)o=e*c+f*o,d=e*u+f*d,v=o/d,f+=1,m=f-s,c=o+m*c,u=d+m*u,h=c/u;return h}}function ku(s,e,t,l){const o=1.12837916709551,c=.353553390593274,d=Array(21),u=Array(21),f=Array(21),v=Array(21);let h=s*Cn(-t/s)+e*Cn(t/e),m;if(m=Math.exp(-h),m==0)return 0;let g=Math.sqrt(h),b=g/c*.5,_=h+h,p,y,C,E;s<e?(p=s/e,y=1/(p+1),C=(e-s)/e,E=1/Math.sqrt(s*(p+1))):(p=e/s,y=1/(p+1),C=(e-s)/s,E=1/Math.sqrt(e*(p+1))),d[0]=C*.6666666666666666,f[0]=d[0]*-.5,v[0]=-f[0];let k=.5/o*yo(1,g),S=c,I=k+v[0]*E*S,j=1,N=p*p,A=1,T=E,P=b,R=_;for(let F=2;F<=20;F+=2){A*=N,d[F-1]=y*2*(p*A+1)/(F+2);let z=F+1;j+=A,d[z-1]=C*2*j/(F+3);for(let W=F;W<=z;++W){let Q=(W+1)*-.5;u[0]=Q*d[0];for(let G=2;G<=W;++G){let Z=0;for(let se=1;se<=G-1;++se){let te=G-se;Z+=(se*Q-te)*d[se-1]*u[te-1]}u[G-1]=Q*d[G-1]+Z/G}f[W-1]=u[W-1]/(W+1);let ee=0;for(let G=1;G<=W-1;++G)ee+=v[W-G-1]*f[G-1];v[W-1]=-(ee+f[W-1])}k=c*P+(F-1)*k,S=c*R+F*S,P=_*P,R=_*R,T*=E;let O=v[F-1]*T*k;T*=E;let H=v[z-1]*T*S;if(I+=O+H,Math.abs(O)+Math.abs(H)<=l*I)break}let V=Math.exp(-xs(s,e));return o*m*V*I}function Eu(s,e,t,l){let o=0,c=0;function d(p,y,C,E){const k=pl(p,y,C,1e-15);return E?.5-k+.5:k}function u(p,y,C,E){const k=pl(y,p,C,1e-15);return E?k:.5-k+.5}function f(p,y,C,E,k,S){const I=_u(p,y,C,E,k,15000000000000002e-30);return S?.5-I+.5:I}function v(p,y,C,E,k){let S=Math.round(y);y=y-S,y===0&&(S=S-1,y=1);let I=ks(y,p,E,C,S,1e-15);return C<=.7?(I=I+pl(p,y,C,1e-15),k?.5-I+.5:I):(p<=15&&(S=20,I=I+ks(p,y,C,E,S,1e-15),p=p+S),I=bl(p,y,C,E,I,15*1e-15),k?.5-I+.5:I)}if(s<1e-15*.001&&e<1e-15*.001)return e/(s+e);let h,m,g,b,_;if(s<=1||e<=1){if(t>.5?(_=!0,h=e,g=l,m=s,b=t):(_=!1,h=s,g=t,m=e,b=l),m<Math.min(1e-15,1e-15*h))return o=pu(h,m,g,1e-15),_?.5-o+.5:o;if(h<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=bu(h,m,g,1e-15),_?c:.5-c+.5;if(Math.max(h,m)>1){if(m<=1)return d(h,m,g,_);if(g>=.29)return u(h,m,b,_);if(g<.1&&Math.pow(g*m,h)<=.7)return d(h,m,g,_)}else{if(h>=Math.min(.2,m)||Math.pow(g,h)<=.9)return d(h,m,g,_);if(g>=.3)return u(h,m,b,_)}let p=!1;return Math.max(h,m)>1&&m>15?c=0:(p=!0,c=ks(m,h,b,g,20,1e-15),m+=20),c=bl(m,h,b,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(p?c=ks(m-n,h,b,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=bl(m,h,b,g,c,15*1e-15),o=-expm1(c),_?.5-o+.5:o):(o=.5-c+.5,_?.5-o+.5:o)}else{let p=Number.isFinite(s+e)?s>e?(s+e)*l-e:s-(s+e)*t:s*l-e*t;const y=p<0;let C,E,k,S;if(y?(p=-p,C=e,k=l,E=s,S=t):(C=s,k=t,E=e,S=l),E<40)return E*k<=.7?d(C,E,k,y):v(C,E,k,S,y);if(C>E){if(E<=100||p>E*.03)return f(C,E,k,S,p,y)}else{if(C<=100)return f(C,E,k,S,p,y);if(p>C*.03)return f(C,E,k,S,p,y)}return o=ku(C,E,p,1e-15*100),y?.5-o+.5:o}}function So(s){const e=s.nrows,t=s.ncols;if(e<t){const c=So(s.subset([],Xe.seq(1,e)));return{Q:c.Q,R:Cu(c.Q,s)}}let l=Le.eye(e),a=s.t();for(let c=1;c<=t;c++)for(let d=e;d>=c+1;d--){const u=a.v.subarray((d-2)*t,d*t),f=l.v.subarray((d-2)*e,d*e),v=u.slice(),h=f.slice(),[m,g,b]=Su(v[c-1],v[c-1+t]);for(let _=0;_<t;_++)u[_]=v[_]*m+v[_+t]*g,u[_+t]=v[_]*-g+v[_+t]*m,f[_]=h[_]*m+h[_+e]*g,f[_+e]=h[_]*-g+h[_+e]*m;for(let _=t;_<e;_++)f[_]=h[_]*m+h[_+e]*g,f[_+e]=h[_]*-g+h[_+e]*m}const o=Xe.seq(1,t);return{Q:e===t?l:l.subset([],o),R:e===t?a.t():a.subset([],o).t()}}function Su(s,e){if(s==0)return[0,1,e];if(Math.abs(s)>Math.abs(e)){const o=e/s,c=Math.sqrt(1+o*o),d=1/c;return[d,o*d,s*c]}const t=s/e,l=Math.sqrt(1+t*t),a=1/l;return[t*a,a,e*l]}function _l(s){return typeof s=="number"}function Co(s,e){e===void 0&&(e=s);const t=s.nrows,l=s.ncols,a=e.nrows;e.ncols;const o=t,c=a,d=l,u=new Float64Array(o*c);for(let f=0;f<d;f++){const v=s.v.subarray(f*t,(f+1)*t),h=e.v.subarray(f*a,(f+1)*a);for(let m=0;m<c;m++){const g=u.subarray(m*o,(m+1)*o);for(let b=0;b<o;b++)g[b]+=v[b]*h[m]}}return new Le(u,o,c)}function Cu(s,e){if(e===void 0&&(e=s),!Xt(s)||!Xt(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=s.nrows,l=s.ncols,a=e.nrows,o=e.ncols,c=l,d=o,u=t,f=new Float64Array(c*d);for(let v=0;v<d;v++){const h=e.v.subarray(v*a,(v+1)*a),m=f.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const b=s.v.subarray(g*t,(g+1)*t);let _=0;for(let p=0;p<u;p++)_+=b[p]*h[p];m[g]=_}}return new Le(f,c,d)}function No(s,e,t){if(t===void 0){if(e!==s.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new we(s.v)}if(s.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new Le(s.v,e,t)}function Xt(s){return s&&s.constructor===Le}function Nu(s,e,t){return new Le(new Float64Array(s),e,t)}class Le{static valuesConstructor=Float64Array;static TOLERANCE=Math.pow(10,-9);constructor(e,t,l){if(!ArrayBuffer.isView(e)||e.constructor!==Le.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||l===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*l)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=l}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Le.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const l=Le.eye(e),a=Le.eye(e),o=this.t(),c=o.v[(e-1)*e+(e-1)],d=e-1;for(let u=0;u<e;u++)a.v[d*e+u]=l.v[d*e+u]/c;for(let u=e-2;u>=0;u--){let f=l.getcolumn(u+1);const v=o.getcolref(u+1);for(let h=u+1;h<e;h++){const m=a.getcolumn(h+1);f=f.subtract(m.mult(v[h]))}a.v.set(f.divide(v[u]).v,u*e)}return a.t()}if(this.islowertriangular()){const l=this.diag();if(mo(l)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const a=Le.eye(e),o=Le.eye(e),c=this.t(),d=0,u=c.v[0];for(let f=0;f<e;f++)o.v[d*e+f]=a.v[d*e+f]/u;for(let f=1;f<e;f++){let v=a.getcolumn(f+1);const h=c.getcolref(f+1);for(let m=0;m<f;m++){const g=o.getcolumn(m+1);v=v.subtract(g.mult(h[m]))}o.v.set(v.divide(h[f]).v,f*e)}return o.t()}const t=So(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Le.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Le.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let l=0;l<e;l++)t[l]=this.getcolref(l+1)[l];return new we(t)}t(){const e=this.nrows,t=this.ncols,l=new Le.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let a=0;a<this.ncols;a++){const o=this.v.subarray(a*this.nrows,(a+1)*this.nrows);for(let c=0;c<this.nrows;c++)l[c*t+a]=o[c]}return new Le(l,t,e)}for(let a=0;a<this.nrows;a++){const o=l.subarray(a*t,(a+1)*t);for(let c=0;c<this.ncols;c++)o[c]=this.v[c*this.nrows+a]}return new Le(l,t,e)}dot(e){if(Be(e))return new Le(xl(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Xt(e))return new Le(xl(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,l){if(Xt(e))return new Le(wl(this.v,e.v,t),this.nrows,this.ncols);if(_l(e))return new Le(yl(this.v,e,t),this.nrows,this.ncols);if(!Be(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(l===void 0&&(l=e.length===this.ncols?2:1),l===2&&e.length===this.ncols){const a=new Le.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)a.set(yl(this.getcolref(o+1),e.v[o],t),o*this.nrows);return new Le(a,this.nrows,this.ncols)}if(l===1&&e.length===this.nrows){const a=new Le.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)a.set(wl(this.getcolref(o+1),e.v,t),o*this.nrows);return new Le(a,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e,t){if(t===void 0&&(t=2),t==2){const l=this.ncols,a=new Le.valuesConstructor(l);for(let o=0;o<l;o++)a[o]=e(this.getcolref(o+1));return new we(a)}if(t==1)return this.t().apply(e,2);if(t==0){const l=this.v.length,a=new Le.valuesConstructor(l);for(let o=0;o<l;o++)a[o]=e(this.v[o]);return new Le(a,this.nrows,this.ncols)}}replace(e,t,l){typeof t=="number"&&(t=[t]),t.length===0&&(t=Xe.seq(1,this.nrows)),ar(t)||(t=or(t)),typeof l=="number"&&(l=[l]),l.length===0&&(l=Xe.seq(1,this.ncols)),ar(l)||(l=or(l));const a=t.length,o=l.length;if(un(t)<1||Dt(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(un(l)<1||Dt(l)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==a||e.ncols!==o)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<l.length;c++){const d=e.getcolref(c+1),u=(l.v[c]-1)*this.nrows;for(let f=0;f<t.length;f++){const v=t.v[f];this.v[u+v-1]=d[f]}}return this}copy(){return new Le(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new we.valuesConstructor(this.ncols);for(let l=0;l<this.ncols;l++)t[l]=this.getcolref(l+1)[e-1];return new we(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new we(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=or([e])),typeof t=="number"&&(t=or([t])),Array.isArray(e)&&(e=e.length===0?null:or(e)),Array.isArray(t)&&(t=t.length===0?null:or(t)),e!==null&&!ar(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!ar(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(un(e)<1||Dt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(un(t)<1||Dt(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const d=t.length,u=this.nrows,f=new Le.valuesConstructor(u*d);for(let v=0;v<t.length;v++)f.set(this.v.slice((t.v[v]-1)*this.nrows,t.v[v]*this.nrows),v*this.nrows);return new Le(f,u,d)}if(t==null)return this.t().subset(t,e).t();const l=e.length,a=t.length,o=new Le.valuesConstructor(l*a);let c=new Le.valuesConstructor(l);for(let d=0;d<a;d++){const u=this.v.subarray((t.v[d]-1)*this.nrows,t.v[d]*this.nrows);for(let f=0;f<l;f++)c[f]=u[e.v[f]-1];o.set(c,d*l)}return new Le(o,l,a)}toString(e){function t(c,d){return" ".repeat(d-c.length)+c}e===void 0&&(e=2),this.ncols;const l=Math.round(Math.abs(Math.log10(Dt(this.v))))+e+3;let a="";const o=this.t();for(let c=1;c<=o.ncols;c++)a+=Array.from(o.getcolref(c)).map(d=>t(d.toFixed(e),l)).join(" ")+`
`;return a}toCSV(e,t,l,a){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const o=a!=null&&a.length>0,c=l!=null&&l.length>0;if(o&&a.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&l.length!==this.ncols+(o?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const d=this.t();let u=c?l.join(e)+`
`:"";for(let f=1;f<=d.ncols;f++)u=u+(o?a[f-1]+e:"")+d.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,t),u}static randn(e,t,l,a){return No(_o(e*t,l,a),e,t)}static rand(e,t,l,a){return No(bo(e*t,l,a),e,t)}static eye(e,t){t===void 0&&(t=e);const l=new Float64Array(e*t);for(let a=0;a<Math.min(e,t);a++)l[a*e+a]=1;return new Le(l,e,t)}static diagm(e){if(!Be(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,l=new Float64Array(t*t);for(let a=0;a<t;a++)l[a*t+a]=e.v[a];return new Le(l,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Le(new Float64Array(e*t),e,t)}static ones(e,t){return Le.fill(1,e,t)}static fill(e,t,l){l===void 0&&(l=t);const a=new Float64Array(t*l);for(let o=0;o<a.length;o++)a[o]=e;return new Le(a,t,l)}static outer(e,t,l){if(Array.isArray(e)&&(e=rt(e)),Array.isArray(t)&&(t=rt(t)),!Be(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Be(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const a=Le.zeros(e.length,t.length);for(let o=0;o<t.length;o++){const c=t.v[o],d=a.getcolref(o+1);for(let u=0;u<e.length;u++)d[u]=l(e.v[u],c)}return a}static parseCSV(e,t,l,a){function o(p){return p.some(y=>Number.isNaN(Number.parseFloat(y.trim())))}t===void 0&&(t=",");const c=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let d=e.split(/\n/),u=[],f=0;const v=d[0].split(t);(l||l===void 0&&o(v))&&(u=v,f=1),d=d.filter(p=>p.trim().length>1);let h=[],m=0;a&&(m=1);const g=d.length-f,b=v.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const _=Le.zeros(b,g);for(let p=f;p<g+f;p++){const y=d[p].split(t);let C;if(a?(h[p-f]=y[0],C=y.slice(1).map(E=>Number.parseFloat(E.trim().replace(c,".")))):C=y.map(E=>Number.parseFloat(E.trim().replace(c,"."))),C.some(E=>Number.isNaN(E)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(C.length!=b)throw Error("Wrong number of values in row #"+p);_.v.set(new Float64Array(C),(p-f)*b)}return{values:_.t(),header:u,labels:h,sep:t,dec:c}}}function Be(s){return s&&s.constructor===we}function rt(s){return new we(new Float64Array(s))}class we{static valuesConstructor=Float64Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new Xe.valuesConstructor(this.length);let l=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(t[l]=a+1,l=l+1);return new Xe(t.subarray(0,l))}filter(e){const t=new we.valuesConstructor(this.length);let l=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(t[l]=this.v[a],l=l+1);return new we(t.subarray(0,l))}shuffle(){return new we(jo(this.v))}sort(e){return new we(kl(this.v,e))}sortind(e){return new Xe(Po(this.v,e))}rep(e){return To(this,e)}repeach(e){return Mo(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=Xe.seq(1,this.length)),ar(t)||(t=or(t));const l=t.length;if(un(t)<1||Dt(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==l)throw Error('Vector.replace: length of "x" does not match the indices.');for(let a=0;a<t.length;a++){const o=t.v[a];this.v[o-1]=e.v[a]}return this}subset(e){if(typeof e=="number"&&(e=or([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Xe.bool2ind(e):or(e)),!ar(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=we.zeros(t);for(let a=0;a<t;a++){if(e.v[a]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[a]>this.length)throw Error("subset: index exceeds the length of the vector.");l.v[a]=this.v[e.v[a]-1]}return l}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new we(this.v.slice(e-1,t))}copy(){return new we(this.v.slice())}dot(e){return e===void 0&&(e=this),xl(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(Be(e))return new we(wl(this.v,e.v,t));if(_l(e))return new we(yl(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e){const t=this.v.length,l=we.zeros(t);for(let a=0;a<t;a++)l.v[a]=e(this.v[a]);return l}static c(...e){if(e.length===1)return e[0];const t=e.reduce((o,c)=>o+(typeof c=="number"?1:c.length),0),l=new we.valuesConstructor(t);let a=0;for(const o of e)typeof o=="number"?(l[a]=o,a+=1):(l.set(Be(o)?o.v:new we.valuesConstructor(o),a),a+=typeof o=="number"?1:o.length);return new we(l)}static seq(e,t,l){return Ao(e,t,l,we)}static randn(e,t,l){return _o(e,t,l)}static rand(e,t,l){return bo(e,t,l)}static zeros(e){return new we(new we.valuesConstructor(e))}static ones(e){return we.fill(1,e)}static fill(e,t){const l=new we.valuesConstructor(t);for(let a=0;a<l.length;a++)l[a]=e;return new we(l)}}function ar(s){return s.constructor===Xe}function or(s){return new Xe(new Int32Array(s))}class Xe{static valuesConstructor=Int32Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new Xe.valuesConstructor(this.length);let l=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(t[l]=a+1,l=l+1);return new Xe(t.subarray(0,l))}filter(e){const t=new Xe.valuesConstructor(this.length);let l=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(t[l]=this.v[a],l=l+1);return new Xe(t.subarray(0,l))}shuffle(){return new Xe(jo(this.v))}sort(e){return new Xe(kl(this.v,e))}sortind(e){return new Xe(Po(this.v,e))}rep(e){return To(this,e)}repeach(e){return Mo(this,e)}subset(e){if(typeof e=="number"&&(e=or([e])),Array.isArray(e)&&(e=or(e)),!ar(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=new Xe.valuesConstructor(t);for(let a=0;a<t;a++){if(e.v[a]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[a]>this.length)throw Error("subset: index exceeds the length of the vector.");l[a]=this.v[e.v[a]-1]}return new Xe(l)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new Xe(this.v.slice(e-1,t))}static seq(e,t,l){return Ao(e,t,l,Xe)}static ones(e){return Xe.fill(1,e)}static fill(e,t){const l=new Xe.valuesConstructor(t);for(let a=0;a<l.length;a++)l[a]=e;return new Xe(l)}static bool2ind(e){let t=0;const l=new Xe.valuesConstructor(e.length);for(let a=0;a<e.length;a++)e[a]&&(l[t]=a+1,t=t+1);return new Xe(l.subarray(0,t))}}function Ao(s,e,t,l){t===void 0&&(t=s<=e?1:-1);const a=Math.floor((e-s)/t)+1;if(a<1)throw Error("seq: wrong combination of parameters.");const o=new l.valuesConstructor(a);for(let c=0;c<a;c++)o[c]=s+c*t;return new l(o)}function To(s,e){const t=s.length*e,l=new s.constructor.valuesConstructor(t);for(let a=1;a<=e;a++)for(let o=0;o<s.length;o++)l[(a-1)*s.length+o]=s.v[o];return new s.constructor(l)}function Mo(s,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=s.length*e,l=new s.constructor.valuesConstructor(t);for(let a=0;a<s.length;a++)for(let o=0;o<e;o++)l[a*e+o]=s.v[a];return new s.constructor(l)}function wl(s,e,t){if(s.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(s.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const l=new s.constructor(s.length);for(let a=0;a<s.length;a++)l[a]=t(s[a],e[a]);return l}function yl(s,e,t){const l=new s.constructor(s.length);for(let a=0;a<s.length;a++)l[a]=t(s[a],e);return l}function xl(s,e,t,l,a,o){if(l!==a)throw Error("_dot: matrix dimensions do not much.");const c=t,d=o,u=l,f=new s.constructor(c*d);for(let v=0;v<d;v++){const h=e.subarray(v*a,(v+1)*a),m=f.subarray(v*c,(v+1)*c);for(let g=0;g<u;g++){const b=h[g],_=s.subarray(g*t,(g+1)*t);for(let p=0;p<c;p++)m[p]+=_[p]*b}}return f}function jo(s){let e=s.slice(),t=e.length,l,a;for(;t;)a=Math.floor(Math.random()*t--),l=e[t],e[t]=e[a],e[a]=l;return e}function kl(s,e=!1){return e?s.slice().sort((t,l)=>l-t):s.slice().sort((t,l)=>t-l)}function Po(s,e=!1){const t=Xe.seq(1,s.length).v;return e?t.sort((l,a)=>s[a-1]-s[l-1]):t.sort((l,a)=>s[l-1]-s[a-1])}function Au(s,e,t){return 5*s*e+e+4*t*e+s*t}function Tu(s,e){return 2+2*s+s*e+17*e}function et(s,e,t){if(!s||!s.class||!s.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=s.ncols,a=s.ncomp;let o,c;switch(e){case"mX":o=2,c=l;break;case"sX":o=2+l,c=l;break;case"loadings":case"xloadings":o=2+2*l+(t-1)*l,c=l;break;case"P":o=2+2*l,c=a*l;break;case"eigenvals":case"xeigenvals":o=2+2*l+l*a,c=a;break;case"cq0":o=2+2*l+l*a+a,c=a;break;case"cNq":o=2+2*l+l*a+2*a,c=a;break;case"rq0":o=2+2*l+l*a+3*a,c=a;break;case"rNq":o=2+2*l+l*a+4*a,c=a;break;case"ch0":o=2+2*l+l*a+5*a,c=a;break;case"cNh":o=2+2*l+l*a+6*a,c=a;break;case"rh0":o=2+2*l+l*a+7*a,c=a;break;case"rNh":o=2+2*l+l*a+8*a,c=a;break;case"cr0":o=2+2*l+l*a+9*a,c=a;break;case"cNr":o=2+2*l+l*a+10*a,c=a;break;case"rr0":o=2+2*l+l*a+11*a,c=a;break;case"rNr":o=2+2*l+l*a+12*a,c=a;break;case"cg0":o=2+2*l+l*a+13*a,c=a;break;case"cNg":o=2+2*l+l*a+14*a,c=a;break;case"rg0":o=2+2*l+l*a+15*a,c=a;break;case"rNg":o=2+2*l+l*a+16*a,c=a;break;default:throw Error("pcamodel_get: wrong outcome name.")}return s.v.subarray(o,o+c)}function Kt(s,e,t){if(!s||!s.class||!s.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const l=s.ncols,a=s.nrows,o=s.ncomp;let c,d;switch(e){case"scores":case"xscores":c=(t-1)*a,d=a;break;case"T":c=0,d=a*o;break;case"hdist":c=a*o+(t-1)*a,d=a;break;case"qdist":c=2*a*o+(t-1)*a,d=a;break;case"xcumexpvar":case"cumexpvar":c=3*a*o,d=o;break;case"fdistc":c=3*a*o+o+(t-1)*a,d=a;break;case"fdistr":c=4*a*o+o+(t-1)*a,d=a;break;case"gdist":c=5*a*o+o+(t-1)*l,d=l;break;case"rdist":c=5*a*o+o+l*o+(t-1)*l,d=l;break;case"idistc":c=5*a*o+o+2*l*o+(t-1)*l,d=l;break;case"idistr":c=5*a*o+o+3*l*o+(t-1)*l,d=l;break;case"E":c=5*a*o+o+3*l*o+o*l,d=a*l;break;default:throw new Error("pcares_get: wrong outcome name.")}return s.v.subarray(c,c+d)}function Es(s,e,t){if(!Array.isArray(s))return!1;if(s.length===0)return!0;for(let l=0;l<s.length;l++){const a=s[l];if(a<e||a>t)return!1}return!0}function Mu(s,e,t,l,a,o,c){if(!Xt(e))throw new Error("pca_fit: X must be a matrix.");o||(o=[]);const d=o&&Array.isArray(o)?o.length:0;if(!Es(o,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!Es(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const f=e.nrows-d,v=e.ncols-u;if(f<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(l===void 0&&(l=!0),a===void 0&&(a=!1),t===void 0&&(t=Math.min(f-1,v)),t<1||t>Math.min(f-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=s._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);s.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(d>0){const E=new Int32Array(o);m=s._malloc(E.length*E.BYTES_PER_ELEMENT),s.HEAP32.set(E,m/E.BYTES_PER_ELEMENT)}let g=null;if(u>0){const E=new Int32Array(c);g=s._malloc(E.length*E.BYTES_PER_ELEMENT),s.HEAP32.set(E,g/E.BYTES_PER_ELEMENT)}const b=Tu(v,t),_=Float64Array,p=s._malloc(b*_.BYTES_PER_ELEMENT);if(s.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,t,l,a,p,m,d,g,u])!==1)throw new Error("pca_fit: PCA failed.");const C=s.HEAPF64.slice(p/_.BYTES_PER_ELEMENT,p/_.BYTES_PER_ELEMENT+b);return s._free(h),s._free(p),m&&s._free(m),g&&s._free(g),{class:["pcamodel"],v:C,ncomp:t,nrows:f,ncols:v,exclvars:c,center:l,scale:a}}function ju(s,e,t,l){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!Xt(t))throw new Error("pca_predict: X must be a matrix.");l||(l=[]);const a=l&&Array.isArray(l)?l.length:0;if(!Es(l,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const o=t.nrows-a;let c=e.exclvars;t.ncols===e.ncols&&(c=[]);const d=c.length,u=t.ncols-d;if(o<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const f=s._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);s.HEAPF64.set(t.v,f/t.v.BYTES_PER_ELEMENT);let v=null;if(a>0){const A=new Int32Array(l);v=s._malloc(A.length*A.BYTES_PER_ELEMENT),s.HEAP32.set(A,v/A.BYTES_PER_ELEMENT)}let h=null;if(d>0){const A=new Int32Array(c);h=s._malloc(A.length*A.BYTES_PER_ELEMENT),s.HEAP32.set(A,h/A.BYTES_PER_ELEMENT)}const m=s._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);s.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const g=Au(o,e.ncomp,u),b=Float64Array,_=s._malloc(g*b.BYTES_PER_ELEMENT);if(s.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[f,t.nrows,t.ncols,m,_,v,a,h,d])!==1)throw new Error("pca_predict: PCA prediction failed.");const y=s.HEAPF64.slice(_/b.BYTES_PER_ELEMENT,_/b.BYTES_PER_ELEMENT+g);s._free(f),s._free(m),s._free(_),v&&s._free(v),h&&s._free(h);const C={class:["pcares"],v:y,ncomp:e.ncomp,nrows:o,ncols:u,npred:u,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},E=new Array(e.ncomp),k=new Array(e.ncomp),S=new Array(e.ncomp),I=new Array(e.ncomp),j=new Array(e.ncomp),N=Kt(C,"xcumexpvar");j[0]=1,I[0]=N[0],S[0]=1-N[0],E[0]=N[0],k[0]=1-N[0];for(let A=1;A<e.ncomp;A++)j[A]=A+1,I[A]=N[A],S[A]=1-N[A],E[A]=N[A]-N[A-1],k[A]=1-E[A];return C.stat={components:j,resvar:k,expvar:E,cumexpvar:I,cumresvar:S},C}function Pu(s,e,t,l,a,o,c,d){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!Xt(t))throw new Error("pcapcv: X must be a matrix.");d||(d=[]);const u=d&&Array.isArray(d)?d.length:0;if(!Es(d,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const f=e.exclvars.length,v=t.nrows-u,h=t.ncols-f;if(v<3)throw new Error("pcapcv: X must have at least 3 rows.");if(h!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(o)||![0,1,2].includes(o))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(o>0&&(!Number.isInteger(a)||a<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(o>0&&a>v)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(l)||l<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(o===0?v-2:v-Math.ceil(v/a)-1,h,e.ncomp);if(l>m)throw new Error('pcapcv: the value of "ncomp" is too large.');const g=s._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);s.HEAPF64.set(t.v,g/t.v.BYTES_PER_ELEMENT);let b=null;if(u>0){const I=new Int32Array(d);b=s._malloc(I.length*I.BYTES_PER_ELEMENT),s.HEAP32.set(I,b/I.BYTES_PER_ELEMENT)}let _=null;if(f>0){const I=new Int32Array(e.exclvars);_=s._malloc(I.length*I.BYTES_PER_ELEMENT),s.HEAP32.set(I,_/I.BYTES_PER_ELEMENT)}const p=s._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);s.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const y=v*h,C=t.v.constructor,E=s._malloc(y*C.BYTES_PER_ELEMENT);if(s.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,t.nrows,t.ncols,l,e.center,e.scale,o,a,c,p,E,b,u,_,f])!==1)throw new Error("pcapcv: PCVPCA failed.");const S=s.HEAPF64.slice(E/C.BYTES_PER_ELEMENT,E/C.BYTES_PER_ELEMENT+y);return s._free(g),s._free(p),s._free(E),b&&s._free(b),_&&s._free(_),new Le(S,v,h)}function Lu(s,e){if(e[0]===0){const t=e[1]+2;return 2+s*t+2*s+t}return 3+s}const Vr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(s,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(s,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(s,e)=>2*s,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:Lu,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(s,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(s,e)=>2+3*s+e[0],mp:[5,5]}];function Iu(s){let e="<ul>";for(let t=0;t<s.ml.length;t++){const l=Vr[s.ml[t]].title;e=e+"<li>"+l+" <span>"+s.info[t]+"</span></li>"}return e=e+"</ul>",e}function Lo(s,e,t){const l=Vr.findIndex(h=>h.id==="trim");let a=0,o=s.ncols-e,c=0;for(let h=0;h<t.ml.length;h++){if(t.ml[h]!==l){c+=t.mpl_new[h];continue}a=Math.max(a,t.mp_new[c]),o=Math.min(o,t.mp_new[c+1]),c+=t.mpl_new[h]}const d=s.nrows,f=o-a+e,v=Le.zeros(d,f);return c=0,e>0&&(v.v.set(s.v.slice(0,e*d),c),c+=e*d),v.v.set(s.v.slice((e+a)*d,(e+o)*d),c),[a,o,v]}function Ru(s,e){if(!s||!e||typeof e!="object"||Object.keys(e).length===0)return s;const t=Vr.findIndex(d=>d.id==="trim");if(e.ml.findIndex(d=>d===t)<0)return s;const[a,o,c]=Lo(s.values,s.nresp,e);return s.values=c,s.varlabels=s.nresp>0?s.varlabels.slice(0,s.nresp).concat(s.varlabels.slice(s.nresp+a,s.nresp+o)):s.varlabels.slice(a,o),s.varindices=s.nresp>0?ir(0,s.nresp-1).concat(ir(0,o-a-1)):ir(0,o-a-1),s.varvalues=s.nresp>0?s.varvalues.slice(0,s.nresp).concat(s.varvalues.slice(s.nresp+a,s.nresp+o)):s.varvalues.slice(a,o),s}function Io(s,e,t,l,a=!0,o=[]){if(!Xt(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(l)||l.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,d;a?(c=e.ncols,d=e.nrows-t):(c=e.nrows,d=e.ncols-t);const u=l.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const f=new Int32Array(u),v=new Int32Array(u),h=new Int32Array(u);let m=0,g=0;for(let R=0;R<l.length;R++){const V=l[R].id,F=l[R].params,z=Vr.findIndex(H=>H.id==V);if(z<0)throw new Error("prep_fit: wrong method name: "+V+".");const O=Vr[z];if(F.length!==O.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+V+".");f[R]=z,v[R]=O.mpl,h[R]=O.get_mpl_new(d,F),m=m+v[R],g=g+h[R]}const b=new Float64Array(m);let _=0;for(let R=0;R<l.length;R++){const V=l[R].id,F=l[R].params;Vr.findIndex(z=>z.id==V),b.set(F,_),_=_+v[R]}const p=s._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);s.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const y=s._malloc(f.length*f.BYTES_PER_ELEMENT);s.HEAP32.set(f,y/f.BYTES_PER_ELEMENT);const C=s._malloc(v.length*v.BYTES_PER_ELEMENT);s.HEAP32.set(v,C/v.BYTES_PER_ELEMENT);const E=s._malloc(h.length*h.BYTES_PER_ELEMENT);s.HEAP32.set(h,E/h.BYTES_PER_ELEMENT);const k=s._malloc(b.length*b.BYTES_PER_ELEMENT);s.HEAPF64.set(b,k/b.BYTES_PER_ELEMENT);const S=s._malloc(g*b.BYTES_PER_ELEMENT),I=new Int32Array(o),j=I.length,N=s._malloc(j*I.BYTES_PER_ELEMENT);if(s.HEAP32.set(I,N/I.BYTES_PER_ELEMENT),s.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[p,c,d,t,u,y,C,k,E,S,a,N,j])!==1)throw new Error("prep_fit: unexpected error.");const T=s.HEAPF64.slice(S/b.BYTES_PER_ELEMENT,S/b.BYTES_PER_ELEMENT+g);return s._free(p),s._free(y),s._free(k),s._free(C),s._free(N),s._free(S),s._free(E),{ml:f,mpl:v,mp:b,mpl_new:h,mp_new:T,npred:d,class:["prepmodel"]}}function El(s,e,t,l,a=!0,o=!1){if(!Xt(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(l)==0||!l.ml)return e;let c,d;if(a?(c=e.ncols,d=e.nrows-t):(c=e.nrows,d=e.ncols-t),d!==l.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+l.npred+" got "+d+").");const u=l.ml,f=l.mpl_new,v=l.mp_new,h=f.reduce((S,I)=>S+I,0);if(!u||u.length<1||!f||f.length!==u.length||v.length!==h)throw new Error("prep_apply: wrong structure of the model object.");const m=u.length,g=s._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);s.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const b=s._malloc(u.length*u.BYTES_PER_ELEMENT);s.HEAP32.set(u,b/u.BYTES_PER_ELEMENT);const _=s._malloc(f.length*f.BYTES_PER_ELEMENT);s.HEAP32.set(f,_/f.BYTES_PER_ELEMENT);const p=s._malloc(v.length*v.BYTES_PER_ELEMENT);s.HEAPF64.set(v,p/v.BYTES_PER_ELEMENT);const y=s._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(s.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[g,c,d,t,m,b,_,p,y,a])!==1)throw new Error("prep_apply: unexpected error.");const E=s.HEAPF64.slice(y/e.v.BYTES_PER_ELEMENT,y/e.v.BYTES_PER_ELEMENT+e.v.length);s._free(g),s._free(b),s._free(_),s._free(p),s._free(y);const k=new Le(E,e.nrows,e.ncols);if(o){const[S,I,j]=Lo(k,t,l);return j}return k}function zu(s,e,t,l){e===void 0&&(e=!0),t===void 0&&(t=!1),l===void 0&&(l=!1);function a(u,f,v,h){if(typeof f=="boolean")return f?u.apply(v,2):rt([h]).rep(u.ncols);if(!Be(f))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(f.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return f}const o=a(s,e,cn,0),c=a(s,t,gs,1),d=Le.zeros(s.nrows,s.ncols);for(let u=1;u<=s.ncols;u++){const f=s.getcolref(u),v=d.getcolref(u),h=o.v[u-1],m=1/c.v[u-1];for(let g=0;g<s.nrows;g++)v[g]=(f[g]-h)*m}return l?[d,o,c]:d}function Ro(s,e,t){return s<e?["regular","in"]:s>t?["outlier","out"]:["extreme","out"]}function zo(s,e,t,l,a,o,c,d){if(!d||d.length===0)return[0,0];let u=0,f=0;for(let v of d){const h=s[v],[m,g]=Ro(h,e,t);o[m]+=1,c[g]+=1,l[v]=m,a[v]=g,u=u+(g==="in"),f=f+(g!=="in")}return[u,f]}function Ss(s,e,t,l,a,o,c,d,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let f=0,v=0;for(let V of u){const F=s[V],[z,O]=Ro(F,t,l);d[O]+=1,a[V]="alien",c.alien+=1,o[V]=O,f=f+(O!=="in"),v=v+(O==="in")}const h=u.slice();h.sort((V,F)=>s[V]-s[F]);let m=h.length;const g=h.map(V=>s[V]);let b=-1,_=0,p=0,y=0,C=0;for(;b<0;)_>0&&(a[h[m-1]]="external",c.alien=c.alien-1,c.external=c.external+1,m=m-1,h.pop(),g.pop()),p=cn(g),y=ps(g),C=y/(p*p),b=4-2*e*C,_=_+1;const E=(2+Math.sqrt(b))/C,k=E-e,S=p/E,I=t/S,j=1-2*(e+k)*(e+3*k)/(3*(e+2*k)**2),N=(j-1)*(1-3*j),A=(e+2*k)/(e+k)**2,T=1+j*A*(j-1-.5*(2-j)*N*A),P=j*Math.sqrt(2*A)*(1+.5*N*A),R=bs((Math.pow(I/(e+k),j)-T)/P);return[f,v,R,k,S,j,T,P,e,p]}function Cs(s,e,t,l,a){const o=s.ncomp,c=s.nrows;let d,u,f;a?(d=a.members.length,u=a.strangers.length,f=0):(a={members:[],strangers:[],unknown:ir(0,c-1)},d=0,u=0,f=c);const v=new Array(o),h=new Array(o),m=new Array(o),g=new Array(o),b=new Array(o),_=new Array(o),p=new Array(o),y=e==="robust"?s.rNq:s.cNq,C=e==="robust"?s.rNh:s.cNh;for(let E=0;E<o;E++){const k=C[E]+y[E],S=Kt(s,e==="robust"?"fdistr":"fdistc",E+1),I=new Array(c),j=new Array(c),N={regular:0,extreme:0,outlier:0,alien:0,external:0},A={in:0,out:0},[T,P]=zo(S,t[E],l[E],j,I,N,A,a.members),[R,V,F,z,O,H,W,Q,ee,G]=Ss(S,k,t[E],l[E],j,I,N,A,a.strangers);f>0&&Ss(S,k,t[E],l[E],j,I,N,A,a.unknown),h[E]=T>0?T/(T+P):0,m[E]=R>0?R/(R+V):0,g[E]=1-F,b[E]=Math.sqrt(h[E]*m[E]),_[E]=T>0&&R>0?(T+R)/(T+R+V+P):0,p[E]=E+1,v[E]={f:S,decs:I,rols:j,decsNum:A,rolsNum:N,TP:T,FN:P,TN:R,FP:V,beta:F,s:z,f0:O,hz:H,Mz:W,Sz:Q,k:ee,m:G}}return{class:["simcares"],classes:s.classes,classNames:s.classNames,ind:a,nMembers:d,nStrangers:u,nUnknown:f,v,nrows:s.nrows,stat:{sensitivity:h,specificity:m,selectivity:g,efficiency:b,accuracy:_,components:p}}}function Ns(s,e,t,l,a,o){(!o||!Array.isArray(o))&&(o=[]);let c=s.exclvars;(!c||!Array.isArray(c))&&(c=[]);const d=l.values.nrows,u=o.length,f=d-u,v=e.ncomp,h=Kt(t.pca,"qdist",v),m=Kt(t.pca,"hdist",v),g=e.limType==="classic"?"c":"r",b=Kt(t.pca,"fdist"+g,v),_=et(s,g+"Nh")[v-1],p=et(s,g+"Nq")[v-1],y=et(s,g+"h0")[v-1],C=et(s,g+"q0")[v-1],E=_+p,k=t.simca.v[v-1],S=l.sep,I=t.simca.classes&&t.simca.classes.length===f,j=I?["","","","",""]:["","","",""];let N="";if(N+=["Reference classes:",I?"provided":"not provided",...j].join(S)+`
`,N+=["Number of components:",v,...j].join(S)+`
`,N+=["Alpha:",(e.alpha/100).toFixed(3),...j].join(S)+`
`,N+=["Limits estimator:",e.limType,...j].join(S)+`
`,N+=`
`,N+=["Nh:",_,...j].join(S)+`
`,N+=["Nq:",p,...j].join(S)+`
`,N+=["Nf:",E,...j].join(S)+`
`,N+=`
`,N+=["F crit (extremes):",e.eCrit[v-1],...j].join(S)+`
`,N+=["F crit (outliers):",e.oCrit[v-1],...j].join(S)+`
`,N+=`
`,c.length>0&&(N+=["Number of excluded variables:",c.length,...j].join(S)+`
`,N+=["Indices of excluded variables:",Uu(c),...j].join(S)+`
`,N+=`
`),N+=["Objects:",d,...j].join(S)+`
`,N+=["In:",k.decsNum.in,...j].join(S)+`
`,N+=["Out:",k.decsNum.out,...j].join(S)+`
`,N+=["Excluded:",u,...j].join(S)+`
`,t.simca.nMembers>0&&(N+=`
`,N+=["Members:",t.simca.nMembers,...j].join(S)+`
`,N+=["Regular:",k.rolsNum.regular,...j].join(S)+`
`,N+=["Extreme:",k.rolsNum.extreme,...j].join(S)+`
`,N+=["Outliers:",k.rolsNum.outlier,...j].join(S)+`
`,N+=["Sensitivity:",t.simca.stat.sensitivity[v-1],...j].join(S)+`
`),t.simca.nStrangers>0&&(N+=`
`,N+=["Strangers:",t.simca.nStrangers,...j].join(S)+`
`,N+=["In:",k.decsNum.in-k.rolsNum.regular,...j].join(S)+`
`,N+=["Aliens:",k.rolsNum.alien,...j].join(S)+`
`,N+=["External:",k.rolsNum.external,...j].join(S)+`
`,N+=["Specificity:",t.simca.stat.specificity[v-1],...j].join(S)+`
`,N+=["Selectivity:",t.simca.stat.selectivity[v-1],...j].join(S)+`
`,N+=`
`,N+=["Beta:",k.beta,...j].join(S)+`
`,N+=["Non-centrality (s):",k.s,...j].join(S)+`
`,N+=["Scaling (f0):",k.f0,...j].join(S)+`
`,t.simca.nMembers>0)){const F=k.TP/(k.TP+k.FP),z=t.simca.stat.sensitivity[v-1],O=1-t.simca.stat.specificity[v-1],H=2*F*z/(F+z),W=z/O,Q=(1-z)/(1-O);N+=`
`,N+=["Efficiency:",t.simca.stat.efficiency[v-1],...j].join(S)+`
`,N+=["Accuracy:",t.simca.stat.accuracy[v-1],...j].join(S)+`
`,N+=["Precision:",F,...j].join(S)+`
`,N+=["F1-score:",H,...j].join(S)+`
`,N+=["PLR:",W,...j].join(S)+`
`,N+=["NLR:",Q,...j].join(S)+`
`}N+=`
`,N+=["","object","class","role","decision","h/h0","q/q0","f"].join(S)+`
`;let A=0;k.rols?k.rols:new Array(d).fill("-");for(let F=0;F<d;F++){if(u>0&&o.includes(F)){N+=["",l.objlabels[F],"-","removed","-","-","-","-"].join(S)+`
`;continue}N+=["",l.objlabels[F],t.pca.classes[A],k.rols[A],k.decs[A],m[A]/y,h[A]/C,b[A]].join(S)+`
`,A=A+1}N+=`
`,l.dec!=="."&&(N=N.replace(/\./g,l.dec)),N=["Target class:",e.className,...j].join(S)+`
`+N,N=["Data filename:",l.fileName,...j].join(S)+`
`+N;let T=["DD-SIMCA results ("+a+")","https://mda.tools/ddsimca/",...j].join(S)+`

`;const P=new Blob([T+N],{type:"text/csv"}),R=window.URL.createObjectURL(P),V=document.createElement("a");V.setAttribute("href",R),V.setAttribute("download",`ddsimca-results-${a}.csv`),V.click()}function Sl(s,e,t){t&&(s.prep=t);const l=new Blob([JSON.stringify({pca:s,simca:e},Gn)],{type:"application/json"}),a=window.URL.createObjectURL(l),o=document.createElement("a");o.setAttribute("href",a),o.setAttribute("download","ddsimca-model.json"),o.click()}class Cl{#e;get outcomes(){return r(this.#e)}set outcomes(e){D(this.#e,e)}constructor(e,t,l,a,o,c,d){this.d=e,this.ind=t,this.objlabels=l,this.objindices=a,this.classes=o,this.classNames=c,this.nrows=e.length,this.nMembers=t.members.length,this.nStrangers=t.strangers.length,this.nUnknown=t.unknown.length,this.#e=w(()=>d.oCrit&&d.eCrit?this.getOutcomes(d):null)}getOutcomes(e){const t=this.d.apply(A=>A/e.f0*e.Nf).v,l=new Array(this.nrows),a=new Array(this.nrows),o={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[d,u]=zo(t,e.eCrit,e.oCrit,a,l,o,c,this.ind.members),[f,v,h,m,g,b,_,p,y,C]=Ss(t,e.Nf,e.eCrit,e.oCrit,a,l,o,c,this.ind.strangers);this.nUnknown>0&&Ss(t,e.Nf,e.eCrit,e.oCrit,a,l,o,c,this.ind.unknown);const E=d>0?d/(d+u):0,k=f>0?f/(f+v):0,S=1-h,I=Math.sqrt(E*k),j=d>0&&f>0?(d+f)/(d+f+v+u):0,N={sensitivity:E,specificity:k,selectivity:S,efficiency:I,accuracy:j};return{Nf:e.Nf,f:t,decs:l,rols:a,decsNum:c,rolsNum:o,TP:d,FN:u,TN:f,FP:v,beta:h,s:m,f0:g,hz:b,Mz:_,Sz:p,k:y,m:C,stat:N}}toJSON(){return null}static fromJSON(e){return new Cl(...e)}}class fn{#e;get alpha(){return r(this.#e)}set alpha(e){D(this.#e,e,!0)}#t;get gamma(){return r(this.#t)}set gamma(e){D(this.#t,e,!0)}#r;get limType(){return r(this.#r)}set limType(e){D(this.#r,e,!0)}#n;get Nf(){return r(this.#n)}set Nf(e){D(this.#n,e)}#i;get f0(){return r(this.#i)}set f0(e){D(this.#i,e)}#l;get eConfLim(){return r(this.#l)}set eConfLim(e){D(this.#l,e)}#s;get oConfLim(){return r(this.#s)}set oConfLim(e){D(this.#s,e)}#a;get eCrit(){return r(this.#a)}set eCrit(e){D(this.#a,e)}#o;get oCrit(){return r(this.#o)}set oCrit(e){D(this.#o,e)}constructor(e,t,l,a,o,c,d,u,f,v,h,m,g,b,_,p="nimca-model"){this.mX=t,this.sX=l,this.nrows=a,this.ncols=o,this.className=e,this.Nfc=c,this.Nfr=d,this.f0c=u,this.f0r=f,this.hash=v,this.class=["nimcamodel"],this.fileName=p,this.center=b,this.scale=_,this.#e=re(qe(h)),this.#t=re(qe(m)),this.#r=re(qe(g)),this.#n=w(()=>this.limType==="classic"?this.Nfc:this.Nfr),this.#i=w(()=>this.limType==="classic"?this.f0c:this.f0r),this.#l=w(()=>1-Number.parseFloat(this.alpha)/100),this.#s=w(()=>Math.pow(1-this.gamma/100,1/a)),this.#a=w(()=>xt(this.eConfLim,this.Nf)),this.#o=w(()=>xt(this.oConfLim,this.Nf))}predict(e){if(!e.values||!Xt(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const t=fn.getDistance(e.values,this.mX,this.sX),l={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let a=0;a<e.classes.length;a++)e.classes[a]===this.className?l.members.push(a):l.strangers.push(a);else l.unknown=ir(0,e.values.nrows-1);return new Cl(t,l,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,t,l,a={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let o=e.values;const c=e.classNames[0];if(!Xt(o))throw new Error("nimca.fit: X must be a matrix.");const d=t?o.apply(cn,2):we.zeros(o.ncols),u=l?o.apply(gs,2):we.ones(o.ncols),f=fn.getDistance(o,d,u),v=cn(f),h=ps(f);let m=Math.round(2*v*v/h);m<1&&(m=1),m>250&&(m=250);const g=au(f),b=ou(f),_=b/g;let p;_>2.685592117?p=1:_<.194565995?p=100:p=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/_),1.185785)));const y=.5*p*(g/xt(.5,p)+b/(xt(.75,p)-xt(.25,p)));return new fn(c,d,u,o.nrows,o.ncols,m,p,v,y,As(),a.alpha,a.gamma,a.limType,t,l)}static fromJSON(e){const{__type:t,mX:l,sX:a,nrows:o,ncols:c,className:d,Nfc:u,Nfr:f,f0c:v,f0r:h,hash:m,alpha:g,gamma:b,limType:_,fileName:p,center:y,scale:C}=e;return new fn(d,l,a,o,c,u,f,v,h,m,g,b,_,y,C,p)}static getDistance(e,t,l){const a=zu(e,t,l),o=a.nrows,c=a.ncols,d=we.zeros(o);for(let u=0;u<c;u++){const f=a.getcolref(u+1);for(let v=0;v<o;v++)d.v[v]+=f[v]**2}return d}}function ir(s,e,t=1){const l=Math.round((e-s+1)/t),a=Array(l);for(let o=0;o<l;o++)a[o]=s+o*t;return a}function qu(s,e){let t,l,a,o=[];if(e.length>0){const c=s.values.nrows,d=s.objindices,u=c-e.length;t=Array(u),l=Array(u),a=Array(u);let f=0;for(let v=0;v<c;v++)e.includes(v)||(t[f]=d[v],l[f]=s.classes[v],a[f]=s.objlabels[v],(o.length===0||!o.includes(l[f]))&&o.push(l[f]),f=f+1)}else t=s.objindices,a=s.objlabels,l=s.classes,o=s.classNames;return[t,a,l,o]}function As(){const s=new Date;return`${s.getFullYear()}${(s.getMonth()+1).toString().padStart(2,"0")}${s.getDate().toString().padStart(2,"0")}${s.getHours().toString().padStart(2,"0")}${s.getMinutes().toString().padStart(2,"0")}${s.getSeconds().toString().padStart(2,"0")}${s.getMilliseconds().toString().padStart(3,"0")}`}function Nl(s,e,t,l,a=!1){const[o,c,d]=qu(t,l),u=a&&e.prep&&e.prep.ml&&e.prep.ml.length>0?El(s,t.values,0,e.prep,!1,!0):t.values,f=ju(s,e,u,l);f.hash=As(),f.objindices=o,f.objlabels=c,f.classes=d,f.classNames=t.classNames,f.varlabels=t.varlabels,f.eigenvals=et(e,"eigenvals"),f.cNh=et(e,"cNh"),f.cNq=et(e,"cNq"),f.ch0=et(e,"ch0"),f.cq0=et(e,"cq0"),f.rNh=et(e,"rNh"),f.rNq=et(e,"rNq"),f.rh0=et(e,"rh0"),f.rq0=et(e,"rq0");const v=e.nrows;return f.T2lim=2*(v-1)/(v-2)*wo(.95,2,v-2),f}function Fu(s,e="."){return Array.isArray(s)&&s.length>0?e==="."?s.map(t=>Number.parseFloat(t.trim())):s.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(s.trim()):Number.parseFloat(s.trim().replace(e,"."))}function Hn(s){return s.some(e=>Number.isNaN(e))}function dn(s){return s.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function qo(s){let e=s.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function Ou(s,e,t,l,a,o,c,d=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let f=qo(s);if(f.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");f=f.filter(z=>z.replaceAll(e,"").trim().length>0);const v=f[0].split(e);if(v.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,m;const g=t!=="no";(g||g===void 0&&Hn(firstRow))&&(m=v,h=1);const b=f.length-h;if(b<1)throw new Error("Data file should contain at least 1 row with values.");d===-1&&(d=b);let _,p,y,C=Array(b);l?(_=g?dn(m[0]):"",y=Array(b),p=1):(_="",y=[],p=0);let E,k=[],S;a?(E=g?dn(m[p]):"",S=Array(b),p=p+1):(E="",S=[]);const I=v.length-p;if(I<1)throw new Error("Data file should contain at least 1 column with values.");const j=Le.zeros(I,b);for(let z=h;z<b+h;z++){const O=z-h;C[O]=O;let H=f[z].split(e);if(l&&(y[O]=H[0],H.shift()),a){const Q=H[0];S[O]=Q,H.shift(),(k.length===0||k.indexOf(Q)<0)&&k.push(Q)}const W=u==="."?H.map((Q,ee)=>Number.parseFloat(Q.trim())):H.map((Q,ee)=>Number.parseFloat(Q.trim().replace(u,".")));if(W.some(Q=>Number.isNaN(Q)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(W.length!=I)throw new Error("Wrong number of values in row #"+z);j.v.set(new Float64Array(W),(z-h)*I)}if(!l||y.length!==b){y=Array(b);for(let z=0;z<b;z++)y[z]="O"+(z+1)}y=y.map(z=>dn(z)),S=S.map(z=>dn(z)),k=k.map(z=>dn(z));let N,A=Array(I),T=Array(I);if(m&&m.length===I+p){N=m.map(z=>dn(z)).slice(p);for(let z=0;z<I;z++)A[z]=z>=d?z-d:z,T[z]=z>=d?z-d+1:z+1}else{N=Array(I);for(let z=0;z<I;z++)A[z]=z>=d?z-d:z,N[z]=z>=d?"V"+(z-d+1):"Y"+(z+1),T[z]=z>=d?z-d+1:z+1}let P;if(t==="values"){if(P=u==="."?N.map((z,O)=>O<d?O:Number.parseFloat(z.trim())):N.map((z,O)=>O<d?O:Number.parseFloat(z.trim().replace(u,"."))),P.some(z=>Number.isNaN(z)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else P=T;Array.isArray(P)||(P=[]),o||(o=""),c||(c=""),o=P.length>0&&o.length>0?o:"Variables",c=P.length>0&&c.length>0?c:"";const R=o+(c.length>0?", "+c:""),V=P[1]<P[0];return{values:j.t(),nresp:d,header:t,hasLabels:l,hasClassNames:a,labelsVarname:_,classLabelsVarname:E,objlabels:y,objindices:C,varlabels:N,varvalues:P,varindices:A,varrev:V,classes:S,classNames:k,sep:e,dec:u,varvaluesName:o,varvaluesUnits:c,varAxisTitle:R}}function Du(s){if(Hn(s[0].slice(2)))return!0;const e=s[0].length,t=[];for(let l=2;l<e;l++){let a=[];for(let f=1;f<s.length;f++)a.push(s[f][l]);const o=s[0][l],c=cn(a),d=gs(a),u=Math.abs((o-c)/d);t.push(u)}return t.every(l=>l>5)}function Bu(s){const t=s[0].split(","),l=s[1].split(","),a=t.length,o=l.length,c=";",d=s[0].split(c),u=s[1].split(c),f=d.length,v=u.length;let h,m;if(a>1&&o>1&&a===o&&a>f)m=",",h=a;else if(f>1&&v>1&&f===v)m=c,h=f;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",h]}function Vu(s,e=0){const t=qo(s),l=t.length;if(l<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[a,o,c]=Bu(t),d=Math.min(c,5),u=Math.min(l,5);let f=t[0].split(a).length,v=t.slice(0,u).map(A=>A.split(a).slice(0,d));v=v.map(A=>A.map(T=>dn(T)));const h=v.map(A=>Fu(A.slice(),o));for(let A=1;A<u;A++)if(Hn(h[A].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const m=Du(h);let g=0;const b=m?1:0,_=b+1,p=v[b][0],y=v[_][0],C=h[b][0],E=h[_][0],k=h[b][1],S=h[_][1];let I=!1,j=!1;if(Number.isNaN(C)&&Number.isNaN(E)&&p!==y?(I=!0,g=g+1):Number.isNaN(k)&&Number.isNaN(S)&&p!==y&&(I=!0,j=!0,g=g+2),!j){const A=I?1:0,T=h[b][A],P=h[_][A];j=Hn([T,P]),g=g+j}let N="no";if(m){g>0?v[0].slice(g+e):v[e];const A=g>0?h[0].slice(g+e):h[e];N=Hn(A)?"labels":"values"}return[a,I,j,N,f]}function Yu(s){const e=s.values.t(),t=s.sep,l=s.dec;let a=null;s.header!=="no"&&(a=s.header==="values"?s.nresp&&s.nresp>0?s.varlabels.slice(0,s.nresp).concat(s.varvalues.slice(s.nresp)):s.varvalues.slice():s.varlabels.slice()),a&&s.hasClassNames&&(a=[s.classLabelsVarname,...a]),a&&s.hasLabels&&(a=[s.labelsVarname,...a]);const o=s.classes&&s.classes.length===e.ncols,c=s.objlabels&&s.objlabels.length===e.ncols;let d=a?a.join(t):"";for(let u=0;u<e.ncols;u++){let f=e.getcolref(u+1).join(t);l!=="."&&(f=f.replace(".",l)),o&&(f=s.classes[u]+s.sep+f),c&&(f=s.objlabels[u]+s.sep+f),d=d+`
`+f}return d=d+`
`,l!=="."&&(d=d.replace(/\./g,l)),d}function Wu(s,e){const t=Yu(s),l=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(l),o=document.createElement("a");o.setAttribute("href",a),o.setAttribute("download",`${e}.csv`),o.click()}function Uu(s){if(!s.length)return"";s.sort((a,o)=>a-o);let e=[],t=s[0],l=t;for(let a=1;a<s.length;a++)s[a]===l+1?l=s[a]:(t===l?e.push(`${t}`):e.push(`${t}-${l}`),t=s[a],l=t);return t===l?e.push(`${t}`):e.push(`${t}-${l}`),e.join(" ")}function Gn(s,e){return Xt(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Be(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof fn?e.asJSON():e}function Al(s,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Nu(e.v,e.nrows,e.ncols);if(e.__type==="vector")return rt(e.v);if(e.__type==="NIMCA")return fn.fromJSON(e);if(e.__type==="NIMCARes")return null;const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function Tl(s){const e=s.getFullYear(),t=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0"),a=String(s.getHours()).padStart(2,"0"),o=String(s.getMinutes()).padStart(2,"0"),c=String(s.getSeconds()).padStart(2,"0");return`${e}${t}${l}${a}${o}${c}`}function Ts(s,e){return Object.keys(s).reduce((t,l)=>(t[l]=e(s,l),t),{})}function Fo(s){return Array.from({length:8},(e,t)=>s>>7-t&1).reverse()}function Ms(s,e,t){let l="";for(let a=0;a<e;a++){const o=s.getUint8(t++);if(o===0)break;l+=String.fromCharCode(o)}return l}function Hu(s){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],t=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],l=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],a=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let o=0;const c=s.getUint8(o);o+=1;const d=s.getUint8(o);if(o+=1,d===77)throw new Error("SPC file has old format which is not supported.");const u=d===75,f=s.getUint8(o);o+=1;const v=s.getInt8(o);o+=1;const h=s.getUint32(o,u);o+=4;const m=s.getFloat64(o,u);o+=8;const g=s.getFloat64(o,u);o+=8;const b=s.getUint32(o,u);o+=4;const _=s.getUint8(o);o+=1;const p=s.getUint8(o);o+=1;const y=s.getUint8(o);o+=1;const C=s.getUint8(o);o+=1;const E=s.getUint32(o,u);o+=4;const k=Ms(s,9,o);o+=9;const S=Ms(s,9,o);o+=9;const I=s.getUint16(o,u);o+=2;const j=Array.from({length:8},()=>{const Z=s.getFloat32(o,u);return o+=4,Z}),N=Ms(s,130,o);o+=130;const A=Ms(s,30,o);o+=30;const T=s.getUint32(o,u);o+=4;const[P,R,V,F,z,O,H,W]=Fo(c),Q=_===255?t[31]:t[_],ee=_===255?e[31]:e[_],G=p<=26?l[p]:p>=128&&p<=131?a[p]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:P,TCGRAM:R,TMULTI:V,TRANDM:F,TORDRD:z,TALABS:O,TXYXYS:H,TXVALS:W},fexper:f,fexp:v,fnpts:h,ffirst:m,flast:g,fnsub:b,fxtype:_,fytype:p,fztype:y,fpost:C,fdate:E,fres:k,fsource:S,fpeakpt:I,fspare:j,fcmnt:N,fcatxt:A,flogoff:T,xaxisName:Q,xaxisUnit:ee,yaxisName:G}}function Gu(s,e){const t=Fo(s.getUint8(e));e+=1;const l=s.getInt8(e);e+=1;const a=s.getUint16(e,!0);e+=2;const o=s.getFloat32(e,!0);e+=4;const c=s.getFloat32(e,!0);e+=4;const d=s.getFloat32(e,!0);e+=4;const u=s.getInt32(e,!0);e+=4;const f=s.getInt32(e,!0);e+=4;const v=s.getFloat32(e,!0);return e+=4,{flags:t,exp:l,index:a,time:o,next:c,noise:d,nPoints:u,nScans:f,wAxis:v}}async function Oo(s){if(s.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${s.name}).`);const t=s.name.slice(0,-4),l=await s.arrayBuffer(),a=new DataView(l);let o=0;const c=Hu(a);o+=512;const d=c.fnpts;if(d<2)throw new Error(`Error reading SPC file (${s.name}).`);let u=new Array(d);if(c.ftflgs.TXVALS)for(let h=0;h<d;h++){const m=a.getFloat32(o,!0);o=o+4,u[h]=m}else{(c.flast-c.ffirst)/(d-1);for(let h=0;h<d;h++)u[h]=c.ffirst+h*c.flast}const f=new Float64Array(d*c.fnsub);for(let h=0;h<c.fnsub;h++){Gu(a,o),o=o+32;for(let m=0;m<d;m++){const g=a.getFloat32(o,!0);o=o+4,f[h*d+m]=g}}const v=[];return c.fnsub>1?ir(1,c.fnsub).forEach(m=>{v.push(t+"_"+m)}):v.push(t),{hdr:c,xvalues:u,yvalues:f,objlabels:v}}async function Xu(s){if(!(s instanceof FileList||Array.isArray(s)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=s.length,t=[];let l=[],a=[];const o=await Oo(s[0]),c=o.xvalues.length;if(t.push(o.yvalues),l=l.concat(o.objlabels),a.push(o.hdr.fnsub),e>1)for(let b=1;b<e;b++){const _=await Oo(s[b]);if(_.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");t.push(_.yvalues),l=l.concat(_.objlabels),a.push(_.hdr.fnsub)}const d=a.reduce((b,_)=>b+_,0),u=new Float64Array(d*c);let f=0;for(let b=0;b<t.length;b++)u.set(t[b].slice(),f),f+=a[b]*c;const v=new Le(u,c,d),h=ir(0,c-1),m=ir(0,d-1),g=o.xvalues.map(b=>b.toFixed(1));return{values:v.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:l,objindices:m,varlabels:g,varvalues:o.xvalues,varindices:h,varev:o.xvalues[1]<o.xvalues[0],sep:",",dec:".",varvaluesName:o.hdr.xaxisName,varvaluesUnits:o.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}function Do(s,e){const t=1-e/100,a=1.96*Math.sqrt(s*t*(1-t))/s;return[t,a]}var Ku=K('<button tabindex="0" class="button svelte-1to1iow"> </button>');function tt(s,e){let t=B(e,"text",3,"button");var l=Ku();l.__click=function(...o){e.onclick?.apply(this,o)};var a=q(l);ae(()=>be(a,t())),M(s,l)}at(["click"]);var Ju=K('<button tabindex="0"></button>');function vn(s,e){B(e,"disable",3,!1);var t=Ju();t.__click=function(...l){e.onclick?.apply(this,l)},ae(()=>{U(t,"title",e.title),U(t,"aria-label",e.title),U(t,"alt",e.title),ct(t,1,`button ${e.className??""}`,"svelte-qbt64")}),M(s,t)}at(["click"]);function gr(s,e){let t=B(e,"title",3,"Reset");vn(s,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function Zu(s,e){let t=B(e,"title",3,"Undo");vn(s,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function Qu(s,e){let t=B(e,"title",3,"Download");vn(s,{get title(){return t()},get onclick(){return e.onclick},className:"button-download"})}function $u(s,e){let t=B(e,"title",3,"Add");vn(s,{get title(){return t()},get onclick(){return e.onclick},className:"button-add"})}function Bo(s,e){let t=B(e,"title",3,"Settings");vn(s,{get title(){return t()},get onclick(){return e.onclick},className:"button-settings"})}function ef(s,e){let t=B(e,"title",3,"Move up");vn(s,{get title(){return t()},get onclick(){return e.onclick},className:"button-up"})}function tf(s,e){let t=B(e,"title",3,"Move down");vn(s,{get title(){return t()},get onclick(){return e.onclick},className:"button-down"})}function kt(s){const e={};for(const t of Object.keys(s))e[t]=s[t].default;return e}var rf=K('<span class="label svelte-1bhp5bp"> </span>'),nf=K("<div><!> <!></div>");function fe(s,e){let t=B(e,"label",3,null),l=B(e,"name",3,""),a=B(e,"status",3,""),o=B(e,"colors",3,""),c=B(e,"labelWidth",3,12);var d=nf(),u=q(d);{var f=h=>{var m=rf(),g=q(m);ae(()=>{ut(m,`flex-basis:${c()??""}ch;`),be(g,t())}),M(h,m)};Y(u,h=>{t()&&h(f)})}var v=L(u,2);jr(v,()=>e.children??vt),ae(()=>{ct(d,1,`control-element ${l()??""} ${a()??""}`,"svelte-1bhp5bp"),ut(d,o())}),M(s,d)}var sf=K('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function Nn(s,e){ye(e,!0);let t=B(e,"min",7,0),l=B(e,"max",3,100),a=B(e,"value",31,()=>qe(t())),o=B(e,"decNum",3,1),c=B(e,"step",19,()=>+((l()-t())/100).toFixed(4)),d=B(e,"onchange",3,null);me(()=>{a()<t()&&(a(t()),d()&&d()(a())),a()>l()&&(a(l()),d()&&d()(a())),t()>l()&&t(l())});let u=re(void 0),f=re(void 0),v=re(!1);const h=T=>{const P=t()+T*(l()-t());return+(Math.round(P/c())*c()).toFixed(4)},m=T=>{const P=r(u).getBoundingClientRect(),R=r(f).getBoundingClientRect(),V=P.x,F=R.x+R.width;return(T.clientX-V)/(F-V)},g=T=>{const P=m(T);P<0||P>1||D(v,P*100>r(E)-5&&P*100<r(E)+5,!0)},b=T=>{D(v,!1)},_=T=>{D(v,!1);const P=m(T);P<0||P>1||(a(h(P)),d()&&d()(a()))},p=T=>{let P=a()+c()*T.deltaY*.5;P<t()&&(P=t()),P>l()&&(P=l()),a(+(Math.round(P/c())*c()).toFixed(4)),T.preventDefault(),d()&&d()(a())},y=T=>{if(!r(v))return;const P=m(T);P<0||P>1||(a(h(P)),d()&&d()(a()))},C=T=>{if(T.key==="ArrowLeft"){a(a()-c()<t()?t():a()-c()),d()&&d()(a());return}if(T.key==="ArrowRight"){a(a()+c()>l()?l():a()+c()),d()&&d()(a());return}},E=w(()=>t()===l()?100:(a()-t())/(l()-t())*100);var k=sf();k.__keydown=C,k.__mousemove=y,k.__mousedown=g,k.__mouseup=_,k.__touchmove=y,k.__touchstart=g,k.__touchend=_;var S=q(k);let I;var j=q(S);let N;var A=q(j);an(S,T=>D(u,T),()=>r(u)),an(k,T=>D(f,T),()=>r(f)),ae(T=>{U(k,"aria-valuenow",a()),U(k,"aria-valuemin",t()),U(k,"aria-valuemax",l()),I=ct(S,1,"range-slider svelte-7wycr",null,I,{"range-slider_right":r(E)<50}),ut(S,`width:${r(E)??""}%`),N=ct(j,1,"range-value svelte-7wycr",null,N,{"range-value_right":r(E)<50}),be(A,T)},[()=>a().toFixed(o())]),nn("mousewheel",k,p),nn("mouseleave",k,b),nn("touchcancel",k,b),M(s,k),xe()}at(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var lf=K('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function pr(s,e){ye(e,!0);let t=B(e,"min",3,0),l=B(e,"max",3,10),a=B(e,"value",31,()=>qe(t())),o=B(e,"step",3,1);a()<t()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),a(t())),a()>l()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),a(l())),t()>l()&&console.error("The min and max values must be distinct.");let c=re(void 0),d=re(void 0),u=re(!1);const f=w(()=>t()===l()?0:(a()-t())/(l()-t()+o())),v=w(()=>o()/(l()-t()+o())),h=w(()=>l()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${r(v)*100}%, var(--bg-color-light2, #e8e8e8) ${r(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*r(v)}%)`:"background: #f0f0f0"),m=T=>{if(T<0||T>1)return a();let P=a();return Math.round(r(v)/T),T<r(f)&&r(f)>0&&(P=a()-o()*Math.ceil((r(f)-T)/r(v))),T>r(f)+r(v)&&r(f)+r(v)<1&&(P=a()+o()*Math.ceil((T-(r(f)+r(v)))/r(v))),P<t()&&(P=t()),P>l()&&(P=l()),P},g=T=>{const P=r(d).getBoundingClientRect(),R=P.x,V=P.x+P.width;return(T.clientX-R)/(V-R)},b=T=>{const P=g(T);P<0||P>1||D(u,P>r(f)&&P<r(v)+r(f),!0)},_=T=>{D(u,!1)},p=T=>{D(u,!1);const P=g(T);if(P<0||P>1)return;const R=m(P);a()!==R&&a(R)},y=T=>{let P=a()+Math.round(T.deltaY*.5)*o();P<t()&&(P=t()),P>l()&&(P=l()),a(P),T.preventDefault()},C=T=>{if(!r(u))return;const P=g(T);if(P<0||P>1)return;const R=m(P);R!=a()&&a(R)},E=T=>{if(T.key==="ArrowLeft"){a(a()-o()<t()?t():a()-o());return}if(T.key==="ArrowRight"){a(a()+o()>l()?l():a()+o());return}};var k=lf();k.__keydown=E,k.__mousemove=C,k.__mousedown=b,k.__mouseup=p,k.__touchmove=C,k.__touchstart=b,k.__touchend=p;var S=q(k);let I;var j=q(S);let N;var A=q(j);an(S,T=>D(c,T),()=>r(c)),an(k,T=>D(d,T),()=>r(d)),ae(T=>{U(k,"aria-valuenow",a()),U(k,"aria-valuemin",t()),U(k,"aria-valuemax",l()),ut(k,r(h)),I=ct(S,1,"range-slider svelte-1lbks0y",null,I,{"range-slider_left":r(v)<.1&&r(f)<.5,"range-slider_right":r(v)<.1&&r(f)>=.5}),ut(S,`width: max(2px, ${r(v)*100}%);left:${r(f)*100}%;`),N=ct(j,1,"range-value svelte-1lbks0y",null,N,{"range-value_right":r(v)<.1&&r(f)>.5,"range-value_left":r(v)<.1&&r(f)<=.5}),be(A,T)},[()=>a().toFixed(0)]),nn("mousewheel",k,y),nn("mouseleave",k,_),nn("touchcancel",k,_),M(s,k),xe()}at(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var af=K('<button tabindex="-1"><!></button>'),of=K('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function We(s,e){ye(e,!0);let t=B(e,"value",31,()=>qe(e.options[0])),l=B(e,"className",3,"");const a=u=>{if(u.key==="ArrowLeft"){const f=e.options.findIndex(v=>v===t());f>0&&t(e.options[f-1]);return}if(u.key==="ArrowRight"){const f=e.options.findIndex(v=>v===t());f<e.options.length-1&&t(e.options[f+1]);return}};var o=of(),c=J(o);c.__keydown=a,Ye(c,20,()=>e.options,u=>u,(u,f)=>{var v=af();v.__click=()=>t(f);let h;var m=q(v);pt(m,()=>f),ae(g=>h=ct(v,1,`option option_${g??""}`,"svelte-bifhtc",h,{selected:f==t()}),[()=>f.toString().replace(".","_")]),M(u,v)});var d=L(c,2);ae(()=>ct(c,1,`selector ${l()??""}`,"svelte-bifhtc")),il(d,t),M(s,o),xe()}at(["keydown","click"]);function Jt(s,e){ye(e,!0);let t=B(e,"options",19,()=>["no","yes"]),l=B(e,"value",15,!1),a=re(!0);const o=w(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());me(()=>D(a,l()?t()[1]:t()[0],!0)),me(()=>l(r(a)===t()[1]));var c=_e(),d=J(c);{var u=f=>{We(f,{get options(){return r(o)},get value(){return r(a)},set value(v){D(a,v,!0)}})};Y(d,f=>{r(o)&&f(u)})}M(s,c),xe()}var cf=K('<input type="file" multiple class="svelte-xoa0sf"/>'),uf=K('<input type="file" class="svelte-xoa0sf"/>'),ff=K('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function js(s,e){ye(e,!0);let t=B(e,"file",15),l=B(e,"message",3,"Select CSV file with dataset"),a=B(e,"acceptType",3,".csv"),o=B(e,"multiple",3,!1),c=re(void 0);function d(E){r(c)&&r(c).files.length>0?t(r(c).files.length===1?r(c).files[0]:r(c).files):t(null)}function u(E){(E.type==="click"||E.type==="keydown"&&(E.code==="Space"||E.code==="Enter"))&&r(c).click()}function f(E){r(c).value=null,t(null)}var v=ff(),h=J(v);h.__keydown=u,h.__click=u;let m;var g=q(h),b=L(g);{var _=E=>{var k=cf();k.__change=d,an(k,S=>D(c,S),()=>r(c)),ae(()=>U(k,"accept",a())),M(E,k)},p=E=>{var k=uf();k.__change=d,an(k,S=>D(c,S),()=>r(c)),ae(()=>U(k,"accept",a())),M(E,k)};Y(b,E=>{o()?E(_):E(p,!1)})}var y=L(h,2);{var C=E=>{gr(E,{onclick:f})};Y(y,E=>{t()&&E(C)})}ae(()=>{m=ct(h,1,"file-selector svelte-xoa0sf",null,m,{selected:t()}),be(g,`${(t()?t().length>1?`Selected ${t().length} files`:t().name:l())??""} `)}),M(s,v),xe()}at(["keydown","click","change"]);var df=K('<div class="error-message svelte-11e14eb"> </div>'),vf=K('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function Vo(s,e){ye(e,!0);let t=B(e,"value",15,""),l=B(e,"className",3,""),a=B(e,"placeholder",3,""),o=B(e,"maxLength",3,25),c=B(e,"validator",3,null),d=re("");function u(){c()&&D(d,c()(t()),!0)}var f=vf();let v;var h=q(f);h.__input=u;var m=L(h,2);{var g=b=>{var _=df(),p=q(_);ae(()=>be(p,r(d))),M(b,_)};Y(m,b=>{r(d)&&r(d).length>0&&b(g)})}ae(()=>{v=ct(f,1,`textinput ${l()??""}`,"svelte-11e14eb",v,{error:r(d)&&r(d).length>0}),U(h,"placeholder",a()),U(h,"maxlength",o())}),il(h,t),M(s,f),xe()}at(["input"]);var mf=K('<div class="spinner svelte-wlgijz"></div>');function Ml(s){var e=mf();M(s,e)}var hf=K('<button tabindex="-1"><!></button>'),gf=K('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-142p4sy"></div> <input class="svelte-142p4sy"/>',1);function Yo(s,e){ye(e,!0);let t=B(e,"options",19,()=>["p","l","b","h","qq"]),l=B(e,"value",31,()=>qe(t()[0]));const a=h=>{if(h.key==="ArrowLeft"){const m=t().findIndex(g=>g===l());m>0&&l(t()[m-1]);return}if(h.key==="ArrowRight"){const m=t().findIndex(g=>g===l());m<t().length-1&&l(t()[m+1]);return}},o='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',c={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};c.b=c.l+c.p;const d={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var u=gf(),f=J(u);f.__keydown=a,Ye(f,20,t,h=>h,(h,m)=>{var g=hf();g.__click=()=>l(m);let b;var _=q(g);pt(_,()=>o+c[m]+"</svg>"),ae(()=>{b=ct(g,1,"option svelte-142p4sy",null,b,{selected:m==l()}),U(g,"title",d[m])}),M(h,g)});var v=L(f,2);il(v,l),M(s,u),xe()}at(["keydown","click"]),at(["keydown","click"]);var pf=K("<h2> </h2>"),bf=K("<!> <!>",1),_f=K('<div class="widget"><!></div>');function wf(s,e){ye(e,!0);let t=B(e,"title",3,""),l=B(e,"value",15),a=B(e,"labelWidth",3,13);function o(f){const v={};for(const h of Object.keys(f))v[h]=f[h].default;return v}me(()=>{!l()&&e.options&&l(o(e.options))});var c=_f(),d=q(c);{var u=f=>{var v=bf(),h=J(v);{var m=b=>{fe(b,{children:(_,p)=>{var y=pf(),C=q(y);ae(()=>be(C,t())),M(_,y)},$$slots:{default:!0}})};Y(h,b=>{t()&&b(m)})}var g=L(h,2);Ye(g,17,()=>Object.keys(e.options),Ge,(b,_)=>{const p=w(()=>e.options[r(_)]);var y=_e(),C=J(y);{var E=k=>{fe(k,{get name(){return r(p).name},get label(){return r(p).label},get labelWidth(){return a()},children:(S,I)=>{var j=_e(),N=J(j);Vn(N,()=>r(p).el,(A,T)=>{T(A,Gt(()=>r(p).props,{get value(){return l()[r(_)]},set value(P){l(l()[r(_)]=P,!0)}}))}),M(S,j)},$$slots:{default:!0}})};Y(C,k=>{r(p).hidden||k(E)})}M(b,y)}),M(f,v)};Y(d,f=>{l()&&f(u)})}M(s,c),xe()}var yf=K('<span class="item svelte-igakmm"> </span>'),xf=K('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function jl(s,e){ye(e,!0);var t=_e(),l=J(t);{var a=o=>{fe(o,{children:(c,d)=>{var u=xf(),f=J(u),v=L(q(f),2);Ye(v,17,()=>e.outliers,Ge,(b,_)=>{var p=yf(),y=q(p);ae(()=>be(y,e.dataset.objlabels[r(_)])),M(b,p)});var h=L(f,2);{var m=b=>{Zu(b,{get onclick(){return e.undoOutliers}})};Y(h,b=>{e.outliers.length>1&&b(m)})}var g=L(h,2);gr(g,{get onclick(){return e.resetOutliers}}),M(c,u)},$$slots:{default:!0}})};Y(l,o=>{e.dataset&&e.outliers&&e.outliers.length>0&&o(a)})}M(s,t),xe()}const kf={small:30,medium:40,large:50,xlarge:60},Ef={small:5,medium:8,large:12,xlarge:15},Sf={small:6,medium:10,large:14,xlarge:18},Pl={small:4,medium:6,large:8,xlarge:10},Cf={small:12,medium:15,large:19,xlarge:21},Ll={small:11,medium:15,large:17,xlarge:19},Xn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},An=["●","◼","▲","▼","⬥","＋","✳","✕"],Nf=.8,Wo=.5,Af={small:5,medium:8,large:12,xlarge:15},Et={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Uo(s,e){return Array.isArray(s)&&s.length===e&&!s.some(t=>t===void 0)&&!s.some(t=>isNaN(t))}function Ho(s,e){if(s!=null&&(Array.isArray(s)&&(s=rt(s)),!(!Be(s)||s.length<1)))return s.apply(t=>Ol((t-e[1])*e[0]+e[2])).v}function ft(s,e){return Ho(s,e.coords)}function Il(s,e){return Ho(s,e.objects)}function Go(s,e){if(s!=null&&(Array.isArray(s)&&(s=rt(s)),!(!Be(s)||s.length<1)))return s.apply(t=>(t-e[2])/e[0]+e[1]).v}function Xo(s,e){return Go(s,e.coords)}function Ko(s,e){return Go(s,e.objects)}function Rl(s){return s===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${s.toString()}</tspan>`}function mn(s){if(s===Math.round(s))return s;if(Math.abs(s)>10**6)return Math.round(s);if(Math.abs(s)<10**-6)return s;let e=s.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function zl(s){if(s===void 0)return[0,void 0];if(s.length<1)return[0,void 0];if(s.length===1)return[0,[s[0].toString()]];let e=mn(Math.abs(un(fo(s)))),t=0;if(e>=1)return e<100?[0,Array.from(s).map(o=>o.toFixed(0))]:(t=Math.ceil(mn(Math.log10(e)))-2,[t,Array.from(s).map(o=>(o/Math.pow(10,t)).toFixed(0))]);let l=Math.ceil(-mn(Math.log10(e)));return l<=2?[0,Array.from(s).map(a=>a.toFixed(l))]:(t=l-2,l=2,mn(Math.abs(Dt(s)))<=10?[-t,Array.from(s).map(a=>(a*Math.pow(10,t)).toFixed(l))]:[-t,Array.from(s).map(a=>(a/Math.pow(10,t)).toString())])}function Lt(s,e,t){return Array.isArray(s)&&(s=rt(s)),Be(s)?s.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&s.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):s:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function ql(s,e,t,l){if(!s||!e||s.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const a=t.coords,o=l.coords;let c="";for(let d=0;d<s.length;d++){const u=Ol((s.v[d]-a[1])*a[0]+a[2]),f=Ol((e.v[d]-o[1])*o[0]+o[2]);c+=u+","+f+" "}return c}function Jo(s,e){return s?Array.isArray(s)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==s.length?[null,"number of tick labels and values should be the same."]:[s.map(t=>Yr(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Zo(s,e){if(Array.isArray(s)&&(s=rt(s)),!Be(s))return[null,"tick values must be provided as an array or as a vector."];if(s.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const t=new Set(s.v);if(s.length!==t.size)return[null,"ticks values must be unique."];const l=e[0]<e[1]?e[0]:e[1],a=e[0]<e[1]?e[1]:e[0],o=s.filter(c=>c>=l&c<=a);return o.length!==s.length?[null,"some of ticks values are outside axis limits."]:[o,""]}function Fl(s,e,t,l,a,o){a==null&&(a=!1),o===void 0&&(o=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(s)return s;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const d=Math.abs(c[1]-c[0])*o,u=c[1]-c[0]-2*d,f=Math.floor(Math.log10(u)),v=1/Math.pow(10,f-1),h=Math.round(u*v)/v;let m=Tf(h/t);a&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+d)/m)*m,b=Math.floor((c[1]-d)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-b)<m/10&&(b=b-m),t=Math.ceil(mn((b-g)/m))+1,s=we.zeros(t);for(let _=0;_<t;_++)s.v[_]=g+m*_;if(Math.abs(m)<1){const _=Math.pow(10,1+Math.round(-Math.log10(m)));s=s.apply(p=>Math.round((p+Number.EPSILON)*_)/_)}return s.filter(_=>_>=c[0]&_<=c[1])}function Tf(s,e){const t=Math.floor(Math.log10(s)),l=s/Math.pow(10,t);let a;return l<=1?a=1:l<=2?a=2:l<=5?a=5:a=10,a*Math.pow(10,t)}function Ol(s){return Math.round(s*10)/10}function Mf(s,e){return e<300.2||s<400.2?"small":e<400.2||s<700.2?"medium":e<650.2||s<850.2?"large":"xlarge"}function Qo(s,e){return s<400.2?"small":s<700.2?"medium":s<900.2?"large":"xlarge"}function jf(){const s=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let l=0;l<8;l++)t=t&1?3988292384^t>>>1:t>>>1;s[e]=t}return s}function Pf(s){let e=-1,t=jf();for(let l=0;l<s.length;l++)e=t[(e^s[l])&255]^e>>>8;return e^-1}function Lf(s,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const l=Pf(t),a=new Uint8Array(4);a[0]=l>>>24,a[1]=l>>>16,a[2]=l>>>8,a[3]=l&255;const o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;const c=new Uint8Array(54);return c.set(s,0),c.set(o,33),c.set(t,37),c.set(a,50),c}function If(s,e){const t=s.split(","),l=t[0],a=t[1],o=33/3*4,c=a.substring(0,o),d=a.substring(o),u=atob(c),f=new Uint8Array(u.length);for(let m=0;m<f.length;m++)f[m]=u.charCodeAt(m);const v=Lf(f,e),h=btoa(String.fromCharCode(...v));return[l,",",h,d].join("")}function Rf(s,e,t,l,a){if(t||(t=10),l||(l=10),a||(a=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(l<1||l>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(a<50||a>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!s||!(s instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const o=t/2.54*a,c=l/2.54*a;setTimeout(()=>{const d=s.clientHeight,u=s.clientWidth;let f=Math.max(o/u,c/d),v=1;f<1&&(v=f,f=1);const h=document.createElement("canvas"),m=h.getContext("2d");h.width=u*(v<1?v:f),h.height=d*(v<1?v:f),s.setAttribute("width",u*f),s.setAttribute("height",d*f),m.fillStyle="white",m.fillRect(0,0,h.width,h.height),m.scale(f,f);const g=new XMLSerializer().serializeToString(s),b=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(b),p=new Image;p.onload=function(){v<0&&(p.width=p.width*v,p.height=p.height*v),m.drawImage(p,0,0,h.width,h.height);const y=h.toDataURL("image/png"),C=If(y,a),E=document.createElement("a");E.href=C,E.download=`${e}.png`,E.click()},p.src=_},20)}function zf(s,e){if(!s||!(s instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=s.clientHeight,l=s.clientWidth;s.setAttribute("width",l+"px"),s.setAttribute("height",t+"px"),s.setAttribute("viewBox",`0 0 ${l} ${t}`);const a=new Blob([s.outerHTML],{type:"image/svg+xml"}),o=window.URL.createObjectURL(a),c=document.createElement("a");c.setAttribute("href",o),c.setAttribute("download",`${e}.svg`),c.click()}function qf(s,e,t,l){const a=s.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Ff(e,t,l)})]).then(()=>{s.classList.add("copied"),s.textContent="✓ done",setTimeout(()=>{s.classList.remove("copied"),s.textContent=a},500)},o=>{console.error(o),s.classList.add("error"),s.textContent="x copy",setTimeout(()=>{s.classList.remove("error"),s.textContent=a},500)}).catch(o=>console.error(o))}async function Ff(s,e,t){const l=s.clientHeight,a=s.clientWidth,o=Math.max(e/a,t/l),c=document.createElement("canvas"),d=c.getContext("2d");return c.width=a*o,c.height=l*o,d.scale(o,o),s.setAttribute("width",c.width),s.setAttribute("height",c.height),await new Promise((f,v)=>{const h=new XMLSerializer().serializeToString(s),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,b=g.createObjectURL(m),_=new Image;_.onload=function(){d.drawImage(_,0,0,c.width,c.height),g.revokeObjectURL(b),c.toBlob(function(p){p?f(p):v(new Error("Failed to create blob"))},"image/png")},_.onerror=function(p){v(p)},_.src=b})}function Ps(s,e){return s>16&&(s=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][s-1]}function Of(s,e,t,l,a){let o=a.ticks,c=a.tickLabels,d=0;const u=Fl(o,s,Ef[t.x],!0,a.whole),f=u.length,v=Ko([Pl[t.plot]],l)[0],h=we.fill(e[0],f),m=h.add(v),g=we.fill(e[1],f);if(c||(o?(d=0,c=o.v.map(N=>mn(N).toString())):[d,c]=zl(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[u,h],[u,g]],_=[[rt([s[0]]),rt([e[0]])],[rt([s[1]]),rt([e[0]])]],p=[[u,m],[u,h]],y=(s[1]-s[0])*.01,C=[[null,null],[[s[1]-(d>9?1:0)*y],[h.v[f-1]]]],E=Rl(d),k=c.length,S=Math.abs(s[1]>s[0]?s[1]-u.v[k-1]:s[1]-u.v[0]),I=Math.abs(s[1]-s[0]),j=Math.abs(u.v[1]-u.v[0]);if(E.length>0&&S<I*.1&&S<j*.5){const N=s[1]>s[0]?k-1:0;c[N]=" "}return{grid:b,axisLine:_,tickCoords:p,tfCoords:C,ticks:o,tickLabels:c,tickFactor:d,tfLabel:E}}function Df(s,e,t,l,a){let o=a.ticks,c=a.tickLabels,d=0;const u=Fl(a.ticks,e,Sf[t.y],!0,a.whole),f=u.length,v=Ko([Pl[t.plot]],l)[0],h=we.fill(s[0],f),m=h.add(v),g=we.fill(s[1],f);if(c||(o?(d=0,c=o.v.map(j=>mn(j).toString())):[d,c]=zl(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[h,u],[g,u]],_=[[rt([s[0]]),rt([e[0]])],[rt([s[0]]),rt([e[1]])]],p=[[h,u],[m,u]],y=[[[],[]],[[m.v[f-1]+(Math.abs(d)>9?3:2)*v],[e[1]]]],C=Rl(d),E=c.length,k=Math.abs(e[1]>e[0]?e[1]-u.v[E-1]:e[1]-u.v[0]),S=Math.abs(e[1]-e[0]),I=Math.abs(u.v[1]-u.v[0]);if(C.length>0&&k<S*.1&&k<I*.5){const j=e[1]>e[0]?E-1:0;c[j]=" "}return{grid:b,axisLine:_,tickCoords:p,tfCoords:y,ticks:o,tickLabels:c,tickFactor:d,tfLabel:C}}function Bf(s){if(!s.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Be(s.breaks)?s.breaks.v:s.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!s.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(s.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(s.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=s.colmap;let l,a;if(s.labels?(l=s.labels,a=0):[a,l]=zl(e),!(l.length===e.length-1||l.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const o=l.length===t.length;return{colmap:t,breaks:e,labels:l,isCentered:o,labelsFactor:a,fontSize:s.fontSize,labelColor:s.labelColor}}function Vf(s,e,t,l){const a=s.colmap.length,o=e*Nf,c=o/a,d=t[1]+(e-o)*.5,u=Af[l.y],f=t[2]+u*Wo,v=f+u*(1+Wo),h=s.isCentered?c/2:0;return{start:d,top:f,height:u,width:c,dxl:h,ltop:v}}function hn(s,e,t){if(!s||!e||!t||typeof t!="function")return;const l=s.target;if(l.tagName===e){const a=Array.prototype.indexOf.call(l.parentNode.children,l);if(a<0)return;t(a),s.stopPropagation()}}function Yf(s,e){const l=document.createElement("canvas").getContext("2d");return l.font=e,l.measureText(s.replace(/<(.|\n)*?>/g,"")).width}function Wf(s,e){const t="Arial",l=e/8,a=e*1.5,o=Array(s.length),c=Array(s.length);let d=0,u=0,f=0;for(let h=0;h<s.length;h++){const m=Yf("  "+s[h].label+"  ",e+"px "+t);f=m>f?m:f;const g=e*s[h].labelHeight+2*l;o[h]=g,c[h]=d,d=d+g,u=u+g}const v=a+2*l+f;return[c,o,a,l,u,v]}function Uf(s,e,t,l,a){const[o,c,d,u,f,v]=Wf(s.items,l*s.fontSize),h=s.position.includes("left")?e[0]+a:s.position.includes("right")?e[1]-v-a:(e[1]+e[0]-v)*.5,m=s.position.includes("top")?t[1]+a:s.position.includes("bottom")?t[0]-f-a:(t[1]+t[0]-f)*.5;return{lgl:h,lgt:m,lgw:v,lgh:f,ely:o,elh:c,elw:d,elp:u}}function Yr(s){if(!s||s.length<1)return s;function e(o){return'<tspan font-size="0.75em" dy="-0.5em">'+o+'</tspan><tspan dy="0.4em"> </tspan>'}function t(o){return'<tspan font-size="0.75em" dy="0.5em">'+o+'</tspan><tspan dy="-0.4em"> </tspan>'}let l=0,a="";for(;l<s.length;){const o=s[l];if((o==="^"||o==="_")&&l<s.length-1){const c=o==="^";if(l++,s[l]==="("){let d=l+1;for(;d<s.length&&s[d]!==")";)d++;const u=s.slice(l+1,d);a+=c?e(u):t(u),l=d+1}else if(s[l]==="-"||s[l]==="–"){const d=s.slice(l,l+2);a+=c?e(d):t(d),l=l+2}else a+=c?e(s[l]):t(s[l]),l++}else a+=o,l++}return a}var Hf=Me('<line vector-effect="non-scaling-stroke"></line>'),Gf=Me("<g></g>");function Dl(s,e){ye(e,!0);let t=B(e,"lineCoords",19,()=>[]),l=B(e,"lineColor",19,()=>Et.DARKGRAY),a=B(e,"lineType",3,1),o=B(e,"lineWidth",3,1),c=B(e,"className",3,"");const d=qt("axes");let u=w(()=>ft(t()[0][0],d.tX())),f=w(()=>ft(t()[1][0],d.tX())),v=w(()=>ft(t()[0][1],d.tY())),h=w(()=>ft(t()[1][1],d.tY())),m=w(()=>`stroke:${l()};stroke-width: ${o()}px;stroke-dasharray:${Xn[d.scales().plot][a()-1]}`);var g=_e(),b=J(g);{var _=p=>{var y=Gf();Ye(y,21,()=>r(u),Ge,(C,E,k)=>{var S=Hf();ae(()=>{U(S,"x1",r(u)[k]),U(S,"x2",r(f)[k]),U(S,"y1",r(v)[k]),U(S,"y2",r(h)[k]),ut(S,r(m))}),M(C,S)}),ae(()=>ct(y,0,Uc(c()))),M(p,y)};Y(b,p=>{r(u)&&r(v)&&r(f)&&p(_)})}M(s,g),xe()}var Xf=Me('<text text-anchor="middle"><!></text>'),Kf=Me("<text><!></text>"),Jf=Me("<text><!></text>"),Zf=Me('<g class="tick-labels"><!></g>');function $o(s,e){ye(e,!0);let t=B(e,"pos",3,1),l=B(e,"las",3,1),a=w(()=>["middle","middle","start","middle","end"][t()]),o=w(()=>`fill:${e.textColor};`);const c=qt("axes");let d=w(()=>ft(e.tickCoords[1][0],c.tX())),u=w(()=>ft(e.tickCoords[1][1],c.tY())),f=w(()=>Ll[c.scales().plot]),v=w(()=>[0,0,r(f),0,-r(f)][t()]),h=w(()=>[0,r(f),0,-r(f),0][t()]);var m=Zf(),g=q(m);{var b=p=>{var y=_e(),C=J(y);Ye(C,17,()=>r(d),Ge,(E,k,S)=>{var I=Xf();U(I,"data-id",S),U(I,"dx",0);var j=q(I);pt(j,()=>e.tickLabels[S],!0),ae(()=>{U(I,"x",r(d)[S]),U(I,"y",r(u)[S]),U(I,"dy",r(v)*1.25),U(I,"transform",`rotate(-90, ${r(d)[S]}, ${r(u)[S]})`)}),M(E,I)}),M(p,y)},_=p=>{var y=_e(),C=J(y);{var E=S=>{var I=_e(),j=J(I);Ye(j,17,()=>r(d),Ge,(N,A,T)=>{var P=Kf();U(P,"data-id",T),U(P,"dy",0),U(P,"text-anchor","end");var R=q(P);pt(R,()=>e.tickLabels[T],!0),ae(()=>{U(P,"x",r(d)[T]),U(P,"y",r(u)[T]),U(P,"dx",-r(h)/2),U(P,"transform",`rotate(-90, ${r(d)[T]}, ${r(u)[T]})`)}),M(N,P)}),M(S,I)},k=S=>{var I=_e(),j=J(I);Ye(j,17,()=>r(d),Ge,(N,A,T)=>{var P=Jf();U(P,"data-id",T);var R=q(P);pt(R,()=>e.tickLabels[T],!0),ae(()=>{U(P,"x",r(d)[T]),U(P,"y",r(u)[T]),U(P,"dx",r(v)),U(P,"dy",r(h)),U(P,"text-anchor",r(a))}),M(N,P)}),M(S,I)};Y(C,S=>{l()===2&&t()===1?S(E):S(k,!1)},!0)}M(p,y)};Y(g,p=>{l()===2&&t()===4?p(b):p(_,!1)})}ae(()=>ut(m,r(o))),M(s,m),xe()}const Qf=(s,e=vt,t=vt)=>{const l=w(()=>e().colmap.length);var a=ld(),o=J(a);Ye(o,17,()=>e().colmap,Ge,(v,h,m)=>{const g=w(()=>t().start+m*t().width);var b=rd(),_=J(b),p=L(_);U(p,"dy",0);var y=q(p);pt(y,()=>e().labels[m],!0),ae(()=>{U(_,"x",r(g)),U(_,"y",t().top),U(_,"width",t().width),U(_,"height",t().height),U(_,"fill",r(h)),U(p,"x",r(g)),U(p,"y",t().ltop),U(p,"dx",t().dxl),U(p,"fill",e().labelColor),U(p,"font-size",e().fontSize+"em")}),M(v,b)});var c=L(o);{var d=v=>{const h=w(()=>t().start+r(l)*t().width);var m=nd();U(m,"dx",0),U(m,"dy",0);var g=q(m);pt(g,()=>e().labels[r(l)],!0),ae(()=>{U(m,"x",r(h)),U(m,"y",t().ltop),U(m,"fill",e().labelColor),U(m,"font-size",`${e().fontSize??""}em`)}),M(v,m)};Y(c,v=>{e().isCentered||v(d)})}var u=L(c);{var f=v=>{const h=w(()=>t().start+r(l)*t().width);var m=sd(),g=q(m);pt(g,()=>Rl(e().labelsFactor),!0),ae(()=>{U(m,"x",r(h)),U(m,"y",t().ltop),U(m,"fill",e().labelColor),U(m,"font-size",`${e().fontSize??""}em`)}),M(v,m)};Y(u,v=>{e().labelsFactor!==0&&v(f)})}M(s,a)};var $f=Me('<text fill="crimson" text-anchor="middle"> </text>'),ed=Me('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),td=Me("<!><!><!><!><!>",1),rd=Me('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),nd=Me('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),sd=Me('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),ld=Me("<!><!><!>",1),ad=Me("<line></line>"),od=Me('<text dominant-baseline="middle" text-anchor="middle"> </text>'),id=Me('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),cd=Me('<svg><rect height="100%" width="100%"></rect><!></svg>'),ud=Me('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),fd=Me('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),dd=Me('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),vd=Me('<g class="plot-labels"><!><!><!></g>'),md=Me('<g class="axis x-axis"><!></g>'),hd=Me('<g class="axis y-axis"><!></g>'),gd=Me('<rect fill="transparent" id="axes-box"></rect>'),pd=Me('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),bd=Me('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),_d=Me('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),wd=Me('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),yd=K('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),xd=K('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),kd=K(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function ei(s,e){ye(e,!0);const t=(Ae,Ze=vt,Je=vt)=>{var Mt=_e(),Yt=J(Mt);{var ur=St=>{var lt=_e(),Qe=J(lt);{var It=gt=>{var it=$f(),wr=q(it);ae(()=>{U(it,"x",r(Ce)[0]-10),U(it,"y",r(ke)),U(it,"transform",`rotate(-90, ${r(Ce)[0]-10}, ${r(ke)})`),be(wr,Je().error)}),M(gt,it)},_t=gt=>{var it=ed(),wr=q(it);ae(()=>{U(it,"x",r(ge)),U(it,"y",r(Ee)[0]),be(wr,Je().error)}),M(gt,it)};Y(Qe,gt=>{Je().pos===4?gt(It):gt(_t,!1)})}M(St,lt)},Hr=St=>{var lt=td(),Qe=J(lt);{var It=Ie=>{Dl(Ie,{get lineCoords(){return Ze().grid},get lineColor(){return Et.MIDDLEGRAY},lineType:3})};Y(Qe,Ie=>{Je().showGrid&&Ie(It)})}var _t=L(Qe);Dl(_t,{get lineCoords(){return Ze().axisLine},get lineColor(){return Et.DARKGRAY},lineType:1});var gt=L(_t);Dl(gt,{get lineCoords(){return Ze().tickCoords},get lineColor(){return Et.DARKGRAY},lineType:1});var it=L(gt);{var wr=Ie=>{$o(Ie,{get las(){return Je().las},get pos(){return Je().pos},get tickCoords(){return Ze().tickCoords},get tickLabels(){return Ze().tickLabels},get tickColor(){return Et.DARKGRAY},get hideLast(){return Je().hideLast}})};Y(it,Ie=>{Ze().tickCoords.length===2&&Ze().tickLabels.length===Ze().tickCoords[1][0].length&&Ie(wr)})}var es=L(it);{var nt=Ie=>{{let Rt=w(()=>[Ze().tfLabel]);$o(Ie,{get pos(){return Je().pos},get tickCoords(){return Ze().tfCoords},get tickLabels(){return r(Rt)},get textColor(){return Et.DARKGRAY}})}};Y(es,Ie=>{Ze().tickFactor!==0&&Ie(nt)})}M(St,lt)};Y(Yt,St=>{Je().error?St(ur):St(Hr,!1)})}M(Ae,Mt)},l=(Ae,Ze=vt,Je=vt)=>{const Mt=w(()=>Je().elw+2*Je().elp),Yt=w(()=>Je().elp),ur=w(()=>Je().elh),Hr=w(()=>Je().ely);var St=cd(),lt=q(St),Qe=L(lt);Ye(Qe,17,()=>Ze().items,Ge,(It,_t,gt)=>{var it=id();U(it,"x",0);var wr=q(it);{var es=gn=>{var Ct=ad();ae(()=>{U(Ct,"x1",r(Yt)),U(Ct,"x2",r(Mt)-r(Yt)),U(Ct,"y1",r(ur)[gt]/2),U(Ct,"y2",r(ur)[gt]/2),U(Ct,"stroke",r(_t).line.lineColor),U(Ct,"stroke-width",r(_t).line.lineWidth),U(Ct,"stroke-dasharray",r(W)[r(_t).line.lineType-1])}),M(gn,Ct)};Y(wr,gn=>{r(_t).line&&gn(es)})}var nt=L(wr);{var Ie=gn=>{var Ct=od(),jh=q(Ct);ae(()=>{U(Ct,"x",r(Mt)/2),U(Ct,"y",r(ur)[gt]/2),U(Ct,"fill",r(_t).point.faceColor),U(Ct,"stroke-width",r(_t).point.lineWidth),U(Ct,"stroke",r(_t).point.lineColor),U(Ct,"font-size",`${r(_t).point.markerSize??""}em`),be(jh,An[r(_t).point.marker-1])}),M(gn,Ct)};Y(nt,gn=>{r(_t).point&&gn(Ie)})}var Rt=L(nt),Mh=q(Rt);pt(Mh,()=>r(_t).label,!0),ae(()=>{U(it,"y",r(Hr)[gt]),U(it,"width",Je().lgw),U(it,"height",r(ur)[gt]),U(Rt,"x",r(Mt)+r(Yt)),U(Rt,"y",r(ur)[gt]/2),U(Rt,"fill",Et.LEGEND),U(Rt,"font-size",`${Ze().fontSize??""}em`)}),M(It,it)}),ae(()=>{U(St,"x",Je().lgl),U(St,"y",Je().lgt),U(St,"height",Je().lgh),U(St,"width",Je().lgw),U(lt,"fill",Ze().faceColor),U(lt,"stroke",Ze().lineColor),U(lt,"stroke-width",Ze().lineWidth)}),M(Ae,St)};let a=B(e,"limX",19,()=>[0,1]),o=B(e,"limY",19,()=>[0,1]),c=B(e,"margins",19,()=>[1,1.1,.55,.6]),d=B(e,"downloadLinks",3,"none"),u=B(e,"fileName",3,"plot"),f=B(e,"pngWidth",3,8),v=B(e,"pngHeight",3,8),h=B(e,"pngRes",3,300),m=B(e,"clipboardWidth",3,1200),g=B(e,"clipboardHeight",3,800),b=B(e,"onclick",3,null),_=B(e,"onmousemove",3,null),p=B(e,"onmousedown",3,null),y=B(e,"onmouseup",3,null);function C(Ae,Ze){if(Ze&&Ae.target.id=="axes-box"){const Je=Xo([Ae.offsetX-r(ee)],r(Te))[0],Mt=Xo([Ae.offsetY-r(G)],r(je))[0];Ze(Je,Mt)}}function E(Ae){Ae.preventDefault(),C(Ae,p())}function k(Ae){Ae.preventDefault(),C(Ae,y())}function S(Ae){Ae.preventDefault(),C(Ae,_())}function I(Ae){Ae.preventDefault(),C(Ae,b())}async function j(Ae){qf(Ae.target,r(P),m(),g())}function N(){zf(r(P),u())}function A(){Rf(r(P),u(),f(),v(),h())}const T="plottingArea"+Math.round(Math.random()*1e4);let P=re(0),R=re(0),V=re(0);const F=w(()=>({plot:Mf(r(R),r(V)),x:Qo(r(R)),y:Qo(r(V))})),z=w(()=>c().map(Ae=>Ae*kf[r(F).plot])),O=w(()=>Cf[r(F).plot]),H=w(()=>Pl[r(F).plot]),W=w(()=>Xn[r(F).plot]),Q=w(()=>r(le).show&&r(le).label!==""?r(O)*1.5:0),ee=w(()=>r(pe).show&&r(pe).label!==""?r(O)*1.5:0),G=w(()=>e.title&&e.title!==""?r(O)*1.5:0),Z=w(()=>r(R)>r(ee)?r(R)-r(ee):0),se=w(()=>r(V)>r(Q)+r(G)?r(V)-r(Q)-r(G):0),te=w(()=>r(se)-r(z)[0]-r(z)[2]),ue=w(()=>r(Z)-r(z)[1]-r(z)[3]),ve=w(()=>Uo(a(),2)&&Uo(o(),2)&&r(Z)>r(z)[1]+r(z)[3]&&r(se)>r(z)[0]+r(z)[2]),Te=w(()=>r(ve)?{coords:[r(ue)/(a()[1]-a()[0]),a()[0],r(z)[1]],objects:[r(ue)/(a()[1]-a()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),je=w(()=>r(ve)?{coords:[-r(te)/(o()[1]-o()[0]),o()[1],r(z)[2]],objects:[r(te)/(o()[1]-o()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ke=w(()=>r(te)*.5+r(G)+r(z)[2]),ge=w(()=>r(ue)*.5+r(ee)+r(z)[1]),Ce=w(()=>r(ve)?ft(a(),r(Te)):[0,1]),Ee=w(()=>r(ve)?ft(o(),r(je)):[1,0]),Pe=w(()=>Yr(e.title)),ie=w(()=>r(Pe)?r(Pe).length===e.title.left?1:1.4:0);let oe=re(qe({show:!1})),le=re(qe({show:!1,error:""})),pe=re(qe({show:!1,error:""})),Ne=re(qe({show:!1,colmap:null,breaks:null})),he=re(qe({show:!1,items:null,position:null}));const ze=w(()=>r(ve)&&r(Ne)&&r(Ne).show?Bf(r(Ne)):null),Re=w(()=>r(ve)&&r(le).show?Of(a(),o(),r(F),r(je),r(le)):null),Fe=w(()=>r(ve)&&r(pe).show?Df(a(),o(),r(F),r(Te),r(pe)):null),X=w(()=>r(ve)&&r(ze)?Vf(r(ze),r(ue),r(z),r(F)):null),$=w(()=>r(ve)&&r(he)&&r(he).show&&r(Ce)?Uf(r(he),r(Ce),r(Ee),r(O),r(H)):null);nc("axes",{setBox:Ae=>D(oe,Ae,!0),setXAxis:Ae=>D(le,Ae,!0),setYAxis:Ae=>D(pe,Ae,!0),setColmapLegend:Ae=>D(Ne,Ae,!0),setGroupLegend:Ae=>D(he,Ae,!0),scales:()=>r(F),tX:()=>r(Te),tY:()=>r(je),limX:()=>a(),limY:()=>o()});var ne=kd();let ce;var de=q(ne),Se=L(q(de));{var Oe=Ae=>{var Ze=vd(),Je=q(Ze);{var Mt=lt=>{var Qe=ud();U(Qe,"dx",0),U(Qe,"dy",0);var It=q(Qe);pt(It,()=>r(le).label,!0),ae(()=>{U(Qe,"x",r(ge)),U(Qe,"y",r(se)+r(G))}),M(lt,Qe)};Y(Je,lt=>{r(le).show&&r(le).label&&r(le).label!==""&&lt(Mt)})}var Yt=L(Je);{var ur=lt=>{var Qe=fd();U(Qe,"dx",0),U(Qe,"dy",0);var It=q(Qe);pt(It,()=>r(pe).label,!0),ae(()=>{U(Qe,"x",r(O)/1.1*r(pe).labelHeight),U(Qe,"y",r(ke)),U(Qe,"transform",`rotate(-90, ${r(O)*r(pe).labelHeight/1.1}, ${r(ke)})`)}),M(lt,Qe)};Y(Yt,lt=>{r(pe).show&&r(pe).label&&r(pe).label!==""&&lt(ur)})}var Hr=L(Yt);{var St=lt=>{var Qe=dd();U(Qe,"dx",0),U(Qe,"dy",0);var It=q(Qe);pt(It,()=>r(Pe),!0),ae(()=>{U(Qe,"x",r(ge)),U(Qe,"y",r(O)*r(ie))}),M(lt,Qe)};Y(Hr,lt=>{r(Pe)&&r(Pe)!==""&&lt(St)})}M(Ae,Ze)};Y(Se,Ae=>{r(ve)&&Ae(Oe)})}var De=L(Se),Ve=q(De),Ue=q(Ve),ht=q(Ue),_r=L(Ve);{var ea=Ae=>{var Ze=wd(),Je=J(Ze);{var Mt=nt=>{var Ie=md(),Rt=q(Ie);t(Rt,()=>r(Re),()=>r(le)),M(nt,Ie)};Y(Je,nt=>{r(le).show&&r(Re)&&nt(Mt)})}var Yt=L(Je);{var ur=nt=>{var Ie=hd(),Rt=q(Ie);t(Rt,()=>r(Fe),()=>r(pe)),M(nt,Ie)};Y(Yt,nt=>{r(pe).show&&r(Fe)&&nt(ur)})}var Hr=L(Yt),St=q(Hr);{var lt=nt=>{var Ie=gd();Ie.__keydown=I,Ie.__click=I,Ie.__mousemove=S,Ie.__mousedown=E,Ie.__mouseup=k,ae(()=>{U(Ie,"stroke",r(oe).lineColor),U(Ie,"stroke-width",`${r(oe).lineWidth??""}px`),U(Ie,"x",r(Ce)[0]),U(Ie,"y",r(Ee)[1]),U(Ie,"width",r(Ce)[1]-r(Ce)[0]),U(Ie,"height",r(Ee)[0]-r(Ee)[1])}),M(nt,Ie)},Qe=nt=>{var Ie=pd();Ie.__keydown=I,Ie.__click=I,Ie.__mousemove=S,Ie.__mousedown=E,Ie.__mouseup=k,ae(()=>{U(Ie,"x",r(Ce)[0]),U(Ie,"y",r(Ee)[1]),U(Ie,"width",r(Ce)[1]-r(Ce)[0]),U(Ie,"height",r(Ee)[0]-r(Ee)[1])}),M(nt,Ie)};Y(St,nt=>{r(oe).show?nt(lt):nt(Qe,!1)})}var It=L(Hr),_t=q(It);jr(_t,()=>e.children??vt);var gt=L(It);{var it=nt=>{var Ie=bd(),Rt=q(Ie);Qf(Rt,()=>r(ze),()=>r(X)),M(nt,Ie)};Y(gt,nt=>{r(X)&&nt(it)})}var wr=L(gt);{var es=nt=>{var Ie=_d(),Rt=q(Ie);l(Rt,()=>r(he),()=>r($)),M(nt,Ie)};Y(wr,nt=>{r($)&&nt(es)})}ae(()=>U(It,"clip-path",`url(#${T})`)),M(Ae,Ze)};Y(_r,Ae=>{r(ve)&&Ae(ea)})}an(de,Ae=>D(P,Ae),()=>r(P));var Tt=L(de,2);{var bt=Ae=>{var Ze=yd();M(Ae,Ze)},dt=Ae=>{var Ze=xd(),Je=q(Ze);Je.__click=N,Je.__keydown=N;var Mt=L(Je,2);Mt.__click=A,Mt.__keydown=A;var Yt=L(Mt,2);Yt.__click=j,Yt.__keydown=j,M(Ae,Ze)};Y(Tt,Ae=>{r(ve)?Ae(dt,!1):Ae(bt)})}ae(()=>{ce=ct(ne,1,`plot-container show-download-links-${d()??""}`,"svelte-1t5q9z1",ce,{"plot-error":!r(ve)}),ut(de,`font-size:${r(O)??""}px`),U(De,"x",r(ee)),U(De,"y",r(G)),U(De,"width",r(Z)),U(De,"height",r(se)),U(Ue,"id",T),U(ht,"x",r(Ce)[0]),U(ht,"y",r(Ee)[1]),U(ht,"width",r(Ce)[1]-r(Ce)[0]),U(ht,"height",r(Ee)[0]-r(Ee)[1])}),oo(de,"clientWidth",Ae=>D(R,Ae)),oo(de,"clientHeight",Ae=>D(V,Ae)),M(s,ne),xe()}at(["keydown","click","mousemove","mousedown","mouseup"]);function ti(s,e){ye(e,!0);let t=B(e,"tickLabels",7),l=B(e,"las",3,1),a=B(e,"whole",3,!1),o=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const d=qt("axes");me(()=>{const u=Yr(e.label),f=u?u.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=Zo(e.ticks,d.limX())),!h&&t()&&(m=>{var g=Bs(m,2);t(g[0]),h=g[1]})(Jo(t(),v)),d.setXAxis({show:o(),error:h,label:u,ticks:v,labelHeight:f,showGrid:c(),las:l(),whole:a(),tickLabels:t()})}),xe()}function ri(s,e){ye(e,!0);let t=B(e,"tickLabels",7),l=B(e,"las",3,1),a=B(e,"whole",3,!1),o=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const d=qt("axes");me(()=>{const u=Yr(e.label),f=u?u.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=Zo(e.ticks,d.limY())),!h&&t()&&(m=>{var g=Bs(m,2);t(g[0]),h=g[1]})(Jo(t(),v)),d.setYAxis({show:o(),error:h,label:u,ticks:v,labelHeight:f,showGrid:c(),las:l(),whole:a(),tickLabels:t(),pos:4})}),xe()}function ni(s,e){ye(e,!0);let t=B(e,"lineWidth",3,1),l=B(e,"lineColor",3,"#606060");const a=qt("axes");me(()=>{a.setBox({show:!0,lineWidth:t(),lineColor:l()})}),xe()}var Ed=Me("<rect></rect>"),Sd=Me("<g></g>");function Kn(s,e){ye(e,!0);let t=B(e,"faceColor",19,()=>Et.PRIMARY),l=B(e,"lineColor",19,t),a=B(e,"lineWidth",3,1),o=B(e,"className",3,"series-rect");const c=w(()=>Lt(e.left,"Rectangles (left)")),d=w(()=>r(c)?Lt(e.top,"Rectangles (top)",r(c).length):null),u=w(()=>r(d)?typeof e.width!="object"?we.fill(e.width,r(c).length):e.width:null),f=w(()=>r(d)?typeof e.height!="object"?we.fill(e.height,r(c).length):e.height:null),v=qt("axes"),h=w(()=>r(c)?ft(r(c),v.tX()):null),m=w(()=>r(d)?ft(r(d),v.tY()):null),g=w(()=>r(u)?Il(r(u),v.tX()):null),b=w(()=>r(f)?Il(r(f),v.tY()):null),_=w(()=>`fill:${t()};stroke:${l()};stroke-width:${a()}px;`),p=w(()=>r(h)&&r(m)&&r(g)&&r(b)&&r(g).length===r(h).length&&r(b).length===r(h).length);var y=_e(),C=J(y);{var E=k=>{var S=Sd();S.__click=I=>hn(I,"rect",e.onclick),Ye(S,21,()=>e.left,Ge,(I,j,N)=>{var A=Ed();ae(()=>{U(A,"x",r(h)[N]),U(A,"y",r(m)[N]),U(A,"width",r(g)[N]),U(A,"height",r(b)[N])}),M(I,A)}),ae(()=>{ct(S,0,`series ${o()??""}`),ut(S,r(_))}),M(k,S)};Y(C,k=>{r(p)&&k(E)})}M(s,y),xe()}at(["click"]);var Cd=Me("<line></line>"),Nd=Me('<g class="series series-segment"></g>');function cr(s,e){ye(e,!0);let t=B(e,"lineColor",19,()=>Et.PRIMARY),l=B(e,"lineType",3,1),a=B(e,"lineWidth",3,1);const o=w(()=>Lt(e.xStart,"Segments")),c=w(()=>r(o)?Lt(e.yStart,"Segments",r(o).length):null),d=w(()=>r(c)?Lt(e.xEnd,"Segments",r(o).length):null),u=w(()=>r(d)?Lt(e.yEnd,"Segments",r(o).length):null),f=qt("axes"),v=w(()=>r(o)?ft(r(o),f.tX()):null),h=w(()=>r(d)?ft(r(d),f.tX()):null),m=w(()=>r(c)?ft(r(c),f.tY()):null),g=w(()=>r(u)?ft(r(u),f.tY()):null),b=w(()=>`stroke:${t()};stroke-width: ${a()}px;stroke-dasharray:${Xn[f.scales().plot][l()-1]}`),_=w(()=>r(v)&&r(h)&&r(m)&&r(g));var p=_e(),y=J(p);{var C=E=>{var k=Nd();k.__click=S=>hn(S,"line",e.onclick),Ye(k,21,()=>r(v),Ge,(S,I,j)=>{var N=Cd();ae(()=>{U(N,"x1",r(v)[j]),U(N,"x2",r(h)[j]),U(N,"y1",r(m)[j]),U(N,"y2",r(g)[j])}),M(S,N)}),ae(()=>ut(k,r(b))),M(E,k)};Y(y,E=>{r(_)&&E(C)})}M(s,p),xe()}at(["click"]);var Ad=Me("<text><!></text>"),Td=Me("<text><!></text>"),Md=Me("<text><!></text>"),jd=Me('<g class="series series-textlabels"><!></g>');function Ls(s,e){ye(e,!0);let t=B(e,"pos",3,0),l=B(e,"faceColor",19,()=>Et.PRIMARY_TEXT),a=B(e,"lineColor",3,"transparent"),o=B(e,"lineWidth",3,0),c=B(e,"textSize",3,1),d=B(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],f=w(()=>Lt(e.xValues,"TextLabels")),v=w(()=>r(f)?Lt(e.yValues,"TextLabels",r(f).length):null),h=w(()=>r(v)?Array.isArray(e.labels)&&e.labels.length!==r(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=w(()=>r(h)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),g=qt("axes"),b=w(()=>r(f)&&r(m)!==null?ft(r(f),g.tX()):null),_=w(()=>r(v)&&r(b)?ft(r(v),g.tY()):null),p=w(()=>Ll[g.scales().plot]),y=w(()=>[0,0,-r(p),0,r(p),r(p)]),C=w(()=>[0,r(p),0,-r(p),0,r(p)]),E=w(()=>`fill:${l()};stroke-width:${o()}px;stroke:${a()};font-size:${c()}em;`),k=w(()=>r(b)&&r(_)&&r(m)!==null&&r(h)&&r(b).length===r(_).length);var S=_e(),I=J(S);{var j=N=>{var A=jd();A.__click=V=>hn(V,"text",e.onclick);var T=q(A);{var P=V=>{var F=_e(),z=J(F);Ye(z,17,()=>r(b),Ge,(O,H,W)=>{var Q=Ad();U(Q,"data-id",W);var ee=q(Q);pt(ee,()=>e.labels,!0),ae(()=>{U(Q,"x",r(b)[W]),U(Q,"y",r(_)[W]),U(Q,"dx",r(y)[t()]),U(Q,"dy",r(C)[t()]),U(Q,"transform",d()!==void 0?`rotate(${d()}, ${r(b)[W]+r(y)[t()]}, ${r(_)[W]+r(C)[t()]})`:""),U(Q,"text-anchor",u[t()[W]])}),M(O,Q)}),M(V,F)},R=V=>{var F=_e(),z=J(F);{var O=W=>{var Q=_e(),ee=J(Q);Ye(ee,17,()=>r(b),Ge,(G,Z,se)=>{var te=Td();U(te,"data-id",se);var ue=q(te);pt(ue,()=>e.labels[se],!0),ae(()=>{U(te,"x",r(b)[se]),U(te,"y",r(_)[se]),U(te,"dx",r(y)[t()[se]]),U(te,"dy",r(C)[t()[se]]),U(te,"transform",d()!==void 0?`rotate(${d()}, ${r(b)[se]+r(y)[t()]}, ${r(_)[se]+r(C)[t()]})`:""),U(te,"text-anchor",u[t()[se]])}),M(G,te)}),M(W,Q)},H=W=>{var Q=_e(),ee=J(Q);Ye(ee,17,()=>r(b),Ge,(G,Z,se)=>{var te=Md();U(te,"data-id",se);var ue=q(te);pt(ue,()=>e.labels[se],!0),ae(()=>{U(te,"x",r(b)[se]),U(te,"y",r(_)[se]),U(te,"dx",r(y)[t()]),U(te,"dy",r(C)[t()]),U(te,"transform",d()!==void 0?`rotate(${d()}, ${r(b)[se]+r(y)[t()]}, ${r(_)[se]+r(C)[t()]})`:""),U(te,"text-anchor",u[t()])}),M(G,te)}),M(W,Q)};Y(z,W=>{Array.isArray(t())||ArrayBuffer.isView(t())?W(O):W(H,!1)},!0)}M(V,F)};Y(T,V=>{typeof e.labels=="string"?V(P):V(R,!1)})}ae(()=>ut(A,r(E))),M(N,A)};Y(I,N=>{r(k)&&N(j)})}M(s,S),xe()}at(["click"]),at(["click"]);var Pd=Me("<text> </text>"),Ld=Me('<g text-anchor="middle"></g>');function si(s,e){ye(e,!0);let t=B(e,"marker",3,1),l=B(e,"faceColor",3,"transparent"),a=B(e,"lineColor",19,()=>Et.PRIMARY),o=B(e,"lineWidth",3,1),c=B(e,"markerSize",3,1);const d=w(()=>typeof t()!="number"||t()<1||t()>An.length?(console.error('Points: parameter "marker" must be a number from 1 to '+An.length+"."),null):An[t()-1]),u=w(()=>Lt(e.xValues,"Points")),f=w(()=>r(u)?Lt(e.yValues,"Points",r(u).length):null),v=qt("axes"),h=w(()=>r(u)?ft(r(u),v.tX()):null),m=w(()=>r(h)&&r(f)?ft(r(f),v.tY()):null),g=w(()=>["＋","✳","✕"].includes(r(d))?`fill:${a()&&a()!=="transparent"?a():l()};stroke-width:0px;font-size:${c()}em;`:`fill:${l()};stroke-width:${o()}px;stroke:${a()}; font-size:${c()}em;`),b=w(()=>["◼","⬥","＋","✳","✕"].includes(r(d))?"series-points2":"series-points1"),_=w(()=>r(h)&&r(m)&&r(h).length===r(m).length);var p=_e(),y=J(p);{var C=E=>{var k=Ld();k.__click=S=>hn(S,"text",e.onclick),Ye(k,21,()=>r(h),Ge,(S,I,j)=>{var N=Pd(),A=q(N);ae(()=>{U(N,"x",r(h)[j]),U(N,"y",r(m)[j]),be(A,r(d))}),M(S,N)}),ae(()=>{ct(k,0,`series series-points ${r(b)??""}`),ut(k,r(g))}),M(E,k)};Y(y,E=>{r(_)&&E(C)})}M(s,p),xe()}at(["click"]);var Id=Me('<g class="series series-line"><polyline class="line"></polyline></g>');function Bt(s,e){ye(e,!0);let t=B(e,"lineColor",19,()=>Et.PRIMARY),l=B(e,"lineType",3,1),a=B(e,"lineWidth",3,1);const o=w(()=>Lt(e.xValues,"Lines")),c=w(()=>r(o)?Lt(e.yValues,"Lines",r(o).length):null),d=qt("axes"),u=w(()=>r(o)&&r(c)?ql(r(o),r(c),d.tX(),d.tY()):null),f=w(()=>`fill:transparent;stroke:${t()};stroke-width: ${a()}px; stroke-dasharray:${Xn[d.scales().plot][l()-1]}`);var v=_e(),h=J(v);{var m=g=>{var b=Id();b.__click=p=>hn(p,"polyline",e.onclick);var _=q(b);ae(()=>{ut(b,r(f)),U(_,"points",r(u))}),M(g,b)};Y(h,g=>{r(u)&&g(m)})}M(s,v),xe()}at(["click"]);var Rd=Me('<polyline class="line"></polyline>'),zd=Me('<g class="series series-multiline"></g>');function li(s,e){ye(e,!0);let t=B(e,"lineColor",19,()=>Et.PRIMARY),l=B(e,"lineType",3,1),a=B(e,"lineWidth",3,1);const o=w(()=>Lt(e.xValues,"Multilines")),c=w(()=>r(o)?Xt(e.yValues)?(r(o).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),d=qt("axes"),u=w(()=>{if(!r(o)||!r(c))return null;const g=new Array(r(c).ncols);for(let b=0;b<g.length;b++)g[b]=ql(r(o),r(c).getcolumn(b+1),d.tX(),d.tY());return g}),f=w(()=>`fill:transparent;stroke:${t()};stroke-width: ${a()}px; stroke-dasharray:${Xn[d.scales().plot][l()-1]}`);var v=_e(),h=J(v);{var m=g=>{var b=zd();b.__click=_=>hn(_,"polyline",e.onclick),Ye(b,21,()=>r(u),Ge,(_,p)=>{var y=Rd();ae(()=>U(y,"points",r(p))),M(_,y)}),ae(()=>ut(b,r(f))),M(g,b)};Y(h,g=>{r(u)&&r(u).length>0&&g(m)})}M(s,v),xe()}at(["click"]);function Tn(s,e){ye(e,!0);let t=B(e,"show",3,!0),l=B(e,"position",3,"topleft"),a=B(e,"lineColor",19,()=>Et.LEGEND),o=B(e,"lineWidth",3,1),c=B(e,"faceColor",3,"#fff"),d=B(e,"fontSize",3,.85);function u(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function f(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let m=0;m<h.length;m++){const g=h[m];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const b=Yr(g.label),_=b.length===g.label?1:1.4;g.label=b,g.labelHeight=_,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(m+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:Et.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=An.length||console.error('Legend: parameter "marker" for legend item '+(m+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.markerSize=g.point.markerSize?g.point.markerSize:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:Et.PRIMARY)}return h}const v=qt("axes");me(()=>{const h=f(e.items),m=u(l());v.setGroupLegend(h&&m?{show:t(),position:l(),items:e.items,lineColor:a(),faceColor:c(),lineWidth:o(),fontSize:d()}:{show:!1,position:null,items:null})}),xe()}function Is(s,e){ye(e,!0);let t=B(e,"show",3,!0),l=B(e,"labels",3,null),a=B(e,"labelColor",19,()=>Et.CLEGEND_LABELS),o=B(e,"fontSize",3,.85);const c=qt("axes");me(()=>{c.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:l(),labelColor:a(),fontSize:o()})}),xe()}const qd=s=>s;function ai(s,{delay:e=0,duration:t=400,easing:l=qd}={}){const a=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:l,css:o=>`opacity: ${o*a}`}}var Fd=K('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function Bl(s,e){ye(e,!0);let t=B(e,"isDark",3,!1);function l(h){h.key==="Escape"&&e.closeModal()}var a=Fd();nn("keydown",Js,l);let o;var c=q(a),d=q(c),u=q(d);u.__click=function(...h){e.closeModal?.apply(this,h)};var f=L(d,2),v=q(f);jr(v,()=>e.children),ae(()=>o=ct(a,1,"drop svelte-oie633",null,o,{isdark:t()})),no(7,a,()=>ai),M(s,a),xe()}at(["click"]);const Od=[1,1.1,.45,.4],Wr={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",alien:"#2679B2",external:"#D22C2F"},Vt={cal:1,pv:2,test:2,new:2},mt={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},Vl={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Ur={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},oi="#808090",ii="#a0a0a0",ci="#909090",Rs="#909090",Jn=8,Dd=8,Bd=8,Vd=600;function ui(s,e){return!s||!e||e<0||e>s.ncomp?"":`PC${e} (${(s.stat.expvar[e-1]*100).toFixed(1)}%)`}function Yd(s,e){if(s.length===e.length)return s;const t=e.length,l=new s.constructor(t);for(let a in e)l[a]=s[e[a]];return l}function Wd(s,e){let t=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;for(let c=0;c<s.length;c++)l=Math.min(l,s[c]),t=Math.max(t,s[c]);let a=Fl(void 0,[l,t],e-1,!0,!1,0).v;const o=a[1]-a[0];if(a[0]>l){const c=a[0]-o;a=[c<l?c:l,...a]}if(a[a.length-1]<t){const c=a[a.length-1]+o;a=[...a,c>t?c:t]}return a}function Ud(s){const e=s.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const t=Ps(e);return s.reduce((a,o,c)=>(a[o]=t[c],a),{})}function fi(s,e,t){const l=e.length,a=new Array(s.length),o=e[1]-e[0];for(let c=0;c<s.length;c++)for(let d=0;d<l-1;d++){const u=s[c]>=e[d],f=d===l-2?s[c]<e[d+1]+o:s[c]<e[d+1];if(u&&f){a[c]=t[d];break}}return a}function zs(s,e,t,l,a="cal",o){if(!e)return null;let c,d,u,f,v,h,m=!0;if((t==="groups"||t==="classes")&&e.classNames){const g=Ud(e.classNames);d=Object.keys(g).map(b=>g[b]),c=e.classNames,f=e.classes.map(b=>g[b]),u=new Array(c.length+1).map((b,_)=>_-.5),v=null}else if(t==="variable"){const g=Yd(s.values.getcolref(l),e.objindices);v=s.varlabels[l-1],v.length>30&&(v=v.substring(0,29)+"..."),u=Wd(g,10),d=Ps(u.length-1),f=fi(g,u,d)}else if(o){const g=o.values;c=o.labels;const b=o.classColmap;d=Object.keys(b).map(_=>b[_]),f=g.map(_=>b[_]),u=new Array(c.length+1).map((_,p)=>p-.5),v=null,o.filled&&o.filled.length===g.length&&(h=o.filled),o.showBar!==void 0&&(m=o.showBar)}else c=null,u=null,d=null,f=Array(e.nrows).fill(mt[a]);return{labels:c,map:d,breaks:u,colors:f,varname:v,filled:h,showBar:m,mainColor:mt[a],faceColor:Vl[a],faceTColor:Ur[a]}}function Hd(s,e,t=.95){const a=2*Math.PI/99,[o,c,d]=s,u=Math.sqrt((o+d)**2-4*(o*d-c*c));let f=.5*(o+d-u),v=.5*(o+d+u);if(f<v){let j=f;f=v,v=j}const h=xt(t,2),m=Math.sqrt(h*f),g=Math.sqrt(h*v);let b;if(Math.abs(c)<1e-7)b=0;else{let j=-c/(o-f),N=1;const A=Math.sqrt(j*j+N*N);j=j/A,N=N/A,b=Math.atan2(N,j),b<0&&(b=b+2*Math.PI)}const _=Math.cos(b),p=Math.sin(b),y=we.zeros(100),C=we.zeros(100);let E=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY;for(let j=0;j<100;j++){const N=j*a,A=m*Math.cos(N),T=g*Math.sin(N),P=A*_-T*p+e[0],R=A*p+T*_+e[1];y.v[j]=P,C.v[j]=R,E=Math.min(E,P),k=Math.max(k,P),S=Math.min(S,R),I=Math.max(I,R)}return[y,C,E,k,S,I]}function Gd(s,e,t,l,a,o){if(!s||!e||!t||!l||!a)return null;const c=s.length,d=l.length,u=new Array(d).fill(0),f=new Array(d*2).fill(0);for(let p=0;p<c;p++){const y=l.indexOf(t[p]);u[y]+=1,f[y*2]+=s.v[p],f[y*2+1]+=e.v[p]}for(let p=0;p<d;p++)f[p*2]=f[p*2]/u[p],f[p*2+1]=f[p*2+1]/u[p];const v=new Array(d*3).fill(0);for(let p=0;p<c;p++){const y=l.indexOf(t[p]),C=s.v[p]-f[y*2],E=e.v[p]-f[y*2+1];v[y*3]+=C*C,v[y*3+1]+=C*E,v[y*3+2]+=E*E}let h=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;const _=Array(d);for(let p=0;p<d;p++){const[y,C,E,k,S,I]=Hd([v[p*3]/(u[p]-1),v[p*3+1]/(u[p]-1),v[p*3+2]/(u[p]-1)],[f[p*2],f[p*2+1]],o);_[p]={x:y,y:C,c:a[p]},h=Math.min(h,E),m=Math.max(m,k),g=Math.min(g,S),b=Math.max(b,I)}return{ellipses:_,xRange:[h,m],yRange:[g,b]}}function Xd(s){const e=s.charAt(0),t=s.substring(1);return e.toUpperCase()+t}function di(s,e,t,l){if(!s||!e)return null;const a=s.length;let o=we.zeros(a),c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;if(l==="log")for(let u=0;u<a;u++){const f=Math.log(1+s[u]/t);o.v[u]=f,c=Math.max(c,f),d=Math.min(d,f)}else for(let u=0;u<a;u++){const f=s[u]/t;o.v[u]=f,c=Math.max(c,f),d=Math.min(d,f)}return{values:o,min:d,max:c}}function vi(s,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[s]+", "+(e==="log"?"log(1 + "+s+"/"+s+"0)":s+"/"+s+"0")}function mi(s,e,t,l){const o=e+t,d=xt(s,o)/t,u=-e/t,f=-d/u,v=we.seq(0,f*1,f/100),h=v.apply(m=>m*u+d);return{x:l==="log"?v.apply(m=>Math.log(1+m)):v,y:l==="log"?h.apply(m=>Math.log(1+m)):h}}function Kd(s,e=Ur){return s?s.map(t=>({id:t,label:t,point:{marker:Vt[t],faceColor:e[t],lineColor:mt[t],markerSize:Vt[t]===1?.85:.65,lineWidth:1.5}})):null}var Jd=K("<!> <!> <!> <!>",1);function br(s,e){let t=B(e,"whole",3,!1),l=on(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);ei(s,Gt({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return Od},get pngWidth(){return Dd},get pngHeight(){return Bd},get pngRes(){return Vd}},()=>l,{children:(a,o)=>{var c=Jd(),d=J(c);jr(d,()=>e.children);var u=L(d,2);ti(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var f=L(u,2);ri(f,{showGrid:!0,get label(){return e.yLabel}});var v=L(f,2);ni(v,{}),M(a,c)},$$slots:{default:!0}}))}var Zd=K("<!> <!> <!>",1),Qd=K("<!> <!> <!> <!> <!>",1),$d=K("<div><!></div>"),ev=K('<div class="wrapper svelte-1di9qjd"><div class="plot-container svelte-1di9qjd" role="tooltip"><!></div> <div class="msg-select svelte-1di9qjd">click inside the plot to see a variable label</div> <div class="plot-controls svelte-1di9qjd"><div><!></div> <!></div></div>');function Yl(s,e){ye(e,!0);let t=B(e,"outliers",19,()=>[]),l=B(e,"model_getter",3,et),a=B(e,"res_getter",3,Kt),o=re("residual"),c=re(-1);const d=w(()=>e.res?Object.keys(e.res):null);let u=re(qe(r(d)?r(d)[0]:null));function f(G){if(G.target.tagName!=="rect"){D(c,-1);return}const Z=Array.from(G.target.parentNode.children).indexOf(G.target);if(Z<0){D(c,-1);return}r(c)!==Z&&D(c,Z,!0)}const v=w(()=>{if(!e.model)return null;const G=e.model.nresp?e.model.nresp:0,Z=rt(e.model.varvalues.filter((ke,ge)=>ge>=G)),se=Z.length,te=(Z.v[1]-Z.v[0])/2,ue=(Z.v[se-1]-Z.v[se-2])/2,ve=[Z.v[0],Z.v[se-1]],Te=[ve[0]-te,ve[1]+ue],je=(ve[1]-ve[0])/se;return{values:Z,lim:Te,width:je,hwidth:je*.5}}),h=w(()=>r(v)?r(v).values.apply(G=>G-r(v).hwidth):null),m=w(()=>r(u)?e.res[r(u)]:null),g=w(()=>r(m)?new Le(a()(r(m),"T"),r(m).nrows,r(m).ncomp):null),b=w(()=>r(m)?new Le(a()(r(m),"E"),r(m).nrows,r(m).npred).t():null),_=w(()=>e.model?new Le(l()(e.model,"P"),e.model.npred?e.model.npred:e.model.ncols,e.model.ncomp):null),p=w(()=>e.ncomp?Xe.seq(1,e.ncomp):null),y=w(()=>e.ncomp<e.model.ncomp?Xe.seq(e.ncomp+1,e.model.ncomp):null),C=w(()=>r(g)&&r(p)?r(g).subset(null,r(p)):null),E=w(()=>r(g)&&r(p)?r(_).subset(null,r(p)):null),k=w(()=>r(g)&&r(y)?r(g).subset(null,r(y)):null),S=w(()=>r(g)&&r(y)?r(_).subset(null,r(y)):null),I=w(()=>r(C)&&r(E)?Co(r(E),r(C)):null),j=w(()=>r(k)&&r(S)?Co(r(S),r(k)).add(r(b)):r(b)),N=w(()=>r(I)&&r(j)?r(I).add(r(j)):null);let A=w(()=>r(I)?r(I).getcolumn(e.selected+1):null),T=w(()=>r(j)?r(j).getcolumn(e.selected+1):null),P=w(()=>r(N)?r(N).getcolumn(e.selected+1):null),R=w(()=>{if(!r(A)||!r(T)||!r(P))return null;const G=r(o)==="explained"?{all:r(I),sel:r(A),label:"Explained part, TP^T"}:r(o)==="residual"?{all:r(j),sel:r(T),label:"Residuals, E"}:{all:r(N),sel:r(P),label:"Preprocessed data, X"},Z=Lr(G.all.v),se=Z[1]-Z[0],te=[Z[0]-se/50,Z[1]+se/12],ue=we.fill(Z[1],G.sel.length);return G.lim=te,G.top=ue,G.height=se,G});const V=w(()=>r(v)&&r(c)>=0?r(v).values.v[r(c)]:null),F=w(()=>r(R)&&r(c)>=0?r(R).sel.v[r(c)]:null),z=w(()=>e.model&&r(c)>=0?e.model.varlabels[r(c)]:null),O=w(()=>r(m)&&e.selected>=0?`Object ${r(m).objlabels[e.selected].replace("_","-")}`:null),H=w(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var W=_e(),Q=J(W);{var ee=G=>{Bl(G,{get closeModal(){return e.closeModal},children:(Z,se)=>{var te=ev(),ue=q(te);ue.__click=f;var ve=q(ue);br(ve,{get title(){return r(O)},get yLabel(){return r(R).label},get xLabel(){return r(H)},get limY(){return r(R).lim},get limX(){return r(v).lim},fileName:"plot-contributions",children:(Ee,Pe)=>{var ie=Qd(),oe=J(ie);li(oe,{get xValues(){return r(v).values},get yValues(){return r(R).all},lineColor:"#e0e0e0"});var le=L(oe,2);{var pe=Fe=>{var X=_e(),$=J(X);Ye($,17,t,Ge,(ne,ce)=>{{let de=w(()=>r(R).all.getcolumn(r(ce)+1));Bt(ne,{get xValues(){return r(v).values},get yValues(){return r(de)},lineColor:"#ffdd88"})}}),M(Fe,X)};Y(le,Fe=>{t().length>0&&Fe(pe)})}var Ne=L(le,2);Bt(Ne,{get xValues(){return r(v).values},get yValues(){return r(R).sel},lineColor:"crimson"});var he=L(Ne,2);Kn(he,{get left(){return r(h)},get top(){return r(R).top},get height(){return r(R).height},get width(){return r(v).width},faceColor:"transparent",borderColor:"transparent"});var ze=L(he,2);{var Re=Fe=>{var X=Zd(),$=J(X);{let de=w(()=>[r(V)]),Se=w(()=>[r(R).top.v[0]]),Oe=w(()=>[r(z)]);Ls($,{get xValues(){return r(de)},get yValues(){return r(Se)},get labels(){return r(Oe)},pos:3,textSize:.85})}var ne=L($,2);{let de=w(()=>[r(V)]),Se=w(()=>[r(F)]);si(ne,{get xValues(){return r(de)},get yValues(){return r(Se)},faceColor:"crimson",lineColor:"crimson"})}var ce=L(ne,2);{let de=w(()=>[r(h).v[r(c)]]),Se=w(()=>[r(R).top.v[r(c)]]);Kn(ce,{get left(){return r(de)},get top(){return r(Se)},get height(){return r(R).height},get width(){return r(v).width},faceColor:"#ff000015"})}M(Fe,X)};Y(ze,Fe=>{r(c)>=0&&Fe(Re)})}M(Ee,ie)},$$slots:{default:!0}});var Te=L(ue,4),je=q(Te),ke=q(je);fe(ke,{label:"Show",children:(Ee,Pe)=>{We(Ee,{id:"type",options:["full","explained","residual"],get value(){return r(o)},set value(ie){D(o,ie,!0)}})},$$slots:{default:!0}});var ge=L(je,2);{var Ce=Ee=>{var Pe=$d(),ie=q(Pe);fe(ie,{label:"For",children:(oe,le)=>{We(oe,{id:"type",get options(){return r(d)},get value(){return r(u)},set value(pe){D(u,pe,!0)}})},$$slots:{default:!0}}),M(Ee,Pe)};Y(ge,Ee=>{r(d).length>1&&Ee(Ce)})}M(Z,te)},$$slots:{default:!0}})};Y(Q,G=>{r(v)&&r(R)&&G(ee)})}M(s,W),xe()}at(["click"]);function tv(s,e){let t=0,l=0;s.nresp>0&&(t=new we(s.values.v.slice(0,s.nresp*s.values.nrows-1)),l=s.nresp);const a=new Le(s.values.v.slice(l*s.values.nrows),s.values.nrows,s.values.ncols-l).t(),o=a.ncols<e?1:Math.round(a.ncols/e),c=Xe.seq(1,a.ncols,o),d=a.subset(null,c),u=t?t.subset(c):null,f=s.classes?s.classes.filter((v,h)=>c.v.includes(h)):null;return{classNames:s.classNames,classes:f,resp:u,values:d,varvalues:s.varvalues.filter((v,h)=>h>=l),varindices:s.varindices.filter((v,h)=>h>=l),varaxisLabel:s.varvaluesUnits?s.varvaluesName+" "+s.varvaluesUnits:s.varvaluesName,varaxisUnits:s.varvaluesUnits}}function Wl(s,e){return{values:e||s.values.copy(),varvalues:s.varvalues,varindices:s.varindices,varaxisLabel:s.varaxisLabel}}function rv(s,e){if(!e||e.nrows!==s.values.nrows||e.ncols!==s.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const t=structuredClone(s);return t.values=e,t}var nv=K('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function Ul(s,e){ye(e,!0);var t=_e(),l=J(t);{var a=c=>{var d=nv(),u=q(d),f=L(u),v=q(f);pt(v,()=>Iu(e.prepmodel)),ae(()=>be(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),M(c,d)},o=c=>{var d=Pc("skipped");M(c,d)};Y(l,c=>{e.prepmodel.ml?c(a):c(o,!1)})}M(s,t),xe()}var sv=K('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),lv=K('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function av(s,e){ye(e,!0);var t=_e(),l=J(t);{var a=o=>{fe(o,{name:"info",children:(c,d)=>{var u=lv(),f=J(u),v=L(q(f),3);{var h=p=>{var y=sv(),C=L(J(y),2),E=q(C);ae(()=>{U(C,"title",e.model.fileName),be(E,e.model.fileName)}),M(p,y)};Y(v,p=>{e.model.fileName&&p(h)})}var m=L(v),g=L(m,3);Ul(g,{get prepmodel(){return e.model}});var b=L(f,2);{var _=p=>{gr(p,{get onclick(){return e.reset}})};Y(b,p=>{e.reset&&p(_)})}ae(()=>be(m,` ${e.model.npred??""} `)),M(c,u)},$$slots:{default:!0}})};Y(l,o=>{e.model&&o(a)})}M(s,t),xe()}var ov=K("<!> <!>",1),iv=K("<p><!></p>"),cv=K("<!> <!>",1);function uv(s,e){ye(e,!0);let t=B(e,"model",15),l=re(""),a=re("neutral"),o=re("");function c(p){try{const y=JSON.parse(p,Al);if(Array.isArray(y.v)&&(y.v=Float64Array.from(y.v)),!Object.keys(y).includes("class")||y.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");y.fileName=r(f),t(y),D(a,"success"),D(o,"")}catch(y){console.log(y),t(null),D(a,"error"),D(o,y,!0)}}function d(p){const y=new FileReader;y.onload=()=>{c(y.result)},y.readAsText(r(l))}function u(){D(l,""),t(null),D(a,"neutral"),D(o,"")}me(()=>{r(l)===null?(t(null),D(a,"neutral"),D(o,"")):(D(a,"neutral"),D(o,""))}),me(()=>{(t()===null||t()===0)&&D(l,"")});let f=w(()=>r(l)?r(l).name.replace(/\.[^/.]+$/,""):"");var v=cv(),h=J(v);{var m=p=>{var y=ov(),C=J(y);ln(C,()=>r(l),S=>{fe(S,{name:"file-selector",children:(I,j)=>{js(I,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return r(l)},set file(N){D(l,N,!0)}})},$$slots:{default:!0}})});var E=L(C,2);{var k=S=>{fe(S,{name:"load-button",label:" ",children:(I,j)=>{tt(I,{onclick:d,text:"Load"})},$$slots:{default:!0}})};Y(E,S=>{r(l)&&S(k)})}M(p,y)},g=p=>{av(p,{get model(){return t()},reset:u})};Y(h,p=>{t()?p(g,!1):p(m)})}var b=L(h,2);{var _=p=>{fe(p,{name:"error",status:"error",children:(y,C)=>{var E=iv(),k=q(E);pt(k,()=>r(o)),M(y,E)},$$slots:{default:!0}})};Y(b,p=>{(r(a)==="error"||r(o))&&p(_)})}M(s,v),xe()}var fv=K('<p class="title"> </p>'),dv=K("<!>&nbsp;",1),vv=K("<!> <!>",1),mv=K('<div class="method-open svelte-10os93"><!> <!> <!></div>'),hv=K('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function Mn(s,e){ye(e,!0);let t=B(e,"cancel",3,null);var l=_e(),a=J(l);{var o=d=>{var u=mv(),f=q(u);fe(f,{children:(m,g)=>{var b=fv(),_=q(b);ae(()=>be(_,e.title)),M(m,b)},$$slots:{default:!0}});var v=L(f,2);jr(v,()=>e.children);var h=L(v,2);fe(h,{label:" ",children:(m,g)=>{var b=vv(),_=J(b);{var p=C=>{var E=dv(),k=J(E);tt(k,{text:"Cancel",get onclick(){return t()}}),M(C,E)};Y(_,C=>{t()&&C(p)})}var y=L(_,2);tt(y,{text:"Save",get onclick(){return e.apply}}),M(m,b)},$$slots:{default:!0}}),no(3,u,()=>ai,()=>({duration:10})),M(d,u)},c=d=>{fe(d,{children:(u,f)=>{var v=hv(),h=J(v),m=q(h),g=L(m);g.__click=()=>e.open(e.pos);var b=q(g),_=L(h,2);ef(_,{onclick:()=>e.moveUp(e.pos)});var p=L(_,2);tf(p,{onclick:()=>e.moveDown(e.pos)});var y=L(p,2);gr(y,{onclick:()=>e.remove(e.pos)}),ae(()=>{be(m,`${e.title??""} `),be(b,e.settings)}),M(u,v)},$$slots:{default:!0}})};Y(a,d=>{e.isOpen?d(o):d(c,!1)})}M(s,l),xe()}at(["click"]);var gv=K("<!> <!>",1);function pv(s,e){ye(e,!0);let t=B(e,"params",31,()=>qe([0,0])),l=B(e,"varind",15),a=B(e,"settings",15),o=B(e,"nvars",3,0),c=on(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const d={snv:0,area:1,length:2,var:3},u=Object.keys(d);let f=re(qe(u[t()[0]])),v=re(t()[1]+1);const h="Normalization";me(()=>{a(r(f)+(r(f)==="var"?" #"+r(v):""))}),me(()=>{r(f)==="var"?l(l()[0]=t()[1]>0?t()[1]:1,!0):l(l()[0]=-1,!0)}),me(()=>{r(f)==="var"&&e.isOpen?l(l()[0]=t()[1],!0):l(l()[0]=-1,!0)}),me(()=>{r(f)&&t(t()[0]=d[r(f)],!0)}),me(()=>{r(v)&&t(t()[1]=r(v)-1,!0)}),Mn(s,Gt({id:"norm",title:h,get settings(){return a()},get isOpen(){return e.isOpen}},()=>c,{children:(m,g)=>{var b=gv(),_=J(b);fe(_,{label:"Type",children:(C,E)=>{We(C,{get options(){return u},get value(){return r(f)},set value(k){D(f,k,!0)}})},$$slots:{default:!0}});var p=L(_,2);{var y=C=>{fe(C,{label:"Variable index",children:(E,k)=>{pr(E,{min:1,get max(){return o()},step:1,get value(){return r(v)},set value(S){D(v,S,!0)}})},$$slots:{default:!0}})};Y(p,C=>{r(f)==="var"&&C(y)})}M(m,b)},$$slots:{default:!0}})),xe()}var bv=K("<!> <!> <!>",1);function _v(s,e){ye(e,!0);let t=B(e,"params",31,()=>qe([3,1,0])),l=B(e,"settings",15),a=on(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const o=w(()=>{if(!e.nvars)return 3;const f=Math.round(e.nvars*.25);return f>39?39:f%2<1?f+1:f}),c=w(()=>t()[1]<2?[0,1]:[0,1,2]),d=w(()=>t()[0]<5?[1,2]:[1,2,3]);me(()=>{t()[0]<5&&t()[1]>2&&t(t()[1]=2,!0)}),me(()=>{t()[2]>t()[1]&&t(t()[2]=t()[1],!0)}),me(()=>{l(t()[0]+", "+t()[1]+", "+t()[2])}),Mn(s,Gt({id:"savgol",title:"Savitzkiy-Golay",get settings(){return l()}},()=>a,{children:(f,v)=>{var h=bv(),m=J(h);fe(m,{label:"Width",children:(_,p)=>{pr(_,{min:3,get max(){return r(o)},step:2,get value(){return t()[0]},set value(y){t(t()[0]=y,!0)}})},$$slots:{default:!0}});var g=L(m,2);fe(g,{label:"Polynomial",children:(_,p)=>{We(_,{get options(){return r(d)},get value(){return t()[1]},set value(y){t(t()[1]=y,!0)}})},$$slots:{default:!0}});var b=L(g,2);fe(b,{label:"Derivative",children:(_,p)=>{We(_,{get options(){return r(c)},get value(){return t()[2]},set value(y){t(t()[2]=y,!0)}})},$$slots:{default:!0}}),M(f,h)},$$slots:{default:!0}})),xe()}var wv=K("<!> <!>",1);function yv(s,e){ye(e,!0);let t=B(e,"params",31,()=>qe([1,0]));B(e,"varind",27,()=>-1);let l=B(e,"settings",15);B(e,"nvars",3,0);let a=on(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},d=Object.keys(o),u=Object.keys(c);let f=re(qe(d[t()[0]])),v=re(qe(u[t()[1]]));const h="Scaling";me(()=>{l(r(f)+"/"+r(v))}),me(()=>{r(f)&&t(t()[0]=o[r(f)],!0)}),me(()=>{r(v)&&t(t()[1]=c[r(v)],!0)}),Mn(s,Gt({id:"scale",title:h,get settings(){return l()}},()=>a,{children:(m,g)=>{var b=wv(),_=J(b);fe(_,{label:"Center",children:(y,C)=>{We(y,{get options(){return d},get value(){return r(f)},set value(E){D(f,E,!0)}})},$$slots:{default:!0}});var p=L(_,2);fe(p,{label:"Scale",children:(y,C)=>{We(y,{get options(){return u},get value(){return r(v)},set value(E){D(v,E,!0)}})},$$slots:{default:!0}}),M(m,b)},$$slots:{default:!0}})),xe()}var xv=K("<!> <!> <!>",1),kv=K("<!> <!> <!>",1);function Ev(s,e){ye(e,!0);let t=B(e,"params",31,()=>qe([0,1,.1]));B(e,"varind",27,()=>-1);let l=B(e,"settings",15,"");B(e,"nvars",3,0);let a=on(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Baseline correction",c={emsc:0,als:1},d=Object.keys(c);function u(b){const _=Math.ceil(Math.log10(b));return Math.pow(10,_)}let f=re(qe(d[t()[0]])),v=re(qe(t()[2]>0?u(t()[2]).toString():"0.1")),h=w(()=>parseFloat(r(v))),m=w(()=>r(h)/10),g=w(()=>Math.ceil(-Math.log10(r(h)))+1);me(()=>{if(r(f)!=="als")return;const b=parseFloat(r(v));(t()[2]<r(m)||t()[2]>b-r(m))&&t(t()[2]=r(m),!0)}),me(()=>{l(r(f)+" ("+(r(f)=="emsc"?t()[1].toFixed(0):t()[1].toFixed(1)+","+t()[2].toFixed(3))+")")}),me(()=>{r(f)&&t(t()[0]=c[r(f)],!0)}),Mn(s,Gt({id:"scale",title:o,get settings(){return l()}},()=>a,{children:(b,_)=>{var p=kv(),y=J(p);fe(y,{label:"Type",children:(I,j)=>{We(I,{get options(){return d},get value(){return r(f)},set value(N){D(f,N,!0)}})},$$slots:{default:!0}});var C=L(y,2);{var E=I=>{var j=xv(),N=J(j);fe(N,{label:"Lambda",children:(P,R)=>{Nn(P,{min:1,max:7,step:.1,get value(){return t()[1]},set value(V){t(t()[1]=V,!0)}})},$$slots:{default:!0}});var A=L(N,2);fe(A,{label:"Penalty range",children:(P,R)=>{We(P,{options:["1","0.1","0.01"],get value(){return r(v)},set value(V){D(v,V,!0)}})},$$slots:{default:!0}});var T=L(A,2);fe(T,{label:"Penalty",children:(P,R)=>{{let V=w(()=>r(h)-r(m));Nn(P,{get min(){return r(m)},get max(){return r(V)},get step(){return r(m)},get decNum(){return r(g)},get value(){return t()[2]},set value(F){t(t()[2]=F,!0)}})}},$$slots:{default:!0}}),M(I,j)};Y(C,I=>{r(f)==="als"&&I(E)})}var k=L(C,2);{var S=I=>{fe(I,{label:"Polynomial",children:(j,N)=>{pr(j,{min:0,max:5,step:1,decNum:0,get value(){return t()[1]},set value(A){t(t()[1]=A,!0)}})},$$slots:{default:!0}})};Y(k,I=>{r(f)==="emsc"&&I(S)})}M(b,p)},$$slots:{default:!0}})),xe()}var Sv=K("<!> <!>",1);function Cv(s,e){ye(e,!0);let t=B(e,"params",15),l=B(e,"varind",15),a=B(e,"settings",15),o=on(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let d=re(!1);const u=w(()=>e.nvars?Math.round(e.nvars*.1):1);me(()=>{e.isOpen?((t()[0]===void 0||t()[0]===null||t()[0]<e.left||t()[0]>e.right-r(u))&&t(t()[0]=e.left,!0),(t()[1]===void 0||t()[1]===null||t()[1]>e.right||t()[1]<e.left+r(u))&&t(t()[1]=e.right,!0),l(l()[1]=t()[0],!0),l(l()[2]=t()[1],!0),D(d,!0)):(l(l()[1]=-1,!0),l(l()[2]=-1,!0),D(d,!1))}),me(()=>{a("left: "+t()[0]+" right: "+t()[1])}),Mn(s,Gt({id:"norm",title:c,get settings(){return a()},get isOpen(){return e.isOpen}},()=>o,{children:(f,v)=>{var h=_e(),m=J(h);{var g=b=>{var _=Sv(),p=J(_);fe(p,{label:"Left",children:(C,E)=>{{let k=w(()=>e.right-r(u));Nn(C,{get min(){return e.left},get max(){return r(k)},step:1,decNum:0,get value(){return t()[0]},set value(S){t(t()[0]=S,!0)}})}},$$slots:{default:!0}});var y=L(p,2);fe(y,{label:"Right",children:(C,E)=>{{let k=w(()=>e.left+r(u));Nn(C,{get min(){return r(k)},get max(){return e.right},step:1,decNum:0,get value(){return t()[1]},set value(S){t(t()[1]=S,!0)}})}},$$slots:{default:!0}}),M(b,_)};Y(m,b=>{r(d)&&b(g)})}M(f,h)},$$slots:{default:!0}})),xe()}var Nv=K("<!> <!>",1);function Av(s,e){ye(e,!0);let t=B(e,"params",31,()=>qe([3,5]));B(e,"varind",27,()=>-1);let l=B(e,"settings",15);B(e,"nvars",3,0);let a=on(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Spike removal";me(()=>{l(t()[0]+"/"+t()[1])}),Mn(s,Gt({id:"scale",title:o,get settings(){return l()}},()=>a,{children:(c,d)=>{var u=Nv(),f=J(u);fe(f,{label:"Window",children:(h,m)=>{pr(h,{min:3,max:15,step:2,get value(){return t()[0]},set value(g){t(t()[0]=g,!0)}})},$$slots:{default:!0}});var v=L(f,2);fe(v,{label:"Threshold",children:(h,m)=>{pr(h,{min:3,max:50,get value(){return t()[1]},set value(g){t(t()[1]=g,!0)}})},$$slots:{default:!0}}),M(c,u)},$$slots:{default:!0}})),xe()}var Tv=K("<h2>Selected methods</h2> <!>",1),Mv=K("<p>No methods selected</p>"),jv=K("<p> </p>"),Pv=K("<h2>Available methods</h2>"),Lv=K("<p>Maximum number of methods is selected.</p>"),Iv=K("<p> </p> <!>",1),Rv=K('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function zv(s,e){ye(e,!0);let t=B(e,"prepobj",31,()=>qe([])),l=B(e,"meta",15),a=B(e,"varind",31,()=>-1),o=B(e,"rawdataShort",15),c=B(e,"prepdataShort",15),d=B(e,"prepmodel",3,null),u=B(e,"reset",3,null),f=B(e,"finalize",3,null);const v=30,h=8,m={savgol:_v,norm:pv,scale:yv,baseline:Ev,trim:Cv,spikes:Av};let g=re("neutral"),b=re(""),_=re(void 0),p=re(""),y=re(qe([])),C=re(!1),E=re(qe([])),k=re(qe([]));l(new Array(h).fill(""));const S=w(()=>e.rawdata.values.ncols-e.rawdata.nresp);let I=qe(e.rawdata.values.nrows<3?Object.keys(m).filter(ie=>ie!=="scale"):Object.keys(m));N(),t().length!==0&&j();async function j(){t().length!==0&&D(_,e.WASM().then(ie=>{D(g,"applying");const oe=Io(ie,o().values,0,t(),!0,[]),le=El(ie,o().values,0,oe,!0);c(Wl(o(),le)),D(g,"success")}).catch(ie=>{c(Wl(o())),console.error(ie),D(g,"error"),D(b,ie,!0)}),!0)}function N(){const ie=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!t()||t().length<1){e.setLeft(0),e.setRight(ie),D(E,[],!0),D(k,[],!0);return}let oe=[],le=[],pe=0,Ne=ie;for(let he of t())he.id==="trim"?(oe.push(pe),le.push(Ne),he.params[0]<pe&&(he.params[0]=pe),he.params[1]>Ne&&(he.params[1]=Ne),pe=he.params[0]>pe?he.params[0]:pe,Ne=he.params[1]>0&&he.params[1]<Ne?he.params[1]:Ne):(oe.push(pe),le.push(Ne));D(E,oe,!0),D(k,le,!0),e.setLeft(pe),e.setRight(Ne)}function A(ie){const oe=Vr.find(le=>le.id===ie);oe&&(r(E).push(e.left),r(k).push(e.right),t().push({id:oe.id,params:oe.mp}),D(C,!0),D(p,t().length-1))}function T(){t().length<1||(r(E).pop(),r(k).pop(),t().pop(),D(C,!1),D(p,-1))}function P(ie){if(ie<=0)return;const oe=t()[ie],le=t()[ie-1];t(t()[ie-1]=oe,!0),t(t()[ie]=le,!0),O()}function R(ie){if(ie<0||ie===t().length-1)return;const oe=t()[ie],le=t()[ie+1];t(t()[ie+1]=oe,!0),t(t()[ie]=le,!0),O()}function V(ie){ie<0||ie>=t().length||(t(t().filter((oe,le)=>le!==ie)),O())}function F(ie){D(p,ie,!0)}function z(){D(p,null)}function O(){D(g,"neutral"),D(b,""),D(C,!1),D(p,null),d()&&u()(),N(),j(),a(a()[1]=-1,!0),a(a()[2]=-1,!0)}me(()=>{e.rawdata&&!o()&&o(tv(e.rawdata,v))}),me(()=>{o()&&!c()&&c(Wl(o()))}),me(()=>{(!t()||t().length===0)&&(D(y,[],!0),c(null),D(E,[],!0),D(k,[],!0),D(p,""),l(new Array(h).fill("")))});var H=Rv(),W=J(H);let Q;var ee=q(W);fe(ee,{label:"",children:(ie,oe)=>{var le=Tv(),pe=L(J(le),2);{var Ne=he=>{Bo(he,{text:"edit",get onclick(){return u()}})};Y(pe,he=>{d()&&u()&&he(Ne)})}M(ie,le)},$$slots:{default:!0}});var G=L(ee,2);{var Z=ie=>{fe(ie,{label:"",children:(oe,le)=>{var pe=Mv();M(oe,pe)},$$slots:{default:!0}})},se=ie=>{var oe=_e(),le=J(oe);Ye(le,17,t,Ge,(pe,Ne,he)=>{const ze=w(()=>m[r(Ne).id]);var Re=_e(),Fe=J(Re);{var X=ne=>{var ce=_e(),de=J(ce);{let Se=w(()=>he===r(p)),Oe=w(()=>r(C)?T:null);Vn(de,()=>r(ze),(De,Ve)=>{Ve(De,{get isOpen(){return r(Se)},get left(){return r(E)[he]},get right(){return r(k)[he]},pos:he,get nvars(){return r(S)},moveUp:P,moveDown:R,apply:O,open:F,close:z,remove:V,get cancel(){return r(Oe)},get params(){return r(Ne).params},set params(Ue){r(Ne).params=Ue},get varind(){return a()},set varind(Ue){a(Ue)},get settings(){return l()[he]},set settings(Ue){l(l()[he]=Ue,!0)}})})}M(ne,ce)},$=ne=>{var ce=_e(),de=J(ce);{let Se=w(()=>he===r(p)),Oe=w(()=>r(C)?T:null);Vn(de,()=>r(ze),(De,Ve)=>{Ve(De,{pos:he,get isOpen(){return r(Se)},get left(){return r(E)[he]},get right(){return r(k)[he]},get nvars(){return r(S)},moveUp:P,moveDown:R,apply:O,open:F,close:z,remove:V,get cancel(){return r(Oe)},get params(){return r(Ne).params},set params(Ue){r(Ne).params=Ue},get settings(){return l()[he]},set settings(Ue){l(l()[he]=Ue,!0)}})})}M(ne,ce)};Y(Fe,ne=>{r(Ne).id==="norm"||r(Ne).id==="trim"?ne(X):ne($,!1)})}M(pe,Re)}),M(ie,oe)};Y(G,ie=>{t().length===0?ie(Z):ie(se,!1)})}var te=L(G,2);{var ue=ie=>{fe(ie,{status:"error",children:(oe,le)=>{var pe=jv(),Ne=q(pe);ae(()=>be(Ne,r(b))),M(oe,pe)},$$slots:{default:!0}})};Y(te,ie=>{(r(g)==="error"||r(b))&&ie(ue)})}var ve=L(W,2),Te=q(ve);{var je=ie=>{fe(ie,{label:" ",children:(oe,le)=>{tt(oe,{get onclick(){return f()},text:"Finalize"})},$$slots:{default:!0}})};Y(Te,ie=>{!d()&&!r(p)&&t().length>0&&ie(je)})}var ke=L(ve,2),ge=q(ke);fe(ge,{label:"",children:(ie,oe)=>{var le=Pv();M(ie,le)},$$slots:{default:!0}});var Ce=L(ge,2);{var Ee=ie=>{fe(ie,{label:"",children:(oe,le)=>{var pe=Lv();M(oe,pe)},$$slots:{default:!0}})},Pe=ie=>{var oe=_e(),le=J(oe);Ye(le,17,()=>I,Ge,(pe,Ne)=>{const he=w(()=>Vr.find(ze=>ze.id===r(Ne)));fe(pe,{children:(ze,Re)=>{var Fe=Iv(),X=J(Fe),$=q(X),ne=L(X,2);$u(ne,{onclick:()=>A(r(he).id)}),ae(()=>be($,r(he).title)),M(ze,Fe)},$$slots:{default:!0}})}),M(ie,oe)};Y(Ce,ie=>{t().length>=h?ie(Ee):ie(Pe,!1)})}ae(()=>Q=ct(W,1,"selected-methods-list svelte-9cg1zq",null,Q,{final:d()!==null&&d()!==void 0})),M(s,H),xe()}var qv=K("<!> <!>",1),Fv=K("<!> <!>",1),Ov=K("<!> <!>",1),Dv=K("<!> <!> <!> <!> <!> <!> <!> <!>",1),Bv=K("<h2>Plot settings</h2>"),Vv=K('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),Yv=K('<div class="plot-panel svelte-5p9gcx"><!></div>');function Wv(s,e){ye(e,!0);let t=re(!0),l=re("none"),a=re(!1);const o=w(()=>(r(t)?"Preprocessed":"Raw")+" data (selected rows)"),c=w(()=>r(t)&&e.prepdata?e.prepdata:e.rawdata),d=w(()=>r(c)?r(c).varaxisLabel:"Variables"),u=w(()=>e.rawdata.varaxisUnits),f=w(()=>e.left>=0||e.right>0&&e.right<r(c).values.nrows),v=w(()=>e.left>=0?e.left+1:1),h=w(()=>e.right>0&&e.right<r(c).values.nrows?e.right:r(c).values.nrows),m=w(()=>r(t)&&r(c)&&r(f)?Xe.seq(r(v),r(h)):null),g=w(()=>r(m)?r(c).varvalues.filter((N,A)=>A>=r(v)-1&&A<r(h)):r(c).varvalues),b=w(()=>r(m)?r(c).values.subset(r(m),null):r(c).values),_=w(()=>r(b)?hs(r(b).v):null),p=w(()=>r(_)?(r(_)[1]-r(_)[0])*.05:null),y=w(()=>r(_)?[r(_)[0],r(_)[1]+(r(l)!=="none")*r(p)]:[0,1]),C=w(()=>r(c)?hs(r(c).varvalues,r(a)?.005:.1):[0,1]),E=w(()=>r(a)&&r(f)?[r(c).varvalues[r(v)-1],r(c).varvalues[r(h)-1]]:r(C)),k=w(()=>{if(!e.rawdata)return null;const N={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const A=Ps(e.rawdata.classNames.length);N.groups={colors:e.rawdata.classes.map(T=>A[e.rawdata.classNames.findIndex(P=>P===T)]),breaks:ir(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:A}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const A=uo(e.rawdata.resp,8),T=Ps(A.length-1);N.response={colors:fi(e.rawdata.resp.v,A.v,T),labels:null,breaks:A,map:T}}return N});me(()=>{(e.left<1||e.right<1||e.right>=e.left)&&D(a,!1)});var S=Yv(),I=q(S);{var j=N=>{var A=Vv(),T=J(A),P=q(T),R=q(P);ei(R,{get title(){return r(o)},get limY(){return r(y)},get limX(){return r(E)},fileName:"plot-preprocessed",children:(ee,G)=>{var Z=Dv(),se=J(Z);{var te=le=>{li(le,{get xValues(){return r(g)},get yValues(){return r(b)}})},ue=le=>{var pe=_e(),Ne=J(pe);Ye(Ne,17,()=>r(k)[r(l)].colors,Ge,(he,ze,Re)=>{{let Fe=w(()=>r(b).getcolumn(Re+1));Bt(he,{get xValues(){return r(g)},get yValues(){return r(Fe)},get lineColor(){return r(ze)}})}}),M(le,pe)};Y(se,le=>{r(l)==="none"?le(te):le(ue,!1)})}var ve=L(se,2);{var Te=le=>{const pe=w(()=>r(c).varvalues[e.varind[0]]);var Ne=qv(),he=J(Ne);{let Re=w(()=>[r(pe),r(pe)]);Bt(he,{get xValues(){return r(Re)},get yValues(){return r(y)},lineColor:"#00000060"})}var ze=L(he,2);{let Re=w(()=>[r(pe)]),Fe=w(()=>[r(y)[1]-r(p)*(r(l)==="none"?1:2)]),X=w(()=>Yr(r(pe).toFixed(2)+" "+r(u)));Ls(ze,{get xValues(){return r(Re)},get yValues(){return r(Fe)},get labels(){return r(X)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(le,Ne)};Y(ve,le=>{e.varind&&e.varind[0]>0&&le(Te)})}var je=L(ve,2);{var ke=le=>{const pe=w(()=>r(c).varvalues[e.varind[1]]);var Ne=Fv(),he=J(Ne);{let Re=w(()=>[r(E)[0]]),Fe=w(()=>[r(c).varvalues[e.varind[1]]-r(E)[0]]),X=w(()=>[r(y)[1]]),$=w(()=>[r(y)[1]-r(y)[0]]);Kn(he,{get left(){return r(Re)},get width(){return r(Fe)},get top(){return r(X)},get height(){return r($)},lineColor:"transparent",faceColor:"#00000040"})}var ze=L(he,2);{let Re=w(()=>[r(pe)]),Fe=w(()=>[r(y)[1]-r(p)*(r(l)==="none"?1:2)]),X=w(()=>Yr(r(pe).toFixed(2)+" "+r(u)));Ls(ze,{get xValues(){return r(Re)},get yValues(){return r(Fe)},get labels(){return r(X)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(le,Ne)};Y(je,le=>{e.varind&&e.varind[1]>0&&le(ke)})}var ge=L(je,2);{var Ce=le=>{const pe=w(()=>r(c).varvalues[e.varind[2]-1]);var Ne=Ov(),he=J(Ne);{let Re=w(()=>[r(c).varvalues[e.varind[2]-1]]),Fe=w(()=>[r(E)[1]-r(c).varvalues[e.varind[2]-1]]),X=w(()=>[r(y)[1]]),$=w(()=>[r(y)[1]-r(y)[0]]);Kn(he,{get left(){return r(Re)},get width(){return r(Fe)},get top(){return r(X)},get height(){return r($)},lineColor:"transparent",faceColor:"#00000040"})}var ze=L(he,2);{let Re=w(()=>[r(pe)]),Fe=w(()=>[r(y)[1]-r(p)*(r(l)==="none"?1:2)]),X=w(()=>Yr(r(pe).toFixed(2)+" "+r(u)));Ls(ze,{get xValues(){return r(Re)},get yValues(){return r(Fe)},get labels(){return r(X)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(le,Ne)};Y(ge,le=>{e.varind&&e.varind[2]<r(c).varvalues.length&&e.varind[2]>0&&le(Ce)})}var Ee=L(ge,2);{let le=w(()=>r(l)!=="none");Is(Ee,{get show(){return r(le)},get labels(){return r(k)[r(l)].labels},get breaks(){return r(k)[r(l)].breaks},get colmap(){return r(k)[r(l)].map}})}var Pe=L(Ee,2);ti(Pe,{get label(){return r(d)},showGrid:!0});var ie=L(Pe,2);ri(ie,{showGrid:!0});var oe=L(ie,2);ni(oe,{}),M(ee,Z)},$$slots:{default:!0}});var V=L(T,2),F=q(V);fe(F,{label:"",children:(ee,G)=>{var Z=Bv();M(ee,Z)},$$slots:{default:!0}});var z=L(F,2);fe(z,{label:"Show",children:(ee,G)=>{Jt(ee,{options:["raw","preprocessed"],get value(){return r(t)},set value(Z){D(t,Z,!0)}})},$$slots:{default:!0}});var O=L(z,2);{var H=ee=>{fe(ee,{label:"Color by",children:(G,Z)=>{{let se=w(()=>Object.keys(r(k)));We(G,{get options(){return r(se)},get value(){return r(l)},set value(te){D(l,te,!0)}})}},$$slots:{default:!0}})};Y(O,ee=>{Object.keys(r(k)).length>1&&ee(H)})}var W=L(O,2);{var Q=ee=>{fe(ee,{label:"Zoom (x-axis)",children:(G,Z)=>{Jt(G,{options:["off","on"],get value(){return r(a)},set value(se){D(a,se,!0)}})},$$slots:{default:!0}})};Y(W,ee=>{e.left>0&&e.right>e.left&&ee(Q)})}M(N,A)};Y(I,N=>{r(g)&&r(b)&&N(j)})}M(s,S),xe()}var Uv=K('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function Hv(s,e){ye(e,!0);let t=B(e,"left",15),l=B(e,"right",15),a=B(e,"prepobj",15),o=B(e,"meta",15),c=B(e,"finalize",3,null),d=re(qe([-1,0,0])),u=re(null),f=re(null);function v(E){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E>=0&&E<k&&E<l()&&t(E)}function h(E){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E<=k&&E>t()&&l(E)}var m=Uv(),g=q(m),b=q(g),_=q(b);zv(_,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return t()},get right(){return l()},setLeft:v,",":!0,setRight:h,get finalize(){return c()},get varind(){return r(d)},set varind(E){D(d,E,!0)},get prepobj(){return a()},set prepobj(E){a(E)},get rawdataShort(){return r(u)},set rawdataShort(E){D(u,E,!0)},get prepdataShort(){return r(f)},set prepdataShort(E){D(f,E,!0)},get meta(){return o()},set meta(E){o(E)}});var p=L(g,2),y=q(p);{var C=E=>{Wv(E,{get rawdata(){return r(u)},get prepdata(){return r(f)},get left(){return t()},get right(){return l()},get varind(){return r(d)}})};Y(y,E=>{r(u)&&E(C)})}M(s,m),xe()}var Gv=K('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),Xv=K("<!> <!> <!>",1),Kv=K('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),Jv=K("<!> <!> <!>",1),Zv=K("<p><strong>Preprocessing model</strong></p>"),Qv=K("<!> <!>",1),$v=K("<p> </p>"),e1=K('<div class="prep-widget"><!></div> <!> <!>',1);function t1(s,e){ye(e,!0);let t=B(e,"prepType",15),l=B(e,"prepobj",15),a=B(e,"prepdata",15),o=B(e,"prepmodel",15),c=B(e,"prepmeta",15),d=re(!1),u=re(0),f=re(qe(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),v=re("neutral"),h=re(""),m=re(void 0);async function g(R,V,F){!V||!R||V.length===0||D(m,e.WASM().then(z=>{D(v,"applying");const O=Io(z,R.values,R.nresp,V,!1,F);O.info=c(),o(O)}).catch(z=>{o(null),console.error(z),D(v,"error"),D(h,z,!0)}),!0)}async function b(R,V){if(!V||typeof V!="object"){a(null);return}if(Object.keys(V).length===0){a(R);return}D(m,e.WASM().then(F=>{D(v,"applying");const z=El(F,R.values,R.nresp,V,!1,!1),O=rv(rc(R),z);a(Ru(O,V))}).catch(F=>{a(null),console.error(F),D(v,"error"),D(h,F,!0)}),!0)}function _(){t(null),a(null),o(null),l([]),D(u,0),D(f,e.rawdata.values.ncols-e.rawdata.nresp)}function p(){l()&&l().length>0?g(e.rawdata,l(),e.outliers):(t(null),o(null)),D(d,!1)}function y(){t("create"),a(null),o(null),D(d,!0)}function C(){t("skip"),o({})}me(()=>{o(),e.rawdata&&b(e.rawdata,o())}),me(()=>{t()==="create"&&l()&&!o()&&g(e.rawdata,l(),e.outliers)}),me(()=>{t()==="skip"&&a()===null&&(o({}),l([]),a(e.rawdata))});var E=e1(),k=J(E),S=q(k);{var I=R=>{fe(R,{name:"info",children:(V,F)=>{var z=Xv(),O=J(z);{var H=G=>{var Z=Gv(),se=L(q(Z),2);Ul(se,{get prepmodel(){return o()}}),M(G,Z)};Y(O,G=>{r(d)||G(H)})}var W=L(O,2);{var Q=G=>{Bo(G,{onclick:y})};Y(W,G=>{t()==="create"&&G(Q)})}var ee=L(W,2);gr(ee,{onclick:_}),M(V,z)},$$slots:{default:!0}})},j=R=>{var V=_e(),F=J(V);{var z=H=>{fe(H,{name:"prep-info",children:(W,Q)=>{var ee=Kv(),G=L(J(ee),2),Z=q(G);gr(Z,{onclick:_}),M(W,ee)},$$slots:{default:!0}})},O=H=>{var W=_e(),Q=J(W);{var ee=Z=>{fe(Z,{label:"Preprocessing",name:"prep-container",children:(se,te)=>{var ue=Jv(),ve=J(ue);tt(ve,{text:"Skip",onclick:C});var Te=L(ve,2);tt(Te,{text:"Load",onclick:()=>t("file")});var je=L(Te,2);tt(je,{text:"Create",onclick:y}),M(se,ue)},$$slots:{default:!0}})},G=Z=>{var se=_e(),te=J(se);{var ue=ve=>{var Te=Qv(),je=J(Te);fe(je,{children:(ge,Ce)=>{var Ee=Zv();M(ge,Ee)},$$slots:{default:!0}});var ke=L(je,2);uv(ke,{get model(){return o()},set model(ge){o(ge)},get prepobj(){return l()},set prepobj(ge){l(ge)},get left(){return r(u)},set left(ge){D(u,ge,!0)},get right(){return r(f)},set right(ge){D(f,ge,!0)}}),M(ve,Te)};Y(te,ve=>{t()==="file"&&ve(ue)},!0)}M(Z,se)};Y(Q,Z=>{t()?Z(G,!1):Z(ee)},!0)}M(H,W)};Y(F,H=>{t()==="skip"?H(z):H(O,!1)},!0)}M(R,V)};Y(S,R=>{o()&&a()&&o().ml?R(I):R(j,!1)})}var N=L(k,2);{var A=R=>{Bl(R,{closeModal:p,isDark:!0,children:(V,F)=>{Hv(V,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:p,get prepobj(){return l()},set prepobj(z){l(z)},get left(){return r(u)},set left(z){D(u,z,!0)},get right(){return r(f)},set right(z){D(f,z,!0)},get meta(){return c()},set meta(z){c(z)}})},$$slots:{default:!0}})};Y(N,R=>{r(d)&&R(A)})}var T=L(N,2);{var P=R=>{fe(R,{status:"error",children:(V,F)=>{var z=$v(),O=q(z);ae(()=>be(O,r(h))),M(V,z)},$$slots:{default:!0}})};Y(T,R=>{(r(v)==="error"||r(h))&&R(P)})}M(s,E),xe()}var r1=K('<span style="font-weight:bold"> </span><br/>',1),n1=K('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),s1=K('<span class="file-size svelte-1uxd0r7"> </span>'),l1=K('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function a1(s,e){ye(e,!0);let t=B(e,"title",3,"");var l=_e(),a=J(l);{var o=c=>{fe(c,{children:(d,u)=>{var f=l1(),v=J(f),h=q(v);{var m=E=>{var k=r1(),S=J(k),I=q(S);ae(()=>be(I,t())),M(E,k)};Y(h,E=>{t()&&t()!==""&&E(m)})}var g=L(h,4),b=q(g),_=L(g,5);{var p=E=>{var k=n1(),S=J(k),I=q(S),j=L(S,4),N=q(j);ae(()=>{be(I,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),be(N,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),M(E,k)},y=E=>{var k=s1(),S=q(k);ae(()=>be(S,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),M(E,k)};Y(_,E=>{e.dataset.nresp&&e.dataset.nresp>0?E(p):E(y,!1)})}var C=L(v,2);gr(C,{get onclick(){return e.reset}}),ae(()=>{U(g,"title",e.dataset.fileName),be(b,e.dataset.fileName)}),M(d,f)},$$slots:{default:!0}})};Y(a,c=>{e.dataset&&c(o)})}M(s,l),xe()}var o1=K("<!> <!>",1),i1=K("<!> <!> <!> <!> <!> <!>",1),c1=K("<!> <!>",1),u1=K("<p> </p>"),f1=K("<!> <p> </p>",1),d1=K("<p> </p>"),v1=K("<!> <!> <!>",1);function Hl(s,e){ye(e,!0);let t=B(e,"model",3,null),l=B(e,"outliers",19,()=>[]),a=B(e,"className",3,"Class"),o=B(e,"classMandatory",3,!1),c=B(e,"classUnique",3,!1),d=B(e,"title",3,""),u=B(e,"dataset",15),f=B(e,"resobj",15),v=B(e,"csvOnly",3,!0);const h=[",",";"],m=w(()=>t()?["no","yes"]:["no","labels","values"]);let g=re(void 0),b=re(""),_=re(""),p=re(","),y=re("no"),C=re(!1),E=re(!1),k=re(null),S=re("neutral"),I=re("");function j(te){D(S,"error"),D(I,te,!0),console.error(te)}function N(){D(S,"neural"),D(I,"")}function A(){D(S,"success"),D(I,"")}function T(te,ue,ve){D(k,e.WASM().then(Te=>{f(Nl(Te,te,ue,ve,!0)),A()}).catch(Te=>{f(null),j(Te)}),!0)}function P(te,ue){if(!te||te.size<10)return;const Te=te.slice(0,1e5),je=new FileReader;je.onload=()=>{const ke=je.result;!ke||ke.length<0||((ge=>{var Ce=Bs(ge,4);D(p,Ce[0],!0),D(C,Ce[1],!0),D(E,Ce[2],!0),D(y,Ce[3],!0)})(Vu(ke)),D(E,o()||r(E),!0),ue&&r(y)!=="no"&&D(y,"yes"))},je.onerror=function(ke){csvString=null,D(S,"error"),D(I,ke,!0),console.error("Error reading CSV file.",ke)},je.readAsText(Te)}function R(te){try{const ue=Ou(te,r(p),r(y)==="yes"?"labels":r(y),r(C),r(E),r(b),r(_));if(ue.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const ve=t()?t().prep&&Object.keys(t().prep).length>0?t().prep.npred:t().ncols+t().exclvars.length:0;if(t()&&ue.values.ncols!==ve)throw new Error("Dataset has different number of columns than the training set.");if(ue.classNames.length>ue.values.nrows/2)throw new Error("Dataset has too many unique "+a().toLowerCase()+" labels ("+ue.classNames.length+"), check your CSV file.");if(o()&&ue.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&ue.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");ue.fileName=r(g).name.replace(/\.[^/.]+$/,""),t()&&(ue.varrev=t().varrev,ue.header=t().header,ue.varlabels=t().varlabels,ue.varvalues=t().varvalues,ue.varvaluesName=t().varvaluesName,ue.varvaluesUnits=t().varvaluesUnits),u(ue),A()}catch(ue){u(null),j(ue)}}function V(te){const ue=new FileReader;ue.onload=()=>{R(ue.result)},ue.readAsText(r(g))}async function F(te){try{const ue=r(g)instanceof FileList?r(g):[r(g)];u(await Xu(ue)),A()}catch(ue){j("Failed to read SPC file: "+ue)}}function z(){D(g,""),u(null),f(null),D(b,""),D(_,""),N()}me(()=>{if(!(r(g)===0||r(g)===void 0||u())){if(r(g)===null||r(g)===""){z();return}if(Array.isArray(r(g))){if(r(g).filter(te=>te.slice(-4)===".spc").length!==r(g).length){j("Multiple file selection is allowed only for SPC files.");return}F(r(g));return}r(g)&&(r(g).type==="text/csv"||r(g).type==="application/vnd.ms-excel")?(P(r(g),t()),N()):F([r(g)])}}),me(()=>{r(p)&&N()}),me(()=>{if(u()&&t()&&!f()&&!r(I))try{f(T(t(),u(),l())),A()}catch(te){u(null),f(null),j(te)}});var O=v1(),H=J(O);{var W=te=>{var ue=c1(),ve=J(ue);ln(ve,()=>r(g)===void 0,ke=>{fe(ke,{children:(ge,Ce)=>{var Ee=_e(),Pe=J(Ee);{var ie=le=>{js(le,{id:"dataFile",message:"Select CSV file with dataset",get file(){return r(g)},set file(pe){D(g,pe,!0)}})},oe=le=>{js(le,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return r(g)},set file(pe){D(g,pe,!0)}})};Y(Pe,le=>{v()?le(ie):le(oe,!1)})}M(ge,Ee)},$$slots:{default:!0}})});var Te=L(ve,2);{var je=ke=>{var ge=i1(),Ce=J(ge);fe(Ce,{label:"Delimiter",children:(he,ze)=>{We(he,{id:"sep",get options(){return h},get value(){return r(p)},set value(Re){D(p,Re,!0)}})},$$slots:{default:!0}});var Ee=L(Ce,2);fe(Ee,{label:"Row labels",children:(he,ze)=>{Jt(he,{id:"hasLabels",options:["no","yes"],get value(){return r(C)},set value(Re){D(C,Re,!0)}})},$$slots:{default:!0}});var Pe=L(Ee,2);{var ie=he=>{fe(he,{get label(){return`${a()??""} labels`},children:(ze,Re)=>{Jt(ze,{id:"hasLabels",options:["no","yes"],get value(){return r(E)},set value(Fe){D(E,Fe,!0)}})},$$slots:{default:!0}})};Y(Pe,he=>{o()||he(ie)})}var oe=L(Pe,2);fe(oe,{label:"Header",children:(he,ze)=>{We(he,{id:"header",get options(){return r(m)},get value(){return r(y)},set value(Re){D(y,Re,!0)}})},$$slots:{default:!0}});var le=L(oe,2);{var pe=he=>{var ze=o1(),Re=J(ze);fe(Re,{label:"Header name",children:(X,$)=>{Vo(X,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return r(b)},set value(ne){D(b,ne,!0)}})},$$slots:{default:!0}});var Fe=L(Re,2);fe(Fe,{label:"Header units",children:(X,$)=>{Vo(X,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return r(_)},set value(ne){D(_,ne,!0)}})},$$slots:{default:!0}}),M(he,ze)};Y(le,he=>{r(y)==="values"&&he(pe)})}var Ne=L(le,2);fe(Ne,{label:" ",children:(he,ze)=>{tt(he,{text:"Load",onclick:V})},$$slots:{default:!0}}),M(ke,ge)};Y(Te,ke=>{r(g)&&!Array.isArray(r(g))&&(r(g).type==="text/csv"||r(g).type==="application/vnd.ms-excel")&&ke(je)})}M(te,ue)},Q=te=>{var ue=_e(),ve=J(ue);{var Te=je=>{var ke=_e(),ge=J(ke);ll(ge,()=>r(k),Ce=>{fe(Ce,{children:(Ee,Pe)=>{var ie=f1(),oe=J(ie);Ml(oe);var le=L(oe,2),pe=q(le);ae(()=>be(pe,t()?"Loading data and apply model...":"Loading data...")),M(Ee,ie)},$$slots:{default:!0}})},void 0,(Ce,Ee)=>{fe(Ce,{status:"error",children:(Pe,ie)=>{var oe=u1(),le=q(oe);ae(()=>be(le,r(Ee))),M(Pe,oe)},$$slots:{default:!0}})}),M(je,ke)};Y(ve,je=>{r(k)&&je(Te)})}M(te,ue)};Y(H,te=>{u()?te(Q,!1):te(W)})}var ee=L(H,2);{var G=te=>{a1(te,{get dataset(){return u()},reset:z,get title(){return d()}})};Y(ee,te=>{u()&&te(G)})}var Z=L(ee,2);{var se=te=>{fe(te,{status:"error",children:(ue,ve)=>{var Te=d1(),je=q(Te);ae(()=>be(je,r(I))),M(ue,Te)},$$slots:{default:!0}})};Y(Z,te=>{(r(S)==="error"||r(I))&&te(se)})}M(s,O),xe()}var m1=K("<!> <!> <!> <!>",1),h1=K("<p> </p>"),g1=K("<!> <p>Computing global model...</p>",1),p1=K('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),b1=K('<div class="buttons"><!> <!></div>'),_1=K("<!> <!>",1),w1=K("<p> </p>"),y1=K("<!> <!> <!> <!>",1);function x1(s,e){ye(e,!0);let t=B(e,"outliers",19,()=>[]),l=B(e,"resobj",15),a=B(e,"model",15),o=B(e,"downloadModel",3,null),c=B(e,"downloadResults",3,null),d=re("neutral"),u=re(""),f=re(1),v=re(!0),h=re(!1),m=re(void 0);async function g(T,P,R,V){D(m,e.WASM().then(F=>{D(d,"computing");const z=Mu(F,T.values,P,R,V,t());z.hash=As(),z.exclvars=[],z.varlabels=T.varlabels,z.varindices=T.varindices,z.varvalues=T.varvalues,z.varvaluesName=T.varvaluesName,z.varvaluesUnits=T.varvaluesUnits,z.varrev=T.varrev,z.prep=[];const O=Nl(F,z,T,t());a(z),l(O),D(d,"success")}).catch(F=>{console.error(F),a(null),D(d,"error"),D(u,F,!0)}),!0)}function b(T){D(d,"neutral"),D(u,null),g(e.dataset,r(f),r(v),r(h))}function _(){D(d,"neutral"),D(m,null),l(null),a(null),D(u,null)}let p=w(()=>e.dataset?Math.min(e.dataset.values.nrows-2-t().length,e.dataset.values.ncols-1,50):null);me(()=>{e.dataset===null&&_()}),me(()=>{D(f,r(p)?Math.min(r(p),20):null,!0)});var y=y1(),C=J(y);{var E=T=>{var P=m1(),R=J(P);fe(R,{name:"ncomp",label:"# of PCs",children:(O,H)=>{Nn(O,{id:"ncomp",min:1,get max(){return r(p)},step:1,decNum:0,get value(){return r(f)},set value(W){D(f,W,!0)}})},$$slots:{default:!0}});var V=L(R,2);fe(V,{name:"center",label:"Center",children:(O,H)=>{Jt(O,{id:"center",options:["no","yes"],get value(){return r(v)},set value(W){D(v,W,!0)}})},$$slots:{default:!0}});var F=L(V,2);fe(F,{name:"scale",label:"Scale",children:(O,H)=>{Jt(O,{id:"scale",options:["no","yes"],get value(){return r(h)},set value(W){D(h,W,!0)}})},$$slots:{default:!0}});var z=L(F,2);fe(z,{name:"create-model",label:" ",children:(O,H)=>{tt(O,{onclick:b,text:"Create model"})},$$slots:{default:!0}}),M(T,P)};Y(C,T=>{e.dataset&&!a()&&r(d)!=="computing"&&T(E)})}var k=L(C,2);{var S=T=>{var P=_e(),R=J(P);ll(R,()=>r(m),V=>{fe(V,{name:"spinner",children:(F,z)=>{var O=g1(),H=J(O);Ml(H),M(F,O)},$$slots:{default:!0}})},void 0,(V,F)=>{fe(V,{name:"error",status:"error",children:(z,O)=>{var H=h1(),W=q(H);ae(()=>be(W,r(F))),M(z,H)},$$slots:{default:!0}})}),M(T,P)};Y(k,T=>{r(m)&&T(S)})}var I=L(k,2);{var j=T=>{var P=_1(),R=J(P);fe(R,{name:"info",children:(z,O)=>{var H=p1(),W=J(H),Q=L(q(W)),ee=L(W,2);gr(ee,{onclick:_}),ae(()=>be(Q,` ${a().ncomp??""} PCs${a().center?", centered":""}${a().scale?", scaled":""}`)),M(z,H)},$$slots:{default:!0}});var V=L(R,2);{var F=z=>{fe(z,{name:"download-buttons",label:"Download",children:(O,H)=>{var W=b1(),Q=q(W);tt(Q,{onclick:()=>c()(l(),e.dataset,"train",t(),a()),text:"Results"});var ee=L(Q,2);tt(ee,{onclick:()=>o()(a()),text:"Model"}),M(O,W)},$$slots:{default:!0}})};Y(V,z=>{o()&&c()&&z(F)})}M(T,P)};Y(I,T=>{a()&&T(j)})}var N=L(I,2);{var A=T=>{fe(T,{name:"error",status:"error",children:(P,R)=>{var V=w1(),F=q(V);ae(()=>be(F,r(u))),M(P,V)},$$slots:{default:!0}})};Y(N,T=>{(r(d)==="error"||r(u))&&T(A)})}M(s,y),xe()}var k1=K("<!> <!> <!>",1),E1=K("<p> </p>"),S1=K("<!> <p>Computing PV-set...</p>",1),C1=K('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),N1=K("<p> </p>"),A1=K("<!> <!> <!> <!>",1);function T1(s,e){ye(e,!0);let t=B(e,"outliers",19,()=>[]),l=B(e,"pvset",15),a=B(e,"pvres",15),o=re("neutral"),c=re(""),d=re(qe(["ven","rand","loo"])),u=re("ven"),f=re(void 0),v=e.calset.values.nrows-t().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(A=>A>=v/(v-e.model.ncomp-1)&&A<=v/2):[],m=re(qe(h.length>0?h[0]:0));me(()=>{h.length===0&&(D(d,["loo"],!0),D(u,"loo"))});async function g(A,T,P){D(f,e.WASM().then(R=>{const V=P.type=="loo"?0:P.type=="rand"?2:1,F=Pu(R,T,A.values,T.ncomp,P.nseg,V,0,t());l({classLabelsVarname:A.classLabelsVarname,classNames:A.classNames,dec:A.dec,fileName:A.fileName+"-pcv",hasClassNames:A.hasClassNames,hasLabels:A.hasLabels,header:A.header,labelsVarname:A.labelsVarname,classes:e.calres.classes,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:A.sep,values:F,varAxisTitle:A.varAxisTitle,varindices:T.varindices,varlabels:T.varlabels,varrev:T.varrev,varvalues:T.varvalues,varvaluesName:T.varvaluesName,varvaluesUnits:T.varvaluesUnits}),a(Nl(R,T,l(),[]))}).catch(R=>{console.error(R),l(null),a(null),D(o,"error"),D(c,R,!0)}),!0)}function b(A){D(o,"neutral"),D(c,""),g(e.calset,e.model,{type:r(u),nseg:r(m)})}function _(){D(o,"neutral"),D(c,""),D(f,null),l(null),a(null)}me(()=>{e.model===null&&_()});var p=A1(),y=J(p);{var C=A=>{var T=k1(),P=J(T);fe(P,{name:"split",label:"Split type:",children:(z,O)=>{We(z,{id:"cvType",get options(){return r(d)},get value(){return r(u)},set value(H){D(u,H,!0)}})},$$slots:{default:!0}});var R=L(P,2);{var V=z=>{fe(z,{name:"nseg",label:"Segments:",children:(O,H)=>{We(O,{id:"nseg",get options(){return h},get value(){return r(m)},set value(W){D(m,W,!0)}})},$$slots:{default:!0}})};Y(R,z=>{r(u)!=="loo"&&z(V)})}var F=L(R,2);fe(F,{name:"run-button",label:" ",children:(z,O)=>{tt(z,{onclick:b,text:"Compute PV-set"})},$$slots:{default:!0}}),M(A,T)};Y(y,A=>{e.model&&!l()&&r(o)!=="busy"&&A(C)})}var E=L(y,2);{var k=A=>{var T=_e(),P=J(T);ll(P,()=>r(f),R=>{fe(R,{name:"spinner",children:(V,F)=>{var z=S1(),O=J(z);Ml(O),M(V,z)},$$slots:{default:!0}})},void 0,(R,V)=>{fe(R,{name:"error",status:"error",children:(F,z)=>{var O=E1(),H=q(O);ae(()=>be(H,r(V))),M(F,O)},$$slots:{default:!0}})}),M(A,T)};Y(E,A=>{r(f)&&A(k)})}var S=L(E,2);{var I=A=>{fe(A,{name:"info",children:(T,P)=>{var R=C1(),V=J(R),F=L(q(V)),z=L(V,2);Qu(z,{onclick:()=>Wu(l(),e.calset.fileName+"-pv")});var O=L(z,2);gr(O,{onclick:_}),ae(()=>be(F,` ${l().values.nrows??""} × ${l().values.ncols??""}, ${r(u)??""}
      ${r(u)!=="loo"?r(m)+" seg":""}`)),M(T,R)},$$slots:{default:!0}})};Y(S,A=>{l()&&A(I)})}var j=L(S,2);{var N=A=>{fe(A,{name:"error",status:"error",children:(T,P)=>{var R=N1(),V=q(R);ae(()=>be(V,r(c))),M(T,R)},$$slots:{default:!0}})};Y(j,A=>{r(o)==="error"&&r(c)&&A(N)})}M(s,p),xe()}var M1=K('<tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (outliers)</td><td class="svelte-1fhdfcc"></td><td class="svelte-1fhdfcc"></td><td class="svelte-1fhdfcc"> </td></tr>'),j1=K('<table class="svelte-1fhdfcc"><thead><tr class="svelte-1fhdfcc"><th class="svelte-1fhdfcc"></th><th class="svelte-1fhdfcc">h</th><th class="svelte-1fhdfcc">q</th><th class="svelte-1fhdfcc">f</th></tr></thead><tbody><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">DoF (Nu)</td><td class="svelte-1fhdfcc"> </td><td class="svelte-1fhdfcc"> </td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Mean (u0)</td><td class="svelte-1fhdfcc"> </td><td class="svelte-1fhdfcc"> </td><td class="svelte-1fhdfcc"></td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (extreme)</td><td class="svelte-1fhdfcc"></td><td class="svelte-1fhdfcc"></td><td class="svelte-1fhdfcc"> </td></tr><!></tbody></table>');function Gl(s,e){ye(e,!0);let t=B(e,"isAlt",3,!1),l=w(()=>e.simca?e.simca.limType==="classic"?"c":"r":null),a=w(()=>e.model&&r(l)?et(e.model,r(l)+"Nh"):null),o=w(()=>e.model&&r(l)?et(e.model,r(l)+"Nq"):null),c=w(()=>e.model&&r(l)?et(e.model,r(l)+"h0"):null),d=w(()=>e.model&&r(l)?et(e.model,r(l)+"q0"):null),u=w(()=>e.simca?e.simca.ncomp:null);var f=_e(),v=J(f);{var h=m=>{var g=j1(),b=L(q(g)),_=q(b),p=L(q(_)),y=q(p),C=L(p),E=q(C),k=L(C),S=q(k),I=L(_),j=L(q(I)),N=q(j),A=L(j),T=q(A),P=L(I),R=L(q(P),3),V=q(R),F=L(P);{var z=O=>{var H=M1(),W=L(q(H),3),Q=q(W);ae(ee=>be(Q,ee),[()=>e.simca.oCrit[r(u)-1].toFixed(1)]),M(O,H)};Y(F,O=>{t()||O(z)})}ae((O,H,W)=>{be(y,r(a)[r(u)-1]),be(E,r(o)[r(u)-1]),be(S,r(a)[r(u)-1]+r(o)[r(u)-1]),be(N,O),be(T,H),be(V,W)},[()=>r(c)[r(u)-1].toFixed(3),()=>r(d)[r(u)-1].toFixed(r(d)[r(u)-1]>99?0:3),()=>e.simca.eCrit[r(u)-1].toFixed(1)]),M(m,g)};Y(v,m=>{e.model&&e.simca&&r(u)>0&&m(h)})}M(s,f),xe()}var P1=K('<p class="title"> </p>'),L1=K("<!> <!> <!> <!> <!>",1);function Xl(s,e){ye(e,!0);let t=B(e,"isAlt",3,!1),l=B(e,"simca",15),a=re(void 0),o=re(void 0);if(!l()&&e.model){const g="classic",b=et(e.model,"cNh"),_=et(e.model,"cNq"),p=b.map((S,I)=>S+_[I]),y=1-5/100,C=Math.pow(1-1/100,1/e.model.nrows),E=p.map(S=>xt(y,S)),k=p.map(S=>xt(C,S));D(a,5),D(o,1),l({ncomp:1,alpha:5,gamma:1,limType:g,Nf:p,eCrit:E,oCrit:k,className:e.className,hash:As()})}const c=[10,5,1,.1],d=[5,1,.1,.01];me(()=>{if(l().alpha&&r(a)!==l().alpha){const h=1-l().alpha/100;l(l().eCrit=l().Nf.map(m=>xt(h,m)),!0),D(a,l().alpha,!0)}if(l().gamma&&r(o)!==l().gamma){const h=Math.pow(1-l().gamma/100,1/e.model.nrows);l(l().oCrit=l().Nf.map(m=>xt(h,m)),!0),D(o,l().gamma,!0)}}),me(()=>{const h=l().limType.charAt(0),m=et(e.model,h+"Nh"),g=et(e.model,h+"Nq"),b=m.map((E,k)=>E+g[k]),_=1-l().alpha/100,p=Math.pow(1-l().gamma/100,1/e.model.nrows),y=b.map(E=>xt(_,E)),C=b.map(E=>xt(p,E));l(l().Nf=b,!0),l(l().eCrit=y,!0),l(l().oCrit=C,!0)});var u=_e(),f=J(u);{var v=h=>{var m=L1(),g=J(m);fe(g,{name:"target-class",label:"",children:(E,k)=>{var S=P1(),I=q(S);ae(()=>be(I,`Target class: ${l().className??""}`)),M(E,S)},$$slots:{default:!0}});var b=L(g,2);fe(b,{name:"ncomp",label:"# of PCs",children:(E,k)=>{Nn(E,{min:1,get max(){return e.model.ncomp},step:1,decNum:0,get value(){return l().ncomp},set value(S){l(l().ncomp=S,!0)}})},$$slots:{default:!0}});var _=L(b,2);fe(_,{name:"alpha",label:"Alpha, %:",children:(E,k)=>{We(E,{get options(){return c},get value(){return l().alpha},set value(S){l(l().alpha=S,!0)}})},$$slots:{default:!0}});var p=L(_,2);{var y=E=>{fe(E,{name:"gamma",label:"Gamma, %:",children:(k,S)=>{We(k,{get options(){return d},get value(){return l().gamma},set value(I){l(l().gamma=I,!0)}})},$$slots:{default:!0}})};Y(p,E=>{t()||E(y)})}var C=L(p,2);fe(C,{name:"limits",label:"Limits:",children:(E,k)=>{We(E,{options:["classic","robust"],get value(){return l().limType},set value(S){l(l().limType=S,!0)}})},$$slots:{default:!0}}),M(h,m)};Y(f,h=>{l()&&h(v)})}M(s,u),xe()}var I1=K('<table class="svelte-1bca91p"><thead><tr class="svelte-1bca91p"><th class="svelte-1bca91p"></th><th class="svelte-1bca91p">Cal</th><th class="svelte-1bca91p">PV</th></tr></thead><tbody><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Objects</td><td class="svelte-1bca91p"> </td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Extremes</td><td class="svelte-1bca91p"> </td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Outliers</td><td class="svelte-1bca91p"> </td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Sensitivity</td><td class="svelte-1bca91p"> </td><td class="svelte-1bca91p"> </td></tr></tbody></table>');function R1(s,e){ye(e,!0);let t=w(()=>e.calres?e.calres.v[0].rols.length:0);var l=_e(),a=J(l);{var o=c=>{var d=I1(),u=L(q(d)),f=q(u),v=L(q(f)),h=q(v),m=L(v),g=q(m),b=L(f),_=L(q(b)),p=q(_),y=L(_),C=q(y),E=L(b),k=L(q(E)),S=q(k),I=L(k),j=q(I),N=L(E),A=L(q(N)),T=q(A),P=L(A),R=q(P);ae((V,F)=>{be(h,r(t)),be(g,r(t)),be(p,e.calres.v[e.ncomp-1].rolsNum.extreme),be(C,e.pvres.v[e.ncomp-1].rolsNum.extreme),be(S,e.calres.v[e.ncomp-1].rolsNum.outlier),be(j,e.pvres.v[e.ncomp-1].rolsNum.outlier),be(T,V),be(R,F)},[()=>e.calres.stat.sensitivity[e.ncomp-1].toFixed(3),()=>e.pvres.stat.sensitivity[e.ncomp-1].toFixed(3)]),M(c,d)};Y(a,c=>{e.calres&&e.pvres&&c(o)})}M(s,l),xe()}var z1=K('<div class="msg-select"> </div>'),q1=K('<div class="msg-select"> </div>'),F1=K('<div class="msg-select"> </div>'),O1=K('<div class="msg-select"> </div>'),D1=K('<div class="selected-buttons svelte-188sk7n"><!></div>'),B1=K('<div class="selected-buttons svelte-188sk7n"><!></div>'),V1=K("<!> <!> <!>",1),Y1=K("<button> </button>"),W1=K('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Kl(s,e){ye(e,!0);let t=B(e,"selobjText",3,"Click to select an object..."),l=B(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),a=B(e,"clearText",3,"Click anywhere to remove selection..."),o=B(e,"params",15),c=qe({objects:-1,variables:[]}),d=re(qe(Object.keys(e.plots)[0]));function u(A,T){c.objects=T?T[A]:A}function f(A){c.objects=-1}function v(A){c.variables=A}function h(A){c.variables=[]}let m={objects:{select:u,unselect:f},variables:{select:v,unselect:h},stats:{}},g=w(()=>r(d)?e.plots[r(d)]:null),b=w(()=>r(g)?r(g).component:null);var _=W1(),p=q(_),y=q(p),C=q(y);Vn(C,()=>r(b),(A,T)=>{T(A,{get params(){return o()[r(d)]},get callbacks(){return m[r(g).scope]},get selected(){return c[r(g).scope]},get props(){return e.props}})});var E=L(y,2),k=q(E);{var S=A=>{var T=_e(),P=J(T);{var R=F=>{var z=z1(),O=q(z);ae(()=>be(O,t())),M(F,z)},V=F=>{var z=q1(),O=q(z);ae(()=>be(O,a())),M(F,z)};Y(P,F=>{c[r(g).scope]<0?F(R):F(V,!1)})}M(A,T)};Y(k,A=>{r(g).scope==="objects"&&o()[r(d)].plotType!=="l"&&t().length>0&&A(S)})}var I=L(k,2);{var j=A=>{var T=_e(),P=J(T);{var R=F=>{var z=F1(),O=q(z);ae(()=>be(O,l())),M(F,z)},V=F=>{var z=O1(),O=q(z);ae(()=>be(O,a())),M(F,z)};Y(P,F=>{c[r(g).scope].length===0?F(R):F(V,!1)})}M(A,T)};Y(I,A=>{r(g).scope==="variables"&&o()[r(d)].plotType!=="l"&&l().length>0&&A(j)})}var N=L(p,2);Ye(N,21,()=>Object.keys(e.plots),Ge,(A,T)=>{var P=_e(),R=J(P);{var V=z=>{var O=V1(),H=J(O);wf(H,{get title(){return r(g).label},labelWidth:12,get options(){return e.controls[r(d)]},get value(){return o()[r(d)]},set value(Z){o(o()[r(d)]=Z,!0)}});var W=L(H,2);{var Q=Z=>{var se=D1(),te=q(se);jr(te,()=>r(g).buttons,()=>c.objects),M(Z,se)};Y(W,Z=>{r(g).scope==="objects"&&r(g).buttons&&c.objects>=0&&Z(Q)})}var ee=L(W,2);{var G=Z=>{var se=B1(),te=q(se);jr(te,()=>r(g).buttons,()=>c.variables),M(Z,se)};Y(ee,Z=>{r(g).scope==="variables"&&r(g).buttons&&c.variables.length>0&&Z(G)})}M(z,O)},F=z=>{var O=Y1();O.__keydown=()=>switchPlot(i),O.__click=()=>D(d,r(T),!0);var H=q(O);ae(()=>{ct(O,1,`plot-selector plot-selector-${r(T)??""}`,"svelte-188sk7n"),be(H,e.plots[r(T)].label)}),M(z,O)};Y(R,z=>{r(g)&&r(d)===r(T)?z(V):z(F,!1)})}M(A,P)}),M(s,_),xe()}at(["keydown","click"]);var U1=Me("<text> </text>"),H1=Me('<g class="series series-textlabels"></g>'),G1=Me('<g class="series series-line"><polyline class="line"></polyline></g>'),X1=Me("<rect></rect>"),K1=Me('<g class="series series-bar"></g>'),J1=Me("<text> </text>"),Z1=Me('<g class="series series-points series-points1"></g>'),Q1=Me('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),$1=Me('<g class="series series-points series-points1"><text> </text></g>'),em=Me('<g class="series series-bar"><rect></rect></g>'),tm=Me('<g class="series series-text"><text> </text></g>'),rm=Me("<!><!><!>",1),nm=Me("<!><!><!><!><!>",1);function rr(s,e){ye(e,!0);let t=B(e,"shortenLabels",3,!0),l=B(e,"lineWidth",3,1),a=B(e,"nBars",3,1),o=B(e,"barNum",3,1),c=B(e,"markerSize",3,null),d=B(e,"markerWidth",3,2),u=B(e,"marker",3,1),f=B(e,"colors",3,void 0),v=B(e,"filled",3,void 0),h=B(e,"mainColor",19,()=>mt.cal),m=B(e,"faceColor",3,null),g=B(e,"lineColor",19,h),b=B(e,"selected",19,()=>-1),_=B(e,"maskSelected",3,!0),p=B(e,"xRange",15),y=B(e,"yRange",15),C=B(e,"ind",3,null);function E(oe){!e.callbacks||!e.callbacks.select||hn(oe,oe.target.tagName,le=>e.callbacks.select(le,C()))}function k(oe){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const S=qt("axes"),I=w(()=>Lt(e.xValues,"PlotSeries")),j=w(()=>r(I)?Lt(e.yValues,"PlotSeries",r(I).length):null);me(()=>{if(C()){const oe=C().map(le=>le+1);p(r(I)?Lr(r(I).subset(oe)):null),y(r(j)?Lr(r(j).subset(oe)):null)}else p(r(I)?Lr(r(I)):null),y(r(j)?Lr(r(j)):null)});const N=w(()=>m()===null?e.plotType==="p"?"transparent":"white":m()),A=[1,.8,.8,.8,.8,.8,.8,.8],T=[.85,.65,.65,.65,.65,.65,.65,.65],P=w(()=>c()?c():e.plotType==="p"?A[u()-1]:T[u()-1]),R=w(()=>An[u()-1]),V=w(()=>Ll[S.scales().plot]),F=w(()=>ft([0],S.tY())[0]),z=w(()=>Il([.8],S.tX())[0]),O=w(()=>e.plotType==="h"?r(z)/a():0),H=w(()=>e.plotType==="h"?r(z)/2-(o()-1)*r(O):0),W=w(()=>r(V));let Q=w(()=>e.plotType==="l"||e.plotType==="b"?ql(r(I),r(j),S.tX(),S.tY()):null),ee=w(()=>r(I)?ft(r(I),S.tX()):null),G=w(()=>r(j)?ft(r(j),S.tY()):null),Z=w(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(oe=>oe.slice(0,Jn)):e.labels:null);const se=w(()=>C()?C():ir(0,r(ee).length-1));let te=w(()=>f()&&f().length===r(I).length?f():Array(r(I).length).fill(h())),ue=w(()=>v()&&v().length===r(I).length?v().map(oe=>oe?"ff":"30"):Array(r(I).length).fill("30")),ve=w(()=>f()&&f().length===r(I).length?f().map((oe,le)=>oe+r(ue)[le]):Array(r(I).length).fill(m()));const Te=w(()=>`font-size:${r(P)}em;fill:${r(N)};cursor:default;text-anchor:middle;stroke-width:${d()}px;user-select:none;`),je=`font-size:0.85em;fill:${ii};cursor:default;text-anchor:middle;stroke:${ii};stroke-width:0.1px;user-select:none;`,ke=w(()=>`font-size:${r(P)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),ge=`fill:transparent;stroke-width:${l()}px;`,Ce=`stroke-width:${l()}px;stroke:${g()}`;me(()=>{b()&&C()&&C().indexOf(b())<0&&e.callbacks.unselect()});var Ee=_e(),Pe=J(Ee);{var ie=oe=>{var le=nm(),pe=J(le);{var Ne=de=>{var Se=H1();Ye(Se,21,()=>r(se),Ge,(Oe,De)=>{var Ve=U1(),Ue=q(Ve);ae(()=>{U(Ve,"opacity",r(De)===b()),U(Ve,"x",r(ee)[r(De)]-r(H)+r(O)/2),U(Ve,"y",r(G)[r(De)]),U(Ve,"dy",r(j).v[r(De)]<0?r(W):-r(W)),be(Ue,r(Z)[r(De)])}),M(Oe,Ve)}),ae(()=>ut(Se,je+(b()>=0?"opacity:0.2;":""))),M(de,Se)};Y(pe,de=>{e.showLabels&&r(Z)&&de(Ne)})}var he=L(pe);{var ze=de=>{var Se=G1(),Oe=q(Se);ae(()=>{ut(Se,ge),U(Oe,"points",r(Q)),U(Oe,"stroke",h())}),M(de,Se)};Y(he,de=>{(e.plotType==="l"||e.plotType==="b")&&de(ze)})}var Re=L(he);{var Fe=de=>{var Se=K1();Se.__click=E,Ye(Se,21,()=>r(se),Ge,(Oe,De)=>{var Ve=X1();ae(()=>{U(Ve,"x",r(ee)[r(De)]-r(H)),U(Ve,"y",r(j).v[r(De)]<0?r(F):r(G)[r(De)]),U(Ve,"fill",r(te)[r(De)]),U(Ve,"width",r(O)),U(Ve,"height",r(j).v[r(De)]<0?r(G)[r(De)]-r(F):r(F)-r(G)[r(De)])}),M(Oe,Ve)}),ae(()=>ut(Se,Ce+(b()>=0?"opacity:0.2;":""))),M(de,Se)};Y(Re,de=>{e.plotType==="h"&&de(Fe)})}var X=L(Re);{var $=de=>{var Se=Z1();Se.__click=E,Ye(Se,21,()=>r(se),Ge,(Oe,De)=>{var Ve=J1(),Ue=q(Ve);ae(()=>{U(Ve,"x",r(ee)[r(De)]),U(Ve,"y",r(G)[r(De)]),U(Ve,"fill",r(ve)[r(De)]),U(Ve,"stroke",r(te)[r(De)]),be(Ue,r(R))}),M(Oe,Ve)}),ae(()=>ut(Se,r(Te)+(b()>=0?"opacity:0.2;":""))),M(de,Se)};Y(X,de=>{(e.plotType==="p"||e.plotType==="b")&&de($)})}var ne=L(X);{var ce=de=>{var Se=rm(),Oe=J(Se);{var De=Tt=>{var bt=Q1();U(bt,"x",0),U(bt,"y",0),bt.__click=k,M(Tt,bt)};Y(Oe,Tt=>{_()&&Tt(De)})}var Ve=L(Oe);{var Ue=Tt=>{var bt=$1(),dt=q(bt),Ae=q(dt);ae(()=>{ut(bt,r(ke)),U(dt,"x",r(ee)[b()]),U(dt,"y",r(G)[b()]),U(dt,"stroke",r(te)[b()]),U(dt,"fill",r(ve)[b()]),be(Ae,r(R))}),M(Tt,bt)},ht=Tt=>{var bt=em(),dt=q(bt);ae(()=>{ut(bt,Ce),U(dt,"stroke",r(te)[b()]),U(dt,"fill",r(te)[b()]),U(dt,"x",r(ee)[b()]-r(H)),U(dt,"y",r(j).v[b()]<0?r(F):r(G)[b()]),U(dt,"width",r(O)),U(dt,"height",r(j).v[b()]<0?r(G)[b()]-r(F):r(F)-r(G)[b()])}),M(Tt,bt)};Y(Ve,Tt=>{e.plotType!=="h"?Tt(Ue):Tt(ht,!1)})}var _r=L(Ve);{var ea=Tt=>{var bt=tm(),dt=q(bt),Ae=q(dt);ae(()=>{ut(bt,je),U(dt,"stroke",ci),U(dt,"fill",ci),U(dt,"x",r(ee)[b()]),U(dt,"y",r(G)[b()]),U(dt,"dy",r(j).v[b()]<0?r(W):-r(W)),be(Ae,r(Z)[b()])}),M(Tt,bt)};Y(_r,Tt=>{e.showLabels&&r(Z)&&r(Z).length>0&&Tt(ea)})}M(de,Se)};Y(ne,de=>{b()>=0&&de(ce)})}M(oe,le)};Y(Pe,oe=>{r(ee)&&r(G)&&oe(ie)})}M(s,Ee),xe()}at(["click"]);var sm=K("<!> <!> <!> <!>",1);function Zn(s,e){ye(e,!0);const t=w(()=>e.props&&e.props.data?e.props.data:null),l=w(()=>e.props&&e.props.res?e.props.res:null),a=w(()=>r(l)&&e.params.resID?r(l)[e.params.resID]:null),o=w(()=>r(l)&&e.params.resID?r(t)[e.params.resID]:null),c=w(()=>e.props&&e.props.model?e.props.model:null),d="#909090",u=100;let f=w(()=>e.params.limType==="classic"?{h:r(a).cNh,q:r(a).cNq}:{h:r(a).rNh,q:r(a).rNq}),v=w(()=>e.params.limType==="classic"?{h:r(a).ch0,q:r(a).cq0}:{h:r(a).rh0,q:r(a).rq0}),h=w(()=>({h:r(f).h[e.params.ncomp-1],q:r(f).q[e.params.ncomp-1]})),m=w(()=>({h:r(v).h[e.params.ncomp-1],q:r(v).q[e.params.ncomp-1]})),g=w(()=>e.params.alpha?1-e.params.alpha/100:.95),b=w(()=>e.params.gamma?1-e.params.gamma/100:.99),_=w(()=>mi(r(g),r(h).h,r(h).q,e.params.transType)),p=w(()=>r(c)?mi(Math.pow(r(b),1/r(c).nrows),r(h).h,r(h).q,e.params.transType):null),y=w(()=>r(a)?Kt(r(a),"hdist",e.params.ncomp):null),C=w(()=>r(a)?Kt(r(a),"qdist",e.params.ncomp):null),E=w(()=>di(r(y),r(h).h,r(m).h,e.params.transType)),k=w(()=>di(r(C),r(h).q,r(m).q,e.params.transType)),S=w(()=>r(a)?r(a).objlabels.map(W=>W.slice(0,Jn)):null),I=w(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),j=w(()=>vi("h",e.params.transType)),N=w(()=>vi("q",e.params.transType)),A=re(void 0),T=re(void 0),P=w(()=>zs(r(o),r(a),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),R=w(()=>e.params.colorByObj?e.params.colorByObj.ind:null),V=w(()=>{if(!r(p)||!r(A))return[0,1];const W=Math.max(r(A)[1],r(p).x.v[u-1]);return[-.02*(W-r(A)[0]),1.05*W]}),F=w(()=>{if(!r(p)||!r(T))return[0,1];const W=Math.max(r(T)[1],r(p).y.v[0]);return[-.02*(W-r(T)[0]),(1.05+.1*(e.params.colorBy!=="none")+.05*e.params.showLabels)*W]});var z=_e(),O=J(z);{var H=W=>{br(W,{get title(){return r(I)},get limX(){return r(V)},get limY(){return r(F)},get xLabel(){return r(j)},get yLabel(){return r(N)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(Q,ee)=>{var G=sm(),Z=J(G);{var se=ke=>{Bt(ke,{get xValues(){return r(_).x},get yValues(){return r(_).y},lineColor:d,lineType:2})};Y(Z,ke=>{r(_)&&ke(se)})}var te=L(Z,2);{var ue=ke=>{Bt(ke,{get xValues(){return r(p).x},get yValues(){return r(p).y},lineColor:d,lineType:3})};Y(te,ke=>{r(p)&&(e.params.resID!=="test"||e.params.subset&&e.params.subset==="members")&&e.params.resID&&e.params.resID!=="new"&&ke(ue)})}var ve=L(te,2);rr(ve,{get labels(){return r(S)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return r(E).values},get yValues(){return r(k).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Vt[e.params.resID]},get colors(){return r(P).colors},get filled(){return r(P).filled},get ind(){return r(R)},get xRange(){return r(A)},set xRange(ke){D(A,ke,!0)},get yRange(){return r(T)},set yRange(ke){D(T,ke,!0)}});var Te=L(ve,2);{var je=ke=>{{let ge=w(()=>r(P).breaks!==null);Is(ke,{get show(){return r(ge)},get colmap(){return r(P).map},get breaks(){return r(P).breaks},get labels(){return r(P).labels}})}};Y(Te,ke=>{r(P)&&r(P).showBar&&ke(je)})}M(Q,G)},$$slots:{default:!0}})};Y(O,W=>{r(E)&&r(k)&&W(H)})}M(s,z),xe()}var lm=K("<!> <!> <!> <!> <!>",1);function Qn(s,e){ye(e,!0);const t="Objects",l="topright",a={q:"Orthogonal distance, q/q0",h:"Score distance, h/h0",f:"Full distance, f/f0"},o={q:"Orthogonal distance, log(1 + q/q0)",h:"Score distance, log(1 + h/h0)",f:"Full distance, log(1 + f/f0)"},c="#909090",d=w(()=>e.props&&e.props.classres?e.props.classres:null),u=w(()=>e.props&&e.props.res?e.props.res:null),f=w(()=>e.props&&e.props.simca?e.props.simca:null),v=w(()=>e.props&&e.props.model?e.props.model:null),h=w(()=>e.props&&e.props.data?e.props.data:null),m=w(()=>r(u)?Object.keys(r(u))[0]:null),g=w(()=>r(m)?r(u)[r(m)]:null),b=w(()=>r(m)?r(h)[r(m)]:null),_=w(()=>r(f)?r(f).ncomp:null),p=w(()=>r(f)?r(f).Nf:null),y=w(()=>r(f)?r(f).limType.charAt(0):null),C=w(()=>r(v)?et(r(v),r(y)+"h0"):null),E=w(()=>r(v)?et(r(v),r(y)+"q0"):null),k=(ge,Ce,Ee,Pe)=>new we(Kt(ge,Ce,Ee).map(ie=>ie/Pe)),S=w(()=>r(u)&&r(_)?Ts(r(u),(ge,Ce)=>k(ge[Ce],"hdist",r(_),r(C)[r(_)-1])):null),I=w(()=>r(u)&&r(_)?Ts(r(u),(ge,Ce)=>k(ge[Ce],"qdist",r(_),r(E)[r(_)-1])):null),j=w(()=>r(u)&&r(_)?Ts(r(u),(ge,Ce)=>k(ge[Ce],"fdist"+r(y),r(_),r(p)[r(_)-1])):null),N=w(()=>r(S)&&r(I)&&r(j)?{h:r(S),q:r(I),f:r(j)}:null);function A(ge,Ce){return!Ce||Ce=="no"?ge:new we(ge.v.map(Ee=>Math.log(1+Ee)))}const T=w(()=>{if(!r(N))return null;if(e.params.resID==="both")return Ts(r(N)[e.params.distType],(Ee,Pe)=>({values:Ee[Pe],mainColor:mt[Pe],faceColor:Ur[Pe],marker:Vt[Pe],max:Dt(Ee[Pe])}));if(e.params.resID==="diff"){const Ee=r(N)[e.params.distType].cal,Pe=r(N)[e.params.distType].pv,ie=Ee.subtract(Pe).apply(oe=>Math.abs(oe));return{"abs(cal - pv)":{values:ie,mainColor:"#a0a0a0",faceColor:"#a0a0a0",max:Dt(ie)}}}const ge={},Ce=A(r(N)[e.params.distType][e.params.resID],e.params.transType);return ge[e.params.resID]={values:Ce,max:Dt(Ce),mainColor:mt[e.params.resID],faceColor:Ur[e.params.resID],marker:Vt[e.params.resID]},ge});let P=w(()=>r(T)?Object.keys(r(T)).map(ge=>({id:ge,label:ge,point:{marker:e.params.resID==="diff"?2:r(T)[ge].marker,faceColor:r(T)[ge].faceColor,lineColor:r(T)[ge].mainColor,markerSize:.85,lineWidth:1.5}})):null);const R=w(()=>r(f)&&r(_)?r(f).eCrit[r(_)-1]/r(p)[r(_)-1]:null),V=w(()=>r(f)&&r(_)?r(f).oCrit[r(_)-1]/r(p)[r(_)-1]:null),F=w(()=>r(R)?e.params.transType&&e.params.transType==="log"?Math.log(1+r(R)):r(R):null),z=w(()=>r(V)?e.params.transType&&e.params.transType==="log"?Math.log(1+r(V)):r(V):null),O=w(()=>r(F)&&e.params.distType==="f"&&e.params.resID!=="diff"?r(F):0),H=w(()=>r(z)&&e.params.distType==="f"&&e.params.resID!=="diff"?r(z):0);let W=w(()=>zs(r(b),r(g),e.params.colorBy,e.params.colorByVar,e.params.resID,null));const Q=w(()=>r(T)?Dt(Object.keys(r(T)).map(ge=>r(T)[ge].max).concat([r(H)])):null),ee=w(()=>r(g)?we.seq(1,r(g).nrows):null),G=w(()=>r(g)?[0,r(g).nrows+1]:[0,1]),Z=w(()=>r(Q)?[-r(Q)*.05,r(Q)*1.2]:[0,1]),se=w(()=>!e.params.transType||e.params.transType==="no"?a[e.params.distType]:o[e.params.distType]),te=w(()=>r(g)?r(g).objlabels.map(ge=>ge.slice(0,Jn)):null),ue=w(()=>e.params.title?e.params.title:"Distances (A = "+r(_)+")"),ve=w(()=>!r(d)||r(d).length>1?!1:r(d)[Object.keys(r(u))[0]].nMembers<1);var Te=_e(),je=J(Te);{var ke=ge=>{br(ge,{get title(){return r(ue)},get limX(){return r(G)},get limY(){return r(Z)},xLabel:t,get yLabel(){return r(se)},fileName:"plot-distances",get onclick(){return e.callbacks.unselectObject},children:(Ce,Ee)=>{var Pe=lm(),ie=J(Pe);{var oe=X=>{{let $=w(()=>[r(O),r(O)]);Bt(X,{get xValues(){return r(G)},get yValues(){return r($)},lineColor:c,lineType:2})}};Y(ie,X=>{r(O)>0&&X(oe)})}var le=L(ie,2);{var pe=X=>{{let $=w(()=>[r(H),r(H)]);Bt(X,{get xValues(){return r(G)},get yValues(){return r($)},lineColor:c,lineType:3})}};Y(le,X=>{r(H)>0&&e.params.resID&&e.params.resID!=="new"&&!r(ve)&&X(pe)})}var Ne=L(le,2);Ye(Ne,17,()=>Object.keys(r(T)),Ge,(X,$)=>{{let ne=w(()=>e.params.colorBy&&e.params.colorBy!=="none"?r(W).colors:null),ce=w(()=>e.params.resID==="diff"?"h":"p");rr(X,{get labels(){return r(te)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return r(ee)},get yValues(){return r(T)[r($)].values},get mainColor(){return r(T)[r($)].mainColor},get faceColor(){return r(T)[r($)].faceColor},get marker(){return r(T)[r($)].marker},get colors(){return r(ne)},get plotType(){return r(ce)},get showLabels(){return e.params.showLabels}})}});var he=L(Ne,2);{var ze=X=>{{let $=w(()=>r(W).breaks!==null);Is(X,{get show(){return r($)},get colmap(){return r(W).map},get breaks(){return r(W).breaks},get labels(){return r(W).labels}})}};Y(he,X=>{r(W)&&r(W).showBar&&X(ze)})}var Re=L(he,2);{var Fe=X=>{{let $=w(()=>!e.params.colorBy||e.params.colorBy==="none");Tn(X,{get items(){return r(P)},position:l,get show(){return r($)}})}};Y(Re,X=>{r(P)&&r(P).length>0&&X(Fe)})}M(Ce,Pe)},$$slots:{default:!0}})};Y(je,ge=>{r(ee)&&r(T)&&ge(ke)})}M(s,Te),xe()}var am=K("<!> <!> <!> <!>",1);function om(s,e){ye(e,!0);const t="Components",l="Degrees of freedom, Nu",a="DoF",o="plot-dof",c={Nh:"#2679B2",Nq:"#D22C2F"},d={Nh:"#f0f8ff",Nq:"#fff8f0"};let u=w(()=>e.props&&e.props.simca?e.props.simca:null),f=w(()=>e.props&&e.props.model?e.props.model:null),v=w(()=>r(u)?r(u).ncomp:null),h=w(()=>e.params.dfID!=="both"?[e.params.dfID]:["Nh","Nq"]),m=w(()=>e.params.legendPosition?e.params.legendPosition:"topleft"),g=w(()=>r(h)?r(h).map(S=>({id:S,label:S,point:{marker:1,lineColor:c[S],faceColor:"white",markerSize:.85,lineWidth:1.5},line:{lineColor:c[S],lineWidth:1.5}})):null),b=w(()=>r(f)?we.seq(1,r(f).ncomp):null),_=w(()=>r(u)&&r(h)?r(h).reduce((S,I)=>{const j=r(u).limType==="classic"?"c":"r";return S[I]=new we(et(r(f),j+I)),S},{}):null),p=w(()=>r(f)?[.5,r(f).ncomp+.5]:[0,1]),y=w(()=>{const S=Object.keys(r(_));if(S.length<1)return[0,1];const I=S.map(j=>Dt(r(_)[j]));return[0,Dt(I)*1.2]});var C=_e(),E=J(C);{var k=S=>{br(S,{title:a,xLabel:t,yLabel:l,get limX(){return r(p)},get limY(){return r(y)},fileName:o,whole:!0,children:(I,j)=>{var N=am(),A=J(N);{var T=O=>{{let H=w(()=>[r(v)]),W=w(()=>[r(v)]),Q=w(()=>[r(y)[0]]),ee=w(()=>[r(y)[1]]);cr(O,{get xStart(){return r(H)},get xEnd(){return r(W)},get yStart(){return r(Q)},get yEnd(){return r(ee)},lineColor:"#a0a0a0"})}};Y(A,O=>{r(v)&&O(T)})}var P=L(A,2);Ye(P,17,()=>r(h),Ge,(O,H)=>{rr(O,{get xValues(){return r(b)},get yValues(){return r(_)[r(H)]},plotType:"b",showLabels:!1,get faceColor(){return d[r(H)]},get mainColor(){return c[r(H)]},lineWidth:1.5})});var R=L(P,2);{var V=O=>{var H=_e(),W=J(H);Ye(W,17,()=>r(h),Ge,(Q,ee)=>{{let G=w(()=>[r(b).v[r(v)-1]]),Z=w(()=>[r(_)[r(ee)].v[r(v)-1]]);rr(Q,{get xValues(){return r(G)},get yValues(){return r(Z)},plotType:"p",showLabels:!1,get faceColor(){return c[r(ee)]},mainColor:"#a0a0a0",markerSize:1.2,lineWidth:1})}}),M(O,H)};Y(R,O=>{r(v)&&O(V)})}var F=L(R,2);{var z=O=>{Tn(O,{get items(){return r(g)},get position(){return r(m)}})};Y(F,O=>{r(g)&&r(g).length>0&&O(z)})}M(I,N)},$$slots:{default:!0}})};Y(E,S=>{r(b)&&r(_)&&S(k)})}M(s,C),xe()}var im=K("<!> <!> <!>",1),cm=K("<!> <!> <!>",1);function Jl(s,e){ye(e,!0);const t="#e0e0e0",l="Number of extremes (expected)",a="Number of extremes (observed)",o="plot-extremes";function c(A){const T=we.zeros(A+1),P=we.zeros(A+1),R=we.zeros(A+1),V=we.zeros(A+1);for(let F=1;F<A;F++){const z=F/A,O=2*Math.sqrt(F*(1-z));T.v[F]=F,R.v[F]=F,P.v[F]=F-O,V.v[F]=F+O}return T.v[A]=A,R.v[A]=A,P.v[A]=A,V.v[A]=A,{xStart:T,xEnd:R,yStart:P,yEnd:V}}function d(A,T,P){const R=A.v[P-1].f,V=T.Nf[P-1],F=A.nMembers,z=we.zeros(F);for(let O=1;O<=F;O++){const H=O/F,W=xt(1-H,V);let Q=0;for(let ee=0;ee<F;ee++)R[A.ind.members[ee]]>W&&(Q+=1);z.v[O-1]=Q}return z}let u=w(()=>e.props&&e.props.classres?e.props.classres:null),f=w(()=>e.props&&e.props.simca?e.props.simca:null),v=w(()=>e.props&&e.props.ncomp?e.props.ncomp:null),h=w(()=>Object.keys(r(u))),m=w(()=>e.params.resID!=="both"?[e.params.resID]:r(h)),g=w(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),b=w(()=>r(m)?r(m).map(A=>({id:A,label:A,point:{marker:1,lineColor:mt[A],faceColor:Ur[A],marker:Vt[A],markerSize:.85,lineWidth:1.5}})):null),_=w(()=>r(u)&&r(m)?r(m).reduce((A,T)=>(A[T]=we.seq(1,r(u)[T].nMembers),A),{}):null),p=w(()=>r(u)&&r(h)&&r(v)?r(h).reduce((A,T)=>(A[T]=d(r(u)[T],r(f),r(v)),A),{}):null),y=w(()=>r(m)?r(m).reduce((A,T)=>Math.max(A,r(_)[T].length),0):1),C=w(()=>r(y)>1?c(r(y)):null),E=w(()=>r(_)?[-1,r(y)+2]:[0,1]),k=w(()=>r(_)?[-1,r(y)+2]:[0,1]),S=w(()=>r(v)?`Extremes (A = ${r(v)})`:"Extremes");var I=_e(),j=J(I);{var N=A=>{br(A,{get title(){return r(S)},xLabel:l,yLabel:a,get limX(){return r(E)},get limY(){return r(k)},fileName:o,whole:!0,children:(T,P)=>{var R=cm(),V=J(R);{var F=W=>{var Q=im(),ee=J(Q);cr(ee,Gt(()=>r(C),{lineColor:t}));var G=L(ee,2);Bt(G,{get xValues(){return r(C).xStart},get yValues(){return r(C).yStart},lineColor:t});var Z=L(G,2);Bt(Z,{get xValues(){return r(C).xEnd},get yValues(){return r(C).yEnd},lineColor:t}),M(W,Q)};Y(V,W=>{r(C)&&W(F)})}var z=L(V,2);Ye(z,17,()=>r(m),Ge,(W,Q)=>{rr(W,{get xValues(){return r(_)[r(Q)]},get yValues(){return r(p)[r(Q)]},plotType:"p",showLabels:!1,get faceColor(){return Ur[r(Q)]},get mainColor(){return mt[r(Q)]},get marker(){return Vt[r(Q)]},lineWidth:1.5})});var O=L(z,2);{var H=W=>{Tn(W,{get items(){return r(b)},get position(){return r(g)}})};Y(O,W=>{r(b)&&r(b).length>0&&W(H)})}M(T,R)},$$slots:{default:!0}})};Y(j,A=>{r(u)&&A(N)})}M(s,I),xe()}var um=K("<!> <!>",1),fm=K("<!> <!> <!> <!> <!>",1);function qs(s,e){ye(e,!0);const t={sens:"sensitivity",sel:"selectivity",spec:"specificity",eff:"efficiency"},l=w(()=>t[e.params.statName]),a=w(()=>"plot-"+r(l)),o=w(()=>e.props&&e.props.classres?e.props.classres:null),c=w(()=>e.props&&e.props.ncomp?e.props.ncomp:null),d=w(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(r(o))),u=w(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),f=w(()=>r(d)?r(d).map(k=>({id:k,label:k,point:{marker:1,lineColor:mt[k],faceColor:Vl[k],marker:Vt[k],markerSize:.85,lineWidth:1.5}})):null);let v=w(()=>{if(!e.params.ci||!e.params.ci[e.params.statName])return null;const k=e.params.ci[e.params.statName];return!Array.isArray(k)||k.length!==2?null:k});const h=w(()=>r(o)?r(o)[r(d)[0]].stat.components.length:1),m=w(()=>r(h)>10?r(h)*.05:.5),g=w(()=>r(h)>1?1:0),b=w(()=>r(h)>1?r(h):2),_=w(()=>[r(g)-r(m),r(b)+r(m)]);let p=w(()=>{if(!e.params.zoom)return[0,1.1];if(!r(d)||r(d).length<1)return[0,1];const k=r(d).map(S=>Lr(r(o)[S].stat[r(l)]));return hs(k.flat(),.2)});var y=_e(),C=J(y);{var E=k=>{{let S=w(()=>Xd(r(l)));br(k,{get title(){return r(S)},xLabel:"Components",get yLabel(){return r(l)},get limX(){return r(_)},get limY(){return r(p)},get fileName(){return r(a)},whole:!0,children:(I,j)=>{var N=fm(),A=J(N);{var T=W=>{{let Q=w(()=>[r(c)]),ee=w(()=>[r(c)]),G=w(()=>[r(p)[0]]),Z=w(()=>[r(p)[1]]);cr(W,{get xStart(){return r(Q)},get xEnd(){return r(ee)},get yStart(){return r(G)},get yEnd(){return r(Z)},lineColor:"#a0a0a0"})}};Y(A,W=>{r(c)&&W(T)})}var P=L(A,2);{var R=W=>{const Q=w(()=>r(_)[1]-r(_)[0]);var ee=um(),G=J(ee);{let se=w(()=>[r(_)[0]]),te=w(()=>[r(v)[0]+r(v)[1]]),ue=w(()=>[2*r(v)[1]]),ve=w(()=>[r(Q)]);Kn(G,{get left(){return r(se)},get top(){return r(te)},get height(){return r(ue)},get width(){return r(ve)},lineColor:"#transparent",faceColor:"#00000010"})}var Z=L(G,2);{let se=w(()=>[r(_)[0]]),te=w(()=>[r(Q)]),ue=w(()=>[r(v)[0]]),ve=w(()=>[r(v)[0]]);cr(Z,{get xStart(){return r(se)},get xEnd(){return r(te)},get yStart(){return r(ue)},get yEnd(){return r(ve)},lineColor:"#a0a0a0",lineType:2})}M(W,ee)};Y(P,W=>{r(v)&&W(R)})}var V=L(P,2);Ye(V,17,()=>r(d),Ge,(W,Q)=>{rr(W,{get xValues(){return r(o)[r(Q)].stat.components},get yValues(){return r(o)[r(Q)].stat[r(l)]},plotType:"b",showLabels:!1,get faceColor(){return Vl[r(Q)]},get mainColor(){return mt[r(Q)]},get marker(){return Vt[r(Q)]},lineWidth:1.5})});var F=L(V,2);{var z=W=>{var Q=_e(),ee=J(Q);Ye(ee,17,()=>r(d),Ge,(G,Z)=>{{let se=w(()=>[r(o)[r(Z)].stat.components[r(c)-1]]),te=w(()=>[r(o)[r(Z)].stat[r(l)][r(c)-1]]);rr(G,{get xValues(){return r(se)},get yValues(){return r(te)},plotType:"b",showLabels:!1,get faceColor(){return mt[r(Z)]},get mainColor(){return mt[r(Z)]},get marker(){return Vt[r(Z)]},markerSize:1,lineWidth:1})}}),M(W,Q)};Y(F,W=>{r(c)&&W(z)})}var O=L(F,2);{var H=W=>{Tn(W,{get items(){return r(f)},get position(){return r(u)}})};Y(O,W=>{r(f)&&r(f).length>0&&W(H)})}M(I,N)},$$slots:{default:!0}})}};Y(C,k=>{r(o)&&k(E)})}M(s,y),xe()}function dm(s,e){ye(e,!0);let t=B(e,"lineColor",3,"#606060"),l=B(e,"lineType",3,2),a=B(e,"alpha",3,.05),o=B(e,"xRange",15),c=B(e,"yRange",15);const d=we.seq(0,2*Math.PI,.05);function u(p,y,C,E){const k=p.eigenvals[y-1],S=xt(1-a(),2),I=Math.sqrt(S*k),j=we.zeros(E.length);for(let N=0;N<E.length;N++)j.v[N]=I*C(E.v[N]);return[j,-I,I]}let f=w(()=>e.comp?e.comp[0]:null),v=w(()=>r(f)?u(e.resobj,r(f),Math.cos,d):null);me(()=>{o(r(v)?[r(v)[1],r(v)[2]]:null)});let h=w(()=>e.comp?e.comp[1]:null),m=w(()=>r(h)?u(e.resobj,r(h),Math.sin,d):null);me(()=>{c(r(m)?[r(m)[1],r(m)[2]]:null)});var g=_e(),b=J(g);{var _=p=>{Bt(p,{get xValues(){return r(v)[0]},get yValues(){return r(m)[0]},get lineColor(){return t()},get lineType(){return l()}})};Y(b,p=>{r(v)&&r(m)&&p(_)})}M(s,g),xe()}function vm(s,e){ye(e,!0);let t=B(e,"confLevel",3,.95),l=B(e,"xRange",15),a=B(e,"yRange",15),o=w(()=>Gd(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,t()));me(()=>{r(o)?(l(r(o).xRange),a(r(o).yRange)):(l(null),a(null))});var c=_e(),d=J(c);{var u=f=>{var v=_e(),h=J(v);Ye(h,17,()=>r(o).ellipses,Ge,(m,g,b)=>{Bt(m,{get xValues(){return r(g).x},get yValues(){return r(g).y},get lineColor(){return e.groupColors[b]}})}),M(f,v)};Y(d,f=>{r(o)&&r(o).ellipses&&f(u)})}M(s,c),xe()}var mm=K("<!> <!> <!> <!> <!> <!> <!> <!>",1);function $n(s,e){ye(e,!0);let t=B(e,"alpha",3,.05);const l=w(()=>e.props&&e.props.data?e.props.data:null),a=w(()=>e.props&&e.props.res?e.props.res:null),o=w(()=>r(a)&&e.params?e.params.resID==="both"?Object.keys(r(a)):[e.params.resID]:null),c=w(()=>r(o)?r(a)[r(o)[0]]:null),d=w(()=>r(o)&&r(o).length>1?r(a)[r(o)[1]]:null),u=w(()=>r(o)?r(l)[r(o)[0]]:null);function f(ke,ge,Ce,Ee,Pe,ie){if(!Ce)return null;let oe=Ce[0],le=Ce[1];Ee&&(oe=Math.min(oe,Ee[0]),le=Math.max(le,Ee[1])),ke&&Pe&&(oe=Math.min(oe,Pe[0]),le=Math.max(le,Pe[1])),ge!=="none"&&ie&&(oe=Math.min(oe,ie[0]),le=Math.max(le,ie[1]));const pe=(le-oe)*.1;return{min:oe,max:le,d:pe}}function v(ke,ge){if(!(!ke||!ge||ge<1||ge>ke.ncomp))return new we(Kt(ke,"scores",ge))}let h=re(void 0),m=re(void 0),g=re(void 0),b=re(void 0),_=re(void 0),p=re(void 0),y=re(void 0),C=re(void 0),E=w(()=>r(c)?rt(r(c).objindices):null),k=w(()=>r(d)?rt(r(d).objindices):null),S=w(()=>r(c)?r(c).objlabels.map(ke=>ke.slice(0,Jn)):null),I=w(()=>r(d)?r(d).objlabels.map(ke=>ke.slice(0,Jn)):null),j=w(()=>v(r(c),e.params.comp1)),N=w(()=>v(r(d),e.params.comp1)),A=w(()=>e.params.plotType==="p"?r(j):r(E)),T=w(()=>e.params.plotType==="p"?r(N):r(k)),P=w(()=>e.params.comp2?e.params.comp2:null),R=w(()=>v(r(c),r(P))),V=w(()=>r(d)?v(r(d),r(P)):null),F=w(()=>zs(r(u),r(c),e.params.colorBy,e.params.colorByVar,r(o)[0])),z=w(()=>Vt[r(o)[0]]),O=w(()=>r(o).length>1?zs(null,r(d),"none",0,r(o)[1]):null),H=w(()=>r(o).length>1?Vt[r(o)[1]]:null),W=w(()=>e.params.plotType==="p"?ui(r(c),e.params.comp1):"Objects"),Q=w(()=>ui(r(c),e.params.comp2)),ee=w(()=>f(e.params.showEllipse,e.params.confEllipse,r(h),r(g),r(_),r(y))),G=w(()=>r(ee)?[r(ee).min-r(ee).d,r(ee).max+r(ee).d]:[0,1]),Z=w(()=>f(e.params.showEllipse,e.params.confEllipse,r(m),r(b),r(p),r(C))),se=w(()=>r(Z)?[r(Z).min-r(Z).d,r(Z).max+r(Z).d*(1+(e.params.colorBy!=="none"))]:[0,1]),te=w(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!r(F)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+r(F).varname+(r(u).varvaluesUnits?" "+r(u).varvaluesUnits:"")+")");const ue=w(()=>Kd(r(o)));var ve=_e(),Te=J(ve);{var je=ke=>{br(ke,{get title(){return r(te)},get limX(){return r(G)},get limY(){return r(se)},get xLabel(){return r(W)},get yLabel(){return r(Q)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(ge,Ce)=>{var Ee=mm(),Pe=J(Ee);{let ce=w(()=>[r(G)[0]]),de=w(()=>[r(G)[1]]);cr(Pe,{get xStart(){return r(ce)},get xEnd(){return r(de)},yStart:[0],yEnd:[0],get lineColor(){return Rs}})}var ie=L(Pe,2);{var oe=ce=>{{let de=w(()=>[r(se)[0]]),Se=w(()=>[r(se)[1]]);cr(ce,{xStart:[0],xEnd:[0],get yStart(){return r(de)},get yEnd(){return r(Se)},get lineColor(){return Rs}})}};Y(ie,ce=>{e.params.plotType==="p"&&ce(oe)})}var le=L(ie,2);{var pe=ce=>{{let de=w(()=>[e.params.comp1,e.params.comp2]);dm(ce,{get alpha(){return t()},get resobj(){return r(c)},get comp(){return r(de)},get xRange(){return r(_)},set xRange(Se){D(_,Se,!0)},get yRange(){return r(p)},set yRange(Se){D(p,Se,!0)}})}};Y(le,ce=>{e.params.showEllipse&&e.params.plotType==="p"&&ce(pe)})}var Ne=L(le,2);{var he=ce=>{{let de=w(()=>Number.parseInt(e.params.confEllipse)/100);vm(ce,{get xValues(){return r(A)},get yValues(){return r(R)},get confLevel(){return r(de)},get groups(){return r(c).classes},get groupNames(){return r(c).classNames},get groupColors(){return r(F).map},get xRange(){return r(y)},set xRange(Se){D(y,Se,!0)},get yRange(){return r(C)},set yRange(Se){D(C,Se,!0)}})}};Y(Ne,ce=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&r(F)&&ce(he)})}var ze=L(Ne,2);rr(ze,{get xValues(){return r(A)},get yValues(){return r(R)},get labels(){return r(S)},get marker(){return r(z)},get nBars(){return r(o).length},barNum:1,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return r(F).colors},get mainColor(){return r(F).mainColor},get faceColor(){return r(F).faceTColor},get selected(){return e.selected},get callbacks(){return e.callbacks},get xRange(){return r(h)},set xRange(ce){D(h,ce,!0)},get yRange(){return r(m)},set yRange(ce){D(m,ce,!0)}});var Re=L(ze,2);{var Fe=ce=>{{let de=w(()=>e.params.showLabels&&e.params.plotType==="p");rr(ce,{get xValues(){return r(T)},get yValues(){return r(V)},get labels(){return r(I)},get selected(){return e.selected},get callbacks(){return e.callbacks},get nBars(){return r(o).length},barNum:2,get plotType(){return e.params.plotType},get showLabels(){return r(de)},get marker(){return r(H)},get colors(){return r(O).colors},get mainColor(){return r(O).mainColor},get faceColor(){return r(O).faceTColor},get xRange(){return r(g)},set xRange(Se){D(g,Se,!0)},get yRange(){return r(b)},set yRange(Se){D(b,Se,!0)}})}};Y(Re,ce=>{r(T)&&r(V)&&ce(Fe)})}var X=L(Re,2);{var $=ce=>{{let de=w(()=>r(F).breaks!==null);Is(ce,{get show(){return r(de)},get colmap(){return r(F).map},get breaks(){return r(F).breaks},get labels(){return r(F).labels}})}};Y(X,ce=>{r(F)&&ce($)})}var ne=L(X,2);{let ce=w(()=>e.params.colorBy==="none");Tn(ne,{get items(){return r(ue)},get show(){return r(ce)}})}M(ge,Ee)},$$slots:{default:!0}})};Y(Te,ke=>{r(A)&&r(R)&&ke(je)})}M(s,ve),xe()}var hm=K("<!> <!> <!>",1);function gm(s,e){ye(e,!0);let t=w(()=>e.props?e.props.model:null);function l(k,S){return!k||!S||S<1||S>k.ncomp?null:new we(et(k,"loadings",S))}let a=re(void 0),o=re(void 0),c=w(()=>r(t)?rt(r(t).varvalues):null),d=w(()=>r(t)?rt(r(t).varindices):null),u=w(()=>l(r(t),e.params.comp1)),f=w(()=>!r(t)||!e.params.comp1?null:e.params.plotType==="p"?{values:r(u),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&r(c)?{values:r(c),label:r(t).varvaluesName+(r(t).varvaluesUnits?", "+r(t).varvaluesUnits:"")}:{values:r(d),label:"Variables"}),v=w(()=>r(f)?r(f).values:null),h=w(()=>r(f)?r(f).label:null),m=w(()=>l(r(t),e.params.comp2)),g=w(()=>`PC${e.params.comp2}`),b=w(()=>{if(r(o)&&r(o)[0]<Number.POSITIVE_INFINITY&&r(o)[1]>Number.NEGATIVE_INFINITY){const k=(r(o)[1]-r(o)[0])*.1;return[r(o)[0]-k,r(o)[1]+k]}else return[0,1]}),_=w(()=>{if(r(a)&&r(a)[0]<Number.POSITIVE_INFINITY&&r(a)[1]>Number.NEGATIVE_INFINITY){const k=(r(a)[1]-r(a)[0])*.1;return e.params.plotType==="l"&&r(t).varrev?[r(a)[1]+k,r(a)[0]-k]:[r(a)[0]-k,r(a)[1]+k]}else return[0,1]}),p=w(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const k=Math.max(Math.abs(r(_)[0]),Math.abs(r(b)[0]),r(_)[1],r(b)[1])*1.05;return{x:[-k,k],y:[-k,k]}}else{const k=Math.max(Math.abs(r(b)[0]),r(b)[1])*1.05;return{x:r(_),y:[-k,k]}}return{x:r(_),y:r(b)}});var y=_e(),C=J(y);{var E=k=>{br(k,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return r(h)},get yLabel(){return r(g)},get limX(){return r(p).x},get limY(){return r(p).y},children:(S,I)=>{var j=hm(),N=J(j);{let R=w(()=>[r(p).x[0]]),V=w(()=>[r(p).x[1]]);cr(N,{get xStart(){return r(R)},get xEnd(){return r(V)},yStart:[0],yEnd:[0],get lineColor(){return Rs}})}var A=L(N,2);{var T=R=>{{let V=w(()=>[r(p).y[0]]),F=w(()=>[r(p).y[1]]);cr(R,{xStart:[0],xEnd:[0],get yStart(){return r(V)},get yEnd(){return r(F)},get lineColor(){return Rs}})}};Y(A,R=>{e.params.plotType==="p"&&R(T)})}var P=L(A,2);{let R=w(()=>oi+"30");rr(P,{get xValues(){return r(v)},get yValues(){return r(m)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return r(t).varlabels},shortenLabels:!1,get mainColor(){return oi},get faceColor(){return r(R)},get xRange(){return r(a)},set xRange(V){D(a,V,!0)},get yRange(){return r(o)},set yRange(V){D(o,V,!0)}})}M(S,j)},$$slots:{default:!0}})};Y(C,k=>{r(v)&&r(m)&&k(E)})}M(s,y),xe()}function Zl(s){const e=Object.keys(s),t=s[e[0]],l=t.nMembers>0&&t.nStrangers>0,a=e[0]==="new",o=t.nMembers>0?"members":t.nStrangers>0?"strangers":"all",c={resID:{el:We,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},subset:{el:We,hidden:!l||a,default:o,label:"Show",props:{options:["members","strangers","all"]}},transType:{el:We,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}};return t.nStrangers>0&&t.nStrangers==0&&t.classNames&&t.classNames.length>1&&(c.colorBy={el:We,hidden:!1,default:"roles",label:"Color by",props:{options:["roles","classes"]}}),c}function hi(s){const e=Object.keys(s),t=s[e[0]],l=[...e,"both"],a=t.nMembers>0?t.nStrangers>0?["sens","spec","eff","sel"]:["sens"]:["spec","sel"];return{resID:{el:We,hidden:e.length==1,default:e[0],label:"Show",props:{options:l}},statName:{el:We,hidden:a.length==1,default:a[0],label:"FoM",props:{options:a}},zoom:{el:Jt,hidden:!1,default:!1,label:"Zoom",props:{options:["off","on"]}}}}function Ql(s){const e=Object.keys(s),t=s[e[0]],l=e.concat(["both","diff"]),a={resID:{el:We,hidden:e.length==1,default:e[0],label:"Result",props:{options:l}},transType:{el:We,hidden:e.length>1,default:"no",label:"Transform",props:{options:["no","log"]}},distType:{el:We,hidden:!1,default:"h",label:"Distance",props:{options:["h","q","f"]}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}};return t.classNames&&t.classNames.length>1&&(a.colorBy={el:We,hidden:!1,default:"none",label:"Color by",props:{options:["none","groups"]}}),a}function pm(){return{dfID:{el:We,hidden:!1,default:"both",label:"DoF type",props:{options:["both","Nh","Nq"]}}}}function bm(s){return{resID:{el:We,hidden:s.length==1,default:s[0],label:"Results",props:{options:s}}}}function _m(s){return{resID:{el:We,hidden:s.length==1,default:s[0],label:"Results",props:{options:s}}}}function gi(s){return{resID:{el:We,hidden:s.length==1,default:s[0],label:"Results",props:{options:s}}}}function wm(s){return{plotType:{el:Yo,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:pr,hidden:!1,default:s.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:s.ncomp}},comp1:{el:pr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:s.ncomp}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},axesEqual:{el:Jt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function $l(s){const e=Object.keys(s),t=s[e[0]],l=t.classNames&&t.classNames.length>1?["none","groups","variable"]:["none","variable"],a=e.concat(["both"]);return{resID:{el:We,hidden:e.length==1,default:e[0],label:"Show",props:{options:a}},plotType:{el:Yo,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:pr,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:pr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},showEllipse:{el:Jt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:We,hidden:!1,default:"none",label:"Color by",props:{options:l}},colorByVar:{el:pr,hidden:!0,default:1,label:"Variable",props:{min:1,max:t.ncols}},confEllipse:{el:We,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}var ym=K("<!> <!>",1);function xm(s,e){ye(e,!0);const t=(g,b=vt)=>{fe(g,{label:"Selected",children:(_,p)=>{tt(_,{onclick:()=>e.markOutlier(b()),text:"remove"})},$$slots:{default:!0}})},l=(g,b=vt)=>{fe(g,{label:"Selected",children:(_,p)=>{var y=ym(),C=J(y);tt(C,{onclick:()=>e.showContributions(b()),text:"plot"});var E=L(C,2);tt(E,{onclick:()=>e.markOutlier(b()),text:"remove"}),M(_,y)},$$slots:{default:!0}})},a={cal:e.calres.pca,pv:e.pvres.pca},o={cal:e.calset,pv:e.pvset},c=w(()=>({cal:e.calres.simca,pv:e.pvres.simca})),d={regular:Wr.regular,extreme:Wr.extreme,outlier:Wr.outlier},u=w(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Zn,buttons:l},distances:{label:"Distances",scope:"objects",component:Qn,buttons:l},dof:{label:"DoF",scope:"stats",component:om},extremes:{label:"Extremes",scope:"stats",component:Jl},sensitivity:{label:"Sensitivity",scope:"stats",component:qs},loadings:{label:"Loadings",scope:"stats",component:gm},scores:{label:"Scores",scope:"objects",component:$n,buttons:t}})),f=qe({acceptance:Zl(a),distances:Ql(a),dof:pm(),extremes:gi(["cal","pv","both"]),sensitivity:hi(r(c)),scores:$l(a),loadings:wm(e.model)});let v=re(qe({acceptance:kt(f.acceptance),distances:kt(f.distances),dof:kt(f.dof),extremes:kt(f.extremes),sensitivity:kt(f.sensitivity),scores:kt(f.scores),loadings:kt(f.loadings)}));me(()=>{const g={};e.calres.simca.nMembers>0&&(g.sens=Do(e.calres.simca.nMembers,e.simca.alpha)),r(v).sensitivity.ci=g}),me(()=>{r(v).acceptance.ncomp=e.simca.ncomp,r(v).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,r(v).acceptance.limType=e.simca.limType,r(v).acceptance.alpha=e.simca.alpha,r(v).acceptance.gamma=e.simca.gamma}),me(()=>{if(e.simca.limType){const b={cal:e.calres.simca,pv:e.pvres.simca}[r(v).acceptance.resID].v[e.simca.ncomp-1];r(v).acceptance.colorByObj={classColmap:d,labels:[`regular: ${b.rolsNum.regular}`,`extreme: ${b.rolsNum.extreme}`,`outliers: ${b.rolsNum.outlier}`],values:b.rols}}}),me(()=>{r(v).scores.plotType!=="p"?(f.scores.comp1.hidden=!0,f.scores.showEllipse.hidden=!0,r(v).scores.showEllipse=!1):(f.scores.comp1.hidden=!1,f.scores.showEllipse.hidden=!1),r(v).scores.plotType==="l"||r(v).scores.plotType==="b"?(f.scores.colorBy.hidden=!0,r(v).scores.colorBy="none"):f.scores.colorBy.hidden=!1,r(v).scores.colorBy==="variable"?f.scores.colorByVar.hidden=!1:f.scores.colorByVar.hidden=!0,r(v).scores.colorBy==="groups"&&r(v).scores.plotType==="p"?f.scores.confEllipse.hidden=!1:(f.scores.confEllipse.hidden=!0,r(v).scores.confEllipse="none"),r(v).scores.colorBy==="variable"?(r(v).scores.resID==="both"&&(r(v).scores.resID="cal"),f.scores.resID.props.options=["cal","pv"]):f.scores.resID.props.options=["cal","pv","both"]}),me(()=>{r(v).loadings.plotType!=="p"?f.loadings.comp1.hidden=!0:f.loadings.comp1.hidden=!1});const h=w(()=>({res:a,classres:r(c),model:e.model,simca:e.simca,data:o,ncomp:e.simca.ncomp})),m={markOutlier:e.markOutlier,showContributions:e.showContributions};Kl(s,{get plots(){return r(u)},get controls(){return f},get props(){return r(h)},get callbacks(){return m},get params(){return r(v)},set params(g){D(v,g,!0)}}),xe()}var km=K('<div class="outliers-pane svelte-1mp4dba"><!></div>'),Em=K('<div class="model-calculator svelte-1mp4dba"><!></div>'),Sm=K('<div class="pcv-calculator svelte-1mp4dba"><!></div>'),Cm=K('<div class="buttons"><!> <!> <!></div>'),Nm=K('<div class="model-stats svelte-1mp4dba"><!></div> <div class="result-stats svelte-1mp4dba"><!></div>',1),Am=K(`<p class="svelte-1mp4dba">In this tab you can train a DD-SIMCA model and optimize its parameters using Procrustes cross-validation. After creating the model you can save it to a file and use it in other tabs. For example, validate and tune it using test set (tab <strong>Test</strong>) or apply it to a dataset with unknown class membership (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1mp4dba">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1mp4dba">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),Tm=K(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to create a global PCA model for the calibration set, which will be the basis for the SIMCA model. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to set
               optimal number later.</p>`,1),Mm=K('<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">After this step SIMCA model will be created automatically and you will be able to tune its parameters.</p>',1),jm=K("<!> <!>",1),Pm=K('<div class="help-text svelte-1mp4dba"><!></div>'),Lm=K('<!> <div class="app-container svelte-1mp4dba"><div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <!> <!> <div class="simca-settings svelte-1mp4dba"><!> <!></div> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>',1);function Im(s,e){ye(e,!0);const t=w(()=>e.session.train);let l=re(-1),a=re(!1);function o(G){if(G<0||G>r(t).calres.pca.nrows-1)return;const Z=r(t).calres.pca.objindices[G];Z>=0&&!r(t).outliers.includes(Z)&&(r(t).outliers.push(Z),r(t).model=null,r(t).simca=null,r(t).pvres.simca=null,r(t).pvres.pca=null,r(t).calres.simca=null,r(t).calres.pca=null,r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null)}function c(){r(t).outliers=[],r(t).model=null,r(t).pvres.simca=null,r(t).pvres.pca=null,r(t).calres.simca=null,r(t).calres.pca=null,r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null}function d(){r(t).outliers.pop(),r(t).model=null,r(t).pvres.simca=null,r(t).pvres.pca=null,r(t).calres.simca=null,r(t).calres.pca=null,r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null}function u(G){G<0||(D(l,G,!0),D(a,!0))}function f(){D(a,!1),D(l,-1)}let v=w(()=>r(t).calres.pca?{members:ir(0,r(t).calres.pca.nrows-1),strangers:[]}:null);us(()=>{r(t).calset===null?(r(t).model=null,r(t).calsetp=null,r(t).className=null,r(t).outliers=[],r(t).pvset=null,r(t).prepmodel=null,r(t).prepobj=[],r(t).prepType=null):r(t).calset&&!r(t).className&&(r(t).className=r(t).calset.classNames[0]),r(t).model===null&&(r(t).calres.simca=null,r(t).simca=null,r(t).calres.pca=null,r(t).pvset=null),r(t).pvset===null&&(r(t).pvres.simca=null,r(t).pvres.pca=null)}),me(()=>{r(t).calset===null&&(r(t).calsetp=null)}),me(()=>{r(t).calsetp===null&&(r(t).simca=null,r(t).pvset=null,r(t).model=null)}),me(()=>{r(t).model===null&&(r(t).pvres={pca:null,scima:null},r(t).calres={pca:null,simca:null},r(t).pvset=null)}),me(()=>{r(t).pvset===null&&(r(t).pvres.simca=null,r(t).pvres.pca=null)}),me(()=>{r(t).calres.pca&&r(t).simca&&r(t).simca.eCrit&&r(t).simca.oCrit&&r(v)&&(r(t).calres.simca=Cs(r(t).calres.pca,Pt(()=>r(t).simca.limType),r(t).simca.eCrit,r(t).simca.oCrit,r(v)))}),me(()=>{r(t).pvres.pca&&r(t).simca&&r(v)&&(r(t).pvres.simca=Cs(r(t).pvres.pca,Pt(()=>r(t).simca.limType),r(t).simca.eCrit,r(t).simca.oCrit,r(v)))}),me(()=>{const G=Pt(()=>JSON.stringify(e.session,Gn));r(t).simca?e.backupSession(G,r(t).model,r(t).calset,r(t).pvset,r(t).simca.ncomp,r(t).pvres.simca):e.backupSession(G,r(t).model,r(t).calset,r(t).pvset,r(t).simca,r(t).pvres.simca)});var h=Lm(),m=J(h);{var g=G=>{{let Z=w(()=>({cal:r(t).calres.pca,pv:r(t).pvres.pca}));Yl(G,{get model_getter(){return et},get res_getter(){return Kt},get model(){return r(t).model},get res(){return r(Z)},closeModal:f,get ncomp(){return r(t).simca.ncomp},get selected(){return r(l)}})}};Y(m,G=>{r(a)&&r(t).simca&&r(t).calres.pca&&r(t).pvres.pca&&G(g)})}var b=L(m,2),_=q(b),p=q(_),y=q(p);Hl(y,{className:"Class",classMandatory:!0,classUnique:!0,get dataset(){return r(t).calset},set dataset(G){r(t).calset=G}});var C=L(p,2);{var E=G=>{var Z=km(),se=q(Z);jl(se,{get outliers(){return r(t).outliers},get dataset(){return r(t).calset},resetOutliers:c,undoOutliers:d}),M(G,Z)};Y(C,G=>{r(t).outliers&&r(t).outliers.length>0&&G(E)})}var k=L(C,2);{var S=G=>{t1(G,{get WASM(){return e.WASM},get rawdata(){return r(t).calset},get outliers(){return r(t).outliers},get prepType(){return r(t).prepType},set prepType(Z){r(t).prepType=Z},get prepobj(){return r(t).prepobj},set prepobj(Z){r(t).prepobj=Z},get prepdata(){return r(t).calsetp},set prepdata(Z){r(t).calsetp=Z},get prepmeta(){return r(t).prepmeta},set prepmeta(Z){r(t).prepmeta=Z},get prepmodel(){return r(t).prepmodel},set prepmodel(Z){r(t).prepmodel=Z}})};Y(k,G=>{r(t).calset&&G(S)})}var I=L(k,2);{var j=G=>{var Z=Em(),se=q(Z);x1(se,{get WASM(){return e.WASM},get dataset(){return r(t).calsetp},get outliers(){return r(t).outliers},get model(){return r(t).model},set model(te){r(t).model=te},get resobj(){return r(t).calres.pca},set resobj(te){r(t).calres.pca=te}}),M(G,Z)};Y(I,G=>{r(t).calsetp&&G(j)})}var N=L(I,2);{var A=G=>{var Z=Sm(),se=q(Z);T1(se,{get WASM(){return e.WASM},get calset(){return r(t).calsetp},get outliers(){return r(t).outliers},get model(){return r(t).model},get calres(){return r(t).calres.pca},get pvset(){return r(t).pvset},set pvset(te){r(t).pvset=te},get pvres(){return r(t).pvres.pca},set pvres(te){r(t).pvres.pca=te}}),M(G,Z)};Y(N,G=>{r(t).model&&r(t).calsetp&&r(t).calres.pca&&G(A)})}var T=L(N,2),P=q(T);{var R=G=>{Xl(G,{get model(){return r(t).model},get className(){return r(t).className},get simca(){return r(t).simca},set simca(Z){r(t).simca=Z}})};Y(P,G=>{r(t).model&&r(t).pvres.pca&&r(t).calres.pca&&G(R)})}var V=L(P,2);{var F=G=>{fe(G,{label:"Download",children:(Z,se)=>{var te=Cm(),ue=q(te);tt(ue,{onclick:()=>Ns(r(t).model,r(t).simca,r(t).calres,r(t).calset,"train",r(t).outliers),text:"Res (cal)"});var ve=L(ue,2);tt(ve,{onclick:()=>Ns(r(t).model,r(t).simca,r(t).pvres,r(t).pvset,"PV",r(t).outliers),text:"Res (pv)"});var Te=L(ve,2);tt(Te,{onclick:()=>Sl(r(t).model,r(t).simca,r(t).prepmodel),text:"Model"}),M(Z,te)},$$slots:{default:!0}})};Y(V,G=>{r(t).model&&r(t).pvres.simca&&r(t).calres.simca&&G(F)})}var z=L(T,2);{var O=G=>{var Z=Nm(),se=J(Z),te=q(se);Gl(te,{get model(){return r(t).model},get simca(){return r(t).simca}});var ue=L(se,2),ve=q(ue);R1(ve,{get calres(){return r(t).calres.simca},get pvres(){return r(t).pvres.simca},get ncomp(){return r(t).simca.ncomp}}),M(G,Z)};Y(z,G=>{r(t).simca&&r(t).pvres.simca&&r(t).calres.simca&&G(O)})}var H=L(_,2),W=q(H);{var Q=G=>{var Z=Pm(),se=q(Z);{var te=ve=>{var Te=Am();M(ve,Te)},ue=ve=>{var Te=jm(),je=J(Te);{var ke=Ee=>{var Pe=Tm();M(Ee,Pe)};Y(je,Ee=>{r(t).model||Ee(ke)})}var ge=L(je,2);{var Ce=Ee=>{var Pe=Mm();M(Ee,Pe)};Y(ge,Ee=>{r(t).model&&!r(t).pvset&&Ee(Ce)})}M(ve,Te)};Y(se,ve=>{r(t).calset?ve(ue,!1):ve(te)})}M(G,Z)},ee=G=>{var Z=_e(),se=J(Z);{var te=ue=>{var ve=_e(),Te=J(ve);ln(Te,()=>r(t).pvres.pca,je=>{xm(je,Gt({markOutlier:o,showContributions:u},()=>r(t)))}),M(ue,ve)};Y(se,ue=>{r(t).model&&r(t).simca&&r(t).pvres.pca&&ue(te)},!0)}M(G,Z)};Y(W,G=>{!r(t).pvres.simca||!r(t).calres.simca?G(Q):G(ee,!1)})}M(s,h),xe()}var Rm=K("<!> <!>",1),zm=K('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),qm=K('<p class="model-info svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">PCA model:</span> <!></p> <!>',1),Fm=K("<p><!></p>"),Om=K("<!> <!>",1);function pi(s,e){ye(e,!0);let t=B(e,"model",15),l=B(e,"simca",15),a=re(""),o=re("neutral"),c=re("");function d(y){try{const C=JSON.parse(y,Al);if(!Object.keys(C).includes("pca","simca")||C.pca.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain SIMCA mdel.");if(!Object.keys(C.pca).includes("hash"))throw Error('you try to load model incompatible with this app version, create a new model or use <a href="/ddsimca-old/">old version</a> of the app.');Array.isArray(C.pca.v)&&(C.pca.v=Float64Array.from(C.pca.v)),C.pca.fileName=r(v),t(C.pca),l(C.simca),D(o,"success"),D(c,"")}catch(C){t(null),D(o,"error"),D(c,C,!0)}}function u(y){const C=new FileReader;C.onload=()=>{d(C.result)},C.readAsText(r(a))}function f(){D(a,""),t(null),D(o,"neutral"),D(c,"")}me(()=>{r(a)===null?(t(null),D(o,"neutral"),D(c,"")):(D(o,"neutral"),D(c,""))});let v=w(()=>r(a)?r(a).name.replace(/\.[^/.]+$/,""):"");var h=Om(),m=J(h);{var g=y=>{var C=Rm(),E=J(C);ln(E,()=>r(a),I=>{fe(I,{children:(j,N)=>{js(j,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return r(a)},set file(A){D(a,A,!0)}})},$$slots:{default:!0}})});var k=L(E,2);{var S=I=>{fe(I,{label:" ",children:(j,N)=>{tt(j,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(k,I=>{r(a)&&I(S)})}M(y,C)},b=y=>{fe(y,{name:"info",children:(C,E)=>{var k=qm(),S=J(k),I=L(q(S),2),j=q(I),N=L(I,4),A=L(N);{var T=R=>{var V=zm(),F=L(J(V),3);Ul(F,{get prepmodel(){return t().prep}}),M(R,V)};Y(A,R=>{t().prep&&R(T)})}var P=L(S,2);gr(P,{onclick:f}),ae(()=>{U(I,"title",t().fileName),be(j,t().fileName),be(N,` ${t().ncomp??""} PCs${t().center?", centered":""}${t().scale?", scaled":""} `)}),M(C,k)},$$slots:{default:!0}})};Y(m,y=>{t()?y(b,!1):y(g)})}var _=L(m,2);{var p=y=>{fe(y,{status:"error",children:(C,E)=>{var k=Fm(),S=q(k);pt(S,()=>r(c)),M(C,k)},$$slots:{default:!0}})};Y(_,y=>{(r(o)==="error"||r(c))&&y(p)})}M(s,h),xe()}var Dm=K('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Out</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Sensitivity</td><td class="svelte-k5uafz"> </td></tr>',1),Bm=K('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">In</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Specificity</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Selectivity</td><td class="svelte-k5uafz"> </td></tr>',1),Vm=K('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Efficiency</td><td class="svelte-k5uafz"> </td></tr>'),Ym=K('<table class="svelte-k5uafz"><thead><tr class="svelte-k5uafz"><th class="svelte-k5uafz"></th><th class="svelte-k5uafz">Test</th></tr></thead><tbody><tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Members</td><td class="svelte-k5uafz"> </td></tr><!><tr class="section svelte-k5uafz"><td class="label svelte-k5uafz">Strangers</td><td class="svelte-k5uafz"> </td></tr><!><!></tbody></table>');function Wm(s,e){ye(e,!0);var t=_e(),l=J(t);{var a=o=>{var c=Ym(),d=L(q(c)),u=q(d),f=L(q(u)),v=q(f),h=L(u);{var m=k=>{var S=Dm(),I=J(S),j=L(q(I)),N=q(j),A=L(I,2),T=L(q(A)),P=q(T);ae(R=>{be(N,e.res.v[e.ncomp-1].rolsNum.outlier+e.res.v[e.ncomp-1].rolsNum.extreme),be(P,R)},[()=>e.res.stat.sensitivity[e.ncomp-1].toFixed(3)]),M(k,S)};Y(h,k=>{e.res.nMembers>0&&k(m)})}var g=L(h),b=L(q(g)),_=q(b),p=L(g);{var y=k=>{var S=Bm(),I=J(S),j=L(q(I)),N=q(j),A=L(I,2),T=L(q(A)),P=q(T),R=L(A,2),V=L(q(R)),F=q(V);ae((z,O)=>{be(N,e.res.v[e.ncomp-1].decsNum.in-e.res.v[e.ncomp-1].rolsNum.regular),be(P,z),be(F,O)},[()=>e.res.stat.specificity[e.ncomp-1].toFixed(3),()=>e.res.stat.selectivity[e.ncomp-1].toFixed(3)]),M(k,S)};Y(p,k=>{e.res.nStrangers>0&&k(y)})}var C=L(p);{var E=k=>{var S=Vm(),I=L(q(S)),j=q(I);ae(N=>be(j,N),[()=>e.res.stat.efficiency[e.ncomp-1].toFixed(3)]),M(k,S)};Y(C,k=>{e.res.nStrangers>0&&e.res.nMembers>0&&k(E)})}ae(()=>{be(v,e.res.nMembers),be(_,e.res.nStrangers)}),M(o,c)};Y(l,o=>{e.res&&o(a)})}M(s,t),xe()}var Um=K("<!> <!> <!>",1),Hm=K("<!> <!> <!>",1);function bi(s,e){ye(e,!0);const t="#e0e0e0",l="Number of aliens (expected)",a="Number of aliens (observed)",o="plot-aliens";function c(N){const A=we.zeros(N+1),T=we.zeros(N+1),P=we.zeros(N+1),R=we.zeros(N+1);for(let V=1;V<N;V++){const F=V/N,z=2*Math.sqrt(V*(1-F));A.v[V]=V,P.v[V]=V,T.v[V]=V-z,R.v[V]=V+z}return A.v[N]=N,P.v[N]=N,T.v[N]=N,R.v[N]=N,{xStart:A,xEnd:P,yStart:T,yEnd:R}}function d(N,A,T){const P=N.v[T-1],R=P.rolsNum.alien,V=we.zeros(R);for(let F=1;F<=R;F++){const z=F/R,O=_s(z),H=P.m*Math.pow(P.Sz*O+P.Mz,1/P.hz);let W=0;for(let Q of N.ind.strangers)P.rols[Q]==="alien"&&P.f[Q]<H&&(W+=1);V.v[F-1]=W}return V}let u=w(()=>e.props&&e.props.classres?e.props.classres:null),f=w(()=>e.props&&e.props.simca?e.props.simca:null),v=w(()=>e.props&&e.props.ncomp?e.props.ncomp:null),h=w(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(r(u))),m=w(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),g=w(()=>r(h)?r(h).map(N=>({id:N,label:N,point:{marker:1,lineColor:mt[N],faceColor:Ur[N],marker:Vt[N],markerSize:.85,lineWidth:1.5}})):null),b=w(()=>r(u)&&r(h)?r(h).reduce((N,A)=>(N[A]=we.seq(1,r(u)[A].v[r(v)-1].rolsNum.alien),N),{}):null),_=w(()=>r(u)&&r(h)&&r(v)?r(h).reduce((N,A)=>(N[A]=d(r(u)[A],r(f),r(v)),N),{}):null),p=w(()=>r(h)?r(h).reduce((N,A)=>Math.max(N,r(b)[A].length),0):1),y=w(()=>r(p)>1?c(r(p)):null),C=w(()=>r(b)?[-1,r(p)+2]:[0,1]),E=w(()=>r(b)?[-1,r(p)+2]:[0,1]),k=w(()=>r(v)?`Aliens (A = ${r(v)})`:"Aliens");var S=_e(),I=J(S);{var j=N=>{br(N,{get title(){return r(k)},xLabel:l,yLabel:a,get limX(){return r(C)},get limY(){return r(E)},fileName:o,whole:!0,children:(A,T)=>{var P=Hm(),R=J(P);{var V=H=>{var W=Um(),Q=J(W);cr(Q,Gt(()=>r(y),{lineColor:t}));var ee=L(Q,2);Bt(ee,{get xValues(){return r(y).xStart},get yValues(){return r(y).yStart},lineColor:t});var G=L(ee,2);Bt(G,{get xValues(){return r(y).xEnd},get yValues(){return r(y).yEnd},lineColor:t}),M(H,W)};Y(R,H=>{r(y)&&H(V)})}var F=L(R,2);Ye(F,17,()=>r(h),Ge,(H,W)=>{rr(H,{get xValues(){return r(b)[r(W)]},get yValues(){return r(_)[r(W)]},plotType:"p",showLabels:!1,get faceColor(){return Ur[r(W)]},get mainColor(){return mt[r(W)]},get marker(){return Vt[r(W)]},lineWidth:1.5})});var z=L(F,2);{var O=H=>{Tn(H,{get items(){return r(g)},get position(){return r(m)}})};Y(z,H=>{r(g)&&r(g).length>0&&H(O)})}M(A,P)},$$slots:{default:!0}})};Y(I,N=>{r(u)&&N(j)})}M(s,S),xe()}var Gm=K("<!> <!> <!> <!>",1);function _i(s,e){ye(e,!0);const t="1 – selectivity, β",l="Expected sensitivity, 1 – ɑ",a="plot-selectivity-integral",o=[-.05,1.05],c=[-.05,1.05],d=w(()=>e.props&&e.props.classres?e.props.classres:null),u=w(()=>e.props&&e.props.simca?e.props.simca:null),f=w(()=>r(d)?Object.keys(r(d))[0]:null),v=141;function h(A){const T=we.zeros(v),P=we.zeros(v);T.v[0]=1,P.v[0]=1;let R=1,V=0;for(let F=.001;F<.1;F=F+.002){const z=A(F);T.v[R]=z,P.v[R]=1-F,V=V+z*.002,R=R+1}for(let F=.1;F<.9;F=F+.02){const z=A(F);T.v[R]=z,P.v[R]=1-F,V=V+z*.02,R=R+1}for(let F=.9;F<1;F=F+.002){const z=A(F);T.v[R]=z,P.v[R]=1-F,V=V+z*.002,R=R+1}return T.v[R]=0,P.v[R]=0,{x:T,y:P,auc:1-V}}let m=re(void 0),g=re(void 0),b=re(void 0);me(()=>{(r(g)!==r(u).ncomp||r(b)!==r(u).limType)&&(D(g,r(u).ncomp,!0),D(b,r(u).limType,!0),D(m,r(d)[r(f)].v[r(u).ncomp-1],!0))});const _=w(()=>r(m)?1/(r(m).k+r(m).s):null),p=w(()=>r(m)?1/r(m).Sz:null);function y(A){if(!r(m))return null;const P=xt(1-A,r(m).k)/r(m).f0;return bs((Math.pow(P*r(_),r(m).hz)-r(m).Mz)*r(p))}const C=w(()=>r(u).alpha/100),E=w(()=>y(r(C))),k=w(()=>h(y));let S=w(()=>r(u).ncomp?`Selecitivity (A = ${r(u).ncomp}, AUC = ${r(k).auc.toFixed(4)})`:"Selectivity");var I=_e(),j=J(I);{var N=A=>{br(A,{get title(){return r(S)},xLabel:t,yLabel:l,get limX(){return o},get limY(){return c},fileName:a,children:(T,P)=>{var R=Gm(),V=J(R);cr(V,{xStart:[0],xEnd:[1],yStart:[0],yEnd:[1],lineColor:"#a0a0a0",lineType:3});var F=L(V,2);rr(F,{get xValues(){return r(k).x},get yValues(){return r(k).y},plotType:"l",showLabels:!1,get mainColor(){return mt.test},lineWidth:1.5});var z=L(F,2);{let H=w(()=>[o[0]]),W=w(()=>[o[1]]),Q=w(()=>[1-r(C)]),ee=w(()=>[1-r(C)]);cr(z,{get xStart(){return r(H)},get xEnd(){return r(W)},get yStart(){return r(Q)},get yEnd(){return r(ee)},lineColor:"#a0a0a0"})}var O=L(z,2);{let H=w(()=>[r(E)]),W=w(()=>[1-r(C)]);si(O,{get xValues(){return r(H)},get yValues(){return r(W)},get lineColor(){return mt.test},lineWidth:2,get faceColor(){return mt.test}})}M(T,R)},$$slots:{default:!0}})};Y(j,A=>{r(k)&&A(N)})}M(s,I),xe()}var Xm=K("<!> <!>",1);function Km(s,e){ye(e,!0);const t=(E,k=vt)=>{fe(E,{label:"Selected",children:(S,I)=>{tt(S,{onclick:()=>e.markOutlier(k()),text:"remove"})},$$slots:{default:!0}})},l=(E,k=vt)=>{fe(E,{label:"Selected",children:(S,I)=>{var j=Xm(),N=J(j);tt(N,{onclick:()=>e.showContributions(k()),text:"plot"});var A=L(N,2);tt(A,{onclick:()=>e.markOutlier(k()),text:"remove"}),M(S,j)},$$slots:{default:!0}})},a={test:e.testres.pca},o={test:e.testres.simca},c={test:e.testset},d=w(()=>({test:e.testres.simca})),u={regular:Wr.regular,extreme:Wr.extreme,outlier:Wr.outlier},f={alien:Wr.alien,external:Wr.external},v=w(()=>{const E=e.testres.simca.v[e.simca.ncomp-1];return{members:{classColmap:u,labels:[`regular: ${E.rolsNum.regular}`,`extreme: ${E.rolsNum.extreme}`,`outliers: ${E.rolsNum.outlier}`],values:E.rols,ind:e.testres.simca.ind.members},strangers:{classColmap:f,labels:[`aliens: ${E.rolsNum.alien}`,`external: ${E.rolsNum.external}`],values:E.rols,ind:e.testres.simca.ind.strangers}}}),h=w(()=>e.testres.simca.nMembers>0&&e.testres.simca.nStrangers>0?{acceptance:{label:"Acceptance",scope:"objects",component:Zn,buttons:l},distances:{label:"Distances",scope:"objects",component:Qn,buttons:l},extremes:{label:"Extremes",scope:"stats",component:Jl},aliens:{label:"Aliens",scope:"stats",component:bi},foms:{label:"FoMs",scope:"stats",component:qs},sel:{label:"Selectivity",scope:"stats",component:_i},scores:{label:"Scores",scope:"objects",component:$n,buttons:t}}:e.testres.simca.nMembers>0?{acceptance:{label:"Acceptance",scope:"objects",component:Zn,buttons:l},distances:{label:"Distances",scope:"objects",component:Qn,buttons:l},extremes:{label:"Extremes",scope:"stats",component:Jl},foms:{label:"FoMs",scope:"stats",component:qs},scores:{label:"Scores",scope:"objects",component:$n,buttons:t}}:{acceptance:{label:"Acceptance",scope:"objects",component:Zn,buttons:l},distances:{label:"Distances",scope:"objects",component:Qn,buttons:l},aliens:{label:"Aliens",scope:"stats",component:bi},foms:{label:"FoMs",scope:"stats",component:qs},sel:{label:"Selectivity",scope:"stats",component:_i},scores:{label:"Scores",scope:"objects",component:$n,buttons:t}}),m=qe({acceptance:Zl(o),distances:Ql(a),extremes:gi(["test"]),aliens:_m(["test"]),foms:hi(o),sel:bm(["test"]),scores:$l(a)});let g=re(qe({acceptance:kt(m.acceptance),distances:kt(m.distances),extremes:kt(m.extremes),aliens:kt(m.aliens),foms:kt(m.foms),sel:kt(m.sel),scores:kt(m.scores)}));me(()=>{const E={};e.testres.simca.nMembers>0&&(E.sens=Do(e.testres.simca.nMembers,e.simca.alpha)),r(g).foms.ci=E}),me(()=>{r(g).acceptance.subset&&e.resetSelection()}),me(()=>{r(g).acceptance.ncomp=e.simca.ncomp,r(g).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,r(g).acceptance.limType=e.simca.limType,r(g).acceptance.alpha=e.simca.alpha,r(g).acceptance.gamma=e.simca.gamma}),me(()=>{r(v)&&r(g).acceptance.subset&&(r(g).acceptance.colorByObj=r(g).acceptance.subset!=="all"?r(v)[r(g).acceptance.subset]:null)}),me(()=>{r(g).acceptance.colorBy=r(g).acceptance.subset!=="all"?"roles":"classes"}),me(()=>{r(g).scores.plotType!=="p"?(m.scores.comp1.hidden=!0,m.scores.showEllipse.hidden=!0,r(g).scores.showEllipse=!1):(m.scores.comp1.hidden=!1,m.scores.showEllipse.hidden=!1),r(g).scores.plotType==="l"||r(g).scores.plotType==="b"?(m.scores.colorBy.hidden=!0,r(g).scores.colorBy="none"):m.scores.colorBy.hidden=!1,r(g).scores.colorBy==="variable"?m.scores.colorByVar.hidden=!1:m.scores.colorByVar.hidden=!0,r(g).scores.colorBy==="groups"&&r(g).scores.plotType==="p"?m.scores.confEllipse.hidden=!1:(m.scores.confEllipse.hidden=!0,r(g).scores.confEllipse="none")});const b=w(()=>({res:a,classres:r(d),model:e.model,simca:e.simca,data:c,ncomp:e.simca.ncomp})),_={markOutlier:e.markOutlier,showContributions:e.showContributions};var p=_e(),y=J(p);{var C=E=>{Kl(E,{get plots(){return r(h)},get controls(){return m},get props(){return r(b)},get callbacks(){return _},get params(){return r(g)},set params(k){D(g,k,!0)}})};Y(y,E=>{e.simca&&e.testres&&E(C)})}M(s,p),xe()}var Jm=K('<div class="data-loader svelte-1w77c1q"><!></div>'),Zm=K('<div class="outliers-pane svelte-1w77c1q"><!></div>'),Qm=K('<div class="buttons"><!> <!></div>'),$m=K('<div class="model-stats svelte-1w77c1q"><!></div> <div class="result-stats svelte-1w77c1q"><!></div>',1),eh=K('<p class="svelte-1w77c1q"><strong>Step 1</strong></p> <p class="svelte-1w77c1q">Load previously trained DD-SIMCA model from file.</p>',1),th=K(`<p class="svelte-1w77c1q"><strong>Step 2</strong></p> <p class="svelte-1w77c1q">Load test set set from CSV file. The requirements to the file are the same as for the training set (column with
               class labels is mandatory), but test set may contain class labels both for target class (members) as well as for
               alternative classes (strangers).</p>`,1),rh=K(`<div class="help-text svelte-1w77c1q"><p class="svelte-1w77c1q">In this tab you can apply previously trained DD-SIMCA model to a test set. The test set can include target class members,
            objects belonging to alternative classes or both. You can use them for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),nh=K('<!> <div class="app-container svelte-1w77c1q"><div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!> <!> <div class="simca-settings svelte-1w77c1q"><!> <!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>',1);function sh(s,e){ye(e,!0);const t=w(()=>e.session.test);let l=re(-1),a=re(!1);function o(H){if(H<0||H>r(t).testres.pca.nrows-1)return;const W=r(t).testres.pca.objindices[H];W>=0&&!r(t).outliers.includes(W)&&(r(t).outliers.push(W),r(t).testres.simca=null,r(t).testres.pca=null)}function c(H){H<0||(D(l,H,!0),D(a,!0))}function d(){D(a,!1),D(l,-1)}function u(){r(t).outliers=[],r(t).testres.simca=null,r(t).testres.pca=null}function f(){r(t).outliers.pop(),r(t).testres.simca=null,r(t).testres.pca=null}function v(){D(l,-1)}us(()=>{r(t).testset===null&&(r(t).outliers=[],r(t).testres.simca=null,r(t).testres.pca=null),r(t).model===null&&(r(t).testres.simca=null,r(t).testres.pca=null,r(t).testset=null,r(t).outliers=[],r(t).simca=null)}),me(()=>{r(t).model===null&&(r(t).outliers=[],r(t).testres.simca=null,r(t).testres.pca=null,r(t).testset=null)}),me(()=>{r(t).testset===null&&(r(t).outliers=[],r(t).testres.simca=null,r(t).testres.pca=null,r(t).ind=null)}),me(()=>{if(!r(t).testres.pca||!r(t).simca||r(t).testres.pca.classes.length<1)return;const H=r(t).testres.pca.classes,W=[],Q=[];for(let ee=0;ee<H.length;ee++)H[ee]===r(t).simca.className?W.push(ee):Q.push(ee);r(t).ind={members:W,strangers:Q}}),me(()=>{r(t).testres.pca&&r(t).simca&&r(t).ind&&(r(t).testres.simca=Cs(r(t).testres.pca,Pt(()=>r(t).simca.limType),r(t).simca.eCrit,r(t).simca.oCrit,r(t).ind))}),me(()=>{const H=Pt(()=>JSON.stringify(e.session,Gn));r(t).simca?e.backupSession(H,r(t).model,r(t).testset,r(t).simca.ncomp,r(t).testres.simca):e.backupSession(H,r(t).model,r(t).testset,r(t).simca,r(t).testres.simca)});var h=nh(),m=J(h);{var g=H=>{{let W=w(()=>({test:r(t).testres.pca}));Yl(H,{get model_getter(){return et},get res_getter(){return Kt},get model(){return r(t).model},get res(){return r(W)},closeModal:d,get ncomp(){return r(t).simca.ncomp},get selected(){return r(l)}})}};Y(m,H=>{r(a)&&r(t).simca&&r(t).model&&r(t).testres&&H(g)})}var b=L(m,2),_=q(b),p=q(_),y=q(p);pi(y,{get model(){return r(t).model},set model(H){r(t).model=H},get simca(){return r(t).simca},set simca(H){r(t).simca=H}});var C=L(p,2);{var E=H=>{var W=Jm(),Q=q(W);Hl(Q,{get outliers(){return r(t).outliers},get WASM(){return e.WASM},get model(){return r(t).model},className:"Class",classMandatory:!0,get dataset(){return r(t).testset},set dataset(ee){r(t).testset=ee},get resobj(){return r(t).testres.pca},set resobj(ee){r(t).testres.pca=ee}}),M(H,W)};Y(C,H=>{r(t).model&&H(E)})}var k=L(C,2);{var S=H=>{var W=Zm(),Q=q(W);jl(Q,{get outliers(){return r(t).outliers},get dataset(){return r(t).testset},resetOutliers:u,undoOutliers:f}),M(H,W)};Y(k,H=>{r(t).outliers&&r(t).outliers.length>0&&H(S)})}var I=L(k,2),j=q(I);{var N=H=>{{let W=w(()=>r(t).ind&&r(t).ind.members.length<1);Xl(H,{get model(){return r(t).model},get className(){return r(t).className},get isAlt(){return r(W)},get simca(){return r(t).simca},set simca(Q){r(t).simca=Q}})}};Y(j,H=>{r(t).model&&r(t).testres.pca&&H(N)})}var A=L(j,2);{var T=H=>{fe(H,{label:"Download",children:(W,Q)=>{var ee=Qm(),G=q(ee);tt(G,{onclick:()=>Ns(r(t).model,r(t).simca,r(t).testres,r(t).testset,"test",r(t).outliers),text:"Res (test)"});var Z=L(G,2);tt(Z,{onclick:()=>Sl(r(t).model,r(t).simca),text:"Model"}),M(W,ee)},$$slots:{default:!0}})};Y(A,H=>{r(t).simca&&r(t).model&&r(t).testres.simca&&H(T)})}var P=L(I,2);{var R=H=>{var W=$m(),Q=J(W),ee=q(Q);Gl(ee,{get model(){return r(t).model},get simca(){return r(t).simca}});var G=L(Q,2),Z=q(G);Wm(Z,{get res(){return r(t).testres.simca},get ncomp(){return r(t).simca.ncomp}}),M(H,W)};Y(P,H=>{r(t).model&&r(t).simca&&r(t).testres.simca&&H(R)})}var V=L(_,2),F=q(V);{var z=H=>{var W=rh(),Q=L(q(W),2);{var ee=Z=>{var se=eh();M(Z,se)},G=Z=>{var se=_e(),te=J(se);{var ue=ve=>{var Te=th();M(ve,Te)};Y(te,ve=>{r(t).testset||ve(ue)})}M(Z,se)};Y(Q,Z=>{r(t).model?Z(G,!1):Z(ee)})}M(H,W)},O=H=>{var W=_e(),Q=J(W);{var ee=G=>{var Z=_e(),se=J(Z);ln(se,()=>r(t).testres.pca,te=>{Km(te,Gt({markOutlier:o,showContributions:c,resetSelection:v},()=>r(t)))}),M(G,Z)};Y(Q,G=>{r(t).model&&r(t).simca&&r(t).testres.pca&&G(ee)})}M(H,W)};Y(F,H=>{r(t).testres.simca?H(O,!1):H(z)})}M(s,h),xe()}var lh=K('<table class="svelte-vm8g95"><thead><tr class="svelte-vm8g95"><th class="svelte-vm8g95"></th><th class="svelte-vm8g95">New</th></tr></thead><tbody><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Objects</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">In</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Out</td><td class="svelte-vm8g95"> </td></tr></tbody></table>');function ah(s,e){ye(e,!0);var t=_e(),l=J(t);{var a=o=>{var c=lh(),d=L(q(c)),u=q(d),f=L(q(u)),v=q(f),h=L(u),m=L(q(h)),g=q(m),b=L(h),_=L(q(b)),p=q(_);ae(()=>{be(v,e.res.v[0].decs.length),be(g,e.res.v[e.ncomp-1].decsNum.in),be(p,e.res.v[e.ncomp-1].decsNum.out)}),M(o,c)};Y(l,o=>{e.res&&o(a)})}M(s,t),xe()}var oh=K("<!> <!>",1);function ih(s,e){ye(e,!0);const t=(m,g=vt)=>{fe(m,{label:"Selected",children:(b,_)=>{tt(b,{onclick:()=>e.markOutlier(g()),text:"remove"})},$$slots:{default:!0}})},l=(m,g=vt)=>{fe(m,{label:"Selected",children:(b,_)=>{var p=oh(),y=J(p);tt(y,{onclick:()=>e.showContributions(g()),text:"plot"});var C=L(y,2);tt(C,{onclick:()=>e.markOutlier(g()),text:"remove"}),M(b,p)},$$slots:{default:!0}})},a={new:e.newres.pca},o={new:e.newset},c=w(()=>({new:e.newres.simca})),d=w(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Zn,buttons:l},distances:{label:"Distances",scope:"objects",component:Qn,buttons:l},scores:{label:"Scores",scope:"objects",component:$n,buttons:t}})),u=qe({acceptance:Zl(a),distances:Ql(a),scores:$l(a)});let f=re(qe({acceptance:kt(u.acceptance),distances:kt(u.distances),scores:kt(u.scores)}));me(()=>{r(f).acceptance.ncomp=e.simca.ncomp,r(f).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,r(f).acceptance.limType=e.simca.limType,r(f).acceptance.alpha=e.simca.alpha,r(f).acceptance.gamma=e.simca.gamma}),me(()=>{r(f).acceptance.colorByObj={values:r(c).new.v[e.simca.ncomp-1].decs,classColmap:{in:mt.new,out:mt.new},labels:["in","out"],filled:r(c).new.v[e.simca.ncomp-1].decs.map(m=>m==="in"),showBar:!1}}),me(()=>{r(f).scores.plotType!=="p"?(u.scores.comp1.hidden=!0,u.scores.showEllipse.hidden=!0,r(f).scores.showEllipse=!1):(u.scores.comp1.hidden=!1,u.scores.showEllipse.hidden=!1),r(f).scores.plotType==="l"||r(f).scores.plotType==="b"?(u.scores.colorBy.hidden=!0,r(f).scores.colorBy="none"):u.scores.colorBy.hidden=!1,r(f).scores.colorBy==="variable"?u.scores.colorByVar.hidden=!1:u.scores.colorByVar.hidden=!0,r(f).scores.colorBy==="groups"&&r(f).scores.plotType==="p"?u.scores.confEllipse.hidden=!1:(u.scores.confEllipse.hidden=!0,r(f).scores.confEllipse="none")});const v=w(()=>({res:a,classres:r(c),model:e.model,simca:e.simca,data:o,ncomp:e.simca.ncomp})),h={markOutlier:e.markOutlier,showContributions:e.showContributions};Kl(s,{get plots(){return r(d)},get controls(){return u},get props(){return r(v)},get callbacks(){return h},get params(){return r(f)},set params(m){D(f,m,!0)}}),xe()}var ch=K('<div class="data-loader svelte-1rjc99q"><!></div>'),uh=K('<div class="outliers-pane svelte-1rjc99q"><!></div>'),fh=K('<div class="buttons"><!> <!></div>'),dh=K('<div class="model-stats svelte-1rjc99q"><!></div> <div class="result-stats svelte-1rjc99q"><!></div>',1),vh=K('<p class="svelte-1rjc99q"><strong>Step 1</strong></p> <p class="svelte-1rjc99q">Load previously trained DD-SIMCA model from file.</p>',1),mh=K(`<p class="svelte-1rjc99q"><strong>Step 2</strong></p> <p class="svelte-1rjc99q">Load data set from CSV file. The requirements to the file are the same as for the
               training set but no columns with reference classes is expected. If you have reference classes, use <em>Test</em> tab.</p>`,1),hh=K(`<div class="help-text svelte-1rjc99q"><p class="svelte-1rjc99q">In this tab you can apply previously trained DD-SIMCA model to a new dataset with objects whose class is unknown (hence the app
            does not expect column with target classes).</p> <!></div>`),gh=K('<!> <div class="app-container svelte-1rjc99q"><div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <div class="simca-settings svelte-1rjc99q"><!> <!></div> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>',1);function ph(s,e){ye(e,!0);const t=w(()=>e.session.new);let l=re(-1),a=re(!1);function o(O){if(O<0||O>r(t).newres.pca.nrows-1)return;const H=r(t).newres.pca.objindices[O];H>=0&&!r(t).outliers.includes(H)&&(r(t).outliers.push(H),r(t).newres.simca=null,r(t).newres.pca=null)}function c(){r(t).outliers=[],r(t).newres.simca=null,r(t).newres.pca=null}function d(){r(t).outliers.pop(),r(t).newres.simca=null,r(t).newres.pca=null}function u(O){O<0||(D(l,O,!0),D(a,!0))}function f(){D(a,!1),D(l,-1)}us(()=>{r(t).newset===null&&(r(t).outliers=[],r(t).newres.simca=null,r(t).newres.pca=null),r(t).model===null&&(r(t).outliers=[],r(t).simca=null,r(t).newres.simca=null,r(t).newres.pca=null,r(t).newset=null)}),me(()=>{r(t).model===null&&(r(t).outliers=[],r(t).newres.simca=null,r(t).newres.pca=null,r(t).newset=null)}),me(()=>{r(t).newset===null&&(r(t).outliers=[],r(t).newres.simca=null,r(t).newres.pca=null)}),me(()=>{r(t).newres.pca&&r(t).simca&&(r(t).newres.simca=Cs(r(t).newres.pca,Pt(()=>r(t).simca.limType),r(t).simca.eCrit,r(t).simca.oCrit))}),me(()=>{const O=Pt(()=>JSON.stringify(e.session,Gn));r(t).simca&&r(t).newres?e.backupSession(O,r(t).model,r(t).newset,r(t).newres.simca,r(t).simca.ncomp):e.backupSession(O,r(t).model,r(t).newset)});var v=gh(),h=J(v);{var m=O=>{{let H=w(()=>({new:r(t).newres.pca}));Yl(O,{get model_getter(){return et},get res_getter(){return Kt},get model(){return r(t).model},get res(){return r(H)},closeModal:f,get ncomp(){return r(t).simca.ncomp},get selected(){return r(l)}})}};Y(h,O=>{r(a)&&r(t).model&&r(t).simca&&r(t).newres.pca&&O(m)})}var g=L(h,2),b=q(g),_=q(b),p=q(_);pi(p,{get model(){return r(t).model},set model(O){r(t).model=O},get simca(){return r(t).simca},set simca(O){r(t).simca=O}});var y=L(_,2);{var C=O=>{var H=ch(),W=q(H);Hl(W,{get outliers(){return r(t).outliers},get WASM(){return e.WASM},get model(){return r(t).model},className:"Class",csvOnly:!1,get dataset(){return r(t).newset},set dataset(Q){r(t).newset=Q},get resobj(){return r(t).newres.pca},set resobj(Q){r(t).newres.pca=Q}}),M(O,H)};Y(y,O=>{r(t).model&&O(C)})}var E=L(y,2);{var k=O=>{var H=uh(),W=q(H);jl(W,{get outliers(){return r(t).outliers},get dataset(){return r(t).newset},undoOutliers:d,resetOutliers:c}),M(O,H)};Y(E,O=>{r(t).outliers&&r(t).outliers.length>0&&O(k)})}var S=L(E,2),I=q(S);{var j=O=>{Xl(O,{get model(){return r(t).model},get className(){return r(t).className},isAlt:!0,get simca(){return r(t).simca},set simca(H){r(t).simca=H}})};Y(I,O=>{r(t).model&&r(t).newres.pca&&O(j)})}var N=L(I,2);{var A=O=>{fe(O,{label:"Download",children:(H,W)=>{var Q=fh(),ee=q(Q);tt(ee,{onclick:()=>Ns(r(t).model,r(t).simca,r(t).newres,r(t).newset,"new",r(t).outliers),text:"Res (new)"});var G=L(ee,2);tt(G,{onclick:()=>Sl(r(t).model,r(t).simca),text:"Model"}),M(H,Q)},$$slots:{default:!0}})};Y(N,O=>{r(t).model&&r(t).simca&&r(t).newres.simca&&O(A)})}var T=L(S,2);{var P=O=>{var H=dh(),W=J(H),Q=q(W);Gl(Q,{get model(){return r(t).model},get simca(){return r(t).simca},isAlt:!0});var ee=L(W,2),G=q(ee);ah(G,{get res(){return r(t).newres.simca},get ncomp(){return r(t).simca.ncomp}}),M(O,H)};Y(T,O=>{r(t).simca&&r(t).model&&r(t).newres.simca&&O(P)})}var R=L(b,2),V=q(R);{var F=O=>{var H=hh(),W=L(q(H),2);{var Q=G=>{var Z=vh();M(G,Z)},ee=G=>{var Z=_e(),se=J(Z);{var te=ue=>{var ve=mh();M(ue,ve)};Y(se,ue=>{r(t).newset||ue(te)})}M(G,Z)};Y(W,G=>{r(t).model?G(ee,!1):G(Q)})}M(O,H)},z=O=>{var H=_e(),W=J(H);{var Q=ee=>{var G=_e(),Z=J(G);ln(Z,()=>r(t).newres.pca,se=>{ih(se,Gt({markOutlier:o,showContributions:u},()=>r(t)))}),M(ee,G)};Y(W,ee=>{r(t).model&&r(t).simca&&r(t).newres.pca&&ee(Q)})}M(O,H)};Y(V,O=>{r(t).newres.simca?O(z,!1):O(F)})}M(s,v),xe()}var bh=K('<sup style="color:red">β</sup>'),_h=K('<li><button class="svelte-1josccy"> </button></li>'),wh=K("<div><!></div>"),yh=K('<div class="info-container svelte-1josccy"><!></div>'),xh=K('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function kh(s,e){ye(e,!0);let t=B(e,"tabs",19,()=>[]),l=B(e,"isBeta",3,!1);const a="mdatools-"+e.appID;let o=re(!1),c=re(void 0),d=re("Current session "),u=re(!1);function f(j){D(d,j,!0),D(u,!0),setTimeout(()=>{D(d,"Current session "),D(u,!1)},1e3)}function v(){D(o,!0)}function h(){D(o,!1)}function m(j){r(c).tab=j}function g(){const j=indexedDB.open(a,1);j.onsuccess=N=>{const T=N.target.result.transaction(e.appID,"readwrite");T.objectStore(e.appID).delete("session"),T.oncomplete=()=>{D(c,e.initSession(),!0),f("Session was reinitialzed.")},T.onerror=()=>console.error("Failed to session from DB.")}}function b(j,N){window.localStorage.removeItem(e.appID+"-blocked");const A=indexedDB.open(a,1);A.onsuccess=T=>{const V=T.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);V.put(j,"session"),V.put(Tl(new Date),"session-update")}}function _(){new Promise((j,N)=>{const A=indexedDB.open(a,1);A.onsuccess=T=>{const F=T.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");F.onsuccess=()=>j(F.result),F.onerror=()=>N(F.error)}}).then(j=>{p(j),D(d,"Last session is restored "),D(u,!0),setTimeout(()=>{D(d,"Current session "),D(u,!1)},1500)}).catch(j=>{console.error(j),D(c,e.initSession(),!0)})}function p(j){if(!j||j==="undefined"){D(c,e.initSession(),!0);return}const N=JSON.parse(j,Al);D(c,e.checkSession(N)?N:e.initSession(e.appID),!0)}function y(){const j=Tl(new Date),N=e.appID+"-session-"+j+".json";r(c).date=j;const A=JSON.stringify(r(c),Gn),T=new Blob([A],{type:"text/json"}),P=window.URL.createObjectURL(T),R=document.createElement("a");R.setAttribute("href",P),R.setAttribute("download",N),R.click()}function C(j){const N=new FileReader;N.onload=()=>{p(N.result),j.target.value=""},N.readAsText(j.target.files[0])}function E(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&g()}nu(()=>{const j=e.appID,N=indexedDB.open(a,1);N.onupgradeneeded=A=>{const T=A.target.result;T.objectStoreNames.contains(j)||T.createObjectStore(j)},N.onsuccess=A=>{_()}});var k=_e(),S=J(k);{var I=j=>{var N=xh(),A=q(N),T=q(A),P=q(T),R=L(P,2),V=q(R),F=L(V);{var z=oe=>{var le=bh();M(oe,le)};Y(F,oe=>{l()&&oe(z)})}var O=L(R,2),H=q(O),W=L(T,2);Ye(W,21,t,Ge,(oe,le,pe)=>{var Ne=_h();let he;var ze=q(Ne);ze.__click=()=>m(pe),ze.__keydown=()=>m(pe);var Re=q(ze);ae(()=>{he=ct(Ne,1,"nav-item svelte-1josccy",null,he,{selected:r(c).tab===pe}),be(Re,r(le).name)}),M(oe,Ne)});var Q=L(A,2),ee=q(Q);ln(ee,()=>r(c).date,oe=>{var le=_e(),pe=J(le);Ye(pe,17,t,Ge,(Ne,he,ze)=>{var Re=wh();let Fe;var X=q(Re);Vn(X,()=>r(he).component,($,ne)=>{ne($,{get WASM(){return e.WASM},get session(){return r(c)},backupSession:b})}),ae(()=>Fe=ct(Re,1,"tab-content svelte-1josccy",null,Fe,{hidden:r(c).tab!==ze})),M(Ne,Re)}),M(oe,le)});var G=L(Q,2),Z=q(G);let se;var te=q(Z),ue=q(te),ve=L(te,2),Te=q(ve);Te.__change=C;var je=L(ve,2);je.__click=y;var ke=L(je,2);ke.__click=E;var ge=L(Z,2),Ce=q(ge);Ce.__click=v,Ce.__keydown=v;var Ee=L(Ce,2);jr(Ee,()=>e.footer);var Pe=L(G,2);{var ie=oe=>{Bl(oe,{closeModal:h,children:(le,pe)=>{var Ne=yh(),he=q(Ne);jr(he,()=>e.info),M(le,Ne)},$$slots:{default:!0}})};Y(Pe,oe=>{r(o)&&oe(ie)})}ae(()=>{U(P,"alt",e.appShortTitle),be(V,e.appTitle),be(H,e.appSlogan),se=ct(Z,1,"session svelte-1josccy",null,se,{"no-buttons":r(u)}),be(ue,r(d))}),M(j,N)};Y(S,j=>{r(c)&&j(I)})}M(s,k),xe()}at(["click","keydown","change"]);const Ph="modulepreload",Lh=function(s){return"/"+s},Ih={},Eh=function(e,t,l){let a=Promise.resolve();function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};async function Sh(s={}){var e,t=s,l=!!globalThis.window,a=!!globalThis.WorkerGlobalScope,o=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer";if(o){const{createRequire:X}=await Eh(async()=>{const{createRequire:$}=await Promise.resolve().then(()=>Th);return{createRequire:$}},void 0);var c=X(yr&&yr.tagName.toUpperCase()==="SCRIPT"&&yr.src||new URL("ddsimca.js",document.baseURI).href)}var d="./this.program",u=(X,$)=>{throw $},f=yr&&yr.tagName.toUpperCase()==="SCRIPT"&&yr.src||new URL("ddsimca.js",document.baseURI).href,v="",h,m;if(o){var g=c("fs");f.startsWith("file:")&&(v=c("path").dirname(c("url").fileURLToPath(f))+"/"),m=X=>(X=E(X)?new URL(X):X,g.readFileSync(X)),h=async X=>(X=E(X)?new URL(X):X,g.readFileSync(X,void 0)),1<process.argv.length&&(d=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),u=(X,$)=>{throw process.exitCode=X,$}}else if(l||a){try{v=new URL(".",f).href}catch{}a&&(m=X=>{var $=new XMLHttpRequest;return $.open("GET",X,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}),h=async X=>{if(E(X))return new Promise((ne,ce)=>{var de=new XMLHttpRequest;de.open("GET",X,!0),de.responseType="arraybuffer",de.onload=()=>{de.status==200||de.status==0&&de.response?ne(de.response):ce(de.status)},de.onerror=ce,de.send(null)});var $=await fetch(X,{credentials:"same-origin"});if($.ok)return $.arrayBuffer();throw Error($.status+" : "+$.url)}}var b=console.log.bind(console),_=console.error.bind(console),p,y=!1,C,E=X=>X.startsWith("file://"),k,S,I,j,N,A=!1;function T(){var X=ze.buffer;I=new Int8Array(X),j=new Uint8Array(X),t.HEAP32=new Int32Array(X),N=new Uint32Array(X),t.HEAPF64=new Float64Array(X),new BigInt64Array(X),new BigUint64Array(X)}function P(X){throw t.onAbort?.(X),X="Aborted("+X+")",_(X),y=!0,X=new WebAssembly.RuntimeError(X+". Build with -sASSERTIONS for more info."),S?.(X),X}var R;async function V(X){if(!p)try{var $=await h(X);return new Uint8Array($)}catch{}if(X==R&&p)X=new Uint8Array(p);else if(m)X=m(X);else throw"both async and sync fetching of the wasm failed";return X}async function F(X,$){try{var ne=await V(X);return await WebAssembly.instantiate(ne,$)}catch(ce){_(`failed to asynchronously prepare wasm: ${ce}`),P(ce)}}async function z(X){var $=R;if(!p&&!E($)&&!o)try{var ne=fetch($,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(ne,X)}catch(ce){_(`wasm streaming compile failed: ${ce}`),_("falling back to ArrayBuffer instantiation")}return F($,X)}class O{name="ExitStatus";constructor($){this.message=`Program terminated with exit(${$})`,this.status=$}}var H=X=>{for(;0<X.length;)X.shift()(t)},W=[],Q=[],ee=()=>{var X=t.preRun.shift();Q.push(X)},G=!0,Z=0,se={},te=X=>{C=X,G||0<Z||(t.onExit?.(X),y=!0),u(X,new O(X))},ue=X=>{if(!y)try{if(X(),!(G||0<Z))try{C=X=C,te(X)}catch($){$ instanceof O||$=="unwind"||u(1,$)}}catch($){$ instanceof O||$=="unwind"||u(1,$)}},ve=globalThis.TextDecoder&&new TextDecoder,Te=(X,$=0)=>{for(var ne=$,ce=ne+void 0;X[ne]&&!(ne>=ce);)++ne;if(16<ne-$&&X.buffer&&ve)return ve.decode(X.subarray($,ne));for(ce="";$<ne;){var de=X[$++];if(de&128){var Se=X[$++]&63;if((de&224)==192)ce+=String.fromCharCode((de&31)<<6|Se);else{var Oe=X[$++]&63;de=(de&240)==224?(de&15)<<12|Se<<6|Oe:(de&7)<<18|Se<<12|Oe<<6|X[$++]&63,65536>de?ce+=String.fromCharCode(de):(de-=65536,ce+=String.fromCharCode(55296|de>>10,56320|de&1023))}}else ce+=String.fromCharCode(de)}return ce},je={},ke=()=>{if(!ge){var X={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},$;for($ in je)je[$]===void 0?delete X[$]:X[$]=je[$];var ne=[];for($ in X)ne.push(`${$}=${X[$]}`);ge=ne}return ge},ge,Ce=(X,$,ne)=>{var ce=j;if(!(0<ne))return 0;var de=$;ne=$+ne-1;for(var Se=0;Se<X.length;++Se){var Oe=X.codePointAt(Se);if(127>=Oe){if($>=ne)break;ce[$++]=Oe}else if(2047>=Oe){if($+1>=ne)break;ce[$++]=192|Oe>>6,ce[$++]=128|Oe&63}else if(65535>=Oe){if($+2>=ne)break;ce[$++]=224|Oe>>12,ce[$++]=128|Oe>>6&63,ce[$++]=128|Oe&63}else{if($+3>=ne)break;ce[$++]=240|Oe>>18,ce[$++]=128|Oe>>12&63,ce[$++]=128|Oe>>6&63,ce[$++]=128|Oe&63,Se++}}return ce[$]=0,$-de},Ee=X=>{for(var $=0,ne=0;ne<X.length;++ne){var ce=X.charCodeAt(ne);127>=ce?$++:2047>=ce?$+=2:55296<=ce&&57343>=ce?($+=4,++ne):$+=3}return $},Pe=[null,[],[]],ie=()=>{if(o){var X=c("crypto");return $=>X.randomFillSync($)}return $=>crypto.getRandomValues($)},oe=X=>{(oe=ie())(X)};if(t.noExitRuntime&&(G=t.noExitRuntime),t.print&&(b=t.print),t.printErr&&(_=t.printErr),t.wasmBinary&&(p=t.wasmBinary),t.thisProgram&&(d=t.thisProgram),t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.shift()();t.ccall=(X,$,ne,ce)=>{var de={string:Ue=>{var ht=0;if(Ue!=null&&Ue!==0){ht=Ee(Ue)+1;var _r=Ne(ht);Ce(Ue,_r,ht),ht=_r}return ht},array:Ue=>{var ht=Ne(Ue.length);return I.set(Ue,ht),ht}};X=t["_"+X];var Se=[],Oe=0;if(ce)for(var De=0;De<ce.length;De++){var Ve=de[ne[De]];Ve?(Oe===0&&(Oe=he()),Se[De]=Ve(ce[De])):Se[De]=ce[De]}return ne=X(...Se),ne=(function(Ue){return Oe!==0&&pe(Oe),$==="string"?Ue?Te(j,Ue):"":$==="boolean"?!!Ue:Ue})(ne)};var le,pe,Ne,he,ze,Re={g:()=>P(""),j:()=>{G=!1,Z=0},k:(X,$)=>{if(se[X]&&(clearTimeout(se[X].id),delete se[X]),!$)return 0;var ne=setTimeout(()=>{delete se[X],ue(()=>le(X,performance.now()))},$);return se[X]={id:ne,U:$},0},a:()=>Date.now(),c:X=>_(X?Te(j,X):""),b:()=>performance.now(),l:X=>{var $=j.length;if(X>>>=0,2147483648<X)return!1;for(var ne=1;4>=ne;ne*=2){var ce=$*(1+.2/ne);ce=Math.min(ce,X+100663296);e:{ce=(Math.min(2147483648,65536*Math.ceil(Math.max(X,ce)/65536))-ze.buffer.byteLength+65535)/65536|0;try{ze.grow(ce),T();var de=1;break e}catch{}de=void 0}if(de)return!0}return!1},e:(X,$)=>{var ne=0,ce=0,de;for(de of ke()){var Se=$+ne;N[X+ce>>2]=Se,ne+=Ce(de,Se,1/0)+1,ce+=4}return 0},f:(X,$)=>{var ne=ke();N[X>>2]=ne.length,X=0;for(var ce of ne)X+=Ee(ce)+1;return N[$>>2]=X,0},h:(X,$,ne,ce)=>{for(var de=0,Se=0;Se<ne;Se++){var Oe=N[$>>2],De=N[$+4>>2];$+=8;for(var Ve=0;Ve<De;Ve++){var Ue=X,ht=j[Oe+Ve],_r=Pe[Ue];ht===0||ht===10?((Ue===1?b:_)(Te(_r)),_r.length=0):_r.push(ht)}de+=De}return N[ce>>2]=de,0},i:te,d:(X,$)=>(oe(j.subarray(X,X+$)),0)},Fe;return Fe=await(async function(){function X(ne){return ne=Fe=ne.exports,t._pcafit_wasm=ne.o,t._free=ne.p,t._malloc=ne.q,t._pcapredict_wasm=ne.r,t._pcvpca_wasm=ne.s,t._prepfit_wasm=ne.t,t._prepapply_wasm=ne.u,le=ne.v,t._strdup=ne.w,t._strndup=ne.x,t.__ZdaPv=ne.y,t.__ZdaPvm=ne.z,t.__ZdlPv=ne.A,t.__ZdlPvm=ne.B,t.__Znaj=ne.C,t.__ZnajSt11align_val_t=ne.D,t.__Znwj=ne.E,t.__ZnwjSt11align_val_t=ne.F,t.___libc_calloc=ne.G,t.___libc_free=ne.H,t.___libc_malloc=ne.I,t.___libc_realloc=ne.J,t._emscripten_builtin_malloc=ne.K,t._emscripten_builtin_calloc=ne.L,t._emscripten_builtin_free=ne.M,t._emscripten_builtin_realloc=ne.N,t._malloc_size=ne.O,t._malloc_usable_size=ne.P,t._reallocf=ne.Q,pe=ne.R,Ne=ne.S,he=ne.T,ze=ne.m,T(),Fe}var $={a:Re};return t.instantiateWasm?new Promise(ne=>{t.instantiateWasm($,(ce,de)=>{ne(X(ce))})}):(R??=t.locateFile?t.locateFile?t.locateFile("pca_wasm.wasm",v):v+"pca_wasm.wasm":new URL("/ddsimca/ddsimca.wasm",yr&&yr.tagName.toUpperCase()==="SCRIPT"&&yr.src||new URL("ddsimca.js",document.baseURI).href).href,X((await z($)).instance))})(),(function(){function X(){if(t.calledRun=!0,!y){if(A=!0,Fe.n(),k?.(t),t.onRuntimeInitialized?.(),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var $=t.postRun.shift();W.push($)}H(W)}}if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)ee();H(Q),t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),X()},1)):X()})(),A?e=t:e=new Promise((X,$)=>{k=X,S=$}),e}var Ch=K('<p>Current release: <span>2.2.8</span> &nbsp;Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=DDSIMCA app">help@mda.tools</a> &nbsp;Learn: <a class="paper-link" href="https://doi.org/10.1002/cem.3556" download="">tutorial</a> | <a class="paper-link" href="/ddsimca/Oregano.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFlcYmmBsyqI6whqUlauVCTz">video lessons</a></p>'),Nh=K(`<h2>Data Driven SIMCA</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using DD-SIMCA one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check our open access <a href="https://doi.org/10.1002/cem.3556">tutorial paper</a> and YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFlcYmmBsyqI6whqUlauVCTz">video-lessons</a></p> <p>Related theory: <a href="https://doi.org/10.1002/cem.2506">10.1002/cem.2506</a>, <a href="https://doi.org/10.1002/cem.2610">10.1002/cem.2610</a>, <a href="https://doi.org/10.1002/cem.3250">10.1002/cem.3250</a>, <a href="https://doi.org/10.1016/j.aca.2024.343352">10.1016/j.aca.2024.343352</a>.</p> <h3>v. 2.2.8</h3> <p class="release-info">released 17/01/2026</p> <ul><li>Small improvements and updates.</li></ul> <h3>v. 2.2.7</h3> <p class="release-info">released 14/09/2025</p> <ul><li>Small improvements to results downloader.</li></ul> <h3>v. 2.2.6</h3> <p class="release-info">released 04/09/2025</p> <ul><li>Fixed a small bug in <em>Predict</em> tab.</li> <li>Added link to updated video-tutorial.</li></ul>`,1);function Ah(s,e){ye(e,!1);function t(o){const c=Object.keys(o);if(!["date","tab","train","test","new"].every(v=>c.includes(v)))return!1;const d=Object.keys(o.train);if(!["model","simca","calset","pvset","calres","pvres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(v=>d.includes(v)))return!1;const u=Object.keys(o.test);if(!["model","simca","testset","testres","outliers"].every(v=>u.includes(v)))return!1;const f=Object.keys(o.new);return!!["model","simca","newset","newres","outliers"].every(v=>f.includes(v))}function l(){return{date:Tl(new Date),tab:0,train:{model:0,simca:0,calset:0,calsetp:0,pvset:0,calres:{pca:0,simca:0},pvres:{pca:0,simca:0},outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{model:0,simca:0,testset:0,testres:{pca:0,simca:0},outliers:[],ind:null},new:{model:0,simca:0,newset:0,newres:{pca:0,simca:0},outliers:[]}}}const a=[{name:"Train",label:"train",component:Im},{name:"Test",label:"test",component:sh},{name:"Predict",label:"new",component:ph}];$c(),kh(s,{appID:"ddsimca",appTitle:"Data Driven SIMCA",appShortTitle:"DD-SIMCA",appSlogan:"One class classifier",get WASM(){return Sh},get tabs(){return a},initSession:l,checkSession:t,footer:d=>{var u=Ch();M(d,u)},info:d=>{var u=Nh();M(d,u)},$$slots:{footer:!0,info:!0}}),xe()}Lc(Ah,{target:document.body});const Th=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=ddsimca.js.map
