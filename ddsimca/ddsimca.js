var v0=Object.defineProperty;var Qa=Ge=>{throw TypeError(Ge)};var d0=(Ge,Pe,ut)=>Pe in Ge?v0(Ge,Pe,{enumerable:!0,configurable:!0,writable:!0,value:ut}):Ge[Pe]=ut;var Vr=(Ge,Pe,ut)=>d0(Ge,typeof Pe!="symbol"?Pe+"":Pe,ut),ql=(Ge,Pe,ut)=>Pe.has(Ge)||Qa("Cannot "+ut);var pr=(Ge,Pe,ut)=>(ql(Ge,Pe,"read from private field"),ut?ut.call(Ge):Pe.get(Ge)),Mn=(Ge,Pe,ut)=>Pe.has(Ge)?Qa("Cannot add the same private member more than once"):Pe instanceof WeakSet?Pe.add(Ge):Pe.set(Ge,ut),Dl=(Ge,Pe,ut,Br)=>(ql(Ge,Pe,"write to private field"),Br?Br.call(Ge,ut):Pe.set(Ge,ut),ut),Za=(Ge,Pe,ut)=>(ql(Ge,Pe,"access private method"),ut);(function(){"use strict";var Ar,ln,An,us,$a,Ka;var Ge=document.createElement("style");Ge.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-vzu0vi{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-vzu0vi:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-vzu0vi:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-vzu0vi:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-vzu0vi{display:none}.control-element.error.svelte-vzu0vi{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-vzu0vi{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-vzu0vi>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-vzu0vi>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-vzu0vi>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-vzu0vi>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-vzu0vi .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-vzu0vi .range-value_left,.control-element.svelte-vzu0vi .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-vzu0vi .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-vzu0vi .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-vzu0vi .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-vzu0vi .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-vzu0vi .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-vzu0vi .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-vzu0vi .textinput>input:active::placeholder,.control-element.svelte-vzu0vi .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-vzu0vi .textinput>input:focus,.control-element.svelte-vzu0vi .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .textinput.error>input,.control-element.svelte-vzu0vi .textinput.error>input:focus,.control-element.svelte-vzu0vi .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-vzu0vi .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-vzu0vi .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-vzu0vi .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}.app-container.svelte-1v0yar6{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1v0yar6{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1v0yar6{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1v0yar6>div:where(.svelte-1v0yar6){border-radius:.25rem}.app-controls.svelte-1v0yar6>.model-stats:where(.svelte-1v0yar6),.app-controls.svelte-1v0yar6>.result-stats:where(.svelte-1v0yar6){background:#e8e8e8}.app-controls.svelte-1v0yar6>.model-stats:where(.svelte-1v0yar6),.app-controls.svelte-1v0yar6>.result-stats:where(.svelte-1v0yar6){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1v0yar6{margin-top:.25rem}.help-text.svelte-1v0yar6>p:where(.svelte-1v0yar6),.help-text.svelte-1v0yar6>div:where(.svelte-1v0yar6){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6){border-collapse:collapse}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6) td:where(.svelte-1v0yar6){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6) thead:where(.svelte-1v0yar6) tr:where(.svelte-1v0yar6) td:where(.svelte-1v0yar6){font-weight:700;background:#f8f4e0}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6) td:where(.svelte-1v0yar6):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1v0yar6 table:where(.svelte-1v0yar6) tbody:where(.svelte-1v0yar6) td:where(.svelte-1v0yar6):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1v0yar6>p:where(.svelte-1v0yar6):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1v0yar6>p:where(.svelte-1v0yar6):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1v0yar6{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1v0yar6{grid-template-columns:min(325px,30%) 1fr}}.model-info.svelte-14tszjv{line-height:1.5em}.model-info.svelte-14tszjv>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-14tszjv>.file-name:where(.svelte-14tszjv){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-kg0b31{width:100%;border-collapse:collapse}tr.svelte-kg0b31{width:100%}th.svelte-kg0b31{border-bottom:1px solid #a0a0a0}th.svelte-kg0b31,td.svelte-kg0b31{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-kg0b31{text-align:left;padding:.1em .5em}.app-container.svelte-1qdsey6{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1qdsey6{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1qdsey6{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1qdsey6>div:where(.svelte-1qdsey6){border-radius:.25rem}.app-controls.svelte-1qdsey6>.model-stats:where(.svelte-1qdsey6),.app-controls.svelte-1qdsey6>.result-stats:where(.svelte-1qdsey6){background:#e8e8e8}.app-controls.svelte-1qdsey6>.model-stats:where(.svelte-1qdsey6),.app-controls.svelte-1qdsey6>.result-stats:where(.svelte-1qdsey6){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1qdsey6{margin-top:.25rem}.help-text.svelte-1qdsey6>p:where(.svelte-1qdsey6){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1qdsey6>p:where(.svelte-1qdsey6):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1qdsey6>p:where(.svelte-1qdsey6):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1qdsey6{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1qdsey6{grid-template-columns:min(325px,30%) 1fr}}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Ge);var Pe=typeof document<"u"?document.currentScript:null;const ut=!1;var Br=Array.isArray,ei=Array.prototype.indexOf,ds=Array.from,ti=Object.defineProperty,br=Object.getOwnPropertyDescriptor,Fl=Object.getOwnPropertyDescriptors,ri=Object.prototype,ni=Array.prototype,ms=Object.getPrototypeOf,Ol=Object.isExtensible;function Yr(r){return typeof r=="function"}const pt=()=>{};function si(r){return typeof(r==null?void 0:r.then)=="function"}function li(r){return r()}function Tn(r){for(var e=0;e<r.length;e++)r[e]()}const Kt=2,Vl=4,zn=8,Pn=16,ur=32,Wr=64,In=128,Lt=256,Ln=512,Mt=1024,lr=2048,Nr=4096,fr=8192,Rn=16384,Bl=32768,Ur=65536,oi=1<<17,ai=1<<19,Yl=1<<20,hs=1<<21,yr=Symbol("$state"),Wl=Symbol("legacy props"),ii=Symbol("");function Ul(r){return r===this.v}function Hl(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function ci(r,e){return r!==e}function gs(r){return!Hl(r,this.v)}function ui(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vi(r){throw new Error("https://svelte.dev/e/effect_orphan")}function di(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function mi(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function hi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function gi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function pi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Hr=!1,bi=!1;function yi(){Hr=!0}const ps=1,bs=2,Gl=4,_i=8,wi=16,xi=1,ki=2,Ei=4,Ci=8,Ai=16,Ni=4,Xl=1,Si=2,yt=Symbol(),Mi="http://www.w3.org/1999/xhtml";function Kl(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Oe=null;function jn(r){Oe=r}function Tt(r){return Jl().get(r)}function Ti(r,e){return Jl().set(r,e),e}function fe(r,e=!1,t){var l=Oe={p:Oe,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};Hr&&!e&&(Oe.l={s:null,u:null,r1:[],r2:Mr(!1)}),oo(()=>{l.d=!0})}function ve(r){const e=Oe;if(e!==null){const c=e.e;if(c!==null){var t=De,l=Ye;e.e=null;try{for(var o=0;o<c.length;o++){var a=c[o];Bt(a.effect),zt(a.reaction),cn(a.fn)}}finally{Bt(t),zt(l)}}Oe=e.p,e.m=!0}return{}}function Sr(){return!Hr||Oe!==null&&Oe.l===null}function Jl(r){return Oe===null&&Kl(),Oe.c??(Oe.c=new Map(zi(Oe)||void 0))}function zi(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function Xe(r){if(typeof r!="object"||r===null||yr in r)return r;const e=ms(r);if(e!==ri&&e!==ni)return r;var t=new Map,l=Br(r),o=ne(0),a=Ye,c=v=>{var u=Ye;zt(a);var f=v();return zt(u),f};return l&&t.set("length",ne(r.length)),new Proxy(r,{defineProperty(v,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&hi();var d=t.get(u);return d===void 0?(d=c(()=>ne(f.value)),t.set(u,d)):H(d,c(()=>Xe(f.value))),!0},deleteProperty(v,u){var f=t.get(u);if(f===void 0)u in v&&(t.set(u,c(()=>ne(yt))),ys(o));else{if(l&&typeof u=="string"){var d=t.get("length"),m=Number(u);Number.isInteger(m)&&m<d.v&&H(d,m)}H(f,yt),ys(o)}return!0},get(v,u,f){var g;if(u===yr)return r;var d=t.get(u),m=u in v;if(d===void 0&&(!m||(g=br(v,u))!=null&&g.writable)&&(d=c(()=>ne(Xe(m?v[u]:yt))),t.set(u,d)),d!==void 0){var h=s(d);return h===yt?void 0:h}return Reflect.get(v,u,f)},getOwnPropertyDescriptor(v,u){var f=Reflect.getOwnPropertyDescriptor(v,u);if(f&&"value"in f){var d=t.get(u);d&&(f.value=s(d))}else if(f===void 0){var m=t.get(u),h=m==null?void 0:m.v;if(m!==void 0&&h!==yt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return f},has(v,u){var h;if(u===yr)return!0;var f=t.get(u),d=f!==void 0&&f.v!==yt||Reflect.has(v,u);if(f!==void 0||De!==null&&(!d||(h=br(v,u))!=null&&h.writable)){f===void 0&&(f=c(()=>ne(d?Xe(v[u]):yt)),t.set(u,f));var m=s(f);if(m===yt)return!1}return d},set(v,u,f,d){var A;var m=t.get(u),h=u in v;if(l&&u==="length")for(var g=f;g<m.v;g+=1){var p=t.get(g+"");p!==void 0?H(p,yt):g in v&&(p=c(()=>ne(yt)),t.set(g+"",p))}m===void 0?(!h||(A=br(v,u))!=null&&A.writable)&&(m=c(()=>ne(void 0)),H(m,c(()=>Xe(f))),t.set(u,m)):(h=m.v!==yt,H(m,c(()=>Xe(f))));var y=Reflect.getOwnPropertyDescriptor(v,u);if(y!=null&&y.set&&y.set.call(d,f),!h){if(l&&typeof u=="string"){var b=t.get("length"),E=Number(u);Number.isInteger(E)&&E>=b.v&&H(b,E+1)}ys(o)}return!0},ownKeys(v){s(o);var u=Reflect.ownKeys(v).filter(m=>{var h=t.get(m);return h===void 0||h.v!==yt});for(var[f,d]of t)d.v!==yt&&!(f in v)&&u.push(f);return u},setPrototypeOf(){gi()}})}function ys(r,e=1){H(r,r.v+e)}function Gr(r){var e=Kt|lr,t=Ye!==null&&(Ye.f&Kt)!==0?Ye:null;return De===null||t!==null&&(t.f&Lt)!==0?e|=Lt:De.f|=Yl,{ctx:Oe,deps:null,effects:null,equals:Ul,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??De}}function k(r){const e=Gr(r);return go(e),e}function Ql(r){const e=Gr(r);return e.equals=gs,e}function Zl(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)vr(e[t])}}function Pi(r){for(var e=r.parent;e!==null;){if((e.f&Kt)===0)return e;e=e.parent}return null}function $l(r){var e,t=De;Bt(Pi(r));try{Zl(r),e=wo(r)}finally{Bt(t)}return e}function eo(r){var e=$l(r),t=(_r||(r.f&Lt)!==0)&&r.deps!==null?Nr:Mt;Jt(r,t),r.equals(e)||(r.v=e,r.wv=bo())}const an=new Map;function Mr(r,e){var t={f:0,v:r,reactions:null,equals:Ul,rv:0,wv:0};return t}function ne(r,e){const t=Mr(r);return go(t),t}function qn(r,e=!1){var l;const t=Mr(r);return e||(t.equals=gs),Hr&&Oe!==null&&Oe.l!==null&&((l=Oe.l).s??(l.s=[])).push(t),t}function H(r,e,t=!1){Ye!==null&&!ar&&Sr()&&(Ye.f&(Kt|Pn))!==0&&!(Ct!=null&&Ct.includes(r))&&pi();let l=t?Xe(e):e;return Xr(r,l)}function Xr(r,e){if(!r.equals(e)){var t=r.v;vn?an.set(r,e):an.set(r,t),r.v=e,(r.f&Kt)!==0&&((r.f&lr)!==0&&$l(r),Jt(r,(r.f&Lt)===0?Mt:Nr)),r.wv=bo(),to(r,lr),Sr()&&De!==null&&(De.f&Mt)!==0&&(De.f&(ur|Wr))===0&&(Yt===null?Vi([r]):Yt.push(r))}return e}function to(r,e){var t=r.reactions;if(t!==null)for(var l=Sr(),o=t.length,a=0;a<o;a++){var c=t[a],v=c.f;(v&lr)===0&&(!l&&c===De||(Jt(c,e),(v&(Mt|Lt))!==0&&((v&Kt)!==0?to(c,Nr):Hn(c))))}}let Ii=!1;var _s,ro,no,so;function Li(){if(_s===void 0){_s=window,ro=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;no=br(e,"firstChild").get,so=br(e,"nextSibling").get,Ol(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Ol(t)&&(t.__t=void 0)}}function ws(r=""){return document.createTextNode(r)}function Rt(r){return no.call(r)}function Dn(r){return so.call(r)}function q(r,e){return Rt(r)}function Q(r,e){{var t=Rt(r);return t instanceof Comment&&t.data===""?Dn(t):t}}function L(r,e=1,t=!1){let l=r;for(;e--;)l=Dn(l);return l}function Ri(r){r.textContent=""}function lo(r){De===null&&Ye===null&&vi(),Ye!==null&&(Ye.f&Lt)!==0&&De===null&&fi(),vn&&ui()}function ji(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Kr(r,e,t,l=!0){var o=De,a={ctx:Oe,deps:null,nodes_start:null,nodes_end:null,f:r|lr,first:null,fn:e,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{Cs(a),a.f|=Bl}catch(u){throw vr(a),u}else e!==null&&Hn(a);var c=t&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(Yl|In))===0;if(!c&&l&&(o!==null&&ji(a,o),Ye!==null&&(Ye.f&Kt)!==0)){var v=Ye;(v.effects??(v.effects=[])).push(a)}return a}function oo(r){const e=Kr(zn,null,!1);return Jt(e,Mt),e.teardown=r,e}function ue(r){lo();var e=De!==null&&(De.f&ur)!==0&&Oe!==null&&!Oe.m;if(e){var t=Oe;(t.e??(t.e=[])).push({fn:r,effect:De,reaction:Ye})}else{var l=cn(r);return l}}function Fn(r){return lo(),xs(r)}function qi(r){const e=Kr(Wr,r,!0);return(t={})=>new Promise(l=>{t.outro?dr(e,()=>{vr(e),l(void 0)}):(vr(e),l(void 0))})}function cn(r){return Kr(Vl,r,!1)}function xs(r){return Kr(zn,r,!0)}function re(r,e=[],t=Gr){const l=e.map(t);return Tr(()=>r(...l.map(s)))}function Tr(r,e=0){return Kr(zn|Pn|e,r,!0)}function or(r,e=!0){return Kr(zn|ur,r,!0,e)}function ao(r){var e=r.teardown;if(e!==null){const t=vn,l=Ye;ho(!0),zt(null);try{e.call(null)}finally{ho(t),zt(l)}}}function io(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var l=t.next;(t.f&Wr)!==0?t.parent=null:vr(t,e),t=l}}function Di(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&ur)===0&&vr(e),e=t}}function vr(r,e=!0){var t=!1;(e||(r.f&ai)!==0)&&r.nodes_start!==null&&(co(r.nodes_start,r.nodes_end),t=!0),io(r,e&&!t),Un(r,0),Jt(r,Rn);var l=r.transitions;if(l!==null)for(const a of l)a.stop();ao(r);var o=r.parent;o!==null&&o.first!==null&&uo(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function co(r,e){for(;r!==null;){var t=r===e?null:Dn(r);r.remove(),r=t}}function uo(r){var e=r.parent,t=r.prev,l=r.next;t!==null&&(t.next=l),l!==null&&(l.prev=t),e!==null&&(e.first===r&&(e.first=l),e.last===r&&(e.last=t))}function dr(r,e){var t=[];ks(r,t,!0),fo(t,()=>{vr(r),e&&e()})}function fo(r,e){var t=r.length;if(t>0){var l=()=>--t||e();for(var o of r)o.out(l)}else e()}function ks(r,e,t){if((r.f&fr)===0){if(r.f^=fr,r.transitions!==null)for(const c of r.transitions)(c.is_global||t)&&e.push(c);for(var l=r.first;l!==null;){var o=l.next,a=(l.f&Ur)!==0||(l.f&ur)!==0;ks(l,e,a?t:!1),l=o}}}function Jr(r){vo(r,!0)}function vo(r,e){if((r.f&fr)!==0){r.f^=fr,(r.f&Mt)===0&&(r.f^=Mt),mn(r)&&(Jt(r,lr),Hn(r));for(var t=r.first;t!==null;){var l=t.next,o=(t.f&Ur)!==0||(t.f&ur)!==0;vo(t,o?e:!1),t=l}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}let un=[],Es=[];function mo(){var r=un;un=[],Tn(r)}function Fi(){var r=Es;Es=[],Tn(r)}function fn(r){un.length===0&&queueMicrotask(mo),un.push(r)}function Oi(){un.length>0&&mo(),Es.length>0&&Fi()}let On=!1,Vn=!1,Bn=null,zr=!1,vn=!1;function ho(r){vn=r}let dn=[],m0=[],Ye=null,ar=!1;function zt(r){Ye=r}let De=null;function Bt(r){De=r}let Ct=null;function go(r){Ye!==null&&Ye.f&hs&&(Ct===null?Ct=[r]:Ct.push(r))}let At=null,jt=0,Yt=null;function Vi(r){Yt=r}let po=1,Yn=0,_r=!1;function bo(){return++po}function mn(r){var m;var e=r.f;if((e&lr)!==0)return!0;if((e&Nr)!==0){var t=r.deps,l=(e&Lt)!==0;if(t!==null){var o,a,c=(e&Ln)!==0,v=l&&De!==null&&!_r,u=t.length;if(c||v){var f=r,d=f.parent;for(o=0;o<u;o++)a=t[o],(c||!((m=a==null?void 0:a.reactions)!=null&&m.includes(f)))&&(a.reactions??(a.reactions=[])).push(f);c&&(f.f^=Ln),v&&d!==null&&(d.f&Lt)===0&&(f.f^=Lt)}for(o=0;o<u;o++)if(a=t[o],mn(a)&&eo(a),a.wv>r.wv)return!0}(!l||De!==null&&!_r)&&Jt(r,Mt)}return!1}function Bi(r,e){for(var t=e;t!==null;){if((t.f&In)!==0)try{t.fn(r);return}catch{t.f^=In}t=t.parent}throw On=!1,r}function yo(r){return(r.f&Rn)===0&&(r.parent===null||(r.parent.f&In)===0)}function Wn(r,e,t,l){if(On){if(t===null&&(On=!1),yo(e))throw r;return}if(t!==null&&(On=!0),Bi(r,e),yo(e))throw r}function _o(r,e,t=!0){var l=r.reactions;if(l!==null)for(var o=0;o<l.length;o++){var a=l[o];Ct!=null&&Ct.includes(r)||((a.f&Kt)!==0?_o(a,e,!1):e===a&&(t?Jt(a,lr):(a.f&Mt)!==0&&Jt(a,Nr),Hn(a)))}}function wo(r){var g;var e=At,t=jt,l=Yt,o=Ye,a=_r,c=Ct,v=Oe,u=ar,f=r.f;At=null,jt=0,Yt=null,_r=(f&Lt)!==0&&(ar||!zr||Ye===null),Ye=(f&(ur|Wr))===0?r:null,Ct=null,jn(r.ctx),ar=!1,Yn++,r.f|=hs;try{var d=(0,r.fn)(),m=r.deps;if(At!==null){var h;if(Un(r,jt),m!==null&&jt>0)for(m.length=jt+At.length,h=0;h<At.length;h++)m[jt+h]=At[h];else r.deps=m=At;if(!_r)for(h=jt;h<m.length;h++)((g=m[h]).reactions??(g.reactions=[])).push(r)}else m!==null&&jt<m.length&&(Un(r,jt),m.length=jt);if(Sr()&&Yt!==null&&!ar&&m!==null&&(r.f&(Kt|Nr|lr))===0)for(h=0;h<Yt.length;h++)_o(Yt[h],r);return o!==null&&o!==r&&(Yn++,Yt!==null&&(l===null?l=Yt:l.push(...Yt))),d}finally{At=e,jt=t,Yt=l,Ye=o,_r=a,Ct=c,jn(v),ar=u,r.f^=hs}}function Yi(r,e){let t=e.reactions;if(t!==null){var l=ei.call(t,r);if(l!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[l]=t[o],t.pop())}}t===null&&(e.f&Kt)!==0&&(At===null||!At.includes(e))&&(Jt(e,Nr),(e.f&(Lt|Ln))===0&&(e.f^=Ln),Zl(e),Un(e,0))}function Un(r,e){var t=r.deps;if(t!==null)for(var l=e;l<t.length;l++)Yi(r,t[l])}function Cs(r){var e=r.f;if((e&Rn)===0){Jt(r,Mt);var t=De,l=Oe,o=zr;De=r,zr=!0;try{(e&Pn)!==0?Di(r):io(r),ao(r);var a=wo(r);r.teardown=typeof a=="function"?a:null,r.wv=po;var c=r.deps,v;ut&&bi&&r.f&lr}catch(u){Wn(u,r,t,l||r.ctx)}finally{zr=o,De=t}}}function Wi(){try{di()}catch(r){if(Bn!==null)Wn(r,Bn,null);else throw r}}function xo(){var r=zr;try{var e=0;for(zr=!0;dn.length>0;){e++>1e3&&Wi();var t=dn,l=t.length;dn=[];for(var o=0;o<l;o++){var a=Hi(t[o]);Ui(a)}an.clear()}}finally{Vn=!1,zr=r,Bn=null}}function Ui(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var l=r[t];if((l.f&(Rn|fr))===0)try{mn(l)&&(Cs(l),l.deps===null&&l.first===null&&l.nodes_start===null&&(l.teardown===null?uo(l):l.fn=null))}catch(o){Wn(o,l,null,l.ctx)}}}function Hn(r){Vn||(Vn=!0,queueMicrotask(xo));for(var e=Bn=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Wr|ur))!==0){if((t&Mt)===0)return;e.f^=Mt}}dn.push(e)}function Hi(r){for(var e=[],t=r;t!==null;){var l=t.f,o=(l&(ur|Wr))!==0,a=o&&(l&Mt)!==0;if(!a&&(l&fr)===0){if((l&Vl)!==0)e.push(t);else if(o)t.f^=Mt;else try{mn(t)&&Cs(t)}catch(u){Wn(u,t,null,t.ctx)}var c=t.first;if(c!==null){t=c;continue}}var v=t.parent;for(t=t.next;t===null&&v!==null;)t=v.next,v=v.parent}return e}function Gi(r){for(var e;;){if(Oi(),dn.length===0)return e;Vn=!0,xo()}}function s(r){var e=r.f,t=(e&Kt)!==0;if(Ye!==null&&!ar){if(!(Ct!=null&&Ct.includes(r))){var l=Ye.deps;r.rv<Yn&&(r.rv=Yn,At===null&&l!==null&&l[jt]===r?jt++:At===null?At=[r]:(!_r||!At.includes(r))&&At.push(r))}}else if(t&&r.deps===null&&r.effects===null){var o=r,a=o.parent;a!==null&&(a.f&Lt)===0&&(o.f^=Lt)}return t&&(o=r,mn(o)&&eo(o)),vn&&an.has(r)?an.get(r):r.v}function xt(r){var e=ar;try{return ar=!0,r()}finally{ar=e}}const Xi=-7169;function Jt(r,e){r.f=r.f&Xi|e}function Ki(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(yr in r)As(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&yr in t&&As(t)}}}function As(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let l in r)try{As(r[l],e)}catch{}const t=ms(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const l=Fl(t);for(let o in l){const a=l[o].get;if(a)try{a.call(r)}catch{}}}}}const Ji=["touchstart","touchmove"];function Qi(r){return Ji.includes(r)}let ko=!1;function Zi(){ko||(ko=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Ns(r){var e=Ye,t=De;zt(null),Bt(null);try{return r()}finally{zt(e),Bt(t)}}function $i(r,e,t,l=t){r.addEventListener(e,()=>Ns(t));const o=r.__on_r;o?r.__on_r=()=>{o(),l(!0)}:r.__on_r=()=>l(!0),Zi()}const Eo=new Set,Ss=new Set;function ec(r,e,t,l={}){function o(a){if(l.capture||hn.call(e,a),!a.cancelBubble)return Ns(()=>t==null?void 0:t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?fn(()=>{e.addEventListener(r,o,l)}):e.addEventListener(r,o,l),o}function Pr(r,e,t,l,o){var a={capture:l,passive:o},c=ec(r,e,t,a);(e===document.body||e===window||e===document)&&oo(()=>{e.removeEventListener(r,c,a)})}function rt(r){for(var e=0;e<r.length;e++)Eo.add(r[e]);for(var t of Ss)t(r)}function hn(r){var A;var e=this,t=e.ownerDocument,l=r.type,o=((A=r.composedPath)==null?void 0:A.call(r))||[],a=o[0]||r.target,c=0,v=r.__root;if(v){var u=o.indexOf(v);if(u!==-1&&(e===document||e===window)){r.__root=e;return}var f=o.indexOf(e);if(f===-1)return;u<=f&&(c=u)}if(a=o[c]||r.target,a!==e){ti(r,"currentTarget",{configurable:!0,get(){return a||t}});var d=Ye,m=De;zt(null),Bt(null);try{for(var h,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+l];if(y!=null&&(!a.disabled||r.target===a))if(Br(y)){var[b,...E]=y;b.apply(a,[r,...E])}else y.call(a,r)}catch(N){h?g.push(N):h=N}if(r.cancelBubble||p===e||p===null)break;a=p}if(h){for(let N of g)queueMicrotask(()=>{throw N});throw h}}finally{r.__root=e,delete r.currentTarget,zt(d),Bt(m)}}}function Ms(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function Qr(r,e){var t=De;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function J(r,e){var t=(e&Xl)!==0,l=(e&Si)!==0,o,a=!r.startsWith("<!>");return()=>{o===void 0&&(o=Ms(a?r:"<!>"+r),t||(o=Rt(o)));var c=l||ro?document.importNode(o,!0):o.cloneNode(!0);if(t){var v=Rt(c),u=c.lastChild;Qr(v,u)}else Qr(c,c);return c}}function me(r,e,t="svg"){var l=!r.startsWith("<!>"),o=(e&Xl)!==0,a=`<${t}>${l?r:"<!>"+r}</${t}>`,c;return()=>{if(!c){var v=Ms(a),u=Rt(v);if(o)for(c=document.createDocumentFragment();Rt(u);)c.appendChild(Rt(u));else c=Rt(u)}var f=c.cloneNode(!0);if(o){var d=Rt(f),m=f.lastChild;Qr(d,m)}else Qr(f,f);return f}}function de(){var r=document.createDocumentFragment(),e=document.createComment(""),t=ws();return r.append(e,t),Qr(e,t),r}function I(r,e){r!==null&&r.before(e)}let Ts=!0;function le(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function tc(r,e){return rc(r,e)}const Zr=new Map;function rc(r,{target:e,anchor:t,props:l={},events:o,context:a,intro:c=!0}){Li();var v=new Set,u=m=>{for(var h=0;h<m.length;h++){var g=m[h];if(!v.has(g)){v.add(g);var p=Qi(g);e.addEventListener(g,hn,{passive:p});var y=Zr.get(g);y===void 0?(document.addEventListener(g,hn,{passive:p}),Zr.set(g,1)):Zr.set(g,y+1)}}};u(ds(Eo)),Ss.add(u);var f=void 0,d=qi(()=>{var m=t??e.appendChild(ws());return or(()=>{if(a){fe({});var h=Oe;h.c=a}o&&(l.$$events=o),Ts=c,f=r(m,l)||{},Ts=!0,a&&ve()}),()=>{var p;for(var h of v){e.removeEventListener(h,hn);var g=Zr.get(h);--g===0?(document.removeEventListener(h,hn),Zr.delete(h)):Zr.set(h,g)}Ss.delete(u),m!==t&&((p=m.parentNode)==null||p.removeChild(m))}});return nc.set(f,d),f}let nc=new WeakMap;const zs=0,Gn=1,Ps=2;function Is(r,e,t,l,o){var a=r,c=Sr(),v=Oe,u=yt,f,d,m,h=(c?Mr:qn)(void 0),g=(c?Mr:qn)(void 0),p=!1;function y(E,A){p=!0,A&&(Bt(b),zt(b),jn(v));try{E===zs&&t&&(f?Jr(f):f=or(()=>t(a))),E===Ps&&o&&(m?Jr(m):m=or(()=>o(a,g))),E!==zs&&f&&dr(f,()=>f=null),E!==Gn&&d&&dr(d,()=>d=null),E!==Ps&&m&&dr(m,()=>m=null)}finally{A&&(jn(null),zt(null),Bt(null),Gi())}}var b=Tr(()=>{if(u!==(u=e())){if(si(u)){var E=u;p=!1,E.then(A=>{E===u&&(Xr(h,A),y(Gn,!0))},A=>{if(E===u&&(Xr(g,A),y(Ps,!0),!o))throw g.v}),fn(()=>{p||y(zs,!0)})}else Xr(h,u),y(Gn,!1);return()=>u=yt}})}function U(r,e,[t,l]=[0,0]){var o=r,a=null,c=null,v=yt,u=t>0?Ur:0,f=!1;const d=(h,g=!0)=>{f=!0,m(g,h)},m=(h,g)=>{v!==(v=h)&&(v?(a?Jr(a):g&&(a=or(()=>g(o))),c&&dr(c,()=>{c=null})):(c?Jr(c):g&&(c=or(()=>g(o,[t+1,l]))),a&&dr(a,()=>{a=null})))};Tr(()=>{f=!1,e(d),f||m(null,null)},u)}function gn(r,e,t){var l=r,o=yt,a,c=Sr()?ci:Hl;Tr(()=>{c(o,o=e())&&(a&&dr(a),a=or(()=>t(l)))})}function Fe(r,e){return e}function sc(r,e,t,l){for(var o=[],a=e.length,c=0;c<a;c++)ks(e[c].e,o,!0);var v=a>0&&o.length===0&&t!==null;if(v){var u=t.parentNode;Ri(u),u.append(t),l.clear(),wr(r,e[0].prev,e[a-1].next)}fo(o,()=>{for(var f=0;f<a;f++){var d=e[f];v||(l.delete(d.k),wr(r,d.prev,d.next)),vr(d.e,!v)}})}function Ie(r,e,t,l,o,a=null){var c=r,v={flags:e,items:new Map,first:null},u=(e&Gl)!==0;if(u){var f=r;c=f.appendChild(ws())}var d=null,m=!1,h=Ql(()=>{var g=t();return Br(g)?g:g==null?[]:ds(g)});Tr(()=>{var g=s(h),p=g.length;m&&p===0||(m=p===0,lc(g,v,c,o,e,l,t),a!==null&&(p===0?d?Jr(d):d=or(()=>a(c)):d!==null&&dr(d,()=>{d=null})),s(h))})}function lc(r,e,t,l,o,a,c){var W,T,S,V;var v=(o&_i)!==0,u=(o&(ps|bs))!==0,f=r.length,d=e.items,m=e.first,h=m,g,p=null,y,b=[],E=[],A,N,w,_;if(v)for(_=0;_<f;_+=1)A=r[_],N=a(A,_),w=d.get(N),w!==void 0&&((W=w.a)==null||W.measure(),(y??(y=new Set)).add(w));for(_=0;_<f;_+=1){if(A=r[_],N=a(A,_),w=d.get(N),w===void 0){var z=h?h.e.nodes_start:t;p=ac(z,e,p,p===null?e.first:p.next,A,N,_,l,o,c),d.set(N,p),b=[],E=[],h=p.next;continue}if(u&&oc(w,A,_,o),(w.e.f&fr)!==0&&(Jr(w.e),v&&((T=w.a)==null||T.unfix(),(y??(y=new Set)).delete(w))),w!==h){if(g!==void 0&&g.has(w)){if(b.length<E.length){var M=E[0],C;p=M.prev;var P=b[0],D=b[b.length-1];for(C=0;C<b.length;C+=1)Co(b[C],M,t);for(C=0;C<E.length;C+=1)g.delete(E[C]);wr(e,P.prev,D.next),wr(e,p,P),wr(e,D,M),h=M,p=D,_-=1,b=[],E=[]}else g.delete(w),Co(w,h,t),wr(e,w.prev,w.next),wr(e,w,p===null?e.first:p.next),wr(e,p,w),p=w;continue}for(b=[],E=[];h!==null&&h.k!==N;)(h.e.f&fr)===0&&(g??(g=new Set)).add(h),E.push(h),h=h.next;if(h===null)continue;w=h}b.push(w),p=w,h=w.next}if(h!==null||g!==void 0){for(var R=g===void 0?[]:ds(g);h!==null;)(h.e.f&fr)===0&&R.push(h),h=h.next;var Y=R.length;if(Y>0){var B=(o&Gl)!==0&&f===0?t:null;if(v){for(_=0;_<Y;_+=1)(S=R[_].a)==null||S.measure();for(_=0;_<Y;_+=1)(V=R[_].a)==null||V.fix()}sc(e,R,B,d)}}v&&fn(()=>{var j;if(y!==void 0)for(w of y)(j=w.a)==null||j.apply()}),De.first=e.first&&e.first.e,De.last=p&&p.e}function oc(r,e,t,l){(l&ps)!==0&&Xr(r.v,e),(l&bs)!==0?Xr(r.i,t):r.i=t}function ac(r,e,t,l,o,a,c,v,u,f){var d=(u&ps)!==0,m=(u&wi)===0,h=d?m?qn(o):Mr(o):o,g=(u&bs)===0?c:Mr(c),p={i:g,v:h,k:a,a:null,e:null,prev:t,next:l};try{return p.e=or(()=>v(r,h,g,f),Ii),p.e.prev=t&&t.e,p.e.next=l&&l.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),l!==null&&(l.prev=p,l.e.prev=p.e),p}finally{}}function Co(r,e,t){for(var l=r.next?r.next.e.nodes_start:t,o=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==l;){var c=Dn(a);o.before(a),a=c}}function wr(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function kt(r,e,t=!1,l=!1,o=!1){var a=r,c="";re(()=>{var v=De;if(c!==(c=e()??"")&&(v.nodes_start!==null&&(co(v.nodes_start,v.nodes_end),v.nodes_start=v.nodes_end=null),c!=="")){var u=c+"";t?u=`<svg>${u}</svg>`:l&&(u=`<math>${u}</math>`);var f=Ms(u);if((t||l)&&(f=Rt(f)),Qr(Rt(f),f.lastChild),t||l)for(;Rt(f);)a.before(Rt(f));else a.before(f)}})}function xr(r,e,...t){var l=r,o=pt,a;Tr(()=>{o!==(o=e())&&(a&&(vr(a),a=null),a=or(()=>o(l,...t)))},Ur)}function Ls(r,e,t){var l=r,o,a;Tr(()=>{o!==(o=e())&&(a&&(dr(a),a=null),o&&(a=or(()=>t(l,o))))},Ur)}function Ao(r){var e,t,l="";if(typeof r=="string"||typeof r=="number")l+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=Ao(r[e]))&&(l&&(l+=" "),l+=t)}else for(t in r)r[t]&&(l&&(l+=" "),l+=t);return l}function ic(){for(var r,e,t=0,l="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=Ao(r))&&(l&&(l+=" "),l+=e);return l}function cc(r){return typeof r=="object"?ic(r):r??""}const No=[...`
\r\f \v\uFEFF`];function uc(r,e,t){var l=r==null?"":""+r;if(e&&(l=l?l+" "+e:e),t){for(var o in t)if(t[o])l=l?l+" "+o:o;else if(l.length)for(var a=o.length,c=0;(c=l.indexOf(o,c))>=0;){var v=c+a;(c===0||No.includes(l[c-1]))&&(v===l.length||No.includes(l[v]))?l=(c===0?"":l.substring(0,c))+l.substring(v+1):c=v}}return l===""?null:l}function fc(r,e){return r==null?null:String(r)}function vt(r,e,t,l,o,a){var c=r.__className;if(c!==t||c===void 0){var v=uc(t,l,a);v==null?r.removeAttribute("class"):e?r.className=v:r.setAttribute("class",v),r.__className=t}else if(a&&o!==a)for(var u in a){var f=!!a[u];(o==null||f!==!!o[u])&&r.classList.toggle(u,f)}return a}function lt(r,e,t,l){var o=r.__style;if(o!==e){var a=fc(e);a==null?r.removeAttribute("style"):r.style.cssText=a,r.__style=e}return l}const vc=Symbol("is custom element"),dc=Symbol("is html");function F(r,e,t,l){var o=mc(r);o[e]!==(o[e]=t)&&(e==="loading"&&(r[ii]=t),t==null?r.removeAttribute(e):typeof t!="string"&&hc(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function mc(r){return r.__attributes??(r.__attributes={[vc]:r.nodeName.includes("-"),[dc]:r.namespaceURI===Mi})}var So=new Map;function hc(r){var e=So.get(r.nodeName);if(e)return e;So.set(r.nodeName,e=[]);for(var t,l=r,o=Element.prototype;o!==l;){t=Fl(l);for(var a in t)t[a].set&&e.push(a);l=ms(l)}return e}const gc=()=>performance.now(),mr={tick:r=>requestAnimationFrame(r),now:()=>gc(),tasks:new Set};function Mo(){const r=mr.now();mr.tasks.forEach(e=>{e.c(r)||(mr.tasks.delete(e),e.f())}),mr.tasks.size!==0&&mr.tick(Mo)}function pc(r){let e;return mr.tasks.size===0&&mr.tick(Mo),{promise:new Promise(t=>{mr.tasks.add(e={c:r,f:t})}),abort(){mr.tasks.delete(e)}}}function Xn(r,e){Ns(()=>{r.dispatchEvent(new CustomEvent(e))})}function bc(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function To(r){const e={},t=r.split(";");for(const l of t){const[o,a]=l.split(":");if(!o||a===void 0)break;const c=bc(o.trim());e[c]=a.trim()}return e}const yc=r=>r;function _c(r,e,t,l){var o=(r&Ni)!==0,a="both",c,v=e.inert,u=e.style.overflow,f,d;function m(){var b=Ye,E=De;zt(null),Bt(null);try{return c??(c=t()(e,(l==null?void 0:l())??{},{direction:a}))}finally{zt(b),Bt(E)}}var h={is_global:o,in(){e.inert=v,Xn(e,"introstart"),f=Rs(e,m(),d,1,()=>{Xn(e,"introend"),f==null||f.abort(),f=c=void 0,e.style.overflow=u})},out(b){e.inert=!0,Xn(e,"outrostart"),d=Rs(e,m(),f,0,()=>{Xn(e,"outroend"),b==null||b()})},stop:()=>{f==null||f.abort(),d==null||d.abort()}},g=De;if((g.transitions??(g.transitions=[])).push(h),Ts){var p=o;if(!p){for(var y=g.parent;y&&(y.f&Ur)!==0;)for(;(y=y.parent)&&(y.f&Pn)===0;);p=!y||(y.f&Bl)!==0}p&&cn(()=>{xt(()=>h.in())})}}function Rs(r,e,t,l,o){var a=l===1;if(Yr(e)){var c,v=!1;return fn(()=>{if(!v){var b=e({direction:a?"in":"out"});c=Rs(r,b,t,l,o)}}),{abort:()=>{v=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return o(),{abort:pt,deactivate:pt,reset:pt,t:()=>l};const{delay:u=0,css:f,tick:d,easing:m=yc}=e;var h=[];if(a&&t===void 0&&(d&&d(0,1),f)){var g=To(f(0,1));h.push(g,g)}var p=()=>1-l,y=r.animate(h,{duration:u});return y.onfinish=()=>{var b=(t==null?void 0:t.t())??1-l;t==null||t.abort();var E=l-b,A=e.duration*Math.abs(E),N=[];if(A>0){var w=!1;if(f)for(var _=Math.ceil(A/16.666666666666668),z=0;z<=_;z+=1){var M=b+E*m(z/_),C=To(f(M,1-M));N.push(C),w||(w=C.overflow==="hidden")}w&&(r.style.overflow="hidden"),p=()=>{var P=y.currentTime;return b+E*m(P/A)},d&&pc(()=>{if(y.playState!=="running")return!1;var P=p();return d(P,1-P),!0})}y=r.animate(N,{duration:A,fill:"forwards"}),y.onfinish=()=>{p=()=>l,d==null||d(l,1-l),o()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=pt)},deactivate:()=>{o=pt},reset:()=>{l===0&&(d==null||d(1,0))},t:()=>p()}}function js(r,e,t=e){var l=Sr();$i(r,"input",o=>{var a=o?r.defaultValue:r.value;if(a=qs(r)?Ds(a):a,t(a),l&&a!==(a=e())){var c=r.selectionStart,v=r.selectionEnd;r.value=a??"",v!==null&&(r.selectionStart=c,r.selectionEnd=Math.min(v,r.value.length))}}),xt(e)==null&&r.value&&t(qs(r)?Ds(r.value):r.value),xs(()=>{var o=e();qs(r)&&o===Ds(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o??"")})}function qs(r){var e=r.type;return e==="number"||e==="range"}function Ds(r){return r===""?null:+r}const fs=class fs{constructor(e){Mn(this,us);Mn(this,Ar,new WeakMap);Mn(this,ln);Mn(this,An);Dl(this,An,e)}observe(e,t){var l=pr(this,Ar).get(e)||new Set;return l.add(t),pr(this,Ar).set(e,l),Za(this,us,$a).call(this).observe(e,pr(this,An)),()=>{var o=pr(this,Ar).get(e);o.delete(t),o.size===0&&(pr(this,Ar).delete(e),pr(this,ln).unobserve(e))}}};Ar=new WeakMap,ln=new WeakMap,An=new WeakMap,us=new WeakSet,$a=function(){return pr(this,ln)??Dl(this,ln,new ResizeObserver(e=>{for(var t of e){fs.entries.set(t.target,t);for(var l of pr(this,Ar).get(t.target)||[])l(t)}}))},Vr(fs,"entries",new WeakMap);let Fs=fs;var wc=new Fs({box:"border-box"});function zo(r,e,t){var l=wc.observe(r,()=>t(r[e]));cn(()=>(xt(()=>t(r[e])),l))}function Po(r,e){return r===e||(r==null?void 0:r[yr])===e}function $r(r={},e,t,l){return cn(()=>{var o,a;return xs(()=>{o=a,a=[],xt(()=>{r!==t(...a)&&(e(r,...a),o&&Po(t(...o),r)&&e(null,...o))})}),()=>{fn(()=>{a&&Po(t(...a),r)&&e(null,...a)})}}),r}function xc(r=!1){const e=Oe,t=e.l.u;if(!t)return;let l=()=>Ki(e.s);if(r){let o=0,a={};const c=Gr(()=>{let v=!1;const u=e.s;for(const f in u)u[f]!==a[f]&&(a[f]=u[f],v=!0);return v&&o++,o});l=()=>s(c)}t.b.length&&Fn(()=>{Io(e,l),Tn(t.b)}),ue(()=>{const o=xt(()=>t.m.map(li));return()=>{for(const a of o)typeof a=="function"&&a()}}),t.a.length&&ue(()=>{Io(e,l),Tn(t.a)})}function Io(r,e){if(r.l.s)for(const t of r.l.s)s(t);e()}let Kn=!1;function kc(r){var e=Kn;try{return Kn=!1,[r(),Kn]}finally{Kn=e}}const Ec={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function Cc(r,e,t){return new Proxy({props:r,exclude:e},Ec)}const Ac={get(r,e){let t=r.props.length;for(;t--;){let l=r.props[t];if(Yr(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l)return l[e]}},set(r,e,t){let l=r.props.length;for(;l--;){let o=r.props[l];Yr(o)&&(o=o());const a=br(o,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let l=r.props[t];if(Yr(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l){const o=br(l,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(r,e){if(e===yr||e===Wl)return!1;for(let t of r.props)if(Yr(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props)if(Yr(t)&&(t=t()),!!t){for(const l in t)e.includes(l)||e.push(l);for(const l of Object.getOwnPropertySymbols(t))e.includes(l)||e.push(l)}return e}};function Ir(...r){return new Proxy({props:r},Ac)}function Lo(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function G(r,e,t,l){var z;var o=(t&xi)!==0,a=!Hr||(t&ki)!==0,c=(t&Ci)!==0,v=(t&Ai)!==0,u=!1,f;c?[f,u]=kc(()=>r[e]):f=r[e];var d=yr in r||Wl in r,m=c&&(((z=br(r,e))==null?void 0:z.set)??(d&&e in r&&(M=>r[e]=M)))||void 0,h=l,g=!0,p=!1,y=()=>(p=!0,g&&(g=!1,v?h=xt(l):h=l),h);f===void 0&&l!==void 0&&(m&&a&&mi(),f=y(),m&&m(f));var b;if(a)b=()=>{var M=r[e];return M===void 0?y():(g=!0,p=!1,M)};else{var E=(o?Gr:Ql)(()=>r[e]);E.f|=oi,b=()=>{var M=s(E);return M!==void 0&&(h=void 0),M===void 0?h:M}}if((t&Ei)===0)return b;if(m){var A=r.$$legacy;return function(M,C){return arguments.length>0?((!a||!C||A||u)&&m(C?b():M),M):b()}}var N=!1,w=qn(f),_=Gr(()=>{var M=b(),C=s(w);return N?(N=!1,C):w.v=M});return c&&s(_),o||(_.equals=gs),function(M,C){if(arguments.length>0){const P=C?s(_):a&&c?Xe(M):M;if(!_.equals(P)){if(N=!0,H(w,P),p&&h!==void 0&&(h=P),Lo(_))return M;xt(()=>s(_))}return M}return Lo(_)?_.v:s(_)}}function Nc(r){Oe===null&&Kl(),Hr&&Oe.l!==null?Sc(Oe).m.push(r):ue(()=>{const e=xt(r);if(typeof e=="function")return e})}function Sc(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Mc="5";typeof window<"u"&&((Ka=window.__svelte??(window.__svelte={})).v??(Ka.v=new Set)).add(Mc),yi();function Ro(r){if(Se(r))return Ro(r.v);const e=new ge.valuesConstructor(r.length-1);for(let t=0;t<r.length-1;t++)e[t]=r[t+1]-r[t];return new ge(e)}function jo(r,e){if(Se(r))return jo(r.v,e);const t=en(r),l=(t[1]-t[0])*e;return[t[0]-l,t[1]+l]}function en(r){if(Se(r))return en(r.v);let e=r[0],t=r[0];for(let l=1;l<r.length;l++)r[l]<e&&(e=r[l]),r[l]>t&&(t=r[l]);return[e,t]}function Os(r,e){return Se(r)?Os(r.v,e):Math.sqrt(Vs(r,e))}function Vs(r,e){if(e===void 0&&(e=!1),Se(r))return Vs(r.v);const t=pn(r);let l=0;for(let o=0;o<r.length;o++){const a=r[o]-t;l=l+a*a}return l/(e?r.length:r.length-1)}function pn(r){return Se(r)?pn(r.v):qo(r)/r.length}function qo(r){if(Se(r))return qo(r.v);let e=0;for(let t=0;t<r.length;t++)e=e+r[t];return e}function Do(r){if(Se(r))return Do(r.v);let e=1;for(let t=0;t<r.length;t++)e=e*r[t];return e}function tn(r){return Se(r)||Zt(r)?r.v[Bs(r.v)-1]:r[Bs(r)-1]}function Bs(r){if(Se(r)||Zt(r))return Bs(r.v);let e=1,t=r[0];for(let l=2;l<=r.length;l++)r[l-1]<t&&(e=l,t=r[l-1]);return e}function qt(r){return Se(r)||Zt(r)?r.v[Ys(r.v)-1]:r[Ys(r)-1]}function Ys(r){if(Se(r)||Zt(r))return Ys(r.v);let e=1,t=r[0];for(let l=2;l<=r.length;l++)r[l-1]>t&&(e=l,t=r[l-1]);return e}const Ws=30,Tc=1e-7,zc=1e-7,Fo=1e-13,Oo=1e3,Pc=100;function Vo(r,e,t,l,o){l===void 0&&(l=Oo),t===void 0&&(t=Fo),o===void 0&&(o=Pc);let a=t,c=l,v=(c-a)/o;for(let u=0;u<o;u++){let f,d;for(let g=0;g<o;g++){f=a+g*v,d=a+(g+1)*v;const p=e(f),y=e(d);if(p<=r&&y>=r)break}const m=(f+d)/2,h=e(m);if(Math.abs(h-r)<Tc||(a=f,c=d,v=(c-a)/o,v/c<zc))return m}return(a+c)/2}function Bo(r,e=0,t=1){let l=ge.zeros(r);for(let o=0;o<r;o++)l.v[o]=e+Math.random()*(t-e);return l}function Yo(r,e=0,t=1){let l=ge.zeros(r);for(let o=0;o<r;o++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();l.v[o]=a*Math.sin(c)*t+e}return l}function Jn(r,e=0,t=1){if(Se(r))return r.apply(o=>Jn(o,e,t));const l=1/(Math.sqrt(2)*t);return .5*(1+Lc((r-e)*l))}function Qn(r,e=0,t=1){if(Se(r))return r.apply(B=>Qn(B,e,t));if(e!==0||t!==1)return Qn(r)*t+e;if(r<0||r>1)throw Error('Parameter "p" must be between 0 and 1.');if(r<1e-10)return-1/0;if(r>.9999999999)return 1/0;const l=.425,o=5,a=.180625,c=1.6,v=3.3871327179,u=5.0434271938*10,f=1.5929113202*100,d=5.910937472*10,m=1.7895169469*10,h=7.8757757664*10,g=6.71875636*10,p=1.4234372777,y=2.75681539,b=1.3067284816,E=1.7023821103*.1,A=7.370016425*.1,N=1.2021132975*.1,w=6.657905115,_=3.081226386,z=4.2868294337*.1,M=1.7337203997*.01,C=2.4197894225*.1,P=1.2258202635*.01,D=r-.5;let R;if(Math.abs(D)<=l)return R=a-D*D,D*(((d*R+f)*R+u)*R+v)/(((g*R+h)*R+m)*R+1);R=D<0?r:1-r,R=Math.sqrt(-Math.log(R));let Y;return R<=o?(R=R-c,Y=(((E*R+b)*R+y)*R+p)/((N*R+A)*R+1)):(R=R-o,Y=((M*R+z)*R+_+w)/((P*R+C)*R+1)),D<0?-Y:Y}function Us(r,e,t){if(t<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(r))return Us(Je(r),e,t);if(Se(r))return r.apply(l=>Us(l,e,t));if(r<=0)return 0;if(t<=0&&ML_ERR_return_NAN,t==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(r<1)return 0;if(r==1)return .5;if(r>1)return 1}return Zn(r*e,e)}return e==Number.POSITIVE_INFINITY?1-Zn(t/r,t):e*r>t?1-$n(t/(t+e*r),t/2,e/2):$n(e*r/(t+e*r),e/2,t/2)}function Wo(r,e,t){if(r===0)return 0;if(r===1)return Inf;if(t<=0)return NaN;let l=Oo,o=Fo;if(r>.9997&&t===1?(l=1e7,o=6e5,r=.9997):r>.9992&&t===1?(l=1e7,o=6e5):r>.997&&t===1?(l=1e6,o=45e3):r>.992&&t===1?(l=1e5,o=5e3):r>.97&&t===1&&(l=1e4,o=400),Array.isArray(r))return Wo(Je(r),e,t);const a=v=>Us(v,e,t);function c(v,u,f){return v===0?0:v===1?Inf:u===0?NaN:f===0?NaN:Vo(v,a,o,l)}return Se(r)?r.apply(c,e,t):c(r,e,t)}function Zn(r,e){if(Array.isArray(r))return Zn(Je(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(l);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const f=u/e,d=Math.pow(f,1/6)-.5*Math.pow(f,1/3)+1/3*Math.pow(f,1/2);return Jn(d,t,o)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:Ic(u/2,e/2)/bn(e/2)}const v=e>Ws?a:c;return Se(r)?r.apply(v):v(r)}function Wt(r,e){if(Array.isArray(r))return Wt(Je(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(l);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const f=Qn(u,t,o),d=Math.pow(Math.sqrt(36*f*f-30*f+13)/4+(3*f-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:Vo(u,d=>Zn(d,e),0,Ws*10)}const v=e>Ws?a:c;return Se(r)?r.apply(v):v(r)}function $n(r,e,t){if(Array.isArray(r))return $n(Je(r),e,t);if(Se(r))return r.apply(o=>$n(o,e,t));if(r<=0)return 0;if(r>=1)return 1;if(e==0||t==0||!Number.isFinite(e)||!Number.isFinite(t))return e==0&&t==0?.5:e==0||e/t==0?1:t==0||t/e==0||r<.5?0:1;const l=.5-r+.5;return Hc(e,t,r,l)}function bn(r){if(Se(r))return r.apply(bn);if(r<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(r<.5)return Math.PI/(Math.sin(Math.PI*r)+bn(1-r));r=r-1;let t=.9999999999998099;for(let o=0;o<e.length;o++)t=t+e[o]/(r+o+1);const l=r+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(l,r+.5)*Math.exp(-l)*t}function Ic(r,e){let o=0;for(let a=0;a<1e4;a++){const c=Math.pow(r,a)/bn(e+a+1);if(isNaN(c)||c<1e-18)break;o+=c}return Math.pow(r,e)*bn(e)*Math.exp(-r)*o}function Lc(r){const e=r>=0?1:-1;r=Math.abs(r);const t=.254829592,l=-.284496736,o=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*r),f=1-((((c*u+a)*u+o)*u+l)*u+t)*u*Math.exp(-r*r);return e*f}function Uo(r,e){const t=.564189583547756,l=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],v=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,d,m,h,g=Math.abs(e);if(g<=.5)return d=e*e,h=(((l[0]*d+l[1])*d+l[2])*d+l[3])*d+l[4]+1,m=((o[0]*d+o[1])*d+o[2])*d+1,f=.5-e*(h/m)+.5,f=Math.exp(d)*f,f;if(g<=4)h=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],m=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],f=h/m;else{if(e<=-5.6)return f=2,f=Math.exp(e*e)*2,f;d=1/(e*e),h=(((v[0]*d+v[1])*d+v[2])*d+v[3])*d+v[4],m=(((u[0]*d+u[1])*d+u[2])*d+u[3])*d+1,f=(t-d*h/m)/g}return e<0&&(f=Math.exp(e*e)*2-f),f}function Ho(r,e){let t=r+e-2;return t<=.25?Ut(t+1):t<=1.25?Ut(t)+Er(t):Ut(t-1)+Math.log(t*(t+1))}function es(r,e){const t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;let u,f,d,m,h,g,p,y,b,E,A,N,w,_,z;return d=Math.min(r,e),m=Math.max(r,e),g=d/m,h=g/(g+1),b=1/(g+1),N=b*b,E=b+N+1,A=b+N*E+1,w=b+N*A+1,_=b+N*w+1,z=b+N*_+1,f=1/m,p=f*f,y=((((v*z*p+c*_)*p+a*w)*p+o*A)*p+l*E)*p+t,y*=h/m,f=1/d,p=f*f,u=(((((v*p+c)*p+a)*p+o)*p+l)*p+t)/d+y,u}function et(r){let e,t,l,o,a;if(t=r,e=r-.5,e>0&&(t=e-.5),t<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],v=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*t+c[7])*t+c[6])*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],o=(u*t+v)*t+1,l=a/o,e>0?t*l/r:r*(l+.5+.5)}else{if(t==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],v=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],o=(((v[4]*t+v[3])*t+v[2])*t+v[1])*t+1,l=a/o,e>0?t/r*(l-.5-.5):r*l}}}function Rc(r,e,t){let l,o,a,c;if(r<-1.1||r>1.1)return Number.NaN;c=r*2,a=o=0,l=0;for(let v=1;v<=t;v++)a=o,o=l,l=c*o-a+e[t-v];return(l-a)*.5}function Go(r){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],t=22,l=-.999999985;if(r==0)return 0;if(r==-1)return Number.NEGATIVE_INFINITY;if(r<-1)return Number.NaN;if(Math.abs(r)<=.375)return Math.abs(r)<.5*Number.EPSILON?r:0<r&&r<1e-8||-1e-9<r&&r<0?r*(1-.5*r):r*(1-r*Rc(r/.375,e,t));if(r<l)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+r)}function kr(r,e){const t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;let u,f,d,m,h,g,p,y,b,E,A,N,w,_;return r>e?(d=e/r,u=1/(d+1),y=d/(d+1),f=r+(e-.5)):(d=r/e,u=d/(d+1),y=1/(d+1),f=e+(r-.5)),A=y*y,b=y+A+1,E=y+A*b+1,N=y+A*E+1,w=y+A*N+1,_=y+A*w+1,m=1/(e*e),p=((((v*_*m+c*w)*m+a*N)*m+o*E)*m+l*b)*m+t,p*=u/e,h=f*Er(r/e),g=r*(Math.log(e)-1),h>g?p-g-h:p-h-g}function Ut(r){if(r<.6){const p=((((((-.00271935708322958*r+-.0673562214325671)*r+-.402055799310489)*r+-.780427615533591)*r+-.168860593646662)*r+.844203922187225)*r+.577215664901533)/((((((.000667465618796164*r+.0325038868253937)*r+.361951990101499)*r+1.56875193295039)*r+3.12755088914843)*r+2.88743195473681)*r+1);return-r*p}else{const e=.422784335098467,t=.848044614534529,l=.565221050691933,o=.156513060486551,a=.017050248402265,c=.000497958207639485,v=1.24313399877507,u=.548042109832463,f=.10155218743983,d=.00713309612391,m=.000116165475989616,h=r-.5-.5,g=(((((c*h+a)*h+o)*h+l)*h+t)*h+e)/(((((m*h+d)*h+f)*h+u)*h+v)*h+1);return h*g}}function Qt(r){const e=.418938533204673,t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;if(r<=.8)return Ut(r)-Math.log(r);if(r<=2.25)return Ut(r-.5-.5);if(r<10){let d=Math.round(r-1.25),m=r,h=1;for(let g=1;g<=d;++g)m+=-1,h*=m;return Ut(m-1)+Math.log(h)}let u=1/(r*r),f=(((((v*u+c)*u+a)*u+o)*u+l)*u+t)/r;return e+f+(r-.5)*(Math.log(r)-1)}function Hs(r,e){const t=.918938533204673;let l=Math.min(r,e),o=Math.max(r,e);function a(c,v,u){let f=Math.round(u-1),d=1;for(let m=1;m<=f;++m)u+=-1,d*=u/(v+u);return c+Math.log(d)+(Qt(v)+(Qt(u)-Ho(v,u)))}if(l<8){if(l<1)return o<8?Qt(l)+(Qt(o)-Qt(l+o)):Qt(l)+kr(l,o);let c;if(l<2)return o<=2?Qt(l)+Qt(o)-Ho(l,o):o<8?(c=0,a(c,l,o)):Qt(l)+kr(l,o);if(o<=1e3){let v=Math.round(l-1);c=1;for(let u=1;u<=v;++u){l+=-1;let f=l/o;c*=f/(f+1)}return c=Math.log(c),o>=8?c+Qt(l)+kr(l,o):a(c,l,o)}else{let v=Math.round(l-1);c=1;for(let u=1;u<=v;++u)l+=-1,c*=l/(l/o+1);return log(c)-v*log(o)+(Qt(l)+kr(l,o))}}else{let c=es(l,o),v=l/o,u=-(l-.5)*Math.log(v/(v+1)),f=o*Er(v);return u>f?Math.log(o)*-.5+t+c-f-u:Math.log(o)*-.5+t+c-u-f}}function Xo(r){return(r==0?1024:-300)*.69314718055995*.99999}function rn(r){const e=.0566749439387324,t=.0456512608815524,l=.333333333333333,o=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,v=.354508718369557;let u,f,d,m,h;return r<-.39||r>.57?(m=r+.5+.5,r-Math.log(m)):(r<-.18?(u=r+.3,u/=.7,h=e-u*.3):r>.18?(u=r*.75-.25,h=t+u/3):(u=r,h=0),f=u/(u+2),d=f*f,m=((a*d+o)*d+l)/((v*d+c)*d+1),d*2*(1/(1-f)-f*m)+h)}function Er(r){if(Math.abs(r)>.375)return Math.log(1+r);const e=-1.29418923021993,t=.405303492862024,l=-.0178874546012214,o=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let v=r/(r+2),u=v*v,f=(((l*u+t)*u+e)*u+1)/(((c*u+a)*u+o)*u+1);return v*2*f}function jc(r){const e=.564189583547756,t=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],v=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,f,d,m,h;if(d=Math.abs(r),d<=.5)return u=r*r,h=(((t[0]*u+t[1])*u+t[2])*u+t[3])*u+t[4]+1,m=((l[0]*u+l[1])*u+l[2])*u+1,r*(h/m);if(d<=4){h=((((((o[0]*d+o[1])*d+o[2])*d+o[3])*d+o[4])*d+o[5])*d+o[6])*d+o[7],m=((((((a[0]*d+a[1])*d+a[2])*d+a[3])*d+a[4])*d+a[5])*d+a[6])*d+a[7];let p=.5-Math.exp(-r*r)*h/m+.5;return r<0?-p:p}if(d>=5.8)return r>0?1:-1;f=r*r,u=1/f,h=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],m=(((v[0]*u+v[1])*u+v[2])*u+v[3])*u+1,u=(e-h/(f*m))/d;let g=.5-Math.exp(-f)*u+.5;return r<0?-g:g}function qc(r){const e=914041914819518e-24,t=.0238082361044469,l=-.499999999085958,o=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(r)<=.15)return r*(((t*r+e)*r+1)/((((c*r+a)*r+o)*r+l)*r+1));{let v=Math.exp(r);return r>0?v*(.5-1/v+.5):v-.5-.5}}function yn(r,e){let t;if(e>0){if(r>0||(t=r+e,t<0))return Math.exp(r)*Math.exp(e)}else if(r<0||(t=r+e,t>0))return Math.exp(r)*Math.exp(e);return Math.exp(t)}function Dc(r){const e=.785398163397448,t=1.4616321449683622,l=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],o=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let v,u,f,d,m,h,g,p,y,b,E,A,N;if(E=Number.MAX_SAFE_INTEGER,d=.5/(.5*Number.EPSILON),E>d&&(E=d),N=1e-9,p=0,r<.5){if(fabs(r)<=N){if(r==0)return 0;p=-1/r}else{if(m=-r,y=e,m<=0&&(m=-m,y=-y),m>=E)return 0;if(f=Math.round(m),m-=f,f=Math.round(m*4),m=(m-f*.25)*4,u=f/2,u+u!=f&&(m=1-m),h=e*m,v=u/2,v+v!=u&&(y=-y),u=(f+1)/2,v=u/2,v+=v,v==u){if(h==0)return 0;p=y*(cos(h)/sin(h)*4)}else p=y*(sin(h)/cos(h)*4)}r=1-r}if(r<=3){g=r,A=l[0]*r;for(let w=1;w<=5;++w)g=(g+o[w-1])*r,A=(A+l[w])*r;return g=(A+l[6])/(g+o[5]),b=r-t,g*b+p}if(r<E){m=1/(r*r),g=m,A=a[0]*m;for(let w=1;w<=3;++w)g=(g+c[w-1])*m,A=(A+a[w])*m;p=A/(g+c[3])-.5/r+p}return p+log(r)}function Fc(r,e,t,l){let o,a,c,v,u,f;if(r>l*.001){if(v=r*Math.log(t),v<Math.exparg(1))return 0;o=Math.exp(v)}else o=1;for(o*=e/r,f=l/r,u=r+1,v=t,c=v/u,u+=1,v=t*v,a=v/u,c+=a;Math.abs(t)>f;)u+=1,v=t*v,a=v/u,c+=a;return o*=r*c+1,o}function Oc(r,e,t,l){const o=.577215664901533;let a,c,v,u,f,d,m=e*t;for(f=t-m,c=e*l<=.02?Math.log(t)+Dc(e)+o+f:Math.log(m)+o+f,a=l*5*Math.abs(c),v=1,u=0,v+=1,f*=t-m/v,d=f/v,u+=d;Math.abs(d)>a;)v+=1,f*=t-m/v,d=f/v,u+=d;return-r*(c+u)}function Gs(r,e,t,l){let o,a,c,v,u,f,d,m,h;if(t==0)return 0;if(d=Math.min(r,e),d>=1)f=r*Math.log(t)-Hs(r,e),a=Math.exp(f)/r;else if(m=Math.max(r,e),m<8)if(m<=1){if(a=Math.pow(t,r),a==0)return a;h=r+e,h>1?(u=r+e-1,f=(et(u)+1)/h):f=et(h)+1,c=(et(r)+1)*(et(e)+1)/f,a*=c*(e/h)}else{if(u=Ut(d),o=Math.round(m-1),o>=1){c=1;for(let E=1;E<=o;++E)m+=-1,c*=m/(d+m);u+=Math.log(c)}f=r*Math.log(t)-u,m+=-1,h=d+m,h>1?(u=d+m-1,v=(et(u)+1)/h):v=et(h)+1,a=Math.exp(f)*(d/r)*(et(m)+1)/v}else u=Ut(d)+kr(d,m),f=r*Math.log(t)-u,a=d/r*Math.exp(f);if(a==0||r<=l*.1)return a;let g=l/r,p=0,y=0,b;for(c=1,p+=1,c*=(.5-e/p+.5)*t,b=c/(r+p),y+=b;p<1e7&&Math.abs(b)>g;)p+=1,c*=(.5-e/p+.5)*t,b=c/(r+p),y+=b;return r*y>-1?a*=r*y+1:a=0,a}function ts(r,e,t,l,o,a){let c,v,u,f,d,m=r+e,h=r+1;if(o>1&&r>=1&&m>=h*1.1?(u=Math.round(Math.abs(Xo(1))),v=Math.round(Xo(0)),u>v&&(u=v),f=Math.exp(-u)):(u=0,f=1),c=Yc(u,r,e,t,l)/r,o==1||c==0)return c;let g=o-1,p=f;if(v=0,e>1){if(l>1e-4){let y=(e-1)*t/l-r;y>=1&&(v=y<g?Math.round(y):g)}else v=g;for(let y=0;y<v;++y)d=y,f*=(m+d)/(h+d)*t,p+=f}for(let y=v;y<g&&(d=y,f*=(m+d)/(h+d)*t,p+=f,!(f<=a*p));++y);return c*=p,c}function Vc(r,e,t,l,o,a){let c,v,u,f,d,m,h,g,p,y,b,E,A,N,w,_,z,M,C;if(!Number.isFinite(o)||(C=Bc(r,e,t,l),Number.isNaN(C)))return Number.NaN;if(C==0)return 0;for(c=o+1,p=e/r,y=1/r+1,N=l+1,u=0,f=1,m=r+1,E=0,A=1,w=1,_=c/y,d=y/c,u+=1,h=u/r,g=u*(e-u)*t,v=r/m,M=f*(f+p)*v*v*(g*t),v=(h+1)/(y+h+h),z=u+g/m+v*(c+u*N),f=h+1,m+=2,h=M*E+z*w,E=w,w=h,h=M*A+z*_,A=_,_=h,b=d,d=w/_,E/=_,A/=_,w=d,_=1;u<1e4&&(u+=1,h=u/r,g=u*(e-u)*t,v=r/m,M=f*(f+p)*v*v*(g*t),v=(h+1)/(y+h+h),z=u+g/m+v*(c+u*N),f=h+1,m+=2,h=M*E+z*w,E=w,w=h,h=M*A+z*_,A=_,_=h,b=d,d=w/_,!(Math.abs(d-b)<=a*d));)E/=_,A/=_,w=d,_=1;return C*d}function Bc(r,e,t,l){const o=.398942280401433;let a,c,v,u,f,d,m,h,g;if(t==0||l==0)return 0;if(m=Math.min(r,e),m<8){let p,y;if(t<=.375?(p=Math.log(t),y=Er(-t)):l>.375?(p=Math.log(t),y=Math.log(l)):(p=Er(-l),y=Math.log(l)),d=r*p+e*y,m>=1)return d-=Hs(r,e),Math.exp(d);if(h=Math.max(r,e),h>=8)return u=Ut(m)+kr(m,h),m*Math.exp(d-u);if(h<=1){let E=Math.exp(d);return E==0?0:(g=r+e,g>1?(u=r+e-1,d=(et(u)+1)/g):d=et(g)+1,c=(et(r)+1)*(et(e)+1)/d,E*(m*c)/(m/h+1))}if(u=Ut(m),a=Math.round(h-1),a>=1){c=1;for(let E=1;E<=a;++E)h+=-1,c*=h/(m+h);u=Math.log(c)+u}d-=u,h+=-1,g=m+h;let b;return g>1?(u=m+h-1,b=(et(u)+1)/g):b=et(g)+1,m*Math.exp(d)*(et(h)+1)/b}else{let p,y,b,E;return r<=e?(p=r/e,y=p/(p+1),b=1/(p+1),E=r-(r+e)*t):(p=e/r,y=1/(p+1),b=p/(p+1),E=(r+e)*l-e),v=-E/r,u=Math.abs(v)>.6?v-Math.log(t/y):rn(v),v=E/e,f=Math.abs(v)<=.6?rn(v):v-Math.log(l/b),d=Math.exp(-(r*u+e*f)),o*Math.sqrt(e*y)*d*Math.exp(-es(r,e))}}function Yc(r,e,t,l,o){const a=.398942280401433;let c,v,u,f,d,m,h,g;if(m=Math.min(e,t),m<8){let p,y;if(l<=.375?(p=Math.log(l),y=Er(-l)):o>.375?(p=Math.log(l),y=Math.log(o)):(p=Er(-o),y=Math.log(o)),d=e*p+t*y,m>=1)return d-=Hs(e,t),yn(r,d);if(h=Math.max(e,t),h>=8)return u=Ut(m)+kr(m,h),m*yn(r,d-u);if(h<=1){let E=yn(r,d);return E==0?E:(g=e+t,g>1?(u=e+t-1,d=(et(u)+1)/g):d=et(g)+1,c=(et(e)+1)*(et(t)+1)/d,E*(m*c)/(m/h+1))}u=Ut(m);let b=Math.round(h-1);if(b>=1){c=1;for(let E=1;E<=b;++E)h+=-1,c*=h/(m+h);u+=Math.log(c)}return d-=u,h+=-1,g=m+h,v=g>1?(et(g-1)+1)/g:et(g)+1,m*yn(r,d)*(et(h)+1)/v}else{let p,y,b,E;e>t?(p=t/e,y=1/(p+1),b=p/(p+1),E=(e+t)*o-t):(p=e/t,y=p/(p+1),b=1/(p+1),E=e-(e+t)*l),-Go(t/e);let A=-E/e;return u=Math.abs(A)>.6?A-Math.log(l/y):rn(A),A=E/t,f=Math.abs(A)>.6?A-Math.log(o/b):rn(A),d=yn(r,-(e*u+t*f)),a*Math.sqrt(t*y)*d*Math.exp(-es(e,t))}}function Xs(r,e,t,l,o,a){let v=Array(30),u=Array(30),f=e-.5-.5,d=r+f*.5,m=l>.375?Math.log(t):Er(-l),h=-d*m;if(e*h==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+Go(et(e))+e*Math.log(h)+d*m,p=g-(kr(e,r)+e*Math.log(d)),y=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let b=y==0,E=o==0?0:Math.exp(Math.log(o)-p),A=Wc(e,h,g,a),N=.25/(d*d),w=m*.25*m,_=A,z=_,M=1,C=1,P=0;for(let D=1;D<=30;++D){let R=e+P;_=(R*(R+1)*_+(h+R+1)*M)*N,P+=2,M*=w,C/=P*(P+1);let Y=D-1;v[Y]=C;let B=0;if(D>1){let T=e-D;for(let S=1;S<=Y;++S)B+=T*v[S-1]*u[Y-S],T+=e}u[Y]=f*C+B/D;let W=u[Y]*_;if(z+=W,z<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(W)<=a*(z+E))break}return o+=b?Math.exp(p+Math.log(z)):y*z,o}function Wc(r,e,t,l){const o=1.772453850905516;if(r*e==0)return e<=r?Math.exp(-t):0;if(r==.5){if(e<.25)return(.5-jc(Math.sqrt(e))+.5)*Math.exp(-t);{let a=Math.sqrt(e);return Uo(1,a)/a*o}}else if(e<1.1){let a=3,c=e,v=e/(r+3),u=l*.1/(r+1),f;for(a+=1,c*=-(e/a),f=c/(r+a),v+=f;Math.abs(f)>u;)a+=1,c*=-(e/a),f=c/(r+a),v+=f;let d=r*e*((v/6-.5/(r+2))*e+1/(r+1)),m=r*Math.log(e),h=et(r),g=h+1;if(e>=.25&&r<e/2.59||m>-.13394){let p=qc(m),y=((p+.5+.5)*d-p)*g-h;return y<=0?0:y*Math.exp(-t)}else return(.5-Math.exp(m)*g*(.5-d+.5)+.5)*Math.exp(-t)}else{let a=1,c=1,v=e,u=e+(1-r),f=1,d,m;a=e*c+f*a,v=e*u+f*v,d=a/v,f+=1;let h=f-r;for(c=a+h*c,u=v+h*u,m=c/u;Math.abs(m-d)>=l*m;)a=e*c+f*a,v=e*u+f*v,d=a/v,f+=1,h=f-r,c=a+h*c,u=v+h*u,m=c/u;return m}}function Uc(r,e,t,l){const a=1.12837916709551,c=.353553390593274,v=Array(21),u=Array(21),f=Array(21),d=Array(21);let m=r*rn(-t/r)+e*rn(t/e),h;if(h=Math.exp(-m),h==0)return 0;let g=Math.sqrt(m),p=g/c*.5,y=m+m,b,E,A,N;r<e?(b=r/e,E=1/(b+1),A=(e-r)/e,N=1/Math.sqrt(r*(b+1))):(b=e/r,E=1/(b+1),A=(e-r)/r,N=1/Math.sqrt(e*(b+1))),v[0]=A*.6666666666666666,f[0]=v[0]*-.5,d[0]=-f[0];let w=.5/a*Uo(1,g),_=c,z=w+d[0]*N*_,M=1,C=b*b,P=1,D=N,R=p,Y=y;for(let W=2;W<=20;W+=2){P*=C,v[W-1]=E*2*(b*P+1)/(W+2);let T=W+1;M+=P,v[T-1]=A*2*M/(W+3);for(let j=W;j<=T;++j){let O=(j+1)*-.5;u[0]=O*v[0];for(let $=2;$<=j;++$){let ee=0;for(let te=1;te<=$-1;++te){let se=$-te;ee+=(te*O-se)*v[te-1]*u[se-1]}u[$-1]=O*v[$-1]+ee/$}f[j-1]=u[j-1]/(j+1);let X=0;for(let $=1;$<=j-1;++$)X+=d[j-$-1]*f[$-1];d[j-1]=-(X+f[j-1])}w=c*R+(W-1)*w,_=c*Y+W*_,R=y*R,Y=y*Y,D*=N;let S=d[W-1]*D*w;D*=N;let V=d[T-1]*D*_;if(z+=S+V,Math.abs(S)+Math.abs(V)<=l*z)break}let B=Math.exp(-es(r,e));return a*h*B*z}function Hc(r,e,t,l){let a=0,c=0;function v(b,E,A,N){const w=Gs(b,E,A,1e-15);return N?.5-w+.5:w}function u(b,E,A,N){const w=Gs(E,b,A,1e-15);return N?w:.5-w+.5}function f(b,E,A,N,w,_){const z=Vc(b,E,A,N,w,15000000000000002e-30);return _?.5-z+.5:z}function d(b,E,A,N,w){let _=Math.round(E);E=E-_,E===0&&(_=_-1,E=1);let z=ts(E,b,N,A,_,1e-15);return A<=.7?(z=z+Gs(b,E,A,1e-15),w?.5-z+.5:z):(b<=15&&(_=20,z=z+ts(b,E,A,N,_,1e-15),b=b+_),z=Xs(b,E,A,N,z,15*1e-15),w?.5-z+.5:z)}if(r<1e-15*.001&&e<1e-15*.001)return e/(r+e);let m,h,g,p,y;if(r<=1||e<=1){if(t>.5?(y=!0,m=e,g=l,h=r,p=t):(y=!1,m=r,g=t,h=e,p=l),h<Math.min(1e-15,1e-15*m))return a=Fc(m,h,g,1e-15),y?.5-a+.5:a;if(m<Math.min(1e-15,1e-15*h)&&h*g<=1)return c=Oc(m,h,g,1e-15),y?c:.5-c+.5;if(Math.max(m,h)>1){if(h<=1)return v(m,h,g,y);if(g>=.29)return u(m,h,p,y);if(g<.1&&Math.pow(g*h,m)<=.7)return v(m,h,g,y)}else{if(m>=Math.min(.2,h)||Math.pow(g,m)<=.9)return v(m,h,g,y);if(g>=.3)return u(m,h,p,y)}let b=!1;return Math.max(m,h)>1&&h>15?c=0:(b=!0,c=ts(h,m,p,g,20,1e-15),h+=20),c=Xs(h,m,p,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(b?c=ts(h-n,m,p,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Xs(h,m,p,g,c,15*1e-15),a=-expm1(c),y?.5-a+.5:a):(a=.5-c+.5,y?.5-a+.5:a)}else{let b=Number.isFinite(r+e)?r>e?(r+e)*l-e:r-(r+e)*t:r*l-e*t;const E=b<0;let A,N,w,_;if(E?(b=-b,A=e,w=l,N=r,_=t):(A=r,w=t,N=e,_=l),N<40)return N*w<=.7?v(A,N,w,E):d(A,N,w,_,E);if(A>N){if(N<=100||b>N*.03)return f(A,N,w,_,b,E)}else{if(A<=100)return f(A,N,w,_,b,E);if(b>A*.03)return f(A,N,w,_,b,E)}return a=Uc(A,N,b,1e-15*100),E?.5-a+.5:a}}function Ko(r){const e=r.nrows,t=r.ncols;if(e<t){const c=Ko(r.subset([],Pt.seq(1,e)));return{Q:c.Q,R:Qo(c.Q,r)}}let l=Dt.eye(e),o=r.t();for(let c=1;c<=t;c++)for(let v=e;v>=c+1;v--){const u=o.v.subarray((v-2)*t,v*t),f=l.v.subarray((v-2)*e,v*e),d=u.slice(),m=f.slice(),[h,g,p]=Gc(d[c-1],d[c-1+t]);for(let y=0;y<t;y++)u[y]=d[y]*h+d[y+t]*g,u[y+t]=d[y]*-g+d[y+t]*h,f[y]=m[y]*h+m[y+e]*g,f[y+e]=m[y]*-g+m[y+e]*h;for(let y=t;y<e;y++)f[y]=m[y]*h+m[y+e]*g,f[y+e]=m[y]*-g+m[y+e]*h}const a=Pt.seq(1,t);return{Q:e===t?l:l.subset([],a),R:e===t?o.t():o.subset([],a).t()}}function Gc(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const a=e/r,c=Math.sqrt(1+a*a),v=1/c;return[v,a*v,r*c]}const t=r/e,l=Math.sqrt(1+t*t),o=1/l;return[t*o,o,e*l]}function Jo(r){return typeof r=="number"}function Qo(r,e){if(e===void 0&&(e=r),!hr(r)||!hr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=r.nrows,l=r.ncols,o=e.nrows,a=e.ncols,c=l,v=a,u=t,f=new Float64Array(c*v);for(let d=0;d<v;d++){const m=e.v.subarray(d*o,(d+1)*o),h=f.subarray(d*c,(d+1)*c);for(let g=0;g<c;g++){const p=r.v.subarray(g*t,(g+1)*t);let y=0;for(let b=0;b<u;b++)y+=p[b]*m[b];h[g]=y}}return new Dt(f,c,v)}function Zo(r,e,t){if(t===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new ge(r.v)}if(r.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new Dt(r.v,e,t)}function hr(r){return r&&r.constructor===Dt}function Xc(r,e,t){return new Dt(new Float64Array(r),e,t)}const Ce=class Ce{constructor(e,t,l){if(!ArrayBuffer.isView(e)||e.constructor!==Ce.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||l===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*l)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=l}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Ce.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const l=Ce.eye(e),o=Ce.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],v=e-1;for(let u=0;u<e;u++)o.v[v*e+u]=l.v[v*e+u]/c;for(let u=e-2;u>=0;u--){let f=l.getcolumn(u+1);const d=a.getcolref(u+1);for(let m=u+1;m<e;m++){const h=o.getcolumn(m+1);f=f.subtract(h.mult(d[m]))}o.v.set(f.divide(d[u]).v,u*e)}return o.t()}if(this.islowertriangular()){const l=this.diag();if(Do(l)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=Ce.eye(e),a=Ce.eye(e),c=this.t(),v=0,u=c.v[0];for(let f=0;f<e;f++)a.v[v*e+f]=o.v[v*e+f]/u;for(let f=1;f<e;f++){let d=o.getcolumn(f+1);const m=c.getcolref(f+1);for(let h=0;h<f;h++){const g=a.getcolumn(h+1);d=d.subtract(g.mult(m[h]))}a.v.set(d.divide(m[f]).v,f*e)}return a.t()}const t=Ko(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Ce.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Ce.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let l=0;l<e;l++)t[l]=this.getcolref(l+1)[l];return new ge(t)}t(){const e=this.nrows,t=this.ncols,l=new Ce.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const a=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let c=0;c<this.nrows;c++)l[c*t+o]=a[c]}return new Ce(l,t,e)}for(let o=0;o<this.nrows;o++){const a=l.subarray(o*t,(o+1)*t);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+o]}return new Ce(l,t,e)}dot(e){if(Se(e))return new Ce(Qs(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(hr(e))return new Ce(Qs(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,l){if(hr(e))return new Ce(Ks(this.v,e.v,t),this.nrows,this.ncols);if(Jo(e))return new Ce(Js(this.v,e,t),this.nrows,this.ncols);if(!Se(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(l===void 0&&(l=e.length===this.ncols?2:1),l===2&&e.length===this.ncols){const o=new Ce.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(Js(this.getcolref(a+1),e.v[a],t),a*this.nrows);return new Ce(o,this.nrows,this.ncols)}if(l===1&&e.length===this.nrows){const o=new Ce.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(Ks(this.getcolref(a+1),e.v,t),a*this.nrows);return new Ce(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e,t){if(t===void 0&&(t=2),t==2){const l=this.ncols,o=new Ce.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=e(this.getcolref(a+1));return new ge(o)}if(t==1)return this.t().apply(e,2);if(t==0){const l=this.v.length,o=new Ce.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=e(this.v[a]);return new Ce(o,this.nrows,this.ncols)}}replace(e,t,l){typeof t=="number"&&(t=[t]),t.length===0&&(t=Pt.seq(1,this.nrows)),Zt(t)||(t=$t(t)),typeof l=="number"&&(l=[l]),l.length===0&&(l=Pt.seq(1,this.ncols)),Zt(l)||(l=$t(l));const o=t.length,a=l.length;if(tn(t)<1||qt(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(tn(l)<1||qt(l)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<l.length;c++){const v=e.getcolref(c+1),u=(l.v[c]-1)*this.nrows;for(let f=0;f<t.length;f++){const d=t.v[f];this.v[u+d-1]=v[f]}}return this}copy(){return new Ce(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new ge.valuesConstructor(this.ncols);for(let l=0;l<this.ncols;l++)t[l]=this.getcolref(l+1)[e-1];return new ge(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new ge(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=$t([e])),typeof t=="number"&&(t=$t([t])),Array.isArray(e)&&(e=e.length===0?null:$t(e)),Array.isArray(t)&&(t=t.length===0?null:$t(t)),e!==null&&!Zt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!Zt(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(tn(e)<1||qt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(tn(t)<1||qt(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const v=t.length,u=this.nrows,f=new Ce.valuesConstructor(u*v);for(let d=0;d<t.length;d++)f.set(this.v.slice((t.v[d]-1)*this.nrows,t.v[d]*this.nrows),d*this.nrows);return new Ce(f,u,v)}if(t==null)return this.t().subset(t,e).t();const l=e.length,o=t.length,a=new Ce.valuesConstructor(l*o);let c=new Ce.valuesConstructor(l);for(let v=0;v<o;v++){const u=this.v.subarray((t.v[v]-1)*this.nrows,t.v[v]*this.nrows);for(let f=0;f<l;f++)c[f]=u[e.v[f]-1];a.set(c,v*l)}return new Ce(a,l,o)}toString(e){function t(c,v){return" ".repeat(v-c.length)+c}e===void 0&&(e=2),this.ncols;const l=Math.round(Math.abs(Math.log10(qt(this.v))))+e+3;let o="";const a=this.t();for(let c=1;c<=a.ncols;c++)o+=Array.from(a.getcolref(c)).map(v=>t(v.toFixed(e),l)).join(" ")+`
`;return o}toCSV(e,t,l,o){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const a=o!=null&&o.length>0,c=l!=null&&l.length>0;if(a&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&l.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const v=this.t();let u=c?l.join(e)+`
`:"";for(let f=1;f<=v.ncols;f++)u=u+(a?o[f-1]+e:"")+v.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,t),u}static randn(e,t,l,o){return Zo(Yo(e*t,l,o),e,t)}static rand(e,t,l,o){return Zo(Bo(e*t,l,o),e,t)}static eye(e,t){t===void 0&&(t=e);const l=new Float64Array(e*t);for(let o=0;o<Math.min(e,t);o++)l[o*e+o]=1;return new Ce(l,e,t)}static diagm(e){if(!Se(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,l=new Float64Array(t*t);for(let o=0;o<t;o++)l[o*t+o]=e.v[o];return new Ce(l,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Ce(new Float64Array(e*t),e,t)}static ones(e,t){return Ce.fill(1,e,t)}static fill(e,t,l){l===void 0&&(l=t);const o=new Float64Array(t*l);for(let a=0;a<o.length;a++)o[a]=e;return new Ce(o,t,l)}static outer(e,t,l){if(Array.isArray(e)&&(e=Je(e)),Array.isArray(t)&&(t=Je(t)),!Se(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Se(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=Ce.zeros(e.length,t.length);for(let a=0;a<t.length;a++){const c=t.v[a],v=o.getcolref(a+1);for(let u=0;u<e.length;u++)v[u]=l(e.v[u],c)}return o}static parseCSV(e,t,l,o){function a(b){return b.some(E=>Number.isNaN(Number.parseFloat(E.trim())))}t===void 0&&(t=",");const c=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let v=e.split(/\n/),u=[],f=0;const d=v[0].split(t);(l||l===void 0&&a(d))&&(u=d,f=1),v=v.filter(b=>b.trim().length>1);let m=[],h=0;o&&(h=1);const g=v.length-f,p=d.length-h;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const y=Ce.zeros(p,g);for(let b=f;b<g+f;b++){const E=v[b].split(t);let A;if(o?(m[b-f]=E[0],A=E.slice(1).map(N=>Number.parseFloat(N.trim().replace(c,".")))):A=E.map(N=>Number.parseFloat(N.trim().replace(c,"."))),A.some(N=>Number.isNaN(N)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=p)throw Error("Wrong number of values in row #"+b);y.v.set(new Float64Array(A),(b-f)*p)}return{values:y.t(),header:u,labels:m,sep:t,dec:c}}};Vr(Ce,"valuesConstructor",Float64Array),Vr(Ce,"TOLERANCE",Math.pow(10,-9));let Dt=Ce;function Se(r){return r&&r.constructor===ge}function Je(r){return new ge(new Float64Array(r))}const st=class st{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new Pt.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=o+1,l=l+1);return new Pt(t.subarray(0,l))}filter(e){const t=new st.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=this.v[o],l=l+1);return new st(t.subarray(0,l))}shuffle(){return new st(ra(this.v))}sort(e){return new st(na(this.v,e))}sortind(e){return new Pt(sa(this.v,e))}rep(e){return ea(this,e)}repeach(e){return ta(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=Pt.seq(1,this.length)),Zt(t)||(t=$t(t));const l=t.length;if(tn(t)<1||qt(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==l)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<t.length;o++){const a=t.v[o];this.v[a-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=$t([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Pt.bool2ind(e):$t(e)),!Zt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=st.zeros(t);for(let o=0;o<t;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");l.v[o]=this.v[e.v[o]-1]}return l}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new st(this.v.slice(e-1,t))}copy(){return new st(this.v.slice())}dot(e){return e===void 0&&(e=this),Qs(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(Se(e))return new st(Ks(this.v,e.v,t));if(Jo(e))return new st(Js(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e){const t=this.v.length,l=st.zeros(t);for(let o=0;o<t;o++)l.v[o]=e(this.v[o]);return l}static c(...e){if(e.length===1)return e[0];const t=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),l=new st.valuesConstructor(t);let o=0;for(const a of e)typeof a=="number"?(l[o]=a,o+=1):(l.set(Se(a)?a.v:new st.valuesConstructor(a),o),o+=typeof a=="number"?1:a.length);return new st(l)}static seq(e,t,l){return $o(e,t,l,st)}static randn(e,t,l){return Yo(e,t,l)}static rand(e,t,l){return Bo(e,t,l)}static zeros(e){return new st(new st.valuesConstructor(e))}static ones(e){return st.fill(1,e)}static fill(e,t){const l=new st.valuesConstructor(t);for(let o=0;o<l.length;o++)l[o]=e;return new st(l)}};Vr(st,"valuesConstructor",Float64Array);let ge=st;function Zt(r){return r.constructor===Pt}function $t(r){return new Pt(new Int32Array(r))}const ht=class ht{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new ht.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=o+1,l=l+1);return new ht(t.subarray(0,l))}filter(e){const t=new ht.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=this.v[o],l=l+1);return new ht(t.subarray(0,l))}shuffle(){return new ht(ra(this.v))}sort(e){return new ht(na(this.v,e))}sortind(e){return new ht(sa(this.v,e))}rep(e){return ea(this,e)}repeach(e){return ta(this,e)}subset(e){if(typeof e=="number"&&(e=$t([e])),Array.isArray(e)&&(e=$t(e)),!Zt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=new ht.valuesConstructor(t);for(let o=0;o<t;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");l[o]=this.v[e.v[o]-1]}return new ht(l)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new ht(this.v.slice(e-1,t))}static seq(e,t,l){return $o(e,t,l,ht)}static ones(e){return ht.fill(1,e)}static fill(e,t){const l=new ht.valuesConstructor(t);for(let o=0;o<l.length;o++)l[o]=e;return new ht(l)}static bool2ind(e){let t=0;const l=new ht.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(l[t]=o+1,t=t+1);return new ht(l.subarray(0,t))}};Vr(ht,"valuesConstructor",Int32Array);let Pt=ht;function $o(r,e,t,l){t===void 0&&(t=r<=e?1:-1);const o=Math.floor((e-r)/t)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const a=new l.valuesConstructor(o);for(let c=0;c<o;c++)a[c]=r+c*t;return new l(a)}function ea(r,e){const t=r.length*e,l=new r.constructor.valuesConstructor(t);for(let o=1;o<=e;o++)for(let a=0;a<r.length;a++)l[(o-1)*r.length+a]=r.v[a];return new r.constructor(l)}function ta(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=r.length*e,l=new r.constructor.valuesConstructor(t);for(let o=0;o<r.length;o++)for(let a=0;a<e;a++)l[o*e+a]=r.v[o];return new r.constructor(l)}function Ks(r,e,t){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const l=new r.constructor(r.length);for(let o=0;o<r.length;o++)l[o]=t(r[o],e[o]);return l}function Js(r,e,t){const l=new r.constructor(r.length);for(let o=0;o<r.length;o++)l[o]=t(r[o],e);return l}function Qs(r,e,t,l,o,a){if(l!==o)throw Error("_dot: matrix dimensions do not much.");const c=t,v=a,u=l,f=new r.constructor(c*v);for(let d=0;d<v;d++){const m=e.subarray(d*o,(d+1)*o),h=f.subarray(d*c,(d+1)*c);for(let g=0;g<u;g++){const p=m[g],y=r.subarray(g*t,(g+1)*t);for(let b=0;b<c;b++)h[b]+=y[b]*p}}return f}function ra(r){let e=r.slice(),t=e.length,l,o;for(;t;)o=Math.floor(Math.random()*t--),l=e[t],e[t]=e[o],e[o]=l;return e}function na(r,e=!1){return e?r.slice().sort((t,l)=>l-t):r.slice().sort((t,l)=>t-l)}function sa(r,e=!1){const t=Pt.seq(1,r.length).v;return e?t.sort((l,o)=>r[o-1]-r[l-1]):t.sort((l,o)=>r[l-1]-r[o-1])}function Kc(r,e,t){return 5*r*e+e+4*t*e}function Jc(r,e){return 2+2*r+r*e+17*e}function Ke(r,e,t){if(!r||!r.class||!r.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=r.ncols,o=r.ncomp;let a,c;switch(e){case"mX":a=2,c=l;break;case"sX":a=2+l,c=l;break;case"loadings":case"xloadings":a=2+2*l+(t-1)*l,c=l;break;case"P":a=2+2*l,c=t*l;break;case"eigenvals":case"xeigenvals":a=2+2*l+l*o,c=o;break;case"cq0":a=2+2*l+l*o+o,c=o;break;case"cNq":a=2+2*l+l*o+2*o,c=o;break;case"rq0":a=2+2*l+l*o+3*o,c=o;break;case"rNq":a=2+2*l+l*o+4*o,c=o;break;case"ch0":a=2+2*l+l*o+5*o,c=o;break;case"cNh":a=2+2*l+l*o+6*o,c=o;break;case"rh0":a=2+2*l+l*o+7*o,c=o;break;case"rNh":a=2+2*l+l*o+8*o,c=o;break;case"cr0":a=2+2*l+l*o+9*o,c=o;break;case"cNr":a=2+2*l+l*o+10*o,c=o;break;case"rr0":a=2+2*l+l*o+11*o,c=o;break;case"rNr":a=2+2*l+l*o+12*o,c=o;break;case"cg0":a=2+2*l+l*o+13*o,c=o;break;case"cNg":a=2+2*l+l*o+14*o,c=o;break;case"rg0":a=2+2*l+l*o+15*o,c=o;break;case"rNg":a=2+2*l+l*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(a,a+c)}function ir(r,e,t){if(!r||!r.class||!r.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const l=r.ncols,o=r.nrows,a=r.ncomp;let c,v;switch(e){case"scores":case"xscores":c=(t-1)*o,v=o;break;case"hdist":c=o*a+(t-1)*o,v=o;break;case"qdist":c=2*o*a+(t-1)*o,v=o;break;case"xcumexpvar":case"cumexpvar":c=3*o*a,v=a;break;case"fdistc":c=3*o*a+a+(t-1)*o,v=o;break;case"fdistr":c=4*o*a+a+(t-1)*o,v=o;break;case"gdist":c=5*o*a+a+(t-1)*l,v=l;break;case"rdist":c=5*o*a+a+l*a+(t-1)*l,v=l;break;case"idistc":c=5*o*a+a+2*l*a+(t-1)*l,v=l;break;case"idistr":c=5*o*a+a+3*l*a+(t-1)*l,v=l;break;default:throw new Error("pcares_get: wrong outcome name.")}return r.v.subarray(c,c+v)}function rs(r,e,t){if(!Array.isArray(r))return!1;if(r.length===0)return!0;for(let l=0;l<r.length;l++){const o=r[l];if(o<e||o>t)return!1}return!0}function Qc(r,e,t,l,o,a,c){if(!hr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const v=a&&Array.isArray(a)?a.length:0;if(!rs(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!rs(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const f=e.nrows-v,d=e.ncols-u;if(f<3||d<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),t===void 0&&(t=Math.min(f-1,d)),t<1||t>Math.min(f-1,d))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const m=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);let h=null;if(v>0){const N=new Int32Array(a);h=r._malloc(N.length*N.BYTES_PER_ELEMENT),r.HEAP32.set(N,h/N.BYTES_PER_ELEMENT)}let g=null;if(u>0){const N=new Int32Array(c);g=r._malloc(N.length*N.BYTES_PER_ELEMENT),r.HEAP32.set(N,g/N.BYTES_PER_ELEMENT)}const p=Jc(d,t),y=Float64Array,b=r._malloc(p*y.BYTES_PER_ELEMENT);if(r.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[m,e.nrows,e.ncols,t,l,o,b,h,v,g,u])!==1)throw new Error("pca_fit: PCA failed.");const A=r.HEAPF64.slice(b/y.BYTES_PER_ELEMENT,b/y.BYTES_PER_ELEMENT+p);return r._free(m),r._free(b),h&&r._free(h),g&&r._free(g),{class:["pcamodel"],v:A,ncomp:t,nrows:f,ncols:d,exclvars:c,center:l,scale:o}}function Zc(r,e,t,l){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!hr(t))throw new Error("pca_predict: X must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!rs(l,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=t.nrows-o;t.ncols===e.ncols&&(a=0);const v=t.ncols-a;if(c<1)throw new Error("pca_predict: X must have at least 1 row.");if(v!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const u=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,u/t.v.BYTES_PER_ELEMENT);let f=null;if(o>0){const C=new Int32Array(l);f=r._malloc(C.length*C.BYTES_PER_ELEMENT),r.HEAP32.set(C,f/C.BYTES_PER_ELEMENT)}let d=null;if(a>0){const C=new Int32Array(e.exclvars);d=r._malloc(C.length*C.BYTES_PER_ELEMENT),r.HEAP32.set(C,d/C.BYTES_PER_ELEMENT)}const m=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const h=Kc(c,e.ncomp,v),g=Float64Array,p=r._malloc(h*g.BYTES_PER_ELEMENT);if(r.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[u,t.nrows,t.ncols,m,p,f,o,d,a])!==1)throw new Error("pca_predict: PCA prediction failed.");const b=r.HEAPF64.slice(p/g.BYTES_PER_ELEMENT,p/g.BYTES_PER_ELEMENT+h);r._free(u),r._free(m),r._free(p),f&&r._free(f),d&&r._free(d);const E={class:["pcares"],v:b,ncomp:e.ncomp,nrows:c,ncols:v,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},A=new Array(e.ncomp),N=new Array(e.ncomp),w=new Array(e.ncomp),_=new Array(e.ncomp),z=new Array(e.ncomp),M=ir(E,"xcumexpvar");z[0]=1,_[0]=M[0],w[0]=1-M[0],A[0]=M[0],N[0]=1-M[0];for(let C=1;C<e.ncomp;C++)z[C]=C+1,_[C]=M[C],w[C]=1-M[C],A[C]=M[C]-M[C-1],N[C]=1-A[C];return E.stat={components:z,resvar:N,expvar:A,cumexpvar:_,cumresvar:w},E}function $c(r,e,t,l,o,a,c,v){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!hr(t))throw new Error("pcapcv: X must be a matrix.");v||(v=[]);const u=v&&Array.isArray(v)?v.length:0;if(!rs(v,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const f=e.exclvars.length,d=t.nrows-u,m=t.ncols-f;if(d<3)throw new Error("pcapcv: X must have at least 3 rows.");if(m!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>d)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(l)||l<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const h=Math.min(a===0?d-2:d-Math.ceil(d/o)-1,m,e.ncomp);if(l>h)throw new Error('pcapcv: the value of "ncomp" is too large.');const g=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,g/t.v.BYTES_PER_ELEMENT);let p=null;if(u>0){const z=new Int32Array(v);p=r._malloc(z.length*z.BYTES_PER_ELEMENT),r.HEAP32.set(z,p/z.BYTES_PER_ELEMENT)}let y=null;if(f>0){const z=new Int32Array(e.exclvars);y=r._malloc(z.length*z.BYTES_PER_ELEMENT),r.HEAP32.set(z,y/z.BYTES_PER_ELEMENT)}const b=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,b/e.v.BYTES_PER_ELEMENT);const E=d*m,A=t.v.constructor,N=r._malloc(E*A.BYTES_PER_ELEMENT);if(r.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,t.nrows,t.ncols,l,e.center,e.scale,a,o,c,b,N,p,u,y,f])!==1)throw new Error("pcapcv: PCVPCA failed.");const _=r.HEAPF64.slice(N/A.BYTES_PER_ELEMENT,N/A.BYTES_PER_ELEMENT+E);return r._free(g),r._free(b),r._free(N),p&&r._free(p),y&&r._free(y),new Dt(_,d,m)}function eu(r,e){let t,l,o;if(e.length>0){const a=r.values.nrows,c=r.objindices,v=a-e.length;t=Array(v),l=Array(v),o=Array(v);let u=0;for(let f=0;f<a;f++)e.includes(f)||(t[u]=c[f],l[u]=r.classes[f],o[u]=r.objlabels[f],u=u+1)}else t=r.objindices,o=r.objlabels,l=r.classes;return[t,o,l]}function Zs(){const r=new Date;return`${r.getFullYear()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}${r.getHours().toString().padStart(2,"0")}${r.getMinutes().toString().padStart(2,"0")}${r.getSeconds().toString().padStart(2,"0")}${r.getMilliseconds().toString().padStart(3,"0")}`}function $s(r,e,t,l){const[o,a,c]=eu(t,l),v=Zc(r,e,t.values,l);v.hash=Zs(),v.objindices=o,v.objlabels=a,v.classes=c,v.classNames=t.classNames,v.varlabels=t.varlabels,v.eigenvals=Ke(e,"eigenvals"),v.cNh=Ke(e,"cNh"),v.cNq=Ke(e,"cNq"),v.ch0=Ke(e,"ch0"),v.cq0=Ke(e,"cq0"),v.rNh=Ke(e,"rNh"),v.rNq=Ke(e,"rNq"),v.rh0=Ke(e,"rh0"),v.rq0=Ke(e,"rq0");const u=e.nrows;return v.T2lim=2*(u-1)/(u-2)*Wo(.95,2,u-2),v}function tu(r,e="."){return Array.isArray(r)&&r.length>0?e==="."?r.map(t=>Number.parseFloat(t.trim())):r.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(r.trim()):Number.parseFloat(r.trim().replace(e,"."))}function _n(r){return r.some(e=>Number.isNaN(e))}function Lr(r){return r.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function la(r){let e=r.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function ru(r,e,t,l,o,a,c,v=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let f=la(r);if(f.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");f=f.filter(T=>T.replaceAll(e,"").trim().length>0);const d=f[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let m=0,h;const g=t!=="no";(g||g===void 0&&_n(firstRow))&&(h=d,m=1);const p=f.length-m;if(p<1)throw new Error("Data file should contain at least 1 row with values.");let y,b,E,A=Array(p);l?(y=g?Lr(h[0]):"",E=Array(p),b=1):(y="",E=[],b=0);let N,w=[],_;o?(N=g?Lr(h[b]):"",_=Array(p),b=b+1):(N="",_=[]);const z=d.length-b;if(z<1)throw new Error("Data file should contain at least 1 column with values.");const M=Dt.zeros(z,p);for(let T=m;T<p+m;T++){const S=T-m;A[S]=S;let V=f[T].split(e);if(l&&(E[S]=V[0],V.shift()),o){const O=V[0];_[S]=O,V.shift(),(w.length===0||w.indexOf(O)<0)&&w.push(O)}const j=u==="."?V.map((O,X)=>Number.parseFloat(O.trim())):V.map((O,X)=>Number.parseFloat(O.trim().replace(u,".")));if(j.some(O=>Number.isNaN(O)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(j.length!=z)throw new Error("Wrong number of values in row #"+T);M.v.set(new Float64Array(j),(T-m)*z)}if(!l||E.length!==p){E=Array(p);for(let T=0;T<p;T++)E[T]="O"+(T+1)}E=E.map(T=>Lr(T)),_=_.map(T=>Lr(T)),w=w.map(T=>Lr(T));let C,P=Array(z),D=Array(z);if(h&&h.length===z+b){C=h.map(T=>Lr(T)).slice(b);for(let T=0;T<z;T++)P[T]=T>=v?T-v:T,D[T]=T>=v?T-v+1:T+1}else{C=Array(z);for(let T=0;T<z;T++)P[T]=T>=v?T-v:T,C[T]=T>=v?"V"+(T-v+1):"Y"+(T+1),D[T]=T>=v?T-v+1:T+1}let R;if(t==="values"){if(R=u==="."?C.map((T,S)=>S<v?S:Number.parseFloat(T.trim())):C.map((T,S)=>S<v?S:Number.parseFloat(T.trim().replace(u,"."))),R.some(T=>Number.isNaN(T)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else R=D;Array.isArray(R)||(R=[]),a||(a=""),c||(c=""),a=R.length>0&&a.length>0?a:"Variables",c=R.length>0&&c.length>0?c:"";const Y=a+(c.length>0?", "+c:""),B=R[1]<R[0];return{values:M.t(),nresp:v,header:t,hasLabels:l,hasClassNames:o,labelsVarname:y,classLabelsVarname:N,objlabels:E,objindices:A,varlabels:C,varvalues:R,varindices:P,varrev:B,classes:_,classNames:w,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:Y}}function nu(r){if(_n(r[0].slice(2)))return!0;const e=r[0].length,t=[];for(let l=2;l<e;l++){let o=[];for(let f=1;f<r.length;f++)o.push(r[f][l]);const a=r[0][l],c=pn(o),v=Os(o),u=Math.abs((a-c)/v);t.push(u)}return t.every(l=>l>5)}function su(r){const e=",",t=r[0].split(e),l=r[1].split(e),o=t.length,a=l.length,c=";",v=r[0].split(c),u=r[1].split(c),f=v.length,d=u.length;let m,h;if(o>1&&a>1&&o===a&&o>f)h=e,m=o;else if(f>1&&d>1&&f===d)h=c,m=f;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",m]}function lu(r,e=0){const t=la(r),l=t.length;if(l<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,a,c]=su(t),v=Math.min(c,5),u=Math.min(l,5);let f=t[0].split(o).length,d=t.slice(0,u).map(P=>P.split(o).slice(0,v));d=d.map(P=>P.map(D=>Lr(D)));const m=d.map(P=>tu(P.slice(),a));for(let P=1;P<u;P++)if(_n(m[P].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const h=nu(m);let g=0;const p=h?1:0,y=p+1,b=d[p][0],E=d[y][0],A=m[p][0],N=m[y][0],w=m[p][1],_=m[y][1];let z=!1,M=!1;if(Number.isNaN(A)&&Number.isNaN(N)&&b!==E?(z=!0,g=g+1):Number.isNaN(w)&&Number.isNaN(_)&&b!==E&&(z=!0,M=!0,g=g+2),!M){const P=z?1:0,D=m[p][P],R=m[y][P];M=_n([D,R]),g=g+M}let C="no";if(h){g>0?d[0].slice(g+e):d[e];const P=g>0?m[0].slice(g+e):m[e];C=_n(P)?"labels":"values"}return[o,z,M,C,f]}function ou(r){const e=r.values.t(),t=r.sep,l=r.dec;let o=null;r.header!=="no"&&(o=r.header==="values"?r.nresp&&r.nresp>0?r.varlabels.slice(0,r.nresp).concat(r.varvalues.slice(r.nresp)):r.varvalues.slice():r.varlabels.slice()),o&&r.hasClassNames&&(o=[r.classLabelsVarname,...o]),o&&r.hasLabels&&(o=[r.labelsVarname,...o]);const a=r.classes&&r.classes.length===e.ncols,c=r.objlabels&&r.objlabels.length===e.ncols;let v=o?o.join(t):"";for(let u=0;u<e.ncols;u++){let f=e.getcolref(u+1).join(t);l!=="."&&(f=f.replace(".",l)),a&&(f=r.classes[u]+r.sep+f),c&&(f=r.objlabels[u]+r.sep+f),v=v+`
`+f}return v=v+`
`,l!=="."&&(v=v.replace(/\./g,l)),v}function au(r,e){const t=ou(r),l=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.csv`),a.click()}function iu(r,e){const t=r.nresp?r.nresp:0,l=r.values,o=r.varvalues,a=r.varlabels,c=r.varindices,v=l.nrows,u=l.ncols,f=u-e.length,d=Dt.zeros(v,f),m=Array(f),h=Array(f),g=Array(f);let p=0;for(let y=0;y<t;y++){const b=v*y,E=v*p;d.v.set(l.v.slice(b,b+v),E),m[p]=o[y],h[p]=a[y],g[p]=c[y],p=p+1}for(let y=t;y<u;y++){if(e.includes(y-t))continue;const b=v*y,E=v*p;d.v.set(l.v.slice(b,b+v),E),m[p]=o[y],h[p]=a[y],g[p]=c[y],p=p+1}return{values:d,header:r.header,hasLabels:r.hasLabels,hasClassNames:r.hasClassNames,classNames:r.classNames,labelsVarname:r.labelsVarname,classLabelsVarname:r.classLabelsVarname,objlabels:r.objlabels,objindices:r.objindices,varlabels:h,varvalues:m,varindices:g,varrev:r.varrev,classes:r.classes,responses:r.responses,classNames:r.classNames,sep:r.sep,dec:r.dec,varvaluesName:r.varvaluesName,varvaluesUnits:r.varvaluesUnits,varAxisTitle:r.varAxisTitle,fileName:r.fileName,nresp:t}}function cu(r){if(!r.length)return"";r.sort((o,a)=>o-a);let e=[],t=r[0],l=t;for(let o=1;o<r.length;o++)r[o]===l+1?l=r[o]:(t===l?e.push(`${t}`):e.push(`${t}-${l}`),t=r[o],l=t);return t===l?e.push(`${t}`):e.push(`${t}-${l}`),e.join(" ")}function wn(r,e){return hr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Se(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function oa(r,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Xc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Je(e.v);const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function el(r){const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),o=String(r.getHours()).padStart(2,"0"),a=String(r.getMinutes()).padStart(2,"0"),c=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${l}${o}${a}${c}`}function ns(r,e){return Object.keys(r).reduce((t,l)=>(t[l]=e(r,l),t),{})}var uu=J('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function dt(r,e){let t=G(e,"text",3,"button");var l=uu();l.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var o=q(l);re(()=>le(o,t())),I(r,l)}rt(["click"]);var fu=J('<button tabindex="0"></button>');function tl(r,e){var t=fu();t.__click=function(...l){var o;(o=e.onclick)==null||o.apply(this,l)},re(()=>{F(t,"title",e.title),F(t,"aria-label",e.title),F(t,"alt",e.title),vt(t,1,`button ${e.className??""}`,"svelte-bx9fh5")}),I(r,t)}rt(["click"]);function nn(r,e){let t=G(e,"title",3,"Reset");tl(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function vu(r,e){let t=G(e,"title",3,"Undo");tl(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function du(r,e){let t=G(e,"title",3,"Download");tl(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-download"})}function mt(r){const e={};for(const t of Object.keys(r))e[t]=r[t].default;return e}var mu=J('<span class="label svelte-vzu0vi"> </span>'),hu=J("<div><!> <!></div>");function ye(r,e){let t=G(e,"label",3,null),l=G(e,"name",3,""),o=G(e,"status",3,""),a=G(e,"colors",3,""),c=G(e,"labelWidth",3,12);var v=hu(),u=q(v);{var f=m=>{var h=mu(),g=q(h);re(()=>{lt(h,`flex-basis:${c()??""}ch;`),le(g,t())}),I(m,h)};U(u,m=>{t()&&m(f)})}var d=L(u,2);xr(d,()=>e.children??pt),re(()=>{vt(v,1,`control-element ${l()??""} ${o()??""}`,"svelte-vzu0vi"),lt(v,a())}),I(r,v)}const aa=(r,e,t,l)=>{const o=e(r);o<0||o>1||H(t,o*100>s(l)-5&&o*100<s(l)+5,!0)},ia=(r,e,t,l,o,a)=>{H(e,!1);const c=t(r);c<0||c>1||(l(o(c)),a()&&a()(l()))},ca=(r,e,t,l,o,a)=>{if(!s(e))return;const c=t(r);c<0||c>1||(l(o(c)),a()&&a()(l()))},gu=(r,e,t,l,o,a)=>{if(r.key==="ArrowLeft"){e(e()-t()<l()?l():e()-t()),o()&&o()(e());return}if(r.key==="ArrowRight"){e(e()+t()>a()?a():e()+t()),o()&&o()(e());return}};var pu=J('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function ua(r,e){fe(e,!0);let t=G(e,"min",7,0),l=G(e,"max",3,100),o=G(e,"value",31,()=>Xe(t())),a=G(e,"decNum",3,1),c=G(e,"step",19,()=>+((l()-t())/100).toFixed(4)),v=G(e,"onchange",3,null);ue(()=>{o()<t()&&(o(t()),v()&&v()(o())),o()>l()&&(o(l()),v()&&v()(o())),t()>l()&&t(l())});let u=ne(void 0),f=ne(void 0),d=ne(!1);const m=z=>{const M=t()+z*(l()-t());return+(Math.round(M/c())*c()).toFixed(4)},h=z=>{const M=s(u).getBoundingClientRect(),C=s(f).getBoundingClientRect(),P=M.x,D=C.x+C.width;return(z.clientX-P)/(D-P)},g=z=>{H(d,!1)},p=z=>{let M=o()+c()*z.deltaY*.5;M<t()&&(M=t()),M>l()&&(M=l()),o(+(Math.round(M/c())*c()).toFixed(4)),z.preventDefault(),v()&&v()(o())},y=k(()=>t()===l()?100:(o()-t())/(l()-t())*100);var b=pu();b.__keydown=[gu,o,c,t,v,l],b.__mousemove=[ca,d,h,o,m,v],b.__mousedown=[aa,h,d,y],b.__mouseup=[ia,d,h,o,m,v],b.__touchmove=[ca,d,h,o,m,v],b.__touchstart=[aa,h,d,y],b.__touchend=[ia,d,h,o,m,v];var E=q(b);let A;var N=q(E);let w;var _=q(N);$r(E,z=>H(u,z),()=>s(u)),$r(b,z=>H(f,z),()=>s(f)),re((z,M,C)=>{F(b,"aria-valuenow",o()),F(b,"aria-valuemin",t()),F(b,"aria-valuemax",l()),A=vt(E,1,"range-slider svelte-vhx0r0",null,A,z),lt(E,`width:${s(y)??""}%`),w=vt(N,1,"range-value svelte-vhx0r0",null,w,M),le(_,C)},[()=>({"range-slider_right":s(y)<50}),()=>({"range-value_right":s(y)<50}),()=>o().toFixed(a())]),Pr("mousewheel",b,p),Pr("mouseleave",b,g),Pr("touchcancel",b,g),I(r,b),ve()}rt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const fa=(r,e,t,l,o)=>{const a=e(r);a<0||a>1||H(t,a>s(l)&&a<s(o)+s(l),!0)},va=(r,e,t,l,o)=>{H(e,!1);const a=t(r);if(a<0||a>1)return;const c=l(a);o()!==c&&o(c)},da=(r,e,t,l,o)=>{if(!s(e))return;const a=t(r);if(a<0||a>1)return;const c=l(a);c!=o()&&o(c)},bu=(r,e,t,l,o)=>{if(r.key==="ArrowLeft"){e(e()-t()<l()?l():e()-t());return}if(r.key==="ArrowRight"){e(e()+t()>o()?o():e()+t());return}};var yu=J('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function xn(r,e){fe(e,!0);let t=G(e,"min",3,0),l=G(e,"max",3,10),o=G(e,"value",31,()=>Xe(t())),a=G(e,"step",3,1);o()<t()&&(console.error('The "value" is outside of the provided range.'),o(t())),o()>l()&&(console.error('The "value" is outside of the provided range.'),o(l())),t()>l()&&console.error("The min and max values must be distinct.");let c=ne(void 0),v=ne(void 0),u=ne(!1);const f=k(()=>t()===l()?0:(o()-t())/(l()-t()+1)),d=k(()=>a()/(l()-t()+1)),m=k(()=>l()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${s(d)*100}%, var(--bg-color-light2, #e8e8e8) ${s(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*s(d)}%)`:"background: #f0f0f0"),h=z=>{if(z<0||z>1)return o();let M=o();return z<s(f)&&s(f)>0&&(M=o()-Math.ceil((s(f)-z)/s(d))),z>s(f)+s(d)&&s(f)+s(d)<1&&(M=o()+Math.ceil((z-(s(f)+s(d)))/s(d))),M<t()&&(M=t()),M>l()&&(M=l()),M},g=z=>{const M=s(v).getBoundingClientRect(),C=M.x,P=M.x+M.width;return(z.clientX-C)/(P-C)},p=z=>{H(u,!1)},y=z=>{let M=Math.round(o()+z.deltaY*.5*a());M<t()&&(M=t()),M>l()&&(M=l()),o(M),z.preventDefault()};var b=yu();b.__keydown=[bu,o,a,t,l],b.__mousemove=[da,u,g,h,o],b.__mousedown=[fa,g,u,f,d],b.__mouseup=[va,u,g,h,o],b.__touchmove=[da,u,g,h,o],b.__touchstart=[fa,g,u,f,d],b.__touchend=[va,u,g,h,o];var E=q(b);let A;var N=q(E);let w;var _=q(N);$r(E,z=>H(c,z),()=>s(c)),$r(b,z=>H(v,z),()=>s(v)),re((z,M,C)=>{F(b,"aria-valuenow",o()),F(b,"aria-valuemin",t()),F(b,"aria-valuemax",l()),lt(b,s(m)),A=vt(E,1,"range-slider svelte-xdlm7u",null,A,z),lt(E,`width: max(2px, ${s(d)*100}%);left:${s(f)*100}%;`),w=vt(N,1,"range-value svelte-xdlm7u",null,w,M),le(_,C)},[()=>({"range-slider_left":s(d)<.1&&s(f)<.5,"range-slider_right":s(d)<.1&&s(f)>=.5}),()=>({"range-value_right":s(d)<.1&&s(f)>.5,"range-value_left":s(d)<.1&&s(f)<=.5}),()=>o().toFixed(0)]),Pr("mousewheel",b,y),Pr("mouseleave",b,p),Pr("touchcancel",b,p),I(r,b),ve()}rt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const _u=(r,e,t)=>{if(r.key==="ArrowLeft"){const l=e.options.findIndex(o=>o===t());l>0&&t(e.options[l-1]);return}if(r.key==="ArrowRight"){const l=e.options.findIndex(o=>o===t());l<e.options.length-1&&t(e.options[l+1]);return}};var wu=(r,e,t)=>e(t),xu=J('<button tabindex="-1"><!></button>'),ku=J('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function nt(r,e){fe(e,!0);let t=G(e,"value",31,()=>Xe(e.options[0])),l=G(e,"className",3,"");var o=ku(),a=Q(o);a.__keydown=[_u,e,t],Ie(a,20,()=>e.options,v=>v,(v,u)=>{var f=xu();f.__click=[wu,t,u];let d;var m=q(f);kt(m,()=>u),re((h,g)=>d=vt(f,1,`option option_${h??""}`,"svelte-1i17tox",d,g),[()=>u.toString().replace(".","_"),()=>({selected:u==t()})]),I(v,f)});var c=L(a,2);re(()=>vt(a,1,`selector ${l()??""}`,"svelte-1i17tox")),js(c,t),I(r,o),ve()}rt(["keydown","click"]);function er(r,e){fe(e,!0);let t=G(e,"options",19,()=>["no","yes"]),l=G(e,"value",15,!1),o=ne(!0);const a=k(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());ue(()=>H(o,l()?t()[1]:t()[0],!0)),ue(()=>l(s(o)===t()[1]));var c=de(),v=Q(c);{var u=f=>{nt(f,{get options(){return s(a)},get value(){return s(o)},set value(d){H(o,d,!0)}})};U(v,f=>{s(a)&&f(u)})}I(r,c),ve()}var Eu=J('<div tabindex="0" role="radiogroup"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function ma(r,e){fe(e,!0);let t=G(e,"file",15),l=G(e,"message",3,"Select CSV file with dataset"),o=G(e,"acceptType",3,".csv"),a;function c(b){a&&a.files.length>0?t(a.files[0]):t(null)}function v(b){(b.type==="click"||b.type==="keydown"&&(b.code==="Space"||b.code==="Enter"))&&a.click()}function u(b){a.value=null,t(null)}var f=Eu(),d=Q(f);d.__keydown=v,d.__click=v;let m;var h=q(d),g=L(h);g.__change=c,$r(g,b=>a=b,()=>a);var p=L(d,2);{var y=b=>{nn(b,{onclick:u})};U(p,b=>{t()&&b(y)})}re(b=>{m=vt(d,1,"file-selector svelte-1k0x7uv",null,m,b),le(h,`${(t()?t().name:l())??""} `),F(g,"accept",o())},[()=>({selected:t()})]),I(r,f),ve()}rt(["keydown","click","change"]);function Cu(r,e,t,l){e()&&H(t,e()(l()),!0)}var Au=J('<div class="error-message svelte-1qtiwcs"> </div>'),Nu=J('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function ha(r,e){fe(e,!0);let t=G(e,"value",15,""),l=G(e,"className",3,""),o=G(e,"placeholder",3,""),a=G(e,"maxLength",3,25),c=G(e,"validator",3,null),v=ne("");var u=Nu();let f;var d=q(u);d.__input=[Cu,c,v,t];var m=L(d,2);{var h=g=>{var p=Au(),y=q(p);re(()=>le(y,s(v))),I(g,p)};U(m,g=>{s(v)&&s(v).length>0&&g(h)})}re(g=>{f=vt(u,1,`textinput ${l()??""}`,"svelte-1qtiwcs",f,g),F(d,"placeholder",o()),F(d,"maxlength",a())},[()=>({error:s(v)&&s(v).length>0})]),js(d,t),I(r,u),ve()}rt(["input"]);var Su=J('<div class="spinner svelte-n48urb"></div>');function rl(r){var e=Su();I(r,e)}const Mu=(r,e,t)=>{if(r.key==="ArrowLeft"){const l=e().findIndex(o=>o===t());l>0&&t(e()[l-1]);return}if(r.key==="ArrowRight"){const l=e().findIndex(o=>o===t());l<e().length-1&&t(e()[l+1]);return}};var Tu=(r,e,t)=>e(t),zu=J('<button tabindex="-1"><!></button>'),Pu=J('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an">',1);function ga(r,e){fe(e,!0);let t=G(e,"options",19,()=>["p","l","b","h"]),l=G(e,"value",31,()=>Xe(t()[0]));const o='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar"};var v=Pu(),u=Q(v);u.__keydown=[Mu,t,l],Ie(u,20,t,d=>d,(d,m)=>{var h=zu();h.__click=[Tu,l,m];let g;var p=q(h);kt(p,()=>o+a[m]+"</svg"),re(y=>{g=vt(h,1,"option svelte-yf64an",null,g,y),F(h,"title",c[m])},[()=>({selected:m==l()})]),I(d,h)});var f=L(u,2);js(f,l),I(r,v),ve()}rt(["keydown","click"]),rt(["keydown","click"]);var Iu=J("<h2> </h2>"),Lu=J("<!> <!>",1),Ru=J('<div class="widget"><!></div>');function ju(r,e){fe(e,!0);let t=G(e,"title",3,""),l=G(e,"value",15),o=G(e,"labelWidth",3,13);function a(f){const d={};for(const m of Object.keys(f))d[m]=f[m].default;return d}ue(()=>{!l()&&e.options&&l(a(e.options))});var c=Ru(),v=q(c);{var u=f=>{var d=Lu(),m=Q(d);{var h=p=>{ye(p,{children:(y,b)=>{var E=Iu(),A=q(E);re(()=>le(A,t())),I(y,E)},$$slots:{default:!0}})};U(m,p=>{t()&&p(h)})}var g=L(m,2);Ie(g,17,()=>Object.keys(e.options),Fe,(p,y)=>{var b=de();const E=k(()=>e.options[s(y)]);var A=Q(b);{var N=w=>{ye(w,{get name(){return s(E).name},get label(){return s(E).label},get labelWidth(){return o()},children:(_,z)=>{var M=de(),C=Q(M);Ls(C,()=>s(E).el,(P,D)=>{D(P,Ir(()=>s(E).props,{get value(){return l()[s(y)]},set value(R){l(l()[s(y)]=R,!0)}}))}),I(_,M)},$$slots:{default:!0}})};U(A,w=>{s(E).hidden||w(N)})}I(p,b)}),I(f,d)};U(v,f=>{l()&&f(u)})}I(r,c),ve()}var qu=J('<span style="font-weight:bold"> </span><br>',1),Du=J('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),Fu=J('<span class="file-size svelte-gdjwex"> </span>'),Ou=J('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <!></p> <!>',1);function Vu(r,e){fe(e,!0);let t=G(e,"title",3,"");var l=de(),o=Q(l);{var a=c=>{ye(c,{children:(v,u)=>{var f=Ou(),d=Q(f),m=q(d);{var h=N=>{var w=qu(),_=Q(w),z=q(_);re(()=>le(z,t())),I(N,w)};U(m,N=>{t()&&t()!==""&&N(h)})}var g=L(m,4),p=q(g),y=L(g,5);{var b=N=>{var w=Du(),_=Q(w),z=q(_),M=L(_,4),C=q(M);re(()=>{le(z,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),le(C,`${e.dataset.nresp??""}×${e.dataset.values.ncols??""}`)}),I(N,w)},E=N=>{var w=Fu(),_=q(w);re(()=>le(_,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),I(N,w)};U(y,N=>{e.dataset.nresp&&e.dataset.nresp>0?N(b):N(E,!1)})}var A=L(d,2);nn(A,{get onclick(){return e.reset}}),re(()=>{F(g,"title",e.dataset.fileName),le(p,e.dataset.fileName)}),I(v,f)},$$slots:{default:!0}})};U(o,c=>{e.dataset&&c(a)})}I(r,l),ve()}var Bu=J("<!> <!>",1),Yu=J("<!> <!> <!> <!> <!> <!>",1),Wu=J("<!> <!>",1),Uu=J("<p> </p>"),Hu=J("<!> <p> </p>",1),Gu=J("<p> </p>"),Xu=J("<!> <!> <!>",1);function nl(r,e){fe(e,!0);let t=G(e,"model",3,null),l=G(e,"outliers",19,()=>[]),o=G(e,"className",3,"Class"),a=G(e,"classMandatory",3,!1),c=G(e,"classUnique",3,!1),v=G(e,"title",3,""),u=G(e,"dataset",15),f=G(e,"resobj",15);const d=[",",";"],m=k(()=>t()?["no","yes"]:["no","labels","values"]);let h=ne(void 0),g=ne(""),p=ne(""),y=ne(","),b=ne("no"),E=ne(!1),A=ne(!1),N=ne(null),w=ne("neutral"),_=ne("");function z(O,X,$){H(N,e.WASM().then(ee=>{f($s(ee,O,X,$))}).catch(ee=>{console.error(ee),f(null),H(w,"error"),H(_,ee,!0)}),!0)}function M(O,X){if(!O||O.size<10)return;const ee=O.slice(0,1e5),te=new FileReader;te.onload=()=>{const se=te.result;!se||se.length<0||((be=>{let[Ee,pe,Ve,ie]=be;H(y,Ee,!0),H(E,pe,!0),H(A,Ve,!0),H(b,ie,!0)})(lu(se)),H(A,a()||s(A),!0),X&&s(b)!=="no"&&H(b,"yes"))},te.onerror=function(se){csvString=null,H(w,"error"),H(_,se,!0),console.error("Error reading CSV file.",se)},te.readAsText(ee)}function C(O){try{const X=ru(O,s(y),s(b)==="yes"?"labels":s(b),s(E),s(A),s(g),s(p));if(X.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(t()&&X.values.ncols!==t().ncols+t().exclvars.length)throw new Error("Dataset has different number of columns than the training set.");if(X.classNames.length>X.values.nrows/2)throw new Error("Dataset has too many unique "+o().toLowerCase()+" labels ("+X.classNames.length+"), check your CSV file.");if(a()&&X.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&X.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");X.fileName=s(h).name.replace(/\.[^/.]+$/,""),t()&&(X.varrev=t().varrev,X.header=t().header,X.varlabels=t().varlabels,X.varvalues=t().varvalues,X.varvaluesName=t().varvaluesName,X.varvaluesUnits=t().varvaluesUnits),u(X),H(_,""),H(w,"success")}catch(X){console.error(X),u(null),H(w,"error"),H(_,X,!0)}}function P(O){const X=new FileReader;X.onload=()=>{C(X.result)},X.readAsText(s(h))}function D(){H(h,""),u(null),f(null),H(g,""),H(p,""),H(w,"neutral"),H(_,"")}ue(()=>{s(h)===null?D():(M(s(h),t()),H(w,"neutral"),H(_,""))}),ue(()=>{s(y)&&(H(w,"neutral"),H(_,""))}),ue(()=>{if(u()&&t()&&!f()&&!s(_))try{f(z(t(),u(),l())),H(_,""),H(w,"success")}catch(O){console.error(O),u(null),f(null),H(w,"error"),H(_,O,!0)}});var R=Xu(),Y=Q(R);{var B=O=>{var X=Wu(),$=Q(X);gn($,()=>s(h)===void 0,se=>{ye(se,{children:(be,Ee)=>{ma(be,{id:"dataFile",message:"Select CSV file with dataset",get file(){return s(h)},set file(pe){H(h,pe,!0)}})},$$slots:{default:!0}})});var ee=L($,2);{var te=se=>{var be=Yu(),Ee=Q(be);ye(Ee,{label:"Delimiter",children:(ce,Le)=>{nt(ce,{id:"sep",options:d,get value(){return s(y)},set value(ke){H(y,ke,!0)}})},$$slots:{default:!0}});var pe=L(Ee,2);ye(pe,{label:"Row labels",children:(ce,Le)=>{er(ce,{id:"hasLabels",options:["no","yes"],get value(){return s(E)},set value(ke){H(E,ke,!0)}})},$$slots:{default:!0}});var Ve=L(pe,2);{var ie=ce=>{ye(ce,{get label(){return`${o()??""} labels`},children:(Le,ke)=>{er(Le,{id:"hasLabels",options:["no","yes"],get value(){return s(A)},set value(Ne){H(A,Ne,!0)}})},$$slots:{default:!0}})};U(Ve,ce=>{a()||ce(ie)})}var _e=L(Ve,2);ye(_e,{label:"Header",children:(ce,Le)=>{nt(ce,{id:"header",get options(){return s(m)},get value(){return s(b)},set value(ke){H(b,ke,!0)}})},$$slots:{default:!0}});var Ae=L(_e,2);{var ae=ce=>{var Le=Bu(),ke=Q(Le);ye(ke,{label:"Header name",children:(at,nr)=>{ha(at,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return s(g)},set value(Qe){H(g,Qe,!0)}})},$$slots:{default:!0}});var Ne=L(ke,2);ye(Ne,{label:"Header units",children:(at,nr)=>{ha(at,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return s(p)},set value(Qe){H(p,Qe,!0)}})},$$slots:{default:!0}}),I(ce,Le)};U(Ae,ce=>{s(b)==="values"&&ce(ae)})}var we=L(Ae,2);ye(we,{label:" ",children:(ce,Le)=>{dt(ce,{text:"Load",onclick:P})},$$slots:{default:!0}}),I(se,be)};U(ee,se=>{s(h)&&se(te)})}I(O,X)},W=O=>{var X=de(),$=Q(X);{var ee=te=>{var se=de(),be=Q(se);Is(be,()=>s(N),Ee=>{ye(Ee,{children:(pe,Ve)=>{var ie=Hu(),_e=Q(ie);rl(_e);var Ae=L(_e,2),ae=q(Ae);re(()=>le(ae,t()?"Loading data and apply model...":"Loading data...")),I(pe,ie)},$$slots:{default:!0}})},void 0,(Ee,pe)=>{ye(Ee,{status:"error",children:(Ve,ie)=>{var _e=Uu(),Ae=q(_e);re(()=>le(Ae,s(pe))),I(Ve,_e)},$$slots:{default:!0}})}),I(te,se)};U($,te=>{s(N)&&te(ee)})}I(O,X)};U(Y,O=>{u()?O(W,!1):O(B)})}var T=L(Y,2);{var S=O=>{Vu(O,{get dataset(){return u()},reset:D,get title(){return v()}})};U(T,O=>{u()&&O(S)})}var V=L(T,2);{var j=O=>{ye(O,{status:"error",children:(X,$)=>{var ee=Gu(),te=q(ee);re(()=>le(te,s(_))),I(X,ee)},$$slots:{default:!0}})};U(V,O=>{(s(w)==="error"||s(_))&&O(j)})}I(r,R),ve()}var Ku=J('<span class="item svelte-1ggez3e"> </span>'),Ju=J('<p class="outliers svelte-1ggez3e"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function sl(r,e){fe(e,!0);var t=de(),l=Q(t);{var o=a=>{ye(a,{children:(c,v)=>{var u=Ju(),f=Q(u),d=L(q(f),2);Ie(d,17,()=>e.outliers,Fe,(p,y)=>{var b=Ku(),E=q(b);re(()=>le(E,e.dataset.objlabels[s(y)])),I(p,b)});var m=L(f,2);{var h=p=>{vu(p,{get onclick(){return e.undoOutliers}})};U(m,p=>{e.outliers.length>1&&p(h)})}var g=L(m,2);nn(g,{get onclick(){return e.resetOutliers}}),I(c,u)},$$slots:{default:!0}})};U(l,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(o)})}I(r,t),ve()}const Qu={small:30,medium:40,large:50,xlarge:60},Zu={small:5,medium:8,large:12,xlarge:15},$u={small:6,medium:10,large:14,xlarge:18},ll={small:4,medium:6,large:8,xlarge:10},ef={small:12,medium:15,large:19,xlarge:21},ol={small:11,medium:15,large:17,xlarge:19},kn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},En=["●","◼","▲","▼","⬥","＋","✳","✕"],tf=.8,pa=.5,rf={small:5,medium:8,large:12,xlarge:15},bt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function ba(r,e){return Array.isArray(r)&&r.length===e&&!r.some(t=>t===void 0)&&!r.some(t=>isNaN(t))}function ya(r,e){if(r!=null&&(Array.isArray(r)&&(r=Je(r)),!(!Se(r)||r.length<1)))return r.apply(t=>vl((t-e[1])*e[0]+e[2])).v}function ot(r,e){return ya(r,e.coords)}function al(r,e){return ya(r,e.objects)}function _a(r,e){if(r!=null&&(Array.isArray(r)&&(r=Je(r)),!(!Se(r)||r.length<1)))return r.apply(t=>(t-e[2])/e[0]+e[1]).v}function wa(r,e){return _a(r,e.coords)}function xa(r,e){return _a(r,e.objects)}function il(r){return r===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${r.toString()}</tspan>`}function Rr(r){if(r===Math.round(r))return r;if(Math.abs(r)>10**6)return Math.round(r);if(Math.abs(r)<10**-6)return r;let e=r.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function cl(r){if(r===void 0)return[0,void 0];if(r.length<1)return[0,void 0];if(r.length===1)return[0,[r[0].toString()]];let e=Rr(Math.abs(tn(Ro(r)))),t=0;if(e>=1)return e<100?[0,Array.from(r).map(a=>a.toFixed(0))]:(t=Math.ceil(Rr(Math.log10(e)))-2,[t,Array.from(r).map(a=>(a/Math.pow(10,t)).toFixed(0))]);let l=Math.ceil(-Rr(Math.log10(e)));return l<=2?[0,Array.from(r).map(o=>o.toFixed(l))]:(t=l-2,l=2,Rr(Math.abs(qt(r)))<=10?[-t,Array.from(r).map(o=>(o*Math.pow(10,t)).toFixed(l))]:[-t,Array.from(r).map(o=>(o/Math.pow(10,t)).toString())])}function Nt(r,e,t){return Array.isArray(r)&&(r=Je(r)),Se(r)?r.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&r.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):r:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function ul(r,e,t,l){if(!r||!e||r.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=t.coords,a=l.coords;let c="";for(let v=0;v<r.length;v++){const u=vl((r.v[v]-o[1])*o[0]+o[2]),f=vl((e.v[v]-a[1])*a[0]+a[2]);c+=u+","+f+" "}return c}function ka(r,e){return r?Array.isArray(r)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==r.length?[null,"number of tick labels and values should be the same."]:[r.map(t=>Cn(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Ea(r,e){if(Array.isArray(r)&&(r=Je(r)),!Se(r))return[null,"tick values must be provided as an array or as a vector."];if(r.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const t=new Set(r.v);if(r.length!==t.size)return[null,"ticks values must be unique."];const l=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],a=r.filter(c=>c>=l&c<=o);return a.length!==r.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function fl(r,e,t,l,o,a){o==null&&(o=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(r)return r;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const v=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*v,f=Math.floor(Math.log10(u)),d=1/Math.pow(10,f-1),m=Math.round(u*d)/d;let h=nf(m/t);o&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let g=Math.ceil((c[0]+v)/h)*h,p=Math.floor((c[1]-v)/h)*h;Math.abs(c[0]-g)<h/10&&(g=g+h),Math.abs(c[1]-p)<h/10&&(p=p-h),t=Math.ceil(Rr((p-g)/h))+1,r=ge.zeros(t);for(let y=0;y<t;y++)r.v[y]=g+h*y;if(Math.abs(h)<1){const y=Math.pow(10,1+Math.round(-Math.log10(h)));r=r.apply(b=>Math.round((b+Number.EPSILON)*y)/y)}return r.filter(y=>y>=c[0]&y<=c[1])}function nf(r,e){const t=Math.floor(Math.log10(r)),l=r/Math.pow(10,t);let o;return l<=1?o=1:l<=2?o=2:l<=5?o=5:o=10,o*Math.pow(10,t)}function vl(r){return Math.round(r*10)/10}function sf(r,e){return e<300.2||r<400.2?"small":e<400.2||r<700.2?"medium":e<650.2||r<850.2?"large":"xlarge"}function Ca(r,e){return r<400.2?"small":r<700.2?"medium":r<900.2?"large":"xlarge"}function lf(){const r=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let l=0;l<8;l++)t=t&1?3988292384^t>>>1:t>>>1;r[e]=t}return r}function of(r){let e=-1,t=lf();for(let l=0;l<r.length;l++)e=t[(e^r[l])&255]^e>>>8;return e^-1}function af(r,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const l=of(t),o=new Uint8Array(4);o[0]=l>>>24,o[1]=l>>>16,o[2]=l>>>8,o[3]=l&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(r,0),c.set(a,33),c.set(t,37),c.set(o,50),c}function cf(r,e){const t=r.split(","),l=t[0],o=t[1],a=33/3*4,c=o.substring(0,a),v=o.substring(a),u=atob(c),f=new Uint8Array(u.length);for(let h=0;h<f.length;h++)f[h]=u.charCodeAt(h);const d=af(f,e),m=btoa(String.fromCharCode(...d));return[l,",",m,v].join("")}function uf(r,e,t,l,o){if(t||(t=10),l||(l=10),o||(o=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(l<1||l>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!r||!(r instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=t/2.54*o,c=l/2.54*o;setTimeout(()=>{const v=r.clientHeight,u=r.clientWidth;let f=Math.max(a/u,c/v),d=1;f<1&&(d=f,f=1);const m=document.createElement("canvas"),h=m.getContext("2d");m.width=u*(d<1?d:f),m.height=v*(d<1?d:f),r.setAttribute("width",u*f),r.setAttribute("height",v*f),h.fillStyle="white",h.fillRect(0,0,m.width,m.height),h.scale(f,f);const g=new XMLSerializer().serializeToString(r),p=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),y=URL.createObjectURL(p),b=new Image;b.onload=function(){d<0&&(b.width=b.width*d,b.height=b.height*d),h.drawImage(b,0,0,m.width,m.height);const E=m.toDataURL("image/png"),A=cf(E,o),N=document.createElement("a");N.href=A,N.download=`${e}.png`,N.click()},b.src=y},20)}function ff(r,e){if(!r||!(r instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=r.clientHeight,l=r.clientWidth;r.setAttribute("width",l+"px"),r.setAttribute("height",t+"px"),r.setAttribute("viewBox",`0 0 ${l} ${t}`);const o=new Blob([r.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(o),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function vf(r,e,t,l){const o=r.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":df(e,t,l)})]).then(()=>{r.classList.add("copied"),r.textContent="✓ done",setTimeout(()=>{r.classList.remove("copied"),r.textContent=o},500)},a=>{console.error(a),r.classList.add("error"),r.textContent="x copy",setTimeout(()=>{r.classList.remove("error"),r.textContent=o},500)}).catch(a=>console.error(a))}async function df(r,e,t){const l=r.clientHeight,o=r.clientWidth,a=Math.max(e/o,t/l),c=document.createElement("canvas"),v=c.getContext("2d");return c.width=o*a,c.height=l*a,v.scale(a,a),r.setAttribute("width",c.width),r.setAttribute("height",c.height),await new Promise((f,d)=>{const m=new XMLSerializer().serializeToString(r),h=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,p=g.createObjectURL(h),y=new Image;y.onload=function(){v.drawImage(y,0,0,c.width,c.height),g.revokeObjectURL(p),c.toBlob(function(b){b?f(b):d(new Error("Failed to create blob"))},"image/png")},y.onerror=function(b){d(b)},y.src=p})}function dl(r,e){r>16&&(r=16);const t=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?t[r-1].map(l=>l+e):t[r-1]}function mf(r,e,t,l,o){let a=o.ticks,c=o.tickLabels,v=0;const u=fl(a,r,Zu[t.x],!0,o.whole),f=u.length,d=xa([ll[t.plot]],l)[0],m=ge.fill(e[0],f),h=m.add(d),g=ge.fill(e[1],f);if(c||(a?(v=0,c=a.v.map(C=>Rr(C).toString())):[v,c]=cl(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[u,m],[u,g]],y=[[Je([r[0]]),Je([e[0]])],[Je([r[1]]),Je([e[0]])]],b=[[u,h],[u,m]],E=(r[1]-r[0])*.01,A=[[null,null],[[r[1]-(v>9?1:0)*E],[m.v[f-1]]]],N=il(v),w=c.length,_=Math.abs(r[1]>r[0]?r[1]-u.v[w-1]:r[1]-u.v[0]),z=Math.abs(r[1]-r[0]),M=Math.abs(u.v[1]-u.v[0]);if(N.length>0&&_<z*.1&&_<M*.5){const C=r[1]>r[0]?w-1:0;c[C]=" "}return{grid:p,axisLine:y,tickCoords:b,tfCoords:A,ticks:a,tickLabels:c,tickFactor:v,tfLabel:N}}function hf(r,e,t,l,o){let a=o.ticks,c=o.tickLabels,v=0;const u=fl(o.ticks,e,$u[t.y],!0,o.whole),f=u.length,d=xa([ll[t.plot]],l)[0],m=ge.fill(r[0],f),h=m.add(d),g=ge.fill(r[1],f);if(c||(a?(v=0,c=a.v.map(M=>Rr(M).toString())):[v,c]=cl(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[m,u],[g,u]],y=[[Je([r[0]]),Je([e[0]])],[Je([r[0]]),Je([e[1]])]],b=[[m,u],[h,u]],E=[[[],[]],[[h.v[f-1]+(Math.abs(v)>9?3:2)*d],[e[1]]]],A=il(v),N=c.length,w=Math.abs(e[1]>e[0]?e[1]-u.v[N-1]:e[1]-u.v[0]),_=Math.abs(e[1]-e[0]),z=Math.abs(u.v[1]-u.v[0]);if(A.length>0&&w<_*.1&&w<z*.5){const M=e[1]>e[0]?N-1:0;c[M]=" "}return{grid:p,axisLine:y,tickCoords:b,tfCoords:E,ticks:a,tickLabels:c,tickFactor:v,tfLabel:A}}function gf(r){if(!r.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Se(r.breaks)?r.breaks.v:r.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!r.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(r.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(r.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=r.colmap;let l,o;if(r.labels?(l=r.labels,o=0):[o,l]=cl(e),!(l.length===e.length-1||l.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=l.length===t.length;return{colmap:t,breaks:e,labels:l,isCentered:a,labelsFactor:o,fontSize:r.fontSize,labelColor:r.labelColor}}function pf(r,e,t,l){const o=r.colmap.length,a=e*tf,c=a/o,v=t[1]+(e-a)*.5,u=rf[l.y],f=t[2]+u*pa,d=f+u*(1+pa),m=r.isCentered?c/2:0;return{start:v,top:f,height:u,width:c,dxl:m,ltop:d}}function jr(r,e,t){if(!r||!e||!t||typeof t!="function")return;const l=r.target;if(l.tagName===e){const o=Array.prototype.indexOf.call(l.parentNode.children,l);if(o<0)return;t(o),r.stopPropagation()}}function bf(r,e){const l=document.createElement("canvas").getContext("2d");return l.font=e,l.measureText(r.replace(/<(.|\n)*?>/g,"")).width}function yf(r,e){const t="Arial",l=e/8,o=e*1.5,a=Array(r.length),c=Array(r.length);let v=0,u=0,f=0;for(let m=0;m<r.length;m++){const h=bf("  "+r[m].label+"  ",e+"px "+t);f=h>f?h:f;const g=e*r[m].labelHeight+2*l;a[m]=g,c[m]=v,v=v+g,u=u+g}const d=o+2*l+f;return[c,a,o,l,u,d]}function _f(r,e,t,l,o){const[a,c,v,u,f,d]=yf(r.items,l*r.fontSize),m=r.position.includes("left")?e[0]+o:r.position.includes("right")?e[1]-d-o:(e[1]+e[0]-d)*.5,h=r.position.includes("top")?t[1]+o:r.position.includes("bottom")?t[0]-f-o:(t[1]+t[0]-f)*.5;return{lgl:m,lgt:h,lgw:d,lgh:f,ely:a,elh:c,elw:v,elp:u}}function Cn(r){if(!r||r.length<1)return r;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function t(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let l=0,o="";for(;l<r.length;){const a=r[l];if((a==="^"||a==="_")&&l<r.length-1){const c=a==="^";if(l++,r[l]==="("){let v=l+1;for(;v<r.length&&r[v]!==")";)v++;const u=r.slice(l+1,v);o+=c?e(u):t(u),l=v+1}else if(r[l]==="-"||r[l]==="–"){const v=r.slice(l,l+2);o+=c?e(v):t(v),l=l+2}else o+=c?e(r[l]):t(r[l]),l++}else o+=a,l++}return o}var wf=me('<line vector-effect="non-scaling-stroke"></line>'),xf=me("<g></g>");function ml(r,e){fe(e,!0);let t=G(e,"lineCoords",19,()=>[]),l=G(e,"lineColor",19,()=>bt.DARKGRAY),o=G(e,"lineType",3,1),a=G(e,"lineWidth",3,1),c=G(e,"className",3,"");const v=Tt("axes");let u=k(()=>ot(t()[0][0],v.tX())),f=k(()=>ot(t()[1][0],v.tX())),d=k(()=>ot(t()[0][1],v.tY())),m=k(()=>ot(t()[1][1],v.tY())),h=k(()=>`stroke:${l()};stroke-width: ${a()}px;stroke-dasharray:${kn[v.scales().plot][o()-1]}`);var g=de(),p=Q(g);{var y=b=>{var E=xf();Ie(E,21,()=>s(u),Fe,(A,N,w)=>{var _=wf();re(()=>{F(_,"x1",s(u)[w]),F(_,"x2",s(f)[w]),F(_,"y1",s(d)[w]),F(_,"y2",s(m)[w]),lt(_,s(h))}),I(A,_)}),re(()=>vt(E,0,cc(c()))),I(b,E)};U(p,b=>{s(u)&&s(d)&&s(f)&&b(y)})}I(r,g),ve()}var kf=me('<text text-anchor="middle"><!></text>'),Ef=me("<text><!></text>"),Cf=me("<text><!></text>"),Af=me('<g class="tick-labels"><!></g>');function Aa(r,e){fe(e,!0);let t=G(e,"pos",3,1),l=G(e,"las",3,1),o=k(()=>["middle","middle","start","middle","end"][t()]),a=k(()=>`fill:${e.textColor};`);const c=Tt("axes");let v=k(()=>ot(e.tickCoords[1][0],c.tX())),u=k(()=>ot(e.tickCoords[1][1],c.tY())),f=k(()=>ol[c.scales().plot]),d=k(()=>[0,0,s(f),0,-s(f)][t()]),m=k(()=>[0,s(f),0,-s(f),0][t()]);var h=Af(),g=q(h);{var p=b=>{var E=de(),A=Q(E);Ie(A,17,()=>s(v),Fe,(N,w,_)=>{var z=kf();F(z,"data-id",_),F(z,"dx",0);var M=q(z);kt(M,()=>e.tickLabels[_],!0),re(()=>{F(z,"x",s(v)[_]),F(z,"y",s(u)[_]),F(z,"dy",s(d)*1.25),F(z,"transform",`rotate(-90, ${s(v)[_]}, ${s(u)[_]})`)}),I(N,z)}),I(b,E)},y=(b,E)=>{{var A=w=>{var _=de(),z=Q(_);Ie(z,17,()=>s(v),Fe,(M,C,P)=>{var D=Ef();F(D,"data-id",P),F(D,"dy",0),F(D,"text-anchor","end");var R=q(D);kt(R,()=>e.tickLabels[P],!0),re(()=>{F(D,"x",s(v)[P]),F(D,"y",s(u)[P]),F(D,"dx",-s(m)/2),F(D,"transform",`rotate(-90, ${s(v)[P]}, ${s(u)[P]})`)}),I(M,D)}),I(w,_)},N=w=>{var _=de(),z=Q(_);Ie(z,17,()=>s(v),Fe,(M,C,P)=>{var D=Cf();F(D,"data-id",P);var R=q(D);kt(R,()=>e.tickLabels[P],!0),re(()=>{F(D,"x",s(v)[P]),F(D,"y",s(u)[P]),F(D,"dx",s(d)),F(D,"dy",s(m)),F(D,"text-anchor",s(o))}),I(M,D)}),I(w,_)};U(b,w=>{l()===2&&t()===1?w(A):w(N,!1)},E)}};U(g,b=>{l()===2&&t()===4?b(p):b(y,!1)})}re(()=>lt(h,s(a))),I(r,h),ve()}const Nf=(r,e=pt,t=pt)=>{var l=Lf();const o=k(()=>e().colmap.length);var a=Q(l);Ie(a,17,()=>e().colmap,Fe,(d,m,h)=>{var g=zf();const p=k(()=>t().start+h*t().width);var y=Q(g),b=L(y);F(b,"dy",0);var E=q(b);kt(E,()=>e().labels[h],!0),re(()=>{F(y,"x",s(p)),F(y,"y",t().top),F(y,"width",t().width),F(y,"height",t().height),F(y,"fill",s(m)),F(b,"x",s(p)),F(b,"y",t().ltop),F(b,"dx",t().dxl),F(b,"fill",e().labelColor),F(b,"font-size",e().fontSize+"em")}),I(d,g)});var c=L(a);{var v=d=>{var m=Pf();const h=k(()=>t().start+s(o)*t().width);F(m,"dx",0),F(m,"dy",0);var g=q(m);kt(g,()=>e().labels[s(o)],!0),re(()=>{F(m,"x",s(h)),F(m,"y",t().ltop),F(m,"fill",e().labelColor),F(m,"font-size",`${e().fontSize??""}em`)}),I(d,m)};U(c,d=>{e().isCentered||d(v)})}var u=L(c);{var f=d=>{var m=If();const h=k(()=>t().start+s(o)*t().width);var g=q(m);kt(g,()=>il(e().labelsFactor),!0),re(()=>{F(m,"x",s(h)),F(m,"y",t().ltop),F(m,"fill",e().labelColor),F(m,"font-size",`${e().fontSize??""}em`)}),I(d,m)};U(u,d=>{e().labelsFactor!==0&&d(f)})}I(r,l)};function Na(r,e,t){r.preventDefault(),e(r,t())}function Sa(r,e,t){r.preventDefault(),e(r,t())}function Ma(r,e,t){r.preventDefault(),e(r,t())}function ss(r,e,t){r.preventDefault(),e(r,t())}async function Ta(r,e,t,l){vf(r.target,s(e),t(),l())}function za(r,e,t){ff(s(e),t())}function Pa(r,e,t,l,o,a){uf(s(e),t(),l(),o(),a())}var Sf=me('<text fill="crimson" text-anchor="middle"> </text>'),Mf=me('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Tf=me("<!><!><!><!><!>",1),zf=me('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Pf=me('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),If=me('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Lf=me("<!><!><!>",1),Rf=me("<line></line>"),jf=me('<text dominant-baseline="middle" text-anchor="middle"> </text>'),qf=me('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Df=me('<svg><rect height="100%" width="100%"></rect><!></svg>'),Ff=me('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Of=me('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Vf=me('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Bf=me('<g class="plot-labels"><!><!><!></g>'),Yf=me('<g class="axis x-axis"><!></g>'),Wf=me('<g class="axis y-axis"><!></g>'),Uf=me('<rect fill="transparent" id="axes-box"></rect>'),Hf=me('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Gf=me('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Xf=me('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Kf=me('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Jf=J('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),Qf=J('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Zf=J(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function $f(r,e){fe(e,!0);const t=(xe,ze=pt,Me=pt)=>{var it=de(),Et=Q(it);{var sr=St=>{var He=de(),Re=Q(He);{var _t=ct=>{var $e=Sf(),Xt=q($e);re(()=>{F($e,"x",s(se)[0]-10),F($e,"y",s(ee)),F($e,"transform",`rotate(-90, ${s(se)[0]-10}, ${s(ee)})`),le(Xt,Me().error)}),I(ct,$e)},gt=ct=>{var $e=Mf(),Xt=q($e);re(()=>{F($e,"x",s(te)),F($e,"y",s(be)[0]),le(Xt,Me().error)}),I(ct,$e)};U(Re,ct=>{Me().pos===4?ct(_t):ct(gt,!1)})}I(St,He)},It=St=>{var He=Tf(),Re=Q(He);{var _t=he=>{ml(he,{get lineCoords(){return ze().grid},get lineColor(){return bt.MIDDLEGRAY},lineType:3})};U(Re,he=>{Me().showGrid&&he(_t)})}var gt=L(Re);ml(gt,{get lineCoords(){return ze().axisLine},get lineColor(){return bt.DARKGRAY},lineType:1});var ct=L(gt);ml(ct,{get lineCoords(){return ze().tickCoords},get lineColor(){return bt.DARKGRAY},lineType:1});var $e=L(ct);{var Xt=he=>{Aa(he,{get las(){return Me().las},get pos(){return Me().pos},get tickCoords(){return ze().tickCoords},get tickLabels(){return ze().tickLabels},get tickColor(){return bt.DARKGRAY},get hideLast(){return Me().hideLast}})};U($e,he=>{ze().tickCoords.length===2&&ze().tickLabels.length===ze().tickCoords[1][0].length&&he(Xt)})}var Dr=L($e);{var Be=he=>{const wt=k(()=>[ze().tfLabel]);Aa(he,{get pos(){return Me().pos},get tickCoords(){return ze().tfCoords},get tickLabels(){return s(wt)},get textColor(){return bt.DARKGRAY}})};U(Dr,he=>{ze().tickFactor!==0&&he(Be)})}I(St,He)};U(Et,St=>{Me().error?St(sr):St(It,!1)})}I(xe,it)},l=(xe,ze=pt,Me=pt)=>{var it=Df();const Et=k(()=>Me().elw+2*Me().elp),sr=k(()=>Me().elp),It=k(()=>Me().elh),St=k(()=>Me().ely);var He=q(it),Re=L(He);Ie(Re,17,()=>ze().items,Fe,(_t,gt,ct)=>{var $e=qf();F($e,"x",0);var Xt=q($e);{var Dr=gr=>{var je=Rf();re(()=>{F(je,"x1",s(sr)),F(je,"x2",s(Et)-s(sr)),F(je,"y1",s(It)[ct]/2),F(je,"y2",s(It)[ct]/2),F(je,"stroke",s(gt).line.lineColor),F(je,"stroke-width",s(gt).line.lineWidth),F(je,"stroke-dasharray",s(R)[s(gt).line.lineType-1])}),I(gr,je)};U(Xt,gr=>{s(gt).line&&gr(Dr)})}var Be=L(Xt);{var he=gr=>{var je=jf(),Ll=q(je);re(()=>{F(je,"x",s(Et)/2),F(je,"y",s(It)[ct]/2),F(je,"fill",s(gt).point.faceColor),F(je,"stroke-width",s(gt).point.lineWidth),F(je,"stroke",s(gt).point.lineColor),F(je,"font-size",s(P)),le(Ll,En[s(gt).point.marker-1])}),I(gr,je)};U(Be,gr=>{s(gt).point&&gr(he)})}var wt=L(Be),Il=q(wt);kt(Il,()=>s(gt).label,!0),re(()=>{F($e,"y",s(St)[ct]),F($e,"width",Me().lgw),F($e,"height",s(It)[ct]),F(wt,"x",s(Et)+s(sr)),F(wt,"y",s(It)[ct]/2),F(wt,"fill",bt.LEGEND),F(wt,"font-size",`${ze().fontSize??""}em`)}),I(_t,$e)}),re(()=>{F(it,"x",Me().lgl),F(it,"y",Me().lgt),F(it,"height",Me().lgh),F(it,"width",Me().lgw),F(He,"fill",ze().faceColor),F(He,"stroke",ze().lineColor),F(He,"stroke-width",ze().lineWidth)}),I(xe,it)};let o=G(e,"limX",19,()=>[0,1]),a=G(e,"limY",19,()=>[0,1]),c=G(e,"margins",19,()=>[1,1.1,.55,.6]),v=G(e,"downloadLinks",3,"none"),u=G(e,"fileName",3,"plot"),f=G(e,"pngWidth",3,8),d=G(e,"pngHeight",3,8),m=G(e,"pngRes",3,300),h=G(e,"clipboardWidth",3,1200),g=G(e,"clipboardHeight",3,800),p=G(e,"onclick",3,null),y=G(e,"onmousemove",3,null),b=G(e,"onmousedown",3,null),E=G(e,"onmouseup",3,null);function A(xe,ze){if(ze&&xe.target.id=="axes-box"){const Me=wa([xe.offsetX-s(B)],s(X))[0],it=wa([xe.offsetY-s(W)],s($))[0];ze(Me,it)}}const N="plottingArea"+Math.round(Math.random()*1e4);let w=ne(0),_=ne(0),z=ne(0);const M=k(()=>({plot:sf(s(_),s(z)),x:Ca(s(_)),y:Ca(s(z))})),C=k(()=>c().map(xe=>xe*Qu[s(M).plot])),P=k(()=>ef[s(M).plot]),D=k(()=>ll[s(M).plot]),R=k(()=>kn[s(M).plot]),Y=k(()=>s(ie).show&&s(ie).label!==""?s(P)*1.5:0),B=k(()=>s(_e).show&&s(_e).label!==""?s(P)*1.5:0),W=k(()=>e.title&&e.title!==""?s(P)*1.5:0),T=k(()=>s(_)>s(B)?s(_)-s(B):0),S=k(()=>s(z)>s(Y)+s(W)?s(z)-s(Y)-s(W):0),V=k(()=>s(S)-s(C)[0]-s(C)[2]),j=k(()=>s(T)-s(C)[1]-s(C)[3]),O=k(()=>ba(o(),2)&&ba(a(),2)&&s(T)>s(C)[1]+s(C)[3]&&s(S)>s(C)[0]+s(C)[2]),X=k(()=>s(O)?{coords:[s(j)/(o()[1]-o()[0]),o()[0],s(C)[1]],objects:[s(j)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),$=k(()=>s(O)?{coords:[-s(V)/(a()[1]-a()[0]),a()[1],s(C)[2]],objects:[s(V)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ee=k(()=>s(V)*.5+s(W)+s(C)[2]),te=k(()=>s(j)*.5+s(B)+s(C)[1]),se=k(()=>s(O)?ot(o(),s(X)):[0,1]),be=k(()=>s(O)?ot(a(),s($)):[1,0]),Ee=k(()=>Cn(e.title)),pe=k(()=>s(Ee)?s(Ee).length===e.title.left?1:1.4:0);let Ve=ne(Xe({show:!1})),ie=ne(Xe({show:!1,error:""})),_e=ne(Xe({show:!1,error:""})),Ae=ne(Xe({show:!1,colmap:null,breaks:null})),ae=ne(Xe({show:!1,items:null,position:null}));const we=k(()=>s(O)&&s(Ae)&&s(Ae).show?gf(s(Ae)):null),ce=k(()=>s(O)&&s(ie).show?mf(o(),a(),s(M),s($),s(ie)):null),Le=k(()=>s(O)&&s(_e).show?hf(o(),a(),s(M),s(X),s(_e)):null),ke=k(()=>s(O)&&s(we)?pf(s(we),s(j),s(C),s(M)):null),Ne=k(()=>s(O)&&s(ae)&&s(ae).show&&s(se)?_f(s(ae),s(se),s(be),s(P),s(D)):null);Ti("axes",{setBox:xe=>H(Ve,xe,!0),setXAxis:xe=>H(ie,xe,!0),setYAxis:xe=>H(_e,xe,!0),setColmapLegend:xe=>H(Ae,xe,!0),setGroupLegend:xe=>H(ae,xe,!0),scales:()=>s(M),tX:()=>s(X),tY:()=>s($),limX:()=>o(),limY:()=>a()});var at=Zf();let nr;var Qe=q(at),ft=L(q(Qe));{var tt=xe=>{var ze=Bf(),Me=q(ze);{var it=He=>{var Re=Ff();F(Re,"dx",0),F(Re,"dy",0);var _t=q(Re);kt(_t,()=>s(ie).label,!0),re(()=>{F(Re,"x",s(te)),F(Re,"y",s(S)+s(W))}),I(He,Re)};U(Me,He=>{s(ie).show&&s(ie).label&&s(ie).label!==""&&He(it)})}var Et=L(Me);{var sr=He=>{var Re=Of();F(Re,"dx",0),F(Re,"dy",0);var _t=q(Re);kt(_t,()=>s(_e).label,!0),re(()=>{F(Re,"x",s(P)/1.1*s(_e).labelHeight),F(Re,"y",s(ee)),F(Re,"transform",`rotate(-90, ${s(P)*s(_e).labelHeight/1.1}, ${s(ee)})`)}),I(He,Re)};U(Et,He=>{s(_e).show&&s(_e).label&&s(_e).label!==""&&He(sr)})}var It=L(Et);{var St=He=>{var Re=Vf();F(Re,"dx",0),F(Re,"dy",0);var _t=q(Re);kt(_t,()=>s(Ee),!0),re(()=>{F(Re,"x",s(te)),F(Re,"y",s(P)*s(pe))}),I(He,Re)};U(It,He=>{s(Ee)&&s(Ee)!==""&&He(St)})}I(xe,ze)};U(ft,xe=>{s(O)&&xe(tt)})}var Gt=L(ft),Nn=q(Gt),vs=q(Nn);F(vs,"id",N);var on=q(vs),Sl=L(Nn);{var Ml=xe=>{var ze=Kf(),Me=Q(ze);{var it=Be=>{var he=Yf(),wt=q(he);t(wt,()=>s(ce),()=>s(ie)),I(Be,he)};U(Me,Be=>{s(ie).show&&s(ce)&&Be(it)})}var Et=L(Me);{var sr=Be=>{var he=Wf(),wt=q(he);t(wt,()=>s(Le),()=>s(_e)),I(Be,he)};U(Et,Be=>{s(_e).show&&s(Le)&&Be(sr)})}var It=L(Et),St=q(It);{var He=Be=>{var he=Uf();he.__keydown=[ss,A,p],he.__click=[ss,A,p],he.__mousemove=[Ma,A,y],he.__mousedown=[Na,A,b],he.__mouseup=[Sa,A,E],re(()=>{F(he,"stroke",s(Ve).lineColor),F(he,"stroke-width",`${s(Ve).lineWidth??""}px`),F(he,"x",s(se)[0]),F(he,"y",s(be)[1]),F(he,"width",s(se)[1]-s(se)[0]),F(he,"height",s(be)[0]-s(be)[1])}),I(Be,he)},Re=Be=>{var he=Hf();he.__keydown=[ss,A,p],he.__click=[ss,A,p],he.__mousemove=[Ma,A,y],he.__mousedown=[Na,A,b],he.__mouseup=[Sa,A,E],re(()=>{F(he,"x",s(se)[0]),F(he,"y",s(be)[1]),F(he,"width",s(se)[1]-s(se)[0]),F(he,"height",s(be)[0]-s(be)[1])}),I(Be,he)};U(St,Be=>{s(Ve).show?Be(He):Be(Re,!1)})}var _t=L(It);F(_t,"clip-path",`url(#${N})`);var gt=q(_t);xr(gt,()=>e.children??pt);var ct=L(_t);{var $e=Be=>{var he=Gf(),wt=q(he);Nf(wt,()=>s(we),()=>s(ke)),I(Be,he)};U(ct,Be=>{s(ke)&&Be($e)})}var Xt=L(ct);{var Dr=Be=>{var he=Xf(),wt=q(he);l(wt,()=>s(ae),()=>s(Ne)),I(Be,he)};U(Xt,Be=>{s(Ne)&&Be(Dr)})}I(xe,ze)};U(Sl,xe=>{s(O)&&xe(Ml)})}$r(Qe,xe=>H(w,xe),()=>s(w));var Tl=L(Qe,2);{var zl=xe=>{var ze=Jf();I(xe,ze)},Pl=xe=>{var ze=Qf(),Me=q(ze);Me.__click=[za,w,u],Me.__keydown=[za,w,u];var it=L(Me,2);it.__click=[Pa,w,u,f,d,m],it.__keydown=[Pa,w,u,f,d,m];var Et=L(it,2);Et.__click=[Ta,w,h,g],Et.__keydown=[Ta,w,h,g],I(xe,ze)};U(Tl,xe=>{s(O)?xe(Pl,!1):xe(zl)})}re(xe=>{nr=vt(at,1,`plot-container show-download-links-${v()??""}`,"svelte-1jtdxd0",nr,xe),lt(Qe,`font-size:${s(P)??""}px`),F(Gt,"x",s(B)),F(Gt,"y",s(W)),F(Gt,"width",s(T)),F(Gt,"height",s(S)),F(on,"x",s(se)[0]),F(on,"y",s(be)[1]),F(on,"width",s(se)[1]-s(se)[0]),F(on,"height",s(be)[0]-s(be)[1])},[()=>({"plot-error":!s(O)})]),zo(Qe,"clientWidth",xe=>H(_,xe)),zo(Qe,"clientHeight",xe=>H(z,xe)),I(r,at),ve()}rt(["keydown","click","mousemove","mousedown","mouseup"]);function ev(r,e){fe(e,!0);let t=G(e,"tickLabels",7),l=G(e,"las",3,1),o=G(e,"whole",3,!1),a=G(e,"show",3,!0),c=G(e,"showGrid",3,!1);const v=Tt("axes");ue(()=>{const u=Cn(e.label),f=u?u.length===e.label.length?1:1.4:0;let d,m="";e.ticks&&([d,m]=Ea(e.ticks,v.limX())),!m&&t()&&(h=>{let[g,p]=h;t(g),m=p})(ka(t(),d)),v.setXAxis({show:a(),error:m,label:u,ticks:d,labelHeight:f,showGrid:c(),las:l(),whole:o(),tickLabels:t()})}),ve()}function tv(r,e){fe(e,!0);let t=G(e,"tickLabels",7),l=G(e,"las",3,1),o=G(e,"whole",3,!1),a=G(e,"show",3,!0),c=G(e,"showGrid",3,!1);const v=Tt("axes");ue(()=>{const u=Cn(e.label),f=u?u.length===e.label.length?1:1.4:0;let d,m="";e.ticks&&([d,m]=Ea(e.ticks,v.limY())),!m&&t()&&(h=>{let[g,p]=h;t(g),m=p})(ka(t(),d)),v.setYAxis({show:a(),error:m,label:u,ticks:d,labelHeight:f,showGrid:c(),las:l(),whole:o(),tickLabels:t(),pos:4})}),ve()}function rv(r,e){fe(e,!0);let t=G(e,"lineWidth",3,1),l=G(e,"lineColor",3,"#606060");const o=Tt("axes");ue(()=>{o.setBox({show:!0,lineWidth:t(),lineColor:l()})}),ve()}var nv=(r,e)=>jr(r,"rect",e.onclick),sv=me("<rect></rect>"),lv=me("<g></g>");function hl(r,e){fe(e,!0);let t=G(e,"faceColor",19,()=>bt.PRIMARY),l=G(e,"lineColor",19,t),o=G(e,"lineWidth",3,1),a=G(e,"className",3,"series-rect");const c=k(()=>Nt(e.left,"Rectangles (left)")),v=k(()=>s(c)?Nt(e.top,"Rectangles (top)",s(c).length):null),u=k(()=>s(v)?typeof e.width!="object"?ge.fill(e.width,s(c).length):e.width:null),f=k(()=>s(v)?typeof e.height!="object"?ge.fill(e.height,s(c).length):e.height:null),d=Tt("axes"),m=k(()=>s(c)?ot(s(c),d.tX()):null),h=k(()=>s(v)?ot(s(v),d.tY()):null),g=k(()=>s(u)?al(s(u),d.tX()):null),p=k(()=>s(f)?al(s(f),d.tY()):null),y=k(()=>`fill:${t()};stroke:${l()};stroke-width:${o()}px;`),b=k(()=>s(m)&&s(h)&&s(g)&&s(p)&&s(g).length===s(m).length&&s(p).length===s(m).length);var E=de(),A=Q(E);{var N=w=>{var _=lv();_.__click=[nv,e],Ie(_,21,()=>e.left,Fe,(z,M,C)=>{var P=sv();re(()=>{F(P,"x",s(m)[C]),F(P,"y",s(h)[C]),F(P,"width",s(g)[C]),F(P,"height",s(p)[C])}),I(z,P)}),re(()=>{vt(_,0,`series ${a()??""}`),lt(_,s(y))}),I(w,_)};U(A,w=>{s(b)&&w(N)})}I(r,E),ve()}rt(["click"]);var ov=(r,e)=>jr(r,"line",e.onclick),av=me("<line></line>"),iv=me('<g class="series series-segment"></g>');function tr(r,e){fe(e,!0);let t=G(e,"lineColor",19,()=>bt.PRIMARY),l=G(e,"lineType",3,1),o=G(e,"lineWidth",3,1);const a=k(()=>Nt(e.xStart,"Segments")),c=k(()=>s(a)?Nt(e.yStart,"Segments",s(a).length):null),v=k(()=>s(c)?Nt(e.xEnd,"Segments",s(a).length):null),u=k(()=>s(v)?Nt(e.yEnd,"Segments",s(a).length):null),f=Tt("axes"),d=k(()=>s(a)?ot(s(a),f.tX()):null),m=k(()=>s(v)?ot(s(v),f.tX()):null),h=k(()=>s(c)?ot(s(c),f.tY()):null),g=k(()=>s(u)?ot(s(u),f.tY()):null),p=k(()=>`stroke:${t()};stroke-width: ${o()}px;stroke-dasharray:${kn[f.scales().plot][l()-1]}`),y=k(()=>s(d)&&s(m)&&s(h)&&s(g));var b=de(),E=Q(b);{var A=N=>{var w=iv();w.__click=[ov,e],Ie(w,21,()=>s(d),Fe,(_,z,M)=>{var C=av();re(()=>{F(C,"x1",s(d)[M]),F(C,"x2",s(m)[M]),F(C,"y1",s(h)[M]),F(C,"y2",s(g)[M])}),I(_,C)}),re(()=>lt(w,s(p))),I(N,w)};U(E,N=>{s(y)&&N(A)})}I(r,b),ve()}rt(["click"]);var cv=(r,e)=>jr(r,"text",e.onclick),uv=me("<text><!></text>"),fv=me("<text><!></text>"),vv=me("<text><!></text>"),dv=me('<g class="series series-textlabels"><!></g>');function mv(r,e){fe(e,!0);let t=G(e,"pos",3,0),l=G(e,"faceColor",19,()=>bt.PRIMARY_TEXT),o=G(e,"lineColor",3,"transparent"),a=G(e,"lineWidth",3,0),c=G(e,"textSize",3,1),v=G(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],f=k(()=>Nt(e.xValues,"TextLabels")),d=k(()=>s(f)?Nt(e.yValues,"TextLabels",s(f).length):null),m=k(()=>s(d)?Array.isArray(e.labels)&&e.labels.length!==s(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=k(()=>s(m)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),g=Tt("axes"),p=k(()=>s(f)&&s(h)!==null?ot(s(f),g.tX()):null),y=k(()=>s(d)&&s(p)?ot(s(d),g.tY()):null),b=k(()=>ol[g.scales().plot]),E=k(()=>[0,0,-s(b),0,s(b),s(b)]),A=k(()=>[0,s(b),0,-s(b),0,s(b)]),N=k(()=>`fill:${l()};stroke-width:${a()}px;stroke:${o()};font-size:${c()}em;`),w=k(()=>s(p)&&s(y)&&s(h)!==null&&s(m)&&s(p).length===s(y).length);var _=de(),z=Q(_);{var M=C=>{var P=dv();P.__click=[cv,e];var D=q(P);{var R=B=>{var W=de(),T=Q(W);Ie(T,17,()=>s(p),Fe,(S,V,j)=>{var O=uv();F(O,"data-id",j);var X=q(O);kt(X,()=>e.labels,!0),re(()=>{F(O,"x",s(p)[j]),F(O,"y",s(y)[j]),F(O,"dx",s(E)[t()]),F(O,"dy",s(A)[t()]),F(O,"transform",v()!==void 0?`rotate(${v()}, ${s(p)[j]+s(E)[t()]}, ${s(y)[j]+s(A)[t()]})`:""),F(O,"text-anchor",u[t()[j]])}),I(S,O)}),I(B,W)},Y=(B,W)=>{{var T=V=>{var j=de(),O=Q(j);Ie(O,17,()=>s(p),Fe,(X,$,ee)=>{var te=fv();F(te,"data-id",ee);var se=q(te);kt(se,()=>e.labels[ee],!0),re(()=>{F(te,"x",s(p)[ee]),F(te,"y",s(y)[ee]),F(te,"dx",s(E)[t()[ee]]),F(te,"dy",s(A)[t()[ee]]),F(te,"transform",v()!==void 0?`rotate(${v()}, ${s(p)[ee]+s(E)[t()]}, ${s(y)[ee]+s(A)[t()]})`:""),F(te,"text-anchor",u[t()[ee]])}),I(X,te)}),I(V,j)},S=V=>{var j=de(),O=Q(j);Ie(O,17,()=>s(p),Fe,(X,$,ee)=>{var te=vv();F(te,"data-id",ee);var se=q(te);kt(se,()=>e.labels[ee],!0),re(()=>{F(te,"x",s(p)[ee]),F(te,"y",s(y)[ee]),F(te,"dx",s(E)[t()]),F(te,"dy",s(A)[t()]),F(te,"transform",v()!==void 0?`rotate(${v()}, ${s(p)[ee]+s(E)[t()]}, ${s(y)[ee]+s(A)[t()]})`:""),F(te,"text-anchor",u[t()])}),I(X,te)}),I(V,j)};U(B,V=>{Array.isArray(t())||ArrayBuffer.isView(t())?V(T):V(S,!1)},W)}};U(D,B=>{typeof e.labels=="string"?B(R):B(Y,!1)})}re(()=>lt(P,s(N))),I(C,P)};U(z,C=>{s(w)&&C(M)})}I(r,_),ve()}rt(["click"]),rt(["click"]);var hv=(r,e)=>jr(r,"text",e.onclick),gv=me("<text> </text>"),pv=me('<g text-anchor="middle"></g>');function Ia(r,e){fe(e,!0);let t=G(e,"marker",3,1),l=G(e,"faceColor",3,"transparent"),o=G(e,"lineColor",19,()=>bt.PRIMARY),a=G(e,"lineWidth",3,1),c=G(e,"markerSize",3,1);const v=k(()=>typeof t()!="number"||t()<1||t()>En.length?(console.error('Points: parameter "marker" must be a number from 1 to '+En.length+"."),null):En[t()-1]),u=k(()=>Nt(e.xValues,"Points")),f=k(()=>s(u)?Nt(e.yValues,"Points",s(u).length):null),d=Tt("axes"),m=k(()=>s(u)?ot(s(u),d.tX()):null),h=k(()=>s(m)&&s(f)?ot(s(f),d.tY()):null),g=k(()=>["＋","✳","✕"].includes(s(v))?`fill:${o()&&o()!=="transparent"?o():l()};stroke-width:0px;font-size:${c()}em;`:`fill:${l()};stroke-width:${a()}px;stroke:${o()}; font-size:${c()}em;`),p=k(()=>["◼","⬥","＋","✳","✕"].includes(s(v))?"series-points2":"series-points1"),y=k(()=>s(m)&&s(h)&&s(m).length===s(h).length);var b=de(),E=Q(b);{var A=N=>{var w=pv();w.__click=[hv,e],Ie(w,21,()=>s(m),Fe,(_,z,M)=>{var C=gv(),P=q(C);re(()=>{F(C,"x",s(m)[M]),F(C,"y",s(h)[M]),le(P,s(v))}),I(_,C)}),re(()=>{vt(w,0,`series series-points ${s(p)??""}`),lt(w,s(g))}),I(N,w)};U(E,N=>{s(y)&&N(A)})}I(r,b),ve()}rt(["click"]);var bv=(r,e)=>jr(r,"polyline",e.onclick),yv=me('<g class="series series-line"><polyline class="line"></polyline></g>');function Ht(r,e){fe(e,!0);let t=G(e,"lineColor",19,()=>bt.PRIMARY),l=G(e,"lineType",3,1),o=G(e,"lineWidth",3,1);const a=k(()=>Nt(e.xValues,"Lines")),c=k(()=>s(a)?Nt(e.yValues,"Lines",s(a).length):null),v=Tt("axes"),u=k(()=>s(a)&&s(c)?ul(s(a),s(c),v.tX(),v.tY()):null),f=k(()=>`fill:transparent;stroke:${t()};stroke-width: ${o()}px; stroke-dasharray:${kn[v.scales().plot][l()-1]}`);var d=de(),m=Q(d);{var h=g=>{var p=yv();p.__click=[bv,e];var y=q(p);re(()=>{lt(p,s(f)),F(y,"points",s(u))}),I(g,p)};U(m,g=>{s(u)&&g(h)})}I(r,d),ve()}rt(["click"]);var _v=(r,e)=>jr(r,"polyline",e.onclick),wv=me('<polyline class="line"></polyline>'),xv=me('<g class="series series-multiline"></g>');function kv(r,e){fe(e,!0);let t=G(e,"lineColor",19,()=>bt.PRIMARY),l=G(e,"lineType",3,1),o=G(e,"lineWidth",3,1);const a=k(()=>Nt(e.xValues,"Multilines")),c=k(()=>s(a)?hr(e.yValues)?(s(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),v=Tt("axes"),u=k(()=>{if(!s(a)||!s(c))return null;const g=new Array(s(c).ncols);for(let p=0;p<g.length;p++)g[p]=ul(s(a),s(c).getcolumn(p+1),v.tX(),v.tY());return g}),f=k(()=>`fill:transparent;stroke:${t()};stroke-width: ${o()}px; stroke-dasharray:${kn[v.scales().plot][l()-1]}`);var d=de(),m=Q(d);{var h=g=>{var p=xv();p.__click=[_v,e],Ie(p,21,()=>s(u),Fe,(y,b)=>{var E=wv();re(()=>F(E,"points",s(b))),I(y,E)}),re(()=>lt(p,s(f))),I(g,p)};U(m,g=>{s(u)&&s(u).length>0&&g(h)})}I(r,d),ve()}rt(["click"]);function sn(r,e){fe(e,!0);let t=G(e,"show",3,!0),l=G(e,"position",3,"topleft"),o=G(e,"lineColor",19,()=>bt.LEGEND),a=G(e,"lineWidth",3,1),c=G(e,"faceColor",3,"#fff"),v=G(e,"fontSize",3,.85);function u(m){return typeof m!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(m)?m:(console.error('Legend: wrong value of "position" property'),null)}function f(m){if(!m||!Array.isArray(m)||m.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let h=0;h<m.length;h++){const g=m[h];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=Cn(g.label),y=p.length===g.label?1:1.4;g.label=p,g.labelHeight=y,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(h+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:bt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=En.length||console.error('Legend: parameter "marker" for legend item '+(h+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:bt.PRIMARY)}return m}const d=Tt("axes");ue(()=>{const m=f(e.items),h=u(l());d.setGroupLegend(m&&h?{show:t(),position:l(),items:e.items,lineColor:o(),faceColor:c(),lineWidth:a(),fontSize:v()}:{show:!1,position:null,items:null})}),ve()}function La(r,e){fe(e,!0);let t=G(e,"show",3,!0),l=G(e,"labels",3,null),o=G(e,"labelColor",19,()=>bt.CLEGEND_LABELS),a=G(e,"fontSize",3,.85);const c=Tt("axes");ue(()=>{c.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:l(),labelColor:o(),fontSize:a()})}),ve()}function Ev(r,e,t,l){e===void 0&&(e=!0),t===void 0&&(t=!1),l===void 0&&(l=!1);function o(u,f,d,m){if(typeof f=="boolean")return f?u.apply(d,2):Je([m]).rep(u.ncols);if(!Se(f))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(f.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return f}const a=o(r,e,pn,0),c=o(r,t,Os,1),v=Dt.zeros(r.nrows,r.ncols);for(let u=1;u<=r.ncols;u++){const f=r.getcolref(u),d=v.getcolref(u),m=a.v[u-1],h=1/c.v[u-1];for(let g=0;g<r.nrows;g++)d[g]=(f[g]-m)*h}return l?[v,a,c]:v}const Cv=r=>r;function Av(r,{delay:e=0,duration:t=400,easing:l=Cv}={}){const o=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:l,css:a=>`opacity: ${a*o}`}}var Nv=J('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function Ra(r,e){fe(e,!0);function t(f){f.key==="Escape"&&e.closeModal()}var l=Nv();Pr("keydown",_s,t);var o=q(l),a=q(o),c=q(a);c.__click=function(...f){var d;(d=e.closeModal)==null||d.apply(this,f)};var v=L(a,2),u=q(v);xr(u,()=>e.children),_c(7,l,()=>Av),I(r,l),ve()}rt(["click"]);const Sv=[1,1.1,.45,.4],Cr={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",aliens:"#2679B2",external:"#D22C2F"},Ft={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",test:"#2679B2",alt:"#2679B2",new:"#2679B2"},qr={cal:"#f0f8ff",pv:"#fff8f0",target:"#f0f8ff",test:"#f0f8ff",alt:"#f0f8ff",new:"#f0f8ff"},ja="#a0a0a0",qa="#909090",ls="#909090",os=8,Mv=8,Tv=8,zv=600;function Da(r,e){return!r||!e||e<0||e>r.ncomp?"":`PC${e} (${(r.stat.expvar[e-1]*100).toFixed(1)}%)`}function Pv(r,e){if(r.length===e.length)return r;const t=e.length,l=new r.constructor(t);for(let o in e)l[o]=r[e[o]];return l}function Iv(r,e){let t=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;for(let c=0;c<r.length;c++)l=Math.min(l,r[c]),t=Math.max(t,r[c]);let o=fl(void 0,[l,t],e-1,!0,!1,0).v;const a=o[1]-o[0];if(o[0]>l){const c=o[0]-a;o=[c<l?c:l,...o]}if(o[o.length-1]<t){const c=o[o.length-1]+a;o=[...o,c>t?c:t]}return o}function Lv(r){const e=r.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const t=dl(e);return r.reduce((o,a,c)=>(o[a]=t[c],o),{})}function Rv(r,e,t){const l=e.length,o=new Array(r.length),a=e[1]-e[0];for(let c=0;c<r.length;c++)for(let v=0;v<l-1;v++){const u=r[c]>=e[v],f=v===l-2?r[c]<e[v+1]+a:r[c]<e[v+1];if(u&&f){o[c]=t[v];break}}return o}function Fa(r,e,t,l,o="cal",a){if(!e)return null;let c,v,u,f,d;if(a){const m=a.values;c=a.labels;const h=a.classColmap;v=Object.keys(h).map(g=>h[g]),f=m.map(g=>h[g]),u=new Array(c.length+1).map((g,p)=>p-.5),d=null}else if(t==="groups"&&e.classNames){const m=Lv(e.classNames);v=Object.keys(m).map(h=>m[h]),c=e.classNames,f=e.classes.map(h=>m[h]),u=new Array(c.length+1).map((h,g)=>g-.5),d=null}else if(t==="variable"){const m=Pv(r.values.getcolref(l),e.objindices);d=r.varlabels[l-1],d.length>30&&(d=d.substring(0,29)+"..."),u=Iv(m,10),v=dl(u.length-1),f=Rv(m,u,v)}else c=null,u=null,v=null,f=Array(e.nrows).fill(Ft[o]);return{labels:c,map:v,breaks:u,colors:f,varname:d}}function jv(r,e,t=.95){const o=2*Math.PI/99,[a,c,v]=r,u=Math.sqrt((a+v)**2-4*(a*v-c*c));let f=.5*(a+v-u),d=.5*(a+v+u);if(f<d){let M=f;f=d,d=M}const m=Wt(t,2),h=Math.sqrt(m*f),g=Math.sqrt(m*d);let p;if(Math.abs(c)<1e-7)p=0;else{let M=-c/(a-f),C=1;const P=Math.sqrt(M*M+C*C);M=M/P,C=C/P,p=Math.atan2(C,M),p<0&&(p=p+2*Math.PI)}const y=Math.cos(p),b=Math.sin(p),E=ge.zeros(100),A=ge.zeros(100);let N=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,_=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY;for(let M=0;M<100;M++){const C=M*o,P=h*Math.cos(C),D=g*Math.sin(C),R=P*y-D*b+e[0],Y=P*b+D*y+e[1];E.v[M]=R,A.v[M]=Y,N=Math.min(N,R),w=Math.max(w,R),_=Math.min(_,Y),z=Math.max(z,Y)}return[E,A,N,w,_,z]}function qv(r,e,t,l,o,a){if(!r||!e||!t||!l||!o)return null;const c=r.length,v=l.length,u=new Array(v).fill(0),f=new Array(v*2).fill(0);for(let b=0;b<c;b++){const E=l.indexOf(t[b]);u[E]+=1,f[E*2]+=r.v[b],f[E*2+1]+=e.v[b]}for(let b=0;b<v;b++)f[b*2]=f[b*2]/u[b],f[b*2+1]=f[b*2+1]/u[b];const d=new Array(v*3).fill(0);for(let b=0;b<c;b++){const E=l.indexOf(t[b]),A=r.v[b]-f[E*2],N=e.v[b]-f[E*2+1];d[E*3]+=A*A,d[E*3+1]+=A*N,d[E*3+2]+=N*N}let m=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;const y=Array(v);for(let b=0;b<v;b++){const[E,A,N,w,_,z]=jv([d[b*3]/(u[b]-1),d[b*3+1]/(u[b]-1),d[b*3+2]/(u[b]-1)],[f[b*2],f[b*2+1]],a);y[b]={x:E,y:A,c:o[b]},m=Math.min(m,N),h=Math.max(h,w),g=Math.min(g,_),p=Math.max(p,z)}return{ellipses:y,xRange:[m,h],yRange:[g,p]}}function Oa(r,e,t,l){if(!r||!e)return null;const o=r.length;let a=ge.zeros(o),c=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY;if(l==="log")for(let u=0;u<o;u++){const f=Math.log(1+r[u]/t);a.v[u]=f,c=Math.max(c,f),v=Math.min(v,f)}else for(let u=0;u<o;u++){const f=r[u]/t;a.v[u]=f,c=Math.max(c,f),v=Math.min(v,f)}return{values:a,min:v,max:c}}function Va(r,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[r]+", "+(e==="log"?"log(1 + "+r+"/"+r+"0)":r+"/"+r+"0")}function Ba(r,e,t,l){const a=e+t,v=Wt(r,a)/t,u=-e/t,f=-v/u,d=ge.seq(0,f*1,f/100),m=d.apply(h=>h*u+v);return{x:l==="log"?d.apply(h=>Math.log(1+h)):d,y:l==="log"?m.apply(h=>Math.log(1+h)):m}}var Dv=J("<!> <!> <!> <!>",1);function cr(r,e){let t=G(e,"whole",3,!1),l=Cc(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);$f(r,Ir({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",margins:Sv,pngWidth:Mv,pngHeight:Tv,pngRes:zv},()=>l,{children:(o,a)=>{var c=Dv(),v=Q(c);xr(v,()=>e.children);var u=L(v,2);ev(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var f=L(u,2);tv(f,{showGrid:!0,get label(){return e.yLabel}});var d=L(f,2);rv(d,{}),I(o,c)},$$slots:{default:!0}}))}function Fv(r,e){if(r.target.tagName!=="rect"){H(e,-1);return}const t=Array.from(r.target.parentNode.children).indexOf(r.target);if(t<0){H(e,-1);return}s(e)!==t&&H(e,t,!0)}var Ov=J("<!> <!> <!>",1),Vv=J("<!> <!> <!> <!> <!>",1),Bv=J('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function gl(r,e){fe(e,!0);let t=G(e,"outliers",19,()=>[]),l=G(e,"getter",3,Ke),o=ne("residual"),a=ne(-1);const c=k(()=>e.model.npred?e.model.npred:e.model.ncols);function v(R){const Y=e.model.exclvars&&e.model.exclvars.length>0?iu(R,e.model.exclvars):R;if(!Y.nresp||Y.nresp<1)return Y.values;const B=Y.nresp*Y.values.nrows,W=Y.values.nrows,T=Y.values.ncols-Y.nresp;return new Dt(Y.values.v.subarray(B),W,T)}const u=k(()=>s(m)&&s(a)>=0?s(m).values.v[s(a)]:null),f=k(()=>s(_)&&s(a)>=0?s(_).sel.v[s(a)]:null),d=k(()=>e.model&&s(a)>=0?e.model.varlabels[s(a)]:null),m=k(()=>{if(!e.model)return null;const R=e.model.nresp?e.model.nresp:0,Y=Je(e.model.varvalues.filter((O,X)=>X>=R)),B=Y.length,W=(Y.v[1]-Y.v[0])/2,T=(Y.v[B-1]-Y.v[B-2])/2,S=[Y.v[0],Y.v[B-1]],V=[S[0]-W,S[1]+T],j=(S[1]-S[0])/B;return{values:Y,lim:V,width:j,hwidth:j*.5}}),h=k(()=>s(m)?s(m).values.apply(R=>R-s(m).hwidth):null),g=k(()=>{if(!e.dataset||!e.model)return null;const R=v(e.dataset,e.model.exclvars),Y=new ge(l()(e.model,"mX")),B=new ge(l()(e.model,"sX"));return Ev(R,Y,B).t()}),p=k(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new Dt(l()(e.model,"P",e.ncomp),s(c),e.ncomp).t():null),y=k(()=>s(g)&&s(p)?s(p).dot(s(g)):null),b=k(()=>s(y)?Qo(s(p),s(y)):null),E=k(()=>s(b)?s(g).subtract(s(b)):null);let A=k(()=>s(b)?s(b).getcolumn(e.selected+1):null),N=k(()=>s(E)?s(E).getcolumn(e.selected+1):null),w=k(()=>s(g)?s(g).getcolumn(e.selected+1):null),_=k(()=>{if(!s(A)||!s(N)||!s(w))return null;const R=s(o)==="explained"?{all:s(b),sel:s(A),label:"Explained part, TP^T"}:s(o)==="residual"?{all:s(E),sel:s(N),label:"Residuals, E"}:{all:s(g),sel:s(w),label:"Preprocessed data, X"},Y=en(R.all.v),B=Y[1]-Y[0],W=[Y[0]-B/50,Y[1]+B/12],T=ge.fill(Y[1],R.sel.length);return R.lim=W,R.top=T,R.height=B,R});const z=k(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),M=k(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var C=de(),P=Q(C);{var D=R=>{Ra(R,{get closeModal(){return e.closeModal},children:(Y,B)=>{var W=Bv(),T=q(W);T.__click=[Fv,a];var S=q(T);cr(S,{get title(){return s(z)},get yLabel(){return s(_).label},get xLabel(){return s(M)},get limY(){return s(_).lim},get limX(){return s(m).lim},fileName:"plot-contributions",children:(O,X)=>{var $=Vv(),ee=Q($);kv(ee,{get xValues(){return s(m).values},get yValues(){return s(_).all},lineColor:"#e0e0e0"});var te=L(ee,2);{var se=ie=>{var _e=de(),Ae=Q(_e);Ie(Ae,17,t,Fe,(ae,we)=>{const ce=k(()=>s(_).all.getcolumn(s(we)+1));Ht(ae,{get xValues(){return s(m).values},get yValues(){return s(ce)},lineColor:"#ffdd88"})}),I(ie,_e)};U(te,ie=>{t().length>0&&ie(se)})}var be=L(te,2);Ht(be,{get xValues(){return s(m).values},get yValues(){return s(_).sel},lineColor:"crimson"});var Ee=L(be,2);hl(Ee,{get left(){return s(h)},get top(){return s(_).top},get height(){return s(_).height},get width(){return s(m).width},faceColor:"transparent",borderColor:"transparent"});var pe=L(Ee,2);{var Ve=ie=>{var _e=Ov(),Ae=Q(_e);const ae=k(()=>[s(u)]),we=k(()=>[s(_).top.v[0]]),ce=k(()=>[s(d)]);mv(Ae,{get xValues(){return s(ae)},get yValues(){return s(we)},get labels(){return s(ce)},pos:3,textSize:.85});var Le=L(Ae,2);const ke=k(()=>[s(u)]),Ne=k(()=>[s(f)]);Ia(Le,{get xValues(){return s(ke)},get yValues(){return s(Ne)},faceColor:"crimson",lineColor:"crimson"});var at=L(Le,2);const nr=k(()=>[s(h).v[s(a)]]),Qe=k(()=>[s(_).top.v[s(a)]]);hl(at,{get left(){return s(nr)},get top(){return s(Qe)},get height(){return s(_).height},get width(){return s(m).width},faceColor:"#ff000015"}),I(ie,_e)};U(pe,ie=>{s(a)>=0&&ie(Ve)})}I(O,$)},$$slots:{default:!0}});var V=L(T,4),j=q(V);ye(j,{label:"",children:(O,X)=>{nt(O,{id:"type",options:["full","explained","residual"],get value(){return s(o)},set value($){H(o,$,!0)}})},$$slots:{default:!0}}),I(Y,W)},$$slots:{default:!0}})};U(P,R=>{s(m)&&s(_)&&R(D)})}I(r,C),ve()}rt(["click"]);var Yv=J("<!> <!> <!> <!>",1),Wv=J("<p> </p>"),Uv=J("<!> <p>Computing global model...</p>",1),Hv=J('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Gv=J('<div class="buttons"><!> <!></div>'),Xv=J("<!> <!>",1),Kv=J("<p> </p>"),Jv=J("<!> <!> <!> <!>",1);function Qv(r,e){fe(e,!0);let t=G(e,"outliers",19,()=>[]),l=G(e,"resobj",15),o=G(e,"model",15),a=G(e,"downloadModel",3,null),c=G(e,"downloadResults",3,null),v=ne("neutral"),u=ne(""),f=ne(1),d=ne(!0),m=ne(!1),h=ne(void 0);async function g(D,R,Y,B){H(h,e.WASM().then(W=>{H(v,"computing");const T=Qc(W,D.values,R,Y,B,t());T.hash=Zs(),T.exclvars=[],T.varlabels=D.varlabels,T.varindices=D.varindices,T.varvalues=D.varvalues,T.varvaluesName=D.varvaluesName,T.varvaluesUnits=D.varvaluesUnits,T.varrev=D.varrev,T.prep=[];const S=$s(W,T,D,t());o(T),l(S),H(v,"success")}).catch(W=>{console.error(W),o(null),H(v,"error"),H(u,W,!0)}),!0)}function p(D){H(v,"neutral"),H(u,null),g(e.dataset,s(f),s(d),s(m))}function y(){H(v,"neutral"),H(h,null),l(null),o(null),H(u,null)}let b=k(()=>e.dataset?Math.min(e.dataset.values.nrows-2-t().length,e.dataset.values.ncols-1,50):null);ue(()=>{e.dataset===null&&y()}),ue(()=>{H(f,s(b)?Math.min(s(b),20):null,!0)});var E=Jv(),A=Q(E);{var N=D=>{var R=Yv(),Y=Q(R);ye(Y,{name:"ncomp",label:"# of PCs",children:(S,V)=>{ua(S,{id:"ncomp",min:1,get max(){return s(b)},step:1,decNum:0,get value(){return s(f)},set value(j){H(f,j,!0)}})},$$slots:{default:!0}});var B=L(Y,2);ye(B,{name:"center",label:"Center",children:(S,V)=>{er(S,{id:"center",options:["no","yes"],get value(){return s(d)},set value(j){H(d,j,!0)}})},$$slots:{default:!0}});var W=L(B,2);ye(W,{name:"scale",label:"Scale",children:(S,V)=>{er(S,{id:"scale",options:["no","yes"],get value(){return s(m)},set value(j){H(m,j,!0)}})},$$slots:{default:!0}});var T=L(W,2);ye(T,{name:"create-model",label:" ",children:(S,V)=>{dt(S,{onclick:p,text:"Create model"})},$$slots:{default:!0}}),I(D,R)};U(A,D=>{e.dataset&&!o()&&s(v)!=="computing"&&D(N)})}var w=L(A,2);{var _=D=>{var R=de(),Y=Q(R);Is(Y,()=>s(h),B=>{ye(B,{name:"spinner",children:(W,T)=>{var S=Uv(),V=Q(S);rl(V),I(W,S)},$$slots:{default:!0}})},void 0,(B,W)=>{ye(B,{name:"error",status:"error",children:(T,S)=>{var V=Wv(),j=q(V);re(()=>le(j,s(W))),I(T,V)},$$slots:{default:!0}})}),I(D,R)};U(w,D=>{s(h)&&D(_)})}var z=L(w,2);{var M=D=>{var R=Xv(),Y=Q(R);ye(Y,{name:"info",children:(T,S)=>{var V=Hv(),j=Q(V),O=L(q(j)),X=L(j,2);nn(X,{onclick:y}),re(()=>le(O,` ${o().ncomp??""} PCs${o().center?", centered":""}${o().scale?", scaled":""}`)),I(T,V)},$$slots:{default:!0}});var B=L(Y,2);{var W=T=>{ye(T,{name:"download-buttons",label:"Download",children:(S,V)=>{var j=Gv(),O=q(j);dt(O,{onclick:()=>c()(l(),e.dataset,"train",t(),o()),text:"Results"});var X=L(O,2);dt(X,{onclick:()=>a()(o()),text:"Model"}),I(S,j)},$$slots:{default:!0}})};U(B,T=>{a()&&c()&&T(W)})}I(D,R)};U(z,D=>{o()&&D(M)})}var C=L(z,2);{var P=D=>{ye(D,{name:"error",status:"error",children:(R,Y)=>{var B=Kv(),W=q(B);re(()=>le(W,s(u))),I(R,B)},$$slots:{default:!0}})};U(C,D=>{(s(v)==="error"||s(u))&&D(P)})}I(r,E),ve()}var Zv=J("<!> <!> <!>",1),$v=J("<p> </p>"),ed=J("<!> <p>Computing PV-set...</p>",1),td=J('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),rd=J("<p> </p>"),nd=J("<!> <!> <!> <!>",1);function sd(r,e){fe(e,!0);let t=G(e,"outliers",19,()=>[]),l=G(e,"pvset",15),o=G(e,"pvres",15),a=ne("neutral"),c=ne(""),v=ne(Xe(["ven","rand","loo"])),u=ne("ven"),f=ne(void 0),d=e.calset.values.nrows-t().length,m=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(P=>P>=d/(d-e.model.ncomp-1)&&P<=d/2):[],h=ne(Xe(m.length>0?m[0]:0));ue(()=>{m.length===0&&(H(v,["loo"],!0),H(u,"loo"))});async function g(P,D,R){H(f,e.WASM().then(Y=>{const B=R.type=="loo"?0:R.type=="rand"?2:1,W=$c(Y,D,P.values,D.ncomp,R.nseg,B,0,t());l({classLabelsVarname:P.classLabelsVarname,classNames:P.classNames,dec:P.dec,fileName:P.fileName+"-pcv",hasClassNames:P.hasClassNames,hasLabels:P.hasLabels,header:P.header,labelsVarname:P.labelsVarname,classes:e.calres.classes,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:P.sep,values:W,varAxisTitle:P.varAxisTitle,varindices:D.varindices,varlabels:D.varlabels,varrev:D.varrev,varvalues:D.varvalues,varvaluesName:D.varvaluesName,varvaluesUnits:D.varvaluesUnits}),o($s(Y,D,l(),[]))}).catch(Y=>{console.error(Y),l(null),o(null),H(a,"error"),H(c,Y,!0)}),!0)}function p(P){H(a,"neutral"),H(c,""),g(e.calset,e.model,{type:s(u),nseg:s(h)})}function y(){H(a,"neutral"),H(c,""),H(f,null),l(null),o(null)}ue(()=>{e.model===null&&y()});var b=nd(),E=Q(b);{var A=P=>{var D=Zv(),R=Q(D);ye(R,{name:"split",label:"Split type:",children:(T,S)=>{nt(T,{id:"cvType",get options(){return s(v)},get value(){return s(u)},set value(V){H(u,V,!0)}})},$$slots:{default:!0}});var Y=L(R,2);{var B=T=>{ye(T,{name:"nseg",label:"Segments:",children:(S,V)=>{nt(S,{id:"nseg",options:m,get value(){return s(h)},set value(j){H(h,j,!0)}})},$$slots:{default:!0}})};U(Y,T=>{s(u)!=="loo"&&T(B)})}var W=L(Y,2);ye(W,{name:"run-button",label:" ",children:(T,S)=>{dt(T,{onclick:p,text:"Compute PV-set"})},$$slots:{default:!0}}),I(P,D)};U(E,P=>{e.model&&!l()&&s(a)!=="busy"&&P(A)})}var N=L(E,2);{var w=P=>{var D=de(),R=Q(D);Is(R,()=>s(f),Y=>{ye(Y,{name:"spinner",children:(B,W)=>{var T=ed(),S=Q(T);rl(S),I(B,T)},$$slots:{default:!0}})},void 0,(Y,B)=>{ye(Y,{name:"error",status:"error",children:(W,T)=>{var S=$v(),V=q(S);re(()=>le(V,s(B))),I(W,S)},$$slots:{default:!0}})}),I(P,D)};U(N,P=>{s(f)&&P(w)})}var _=L(N,2);{var z=P=>{ye(P,{name:"info",children:(D,R)=>{var Y=td(),B=Q(Y),W=L(q(B)),T=L(B,2);du(T,{onclick:()=>au(l(),e.calset.fileName+"-pv")});var S=L(T,2);nn(S,{onclick:y}),re(()=>le(W,` ${l().values.nrows??""} × ${l().values.ncols??""}, ${s(u)??""}
      ${s(u)!=="loo"?s(h)+" seg":""}`)),I(D,Y)},$$slots:{default:!0}})};U(_,P=>{l()&&P(z)})}var M=L(_,2);{var C=P=>{ye(P,{name:"error",status:"error",children:(D,R)=>{var Y=rd(),B=q(Y);re(()=>le(B,s(c))),I(D,Y)},$$slots:{default:!0}})};U(M,P=>{s(a)==="error"&&s(c)&&P(C)})}I(r,b),ve()}var ld=J('<tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Crit (outliers)</td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"> </td></tr>'),od=J('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">h</th><th class="svelte-kg0b31">q</th><th class="svelte-kg0b31">f</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">DoF (Nu)</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Mean (u0)</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"></td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Crit (extreme)</td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"> </td></tr><!></tbody></table>');function pl(r,e){fe(e,!0);let t=G(e,"isAlt",3,!1),l=k(()=>e.simca?e.simca.limType==="classic"?"c":"r":null),o=k(()=>e.model&&s(l)?Ke(e.model,s(l)+"Nh"):null),a=k(()=>e.model&&s(l)?Ke(e.model,s(l)+"Nq"):null),c=k(()=>e.model&&s(l)?Ke(e.model,s(l)+"h0"):null),v=k(()=>e.model&&s(l)?Ke(e.model,s(l)+"q0"):null),u=k(()=>e.simca?e.simca.ncomp:null);var f=de(),d=Q(f);{var m=h=>{var g=od(),p=L(q(g)),y=q(p),b=L(q(y)),E=q(b),A=L(b),N=q(A),w=L(A),_=q(w),z=L(y),M=L(q(z)),C=q(M),P=L(M),D=q(P),R=L(z),Y=L(q(R),3),B=q(Y),W=L(R);{var T=S=>{var V=ld(),j=L(q(V),3),O=q(j);re(X=>le(O,X),[()=>e.simca.oCrit[s(u)-1].toFixed(1)]),I(S,V)};U(W,S=>{t()||S(T)})}re((S,V,j)=>{le(E,s(o)[s(u)-1]),le(N,s(a)[s(u)-1]),le(_,s(o)[s(u)-1]+s(a)[s(u)-1]),le(C,S),le(D,V),le(B,j)},[()=>s(c)[s(u)-1].toFixed(3),()=>s(v)[s(u)-1].toFixed(s(v)[s(u)-1]>99?0:3),()=>e.simca.eCrit[s(u)-1].toFixed(1)]),I(h,g)};U(d,h=>{e.model&&e.simca&&s(u)>0&&h(m)})}I(r,f),ve()}var ad=J('<p class="title"> </p>'),id=J("<!> <!> <!> <!> <!>",1);function bl(r,e){fe(e,!0);let t=G(e,"isAlt",3,!1),l=G(e,"simca",15),o=ne(void 0),a=ne(void 0);if(!l()&&e.model){const g="classic",p=Ke(e.model,"cNh"),y=Ke(e.model,"cNq"),b=p.map((_,z)=>_+y[z]),E=1-5/100,A=Math.pow(1-1/100,1/e.model.nrows),N=b.map(_=>Wt(E,_)),w=b.map(_=>Wt(A,_));H(o,5),H(a,1),l({ncomp:1,alpha:5,gamma:1,limType:g,Nf:b,eCrit:N,oCrit:w,className:e.className,hash:Zs()})}const c=[10,5,1,.1],v=[5,1,.1,.01];ue(()=>{if(l().alpha&&s(o)!==l().alpha){const m=1-l().alpha/100;l(l().eCrit=l().Nf.map(h=>Wt(m,h)),!0),H(o,l().alpha,!0)}if(l().gamma&&s(a)!==l().gamma){const m=Math.pow(1-l().gamma/100,1/e.model.nrows);l(l().oCrit=l().Nf.map(h=>Wt(m,h)),!0),H(a,l().gamma,!0)}}),ue(()=>{const m=l().limType.charAt(0),h=Ke(e.model,m+"Nh"),g=Ke(e.model,m+"Nq"),p=h.map((N,w)=>N+g[w]),y=1-l().alpha/100,b=Math.pow(1-l().gamma/100,1/e.model.nrows),E=p.map(N=>Wt(y,N)),A=p.map(N=>Wt(b,N));l(l().Nf=p,!0),l(l().eCrit=E,!0),l(l().oCrit=A,!0)});var u=de(),f=Q(u);{var d=m=>{var h=id(),g=Q(h);ye(g,{name:"target-class",label:"",children:(N,w)=>{var _=ad(),z=q(_);re(()=>le(z,`Target class: ${l().className??""}`)),I(N,_)},$$slots:{default:!0}});var p=L(g,2);ye(p,{name:"ncomp",label:"# of PCs",children:(N,w)=>{ua(N,{min:1,get max(){return e.model.ncomp},step:1,decNum:0,get value(){return l().ncomp},set value(_){l(l().ncomp=_,!0)}})},$$slots:{default:!0}});var y=L(p,2);ye(y,{name:"alpha",label:"Alpha, %:",children:(N,w)=>{nt(N,{options:c,get value(){return l().alpha},set value(_){l(l().alpha=_,!0)}})},$$slots:{default:!0}});var b=L(y,2);{var E=N=>{ye(N,{name:"gamma",label:"Gamma, %:",children:(w,_)=>{nt(w,{options:v,get value(){return l().gamma},set value(z){l(l().gamma=z,!0)}})},$$slots:{default:!0}})};U(b,N=>{t()||N(E)})}var A=L(b,2);ye(A,{name:"limits",label:"Limits:",children:(N,w)=>{nt(N,{options:["classic","robust"],get value(){return l().limType},set value(_){l(l().limType=_,!0)}})},$$slots:{default:!0}}),I(m,h)};U(f,m=>{l()&&m(d)})}I(r,u),ve()}function cd(r,e,t,l,o){const a=r.ncomp,c=r.nrows,v=new Array(a),u=new Array(a),f=new Array(a),d=new Array(a);for(let m=0;m<a;m++){const h=ir(r,e==="robust"?"fdistr":"fdistc",m+1),g=Ya(!1,h,l[m],o[m]);let p=r.nrows;const y=l[m],b=t[m],E=new ge(h);let A=E.sort(),N=E.sortind();const w=Array.from({length:c},()=>"alien");let _=-1,z=0,M=0,C=0,P=0;for(;_<0;)z>0&&(w[N.v[p-1]-1]="external",p=p-1,N=N.slice(1,p),A=A.slice(1,p)),M=pn(A),C=Vs(A,!0),P=C/(M*M),_=4-2*b*P,z=z+1;const D=(2+Math.sqrt(_))/P,R=D-b,Y=M/D,B=y/Y,W=1-2*(b+R)*(b+3*R)/(3*(b+2*R)**2),T=(W-1)*(1-3*W),S=(b+2*R)/(b+R)**2,V=1+W*S*(W-1-.5*(2-W)*T*S),j=W*Math.sqrt(2*S)*(1+.5*T*S),O=Jn((Math.pow(B/(b+R),W)-V)/j);v[m]=g,v[m].beta=O,v[m].s=R,v[m].k=b,v[m].Mz=V,v[m].Sz=j,v[m].m=M,v[m].f0=Y,v[m].hz=W,v[m].anum={aliens:p,external:c-p},v[m].a=w,f[m]=1-O,u[m]=g.TN/(g.TN+g.FP),d[m]=m+1}return{class:["simcares"],classes:r.classes,classNames:r.classNames,target:!1,v,nrows:r.nrows,stat:{specificity:u,selectivity:f,components:d}}}function Ya(r,e,t,l){const o=e.length,a=new Array(o),c=new Array(o),v={regular:0,extreme:0,outliers:0},u={in:0,out:0};let f=0,d=0,m=0,h=0;for(let g=0;g<o;g++){const p=e[g];p<t?(a[g]="regular",c[g]="in",v.regular+=1,u.in+=1):p>l?(a[g]="outlier",c[g]="out",v.outliers+=1,u.out+=1):(a[g]="extreme",c[g]="out",v.extreme+=1,u.out+=1),f=f+(c[g]==="in"&&r),h=h+(c[g]!=="in"&&r),m=m+(c[g]!=="in"&&!r),d=d+(c[g]==="in"&&!r)}return{f:e,c:a,d:c,cnum:v,dnum:u,TP:f,TN:m,FN:h,FP:d}}function yl(r,e,t,l){const o=r.ncomp,a=new Array(o),c=new Array(o),v=new Array(o);for(let u=0;u<o;u++){const f=ir(r,e==="robust"?"fdistr":"fdistc",u+1),d=Ya(!0,f,t[u],l[u]);c[u]=d.TP/(d.TP+d.FN),v[u]=u+1,a[u]=d}return{class:["simcares"],classes:r.classes,target:!0,v:a,nrows:r.nrows,stat:{sensitivity:c,components:v}}}function as(r,e,t,l,o,a){(!a||!Array.isArray(a))&&(a=[]);let c=r.exclvars;(!c||!Array.isArray(c))&&(c=[]);const v=l.values.nrows,u=a.length,f=v-u,d=e.ncomp,m=ir(t.pca,"qdist",d),h=ir(t.pca,"hdist",d),g=e.limType==="classic"?"c":"r",p=ir(t.pca,"fdist"+g,d),y=Ke(r,g+"Nh")[d-1],b=Ke(r,g+"Nq")[d-1],E=Ke(r,g+"h0")[d-1],A=Ke(r,g+"q0")[d-1],N=y+b,w=t.simca.v[d-1],_=l.sep,z=t.simca.classes&&t.simca.classes.length===f,M=z?["","","","",""]:["","","",""];let C="";if(C+=["Reference classes:",z?"provided":"not provided",...M].join(_)+`
`,C+=["Number of components:",d,...M].join(_)+`
`,C+=["Alpha:",(e.alpha/100).toFixed(3),...M].join(_)+`
`,C+=["Limits estimator:",e.limType,...M].join(_)+`
`,C+=`
`,C+=["Nh:",y,...M].join(_)+`
`,C+=["Nq:",b,...M].join(_)+`
`,C+=["Nf:",N,...M].join(_)+`
`,C+=`
`,C+=["F crit (extremes):",e.eCrit[d-1],...M].join(_)+`
`,C+=["F crit (outliers):",e.oCrit[d-1],...M].join(_)+`
`,C+=`
`,c.length>0&&(C+=["Number of excluded varibles:",c.length,...M].join(_)+`
`,C+=["Indices of excluded varibles:",cu(c),...M].join(_)+`
`,C+=`
`),w.beta!==null&&w.beta!==void 0){C+=["Objects treated as from non-target class","",...M].join(_)+`
`,C+=["Objects:",v,...M].join(_)+`
`,C+=["In:",w.dnum.in,...M].join(_)+`
`,C+=["Out:",w.dnum.out,...M].join(_)+`
`,C+=["Aliens:",w.anum.aliens,...M].join(_)+`
`,C+=["External:",w.anum.external,...M].join(_)+`
`,C+=["Specificity:",t.simca.stat.specificity?t.simca.stat.specificity[d-1]:"-",...M].join(_)+`
`,C+=["Selectivity:",t.simca.stat.selectivity?t.simca.stat.selectivity[d-1]:"-",...M].join(_)+`
`,C+=["Beta:",w.beta,...M].join(_)+`
`,C+=["Non-centrality, s:",w.s,...M].join(_)+`
`,C+=["Scaling, f0:",w.f0,...M].join(_)+`
`,C+=`
`,C+=["","object","class","role","decision","h/h0","q/q0","f"].join(_)+`
`;for(let B=0;B<v;B++)C+=["",l.objlabels[B],t.simca.classes[B],w.a[B],w.d[B],h[B]/E,m[B]/A,p[B]].join(_)+`
`}else{C+=["Objects treated as from target class","",...M].join(_)+`
`,C+=["Objects:",v,...M].join(_)+`
`,C+=["Removed:",u,...M].join(_)+`
`,C+=["In:",w.dnum.in,...M].join(_)+`
`,C+=["Out:",w.dnum.out,...M].join(_)+`
`,C+=["Regular:",w.cnum.regular,...M].join(_)+`
`,C+=["Extreme:",w.cnum.extreme,...M].join(_)+`
`,C+=["Outliers:",w.cnum.outliers,...M].join(_)+`
`,C+=["Sensitivity:",t.simca.stat.sensitivity?t.simca.stat.sensitivity[d-1]:"-",...M].join(_)+`
`,C+=`
`,C+=["","object","class","role","decision","h/h0","q/q0","f"].join(_)+`
`;let B=0;for(let W=0;W<v;W++){if(u>0&&a.includes(W)){C+=["",l.objlabels[W],"-","removed","-","-","-","-"].join(_)+`
`;continue}C+=["",l.objlabels[B],t.pca.classes[B],w.c[B],w.d[B],h[B]/E,m[B]/A,p[B]].join(_)+`
`,B=B+1}}C+=`
`,l.dec!=="."&&(C=C.replace(/\./g,l.dec)),C=["Target class:",e.className,...M].join(_)+`
`+C,C=["Data filename:",l.fileName,...M].join(_)+`
`+C;let P=["DD-SIMCA results ("+o+")","https://mda.tools/ddsimca/",...M].join(_)+`

`;const D=new Blob([P+C],{type:"text/csv"}),R=window.URL.createObjectURL(D),Y=document.createElement("a");Y.setAttribute("href",R),Y.setAttribute("download",`ddsimca-results-${o}.csv`),Y.click()}function _l(r,e){const t=new Blob([JSON.stringify({pca:r,simca:e},wn)],{type:"application/json"}),l=window.URL.createObjectURL(t),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download","ddsimca-model.json"),o.click()}var ud=J('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">Cal</th><th class="svelte-kg0b31">PV</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extremes</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Outliers</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Sensitivity</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function fd(r,e){fe(e,!0);let t=k(()=>e.calres?e.calres.v[0].c.length:0);var l=de(),o=Q(l);{var a=c=>{var v=ud(),u=L(q(v)),f=q(u),d=L(q(f)),m=q(d),h=L(d),g=q(h),p=L(f),y=L(q(p)),b=q(y),E=L(y),A=q(E),N=L(p),w=L(q(N)),_=q(w),z=L(w),M=q(z),C=L(N),P=L(q(C)),D=q(P),R=L(P),Y=q(R);re((B,W)=>{le(m,s(t)),le(g,s(t)),le(b,e.calres.v[e.ncomp-1].cnum.extreme),le(A,e.pvres.v[e.ncomp-1].cnum.extreme),le(_,e.calres.v[e.ncomp-1].cnum.outliers),le(M,e.pvres.v[e.ncomp-1].cnum.outliers),le(D,B),le(Y,W)},[()=>e.calres.stat.sensitivity[e.ncomp-1].toFixed(3),()=>e.pvres.stat.sensitivity[e.ncomp-1].toFixed(3)]),I(c,v)};U(o,c=>{e.calres&&e.pvres&&c(a)})}I(r,l),ve()}var vd=J('<div class="msg-select"> </div>'),dd=J('<div class="msg-select"> </div>'),md=J('<div class="msg-select"> </div>'),hd=J('<div class="msg-select"> </div>'),gd=J('<div class="selected-buttons svelte-8mh2yv"><!></div>'),pd=J('<div class="selected-buttons svelte-8mh2yv"><!></div>'),bd=J("<!> <!> <!>",1),yd=()=>switchPlot(i),_d=(r,e,t)=>H(e,s(t),!0),wd=J("<button> </button>"),xd=J('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!> <!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function wl(r,e){fe(e,!0);let t=G(e,"selobjText",3,"Click to select an object..."),l=G(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),o=G(e,"clearText",3,"Click anywhere to remove selection..."),a=G(e,"params",15),c=Xe({objects:-1,variables:[]}),v=ne(Xe(Object.keys(e.plots)[0]));function u(P){c.objects=P}function f(P){c.objects=-1}function d(P){c.variables=P}function m(P){c.variables=[]}let h={objects:{select:u,unselect:f},variables:{select:d,unselect:m},stats:{}},g=k(()=>s(v)?e.plots[s(v)]:null),p=k(()=>s(g)?s(g).component:null);var y=xd(),b=q(y),E=q(b),A=q(E);Ls(A,()=>s(p),(P,D)=>{D(P,{get params(){return a()[s(v)]},get callbacks(){return h[s(g).scope]},get selected(){return c[s(g).scope]},get props(){return e.props}})});var N=L(E,2),w=q(N);{var _=P=>{var D=de(),R=Q(D);{var Y=W=>{var T=vd(),S=q(T);re(()=>le(S,t())),I(W,T)},B=W=>{var T=dd(),S=q(T);re(()=>le(S,o())),I(W,T)};U(R,W=>{c[s(g).scope]<0?W(Y):W(B,!1)})}I(P,D)};U(w,P=>{s(g).scope==="objects"&&a()[s(v)].plotType!=="l"&&t().length>0&&P(_)})}var z=L(w,2);{var M=P=>{var D=de(),R=Q(D);{var Y=W=>{var T=md(),S=q(T);re(()=>le(S,l())),I(W,T)},B=W=>{var T=hd(),S=q(T);re(()=>le(S,o())),I(W,T)};U(R,W=>{c[s(g).scope].length===0?W(Y):W(B,!1)})}I(P,D)};U(z,P=>{s(g).scope==="variables"&&a()[s(v)].plotType!=="l"&&l().length>0&&P(M)})}var C=L(b,2);Ie(C,21,()=>Object.keys(e.plots),Fe,(P,D)=>{var R=de(),Y=Q(R);{var B=T=>{var S=bd(),V=Q(S);ju(V,{get title(){return s(g).label},labelWidth:12,get options(){return e.controls[s(v)]},get value(){return a()[s(v)]},set value(ee){a(a()[s(v)]=ee,!0)}});var j=L(V,2);{var O=ee=>{var te=gd(),se=q(te);xr(se,()=>s(g).buttons,()=>c.objects),I(ee,te)};U(j,ee=>{s(g).scope==="objects"&&s(g).buttons&&c.objects>=0&&ee(O)})}var X=L(j,2);{var $=ee=>{var te=pd(),se=q(te);xr(se,()=>s(g).buttons,()=>c.variables),I(ee,te)};U(X,ee=>{s(g).scope==="variables"&&s(g).buttons&&c.variables.length>0&&ee($)})}I(T,S)},W=T=>{var S=wd();S.__keydown=[yd],S.__click=[_d,v,D];var V=q(S);re(()=>{vt(S,1,`plot-selector plot-selector-${s(D)??""}`,"svelte-8mh2yv"),le(V,e.plots[s(D)].label)}),I(T,S)};U(Y,T=>{s(g)&&s(v)===s(D)?T(B):T(W,!1)})}I(P,R)}),I(r,y),ve()}rt(["keydown","click"]);function Wa(r,e){!e.callbacks||!e.callbacks.select||jr(r,r.target.tagName,e.callbacks.select)}function kd(r,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var Ed=me("<text> </text>"),Cd=me('<g class="series series-textlabels"></g>'),Ad=me('<g class="series series-line"><polyline class="line"></polyline></g>'),Nd=me("<rect></rect>"),Sd=me('<g class="series series-bar"></g>'),Md=me("<text> </text>"),Td=me('<g class="series series-points series-points1"></g>'),zd=me('<g class="series series-points series-points1"><text> </text></g>'),Pd=me('<g class="series series-bar"><rect></rect></g>'),Id=me('<g class="series series-text"><text> </text></g>'),Ld=me('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),Rd=me("<!><!><!><!><!>",1);function rr(r,e){fe(e,!0);let t=G(e,"shortenLabels",3,!0),l=G(e,"lineWidth",3,1),o=G(e,"markerSize",3,null),a=G(e,"markerWidth",3,2),c=G(e,"pch",3,"●"),v=G(e,"colors",3,void 0),u=G(e,"mainColor",19,()=>Ft.cal),f=G(e,"faceColor",3,null),d=G(e,"selected",19,()=>-1),m=G(e,"xRange",15),h=G(e,"yRange",15);const g=Tt("axes"),p=k(()=>Nt(e.xValues,"PlotSeries")),y=k(()=>s(p)?Nt(e.yValues,"PlotSeries",s(p).length):null);ue(()=>{m(s(p)?en(s(p)):null),h(s(y)?en(s(y)):null)});const b=k(()=>f()===null?e.plotType==="p"?"transparent":"white":f()),E=k(()=>o()?o():e.plotType==="p"?1:.85),A=k(()=>ol[g.scales().plot]),N=k(()=>ot([0],g.tY())[0]),w=k(()=>al([.8],g.tX())[0]),_=k(()=>s(w)/2),z=k(()=>s(A));let M=k(()=>e.plotType==="l"||e.plotType==="b"?ul(s(p),s(y),g.tX(),g.tY()):null),C=k(()=>s(p)?ot(s(p),g.tX()):null),P=k(()=>s(y)?ot(s(y),g.tY()):null),D=k(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(X=>X.slice(0,os)):e.labels:null),R=k(()=>v()&&v().length===s(p).length?v():Array(s(p).length).fill(u()));const Y=k(()=>`font-size:${s(E)}em;fill:${s(b)};cursor:default;text-anchor:middle;stroke-width:${a()}px;user-select:none;`),B=`font-size:0.85em;fill:${ja};cursor:default;text-anchor:middle;stroke:${ja};stroke-width:0.1px;user-select:none;`,W="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",T=`fill:transparent;stroke-width: ${l()}px;`,S=`stroke-width:${l()}px;`;var V=de(),j=Q(V);{var O=X=>{var $=Rd(),ee=Q($);{var te=ae=>{var we=Cd();lt(we,B),Ie(we,21,()=>s(C),Fe,(ce,Le,ke)=>{var Ne=Ed(),at=q(Ne);re(()=>{F(Ne,"x",s(C)[ke]),F(Ne,"y",s(P)[ke]),F(Ne,"dy",s(y).v[ke]<0?s(z):-s(z)),le(at,s(D)[ke])}),I(ce,Ne)}),I(ae,we)};U(ee,ae=>{e.showLabels&&s(D)&&ae(te)})}var se=L(ee);{var be=ae=>{var we=Ad();lt(we,T);var ce=q(we);re(()=>{F(ce,"points",s(M)),F(ce,"stroke",u())}),I(ae,we)};U(se,ae=>{(e.plotType==="l"||e.plotType==="b")&&ae(be)})}var Ee=L(se);{var pe=ae=>{var we=Sd();lt(we,S),we.__click=[Wa,e],Ie(we,21,()=>s(C),Fe,(ce,Le,ke)=>{var Ne=Nd();re(()=>{F(Ne,"x",s(C)[ke]-s(_)),F(Ne,"y",s(y).v[ke]<0?s(N):s(P)[ke]),F(Ne,"fill",s(R)[ke]),F(Ne,"width",s(w)),F(Ne,"height",s(y).v[ke]<0?s(P)[ke]-s(N):s(N)-s(P)[ke])}),I(ce,Ne)}),I(ae,we)};U(Ee,ae=>{e.plotType==="h"&&ae(pe)})}var Ve=L(Ee);{var ie=ae=>{var we=Td();we.__click=[Wa,e],Ie(we,21,()=>s(C),Fe,(ce,Le,ke)=>{var Ne=Md(),at=q(Ne);re(()=>{F(Ne,"x",s(C)[ke]),F(Ne,"y",s(P)[ke]),F(Ne,"fill",f()),F(Ne,"stroke",s(R)[ke]),le(at,c())}),I(ce,Ne)}),re(()=>lt(we,s(Y))),I(ae,we)};U(Ve,ae=>{(e.plotType==="p"||e.plotType==="b")&&ae(ie)})}var _e=L(Ve);{var Ae=ae=>{var we=Ld(),ce=Q(we);F(ce,"x",0),F(ce,"y",0),ce.__click=[kd,e];var Le=L(ce);{var ke=Qe=>{var ft=zd();lt(ft,W);var tt=q(ft),Gt=q(tt);re(()=>{F(tt,"x",s(C)[d()]),F(tt,"y",s(P)[d()]),F(tt,"stroke",s(R)[d()]),le(Gt,c())}),I(Qe,ft)},Ne=Qe=>{var ft=Pd();lt(ft,S);var tt=q(ft);re(()=>{F(tt,"stroke",s(R)[d()]),F(tt,"fill",s(R)[d()]),F(tt,"x",s(C)[d()]-s(_)),F(tt,"y",s(y).v[d()]<0?s(N):s(P)[d()]),F(tt,"width",s(w)),F(tt,"height",s(y).v[d()]<0?s(P)[d()]-s(N):s(N)-s(P)[d()])}),I(Qe,ft)};U(Le,Qe=>{e.plotType!=="h"?Qe(ke):Qe(Ne,!1)})}var at=L(Le);{var nr=Qe=>{var ft=Id();lt(ft,B);var tt=q(ft);F(tt,"stroke",qa),F(tt,"fill",qa);var Gt=q(tt);re(()=>{F(tt,"x",s(C)[d()]),F(tt,"y",s(P)[d()]),F(tt,"dy",s(y).v[d()]<0?s(z):-s(z)),le(Gt,s(D)[d()])}),I(Qe,ft)};U(at,Qe=>{e.showLabels&&s(D)&&s(D).length>0&&Qe(nr)})}I(ae,we)};U(_e,ae=>{d()>=0&&ae(Ae)})}I(X,$)};U(j,X=>{s(C)&&s(P)&&X(O)})}I(r,V),ve()}rt(["click"]);var jd=J("<!> <!> <!> <!>",1);function xl(r,e){fe(e,!0);let t=k(()=>e.props&&e.props.data?e.props.data:null),l=k(()=>e.props&&e.props.res?e.props.res:null),o=k(()=>e.params&&e.params.resID?s(l)[e.params.resID]:null),a=k(()=>e.params&&e.params.resID?s(t)[e.params.resID]:null);const c="#909090",v=100;let u=k(()=>e.params.limType==="classic"?{h:s(o).cNh,q:s(o).cNq}:{h:s(o).rNh,q:s(o).rNq}),f=k(()=>e.params.limType==="classic"?{h:s(o).ch0,q:s(o).cq0}:{h:s(o).rh0,q:s(o).rq0}),d=k(()=>({h:s(u).h[e.params.ncomp-1],q:s(u).q[e.params.ncomp-1]})),m=k(()=>({h:s(f).h[e.params.ncomp-1],q:s(f).q[e.params.ncomp-1]})),h=k(()=>e.params.alpha?1-e.params.alpha/100:.95),g=k(()=>e.params.gamma?1-e.params.gamma/100:.99),p=k(()=>Ba(s(h),s(d).h,s(d).q,e.params.transType)),y=k(()=>Ba(Math.pow(s(g),1/s(o).nrows),s(d).h,s(d).q,e.params.transType)),b=k(()=>Fa(s(a),s(o),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),E=k(()=>s(o)?ir(s(o),"hdist",e.params.ncomp):null),A=k(()=>s(o)?ir(s(o),"qdist",e.params.ncomp):null),N=k(()=>Oa(s(E),s(d).h,s(m).h,e.params.transType)),w=k(()=>Oa(s(A),s(d).q,s(m).q,e.params.transType)),_=k(()=>s(o)?s(o).objlabels.map(S=>S.slice(0,os)):null),z=k(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),M=k(()=>Va("h",e.params.transType)),C=k(()=>Va("q",e.params.transType)),P=ne(void 0),D=ne(void 0),R=k(()=>{if(!s(N)||!s(P))return[0,1];const S=Math.max(s(N).max,s(y).x.v[v-1]);return[-.02*(S-s(P)[0]),1.05*S]}),Y=k(()=>{if(!s(w)||!s(D))return[0,1];const S=Math.max(s(w).max,s(y).y.v[0]);return[-.02*(S-s(D)[0]),(1.05+.1*(e.params.colorBy!=="none"))*S]});var B=de(),W=Q(B);{var T=S=>{cr(S,{get title(){return s(z)},get limX(){return s(R)},get limY(){return s(Y)},get xLabel(){return s(M)},get yLabel(){return s(C)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(V,j)=>{var O=jd(),X=Q(O);{var $=pe=>{Ht(pe,{get xValues(){return s(p).x},get yValues(){return s(p).y},lineColor:c,lineType:2})};U(X,pe=>{s(p)&&pe($)})}var ee=L(X,2);{var te=pe=>{Ht(pe,{get xValues(){return s(y).x},get yValues(){return s(y).y},lineColor:c,lineType:3})};U(ee,pe=>{s(y)&&pe(te)})}var se=L(ee,2);rr(se,{get labels(){return s(_)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return s(N).values},get yValues(){return s(w).values},plotType:"p",get showLabels(){return e.params.showLabels},get colors(){return s(b).colors},get xRange(){return s(P)},set xRange(pe){H(P,pe,!0)},get yRange(){return s(D)},set yRange(pe){H(D,pe,!0)}});var be=L(se,2);{var Ee=pe=>{const Ve=k(()=>s(b).breaks!==null);La(pe,{get show(){return s(Ve)},get colmap(){return s(b).map},get breaks(){return s(b).breaks},get labels(){return s(b).labels}})};U(be,pe=>{s(b)&&pe(Ee)})}I(V,O)},$$slots:{default:!0}})};U(W,S=>{s(N)&&s(w)&&S(T)})}I(r,B),ve()}var qd=J("<!> <!> <!> <!>",1);function kl(r,e){fe(e,!0);const t="Objects",l="topright",o={q:"Orthogonal distance, q/q0",h:"Score distance, h/h0",f:"Full distance, f/f0"},a="#909090",c=k(()=>e.props&&e.props.res?e.props.res:null),v=k(()=>e.props&&e.props.simca?e.props.simca:null),u=k(()=>e.props&&e.props.model?e.props.model:null),f=k(()=>s(c)?s(c)[Object.keys(s(c))[0]]:null),d=k(()=>s(v)?s(v).ncomp:null),m=k(()=>s(v)?s(v).Nf:null),h=k(()=>s(v)?s(v).limType.charAt(0):null),g=k(()=>s(u)?Ke(s(u),s(h)+"h0"):null),p=k(()=>s(u)?Ke(s(u),s(h)+"q0"):null),y=(j,O,X,$)=>new ge(ir(j,O,X).map(ee=>ee/$)),b=k(()=>s(c)&&s(d)?ns(s(c),(j,O)=>y(j[O],"hdist",s(d),s(g)[s(d)-1])):null),E=k(()=>s(c)&&s(d)?ns(s(c),(j,O)=>y(j[O],"qdist",s(d),s(p)[s(d)-1])):null),A=k(()=>s(c)&&s(d)?ns(s(c),(j,O)=>y(j[O],"fdist"+s(h),s(d),s(m)[s(d)-1])):null),N=k(()=>s(b)&&s(E)&&s(A)?{h:s(b),q:s(E),f:s(A)}:null),w=k(()=>{if(!s(N))return null;if(e.params.resID==="both")return ns(s(N)[e.params.distType],(O,X)=>({values:O[X],color:Ft[X],max:qt(O[X])}));if(e.params.resID==="diff"){const O=s(N)[e.params.distType].cal,X=s(N)[e.params.distType].pv,$=O.subtract(X).apply(ee=>Math.abs(ee));return{"abs(cal - pv)":{values:$,color:"#a0a0a0",max:qt($)}}}const j={};return j[e.params.resID]={values:s(N)[e.params.distType][e.params.resID],color:Ft[e.params.resID],max:qt(s(N)[e.params.distType][e.params.resID])},j});let _=k(()=>s(w)?Object.keys(s(w)).map(j=>({id:j,label:j,point:{marker:e.params.resID==="diff"?2:1,faceColor:e.params.resID==="diff"?s(w)[j].color:"white",lineColor:s(w)[j].color,markerSize:.85,lineWidth:1.5}})):null);const z=k(()=>s(v)&&e.params.distType==="f"&&e.params.resID!=="diff"?s(v).eCrit[s(d)-1]/s(m)[s(d)-1]:0),M=k(()=>s(v)&&e.params.distType==="f"&&e.params.resID!=="diff"?s(v).oCrit[s(d)-1]/s(m)[s(d)-1]:0),C=k(()=>s(w)?qt(Object.keys(s(w)).map(j=>s(w)[j].max).concat([s(M)])):null),P=k(()=>s(f)?ge.seq(1,s(f).nrows):null),D=k(()=>s(f)?[0,s(f).nrows+1]:[0,1]),R=k(()=>s(C)?[-s(C)*.05,s(C)*1.2]:[0,1]),Y=k(()=>o[e.params.distType]),B=k(()=>s(f)?s(f).objlabels.map(j=>j.slice(0,os)):null),W=k(()=>e.params.title?e.params.title:"Distances (A = "+s(d)+")");var T=de(),S=Q(T);{var V=j=>{cr(j,{get title(){return s(W)},get limX(){return s(D)},get limY(){return s(R)},xLabel:t,get yLabel(){return s(Y)},fileName:"plot-distances",get onclick(){return e.callbacks.unselectObject},children:(O,X)=>{var $=qd(),ee=Q($);{var te=ie=>{const _e=k(()=>[s(z),s(z)]);Ht(ie,{get xValues(){return s(D)},get yValues(){return s(_e)},lineColor:a,lineType:2})};U(ee,ie=>{s(z)>0&&ie(te)})}var se=L(ee,2);{var be=ie=>{const _e=k(()=>[s(M),s(M)]);Ht(ie,{get xValues(){return s(D)},get yValues(){return s(_e)},lineColor:a,lineType:3})};U(se,ie=>{s(M)>0&&ie(be)})}var Ee=L(se,2);Ie(Ee,17,()=>Object.keys(s(w)),Fe,(ie,_e)=>{const Ae=k(()=>e.params.resID==="diff"?"h":"p");rr(ie,{get labels(){return s(B)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return s(P)},get yValues(){return s(w)[s(_e)].values},get mainColor(){return s(w)[s(_e)].color},get plotType(){return s(Ae)},get showLabels(){return e.params.showLabels}})});var pe=L(Ee,2);{var Ve=ie=>{sn(ie,{get items(){return s(_)},position:l})};U(pe,ie=>{s(_)&&s(_).length>0&&ie(Ve)})}I(O,$)},$$slots:{default:!0}})};U(S,j=>{s(P)&&s(w)&&j(V)})}I(r,T),ve()}var Dd=J("<!> <!> <!> <!>",1);function Fd(r,e){fe(e,!0);const t="Components",l="Degrees of freedom, Nu",o="DoF",a="plot-dof",c={Nh:"#2679B2",Nq:"#D22C2F"},v={Nh:"#f0f8ff",Nq:"#fff8f0"};let u=k(()=>e.props&&e.props.simca?e.props.simca:null),f=k(()=>e.props&&e.props.model?e.props.model:null),d=k(()=>s(u)?s(u).ncomp:null),m=k(()=>e.params.dfID!=="both"?[e.params.dfID]:["Nh","Nq"]),h=k(()=>e.params.legendPosition?e.params.legendPosition:"topleft"),g=k(()=>s(m)?s(m).map(_=>({id:_,label:_,point:{marker:1,lineColor:c[_],faceColor:"white",markerSize:.85,lineWidth:1.5},line:{lineColor:c[_],lineWidth:1.5}})):null),p=k(()=>s(f)?ge.seq(1,s(f).ncomp):null),y=k(()=>s(u)&&s(m)?s(m).reduce((_,z)=>{const M=s(u).limType==="classic"?"c":"r";return _[z]=new ge(Ke(s(f),M+z)),_},{}):null),b=k(()=>s(f)?[.5,s(f).ncomp+.5]:[0,1]),E=k(()=>{const _=Object.keys(s(y));if(_.length<1)return[0,1];const z=_.map(M=>qt(s(y)[M]));return[0,qt(z)*1.2]});var A=de(),N=Q(A);{var w=_=>{cr(_,{title:o,xLabel:t,yLabel:l,get limX(){return s(b)},get limY(){return s(E)},fileName:a,whole:!0,children:(z,M)=>{var C=Dd(),P=Q(C);{var D=S=>{const V=k(()=>[s(d)]),j=k(()=>[s(d)]),O=k(()=>[s(E)[0]]),X=k(()=>[s(E)[1]]);tr(S,{get xStart(){return s(V)},get xEnd(){return s(j)},get yStart(){return s(O)},get yEnd(){return s(X)},lineColor:"#a0a0a0"})};U(P,S=>{s(d)&&S(D)})}var R=L(P,2);Ie(R,17,()=>s(m),Fe,(S,V)=>{rr(S,{get xValues(){return s(p)},get yValues(){return s(y)[s(V)]},plotType:"b",showLabels:!1,get faceColor(){return v[s(V)]},get mainColor(){return c[s(V)]},lineWidth:1.5})});var Y=L(R,2);{var B=S=>{var V=de(),j=Q(V);Ie(j,17,()=>s(m),Fe,(O,X)=>{const $=k(()=>[s(p).v[s(d)-1]]),ee=k(()=>[s(y)[s(X)].v[s(d)-1]]);rr(O,{get xValues(){return s($)},get yValues(){return s(ee)},plotType:"p",showLabels:!1,get faceColor(){return c[s(X)]},mainColor:"#a0a0a0",markerSize:1.2,lineWidth:1})}),I(S,V)};U(Y,S=>{s(d)&&S(B)})}var W=L(Y,2);{var T=S=>{sn(S,{get items(){return s(g)},get position(){return s(h)}})};U(W,S=>{s(g)&&s(g).length>0&&S(T)})}I(z,C)},$$slots:{default:!0}})};U(N,_=>{s(p)&&s(y)&&_(w)})}I(r,A),ve()}var Od=J("<!> <!> <!>",1),Vd=J("<!> <!> <!>",1);function Ua(r,e){fe(e,!0);const t="#e0e0e0",l="Number of extremes (expected)",o="Number of extremes (observed)",a="plot-extremes";function c(C){const P=ge.zeros(C+1),D=ge.zeros(C+1),R=ge.zeros(C+1),Y=ge.zeros(C+1);for(let B=1;B<C;B++){const W=B/C,T=2*Math.sqrt(B*(1-W));P.v[B]=B,R.v[B]=B,D.v[B]=B-T,Y.v[B]=B+T}return P.v[C]=C,R.v[C]=C,D.v[C]=C,Y.v[C]=C,{xStart:P,xEnd:R,yStart:D,yEnd:Y}}function v(C,P,D){const R=C.v[D-1].f,Y=P.Nf[D-1],B=R.length,W=ge.zeros(B);for(let T=1;T<=B;T++){const S=T/B,V=Wt(1-S,Y);let j=0;for(let O=0;O<B;O++)R[O]>V&&(j+=1);W.v[T-1]=j}return W}let u=k(()=>e.props&&e.props.classres?e.props.classres:null),f=k(()=>e.props&&e.props.simca?e.props.simca:null),d=k(()=>e.props&&e.props.ncomp?e.props.ncomp:null),m=k(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(u))),h=k(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),g=k(()=>s(m)?s(m).map(C=>({id:C,label:C,point:{marker:1,lineColor:Ft[C],faceColor:qr[C],markerSize:.85,lineWidth:1.5}})):null),p=k(()=>s(u)&&s(m)?s(m).reduce((C,P)=>(C[P]=ge.seq(1,s(u)[P].nrows),C),{}):null),y=k(()=>s(u)&&s(m)&&s(d)?s(m).reduce((C,P)=>(C[P]=v(s(u)[P],s(f),s(d)),C),{}):null),b=k(()=>s(m)?s(m).reduce((C,P)=>Math.max(C,s(p)[P].length),0):1),E=k(()=>s(b)>1?c(s(b)):null),A=k(()=>s(p)?[-1,s(b)+2]:[0,1]),N=k(()=>s(p)?[-1,s(b)+2]:[0,1]),w=k(()=>s(d)?`Extremes (A = ${s(d)})`:"Extremes");var _=de(),z=Q(_);{var M=C=>{cr(C,{get title(){return s(w)},xLabel:l,yLabel:o,get limX(){return s(A)},get limY(){return s(N)},fileName:a,whole:!0,children:(P,D)=>{var R=Vd(),Y=Q(R);{var B=V=>{var j=Od(),O=Q(j);tr(O,Ir(()=>s(E),{lineColor:t}));var X=L(O,2);Ht(X,{get xValues(){return s(E).xStart},get yValues(){return s(E).yStart},lineColor:t});var $=L(X,2);Ht($,{get xValues(){return s(E).xEnd},get yValues(){return s(E).yEnd},lineColor:t}),I(V,j)};U(Y,V=>{s(E)&&V(B)})}var W=L(Y,2);Ie(W,17,()=>s(m),Fe,(V,j)=>{rr(V,{get xValues(){return s(p)[s(j)]},get yValues(){return s(y)[s(j)]},plotType:"p",showLabels:!1,get faceColor(){return qr[s(j)]},get mainColor(){return Ft[s(j)]},lineWidth:1.5})});var T=L(W,2);{var S=V=>{sn(V,{get items(){return s(g)},get position(){return s(h)}})};U(T,V=>{s(g)&&s(g).length>0&&V(S)})}I(P,R)},$$slots:{default:!0}})};U(z,C=>{s(u)&&C(M)})}I(r,_),ve()}var Bd=J("<!> <!>",1),Yd=J("<!> <!> <!> <!> <!>",1);function is(r,e){fe(e,!0);let t=k(()=>"plot-"+e.params.statName),l=k(()=>e.props&&e.props.classres?e.props.classres:null),o=k(()=>e.props&&e.props.ncomp?e.props.ncomp:null),a=k(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(l))),c=k(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),v=k(()=>s(a)?s(a).map(A=>({id:A,label:A,point:{marker:1,lineColor:Ft[A],faceColor:qr[A],markerSize:.85,lineWidth:1.5},line:{lineType:1,lineColor:Ft[A]}})):null),u=k(()=>e.params.ci&&Array.isArray(e.params.ci)&&e.params.ci.length===2?e.params.ci:null);const f=k(()=>s(l)?s(l)[s(a)[0]].stat.components.length:1),d=k(()=>s(f)>10?s(f)*.05:.5),m=k(()=>s(f)>1?1:0),h=k(()=>s(f)>1?s(f):2),g=k(()=>[s(m)-s(d),s(h)+s(d)]);let p=k(()=>{if(!e.params.zoom)return[0,1.1];if(!s(a)||s(a).length<1)return[0,1];const A=s(a).map(N=>en(s(l)[N].stat[e.params.statName]));return jo(A.flat(),.2)});var y=de(),b=Q(y);{var E=A=>{cr(A,{get title(){return e.params.title},xLabel:"Components",get yLabel(){return e.params.title},get limX(){return s(g)},get limY(){return s(p)},get fileName(){return s(t)},whole:!0,children:(N,w)=>{var _=Yd(),z=Q(_);{var M=T=>{const S=k(()=>[s(o)]),V=k(()=>[s(o)]),j=k(()=>[s(p)[0]]),O=k(()=>[s(p)[1]]);tr(T,{get xStart(){return s(S)},get xEnd(){return s(V)},get yStart(){return s(j)},get yEnd(){return s(O)},lineColor:"#a0a0a0"})};U(z,T=>{s(o)&&T(M)})}var C=L(z,2);{var P=T=>{var S=Bd();const V=k(()=>s(g)[1]-s(g)[0]);var j=Q(S);const O=k(()=>[s(g)[0]]),X=k(()=>[s(u)[0]+s(u)[1]]),$=k(()=>[2*s(u)[1]]),ee=k(()=>[s(V)]);hl(j,{get left(){return s(O)},get top(){return s(X)},get height(){return s($)},get width(){return s(ee)},lineColor:"#transparent",faceColor:"#00000010"});var te=L(j,2);const se=k(()=>[s(g)[0]]),be=k(()=>[s(V)]),Ee=k(()=>[s(u)[0]]),pe=k(()=>[s(u)[0]]);tr(te,{get xStart(){return s(se)},get xEnd(){return s(be)},get yStart(){return s(Ee)},get yEnd(){return s(pe)},lineColor:"#a0a0a0",lineType:2}),I(T,S)};U(C,T=>{s(u)&&T(P)})}var D=L(C,2);Ie(D,17,()=>s(a),Fe,(T,S)=>{rr(T,{get xValues(){return s(l)[s(S)].stat.components},get yValues(){return s(l)[s(S)].stat[e.params.statName]},plotType:"b",showLabels:!1,get faceColor(){return qr[s(S)]},get mainColor(){return Ft[s(S)]},lineWidth:1.5})});var R=L(D,2);{var Y=T=>{var S=de(),V=Q(S);Ie(V,17,()=>s(a),Fe,(j,O)=>{const X=k(()=>[s(l)[s(O)].stat.components[s(o)-1]]),$=k(()=>[s(l)[s(O)].stat[e.params.statName][s(o)-1]]);rr(j,{get xValues(){return s(X)},get yValues(){return s($)},plotType:"b",showLabels:!1,get faceColor(){return Ft[s(O)]},mainColor:"#a0a0a0",markerSize:1.2,lineWidth:1})}),I(T,S)};U(R,T=>{s(o)&&T(Y)})}var B=L(R,2);{var W=T=>{sn(T,{get items(){return s(v)},get position(){return s(c)}})};U(B,T=>{s(v)&&s(v).length>0&&T(W)})}I(N,_)},$$slots:{default:!0}})};U(b,A=>{s(l)&&A(E)})}I(r,y),ve()}function Wd(r,e){fe(e,!0);let t=G(e,"lineColor",3,"#606060"),l=G(e,"lineType",3,2),o=G(e,"alpha",3,.05),a=G(e,"xRange",15),c=G(e,"yRange",15);const v=ge.seq(0,2*Math.PI,.05);function u(b,E,A,N){const w=b.eigenvals[E-1],_=Wt(1-o(),2),z=Math.sqrt(_*w),M=ge.zeros(N.length);for(let C=0;C<N.length;C++)M.v[C]=z*A(N.v[C]);return[M,-z,z]}let f=k(()=>e.comp?e.comp[0]:null),d=k(()=>s(f)?u(e.resobj,s(f),Math.cos,v):null);ue(()=>{a(s(d)?[s(d)[1],s(d)[2]]:null)});let m=k(()=>e.comp?e.comp[1]:null),h=k(()=>s(m)?u(e.resobj,s(m),Math.sin,v):null);ue(()=>{c(s(h)?[s(h)[1],s(h)[2]]:null)});var g=de(),p=Q(g);{var y=b=>{Ht(b,{get xValues(){return s(d)[0]},get yValues(){return s(h)[0]},get lineColor(){return t()},get lineType(){return l()}})};U(p,b=>{s(d)&&s(h)&&b(y)})}I(r,g),ve()}function Ud(r,e){fe(e,!0);let t=G(e,"confLevel",3,.95),l=G(e,"xRange",15),o=G(e,"yRange",15),a=k(()=>qv(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,t()));ue(()=>{s(a)?(l(s(a).xRange),o(s(a).yRange)):(l(null),o(null))});var c=de(),v=Q(c);{var u=f=>{var d=de(),m=Q(d);Ie(m,17,()=>s(a).ellipses,Fe,(h,g,p)=>{Ht(h,{get xValues(){return s(g).x},get yValues(){return s(g).y},get lineColor(){return e.groupColors[p]}})}),I(f,d)};U(v,f=>{s(a)&&s(a).ellipses&&f(u)})}I(r,c),ve()}var Hd=J("<!> <!> <!> <!> <!> <!>",1);function El(r,e){fe(e,!0);let t=G(e,"alpha",3,.05),l=k(()=>e.props&&e.props.data?e.props.data:null),o=k(()=>e.props&&e.props.res?e.props.res:null),a=k(()=>e.params&&e.params.resID?s(o)[e.params.resID]:null),c=k(()=>e.params&&e.params.resID?s(l)[e.params.resID]:null);function v(S,V,j,O,X){if(!j)return null;let $=j[0],ee=j[1];S&&O&&($=Math.min($,O[0]),ee=Math.max(ee,O[1])),V!=="none"&&X&&($=Math.min($,X[0]),ee=Math.max(ee,X[1]));const te=(ee-$)*.1;return{min:$,max:ee,d:te}}function u(S,V){if(!(!S||!V||V<1||V>S.ncomp))return new ge(ir(S,"scores",V))}let f=ne(void 0),d=ne(void 0),m=ne(void 0),h=ne(void 0),g=ne(void 0),p=ne(void 0),y=k(()=>s(o)?Je(s(a).objindices):null),b=k(()=>s(a)?s(a).objlabels.map(S=>S.slice(0,os)):null),E=k(()=>u(s(a),e.params.comp1)),A=k(()=>e.params.plotType==="p"?s(E):s(y)),N=k(()=>e.params.comp2?e.params.comp2:null),w=k(()=>u(s(a),s(N))),_=k(()=>Fa(s(c),s(a),e.params.colorBy,e.params.colorByVar,e.params.resID)),z=k(()=>e.params.plotType==="p"?Da(s(a),e.params.comp1):"Objects"),M=k(()=>Da(s(a),e.params.comp2)),C=k(()=>v(e.params.showEllipse,e.params.confEllipse,s(f),s(m),s(g))),P=k(()=>s(C)?[s(C).min-s(C).d,s(C).max+s(C).d]:[0,1]),D=k(()=>v(e.params.showEllipse,e.params.confEllipse,s(d),s(h),s(p))),R=k(()=>s(D)?[s(D).min-s(D).d,s(D).max+s(D).d*(1+(e.params.colorBy!=="none"))]:[0,1]),Y=k(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!s(_)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+s(_).varname+(s(c).varvaluesUnits?" "+s(c).varvaluesUnits:"")+")");var B=de(),W=Q(B);{var T=S=>{cr(S,{get title(){return s(Y)},get limX(){return s(P)},get limY(){return s(R)},get xLabel(){return s(z)},get yLabel(){return s(M)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(V,j)=>{var O=Hd(),X=Q(O);const $=k(()=>[s(P)[0]]),ee=k(()=>[s(P)[1]]);tr(X,{get xStart(){return s($)},get xEnd(){return s(ee)},yStart:[0],yEnd:[0],lineColor:ls});var te=L(X,2);{var se=ae=>{const we=k(()=>[s(R)[0]]),ce=k(()=>[s(R)[1]]);tr(ae,{xStart:[0],xEnd:[0],get yStart(){return s(we)},get yEnd(){return s(ce)},lineColor:ls})};U(te,ae=>{e.params.plotType==="p"&&ae(se)})}var be=L(te,2);{var Ee=ae=>{const we=k(()=>[e.params.comp1,e.params.comp2]);Wd(ae,{get alpha(){return t()},get resobj(){return s(a)},get comp(){return s(we)},get xRange(){return s(m)},set xRange(ce){H(m,ce,!0)},get yRange(){return s(h)},set yRange(ce){H(h,ce,!0)}})};U(be,ae=>{e.params.showEllipse&&e.params.plotType==="p"&&ae(Ee)})}var pe=L(be,2);{var Ve=ae=>{const we=k(()=>Number.parseInt(e.params.confEllipse)/100);Ud(ae,{get xValues(){return s(A)},get yValues(){return s(w)},get confLevel(){return s(we)},get groups(){return s(a).classes},get groupNames(){return s(a).classNames},get groupColors(){return s(_).map},get xRange(){return s(g)},set xRange(ce){H(g,ce,!0)},get yRange(){return s(p)},set yRange(ce){H(p,ce,!0)}})};U(pe,ae=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&s(_)&&ae(Ve)})}var ie=L(pe,2);rr(ie,{get xValues(){return s(A)},get yValues(){return s(w)},get labels(){return s(b)},get selected(){return e.selected},get callbacks(){return e.callbacks},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return s(_).colors},get xRange(){return s(f)},set xRange(ae){H(f,ae,!0)},get yRange(){return s(d)},set yRange(ae){H(d,ae,!0)}});var _e=L(ie,2);{var Ae=ae=>{const we=k(()=>s(_).breaks!==null);La(ae,{get show(){return s(we)},get colmap(){return s(_).map},get breaks(){return s(_).breaks},get labels(){return s(_).labels}})};U(_e,ae=>{s(_)&&ae(Ae)})}I(V,O)},$$slots:{default:!0}})};U(W,S=>{s(A)&&s(w)&&S(T)})}I(r,B),ve()}var Gd=J("<!> <!> <!>",1);function Xd(r,e){fe(e,!0);let t=k(()=>e.props?e.props.model:null);function l(w,_){return!w||!_||_<1||_>w.ncomp?null:new ge(Ke(w,"loadings",_))}let o=ne(void 0),a=ne(void 0),c=k(()=>s(t)?Je(s(t).varvalues):null),v=k(()=>s(t)?Je(s(t).varindices):null),u=k(()=>l(s(t),e.params.comp1)),f=k(()=>!s(t)||!e.params.comp1?null:e.params.plotType==="p"?{values:s(u),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&s(c)?{values:s(c),label:s(t).varvaluesName+(s(t).varvaluesUnits?", "+s(t).varvaluesUnits:"")}:{values:s(v),label:"Variables"}),d=k(()=>s(f)?s(f).values:null),m=k(()=>s(f)?s(f).label:null),h=k(()=>l(s(t),e.params.comp2)),g=k(()=>`PC${e.params.comp2}`),p=k(()=>{if(s(a)&&s(a)[0]<Number.POSITIVE_INFINITY&&s(a)[1]>Number.NEGATIVE_INFINITY){const w=(s(a)[1]-s(a)[0])*.1;return[s(a)[0]-w,s(a)[1]+w]}else return[0,1]}),y=k(()=>{if(s(o)&&s(o)[0]<Number.POSITIVE_INFINITY&&s(o)[1]>Number.NEGATIVE_INFINITY){const w=(s(o)[1]-s(o)[0])*.1;return e.params.plotType==="l"&&s(t).varrev?[s(o)[1]+w,s(o)[0]-w]:[s(o)[0]-w,s(o)[1]+w]}else return[0,1]}),b=k(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const w=Math.max(Math.abs(s(y)[0]),Math.abs(s(p)[0]),s(y)[1],s(p)[1])*1.05;return{x:[-w,w],y:[-w,w]}}else{const w=Math.max(Math.abs(s(p)[0]),s(p)[1])*1.05;return{x:s(y),y:[-w,w]}}return{x:s(y),y:s(p)}});var E=de(),A=Q(E);{var N=w=>{cr(w,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return s(m)},get yLabel(){return s(g)},get limX(){return s(b).x},get limY(){return s(b).y},children:(_,z)=>{var M=Gd(),C=Q(M);const P=k(()=>[s(b).x[0]]),D=k(()=>[s(b).x[1]]);tr(C,{get xStart(){return s(P)},get xEnd(){return s(D)},yStart:[0],yEnd:[0],lineColor:ls});var R=L(C,2);{var Y=W=>{const T=k(()=>[s(b).y[0]]),S=k(()=>[s(b).y[1]]);tr(W,{xStart:[0],xEnd:[0],get yStart(){return s(T)},get yEnd(){return s(S)},lineColor:ls})};U(R,W=>{e.params.plotType==="p"&&W(Y)})}var B=L(R,2);rr(B,{get xValues(){return s(d)},get yValues(){return s(h)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return s(t).varlabels},shortenLabels:!1,get xRange(){return s(o)},set xRange(W){H(o,W,!0)},get yRange(){return s(a)},set yRange(W){H(a,W,!0)}}),I(_,M)},$$slots:{default:!0}})};U(A,w=>{s(d)&&s(h)&&w(N)})}I(r,E),ve()}function Cl(r){const e=Object.keys(r);return{resID:{el:nt,hidden:e.length==1,default:e[0],label:"Result",props:{options:e}},transType:{el:nt,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:er,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},colorBy:{el:nt,hidden:!0,default:"roles",label:"Color by",props:{options:["roles","classes"]}}}}function cs(r){return{resID:{el:nt,hidden:r.length==1,default:r[0],label:"Show",props:{options:r}},zoom:{el:er,hidden:!1,default:!1,label:"Zoom",props:{options:["off","on"]}}}}function Al(r){const e=Object.keys(r),t=e.concat(["both","diff"]);return{resID:{el:nt,hidden:e.length==1,default:e[0],label:"Result",props:{options:t}},distType:{el:nt,hidden:!1,default:"h",label:"Distance",props:{options:["h","q","f"]}},showLabels:{el:er,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Kd(){return{dfID:{el:nt,hidden:!1,default:"both",label:"DoF type",props:{options:["both","Nh","Nq"]}}}}function Jd(r){return{resID:{el:nt,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Qd(r){return{resID:{el:nt,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Ha(r){return{resID:{el:nt,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Zd(r){return{plotType:{el:ga,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:xn,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:xn,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:er,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},axesEqual:{el:er,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function Nl(r){const e=Object.keys(r),t=r[e[0]],l=t.classNames&&t.classNames.length>1?["none","groups","variable"]:["none","variable"];return{plotType:{el:ga,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:xn,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:xn,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},resID:{el:nt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},showLabels:{el:er,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},showEllipse:{el:er,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:nt,hidden:!1,default:"none",label:"Color by",props:{options:l}},colorByVar:{el:xn,hidden:!0,default:1,label:"Variable",props:{min:1,max:t.ncols}},confEllipse:{el:nt,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}var $d=J("<!> <!>",1);function e1(r,e){fe(e,!0);const t=(g,p=pt)=>{ye(g,{label:"Selected",children:(y,b)=>{dt(y,{onclick:()=>e.markOutlier(p()),text:"remove"})},$$slots:{default:!0}})},l=(g,p=pt)=>{ye(g,{label:"Selected",children:(y,b)=>{var E=$d(),A=Q(E);dt(A,{onclick:()=>e.showContributions(p()),text:"plot"});var N=L(A,2);dt(N,{onclick:()=>e.markOutlier(p()),text:"remove"}),I(y,E)},$$slots:{default:!0}})},o={cal:e.calres.pca,pv:e.pvres.pca},a={cal:e.calset,pv:e.pvset},c=k(()=>({cal:e.calres.simca,pv:e.pvres.simca})),v={regular:Cr.regular,extreme:Cr.extreme,outlier:Cr.outlier},u=k(()=>({acceptance:{label:"Acceptance",scope:"objects",component:xl,buttons:l},distances:{label:"Distances",scope:"objects",component:kl,buttons:l},dof:{label:"DoF",scope:"stats",component:Fd},extremes:{label:"Extremes",scope:"stats",component:Ua},sensitivity:{label:"Sensitivity",scope:"stats",component:is},loadings:{label:"Loadings",scope:"stats",component:Xd},scores:{label:"Scores",scope:"objects",component:El,buttons:t}})),f=Xe({acceptance:Cl(o),distances:Al(o),dof:Kd(),extremes:Ha(["cal","pv","both"]),sensitivity:cs(["cal","pv","both"]),scores:Nl(o),loadings:Zd(e.model)});let d=ne(Xe({acceptance:mt(f.acceptance),distances:mt(f.distances),dof:mt(f.dof),extremes:mt(f.extremes),sensitivity:mt(f.sensitivity),scores:mt(f.scores),loadings:mt(f.loadings)}));ue(()=>{s(d).sensitivity.title="Sensitivity",s(d).sensitivity.statName="sensitivity"}),ue(()=>{const g=e.calres.pca.nrows,p=1-e.simca.alpha/100,b=1.96*Math.sqrt(g*p*(1-p))/g;s(d).sensitivity.ci=[p,b]}),ue(()=>{s(d).acceptance.ncomp=e.simca.ncomp,s(d).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(d).acceptance.limType=e.simca.limType,s(d).acceptance.alpha=e.simca.alpha,s(d).acceptance.gamma=e.simca.gamma}),ue(()=>{if(e.simca.limType){const p={cal:e.calres.simca,pv:e.pvres.simca}[s(d).acceptance.resID].v[e.simca.ncomp-1];s(d).acceptance.colorByObj={classColmap:v,labels:[`regular: ${p.cnum.regular}`,`extreme: ${p.cnum.extreme}`,`outliers: ${p.cnum.outliers}`],values:p.c}}}),ue(()=>{s(d).scores.plotType!=="p"?(f.scores.comp1.hidden=!0,f.scores.showEllipse.hidden=!0,s(d).scores.showEllipse=!1):(f.scores.comp1.hidden=!1,f.scores.showEllipse.hidden=!1),s(d).scores.plotType==="l"||s(d).scores.plotType==="b"?(f.scores.colorBy.hidden=!0,s(d).scores.colorBy="none"):f.scores.colorBy.hidden=!1,s(d).scores.colorBy==="variable"?f.scores.colorByVar.hidden=!1:f.scores.colorByVar.hidden=!0,s(d).scores.colorBy==="groups"&&s(d).scores.plotType==="p"?f.scores.confEllipse.hidden=!1:(f.scores.confEllipse.hidden=!0,s(d).scores.confEllipse="none")}),ue(()=>{s(d).loadings.plotType!=="p"?f.loadings.comp1.hidden=!0:f.loadings.comp1.hidden=!1});const m=k(()=>({res:o,classres:s(c),model:e.model,simca:e.simca,data:a,ncomp:e.simca.ncomp})),h={markOutlier:e.markOutlier,showContributions:e.showContributions};wl(r,{get plots(){return s(u)},get controls(){return f},get props(){return s(m)},callbacks:h,get params(){return s(d)},set params(g){H(d,g,!0)}}),ve()}var t1=J('<div class="outliers-pane svelte-1v0yar6"><!></div>'),r1=J('<div class="model-calculator svelte-1v0yar6"><!></div>'),n1=J('<div class="pcv-calculator svelte-1v0yar6"><!></div>'),s1=J('<div class="buttons"><!> <!> <!></div>'),l1=J('<div class="model-stats svelte-1v0yar6"><!></div> <div class="result-stats svelte-1v0yar6"><!></div>',1),o1=J(`<p class="svelte-1v0yar6">In this tab you can train a DD-SIMCA model and optimize its parameters using Procrustes cross-validation. After creating the model you can save it to a file and use it in other tabs. For example, validate and tune it using test set with target class members (tab <strong>Predict: Target</strong>) or apply it to a dataset with non-target class members (tab <strong>Predict: New</strong>).</p> <p class="svelte-1v0yar6"><strong>Step 1.</strong></p> <p class="svelte-1v0yar6">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1v0yar6">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1v0yar6">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1v0yar6"><table class="svelte-1v0yar6"><thead class="svelte-1v0yar6"><tr class="svelte-1v0yar6"><td class="svelte-1v0yar6">Name</td><td class="svelte-1v0yar6">Class</td><td class="svelte-1v0yar6">x1</td><td class="svelte-1v0yar6">x2</td><td class="svelte-1v0yar6">x3</td></tr></thead><tbody class="svelte-1v0yar6"><tr><td class="svelte-1v0yar6">O1</td><td class="svelte-1v0yar6">A</td><td class="svelte-1v0yar6">3.8</td><td class="svelte-1v0yar6">1.3</td><td class="svelte-1v0yar6">13.6</td></tr><tr><td class="svelte-1v0yar6">O2</td><td class="svelte-1v0yar6">A</td><td class="svelte-1v0yar6">11.1</td><td class="svelte-1v0yar6">12.3</td><td class="svelte-1v0yar6">3.3</td></tr><tr><td class="svelte-1v0yar6">O3</td><td class="svelte-1v0yar6">A</td><td class="svelte-1v0yar6">1.2</td><td class="svelte-1v0yar6">2.3</td><td class="svelte-1v0yar6">4.2</td></tr></tbody></table></div> <p class="svelte-1v0yar6"></p>`,1),a1=J(`<p class="svelte-1v0yar6"><strong>Step 2</strong></p> <p class="svelte-1v0yar6">Next step is to create a global PCA model for the calibration set, which will be the basis for the SIMCA model. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to set
               optimal number later.</p>`,1),i1=J('<p class="svelte-1v0yar6"><strong>Step 3</strong></p> <p class="svelte-1v0yar6">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p> <p class="svelte-1v0yar6">After this step SIMCA model will be created automatically and you will be able to tune its parameters.</p>',1),c1=J("<!> <!>",1),u1=J('<div class="help-text svelte-1v0yar6"><!></div>'),f1=J('<!> <div class="app-container svelte-1v0yar6"><div class="app-controls svelte-1v0yar6"><div class="data-loader svelte-1v0yar6"><!></div> <!> <!> <!> <div class="simca-settings svelte-1v0yar6"><!> <!></div> <!></div> <div class="app-content svelte-1v0yar6"><!></div></div>',1);function v1(r,e){fe(e,!0);const t=k(()=>e.session.train);let l=ne(-1),o=ne(!1);function a(j){if(j<0||j>s(t).calres.pca.nrows-1)return;const O=s(t).calres.pca.objindices[j];O>=0&&!s(t).outliers.includes(O)&&(s(t).outliers.push(O),s(t).pvres.simca=null,s(t).calres.simca=null,s(t).simca=null,s(t).pvres.pca=null,s(t).pvset=null,s(t).calres.pca=null,s(t).model=null)}function c(j){j<0||(H(l,j,!0),H(o,!0))}function v(){H(o,!1),H(l,-1)}function u(){s(t).outliers=[],s(t).model=null}function f(){s(t).outliers.pop(),s(t).model=null}Fn(()=>{s(t).calset===null?(s(t).model=null,s(t).className=null,s(t).outliers=[]):s(t).calset&&!s(t).className&&(s(t).className=s(t).calset.classNames[0]),s(t).model===null&&(s(t).calres.simca=null,s(t).simca=null,s(t).calres.pca=null,s(t).pvset=null),s(t).pvset===null&&(s(t).pvres.simca=null,s(t).pvres.pca=null)}),ue(()=>{s(t).model===null&&(s(t).pvres={pca:null,scima:null},s(t).calres={pca:null,simca:null},s(t).simca=null,s(t).pvset=null)}),ue(()=>{s(t).calset===null?(s(t).pvres={pca:null,scima:null},s(t).calres={pca:null,simca:null},s(t).simca=null,s(t).pvset=null,s(t).className=null,s(t).outliers=[],s(t).model=null):s(t).calset&&!s(t).className&&(s(t).className=s(t).calset.classNames[0])}),ue(()=>{s(t).pvset===null&&(s(t).pvres={pca:null,scima:null})}),ue(()=>{s(t).calres.pca&&s(t).simca&&(s(t).calres.simca=yl(s(t).calres.pca,xt(()=>s(t).simca.limType),s(t).simca.eCrit,s(t).simca.oCrit))}),ue(()=>{s(t).pvres.pca&&s(t).simca&&(s(t).pvres.simca=yl(s(t).pvres.pca,xt(()=>s(t).simca.limType),s(t).simca.eCrit,s(t).simca.oCrit))}),ue(()=>{const j=xt(()=>JSON.stringify(e.session,wn));s(t).simca?e.backupSession(j,s(t).model,s(t).calset,s(t).pvset,s(t).simca.ncomp,s(t).pvres.simca):e.backupSession(j,s(t).model,s(t).calset,s(t).pvset,s(t).simca,s(t).pvres.simca)});var d=f1(),m=Q(d);{var h=j=>{gl(j,{get dataset(){return s(t).calset},get model(){return s(t).model},get ncomp(){return s(t).simca.ncomp},get outliers(){return s(t).outliers},get selected(){return s(t).calres.pca.objindices[s(l)]},closeModal:v})};U(m,j=>{s(o)&&j(h)})}var g=L(m,2),p=q(g),y=q(p),b=q(y);nl(b,{className:"Class",get dataset(){return s(t).calset},set dataset(j){s(t).calset=j}});var E=L(y,2);{var A=j=>{var O=t1(),X=q(O);sl(X,{get outliers(){return s(t).outliers},get dataset(){return s(t).calset},resetOutliers:u,undoOutliers:f}),I(j,O)};U(E,j=>{s(t).outliers&&s(t).outliers.length>0&&j(A)})}var N=L(E,2);{var w=j=>{var O=r1(),X=q(O);Qv(X,{get WASM(){return e.WASM},get dataset(){return s(t).calset},get outliers(){return s(t).outliers},get model(){return s(t).model},set model($){s(t).model=$},get resobj(){return s(t).calres.pca},set resobj($){s(t).calres.pca=$}}),I(j,O)};U(N,j=>{s(t).calset&&j(w)})}var _=L(N,2);{var z=j=>{var O=n1(),X=q(O);sd(X,{get WASM(){return e.WASM},get calset(){return s(t).calset},get outliers(){return s(t).outliers},get model(){return s(t).model},get calres(){return s(t).calres.pca},get pvset(){return s(t).pvset},set pvset($){s(t).pvset=$},get pvres(){return s(t).pvres.pca},set pvres($){s(t).pvres.pca=$}}),I(j,O)};U(_,j=>{s(t).model&&j(z)})}var M=L(_,2),C=q(M);{var P=j=>{bl(j,{get model(){return s(t).model},get className(){return s(t).className},get simca(){return s(t).simca},set simca(O){s(t).simca=O}})};U(C,j=>{s(t).model&&s(t).pvres.pca&&s(t).calres.pca&&j(P)})}var D=L(C,2);{var R=j=>{ye(j,{label:"Download",children:(O,X)=>{var $=s1(),ee=q($);dt(ee,{onclick:()=>as(s(t).model,s(t).simca,s(t).calres,s(t).calset,"train",s(t).outliers),text:"Res (cal)"});var te=L(ee,2);dt(te,{onclick:()=>as(s(t).model,s(t).simca,s(t).pvres,s(t).pvset,"PV",s(t).outliers),text:"Res (pv)"});var se=L(te,2);dt(se,{onclick:()=>_l(s(t).model,s(t).simca),text:"Model"}),I(O,$)},$$slots:{default:!0}})};U(D,j=>{s(t).pvres.simca&&s(t).calres.simca&&j(R)})}var Y=L(M,2);{var B=j=>{var O=l1(),X=Q(O),$=q(X);pl($,{get model(){return s(t).model},get simca(){return s(t).simca}});var ee=L(X,2),te=q(ee);fd(te,{get calres(){return s(t).calres.simca},get pvres(){return s(t).pvres.simca},get ncomp(){return s(t).simca.ncomp}}),I(j,O)};U(Y,j=>{s(t).pvres.simca&&s(t).calres.simca&&j(B)})}var W=L(p,2),T=q(W);{var S=j=>{var O=u1(),X=q(O);{var $=te=>{var se=o1();I(te,se)},ee=te=>{var se=c1(),be=Q(se);{var Ee=ie=>{var _e=a1();I(ie,_e)};U(be,ie=>{s(t).model||ie(Ee)})}var pe=L(be,2);{var Ve=ie=>{var _e=i1();I(ie,_e)};U(pe,ie=>{s(t).model&&!s(t).pvset&&ie(Ve)})}I(te,se)};U(X,te=>{s(t).calset?te(ee,!1):te($)})}I(j,O)},V=(j,O)=>{{var X=$=>{var ee=de(),te=Q(ee);gn(te,()=>s(t).pvset.pca,se=>{e1(se,Ir({markOutlier:a,showContributions:c},()=>s(t)))}),I($,ee)};U(j,$=>{s(t).pvres.simca!==null&&$(X)},O)}};U(T,j=>{!s(t).pvres.simca||!s(t).calres.simca?j(S):j(V,!1)})}I(r,d),ve()}var d1=J("<!> <!>",1),m1=J('<p class="model-info svelte-14tszjv"><span>Model file:</span> <span class="file-name svelte-14tszjv"> </span><br> <span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),h1=J("<p><!></p>"),g1=J("<!> <!>",1);function Ga(r,e){fe(e,!0);let t=G(e,"model",15),l=G(e,"simca",15),o=ne(""),a=ne("neutral"),c=ne("");function v(E){try{const A=JSON.parse(E,oa);if(!Object.keys(A).includes("pca","simca")||A.pca.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain SIMCA mdel.");if(!Object.keys(A.pca).includes("hash"))throw Error('you try to load model incompatible with this app version, create a new model or use <a href="/ddsimca-old/">old version</a> of the app.');Array.isArray(A.pca.v)&&(A.pca.v=Float64Array.from(A.pca.v)),A.pca.fileName=s(d),t(A.pca),l(A.simca),H(a,"success"),H(c,"")}catch(A){t(null),H(a,"error"),H(c,A,!0)}}function u(E){const A=new FileReader;A.onload=()=>{v(A.result)},A.readAsText(s(o))}function f(){H(o,""),t(null),H(a,"neutral"),H(c,"")}ue(()=>{s(o)===null?(t(null),H(a,"neutral"),H(c,"")):(H(a,"neutral"),H(c,""))});let d=k(()=>s(o)?s(o).name.replace(/\.[^/.]+$/,""):"");var m=g1(),h=Q(m);{var g=E=>{var A=d1(),N=Q(A);gn(N,()=>s(o),z=>{ye(z,{children:(M,C)=>{ma(M,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return s(o)},set file(P){H(o,P,!0)}})},$$slots:{default:!0}})});var w=L(N,2);{var _=z=>{ye(z,{label:" ",children:(M,C)=>{dt(M,{onclick:u,text:"Load"})},$$slots:{default:!0}})};U(w,z=>{s(o)&&z(_)})}I(E,A)},p=E=>{ye(E,{name:"info",children:(A,N)=>{var w=m1(),_=Q(w),z=L(q(_),2),M=q(z),C=L(z,4),P=L(_,2);nn(P,{onclick:f}),re(()=>{F(z,"title",t().fileName),le(M,t().fileName),le(C,` ${t().ncomp??""} PCs${t().center?", centered":""}${t().scale?", scaled":""}`)}),I(A,w)},$$slots:{default:!0}})};U(h,E=>{t()?E(p,!1):E(g)})}var y=L(h,2);{var b=E=>{ye(E,{status:"error",children:(A,N)=>{var w=h1(),_=q(w);kt(_,()=>s(c)),I(A,w)},$$slots:{default:!0}})};U(y,E=>{(s(a)==="error"||s(c))&&E(b)})}I(r,m),ve()}var p1=J('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">Target</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extremes</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Outliers</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Sensitivity</td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function b1(r,e){fe(e,!0);var t=de(),l=Q(t);{var o=a=>{var c=p1(),v=L(q(c)),u=q(v),f=L(q(u)),d=q(f),m=L(u),h=L(q(m)),g=q(h),p=L(m),y=L(q(p)),b=q(y),E=L(p),A=L(q(E)),N=q(A);re(w=>{le(d,e.res.v[0].c.length),le(g,e.res.v[e.ncomp-1].cnum.extreme),le(b,e.res.v[e.ncomp-1].cnum.outliers),le(N,w)},[()=>e.res.stat.sensitivity[e.ncomp-1].toFixed(3)]),I(a,c)};U(l,a=>{e.res&&a(o)})}I(r,t),ve()}var y1=J("<!> <!>",1);function _1(r,e){fe(e,!0);const t=(g,p=pt)=>{ye(g,{label:"Selected",children:(y,b)=>{dt(y,{onclick:()=>e.markOutlier(p()),text:"remove"})},$$slots:{default:!0}})},l=(g,p=pt)=>{ye(g,{label:"Selected",children:(y,b)=>{var E=y1(),A=Q(E);dt(A,{onclick:()=>e.showContributions(p()),text:"plot"});var N=L(A,2);dt(N,{onclick:()=>e.markOutlier(p()),text:"remove"}),I(y,E)},$$slots:{default:!0}})},o={target:e.testres.pca},a={target:e.testset},c=k(()=>({target:e.testres.simca})),v={regular:Cr.regular,extreme:Cr.extreme,outlier:Cr.outlier},u=k(()=>({acceptance:{label:"Acceptance",scope:"objects",component:xl,buttons:l},distances:{label:"Distances",scope:"objects",component:kl,buttons:l},extremes:{label:"Extremes",scope:"stats",component:Ua},sensitivity:{label:"Sensitivity",scope:"stats",component:is},scores:{label:"Scores",scope:"objects",component:El,buttons:t}})),f=Xe({acceptance:Cl(o),distances:Al(o),extremes:Ha(["target"]),sensitivity:cs(["target"]),scores:Nl(o)});let d=ne(Xe({acceptance:mt(f.acceptance),distances:mt(f.distances),extremes:mt(f.extremes),sensitivity:mt(f.sensitivity),scores:mt(f.scores)}));ue(()=>{s(d).sensitivity.title="Sensitivity",s(d).sensitivity.statName="sensitivity"}),ue(()=>{const g=e.testres.pca.nrows,p=1-e.simca.alpha/100,b=1.96*Math.sqrt(g*p*(1-p))/g;s(d).sensitivity.ci=[p,b]}),ue(()=>{s(d).acceptance.ncomp=e.simca.ncomp,s(d).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(d).acceptance.limType=e.simca.limType,s(d).acceptance.alpha=e.simca.alpha,s(d).acceptance.gamma=e.simca.gamma}),ue(()=>{if(e.simca.limType){const p={target:e.testres.simca}[s(d).acceptance.resID].v[e.simca.ncomp-1];s(d).acceptance.colorByObj={classColmap:v,labels:[`regular: ${p.cnum.regular}`,`extreme: ${p.cnum.extreme}`,`outliers: ${p.cnum.outliers}`],values:p.c}}}),ue(()=>{s(d).scores.plotType!=="p"?(f.scores.comp1.hidden=!0,f.scores.showEllipse.hidden=!0,s(d).scores.showEllipse=!1):(f.scores.comp1.hidden=!1,f.scores.showEllipse.hidden=!1),s(d).scores.plotType==="l"||s(d).scores.plotType==="b"?(f.scores.colorBy.hidden=!0,s(d).scores.colorBy="none"):f.scores.colorBy.hidden=!1,s(d).scores.colorBy==="variable"?f.scores.colorByVar.hidden=!1:f.scores.colorByVar.hidden=!0,s(d).scores.colorBy==="groups"&&s(d).scores.plotType==="p"?f.scores.confEllipse.hidden=!1:(f.scores.confEllipse.hidden=!0,s(d).scores.confEllipse="none")});const m=k(()=>({res:o,classres:s(c),model:e.model,simca:e.simca,data:a,ncomp:e.simca.ncomp})),h={markOutlier:e.markOutlier,showContributions:e.showContributions};wl(r,{get plots(){return s(u)},get controls(){return f},get props(){return s(m)},callbacks:h,get params(){return s(d)},set params(g){H(d,g,!0)}}),ve()}var w1=J('<div class="data-loader svelte-1qdsey6"><!></div>'),x1=J('<div class="outliers-pane svelte-1qdsey6"><!></div>'),k1=J('<div class="buttons"><!> <!></div>'),E1=J('<div class="model-stats svelte-1qdsey6"><!></div> <div class="result-stats svelte-1qdsey6"><!></div>',1),C1=J('<p class="svelte-1qdsey6"><strong>Step 1</strong></p> <p class="svelte-1qdsey6">Load previously trained DD-SIMCA model from file.</p>',1),A1=J(`<p class="svelte-1qdsey6"><strong>Step 2</strong></p> <p class="svelte-1qdsey6">Load testset set from CSV file. The requirements to the file are the same as for the
               training set. The testset may contain class labels for each row (you need to select this option in settings after selecting CSV file) but it is not necessary, as in any case the labels will be ignored and model will assume that all samples are from the target class.</p>`,1),N1=J(`<div class="help-text svelte-1qdsey6"><p class="svelte-1qdsey6">In this tab you can apply previously trained DD-SIMCA model to a dataset consisting of target class members (at least
            the app will assume this, you can of course provide any dataset). You can use it for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),S1=J('<!> <div class="app-container svelte-1qdsey6"><div class="app-controls svelte-1qdsey6"><div class="model-loader svelte-1qdsey6"><!></div> <!> <!> <div class="simca-settings svelte-1qdsey6"><!> <!></div> <!></div> <div class="app-content svelte-1qdsey6"><!></div></div>',1);function M1(r,e){fe(e,!0);const t=k(()=>e.session.target);let l=ne(-1),o=ne(!1);function a(S){if(S<0||S>s(t).testres.pca.nrows-1)return;const V=s(t).testres.pca.objindices[S];V>=0&&!s(t).outliers.includes(V)&&(s(t).outliers.push(V),s(t).testres.simca=null,s(t).testres.pca=null)}function c(S){S<0||(H(l,S,!0),H(o,!0))}function v(){H(o,!1),H(l,-1)}function u(){s(t).outliers=[],s(t).testres.simca=null,s(t).testres.pca=null}function f(){s(t).outliers.pop(),s(t).testres.simca=null,s(t).testres.pca=null}Fn(()=>{s(t).testset===null&&(s(t).outliers=[],s(t).testres.simca=null,s(t).testres.pca=null),s(t).model===null&&(s(t).outliers=[],s(t).simca=null,s(t).testres.simca=null,s(t).testres.pca=null,s(t).testset=null)}),ue(()=>{s(t).model===null&&(s(t).outliers=[],s(t).testres.simca=null,s(t).testres.pca=null,s(t).testset=null)}),ue(()=>{s(t).testset===null&&(s(t).outliers=[],s(t).testres.simca=null,s(t).testres.pca=null)}),ue(()=>{s(t).testres.pca&&s(t).simca&&(s(t).testres.simca=yl(s(t).testres.pca,xt(()=>s(t).simca.limType),s(t).simca.eCrit,s(t).simca.oCrit))}),ue(()=>{const S=xt(()=>JSON.stringify(e.session,wn));e.backupSession(S,s(t).model,s(t).testset,s(t).testres.simca,s(t).simca.ncomp),s(t).simca?e.backupSession(S,s(t).model,s(t).testset,s(t).simca.ncomp,s(t).testres.simca):e.backupSession(S,s(t).model,s(t).testset,s(t).simca,s(t).testres.simca)});var d=S1(),m=Q(d);{var h=S=>{gl(S,{get dataset(){return s(t).testset},get model(){return s(t).model},get ncomp(){return s(t).simca.ncomp},get outliers(){return s(t).outliers},get selected(){return s(t).testres.pca.objindices[s(l)]},closeModal:v})};U(m,S=>{s(o)&&S(h)})}var g=L(m,2),p=q(g),y=q(p),b=q(y);Ga(b,{get model(){return s(t).model},set model(S){s(t).model=S},get simca(){return s(t).simca},set simca(S){s(t).simca=S}});var E=L(y,2);{var A=S=>{var V=w1(),j=q(V);nl(j,{get outliers(){return s(t).outliers},get WASM(){return e.WASM},get model(){return s(t).model},className:"Class",get dataset(){return s(t).testset},set dataset(O){s(t).testset=O},get resobj(){return s(t).testres.pca},set resobj(O){s(t).testres.pca=O}}),I(S,V)};U(E,S=>{s(t).model&&S(A)})}var N=L(E,2);{var w=S=>{var V=x1(),j=q(V);sl(j,{get outliers(){return s(t).outliers},get dataset(){return s(t).testset},resetOutliers:u,undoOutliers:f}),I(S,V)};U(N,S=>{s(t).outliers&&s(t).outliers.length>0&&S(w)})}var _=L(N,2),z=q(_);{var M=S=>{bl(S,{get model(){return s(t).model},get className(){return s(t).className},get simca(){return s(t).simca},set simca(V){s(t).simca=V}})};U(z,S=>{s(t).model&&s(t).testres.pca&&S(M)})}var C=L(z,2);{var P=S=>{ye(S,{label:"Download",children:(V,j)=>{var O=k1(),X=q(O);dt(X,{onclick:()=>as(s(t).model,s(t).simca,s(t).testres,s(t).testset,"target",s(t).outliers),text:"Res"});var $=L(X,2);dt($,{onclick:()=>_l(s(t).model,s(t).simca),text:"Model"}),I(V,O)},$$slots:{default:!0}})};U(C,S=>{s(t).testres.simca&&S(P)})}var D=L(_,2);{var R=S=>{var V=E1(),j=Q(V),O=q(j);pl(O,{get model(){return s(t).model},get simca(){return s(t).simca}});var X=L(j,2),$=q(X);b1($,{get res(){return s(t).testres.simca},get ncomp(){return s(t).simca.ncomp}}),I(S,V)};U(D,S=>{s(t).testres.simca&&S(R)})}var Y=L(p,2),B=q(Y);{var W=S=>{var V=N1(),j=L(q(V),2);{var O=$=>{var ee=C1();I($,ee)},X=$=>{var ee=de(),te=Q(ee);{var se=be=>{var Ee=A1();I(be,Ee)};U(te,be=>{s(t).testset||be(se)})}I($,ee)};U(j,$=>{s(t).model?$(X,!1):$(O)})}I(S,V)},T=S=>{var V=de(),j=Q(V);gn(j,()=>s(t).testres.pca,O=>{_1(O,Ir({markOutlier:a,showContributions:c},()=>s(t)))}),I(S,V)};U(B,S=>{s(t).testres.simca?S(T,!1):S(W)})}I(r,d),ve()}var T1=J('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">New</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">In</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Out</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Aliens</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extrenal</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Specificity</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Selectivity</td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function z1(r,e){fe(e,!0);var t=de(),l=Q(t);{var o=a=>{var c=T1(),v=L(q(c)),u=q(v),f=L(q(u)),d=q(f),m=L(u),h=L(q(m)),g=q(h),p=L(m),y=L(q(p)),b=q(y),E=L(p),A=L(q(E)),N=q(A),w=L(E),_=L(q(w)),z=q(_),M=L(w),C=L(q(M)),P=q(C),D=L(M),R=L(q(D)),Y=q(R);re((B,W)=>{le(d,e.res.v[0].c.length),le(g,e.res.v[e.ncomp-1].dnum.in),le(b,e.res.v[e.ncomp-1].dnum.out),le(N,e.res.v[e.ncomp-1].anum.aliens),le(z,e.res.v[e.ncomp-1].anum.external),le(P,B),le(Y,W)},[()=>e.res.stat.specificity[e.ncomp-1].toFixed(3),()=>e.res.stat.selectivity[e.ncomp-1].toFixed(3)]),I(a,c)};U(l,a=>{e.res&&a(o)})}I(r,t),ve()}var P1=J("<!> <!> <!>",1),I1=J("<!> <!> <!>",1);function L1(r,e){fe(e,!0);const t="#e0e0e0",l="Number of aliens (expected)",o="Number of aliens (observed)",a="plot-aliens";function c(C){const P=ge.zeros(C+1),D=ge.zeros(C+1),R=ge.zeros(C+1),Y=ge.zeros(C+1);for(let B=1;B<C;B++){const W=B/C,T=2*Math.sqrt(B*(1-W));P.v[B]=B,R.v[B]=B,D.v[B]=B-T,Y.v[B]=B+T}return P.v[C]=C,R.v[C]=C,D.v[C]=C,Y.v[C]=C,{xStart:P,xEnd:R,yStart:D,yEnd:Y}}function v(C,P,D){const R=C.v[D-1],Y=R.anum.aliens,B=C.nrows,W=ge.zeros(Y);for(let T=1;T<=Y;T++){const S=T/Y,V=Qn(S),j=R.m*Math.pow(R.Sz*V+R.Mz,1/R.hz);let O=0;for(let X=0;X<B;X++)R.a[X]==="alien"&&R.f[X]<j&&(O+=1);W.v[T-1]=O}return W}let u=k(()=>e.props&&e.props.classres?e.props.classres:null),f=k(()=>e.props&&e.props.simca?e.props.simca:null),d=k(()=>e.props&&e.props.ncomp?e.props.ncomp:null),m=k(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(u))),h=k(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),g=k(()=>s(m)?s(m).map(C=>({id:C,label:C,point:{marker:1,lineColor:Ft[C],faceColor:qr[C],markerSize:.85,lineWidth:1.5}})):null),p=k(()=>s(u)&&s(m)?s(m).reduce((C,P)=>(C[P]=ge.seq(1,s(u)[P].v[s(d)-1].anum.aliens),C),{}):null),y=k(()=>s(u)&&s(m)&&s(d)?s(m).reduce((C,P)=>(C[P]=v(s(u)[P],s(f),s(d)),C),{}):null),b=k(()=>s(m)?s(m).reduce((C,P)=>Math.max(C,s(p)[P].length),0):1),E=k(()=>s(b)>1?c(s(b)):null),A=k(()=>s(p)?[-1,s(b)+2]:[0,1]),N=k(()=>s(p)?[-1,s(b)+2]:[0,1]),w=k(()=>s(d)?`Aliens (A = ${s(d)})`:"Aliens");var _=de(),z=Q(_);{var M=C=>{cr(C,{get title(){return s(w)},xLabel:l,yLabel:o,get limX(){return s(A)},get limY(){return s(N)},fileName:a,whole:!0,children:(P,D)=>{var R=I1(),Y=Q(R);{var B=V=>{var j=P1(),O=Q(j);tr(O,Ir(()=>s(E),{lineColor:t}));var X=L(O,2);Ht(X,{get xValues(){return s(E).xStart},get yValues(){return s(E).yStart},lineColor:t});var $=L(X,2);Ht($,{get xValues(){return s(E).xEnd},get yValues(){return s(E).yEnd},lineColor:t}),I(V,j)};U(Y,V=>{s(E)&&V(B)})}var W=L(Y,2);Ie(W,17,()=>s(m),Fe,(V,j)=>{rr(V,{get xValues(){return s(p)[s(j)]},get yValues(){return s(y)[s(j)]},plotType:"p",showLabels:!1,get faceColor(){return qr[s(j)]},get mainColor(){return Ft[s(j)]},lineWidth:1.5})});var T=L(W,2);{var S=V=>{sn(V,{get items(){return s(g)},get position(){return s(h)}})};U(T,V=>{s(g)&&s(g).length>0&&V(S)})}I(P,R)},$$slots:{default:!0}})};U(z,C=>{s(u)&&C(M)})}I(r,_),ve()}var R1=J("<!> <!> <!> <!> <!>",1);function j1(r,e){fe(e,!0);const t="1 – selectivity, β",l="Expected sensitivity, 1 – ɑ",o="plot-selectivity-integral",a=[-.05,1.05],c=[-.05,1.05],v="bottomright",u=k(()=>e.props&&e.props.classres?e.props.classres:null),f=k(()=>e.props&&e.props.simca?e.props.simca:null),d=k(()=>s(u)?Object.keys(s(u))[0]:null),m=141;function h(R){const Y=ge.zeros(m),B=ge.zeros(m);Y.v[0]=1,B.v[0]=1;let W=1,T=0;for(let S=.001;S<.1;S=S+.002){const V=R(S);Y.v[W]=V,B.v[W]=1-S,T=T+V*.002,W=W+1}for(let S=.1;S<.9;S=S+.02){const V=R(S);Y.v[W]=V,B.v[W]=1-S,T=T+V*.02,W=W+1}for(let S=.9;S<1;S=S+.002){const V=R(S);Y.v[W]=V,B.v[W]=1-S,T=T+V*.002,W=W+1}return Y.v[W]=0,B.v[W]=0,{x:Y,y:B,auc:1-T}}let g=ne(void 0),p=ne(void 0),y=ne(void 0);ue(()=>{(s(p)!==s(f).ncomp||s(y)!==s(f).limType)&&(H(p,s(f).ncomp,!0),H(y,s(f).limType,!0),H(g,s(u)[s(d)].v[s(f).ncomp-1],!0))});const b=k(()=>s(g)?1/(s(g).k+s(g).s):null),E=k(()=>s(g)?1/s(g).Sz:null);function A(R){if(!s(g))return null;const B=Wt(1-R,s(g).k)/s(g).f0;return Jn((Math.pow(B*s(b),s(g).hz)-s(g).Mz)*s(E))}const N=k(()=>s(f).alpha/100),w=k(()=>A(s(N))),_=k(()=>h(A));let z=k(()=>s(d)?[s(d)].map(R=>({id:R,label:R,point:{marker:1,lineColor:Ft[R],faceColor:qr[R],markerSize:.85,lineWidth:1.5}})):null),M=k(()=>s(f).ncomp?`Selecitivity (A = ${s(f).ncomp}, AUC = ${s(_).auc.toFixed(4)})`:"Selectivity");var C=de(),P=Q(C);{var D=R=>{cr(R,{get title(){return s(M)},xLabel:t,yLabel:l,limX:a,limY:c,fileName:o,children:(Y,B)=>{var W=R1(),T=Q(W);tr(T,{xStart:[0],xEnd:[1],yStart:[0],yEnd:[1],lineColor:"#a0a0a0",lineType:3});var S=L(T,2);rr(S,{get xValues(){return s(_).x},get yValues(){return s(_).y},plotType:"l",showLabels:!1,lineWidth:1.5});var V=L(S,2);const j=k(()=>[a[0]]),O=k(()=>[a[1]]),X=k(()=>[1-s(N)]),$=k(()=>[1-s(N)]);tr(V,{get xStart(){return s(j)},get xEnd(){return s(O)},get yStart(){return s(X)},get yEnd(){return s($)},lineColor:"#a0a0a0"});var ee=L(V,2);const te=k(()=>[s(w)]),se=k(()=>[1-s(N)]);Ia(ee,{get xValues(){return s(te)},get yValues(){return s(se)},lineColor:"#a0a0a0",lineWidth:2,get faceColor(){return bt.PRIMARY}});var be=L(ee,2);{var Ee=pe=>{sn(pe,{get items(){return s(z)},position:v})};U(be,pe=>{s(z)&&s(z).length>0&&pe(Ee)})}I(Y,W)},$$slots:{default:!0}})};U(P,R=>{s(_)&&R(D)})}I(r,C),ve()}function q1(r,e){fe(e,!0);const t={alt:e.altres.pca},l={alt:e.altset},o=k(()=>({alt:e.altres.simca})),a={alien:Cr.aliens,external:Cr.external};let c=null;if(e.altres.simca.classNames&&e.altres.simca.classNames.length>1){const h=e.altres.simca.classNames?e.altres.simca.classNames.length:0,g=h>0?dl(h):null;c=e.altres.simca.classNames.reduce((p,y,b)=>(p[y]=g[b],p),{})}const v=k(()=>({acceptance:{label:"Acceptance",scope:"objects",component:xl},distances:{label:"Distances",scope:"objects",component:kl},aliens:{label:"Aliens",scope:"stat",component:L1},specificity:{label:"Specificity",scope:"stat",component:is},selectivity:{label:"Selectivity (vs PCs)",scope:"stat",component:is},selectivityInt:{label:"Selectivity (integral)",scope:"stat",component:j1},scores:{label:"Scores",scope:"objects",component:El}})),u=Xe({acceptance:Cl(t),distances:Al(t),aliens:Qd(["alt"]),specificity:cs(["alt"]),selectivity:cs(["alt"]),selectivityInt:Jd(["alt"]),scores:Nl(t)});let f=ne(Xe({acceptance:mt(u.acceptance),distances:mt(u.distances),aliens:mt(u.aliens),specificity:mt(u.specificity),selectivity:mt(u.selectivity),selectivityInt:mt(u.selectivityInt),scores:mt(u.scores)}));ue(()=>{s(f).specificity.title="Specificity",s(f).specificity.statName="specificity"}),ue(()=>{s(f).selectivity.title="Selectivity",s(f).selectivity.statName="selectivity"}),ue(()=>{s(f).acceptance.ncomp=e.simca.ncomp,s(f).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(f).acceptance.limType=e.simca.limType,s(f).acceptance.alpha=e.simca.alpha,s(f).acceptance.gamma=e.simca.gamma}),ue(()=>{s(f)&&s(f).acceptance&&(u.acceptance.colorBy.hidden=c===null)}),ue(()=>{if(e.simca.limType){const g={alt:e.altres.simca}[s(f).acceptance.resID].v[e.simca.ncomp-1];s(f).acceptance.colorBy==="classes"?s(f).acceptance.colorByObj={classColmap:c,labels:e.altres.simca.classNames,values:e.altres.simca.classes}:s(f).acceptance.colorByObj={classColmap:a,labels:[`aliens: ${g.anum.aliens}`,`external: ${g.anum.external}`],values:g.a}}}),ue(()=>{s(f).scores.plotType!=="p"?(u.scores.comp1.hidden=!0,u.scores.showEllipse.hidden=!0,s(f).scores.showEllipse=!1):(u.scores.comp1.hidden=!1,u.scores.showEllipse.hidden=!1),s(f).scores.plotType==="l"||s(f).scores.plotType==="b"?(u.scores.colorBy.hidden=!0,s(f).scores.colorBy="none"):u.scores.colorBy.hidden=!1,s(f).scores.colorBy==="variable"?u.scores.colorByVar.hidden=!1:u.scores.colorByVar.hidden=!0,s(f).scores.colorBy==="groups"&&s(f).scores.plotType==="p"?u.scores.confEllipse.hidden=!1:(u.scores.confEllipse.hidden=!0,s(f).scores.confEllipse="none")});const d=k(()=>({res:t,classres:s(o),model:e.model,simca:e.simca,data:l,ncomp:e.simca.ncomp})),m={markOutlier:e.markOutlier,showContributions:e.showContributions};wl(r,{get plots(){return s(v)},get controls(){return u},get props(){return s(d)},callbacks:m,get params(){return s(f)},set params(h){H(f,h,!0)}}),ve()}var D1=J('<div class="data-loader svelte-1qdsey6"><!></div>'),F1=J('<div class="outliers-pane svelte-1qdsey6"><!></div>'),O1=J('<div class="buttons"><!> <!></div>'),V1=J('<div class="model-stats svelte-1qdsey6"><!></div> <div class="result-stats svelte-1qdsey6"><!></div>',1),B1=J('<p class="svelte-1qdsey6"><strong>Step 1</strong></p> <p class="svelte-1qdsey6">Load previously trained DD-SIMCA model from file.</p>',1),Y1=J(`<p class="svelte-1qdsey6"><strong>Step 2</strong></p> <p class="svelte-1qdsey6">Load data set from CSV file. The requirements to the file are the same as for the
               training set. The data may contain class labels for each row (you need to select this option in settings after selecting CSV file) but it is not necessary, as in any case the labels will be ignored and model will assume that all samples are from non-target classes.</p>`,1),W1=J('<div class="help-text svelte-1qdsey6"><p class="svelte-1qdsey6">In this tab you can apply previously trained DD-SIMCA model to a dataset consisting of non-target (alternative) class members (at least the app will assume this, you can of course provide any dataset). You can use it for testing performance of the model on the alternative classes, or tune its parameters, if necessary.</p> <!></div>'),U1=J('<!> <div class="app-container svelte-1qdsey6"><div class="app-controls svelte-1qdsey6"><div class="model-loader svelte-1qdsey6"><!></div> <!> <!> <div class="simca-settings svelte-1qdsey6"><!> <!></div> <!></div> <div class="app-content svelte-1qdsey6"><!></div></div>',1);function H1(r,e){fe(e,!0);const t=k(()=>e.session.new);let l=ne(-1),o=ne(!1);function a(T){if(T<0||T>s(t).altres.pca.nrows-1)return;const S=s(t).altres.pca.objindices[T];S>=0&&!s(t).outliers.includes(S)&&(s(t).outliers.push(S),s(t).altres.simca=null,s(t).altres.pca=null)}function c(T){T<0||(H(l,T,!0),H(o,!0))}function v(){H(o,!1),H(l,-1)}function u(){s(t).outliers=[],s(t).altres.simca=null,s(t).altres.pca=null}Fn(()=>{s(t).altset===null&&(s(t).outliers=[],s(t).altres.simca=null,s(t).altres.pca=null),s(t).model===null&&(s(t).outliers=[],s(t).simca=null,s(t).altres.simca=null,s(t).altres.pca=null,s(t).altset=null)}),ue(()=>{s(t).model===null&&(s(t).outliers=[],s(t).altres.simca=null,s(t).altres.pca=null,s(t).altset=null)}),ue(()=>{s(t).altset===null&&(s(t).outliers=[],s(t).altres.simca=null,s(t).altres.pca=null)}),ue(()=>{s(t).altres.pca&&s(t).simca&&(s(t).altres.simca=cd(s(t).altres.pca,xt(()=>s(t).simca.limType),xt(()=>s(t).simca.Nf),s(t).simca.eCrit,s(t).simca.oCrit))}),ue(()=>{const T=xt(()=>JSON.stringify(e.session,wn));e.backupSession(T,s(t).model,s(t).altset,s(t).altres.simca,s(t).simca.ncomp)});var f=U1(),d=Q(f);{var m=T=>{gl(T,{get dataset(){return s(t).altset},get model(){return s(t).model},get ncomp(){return s(t).simca.ncomp},get outliers(){return s(t).outliers},get selected(){return s(l)},closeModal:v})};U(d,T=>{s(o)&&T(m)})}var h=L(d,2),g=q(h),p=q(g),y=q(p);Ga(y,{get model(){return s(t).model},set model(T){s(t).model=T},get simca(){return s(t).simca},set simca(T){s(t).simca=T}});var b=L(p,2);{var E=T=>{var S=D1(),V=q(S);nl(V,{get outliers(){return s(t).outliers},get WASM(){return e.WASM},get model(){return s(t).model},className:"Class",get dataset(){return s(t).altset},set dataset(j){s(t).altset=j},get resobj(){return s(t).altres.pca},set resobj(j){s(t).altres.pca=j}}),I(T,S)};U(b,T=>{s(t).model&&T(E)})}var A=L(b,2);{var N=T=>{var S=F1(),V=q(S);sl(V,{get outliers(){return s(t).outliers},get dataset(){return s(t).altset},resetOutliers:u}),I(T,S)};U(A,T=>{s(t).outliers&&s(t).outliers.length>0&&T(N)})}var w=L(A,2),_=q(w);{var z=T=>{bl(T,{get model(){return s(t).model},get className(){return s(t).className},isAlt:!0,get simca(){return s(t).simca},set simca(S){s(t).simca=S}})};U(_,T=>{s(t).model&&s(t).altres.pca&&T(z)})}var M=L(_,2);{var C=T=>{ye(T,{label:"Download",children:(S,V)=>{var j=O1(),O=q(j);dt(O,{onclick:()=>as(s(t).model,s(t).simca,s(t).altres,s(t).altset,"new",s(t).outliers),text:"Res"});var X=L(O,2);dt(X,{onclick:()=>_l(s(t).model,s(t).simca),text:"Model"}),I(S,j)},$$slots:{default:!0}})};U(M,T=>{s(t).altres.simca&&T(C)})}var P=L(w,2);{var D=T=>{var S=V1(),V=Q(S),j=q(V);pl(j,{get model(){return s(t).model},get simca(){return s(t).simca},isAlt:!0});var O=L(V,2),X=q(O);z1(X,{get res(){return s(t).altres.simca},get ncomp(){return s(t).simca.ncomp}}),I(T,S)};U(P,T=>{s(t).altres.simca&&T(D)})}var R=L(g,2),Y=q(R);{var B=T=>{var S=W1(),V=L(q(S),2);{var j=X=>{var $=B1();I(X,$)},O=X=>{var $=de(),ee=Q($);{var te=se=>{var be=Y1();I(se,be)};U(ee,se=>{s(t).altset||se(te)})}I(X,$)};U(V,X=>{s(t).model?X(O,!1):X(j)})}I(T,S)},W=T=>{var S=de(),V=Q(S);gn(V,()=>s(t).altres.pca,j=>{q1(j,Ir({markOutlier:a,showContributions:c},()=>s(t)))}),I(T,S)};U(Y,T=>{s(t).altres.simca?T(W,!1):T(B)})}I(r,f),ve()}function Xa(r,e){H(e,!0)}function G1(r,e,t){const l=el(new Date),o=e.appID+"-session-"+l+".json";s(t).date=l;const a=JSON.stringify(s(t),wn),c=new Blob([a],{type:"text/json"}),v=window.URL.createObjectURL(c),u=document.createElement("a");u.setAttribute("href",v),u.setAttribute("download",o),u.click()}function X1(r,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var K1=J('<sup style="color:red">β</sup>'),J1=J('<li><button class="svelte-1cyr8za"> </button></li>'),Q1=J("<div><!></div>"),Z1=J('<div class="info-container svelte-1cyr8za"><!></div>'),$1=J('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function e0(r,e){fe(e,!0);let t=G(e,"tabs",19,()=>[]),l=G(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let a=ne(!1),c=ne(void 0),v=ne("Current session "),u=ne(!1);function f(w){H(v,w,!0),H(u,!0),setTimeout(()=>{H(v,"Current session "),H(u,!1)},1e3)}function d(){H(a,!1)}function m(w){s(c).tab=w}function h(){const w=indexedDB.open(o,1);w.onsuccess=_=>{const M=_.target.result.transaction(e.appID,"readwrite");M.objectStore(e.appID).delete("session"),M.oncomplete=()=>{H(c,e.initSession(),!0),f("Session was reinitialzed.")},M.onerror=()=>console.error("Failed to session from DB.")}}function g(w,_){window.localStorage.removeItem(e.appID+"-blocked");const z=indexedDB.open(o,1);z.onsuccess=M=>{const D=M.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);D.put(w,"session"),D.put(el(new Date),"session-update")}}function p(){new Promise((w,_)=>{const z=indexedDB.open(o,1);z.onsuccess=M=>{const R=M.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");R.onsuccess=()=>w(R.result),R.onerror=()=>_(R.error)}}).then(w=>{y(w),H(v,"Last session is restored "),H(u,!0),setTimeout(()=>{H(v,"Current session "),H(u,!1)},1500)}).catch(w=>{console.error(w),H(c,e.initSession(),!0)})}function y(w){if(!w||w==="undefined"){H(c,e.initSession(),!0);return}const _=JSON.parse(w,oa);H(c,e.checkSession(_)?_:e.initSession(e.appID),!0)}function b(w){e.resetSession(s(c));const _=new FileReader;_.onload=()=>{y(_.result),w.target.value=""},_.readAsText(w.target.files[0])}Nc(()=>{const w=e.appID,_=indexedDB.open(o,1);_.onupgradeneeded=z=>{const M=z.target.result;M.objectStoreNames.contains(w)||M.createObjectStore(w)},_.onsuccess=z=>{p()}});var E=de(),A=Q(E);{var N=w=>{var _=$1(),z=q(_),M=q(z),C=q(M),P=L(C,2),D=q(P),R=L(D);{var Y=Ae=>{var ae=K1();I(Ae,ae)};U(R,Ae=>{l()&&Ae(Y)})}var B=L(P,2),W=q(B),T=L(M,2);Ie(T,21,t,Fe,(Ae,ae,we)=>{var ce=J1();let Le;var ke=q(ce);ke.__click=()=>m(we),ke.__keydown=()=>m(we);var Ne=q(ke);re(at=>{Le=vt(ce,1,"nav-item svelte-1cyr8za",null,Le,at),le(Ne,s(ae).name)},[()=>({selected:s(c).tab===we})]),I(Ae,ce)});var S=L(z,2);Ie(S,21,t,Fe,(Ae,ae,we)=>{var ce=Q1();let Le;var ke=q(ce);Ls(ke,()=>s(ae).component,(Ne,at)=>{at(Ne,{get WASM(){return e.WASM},get session(){return s(c)},backupSession:g})}),re(Ne=>Le=vt(ce,1,"tab-content svelte-1cyr8za",null,Le,Ne),[()=>({hidden:s(c).tab!==we})]),I(Ae,ce)});var V=L(S,2),j=q(V);let O;var X=q(j),$=q(X),ee=L(X,2),te=q(ee);te.__change=b;var se=L(ee,2);se.__click=[G1,e,c];var be=L(se,2);be.__click=[X1,h];var Ee=L(j,2),pe=q(Ee);pe.__click=[Xa,a],pe.__keydown=[Xa,a];var Ve=L(pe,2);xr(Ve,()=>e.footer);var ie=L(V,2);{var _e=Ae=>{Ra(Ae,{closeModal:d,children:(ae,we)=>{var ce=Z1(),Le=q(ce);xr(Le,()=>e.info),I(ae,ce)},$$slots:{default:!0}})};U(ie,Ae=>{s(a)&&Ae(_e)})}re(Ae=>{F(C,"alt",e.appShortTitle),le(D,e.appTitle),le(W,e.appSlogan),O=vt(j,1,"session svelte-1cyr8za",null,O,Ae),le($,s(v))},[()=>({"no-buttons":s(u)})]),I(w,_)};U(A,w=>{s(c)&&w(N)})}I(r,E),ve()}rt(["click","keydown","change"]);const h0="modulepreload",g0=function(r){return"/"+r},p0={},t0=function(e,t,l){let o=Promise.resolve();function a(c){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=c,window.dispatchEvent(v),!v.defaultPrevented)throw c}return o.then(c=>{for(const v of c||[])v.status==="rejected"&&a(v.reason);return e().catch(a)})};var r0=async function(r={}){var e,t=r,l,o,a=new Promise((K,Z)=>{l=K,o=Z}),c=typeof window=="object",v=typeof WorkerGlobalScope<"u",u=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(u){const{createRequire:K}=await t0(()=>Promise.resolve().then(()=>o0),void 0);var f=K(Pe&&Pe.tagName.toUpperCase()==="SCRIPT"&&Pe.src||new URL("ddsimca.js",document.baseURI).href)}var d=(K,Z)=>{throw Z},m=Pe&&Pe.tagName.toUpperCase()==="SCRIPT"&&Pe.src||new URL("ddsimca.js",document.baseURI).href,h="";function g(K){return t.locateFile?t.locateFile(K,h):h+K}var p,y;if(u){var b=f("fs"),E=f("path");m.startsWith("file:")&&(h=E.dirname(f("url").fileURLToPath(m))+"/"),y=K=>{K=R(K)?new URL(K):K;var Z=b.readFileSync(K);return Z},p=async(K,Z=!0)=>{K=R(K)?new URL(K):K;var oe=b.readFileSync(K,Z?void 0:"utf8");return oe},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),d=(K,Z)=>{throw process.exitCode=K,Z}}else if(c||v){try{h=new URL(".",m).href}catch{}v&&(y=K=>{var Z=new XMLHttpRequest;return Z.open("GET",K,!1),Z.responseType="arraybuffer",Z.send(null),new Uint8Array(Z.response)}),p=async K=>{if(R(K))return new Promise((oe,qe)=>{var Te=new XMLHttpRequest;Te.open("GET",K,!0),Te.responseType="arraybuffer",Te.onload=()=>{if(Te.status==200||Te.status==0&&Te.response){oe(Te.response);return}qe(Te.status)},Te.onerror=qe,Te.send(null)});var Z=await fetch(K,{credentials:"same-origin"});if(Z.ok)return Z.arrayBuffer();throw new Error(Z.status+" : "+Z.url)}}var A=console.log.bind(console),N=console.error.bind(console),w,_,z=!1,M,C,P,D,R=K=>K.startsWith("file://");function Y(){var K=_.buffer;C=new Int8Array(K),P=new Uint8Array(K),t.HEAP32=new Int32Array(K),D=new Uint32Array(K),t.HEAPF64=new Float64Array(K),new BigInt64Array(K),new BigUint64Array(K)}function B(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)ce(t.preRun.shift());_e(we)}function W(){je.k()}function T(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)ae(t.postRun.shift());_e(Ae)}var S=0,V=null;function j(K){var Z;S++,(Z=t.monitorRunDependencies)==null||Z.call(t,S)}function O(K){var oe;if(S--,(oe=t.monitorRunDependencies)==null||oe.call(t,S),S==0&&V){var Z=V;V=null,Z()}}function X(K){var oe;(oe=t.onAbort)==null||oe.call(t,K),K="Aborted("+K+")",N(K),z=!0,K+=". Build with -sASSERTIONS for more info.";var Z=new WebAssembly.RuntimeError(K);throw o(Z),Z}var $;function ee(){return t.locateFile?g("/ddsimca/pca_wasm.wasm"):new URL("/ddsimca/ddsimca.wasm",Pe&&Pe.tagName.toUpperCase()==="SCRIPT"&&Pe.src||new URL("ddsimca.js",document.baseURI).href).href}function te(K){if(K==$&&w)return new Uint8Array(w);if(y)return y(K);throw"both async and sync fetching of the wasm failed"}async function se(K){if(!w)try{var Z=await p(K);return new Uint8Array(Z)}catch{}return te(K)}async function be(K,Z){try{var oe=await se(K),qe=await WebAssembly.instantiate(oe,Z);return qe}catch(Te){N(`failed to asynchronously prepare wasm: ${Te}`),X(Te)}}async function Ee(K,Z,oe){if(!K&&typeof WebAssembly.instantiateStreaming=="function"&&!R(Z)&&!u)try{var qe=fetch(Z,{credentials:"same-origin"}),Te=await WebAssembly.instantiateStreaming(qe,oe);return Te}catch(We){N(`wasm streaming compile failed: ${We}`),N("falling back to ArrayBuffer instantiation")}return be(Z,oe)}function pe(){return{a:gr}}async function Ve(){function K(We,Ze){return je=We.exports,_=je.j,Y(),O(),je}j();function Z(We){return K(We.instance)}var oe=pe();if(t.instantiateWasm)return new Promise((We,Ze)=>{t.instantiateWasm(oe,(Ue,Ot)=>{We(K(Ue))})});$??($=ee());try{var qe=await Ee(w,$,oe),Te=Z(qe);return Te}catch(We){return o(We),Promise.reject(We)}}class ie{constructor(Z){Vr(this,"name","ExitStatus");this.message=`Program terminated with exit(${Z})`,this.status=Z}}var _e=K=>{for(;K.length>0;)K.shift()(t)},Ae=[],ae=K=>Ae.push(K),we=[],ce=K=>we.push(K),Le=!0,ke=K=>a0(K),Ne=()=>c0(),at=()=>X(""),nr=0,Qe=()=>{Le=!1,nr=0},ft={},tt=K=>{if(K instanceof ie||K=="unwind")return M;d(1,K)},Gt=()=>Le||nr>0,Nn=K=>{var Z;M=K,Gt()||((Z=t.onExit)==null||Z.call(t,K),z=!0),d(K,new ie(K))},vs=(K,Z)=>{M=K,Nn(K)},on=vs,Sl=()=>{if(!Gt())try{on(M)}catch(K){tt(K)}},Ml=K=>{if(!z)try{K(),Sl()}catch(Z){tt(Z)}},Tl=()=>performance.now(),zl=(K,Z)=>{if(ft[K]&&(clearTimeout(ft[K].id),delete ft[K]),!Z)return 0;var oe=setTimeout(()=>{delete ft[K],Ml(()=>Ll(K,Tl()))},Z);return ft[K]={id:oe,timeout_ms:Z},0},Pl=()=>Date.now(),xe=()=>2147483648,ze=(K,Z)=>Math.ceil(K/Z)*Z,Me=K=>{var Z=_.buffer,oe=(K-Z.byteLength+65535)/65536|0;try{return _.grow(oe),Y(),1}catch{}},it=K=>{var Z=P.length;K>>>=0;var oe=xe();if(K>oe)return!1;for(var qe=1;qe<=4;qe*=2){var Te=Z*(1+.2/qe);Te=Math.min(Te,K+100663296);var We=Math.min(oe,ze(Math.max(K,Te),65536)),Ze=Me(We);if(Ze)return!0}return!1},Et=K=>52;function sr(K,Z,oe,qe){return 70}var It=[null,[],[]],St=typeof TextDecoder<"u"?new TextDecoder:void 0,He=(K,Z=0,oe=NaN)=>{for(var qe=Z+oe,Te=Z;K[Te]&&!(Te>=qe);)++Te;if(Te-Z>16&&K.buffer&&St)return St.decode(K.subarray(Z,Te));for(var We="";Z<Te;){var Ze=K[Z++];if(!(Ze&128)){We+=String.fromCharCode(Ze);continue}var Ue=K[Z++]&63;if((Ze&224)==192){We+=String.fromCharCode((Ze&31)<<6|Ue);continue}var Ot=K[Z++]&63;if((Ze&240)==224?Ze=(Ze&15)<<12|Ue<<6|Ot:Ze=(Ze&7)<<18|Ue<<12|Ot<<6|K[Z++]&63,Ze<65536)We+=String.fromCharCode(Ze);else{var Fr=Ze-65536;We+=String.fromCharCode(55296|Fr>>10,56320|Fr&1023)}}return We},Re=(K,Z)=>{var oe=It[K];Z===0||Z===10?((K===1?A:N)(He(oe)),oe.length=0):oe.push(Z)},_t=(K,Z)=>K?He(P,K,Z):"",gt=(K,Z,oe,qe)=>{for(var Te=0,We=0;We<oe;We++){var Ze=D[Z>>2],Ue=D[Z+4>>2];Z+=8;for(var Ot=0;Ot<Ue;Ot++)Re(K,P[Ze+Ot]);Te+=Ue}return D[qe>>2]=Te,0},ct=K=>{var Z=t["_"+K];return Z},$e=(K,Z)=>{C.set(K,Z)},Xt=K=>{for(var Z=0,oe=0;oe<K.length;++oe){var qe=K.charCodeAt(oe);qe<=127?Z++:qe<=2047?Z+=2:qe>=55296&&qe<=57343?(Z+=4,++oe):Z+=3}return Z},Dr=(K,Z,oe,qe)=>{if(!(qe>0))return 0;for(var Te=oe,We=oe+qe-1,Ze=0;Ze<K.length;++Ze){var Ue=K.charCodeAt(Ze);if(Ue>=55296&&Ue<=57343){var Ot=K.charCodeAt(++Ze);Ue=65536+((Ue&1023)<<10)|Ot&1023}if(Ue<=127){if(oe>=We)break;Z[oe++]=Ue}else if(Ue<=2047){if(oe+1>=We)break;Z[oe++]=192|Ue>>6,Z[oe++]=128|Ue&63}else if(Ue<=65535){if(oe+2>=We)break;Z[oe++]=224|Ue>>12,Z[oe++]=128|Ue>>6&63,Z[oe++]=128|Ue&63}else{if(oe+3>=We)break;Z[oe++]=240|Ue>>18,Z[oe++]=128|Ue>>12&63,Z[oe++]=128|Ue>>6&63,Z[oe++]=128|Ue&63}}return Z[oe]=0,oe-Te},Be=(K,Z,oe)=>Dr(K,P,Z,oe),he=K=>i0(K),wt=K=>{var Z=Xt(K)+1,oe=he(Z);return Be(K,oe,Z),oe},Il=(K,Z,oe,qe,Te)=>{var We={string:Vt=>{var Sn=0;return Vt!=null&&Vt!==0&&(Sn=wt(Vt)),Sn},array:Vt=>{var Sn=he(Vt.length);return $e(Vt,Sn),Sn}};function Ze(Vt){return Z==="string"?_t(Vt):Z==="boolean"?!!Vt:Vt}var Ue=ct(K),Ot=[],Fr=0;if(qe)for(var Or=0;Or<qe.length;Or++){var Ja=We[oe[Or]];Ja?(Fr===0&&(Fr=Ne()),Ot[Or]=Ja(qe[Or])):Ot[Or]=qe[Or]}var jl=Ue(...Ot);function f0(Vt){return Fr!==0&&ke(Fr),Ze(Vt)}return jl=f0(jl),jl};t.noExitRuntime&&(Le=t.noExitRuntime),t.print&&(A=t.print),t.printErr&&(N=t.printErr),t.wasmBinary&&(w=t.wasmBinary),t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.ccall=Il;var gr={c:at,b:Qe,d:zl,i:Pl,e:it,h:Et,f:sr,g:gt,a:Nn},je=await Ve();je.k,t._pcafit_wasm=je.l,t._malloc=je.m,t._free=je.n,t._pcapredict_wasm=je.o,t._pcvpca_wasm=je.p;var Ll=je.q,a0=je.r,i0=je.s,c0=je.t;function Rl(){if(S>0){V=Rl;return}if(B(),S>0){V=Rl;return}function K(){var Z;t.calledRun=!0,!z&&(W(),l(t),(Z=t.onRuntimeInitialized)==null||Z.call(t),T())}t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),K()},1)):K()}function u0(){if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.shift()()}return u0(),Rl(),e=a,e},n0=J('<p>Current release: <span>2.1.8</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=DDSIMCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="Oregano.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmoOR8sWDt7vJdnOCHvPEo2">video lessons</a></p>'),s0=J(`<h2>Data Driven SIMCA</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using DD-SIMCA one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check our open access <a href="https://doi.org/10.1002/cem.3556">tutorial paper</a> and YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmoOR8sWDt7vJdnOCHvPEo2">video-lessons</a></p><p>Related theory: <a href="https://doi.org/10.1002/cem.2506">10.1002/cem.2506</a>, <a href="https://doi.org/10.1002/cem.2610">10.1002/cem.2610</a>, <a href="https://doi.org/10.1002/cem.3250">10.1002/cem.3250</a>, <a href="https://doi.org/10.1016/j.aca.2024.343352">10.1016/j.aca.2024.343352</a>.</p> <h3>v. 2.1.9</h3> <p class="release-info">released 17/05/2025</p> <ul><li>Small improvements and bug fixes in contribution plot.</li> <li>Fixed a bug in PV-set downloader.</li></ul> <h3>v. 2.1.8</h3> <p class="release-info">released 16/04/2025</p> <ul><li>App now remembers the plot settings when you switch between plots.</li> <li>Introducing sessons — app states, including model, results, datasets, and outliers
         (in all tabs). When you close tab or app window or click on reboot button, the current
         session is saved to browser's local storage and then is restored automatically. You can
         also download session as a file and load it from file.</li> <li>Added undo option for outliers (if more than one is removed).</li> <li>More robust CSV converter which filters out empty rows created by some versions of MS Excel.</li> <li>Results for alternative set also contains parameters <em>s</em> and <em>f'<sub>0</sub></em> for LoD estimation.</li> <li>Many small improvements to plots and control elements.</li></ul>`,1);function l0(r,e){fe(e,!1);function t(c){c.train.dataset=null,c.target.model=null,c.new.model=null,c.tab=0}function l(c){const v=Object.keys(c);if(!["date","tab","train","target","new"].every(m=>v.includes(m)))return!1;/*!!!!change because in this case different tabs have different fields!!!*/const u=Object.keys(c.train);if(!["model","simca","calset","pvset","calres","pvres","outliers"].every(m=>u.includes(m)))return!1;const f=Object.keys(c.target);if(!["model","simca","testset","testres","outliers"].every(m=>f.includes(m)))return!1;const d=Object.keys(c.new);return!!["model","simca","altset","altres","outliers"].every(m=>d.includes(m))}function o(){return{date:el(new Date),tab:0,train:{model:0,simca:0,calset:0,pvset:0,calres:{pca:0,simca:0},pvres:{pca:0,simca:0},outliers:[]},target:{model:0,simca:0,testset:0,testres:{pca:0,simca:0},outliers:[]},new:{model:0,simca:0,altset:0,altres:{pca:0,simca:0},outliers:[]}}}const a=[{name:"Train",label:"train",component:v1},{name:"Predict: Target",label:"target",component:M1},{name:"Predict: New",label:"new",component:H1}];xc(),e0(r,{appID:"ddsimca",appTitle:"Data Driven SIMCA",appShortTitle:"DD-SIMCA",appSlogan:"One class classifier",WASM:r0,tabs:a,initSession:o,checkSession:l,resetSession:t,footer:u=>{var f=n0();I(u,f)},info:u=>{var f=s0();I(u,f)},$$slots:{footer:!0,info:!0}}),ve()}tc(l0,{target:document.body});const o0=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=ddsimca.js.map
