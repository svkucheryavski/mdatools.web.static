var df=Object.defineProperty;var gf=(Qe,ze,j)=>ze in Qe?df(Qe,ze,{enumerable:!0,configurable:!0,writable:!0,value:j}):Qe[ze]=j;var Oe=(Qe,ze,j)=>(gf(Qe,typeof ze!="symbol"?ze+"":ze,j),j);(function(){"use strict";var Qe=document.createElement("style");Qe.textContent=`input.svelte-7uwoge{display:none}label.svelte-7uwoge{display:inline-block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0}label.svelte-7uwoge:before{display:inline-block;content:"⇪";font-size:1.2em;margin:0 .5em 0 0}label.selected.svelte-7uwoge{color:#909090}label.selected.svelte-7uwoge:before{content:"⣿⣿";letter-spacing:-.25em;color:#6eb8ff;font-weight:700}input.svelte-1mfw1i4{display:none}.selector.svelte-1mfw1i4{position:relative;box-sizing:border-box;display:inline-block;flex:0 0 auto;font-size:1em;height:1.5em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;flex-grow:1;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-1mfw1i4{cursor:default;padding:0 .5em;margin:0 .2em;color:#606060;background:#f0f0f0;border:1px solid transparent;border-radius:.3em}.option.selected.svelte-1mfw1i4{background-color:#6eb8ff;color:#fefefe}.option.svelte-1mfw1i4:not(.selected):hover{border:1px solid #66abec;background:#6eb8ff20;color:#4777a4}.control-element.svelte-1wmzjc6{font-size:.85em;background:#fff;padding:.5em .75em;border-radius:0;display:flex;justify-items:center;justify-content:center;align-items:center;margin-bottom:.5px}.control-element.svelte-1wmzjc6:first-of-type{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem;margin-bottom:1px}.control-element.svelte-1wmzjc6:last-of-type{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1wmzjc6{display:none}.control-element.error.svelte-1wmzjc6{background:crimson;color:#fefefe}.label.svelte-1wmzjc6{padding-right:1em;flex-basis:14ch;flex-grow:0;flex-shrink:0;color:#606570}.control-element.svelte-1wmzjc6>.wrapper{flex:1 1}.control-element.svelte-1wmzjc6>p{text-align:left;flex-grow:1;padding:0 .25em;margin:0;font-size:.9em}.control-element.svelte-1wmzjc6>.title{font-size:1.05em;font-weight:700;color:#303540;flex-grow:1;padding:0 .25em 0 0;margin:0}button.svelte-7tjdzh{background:#606060;display:inline-block;color:#fefefe;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin-left:1.5em;text-align:center;padding:0;background-image:url('data:image/svg+xml;utf8,<svg class="svg-icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="-300 -300 1624 1624" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="%23FAFAFA" d="M810.65984 170.65984q18.3296 0 30.49472 12.16512t12.16512 30.49472q0 18.00192-12.32896 30.33088l-268.67712 268.32896 268.67712 268.32896q12.32896 12.32896 12.32896 30.33088 0 18.3296-12.16512 30.49472t-30.49472 12.16512q-18.00192 0-30.33088-12.32896l-268.32896-268.67712-268.32896 268.67712q-12.32896 12.32896-30.33088 12.32896-18.3296 0-30.49472-12.16512t-12.16512-30.49472q0-18.00192 12.32896-30.33088l268.67712-268.32896-268.67712-268.32896q-12.32896-12.32896-12.32896-30.33088 0-18.3296 12.16512-30.49472t30.49472-12.16512q18.00192 0 30.33088 12.32896l268.32896 268.67712 268.32896-268.67712q12.32896-12.32896 30.33088-12.32896z"/></svg>')}button.svelte-7tjdzh:hover{background-color:#dc143c}button.svelte-9hh3gm{background:#606060;display:inline-block;color:#fefefe;font-size:.9em;padding:.2em .5em;line-height:1.5em;border:none;border-radius:.25em;box-shadow:none;text-align:center;border:1px solid transparent}button.svelte-9hh3gm:hover{border-color:#6eb8ff;background:#6eb8ff20;color:#5086b9}.spinner.svelte-33hbni{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-33hbni:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid #6eb8ff;border-color:#6eb8ff transparent #6eb8ff transparent;animation:svelte-33hbni-spinner 1.2s linear infinite}@keyframes svelte-33hbni-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.range-slider-container.svelte-5tv9oe{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;background:#f0f0f0;height:1.5em;margin:0;padding:1px 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider.svelte-5tv9oe{position:relative;display:inline-block;box-sizing:border-box;background:#6EB8FF;border-radius:2px;text-align:right;color:#fafafa;margin:0;padding:0;height:100%;cursor:default;border-right:5px solid #528abe;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value.svelte-5tv9oe{display:inline-block;right:0;top:0;font-size:.85em;padding:1px 0 1px .5em;color:#606060;line-height:1.6em;user-select:none;-webkit-user-select:none;-moz-user-select:none}input.svelte-5tv9oe{display:none;width:100%}.plot.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{font-family:Arial,Helvetica,sans-serif;display:grid;grid-template-columns:min-content auto;grid-template-rows:min-content auto min-content;grid-template-areas:". title" "ylab axes" ". xlab";box-sizing:border-box;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0}.plot_small.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{font-size:11px}.plot_medium.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{font-size:13px}.plot_large.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{font-size:16px}.plot_xlarge.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{font-size:19px}.plot_error.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{display:flex}.plot_error.svelte-1oyr9z6>.axes-wrapper.svelte-1oyr9z6>svg.svelte-1oyr9z6{display:none}.message_error.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.axes-wrapper.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{grid-area:axes;position:relative;box-sizing:border-box;display:flex;width:100%;height:100%;padding:0;margin:0}.axes.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.axes-content.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.axes__xlabel.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{grid-area:xlab;font-size:1em;font-weight:600;padding:.25em;text-align:center}.axes__ylabel.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{grid-area:ylab;font-size:1em;font-weight:600;padding:.25em;text-align:center;vertical-align:middle;display:flex}.axes__ylabel.svelte-1oyr9z6>span.svelte-1oyr9z6.svelte-1oyr9z6{width:1.5em;line-height:1.5em;display:inline-block;writing-mode:vertical-rl;transform:rotate(180deg)}.axes__title.svelte-1oyr9z6.svelte-1oyr9z6.svelte-1oyr9z6{background:transparent;grid-area:title;font-size:1.3em;font-weight:700;line-height:1.2em;padding:.5em 0;text-align:center}.axis-labels{fill:#303030;font-size:.95em}.labels{fill:#606060;font-size:.9em}.labels{visibility:hidden;transition:visibility .25s linear,opacity .25s linear;opacity:0}text.svelte-131ks7u,text.svelte-131ks7u>tspan{cursor:default;-webkit-user-select:none;user-select:none;dominant-baseline:middle}text.svelte-12moot9,text.svelte-12moot9>tspan{dominant-baseline:middle;text-anchor:middle;cursor:default;-webkit-user-select:none;user-select:none}.plot-container.svelte-83ihns{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-83ihns{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-83ihns{padding:0 .25em 0 .5em}.plot-selector.svelte-83ihns{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left}.plot-selector.svelte-83ihns:hover{background:#e0e0e0;color:#403020}@media (min-width:1100px){.plot-container.svelte-83ihns{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-container.svelte-83ihns{grid-template-columns:1fr minmax(300px,30%)}}.app-container.svelte-bctncl.svelte-bctncl{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(300px,30%) 1fr}.app-controls.svelte-bctncl.svelte-bctncl{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-bctncl.svelte-bctncl{box-sizing:border-box;padding:.25em}.app-controls.svelte-bctncl>div.svelte-bctncl{background:#e8e8e8;border-radius:.5rem}.help-text.svelte-bctncl.svelte-bctncl{padding-right:2em;margin-top:.25rem}.help-text.svelte-bctncl>p{background:#fafafa;padding:1.2em;color:#606060;line-height:1.5em;border-radius:.25rem;margin:0}.help-text.svelte-bctncl>p>strong{display:block;margin:0;padding-bottom:.25em}.help-text.svelte-bctncl>p>span{display:block;font-weight:700;padding:.5em 0}.help-text.svelte-bctncl hgroup{margin-bottom:1em;padding-left:1em}.help-text.svelte-bctncl hgroup h1{margin:0;padding:0 0 .25em;font-size:1.6em;color:#404040}.help-text.svelte-bctncl hgroup p{margin:0;padding:0;font-size:.9em;color:#606060}@media (min-width:1300px){.app-container.svelte-bctncl.svelte-bctncl{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-bctncl.svelte-bctncl{grid-template-columns:min(320px,30%) 1fr}}.page.svelte-q202ia.svelte-q202ia{width:100%;height:100%;margin:0;padding:0;min-width:1020px;min-height:590px;display:flex;flex-direction:column}.page.svelte-q202ia>header.svelte-q202ia{flex-basis:min-content;flex-shrink:0;flex-grow:0;text-align:center;background:#f8f6f4}.header-group.svelte-q202ia.svelte-q202ia{width:max-content;margin:0 auto;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-q202ia.svelte-q202ia{width:5rem;margin:.25rem;grid-area:logo}.header-group.svelte-q202ia>h1.svelte-q202ia{margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-q202ia>p.svelte-q202ia{margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}.page.svelte-q202ia>main.svelte-q202ia{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0rem}.page.svelte-q202ia>footer.svelte-q202ia{font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}.page.svelte-q202ia>footer p.svelte-q202ia{max-width:500px;text-align:center;margin:0 auto;padding:.15em}.page.svelte-q202ia>footer a.svelte-q202ia{color:#f8ebc5}.page.svelte-q202ia>footer a.github-link.svelte-q202ia{display:inline-block;padding-left:1.3em;margin-left:.2em;background-size:1em;background-repeat:no-repeat;background-image:url("data:image/svg+xml;utf8,<svg width='98' height='96' fill='%23f8ebc5' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' clip-rule='evenodd' d='M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z'/></svg>")}
`,document.head.appendChild(Qe);var ze=typeof document<"u"?document.currentScript:null;function j(){}function pl(r,e){for(const n in e)r[n]=e[n];return r}function bl(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"}function an(r){return r()}function cn(){return Object.create(null)}function je(r){r.forEach(an)}function mn(r){return typeof r=="function"}function $(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function wl(r){return Object.keys(r).length===0}function vl(r,...e){if(r==null){for(const t of e)t(void 0);return j}const n=r.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Z(r,e,n){r.$$.on_destroy.push(vl(e,n))}function lt(r,e,n,t){if(r){const l=hn(r,e,n,t);return r[0](l)}}function hn(r,e,n,t){return r[1]&&t?pl(n.ctx.slice(),r[1](t(e))):n.ctx}function ot(r,e,n,t){if(r[2]&&t){const l=r[2](t(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],s=Math.max(e.dirty.length,l.length);for(let i=0;i<s;i+=1)o[i]=e.dirty[i]|l[i];return o}return e.dirty|l}return e.dirty}function st(r,e,n,t,l,o){if(l){const s=hn(e,n,t,o);r.p(s,l)}}function it(r){if(r.ctx.length>32){const e=[],n=r.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function F(r,e){r.appendChild(e)}function y(r,e,n){r.insertBefore(e,n||null)}function k(r){r.parentNode&&r.parentNode.removeChild(r)}function Pe(r,e){for(let n=0;n<r.length;n+=1)r[n]&&r[n].d(e)}function D(r){return document.createElement(r)}function ce(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ie(r){return document.createTextNode(r)}function H(){return ie(" ")}function ee(){return ie("")}function Ce(r,e,n,t){return r.addEventListener(e,n,t),()=>r.removeEventListener(e,n,t)}function kl(r){return function(e){return e.preventDefault(),r.call(this,e)}}function g(r,e,n){n==null?r.removeAttribute(e):r.getAttribute(e)!==n&&r.setAttribute(e,n)}function yl(r){return r===""?null:+r}function El(r){return Array.from(r.childNodes)}function Le(r,e){e=""+e,r.data!==e&&(r.data=e)}function Ct(r,e){r.value=e??""}function ft(r,e,n,t){n==null?r.style.removeProperty(e):r.style.setProperty(e,n,t?"important":"")}function ut(r,e,n){r.classList.toggle(e,!!n)}function Cl(r,e,{bubbles:n=!1,cancelable:t=!1}={}){return new CustomEvent(r,{detail:e,bubbles:n,cancelable:t})}class Ll{constructor(e=!1){Oe(this,"is_svg",!1);Oe(this,"e");Oe(this,"n");Oe(this,"t");Oe(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,t=null){this.e||(this.is_svg?this.e=ce(n.nodeName):this.e=D(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(t)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)y(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(k)}}function Lt(r,e){return new r(e)}let bt;function Ge(r){bt=r}function at(){if(!bt)throw new Error("Function called outside component initialization");return bt}function Al(r){at().$$.on_mount.push(r)}function Sl(r){at().$$.on_destroy.push(r)}function _n(){const r=at();return(e,n,{cancelable:t=!1}={})=>{const l=r.$$.callbacks[e];if(l){const o=Cl(e,n,{cancelable:t});return l.slice().forEach(s=>{s.call(r,o)}),!o.defaultPrevented}return!0}}function Nl(r,e){return at().$$.context.set(r,e),e}function He(r){return at().$$.context.get(r)}function dn(r,e){const n=r.$$.callbacks[e.type];n&&n.slice().forEach(t=>t.call(this,e))}const ct=[],fe=[];let mt=[];const jt=[],Rl=Promise.resolve();let Wt=!1;function Ml(){Wt||(Wt=!0,Rl.then(Ht))}function Dt(r){mt.push(r)}function ve(r){jt.push(r)}const Gt=new Set;let ht=0;function Ht(){if(ht!==0)return;const r=bt;do{try{for(;ht<ct.length;){const e=ct[ht];ht++,Ge(e),Tl(e.$$)}}catch(e){throw ct.length=0,ht=0,e}for(Ge(null),ct.length=0,ht=0;fe.length;)fe.pop()();for(let e=0;e<mt.length;e+=1){const n=mt[e];Gt.has(n)||(Gt.add(n),n())}mt.length=0}while(ct.length);for(;jt.length;)jt.pop()();Wt=!1,Gt.clear(),Ge(r)}function Tl(r){if(r.fragment!==null){r.update(),je(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Dt)}}function zl(r){const e=[],n=[];mt.forEach(t=>r.indexOf(t)===-1?e.push(t):n.push(t)),n.forEach(t=>t()),mt=e}const At=new Set;let xe;function Q(){xe={r:0,c:[],p:xe}}function J(){xe.r||je(xe.c),xe=xe.p}function d(r,e){r&&r.i&&(At.delete(r),r.i(e))}function b(r,e,n,t){if(r&&r.o){if(At.has(r))return;At.add(r),xe.c.push(()=>{At.delete(r),t&&(n&&r.d(1),t())}),r.o(e)}else t&&t()}function St(r,e){const n=e.token={};function t(l,o,s,i){if(e.token!==n)return;e.resolved=i;let f=e.ctx;s!==void 0&&(f=f.slice(),f[s]=i);const u=l&&(e.current=l)(f);let a=!1;e.block&&(e.blocks?e.blocks.forEach((c,m)=>{m!==o&&c&&(Q(),b(c,1,1,()=>{e.blocks[m]===c&&(e.blocks[m]=null)}),J())}):e.block.d(1),u.c(),d(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[o]=u),a&&Ht()}if(bl(r)){const l=at();if(r.then(o=>{Ge(l),t(e.then,1,e.value,o),Ge(null)},o=>{if(Ge(l),t(e.catch,2,e.error,o),Ge(null),!e.hasCatch)throw o}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,r),!0;e.resolved=r}}function gn(r,e,n){const t=e.slice(),{resolved:l}=r;r.current===r.then&&(t[r.value]=l),r.current===r.catch&&(t[r.error]=l),r.block.p(t,n)}function de(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Pl(r,e){r.d(1),e.delete(r.key)}function ql(r,e,n,t,l,o,s,i,f,u,a,c){let m=r.length,h=o.length,_=m;const p={};for(;_--;)p[r[_].key]=_;const v=[],L=new Map,P=new Map,q=[];for(_=h;_--;){const B=c(l,o,_),A=n(B);let E=s.get(A);E?t&&q.push(()=>E.p(B,e)):(E=u(A,B),E.c()),L.set(A,v[_]=E),A in p&&P.set(A,Math.abs(_-p[A]))}const w=new Set,Y=new Set;function z(B){d(B,1),B.m(i,a),s.set(B.key,B),a=B.first,h--}for(;m&&h;){const B=v[h-1],A=r[m-1],E=B.key,I=A.key;B===A?(a=B.first,m--,h--):L.has(I)?!s.has(E)||w.has(E)?z(B):Y.has(I)?m--:P.get(E)>P.get(I)?(Y.add(E),z(B)):(w.add(I),m--):(f(A,s),m--)}for(;m--;){const B=r[m];L.has(B.key)||f(B,s)}for(;h;)z(v[h-1]);return je(q),v}function be(r,e,n){const t=r.$$.props[e];t!==void 0&&(r.$$.bound[t]=n,n(r.$$.ctx[t]))}function M(r){r&&r.c()}function S(r,e,n){const{fragment:t,after_update:l}=r.$$;t&&t.m(e,n),Dt(()=>{const o=r.$$.on_mount.map(an).filter(mn);r.$$.on_destroy?r.$$.on_destroy.push(...o):je(o),r.$$.on_mount=[]}),l.forEach(Dt)}function N(r,e){const n=r.$$;n.fragment!==null&&(zl(n.after_update),je(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Yl(r,e){r.$$.dirty[0]===-1&&(ct.push(r),Ml(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function ne(r,e,n,t,l,o,s=null,i=[-1]){const f=bt;Ge(r);const u=r.$$={fragment:null,ctx:[],props:o,update:j,not_equal:l,bound:cn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:cn(),dirty:i,skip_bound:!1,root:e.target||f.$$.root};s&&s(u.root);let a=!1;if(u.ctx=n?n(r,e.props||{},(c,m,...h)=>{const _=h.length?h[0]:m;return u.ctx&&l(u.ctx[c],u.ctx[c]=_)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](_),a&&Yl(r,c)),m}):[],u.update(),a=!0,je(u.before_update),u.fragment=t?t(u.ctx):!1,e.target){if(e.hydrate){const c=El(e.target);u.fragment&&u.fragment.l(c),c.forEach(k)}else u.fragment&&u.fragment.c();e.intro&&d(r.$$.fragment),S(r,e.target,e.anchor),Ht()}Ge(f)}class re{constructor(){Oe(this,"$$");Oe(this,"$$set")}$destroy(){N(this,1),this.$destroy=j}$on(e,n){if(!mn(n))return j;const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const l=t.indexOf(n);l!==-1&&t.splice(l,1)}}$set(e){this.$$set&&!wl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Il="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Il);function pn(r){if(me(r))return pn(r.v);const e=new le.valuesConstructor(r.length-1);for(let n=0;n<r.length-1;n++)e[n]=r[n+1]-r[n];return new le(e)}function Ut(r,e){if(me(r))return Ut(r.v,e);e===void 0&&(e=.1);const n=Nt(r),t=(n[1]-n[0])*e;return[n[0]-t,n[1]+t]}function Nt(r){if(me(r))return Nt(r.v);let e=r[0],n=r[0];for(let t=1;t<r.length;t++)r[t]<e&&(e=r[t]),r[t]>n&&(n=r[t]);return[e,n]}function Kt(r){return me(r)?Kt(r.v):bn(r)/r.length}function bn(r){if(me(r))return bn(r.v);let e=0;for(let n=0;n<r.length;n++)e=e+r[n];return e}function wn(r){if(me(r))return wn(r.v);let e=1;for(let n=0;n<r.length;n++)e=e*r[n];return e}function wt(r){return me(r)||Be(r)?r.v[Zt(r.v)-1]:r[Zt(r)-1]}function Zt(r){if(me(r)||Be(r))return Zt(r.v);let e=1,n=r[0];for(let t=2;t<=r.length;t++)r[t-1]<n&&(e=t,n=r[t-1]);return e}function We(r){return me(r)||Be(r)?r.v[Qt(r.v)-1]:r[Qt(r)-1]}function Qt(r){if(me(r)||Be(r))return Qt(r.v);let e=1,n=r[0];for(let t=2;t<=r.length;t++)r[t-1]>n&&(e=t,n=r[t-1]);return e}function vn(r,e){if(me(r))return vn(r.v,e);const n=r.reduce((t,l)=>Math.abs(l-e)<Math.abs(t-e)?l:t);return r.indexOf(n)+1}const Jt=30,Ol=1e-7;function kn(r,e=0,n=1){let t=le.zeros(r);for(let l=0;l<r;l++)t.v[l]=e+Math.random()*(n-e);return t}function yn(r,e=0,n=1){let t=le.zeros(r);for(let l=0;l<r;l++){const o=Math.sqrt(-2*Math.log(Math.random())),s=2*Math.PI*Math.random();t.v[l]=o*Math.sin(s)*n+e}return t}function En(r,e=0,n=1){if(me(r))return r.apply(l=>En(l,e,n));const t=1/(Math.sqrt(2)*n);return .5*(1+Vl((r-e)*t))}function Xt(r,e=0,n=1){if(me(r))return r.apply(he=>Xt(he,e,n));if(e!==0||n!==1)return Xt(r)*n+e;if(r<0||r>1)throw Error('Parameter "p" must be between 0 and 1.');if(r<1e-10)return-1/0;if(r>.9999999999)return 1/0;const t=.425,l=5,o=.180625,s=1.6,i=3.3871327179,f=5.0434271938*10,u=1.5929113202*100,a=5.910937472*10,c=1.7895169469*10,m=7.8757757664*10,h=6.71875636*10,_=1.4234372777,p=2.75681539,v=1.3067284816,L=1.7023821103*.1,P=7.370016425*.1,q=1.2021132975*.1,w=6.657905115,Y=3.081226386,z=4.2868294337*.1,B=1.7337203997*.01,A=2.4197894225*.1,E=1.2258202635*.01,I=r-.5;let U;if(Math.abs(I)<=t)return U=o-I*I,I*(((a*U+u)*U+f)*U+i)/(((h*U+m)*U+c)*U+1);U=I<0?r:1-r,U=Math.sqrt(-Math.log(U));let W;return U<=l?(U=U-s,W=(((L*U+v)*U+p)*U+_)/((q*U+P)*U+1)):(U=U-l,W=((B*U+z)*U+Y+w)/((E*U+A)*U+1)),I<0?-W:W}function $t(r,e){if(Array.isArray(r))return $t(Ae(r),e);const n=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),t=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(t);function o(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const u=f/e,a=Math.pow(u,1/6)-.5*Math.pow(u,1/3)+1/3*Math.pow(u,1/2);return En(a,n,l)}function s(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:Bl(f/2,e/2)/vt(e/2)}const i=e>Jt?o:s;return me(r)?r.apply(i):i(r)}function Rt(r,e){if(Array.isArray(r))return Rt(Ae(r),e);const n=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),t=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(t);function o(f){if(f===0)return 0;if(f===0)return Inf;if(e===0)return 0;const u=Xt(f,n,l),a=Math.pow(Math.sqrt(36*u*u-30*u+13)/4+(3*u-3/2)/2+1/8,1/3);return Math.pow(a-3/(4*a)+.5,6)*e}function s(f){if(f===0)return 0;if(f===0)return Inf;if(e===0)return 0;let u=0,a=Jt*10,c=a/30;for(let m=0;m<30;m++){const h=le.seq(u,a,c),_=$t(h,e),p=vn(_,f)-1;if(Math.abs(_.v[p]-f)<Ol)return h.v[p];if(u=p==0?h.v[0]:h.v[p-1],a=p==h.v.length-1?h.v[p]:h.v[p+1],u==a)return u;c=(a-u)/30}return(a+u)/2}const i=e>Jt?o:s;return me(r)?r.apply(i):i(r)}function vt(r){if(me(r))return r.apply(vt);if(r<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(r<.5)return Math.PI/(Math.sin(Math.PI*r)+vt(1-r));r=r-1;let n=.9999999999998099;for(let l=0;l<e.length;l++)n=n+e[l]/(r+l+1);const t=r+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(t,r+.5)*Math.exp(-t)*n}function Bl(r,e){let l=0;for(let o=0;o<1e4;o++){const s=Math.pow(r,o)/vt(e+o+1);if(isNaN(s)||s<1e-18)break;l+=s}return Math.pow(r,e)*vt(e)*Math.exp(-r)*l}function Vl(r){const e=r>=0?1:-1;r=Math.abs(r);const n=.254829592,t=-.284496736,l=1.421413741,o=-1.453152027,s=1.061405429,f=1/(1+.3275911*r),u=1-((((s*f+o)*f+l)*f+t)*f+n)*f*Math.exp(-r*r);return e*u}function Cn(r){const e=r.nrows,n=r.ncols;if(e<n){const s=Cn(r.subset([],Se.seq(1,e)));return{Q:s.Q,R:jl(s.Q,r)}}let t=Je.eye(e),l=r.t();for(let s=1;s<=n;s++)for(let i=e;i>=s+1;i--){const f=l.v.subarray((i-2)*n,i*n),u=t.v.subarray((i-2)*e,i*e),a=f.slice(),c=u.slice(),[m,h,_]=Fl(a[s-1],a[s-1+n]);for(let p=0;p<n;p++)f[p]=a[p]*m+a[p+n]*h,f[p+n]=a[p]*-h+a[p+n]*m,u[p]=c[p]*m+c[p+e]*h,u[p+e]=c[p]*-h+c[p+e]*m;for(let p=n;p<e;p++)u[p]=c[p]*m+c[p+e]*h,u[p+e]=c[p]*-h+c[p+e]*m}const o=Se.seq(1,n);return{Q:e===n?t:t.subset([],o),R:e===n?l.t():l.subset([],o).t()}}function Fl(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const o=e/r,s=Math.sqrt(1+o*o),i=1/s;return[i,o*i,r*s]}const n=r/e,t=Math.sqrt(1+n*n),l=1/t;return[n*l,l,e*t]}function Ln(r){return typeof r=="number"}function jl(r,e){if(e===void 0&&(e=r),!et(r)||!et(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const n=r.nrows,t=r.ncols,l=e.nrows,o=e.ncols,s=t,i=o,f=n,u=new Float64Array(s*i);for(let a=0;a<i;a++){const c=e.v.subarray(a*l,(a+1)*l),m=u.subarray(a*s,(a+1)*s);for(let h=0;h<s;h++){const _=r.v.subarray(h*n,(h+1)*n);let p=0;for(let v=0;v<f;v++)p+=_[v]*c[v];m[h]=p}}return new Je(u,s,i)}function An(r,e,n){if(n===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new le(r.v)}if(r.v.length!==e*n)throw Error("reshape: provided dimension does not match number of values in the object.");return new Je(r.v,e,n)}function et(r){return r&&r.constructor===Je}const X=class X{constructor(e,n,t){if(!ArrayBuffer.isView(e)||e.constructor!==X.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(n===0||t===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==n*t)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=n,this.ncols=t}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return X.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const t=X.eye(e),l=X.eye(e),o=this.t(),s=o.v[(e-1)*e+(e-1)],i=e-1;for(let f=0;f<e;f++)l.v[i*e+f]=t.v[i*e+f]/s;for(let f=e-2;f>=0;f--){let u=t.getcolumn(f+1);const a=o.getcolref(f+1);for(let c=f+1;c<e;c++){const m=l.getcolumn(c+1);u=u.subtract(m.mult(a[c]))}l.v.set(u.divide(a[f]).v,f*e)}return l.t()}if(this.islowertriangular()){const t=this.diag();if(wn(t)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=X.eye(e),o=X.eye(e),s=this.t(),i=0,f=s.v[0];for(let u=0;u<e;u++)o.v[i*e+u]=l.v[i*e+u]/f;for(let u=1;u<e;u++){let a=l.getcolumn(u+1);const c=s.getcolref(u+1);for(let m=0;m<u;m++){const h=o.getcolumn(m+1);a=a.subtract(h.mult(c[m]))}o.v.set(a.divide(c[u]).v,u*e)}return o.t()}const n=Cn(this);if(!n.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return n.R.inv().dot(n.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let n=0;n<e;n++)if(Math.abs(this.v[e*this.nrows+n])>X.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let n=e+1;n<this.nrows;n++)if(Math.abs(this.v[e*this.nrows+n])>X.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),n=new Float64Array(e);for(let t=0;t<e;t++)n[t]=this.getcolref(t+1)[t];return new le(n)}t(){const e=this.nrows,n=this.ncols,t=new X.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const o=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let s=0;s<this.nrows;s++)t[s*n+l]=o[s]}return new X(t,n,e)}for(let l=0;l<this.nrows;l++){const o=t.subarray(l*n,(l+1)*n);for(let s=0;s<this.ncols;s++)o[s]=this.v[s*this.nrows+l]}return new X(t,n,e)}dot(e){if(me(e))return new X(tn(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(et(e))return new X(tn(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,n,t){if(et(e))return new X(xt(this.v,e.v,n),this.nrows,this.ncols);if(Ln(e))return new X(en(this.v,e,n),this.nrows,this.ncols);if(!me(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(t===void 0&&(t=e.length===this.ncols?2:1),t===2&&e.length===this.ncols){const l=new X.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(en(this.getcolref(o+1),e.v[o],n),o*this.nrows);return new X(l,this.nrows,this.ncols)}if(t===1&&e.length===this.nrows){const l=new X.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(xt(this.getcolref(o+1),e.v,n),o*this.nrows);return new X(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(n,t)=>n+t)}subtract(e){return this.op(e,(n,t)=>n-t)}mult(e){return this.op(e,(n,t)=>n*t)}divide(e){return this.op(e,(n,t)=>n/t)}apply(e,n){if(n===void 0&&(n=2),n==2){const t=this.ncols,l=new X.valuesConstructor(t);for(let o=0;o<t;o++)l[o]=e(this.getcolref(o+1));return new le(l)}if(n==1)return this.t().apply(e,2);if(n==0){const t=this.v.length,l=new X.valuesConstructor(t);for(let o=0;o<t;o++)l[o]=e(this.v[o]);return new X(l,this.nrows,this.ncols)}}replace(e,n,t){typeof n=="number"&&(n=[n]),n.length===0&&(n=Se.seq(1,this.nrows)),Be(n)||(n=Ve(n)),typeof t=="number"&&(t=[t]),t.length===0&&(t=Se.seq(1,this.ncols)),Be(t)||(t=Ve(t));const l=n.length,o=t.length;if(wt(n)<1||We(n)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(wt(t)<1||We(t)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==o)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let s=0;s<t.length;s++){const i=e.getcolref(s+1),f=(t.v[s]-1)*this.nrows;for(let u=0;u<n.length;u++){const a=n.v[u];this.v[f+a-1]=i[u]}}return this}copy(){return new X(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const n=new le.valuesConstructor(this.ncols);for(let t=0;t<this.ncols;t++)n[t]=this.getcolref(t+1)[e-1];return new le(n)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new le(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,n){if(typeof e=="number"&&(e=Ve([e])),typeof n=="number"&&(n=Ve([n])),Array.isArray(e)&&(e=e.length===0?null:Ve(e)),Array.isArray(n)&&(n=n.length===0?null:Ve(n)),e!==null&&!Be(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(n!==null&&!Be(n))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(wt(e)<1||We(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(n!==null&&(wt(n)<1||We(n)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const i=n.length,f=this.nrows,u=new X.valuesConstructor(f*i);for(let a=0;a<n.length;a++)u.set(this.v.slice((n.v[a]-1)*this.nrows,n.v[a]*this.nrows),a*this.nrows);return new X(u,f,i)}if(n==null)return this.t().subset(n,e).t();const t=e.length,l=n.length,o=new X.valuesConstructor(t*l);let s=new X.valuesConstructor(t);for(let i=0;i<l;i++){const f=this.v.subarray((n.v[i]-1)*this.nrows,n.v[i]*this.nrows);for(let u=0;u<t;u++)s[u]=f[e.v[u]-1];o.set(s,i*t)}return new X(o,t,l)}toString(e){function n(s,i){return" ".repeat(i-s.length)+s}e===void 0&&(e=2),this.ncols;const t=Math.round(Math.abs(Math.log10(We(this.v))))+e+3;let l="";const o=this.t();for(let s=1;s<=o.ncols;s++)l+=Array.from(o.getcolref(s)).map(i=>n(i.toFixed(e),t)).join(" ")+`
`;return l}toCSV(e,n,t,l){e===void 0&&(e=","),n===void 0&&(n=e===";"?",":".");const o=l!=null&&l.length>0,s=t!=null&&t.length>0;if(o&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(s&&t.length!==this.ncols+(o?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const i=this.t();let f=s?t.join(e)+`
`:"";for(let u=1;u<=i.ncols;u++)f=f+(o?l[u-1]+e:"")+i.getcolref(u).join(e)+`
`;return f=f.replace(/\./g,n),f}static randn(e,n,t,l){return An(yn(e*n,t,l),e,n)}static rand(e,n,t,l){return An(kn(e*n,t,l),e,n)}static eye(e,n){n===void 0&&(n=e);const t=new Float64Array(e*n);for(let l=0;l<Math.min(e,n);l++)t[l*e+l]=1;return new X(t,e,n)}static diagm(e){if(!me(e))throw Error('diagm: the argument "x" must be a Vector.');const n=e.length,t=new Float64Array(n*n);for(let l=0;l<n;l++)t[l*n+l]=e.v[l];return new X(t,n,n)}static zeros(e,n){return n===void 0&&(n=e),new X(new Float64Array(e*n),e,n)}static ones(e,n){return X.fill(1,e,n)}static fill(e,n,t){t===void 0&&(t=n);const l=new Float64Array(n*t);for(let o=0;o<l.length;o++)l[o]=e;return new X(l,n,t)}static outer(e,n,t){if(Array.isArray(e)&&(e=Ae(e)),Array.isArray(n)&&(n=Ae(n)),!me(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!me(n))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=X.zeros(e.length,n.length);for(let o=0;o<n.length;o++){const s=n.v[o],i=l.getcolref(o+1);for(let f=0;f<e.length;f++)i[f]=t(e.v[f],s)}return l}static parseCSV(e,n,t,l){function o(v){return v.some(L=>Number.isNaN(Number.parseFloat(L.trim())))}n===void 0&&(n=",");const s=n===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let i=e.split(/\n/),f=[],u=0;const a=i[0].split(n);(t||t===void 0&&o(a))&&(f=a,u=1),i=i.filter(v=>v.trim().length>1);let c=[],m=0;l&&(m=1);const h=i.length-u,_=a.length-m;if(h<1)throw Error("Data file should contain at least 1 row with values.");if(_<1)throw Error("Data file should contain at least 1 column with values.");const p=X.zeros(_,h);for(let v=u;v<h+u;v++){const L=i[v].split(n);let P;if(l?(c[v-u]=L[0],P=L.slice(1).map(q=>Number.parseFloat(q.trim().replace(s,".")))):P=L.map(q=>Number.parseFloat(q.trim().replace(s,"."))),P.some(q=>Number.isNaN(q)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(P.length!=_)throw Error("Wrong number of values in row #"+v);p.v.set(new Float64Array(P),(v-u)*_)}return{values:p.t(),header:f,labels:c,sep:n,dec:s}}};Oe(X,"valuesConstructor",Float64Array),Oe(X,"TOLERANCE",Math.pow(10,-9));let Je=X;function me(r){return r&&r.constructor===le}function Ae(r){return new le(new Float64Array(r))}const we=class we{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const n=new Se.valuesConstructor(this.length);let t=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(n[t]=l+1,t=t+1);return new Se(n.subarray(0,t))}filter(e){const n=new we.valuesConstructor(this.length);let t=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(n[t]=this.v[l],t=t+1);return new we(n.subarray(0,t))}shuffle(){return new we(Mn(this.v))}sort(e){return new we(Tn(this.v,e))}sortind(e){return new Se(zn(this.v,e))}rep(e){return Nn(this,e)}repeach(e){return Rn(this,e)}replace(e,n){typeof n=="number"&&(n=[n]),n.length===0&&(n=Se.seq(1,this.length)),Be(n)||(n=Ve(n));const t=n.length;if(wt(n)<1||We(n)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==t)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<n.length;l++){const o=n.v[l];this.v[o-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=Ve([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Se.bool2ind(e):Ve(e)),!Be(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const n=e.length,t=we.zeros(n);for(let l=0;l<n;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");t.v[l]=this.v[e.v[l]-1]}return t}slice(e,n){if(e===null&&(e=1),n==null&&(n=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(n>this.length)throw Error("slice: index exceeds the length of the vector.");if(n<e)throw Error('slice: "end" must not be smaller than "start".');return new we(this.v.slice(e-1,n))}copy(){return new we(this.v.slice())}dot(e){return e===void 0&&(e=this),tn(this.v,e.v,1,this.length,e.length,1)[0]}op(e,n){if(me(e))return new we(xt(this.v,e.v,n));if(Ln(e))return new we(en(this.v,e,n));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(n,t)=>n+t)}subtract(e){return this.op(e,(n,t)=>n-t)}mult(e){return this.op(e,(n,t)=>n*t)}divide(e){return this.op(e,(n,t)=>n/t)}apply(e){const n=this.v.length,t=we.zeros(n);for(let l=0;l<n;l++)t.v[l]=e(this.v[l]);return t}static c(...e){if(e.length===1)return e[0];const n=e.reduce((o,s)=>o+(typeof s=="number"?1:s.length),0),t=new we.valuesConstructor(n);let l=0;for(const o of e)typeof o=="number"?(t[l]=o,l+=1):(t.set(me(o)?o.v:new we.valuesConstructor(o),l),l+=typeof o=="number"?1:o.length);return new we(t)}static seq(e,n,t){return Sn(e,n,t,we)}static randn(e,n,t){return yn(e,n,t)}static rand(e,n,t){return kn(e,n,t)}static zeros(e){return new we(new we.valuesConstructor(e))}static ones(e){return we.fill(1,e)}static fill(e,n){const t=new we.valuesConstructor(n);for(let l=0;l<t.length;l++)t[l]=e;return new we(t)}};Oe(we,"valuesConstructor",Float64Array);let le=we;function Be(r){return r.constructor===Se}function Ve(r){return new Se(new Int32Array(r))}const ye=class ye{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const n=new ye.valuesConstructor(this.length);let t=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(n[t]=l+1,t=t+1);return new ye(n.subarray(0,t))}filter(e){const n=new ye.valuesConstructor(this.length);let t=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(n[t]=this.v[l],t=t+1);return new ye(n.subarray(0,t))}shuffle(){return new ye(Mn(this.v))}sort(e){return new ye(Tn(this.v,e))}sortind(e){return new ye(zn(this.v,e))}rep(e){return Nn(this,e)}repeach(e){return Rn(this,e)}subset(e){if(typeof e=="number"&&(e=Ve([e])),Array.isArray(e)&&(e=Ve(e)),!Be(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const n=e.length,t=new ye.valuesConstructor(n);for(let l=0;l<n;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");t[l]=this.v[e.v[l]-1]}return new ye(t)}slice(e,n){if(e===null&&(e=1),n==null&&(n=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(n>this.length)throw Error("slice: index exceeds the length of the vector.");if(n<e)throw Error('slice: "end" must not be smaller than "start".');return new ye(this.v.slice(e-1,n))}static seq(e,n,t){return Sn(e,n,t,ye)}static ones(e){return ye.fill(1,e)}static fill(e,n){const t=new ye.valuesConstructor(n);for(let l=0;l<t.length;l++)t[l]=e;return new ye(t)}static bool2ind(e){let n=0;const t=new ye.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(t[n]=l+1,n=n+1);return new ye(t.subarray(0,n))}};Oe(ye,"valuesConstructor",Int32Array);let Se=ye;function Sn(r,e,n,t){n===void 0&&(n=r<=e?1:-1);const l=Math.floor((e-r)/n)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const o=new t.valuesConstructor(l);for(let s=0;s<l;s++)o[s]=r+s*n;return new t(o)}function Nn(r,e){const n=r.length*e,t=new r.constructor.valuesConstructor(n);for(let l=1;l<=e;l++)for(let o=0;o<r.length;o++)t[(l-1)*r.length+o]=r.v[o];return new r.constructor(t)}function Rn(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const n=r.length*e,t=new r.constructor.valuesConstructor(n);for(let l=0;l<r.length;l++)for(let o=0;o<e;o++)t[l*e+o]=r.v[l];return new r.constructor(t)}function xt(r,e,n){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const t=new r.constructor(r.length);for(let l=0;l<r.length;l++)t[l]=n(r[l],e[l]);return t}function en(r,e,n){const t=new r.constructor(r.length);for(let l=0;l<r.length;l++)t[l]=n(r[l],e);return t}function tn(r,e,n,t,l,o){if(t!==l)throw Error("_dot: matrix dimensions do not much.");const s=n,i=o,f=t,u=new r.constructor(s*i);for(let a=0;a<i;a++){const c=e.subarray(a*l,(a+1)*l),m=u.subarray(a*s,(a+1)*s);for(let h=0;h<f;h++){const _=c[h],p=r.subarray(h*n,(h+1)*n);for(let v=0;v<s;v++)m[v]+=p[v]*_}}return u}function Mn(r){let e=r.slice(),n=e.length,t,l;for(;n;)l=Math.floor(Math.random()*n--),t=e[n],e[n]=e[l],e[l]=t;return e}function Tn(r,e=!1){return e?r.slice().sort((n,t)=>t-n):r.slice().sort((n,t)=>n-t)}function zn(r,e=!1){const n=Se.seq(1,r.length).v;return e?n.sort((t,l)=>r[l-1]-r[t-1]):n.sort((t,l)=>r[t-1]-r[l-1])}const pf="";function Wl(r){let e,n=(r[0]?r[0].name:"Select CSV file with dataset")+"",t,l,o,s,i;return{c(){e=D("label"),t=ie(n),l=H(),o=D("input"),g(o,"name",r[1]),g(o,"type","file"),g(o,"accept",".csv"),g(o,"class","svelte-7uwoge"),g(e,"class","svelte-7uwoge"),ut(e,"selected",r[0]!==null)},m(f,u){y(f,e,u),F(e,t),F(e,l),F(e,o),r[4](o),s||(i=Ce(o,"change",r[3]),s=!0)},p(f,[u]){u&1&&n!==(n=(f[0]?f[0].name:"Select CSV file with dataset")+"")&&Le(t,n),u&2&&g(o,"name",f[1]),u&1&&ut(e,"selected",f[0]!==null)},i:j,o:j,d(f){f&&k(e),r[4](null),s=!1,i()}}}function Dl(r,e,n){let{id:t}=e,{file:l=null}=e,o;function s(f){o.files.length>0&&n(0,l=o.files[0])}function i(f){fe[f?"unshift":"push"](()=>{o=f,n(2,o)})}return r.$$set=f=>{"id"in f&&n(1,t=f.id),"file"in f&&n(0,l=f.file)},[l,t,o,s,i]}class Gl extends re{constructor(e){super(),ne(this,e,Dl,Wl,$,{id:1,file:0})}}const bf="";function Pn(r,e,n){const t=r.slice();return t[6]=e[n],t}function qn(r,e){let n,t,l=e[6]+"",o,s,i;function f(){return e[3](e[6])}function u(){return e[4](e[6])}return{key:r,first:null,c(){n=D("div"),t=new Ll(!1),o=H(),t.a=o,g(n,"class","option svelte-1mfw1i4"),ut(n,"selected",e[6]==e[0]),this.first=n},m(a,c){y(a,n,c),t.m(l,n),F(n,o),s||(i=[Ce(n,"click",f),Ce(n,"keydown",u)],s=!0)},p(a,c){e=a,c&4&&l!==(l=e[6]+"")&&t.p(l),c&5&&ut(n,"selected",e[6]==e[0])},d(a){a&&k(n),s=!1,je(i)}}}function Hl(r){let e,n=[],t=new Map,l,o,s,i,f=de(r[2]);const u=a=>a[6];for(let a=0;a<f.length;a+=1){let c=Pn(r,f,a),m=u(c);t.set(m,n[a]=qn(m,c))}return{c(){e=D("div");for(let a=0;a<n.length;a+=1)n[a].c();l=H(),o=D("input"),g(e,"class","selector svelte-1mfw1i4"),g(o,"name",r[1]),g(o,"class","svelte-1mfw1i4")},m(a,c){y(a,e,c);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(e,null);y(a,l,c),y(a,o,c),Ct(o,r[0]),s||(i=Ce(o,"input",r[5]),s=!0)},p(a,[c]){c&5&&(f=de(a[2]),n=ql(n,c,u,1,a,f,t,e,Pl,qn,null,Pn)),c&2&&g(o,"name",a[1]),c&1&&o.value!==a[0]&&Ct(o,a[0])},i:j,o:j,d(a){a&&(k(e),k(l),k(o));for(let c=0;c<n.length;c+=1)n[c].d();s=!1,i()}}}function Ul(r,e,n){let{id:t}=e,{options:l}=e,{value:o=l[0]}=e;const s=u=>n(0,o=u),i=u=>n(0,o=u);function f(){o=this.value,n(0,o)}return r.$$set=u=>{"id"in u&&n(1,t=u.id),"options"in u&&n(2,l=u.options),"value"in u&&n(0,o=u.value)},[o,t,l,s,i,f]}class Xe extends re{constructor(e){super(),ne(this,e,Ul,Hl,$,{id:1,options:2,value:0})}}const wf="";function Yn(r){let e,n;return{c(){e=D("span"),n=ie(r[0]),g(e,"class","label svelte-1wmzjc6")},m(t,l){y(t,e,l),F(e,n)},p(t,l){l&1&&Le(n,t[0])},d(t){t&&k(e)}}}function Kl(r){let e,n,t,l,o=r[0]&&Yn(r);const s=r[3].default,i=lt(s,r,r[2],null);return{c(){e=D("div"),o&&o.c(),n=H(),i&&i.c(),g(e,"class",t="control-element "+r[1]+" svelte-1wmzjc6")},m(f,u){y(f,e,u),o&&o.m(e,null),F(e,n),i&&i.m(e,null),l=!0},p(f,[u]){f[0]?o?o.p(f,u):(o=Yn(f),o.c(),o.m(e,n)):o&&(o.d(1),o=null),i&&i.p&&(!l||u&4)&&st(i,s,f,f[2],l?ot(s,f[2],u,null):it(f[2]),null),(!l||u&2&&t!==(t="control-element "+f[1]+" svelte-1wmzjc6"))&&g(e,"class",t)},i(f){l||(d(i,f),l=!0)},o(f){b(i,f),l=!1},d(f){f&&k(e),o&&o.d(),i&&i.d(f)}}}function Zl(r,e,n){let{$$slots:t={},$$scope:l}=e,{label:o=null}=e,{status:s=""}=e;return r.$$set=i=>{"label"in i&&n(0,o=i.label),"status"in i&&n(1,s=i.status),"$$scope"in i&&n(2,l=i.$$scope)},[o,s,l,t]}class ue extends re{constructor(e){super(),ne(this,e,Zl,Kl,$,{label:0,status:1})}}const vf="";function Ql(r){let e,n,t;return{c(){e=D("button"),g(e,"alt",r[0]),g(e,"title",r[0]),g(e,"class","svelte-7tjdzh")},m(l,o){y(l,e,o),n||(t=Ce(e,"click",r[1]),n=!0)},p(l,[o]){o&1&&g(e,"alt",l[0]),o&1&&g(e,"title",l[0])},i:j,o:j,d(l){l&&k(e),n=!1,t()}}}function Jl(r,e,n){let{title:t="Reset"}=e;function l(o){dn.call(this,r,o)}return r.$$set=o=>{"title"in o&&n(0,t=o.title)},[t,l]}class nn extends re{constructor(e){super(),ne(this,e,Jl,Ql,$,{title:0})}}const kf="";function Xl(r){let e,n,t,l,o;const s=r[1].default,i=lt(s,r,r[0],null);return{c(){e=D("span"),n=D("button"),i&&i.c(),g(n,"class","button-rect svelte-9hh3gm"),g(e,"class","wrapper")},m(f,u){y(f,e,u),F(e,n),i&&i.m(n,null),t=!0,l||(o=Ce(n,"click",r[2]),l=!0)},p(f,[u]){i&&i.p&&(!t||u&1)&&st(i,s,f,f[0],t?ot(s,f[0],u,null):it(f[0]),null)},i(f){t||(d(i,f),t=!0)},o(f){b(i,f),t=!1},d(f){f&&k(e),i&&i.d(f),l=!1,o()}}}function $l(r,e,n){let{$$slots:t={},$$scope:l}=e;function o(s){dn.call(this,r,s)}return r.$$set=s=>{"$$scope"in s&&n(0,l=s.$$scope)},[l,t,o]}class Mt extends re{constructor(e){super(),ne(this,e,$l,Xl,$,{})}}function xl(r){let e,n;return e=new ue({props:{$$slots:{default:[to]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&131073&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function eo(r){let e=r[1]===void 0,n,t,l,o=In(r),s=r[1]&&On(r);return{c(){o.c(),n=H(),s&&s.c(),t=ee()},m(i,f){o.m(i,f),y(i,n,f),s&&s.m(i,f),y(i,t,f),l=!0},p(i,f){f&2&&$(e,e=i[1]===void 0)?(Q(),b(o,1,1,j),J(),o=In(i),o.c(),d(o,1),o.m(n.parentNode,n)):o.p(i,f),i[1]?s?(s.p(i,f),f&2&&d(s,1)):(s=On(i),s.c(),d(s,1),s.m(t.parentNode,t)):s&&(Q(),b(s,1,1,()=>{s=null}),J())},i(i){l||(d(o),d(s),l=!0)},o(i){b(o),b(s),l=!1},d(i){i&&(k(n),k(t)),o.d(i),s&&s.d(i)}}}function to(r){let e,n,t=r[0].values.nrows+"",l,o,s=r[0].values.ncols+"",i,f,u=r[0].header.length===0?"no header":"with header",a,c,m,h;return m=new nn({}),m.$on("click",r[11]),{c(){e=D("p"),n=ie("Dataset is loaded: "),l=ie(t),o=ie(" × "),i=ie(s),f=ie(`,
   `),a=ie(u),c=H(),M(m.$$.fragment)},m(_,p){y(_,e,p),F(e,n),F(e,l),F(e,o),F(e,i),F(e,f),F(e,a),y(_,c,p),S(m,_,p),h=!0},p(_,p){(!h||p&1)&&t!==(t=_[0].values.nrows+"")&&Le(l,t),(!h||p&1)&&s!==(s=_[0].values.ncols+"")&&Le(i,s),(!h||p&1)&&u!==(u=_[0].header.length===0?"no header":"with header")&&Le(a,u)},i(_){h||(d(m.$$.fragment,_),h=!0)},o(_){b(m.$$.fragment,_),h=!1},d(_){_&&(k(e),k(c)),N(m,_)}}}function no(r){let e,n,t;function l(s){r[12](s)}let o={id:"dataFile"};return r[1]!==void 0&&(o.file=r[1]),e=new Gl({props:o}),fe.push(()=>be(e,"file",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};!n&&i&2&&(n=!0,f.file=s[1],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function In(r){let e,n;return e=new ue({props:{$$slots:{default:[no]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&131074&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function On(r){let e,n,t,l,o,s,i,f;return e=new ue({props:{label:"Delimiter:",$$slots:{default:[ro]},$$scope:{ctx:r}}}),t=new ue({props:{label:"First row:",$$slots:{default:[lo]},$$scope:{ctx:r}}}),o=new ue({props:{label:"First column:",$$slots:{default:[oo]},$$scope:{ctx:r}}}),i=new ue({props:{label:" ",$$slots:{default:[io]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),n=H(),M(t.$$.fragment),l=H(),M(o.$$.fragment),s=H(),M(i.$$.fragment)},m(u,a){S(e,u,a),y(u,n,a),S(t,u,a),y(u,l,a),S(o,u,a),y(u,s,a),S(i,u,a),f=!0},p(u,a){const c={};a&131076&&(c.$$scope={dirty:a,ctx:u}),e.$set(c);const m={};a&131088&&(m.$$scope={dirty:a,ctx:u}),t.$set(m);const h={};a&131080&&(h.$$scope={dirty:a,ctx:u}),o.$set(h);const _={};a&131072&&(_.$$scope={dirty:a,ctx:u}),i.$set(_)},i(u){f||(d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),f=!0)},o(u){b(e.$$.fragment,u),b(t.$$.fragment,u),b(o.$$.fragment,u),b(i.$$.fragment,u),f=!1},d(u){u&&(k(n),k(l),k(s)),N(e,u),N(t,u),N(o,u),N(i,u)}}}function ro(r){let e,n,t;function l(s){r[13](s)}let o={id:"sep",options:r[7]};return r[2]!==void 0&&(o.value=r[2]),e=new Xe({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};!n&&i&4&&(n=!0,f.value=s[2],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function lo(r){let e,n,t;function l(s){r[14](s)}let o={id:"firstRow",options:r[8]};return r[4]!==void 0&&(o.value=r[4]),e=new Xe({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};!n&&i&16&&(n=!0,f.value=s[4],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function oo(r){let e,n,t;function l(s){r[15](s)}let o={id:"firstColumn",options:r[9]};return r[3]!==void 0&&(o.value=r[3]),e=new Xe({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};!n&&i&8&&(n=!0,f.value=s[3],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function so(r){let e;return{c(){e=ie("Load")},m(n,t){y(n,e,t)},d(n){n&&k(e)}}}function io(r){let e,n;return e=new Mt({props:{$$slots:{default:[so]},$$scope:{ctx:r}}}),e.$on("click",r[10]),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&131072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Bn(r){let e,n;return e=new ue({props:{status:"error",$$slots:{default:[fo]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&131136&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function fo(r){let e,n;return{c(){e=D("p"),n=ie(r[6])},m(t,l){y(t,e,l),F(e,n)},p(t,l){l&64&&Le(n,t[6])},d(t){t&&k(e)}}}function uo(r){let e,n,t,l,o;const s=[eo,xl],i=[];function f(a,c){return a[0]===null?0:1}e=f(r),n=i[e]=s[e](r);let u=(r[5]==="error"||r[6])&&Bn(r);return{c(){n.c(),t=H(),u&&u.c(),l=ee()},m(a,c){i[e].m(a,c),y(a,t,c),u&&u.m(a,c),y(a,l,c),o=!0},p(a,[c]){let m=e;e=f(a),e===m?i[e].p(a,c):(Q(),b(i[m],1,1,()=>{i[m]=null}),J(),n=i[e],n?n.p(a,c):(n=i[e]=s[e](a),n.c()),d(n,1),n.m(t.parentNode,t)),a[5]==="error"||a[6]?u?(u.p(a,c),c&96&&d(u,1)):(u=Bn(a),u.c(),d(u,1),u.m(l.parentNode,l)):u&&(Q(),b(u,1,1,()=>{u=null}),J())},i(a){o||(d(n),d(u),o=!0)},o(a){b(n),b(u),o=!1},d(a){a&&(k(t),k(l)),i[e].d(a),u&&u.d(a)}}}function ao(r,e,n){let{dataset:t=null}=e,l=null,o=",",s="values",i="header",f="neutral",u="";const a=[",",";"],c=["header","values"],m=["labels","values"];function h(w){try{if(n(0,t=Je.parseCSV(w,o,i==="header",s==="labels")),t.values.nrows<3||t.values.ncols<3)throw new Error("Dataset must have at least 3 rows and 3 columns");n(6,u=""),n(5,f="success")}catch(Y){n(0,t=null),n(5,f="error"),n(6,u=Y)}}function _(w){const Y=new FileReader;Y.onload=()=>h(Y.result),Y.readAsBinaryString(l)}function p(){n(0,t=null),n(1,l=null)}function v(w){l=w,n(1,l)}function L(w){o=w,n(2,o)}function P(w){i=w,n(4,i)}function q(w){s=w,n(3,s)}return r.$$set=w=>{"dataset"in w&&n(0,t=w.dataset)},r.$$.update=()=>{r.$$.dirty&2&&(l===null?p():(n(5,f="neutral"),n(6,u=""))),r.$$.dirty&4&&o&&(n(5,f="neutral"),n(6,u=""))},[t,l,o,s,i,f,u,a,c,m,_,p,v,L,P,q]}class co extends re{constructor(e){super(),ne(this,e,ao,uo,$,{dataset:0})}}const yf="";function mo(r){let e;return{c(){e=D("div"),g(e,"class","spinner svelte-33hbni")},m(n,t){y(n,e,t)},p:j,i:j,o:j,d(n){n&&k(e)}}}class Vn extends re{constructor(e){super(),ne(this,e,null,mo,$,{})}}const rn=Math.pow(10,-16);function Fn(r,e){return 3*r*e+e}function ho(r,e){return 2*r+r*e+9*e}function _t(r,e,n){if(!r||!r.class||r.class!=="pcamodel")throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const t=r.ncols,l=r.ncomp;let o,s;switch(e){case"mX":o=0,s=t;break;case"sX":o=t,s=t;break;case"loadings":o=2*t+(n-1)*t,s=t;break;case"eigenvals":o=2*t+t*l,s=l;break;case"qmean":o=2*t+t*l+l,s=l;break;case"qsd":o=2*t+t*l+2*l,s=l;break;case"qmedian":o=2*t+t*l+3*l,s=l;break;case"qiqr":o=2*t+t*l+4*l,s=l;break;case"hmean":o=2*t+t*l+5*l,s=l;break;case"hsd":o=2*t+t*l+6*l,s=l;break;case"hmedian":o=2*t+t*l+7*l,s=l;break;case"hiqr":o=2*t+t*l+8*l,s=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(o,o+s)}function jn(r,e,n){if(!r||!r.class||r.class!=="pcamodel")throw new Error('pcamodel_get_distparams: parameter "model" must be JSON with PCA model.');e||(e="q"),n||(n="classic");const t=new r.v.constructor(r.ncomp);if(n=="robust"){const s=new r.v.constructor(r.ncomp),i=_t(r,e+"median"),f=_t(r,e+"iqr");for(let u=0;u<r.ncomp;u++){if(f[u]<rn){s[u]=rn,t[u]=1;continue}const a=f[u]/i[u];let c;a>2.685592117?c=1:a<.194565995?c=100:c=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/a),1.185785)));const m=Rt(.75,c)-Rt(.25,c),h=Rt(.5,c);s[u]=.5*c*(i[u]/h+f[u]/m),t[u]=c>250?250:c}return{u0:s,Nu:t}}const l=_t(r,e+"mean"),o=_t(r,e+"sd");for(let s=0;s<r.ncomp;s++)if(o[s]<rn)t[s]=1;else{const i=2*(l[s]/o[s])**2;t[s]=i<1?1:i>250?250:Math.round(i)}return{u0:l,Nu:t}}function tt(r,e,n){if(!r||!r.class||r.class!=="pcares")throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const t=r.nrows,l=r.ncomp;let o,s;switch(e){case"scores":o=(n-1)*t,s=t;break;case"hdist":o=t*l+(n-1)*t,s=t;break;case"qdist":o=2*t*l+(n-1)*t,s=t;break;case"cumexpvar":o=3*t*l,s=l;break;default:throw new Error("pcares_get: wrong outcome name.")}return r.v.subarray(o,o+s)}function _o(r,e,n,t,l){if(n===void 0&&(n=Math.min(e.nrows-1,e.ncols)),t===void 0&&(t=!0),l===void 0&&(l=!1),!et(e))throw new Error("pca_fit: X must be a matrix.");if(e.nrows<3||e.ncols<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(n<1||n>Math.min(e.nrows-1,e.ncols))throw new Error("pca_fit: the value of 'ncomp' does not match the dimension of X.");const o=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,o/e.v.BYTES_PER_ELEMENT);const s=ho(e.ncols,n),i=Fn(e.nrows,n),f=s+i,u=Float64Array,a=r._malloc(f*u.BYTES_PER_ELEMENT);r.ccall("pcafit_wasm",[],["number","number","number","number","number","number","number"],[o,e.nrows,e.ncols,n,t,l,a]);const c=r.HEAPF64.slice(a/u.BYTES_PER_ELEMENT,a/u.BYTES_PER_ELEMENT+s),m=r.HEAPF64.slice(a/u.BYTES_PER_ELEMENT+s,a/u.BYTES_PER_ELEMENT+s+i);return r._free(o),r._free(a),[{class:"pcamodel",v:c,ncomp:n,nrows:e.nrows,ncols:e.ncols,center:t,scale:l},{class:"pcares",v:m,ncomp:n,nrows:e.nrows,ncols:e.ncols,center:t,scale:l}]}function go(r,e,n){if(!e||!e.class||e.class!=="pcamodel")throw new Error('pca_predict: parameter "m" must be JSON with PCA results.');if(!et(n))throw new Error("pca_predict: X must be a matrix.");if(n.nrows<1)throw new Error("pca_fit: X must have at least 1 row.");if(n.ncols!==e.ncols)throw new Error("pca_fit: X must have the same number of columns as the training set.");const t=r._malloc(n.v.length*n.v.BYTES_PER_ELEMENT);r.HEAPF64.set(n.v,t/n.v.BYTES_PER_ELEMENT);const l=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,l/e.v.BYTES_PER_ELEMENT);const o=Fn(n.nrows,e.ncomp),s=Float64Array,i=r._malloc(o*s.BYTES_PER_ELEMENT);r.ccall("pcapredict_wasm",[],["number","number","number","number","number","number"],[t,n.nrows,n.ncols,e.ncomp,l,i]);const f=r.HEAPF64.slice(i/s.BYTES_PER_ELEMENT,i/s.BYTES_PER_ELEMENT+o);return r._free(t),r._free(l),r._free(i),{class:"pcares",v:f,ncomp:e.ncomp,nrows:n.nrows,ncols:n.ncols,center:e.center,scale:e.scale}}function po(r,e,n,t,l,o,s){if(!e||!e.class||e.class!=="pcamodel")throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!et(n))throw new Error("pcapcv: X must be a matrix.");if(n.nrows<3)throw new Error("pcapcv: X must have at least 3 rows.");if(n.ncols!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(o)||![0,1,2].includes(o))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(s)||![0,1].includes(s))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(o>0&&(!Number.isInteger(l)||l<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(o>0&&l>n.nrows)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(t)||t<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const i=Math.min(o===0?n.nrows-2:n.nrows-Math.ceil(n.nrows/l)-1,n.ncols,e.ncomp);if(t>i)throw new Error('pcapcv: the value of "ncomp" is too large.');const f=r._malloc(n.v.length*n.v.BYTES_PER_ELEMENT);r.HEAPF64.set(n.v,f/n.v.BYTES_PER_ELEMENT);const u=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,u/e.v.BYTES_PER_ELEMENT);const a=n.v.length,c=n.v.constructor,m=r._malloc(a*c.BYTES_PER_ELEMENT);r.ccall("pcvpca_wasm",[],["number","number","number","number","number","number","number","number","number","number","number"],[f,n.nrows,n.ncols,t,e.center,e.scale,o,l,s,u,m]);const h=r.HEAPF64.slice(m/c.BYTES_PER_ELEMENT,m/c.BYTES_PER_ELEMENT+a);return r._free(f),r._free(u),r._free(m),new Je(h,n.nrows,n.ncols)}const bo="modulepreload",wo=function(r){return"/"+r},Wn={},vo=function(e,n,t){return e()};var Dn=(()=>{var r=ze&&ze.src||new URL("pcvpca.js",document.baseURI).href;return async function(e={}){var n=e,t,l;n.ready=new Promise((C,R)=>{t=C,l=R});var o=Object.assign({},n),s=typeof window=="object",i=typeof importScripts=="function",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",u="";function a(C){return n.locateFile?n.locateFile(C,u):u+C}var c,m,h;if(f){const{createRequire:C}=await vo(()=>Promise.resolve().then(()=>tf),void 0);var _=C(ze&&ze.src||new URL("pcvpca.js",document.baseURI).href),p=_("fs"),v=_("path");i?u=v.dirname(u)+"/":u=_("url").fileURLToPath(new URL("./",self.location)),c=(R,V)=>(R=Ke(R)?new URL(R):v.normalize(R),p.readFileSync(R,V?void 0:"utf8")),h=R=>{var V=c(R,!0);return V.buffer||(V=new Uint8Array(V)),V},m=(R,V,G,ge=!0)=>{R=Ke(R)?new URL(R):v.normalize(R),p.readFile(R,ge?void 0:"utf8",(oe,se)=>{oe?G(oe):V(ge?se.buffer:se)})},!n.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(s||i)&&(i?u=self.location.href:typeof document<"u"&&document.currentScript&&(u=document.currentScript.src),r&&(u=r),u.indexOf("blob:")!==0?u=u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):u="",c=C=>{var R=new XMLHttpRequest;return R.open("GET",C,!1),R.send(null),R.responseText},i&&(h=C=>{var R=new XMLHttpRequest;return R.open("GET",C,!1),R.responseType="arraybuffer",R.send(null),new Uint8Array(R.response)}),m=(C,R,V)=>{var G=new XMLHttpRequest;G.open("GET",C,!0),G.responseType="arraybuffer",G.onload=()=>{if(G.status==200||G.status==0&&G.response){R(G.response);return}V()},G.onerror=V,G.send(null)});n.print||console.log.bind(console);var L=n.printErr||console.error.bind(console);Object.assign(n,o),o=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&n.quit;var P;n.wasmBinary&&(P=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&Fe("no native wasm support detected");var q,w=!1,Y,z;function B(){var C=q.buffer;n.HEAP8=Y=new Int8Array(C),n.HEAP16=new Int16Array(C),n.HEAPU8=z=new Uint8Array(C),n.HEAPU16=new Uint16Array(C),n.HEAP32=new Int32Array(C),n.HEAPU32=new Uint32Array(C),n.HEAPF32=new Float32Array(C),n.HEAPF64=new Float64Array(C)}var A=[],E=[],I=[];function U(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)te(n.preRun.shift());yt(A)}function W(){yt(E)}function he(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)T(n.postRun.shift());yt(I)}function te(C){A.unshift(C)}function ae(C){E.unshift(C)}function T(C){I.unshift(C)}var K=0,qe=null;function De(C){K++,n.monitorRunDependencies&&n.monitorRunDependencies(K)}function Ue(C){if(K--,n.monitorRunDependencies&&n.monitorRunDependencies(K),K==0&&qe){var R=qe;qe=null,R()}}function Fe(C){n.onAbort&&n.onAbort(C),C="Aborted("+C+")",L(C),w=!0,C+=". Build with -sASSERTIONS for more info.";var R=new WebAssembly.RuntimeError(C);throw l(R),R}var pt="data:application/octet-stream;base64,";function nt(C){return C.startsWith(pt)}function Ke(C){return C.startsWith("file://")}var Ye;n.locateFile?(Ye="pcvpca_wasm.wasm",nt(Ye)||(Ye=a(Ye))):Ye=new URL("./pcvpca.wasm",self.location).href;function rt(C){if(C==Ye&&P)return new Uint8Array(P);if(h)return h(C);throw"both async and sync fetching of the wasm failed"}function al(C){if(!P&&(s||i)){if(typeof fetch=="function"&&!Ke(C))return fetch(C,{credentials:"same-origin"}).then(R=>{if(!R.ok)throw"failed to load wasm binary file at '"+C+"'";return R.arrayBuffer()}).catch(()=>rt(C));if(m)return new Promise((R,V)=>{m(C,G=>R(new Uint8Array(G)),V)})}return Promise.resolve().then(()=>rt(C))}function kt(C,R,V){return al(C).then(G=>WebAssembly.instantiate(G,R)).then(G=>G).then(V,G=>{L(`failed to asynchronously prepare wasm: ${G}`),Fe(G)})}function Vt(C,R,V,G){return!C&&typeof WebAssembly.instantiateStreaming=="function"&&!nt(R)&&!Ke(R)&&!f&&typeof fetch=="function"?fetch(R,{credentials:"same-origin"}).then(ge=>{var oe=WebAssembly.instantiateStreaming(ge,V);return oe.then(G,function(se){return L(`wasm streaming compile failed: ${se}`),L("falling back to ArrayBuffer instantiation"),kt(R,V,G)})}):kt(R,V,G)}function sn(){var C={a:hf};function R(G,ge){var oe=G.exports;return Ie=oe,q=Ie.d,B(),Ie.k,ae(Ie.e),Ue(),oe}De();function V(G){R(G.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(C,R)}catch(G){L(`Module.instantiateWasm callback failed with error: ${G}`),l(G)}return Vt(P,Ye,C,V).catch(l),{}}var yt=C=>{for(;C.length>0;)C.shift()(n)},O=()=>Date.now(),pe=(C,R,V)=>z.copyWithin(C,R,R+V),Ne=()=>2147483648,cl=C=>{var R=q.buffer,V=(C-R.byteLength+65535)/65536;try{return q.grow(V),B(),1}catch{}},nf=C=>{var R=z.length;C>>>=0;var V=Ne();if(C>V)return!1;for(var G=(Re,Me)=>Re+(Me-Re%Me)%Me,ge=1;ge<=4;ge*=2){var oe=R*(1+.2/ge);oe=Math.min(oe,C+100663296);var se=Math.min(V,G(Math.max(C,oe),65536)),_e=cl(se);if(_e)return!0}return!1},rf=C=>{var R=n["_"+C];return R},lf=(C,R)=>{Y.set(C,R)},of=C=>{for(var R=0,V=0;V<C.length;++V){var G=C.charCodeAt(V);G<=127?R++:G<=2047?R+=2:G>=55296&&G<=57343?(R+=4,++V):R+=3}return R},sf=(C,R,V,G)=>{if(!(G>0))return 0;for(var ge=V,oe=V+G-1,se=0;se<C.length;++se){var _e=C.charCodeAt(se);if(_e>=55296&&_e<=57343){var Re=C.charCodeAt(++se);_e=65536+((_e&1023)<<10)|Re&1023}if(_e<=127){if(V>=oe)break;R[V++]=_e}else if(_e<=2047){if(V+1>=oe)break;R[V++]=192|_e>>6,R[V++]=128|_e&63}else if(_e<=65535){if(V+2>=oe)break;R[V++]=224|_e>>12,R[V++]=128|_e>>6&63,R[V++]=128|_e&63}else{if(V+3>=oe)break;R[V++]=240|_e>>18,R[V++]=128|_e>>12&63,R[V++]=128|_e>>6&63,R[V++]=128|_e&63}}return R[V]=0,V-ge},ff=(C,R,V)=>sf(C,z,R,V),uf=C=>{var R=of(C)+1,V=fn(R);return ff(C,V,R),V},ml=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,af=(C,R,V)=>{for(var G=R+V,ge=R;C[ge]&&!(ge>=G);)++ge;if(ge-R>16&&C.buffer&&ml)return ml.decode(C.subarray(R,ge));for(var oe="";R<ge;){var se=C[R++];if(!(se&128)){oe+=String.fromCharCode(se);continue}var _e=C[R++]&63;if((se&224)==192){oe+=String.fromCharCode((se&31)<<6|_e);continue}var Re=C[R++]&63;if((se&240)==224?se=(se&15)<<12|_e<<6|Re:se=(se&7)<<18|_e<<12|Re<<6|C[R++]&63,se<65536)oe+=String.fromCharCode(se);else{var Me=se-65536;oe+=String.fromCharCode(55296|Me>>10,56320|Me&1023)}}return oe},cf=(C,R)=>C?af(z,C,R):"",mf=(C,R,V,G,ge)=>{var oe={string:Te=>{var Et=0;return Te!=null&&Te!==0&&(Et=uf(Te)),Et},array:Te=>{var Et=fn(Te.length);return lf(Te,Et),Et}};function se(Te){return R==="string"?cf(Te):R==="boolean"?!!Te:Te}var _e=rf(C),Re=[],Me=0;if(G)for(var Ze=0;Ze<G.length;Ze++){var gl=oe[V[Ze]];gl?(Me===0&&(Me=hl()),Re[Ze]=gl(G[Ze])):Re[Ze]=G[Ze]}var un=_e.apply(null,Re);function _f(Te){return Me!==0&&_l(Me),se(Te)}return un=_f(un),un},hf={b:O,c:pe,a:nf},Ie=sn();n._pcafit_wasm=(C,R,V,G,ge,oe,se)=>(n._pcafit_wasm=Ie.f)(C,R,V,G,ge,oe,se),n._malloc=C=>(n._malloc=Ie.g)(C),n._free=C=>(n._free=Ie.h)(C),n._pcapredict_wasm=(C,R,V,G,ge,oe)=>(n._pcapredict_wasm=Ie.i)(C,R,V,G,ge,oe),n._pcvpca_wasm=(C,R,V,G,ge,oe,se,_e,Re,Me,Ze)=>(n._pcvpca_wasm=Ie.j)(C,R,V,G,ge,oe,se,_e,Re,Me,Ze);var hl=()=>(hl=Ie.l)(),_l=C=>(_l=Ie.m)(C),fn=C=>(fn=Ie.n)(C);n.ccall=mf;var Ft;qe=function C(){Ft||dl(),Ft||(qe=C)};function dl(){if(K>0||(U(),K>0))return;function C(){Ft||(Ft=!0,n.calledRun=!0,!w&&(W(),t(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),he()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),C()},1)):C()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return dl(),e.ready}})();function Gn(r){let e,n,t,l,o;e=new ue({props:{label:"CV split type:",$$slots:{default:[ko]},$$scope:{ctx:r}}});let s=r[3]!=="loo"&&Hn(r);return l=new ue({props:{label:" ",$$slots:{default:[Co]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),n=H(),s&&s.c(),t=H(),M(l.$$.fragment)},m(i,f){S(e,i,f),y(i,n,f),s&&s.m(i,f),y(i,t,f),S(l,i,f),o=!0},p(i,f){const u={};f&524424&&(u.$$scope={dirty:f,ctx:i}),e.$set(u),i[3]!=="loo"?s?(s.p(i,f),f&8&&d(s,1)):(s=Hn(i),s.c(),d(s,1),s.m(t.parentNode,t)):s&&(Q(),b(s,1,1,()=>{s=null}),J());const a={};f&524288&&(a.$$scope={dirty:f,ctx:i}),l.$set(a)},i(i){o||(d(e.$$.fragment,i),d(s),d(l.$$.fragment,i),o=!0)},o(i){b(e.$$.fragment,i),b(s),b(l.$$.fragment,i),o=!1},d(i){i&&(k(n),k(t)),N(e,i),s&&s.d(i),N(l,i)}}}function ko(r){let e,n,t;function l(s){r[14](s)}let o={id:"cvType",options:r[7]};return r[3]!==void 0&&(o.value=r[3]),e=new Xe({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};i&128&&(f.options=s[7]),!n&&i&8&&(n=!0,f.value=s[3],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function Hn(r){let e,n;return e=new ue({props:{label:"CV segments:",$$slots:{default:[yo]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&524548&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function yo(r){let e,n,t;function l(s){r[15](s)}let o={id:"nseg",options:r[8]};return r[2]!==void 0&&(o.value=r[2]),e=new Xe({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};i&256&&(f.options=s[8]),!n&&i&4&&(n=!0,f.value=s[2],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function Eo(r){let e;return{c(){e=ie("Compute PV-set")},m(n,t){y(n,e,t)},d(n){n&&k(e)}}}function Co(r){let e,n;return e=new Mt({props:{$$slots:{default:[Eo]},$$scope:{ctx:r}}}),e.$on("click",r[10]),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Un(r){let e,n,t,l={ctx:r,current:null,token:null,hasCatch:!0,pending:To,then:So,catch:Lo,value:17,error:18,blocks:[,,,]};return St(n=r[4],l),{c(){e=ee(),l.block.c()},m(o,s){y(o,e,s),l.block.m(o,l.anchor=s),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(o,s){r=o,l.ctx=r,s&16&&n!==(n=r[4])&&St(n,l)||gn(l,r,s)},i(o){t||(d(l.block),t=!0)},o(o){for(let s=0;s<3;s+=1){const i=l.blocks[s];b(i)}t=!1},d(o){o&&k(e),l.block.d(o),l.token=null,l=null}}}function Lo(r){let e,n;return e=new ue({props:{status:"error",$$slots:{default:[Ao]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&524304&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Ao(r){let e,n=r[18]+"",t;return{c(){e=D("p"),t=ie(n)},m(l,o){y(l,e,o),F(e,t)},p(l,o){o&16&&n!==(n=l[18]+"")&&Le(t,n)},d(l){l&&k(e)}}}function So(r){let e,n,t=r[0]!==null&&Kn(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,o){l[0]!==null?t?(t.p(l,o),o&1&&d(t,1)):(t=Kn(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}function Kn(r){let e,n,t,l;return e=new ue({props:{$$slots:{default:[No]},$$scope:{ctx:r}}}),t=new ue({props:{label:" ",$$slots:{default:[Mo]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),n=H(),M(t.$$.fragment)},m(o,s){S(e,o,s),y(o,n,s),S(t,o,s),l=!0},p(o,s){const i={};s&524289&&(i.$$scope={dirty:s,ctx:o}),e.$set(i);const f={};s&524288&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(d(e.$$.fragment,o),d(t.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),l=!1},d(o){o&&k(n),N(e,o),N(t,o)}}}function No(r){let e,n,t=r[0].nrows+"",l,o,s=r[0].ncols+"",i,f,u,a;return u=new nn({}),u.$on("click",r[11]),{c(){e=D("p"),n=ie("PV-set is computed: "),l=ie(t),o=ie(" × "),i=ie(s),f=H(),M(u.$$.fragment)},m(c,m){y(c,e,m),F(e,n),F(e,l),F(e,o),F(e,i),y(c,f,m),S(u,c,m),a=!0},p(c,m){(!a||m&1)&&t!==(t=c[0].nrows+"")&&Le(l,t),(!a||m&1)&&s!==(s=c[0].ncols+"")&&Le(i,s)},i(c){a||(d(u.$$.fragment,c),a=!0)},o(c){b(u.$$.fragment,c),a=!1},d(c){c&&(k(e),k(f)),N(u,c)}}}function Ro(r){let e;return{c(){e=ie("Download")},m(n,t){y(n,e,t)},d(n){n&&k(e)}}}function Mo(r){let e,n;return e=new Mt({props:{$$slots:{default:[Ro]},$$scope:{ctx:r}}}),e.$on("click",r[9]),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function To(r){let e,n;return e=new ue({props:{$$slots:{default:[zo]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function zo(r){let e,n,t,l;return e=new Vn({}),{c(){M(e.$$.fragment),n=H(),t=D("p"),t.textContent="Computing PV-set..."},m(o,s){S(e,o,s),y(o,n,s),y(o,t,s),l=!0},p:j,i(o){l||(d(e.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),l=!1},d(o){o&&(k(n),k(t)),N(e,o)}}}function Zn(r){let e,n;return e=new ue({props:{status:"error",$$slots:{default:[Po]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&524352&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Po(r){let e,n;return{c(){e=D("p"),n=ie(r[6])},m(t,l){y(t,e,l),F(e,n)},p(t,l){l&64&&Le(n,t[6])},d(t){t&&k(e)}}}function qo(r){let e,n,t,l,o=r[1]&&!r[0]&&r[5]!=="busy"&&Gn(r),s=r[4]&&Un(r),i=r[5]==="error"&&r[6]&&Zn(r);return{c(){o&&o.c(),e=H(),s&&s.c(),n=H(),i&&i.c(),t=ee()},m(f,u){o&&o.m(f,u),y(f,e,u),s&&s.m(f,u),y(f,n,u),i&&i.m(f,u),y(f,t,u),l=!0},p(f,[u]){f[1]&&!f[0]&&f[5]!=="busy"?o?(o.p(f,u),u&35&&d(o,1)):(o=Gn(f),o.c(),d(o,1),o.m(e.parentNode,e)):o&&(Q(),b(o,1,1,()=>{o=null}),J()),f[4]?s?(s.p(f,u),u&16&&d(s,1)):(s=Un(f),s.c(),d(s,1),s.m(n.parentNode,n)):s&&(Q(),b(s,1,1,()=>{s=null}),J()),f[5]==="error"&&f[6]?i?(i.p(f,u),u&96&&d(i,1)):(i=Zn(f),i.c(),d(i,1),i.m(t.parentNode,t)):i&&(Q(),b(i,1,1,()=>{i=null}),J())},i(f){l||(d(o),d(s),d(i),l=!0)},o(f){b(o),b(s),b(i),l=!1},d(f){f&&(k(e),k(n),k(t)),o&&o.d(f),s&&s.d(f),i&&i.d(f)}}}function Yo(r,e,n){let t,{dataset:l=null}=e,{model:o=null}=e,{pvset:s=null}=e,{pvres:i=null}=e,f=4,u="ven",a,c="neutral",m=null,h;function _(w){const Y=new Blob([s.toCSV(l.sep,l.dec,l.header,l.labels)],{type:"text/csv"}),z=window.URL.createObjectURL(Y),B=document.createElement("a");B.setAttribute("href",z),B.setAttribute("download","pvset.csv"),B.click()}async function p(w,Y,z){n(4,a=Dn().then(B=>{const A=z.type=="loo"?0:z.type=="rand"?2:1;n(0,s=po(B,Y,w,Y.ncomp,z.nseg,A,0)),n(12,i=go(B,Y,s))}).catch(B=>{n(5,c="error"),n(6,m=B)}))}function v(w){p(l.values,o,{type:u,nseg:f})}function L(){n(5,c="neutral"),n(6,m=null),n(4,a=null),n(0,s=null)}function P(w){u=w,n(3,u),n(13,l)}function q(w){f=w,n(2,f)}return r.$$set=w=>{"dataset"in w&&n(13,l=w.dataset),"model"in w&&n(1,o=w.model),"pvset"in w&&n(0,s=w.pvset),"pvres"in w&&n(12,i=w.pvres)},r.$$.update=()=>{r.$$.dirty&8192&&l&&(l.values.nrows<4?(n(7,h=["loo"]),n(3,u="loo")):(n(7,h=["ven","rand","loo"]),n(3,u="ven"))),r.$$.dirty&2&&o===null&&L(),r.$$.dirty&8192&&n(8,t=l&&l.values.nrows>0?[2,3,4,5,10,20].filter(w=>w<=l.values.nrows/2):[])},[s,o,f,u,a,c,m,h,t,_,v,L,i,l,P,q]}class Io extends re{constructor(e){super(),ne(this,e,Yo,qo,$,{dataset:13,model:1,pvset:0,pvres:12})}}const Ef="";function Oo(r){let e,n,t,l,o=r[0].toFixed(r[4])+"",s,i,f,u,a;return{c(){e=D("div"),n=D("div"),t=H(),l=D("span"),s=ie(o),i=H(),f=D("input"),g(n,"class","range-slider svelte-5tv9oe"),ft(n,"width",r[8]+"%"),g(e,"class","range-slider-container svelte-5tv9oe"),g(l,"class","range-value svelte-5tv9oe"),g(f,"type","range"),g(f,"name",r[1]),g(f,"step",r[5]),g(f,"min",r[2]),g(f,"max",r[3]),g(f,"class","svelte-5tv9oe")},m(c,m){y(c,e,m),F(e,n),r[14](n),r[15](e),y(c,t,m),y(c,l,m),F(l,s),y(c,i,m),y(c,f,m),Ct(f,r[0]),u||(a=[Ce(e,"mousewheel",kl(r[12])),Ce(e,"mousemove",r[13]),Ce(e,"mousedown",r[9]),Ce(e,"mouseleave",r[10]),Ce(e,"mouseup",r[11]),Ce(f,"change",r[16]),Ce(f,"input",r[16])],u=!0)},p(c,[m]){m&256&&ft(n,"width",c[8]+"%"),m&17&&o!==(o=c[0].toFixed(c[4])+"")&&Le(s,o),m&2&&g(f,"name",c[1]),m&32&&g(f,"step",c[5]),m&4&&g(f,"min",c[2]),m&8&&g(f,"max",c[3]),m&1&&Ct(f,c[0])},i:j,o:j,d(c){c&&(k(e),k(t),k(l),k(i),k(f)),r[14](null),r[15](null),u=!1,je(a)}}}function Bo(r,e,n){let t,{id:l}=e,{value:o}=e,{min:s}=e,{max:i}=e,{decNum:f=1}=e,{step:u=+((i-s)/100).toFixed(4)}=e;if(o<s||o>i)throw new Error("The value is outside of the provided range.");const a=_n();let c,m,h=!1;const _=A=>{const E=s+A*(i-s);return+(Math.round(E/u)*u).toFixed(4)},p=A=>{const E=c.getBoundingClientRect(),I=m.getBoundingClientRect(),U=E.x,W=I.x+I.width;return(A.clientX-U)/(W-U)},v=A=>{const E=p(A);E<0||E>1||(h=E*100>t-5&&E*100<t+5)},L=A=>{h=!1},P=A=>{h=!1;const E=p(A);E<0||E>1||n(0,o=_(E))},q=A=>{let E=o+u*A.deltaY*.5;E<s&&(E=s),E>i&&(E=i),n(0,o=+(Math.round(E/u)*u).toFixed(4))},w=A=>{if(!h)return;const E=p(A);E<0||E>1||n(0,o=_(E))};function Y(A){fe[A?"unshift":"push"](()=>{c=A,n(6,c)})}function z(A){fe[A?"unshift":"push"](()=>{m=A,n(7,m)})}function B(){o=yl(this.value),n(0,o)}return r.$$set=A=>{"id"in A&&n(1,l=A.id),"value"in A&&n(0,o=A.value),"min"in A&&n(2,s=A.min),"max"in A&&n(3,i=A.max),"decNum"in A&&n(4,f=A.decNum),"step"in A&&n(5,u=A.step)},r.$$.update=()=>{r.$$.dirty&13&&n(8,t=(o-s)/(i-s)*100),r.$$.dirty&1&&a("change",o)},[o,l,s,i,f,u,c,m,t,v,L,P,q,w,Y,z,B]}class Qn extends re{constructor(e){super(),ne(this,e,Bo,Oo,$,{id:1,value:0,min:2,max:3,decNum:4,step:5})}}function Vo(r){let e,n,t=r[1]&&!r[0]&&Jn(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,o){l[1]&&!l[0]?t?(t.p(l,o),o&3&&d(t,1)):(t=Jn(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}function Fo(r){let e,n,t,l={ctx:r,current:null,token:null,hasCatch:!0,pending:Jo,then:Zo,catch:Uo,value:16,error:17,blocks:[,,,]};return St(n=r[3],l),{c(){e=ee(),l.block.c()},m(o,s){y(o,e,s),l.block.m(o,l.anchor=s),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(o,s){r=o,l.ctx=r,s&8&&n!==(n=r[3])&&St(n,l)||gn(l,r,s)},i(o){t||(d(l.block),t=!0)},o(o){for(let s=0;s<3;s+=1){const i=l.blocks[s];b(i)}t=!1},d(o){o&&k(e),l.block.d(o),l.token=null,l=null}}}function Jn(r){let e,n,t,l,o,s,i,f;return e=new ue({props:{label:"# of PCs",$$slots:{default:[jo]},$$scope:{ctx:r}}}),t=new ue({props:{label:"Center",$$slots:{default:[Wo]},$$scope:{ctx:r}}}),o=new ue({props:{label:"Scale",$$slots:{default:[Do]},$$scope:{ctx:r}}}),i=new ue({props:{label:" ",$$slots:{default:[Ho]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),n=H(),M(t.$$.fragment),l=H(),M(o.$$.fragment),s=H(),M(i.$$.fragment)},m(u,a){S(e,u,a),y(u,n,a),S(t,u,a),y(u,l,a),S(o,u,a),y(u,s,a),S(i,u,a),f=!0},p(u,a){const c={};a&262212&&(c.$$scope={dirty:a,ctx:u}),e.$set(c);const m={};a&262272&&(m.$$scope={dirty:a,ctx:u}),t.$set(m);const h={};a&262400&&(h.$$scope={dirty:a,ctx:u}),o.$set(h);const _={};a&262144&&(_.$$scope={dirty:a,ctx:u}),i.$set(_)},i(u){f||(d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),f=!0)},o(u){b(e.$$.fragment,u),b(t.$$.fragment,u),b(o.$$.fragment,u),b(i.$$.fragment,u),f=!1},d(u){u&&(k(n),k(l),k(s)),N(e,u),N(t,u),N(o,u),N(i,u)}}}function jo(r){let e,n,t;function l(s){r[12](s)}let o={id:"ncomp",min:1,max:r[2],step:1,decNum:0};return r[6]!==void 0&&(o.value=r[6]),e=new Qn({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};i&4&&(f.max=s[2]),!n&&i&64&&(n=!0,f.value=s[6],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function Wo(r){let e,n,t;function l(s){r[13](s)}let o={id:"center",options:["yes","no"]};return r[7]!==void 0&&(o.value=r[7]),e=new Xe({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};!n&&i&128&&(n=!0,f.value=s[7],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function Do(r){let e,n,t;function l(s){r[14](s)}let o={id:"scale",options:["yes","no"]};return r[8]!==void 0&&(o.value=r[8]),e=new Xe({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};!n&&i&256&&(n=!0,f.value=s[8],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function Go(r){let e;return{c(){e=ie("Create model")},m(n,t){y(n,e,t)},d(n){n&&k(e)}}}function Ho(r){let e,n;return e=new Mt({props:{$$slots:{default:[Go]},$$scope:{ctx:r}}}),e.$on("click",r[9]),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&262144&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Uo(r){let e,n;return e=new ue({props:{status:"error",$$slots:{default:[Ko]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&262152&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Ko(r){let e,n=r[17]+"",t;return{c(){e=D("p"),t=ie(n)},m(l,o){y(l,e,o),F(e,t)},p(l,o){o&8&&n!==(n=l[17]+"")&&Le(t,n)},d(l){l&&k(e)}}}function Zo(r){let e,n,t=r[0]!==null&&Xn(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,o){l[0]!==null?t?(t.p(l,o),o&1&&d(t,1)):(t=Xn(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}function Xn(r){let e,n;return e=new ue({props:{$$slots:{default:[Qo]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&262145&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Qo(r){let e,n,t=r[0].ncomp+"",l,o,s,i,f;return i=new nn({}),i.$on("click",r[10]),{c(){e=D("p"),n=ie("Global model is computed: "),l=ie(t),o=ie(" PCs"),s=H(),M(i.$$.fragment)},m(u,a){y(u,e,a),F(e,n),F(e,l),F(e,o),y(u,s,a),S(i,u,a),f=!0},p(u,a){(!f||a&1)&&t!==(t=u[0].ncomp+"")&&Le(l,t)},i(u){f||(d(i.$$.fragment,u),f=!0)},o(u){b(i.$$.fragment,u),f=!1},d(u){u&&(k(e),k(s)),N(i,u)}}}function Jo(r){let e,n;return e=new ue({props:{$$slots:{default:[Xo]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&262144&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Xo(r){let e,n,t,l;return e=new Vn({}),{c(){M(e.$$.fragment),n=H(),t=D("p"),t.textContent="Computing global model..."},m(o,s){S(e,o,s),y(o,n,s),y(o,t,s),l=!0},p:j,i(o){l||(d(e.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),l=!1},d(o){o&&(k(n),k(t)),N(e,o)}}}function $n(r){let e,n;return e=new ue({props:{status:"error",$$slots:{default:[$o]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&262176&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function $o(r){let e,n;return{c(){e=D("p"),n=ie(r[5])},m(t,l){y(t,e,l),F(e,n)},p(t,l){l&32&&Le(n,t[5])},d(t){t&&k(e)}}}function xo(r){let e,n,t,l,o;const s=[Fo,Vo],i=[];function f(a,c){return a[3]?0:1}e=f(r),n=i[e]=s[e](r);let u=(r[4]==="error"||r[5])&&$n(r);return{c(){n.c(),t=H(),u&&u.c(),l=ee()},m(a,c){i[e].m(a,c),y(a,t,c),u&&u.m(a,c),y(a,l,c),o=!0},p(a,[c]){let m=e;e=f(a),e===m?i[e].p(a,c):(Q(),b(i[m],1,1,()=>{i[m]=null}),J(),n=i[e],n?n.p(a,c):(n=i[e]=s[e](a),n.c()),d(n,1),n.m(t.parentNode,t)),a[4]==="error"||a[5]?u?(u.p(a,c),c&48&&d(u,1)):(u=$n(a),u.c(),d(u,1),u.m(l.parentNode,l)):u&&(Q(),b(u,1,1,()=>{u=null}),J())},i(a){o||(d(n),d(u),o=!0)},o(a){b(n),b(u),o=!1},d(a){a&&(k(t),k(l)),i[e].d(a),u&&u.d(a)}}}function es(r,e,n){let t,{dataset:l=null}=e,{model:o=null}=e,{calres:s=null}=e,i,f="neutral",u=null,a,c="yes",m="no";async function h(q,w,Y,z){n(3,i=Dn().then(B=>{n(0,[o,s]=_o(B,q,w,Y,z),o,n(11,s)),n(4,f="success")}).catch(B=>{n(4,f="error"),n(5,u=B)}))}function _(q){h(l.values,a,c==="yes",m==="yes")}function p(){n(4,f="neutral"),n(3,i=null),n(0,o=null),n(5,u=null)}function v(q){a=q,n(6,a),n(2,t),n(1,l)}function L(q){c=q,n(7,c)}function P(q){m=q,n(8,m)}return r.$$set=q=>{"dataset"in q&&n(1,l=q.dataset),"model"in q&&n(0,o=q.model),"calres"in q&&n(11,s=q.calres)},r.$$.update=()=>{r.$$.dirty&2&&l===null&&p(),r.$$.dirty&2&&n(2,t=l?Math.min(l.values.nrows-2,l.values.ncols-1):null),r.$$.dirty&4&&n(6,a=t?Math.min(t,20):null)},[o,l,t,i,f,u,a,c,m,_,p,s,v,L,P]}class ts extends re{constructor(e){super(),ne(this,e,es,xo,$,{dataset:1,model:0,calres:11})}}const dt=[];function gt(r,e=j){let n;const t=new Set;function l(i){if($(r,i)&&(r=i,n)){const f=!dt.length;for(const u of t)u[1](),dt.push(u,r);if(f){for(let u=0;u<dt.length;u+=2)dt[u][0](dt[u+1]);dt.length=0}}}function o(i){l(i(r))}function s(i,f=j){const u=[i,f];return t.add(u),t.size===1&&(n=e(l,o)||j),i(r),()=>{t.delete(u),t.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:s}}function $e(r,e){if(Array.isArray(r)&&(r=Ae(r)),!me(r))throw Error(e+": coordinates must be provided as array or instance of Vector class.");if(r.length<1)throw Error(e+": vector with coordinates is empty.");return r}function ns(r,e,n,t,l){if(r===void 0||e===void 0)return;const o=l.transform($e(r),n.coords),s=l.transform($e(e),t.coords);if(o.length!=s.length)throw Error('PlotSeries: parameters "xValues" and "yValues" must be numeric vectors of the same length.');let i="";for(let f=0;f<o.length;f++)i+=o[f]+","+s[f]+" ";return i}function xn(r,e,n,t=!0){if(r!==void 0){if(Array.isArray(r)&&(r=Ae(r)),!me(r))throw Error("getAxisTicks: axis ticks must be provided as an array or as a vector.");return r.filter(u=>u>=e[0]&u<=e[1])}if(typeof e!="object"||e[0]===void 0||e[1]===void 0)return;const l=(e[1]-e[0])/50,o=er(e[1]-e[0]-1*l,t),s=er(o/(n-1),t),i=Math.ceil((e[0]+l)/s)*s,f=Math.floor((e[1]-l)/s)*s;if(n=Math.round((f-i+1)/s)+1,r=le.seq(i,f,s),Math.abs(s)<1){const u=Math.pow(10,1+Math.round(-Math.log10(s)));r=r.apply(a=>Math.round((a+Number.EPSILON)*u)/u)}return r.filter(u=>u>=e[0]&u<=e[1])}function er(r,e){const n=Math.floor(Math.log10(r)),t=r/Math.pow(10,n);let l;return e?t<1.5?l=1:t<3?l=2:t<7?l=5:l=10:t<=1?l=1:t<=2?l=2:t<=5?l=5:l=10,l*Math.pow(10,n)}function rs(r){return Math.round(r*10)/10}function ls(r,e){return e<300.2||r<300.2?"small":e<600.2||r<600.2?"medium":e<850.2||r<850.2?"large":"xlarge"}const Cf="",os=r=>({}),tr=r=>({}),ss=r=>({}),nr=r=>({}),is=r=>({}),rr=r=>({});function lr(r){let e;return{c(){e=D("div"),g(e,"class","axes__title svelte-1oyr9z6")},m(n,t){y(n,e,t),e.innerHTML=r[0]},p(n,t){t[0]&1&&(e.innerHTML=n[0])},d(n){n&&k(e)}}}function or(r){let e,n;return{c(){e=D("div"),n=D("span"),g(n,"class","svelte-1oyr9z6"),g(e,"class","axes__ylabel svelte-1oyr9z6")},m(t,l){y(t,e,l),F(e,n),n.innerHTML=r[2]},p(t,l){l[0]&4&&(n.innerHTML=t[2])},d(t){t&&k(e)}}}function sr(r){let e,n;return{c(){e=D("div"),n=D("span"),g(e,"class","axes__xlabel svelte-1oyr9z6")},m(t,l){y(t,e,l),F(e,n),n.innerHTML=r[1]},p(t,l){l[0]&2&&(n.innerHTML=t[1])},d(t){t&&k(e)}}}function ir(r){let e;return{c(){e=D("p"),e.innerHTML=`Axes component was not properly initialized. <br/>
      Check that you defined axes limits and margins correctly.`,g(e,"class","message_error svelte-1oyr9z6")},m(n,t){y(n,e,t)},d(n){n&&k(e)}}}function fs(r){let e,n,t,l,o,s,i,f,u,a,c,m,h,_,p,v,L,P,q,w=r[0]!==""&&lr(r),Y=r[2]!==""&&or(r),z=r[1]!==""&&sr(r);const B=r[28].xaxis,A=lt(B,r,r[27],rr),E=r[28].yaxis,I=lt(E,r,r[27],nr),U=r[28].default,W=lt(U,r,r[27],null),he=r[28].box,te=lt(he,r,r[27],tr);let ae=!r[3]&&ir();return{c(){e=D("div"),w&&w.c(),n=H(),Y&&Y.c(),t=H(),z&&z.c(),l=H(),o=D("div"),s=ce("svg"),i=ce("defs"),f=ce("clipPath"),u=ce("rect"),A&&A.c(),I&&I.c(),_=ce("g"),W&&W.c(),te&&te.c(),p=H(),ae&&ae.c(),ft(u,"pointer-events","none"),g(u,"x",a=r[8][0]),g(u,"y",c=r[7][1]),g(u,"width",m=r[8][1]-r[8][0]),g(u,"height",h=r[7][0]-r[7][1]),g(f,"id",r[9]),g(_,"class","axes-content svelte-1oyr9z6"),g(_,"clip-path","url(#"+r[9]+")"),g(s,"preserveAspectRatio","none"),g(s,"class","axes svelte-1oyr9z6"),g(o,"class","axes-wrapper svelte-1oyr9z6"),g(e,"class",v="plot "+("plot_"+r[4])+" svelte-1oyr9z6"),ut(e,"plot_error",!r[3])},m(T,K){y(T,e,K),w&&w.m(e,null),F(e,n),Y&&Y.m(e,null),F(e,t),z&&z.m(e,null),F(e,l),F(e,o),F(o,s),F(s,i),F(i,f),F(f,u),A&&A.m(s,null),I&&I.m(s,null),F(s,_),W&&W.m(_,null),te&&te.m(s,null),F(o,p),ae&&ae.m(o,null),r[29](o),r[30](e),L=!0,P||(q=[Ce(s,"click",r[10]),Ce(s,"keydown",r[10])],P=!0)},p(T,K){T[0]!==""?w?w.p(T,K):(w=lr(T),w.c(),w.m(e,n)):w&&(w.d(1),w=null),T[2]!==""?Y?Y.p(T,K):(Y=or(T),Y.c(),Y.m(e,t)):Y&&(Y.d(1),Y=null),T[1]!==""?z?z.p(T,K):(z=sr(T),z.c(),z.m(e,l)):z&&(z.d(1),z=null),(!L||K[0]&256&&a!==(a=T[8][0]))&&g(u,"x",a),(!L||K[0]&128&&c!==(c=T[7][1]))&&g(u,"y",c),(!L||K[0]&256&&m!==(m=T[8][1]-T[8][0]))&&g(u,"width",m),(!L||K[0]&128&&h!==(h=T[7][0]-T[7][1]))&&g(u,"height",h),A&&A.p&&(!L||K[0]&134217728)&&st(A,B,T,T[27],L?ot(B,T[27],K,is):it(T[27]),rr),I&&I.p&&(!L||K[0]&134217728)&&st(I,E,T,T[27],L?ot(E,T[27],K,ss):it(T[27]),nr),W&&W.p&&(!L||K[0]&134217728)&&st(W,U,T,T[27],L?ot(U,T[27],K,null):it(T[27]),null),te&&te.p&&(!L||K[0]&134217728)&&st(te,he,T,T[27],L?ot(he,T[27],K,os):it(T[27]),tr),T[3]?ae&&(ae.d(1),ae=null):ae||(ae=ir(),ae.c(),ae.m(o,null)),(!L||K[0]&16&&v!==(v="plot "+("plot_"+T[4])+" svelte-1oyr9z6"))&&g(e,"class",v),(!L||K[0]&24)&&ut(e,"plot_error",!T[3])},i(T){L||(d(A,T),d(I,T),d(W,T),d(te,T),L=!0)},o(T){b(A,T),b(I,T),b(W,T),b(te,T),L=!1},d(T){T&&k(e),w&&w.d(),Y&&Y.d(),z&&z.d(),A&&A.d(T),I&&I.d(T),W&&W.d(T),te&&te.d(T),ae&&ae.d(),r[29](null),r[30](null),P=!1,je(q)}}}function us(r,e,n){let t,l,o,s,i,f,u,a,c,{$$slots:m={},$$scope:h}=e,{limX:_}=e,{limY:p}=e,{title:v=""}=e,{xLabel:L=""}=e,{yLabel:P=""}=e,{margins:q=[.034,.034,.034,.034]}=e;const w=_n(),Y={small:30,medium:40,large:50,xlarge:60},z={small:5,medium:8,large:12,xlarge:15},B={small:4,medium:6,large:8,xlarge:10},A={small:10,medium:12,large:14,xlarge:16},E={small:10,medium:13,large:15,xlarge:17},I={small:["0","3,3","1,1","3,1"],medium:["0","5,5","2,2","5,2"],large:["0","7,7","3,3","7,3"],xlarge:["0","9,9","4,4","9,3"]},U=["●","◼","▲","▼","⬥","＋","*","×"],W="plottingArea"+Math.round(Math.random()*1e4);let he,te,ae,T=100;function K(O,pe){const Ne=Array.prototype.indexOf.call(pe.parentNode.children,pe);w(O,{seriesTitle:pe.parentNode.getAttribute("title"),elementID:Ne})}function qe(O){if(O.target.tagName==="text"&&O.target.parentNode.classList.contains("series_points")){K("markerclick",O.target);return}if(O.target.tagName==="rect"&&O.target.parentNode.classList.contains("series_bar")){K("barclick",O.target);return}w("axesclick")}const De=function(O,pe){if(!(!f||O===void 0||O===null)&&(Array.isArray(O)&&(O=Ae(O)),!(!me(O)||O.length<1)))return O.apply(Ne=>rs((Ne-pe[1])*pe[0]+pe[2])).v},Ue=function(O,pe){if(!(!f||O===void 0||O===null)&&(Array.isArray(O)&&(O=Ae(O)),!(!me(O)||O.length<1)))return O.apply(Ne=>(Ne-pe[2])/pe[0]+pe[1]).v},Fe=gt("medium");Z(r,Fe,O=>n(4,c=O));const pt=gt({coords:[1,0,0],objects:[1,0,0]});Z(r,pt,O=>n(25,u=O));const nt=gt({coords:[1,0,0],objects:[1,0,0]});Z(r,nt,O=>n(23,s=O));const Ke=gt(!1);Z(r,Ke,O=>n(3,f=O));const Ye=gt(_);Z(r,Ye,O=>n(26,a=O));const rt=gt(p);Z(r,rt,O=>n(24,i=O)),Nl("axes",{transform:De,invTransform:Ue,scale:Fe,isOk:Ke,xLim:Ye,yLim:rt,tX:pt,tY:nt,LINE_STYLES:I,LABELS_MARGIN:E,TICK_NUM:z,TICK_SIZE:B,MARKER_SYMBOLS:U,LEGEND_FONT_SIZE:A});const kt=new ResizeObserver(O=>{for(let pe of O){const Ne=he.getBoundingClientRect();Fe.update(cl=>ls(Ne.width,Ne.height))}}),Vt=new ResizeObserver(O=>{for(let pe of O){const Ne=te.getBoundingClientRect();n(20,ae=Ne.width),n(21,T=Ne.height)}});Al(()=>{kt.observe(he),Vt.observe(te)}),Sl(()=>{kt.unobserve(he),Vt.unobserve(te)});function sn(O){fe[O?"unshift":"push"](()=>{te=O,n(6,te)})}function yt(O){fe[O?"unshift":"push"](()=>{he=O,n(5,he)})}return r.$$set=O=>{"limX"in O&&n(17,_=O.limX),"limY"in O&&n(18,p=O.limY),"title"in O&&n(0,v=O.title),"xLabel"in O&&n(1,L=O.xLabel),"yLabel"in O&&n(2,P=O.yLabel),"margins"in O&&n(19,q=O.margins),"$$scope"in O&&n(27,h=O.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&524304&&n(22,t=q.map(O=>O*Y[c])),r.$$.dirty[0]&131072&&Ye.update(O=>_),r.$$.dirty[0]&262144&&rt.update(O=>p),r.$$.dirty[0]&91226112&&Ke.update(O=>Array.isArray(i)&&Array.isArray(a)&&a.length===2&&i.length===2&&!i.some(pe=>pe===void 0)&&!a.some(pe=>pe===void 0)&&!i.some(pe=>isNaN(pe))&&!a.some(pe=>isNaN(pe))&&a[1]!==a[0]&&i[1]!==i[0]&&ae>t[1]+t[3]&&T>t[0]+t[2]),r.$$.dirty[0]&72351752&&f&&pt.update(O=>({coords:[(ae-t[1]-t[3])/(a[1]-a[0]),a[0],t[1]],objects:[(ae-t[1]-t[3])/(a[1]-a[0]),0,0]})),r.$$.dirty[0]&23068680&&f&&nt.update(O=>({coords:[-(T-t[0]-t[2])/(i[1]-i[0]),i[1],t[2]],objects:[(T-t[0]-t[2])/(i[1]-i[0]),0,0]})),r.$$.dirty[0]&100663304&&n(8,l=f?De(a,u.coords):[0,1]),r.$$.dirty[0]&25165832&&n(7,o=f?De(i,s.coords):[1,0])},[v,L,P,f,c,he,te,o,l,W,qe,Fe,pt,nt,Ke,Ye,rt,_,p,q,ae,T,t,s,i,u,a,h,m,sn,yt]}class Tt extends re{constructor(e){super(),ne(this,e,us,fs,$,{limX:17,limY:18,title:0,xLabel:1,yLabel:2,margins:19},null,[-1,-1])}}const ke={AXIS_LINE:"#303030",AXIS_TICK:"#606060",WHITE:"#fff",BLACK:"#000",GRAY:"#909090",MIDDLEGRAY:"#dadada",LIGHTGRAY:"#f0f0f0",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333"};function fr(r,e,n){const t=r.slice();return t[17]=e[n],t[19]=n,t}function ur(r){let e,n=de(r[1]),t=[];for(let l=0;l<n.length;l+=1)t[l]=ar(fr(r,n,l));return{c(){e=ce("g");for(let l=0;l<t.length;l+=1)t[l].c();g(e,"class",r[0])},m(l,o){y(l,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(l,o){if(o&62){n=de(l[1]);let s;for(s=0;s<n.length;s+=1){const i=fr(l,n,s);t[s]?t[s].p(i,o):(t[s]=ar(i),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}o&1&&g(e,"class",l[0])},d(l){l&&k(e),Pe(t,l)}}}function ar(r){let e,n,t,l,o;return{c(){e=ce("line"),g(e,"vector-effect","non-scaling-stroke"),g(e,"x1",n=r[1][r[19]]),g(e,"x2",t=r[2][r[19]]),g(e,"y1",l=r[3][r[19]]),g(e,"y2",o=r[4][r[19]]),g(e,"style",r[5])},m(s,i){y(s,e,i)},p(s,i){i&2&&n!==(n=s[1][s[19]])&&g(e,"x1",n),i&4&&t!==(t=s[2][s[19]])&&g(e,"x2",t),i&8&&l!==(l=s[3][s[19]])&&g(e,"y1",l),i&16&&o!==(o=s[4][s[19]])&&g(e,"y2",o),i&32&&g(e,"style",s[5])},d(s){s&&k(e)}}}function as(r){let e,n=r[1]!==void 0&&r[3]!==void 0&&r[2]!==void 0&&r[4]!==void 0&&ur(r);return{c(){n&&n.c(),e=ee()},m(t,l){n&&n.m(t,l),y(t,e,l)},p(t,[l]){t[1]!==void 0&&t[3]!==void 0&&t[2]!==void 0&&t[4]!==void 0?n?n.p(t,l):(n=ur(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:j,o:j,d(t){t&&k(e),n&&n.d(t)}}}function cs(r,e,n){let t,l,o,s,{lineCoords:i=[]}=e,{lineColor:f=ke.DARKGRAY}=e,{lineType:u=1}=e,{lineWidth:a=1}=e,{className:c=""}=e;const m=He("axes"),h=m.scale;Z(r,h,w=>n(13,l=w));const _=m.tX;Z(r,_,w=>n(15,s=w));const p=m.tY;Z(r,p,w=>n(14,o=w));let v,L,P,q;return r.$$set=w=>{"lineCoords"in w&&n(9,i=w.lineCoords),"lineColor"in w&&n(10,f=w.lineColor),"lineType"in w&&n(11,u=w.lineType),"lineWidth"in w&&n(12,a=w.lineWidth),"className"in w&&n(0,c=w.className)},r.$$.update=()=>{r.$$.dirty&49664&&i.length==2&&(n(1,v=m.transform(i[0][0],s.coords)),n(3,P=m.transform(i[0][1],o.coords)),n(2,L=m.transform(i[1][0],s.coords)),n(4,q=m.transform(i[1][1],o.coords))),r.$$.dirty&15360&&n(5,t=`stroke:${f};stroke-width: ${a}px;stroke-dasharray:${m.LINE_STYLES[l][u-1]}`)},[c,v,L,P,q,t,h,_,p,i,f,u,a,l,o,s]}class ln extends re{constructor(e){super(),ne(this,e,cs,as,$,{lineCoords:9,lineColor:10,lineType:11,lineWidth:12,className:0})}}const Lf="";function cr(r,e,n){const t=r.slice();return t[21]=e[n],t[23]=n,t}function mr(r,e,n){const t=r.slice();return t[21]=e[n],t[23]=n,t}function hr(r,e,n){const t=r.slice();return t[21]=e[n],t[23]=n,t}function _r(r){let e;function n(o,s){return o[2]===2&&o[1]===4?_s:o[2]===2&&o[1]===1?hs:ms}let t=n(r),l=t(r);return{c(){e=ce("g"),l.c(),g(e,"class","tick_labels"),g(e,"style",r[8])},m(o,s){y(o,e,s),l.m(e,null)},p(o,s){t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e,null))),s&256&&g(e,"style",o[8])},d(o){o&&k(e),l.d()}}}function ms(r){let e,n=de(r[3]),t=[];for(let l=0;l<n.length;l+=1)t[l]=dr(cr(r,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ee()},m(l,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(l,o);y(l,e,o)},p(l,o){if(o&249){n=de(l[3]);let s;for(s=0;s<n.length;s+=1){const i=cr(l,n,s);t[s]?t[s].p(i,o):(t[s]=dr(i),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(l){l&&k(e),Pe(t,l)}}}function hs(r){let e,n=de(r[3]),t=[];for(let l=0;l<n.length;l+=1)t[l]=gr(mr(r,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ee()},m(l,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(l,o);y(l,e,o)},p(l,o){if(o&89){n=de(l[3]);let s;for(s=0;s<n.length;s+=1){const i=mr(l,n,s);t[s]?t[s].p(i,o):(t[s]=gr(i),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(l){l&&k(e),Pe(t,l)}}}function _s(r){let e,n=de(r[3]),t=[];for(let l=0;l<n.length;l+=1)t[l]=pr(hr(r,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ee()},m(l,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(l,o);y(l,e,o)},p(l,o){if(o&57){n=de(l[3]);let s;for(s=0;s<n.length;s+=1){const i=hr(l,n,s);t[s]?t[s].p(i,o):(t[s]=pr(i),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(l){l&&k(e),Pe(t,l)}}}function dr(r){let e,n=r[0][r[23]]+"",t,l;return{c(){e=ce("text"),g(e,"data-id",r[23]),g(e,"x",t=r[3][r[23]]),g(e,"y",l=r[4][r[23]]),g(e,"dx",r[5]),g(e,"dy",r[6]),g(e,"text-anchor",r[7]),g(e,"class","svelte-131ks7u")},m(o,s){y(o,e,s),e.innerHTML=n},p(o,s){s&1&&n!==(n=o[0][o[23]]+"")&&(e.innerHTML=n),s&8&&t!==(t=o[3][o[23]])&&g(e,"x",t),s&16&&l!==(l=o[4][o[23]])&&g(e,"y",l),s&32&&g(e,"dx",o[5]),s&64&&g(e,"dy",o[6]),s&128&&g(e,"text-anchor",o[7])},d(o){o&&k(e)}}}function gr(r){let e,n=r[0][r[23]]+"",t,l,o,s;return{c(){e=ce("text"),g(e,"data-id",r[23]),g(e,"x",t=r[3][r[23]]),g(e,"y",l=r[4][r[23]]),g(e,"dx",o=-r[6]/2),g(e,"dy",0),g(e,"transform",s=`rotate(-90, ${r[3][r[23]]}, ${r[4][r[23]]})`),g(e,"text-anchor","end"),g(e,"class","svelte-131ks7u")},m(i,f){y(i,e,f),e.innerHTML=n},p(i,f){f&1&&n!==(n=i[0][i[23]]+"")&&(e.innerHTML=n),f&8&&t!==(t=i[3][i[23]])&&g(e,"x",t),f&16&&l!==(l=i[4][i[23]])&&g(e,"y",l),f&64&&o!==(o=-i[6]/2)&&g(e,"dx",o),f&24&&s!==(s=`rotate(-90, ${i[3][i[23]]}, ${i[4][i[23]]})`)&&g(e,"transform",s)},d(i){i&&k(e)}}}function pr(r){let e,n=r[0][r[23]]+"",t,l,o,s;return{c(){e=ce("text"),g(e,"data-id",r[23]),g(e,"x",t=r[3][r[23]]),g(e,"y",l=r[4][r[23]]),g(e,"dx",0),g(e,"dy",o=r[5]*1.25),g(e,"transform",s=`rotate(-90, ${r[3][r[23]]}, ${r[4][r[23]]})`),g(e,"text-anchor","middle"),g(e,"class","svelte-131ks7u")},m(i,f){y(i,e,f),e.innerHTML=n},p(i,f){f&1&&n!==(n=i[0][i[23]]+"")&&(e.innerHTML=n),f&8&&t!==(t=i[3][i[23]])&&g(e,"x",t),f&16&&l!==(l=i[4][i[23]])&&g(e,"y",l),f&32&&o!==(o=i[5]*1.25)&&g(e,"dy",o),f&24&&s!==(s=`rotate(-90, ${i[3][i[23]]}, ${i[4][i[23]]})`)&&g(e,"transform",s)},d(i){i&&k(e)}}}function ds(r){let e,n=r[3]!==void 0&&r[4]!==void 0&&_r(r);return{c(){n&&n.c(),e=ee()},m(t,l){n&&n.m(t,l),y(t,e,l)},p(t,[l]){t[3]!==void 0&&t[4]!==void 0?n?n.p(t,l):(n=_r(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:j,o:j,d(t){t&&k(e),n&&n.d(t)}}}function gs(r,e,n){let t,l,o,s,i,f,{tickCoords:u}=e,{textColor:a}=e,{tickLabels:c}=e,{pos:m=1}=e,{las:h=1}=e;const _=He("axes"),p=_.scale;Z(r,p,A=>n(16,o=A));const v=_.tX;Z(r,v,A=>n(18,i=A));const L=_.tY;Z(r,L,A=>n(17,s=A));const P=_.isOk;Z(r,P,A=>n(19,f=A));let q,w,Y=0,z=0,B;return r.$$set=A=>{"tickCoords"in A&&n(13,u=A.tickCoords),"textColor"in A&&n(14,a=A.textColor),"tickLabels"in A&&n(0,c=A.tickLabels),"pos"in A&&n(1,m=A.pos),"las"in A&&n(2,h=A.las)},r.$$.update=()=>{r.$$.dirty&925696&&f&&(n(3,q=_.transform(u[1][0],i.coords)),n(4,w=_.transform(u[1][1],s.coords))),r.$$.dirty&65536&&n(15,t=_.LABELS_MARGIN[o]),r.$$.dirty&32770&&(n(7,B=["middle","middle","start","middle","end"][m]),n(5,Y=[0,0,t,0,-t][m]),n(6,z=[0,t,0,-t,0][m])),r.$$.dirty&16384&&n(8,l=`dominant-baseline:middle;fill:${a};font-size:1em; text-anchor:middle;`)},[c,m,h,q,w,Y,z,B,l,p,v,L,P,u,a,t,o,s,i,f]}class ps extends re{constructor(e){super(),ne(this,e,gs,ds,$,{tickCoords:13,textColor:14,tickLabels:0,pos:1,las:2})}}function br(r){let e,n;return e=new ln({props:{lineCoords:r[5],lineColor:r[9],lineType:3}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.lineCoords=t[5]),l&512&&(o.lineColor=t[9]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function wr(r){let e,n;return e=new ps({props:{las:r[2],pos:r[3],tickCoords:r[7],tickLabels:r[0],textColor:r[10]}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.las=t[2]),l&8&&(o.pos=t[3]),l&128&&(o.tickCoords=t[7]),l&1&&(o.tickLabels=t[0]),l&1024&&(o.textColor=t[10]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function bs(r){let e,n,t,l,o,s,i=r[1]&&br(r);t=new ln({props:{lineCoords:r[6],lineColor:r[8],lineType:1}}),l=new ln({props:{lineCoords:r[7],lineColor:r[8],lineType:1}});let f=r[7].length===2&&r[0].length===r[7][1][0].length&&wr(r);return{c(){e=ce("g"),i&&i.c(),n=ee(),M(t.$$.fragment),M(l.$$.fragment),f&&f.c(),g(e,"class",o="mdaplot__axis "+r[4])},m(u,a){y(u,e,a),i&&i.m(e,null),F(e,n),S(t,e,null),S(l,e,null),f&&f.m(e,null),s=!0},p(u,[a]){u[1]?i?(i.p(u,a),a&2&&d(i,1)):(i=br(u),i.c(),d(i,1),i.m(e,n)):i&&(Q(),b(i,1,1,()=>{i=null}),J());const c={};a&64&&(c.lineCoords=u[6]),a&256&&(c.lineColor=u[8]),t.$set(c);const m={};a&128&&(m.lineCoords=u[7]),a&256&&(m.lineColor=u[8]),l.$set(m),u[7].length===2&&u[0].length===u[7][1][0].length?f?(f.p(u,a),a&129&&d(f,1)):(f=wr(u),f.c(),d(f,1),f.m(e,null)):f&&(Q(),b(f,1,1,()=>{f=null}),J()),(!s||a&16&&o!==(o="mdaplot__axis "+u[4]))&&g(e,"class",o)},i(u){s||(d(i),d(t.$$.fragment,u),d(l.$$.fragment,u),d(f),s=!0)},o(u){b(i),b(t.$$.fragment,u),b(l.$$.fragment,u),b(f),s=!1},d(u){u&&k(e),i&&i.d(),N(t),N(l),f&&f.d()}}}function ws(r,e,n){let{tickLabels:t=[]}=e,{showGrid:l=!1}=e,{las:o=1}=e,{pos:s=1}=e,{className:i=""}=e,{grid:f=[]}=e,{axisLine:u=[]}=e,{tickCoords:a=[]}=e,{lineColor:c=ke.DARKGRAY}=e,{gridColor:m=ke.MIDDLEGRAY}=e,{textColor:h=ke.DARKGRAY}=e;return r.$$set=_=>{"tickLabels"in _&&n(0,t=_.tickLabels),"showGrid"in _&&n(1,l=_.showGrid),"las"in _&&n(2,o=_.las),"pos"in _&&n(3,s=_.pos),"className"in _&&n(4,i=_.className),"grid"in _&&n(5,f=_.grid),"axisLine"in _&&n(6,u=_.axisLine),"tickCoords"in _&&n(7,a=_.tickCoords),"lineColor"in _&&n(8,c=_.lineColor),"gridColor"in _&&n(9,m=_.gridColor),"textColor"in _&&n(10,h=_.textColor)},[t,l,o,s,i,f,u,a,c,m,h]}class vr extends re{constructor(e){super(),ne(this,e,ws,bs,$,{tickLabels:0,showGrid:1,las:2,pos:3,className:4,grid:5,axisLine:6,tickCoords:7,lineColor:8,gridColor:9,textColor:10})}}function kr(r){let e,n;return e=new vr({props:{className:"mdaplot__xaxis",pos:1,lineColor:r[3],gridColor:r[4],textColor:r[5],showGrid:r[1],grid:r[7],axisLine:r[8],tickCoords:r[9],tickLabels:r[0],las:r[2]}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.lineColor=t[3]),l&16&&(o.gridColor=t[4]),l&32&&(o.textColor=t[5]),l&2&&(o.showGrid=t[1]),l&128&&(o.grid=t[7]),l&256&&(o.axisLine=t[8]),l&512&&(o.tickCoords=t[9]),l&1&&(o.tickLabels=t[0]),l&4&&(o.las=t[2]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function vs(r){let e,n,t=r[6]&&r[8].length>0&&kr(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[6]&&l[8].length>0?t?(t.p(l,o),o&320&&d(t,1)):(t=kr(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}function ks(r,e,n){let t,l,o,s,i,{slot:f="xaxis"}=e,{ticks:u=void 0}=e,{tickLabels:a=void 0}=e,{showGrid:c=!1}=e,{las:m=1}=e,{lineColor:h=ke.DARKGRAY}=e,{gridColor:_=ke.MIDDLEGRAY}=e,{textColor:p=ke.DARKGRAY}=e;if(f!=="xaxis")throw`Component XAxis must have "slot='xaxis'" attribute.`;const v=He("axes"),L=v.xLim;Z(r,L,E=>n(18,l=E));const P=v.yLim;Z(r,P,E=>n(17,t=E));const q=v.scale;Z(r,q,E=>n(20,s=E));const w=v.isOk;Z(r,w,E=>n(6,i=E));const Y=v.tY;Z(r,Y,E=>n(19,o=E));let z=[],B=[],A=[];return r.$$set=E=>{"slot"in E&&n(15,f=E.slot),"ticks"in E&&n(16,u=E.ticks),"tickLabels"in E&&n(0,a=E.tickLabels),"showGrid"in E&&n(1,c=E.showGrid),"las"in E&&n(2,m=E.las),"lineColor"in E&&n(3,h=E.lineColor),"gridColor"in E&&n(4,_=E.gridColor),"textColor"in E&&n(5,p=E.textColor)},r.$$.update=()=>{if(r.$$.dirty&2031681&&i){const E=xn(u,l,v.TICK_NUM[s],!0),I=E.length,U=v.invTransform([v.TICK_SIZE[s]],o.objects)[0],W=le.fill(t[0],I),he=W.add(U),te=le.fill(t[1],I);if(n(0,a=u===void 0||a===void 0?E.v:a),a.length!==E.length)throw'XAxis: "tickLabels" must be a array of the same size as ticks.';n(7,z=[[E,W],[E,te]]),n(8,B=[[Ae([l[0]]),Ae([t[0]])],[Ae([l[1]]),Ae([t[0]])]]),n(9,A=[[E,he],[E,W]])}},[a,c,m,h,_,p,i,z,B,A,L,P,q,w,Y,f,u,t,l,o,s]}class zt extends re{constructor(e){super(),ne(this,e,ks,vs,$,{slot:15,ticks:16,tickLabels:0,showGrid:1,las:2,lineColor:3,gridColor:4,textColor:5})}}function yr(r){let e,n;return e=new vr({props:{className:"mdaplot__yaxis",pos:4,lineColor:r[3],gridColor:r[4],textColor:r[5],showGrid:r[1],grid:r[7],axisLine:r[8],tickCoords:r[9],tickLabels:r[0],las:r[2]}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.lineColor=t[3]),l&16&&(o.gridColor=t[4]),l&32&&(o.textColor=t[5]),l&2&&(o.showGrid=t[1]),l&128&&(o.grid=t[7]),l&256&&(o.axisLine=t[8]),l&512&&(o.tickCoords=t[9]),l&1&&(o.tickLabels=t[0]),l&4&&(o.las=t[2]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function ys(r){let e,n,t=r[6]&&r[8].length>0&&yr(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[6]&&l[8].length>0?t?(t.p(l,o),o&320&&d(t,1)):(t=yr(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}function Es(r,e,n){let t,l,o,s,i,{slot:f="yaxis"}=e,{ticks:u=void 0}=e,{tickLabels:a=void 0}=e,{showGrid:c=!1}=e,{las:m=1}=e,{lineColor:h=ke.DARKGRAY}=e,{gridColor:_=ke.MIDDLEGRAY}=e,{textColor:p=ke.DARKGRAY}=e;if(f!=="yaxis")throw`Component YAxis must have "slot='yaxis'" attribute.`;const v=He("axes"),L=v.xLim;Z(r,L,E=>n(18,l=E));const P=v.yLim;Z(r,P,E=>n(17,t=E));const q=v.scale;Z(r,q,E=>n(20,s=E));const w=v.isOk;Z(r,w,E=>n(6,i=E));const Y=v.tX;Z(r,Y,E=>n(19,o=E));let z=[],B=[],A=[];return r.$$set=E=>{"slot"in E&&n(15,f=E.slot),"ticks"in E&&n(16,u=E.ticks),"tickLabels"in E&&n(0,a=E.tickLabels),"showGrid"in E&&n(1,c=E.showGrid),"las"in E&&n(2,m=E.las),"lineColor"in E&&n(3,h=E.lineColor),"gridColor"in E&&n(4,_=E.gridColor),"textColor"in E&&n(5,p=E.textColor)},r.$$.update=()=>{if(r.$$.dirty&2031681&&i){const E=xn(u,t,v.TICK_NUM[s],!0),I=E.length,U=v.invTransform([v.TICK_SIZE[s]],o.objects)[0],W=le.fill(l[0],I),he=W.add(U),te=le.fill(l[1],I);if(n(0,a=u===void 0||a===void 0?E.v:a),a.length!==E.length)throw'YAxis: "tickLabels" must be a array of the same size as ticks.';n(7,z=[[W,E],[te,E]]),n(8,B=[[Ae([l[0]]),Ae([t[0]])],[Ae([l[0]]),Ae([t[1]])]]),n(9,A=[[W,E],[he,E]])}},[a,c,m,h,_,p,i,z,B,A,L,P,q,w,Y,f,u,t,l,o,s]}class Pt extends re{constructor(e){super(),ne(this,e,Es,ys,$,{slot:15,ticks:16,tickLabels:0,showGrid:1,las:2,lineColor:3,gridColor:4,textColor:5})}}function Er(r){let e,n,t,l,o,s;return{c(){e=ce("g"),n=ce("rect"),g(n,"x",t=r[2][0]),g(n,"y",l=r[1][1]),g(n,"width",o=r[2][1]-r[2][0]),g(n,"height",s=r[1][0]-r[1][1]),g(n,"style",r[3]),ft(e,"pointer-events","none"),g(e,"class","mdaplot__axes-box")},m(i,f){y(i,e,f),F(e,n)},p(i,f){f&4&&t!==(t=i[2][0])&&g(n,"x",t),f&2&&l!==(l=i[1][1])&&g(n,"y",l),f&4&&o!==(o=i[2][1]-i[2][0])&&g(n,"width",o),f&2&&s!==(s=i[1][0]-i[1][1])&&g(n,"height",s)},d(i){i&&k(e)}}}function Cs(r){let e,n=r[0]&&Er(r);return{c(){n&&n.c(),e=ee()},m(t,l){n&&n.m(t,l),y(t,e,l)},p(t,[l]){t[0]?n?n.p(t,l):(n=Er(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:j,o:j,d(t){t&&k(e),n&&n.d(t)}}}function Ls(r,e,n){let t,l,o,s,i,f,u,{slot:a}=e;if(a!=="box")throw`Component Box must have 'slot="box"' attribute.`;const c=`fill:transparent;stroke:${ke.DARKGRAY};stroke-width:1px;`,m=He("axes"),h=m.xLim;Z(r,h,P=>n(13,u=P));const _=m.yLim;Z(r,_,P=>n(11,s=P));const p=m.isOk;Z(r,p,P=>n(0,i=P));const v=m.tX;Z(r,v,P=>n(12,f=P));const L=m.tY;return Z(r,L,P=>n(10,o=P)),r.$$set=P=>{"slot"in P&&n(9,a=P.slot)},r.$$.update=()=>{r.$$.dirty&12289&&n(2,t=i?m.transform(u,f.coords):void 0),r.$$.dirty&3073&&n(1,l=i?m.transform(s,o.coords):void 0)},[i,l,t,c,h,_,p,v,L,a,o,s,f,u]}class qt extends re{constructor(e){super(),ne(this,e,Ls,Cs,$,{slot:9})}}function Cr(r,e,n){const t=r.slice();return t[23]=e[n],t[25]=n,t}function Lr(r){let e,n,t=de(r[2]),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ar(Cr(r,t,o));return{c(){e=ce("g");for(let o=0;o<l.length;o+=1)l[o].c();g(e,"class",n="series "+r[0]),g(e,"title",r[1]),g(e,"style",r[7])},m(o,s){y(o,e,s);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(o,s){if(s&60){t=de(o[2]);let i;for(i=0;i<t.length;i+=1){const f=Cr(o,t,i);l[i]?l[i].p(f,s):(l[i]=Ar(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}s&1&&n!==(n="series "+o[0])&&g(e,"class",n),s&2&&g(e,"title",o[1]),s&128&&g(e,"style",o[7])},d(o){o&&k(e),Pe(l,o)}}}function Ar(r){let e,n,t,l,o;return{c(){e=ce("line"),g(e,"x1",n=r[2][r[25]]),g(e,"x2",t=r[3][r[25]]),g(e,"y1",l=r[4][r[25]]),g(e,"y2",o=r[5][r[25]])},m(s,i){y(s,e,i)},p(s,i){i&4&&n!==(n=s[2][s[25]])&&g(e,"x1",n),i&8&&t!==(t=s[3][s[25]])&&g(e,"x2",t),i&16&&l!==(l=s[4][s[25]])&&g(e,"y1",l),i&32&&o!==(o=s[5][s[25]])&&g(e,"y2",o)},d(s){s&&k(e)}}}function As(r){let e,n=r[6]&&Lr(r);return{c(){n&&n.c(),e=ee()},m(t,l){n&&n.m(t,l),y(t,e,l)},p(t,[l]){t[6]?n?n.p(t,l):(n=Lr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:j,o:j,d(t){t&&k(e),n&&n.d(t)}}}function Ss(r,e,n){let t,l,o,s,i,{xStart:f}=e,{xEnd:u}=e,{yStart:a}=e,{yEnd:c}=e,{lineColor:m=ke.PRIMARY}=e,{lineType:h=1}=e,{lineWidth:_=1}=e,{className:p="series_seg"}=e,{title:v=""}=e;const L=He("axes"),P=L.scale;Z(r,P,I=>n(19,l=I));const q=L.isOk;Z(r,q,I=>n(6,i=I));const w=L.tX;Z(r,w,I=>n(21,s=I));const Y=L.tY;Z(r,Y,I=>n(20,o=I));let z,B,A,E;return r.$$set=I=>{"xStart"in I&&n(12,f=I.xStart),"xEnd"in I&&n(13,u=I.xEnd),"yStart"in I&&n(14,a=I.yStart),"yEnd"in I&&n(15,c=I.yEnd),"lineColor"in I&&n(16,m=I.lineColor),"lineType"in I&&n(17,h=I.lineType),"lineWidth"in I&&n(18,_=I.lineWidth),"className"in I&&n(0,p=I.className),"title"in I&&n(1,v=I.title)},r.$$.update=()=>{if(r.$$.dirty&3207292&&i){n(2,z=L.transform($e(f,"Segments"),s.coords)),n(4,A=L.transform($e(a,"Segments"),o.coords)),n(3,B=L.transform($e(u,"Segments"),s.coords)),n(5,E=L.transform($e(c,"Segments"),o.coords));const I=z.length;if(B.length!==I||A.length!==I||E.length!==I)throw Error('Segments: parameters "xStart", "yStart", "xEnd" and "yEnd" should have the same length.')}r.$$.dirty&983040&&n(7,t=`stroke:${m};stroke-width: ${_}px;stroke-dasharray:${L.LINE_STYLES[l][h-1]}`)},[p,v,z,B,A,E,i,t,P,q,w,Y,f,u,a,c,m,h,_,l,o,s]}class on extends re{constructor(e){super(),ne(this,e,Ss,As,$,{xStart:12,xEnd:13,yStart:14,yEnd:15,lineColor:16,lineType:17,lineWidth:18,className:0,title:1})}}const Af="",Sf="";function Sr(r,e,n){const t=r.slice();return t[19]=e[n],t[21]=n,t}function Nr(r){let e,n=de(r[1]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Rr(Sr(r,n,l));return{c(){e=ce("g");for(let l=0;l<t.length;l+=1)t[l].c();g(e,"class","series series_points"),g(e,"title",r[0]),g(e,"style",r[5])},m(l,o){y(l,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(l,o){if(o&22){n=de(l[1]);let s;for(s=0;s<n.length;s+=1){const i=Sr(l,n,s);t[s]?t[s].p(i,o):(t[s]=Rr(i),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}o&1&&g(e,"title",l[0]),o&32&&g(e,"style",l[5])},d(l){l&&k(e),Pe(t,l)}}}function Rr(r){let e,n,t,l;return{c(){e=ce("text"),n=ie(r[4]),g(e,"x",t=r[1][r[21]]),g(e,"y",l=r[2][r[21]]),g(e,"class","svelte-12moot9")},m(o,s){y(o,e,s),F(e,n)},p(o,s){s&16&&Le(n,o[4]),s&2&&t!==(t=o[1][o[21]])&&g(e,"x",t),s&4&&l!==(l=o[2][o[21]])&&g(e,"y",l)},d(o){o&&k(e)}}}function Ns(r){let e,n=r[3]&&r[1]!==void 0&&r[2]!==void 0&&Nr(r);return{c(){n&&n.c(),e=ee()},m(t,l){n&&n.m(t,l),y(t,e,l)},p(t,[l]){t[3]&&t[1]!==void 0&&t[2]!==void 0?n?n.p(t,l):(n=Nr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:j,o:j,d(t){t&&k(e),n&&n.d(t)}}}function Rs(r,e,n){let t,l,o,s,{xValues:i}=e,{yValues:f}=e,{marker:u=1}=e,{faceColor:a="transparent"}=e,{borderColor:c=ke.PRIMARY}=e,{borderWidth:m=1}=e,{markerSize:h=1}=e,{title:_=""}=e;const p=He("axes"),v=p.tX;Z(r,v,z=>n(17,o=z));const L=p.tY;Z(r,L,z=>n(16,l=z));const P=p.isOk;Z(r,P,z=>n(3,s=z));let q,w,Y;return r.$$set=z=>{"xValues"in z&&n(9,i=z.xValues),"yValues"in z&&n(10,f=z.yValues),"marker"in z&&n(11,u=z.marker),"faceColor"in z&&n(12,a=z.faceColor),"borderColor"in z&&n(13,c=z.borderColor),"borderWidth"in z&&n(14,m=z.borderWidth),"markerSize"in z&&n(15,h=z.markerSize),"title"in z&&n(0,_=z.title)},r.$$.update=()=>{if(r.$$.dirty&200206&&s){if(typeof u!="number"||u<1||u>p.MARKER_SYMBOLS.length)throw Error(`ScatterSeries: parameter "marker" must be a number from 1 to ${p.MARKER_SYMBOLS.length}.`);if(n(4,Y=p.MARKER_SYMBOLS[u-1]),n(1,q=p.transform($e(i,"Points"),o.coords)),n(2,w=p.transform($e(f,"Points"),l.coords)),q.length!==w.length)throw Error('Points: parameters "xValues" and "yValues" must be vectors of the same length.')}r.$$.dirty&61440&&n(5,t=`dominant-baseline:middle;fill:${a};stroke-width:${m}px;stroke:${c};
      font-size:${h}em; text-anchor:middle;cursor:default;user-select:none;`)},[_,q,w,s,Y,t,v,L,P,i,f,u,a,c,m,h,l,o]}class Ms extends re{constructor(e){super(),ne(this,e,Rs,Ns,$,{xValues:9,yValues:10,marker:11,faceColor:12,borderColor:13,borderWidth:14,markerSize:15,title:0})}}function Mr(r){let e,n;return{c(){e=ce("g"),n=ce("polyline"),g(n,"class","line"),g(n,"points",r[3]),g(e,"class","series series_line"),g(e,"style",r[2]),g(e,"title",r[0])},m(t,l){y(t,e,l),F(e,n)},p(t,l){l&8&&g(n,"points",t[3]),l&4&&g(e,"style",t[2]),l&1&&g(e,"title",t[0])},d(t){t&&k(e)}}}function Ts(r){let e,n=r[1]&&r[3]!==void 0&&Mr(r);return{c(){n&&n.c(),e=ee()},m(t,l){n&&n.m(t,l),y(t,e,l)},p(t,[l]){t[1]&&t[3]!==void 0?n?n.p(t,l):(n=Mr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:j,o:j,d(t){t&&k(e),n&&n.d(t)}}}function zs(r,e,n){let t,l,o,s,i,f,{xValues:u}=e,{yValues:a}=e,{lineWidth:c=1}=e,{lineColor:m=ke.PRIMARY}=e,{lineType:h=1}=e,{title:_=""}=e;const p=He("axes"),v=p.scale;Z(r,v,w=>n(13,o=w));const L=p.isOk;Z(r,L,w=>n(1,f=w));const P=p.tX;Z(r,P,w=>n(15,i=w));const q=p.tY;return Z(r,q,w=>n(14,s=w)),r.$$set=w=>{"xValues"in w&&n(8,u=w.xValues),"yValues"in w&&n(9,a=w.yValues),"lineWidth"in w&&n(10,c=w.lineWidth),"lineColor"in w&&n(11,m=w.lineColor),"lineType"in w&&n(12,h=w.lineType),"title"in w&&n(0,_=w.title)},r.$$.update=()=>{r.$$.dirty&49922&&n(3,t=f?ns(u,a,i,s,p):void 0),r.$$.dirty&15360&&n(2,l=`fill:transparent;stroke:${m};stroke-width: ${c}px; stroke-dasharray:${p.LINE_STYLES[o][h-1]}`)},[_,f,l,t,v,L,P,q,u,a,c,m,h,o,s,i]}class Yt extends re{constructor(e){super(),ne(this,e,zs,Ts,$,{xValues:8,yValues:9,lineWidth:10,lineColor:11,lineType:12,title:0})}}function Tr(r,e,n){const t=r.slice();return t[25]=e[n],t[27]=n,t}function zr(r){let e,n,t,l,o,s=de(r[0]),i=[];for(let f=0;f<s.length;f+=1)i[f]=Yr(Tr(r,s,f));return{c(){e=ce("svg"),n=ce("rect");for(let f=0;f<i.length;f+=1)i[f].c();g(n,"height","100%"),g(n,"width","100%"),ft(n,"fill","white"),ft(n,"stroke",ke.MIDDLEGRAY),g(e,"x",t=r[9]+"px"),g(e,"y",l=r[10]+"px"),g(e,"height",o=r[4]+"px"),g(e,"width",r[5])},m(f,u){y(f,e,u),F(e,n);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null)},p(f,u){if(u&2287){s=de(f[0]);let a;for(a=0;a<s.length;a+=1){const c=Tr(f,s,a);i[a]?i[a].p(c,u):(i[a]=Yr(c),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=s.length}u&512&&t!==(t=f[9]+"px")&&g(e,"x",t),u&1024&&l!==(l=f[10]+"px")&&g(e,"y",l),u&16&&o!==(o=f[4]+"px")&&g(e,"height",o),u&32&&g(e,"width",f[5])},d(f){f&&k(e),Pe(i,f)}}}function Pr(r){let e,n,t,l,o;return{c(){e=ce("line"),g(e,"x1",r[3]),g(e,"x2",n=r[3]+r[2]),g(e,"y1",t=(r[1]+r[3]*2)/2),g(e,"y2",l=(r[1]+r[3]*2)/2),g(e,"style",o=`
      stroke:${r[25].lineColor?r[25].lineColor:ke.PRIMARY};
      stroke-width: ${r[25].lineWidth?r[25].lineWidth:1}px;
      stroke-dasharray:${r[11].LINE_STYLES[r[7]][r[25].lineType-1]}
   `)},m(s,i){y(s,e,i)},p(s,i){i&8&&g(e,"x1",s[3]),i&12&&n!==(n=s[3]+s[2])&&g(e,"x2",n),i&10&&t!==(t=(s[1]+s[3]*2)/2)&&g(e,"y1",t),i&10&&l!==(l=(s[1]+s[3]*2)/2)&&g(e,"y2",l),i&129&&o!==(o=`
      stroke:${s[25].lineColor?s[25].lineColor:ke.PRIMARY};
      stroke-width: ${s[25].lineWidth?s[25].lineWidth:1}px;
      stroke-dasharray:${s[11].LINE_STYLES[s[7]][s[25].lineType-1]}
   `)&&g(e,"style",o)},d(s){s&&k(e)}}}function qr(r){let e,n=r[11].MARKER_SYMBOLS[r[25].marker-1]+"",t,l,o,s;return{c(){e=ce("text"),t=ie(n),g(e,"x",l=(r[2]+2*r[3])/2+"px"),g(e,"y",o=(r[1]+2*r[3])/2+"px"),g(e,"dominant-baseline","middle"),g(e,"style",s=`
         fill:${r[25].faceColor?r[25].faceColor:"transparent"};
         stroke-width:${r[25].borderWidth?r[25].borderWidth:1}px;
         stroke:${r[25].borderColor?r[25].borderColor:ke.PRIMARY};
         font-size:${r[6]}px;
         text-anchor:middle;`)},m(i,f){y(i,e,f),F(e,t)},p(i,f){f&1&&n!==(n=i[11].MARKER_SYMBOLS[i[25].marker-1]+"")&&Le(t,n),f&12&&l!==(l=(i[2]+2*i[3])/2+"px")&&g(e,"x",l),f&10&&o!==(o=(i[1]+2*i[3])/2+"px")&&g(e,"y",o),f&65&&s!==(s=`
         fill:${i[25].faceColor?i[25].faceColor:"transparent"};
         stroke-width:${i[25].borderWidth?i[25].borderWidth:1}px;
         stroke:${i[25].borderColor?i[25].borderColor:ke.PRIMARY};
         font-size:${i[6]}px;
         text-anchor:middle;`)&&g(e,"style",s)},d(i){i&&k(e)}}}function Yr(r){let e,n,t,l="&nbsp;"+r[25].label,o,s,i,f,u,a,c=r[25].lineType&&r[25].lineType>0&&r[25].lineType<=4&&Pr(r),m=r[25].marker&&r[25].marker>0&&r[25].marker<r[11].MARKER_SYMBOLS.length&&qr(r);return{c(){e=ce("svg"),c&&c.c(),n=ee(),m&&m.c(),t=ce("text"),g(t,"x",o=r[2]+r[3]*3+"px"),g(t,"y",s=r[3]+"px"),g(t,"dominant-baseline","hanging"),g(t,"style",i=`text-anchor:start;fill:${ke.LEGEND};font-size:${r[6]}px;`),g(e,"x","0px"),g(e,"y",f=r[27]*(r[1]+2*r[3])+"px"),g(e,"width",u=r[5]+"px"),g(e,"height",a=r[1]+2*r[3]+"px")},m(h,_){y(h,e,_),c&&c.m(e,null),F(e,n),m&&m.m(e,null),F(e,t),t.innerHTML=l},p(h,_){h[25].lineType&&h[25].lineType>0&&h[25].lineType<=4?c?c.p(h,_):(c=Pr(h),c.c(),c.m(e,n)):c&&(c.d(1),c=null),h[25].marker&&h[25].marker>0&&h[25].marker<h[11].MARKER_SYMBOLS.length?m?m.p(h,_):(m=qr(h),m.c(),m.m(e,t)):m&&(m.d(1),m=null),_&1&&l!==(l="&nbsp;"+h[25].label)&&(t.innerHTML=l),_&12&&o!==(o=h[2]+h[3]*3+"px")&&g(t,"x",o),_&8&&s!==(s=h[3]+"px")&&g(t,"y",s),_&64&&i!==(i=`text-anchor:start;fill:${ke.LEGEND};font-size:${h[6]}px;`)&&g(t,"style",i),_&10&&f!==(f=h[27]*(h[1]+2*h[3])+"px")&&g(e,"y",f),_&32&&u!==(u=h[5]+"px")&&g(e,"width",u),_&10&&a!==(a=h[1]+2*h[3]+"px")&&g(e,"height",a)},d(h){h&&k(e),c&&c.d(),m&&m.d()}}}function Ps(r){let e,n=r[8]&&zr(r);return{c(){n&&n.c(),e=ee()},m(t,l){n&&n.m(t,l),y(t,e,l)},p(t,[l]){t[8]?n?n.p(t,l):(n=zr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:j,o:j,d(t){t&&k(e),n&&n.d(t)}}}function qs(r,e){const t=document.createElement("canvas").getContext("2d");return t.font=e,t.measureText(r).width}function Ys(r,e,n){const t=e,l=t/4,o=t*1.5,s=t;let i=0;for(let f=0;f<r.length;f++){const u=qs("  "+r[f].label+"  ",e+"px Arial");i=u>i?u:i}return[t,o,l,s,i]}function Is(r,e,n){let t,l,o,s,i,f,{items:u}=e,{position:a="topleft"}=e;const c=He("axes"),m=c.scale;Z(r,m,W=>n(7,t=W));const h=c.xLim;Z(r,h,W=>n(23,i=W));const _=c.yLim;Z(r,_,W=>n(21,o=W));const p=c.tX;Z(r,p,W=>n(22,s=W));const v=c.tY;Z(r,v,W=>n(20,l=W));const L=c.isOk;Z(r,L,W=>n(8,f=W));let P,q,w,Y,z,B,A,E,I,U;return r.$$set=W=>{"items"in W&&n(0,u=W.items),"position"in W&&n(18,a=W.position)},r.$$.update=()=>{if(r.$$.dirty&16515583&&f){n(6,U=c.LEGEND_FONT_SIZE[t]),n(1,[w,Y,z,B,A]=Ys(u,U),w,(n(2,Y),n(8,f),n(7,t),n(0,u),n(6,U),n(18,a),n(1,w),n(3,z),n(19,A),n(23,i),n(22,s),n(5,I),n(21,o),n(20,l),n(4,E)),(n(3,z),n(8,f),n(7,t),n(0,u),n(6,U),n(18,a),n(1,w),n(2,Y),n(19,A),n(23,i),n(22,s),n(5,I),n(21,o),n(20,l),n(4,E)),(n(19,A),n(8,f),n(7,t),n(0,u),n(6,U),n(18,a),n(1,w),n(3,z),n(2,Y),n(23,i),n(22,s),n(5,I),n(21,o),n(20,l),n(4,E))),n(4,E=(w+2*z)*u.length),n(5,I=Y+2*z+A);const W=c.transform(i,s.coords);n(9,P=a.includes("left")?W[0]+c.TICK_SIZE[t]:a.includes("right")?W[1]-I-c.TICK_SIZE[t]:Kt(W)-I/2);const he=c.transform(o,l.coords);n(10,q=a.includes("top")?he[1]+c.TICK_SIZE[t]:a.includes("bottom")?he[0]-E-c.TICK_SIZE[t]:Kt(he)-E/2)}},[u,w,Y,z,E,I,U,t,f,P,q,c,m,h,_,p,v,L,a,A,l,o,s,i]}class Os extends re{constructor(e){super(),ne(this,e,Is,Ps,$,{items:0,position:18})}}const Ee={cal:{label:"cal",marker:1,borderColor:"white",borderWidth:.5,faceColor:"#B0A8A0",lineColor:"#B0A8A0",lineWidth:1},pv:{label:"cal",marker:1,borderColor:"#2679B2",borderWidth:1.5,faceColor:"transparent",lineColor:"#2679B2",lineWidth:1.25}};function Ir(r){let e,n,t,l=(r[0]=="l"||r[0]=="b")&&Or(r),o=(r[0]=="p"||r[0]=="b")&&Br(r);return{c(){l&&l.c(),e=H(),o&&o.c(),n=ee()},m(s,i){l&&l.m(s,i),y(s,e,i),o&&o.m(s,i),y(s,n,i),t=!0},p(s,i){s[0]=="l"||s[0]=="b"?l?(l.p(s,i),i&1&&d(l,1)):(l=Or(s),l.c(),d(l,1),l.m(e.parentNode,e)):l&&(Q(),b(l,1,1,()=>{l=null}),J()),s[0]=="p"||s[0]=="b"?o?(o.p(s,i),i&1&&d(o,1)):(o=Br(s),o.c(),d(o,1),o.m(n.parentNode,n)):o&&(Q(),b(o,1,1,()=>{o=null}),J())},i(s){t||(d(l),d(o),t=!0)},o(s){b(l),b(o),t=!1},d(s){s&&(k(e),k(n)),l&&l.d(s),o&&o.d(s)}}}function Or(r){let e,n;return e=new Yt({props:{xValues:r[1].x,yValues:r[1].y,lineWidth:Ee[r[1].id].lineWidth,lineColor:Ee[r[1].id].lineColor}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.xValues=t[1].x),l&2&&(o.yValues=t[1].y),l&2&&(o.lineWidth=Ee[t[1].id].lineWidth),l&2&&(o.lineColor=Ee[t[1].id].lineColor),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Br(r){let e,n;return e=new Ms({props:{xValues:r[1].x,yValues:r[1].y,marker:Ee[r[1].id].marker,borderWidth:Ee[r[1].id].borderWidth,faceColor:Ee[r[1].id].faceColor,borderColor:Ee[r[1].id].borderColor}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.xValues=t[1].x),l&2&&(o.yValues=t[1].y),l&2&&(o.marker=Ee[t[1].id].marker),l&2&&(o.borderWidth=Ee[t[1].id].borderWidth),l&2&&(o.faceColor=Ee[t[1].id].faceColor),l&2&&(o.borderColor=Ee[t[1].id].borderColor),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Bs(r){let e,n,t=r[1]&&Ir(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[1]?t?(t.p(l,o),o&2&&d(t,1)):(t=Ir(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}function Vs(r,e,n){let{type:t="p"}=e,{values:l}=e;return r.$$set=o=>{"type"in o&&n(0,t=o.type),"values"in o&&n(1,l=o.values)},[t,l]}class It extends re{constructor(e){super(),ne(this,e,Vs,Bs,$,{type:0,values:1})}}function Fs(r){let e,n;return e=new Os({props:{position:r[0],items:[{label:"cal",marker:Ee.cal.marker,borderColor:Ee.cal.borderColor,faceColor:Ee.cal.faceColor},{label:"pv",marker:Ee.pv.marker,borderWidth:Ee.pv.borderColor,borderColor:Ee.pv.borderColor}]}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.position=t[0]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function js(r,e,n){let{position:t="topright"}=e;return r.$$set=l=>{"position"in l&&n(0,t=l.position)},[t]}class Ot extends re{constructor(e){super(),ne(this,e,js,Fs,$,{position:0})}}function Vr(r,e,n){const t=r.slice();return t[11]=e[n],t}function Fr(r){let e,n;return e=new Tt({props:{margins:r[5],xLabel:Ks,yLabel:Zs,limX:r[3],limY:r[2],title:r[4],$$slots:{box:[Hs],yaxis:[Gs],xaxis:[Ds],default:[Ws]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.limX=t[3]),l&4&&(o.limY=t[2]),l&16&&(o.title=t[4]),l&16386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function jr(r){let e,n;return e=new It({props:{values:r[11],type:"p"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.values=t[11]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Ws(r){let e,n,t,l=de(r[1]),o=[];for(let i=0;i<l.length;i+=1)o[i]=jr(Vr(r,l,i));const s=i=>b(o[i],1,1,()=>{o[i]=null});return n=new Ot({}),{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=H(),M(n.$$.fragment)},m(i,f){for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(i,f);y(i,e,f),S(n,i,f),t=!0},p(i,f){if(f&2){l=de(i[1]);let u;for(u=0;u<l.length;u+=1){const a=Vr(i,l,u);o[u]?(o[u].p(a,f),d(o[u],1)):(o[u]=jr(a),o[u].c(),d(o[u],1),o[u].m(e.parentNode,e))}for(Q(),u=l.length;u<o.length;u+=1)s(u);J()}},i(i){if(!t){for(let f=0;f<l.length;f+=1)d(o[f]);d(n.$$.fragment,i),t=!0}},o(i){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)b(o[f]);b(n.$$.fragment,i),t=!1},d(i){i&&k(e),Pe(o,i),N(n,i)}}}function Ds(r){let e,n;return e=new zt({props:{showGrid:Wr,slot:"xaxis"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Gs(r){let e,n;return e=new Pt({props:{showGrid:Wr,slot:"yaxis"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Hs(r){let e,n;return e=new qt({props:{slot:"box"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Us(r){let e,n,t=r[0]&&Fr(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&d(t,1)):(t=Fr(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}const Wr=!0,Ks="Score distance, h/h0",Zs="Orthogonal distance, q/q0";function Qs(r,e,n){let t,l,o,s,i,{model:f}=e,{res:u}=e,{params:a}=e;const c=[.65,.75,.1,.5];function m(_,p,v,L){if(!L||!L.ncomp)return null;const P=new le(tt(p,"hdist",L.ncomp)),q=new le(tt(p,"qdist",L.ncomp));return{id:_,x:P.apply(w=>w/v.h[L.ncomp-1]),y:q.apply(w=>w/v.q[L.ncomp-1])}}function h(_){if(!_)return null;const p=_t(_,"hmean"),v=_t(_,"qmean");return{h:p,q:v}}return r.$$set=_=>{"model"in _&&n(6,f=_.model),"res"in _&&n(7,u=_.res),"params"in _&&n(0,a=_.params)},r.$$.update=()=>{r.$$.dirty&1&&n(4,t=a&&a.ncomp?"Distance plot (A = "+a.ncomp+")":""),r.$$.dirty&64&&n(8,l=h(f)),r.$$.dirty&385&&n(1,o=a&&u?Object.keys(u).map(_=>m(_,u[_],l,a)):null),r.$$.dirty&2&&n(3,s=o?[0,1.2*We(Object.keys(o).map(_=>We(o[_].x)))]:[0,1]),r.$$.dirty&2&&n(2,i=o?[0,1.2*We(Object.keys(o).map(_=>We(o[_].y)))]:[0,1])},[a,o,i,s,t,c,f,u,l]}class Js extends re{constructor(e){super(),ne(this,e,Qs,Us,$,{model:6,res:7,params:0})}}function Dr(r){let e,n;return e=new ue({props:{label:r[2],$$slots:{default:[Xs]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.label=t[2]),l&19&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Xs(r){let e,n,t;function l(s){r[3](s)}let o={id:"ncomp",min:1,max:r[1].ncomp,step:1,decNum:0};return r[0]!==void 0&&(o.value=r[0]),e=new Qn({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};i&2&&(f.max=s[1].ncomp),!n&&i&1&&(n=!0,f.value=s[0],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function $s(r){let e,n,t=r[1]&&Dr(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[1]?t?(t.p(l,o),o&2&&d(t,1)):(t=Dr(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}function xs(r,e,n){let{model:t}=e,{value:l=1}=e,{label:o="# PCs"}=e;function s(i){l=i,n(0,l)}return r.$$set=i=>{"model"in i&&n(1,t=i.model),"value"in i&&n(0,l=i.value),"label"in i&&n(2,o=i.label)},[l,t,o,s]}class Bt extends re{constructor(e){super(),ne(this,e,xs,$s,$,{model:1,value:0,label:2})}}function ei(r){let e;return{c(){e=D("p"),e.textContent="Distances",g(e,"class","title")},m(n,t){y(n,e,t)},p:j,d(n){n&&k(e)}}}function Gr(r){let e,n,t;function l(s){r[4](s)}let o={label:"# PCs",model:r[0]};return r[2]!==void 0&&(o.value=r[2]),e=new Bt({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};i&1&&(f.model=s[0]),!n&&i&4&&(n=!0,f.value=s[2],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function ti(r){let e,n,t,l;e=new ue({props:{label:"",$$slots:{default:[ei]},$$scope:{ctx:r}}});let o=r[0]&&r[1]&&Gr(r);return{c(){M(e.$$.fragment),n=H(),o&&o.c(),t=ee()},m(s,i){S(e,s,i),y(s,n,i),o&&o.m(s,i),y(s,t,i),l=!0},p(s,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:s}),e.$set(f),s[0]&&s[1]?o?(o.p(s,i),i&3&&d(o,1)):(o=Gr(s),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Q(),b(o,1,1,()=>{o=null}),J())},i(s){l||(d(e.$$.fragment,s),d(o),l=!0)},o(s){b(e.$$.fragment,s),b(o),l=!1},d(s){s&&(k(n),k(t)),N(e,s),o&&o.d(s)}}}function ni(r,e,n){let{model:t}=e,{params:l}=e,{res:o}=e,s=1;function i(f){s=f,n(2,s)}return r.$$set=f=>{"model"in f&&n(0,t=f.model),"params"in f&&n(3,l=f.params),"res"in f&&n(1,o=f.res)},r.$$.update=()=>{r.$$.dirty&4&&n(3,l={ncomp:s})},[t,o,s,l,i]}class ri extends re{constructor(e){super(),ne(this,e,ni,ti,$,{model:0,params:3,res:1})}}function Hr(r,e,n){const t=r.slice();return t[17]=e[n],t}function Ur(r){let e,n;return e=new Tt({props:{margins:r[1],title:r[10],xLabel:r[3],yLabel:r[4],limX:[-1,r[6]+2],limY:[-1,r[6]+2],$$slots:{box:[ii],yaxis:[si],xaxis:[oi],default:[li]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.margins=t[1]),l&1024&&(o.title=t[10]),l&8&&(o.xLabel=t[3]),l&16&&(o.yLabel=t[4]),l&64&&(o.limX=[-1,t[6]+2]),l&64&&(o.limY=[-1,t[6]+2]),l&1049508&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Kr(r){let e,n;return e=new It({props:{values:r[17],type:"p"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&512&&(o.values=t[17]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function li(r){let e,n,t,l,o,s,i,f,u,a,c;e=new Yt({props:{xValues:r[5],yValues:r[5],lineColor:"#e0e0e0"}}),t=new Yt({props:{xValues:r[5],yValues:r[7],lineColor:"#e0e0e0"}}),o=new Yt({props:{xValues:r[5],yValues:r[8],lineColor:"#e0e0e0"}}),i=new on({props:{xStart:r[5],xEnd:r[5],yStart:r[7],yEnd:r[8],lineColor:"#e0e0e0"}});let m=de(r[9]),h=[];for(let p=0;p<m.length;p+=1)h[p]=Kr(Hr(r,m,p));const _=p=>b(h[p],1,1,()=>{h[p]=null});return a=new Ot({props:{position:"bottomright"}}),{c(){M(e.$$.fragment),n=H(),M(t.$$.fragment),l=H(),M(o.$$.fragment),s=H(),M(i.$$.fragment),f=H();for(let p=0;p<h.length;p+=1)h[p].c();u=H(),M(a.$$.fragment)},m(p,v){S(e,p,v),y(p,n,v),S(t,p,v),y(p,l,v),S(o,p,v),y(p,s,v),S(i,p,v),y(p,f,v);for(let L=0;L<h.length;L+=1)h[L]&&h[L].m(p,v);y(p,u,v),S(a,p,v),c=!0},p(p,v){const L={};v&32&&(L.xValues=p[5]),v&32&&(L.yValues=p[5]),e.$set(L);const P={};v&32&&(P.xValues=p[5]),v&128&&(P.yValues=p[7]),t.$set(P);const q={};v&32&&(q.xValues=p[5]),v&256&&(q.yValues=p[8]),o.$set(q);const w={};if(v&32&&(w.xStart=p[5]),v&32&&(w.xEnd=p[5]),v&128&&(w.yStart=p[7]),v&256&&(w.yEnd=p[8]),i.$set(w),v&512){m=de(p[9]);let Y;for(Y=0;Y<m.length;Y+=1){const z=Hr(p,m,Y);h[Y]?(h[Y].p(z,v),d(h[Y],1)):(h[Y]=Kr(z),h[Y].c(),d(h[Y],1),h[Y].m(u.parentNode,u))}for(Q(),Y=m.length;Y<h.length;Y+=1)_(Y);J()}},i(p){if(!c){d(e.$$.fragment,p),d(t.$$.fragment,p),d(o.$$.fragment,p),d(i.$$.fragment,p);for(let v=0;v<m.length;v+=1)d(h[v]);d(a.$$.fragment,p),c=!0}},o(p){b(e.$$.fragment,p),b(t.$$.fragment,p),b(o.$$.fragment,p),b(i.$$.fragment,p),h=h.filter(Boolean);for(let v=0;v<h.length;v+=1)b(h[v]);b(a.$$.fragment,p),c=!1},d(p){p&&(k(n),k(l),k(s),k(f),k(u)),N(e,p),N(t,p),N(o,p),N(i,p),Pe(h,p),N(a,p)}}}function oi(r){let e,n;return e=new zt({props:{showGrid:r[2],slot:"xaxis"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.showGrid=t[2]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function si(r){let e,n;return e=new Pt({props:{showGrid:r[2],slot:"yaxis"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.showGrid=t[2]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function ii(r){let e,n;return e=new qt({props:{slot:"box"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function fi(r){let e,n,t=r[0]&&Ur(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&d(t,1)):(t=Ur(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}function ui(r,e,n){let t,l,o,{model:s}=e,{res:i}=e,{params:f}=e,{margins:u=[.65,.75,.1,.5]}=e,{showGrid:a=!0}=e,{xLabel:c="Number of extremes (expected)"}=e,{yLabel:m="Number of extremes (observed)"}=e;function h(w,Y,z,B){if(!B||!B.ncomp||!w||!Y||!z||B.ncomp<0)return;const A=Y.u0[B.ncomp-1],E=Y.Nu[B.ncomp-1],I=z.u0[B.ncomp-1],U=z.Nu[B.ncomp-1],W=tt(w,"hdist",B.ncomp),he=tt(w,"qdist",B.ncomp);let te=le.zeros(l);for(let ae=0;ae<l;ae++){const T=W[ae]/A*E+he[ae]/I*U,K=$t(T,U+E);te=te.add(q.apply(qe=>1-K<qe))}return te}let _,p,v,L,P,q;return r.$$set=w=>{"model"in w&&n(11,s=w.model),"res"in w&&n(12,i=w.res),"params"in w&&n(0,f=w.params),"margins"in w&&n(1,u=w.margins),"showGrid"in w&&n(2,a=w.showGrid),"xLabel"in w&&n(3,c=w.xLabel),"yLabel"in w&&n(4,m=w.yLabel)},r.$$.update=()=>{if(r.$$.dirty&1&&n(10,t=f?"Extreme plot (A = "+f.ncomp+")":""),r.$$.dirty&2048&&(s?(n(13,_=jn(s,"h","classic")),n(14,p=jn(s,"q","classic"))):(n(13,_=void 0),n(14,p=void 0))),r.$$.dirty&4096&&n(6,l=i?i.cal.nrows:void 0),r.$$.dirty&64)if(l){q=le.zeros(l),n(5,v=le.zeros(l)),n(7,L=le.zeros(l)),n(8,P=le.zeros(l));for(let w=1;w<=l;w++){const Y=w/l,z=2*Math.sqrt(w*(1-Y));n(7,L.v[w-1]=w-z,L),n(8,P.v[w-1]=w+z,P),q.v[w-1]=Y,n(5,v.v[w-1]=w,v)}}else n(5,v=void 0),n(7,L=void 0),n(8,P=void 0),q=void 0;r.$$.dirty&28705&&n(9,o=f&&i?Object.keys(i).map(w=>({id:w,x:v,y:h(i[w],_,p,f)})):null)},[f,u,a,c,m,v,l,L,P,o,t,s,i,_,p]}class ai extends re{constructor(e){super(),ne(this,e,ui,fi,$,{model:11,res:12,params:0,margins:1,showGrid:2,xLabel:3,yLabel:4})}}function ci(r){let e;return{c(){e=D("p"),e.textContent="Extremes",g(e,"class","title")},m(n,t){y(n,e,t)},p:j,d(n){n&&k(e)}}}function Zr(r){let e,n,t;function l(s){r[4](s)}let o={label:"# PCs",model:r[0]};return r[2]!==void 0&&(o.value=r[2]),e=new Bt({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};i&1&&(f.model=s[0]),!n&&i&4&&(n=!0,f.value=s[2],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function mi(r){let e,n,t,l;e=new ue({props:{label:"",$$slots:{default:[ci]},$$scope:{ctx:r}}});let o=r[0]&&r[1]&&Zr(r);return{c(){M(e.$$.fragment),n=H(),o&&o.c(),t=ee()},m(s,i){S(e,s,i),y(s,n,i),o&&o.m(s,i),y(s,t,i),l=!0},p(s,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:s}),e.$set(f),s[0]&&s[1]?o?(o.p(s,i),i&3&&d(o,1)):(o=Zr(s),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Q(),b(o,1,1,()=>{o=null}),J())},i(s){l||(d(e.$$.fragment,s),d(o),l=!0)},o(s){b(e.$$.fragment,s),b(o),l=!1},d(s){s&&(k(n),k(t)),N(e,s),o&&o.d(s)}}}function hi(r,e,n){let{params:t}=e,{model:l}=e,{res:o}=e,s=1;function i(f){s=f,n(2,s)}return r.$$set=f=>{"params"in f&&n(3,t=f.params),"model"in f&&n(0,l=f.model),"res"in f&&n(1,o=f.res)},r.$$.update=()=>{r.$$.dirty&4&&n(3,t={ncomp:s})},[l,o,s,t,i]}class _i extends re{constructor(e){super(),ne(this,e,hi,mi,$,{params:3,model:0,res:1})}}function Qr(r,e,n){const t=r.slice();return t[10]=e[n],t}function Jr(r){let e,n;return e=new Tt({props:{margins:r[7],xLabel:r[6],yLabel:r[5],limX:r[4],limY:r[3],title:vi,$$slots:{box:[bi],yaxis:[pi],xaxis:[gi],default:[di]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.xLabel=t[6]),l&32&&(o.yLabel=t[5]),l&16&&(o.limX=t[4]),l&8&&(o.limY=t[3]),l&8220&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Xr(r){let e,n;return e=new It({props:{values:r[10],type:"p"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.values=t[10]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function di(r){let e,n,t,l,o,s,i;e=new on({props:{xStart:[r[4][0]],xEnd:[r[4][1]],yStart:[0],yEnd:[0],lineColor:"#a0a0a0"}}),t=new on({props:{yStart:[r[3][0]],yEnd:[r[3][1]],xStart:[0],xEnd:[0],lineColor:"#a0a0a0"}});let f=de(r[2]),u=[];for(let c=0;c<f.length;c+=1)u[c]=Xr(Qr(r,f,c));const a=c=>b(u[c],1,1,()=>{u[c]=null});return s=new Ot({}),{c(){M(e.$$.fragment),n=H(),M(t.$$.fragment),l=H();for(let c=0;c<u.length;c+=1)u[c].c();o=H(),M(s.$$.fragment)},m(c,m){S(e,c,m),y(c,n,m),S(t,c,m),y(c,l,m);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(c,m);y(c,o,m),S(s,c,m),i=!0},p(c,m){const h={};m&16&&(h.xStart=[c[4][0]]),m&16&&(h.xEnd=[c[4][1]]),e.$set(h);const _={};if(m&8&&(_.yStart=[c[3][0]]),m&8&&(_.yEnd=[c[3][1]]),t.$set(_),m&4){f=de(c[2]);let p;for(p=0;p<f.length;p+=1){const v=Qr(c,f,p);u[p]?(u[p].p(v,m),d(u[p],1)):(u[p]=Xr(v),u[p].c(),d(u[p],1),u[p].m(o.parentNode,o))}for(Q(),p=f.length;p<u.length;p+=1)a(p);J()}},i(c){if(!i){d(e.$$.fragment,c),d(t.$$.fragment,c);for(let m=0;m<f.length;m+=1)d(u[m]);d(s.$$.fragment,c),i=!0}},o(c){b(e.$$.fragment,c),b(t.$$.fragment,c),u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)b(u[m]);b(s.$$.fragment,c),i=!1},d(c){c&&(k(n),k(l),k(o)),N(e,c),N(t,c),Pe(u,c),N(s,c)}}}function gi(r){let e,n;return e=new zt({props:{showGrid:$r,slot:"xaxis"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function pi(r){let e,n;return e=new Pt({props:{showGrid:$r,slot:"yaxis"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function bi(r){let e,n;return e=new qt({props:{slot:"box"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function wi(r){let e,n,t=r[1]&&r[0]&&Jr(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[1]&&l[0]?t?(t.p(l,o),o&3&&d(t,1)):(t=Jr(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}const vi="Scores",$r=!0;function ki(r,e,n){let t,l,o,s,i,{model:f}=e,{params:u}=e,{res:a}=e;const c=[.75,1,.1,.5];function m(h,_,p){return{id:h,x:new le(tt(_,"scores",p.comp[0])),y:new le(tt(_,"scores",p.comp[1]))}}return r.$$set=h=>{"model"in h&&n(0,f=h.model),"params"in h&&n(1,u=h.params),"res"in h&&n(8,a=h.res)},r.$$.update=()=>{r.$$.dirty&258&&n(2,t=u&&a?Object.keys(a).map(h=>m(h,a[h],u)):null),r.$$.dirty&2&&n(6,l=u&&u.comp?"PC"+u.comp[0]:""),r.$$.dirty&2&&n(5,o=u&&u.comp?"PC"+u.comp[1]:""),r.$$.dirty&4&&n(4,s=t?Nt(...Object.keys(t).map(h=>Ut(t[h].x))):[0,1]),r.$$.dirty&4&&n(3,i=t?Nt(...Object.keys(t).map(h=>Ut(t[h].y))):[0,1])},[f,u,t,i,s,o,l,c,a]}class yi extends re{constructor(e){super(),ne(this,e,ki,wi,$,{model:0,params:1,res:8})}}function Ei(r){let e;return{c(){e=D("p"),e.textContent="Scores",g(e,"class","title")},m(n,t){y(n,e,t)},p:j,d(n){n&&k(e)}}}function xr(r){let e,n,t,l,o,s;function i(c){r[5](c)}let f={label:"PC for x-axis",model:r[0]};r[2]!==void 0&&(f.value=r[2]),e=new Bt({props:f}),fe.push(()=>be(e,"value",i));function u(c){r[6](c)}let a={label:"PC for y-axis",model:r[0]};return r[3]!==void 0&&(a.value=r[3]),l=new Bt({props:a}),fe.push(()=>be(l,"value",u)),{c(){M(e.$$.fragment),t=H(),M(l.$$.fragment)},m(c,m){S(e,c,m),y(c,t,m),S(l,c,m),s=!0},p(c,m){const h={};m&1&&(h.model=c[0]),!n&&m&4&&(n=!0,h.value=c[2],ve(()=>n=!1)),e.$set(h);const _={};m&1&&(_.model=c[0]),!o&&m&8&&(o=!0,_.value=c[3],ve(()=>o=!1)),l.$set(_)},i(c){s||(d(e.$$.fragment,c),d(l.$$.fragment,c),s=!0)},o(c){b(e.$$.fragment,c),b(l.$$.fragment,c),s=!1},d(c){c&&k(t),N(e,c),N(l,c)}}}function Ci(r){let e,n,t,l;e=new ue({props:{label:"",$$slots:{default:[Ei]},$$scope:{ctx:r}}});let o=r[0]&&r[1]&&xr(r);return{c(){M(e.$$.fragment),n=H(),o&&o.c(),t=ee()},m(s,i){S(e,s,i),y(s,n,i),o&&o.m(s,i),y(s,t,i),l=!0},p(s,[i]){const f={};i&128&&(f.$$scope={dirty:i,ctx:s}),e.$set(f),s[0]&&s[1]?o?(o.p(s,i),i&3&&d(o,1)):(o=xr(s),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Q(),b(o,1,1,()=>{o=null}),J())},i(s){l||(d(e.$$.fragment,s),d(o),l=!0)},o(s){b(e.$$.fragment,s),b(o),l=!1},d(s){s&&(k(n),k(t)),N(e,s),o&&o.d(s)}}}function Li(r,e,n){let{params:t}=e,{model:l}=e,{res:o}=e,s=1,i=l.ncomp>1?2:1;function f(a){s=a,n(2,s)}function u(a){i=a,n(3,i)}return r.$$set=a=>{"params"in a&&n(4,t=a.params),"model"in a&&n(0,l=a.model),"res"in a&&n(1,o=a.res)},r.$$.update=()=>{r.$$.dirty&12&&n(4,t={comp:[s,i]})},[l,o,s,i,t,f,u]}class Ai extends re{constructor(e){super(),ne(this,e,Li,Ci,$,{params:4,model:0,res:1})}}function el(r,e,n){const t=r.slice();return t[10]=e[n],t}function tl(r){let e,n;return e=new Tt({props:{margins:r[5],xLabel:zi,yLabel:Pi,limX:r[2],limY:r[1],title:r[4],$$slots:{box:[Mi],yaxis:[Ri],xaxis:[Ni],default:[Si]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.limX=t[2]),l&2&&(o.limY=t[1]),l&16&&(o.title=t[4]),l&8201&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function nl(r){let e,n;return e=new It({props:{values:r[10],type:"b"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.values=t[10]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Si(r){let e,n,t,l=de(r[3]),o=[];for(let i=0;i<l.length;i+=1)o[i]=nl(el(r,l,i));const s=i=>b(o[i],1,1,()=>{o[i]=null});return n=new Ot({props:{position:r[0].vartype==="cumexpvar"?"bottomright":"topright"}}),{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=H(),M(n.$$.fragment)},m(i,f){for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(i,f);y(i,e,f),S(n,i,f),t=!0},p(i,f){if(f&8){l=de(i[3]);let a;for(a=0;a<l.length;a+=1){const c=el(i,l,a);o[a]?(o[a].p(c,f),d(o[a],1)):(o[a]=nl(c),o[a].c(),d(o[a],1),o[a].m(e.parentNode,e))}for(Q(),a=l.length;a<o.length;a+=1)s(a);J()}const u={};f&1&&(u.position=i[0].vartype==="cumexpvar"?"bottomright":"topright"),n.$set(u)},i(i){if(!t){for(let f=0;f<l.length;f+=1)d(o[f]);d(n.$$.fragment,i),t=!0}},o(i){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)b(o[f]);b(n.$$.fragment,i),t=!1},d(i){i&&k(e),Pe(o,i),N(n,i)}}}function Ni(r){let e,n;return e=new zt({props:{showGrid:rl,slot:"xaxis"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Ri(r){let e,n;return e=new Pt({props:{showGrid:rl,slot:"yaxis"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Mi(r){let e,n;return e=new qt({props:{slot:"box"}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p:j,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Ti(r){let e,n,t=r[0]&&tl(r);return{c(){t&&t.c(),e=ee()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&d(t,1)):(t=tl(l),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(Q(),b(t,1,1,()=>{t=null}),J())},i(l){n||(d(t),n=!0)},o(l){b(t),n=!1},d(l){l&&k(e),t&&t.d(l)}}}const rl=!0,zi="Components",Pi="Relative variance";function qi(r,e,n){let t,l,o,s,i,{model:f}=e,{params:u}=e,{res:a}=e;const c=[.75,1,.1,.5];function m(h,_){if(!h||!_)return null;const p=new le(tt(h,"cumexpvar"));if(_.vartype=="cumexpvar")return p;const v=le.zeros(h.ncomp);return v.v[0]=p.v[0],v.v.set(pn(p).v,1),v}return r.$$set=h=>{"model"in h&&n(6,f=h.model),"params"in h&&n(0,u=h.params),"res"in h&&n(7,a=h.res)},r.$$.update=()=>{r.$$.dirty&1&&n(4,t=u&&u.vartype=="expvar"?"Explained variance":"Cumulative explained variance"),r.$$.dirty&64&&n(8,l=le.seq(1,f.ncomp)),r.$$.dirty&385&&n(3,o=Object.keys(a).map(h=>({id:h,x:l,y:m(a[h],u)}))),r.$$.dirty&64&&n(2,s=f?[.5,f.ncomp+.5]:[0,1])},n(1,i=[-.05,1.1]),[u,i,s,o,t,c,f,a,l]}class Yi extends re{constructor(e){super(),ne(this,e,qi,Ti,$,{model:6,params:0,res:7})}}function Ii(r){let e;return{c(){e=D("p"),e.textContent="Variance",g(e,"class","title")},m(n,t){y(n,e,t)},p:j,d(n){n&&k(e)}}}function ll(r){let e,n;return e=new ue({props:{label:"Type",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&36&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Oi(r){let e,n,t;function l(s){r[4](s)}let o={id:"variance",options:["expvar","cumexpvar"]};return r[2]!==void 0&&(o.value=r[2]),e=new Xe({props:o}),fe.push(()=>be(e,"value",l)),{c(){M(e.$$.fragment)},m(s,i){S(e,s,i),t=!0},p(s,i){const f={};!n&&i&4&&(n=!0,f.value=s[2],ve(()=>n=!1)),e.$set(f)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function Bi(r){let e,n,t,l;e=new ue({props:{label:"",$$slots:{default:[Ii]},$$scope:{ctx:r}}});let o=r[0]&&r[1]&&ll(r);return{c(){M(e.$$.fragment),n=H(),o&&o.c(),t=ee()},m(s,i){S(e,s,i),y(s,n,i),o&&o.m(s,i),y(s,t,i),l=!0},p(s,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:s}),e.$set(f),s[0]&&s[1]?o?(o.p(s,i),i&3&&d(o,1)):(o=ll(s),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(Q(),b(o,1,1,()=>{o=null}),J())},i(s){l||(d(e.$$.fragment,s),d(o),l=!0)},o(s){b(e.$$.fragment,s),b(o),l=!1},d(s){s&&(k(n),k(t)),N(e,s),o&&o.d(s)}}}function Vi(r,e,n){let{params:t}=e,{model:l}=e,{res:o}=e,s="expvar";function i(f){s=f,n(2,s)}return r.$$set=f=>{"params"in f&&n(3,t=f.params),"model"in f&&n(0,l=f.model),"res"in f&&n(1,o=f.res)},r.$$.update=()=>{r.$$.dirty&4&&n(3,t={vartype:s})},[l,o,s,t,i]}class Fi extends re{constructor(e){super(),ne(this,e,Vi,Bi,$,{params:3,model:0,res:1})}}const Nf="";function ol(r,e,n){const t=r.slice();return t[9]=e[n].label,t[10]=e[n].plotComponent,t[11]=e[n].controlsComponent,t[13]=n,t}function ji(r){let e,n,t;function l(){return r[7](r[13])}function o(){return r[8](r[13])}return{c(){e=D("button"),e.textContent=`${r[9]}`,g(e,"class","plot-selector svelte-83ihns")},m(s,i){y(s,e,i),n||(t=[Ce(e,"keydown",l),Ce(e,"click",o)],n=!0)},p(s,i){r=s},i:j,o:j,d(s){s&&k(e),n=!1,je(t)}}}function Wi(r){let e,n,t,l;function o(f){r[6](f)}var s=r[11];function i(f,u){let a={model:f[0],res:f[1]};return f[3]!==void 0&&(a.params=f[3]),{props:a}}return s&&(e=Lt(s,i(r)),fe.push(()=>be(e,"params",o))),{c(){e&&M(e.$$.fragment),t=ee()},m(f,u){e&&S(e,f,u),y(f,t,u),l=!0},p(f,u){if(s!==(s=f[11])){if(e){Q();const a=e;b(a.$$.fragment,1,0,()=>{N(a,1)}),J()}s?(e=Lt(s,i(f)),fe.push(()=>be(e,"params",o)),M(e.$$.fragment),d(e.$$.fragment,1),S(e,t.parentNode,t)):e=null}else if(s){const a={};u&1&&(a.model=f[0]),u&2&&(a.res=f[1]),!n&&u&8&&(n=!0,a.params=f[3],ve(()=>n=!1)),e.$set(a)}},i(f){l||(e&&d(e.$$.fragment,f),l=!0)},o(f){e&&b(e.$$.fragment,f),l=!1},d(f){f&&k(t),e&&N(e,f)}}}function sl(r){let e,n,t,l;const o=[Wi,ji],s=[];function i(f,u){return f[2]===f[13]?0:1}return e=i(r),n=s[e]=o[e](r),{c(){n.c(),t=ee()},m(f,u){s[e].m(f,u),y(f,t,u),l=!0},p(f,u){let a=e;e=i(f),e===a?s[e].p(f,u):(Q(),b(s[a],1,1,()=>{s[a]=null}),J(),n=s[e],n?n.p(f,u):(n=s[e]=o[e](f),n.c()),d(n,1),n.m(t.parentNode,t))},i(f){l||(d(n),l=!0)},o(f){b(n),l=!1},d(f){f&&k(t),s[e].d(f)}}}function Di(r){let e,n,t,l,o,s;var i=r[4][r[2]].plotComponent;function f(m,h){return{props:{model:m[0],res:m[1],params:m[3]}}}i&&(t=Lt(i,f(r)));let u=de(r[4]),a=[];for(let m=0;m<u.length;m+=1)a[m]=sl(ol(r,u,m));const c=m=>b(a[m],1,1,()=>{a[m]=null});return{c(){e=D("div"),n=D("div"),t&&M(t.$$.fragment),l=H(),o=D("div");for(let m=0;m<a.length;m+=1)a[m].c();g(n,"class","plot-area svelte-83ihns"),g(o,"class","plot-controls-area svelte-83ihns"),g(e,"class","plot-container svelte-83ihns")},m(m,h){y(m,e,h),F(e,n),t&&S(t,n,null),F(e,l),F(e,o);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(o,null);s=!0},p(m,[h]){if(h&4&&i!==(i=m[4][m[2]].plotComponent)){if(t){Q();const _=t;b(_.$$.fragment,1,0,()=>{N(_,1)}),J()}i?(t=Lt(i,f(m)),M(t.$$.fragment),d(t.$$.fragment,1),S(t,n,null)):t=null}else if(i){const _={};h&1&&(_.model=m[0]),h&2&&(_.res=m[1]),h&8&&(_.params=m[3]),t.$set(_)}if(h&63){u=de(m[4]);let _;for(_=0;_<u.length;_+=1){const p=ol(m,u,_);a[_]?(a[_].p(p,h),d(a[_],1)):(a[_]=sl(p),a[_].c(),d(a[_],1),a[_].m(o,null))}for(Q(),_=u.length;_<a.length;_+=1)c(_);J()}},i(m){if(!s){t&&d(t.$$.fragment,m);for(let h=0;h<u.length;h+=1)d(a[h]);s=!0}},o(m){t&&b(t.$$.fragment,m),a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)b(a[h]);s=!1},d(m){m&&k(e),t&&N(t),Pe(a,m)}}}function Gi(r,e,n){let{model:t}=e,{res:l}=e,o=0,s=null;const i=[{label:"Variance",plotComponent:Yi,controlsComponent:Fi},{label:"Scores",plotComponent:yi,controlsComponent:Ai},{label:"Extremes",plotComponent:ai,controlsComponent:_i},{label:"Distance",plotComponent:Js,controlsComponent:ri}];function f(m){n(3,s=null),n(2,o=m)}function u(m){s=m,n(3,s)}const a=m=>f(m),c=m=>f(m);return r.$$set=m=>{"model"in m&&n(0,t=m.model),"res"in m&&n(1,l=m.res)},[t,l,o,s,i,f,u,a,c]}class Hi extends re{constructor(e){super(),ne(this,e,Gi,Di,$,{model:0,res:1})}}const Rf="";function Ui(r){let e=r[1],n,t,l=il(r);return{c(){l.c(),n=ee()},m(o,s){l.m(o,s),y(o,n,s),t=!0},p(o,s){s&2&&$(e,e=o[1])?(Q(),b(l,1,1,j),J(),l=il(o),l.c(),d(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(d(l),t=!0)},o(o){b(l),t=!1},d(o){o&&k(n),l.d(o)}}}function Ki(r){let e;function n(o,s){return o[2]===null?Qi:Zi}let t=n(r),l=t(r);return{c(){e=D("div"),l.c(),g(e,"class","help-text svelte-bctncl")},m(o,s){y(o,e,s),l.m(e,null)},p(o,s){t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e,null)))},i:j,o:j,d(o){o&&k(e),l.d()}}}function il(r){let e,n;return e=new Hi({props:{model:r[4],res:r[5]}}),{c(){M(e.$$.fragment)},m(t,l){S(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.model=t[4]),l&32&&(o.res=t[5]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Zi(r){let e,n,t=r[4]===null&&fl(),l=r[4]!==null&&r[3]===null&&ul();return{c(){t&&t.c(),e=H(),l&&l.c(),n=ee()},m(o,s){t&&t.m(o,s),y(o,e,s),l&&l.m(o,s),y(o,n,s)},p(o,s){o[4]===null?t||(t=fl(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),o[4]!==null&&o[3]===null?l||(l=ul(),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){o&&(k(e),k(n)),t&&t.d(o),l&&l.d(o)}}}function Qi(r){let e;return{c(){e=D("p"),e.innerHTML=`<strong>Step 1.</strong>
               Load your calibration set from a CSV file. The file should contain numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables. First row can contain variable names (header) and first column can contain labels for the objects/observations — just set the corresponding options after selecting
               the file.`},m(n,t){y(n,e,t)},p:j,d(n){n&&k(e)}}}function fl(r){let e;return{c(){e=D("p"),e.innerHTML=`<strong>Step 2</strong>
               Next step is to create a global PCA model for the training set. Use more components/latent variables (PCs)
               than you expect to be optimal.`},m(n,t){y(n,e,t)},d(n){n&&k(e)}}}function ul(r){let e;return{c(){e=D("p"),e.innerHTML=`<strong>Step 3</strong>
               Now set necessary parameters for Procrustes cross-validation method and click button to compute the PV-set. It is recommended to use fewer number of segments (e.g. 3 or 4). The more segment you use the more time it will take to compute the PV-set.`},m(n,t){y(n,e,t)},d(n){n&&k(e)}}}function Ji(r){let e,n,t,l,o,s,i,f,u,a,c,m,h,_,p,v,L,P,q,w;function Y(T){r[6](T)}let z={};r[2]!==void 0&&(z.dataset=r[2]),l=new co({props:z}),fe.push(()=>be(l,"dataset",Y));function B(T){r[7](T)}function A(T){r[8](T)}let E={dataset:r[2]};r[4]!==void 0&&(E.model=r[4]),r[0]!==void 0&&(E.calres=r[0]),f=new ts({props:E}),fe.push(()=>be(f,"model",B)),fe.push(()=>be(f,"calres",A));function I(T){r[9](T)}function U(T){r[10](T)}let W={dataset:r[2],model:r[4]};r[3]!==void 0&&(W.pvset=r[3]),r[1]!==void 0&&(W.pvres=r[1]),h=new Io({props:W}),fe.push(()=>be(h,"pvset",I)),fe.push(()=>be(h,"pvres",U));const he=[Ki,Ui],te=[];function ae(T,K){return!T[3]||!T[1]?0:1}return P=ae(r),q=te[P]=he[P](r),{c(){e=D("div"),n=D("div"),t=D("div"),M(l.$$.fragment),s=H(),i=D("div"),M(f.$$.fragment),c=H(),m=D("div"),M(h.$$.fragment),v=H(),L=D("div"),q.c(),g(t,"class","data-loader svelte-bctncl"),g(i,"class","model-calculator svelte-bctncl"),g(m,"class","pcv-calculator svelte-bctncl"),g(n,"class","app-controls svelte-bctncl"),g(L,"class","app-content svelte-bctncl"),g(e,"class","app-container svelte-bctncl")},m(T,K){y(T,e,K),F(e,n),F(n,t),S(l,t,null),F(n,s),F(n,i),S(f,i,null),F(n,c),F(n,m),S(h,m,null),F(e,v),F(e,L),te[P].m(L,null),w=!0},p(T,[K]){const qe={};!o&&K&4&&(o=!0,qe.dataset=T[2],ve(()=>o=!1)),l.$set(qe);const De={};K&4&&(De.dataset=T[2]),!u&&K&16&&(u=!0,De.model=T[4],ve(()=>u=!1)),!a&&K&1&&(a=!0,De.calres=T[0],ve(()=>a=!1)),f.$set(De);const Ue={};K&4&&(Ue.dataset=T[2]),K&16&&(Ue.model=T[4]),!_&&K&8&&(_=!0,Ue.pvset=T[3],ve(()=>_=!1)),!p&&K&2&&(p=!0,Ue.pvres=T[1],ve(()=>p=!1)),h.$set(Ue);let Fe=P;P=ae(T),P===Fe?te[P].p(T,K):(Q(),b(te[Fe],1,1,()=>{te[Fe]=null}),J(),q=te[P],q?q.p(T,K):(q=te[P]=he[P](T),q.c()),d(q,1),q.m(L,null))},i(T){w||(d(l.$$.fragment,T),d(f.$$.fragment,T),d(h.$$.fragment,T),d(q),w=!0)},o(T){b(l.$$.fragment,T),b(f.$$.fragment,T),b(h.$$.fragment,T),b(q),w=!1},d(T){T&&k(e),N(l),N(f),N(h),te[P].d()}}}function Xi(r,e,n){let t,l=null,o=null,s=null,i=null,f=null;function u(_){l=_,n(2,l)}function a(_){s=_,n(4,s)}function c(_){i=_,n(0,i)}function m(_){o=_,n(3,o)}function h(_){f=_,n(1,f)}return r.$$.update=()=>{r.$$.dirty&3&&n(5,t={cal:i,pv:f})},[i,f,l,o,s,t,u,a,c,m,h]}class $i extends re{constructor(e){super(),ne(this,e,Xi,Ji,$,{})}}const Mf="";function xi(r){let e,n,t,l,o,s,i,f;return o=new $i({}),{c(){e=D("div"),n=D("header"),n.innerHTML='<div class="header-group svelte-q202ia"><img class="logo svelte-q202ia" alt="PCV logo" src="logo.svg"/> <h1 class="svelte-q202ia">Procrustes cross-validation (PCA based)</h1> <p class="svelte-q202ia">Create a validation set in your browser</p></div>',t=H(),l=D("main"),M(o.$$.fragment),s=H(),i=D("footer"),i.innerHTML='<p class="svelte-q202ia">More details: <a class="github-link svelte-q202ia" href="https://github.com/svkucheryavski/pcv/">svkucheryavski/pcv</a></p> <p class="svelte-q202ia">Theory and citation reference: <a class="paper-link svelte-q202ia" href="https://doi.org/10.1016/j.aca.2023.341096">10.1016/j.aca.2023.341096</a></p>',g(n,"class","svelte-q202ia"),g(l,"class","svelte-q202ia"),g(i,"class","svelte-q202ia"),g(e,"class","page svelte-q202ia")},m(u,a){y(u,e,a),F(e,n),F(e,t),F(e,l),S(o,l,null),F(e,s),F(e,i),f=!0},p:j,i(u){f||(d(o.$$.fragment,u),f=!0)},o(u){b(o.$$.fragment,u),f=!1},d(u){u&&k(e),N(o)}}}class ef extends re{constructor(e){super(),ne(this,e,null,xi,$,{})}}new ef({target:document.body});const tf=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pcvpca.js.map
